import{r as n,aF as I,aI as W,l as _,Y as M,cq as j,v as q}from"./react-core-B6hadH-M.js";import{t as l,h as $}from"./index-D_6pZib5.js";const O=({fetchWithAuth:c,apiBaseUrl:s,onClose:x,serverId:P})=>{const[y,T]=n.useState([]),[A,B]=n.useState(!0),[h,i]=n.useState(!1),[d,R]=n.useState(""),[u,b]=n.useState(""),[p,E]=n.useState(""),[m,v]=n.useState(""),[S,C]=n.useState(""),[r,k]=n.useState(!1),[w,z]=n.useState("daily");n.useEffect(()=>{f()},[]);const f=async()=>{try{const a=await(await c(`${s}/announcements/scheduled/`)).json();T(a.announcements||[])}catch(t){console.error("Failed to load scheduled announcements:",t),l.error("Failed to load announcements")}finally{B(!1)}},D=async t=>{if(t.preventDefault(),!d||!u||!p||!m){l.error("Please fill in all required fields");return}const a=`${p}T${m}:00`;try{const o=await(await c(`${s}/announcements/schedule/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d,message:u,scheduled_at:a,channel_id:S||null,recurring:r,recurring_type:r?w:null})})).json();o.success?(l.success("Announcement scheduled successfully!"),f(),F(),i(!1)):l.error(o.error||"Failed to schedule announcement")}catch(g){console.error("Schedule error:",g),l.error("Failed to schedule announcement")}},L=async t=>{if(await $("Delete this scheduled announcement?"))try{await c(`${s}/announcements/${t}/delete/`,{method:"DELETE"}),l.success("Announcement deleted"),f()}catch(a){console.error("Delete error:",a),l.error("Failed to delete announcement")}},F=()=>{R(""),b(""),E(""),v(""),C(""),k(!1),z("daily")},G=t=>{const a=new Date,o=(new Date(t)-a)/(1e3*60*60);return o<0?"#f04747":o<24?"#faa61a":"#43b581"};return React.createElement("div",{style:e.overlay,onClick:x},React.createElement("div",{style:e.modal,onClick:t=>t.stopPropagation()},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(I,{style:{fontSize:"24px",color:"#5865f2"}}),React.createElement("h2",{style:{margin:0,fontSize:"20px"}},"Scheduled Announcements")),React.createElement("div",{style:e.headerRight},!h&&React.createElement("button",{onClick:()=>i(!0),style:e.addBtn},React.createElement(W,null)," Schedule New"),React.createElement("button",{onClick:x,style:e.closeBtn},React.createElement(_,null)))),React.createElement("div",{style:e.content},h?React.createElement("div",{style:e.createForm},React.createElement("h3",{style:e.formTitle},"Schedule New Announcement"),React.createElement("form",{onSubmit:D},React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Title *"),React.createElement("input",{type:"text",value:d,onChange:t=>R(t.target.value),placeholder:"Announcement title...",style:e.input,required:!0})),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Message *"),React.createElement("textarea",{value:u,onChange:t=>b(t.target.value),placeholder:"Announcement message...",style:{...e.input,minHeight:"120px"},required:!0})),React.createElement("div",{style:e.formRow},React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Date *"),React.createElement("input",{type:"date",value:p,onChange:t=>E(t.target.value),style:e.input,required:!0})),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Time *"),React.createElement("input",{type:"time",value:m,onChange:t=>v(t.target.value),style:e.input,required:!0}))),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Channel ID (Optional)"),React.createElement("input",{type:"text",value:S,onChange:t=>C(t.target.value),placeholder:"Leave empty for all channels",style:e.input})),React.createElement("div",{style:e.checkboxGroup},React.createElement("label",{style:e.checkboxLabel},React.createElement("input",{type:"checkbox",checked:r,onChange:t=>k(t.target.checked),style:e.checkbox}),React.createElement("span",null,"Recurring Announcement"))),r&&React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Repeat"),React.createElement("select",{value:w,onChange:t=>z(t.target.value),style:e.select},React.createElement("option",{value:"daily"},"Daily"),React.createElement("option",{value:"weekly"},"Weekly"),React.createElement("option",{value:"monthly"},"Monthly"))),React.createElement("div",{style:e.formActions},React.createElement("button",{type:"submit",style:e.submitBtn},React.createElement(M,null)," Schedule Announcement"),React.createElement("button",{type:"button",onClick:()=>{i(!1),F()},style:e.cancelBtn},"Cancel")))):A?React.createElement("div",{style:e.loading},"Loading..."):y.length===0?React.createElement("div",{style:e.empty},React.createElement(I,{style:{fontSize:"48px",color:"#99aab5",marginBottom:"16px"}}),React.createElement("p",null,"No scheduled announcements"),React.createElement("p",{style:{fontSize:"14px",color:"#99aab5"}},"Schedule your first announcement to get started")):React.createElement("div",{style:e.announcementsList},y.map(t=>React.createElement("div",{key:t.id,style:e.announcementCard},React.createElement("div",{style:{...e.statusIndicator,backgroundColor:G(t.scheduled_at)}}),React.createElement("div",{style:e.announcementContent},React.createElement("h3",{style:e.announcementTitle},t.title),React.createElement("p",{style:e.announcementMessage},t.message),React.createElement("div",{style:e.announcementMeta},React.createElement("span",null,React.createElement(j,null)," ",new Date(t.scheduled_at).toLocaleString()),t.recurring&&React.createElement(React.Fragment,null,React.createElement("span",{style:{margin:"0 8px"}},"â€¢"),React.createElement("span",null,"ðŸ” ",t.recurring_type)),t.channel_id&&React.createElement(React.Fragment,null,React.createElement("span",{style:{margin:"0 8px"}},"â€¢"),React.createElement("span",null,"ðŸ“º Channel: ",t.channel_id)))),React.createElement("div",{style:e.announcementActions},React.createElement("button",{onClick:()=>L(t.id),style:e.deleteIconBtn,title:"Delete"},React.createElement(q,null)))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"85vh",display:"flex",flexDirection:"column",color:"#fff"},header:{padding:"20px",borderBottom:"1px solid #444",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"12px"},addBtn:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"6px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},closeBtn:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",padding:"40px",color:"#99aab5"},empty:{textAlign:"center",padding:"60px 20px",color:"#dcddde"},createForm:{maxWidth:"600px",margin:"0 auto"},formTitle:{fontSize:"18px",fontWeight:"600",marginBottom:"24px"},formGroup:{marginBottom:"20px"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#dcddde"},input:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"6px",color:"#fff",fontSize:"14px",boxSizing:"border-box"},select:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"6px",color:"#fff",fontSize:"14px"},checkboxGroup:{marginBottom:"20px"},checkboxLabel:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"14px"},checkbox:{width:"18px",height:"18px",cursor:"pointer"},formActions:{display:"flex",gap:"12px",marginTop:"24px"},submitBtn:{flex:1,padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},cancelBtn:{padding:"12px 24px",backgroundColor:"#4e5058",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer"},announcementsList:{display:"flex",flexDirection:"column",gap:"12px"},announcementCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",gap:"16px",position:"relative",overflow:"hidden"},statusIndicator:{position:"absolute",left:0,top:0,bottom:0,width:"4px"},announcementContent:{flex:1,paddingLeft:"12px"},announcementTitle:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},announcementMessage:{fontSize:"14px",color:"#dcddde",marginBottom:"12px",lineHeight:"1.6"},announcementMeta:{fontSize:"12px",color:"#99aab5",display:"flex",alignItems:"center",flexWrap:"wrap"},announcementActions:{display:"flex",alignItems:"flex-start",gap:"8px"},deleteIconBtn:{padding:"8px",backgroundColor:"#f04747",border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"14px"}};export{O as default};
