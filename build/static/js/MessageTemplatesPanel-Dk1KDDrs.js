var v=Object.defineProperty;var n=(a,s)=>v(a,"name",{value:s,configurable:!0});import{r as i,j as e}from"./react-core-Djgtqrmb.js";import{av as m,a as C,an as S,aV as w,f as z}from"./icons-vendor-BW7dxHkX.js";import{t as r}from"./index-m2zCEI_Z.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const M=n(({fetchWithAuth:a,apiBaseUrl:s,onSelectTemplate:u,onClose:d})=>{const[f,y]=i.useState([]),[l,p]=i.useState({name:"",content:""}),[h,g]=i.useState(!0);i.useEffect(()=>{c()},[]);const c=n(async()=>{try{g(!0);const t=await a(`${s}/templates/`);if(t.ok){const x=await t.json();y(x)}}catch{}finally{g(!1)}},"loadTemplates"),b=n(async()=>{if(!l.name.trim()||!l.content.trim()){r.error("İsim ve içerik gerekli");return}try{(await a(`${s}/templates/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?(r.success("Şablon oluşturuldu"),p({name:"",content:""}),c()):r.error("Şablon oluşturulamadı")}catch{r.error("Bir hata oluştu")}},"createTemplate"),j=n(async t=>{try{(await a(`${s}/templates/${t}/`,{method:"DELETE"})).ok?(r.success("Şablon silindi"),c()):r.error("Şablon silinemedi")}catch{r.error("Bir hata oluştu")}},"deleteTemplate"),k=n(t=>{u&&(u(t.content),r.success(`"${t.name}" şablonu kullanıldı`),d())},"useTemplate");return e.jsx("div",{style:o.overlay,onClick:d,children:e.jsxs("div",{style:o.modal,onClick:n(t=>t.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:o.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(m,{style:{color:"#5865f2"}}),e.jsx("h2",{style:{margin:0},children:"Mesaj Şablonları"})]}),e.jsx(C,{onClick:d,style:o.closeBtn})]}),e.jsxs("div",{style:o.createSection,children:[e.jsx("input",{type:"text",value:l.name,onChange:n(t=>p({...l,name:t.target.value}),"onChange"),placeholder:"Şablon adı (örn: Toplantı Daveti)",style:o.input}),e.jsx("textarea",{value:l.content,onChange:n(t=>p({...l,content:t.target.value}),"onChange"),placeholder:"Şablon içeriği...",style:o.textarea,rows:3}),e.jsxs("button",{onClick:b,style:o.createBtn,children:[e.jsx(S,{})," Şablon Oluştur"]})]}),e.jsx("div",{style:o.content,children:h?e.jsx("div",{style:o.loading,children:"Yükleniyor..."}):f.length===0?e.jsxs("div",{style:o.empty,children:[e.jsx(m,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),e.jsx("p",{children:"Henüz şablon yok"}),e.jsx("p",{style:{fontSize:"12px",color:"#888"},children:"Sık kullandığınız mesajları şablon olarak kaydedin"})]}):f.map(t=>e.jsxs("div",{style:o.templateCard,children:[e.jsx("div",{style:o.templateIcon,children:e.jsx(m,{style:{color:"#5865f2"}})}),e.jsxs("div",{style:o.templateContent,children:[e.jsx("div",{style:o.templateName,children:t.name}),e.jsxs("div",{style:o.templatePreview,children:[t.content.substring(0,100),t.content.length>100&&"..."]}),e.jsxs("div",{style:o.templateMeta,children:[t.use_count||0," kez kullanıldı"]})]}),e.jsxs("div",{style:o.templateActions,children:[e.jsxs("button",{onClick:n(()=>k(t),"onClick"),style:o.useBtn,title:"Şablonu kullan",children:[e.jsx(w,{})," Kullan"]}),e.jsx("button",{onClick:n(()=>j(t.id),"onClick"),style:o.deleteBtn,title:"Şablonu sil",children:e.jsx(z,{})})]})]},t.id))})]})})},"MessageTemplatesPanel"),o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},createSection:{padding:"20px",borderBottom:"1px solid #333"},input:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"10px"},textarea:{width:"100%",padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",resize:"vertical",marginBottom:"10px"},createBtn:{width:"100%",backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},templateCard:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},templateIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#5865f21a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},templateContent:{flex:1},templateName:{fontWeight:"600",fontSize:"16px",marginBottom:"6px",color:"#dcddde"},templatePreview:{fontSize:"13px",color:"#888",lineHeight:"1.4",marginBottom:"6px"},templateMeta:{fontSize:"12px",color:"#666"},templateActions:{display:"flex",flexDirection:"column",gap:"8px"},useBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},deleteBtn:{backgroundColor:"#f04747",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{M as default};
