{"version":3,"file":"PollCreateModal-C0kTUS7Q.js","sources":["../../../src/components/PollCreateModal.js"],"sourcesContent":["\nimport { useState } from 'react';\nimport { FaPlus, FaTrash, FaTimes } from 'react-icons/fa';\n\nconst PollCreateModal = ({ onClose, fetchWithAuth, apiBaseUrl, activeRoomSlug }) => {\n    const [question, setQuestion] = useState('');\n    const [options, setOptions] = useState(['', '']);\n    const [allowMultiple, setAllowMultiple] = useState(false);\n    const [expiresIn, setExpiresIn] = useState('3600'); // Default 1 hour\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const handleOptionChange = (index, value) => {\n        const newOptions = [...options];\n        newOptions[index] = value;\n        setOptions(newOptions);\n    };\n\n    const addOption = () => {\n        if (options.length < 10) {\n            setOptions([...options, '']);\n        }\n    };\n\n    const removeOption = (index) => {\n        if (options.length > 2) {\n            const newOptions = options.filter((_, i) => i !== index);\n            setOptions(newOptions);\n        }\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validation\n        if (!question.trim()) {\n            setError('Soru boş olamaz.');\n            return;\n        }\n        const validOptions = options.filter(o => o.trim() !== '');\n        if (validOptions.length < 2) {\n            setError('En az 2 seçenek girmelisiniz.');\n            return;\n        }\n\n        setIsLoading(true);\n\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/polls/create/`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    room_slug: activeRoomSlug,\n                    question: question,\n                    options: validOptions,\n                    allow_multiple: allowMultiple,\n                    expires_in: expiresIn ? parseInt(expiresIn) : null\n                })\n            });\n\n            if (response.ok) {\n                onClose();\n            } else {\n                const data = await response.json();\n                setError(data.error || 'Anket oluşturulamadı.');\n            }\n        } catch (err) {\n            setError('Bir hata oluştu: ' + err.message);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div style={{\n            position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n            backgroundColor: 'rgba(0,0,0,0.7)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 2000\n        }}>\n            <div style={{\n                backgroundColor: '#36393f', padding: '20px', borderRadius: '8px', width: '400px', maxWidth: '90%',\n                color: 'white', display: 'flex', flexDirection: 'column', gap: '15px'\n            }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <h3 style={{ margin: 0 }}>Anket Oluştur</h3>\n                    <button onClick={onClose} style={{ background: 'none', border: 'none', color: '#b9bbbe', cursor: 'pointer' }}>\n                        <FaTimes />\n                    </button>\n                </div>\n\n                {error && <div style={{ color: '#ed4245', fontSize: '14px' }}>{error}</div>}\n\n                <input\n                    type=\"text\"\n                    placeholder=\"Soru ne?\"\n                    value={question}\n                    onChange={(e) => setQuestion(e.target.value)}\n                    style={{\n                        padding: '10px', borderRadius: '4px', border: 'none', backgroundColor: '#202225', color: 'white'\n                    }}\n                />\n\n                <div style={{ maxHeight: '200px', overflowY: 'auto', display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                    {options.map((opt, idx) => (\n                        <div key={idx} style={{ display: 'flex', gap: '5px' }}>\n                            <input\n                                type=\"text\"\n                                placeholder={`Seçenek ${idx + 1}`}\n                                value={opt}\n                                onChange={(e) => handleOptionChange(idx, e.target.value)}\n                                style={{\n                                    flex: 1, padding: '8px', borderRadius: '4px', border: 'none', backgroundColor: '#202225', color: 'white'\n                                }}\n                            />\n                            {options.length > 2 && (\n                                <button onClick={() => removeOption(idx)} style={{ background: 'none', border: 'none', color: '#ed4245', cursor: 'pointer' }}>\n                                    <FaTrash />\n                                </button>\n                            )}\n                        </div>\n                    ))}\n                </div>\n\n                {options.length < 10 && (\n                    <button onClick={addOption} style={{\n                        display: 'flex', alignItems: 'center', gap: '5px', background: 'none', border: 'none', color: '#3ba55d', cursor: 'pointer', alignSelf: 'flex-start'\n                    }}>\n                        <FaPlus /> Seçenek Ekle\n                    </button>\n                )}\n\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\n                    <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer' }}>\n                        <input\n                            type=\"checkbox\"\n                            checked={allowMultiple}\n                            onChange={(e) => setAllowMultiple(e.target.checked)}\n                        />\n                        Birden çok seçime izin ver\n                    </label>\n\n                    <select\n                        value={expiresIn}\n                        onChange={(e) => setExpiresIn(e.target.value)}\n                        style={{ padding: '8px', borderRadius: '4px', backgroundColor: '#202225', color: 'white', border: 'none' }}\n                    >\n                        <option value=\"3600\">1 Saat</option>\n                        <option value=\"86400\">24 Saat</option>\n                        <option value=\"604800\">1 Hafta</option>\n                        <option value=\"\">Süresiz</option>\n                    </select>\n                </div>\n\n                <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '10px', marginTop: '10px' }}>\n                    <button onClick={onClose} style={{\n                        padding: '10px 20px', borderRadius: '4px', border: 'none', backgroundColor: 'transparent', color: 'white', cursor: 'pointer'\n                    }}>İptal</button>\n                    <button onClick={handleSubmit} disabled={isLoading} style={{\n                        padding: '10px 20px', borderRadius: '4px', border: 'none', backgroundColor: '#5865f2', color: 'white', cursor: 'pointer', opacity: isLoading ? 0.7 : 1\n                    }}>\n                        {isLoading ? 'Oluşturuluyor...' : 'Oluştur'}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default PollCreateModal;\n\n\n"],"names":["useState","jsx","jsxs"],"mappings":"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"}