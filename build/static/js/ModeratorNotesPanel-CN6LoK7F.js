import{r as n,aQ as y,l as R,aI as k,v as b}from"./react-core-B6hadH-M.js";import{t as o}from"./index-D_6pZib5.js";const v=({fetchWithAuth:l,apiBaseUrl:s,username:a,onClose:d})=>{const[p,f]=n.useState([]),[g,m]=n.useState(!0),[i,x]=n.useState("");n.useEffect(()=>{c()},[a]);const c=async()=>{try{m(!0);const e=await l(`${s}/moderation/notes/list/?username=${a}`);if(e.ok){const r=await e.json();f(r)}}catch(e){console.error("Not yükleme hatası:",e),o.error("Notlar yüklenemedi")}finally{m(!1)}},u=async()=>{if(!i.trim()){o.error("Not içeriği boş olamaz");return}try{(await l(`${s}/moderation/notes/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,note:i})})).ok?(o.success("Not eklendi"),x(""),c()):o.error("Not eklenemedi")}catch(e){console.error("Not ekleme hatası:",e),o.error("Bir hata oluştu")}},E=async e=>{try{(await l(`${s}/moderation/notes/${e}/delete/`,{method:"DELETE"})).ok&&(o.success("Not silindi"),c())}catch(r){console.error("Not silme hatası:",r),o.error("Bir hata oluştu")}};return React.createElement("div",{style:t.overlay,onClick:d},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(y,{style:{color:"#faa61a"}}),React.createElement("h2",{style:{margin:0}},"Moderatör Notları - ",a)),React.createElement(R,{onClick:d,style:t.closeBtn})),React.createElement("div",{style:t.addNote},React.createElement("textarea",{placeholder:"Yeni not ekle...",value:i,onChange:e=>x(e.target.value),style:t.textarea,rows:3}),React.createElement("button",{onClick:u,style:t.addBtn},React.createElement(k,null)," Not Ekle")),React.createElement("div",{style:t.notesList},g?React.createElement("div",{style:t.loading},"Yükleniyor..."):p.length===0?React.createElement("div",{style:t.empty},React.createElement(y,{style:{fontSize:"48px",color:"#555"}}),React.createElement("p",null,"Henüz not yok")):p.map(e=>React.createElement("div",{key:e.id,style:t.noteItem},React.createElement("div",{style:t.noteContent},React.createElement("div",{style:t.noteMeta},React.createElement("strong",null,e.moderator_username),React.createElement("span",{style:{color:"#888",fontSize:"12px"}},new Date(e.created_at).toLocaleString("tr-TR"))),React.createElement("div",{style:t.noteText},e.note)),React.createElement("button",{onClick:()=>E(e.id),style:t.deleteBtn,title:"Sil"},React.createElement(b,null)))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},addNote:{padding:"20px",borderBottom:"1px solid #333"},textarea:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"10px",resize:"vertical",fontFamily:"inherit"},addBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},notesList:{flex:1,overflowY:"auto",padding:"20px"},noteItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},noteContent:{flex:1},noteMeta:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},noteText:{color:"#dcddde",lineHeight:"1.5",whiteSpace:"pre-wrap"},deleteBtn:{backgroundColor:"transparent",border:"none",color:"#ed4245",cursor:"pointer",fontSize:"18px",padding:"10px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{v as default};
