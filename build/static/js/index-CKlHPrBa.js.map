{"version":3,"file":"index-CKlHPrBa.js","sources":["../../../src/components/WatchTogether/useWatchParty.js","../../../src/components/WatchTogether/WatchTogether.js"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from 'react';\nimport { API_BASE_URL, WS_PROTOCOL, API_HOST } from '../../utils/constants';\nimport toast from '../../utils/toast';\n\nexport const REACTION_EMOJIS = ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ”¥', 'ðŸ‘', 'ðŸŽ‰'];\n\nexport const extractYouTubeId = (url) => {\n  const match = url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/);\n  return match ? match[1] : '';\n};\n\nexport default function useWatchParty(roomId, onClose) {\n  const [party, setParty] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [viewers, setViewers] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [isHost, setIsHost] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showChat, setShowChat] = useState(true);\n  const [reactions, setReactions] = useState([]);\n\n  const wsRef = useRef(null);\n  const playerRef = useRef(null);\n  const containerRef = useRef(null);\n  const chatEndRef = useRef(null);\n  const heartbeatRef = useRef(null);\n\n  const token = localStorage.getItem('access_token');\n\n  // â”€â”€ WS message handlers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleSyncPlayback = useCallback((data) => {\n    if (data.by_user === 'system' || !isHost) {\n      setCurrentTime(data.current_time);\n      setIsPlaying(data.status === 'playing');\n      if (playerRef.current) {\n        playerRef.current.seekTo(data.current_time);\n        data.status === 'playing' ? playerRef.current.play() : playerRef.current.pause();\n      }\n    }\n  }, [isHost]);\n\n  const handleReaction = useCallback((data) => {\n    const reactionId = Date.now() + Math.random();\n    setReactions(prev => [...prev, { ...data, id: reactionId }]);\n    setTimeout(() => setReactions(prev => prev.filter(r => r.id !== reactionId)), 3000);\n  }, []);\n\n  const handleChatMessage = useCallback((data) => {\n    setMessages(prev => [...prev, data]);\n    setTimeout(() => chatEndRef.current?.scrollIntoView({ behavior: 'smooth' }), 100);\n  }, []);\n\n  const handleViewerJoined = useCallback((data) => {\n    toast.success(`${data.username} katÄ±ldÄ±!`);\n    setViewers(prev => prev.find(v => v.username === data.username) ? prev : [...prev, { username: data.username, id: data.user_id }]);\n  }, []);\n\n  const handleViewerLeft = useCallback((data) => {\n    setViewers(prev => prev.filter(v => v.username !== data.username));\n  }, []);\n\n  const handlePartyEnded = useCallback(() => {\n    toast.info('Watch Party sona erdi');\n    setParty(null);\n    onClose?.();\n  }, [onClose]);\n\n  const handleVideoChanged = useCallback((data) => {\n    setParty(prev => ({ ...prev, video_url: data.video_url, video_title: data.video_title, embed_url: data.embed_url }));\n    setCurrentTime(0);\n    setIsPlaying(false);\n  }, []);\n\n  // â”€â”€ WebSocket connection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const connectWebSocket = useCallback((partyId) => {\n    if (wsRef.current) wsRef.current.close();\n\n    const ws = new WebSocket(`${WS_PROTOCOL}://${API_HOST}/ws/watch-party/${partyId}/?token=${token}`);\n\n    ws.onopen = () => ws.send(JSON.stringify({ type: 'request_sync' }));\n    ws.onmessage = (event) => {\n      const d = JSON.parse(event.data);\n      const handlers = {\n        sync_playback: handleSyncPlayback, reaction: handleReaction,\n        chat_message: handleChatMessage, viewer_joined: handleViewerJoined,\n        viewer_left: handleViewerLeft, party_ended: handlePartyEnded,\n        video_changed: handleVideoChanged\n      };\n      handlers[d.type]?.(d);\n    };\n    ws.onerror = (err) => console.error('ðŸ“º Watch Party WebSocket error:', err);\n\n    wsRef.current = ws;\n    heartbeatRef.current = setInterval(() => {\n      if (ws.readyState === WebSocket.OPEN) {\n        ws.send(JSON.stringify({ type: 'heartbeat', local_time: currentTime, is_buffering: false }));\n      }\n    }, 5000);\n  }, [token, currentTime, handleSyncPlayback, handleReaction, handleChatMessage, handleViewerJoined, handleViewerLeft, handlePartyEnded, handleVideoChanged]);\n\n  // â”€â”€ API calls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const createWatchParty = async () => {\n    if (!videoUrl.trim()) { toast.error('Video URL gerekli'); return; }\n    setIsLoading(true);\n    try {\n      const res = await fetch(`${API_BASE_URL}/rooms/${roomId}/watch-party/`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` },\n        body: JSON.stringify({ video_url: videoUrl, allow_control: false })\n      });\n      if (res.ok) {\n        const data = await res.json();\n        setParty(data); setIsHost(true); setShowCreateModal(false);\n        connectWebSocket(data.id);\n        toast.success('Watch Party oluÅŸturuldu! ðŸŽ‰');\n      } else {\n        const err = await res.json();\n        toast.error(err.error || 'Watch Party oluÅŸturulamadÄ±');\n      }\n    } catch { toast.error('BaÄŸlantÄ± hatasÄ±'); }\n    finally { setIsLoading(false); }\n  };\n\n  const joinWatchParty = async (partyId) => {\n    setIsLoading(true);\n    try {\n      const res = await fetch(`${API_BASE_URL}/watch-party/${partyId}/join/`, {\n        method: 'POST', headers: { 'Authorization': `Bearer ${token}` }\n      });\n      if (res.ok) {\n        const partyRes = await fetch(`${API_BASE_URL}/watch-party/${partyId}/`, { headers: { 'Authorization': `Bearer ${token}` } });\n        const partyData = await partyRes.json();\n        setParty(partyData); setIsHost(partyData.is_host);\n        setViewers(partyData.viewers || []); setCurrentTime(partyData.current_time);\n        setIsPlaying(partyData.status === 'playing');\n        connectWebSocket(partyId);\n        toast.success('Watch Party\\'ye katÄ±ldÄ±n! ðŸŽ¬');\n      } else {\n        const err = await res.json();\n        toast.error(err.error || 'KatÄ±lÄ±namadÄ±');\n      }\n    } catch { toast.error('BaÄŸlantÄ± hatasÄ±'); }\n    finally { setIsLoading(false); }\n  };\n\n  // â”€â”€ Control functions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const sendSync = (action) => {\n    if (!isHost || !wsRef.current) return;\n    wsRef.current.send(JSON.stringify({ type: 'sync', action, current_time: currentTime, playback_rate: 1.0 }));\n  };\n\n  const sendReaction = (emoji) => {\n    if (!wsRef.current) return;\n    wsRef.current.send(JSON.stringify({ type: 'reaction', emoji, video_time: currentTime }));\n  };\n\n  const sendMessage = () => {\n    if (!newMessage.trim() || !wsRef.current) return;\n    wsRef.current.send(JSON.stringify({ type: 'message', content: newMessage, video_time: currentTime }));\n    setNewMessage('');\n  };\n\n  const endParty = async () => {\n    if (!party || !isHost) return;\n    try { await fetch(`${API_BASE_URL}/watch-party/${party.id}/end/`, { method: 'POST', headers: { 'Authorization': `Bearer ${token}` } }); }\n    catch (err) { console.error('End party error:', err); }\n  };\n\n  const togglePlay = () => {\n    if (isHost) sendSync(isPlaying ? 'pause' : 'play');\n    setIsPlaying(!isPlaying);\n  };\n\n  const toggleFullscreen = () => {\n    if (!containerRef.current) return;\n    if (!document.fullscreenElement) { containerRef.current.requestFullscreen(); setIsFullscreen(true); }\n    else { document.exitFullscreen(); setIsFullscreen(false); }\n  };\n\n  // â”€â”€ Cleanup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  useEffect(() => () => {\n    wsRef.current?.close();\n    if (heartbeatRef.current) clearInterval(heartbeatRef.current);\n  }, []);\n\n  return {\n    party, isLoading, showCreateModal, setShowCreateModal, videoUrl, setVideoUrl,\n    viewers, messages, newMessage, setNewMessage, isHost, isPlaying, currentTime,\n    isMuted, setIsMuted, isFullscreen, showChat, setShowChat, reactions,\n    playerRef, containerRef, chatEndRef,\n    createWatchParty, joinWatchParty, sendReaction, sendMessage, endParty,\n    togglePlay, toggleFullscreen\n  };\n}\n","import { FaPlay, FaPause, FaExpand, FaCompress, FaUsers, FaPlus, FaTimes, FaVolumeUp, FaVolumeMute } from 'react-icons/fa';\nimport useWatchParty, { REACTION_EMOJIS, extractYouTubeId } from './useWatchParty';\nimport './WatchTogether.css';\n\nconst WatchTogether = ({ roomId, onClose }) => {\n  const w = useWatchParty(roomId, onClose);\n\n  if (!w.party) {\n    return (\n      <div className=\"watch-together-container\">\n        <div className=\"watch-together-empty\">\n          <h2>{'ðŸ“º'} Watch Together</h2>\n          <p>ArkadaÅŸlarÄ±nla birlikte video izle!</p>\n          <button className=\"create-party-btn\" onClick={() => w.setShowCreateModal(true)}>\n            <FaPlus /> Yeni Watch Party OluÅŸtur\n          </button>\n          <div className=\"supported-platforms\">\n            <span>Desteklenen platformlar:</span>\n            <div className=\"platforms\"><span>YouTube</span><span>Twitch</span><span>Vimeo</span><span>Dailymotion</span></div>\n          </div>\n        </div>\n        {w.showCreateModal && (\n          <div className=\"watch-modal-overlay\" onClick={() => w.setShowCreateModal(false)}>\n            <div className=\"watch-modal\" onClick={e => e.stopPropagation()}>\n              <h3>{'ðŸŽ¬'} Watch Party OluÅŸtur</h3>\n              <input type=\"url\" placeholder=\"Video URL'sini yapÄ±ÅŸtÄ±r...\" value={w.videoUrl} onChange={e => w.setVideoUrl(e.target.value)} autoFocus />\n              <div className=\"modal-actions\">\n                <button className=\"cancel-btn\" onClick={() => w.setShowCreateModal(false)}>Ä°ptal</button>\n                <button className=\"create-btn\" onClick={w.createWatchParty} disabled={w.isLoading}>{w.isLoading ? 'OluÅŸturuluyor...' : 'OluÅŸtur'}</button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"watch-together-container\" ref={w.containerRef}>\n      {/* Header */}\n      <div className=\"watch-header\">\n        <div className=\"watch-title\">\n          <span className=\"live-badge\">CANLI</span>\n          <h3>{w.party.video_title || 'Watch Party'}</h3>\n        </div>\n        <div className=\"watch-viewers\"><FaUsers /><span>{w.viewers.length} izleyici</span></div>\n        <button className=\"close-btn\" onClick={onClose}><FaTimes /></button>\n      </div>\n\n      {/* Video Player */}\n      <div className=\"watch-player\">\n        {w.party.video_source === 'youtube' && (\n          <iframe ref={w.playerRef} src={`https://www.youtube.com/embed/${extractYouTubeId(w.party.video_url)}?autoplay=${w.isPlaying ? 1 : 0}&start=${Math.floor(w.currentTime)}&enablejsapi=1`} title=\"Watch Party\" frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen />\n        )}\n        {w.party.video_source === 'direct' && (\n          <video ref={w.playerRef} src={w.party.video_url} autoPlay={w.isPlaying} muted={w.isMuted} />\n        )}\n        <div className=\"reaction-overlay\">\n          {w.reactions.map(r => <div key={r.id} className=\"floating-reaction\" style={{ left: `${Math.random() * 80 + 10}%` }}>{r.emoji}</div>)}\n        </div>\n      </div>\n\n      {/* Controls */}\n      <div className=\"watch-controls\">\n        <div className=\"control-left\">\n          {w.isHost && <button onClick={w.togglePlay}>{w.isPlaying ? <FaPause /> : <FaPlay />}</button>}\n          <button onClick={() => w.setIsMuted(!w.isMuted)}>{w.isMuted ? <FaVolumeMute /> : <FaVolumeUp />}</button>\n        </div>\n        <div className=\"reactions-bar\">\n          {REACTION_EMOJIS.map(emoji => <button key={emoji} className=\"reaction-btn\" onClick={() => w.sendReaction(emoji)}>{emoji}</button>)}\n        </div>\n        <div className=\"control-right\">\n          <button onClick={() => w.setShowChat(!w.showChat)}>{'ðŸ’¬'}</button>\n          <button onClick={w.toggleFullscreen}>{w.isFullscreen ? <FaCompress /> : <FaExpand />}</button>\n          {w.isHost && <button className=\"end-btn\" onClick={w.endParty}>Bitir</button>}\n        </div>\n      </div>\n\n      {/* Chat Sidebar */}\n      {w.showChat && (\n        <div className=\"watch-chat\">\n          <div className=\"chat-messages\">\n            {w.messages.map((msg, idx) => (\n              <div key={idx} className=\"chat-message\">\n                <img src={msg.avatar || '/default-avatar.png'} alt={msg.user} className=\"chat-avatar\" />\n                <div className=\"chat-content\"><span className=\"chat-user\">{msg.user}</span><span className=\"chat-text\">{msg.content}</span></div>\n              </div>\n            ))}\n            <div ref={w.chatEndRef} />\n          </div>\n          <div className=\"chat-input\">\n            <input type=\"text\" placeholder=\"Mesaj yaz...\" value={w.newMessage} onChange={e => w.setNewMessage(e.target.value)} onKeyPress={e => e.key === 'Enter' && w.sendMessage()} />\n            <button onClick={w.sendMessage}>GÃ¶nder</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WatchTogether;\n"],"names":["useState","useRef","useCallback","useEffect","jsxs","jsx"],"mappings":"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"}