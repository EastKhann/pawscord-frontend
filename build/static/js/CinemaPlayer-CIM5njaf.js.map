{"version":3,"mappings":"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","names":["lazy","useState","useRef","useEffect","jsxs","jsx","Suspense"],"ignoreList":[],"sources":["../../../src/components/CinemaPlayer.js"],"sourcesContent":["\r\nimport { useState, useEffect, useRef, lazy, Suspense } from 'react';\r\nconst ReactPlayer = lazy(() => import('react-player'));\r\nimport { FaPlay, FaPause, FaLink, FaExclamationCircle } from 'react-icons/fa';\r\nimport { useVoice } from '../VoiceContext';\r\n\r\nconst CinemaPlayer = () => {\r\n    const { cinemaState, sendCinemaSignal, setCinemaState } = useVoice();\r\n    const { url, playing, time, lastSyncAction } = cinemaState;\r\n\r\n    const [inputUrl, setInputUrl] = useState('');\r\n    const [volume, setVolume] = useState(0.8);\r\n    const [error, setError] = useState(null);\r\n    const [isReady, setIsReady] = useState(false);\r\n\r\n    const playerRef = useRef(null);\r\n    const isRemoteUpdate = useRef(false);\r\n\r\n    // --- SYNC WITH CONTEXT STATE ---\r\n    useEffect(() => {\r\n        if (lastSyncAction === 'change_url') {\r\n            setIsReady(false);\r\n            setError(null);\r\n        } else if (lastSyncAction === 'play') {\r\n            if (Math.abs(getCurrentTimeSafe() - time) > 2) {\r\n                if (playerRef.current) playerRef.current.seekTo(time);\r\n            }\r\n        }\r\n    }, [url, playing, time, lastSyncAction]);\r\n\r\n    const getCurrentTimeSafe = () => {\r\n        try { return playerRef.current ? playerRef.current.getCurrentTime() : 0; }\r\n        catch { return 0; }\r\n    };\r\n\r\n    const handleLoadUrl = (e) => {\r\n        e.preventDefault();\r\n        if (!inputUrl.trim()) return;\r\n        sendCinemaSignal('change_url', { url: inputUrl });\r\n        setInputUrl('');\r\n    };\r\n\r\n    const handlePlayPause = () => {\r\n        if (playing) {\r\n            sendCinemaSignal('pause');\r\n        } else {\r\n            sendCinemaSignal('play', { time: getCurrentTimeSafe() });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            <div style={styles.playerWrapper}>\r\n                {error && (\r\n                    <div style={styles.statusOverlay}>\r\n                        <FaExclamationCircle size={40} color=\"#f04747\" />\r\n                        <p style={{ marginTop: 10 }}>{error}</p>\r\n                    </div>\r\n                )}\r\n                {!isReady && !error && (\r\n                    <div style={styles.statusOverlay}>\r\n                        <div className=\"spinner\"></div>\r\n                        <p style={{ marginTop: 10 }}>Yükleniyor...</p>\r\n                    </div>\r\n                )}\r\n\r\n                <Suspense fallback={<div style={{color: '#fff', padding: '50px', textAlign: 'center'}}>Loading player...</div>}>\r\n                    <ReactPlayer\r\n                        ref={playerRef}\r\n                        url={url}\r\n                        playing={playing}\r\n                        volume={volume}\r\n                        controls={true}\r\n                        width=\"100%\"\r\n                        height=\"100%\"\r\n                        style={{ position: 'absolute', top: 0, left: 0 }}\r\n                        onReady={() => setIsReady(true)}\r\n                        onError={() => { setError(\"Video oynatılamadı.\"); setIsReady(true); }}\r\n                        onPlay={() => {\r\n                            // Only send if not remote update (avoid loops)\r\n                            // Actually ReactPlayer might fire onPlay when we set playing=true programmatically\r\n                            // So we trust the context state mostly, but simple checks help\r\n                            if (!playing) sendCinemaSignal('play', { time: getCurrentTimeSafe() });\r\n                        }}\r\n                        onPause={() => {\r\n                            if (playing) sendCinemaSignal('pause');\r\n                        }}\r\n                    />\r\n                </Suspense>\r\n            </div>\r\n\r\n            {/* CONTROLS */}\r\n            <div style={styles.controls}>\r\n                <button\r\n                    onClick={handlePlayPause}\r\n                    style={{\r\n                        ...styles.btn,\r\n                        backgroundColor: playing ? '#da373c' : '#43b581',\r\n                        width: '40px', height: '40px', borderRadius: '50%',\r\n                        display: 'flex', alignItems: 'center', justifyContent: 'center'\r\n                    }}\r\n                >\r\n                    {playing ? <FaPause /> : <FaPlay style={{ marginLeft: 2 }} />}\r\n                </button>\r\n\r\n                <form onSubmit={handleLoadUrl} style={styles.urlForm}>\r\n                    <FaLink style={{ color: '#b9bbbe' }} />\r\n                    <input\r\n                        type=\"text\"\r\n                        value={inputUrl}\r\n                        onChange={(e) => setInputUrl(e.target.value)}\r\n                        placeholder=\"YouTube Link...\"\r\n                        style={styles.input}\r\n                    />\r\n                    <button type=\"submit\" style={{ ...styles.btn, backgroundColor: '#5865f2', padding: '0 15px' }}>Yükle</button>\r\n                </form>\r\n            </div>\r\n\r\n            <style>{`\r\n                .spinner {\r\n                    border: 4px solid rgba(255, 255, 255, 0.3);\r\n                    border-radius: 50%;\r\n                    border-top: 4px solid #ffffff;\r\n                    width: 30px; height: 30px;\r\n                    animation: spin 1s linear infinite;\r\n                }\r\n                @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    container: {\r\n        width: '100%', height: '100%', display: 'flex', flexDirection: 'column', backgroundColor: 'black'\r\n    },\r\n    playerWrapper: {\r\n        flex: 1, position: 'relative', overflow: 'hidden'\r\n    },\r\n    controls: {\r\n        padding: '10px', display: 'flex', gap: '10px', backgroundColor: '#202225', alignItems: 'center'\r\n    },\r\n    urlForm: {\r\n        flex: 1, display: 'flex', gap: '8px', backgroundColor: '#40444b', padding: '5px 10px', borderRadius: '4px', alignItems: 'center'\r\n    },\r\n    input: {\r\n        flex: 1, background: 'transparent', border: 'none', color: 'white', outline: 'none', fontSize: '14px'\r\n    },\r\n    btn: {\r\n        border: 'none', color: 'white', cursor: 'pointer', borderRadius: '4px', fontWeight: 'bold'\r\n    },\r\n    statusOverlay: {\r\n        position: 'absolute', top: 0, left: 0, width: '100%', height: '100%',\r\n        display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center',\r\n        backgroundColor: 'rgba(0,0,0,0.7)', color: 'white', zIndex: 10\r\n    }\r\n};\r\n\r\nexport default CinemaPlayer;\r\n\r\n\r\n"],"file":"CinemaPlayer-CIM5njaf.js"}