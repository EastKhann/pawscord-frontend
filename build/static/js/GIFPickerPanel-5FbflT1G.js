var G=Object.defineProperty;var a=(c,n)=>G(c,"name",{value:n,configurable:!0});import{r as i,j as e}from"./react-core-Djgtqrmb.js";import{aw as y,cD as L,cE as P,t as E,by as I}from"./icons-vendor-BMXAt4pj.js";function Q({apiBaseUrl:c,fetchWithAuth:n,onSelectGIF:f}){const[v,u]=i.useState([]),[N,w]=i.useState([]),[o,h]=i.useState("all"),[r,S]=i.useState(""),[l,j]=i.useState("grid"),[d,x]=i.useState(new Set),[F,p]=i.useState(!1);i.useEffect(()=>{b(),k(),C()},[o,r]);const b=a(async()=>{p(!0);try{const s=new URLSearchParams;o!=="all"&&s.append("category",o),r&&s.append("search",r);const t=await n(`${c}/gifs/list_local/?${s}`);if(t.ok){const g=await t.json();u(g.gifs||[])}}catch{}finally{p(!1)}},"loadGIFs"),k=a(async()=>{try{const s=await n(`${c}/gifs/categories/`);if(s.ok){const t=await s.json();w(t.categories||[])}}catch{}},"loadCategories"),C=a(async()=>{try{const s=await n(`${c}/gifs/favorites/`);if(s.ok){const t=await s.json();x(new Set(t.gif_ids||[]))}}catch{}},"loadFavorites"),$=a(async s=>{try{const t=d.has(s),g=t?`${c}/gifs/favorites/remove/`:`${c}/gifs/favorites/add/`;if((await n(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gif_id:s})})).ok){const m=new Set(d);t?m.delete(s):m.add(s),x(m)}}catch{}},"toggleFavorite");return e.jsxs("div",{className:"gif-picker-panel",children:[e.jsxs("div",{className:"gif-header",children:[e.jsxs("h2",{children:[e.jsx(y,{})," GIF Library"]}),e.jsxs("div",{className:"view-controls",children:[e.jsx("button",{className:`view-btn ${l==="grid"?"active":""}`,onClick:a(()=>j("grid"),"onClick"),children:e.jsx(L,{})}),e.jsx("button",{className:`view-btn ${l==="list"?"active":""}`,onClick:a(()=>j("list"),"onClick"),children:e.jsx(P,{})})]})]}),e.jsxs("div",{className:"gif-search",children:[e.jsx(E,{className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Search GIFs...",value:r,onChange:a(s=>S(s.target.value),"onChange"),className:"search-input"})]}),e.jsxs("div",{className:"gif-categories",children:[e.jsx("button",{className:`category-btn ${o==="all"?"active":""}`,onClick:a(()=>h("all"),"onClick"),children:"All"}),N.map(s=>e.jsx("button",{className:`category-btn ${o===s.id?"active":""}`,onClick:a(()=>h(s.id),"onClick"),children:s.name},s.id))]}),e.jsx("div",{className:`gif-grid ${l}`,children:F?e.jsx("div",{className:"gif-loading",children:"Loading GIFs..."}):v.length===0?e.jsxs("div",{className:"empty-gifs",children:[e.jsx(y,{className:"empty-icon"}),e.jsx("p",{children:"No GIFs found"})]}):v.map(s=>e.jsxs("div",{className:"gif-item",children:[e.jsx("img",{src:s.url,alt:s.name,onClick:a(()=>f&&f(s),"onClick"),className:"gif-image"}),e.jsx("div",{className:"gif-overlay",children:e.jsx("button",{className:`fav-btn ${d.has(s.id)?"favorited":""}`,onClick:a(t=>{t.stopPropagation(),$(s.id)},"onClick"),children:e.jsx(I,{})})})]},s.id))})]})}a(Q,"GIFPickerPanel");export{Q as default};
