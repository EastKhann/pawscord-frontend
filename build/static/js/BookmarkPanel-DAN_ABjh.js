import{r,cm as T,l as M,w as N,aI as O,cn as P,co as $,v as W}from"./react-core-B6hadH-M.js";import{t as a}from"./index-D_6pZib5.js";const H=({fetchWithAuth:n,apiBaseUrl:l,onClose:g,onMessageClick:C})=>{const[u,v]=r.useState([]),[x,w]=r.useState([]),[s,f]=r.useState(null),[d,S]=r.useState(""),[B,k]=r.useState(!0),[z,c]=r.useState(!1),[p,y]=r.useState(""),[b,R]=r.useState("#5865f2");r.useEffect(()=>{m(),h()},[]);const m=async()=>{try{k(!0);const e=await n(`${l}/bookmarks/list/`);if(e.ok){const o=await e.json();v(o)}}catch(e){console.error("Bookmark yükleme hatası:",e),a.error("Bookmark'lar yüklenemedi")}finally{k(!1)}},h=async()=>{try{const e=await n(`${l}/bookmarks/tags/list/`);if(e.ok){const o=await e.json();w(o)}}catch(e){console.error("Tag yükleme hatası:",e)}},I=async()=>{if(!p.trim()){a.error("Tag adı boş olamaz");return}try{(await n(`${l}/bookmarks/tags/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,color:b})})).ok?(a.success("Tag oluşturuldu"),y(""),R("#5865f2"),c(!1),h()):a.error("Tag oluşturulamadı")}catch(e){console.error("Tag oluşturma hatası:",e),a.error("Bir hata oluştu")}},j=async e=>{try{(await n(`${l}/bookmarks/${e}/delete/`,{method:"DELETE"})).ok?(a.success("Bookmark silindi"),m()):a.error("Bookmark silinemedi")}catch(o){console.error("Bookmark silme hatası:",o),a.error("Bir hata oluştu")}},F=async(e,o)=>{try{(await n(`${l}/bookmarks/tags/${o}/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookmark_id:e})})).ok?(a.success("Tag eklendi"),m()):a.error("Tag eklenemedi")}catch(i){console.error("Tag ekleme hatası:",i),a.error("Bir hata oluştu")}},E=u.filter(e=>{const o=!s||e.tags?.some(L=>L.id===s),i=!d||e.message?.content?.toLowerCase().includes(d.toLowerCase());return o&&i});return React.createElement("div",{style:t.overlay,onClick:g},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(T,{style:{color:"#faa61a"}}),React.createElement("h2",{style:{margin:0}},"Kaydedilenler")),React.createElement(M,{onClick:g,style:t.closeBtn})),React.createElement("div",{style:t.toolbar},React.createElement("div",{style:t.searchBox},React.createElement(N,{style:{color:"#888"}}),React.createElement("input",{type:"text",placeholder:"Mesajlarda ara...",value:d,onChange:e=>S(e.target.value),style:t.searchInput})),React.createElement("button",{onClick:()=>c(!0),style:t.newTagBtn},React.createElement(O,null)," Yeni Tag")),React.createElement("div",{style:t.tagsContainer},React.createElement("button",{onClick:()=>f(null),style:{...t.tagChip,backgroundColor:s?"#2c2f33":"#5865f2"}},React.createElement(P,null)," Tümü (",u.length,")"),x.map(e=>React.createElement("button",{key:e.id,onClick:()=>f(e.id),style:{...t.tagChip,backgroundColor:s===e.id?e.color:"#2c2f33",borderLeft:`3px solid ${e.color}`}},React.createElement($,null)," ",e.name," (",e.bookmark_count||0,")"))),React.createElement("div",{style:t.bookmarksList},B?React.createElement("div",{style:t.loading},"Yükleniyor..."):E.length===0?React.createElement("div",{style:t.empty},React.createElement(T,{style:{fontSize:"48px",color:"#555"}}),React.createElement("p",null,"Henüz bookmark yok")):E.map(e=>React.createElement("div",{key:e.id,style:t.bookmarkItem},React.createElement("div",{style:t.bookmarkContent},React.createElement("div",{style:t.bookmarkMeta},React.createElement("strong",null,e.message?.username),React.createElement("span",{style:{color:"#888",fontSize:"12px"}},new Date(e.created_at).toLocaleString("tr-TR"))),React.createElement("div",{style:t.bookmarkText,onClick:()=>C?.(e.message)},e.message?.content||"Mesaj içeriği yok"),React.createElement("div",{style:t.bookmarkTags},e.tags?.map(o=>React.createElement("span",{key:o.id,style:{...t.miniTag,backgroundColor:o.color}},o.name)),React.createElement("select",{onChange:o=>{o.target.value&&(F(e.id,o.target.value),o.target.value="")},style:t.tagSelect},React.createElement("option",{value:""},"+ Tag Ekle"),x.map(o=>React.createElement("option",{key:o.id,value:o.id},o.name))))),React.createElement("button",{onClick:()=>j(e.id),style:t.deleteBtn},React.createElement(W,null))))),z&&React.createElement("div",{style:t.modalOverlay,onClick:()=>c(!1)},React.createElement("div",{style:t.newTagModal,onClick:e=>e.stopPropagation()},React.createElement("h3",null,"Yeni Tag Oluştur"),React.createElement("input",{type:"text",placeholder:"Tag adı...",value:p,onChange:e=>y(e.target.value),style:t.input,autoFocus:!0}),React.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},React.createElement("label",null,"Renk:"),React.createElement("input",{type:"color",value:b,onChange:e=>R(e.target.value),style:t.colorPicker})),React.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},React.createElement("button",{onClick:I,style:t.primaryBtn},"Oluştur"),React.createElement("button",{onClick:()=>c(!1),style:t.secondaryBtn},"İptal"))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888",transition:"color 0.2s"},toolbar:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #333"},searchBox:{flex:1,display:"flex",alignItems:"center",gap:"10px",backgroundColor:"#2c2f33",padding:"10px 15px",borderRadius:"8px"},searchInput:{flex:1,background:"none",border:"none",color:"#fff",outline:"none",fontSize:"14px"},newTagBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},tagsContainer:{display:"flex",gap:"10px",padding:"15px 20px",overflowX:"auto",borderBottom:"1px solid #333"},tagChip:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"16px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#fff",whiteSpace:"nowrap",transition:"all 0.2s"},bookmarksList:{flex:1,overflowY:"auto",padding:"20px"},bookmarkItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px",transition:"background-color 0.2s"},bookmarkContent:{flex:1},bookmarkMeta:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},bookmarkText:{color:"#dcddde",marginBottom:"10px",cursor:"pointer",lineHeight:"1.5"},bookmarkTags:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},miniTag:{padding:"4px 10px",borderRadius:"12px",fontSize:"12px",color:"#fff",fontWeight:"500"},tagSelect:{backgroundColor:"#1e1e1e",color:"#fff",border:"1px solid #444",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",cursor:"pointer"},deleteBtn:{backgroundColor:"transparent",border:"none",color:"#ed4245",cursor:"pointer",fontSize:"18px",padding:"10px",borderRadius:"4px",transition:"background-color 0.2s"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999999},newTagModal:{backgroundColor:"#2c2f33",padding:"30px",borderRadius:"8px",width:"90%",maxWidth:"400px",color:"#fff"},input:{width:"100%",padding:"12px",backgroundColor:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginTop:"15px",outline:"none"},colorPicker:{width:"60px",height:"40px",border:"none",borderRadius:"4px",cursor:"pointer"},primaryBtn:{flex:1,backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},secondaryBtn:{flex:1,backgroundColor:"#4e5058",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"}};export{H as default};
