import{r as o,j as t}from"./react-vendor-D8Fi5F9E.js";import{L as d,a as j,n as S,aX as c,bl as C}from"./icons-vendor-CfNiWYc_.js";import{t as w}from"./index-JI0bTQqj.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./state-vendor-De5qIGw3.js";const F=({fetchWithAuth:x,apiBaseUrl:p,onClose:h,serverId:f})=>{const[s,m]=o.useState(null),[g,n]=o.useState(!1),[l,y]=o.useState("7d"),b=[{value:"24h",label:"Last 24 Hours"},{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"all",label:"All Time"}];o.useEffect(()=>{u()},[l]);const u=async()=>{n(!0);try{const a=await(await x(`${p}/api/servers/${f}/growth-metrics/?range=${l}`)).json();m(a)}catch{w.error("Failed to load growth metrics")}finally{n(!1)}},r=i=>i>=1e6?`${(i/1e6).toFixed(1)}M`:i>=1e3?`${(i/1e3).toFixed(1)}K`:i;return t.jsx("div",{style:e.overlay,children:t.jsxs("div",{style:e.modal,children:[t.jsxs("div",{style:e.header,children:[t.jsxs("div",{style:e.headerLeft,children:[t.jsx(d,{style:{marginRight:"10px",color:"#5865f2"}}),t.jsx("h2",{style:e.title,children:"Growth Metrics"})]}),t.jsx("button",{onClick:h,style:e.closeButton,children:t.jsx(j,{})})]}),t.jsx("div",{style:e.toolbar,children:t.jsx("select",{value:l,onChange:i=>y(i.target.value),style:e.select,children:b.map(i=>t.jsx("option",{value:i.value,children:i.label},i.value))})}),t.jsx("div",{style:e.content,children:g?t.jsx("div",{style:e.loading,children:"Loading metrics..."}):s?t.jsxs("div",{children:[t.jsxs("div",{style:e.statsGrid,children:[t.jsxs("div",{style:e.statCard,children:[t.jsx("div",{style:e.statIcon,children:t.jsx(S,{style:{color:"#5865f2",fontSize:"24px"}})}),t.jsxs("div",{style:e.statInfo,children:[t.jsx("div",{style:e.statLabel,children:"Total Members"}),t.jsx("div",{style:e.statValue,children:r(s.total_members||0)}),s.member_growth!==void 0&&t.jsxs("div",{style:{...e.statChange,color:s.member_growth>=0?"#43b581":"#f04747"},children:[t.jsx(c,{style:{transform:s.member_growth<0?"rotate(180deg)":"none"}}),Math.abs(s.member_growth),"% this period"]})]})]}),t.jsxs("div",{style:e.statCard,children:[t.jsx("div",{style:e.statIcon,children:t.jsx(d,{style:{color:"#43b581",fontSize:"24px"}})}),t.jsxs("div",{style:e.statInfo,children:[t.jsx("div",{style:e.statLabel,children:"Active Members"}),t.jsx("div",{style:e.statValue,children:r(s.active_members||0)}),t.jsxs("div",{style:e.statSubtext,children:[s.total_members?(s.active_members/s.total_members*100).toFixed(1):0,"% of total"]})]})]}),t.jsxs("div",{style:e.statCard,children:[t.jsx("div",{style:e.statIcon,children:t.jsx("span",{style:{fontSize:"24px"},children:"ðŸ’¬"})}),t.jsxs("div",{style:e.statInfo,children:[t.jsx("div",{style:e.statLabel,children:"Messages Sent"}),t.jsx("div",{style:e.statValue,children:r(s.messages_sent||0)}),s.message_growth!==void 0&&t.jsxs("div",{style:{...e.statChange,color:s.message_growth>=0?"#43b581":"#f04747"},children:[t.jsx(c,{style:{transform:s.message_growth<0?"rotate(180deg)":"none"}}),Math.abs(s.message_growth),"% this period"]})]})]}),t.jsxs("div",{style:e.statCard,children:[t.jsx("div",{style:e.statIcon,children:t.jsx(C,{style:{color:"#faa61a",fontSize:"24px"}})}),t.jsxs("div",{style:e.statInfo,children:[t.jsx("div",{style:e.statLabel,children:"New Joins"}),t.jsx("div",{style:e.statValue,children:r(s.new_joins||0)}),t.jsx("div",{style:e.statSubtext,children:s.retention_rate?`${s.retention_rate}% retention`:""})]})]})]}),s.daily_stats&&t.jsxs("div",{style:e.chartSection,children:[t.jsx("h3",{style:e.sectionTitle,children:"Daily Activity"}),t.jsx("div",{style:e.chart,children:s.daily_stats.map((i,a)=>t.jsxs("div",{style:e.chartBar,children:[t.jsx("div",{style:{...e.chartBarFill,height:`${i.count/Math.max(...s.daily_stats.map(v=>v.count))*100}%`}}),t.jsx("div",{style:e.chartLabel,children:new Date(i.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},a))})]}),s.top_contributors&&t.jsxs("div",{style:e.section,children:[t.jsx("h3",{style:e.sectionTitle,children:"Top Contributors"}),t.jsx("div",{style:e.contributorsList,children:s.top_contributors.slice(0,10).map((i,a)=>t.jsxs("div",{style:e.contributorCard,children:[t.jsxs("div",{style:e.contributorRank,children:["#",a+1]}),t.jsxs("div",{style:e.contributorInfo,children:[t.jsx("div",{style:e.contributorName,children:i.username}),t.jsxs("div",{style:e.contributorStat,children:[r(i.message_count)," messages"]})]})]},a))})]})]}):t.jsx("div",{style:e.empty,children:"No metrics available"})})]})})},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"1100px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},select:{padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px",width:"200px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",gap:"16px"},statIcon:{minWidth:"48px"},statInfo:{flex:1},statLabel:{fontSize:"13px",color:"#99aab5",marginBottom:"6px"},statValue:{fontSize:"28px",fontWeight:"700",color:"#ffffff",marginBottom:"6px"},statChange:{fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},statSubtext:{fontSize:"12px",color:"#99aab5"},chartSection:{marginBottom:"32px"},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},chart:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",height:"200px",padding:"20px",backgroundColor:"#2c2f33",borderRadius:"8px"},chartBar:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},chartBarFill:{width:"80%",backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",minHeight:"4px"},chartLabel:{fontSize:"10px",color:"#99aab5",textAlign:"center"},section:{marginBottom:"32px"},contributorsList:{display:"flex",flexDirection:"column",gap:"8px"},contributorCard:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"12px",display:"flex",gap:"16px",alignItems:"center"},contributorRank:{fontSize:"16px",fontWeight:"700",color:"#5865f2",minWidth:"40px"},contributorInfo:{flex:1},contributorName:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},contributorStat:{fontSize:"12px",color:"#99aab5"}};export{F as default};
