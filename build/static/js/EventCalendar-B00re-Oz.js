import{r as i,d as e,bH as g,aC as S,U as C,cr as B,G as h}from"./react-core-DrOm_csO.js";const w=({serverId:n,apiBaseUrl:s,fetchWithAuth:c})=>{const[a,d]=i.useState([]),[m,p]=i.useState(!0),[u,x]=i.useState(!1);i.useEffect(()=>{n&&y()},[n]);const y=async()=>{try{const o=await c(`${s}/events/?server=${n}`);if(o.ok){const r=await o.json();d(r)}}catch(o){console.error("Failed to load events:",o)}finally{p(!1)}},b=async(o,r)=>{try{(await c(`${s}/events/${o}/rsvp/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r})})).ok&&y()}catch(f){console.error("RSVP failed:",f)}},E=o=>{const r=new Date(o),k=r-new Date,l=Math.floor(k/(1e3*60*60*24));return l===0?"Bugün":l===1?"Yarın":l>0&&l<7?`${l} gün sonra`:r.toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})},v=o=>new Date(o).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});return m?e.createElement("div",{style:t.loading},"Etkinlikler yükleniyor..."):e.createElement("div",{style:t.container},e.createElement("div",{style:t.header},e.createElement("h2",{style:t.title},e.createElement(g,null)," Etkinlikler"),e.createElement("button",{onClick:()=>x(!0),style:t.createButton},e.createElement(S,null)," Etkinlik Oluştur")),a.length===0?e.createElement("div",{style:t.empty},e.createElement(g,{style:t.emptyIcon}),e.createElement("p",null,"Henüz etkinlik yok"),e.createElement("p",{style:t.emptySubtext},"İlk etkinliği sen oluştur!")):e.createElement("div",{style:t.eventsList},a.map(o=>e.createElement(D,{key:o.id,event:o,onRSVP:b,formatDate:E,formatTime:v}))))},D=({event:n,onRSVP:s,formatDate:c,formatTime:a})=>{const[d,m]=i.useState(null),p=u=>{m(u),s(n.id,u)};return e.createElement("div",{style:t.eventCard},e.createElement("div",{style:t.eventHeader},e.createElement("h3",{style:t.eventTitle},n.title),e.createElement("span",{style:t.eventDate},c(n.start_time))),n.description&&e.createElement("p",{style:t.eventDescription},n.description),e.createElement("div",{style:t.eventDetails},e.createElement("div",{style:t.detail},e.createElement(C,{style:t.detailIcon}),e.createElement("span",null,a(n.start_time)," - ",a(n.end_time))),e.createElement("div",{style:t.detail},e.createElement(B,{style:t.detailIcon}),e.createElement("span",null,n.location_type==="voice"?n.voice_channel_name||"Sesli Kanal":"Dış Link")),e.createElement("div",{style:t.detail},e.createElement(h,{style:t.detailIcon}),e.createElement("span",null,n.going_count," katılacak,",n.interested_count," ilgileniyor"))),e.createElement("div",{style:t.rsvpButtons},e.createElement("button",{onClick:()=>p("going"),style:{...t.rsvpButton,...d==="going"?t.rsvpButtonActive:{}}},"✓ Katılacağım"),e.createElement("button",{onClick:()=>p("interested"),style:{...t.rsvpButton,...d==="interested"?t.rsvpButtonInterested:{}}},"⭐ İlgileniyorum")))},t={container:{padding:"20px",backgroundColor:"#2b2d31",borderRadius:"8px",minHeight:"400px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #1e1f22",paddingBottom:"15px"},title:{color:"#fff",fontSize:"20px",margin:0,display:"flex",alignItems:"center",gap:"10px"},createButton:{backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},loading:{color:"#b9bbbe",textAlign:"center",padding:"40px"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},emptyIcon:{fontSize:"64px",opacity:.3,marginBottom:"20px"},emptySubtext:{fontSize:"14px",opacity:.7},eventsList:{display:"grid",gap:"15px"},eventCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"16px",border:"1px solid transparent",transition:"border-color 0.2s"},eventHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},eventTitle:{color:"#fff",fontSize:"18px",margin:0},eventDate:{color:"#5865f2",fontSize:"14px",fontWeight:"bold"},eventDescription:{color:"#b9bbbe",fontSize:"14px",marginBottom:"12px"},eventDetails:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},detail:{display:"flex",alignItems:"center",gap:"8px",color:"#b9bbbe",fontSize:"13px"},detailIcon:{color:"#72767d",fontSize:"12px"},rsvpButtons:{display:"flex",gap:"10px"},rsvpButton:{flex:1,padding:"10px",border:"1px solid #4e5058",borderRadius:"6px",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",fontSize:"14px",transition:"all 0.2s"},rsvpButtonActive:{backgroundColor:"#23a559",borderColor:"#23a559",color:"#fff"},rsvpButtonInterested:{backgroundColor:"#f0b132",borderColor:"#f0b132",color:"#1e1f22"}};export{w as default};
