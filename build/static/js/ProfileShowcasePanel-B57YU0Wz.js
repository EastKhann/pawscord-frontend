import{r as m,d as e,af as C,i as x,ar as B,aC as F,bW as V,bX as O,am as R,bl as j,E as M,bu as G,c9 as h,aQ as J,ae as U,bL as Y,bB as H,J as I,B as Q,v as X}from"./react-core-DrOm_csO.js";const ee=({userId:d,onClose:y,onUpdate:q,fetchWithAuth:g,apiBaseUrl:f})=>{const[n,s]=m.useState([]),[S,b]=m.useState(!0),[_,E]=m.useState(!1),[u,v]=m.useState(null),[l,c]=m.useState({type:"game",title:"",description:"",image_url:"",link_url:""}),[K,W]=m.useState(null),k=[{key:"game",label:"Oyun",icon:e.createElement(J,null),color:"#9c27b0"},{key:"achievement",label:"Başarı",icon:e.createElement(U,null),color:"#ffc107"},{key:"art",label:"Sanat",icon:e.createElement(Y,null),color:"#e91e63"},{key:"music",label:"Müzik",icon:e.createElement(H,null),color:"#00bcd4"},{key:"video",label:"Video",icon:e.createElement(I,null),color:"#f44336"},{key:"code",label:"Proje",icon:e.createElement(Q,null),color:"#4caf50"},{key:"link",label:"Link",icon:e.createElement(X,null),color:"#2196f3"}];m.useEffect(()=>{$()},[d]);const $=async()=>{b(!0);try{const t=await g(`${f}/users/${d}/showcase/`);if(t.ok){const a=await t.json();s(a.items||[])}else s([])}catch(t){console.error("Error fetching showcases:",t),s([])}b(!1)},T=async()=>{if(!l.title.trim()){h.error("Başlık gerekli");return}const t={id:Date.now(),...l,order:n.length};try{await g(`${f}/users/${d}/showcase/`,{method:"POST",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(a){console.error("Add showcase error:",a)}s([...n,t]),p(),h.success("Vitrin öğesi eklendi")},z=async()=>{if(!(!l.title.trim()||!u)){try{await fetch(`/api/users/${d}/showcase/${u.id}/`,{method:"PATCH",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify(l)})}catch(t){console.error("Edit showcase error:",t)}s(n.map(t=>t.id===u.id?{...t,...l}:t)),p(),h.success("Vitrin öğesi güncellendi")}},A=async t=>{if(window.confirm("Bu öğeyi silmek istediğinizden emin misiniz?")){try{await fetch(`/api/users/${d}/showcase/${t}/`,{method:"DELETE",headers:{Authorization:`Bearer ${token}`}})}catch(a){console.error("Delete showcase error:",a)}s(n.filter(a=>a.id!==t)),h.success("Vitrin öğesi silindi")}},w=async(t,a)=>{const r=n.findIndex(i=>i.id===t);if(a==="up"&&r===0||a==="down"&&r===n.length-1)return;const o=[...n],N=a==="up"?r-1:r+1;[o[r],o[N]]=[o[N],o[r]],o.forEach((i,L)=>i.order=L),s(o);try{await fetch(`/api/users/${d}/showcase/reorder/`,{method:"POST",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify({order:o.map(i=>i.id)})})}catch(i){console.error("Reorder showcase error:",i)}},p=()=>{c({type:"game",title:"",description:"",image_url:"",link_url:""}),E(!1),v(null)},P=t=>{v(t),c({type:t.type,title:t.title,description:t.description||"",image_url:t.image_url||"",link_url:t.link_url||""}),E(!0)},D=t=>k.find(a=>a.key===t)||k[0];return e.createElement("div",{className:"showcase-overlay",onClick:t=>t.target.className==="showcase-overlay"&&y()},e.createElement("div",{className:"showcase-panel"},e.createElement("div",{className:"panel-header"},e.createElement("h2",null,e.createElement(C,null)," Profil Vitrini"),e.createElement("button",{className:"close-btn",onClick:y},e.createElement(x,null))),e.createElement("div",{className:"panel-info"},e.createElement(B,null),e.createElement("p",null,"Profilinizde gösterilecek en fazla 6 öğe seçebilirsiniz")),e.createElement("div",{className:"showcase-list"},S?e.createElement("div",{className:"loading"},"Yükleniyor..."):n.length===0?e.createElement("div",{className:"empty-state"},e.createElement(C,null),e.createElement("p",null,"Henüz vitrin öğesi yok"),e.createElement("button",{onClick:()=>E(!0)},e.createElement(F,null)," İlk Öğeyi Ekle")):n.map((t,a)=>{const r=D(t.type);return e.createElement("div",{key:t.id,className:"showcase-item"},e.createElement("div",{className:"item-drag"},e.createElement("button",{onClick:()=>w(t.id,"up"),disabled:a===0},e.createElement(V,null)),e.createElement("button",{onClick:()=>w(t.id,"down"),disabled:a===n.length-1},e.createElement(O,null))),e.createElement("div",{className:"item-icon",style:{background:r.color}},r.icon),t.image_url&&e.createElement("div",{className:"item-image"},e.createElement("img",{src:t.image_url,alt:t.title})),e.createElement("div",{className:"item-info"},e.createElement("span",{className:"item-type"},r.label),e.createElement("h4",null,t.title),t.description&&e.createElement("p",null,t.description),t.link_url&&e.createElement("a",{href:t.link_url,target:"_blank",rel:"noopener noreferrer"},e.createElement(R,null)," Linke Git")),e.createElement("div",{className:"item-actions"},e.createElement("button",{onClick:()=>P(t)},e.createElement(j,null)),e.createElement("button",{onClick:()=>A(t.id)},e.createElement(M,null))))})),n.length<6&&n.length>0&&e.createElement("div",{className:"add-section"},e.createElement("button",{className:"add-btn",onClick:()=>E(!0)},e.createElement(F,null)," Yeni Öğe Ekle"),e.createElement("span",{className:"remaining"},6-n.length," slot kaldı")),_&&e.createElement("div",{className:"modal-overlay",onClick:()=>p()},e.createElement("div",{className:"modal-content",onClick:t=>t.stopPropagation()},e.createElement("h3",null,u?"Öğeyi Düzenle":"Yeni Vitrin Öğesi"),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Tür"),e.createElement("div",{className:"type-selector"},k.map(t=>e.createElement("button",{key:t.key,className:`type-btn ${l.type===t.key?"selected":""}`,style:{"--color":t.color},onClick:()=>c({...l,type:t.key})},t.icon,e.createElement("span",null,t.label))))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Başlık *"),e.createElement("input",{type:"text",placeholder:"Örn: Valorant",value:l.title,onChange:t=>c({...l,title:t.target.value})})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Açıklama"),e.createElement("input",{type:"text",placeholder:"Örn: Diamond 3 Rank",value:l.description,onChange:t=>c({...l,description:t.target.value})})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Görsel URL"),e.createElement("input",{type:"text",placeholder:"https://...",value:l.image_url,onChange:t=>c({...l,image_url:t.target.value})})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Link URL"),e.createElement("input",{type:"text",placeholder:"https://...",value:l.link_url,onChange:t=>c({...l,link_url:t.target.value})})),e.createElement("div",{className:"modal-actions"},e.createElement("button",{className:"cancel-btn",onClick:p},"İptal"),e.createElement("button",{className:"save-btn",onClick:u?z:T},e.createElement(G,null)," ",u?"Güncelle":"Ekle"))))))};export{ee as default};
