const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/media-vendor-Dp18sh1g.js","static/js/react-vendor-D8Fi5F9E.js"])))=>i.map(i=>d[i]);
import{_ as b}from"./media-vendor-Dp18sh1g.js";import{b as j,r as o,j as e}from"./react-vendor-D8Fi5F9E.js";import{a as v,Z as k,D as w,au as S}from"./icons-vendor-CKPm393i.js";const _=o.lazy(()=>b(()=>import("./media-vendor-Dp18sh1g.js").then(a=>a.i),__vite__mapDeps([0,1]))),E=({onClose:a,ws:d,roomSlug:q})=>{const[s,l]=o.useState([]),[h,u]=o.useState(""),[c,p]=o.useState(""),[f,x]=o.useState(!1),g=()=>{if(!c)return;const t=[...s,c];l(t),p(""),y("queue_update",{queue:t})},m=()=>{if(s.length>0){const t=s[0],n=s.slice(1);u(t),l(n),x(!0),y("play_track",{url:t,queue:n})}},y=(t,n)=>{d.current?.readyState===WebSocket.OPEN&&d.current.send(JSON.stringify({type:"media_sync",action:t,payload:n}))};return o.useEffect(()=>{const t=n=>{const i=JSON.parse(n.data);i.type==="media_sync"&&(i.action==="queue_update"&&l(i.payload.queue),i.action==="play_track"&&(u(i.payload.url),l(i.payload.queue),x(!0)))};return d.current?.addEventListener("message",t),()=>d.current?.removeEventListener("message",t)},[d]),o.useEffect(()=>{const t=n=>{n.key==="Escape"&&a()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[a]),e.jsx("div",{style:r.overlay,onClick:a,children:e.jsxs("div",{style:r.modal,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:r.header,children:[e.jsx("h3",{children:"ðŸŽµ DJ OdasÄ±"}),e.jsx("button",{onClick:a,style:r.closeBtn,children:e.jsx(v,{})})]}),e.jsx("div",{style:r.playerWrapper,children:e.jsx(o.Suspense,{fallback:e.jsx("div",{style:{color:"#fff",padding:"20px",textAlign:"center"},children:"Loading player..."}),children:e.jsx(_,{url:h,playing:f,controls:!0,width:"100%",height:"200px"})})}),e.jsxs("div",{style:r.controls,children:[e.jsx("input",{value:c,onChange:t=>p(t.target.value),placeholder:"YouTube ÅžarkÄ± Linki...",style:r.input}),e.jsx("button",{onClick:g,style:r.addBtn,children:e.jsx(k,{})}),e.jsxs("button",{onClick:m,style:r.nextBtn,children:[e.jsx(w,{})," SÄ±radaki"]})]}),e.jsxs("div",{style:r.queueList,children:[e.jsxs("h4",{children:["SÄ±radakiler (",s.length,")"]}),s.map((t,n)=>e.jsxs("div",{style:r.queueItem,children:[e.jsx(S,{color:"#ccc"})," ",t]},n))]})]})})},r={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{background:"#2b2d31",width:"500px",borderRadius:"12px",padding:"20px"},header:{display:"flex",justifyContent:"space-between",color:"white",marginBottom:20},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.2em",cursor:"pointer"},playerWrapper:{marginBottom:20,borderRadius:"8px",overflow:"hidden"},controls:{display:"flex",gap:10,marginBottom:20},input:{flex:1,padding:8,borderRadius:4,border:"1px solid #444",background:"#202225",color:"white"},addBtn:{padding:"8px 12px",background:"#5865f2",color:"white",border:"none",borderRadius:4,cursor:"pointer"},nextBtn:{padding:"8px 12px",background:"#23a559",color:"white",border:"none",borderRadius:4,cursor:"pointer"},queueList:{maxHeight:200,overflowY:"auto",color:"#ccc"},queueItem:{padding:"8px",borderBottom:"1px solid #444",fontSize:"0.9em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},P=j.memo(E);export{P as default};
