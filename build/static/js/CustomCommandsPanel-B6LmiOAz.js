import{r as p,n as e}from"./react-core-DA61mcWm.js";import{y as r}from"./ui-vendor-BrUQ4r0A.js";import{g as E,h as S}from"./index-wBOWb2zj.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-tDmQW26m.js";import"./router-vendor-2etVlp2q.js";import"./icons-vendor-l2qVv93x.js";import"./state-vendor-CjqIs3K2.js";import"./crypto-vendor-DiGIAuUm.js";const $={name:"",description:"",response:"",trigger_type:"exact",enabled:!0,cooldown:0,permissions:"everyone",delete_trigger:!1,embed:!1,embed_color:"#5865f2"};function z(s){const[c,i]=p.useState([]),[x,t]=p.useState(!1),[b,v]=p.useState(null),[j,h]=p.useState($),[f,k]=p.useState(!0),[N,y]=p.useState(null),d=E();p.useEffect(()=>{s&&(K(),_())},[s]);const n=()=>localStorage.getItem("access_token"),u=()=>({Authorization:`Bearer ${n()}`}),C=()=>({...u(),"Content-Type":"application/json"}),K=async()=>{try{const a=await fetch(`${d}/commands/server/${s}/`,{headers:u()});if(a.ok){const l=await a.json();i(l.commands||[])}}catch{}finally{k(!1)}},_=async()=>{try{const a=await fetch(`${d}/commands/server/${s}/stats/`,{headers:u()});a.ok&&y(await a.json())}catch{}};return{commands:c,creating:x,setCreating:t,editingCommand:b,setEditingCommand:v,newCommand:j,setNewCommand:h,loading:f,stats:N,createCommand:async()=>{if(!j.name||!j.response){r.error("âŒ Komut adÄ± ve yanÄ±t zorunludur");return}try{const a=await fetch(`${d}/commands/create/`,{method:"POST",headers:C(),body:JSON.stringify({server_id:s,...j})});if(a.ok){const l=await a.json();i(o=>[...o,l.command]),h($),t(!1),r.success("âœ… Komut oluÅŸturuldu"),_()}else r.error("âŒ Komut oluÅŸturulamadÄ±")}catch{r.error("âŒ BaÄŸlantÄ± hatasÄ±")}},updateCommand:async(a,l)=>{try{const o=await fetch(`${d}/commands/${a}/update/`,{method:"POST",headers:C(),body:JSON.stringify(l)});if(o.ok){const m=await o.json();i(g=>g.map(F=>F.id===a?m.command:F)),v(null),r.success("âœ… Komut gÃ¼ncellendi")}else r.error("âŒ Komut gÃ¼ncellenemedi")}catch{r.error("âŒ BaÄŸlantÄ± hatasÄ±")}},deleteCommand:async a=>{if(await S("Bu komutu silmek istediÄŸinizden emin misiniz?"))try{(await fetch(`${d}/commands/${a}/delete/`,{method:"DELETE",headers:u()})).ok?(i(o=>o.filter(m=>m.id!==a)),r.success("âœ… Komut silindi"),_()):r.error("âŒ Komut silinemedi")}catch{r.error("âŒ BaÄŸlantÄ± hatasÄ±")}},toggleCommand:async(a,l)=>{try{(await fetch(`${d}/commands/${a}/toggle/`,{method:"POST",headers:C(),body:JSON.stringify({enabled:l})})).ok&&(i(m=>m.map(g=>g.id===a?{...g,enabled:l}:g)),r.success(`âœ… Komut ${l?"etkinleÅŸtirildi":"devre dÄ±ÅŸÄ± bÄ±rakÄ±ldÄ±"}`))}catch{r.error("âŒ Ä°ÅŸlem baÅŸarÄ±sÄ±z")}},exportCommands:async()=>{try{const a=await fetch(`${d}/commands/server/${s}/export/`,{headers:u()});if(a.ok){const l=await a.blob(),o=window.URL.createObjectURL(l),m=document.createElement("a");m.href=o,m.download=`commands_${s}.json`,m.click(),r.success("âœ… Komutlar dÄ±ÅŸa aktarÄ±ldÄ±")}}catch{r.error("âŒ DÄ±ÅŸa aktarma baÅŸarÄ±sÄ±z")}},importCommands:async a=>{const l=new FormData;l.append("file",a),l.append("server_id",s);try{(await fetch(`${d}/commands/import/`,{method:"POST",headers:u(),body:l})).ok?(K(),r.success("âœ… Komutlar iÃ§e aktarÄ±ldÄ±")):r.error("âŒ Ä°Ã§e aktarma baÅŸarÄ±sÄ±z")}catch{r.error("âŒ BaÄŸlantÄ± hatasÄ±")}}}}const T=({newCommand:s,setNewCommand:c,createCommand:i,onCancel:x})=>e.jsxs("div",{className:"command-form",children:[e.jsx("h3",{children:"Yeni Komut Olu\\u015Ftur"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Komut Ad\\u0131 *"}),e.jsx("input",{type:"text",placeholder:"!komut",value:s.name,onChange:t=>c({...s,name:t.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"A\\u00E7\\u0131klama"}),e.jsx("input",{type:"text",placeholder:"Komut a\\u00E7\\u0131klamas\\u0131",value:s.description,onChange:t=>c({...s,description:t.target.value})})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Yan\\u0131t *"}),e.jsx("textarea",{placeholder:"Komut yan\\u0131t\\u0131 (de\\u011Fi\\u015Fkenler: {user}, {server}, {channel})",value:s.response,onChange:t=>c({...s,response:t.target.value}),rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tetikleme Tipi"}),e.jsxs("select",{value:s.trigger_type,onChange:t=>c({...s,trigger_type:t.target.value}),children:[e.jsx("option",{value:"exact",children:"Tam E\\u015Fle\\u015Fme"}),e.jsx("option",{value:"contains",children:"\\u0130\\u00E7erir"}),e.jsx("option",{value:"starts_with",children:"\\u0130le Ba\\u015Flar"}),e.jsx("option",{value:"regex",children:"Regex"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"\\u0130zinler"}),e.jsxs("select",{value:s.permissions,onChange:t=>c({...s,permissions:t.target.value}),children:[e.jsx("option",{value:"everyone",children:"Herkes"}),e.jsx("option",{value:"mods",children:"Moderat\\u00F6rler"}),e.jsx("option",{value:"admins",children:"Adminler"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cooldown (saniye)"}),e.jsx("input",{type:"number",min:"0",max:"300",value:s.cooldown,onChange:t=>c({...s,cooldown:parseInt(t.target.value)})})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:s.delete_trigger,onChange:t=>c({...s,delete_trigger:t.target.checked})}),"Tetikleyici mesaj\\u0131 sil"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:s.embed,onChange:t=>c({...s,embed:t.target.checked})}),"Embed olarak g\\u00F6nder"]})}),s.embed&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Embed Rengi"}),e.jsx("input",{type:"color",value:s.embed_color,onChange:t=>c({...s,embed_color:t.target.value})})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:x,children:"\\u0130ptal"}),e.jsx("button",{className:"submit-btn",onClick:i,children:"Olu\\u015Ftur"})]})]}),Q=({serverId:s,onClose:c})=>{const{commands:i,creating:x,setCreating:t,newCommand:b,setNewCommand:v,loading:j,stats:h,createCommand:f,deleteCommand:k,toggleCommand:N,exportCommands:y,importCommands:d}=z(s);return j?e.jsx("div",{className:"custom-commands-overlay",children:e.jsx("div",{className:"custom-commands-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Komutlar y\\u00FCkleniyor..."})]})})}):e.jsx("div",{className:"custom-commands-overlay",onClick:c,children:e.jsxs("div",{className:"custom-commands-panel",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"commands-header",children:[e.jsx("h2",{children:"\\u26A1 \\u00D6zel Komutlar"}),e.jsx("button",{className:"close-btn",onClick:c,children:"\\u00D7"})]}),e.jsxs("div",{className:"commands-content",children:[h&&e.jsxs("div",{className:"stats-overview",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:h.total_commands||0}),e.jsx("span",{className:"stat-label",children:"Toplam Komut"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:h.enabled_commands||0}),e.jsx("span",{className:"stat-label",children:"Aktif"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:h.total_uses||0}),e.jsx("span",{className:"stat-label",children:"Kullan\\u0131m"})]})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"create-btn",onClick:()=>t(!0),children:"â• Yeni Komut"}),e.jsx("button",{className:"export-btn",onClick:y,children:"ğŸ“¤ D\\u0131\\u015Fa Aktar"}),e.jsxs("label",{className:"import-btn",children:["ğŸ“¥ \\u0130\\u00E7e Aktar",e.jsx("input",{type:"file",accept:".json",onChange:n=>n.target.files[0]&&d(n.target.files[0]),style:{display:"none"}})]})]}),x&&e.jsx(T,{newCommand:b,setNewCommand:v,createCommand:f,onCancel:()=>t(!1)}),e.jsx("div",{className:"commands-list",children:i.length>0?i.map(n=>e.jsxs("div",{className:`command-card ${n.enabled?"":"disabled"}`,children:[e.jsxs("div",{className:"command-header",children:[e.jsxs("div",{className:"command-info",children:[e.jsx("h4",{children:n.name}),n.description&&e.jsx("p",{children:n.description})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:n.enabled,onChange:u=>N(n.id,u.target.checked)}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"command-response",children:[e.jsx("strong",{children:"Yan\\u0131t:"})," ",n.response]}),e.jsxs("div",{className:"command-meta",children:[e.jsxs("span",{className:"meta-item",children:["ğŸ¯ ",n.trigger_type]}),e.jsxs("span",{className:"meta-item",children:["ğŸ‘¥ ",n.permissions]}),n.cooldown>0&&e.jsxs("span",{className:"meta-item",children:["â±ï¸ ",n.cooldown,"s"]}),e.jsxs("span",{className:"meta-item",children:["ğŸ“Š ",n.use_count||0," kullan\\u0131m"]})]}),e.jsxs("div",{className:"command-actions",children:[e.jsx("button",{className:"edit-btn",onClick:()=>{},children:"âœï¸"}),e.jsx("button",{className:"delete-btn",onClick:()=>k(n.id),children:"ğŸ—‘ï¸"})]})]},n.id)):!x&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"\\u26A1"}),e.jsx("h3",{children:"Hen\\u00FCz \\u00F6zel komut yok"}),e.jsx("p",{children:"Sunucunuz i\\u00E7in \\u00F6zel komutlar olu\\u015Fturun"})]})})]})]})})};export{Q as default};
