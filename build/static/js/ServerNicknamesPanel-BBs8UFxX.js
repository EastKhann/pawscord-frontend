var C=Object.defineProperty;var r=(a,s)=>C(a,"name",{value:s,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{C as v,a as S}from"./icons-vendor-BMXAt4pj.js";import{t as i}from"./index-DwVhiipM.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const F=r(({fetchWithAuth:a,apiBaseUrl:s,onClose:u,serverId:p})=>{const[y,h]=d.useState([]),[g,x]=d.useState(!1),[c,k]=d.useState("");d.useEffect(()=>{f()},[]);const f=r(async()=>{x(!0);try{const o=await(await a(`${s}/servers/${p}/nicknames/`)).json();h(o.nicknames||[])}catch{i.error("Failed to load nicknames")}finally{x(!1)}},"fetchNicknames"),b=r(async(t,o)=>{try{await a(`${s}/servers/${p}/nicknames/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,nickname:o})}),i.success("Nickname updated"),f()}catch{i.error("Failed to update nickname")}},"updateNickname"),j=r(async t=>{try{await a(`${s}/servers/${p}/nicknames/clear/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t})}),i.success("Nickname cleared"),f()}catch{i.error("Failed to clear nickname")}},"clearNickname"),m=y.filter(t=>t.username.toLowerCase().includes(c.toLowerCase())||t.nickname&&t.nickname.toLowerCase().includes(c.toLowerCase()));return e.jsx("div",{style:n.overlay,children:e.jsxs("div",{style:n.modal,children:[e.jsxs("div",{style:n.header,children:[e.jsxs("div",{style:n.headerLeft,children:[e.jsx(v,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:n.title,children:"Server Nicknames"})]}),e.jsx("button",{onClick:u,style:n.closeButton,children:e.jsx(S,{})})]}),e.jsx("div",{style:n.toolbar,children:e.jsx("input",{type:"text",value:c,onChange:r(t=>k(t.target.value),"onChange"),placeholder:"Search members...",style:n.searchInput})}),e.jsx("div",{style:n.content,children:g?e.jsx("div",{style:n.loading,children:"Loading nicknames..."}):m.length===0?e.jsx("div",{style:n.empty,children:c?"No members match your search":"No members found"}):e.jsx("div",{style:n.nicknamesList,children:m.map((t,o)=>e.jsxs("div",{style:n.nicknameCard,children:[e.jsxs("div",{style:n.userInfo,children:[e.jsx("div",{style:n.username,children:t.username}),t.nickname&&e.jsxs("div",{style:n.currentNickname,children:["Current nickname: ",e.jsx("span",{style:n.nicknameValue,children:t.nickname})]})]}),e.jsxs("div",{style:n.actions,children:[e.jsx("button",{onClick:r(()=>{const l=prompt("Enter new nickname:",t.nickname||"");l!==null&&l.trim()&&b(t.user_id,l.trim())},"onClick"),style:n.editButton,children:"Edit"}),t.nickname&&e.jsx("button",{onClick:r(()=>j(t.user_id),"onClick"),style:n.clearButton,children:"Clear"})]})]},o))})})]})})},"ServerNicknamesPanel"),n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},searchInput:{width:"100%",padding:"10px 12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},nicknamesList:{display:"flex",flexDirection:"column",gap:"10px"},nicknameCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},userInfo:{flex:1},username:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},currentNickname:{fontSize:"13px",color:"#99aab5"},nicknameValue:{color:"#5865f2",fontWeight:"500"},actions:{display:"flex",gap:"8px"},editButton:{padding:"6px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500"},clearButton:{padding:"6px 12px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500"}};export{F as default};
