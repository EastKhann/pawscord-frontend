import{r as n,n as e}from"./react-core-zXIKm1Jm.js";import{a$ as g,B as N,ae as b,b2 as f,A as _}from"./icons-vendor-DZdpmN99.js";import"./editor-vendor-DiU449Dh.js";function B({apiBaseUrl:c,fetchWithAuth:d}){const[i,y]=n.useState([]),[t,h]=n.useState(""),[p,m]=n.useState(""),[l,w]=n.useState(null),[j,r]=n.useState(!1),[u,o]=n.useState("");n.useEffect(()=>{v(),S()},[]);const v=async()=>{r(!0);try{const s=await d(`${c}/ban-appeals/list/`);if(s.ok){const a=await s.json();y(a.appeals||[])}}catch(s){console.error("Error loading appeals:",s)}finally{r(!1)}},S=async()=>{try{const s=await d(`${c}/ban-appeals/status/`);if(s.ok){const a=await s.json();w(a)}}catch(s){console.error("Error loading ban info:",s)}},A=async()=>{if(!t.trim()){o("âŒ Please provide a reason");return}r(!0);try{const s=await d(`${c}/adv/ban-appeal/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t,details:p||null})});if(s.ok)o("âœ… Appeal submitted successfully!"),h(""),m(""),v();else{const a=await s.json();o(`âŒ ${a.error||"Failed to submit appeal"}`)}}catch(s){o("âŒ Network error: "+s.message)}finally{r(!1)}},D=s=>{const a={pending:{icon:e.jsx(f,{}),color:"#faa61a",text:"Pending"},approved:{icon:e.jsx(_,{}),color:"#43b581",text:"Approved"},rejected:{icon:e.jsx(N,{}),color:"#f04747",text:"Rejected"}};return a[s]||a.pending};return e.jsxs("div",{className:"ban-appeals-panel",children:[e.jsx("div",{className:"appeals-header",children:e.jsxs("h2",{children:[e.jsx(g,{})," Ban Appeals"]})}),u&&e.jsx("div",{className:"appeal-message",children:u}),l&&l.is_banned&&e.jsx("div",{className:"ban-info-card",children:e.jsxs("div",{className:"ban-warning",children:[e.jsx(N,{className:"warning-icon"}),e.jsxs("div",{className:"warning-text",children:[e.jsx("h3",{children:"You are currently banned"}),e.jsx("p",{children:l.ban_reason||"No reason provided"}),e.jsxs("div",{className:"ban-meta",children:[e.jsxs("span",{children:["Banned on: ",new Date(l.banned_at).toLocaleDateString()]}),l.expires_at&&e.jsxs("span",{children:["Expires: ",new Date(l.expires_at).toLocaleDateString()]})]})]})]})}),e.jsxs("div",{className:"submit-appeal-section",children:[e.jsxs("h3",{children:[e.jsx(b,{})," Submit New Appeal"]}),e.jsxs("div",{className:"appeal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reason for Appeal:"}),e.jsx("input",{type:"text",placeholder:"Why should you be unbanned?",value:t,onChange:s=>h(s.target.value),className:"form-input",maxLength:200}),e.jsxs("div",{className:"char-count",children:[t.length,"/200"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Additional Details (optional):"}),e.jsx("textarea",{placeholder:"Provide any additional context or evidence...",value:p,onChange:s=>m(s.target.value),className:"form-textarea",rows:5,maxLength:1e3}),e.jsxs("div",{className:"char-count",children:[p.length,"/1000"]})]}),e.jsxs("button",{className:"submit-btn",onClick:A,disabled:j||!t.trim(),children:[e.jsx(b,{})," Submit Appeal"]})]}),e.jsxs("div",{className:"appeal-guidelines",children:[e.jsx("h4",{children:"ðŸ“‹ Guidelines:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Be honest and respectful in your appeal"}),e.jsx("li",{children:"Explain why you believe the ban was unfair or a mistake"}),e.jsx("li",{children:"Provide evidence if available"}),e.jsx("li",{children:"Appeals are reviewed within 24-48 hours"})]})]})]}),e.jsxs("div",{className:"appeals-history",children:[e.jsxs("h3",{children:[e.jsx(f,{})," Your Appeals (",i.length,")"]}),j&&i.length===0?e.jsx("div",{className:"loading",children:"Loading appeals..."}):i.length===0?e.jsxs("div",{className:"empty-appeals",children:[e.jsx(g,{className:"empty-icon"}),e.jsx("p",{children:"No appeals submitted yet"})]}):e.jsx("div",{className:"appeals-list",children:i.map((s,a)=>{const x=D(s.status);return e.jsxs("div",{className:`appeal-item status-${s.status}`,children:[e.jsxs("div",{className:"appeal-header",children:[e.jsx("div",{className:"appeal-date",children:new Date(s.created_at).toLocaleString()}),e.jsxs("div",{className:"appeal-status",style:{background:x.color},children:[x.icon," ",x.text]})]}),e.jsxs("div",{className:"appeal-content",children:[e.jsxs("div",{className:"appeal-reason",children:[e.jsx("strong",{children:"Reason:"})," ",s.reason]}),s.details&&e.jsxs("div",{className:"appeal-details",children:[e.jsx("strong",{children:"Details:"})," ",s.details]})]}),s.admin_response&&e.jsxs("div",{className:"admin-response",children:[e.jsx("strong",{children:"Admin Response:"})," ",s.admin_response,e.jsxs("div",{className:"response-date",children:["Reviewed: ",new Date(s.reviewed_at).toLocaleString()]})]})]},a)})})]})]})}export{B as default};
