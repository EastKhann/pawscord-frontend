var v=Object.defineProperty;var t=(n,s)=>v(n,"name",{value:s,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{bw as c,a as j,z as k,aD as b,g as C}from"./icons-vendor-BMXAt4pj.js";import{t as i,d as S}from"./index-D0nbcjO7.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const $=t(({fetchWithAuth:n,apiBaseUrl:s,serverId:f,onClose:p})=>{const[x,y]=d.useState([]),[g,m]=d.useState(!0);d.useEffect(()=>{l()},[]);const l=t(async()=>{try{m(!0);const o=await n(`${s}/rooms/archived/list/?server_id=${f}`);if(o.ok){const a=await o.json();y(a)}}catch{}finally{m(!1)}},"loadArchivedRooms"),h=t(async o=>{try{(await n(`${s}/rooms/${o}/unarchive/`,{method:"POST"})).ok?(i.success("Kanal geri yüklendi"),l()):i.error("Kanal geri yüklenemedi")}catch{i.error("Bir hata oluştu")}},"unarchiveRoom"),u=t(async o=>{if(await S("Bu kanalı kalıcı olarak silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!"))try{(await n(`${s}/rooms/${o}/delete/`,{method:"DELETE"})).ok?(i.success("Kanal kalıcı olarak silindi"),l()):i.error("Kanal silinemedi")}catch{i.error("Bir hata oluştu")}},"permanentlyDelete");return e.jsx("div",{style:r.overlay,onClick:p,children:e.jsxs("div",{style:r.modal,onClick:t(o=>o.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:r.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(c,{style:{color:"#888"}}),e.jsx("h2",{style:{margin:0},children:"Arşivlenmiş Kanallar"})]}),e.jsx(j,{onClick:p,style:r.closeBtn})]}),e.jsx("div",{style:r.content,children:g?e.jsx("div",{style:r.loading,children:"Yükleniyor..."}):x.length===0?e.jsxs("div",{style:r.empty,children:[e.jsx(c,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),e.jsx("p",{children:"Arşivlenmiş kanal yok"}),e.jsx("p",{style:{fontSize:"12px",color:"#888"},children:"Arşivlenen kanallar burada görünür"})]}):x.map(o=>e.jsxs("div",{style:r.roomCard,children:[e.jsx("div",{style:r.roomIcon,children:e.jsx(c,{style:{color:"#888"}})}),e.jsxs("div",{style:r.roomContent,children:[e.jsx("div",{style:r.roomName,children:o.name}),e.jsxs("div",{style:r.roomMeta,children:[e.jsx(k,{style:{fontSize:"12px"}}),e.jsxs("span",{children:["Arşivlendi: ",new Date(o.archived_at).toLocaleDateString("tr-TR")]})]}),o.archived_reason&&e.jsxs("div",{style:r.roomReason,children:["Sebep: ",o.archived_reason]})]}),e.jsxs("div",{style:r.roomActions,children:[e.jsxs("button",{onClick:t(()=>h(o.slug),"onClick"),style:r.unarchiveBtn,title:"Geri yükle",children:[e.jsx(b,{})," Geri Yükle"]}),e.jsx("button",{onClick:t(()=>u(o.slug),"onClick"),style:r.deleteBtn,title:"Kalıcı olarak sil",children:e.jsx(C,{})})]})]},o.id))})]})})},"ArchivedRoomsPanel"),r={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},roomCard:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},roomIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#1e1e1e",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},roomContent:{flex:1},roomName:{fontWeight:"600",fontSize:"16px",marginBottom:"6px",color:"#dcddde"},roomMeta:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#888",marginBottom:"4px"},roomReason:{fontSize:"13px",color:"#888",fontStyle:"italic"},roomActions:{display:"flex",flexDirection:"column",gap:"8px"},unarchiveBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},deleteBtn:{backgroundColor:"#f04747",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{$ as default};
