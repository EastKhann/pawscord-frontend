import{r as o,av as h,l as k,ax as v,bD as E}from"./react-core-B6hadH-M.js";import{t as r}from"./index-D_6pZib5.js";const B=({fetchWithAuth:c,apiBaseUrl:s,serverId:d,onClose:i})=>{const[a,l]=o.useState({enabled:!1,message:"",channel_id:"",dm_enabled:!1,dm_message:""}),[p,m]=o.useState([]),[C,g]=o.useState(!0),u=[{key:"{user}",desc:"Kullanƒ±cƒ± adƒ±"},{key:"{mention}",desc:"Kullanƒ±cƒ±yƒ± etiketle"},{key:"{server}",desc:"Sunucu adƒ±"},{key:"{membercount}",desc:"√úye sayƒ±sƒ±"},{key:"{date}",desc:"Tarih"}];o.useEffect(()=>{y(),f()},[]);const y=async()=>{try{const e=await c(`${s}/servers/${d}/welcome/`);if(e.ok){const n=await e.json();n&&l(n)}}catch(e){console.error("≈ûablon y√ºkleme hatasƒ±:",e)}finally{g(!1)}},f=async()=>{try{const e=await c(`${s}/servers/${d}/channels/`);if(e.ok){const n=await e.json();m(n)}}catch(e){console.error("Kanal y√ºkleme hatasƒ±:",e)}},x=async()=>{try{(await c(`${s}/servers/welcome/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_id:d,...a})})).ok?r.success("Ho≈ügeldin ≈üablonu kaydedildi"):r.error("≈ûablon kaydedilemedi")}catch(e){console.error("≈ûablon kaydetme hatasƒ±:",e),r.error("Bir hata olu≈ütu")}},b=e=>{l({...a,message:a.message+e})},R=()=>{let e=a.message.replace("{user}","Kullanƒ±cƒ±Adƒ±").replace("{mention}","@Kullanƒ±cƒ±Adƒ±").replace("{server}","Sunucu Adƒ±").replace("{membercount}","1,234").replace("{date}",new Date().toLocaleDateString("tr-TR"));r.info(e)};return React.createElement("div",{style:t.overlay,onClick:i},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(h,{style:{color:"#43b581"}}),React.createElement("h2",{style:{margin:0}},"Ho≈ügeldin Mesajlarƒ±")),React.createElement(k,{onClick:i,style:t.closeBtn})),React.createElement("div",{style:t.content},React.createElement("div",{style:t.toggle},React.createElement("label",{style:t.toggleLabel},React.createElement("input",{type:"checkbox",checked:a.enabled,onChange:e=>l({...a,enabled:e.target.checked})}),React.createElement("span",null,"Ho≈ügeldin mesajlarƒ±nƒ± etkinle≈ütir"))),a.enabled&&React.createElement(React.Fragment,null,React.createElement("div",{style:t.field},React.createElement("label",{style:t.label},"Ho≈ügeldin Kanalƒ±"),React.createElement("select",{value:a.channel_id,onChange:e=>l({...a,channel_id:e.target.value}),style:t.select},React.createElement("option",{value:""},"Kanal Se√ßin"),p.map(e=>React.createElement("option",{key:e.id,value:e.id},"#",e.name)))),React.createElement("div",{style:t.field},React.createElement("label",{style:t.label},"Mesaj ≈ûablonu"),React.createElement("div",{style:t.placeholders},u.map(e=>React.createElement("button",{key:e.key,onClick:()=>b(e.key),style:t.placeholderBtn,title:e.desc},e.key))),React.createElement("textarea",{value:a.message,onChange:e=>l({...a,message:e.target.value}),placeholder:"Ho≈ü geldin {user}! {server} sunucusuna katƒ±ldƒ±n. ≈ûu anda {membercount} √ºyeyiz! üéâ",style:t.textarea,rows:5}),React.createElement("button",{onClick:R,style:t.previewBtn},React.createElement(v,null)," √ñnizleme")),React.createElement("div",{style:t.toggle},React.createElement("label",{style:t.toggleLabel},React.createElement("input",{type:"checkbox",checked:a.dm_enabled,onChange:e=>l({...a,dm_enabled:e.target.checked})}),React.createElement("span",null,"DM ile ho≈ügeldin mesajƒ± g√∂nder"))),a.dm_enabled&&React.createElement("div",{style:t.field},React.createElement("label",{style:t.label},"DM Mesajƒ±"),React.createElement("textarea",{value:a.dm_message,onChange:e=>l({...a,dm_message:e.target.value}),placeholder:"Merhaba {user}! {server} sunucusuna ho≈ü geldin!",style:t.textarea,rows:3})))),React.createElement("div",{style:t.footer},React.createElement("button",{onClick:x,style:t.saveBtn},React.createElement(E,null)," Kaydet"))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},toggle:{marginBottom:"20px"},toggleLabel:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",fontSize:"16px"},field:{marginBottom:"20px"},label:{display:"block",marginBottom:"8px",color:"#dcddde",fontSize:"14px",fontWeight:"600"},select:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},placeholders:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"10px"},placeholderBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontFamily:"monospace"},textarea:{width:"100%",padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",resize:"vertical",marginBottom:"10px"},previewBtn:{backgroundColor:"#2c2f33",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},footer:{padding:"20px",borderTop:"1px solid #333"},saveBtn:{width:"100%",backgroundColor:"#43b581",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}};export{B as default};
