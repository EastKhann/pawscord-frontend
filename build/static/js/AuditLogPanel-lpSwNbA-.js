import{r as o,b$ as g,l as C,w as L,aT as _}from"./react-core-B6hadH-M.js";const I=({serverId:n,onClose:x,fetchWithAuth:d,apiBaseUrl:p})=>{const[f,b]=o.useState([]),[y,m]=o.useState(!0),[l,R]=o.useState("all"),[r,E]=o.useState(""),[c,h]=o.useState("7days");o.useEffect(()=>{v()},[n,l,c]);const v=async()=>{m(!0);try{const e=new URLSearchParams({filter:l,range:c}),a=await d(`${p}/servers/${n}/audit-logs/?${e}`);if(a.ok){const s=await a.json();b(s.logs||[])}}catch(e){console.error("Audit log fetch error:",e)}finally{m(!1)}},w=async()=>{try{const a=await(await d(`${p}/servers/${n}/audit-logs/export/`)).blob(),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=`audit-log-${n}-${Date.now()}.csv`,i.click()}catch(e){console.error("Export error:",e)}},S=e=>({member_join:"ðŸ‘‹",member_leave:"ðŸ‘‹",member_kick:"ðŸ‘¢",member_ban:"ðŸ”¨",channel_create:"âž•",channel_delete:"ðŸ—‘ï¸",channel_update:"âœï¸",role_create:"ðŸŽ­",role_delete:"ðŸ—‘ï¸",role_update:"âœï¸",message_delete:"ðŸ—‘ï¸",message_bulk_delete:"ðŸ—‘ï¸",server_update:"âš™ï¸",invite_create:"ðŸ”—",webhook_create:"ðŸª",webhook_delete:"ðŸ—‘ï¸"})[e]||"ðŸ“",k=e=>e.includes("delete")||e.includes("kick")||e.includes("ban")?"#ed4245":e.includes("create")||e.includes("join")?"#3ba55d":"#faa61a",u=f.filter(e=>e.description?.toLowerCase().includes(r.toLowerCase())||e.user?.toLowerCase().includes(r.toLowerCase()));return React.createElement("div",{style:t.overlay},React.createElement("div",{style:t.panel},React.createElement("div",{style:t.header},React.createElement("div",{style:t.headerLeft},React.createElement(g,{size:20,color:"#5865f2"}),React.createElement("h2",{style:t.title},"Denetim GÃ¼nlÃ¼ÄŸÃ¼")),React.createElement("button",{onClick:x,style:t.closeButton},React.createElement(C,{size:20}))),React.createElement("div",{style:t.filters},React.createElement("div",{style:t.searchBox},React.createElement(L,{size:14,color:"#b9bbbe"}),React.createElement("input",{type:"text",placeholder:"Ara...",value:r,onChange:e=>E(e.target.value),style:t.searchInput})),React.createElement("select",{value:l,onChange:e=>R(e.target.value),style:t.select},React.createElement("option",{value:"all"},"TÃ¼m Eylemler"),React.createElement("option",{value:"members"},"Ãœye Ä°ÅŸlemleri"),React.createElement("option",{value:"channels"},"Kanal Ä°ÅŸlemleri"),React.createElement("option",{value:"roles"},"Rol Ä°ÅŸlemleri"),React.createElement("option",{value:"messages"},"Mesaj Ä°ÅŸlemleri"),React.createElement("option",{value:"server"},"Sunucu Ä°ÅŸlemleri")),React.createElement("select",{value:c,onChange:e=>h(e.target.value),style:t.select},React.createElement("option",{value:"1day"},"Son 24 Saat"),React.createElement("option",{value:"7days"},"Son 7 GÃ¼n"),React.createElement("option",{value:"30days"},"Son 30 GÃ¼n"),React.createElement("option",{value:"90days"},"Son 90 GÃ¼n")),React.createElement("button",{onClick:w,style:t.exportButton},React.createElement(_,{size:14}),React.createElement("span",null,"DÄ±ÅŸa Aktar"))),React.createElement("div",{style:t.logsList},y?React.createElement("div",{style:t.loading},"YÃ¼kleniyor..."):u.length===0?React.createElement("div",{style:t.empty},React.createElement(g,{size:48,color:"#4e5058"}),React.createElement("p",null,"HenÃ¼z log kaydÄ± yok")):u.map((e,a)=>React.createElement("div",{key:a,style:t.logItem},React.createElement("div",{style:t.logIcon},S(e.action)),React.createElement("div",{style:t.logContent},React.createElement("div",{style:t.logDescription},React.createElement("span",{style:{color:k(e.action),fontWeight:"bold"}},e.user)," ",e.description),React.createElement("div",{style:t.logMeta},React.createElement("span",null,new Date(e.timestamp).toLocaleString("tr-TR")),e.target&&React.createElement("span",null," â€¢ Hedef: ",e.target))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"100%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.4)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},title:{margin:0,fontSize:"20px",fontWeight:"bold",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"all 0.2s"},filters:{display:"flex",gap:"12px",padding:"16px 20px",borderBottom:"1px solid #202225",flexWrap:"wrap"},searchBox:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#202225",padding:"8px 12px",borderRadius:"4px",flex:1,minWidth:"200px"},searchInput:{background:"none",border:"none",color:"#dcddde",fontSize:"14px",outline:"none",width:"100%"},select:{backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",fontSize:"14px",cursor:"pointer",outline:"none"},exportButton:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},logsList:{flex:1,overflowY:"auto",padding:"16px 20px"},loading:{textAlign:"center",padding:"40px",color:"#b9bbbe"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},logItem:{display:"flex",gap:"12px",padding:"12px",marginBottom:"8px",backgroundColor:"#36393f",borderRadius:"4px",borderLeft:"3px solid #5865f2",transition:"all 0.2s"},logIcon:{fontSize:"24px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},logContent:{flex:1},logDescription:{color:"#dcddde",fontSize:"14px",marginBottom:"4px"},logMeta:{fontSize:"12px",color:"#72767d"}};export{I as default};
