import{r as l,A as u,l as b,aT as k,cu as R}from"./react-core-B6hadH-M.js";import{t as r}from"./index-D_6pZib5.js";const v=({fetchWithAuth:c,apiBaseUrl:i,onClose:p,roomSlug:o})=>{const[s,f]=l.useState([]),[x,d]=l.useState(!1);l.useEffect(()=>{m()},[o]);const m=async()=>{d(!0);try{const a=await(await c(`${i}/links/stats/?room=${o}`)).json();f(a.stats||[])}catch{r.error("Failed to load link stats")}finally{d(!1)}},g=async()=>{try{const a=await(await c(`${i}/links/export/?room=${o}`)).blob(),y=window.URL.createObjectURL(a),n=document.createElement("a");n.href=y,n.download=`link_stats_${new Date().toISOString()}.csv`,document.body.appendChild(n),n.click(),n.remove(),r.success("Stats exported successfully")}catch{r.error("Failed to export stats")}};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(u,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Link Click Tracking")),React.createElement("button",{onClick:p,style:e.closeButton},React.createElement(b,null))),React.createElement("div",{style:e.toolbar},React.createElement("button",{onClick:g,style:e.exportButton},React.createElement(k,{style:{marginRight:"5px"}}),"Export CSV")),React.createElement("div",{style:e.content},x?React.createElement("div",{style:e.loading},"Loading link stats..."):s.length===0?React.createElement("div",{style:e.empty},"No link click data available"):React.createElement("div",{style:e.statsTable},s.map((t,a)=>React.createElement("div",{key:a,style:e.statRow},React.createElement("div",{style:e.linkInfo},React.createElement(R,{style:{color:"#5865f2",marginRight:"10px"}}),React.createElement("div",{style:{flex:1}},React.createElement("div",{style:e.linkUrl},t.url),React.createElement("div",{style:e.linkMeta},"Shared by ",t.user?.username," on ",new Date(t.created_at).toLocaleDateString()))),React.createElement("div",{style:e.clickCount},t.click_count," clicks")))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},exportButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsTable:{display:"flex",flexDirection:"column",gap:"12px"},statRow:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},linkInfo:{display:"flex",alignItems:"center",flex:1},linkUrl:{fontSize:"14px",color:"#5865f2",fontWeight:"500",wordBreak:"break-all",marginBottom:"4px"},linkMeta:{fontSize:"12px",color:"#99aab5"},clickCount:{fontSize:"18px",fontWeight:"600",color:"#ffffff",minWidth:"100px",textAlign:"right"}};export{v as default};
