{"version":3,"file":"SessionManagementPanel-CMnZlXbZ.js","sources":["../../../src/components/SessionManagementPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { FaTimes, FaLaptop, FaMobile, FaTablet, FaTrash, FaMapMarkerAlt, FaClock } from 'react-icons/fa';\nimport { toast } from '../utils/toast';\n\nconst SessionManagementPanel = ({ fetchWithAuth, apiBaseUrl, onClose }) => {\n    const [sessions, setSessions] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        fetchSessions();\n    }, []);\n\n    const fetchSessions = async () => {\n        setLoading(true);\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/sessions/list/`);\n            const data = await response.json();\n            setSessions(data.sessions || []);\n        } catch (error) {\n            toast.error('Failed to load sessions');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const revokeSession = async (sessionId) => {\n        if (!confirm('Are you sure you want to sign out this device?')) return;\n\n        try {\n            await fetchWithAuth(`${apiBaseUrl}/sessions/revoke/`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ session_id: sessionId })\n            });\n\n            toast.success('Session revoked successfully');\n            fetchSessions();\n        } catch (error) {\n            toast.error('Failed to revoke session');\n        }\n    };\n\n    const revokeAllSessions = async () => {\n        if (!confirm('This will sign you out from ALL devices except this one. Continue?')) return;\n\n        try {\n            await fetchWithAuth(`${apiBaseUrl}/security/sessions/revoke-all/`, {\n                method: 'POST'\n            });\n\n            toast.success('All other sessions revoked');\n            fetchSessions();\n        } catch (error) {\n            toast.error('Failed to revoke sessions');\n        }\n    };\n\n    const getDeviceIcon = (deviceType) => {\n        switch (deviceType) {\n            case 'mobile':\n                return <FaMobile style={{ fontSize: '24px', color: '#5865f2' }} />;\n            case 'tablet':\n                return <FaTablet style={{ fontSize: '24px', color: '#5865f2' }} />;\n            default:\n                return <FaLaptop style={{ fontSize: '24px', color: '#5865f2' }} />;\n        }\n    };\n\n    return (\n        <div style={styles.overlay}>\n            <div style={styles.modal}>\n                <div style={styles.header}>\n                    <div style={styles.headerLeft}>\n                        <FaLaptop style={{ marginRight: '10px', color: '#5865f2' }} />\n                        <h2 style={styles.title}>Active Sessions</h2>\n                    </div>\n                    <button onClick={onClose} style={styles.closeButton}>\n                        <FaTimes />\n                    </button>\n                </div>\n\n                <div style={styles.toolbar}>\n                    <div style={styles.sessionCount}>{sessions.length} active {sessions.length === 1 ? 'session' : 'sessions'}</div>\n                    <button onClick={revokeAllSessions} style={styles.revokeAllButton}>\n                        Sign Out All Other Devices\n                    </button>\n                </div>\n\n                <div style={styles.content}>\n                    {loading ? (\n                        <div style={styles.loading}>Loading sessions...</div>\n                    ) : sessions.length === 0 ? (\n                        <div style={styles.empty}>No active sessions found</div>\n                    ) : (\n                        <div style={styles.sessionsList}>\n                            {sessions.map((session, idx) => (\n                                <div key={idx} style={{ ...styles.sessionCard, ...(session.is_current && styles.currentSession) }}>\n                                    <div style={styles.sessionIcon}>\n                                        {getDeviceIcon(session.device_type)}\n                                    </div>\n                                    <div style={styles.sessionInfo}>\n                                        <div style={styles.sessionDevice}>\n                                            {session.device_name || 'Unknown Device'}\n                                            {session.is_current && (\n                                                <span style={styles.currentBadge}>Current Session</span>\n                                            )}\n                                        </div>\n                                        <div style={styles.sessionDetails}>\n                                            <div style={styles.detailItem}>\n                                                <FaMapMarkerAlt style={{ marginRight: '5px', fontSize: '12px' }} />\n                                                {session.location || 'Unknown Location'}\n                                            </div>\n                                            <div style={styles.detailItem}>\n                                                <FaClock style={{ marginRight: '5px', fontSize: '12px' }} />\n                                                Last active: {new Date(session.last_activity).toLocaleString()}\n                                            </div>\n                                            {session.ip_address && (\n                                                <div style={styles.detailItem}>\n                                                    IP: {session.ip_address}\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                    {!session.is_current && (\n                                        <button\n                                            onClick={() => revokeSession(session.id)}\n                                            style={styles.revokeButton}\n                                            title=\"Sign Out\"\n                                        >\n                                            <FaTrash />\n                                        </button>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 999999,\n    },\n    modal: {\n        backgroundColor: '#1e1e1e',\n        borderRadius: '8px',\n        width: '90%',\n        maxWidth: '700px',\n        maxHeight: '90vh',\n        display: 'flex',\n        flexDirection: 'column',\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4)',\n    },\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '20px',\n        borderBottom: '1px solid #2c2f33',\n    },\n    headerLeft: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    title: {\n        margin: 0,\n        fontSize: '20px',\n        color: '#ffffff',\n    },\n    closeButton: {\n        background: 'none',\n        border: 'none',\n        color: '#99aab5',\n        cursor: 'pointer',\n        fontSize: '20px',\n        padding: '5px',\n    },\n    toolbar: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '15px 20px',\n        borderBottom: '1px solid #2c2f33',\n    },\n    sessionCount: {\n        fontSize: '14px',\n        color: '#dcddde',\n    },\n    revokeAllButton: {\n        padding: '8px 16px',\n        backgroundColor: '#f04747',\n        border: 'none',\n        borderRadius: '4px',\n        color: '#ffffff',\n        cursor: 'pointer',\n        fontSize: '13px',\n        fontWeight: '500',\n    },\n    content: {\n        padding: '20px',\n        overflowY: 'auto',\n        flex: 1,\n    },\n    loading: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '40px',\n    },\n    empty: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '40px',\n    },\n    sessionsList: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '16px',\n    },\n    sessionCard: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '8px',\n        padding: '16px',\n        display: 'flex',\n        gap: '16px',\n        alignItems: 'flex-start',\n    },\n    currentSession: {\n        border: '2px solid #43b581',\n    },\n    sessionIcon: {\n        minWidth: '40px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    sessionInfo: {\n        flex: 1,\n    },\n    sessionDevice: {\n        fontSize: '16px',\n        fontWeight: '600',\n        color: '#ffffff',\n        marginBottom: '8px',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '12px',\n    },\n    currentBadge: {\n        fontSize: '11px',\n        padding: '4px 8px',\n        backgroundColor: '#43b581',\n        borderRadius: '4px',\n        fontWeight: '600',\n    },\n    sessionDetails: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '4px',\n    },\n    detailItem: {\n        fontSize: '13px',\n        color: '#99aab5',\n        display: 'flex',\n        alignItems: 'center',\n    },\n    revokeButton: {\n        background: 'none',\n        border: 'none',\n        color: '#f04747',\n        cursor: 'pointer',\n        fontSize: '18px',\n        padding: '8px',\n    },\n};\n\nexport default SessionManagementPanel;\n"],"names":["useState","useEffect","jsx","jsxs"],"mappings":"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"}