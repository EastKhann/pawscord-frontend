import{r as m,j as e}from"./react-core-D6cE4lil.js";import{y as a}from"./ui-vendor-CZOhtEfS.js";import{g as f,h as v}from"./index-ClHcoIda.js";import"./media-vendor-Du00QUHb.js";import"./router-vendor-wrB4dqw3.js";import"./icons-vendor-DT2gd7vx.js";import"./state-vendor-DnurjGY_.js";import"./crypto-vendor-BYnay7oC.js";const b={allow_dm_from_everyone:!0,allow_dm_from_friends_only:!1,allow_dm_from_server_members:!0,allow_friend_requests:!0,keep_dm_history_on_server_leave:!0,show_current_activity:!0,explicit_content_filter:"friends",blocked_words_filter_enabled:!1,show_online_status:!0,show_read_receipts:!0,show_typing_indicator:!0,allow_profile_views_from_non_friends:!1,allow_data_collection:!1,allow_personalized_ads:!1};function x(){const[t,s]=m.useState(b),[l,n]=m.useState([]),[r,u]=m.useState(""),[h,_]=m.useState(!0),o=f(),c=(i=!1)=>{const d={Authorization:`Bearer ${localStorage.getItem("access_token")}`};return i&&(d["Content-Type"]="application/json"),d};m.useEffect(()=>{Promise.all([fetch(`${o}/privacy/settings/`,{headers:c()}).then(i=>i.ok?i.json():null),fetch(`${o}/privacy/blocked-words/`,{headers:c()}).then(i=>i.ok?i.json():null)]).then(([i,d])=>{i&&s(i),d&&n(d.blocked_words||[])}).catch(i=>{}).finally(()=>_(!1))},[]);const k=async i=>{try{(await fetch(`${o}/privacy/settings/update/`,{method:"POST",headers:c(!0),body:JSON.stringify(i)})).ok?(s(i),a.success("âœ… Gizlilik ayarlarÄ± kaydedildi")):a.error("âŒ Ayarlar kaydedilemedi")}catch{a.error("âŒ BaÄŸlantÄ± hatasÄ±")}};return{settings:t,loading:h,blockedWords:l,newWord:r,setNewWord:u,toggleSetting:i=>k({...t,[i]:!t[i]}),updateExplicitFilter:i=>k({...t,explicit_content_filter:i}),addBlockedWord:async()=>{if(r.trim())try{(await fetch(`${o}/privacy/blocked-words/add/`,{method:"POST",headers:c(!0),body:JSON.stringify({word:r.trim()})})).ok?(n(d=>[...d,r.trim()]),a.success(`âœ… "${r.trim()}" engellenmiÅŸ kelimeler listesine eklendi`),u("")):a.error("âŒ Kelime eklenemedi")}catch{a.error("âŒ BaÄŸlantÄ± hatasÄ±")}},removeBlockedWord:async i=>{try{(await fetch(`${o}/privacy/blocked-words/remove/`,{method:"POST",headers:c(!0),body:JSON.stringify({word:i})})).ok?(n(y=>y.filter(p=>p!==i)),a.success(`âœ… "${i}" engellenmiÅŸ kelimeler listesinden kaldÄ±rÄ±ldÄ±`)):a.error("âŒ Kelime kaldÄ±rÄ±lamadÄ±")}catch{a.error("âŒ BaÄŸlantÄ± hatasÄ±")}},requestDataExport:async()=>{if(await v("Verilerinizi dÄ±ÅŸa aktarmak istediÄŸinizden emin misiniz? Bu iÅŸlem biraz zaman alabilir."))try{(await fetch(`${o}/privacy/data-export/request/`,{method:"POST",headers:c()})).ok?a.success("âœ… Veri dÄ±ÅŸa aktarma iÅŸlemi baÅŸlatÄ±ldÄ±. E-postanÄ±za link gÃ¶nderilecek."):a.error("âŒ Ä°stek gÃ¶nderilemedi")}catch{a.error("âŒ BaÄŸlantÄ± hatasÄ±")}}}}const j=[{title:"ðŸ’¬ Direkt Mesaj GizliliÄŸi",toggles:[{key:"allow_dm_from_everyone",label:"Herkesten DM alabilir",desc:"Sunucu Ã¼yesi olmasalar bile"},{key:"allow_dm_from_friends_only",label:"Sadece arkadaÅŸlardan DM",desc:"YalnÄ±zca arkadaÅŸlarÄ±nÄ±zdan mesaj alabilirsiniz"},{key:"allow_dm_from_server_members",label:"Sunucu Ã¼yelerinden DM",desc:"AynÄ± sunucudaki Ã¼yelerden mesaj alabilirsiniz"},{key:"allow_friend_requests",label:"ArkadaÅŸlÄ±k isteklerini kabul et",desc:"DiÄŸer kullanÄ±cÄ±lar size istek gÃ¶nderebilir"}]},{title:"ðŸ  Sunucu GizliliÄŸi",toggles:[{key:"keep_dm_history_on_server_leave",label:"Sunucudan ayrÄ±lÄ±rken DM geÃ§miÅŸini sakla",desc:"Sunucudan ayrÄ±ldÄ±ktan sonra DM'ler silinmez"},{key:"show_current_activity",label:"Mevcut aktiviteyi gÃ¶ster",desc:"OynadÄ±ÄŸÄ±nÄ±z oyun veya dinlediÄŸiniz mÃ¼ziÄŸi gÃ¶sterin"}]},{title:"ðŸ‘ï¸ GÃ¶rÃ¼nÃ¼rlÃ¼k",toggles:[{key:"show_online_status",label:"Ã‡evrimiÃ§i durumu gÃ¶ster",desc:"DiÄŸer kullanÄ±cÄ±lar Ã§evrimiÃ§i olduÄŸunuzu gÃ¶rebilir"},{key:"show_read_receipts",label:"Okundu bilgisi gÃ¶nder",desc:"MesajlarÄ± okudunuzda karÅŸÄ± tarafa bildirim gÃ¶sterilir"},{key:"show_typing_indicator",label:"YazÄ±yor gÃ¶stergesini gÃ¶ster",desc:"Mesaj yazarken karÅŸÄ± tarafa bildirim gÃ¶sterilir"},{key:"allow_profile_views_from_non_friends",label:"ArkadaÅŸ olmayanlar profilimi gÃ¶rebilir",desc:"Herkes profilinizi gÃ¶rÃ¼ntÃ¼leyebilir"}]},{title:"ðŸ“Š Veri GizliliÄŸi",toggles:[{key:"allow_data_collection",label:"Veri toplamaya izin ver",desc:"UygulamayÄ± geliÅŸtirmek iÃ§in anonim kullanÄ±m verisi toplanÄ±r"},{key:"allow_personalized_ads",label:"KiÅŸiselleÅŸtirilmiÅŸ reklamlara izin ver",desc:"Size Ã¶zel reklamlar gÃ¶sterilir"}],hasExport:!0}],g=({label:t,desc:s,checked:l,onChange:n})=>e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-label",children:t}),e.jsx("div",{className:"setting-desc",children:s})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:n}),e.jsx("span",{className:"slider"})]})]}),T=({onClose:t})=>{const s=x();return s.loading?e.jsx("div",{className:"privacy-settings-overlay",children:e.jsx("div",{className:"privacy-settings-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Gizlilik ayarlar\\u0131 y\\u00fckleniyor..."})]})})}):e.jsx("div",{className:"privacy-settings-overlay",onClick:t,children:e.jsxs("div",{className:"privacy-settings-panel",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"privacy-settings-header",children:[e.jsxs("h2",{children:["ðŸ”’"," Gizlilik ve G\\u00fcvenlik Ayarlar\\u0131"]}),e.jsx("button",{className:"close-btn",onClick:t,children:"\\u00d7"})]}),e.jsxs("div",{className:"privacy-settings-content",children:[j.map((l,n)=>e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:l.title}),e.jsx("div",{className:"settings-group",children:l.toggles.map(r=>e.jsx(g,{label:r.label,desc:r.desc,checked:s.settings[r.key],onChange:()=>s.toggleSetting(r.key)},r.key))}),l.hasExport&&e.jsxs("button",{className:"export-data-btn",onClick:s.requestDataExport,children:["ðŸ“¥"," Verilerimi D\\u0131\\u015fa Aktar"]})]},n)),e.jsxs("div",{className:"settings-section",children:[e.jsxs("h3",{children:["ðŸ›¡ï¸"," Mesaj Filtreleme"]}),e.jsxs("div",{className:"settings-group",children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-label",children:"A\\u00e7\\u0131k i\\u00e7erik filtresi"}),e.jsx("div",{className:"setting-desc",children:"Mesajlardaki m\\u00fcstehcen i\\u00e7eri\\u011fi otomatik tara"})]}),e.jsxs("select",{className:"explicit-filter-select",value:s.settings.explicit_content_filter,onChange:l=>s.updateExplicitFilter(l.target.value),children:[e.jsx("option",{value:"none",children:"Kapal\\u0131"}),e.jsx("option",{value:"friends",children:"Arkada\\u015flar hari\\u00e7"}),e.jsx("option",{value:"all",children:"Herkesten tara"})]})]}),e.jsx(g,{label:"Engellenmi\\u015f kelime filtresi",desc:"Belirledi\\u011finiz kelimeleri i\\u00e7eren mesajlar\\u0131 gizleyin",checked:s.settings.blocked_words_filter_enabled,onChange:()=>s.toggleSetting("blocked_words_filter_enabled")})]}),s.settings.blocked_words_filter_enabled&&e.jsxs("div",{className:"blocked-words-section",children:[e.jsx("h4",{children:"Engellenmi\\u015f Kelimeler"}),e.jsxs("div",{className:"add-word-form",children:[e.jsx("input",{type:"text",placeholder:"Engellenecek kelime...",value:s.newWord,onChange:l=>s.setNewWord(l.target.value),onKeyPress:l=>l.key==="Enter"&&s.addBlockedWord()}),e.jsxs("button",{className:"add-word-btn",onClick:s.addBlockedWord,children:["âž•"," Ekle"]})]}),s.blockedWords.length>0?e.jsx("div",{className:"blocked-words-list",children:s.blockedWords.map((l,n)=>e.jsxs("div",{className:"blocked-word-item",children:[e.jsx("span",{children:l}),e.jsx("button",{className:"remove-word-btn",onClick:()=>s.removeBlockedWord(l),children:"âœ•"})]},n))}):e.jsx("p",{className:"empty-state",children:"Hen\\u00fcz engellenmi\\u015f kelime yok"})]})]})]})]})})};export{T as default};
