var F=Object.defineProperty;var o=(a,i)=>F(a,"name",{value:i,configurable:!0});import{r as s,j as e}from"./react-core-Djgtqrmb.js";import{aJ as T,a as B,a9 as D,an as R,f as z}from"./icons-vendor-BW7dxHkX.js";import{c as A,e as E}from"./index-CjRzheBN.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const le=o(({onClose:a,onSelect:i,fetchWithAuth:d,apiBaseUrl:c,isAdmin:b})=>{const[x,y]=s.useState([]),[m,u]=s.useState(!0),[h,p]=s.useState(!1),[n,r]=s.useState({name:"",content:"",is_global:!1}),{overlayProps:f,dialogProps:j}=A({onClose:a,isOpen:!0,label:"Message Templates"});s.useEffect(()=>{g()},[]);const g=o(async()=>{u(!0);try{const t=await d(`${c}/templates/`);if(t.ok){const l=await t.json();y(l||[])}}catch{}u(!1)},"loadTemplates"),k=o(async()=>{if(!(!n.name||!n.content))try{(await d(`${c}/templates/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok&&(r({name:"",content:"",is_global:!1}),p(!1),g())}catch{}},"handleCreate"),C=o(async(t,l)=>{if(l.stopPropagation(),!!await E("Bu şablonu silmek istediğine emin misin?"))try{(await d(`${c}/templates/${t}/`,{method:"DELETE"})).ok&&y(v=>v.filter(w=>w.id!==t))}catch{}},"handleDelete");return e.jsx("div",{style:I,...f,children:e.jsxs("div",{style:H,...j,children:[e.jsxs("div",{style:O,children:[e.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(T,{})," Hazır Şablonlar"]}),e.jsx("button",{onClick:a,style:P,children:e.jsx(B,{})})]}),e.jsx("div",{style:_,children:h?e.jsxs("div",{style:J,children:[e.jsx("input",{placeholder:"Şablon Adı",value:n.name,onChange:o(t=>r({...n,name:t.target.value}),"onChange"),style:L}),e.jsx("textarea",{placeholder:"Şablon İçeriği...",value:n.content,onChange:o(t=>r({...n,content:t.target.value}),"onChange"),style:K}),b&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"12px"},children:[e.jsx("input",{type:"checkbox",checked:n.is_global,onChange:o(t=>r({...n,is_global:t.target.checked}),"onChange")}),"Herkese Açık (Global)"]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsxs("button",{onClick:k,style:W,children:[e.jsx(D,{})," Kaydet"]}),e.jsx("button",{onClick:o(()=>p(!1),"onClick"),style:q,children:"İptal"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o(()=>p(!0),"onClick"),style:M,children:[e.jsx(R,{})," Yeni Şablon Oluştur"]}),e.jsx("div",{style:$,children:m?e.jsx("p",{children:"Yükleniyor..."}):x.length===0?e.jsx("p",{style:{opacity:.5},children:"Henüz şablon yok."}):x.map(t=>e.jsxs("div",{style:N,onClick:o(()=>i(t.content),"onClick"),children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t.name}),e.jsx("div",{style:{fontSize:"12px",opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"},children:t.content})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.is_global&&e.jsx("span",{style:Y,children:"Global"}),e.jsx("button",{onClick:o(l=>C(t.id,l),"onClick"),style:G,children:e.jsx(z,{})})]})]},t.id))})]})})]})})},"MessageTemplateModal"),I={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(5px)"},H={backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 15px rgba(0,0,0,0.5)",color:"white",display:"flex",flexDirection:"column",maxHeight:"80vh"},O={padding:"16px",backgroundColor:"#2B2D31",borderBottom:"1px solid #1F2023",display:"flex",justifyContent:"space-between",alignItems:"center"},P={background:"none",border:"none",color:"#B5BAC1",cursor:"pointer",fontSize:"16px"},_={padding:"16px",overflowY:"auto"},M={width:"100%",padding:"10px",backgroundColor:"#5865F2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px",marginBottom:"15px"},$={display:"flex",flexDirection:"column",gap:"8px"},N={backgroundColor:"#2B2D31",padding:"10px",borderRadius:"4px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"0.2s"},Y={fontSize:"10px",backgroundColor:"#FAA61A",color:"black",padding:"2px 6px",borderRadius:"10px",fontWeight:"bold"},G={background:"none",border:"none",color:"#DA373C",cursor:"pointer"},J={display:"flex",flexDirection:"column",gap:"10px"},L={padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#1E1F22",color:"white"},K={padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#1E1F22",color:"white",minHeight:"100px",resize:"vertical"},W={flex:1,padding:"8px",backgroundColor:"#23A559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},q={flex:1,padding:"8px",backgroundColor:"#DA373C",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"};export{le as default};
