import{r as p,n as e}from"./react-core-Cj7FUMmY.js";import{t as g,g as S}from"./index-J7Wast1m.js";import{a as z}from"./index-BV9jtLkh.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-By68PLJG.js";import"./router-vendor-QeioVw-9.js";import"./icons-vendor-Mc8int3h.js";import"./state-vendor-DGcbxrkI.js";import"./crypto-vendor-DK-7ILyQ.js";const G=({roomSlug:h,token:m,onClose:i,onPollCreated:c,isMobile:l})=>{const[d,f]=p.useState(""),[n,x]=p.useState(["",""]),[u,y]=p.useState(24),[s,b]=p.useState(!1),j=()=>{n.length<10&&x([...n,""])},C=t=>{n.length>2&&x(n.filter((r,a)=>a!==t))},k=(t,r)=>{const a=[...n];a[t]=r,x(a)},v=async()=>{if(!d.trim()){g.error("âŒ Please enter a question");return}const t=n.filter(r=>r.trim());if(t.length<2){g.error("âŒ Please provide at least 2 options");return}b(!0);try{const r=await z.post(`${S()}/polls/create/`,{room_slug:h,question:d.trim(),options:t.map(a=>a.trim()),duration_hours:u},{headers:{Authorization:`Bearer ${m}`}});c&&c(r.data),i()}catch{g.error("âŒ Failed to create poll. Please try again.")}finally{b(!1)}},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:l?"20px":"40px"},modal:{background:"linear-gradient(135deg, rgba(30, 31, 34, 0.98), rgba(35, 36, 40, 0.98))",borderRadius:"16px",padding:l?"20px":"30px",width:"100%",maxWidth:l?"100%":"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 50px rgba(0, 0, 0, 0.7), 0 0 30px rgba(88, 101, 242, 0.3)",border:"1px solid rgba(88, 101, 242, 0.4)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},title:{fontSize:l?"20px":"24px",fontWeight:"700",color:"rgba(255, 255, 255, 0.95)",margin:0,display:"flex",alignItems:"center",gap:"10px"},closeButton:{background:"rgba(88, 101, 242, 0.2)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"20px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease"},formGroup:{marginBottom:"20px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"rgba(255, 255, 255, 0.8)",marginBottom:"8px"},input:{width:"100%",padding:"12px 14px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.95)",fontSize:"15px",outline:"none",transition:"all 0.2s ease",boxSizing:"border-box"},optionContainer:{display:"flex",gap:"8px",marginBottom:"10px"},optionInput:{flex:1,padding:"12px 14px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.95)",fontSize:"14px",outline:"none"},removeButton:{background:"rgba(218, 55, 60, 0.2)",border:"1px solid rgba(218, 55, 60, 0.4)",borderRadius:"8px",padding:"0 16px",cursor:"pointer",fontSize:"18px",color:"#da373c",transition:"all 0.2s ease",minWidth:"44px"},addButton:{background:"rgba(88, 101, 242, 0.2)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"8px",padding:"10px 16px",cursor:"pointer",fontSize:"14px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",width:"100%",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",minHeight:"44px"},durationContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"10px"},durationButton:t=>({padding:"12px",background:t?"linear-gradient(135deg, rgba(88, 101, 242, 0.3), rgba(114, 137, 218, 0.3))":"rgba(0, 0, 0, 0.3)",border:`1px solid ${t?"rgba(88, 101, 242, 0.6)":"rgba(88, 101, 242, 0.3)"}`,borderRadius:"8px",cursor:"pointer",fontSize:"13px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",fontWeight:t?"600":"400",minHeight:"44px"}),buttonContainer:{display:"flex",gap:"12px",marginTop:"24px"},createButton:{flex:1,padding:"14px",background:"linear-gradient(135deg, #5865f2, #7289da)",border:"none",borderRadius:"8px",cursor:s?"not-allowed":"pointer",fontSize:"16px",fontWeight:"600",color:"white",transition:"all 0.2s ease",opacity:s?.6:1,minHeight:"44px"},cancelButton:{flex:1,padding:"14px",background:"rgba(78, 80, 88, 0.5)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",minHeight:"44px"}},B=[1,4,8,24,72,168];return e.jsx("div",{style:o.overlay,onClick:i,children:e.jsxs("div",{style:o.modal,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:o.header,children:[e.jsxs("h2",{style:o.title,children:[e.jsx("span",{children:"ðŸ“Š"}),"Create Poll"]}),e.jsx("button",{onClick:i,style:o.closeButton,children:"âœ•"})]}),e.jsxs("div",{style:o.formGroup,children:[e.jsx("label",{style:o.label,children:"Question"}),e.jsx("input",{type:"text",value:d,onChange:t=>f(t.target.value),placeholder:"What's your question?",style:o.input,maxLength:200})]}),e.jsxs("div",{style:o.formGroup,children:[e.jsx("label",{style:o.label,children:"Options (2-10)"}),n.map((t,r)=>e.jsxs("div",{style:o.optionContainer,children:[e.jsx("input",{type:"text",value:t,onChange:a=>k(r,a.target.value),placeholder:`Option ${r+1}`,style:o.optionInput,maxLength:100}),n.length>2&&e.jsx("button",{onClick:()=>C(r),style:o.removeButton,children:"âœ•"})]},r)),n.length<10&&e.jsxs("button",{onClick:j,style:o.addButton,children:[e.jsx("span",{children:"âž•"}),"Add Option"]})]}),e.jsxs("div",{style:o.formGroup,children:[e.jsx("label",{style:o.label,children:"Poll Duration"}),e.jsx("div",{style:o.durationContainer,children:B.map(t=>e.jsx("button",{onClick:()=>y(t),style:o.durationButton(u===t),children:t<24?`${t}h`:`${t/24}d`},t))})]}),e.jsxs("div",{style:o.buttonContainer,children:[e.jsx("button",{onClick:i,style:o.cancelButton,children:"Cancel"}),e.jsx("button",{onClick:v,disabled:s,style:o.createButton,children:s?"Creating...":"Create Poll"})]})]})})};export{G as default};
