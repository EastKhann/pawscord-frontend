const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/media-vendor-CxFPycob.js","static/js/react-core-Djgtqrmb.js"])))=>i.map(i=>d[i]);
var E=Object.defineProperty;var r=(i,a)=>E(i,"name",{value:a,configurable:!0});import{_}from"./media-vendor-CxFPycob.js";import{r as o,j as e}from"./react-core-Djgtqrmb.js";import{c as F}from"./index-GGLPABCW.js";import{a as I,aL as L,j as z,aM as O,aN as M}from"./icons-vendor-BW7dxHkX.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const B=o.lazy(()=>_(()=>import("./media-vendor-CxFPycob.js").then(i=>i.i),__vite__mapDeps([0,1]))),G=r(({onClose:i,ws:a})=>{const[b,j]=o.useState("https://www.youtube.com/watch?v=jfKfPfyJRdk"),[p,v]=o.useState(""),[f,d]=o.useState(!1),[C,N]=o.useState(.8),[m,x]=o.useState(null),[S,y]=o.useState(!1),l=o.useRef(null),c=o.useRef(!1),h=r(()=>{if(l.current&&typeof l.current.getCurrentTime=="function")try{return l.current.getCurrentTime()}catch{return 0}return 0},"getCurrentTimeSafe");o.useEffect(()=>{if(!a.current)return;const t=r(g=>{try{const s=JSON.parse(g.data);if(s.type==="media_sync"){if(c.current=!0,s.action==="change_url")d(!1),y(!1),j(s.payload.url),x(null);else if(s.action==="play"){const P=h();Math.abs(P-s.payload.time)>2&&l.current&&typeof l.current.seekTo=="function"&&l.current.seekTo(s.payload.time),d(!0)}else s.action==="pause"&&d(!1);setTimeout(()=>{c.current=!1},1e3)}}catch{}},"handleMessage");return a.current.addEventListener("message",t),()=>a.current?.removeEventListener("message",t)},[a]);const u=r((t,g={})=>{c.current||a.current?.readyState===WebSocket.OPEN&&a.current.send(JSON.stringify({type:"media_sync",action:t,payload:g}))},"sendSignal"),R=r(t=>{t.preventDefault(),p.trim()&&(c.current=!1,d(!1),y(!1),j(p),x(null),u("change_url",{url:p}),v(""))},"handleLoadUrl"),{overlayProps:T,dialogProps:w}=F({onClose:i,label:"Sinema & MÃ¼zik"});return e.jsx("div",{style:n.overlay,...T,children:e.jsxs("div",{style:n.modal,...w,children:[e.jsxs("div",{style:n.header,children:[e.jsx("h3",{children:"ðŸ¿ Sinema & MÃ¼zik"}),e.jsx("button",{onClick:i,style:n.closeBtn,children:e.jsx(I,{})})]}),e.jsxs("div",{style:n.playerWrapper,children:[m&&e.jsxs("div",{style:n.statusOverlay,children:[e.jsx(L,{size:40,color:"#f04747"}),e.jsx("p",{style:{marginTop:10},children:m})]}),!S&&!m&&e.jsxs("div",{style:n.statusOverlay,children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{style:{marginTop:10},children:"YÃ¼kleniyor..."})]}),e.jsx(o.Suspense,{fallback:e.jsx("div",{style:{color:"#fff",padding:"50px",textAlign:"center"},children:"Loading player..."}),children:e.jsx(B,{ref:l,url:b,playing:f,volume:C,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},onReady:r(()=>{y(!0)},"onReady"),onError:r(t=>{x("Video oynatÄ±lamadÄ±. Link geÃ§ersiz olabilir."),y(!0)},"onError"),onPlay:r(()=>{const t=h();u("play",{time:t})},"onPlay"),onPause:r(()=>{u("pause")},"onPause"),onProgress:r(()=>{},"onProgress")},b)})]}),e.jsxs("div",{style:n.controls,children:[e.jsxs("form",{onSubmit:R,style:n.urlForm,children:[e.jsx(z,{style:{color:"#b9bbbe"}}),e.jsx("input",{type:"text",value:p,onChange:r(t=>v(t.target.value),"onChange"),placeholder:"YouTube linki yapÄ±ÅŸtÄ±r...",style:n.input}),e.jsx("button",{type:"submit",style:n.loadBtn,children:"YÃ¼kle"})]}),e.jsx("button",{onClick:r(()=>{if(c.current=!1,f)d(!1),u("pause");else{d(!0);const t=h();u("play",{time:t})}},"onClick"),style:{...n.loadBtn,backgroundColor:f?"#da373c":"#43b581",marginLeft:10,width:110,display:"flex",alignItems:"center",justifyContent:"center",gap:5},children:f?e.jsxs(e.Fragment,{children:[e.jsx(O,{})," Durdur"]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{})," Oynat"]})})]})]})})},"CinemaModal"),n={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{width:"90%",maxWidth:"900px",backgroundColor:"#202225",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},header:{padding:"15px",backgroundColor:"#2f3136",display:"flex",justifyContent:"space-between",color:"white"},playerWrapper:{position:"relative",paddingTop:"56.25%",backgroundColor:"black"},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.5em",cursor:"pointer"},controls:{padding:"20px",display:"flex",alignItems:"center"},urlForm:{display:"flex",gap:"10px",backgroundColor:"#40444b",padding:"10px",borderRadius:"8px",flex:1},input:{flex:1,background:"transparent",border:"none",color:"white",outline:"none"},loadBtn:{padding:"8px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},statusOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.7)",color:"white",zIndex:10}},k=document.createElement("style");k.innerText=`
    .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4px solid #ffffff;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
`;document.head.appendChild(k);export{G as default};
