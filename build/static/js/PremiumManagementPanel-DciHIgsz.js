import{r as i,ch as r}from"./react-core-B6hadH-M.js";import{g as T,h as z}from"./index-D_6pZib5.js";const O=({onClose:d})=>{const[u,R]=i.useState([]),[t,N]=i.useState(null),[h,y]=i.useState(!0),[b,f]=i.useState("classic"),[l,E]=i.useState("monthly"),o=T(),m=localStorage.getItem("access_token");i.useEffect(()=>{k(),p()},[]);const k=async()=>{try{const a=await(await fetch(`${o}/nitro/pricing/`,{headers:{Authorization:`Bearer ${m}`}})).json();R(a.tiers||[])}catch(e){console.error("Error fetching pricing:",e),r.error("âŒ FiyatlandÄ±rma bilgileri yÃ¼klenemedi")}},p=async()=>{try{const a=await(await fetch(`${o}/nitro/my-subscription/`,{headers:{Authorization:`Bearer ${m}`}})).json();N(a.subscription||null)}catch(e){console.error("Error fetching subscription:",e)}finally{y(!1)}},v=async()=>{try{const e=await fetch(`${o}/nitro/subscribe/`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({tier:b,billing_cycle:l,payment_method:"stripe"})}),a=await e.json();e.ok?(r.success("ğŸ‰ Abonelik baÅŸarÄ±yla baÅŸlatÄ±ldÄ±!"),p()):r.error(`âŒ ${a.error||"Abonelik baÅŸlatÄ±lamadÄ±"}`)}catch(e){console.error("Error subscribing:",e),r.error("âŒ Abonelik hatasÄ±")}},_=async()=>{if(await z("AboneliÄŸinizi iptal etmek istediÄŸinizden emin misiniz?"))try{const e=await fetch(`${o}/nitro/cancel/`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),a=await e.json();e.ok?(r.info("â„¹ï¸ Abonelik iptal edildi"),p()):r.error(`âŒ ${a.error||"Ä°ptal edilemedi"}`)}catch(e){console.error("Error canceling:",e),r.error("âŒ Ä°ptal hatasÄ±")}},$=async e=>{try{const a=await fetch(`${o}/nitro/upgrade/`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({new_tier:e})}),s=await a.json();a.ok?(r.success("â¬†ï¸ Abonelik yÃ¼kseltildi!"),p()):r.error(`âŒ ${s.error||"YÃ¼kseltilemedi"}`)}catch(a){console.error("Error upgrading:",a),r.error("âŒ YÃ¼kseltme hatasÄ±")}},n=e=>{const a={basic:"#3b82f6",classic:"#8b5cf6",elite:"#f59e0b"};return a[e]||a.classic},g=e=>{const a={basic:"ğŸŒŸ",classic:"ğŸ’",elite:"ğŸ‘‘"};return a[e]||a.classic},C=e=>({upload_limit_mb:"ğŸ“¤",video_quality:"ğŸ¥",emoji_slots:"ğŸ˜€",custom_tag:"ğŸ·ï¸",animated_avatar:"ğŸ­",server_boosts:"ğŸš€",custom_profiles:"âœ¨",hd_video:"ğŸ“º",screen_share_quality:"ğŸ–¥ï¸",profile_banner:"ğŸ¨",custom_discriminator:"#ï¸âƒ£",badge:"ğŸ†",early_access:"ğŸ”“",priority_support:"ğŸ’¬"})[e]||"âœ“",S=(e,a)=>typeof a=="boolean"?a?"Evet":"HayÄ±r":e==="upload_limit_mb"?`${a} MB`:(e.includes("quality"),a);return h?React.createElement("div",{className:"premium-overlay"},React.createElement("div",{className:"premium-panel"},React.createElement("div",{className:"loading-state"},React.createElement("div",{className:"spinner"}),React.createElement("span",null,"YÃ¼kleniyor...")))):React.createElement("div",{className:"premium-overlay",onClick:d},React.createElement("div",{className:"premium-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"premium-header"},React.createElement("h2",null,"ğŸ’ Pawscord Premium"),React.createElement("button",{className:"close-btn",onClick:d},"âœ•")),t?React.createElement("div",{className:"current-subscription"},React.createElement("div",{className:"subscription-header"},React.createElement("span",{className:"subscription-icon"},g(t.tier)),React.createElement("div",{className:"subscription-info"},React.createElement("h3",null,t.tier_name||t.tier.toUpperCase()),React.createElement("span",{className:"subscription-status"},t.is_active?"âœ“ Aktif":"â¸ DurdurulmuÅŸ")),React.createElement("div",{className:"subscription-actions"},React.createElement("button",{className:"cancel-btn",onClick:_},"Ä°ptal Et"))),React.createElement("div",{className:"subscription-details"},React.createElement("div",{className:"detail-item"},React.createElement("span",{className:"detail-label"},"BaÅŸlangÄ±Ã§:"),React.createElement("span",{className:"detail-value"},new Date(t.start_date).toLocaleDateString("tr-TR"))),React.createElement("div",{className:"detail-item"},React.createElement("span",{className:"detail-label"},"BitiÅŸ:"),React.createElement("span",{className:"detail-value"},new Date(t.end_date).toLocaleDateString("tr-TR"))),React.createElement("div",{className:"detail-item"},React.createElement("span",{className:"detail-label"},"Otomatik Yenileme:"),React.createElement("span",{className:"detail-value"},t.auto_renew?"AÃ§Ä±k":"KapalÄ±")))):React.createElement("div",{className:"no-subscription"},React.createElement("div",{className:"no-subscription-icon"},"ğŸ’"),React.createElement("h3",null,"Premium Ãœyelik Yok"),React.createElement("p",null,"Premium Ã¶zelliklerden yararlanmak iÃ§in aÅŸaÄŸÄ±daki planlardan birini seÃ§in")),React.createElement("div",{className:"billing-toggle"},React.createElement("button",{className:`billing-option ${l==="monthly"?"active":""}`,onClick:()=>E("monthly")},"AylÄ±k"),React.createElement("button",{className:`billing-option ${l==="yearly"?"active":""}`,onClick:()=>E("yearly")},"YÄ±llÄ±k ",React.createElement("span",{className:"save-badge"},"%17 Ä°ndirim"))),React.createElement("div",{className:"pricing-tiers"},Object.keys(u).map(e=>{const a=u[e],s=t?.tier===e,w=l==="yearly"?a.price_yearly:a.price_monthly;return React.createElement("div",{key:e,className:`tier-card ${b===e?"selected":""} ${s?"current":""}`,style:{borderColor:n(e)},onClick:()=>!s&&f(e)},React.createElement("div",{className:"tier-header",style:{background:`linear-gradient(135deg, ${n(e)}, ${n(e)}99)`}},React.createElement("span",{className:"tier-icon"},g(e)),React.createElement("h3",null,a.name),s&&React.createElement("span",{className:"current-badge"},"Mevcut Plan")),React.createElement("div",{className:"tier-price"},React.createElement("span",{className:"price-amount"},"$",w),React.createElement("span",{className:"price-period"},"/",l==="yearly"?"yÄ±l":"ay")),React.createElement("div",{className:"tier-features"},Object.entries(a.features).map(([c,A])=>React.createElement("div",{key:c,className:"feature-item"},React.createElement("span",{className:"feature-icon"},C(c)),React.createElement("span",{className:"feature-label"},c.replace(/_/g," ").replace(/\b\w/g,P=>P.toUpperCase()),":"),React.createElement("span",{className:"feature-value"},S(c,A))))),!s&&React.createElement("div",{className:"tier-actions"},t?React.createElement("button",{className:"upgrade-btn",onClick:c=>{c.stopPropagation(),$(e)},style:{background:`linear-gradient(135deg, ${n(e)}, ${n(e)}dd)`}},"YÃ¼kselt"):React.createElement("button",{className:"subscribe-btn",onClick:c=>{c.stopPropagation(),v()},style:{background:`linear-gradient(135deg, ${n(e)}, ${n(e)}dd)`}},"Abone Ol")))})),React.createElement("div",{className:"info-banner"},React.createElement("span",{className:"info-icon"},"â„¹ï¸"),React.createElement("p",null,"Premium abonelikler Stripe ile gÃ¼venli ÅŸekilde iÅŸlenir. Ä°stediÄŸiniz zaman iptal edebilirsiniz."))))};export{O as default};
