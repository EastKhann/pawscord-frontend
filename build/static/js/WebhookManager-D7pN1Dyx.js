var v=Object.defineProperty;var r=(l,i)=>v(l,"name",{value:i,configurable:!0});import{r as s,j as e}from"./react-core-Djgtqrmb.js";import{a as C,an as B,f as W}from"./icons-vendor-BW7dxHkX.js";import{t as m}from"./index-D_luy7FO.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const Y=r(({onClose:l,fetchWithAuth:i,apiBaseUrl:a,serverId:R})=>{const[b,p]=s.useState([]),[g,f]=s.useState(!0),[x,d]=s.useState(!1),[n,c]=s.useState({name:"",url:"",events:[]});s.useEffect(()=>{h()},[]);const h=r(async()=>{try{const o=await i(`${a}/webhooks/list/`);if(o.ok){const u=await o.json();p(u.webhooks||[])}}catch{}finally{f(!1)}},"loadWebhooks"),y=r(async()=>{if(!n.name||!n.url){m.warning("Ä°sim ve URL gerekli");return}try{(await i(`${a}/webhooks/create/`,{method:"POST",body:JSON.stringify(n)})).ok&&(m.success("Webhook oluÅŸturuldu!"),d(!1),c({name:"",url:"",events:[]}),h())}catch{}},"handleCreate"),k=r(async o=>{if(confirm("Bu webhook'u silmek istediÄŸinizden emin misiniz?"))try{(await i(`${a}/webhooks/${o}/delete/`,{method:"DELETE"})).ok&&p(w=>w.filter(j=>j.id!==o))}catch{}},"handleDelete");return e.jsx("div",{style:t.overlay,onClick:l,children:e.jsxs("div",{style:t.modal,onClick:r(o=>o.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:t.header,children:[e.jsx("h2",{style:t.title,children:"ðŸ”— Webhook YÃ¶netimi"}),e.jsx("button",{onClick:l,style:t.closeButton,children:e.jsx(C,{})})]}),e.jsxs("div",{style:t.content,children:[!x&&e.jsxs("button",{onClick:r(()=>d(!0),"onClick"),style:t.createButton,children:[e.jsx(B,{})," Yeni Webhook"]}),x&&e.jsxs("div",{style:t.createForm,children:[e.jsx("input",{type:"text",placeholder:"Webhook Ä°smi",value:n.name,onChange:r(o=>c({...n,name:o.target.value}),"onChange"),style:t.input}),e.jsx("input",{type:"url",placeholder:"Webhook URL",value:n.url,onChange:r(o=>c({...n,url:o.target.value}),"onChange"),style:t.input}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:y,style:t.submitButton,children:"OluÅŸtur"}),e.jsx("button",{onClick:r(()=>d(!1),"onClick"),style:t.cancelButton,children:"Ä°ptal"})]})]}),g?e.jsx("div",{style:t.loading,children:"YÃ¼kleniyor..."}):b.length===0?e.jsx("div",{style:t.empty,children:"HenÃ¼z webhook oluÅŸturulmamÄ±ÅŸ"}):e.jsx("div",{style:t.webhookList,children:b.map(o=>e.jsxs("div",{style:t.webhookItem,children:[e.jsxs("div",{children:[e.jsx("div",{style:t.webhookName,children:o.name}),e.jsx("div",{style:t.webhookUrl,children:o.url})]}),e.jsx("button",{onClick:r(()=>k(o.id),"onClick"),style:t.deleteButton,children:e.jsx(W,{})})]},o.id))})]})]})})},"WebhookManager"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.5em"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.5em"},content:{padding:"20px",overflowY:"auto",flex:1},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"15px"},createForm:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px",marginBottom:"15px"},input:{width:"100%",padding:"10px",marginBottom:"10px",backgroundColor:"#2b2d31",border:"1px solid #5865f2",borderRadius:"4px",color:"white"},submitButton:{flex:1,padding:"10px",backgroundColor:"#3ba55d",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},cancelButton:{flex:1,padding:"10px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px"},webhookList:{display:"flex",flexDirection:"column",gap:"10px"},webhookItem:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},webhookName:{color:"white",fontWeight:"bold",marginBottom:"5px"},webhookUrl:{color:"#b9bbbe",fontSize:"0.85em"},deleteButton:{backgroundColor:"#f04747",border:"none",padding:"8px 12px",borderRadius:"4px",color:"white",cursor:"pointer"}};export{Y as default};
