import{r as c,b as t}from"./react-core-DFLfBPkm.js";import{c as _,a as y,N as B,m as I,ae as R}from"./icons-vendor-BhMLc_xA.js";import"./chart-vendor-CPuFblPm.js";import"./editor-vendor-DiU449Dh.js";const A=({fetchWithAuth:i,apiBaseUrl:a,currentUser:$,onClose:d})=>{const[s,l]=c.useState([]),[k,E]=c.useState(!0),m=c.useRef(null);c.useEffect(()=>{v()},[]),c.useEffect(()=>{const e=n=>{m.current&&!m.current.contains(n.target)&&d()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[d]);const v=async()=>{try{const e=await i(`${a}/api/notifications/`);if(e.ok){const n=await e.json();l(n.results||n)}}catch(e){console.error("Notification yÃ¼kleme hatasÄ±:",e)}finally{E(!1)}},b=async e=>{try{await i(`${a}/api/notifications/${e}/read/`,{method:"POST"}),l(n=>n.map(r=>r.id===e?{...r,is_read:!0}:r))}catch(n){console.error("Mark as read hatasÄ±:",n)}},w=async()=>{try{await i(`${a}/api/notifications/mark_all_read/`,{method:"POST"}),l(e=>e.map(n=>({...n,is_read:!0})))}catch(e){console.error("Mark all as read hatasÄ±:",e)}},S=async e=>{try{await i(`${a}/api/notifications/${e}/`,{method:"DELETE"}),l(n=>n.filter(r=>r.id!==e))}catch(n){console.error("Notification silme hatasÄ±:",n)}},C=async()=>{if(window.confirm("TÃ¼m bildirimleri silmek istediÄŸinize emin misiniz?"))try{await i(`${a}/api/notifications/clear_all/`,{method:"POST"}),l([])}catch(e){console.error("Clear all hatasÄ±:",e)}},z=e=>{switch(e){case"message":return"ðŸ’¬";case"mention":return"@";case"friend_request":return"ðŸ‘¥";case"server_invite":return"ðŸ ";case"reaction":return"ðŸ‘";case"reply":return"â†©ï¸";default:return"ðŸ””"}},T=e=>{const n=new Date(e),p=new Date-n,u=Math.floor(p/6e4),g=Math.floor(p/36e5),x=Math.floor(p/864e5);return u<1?"Az Ã¶nce":u<60?`${u} dakika Ã¶nce`:g<24?`${g} saat Ã¶nce`:x<7?`${x} gÃ¼n Ã¶nce`:n.toLocaleDateString()},f=s.filter(e=>!e.is_read).length;return t.createElement("div",{ref:m,style:o.dropdown},t.createElement("div",{style:o.header},t.createElement("div",{style:o.headerLeft},t.createElement(_,null),t.createElement("span",{style:o.headerTitle},"Bildirimler"),f>0&&t.createElement("span",{style:o.badge},f)),t.createElement("button",{onClick:d,style:o.closeButton},t.createElement(y,null))),s.length>0&&t.createElement("div",{style:o.actions},f>0&&t.createElement("button",{onClick:w,style:o.actionButton},t.createElement(B,null)," TÃ¼mÃ¼nÃ¼ okundu iÅŸaretle"),t.createElement("button",{onClick:C,style:{...o.actionButton,color:"#ed4245"}},t.createElement(I,null)," TÃ¼mÃ¼nÃ¼ temizle")),t.createElement("div",{style:o.list},k?t.createElement("div",{style:o.loading},"YÃ¼kleniyor..."):s.length===0?t.createElement("div",{style:o.empty},t.createElement("div",{style:o.emptyIcon},"ðŸ””"),t.createElement("div",null,"Bildirim yok"),t.createElement("div",{style:o.emptySubtext},"Yeni bildirimler burada gÃ¶rÃ¼necek")):s.map(e=>t.createElement("div",{key:e.id,style:{...o.notificationItem,backgroundColor:e.is_read?"transparent":"rgba(88, 101, 242, 0.05)"},onClick:()=>!e.is_read&&b(e.id)},t.createElement("div",{style:o.notificationIcon},z(e.notification_type)),t.createElement("div",{style:o.notificationContent},t.createElement("div",{style:o.notificationMessage},e.message),t.createElement("div",{style:o.notificationTime},T(e.created_at))),t.createElement("div",{style:o.notificationActions},!e.is_read&&t.createElement("button",{onClick:n=>{n.stopPropagation(),b(e.id)},style:o.iconButton,title:"Okundu iÅŸaretle"},t.createElement(R,null)),t.createElement("button",{onClick:n=>{n.stopPropagation(),S(e.id)},style:o.iconButton,title:"Sil"},t.createElement(y,null)))))))},o={dropdown:{position:"absolute",top:"100%",right:0,marginTop:"8px",width:"420px",maxWidth:"90vw",maxHeight:"600px",backgroundColor:"#2b2d31",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:1e4,display:"flex",flexDirection:"column",overflow:"hidden"},header:{padding:"16px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#1e1f22"},headerLeft:{display:"flex",alignItems:"center",gap:"8px",color:"#fff",fontSize:"1em",fontWeight:"600"},headerTitle:{fontSize:"1em",fontWeight:"600"},badge:{backgroundColor:"#ed4245",color:"#fff",fontSize:"0.75em",fontWeight:"bold",padding:"2px 6px",borderRadius:"10px",minWidth:"18px",textAlign:"center"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em",padding:"4px",display:"flex",alignItems:"center",borderRadius:"4px",transition:"all 0.15s"},actions:{padding:"12px",display:"flex",gap:"8px",borderBottom:"1px solid #1e1f22",flexWrap:"wrap"},actionButton:{background:"none",border:"1px solid #40444b",color:"#b9bbbe",cursor:"pointer",fontSize:"0.85em",padding:"6px 12px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.15s"},list:{flex:1,overflowY:"auto",overflowX:"hidden"},loading:{padding:"40px",textAlign:"center",color:"#b9bbbe"},empty:{padding:"40px 20px",textAlign:"center",color:"#b9bbbe"},emptyIcon:{fontSize:"3em",marginBottom:"12px",opacity:.5},emptySubtext:{fontSize:"0.85em",color:"#72767d",marginTop:"8px"},notificationItem:{padding:"12px 16px",display:"flex",gap:"12px",borderBottom:"1px solid #1e1f22",cursor:"pointer",transition:"background-color 0.15s"},notificationIcon:{fontSize:"1.5em",flexShrink:0},notificationContent:{flex:1,minWidth:0},notificationMessage:{color:"#dbdee1",fontSize:"0.9em",lineHeight:"1.4",marginBottom:"4px"},notificationTime:{color:"#72767d",fontSize:"0.75em"},notificationActions:{display:"flex",gap:"4px",flexShrink:0},iconButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"0.9em",padding:"4px",display:"flex",alignItems:"center",borderRadius:"4px",transition:"all 0.15s"}},h=document.createElement("style");h.textContent=`
    .notification-item:hover {
        background-color: rgba(255, 255, 255, 0.05) !important;
    }
    .icon-button-notification:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff;
    }
    .close-button-notification:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff;
    }
    .action-button-notification:hover {
        background-color: rgba(88, 101, 242, 0.1);
        color: #fff;
        border-color: #5865f2;
    }
`;document.head.appendChild(h);export{A as default};
