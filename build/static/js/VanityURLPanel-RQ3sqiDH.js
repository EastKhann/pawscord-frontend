var w=Object.defineProperty;var i=(s,a)=>w(s,"name",{value:a,configurable:!0});import{r,j as e}from"./react-core-Djgtqrmb.js";import{j as R,a as L,a9 as z,aB as U}from"./icons-vendor-BW7dxHkX.js";import{t as p}from"./index-Dy0QUtja.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const E=i(({fetchWithAuth:s,apiBaseUrl:a,onClose:b,serverId:y})=>{const[c,f]=r.useState(""),[h,v]=r.useState(null),[u,j]=r.useState([]),[x,g]=r.useState(!1),[l,d]=r.useState(null);r.useEffect(()=>{m()},[]);const m=i(async()=>{try{const o=await(await s(`${a}/vanity/get/${y}/`)).json();v(o.vanity_url),j(o.history||[])}catch{}},"fetchVanity"),S=i(async n=>{if(!n||n.length<3){d(null);return}g(!0);try{const C=await(await s(`${a}/vanity/check/?url=${n}`)).json();d(C.available)}catch{d(!1)}finally{g(!1)}},"checkAvailability"),k=i(async()=>{if(!c||c.length<3){p.error("Vanity URL must be at least 3 characters");return}if(!l){p.error("This vanity URL is not available");return}try{await s(`${a}/vanity/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_id:y,vanity_url:c})}),p.success("Vanity URL set successfully"),f(""),d(null),m()}catch{p.error("Failed to set vanity URL")}},"setVanity");return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(R,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Vanity URL"})]}),e.jsx("button",{onClick:b,style:t.closeButton,children:e.jsx(L,{})})]}),e.jsxs("div",{style:t.content,children:[h&&e.jsxs("div",{style:t.currentSection,children:[e.jsx("div",{style:t.label,children:"Current Vanity URL:"}),e.jsxs("div",{style:t.currentUrl,children:["pawscord.com/",h]})]}),e.jsxs("div",{style:t.section,children:[e.jsx("div",{style:t.label,children:"Set New Vanity URL"}),e.jsxs("div",{style:t.inputRow,children:[e.jsx("div",{style:t.prefix,children:"pawscord.com/"}),e.jsx("input",{type:"text",value:c,onChange:i(n=>{const o=n.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"");f(o),S(o)},"onChange"),placeholder:"my-server",style:t.input,maxLength:32}),x&&e.jsx("div",{style:t.checking,children:"Checking..."}),!x&&l===!0&&e.jsx(z,{style:{color:"#43b581",fontSize:"20px"}}),!x&&l===!1&&e.jsx("div",{style:t.unavailable,children:"Unavailable"})]}),e.jsx("div",{style:t.hint,children:"3-32 characters, letters, numbers, and hyphens only"}),e.jsx("button",{onClick:k,disabled:!l,style:{...t.setButton,...!l&&t.setButtonDisabled},children:"Set Vanity URL"})]}),u.length>0&&e.jsxs("div",{style:t.section,children:[e.jsxs("div",{style:t.sectionTitle,children:[e.jsx(U,{style:{marginRight:"8px"}}),"History"]}),e.jsx("div",{style:t.historyList,children:u.map((n,o)=>e.jsxs("div",{style:t.historyItem,children:[e.jsx("div",{style:t.historyUrl,children:n.vanity_url}),e.jsx("div",{style:t.historyDate,children:new Date(n.created_at).toLocaleDateString()})]},o))})]})]})]})})},"VanityURLPanel"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},currentSection:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",marginBottom:"24px"},currentUrl:{fontSize:"18px",fontWeight:"600",color:"#5865f2",fontFamily:"monospace"},section:{marginBottom:"24px"},label:{fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"8px"},inputRow:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#2c2f33",borderRadius:"4px",padding:"10px 12px"},prefix:{fontSize:"14px",color:"#99aab5"},input:{flex:1,background:"none",border:"none",color:"#ffffff",fontSize:"14px",outline:"none"},checking:{fontSize:"12px",color:"#faa61a"},unavailable:{fontSize:"12px",color:"#f04747"},hint:{fontSize:"12px",color:"#99aab5",marginTop:"8px",marginBottom:"16px"},setButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},setButtonDisabled:{backgroundColor:"#2c2f33",cursor:"not-allowed"},sectionTitle:{fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"12px",display:"flex",alignItems:"center"},historyList:{display:"flex",flexDirection:"column",gap:"8px"},historyItem:{backgroundColor:"#2c2f33",borderRadius:"4px",padding:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},historyUrl:{fontSize:"14px",color:"#dcddde",fontFamily:"monospace"},historyDate:{fontSize:"12px",color:"#99aab5"}};export{E as default};
