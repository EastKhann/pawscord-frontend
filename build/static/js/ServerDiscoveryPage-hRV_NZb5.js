var z=Object.defineProperty;var l=(r,c)=>z(r,"name",{value:c,configurable:!0});import{r as i,j as e}from"./react-core-Djgtqrmb.js";import{t as y}from"./index-GGLPABCW.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BW7dxHkX.js";import"./ui-vendor-IhB9Znpc.js";const O=l(({apiBaseUrl:r,token:c,onJoinServer:m})=>{const[d,N]=i.useState([]),[j,f]=i.useState([]),[b,x]=i.useState(!0),[s,t]=i.useState({category:"all",language:"all",size:"all",search:""}),[k]=i.useState([{value:"all",label:"ğŸŒ TÃ¼mÃ¼"},{value:"gaming",label:"ğŸ® Oyun"},{value:"music",label:"ğŸµ MÃ¼zik"},{value:"education",label:"ğŸ“š EÄŸitim"},{value:"technology",label:"ğŸ’» Teknoloji"},{value:"art",label:"ğŸ¨ Sanat"},{value:"anime",label:"ğŸ­ Anime"},{value:"memes",label:"ğŸ˜‚ Meme"},{value:"community",label:"ğŸ‘¥ Topluluk"}]);i.useEffect(()=>{S(),T()},[s]);const o=l(async(a,n={})=>{const u={Authorization:`Bearer ${c}`,"Content-Type":"application/json",...n.headers},h=await fetch(a,{...n,headers:u});if(!h.ok)throw new Error(`HTTP ${h.status}`);return h.json()},"fetchWithAuth"),S=l(async()=>{try{x(!0);const a=new URLSearchParams;s.category!=="all"&&a.append("category",s.category),s.language!=="all"&&a.append("language",s.language),s.size!=="all"&&a.append("size",s.size),s.search&&a.append("search",s.search);const n=await o(`${r}/discovery/servers/?${a}`);N(n.servers||[])}catch{}finally{x(!1)}},"loadServers"),T=l(async()=>{try{const a=await o(`${r}/discovery/featured/`);f(a.servers||[])}catch{}},"loadFeatured"),v=l(async a=>{try{await o(`${r}/servers/${a}/join/`,{method:"POST"}),y.success("âœ… Sunucuya katÄ±ldÄ±nÄ±z!"),m&&m(a)}catch{y.error("âŒ Sunucuya katÄ±lÄ±namadÄ±!")}},"handleJoinServer"),p=l(a=>a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a,"getMemberCount"),g=l(a=>a>=1e3?`${(a/1e3).toFixed(1)}K`:a,"getOnlineCount");return b&&d.length===0?e.jsx("div",{className:"discovery-page",children:e.jsx("div",{className:"loading",children:"ğŸ”„ Sunucular yÃ¼kleniyor..."})}):e.jsxs("div",{className:"discovery-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"ğŸ” Sunucu KeÅŸfet"}),e.jsx("p",{children:"Ä°lgi alanlarÄ±na uygun yeni topluluklar bul ve katÄ±l"})]}),e.jsxs("div",{className:"search-filters",children:[e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:"ğŸ” Sunucu ara...",value:s.search,onChange:l(a=>t({...s,search:a.target.value}),"onChange")})}),e.jsxs("div",{className:"filters-row",children:[e.jsx("select",{value:s.category,onChange:l(a=>t({...s,category:a.target.value}),"onChange"),children:k.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsxs("select",{value:s.size,onChange:l(a=>t({...s,size:a.target.value}),"onChange"),children:[e.jsx("option",{value:"all",children:"ğŸ‘¥ TÃ¼m Boyutlar"}),e.jsx("option",{value:"small",children:"KÃ¼Ã§Ã¼k (0-100)"}),e.jsx("option",{value:"medium",children:"Orta (100-1K)"}),e.jsx("option",{value:"large",children:"BÃ¼yÃ¼k (1K-10K)"}),e.jsx("option",{value:"huge",children:"Ã‡ok BÃ¼yÃ¼k (10K+)"})]}),e.jsxs("select",{value:s.language,onChange:l(a=>t({...s,language:a.target.value}),"onChange"),children:[e.jsx("option",{value:"all",children:"ğŸŒ TÃ¼m Diller"}),e.jsx("option",{value:"tr",children:"ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e"}),e.jsx("option",{value:"en",children:"ğŸ‡ºğŸ‡¸ English"}),e.jsx("option",{value:"de",children:"ğŸ‡©ğŸ‡ª Deutsch"}),e.jsx("option",{value:"fr",children:"ğŸ‡«ğŸ‡· FranÃ§ais"}),e.jsx("option",{value:"es",children:"ğŸ‡ªğŸ‡¸ EspaÃ±ol"})]})]})]}),j.length>0&&e.jsxs("div",{className:"featured-section",children:[e.jsx("h2",{children:"â­ Ã–ne Ã‡Ä±kanlar"}),e.jsx("div",{className:"featured-grid",children:j.map(a=>e.jsxs("div",{className:"featured-card",children:[e.jsx("div",{className:"featured-badge",children:"â­ Ã–ne Ã‡Ä±kan"}),e.jsx("img",{src:a.icon||"/default-server.png",alt:a.name,className:"server-icon-large"}),e.jsx("h3",{children:a.name}),e.jsx("p",{className:"server-description",children:a.description}),e.jsxs("div",{className:"server-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-icon",children:"ğŸ‘¥"}),e.jsxs("span",{children:[p(a.member_count)," Ã¼ye"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-icon",children:"ğŸŸ¢"}),e.jsxs("span",{children:[g(a.online_count)," Ã§evrimiÃ§i"]})]})]}),e.jsx("button",{className:"join-btn",onClick:l(()=>v(a.id),"onClick"),children:"ğŸš€ KatÄ±l"})]},a.id))})]}),e.jsxs("div",{className:"servers-section",children:[e.jsx("h2",{children:"ğŸŒ TÃ¼m Sunucular"}),d.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"AramanÄ±za uygun sunucu bulunamadÄ±"})}):e.jsx("div",{className:"servers-grid",children:d.map(a=>e.jsxs("div",{className:"server-card",children:[e.jsxs("div",{className:"server-header",children:[e.jsx("img",{src:a.icon||"/default-server.png",alt:a.name,className:"server-icon"}),e.jsxs("div",{className:"server-info",children:[e.jsx("h3",{children:a.name}),e.jsxs("div",{className:"server-meta",children:[e.jsx("span",{className:"category-badge",children:a.category}),a.verified&&e.jsx("span",{className:"verified-badge",children:"âœ“ DoÄŸrulanmÄ±ÅŸ"})]})]})]}),e.jsx("p",{className:"server-description",children:a.description||"AÃ§Ä±klama yok"}),e.jsxs("div",{className:"server-stats-row",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-icon",children:"ğŸ‘¥"}),e.jsx("span",{children:p(a.member_count)})]}),e.jsxs("div",{className:"stat-item online",children:[e.jsx("span",{className:"stat-icon",children:"ğŸŸ¢"}),e.jsx("span",{children:g(a.online_count)})]})]}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"server-tags",children:a.tags.slice(0,3).map((n,u)=>e.jsx("span",{className:"tag",children:n},u))}),e.jsx("button",{className:"join-btn-small",onClick:l(()=>v(a.id),"onClick"),children:"KatÄ±l"})]},a.id))})]})]})},"ServerDiscoveryPage");export{O as default};
