var N=Object.defineProperty;var i=(t,r)=>N(t,"name",{value:r,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{aq as b,w as L,bH as A,T as M,a as _,aB as E}from"./icons-vendor-BW7dxHkX.js";import{t as l}from"./index-CjRzheBN.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80vh",display:"flex",flexDirection:"column",color:"#fff"},header:{padding:"20px",borderBottom:"1px solid #444",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},closeBtn:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px"},tabs:{display:"flex",borderBottom:"1px solid #444",padding:"0 20px"},tab:{background:"none",border:"none",color:"#99aab5",padding:"12px 20px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",borderBottom:"2px solid transparent",transition:"all 0.2s"},activeTab:{color:"#5865f2",borderBottomColor:"#5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",padding:"40px",color:"#99aab5"},balanceView:{display:"flex",flexDirection:"column",alignItems:"center",gap:"30px"},balanceCard:{backgroundColor:"#2c2f33",borderRadius:"12px",padding:"40px",textAlign:"center",width:"100%",maxWidth:"400px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},balanceAmount:{fontSize:"48px",fontWeight:"bold",color:"#faa61a"},balanceLabel:{fontSize:"14px",color:"#99aab5"},quickActions:{display:"flex",gap:"12px",width:"100%",maxWidth:"400px"},actionBtn:{flex:1,padding:"12px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.2s"},buyView:{display:"flex",flexDirection:"column",gap:"20px"},sectionTitle:{fontSize:"16px",fontWeight:"600",margin:0,marginBottom:"12px"},packages:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},package:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",textAlign:"center",cursor:"pointer",border:"2px solid transparent",transition:"all 0.2s",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},selectedPackage:{borderColor:"#5865f2",backgroundColor:"#2c3136"},pkgAmount:{fontSize:"24px",fontWeight:"bold",color:"#faa61a"},bonus:{fontSize:"10px",color:"#43b581",fontWeight:"bold",padding:"2px 8px",backgroundColor:"rgba(67, 181, 129, 0.1)",borderRadius:"4px"},pkgPrice:{fontSize:"18px",fontWeight:"600",color:"#fff"},purchaseSection:{marginTop:"24px"},paymentMethods:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},paymentMethodCard:{padding:"20px",background:"#2b2d31",border:"2px solid #40444b",borderRadius:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease"},selectedPaymentMethod:{background:"#5865f2",borderColor:"#5865f2",transform:"scale(1.05)",boxShadow:"0 4px 16px rgba(88, 101, 242, 0.3)"},pmIcon:{fontSize:"48px",marginBottom:"12px"},pmTitle:{fontSize:"16px",fontWeight:"600",color:"white",marginBottom:"6px"},pmDesc:{fontSize:"13px",color:"#b9bbbe",marginBottom:"8px"},pmBadge:{display:"inline-block",padding:"4px 12px",background:"#40444b",borderRadius:"12px",fontSize:"11px",color:"#43b581",fontWeight:"600"},paymentInfo:{background:"#2b2d31",borderRadius:"12px",padding:"16px",marginBottom:"16px"},paymentInfoRow:{display:"flex",justifyContent:"space-between",padding:"8px 0",fontSize:"14px",color:"#b9bbbe",borderBottom:"1px solid #40444b"},paymentNote:{textAlign:"center",fontSize:"12px",color:"#43b581",marginTop:"12px"},price:{fontSize:"18px",fontWeight:"600",color:"#fff"},paymentMethod:{marginTop:"12px"},label:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#dcddde"},select:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},purchaseBtn:{width:"100%",padding:"14px",backgroundColor:"#43b581",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"12px"},transferView:{maxWidth:"500px",margin:"0 auto"},form:{display:"flex",flexDirection:"column",gap:"16px"},formGroup:{display:"flex",flexDirection:"column",gap:"8px"},input:{padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},hint:{fontSize:"12px",color:"#99aab5"},transferBtn:{width:"100%",padding:"14px",backgroundColor:"#5865f2",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"12px"},historyView:{display:"flex",flexDirection:"column",gap:"16px"},transactions:{display:"flex",flexDirection:"column",gap:"8px"},transaction:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",alignItems:"center",gap:"12px"},txIcon:{fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"},txDetails:{flex:1},txTitle:{fontSize:"14px",fontWeight:"600"},txDate:{fontSize:"12px",color:"#99aab5",marginTop:"4px"},txAmount:{fontSize:"18px",fontWeight:"bold"},empty:{textAlign:"center",padding:"40px",color:"#99aab5"}},B=[{amount:100,price:.99,bonus:0},{amount:500,price:4.99,bonus:50},{amount:1e3,price:9.99,bonus:150},{amount:2500,price:19.99,bonus:500},{amount:5e3,price:39.99,bonus:1e3}],W=i((t,r)=>{const[y,p]=d.useState("balance"),[x,f]=d.useState(0),[o,m]=d.useState([]),[h,u]=d.useState(!0),[j,R]=d.useState(100),[C,I]=d.useState("stripe"),[g,T]=d.useState(""),[v,k]=d.useState(""),[w,z]=d.useState(""),S=d.useCallback(async()=>{try{const c=await(await t(`${r}/users/balance/`)).json();f(c.balance||0)}catch{l.error("Failed to load balance")}finally{u(!1)}},[t,r]),a=d.useCallback(async()=>{try{const c=await(await t(`${r}/payments/history/`)).json();m(c.transactions||[])}catch{}},[t,r]);return d.useEffect(()=>{S(),a()},[S,a]),{activeTab:y,setActiveTab:p,balance:x,transactions:o,loading:h,amount:j,setAmount:R,paymentMethod:C,setPaymentMethod:I,transferRecipient:g,setTransferRecipient:T,transferAmount:v,setTransferAmount:k,transferNote:w,setTransferNote:z,handlePurchase:i(async()=>{if(j<100){l.error("Minimum purchase is 100 coins");return}if(!C){l.error("Please select a payment method");return}try{const s=await t(`${r}/payments/coins/purchase/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({coin_amount:parseInt(j),payment_method:C})});if(!s.ok){const P=await s.json();throw new Error(P.error||"Payment failed")}const c=await s.json();c.success?c.redirect_url?(l.info("Redirecting to payment page..."),window.location.href=c.redirect_url):c.payment_page_url?(l.info("Redirecting to payment page..."),window.location.href=c.payment_page_url):l.success("Payment initiated!"):l.error(c.error||"Payment failed")}catch(s){l.error(s.message||"Payment processing failed")}},"handlePurchase"),handleTransfer:i(async()=>{if(!g||!v){l.error("Please fill in all fields");return}const s=parseInt(v);if(s<=0||s>x){l.error("Invalid transfer amount");return}try{const P=await(await t(`${r}/coins/transfer/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipient:g,amount:s,note:w})})).json();P.success?(l.success(`Transferred ${s} coins to ${g}`),S(),a(),T(""),k(""),z(""),p("balance")):l.error(P.error||"Transfer failed")}catch{l.error("Transfer failed")}},"handleTransfer")}},"usePayment"),V=[{key:"crypto",icon:"ðŸª™",title:"Cryptocurrency",desc:"Bitcoin, Ethereum, USDC",badge:"Global â€¢ Fast"},{key:"stripe",icon:"ðŸ’³",title:"Credit/Debit Card",desc:"Stripe - Visa, Mastercard",badge:"Global â€¢ Secure"},{key:"iyzico",icon:"ðŸ‡¹ðŸ‡·",title:"Turkish Payment",desc:"Ä°yzico - TL payments",badge:"Turkey â€¢ TRY"}],$={crypto:"ðŸª™ Crypto",stripe:"ðŸ’³ Card (Stripe)",iyzico:"ðŸ‡¹ðŸ‡· Ä°yzico (TRY)"},F={crypto:"ðŸ”’ Secure cryptocurrency payment via Coinbase Commerce",stripe:"ðŸ”’ Secure card payment via Stripe",iyzico:"ðŸ”’ GÃ¼venli Ã¶deme - Ä°yzico ile korunur"},O={crypto:" Pay with Crypto",stripe:" Pay with Card",iyzico:" Ä°yzico ile Ã–de"},G=i(({styles:t,amount:r,setAmount:y,paymentMethod:p,setPaymentMethod:x,handlePurchase:f})=>e.jsxs("div",{style:t.buyView,children:[e.jsx("h3",{style:t.sectionTitle,children:"Choose Payment Method"}),e.jsx("div",{style:t.paymentMethods,children:V.map(o=>e.jsxs("div",{onClick:i(()=>x(o.key),"onClick"),style:{...t.paymentMethodCard,...p===o.key&&t.selectedPaymentMethod},children:[e.jsx("div",{style:t.pmIcon,children:o.icon}),e.jsx("div",{style:t.pmTitle,children:o.title}),e.jsx("div",{style:t.pmDesc,children:o.desc}),e.jsx("div",{style:t.pmBadge,children:o.badge})]},o.key))}),e.jsx("h3",{style:t.sectionTitle,children:"Select Coin Package"}),e.jsx("div",{style:t.packages,children:B.map((o,m)=>e.jsxs("div",{onClick:i(()=>y(o.amount),"onClick"),style:{...t.package,...r===o.amount&&t.selectedPackage},children:[e.jsx(b,{style:{fontSize:"32px",color:"#faa61a"}}),e.jsx("div",{style:t.pkgAmount,children:o.amount.toLocaleString()}),o.bonus>0&&e.jsxs("div",{style:t.bonus,children:["+",o.bonus," BONUS"]}),e.jsxs("div",{style:t.price,children:["$",o.price]}),r===o.amount&&e.jsx(L,{style:{position:"absolute",top:"10px",right:"10px",color:"#43b581"}})]},m))}),e.jsxs("div",{style:t.purchaseSection,children:[e.jsxs("div",{style:t.paymentInfo,children:[e.jsxs("div",{style:t.paymentInfoRow,children:[e.jsx("span",{children:"Selected Package:"}),e.jsxs("strong",{children:[r.toLocaleString()," coins"]})]}),e.jsxs("div",{style:t.paymentInfoRow,children:[e.jsx("span",{children:"Payment Method:"}),e.jsx("strong",{children:$[p]})]}),e.jsxs("div",{style:t.paymentInfoRow,children:[e.jsx("span",{children:"Total Price:"}),e.jsx("strong",{style:{color:"#faa61a",fontSize:"18px"},children:B.find(o=>o.amount===r)?.price&&(p==="iyzico"?`â‚º${(B.find(o=>o.amount===r).price*35).toFixed(0)}`:`$${B.find(o=>o.amount===r).price}`)})]})]}),e.jsxs("button",{onClick:f,style:t.purchaseBtn,children:[e.jsx(A,{}),O[p]]}),e.jsx("div",{style:t.paymentNote,children:F[p]})]})]}),"BuyCoinsView"),H=i(({styles:t,balance:r,transferRecipient:y,setTransferRecipient:p,transferAmount:x,setTransferAmount:f,transferNote:o,setTransferNote:m,handleTransfer:h})=>e.jsxs("div",{style:t.transferView,children:[e.jsx("h3",{style:t.sectionTitle,children:"Transfer Coins"}),e.jsxs("div",{style:t.form,children:[e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Recipient Username"}),e.jsx("input",{type:"text",value:y,onChange:i(u=>p(u.target.value),"onChange"),placeholder:"@username",style:t.input})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Amount"}),e.jsx("input",{type:"number",value:x,onChange:i(u=>f(u.target.value),"onChange"),placeholder:"0",min:"1",max:r,style:t.input}),e.jsxs("div",{style:t.hint,children:["Available: ",r," coins"]})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Note (Optional)"}),e.jsx("input",{type:"text",value:o,onChange:i(u=>m(u.target.value),"onChange"),placeholder:"Add a message...",style:t.input})]}),e.jsxs("button",{onClick:h,style:t.transferBtn,children:[e.jsx(b,{})," Transfer Coins"]})]})]}),"TransferView"),ne=i(({fetchWithAuth:t,apiBaseUrl:r,onClose:y,username:p})=>{const{activeTab:x,setActiveTab:f,balance:o,transactions:m,loading:h,amount:u,setAmount:j,paymentMethod:R,setPaymentMethod:C,transferRecipient:I,setTransferRecipient:g,transferAmount:T,setTransferAmount:v,transferNote:k,setTransferNote:w,handlePurchase:z,handleTransfer:S}=W(t,r);return e.jsx("div",{style:n.overlay,onClick:y,children:e.jsxs("div",{style:n.modal,onClick:i(a=>a.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:n.header,children:[e.jsxs("div",{style:n.headerLeft,children:[e.jsx(M,{style:{fontSize:"24px",color:"#faa61a"}}),e.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Payment Center"})]}),e.jsx("button",{onClick:y,style:n.closeBtn,children:e.jsx(_,{})})]}),e.jsx("div",{style:n.tabs,children:[{key:"balance",icon:e.jsx(b,{}),label:"Balance"},{key:"buy",icon:e.jsx(A,{}),label:"Buy Coins"},{key:"transfer",icon:e.jsx(b,{}),label:"Transfer"},{key:"history",icon:e.jsx(E,{}),label:"History"}].map(a=>e.jsxs("button",{onClick:i(()=>f(a.key),"onClick"),style:{...n.tab,...x===a.key&&n.activeTab},children:[a.icon," ",a.label]},a.key))}),e.jsx("div",{style:n.content,children:h?e.jsx("div",{style:n.loading,children:"Loading..."}):x==="balance"?e.jsxs("div",{style:n.balanceView,children:[e.jsxs("div",{style:n.balanceCard,children:[e.jsx(b,{style:{fontSize:"48px",color:"#faa61a"}}),e.jsx("div",{style:n.balanceAmount,children:o.toLocaleString()}),e.jsx("div",{style:n.balanceLabel,children:"Current Balance"})]}),e.jsxs("div",{style:n.quickActions,children:[e.jsxs("button",{onClick:i(()=>f("buy"),"onClick"),style:n.actionBtn,children:[e.jsx(A,{})," Buy Coins"]}),e.jsxs("button",{onClick:i(()=>f("transfer"),"onClick"),style:n.actionBtn,children:[e.jsx(b,{})," Transfer Coins"]})]})]}):x==="buy"?e.jsx(G,{styles:n,amount:u,setAmount:j,paymentMethod:R,setPaymentMethod:C,handlePurchase:z}):x==="transfer"?e.jsx(H,{styles:n,balance:o,transferRecipient:I,setTransferRecipient:g,transferAmount:T,setTransferAmount:v,transferNote:k,setTransferNote:w,handleTransfer:S}):e.jsxs("div",{style:n.historyView,children:[e.jsx("h3",{style:n.sectionTitle,children:"Transaction History"}),m.length===0?e.jsx("div",{style:n.empty,children:"No transactions yet"}):e.jsx("div",{style:n.transactions,children:m.map((a,D)=>e.jsxs("div",{style:n.transaction,children:[e.jsx("div",{style:n.txIcon,children:a.type==="purchase"?e.jsx(A,{style:{color:"#5865f2"}}):e.jsx(b,{style:{color:a.type==="transfer_sent"?"#f04747":"#43b581"}})}),e.jsxs("div",{style:n.txDetails,children:[e.jsx("div",{style:n.txTitle,children:a.description}),e.jsx("div",{style:n.txDate,children:new Date(a.created_at).toLocaleString()})]}),e.jsxs("div",{style:{...n.txAmount,color:a.amount>0?"#43b581":"#f04747"},children:[a.amount>0?"+":"",a.amount]})]},D))})]})})]})})},"PaymentPanel");export{ne as default};
