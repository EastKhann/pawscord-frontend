{"version":3,"file":"PasswordSetupModal-BTysGNpv.js","sources":["../../../src/components/PasswordSetupModal.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { FaLock, FaEye, FaEyeSlash, FaSpinner, FaCheckCircle, FaGoogle } from 'react-icons/fa';\r\nimport toast from '../utils/toast';\r\nimport './PasswordSetupModal.css';\r\n\r\nconst PasswordSetupModal = ({ onClose, apiBaseUrl }) => {\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    const validatePassword = () => {\r\n        if (password.length < 8) {\r\n            toast.error('≈ûifre en az 8 karakter olmalƒ±dƒ±r');\r\n            return false;\r\n        }\r\n        if (password !== confirmPassword) {\r\n            toast.error('≈ûifreler e≈üle≈ümiyor');\r\n            return false;\r\n        }\r\n        // En az bir b√ºy√ºk harf, bir k√º√ß√ºk harf ve bir rakam\r\n        const hasUpperCase = /[A-Z]/.test(password);\r\n        const hasLowerCase = /[a-z]/.test(password);\r\n        const hasNumber = /[0-9]/.test(password);\r\n\r\n        if (!hasUpperCase || !hasLowerCase || !hasNumber) {\r\n            toast.error('≈ûifre en az bir b√ºy√ºk harf, bir k√º√ß√ºk harf ve bir rakam i√ßermelidir');\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!validatePassword()) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const token = localStorage.getItem('access_token');\r\n            const response = await fetch(`${apiBaseUrl}/users/change_password/`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    new_password: password\r\n                })\r\n            });\r\n\r\n            if (response.ok) {\r\n                setSuccess(true);\r\n                toast.success('‚úÖ ≈ûifre ba≈üarƒ±yla belirlendi!');\r\n                setTimeout(() => {\r\n                    onClose();\r\n                }, 2000);\r\n            } else {\r\n                const data = await response.json();\r\n                toast.error(data.error || '≈ûifre belirlenemedi');\r\n            }\r\n        } catch (error) {\r\n            console.error('Password setup error:', error);\r\n            toast.error('Bir hata olu≈ütu. L√ºtfen tekrar deneyin.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSkip = () => {\r\n        toast.info('≈ûifreyi daha sonra profil ayarlarƒ±ndan belirleyebilirsin');\r\n        onClose();\r\n    };\r\n\r\n    const getPasswordStrength = () => {\r\n        let strength = 0;\r\n        if (password.length >= 8) strength++;\r\n        if (password.length >= 12) strength++;\r\n        if (/[A-Z]/.test(password)) strength++;\r\n        if (/[a-z]/.test(password)) strength++;\r\n        if (/[0-9]/.test(password)) strength++;\r\n        if (/[^A-Za-z0-9]/.test(password)) strength++;\r\n        return strength;\r\n    };\r\n\r\n    const strengthColors = ['#f04747', '#faa61a', '#faa61a', '#43b581', '#43b581', '#43b581'];\r\n    const strengthLabels = ['√áok Zayƒ±f', 'Zayƒ±f', 'Orta', 'ƒ∞yi', 'G√º√ßl√º', '√áok G√º√ßl√º'];\r\n    const strength = getPasswordStrength();\r\n\r\n    if (success) {\r\n        return (\r\n            <div className=\"password-setup-overlay\">\r\n                <div className=\"password-setup-modal success\">\r\n                    <div className=\"success-icon\">\r\n                        <FaCheckCircle />\r\n                    </div>\r\n                    <h2>≈ûifre Belirlendi!</h2>\r\n                    <p>Artƒ±k e-posta ve ≈üifrenle de giri≈ü yapabilirsin.</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"password-setup-overlay\">\r\n            <div className=\"password-setup-modal\">\r\n                <div className=\"password-setup-header\">\r\n                    <div className=\"header-icon\">\r\n                        <FaGoogle className=\"google-icon\" />\r\n                        <FaLock className=\"lock-icon\" />\r\n                    </div>\r\n                    <h2>≈ûifre Belirle</h2>\r\n                    <p>\r\n                        Google ile giri≈ü yaptƒ±n! Hesabƒ±nƒ± daha g√ºvenli hale getirmek i√ßin\r\n                        bir ≈üifre belirleyebilirsin.\r\n                    </p>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"password-setup-form\">\r\n                    <div className=\"input-group\">\r\n                        <label>Yeni ≈ûifre</label>\r\n                        <div className=\"password-input-wrapper\">\r\n                            <FaLock className=\"input-icon\" />\r\n                            <input\r\n                                type={showPassword ? 'text' : 'password'}\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                placeholder=\"En az 8 karakter\"\r\n                                required\r\n                                minLength={8}\r\n                            />\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"toggle-visibility\"\r\n                                onClick={() => setShowPassword(!showPassword)}\r\n                            >\r\n                                {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n                            </button>\r\n                        </div>\r\n\r\n                        {password && (\r\n                            <div className=\"password-strength\">\r\n                                <div className=\"strength-bars\">\r\n                                    {[...Array(6)].map((_, i) => (\r\n                                        <div\r\n                                            key={i}\r\n                                            className={`strength-bar ${i < strength ? 'active' : ''}`}\r\n                                            style={{ backgroundColor: i < strength ? strengthColors[strength - 1] : undefined }}\r\n                                        />\r\n                                    ))}\r\n                                </div>\r\n                                <span style={{ color: strengthColors[strength - 1] || '#72767d' }}>\r\n                                    {strengthLabels[strength - 1] || '≈ûifre girin'}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"input-group\">\r\n                        <label>≈ûifre Tekrar</label>\r\n                        <div className=\"password-input-wrapper\">\r\n                            <FaLock className=\"input-icon\" />\r\n                            <input\r\n                                type={showConfirmPassword ? 'text' : 'password'}\r\n                                value={confirmPassword}\r\n                                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                placeholder=\"≈ûifreyi tekrar girin\"\r\n                                required\r\n                            />\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"toggle-visibility\"\r\n                                onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                            >\r\n                                {showConfirmPassword ? <FaEyeSlash /> : <FaEye />}\r\n                            </button>\r\n                        </div>\r\n                        {confirmPassword && password !== confirmPassword && (\r\n                            <span className=\"error-text\">≈ûifreler e≈üle≈ümiyor</span>\r\n                        )}\r\n                        {confirmPassword && password === confirmPassword && (\r\n                            <span className=\"success-text\">‚úì ≈ûifreler e≈üle≈üiyor</span>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"password-requirements\">\r\n                        <p>≈ûifre gereksinimleri:</p>\r\n                        <ul>\r\n                            <li className={password.length >= 8 ? 'met' : ''}>\r\n                                En az 8 karakter\r\n                            </li>\r\n                            <li className={/[A-Z]/.test(password) ? 'met' : ''}>\r\n                                En az bir b√ºy√ºk harf (A-Z)\r\n                            </li>\r\n                            <li className={/[a-z]/.test(password) ? 'met' : ''}>\r\n                                En az bir k√º√ß√ºk harf (a-z)\r\n                            </li>\r\n                            <li className={/[0-9]/.test(password) ? 'met' : ''}>\r\n                                En az bir rakam (0-9)\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div className=\"button-group\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"submit-btn\"\r\n                            disabled={loading || password.length < 8 || password !== confirmPassword}\r\n                        >\r\n                            {loading ? (\r\n                                <>\r\n                                    <FaSpinner className=\"spin\" />\r\n                                    Kaydediliyor...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <FaLock />\r\n                                    ≈ûifreyi Belirle\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"skip-btn\"\r\n                            onClick={handleSkip}\r\n                            disabled={loading}\r\n                        >\r\n                            Daha Sonra\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n\r\n                <div className=\"password-setup-footer\">\r\n                    <p>\r\n                        üí° ≈ûifreyi belirlersen hem Google hem de e-posta/≈üifre ile giri≈ü yapabilirsin.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PasswordSetupModal;\r\n"],"names":["useState","strength","jsxs","jsx","Fragment"],"mappings":"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"}