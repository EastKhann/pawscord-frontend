var C=Object.defineProperty;var a=(c,t)=>C(c,"name",{value:t,configurable:!0});import{r,j as e}from"./react-core-Djgtqrmb.js";import{y as n}from"./ui-vendor-IhB9Znpc.js";import{g as B}from"./index-DjBRFZUD.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";const P=a(({onClose:c})=>{const[t,v]=r.useState([]),[i,b]=r.useState(""),[o,k]=r.useState(""),[y,E]=r.useState(!0),d=B(),m=localStorage.getItem("access_token");r.useEffect(()=>{h()},[]);const h=a(async()=>{try{const l=await(await fetch(`${d}/blocks/list/`,{headers:{Authorization:`Bearer ${m}`}})).json();v(l.blocked_users||[])}catch{n.error("âŒ Engelli kullanÄ±cÄ±lar yÃ¼klenemedi")}finally{E(!1)}},"fetchBlockedUsers"),j=a(async()=>{if(!o.trim()){n.error("âŒ KullanÄ±cÄ± adÄ± gerekli");return}try{const s=await fetch(`${d}/blocks/block/`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({username:o})}),l=await s.json();s.ok?(n.success("âœ… KullanÄ±cÄ± engellendi"),k(""),h()):n.error(`âŒ ${l.error||"KullanÄ±cÄ± engellenemedi"}`)}catch{n.error("âŒ Engelleme hatasÄ±")}},"blockUser"),z=a(async s=>{try{const l=await fetch(`${d}/blocks/unblock/`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:s})}),u=await l.json();l.ok?(n.success("âœ… Engel kaldÄ±rÄ±ldÄ±"),h()):n.error(`âŒ ${u.error||"Engel kaldÄ±rÄ±lamadÄ±"}`)}catch{n.error("âŒ Engel kaldÄ±rma hatasÄ±")}},"unblockUser"),x=t.filter(s=>s.username.toLowerCase().includes(i.toLowerCase())||s.email?.toLowerCase().includes(i.toLowerCase())),w=a(s=>{const l=new Date,u=new Date(s),p=l-u,g=Math.floor(p/(1e3*60*60*24)),f=Math.floor(p/(1e3*60*60)),N=Math.floor(p/(1e3*60));return g>0?`${g} gÃ¼n Ã¶nce`:f>0?`${f} saat Ã¶nce`:N>0?`${N} dakika Ã¶nce`:"Az Ã¶nce"},"getBlockDuration");return y?e.jsx("div",{className:"blocklist-overlay",children:e.jsx("div",{className:"blocklist-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]})})}):e.jsx("div",{className:"blocklist-overlay",onClick:c,children:e.jsxs("div",{className:"blocklist-panel",onClick:a(s=>s.stopPropagation(),"onClick"),children:[e.jsxs("div",{className:"blocklist-header",children:[e.jsx("h2",{children:"ğŸš« Engelli KullanÄ±cÄ±lar"}),e.jsx("button",{className:"close-btn",onClick:c,children:"âœ•"})]}),e.jsx("div",{className:"blocklist-stats",children:e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"ğŸš«"}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-value",children:t.length}),e.jsx("span",{className:"stat-label",children:"Engelli KullanÄ±cÄ±"})]})]})}),e.jsxs("div",{className:"add-user-section",children:[e.jsx("h3",{children:"KullanÄ±cÄ± Engelle"}),e.jsxs("div",{className:"add-user-form",children:[e.jsx("input",{type:"text",placeholder:"KullanÄ±cÄ± adÄ±",value:o,onChange:a(s=>k(s.target.value),"onChange"),onKeyPress:a(s=>s.key==="Enter"&&j(),"onKeyPress"),className:"user-input"}),e.jsx("button",{className:"block-btn",onClick:j,children:"ğŸš« Engelle"})]}),e.jsx("p",{className:"info-text",children:"Engellenen kullanÄ±cÄ±lar size mesaj gÃ¶nderemez ve sizi gÃ¶remez"})]}),e.jsx("div",{className:"search-section",children:e.jsx("input",{type:"text",placeholder:"ğŸ” Engelli kullanÄ±cÄ±larda ara...",value:i,onChange:a(s=>b(s.target.value),"onChange"),className:"search-input"})}),e.jsx("div",{className:"blocklist-content",children:x.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("span",{className:"empty-icon",children:"ğŸ‰"}),e.jsx("h3",{children:"Engelli kullanÄ±cÄ± yok"}),e.jsx("p",{children:i?"Arama sonucu bulunamadÄ±":"HenÃ¼z kimseyi engellemediniz"})]}):e.jsx("div",{className:"blocked-users-list",children:x.map(s=>e.jsxs("div",{className:"blocked-user-card",children:[e.jsx("div",{className:"user-avatar",children:s.avatar?e.jsx("img",{src:s.avatar,alt:s.username}):e.jsx("div",{className:"default-avatar",children:s.username.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"user-info",children:[e.jsxs("div",{className:"user-name",children:[e.jsx("span",{className:"username",children:s.username}),e.jsx("span",{className:"user-tag",children:s.discriminator||"0000"})]}),s.email&&e.jsx("span",{className:"user-email",children:s.email}),e.jsxs("span",{className:"blocked-time",children:["Engellendi: ",w(s.blocked_at)]})]}),e.jsx("div",{className:"user-actions",children:e.jsx("button",{className:"unblock-btn",onClick:a(()=>z(s.id),"onClick"),children:"âœ“ Engeli KaldÄ±r"})})]},s.id))})}),e.jsxs("div",{className:"info-banner",children:[e.jsx("span",{className:"info-icon",children:"â„¹ï¸"}),e.jsx("p",{children:"Engellenen kullanÄ±cÄ±lar size DM gÃ¶nderemez, profilinizi gÃ¶remez ve paylaÅŸÄ±mlarÄ±nÄ±zla etkileÅŸime geÃ§emez. GruplanmÄ±ÅŸ serverlarda gÃ¶rÃ¼nÃ¼rlÃ¼k sÄ±nÄ±rlÄ±dÄ±r."})]})]})})},"BlockListPanel");export{P as default};
