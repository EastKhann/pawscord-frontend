var w=Object.defineProperty;var r=(a,l)=>w(a,"name",{value:l,configurable:!0});import{r as g,j as e}from"./react-core-Djgtqrmb.js";import{B as S,a as k,an as z,bo as B,bp as F,f as T}from"./icons-vendor-BW7dxHkX.js";import{t as d}from"./index-BRQzOq3v.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const R=[{value:"exact",label:"Exact Match"},{value:"contains",label:"Contains"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"},{value:"regex",label:"Regex"}],C={trigger:"",response:"",match_type:"contains",case_sensitive:!1,enabled:!0},_=r(({fetchWithAuth:a,apiBaseUrl:l,serverId:u})=>{const[b,p]=g.useState([]),[y,x]=g.useState(!1),[m,s]=g.useState(!1),[n,h]=g.useState(C),c=r(async()=>{x(!0);try{const f=await(await a(`${l}/autoresponders/list/?server_id=${u}`)).json();p(f.responders||[])}catch{d.error("Failed to load auto-responders")}finally{x(!1)}},"fetchResponders");return g.useEffect(()=>{c()},[]),{responders:b,loading:y,showCreate:m,setShowCreate:s,newResponder:n,setNewResponder:h,createResponder:r(async()=>{if(!n.trigger.trim()||!n.response.trim()){d.error("Please enter trigger and response");return}try{await a(`${l}/autoresponders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,server_id:u})}),d.success("Auto-responder created"),h(C),s(!1),c()}catch{d.error("Failed to create auto-responder")}},"createResponder"),toggleResponder:r(async(i,f)=>{try{await a(`${l}/autoresponders/${i}/toggle/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:f})}),d.success(f?"Enabled":"Disabled"),c()}catch{d.error("Failed to toggle")}},"toggleResponder"),deleteResponder:r(async i=>{if(confirm("Delete this auto-responder?"))try{await a(`${l}/autoresponders/${i}/delete/`,{method:"DELETE"}),d.success("Auto-responder deleted"),c()}catch{d.error("Failed to delete")}},"deleteResponder")}},"useAutoResponders"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px 20px",borderBottom:"1px solid #2c2f33"},count:{fontSize:"14px",color:"#dcddde"},createButton:{padding:"8px 16px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center"},createForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #2c2f33"},formRow:{marginBottom:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"6px"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},textarea:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"},select:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",cursor:"pointer"},checkboxLabel:{fontSize:"14px",color:"#dcddde"},submitButton:{width:"100%",padding:"12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},respondersList:{display:"flex",flexDirection:"column",gap:"12px"},responderCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between"},responderInfo:{flex:1},trigger:{fontSize:"14px",color:"#99aab5",marginBottom:"8px"},triggerValue:{color:"#5865f2",fontWeight:"600",fontFamily:"monospace"},response:{fontSize:"14px",color:"#ffffff",marginBottom:"8px"},meta:{fontSize:"12px",color:"#99aab5"},actions:{display:"flex",gap:"12px",alignItems:"center"},toggleButton:{background:"none",border:"none",cursor:"pointer",padding:"4px"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"8px"}},M=r(({fetchWithAuth:a,apiBaseUrl:l,onClose:u,serverId:b})=>{const{responders:p,loading:y,showCreate:x,setShowCreate:m,newResponder:s,setNewResponder:n,createResponder:h,toggleResponder:c,deleteResponder:j}=_({fetchWithAuth:a,apiBaseUrl:l,serverId:b});return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(S,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Auto-Responders"})]}),e.jsx("button",{onClick:u,style:t.closeButton,children:e.jsx(k,{})})]}),e.jsxs("div",{style:t.toolbar,children:[e.jsxs("div",{style:t.count,children:[p.length," auto-responders"]}),e.jsxs("button",{onClick:r(()=>m(!x),"onClick"),style:t.createButton,children:[e.jsx(z,{style:{marginRight:"6px"}}),"Create New"]})]}),x&&e.jsxs("div",{style:t.createForm,children:[e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Trigger"}),e.jsx("input",{type:"text",value:s.trigger,onChange:r(o=>n({...s,trigger:o.target.value}),"onChange"),placeholder:"hello",style:t.input})]}),e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Response"}),e.jsx("textarea",{value:s.response,onChange:r(o=>n({...s,response:o.target.value}),"onChange"),placeholder:"Hi there! How can I help you?",style:t.textarea,rows:3})]}),e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Match Type"}),e.jsx("select",{value:s.match_type,onChange:r(o=>n({...s,match_type:o.target.value}),"onChange"),style:t.select,children:R.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("label",{style:t.checkbox,children:[e.jsx("input",{type:"checkbox",checked:s.case_sensitive,onChange:r(o=>n({...s,case_sensitive:o.target.checked}),"onChange")}),e.jsx("span",{style:t.checkboxLabel,children:"Case sensitive"})]}),e.jsx("button",{onClick:h,style:t.submitButton,children:"Create Auto-Responder"})]}),e.jsx("div",{style:t.content,children:y?e.jsx("div",{style:t.loading,children:"Loading..."}):p.length===0?e.jsx("div",{style:t.empty,children:"No auto-responders configured"}):e.jsx("div",{style:t.respondersList,children:p.map((o,v)=>e.jsxs("div",{style:t.responderCard,children:[e.jsxs("div",{style:t.responderInfo,children:[e.jsxs("div",{style:t.trigger,children:["Trigger: ",e.jsx("span",{style:t.triggerValue,children:o.trigger})]}),e.jsx("div",{style:t.response,children:o.response}),e.jsxs("div",{style:t.meta,children:[R.find(i=>i.value===o.match_type)?.label,o.case_sensitive&&" • Case Sensitive"," • Uses: "+(o.usage_count||0)]})]}),e.jsxs("div",{style:t.actions,children:[e.jsx("button",{onClick:r(()=>c(o.id,!o.enabled),"onClick"),style:t.toggleButton,title:o.enabled?"Disable":"Enable",children:o.enabled?e.jsx(B,{style:{color:"#43b581",fontSize:"24px"}}):e.jsx(F,{style:{color:"#99aab5",fontSize:"24px"}})}),e.jsx("button",{onClick:r(()=>j(o.id),"onClick"),style:t.deleteButton,title:"Delete",children:e.jsx(T,{})})]})]},v))})})]})})},"AutoRespondersPanel");export{M as default};
