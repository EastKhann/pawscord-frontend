import{r,cx as m,l as h,K as S,a$ as x,ak as g}from"./react-core-B6hadH-M.js";import{t as l}from"./index-D_6pZib5.js";const B=({fetchWithAuth:n,apiBaseUrl:c,onClose:y,username:k})=>{const[s,R]=r.useState([]),[o,u]=r.useState(null),[b,d]=r.useState(!1),[i,E]=r.useState("");r.useEffect(()=>{f(),p()},[]);const f=async()=>{d(!0);try{const a=await(await n(`${c}/referrals/rewards/`)).json();R(a.rewards||[]),E(a.referral_link||"")}catch{l.error("Failed to load rewards")}finally{d(!1)}},p=async()=>{try{const a=await(await n(`${c}/referrals/stats/`)).json();u(a)}catch{console.error("Failed to load stats")}},v=async t=>{try{await n(`${c}/referrals/rewards/${t}/claim/`,{method:"POST"}),l.success("Reward claimed!"),f(),p()}catch{l.error("Failed to claim reward")}},w=()=>{navigator.clipboard.writeText(i),l.success("Referral link copied to clipboard!")};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(m,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Referral Rewards")),React.createElement("button",{onClick:y,style:e.closeButton},React.createElement(h,null))),i&&React.createElement("div",{style:e.referralSection},React.createElement("div",{style:e.referralLabel},"Your Referral Link"),React.createElement("div",{style:e.referralLinkBox},React.createElement("input",{type:"text",value:i,readOnly:!0,style:e.referralInput}),React.createElement("button",{onClick:w,style:e.copyButton},"Copy")),React.createElement("div",{style:e.referralHint},"Share this link to earn rewards when friends join!")),o&&React.createElement("div",{style:e.statsSection},React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(S,{style:{color:"#5865f2",fontSize:"24px"}})),React.createElement("div",null,React.createElement("div",{style:e.statValue},o.total_referrals||0),React.createElement("div",{style:e.statLabel},"Total Referrals"))),React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(x,{style:{color:"#faa61a",fontSize:"24px"}})),React.createElement("div",null,React.createElement("div",{style:e.statValue},o.coins_earned||0),React.createElement("div",{style:e.statLabel},"Coins Earned"))),React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(g,{style:{color:"#43b581",fontSize:"24px"}})),React.createElement("div",null,React.createElement("div",{style:e.statValue},o.rewards_claimed||0),React.createElement("div",{style:e.statLabel},"Rewards Claimed")))),React.createElement("div",{style:e.content},React.createElement("h3",{style:e.sectionTitle},"Available Rewards"),b?React.createElement("div",{style:e.loading},"Loading rewards..."):s.length===0?React.createElement("div",{style:e.empty},"No rewards available"):React.createElement("div",{style:e.rewardsList},s.map((t,a)=>React.createElement("div",{key:a,style:e.rewardCard},React.createElement("div",{style:e.rewardIcon},t.type==="coins"&&React.createElement(x,{style:{color:"#faa61a",fontSize:"32px"}}),t.type==="badge"&&React.createElement(g,{style:{color:"#5865f2",fontSize:"32px"}}),t.type==="item"&&React.createElement(m,{style:{color:"#43b581",fontSize:"32px"}})),React.createElement("div",{style:e.rewardInfo},React.createElement("div",{style:e.rewardName},t.name),React.createElement("div",{style:e.rewardDescription},t.description),React.createElement("div",{style:e.rewardRequirement},"Requires ",t.referrals_required," referrals"),t.progress!==void 0&&React.createElement("div",{style:e.progressBar},React.createElement("div",{style:{...e.progressFill,width:`${t.progress/t.referrals_required*100}%`}}))),React.createElement("div",{style:e.rewardActions},t.claimed?React.createElement("div",{style:e.claimedBadge},"âœ“ Claimed"):t.claimable?React.createElement("button",{onClick:()=>v(t.id),style:e.claimButton},"Claim"):React.createElement("div",{style:e.lockedBadge},"ðŸ”’ Locked"))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},referralSection:{padding:"20px",borderBottom:"1px solid #2c2f33",backgroundColor:"#2c2f33"},referralLabel:{fontSize:"13px",color:"#dcddde",marginBottom:"8px"},referralLinkBox:{display:"flex",gap:"12px",marginBottom:"8px"},referralInput:{flex:1,padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #1e1e1e",borderRadius:"4px",color:"#ffffff",fontSize:"13px"},copyButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"600"},referralHint:{fontSize:"12px",color:"#99aab5",fontStyle:"italic"},statsSection:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",padding:"20px",borderBottom:"1px solid #2c2f33"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},statIcon:{minWidth:"48px"},statValue:{fontSize:"24px",fontWeight:"700",color:"#ffffff",marginBottom:"4px"},statLabel:{fontSize:"12px",color:"#99aab5"},content:{padding:"20px",overflowY:"auto",flex:1},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},rewardsList:{display:"flex",flexDirection:"column",gap:"12px"},rewardCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},rewardIcon:{minWidth:"48px"},rewardInfo:{flex:1},rewardName:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"6px"},rewardDescription:{fontSize:"13px",color:"#dcddde",marginBottom:"6px"},rewardRequirement:{fontSize:"12px",color:"#99aab5",marginBottom:"8px"},progressBar:{height:"6px",backgroundColor:"#1e1e1e",borderRadius:"3px",overflow:"hidden"},progressFill:{height:"100%",backgroundColor:"#5865f2",transition:"width 0.3s"},rewardActions:{minWidth:"100px"},claimButton:{width:"100%",padding:"10px 20px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},claimedBadge:{width:"100%",padding:"10px 20px",backgroundColor:"#2c2f33",border:"1px solid #43b581",borderRadius:"4px",color:"#43b581",textAlign:"center",fontSize:"14px",fontWeight:"600"},lockedBadge:{width:"100%",padding:"10px 20px",backgroundColor:"#2c2f33",border:"1px solid #99aab5",borderRadius:"4px",color:"#99aab5",textAlign:"center",fontSize:"14px",fontWeight:"600"}};export{B as default};
