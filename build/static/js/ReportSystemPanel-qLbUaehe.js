import{r,cg as n,l as m,aX as h,ax as L,aq as D,a1 as k,v as j,b_ as P,c8 as W}from"./react-core-B6hadH-M.js";import{h as w,t as A}from"./index-D_6pZib5.js";const $=({serverId:u,fetchWithAuth:g,apiBaseUrl:R,onClose:f})=>{const[x,B]=r.useState([]),[s,I]=r.useState("pending"),[c,z]=r.useState("all"),[a,i]=r.useState(null),[T,y]=r.useState(!0),[d,_]=r.useState({pending:0,resolved:0,dismissed:0,total:0});r.useEffect(()=>{b(),E()},[u,s,c]);const b=async()=>{y(!0);try{const t=new URLSearchParams({server:u,status:s!=="all"?s:"",report_type:c!=="all"?c:""}),o=await g(`${R}/moderation/reports/?${t}`);if(o.ok){const l=await o.json();B(l.results||l)}}catch(t){console.error("Failed to load reports:",t)}y(!1)},E=async()=>{try{const t=await g(`${R}/moderation/reports/stats/${u}/`);if(t.ok){const o=await t.json();_(o)}}catch(t){console.error("Failed to load stats:",t)}},p=async(t,o,l="")=>{try{(await g(`${R}/moderation/reports/${t}/handle/`,{method:"POST",body:JSON.stringify({action:o,reason:l,moderator_notes:l})})).ok?(b(),E(),i(null)):A.error("❌ Failed to handle report")}catch(S){console.error("Failed to handle report:",S)}},F=t=>{switch(t){case"message":return React.createElement(W,null);case"user":return React.createElement(k,null);case"server":return React.createElement(n,null);default:return React.createElement(n,null)}},v=t=>{switch(t){case"pending":return"#f0b132";case"resolved":return"#43b581";case"dismissed":return"#72767d";default:return"#5865f2"}},C=t=>{switch(t){case"low":return"#43b581";case"medium":return"#f0b132";case"high":return"#ed4245";case"critical":return"#a12929";default:return"#72767d"}};return React.createElement("div",{style:e.overlay,onClick:f},React.createElement("div",{style:e.panel,onClick:t=>t.stopPropagation()},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(n,{style:e.headerIcon}),React.createElement("h2",{style:e.title},"Report System")),React.createElement("button",{onClick:f,style:e.closeButton},React.createElement(m,null))),React.createElement("div",{style:e.statsGrid},React.createElement("div",{style:e.statCard},React.createElement(n,{style:{...e.statIcon,color:"#f0b132"}}),React.createElement("div",{style:e.statValue},d.pending),React.createElement("div",{style:e.statLabel},"Pending")),React.createElement("div",{style:e.statCard},React.createElement(h,{style:{...e.statIcon,color:"#43b581"}}),React.createElement("div",{style:e.statValue},d.resolved),React.createElement("div",{style:e.statLabel},"Resolved")),React.createElement("div",{style:e.statCard},React.createElement(m,{style:{...e.statIcon,color:"#72767d"}}),React.createElement("div",{style:e.statValue},d.dismissed),React.createElement("div",{style:e.statLabel},"Dismissed")),React.createElement("div",{style:e.statCard},React.createElement(L,{style:{...e.statIcon,color:"#5865f2"}}),React.createElement("div",{style:e.statValue},d.total),React.createElement("div",{style:e.statLabel},"Total Reports"))),React.createElement("div",{style:e.filters},React.createElement("div",{style:e.filterGroup},React.createElement(D,{style:e.filterIcon}),React.createElement("select",{value:s,onChange:t=>I(t.target.value),style:e.filterSelect},React.createElement("option",{value:"all"},"All Reports"),React.createElement("option",{value:"pending"},"Pending"),React.createElement("option",{value:"resolved"},"Resolved"),React.createElement("option",{value:"dismissed"},"Dismissed")),React.createElement("select",{value:c,onChange:t=>z(t.target.value),style:e.filterSelect},React.createElement("option",{value:"all"},"All Types"),React.createElement("option",{value:"message"},"Messages"),React.createElement("option",{value:"user"},"Users"),React.createElement("option",{value:"server"},"Server")))),React.createElement("div",{style:e.reportsList},T?React.createElement("div",{style:e.loading},"Loading reports..."):x.length===0?React.createElement("div",{style:e.empty},React.createElement(n,{style:e.emptyIcon}),React.createElement("p",null,"No reports found")):x.map(t=>React.createElement("div",{key:t.id,style:e.reportCard,onClick:()=>i(t)},React.createElement("div",{style:e.reportHeader},React.createElement("div",{style:e.reportIcon},F(t.report_type)),React.createElement("div",{style:e.reportInfo},React.createElement("div",{style:e.reportTitle},t.reason||`${t.report_type} Report`),React.createElement("div",{style:e.reportMeta},React.createElement("span",null,"By: ",t.reporter_username||"Unknown"),React.createElement("span",null,"•"),React.createElement("span",null,new Date(t.created_at).toLocaleString()))),React.createElement("div",{style:e.reportBadges},React.createElement("span",{style:{...e.badge,backgroundColor:v(t.status)}},t.status),t.severity&&React.createElement("span",{style:{...e.badge,backgroundColor:C(t.severity)}},t.severity))),React.createElement("div",{style:e.reportContent},React.createElement("p",{style:e.reportText},t.description),t.message_content&&React.createElement("div",{style:e.reportedContent},React.createElement("strong",null,"Reported Content:"),React.createElement("p",null,t.message_content)),t.reported_username&&React.createElement("div",{style:e.reportedUser},React.createElement(k,null),React.createElement("span",null,"Reported User: ",t.reported_username)))))),a&&React.createElement("div",{style:e.modalOverlay,onClick:()=>i(null)},React.createElement("div",{style:e.modal,onClick:t=>t.stopPropagation()},React.createElement("div",{style:e.modalHeader},React.createElement("h3",{style:e.modalTitle},"Report Details"),React.createElement("button",{onClick:()=>i(null),style:e.modalClose},React.createElement(m,null))),React.createElement("div",{style:e.modalContent},React.createElement("div",{style:e.detailRow},React.createElement("strong",null,"Report Type:"),React.createElement("span",null,a.report_type)),React.createElement("div",{style:e.detailRow},React.createElement("strong",null,"Status:"),React.createElement("span",{style:{...e.badge,backgroundColor:v(a.status)}},a.status)),React.createElement("div",{style:e.detailRow},React.createElement("strong",null,"Severity:"),React.createElement("span",{style:{...e.badge,backgroundColor:C(a.severity)}},a.severity||"N/A")),React.createElement("div",{style:e.detailRow},React.createElement("strong",null,"Reporter:"),React.createElement("span",null,a.reporter_username)),React.createElement("div",{style:e.detailRow},React.createElement("strong",null,"Reported User:"),React.createElement("span",null,a.reported_username||"N/A")),React.createElement("div",{style:e.detailRow},React.createElement("strong",null,"Created:"),React.createElement("span",null,new Date(a.created_at).toLocaleString())),React.createElement("div",{style:e.detailSection},React.createElement("strong",null,"Reason:"),React.createElement("p",{style:e.detailText},a.reason)),React.createElement("div",{style:e.detailSection},React.createElement("strong",null,"Description:"),React.createElement("p",{style:e.detailText},a.description)),a.message_content&&React.createElement("div",{style:e.detailSection},React.createElement("strong",null,"Reported Message:"),React.createElement("div",{style:e.messageBox},a.message_content)),a.moderator_notes&&React.createElement("div",{style:e.detailSection},React.createElement("strong",null,"Moderator Notes:"),React.createElement("p",{style:e.detailText},a.moderator_notes))),a.status==="pending"&&React.createElement("div",{style:e.modalActions},React.createElement("button",{onClick:()=>{const t=prompt("Resolution notes (optional):");p(a.id,"resolve",t||"")},style:e.actionBtn},React.createElement(h,null)," Resolve"),a.message_id&&React.createElement("button",{onClick:async()=>{await w("Delete this message?")&&p(a.id,"delete_message")},style:{...e.actionBtn,backgroundColor:"#ed4245"}},React.createElement(j,null)," Delete Message"),a.reported_user&&React.createElement("button",{onClick:async()=>{if(await w("Ban this user?")){const t=prompt("Ban reason:");t&&p(a.id,"ban_user",t)}},style:{...e.actionBtn,backgroundColor:"#a12929"}},React.createElement(P,null)," Ban User"),React.createElement("button",{onClick:()=>{const t=prompt("Dismiss reason:");t&&p(a.id,"dismiss",t)},style:{...e.actionBtn,backgroundColor:"#72767d"}},React.createElement(m,null)," Dismiss"))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,backdropFilter:"blur(5px)"},panel:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"90%",maxWidth:"1000px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",overflow:"hidden"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #1e1f22"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerIcon:{fontSize:"24px",color:"#f0b132"},title:{margin:0,color:"#fff",fontSize:"24px",fontWeight:"600"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"24px",padding:"8px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",padding:"20px",borderBottom:"1px solid #1e1f22"},statCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"16px",textAlign:"center"},statIcon:{fontSize:"32px",marginBottom:"8px"},statValue:{fontSize:"28px",fontWeight:"bold",color:"#fff",marginBottom:"4px"},statLabel:{fontSize:"13px",color:"#b9bbbe"},filters:{padding:"16px 20px",borderBottom:"1px solid #1e1f22",backgroundColor:"#1e1f22"},filterGroup:{display:"flex",alignItems:"center",gap:"12px"},filterIcon:{color:"#b9bbbe",fontSize:"16px"},filterSelect:{backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"6px",padding:"8px 12px",color:"#fff",fontSize:"14px",cursor:"pointer"},reportsList:{flex:1,overflowY:"auto",padding:"20px"},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px",fontSize:"14px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"60px"},emptyIcon:{fontSize:"48px",marginBottom:"16px",opacity:.5},reportCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"16px",marginBottom:"12px",cursor:"pointer",transition:"background-color 0.2s",":hover":{backgroundColor:"#2b2d31"}},reportHeader:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},reportIcon:{fontSize:"20px",color:"#f0b132",marginTop:"4px"},reportInfo:{flex:1},reportTitle:{color:"#fff",fontSize:"16px",fontWeight:"600",marginBottom:"4px"},reportMeta:{color:"#72767d",fontSize:"13px",display:"flex",gap:"8px"},reportBadges:{display:"flex",gap:"8px"},badge:{padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",color:"#fff",textTransform:"uppercase"},reportContent:{paddingLeft:"32px"},reportText:{color:"#b9bbbe",fontSize:"14px",margin:"0 0 12px 0"},reportedContent:{backgroundColor:"#2b2d31",padding:"12px",borderRadius:"6px",borderLeft:"3px solid #ed4245",marginBottom:"12px"},reportedUser:{display:"flex",alignItems:"center",gap:"8px",color:"#b9bbbe",fontSize:"13px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},modal:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column",overflow:"hidden"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #1e1f22"},modalTitle:{margin:0,color:"#fff",fontSize:"20px",fontWeight:"600"},modalClose:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"20px"},modalContent:{flex:1,overflowY:"auto",padding:"20px"},detailRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid #1e1f22",color:"#fff",fontSize:"14px"},detailSection:{marginTop:"20px"},detailText:{color:"#b9bbbe",fontSize:"14px",marginTop:"8px",lineHeight:"1.5"},messageBox:{backgroundColor:"#1e1f22",padding:"12px",borderRadius:"6px",borderLeft:"3px solid #ed4245",color:"#fff",fontSize:"14px",marginTop:"8px"},modalActions:{display:"flex",gap:"12px",padding:"16px 20px",borderTop:"1px solid #1e1f22",flexWrap:"wrap"},actionBtn:{flex:1,backgroundColor:"#43b581",color:"#fff",border:"none",borderRadius:"6px",padding:"10px 16px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minWidth:"120px"}};export{$ as default};
