var f=Object.defineProperty;var n=(e,t)=>f(e,"name",{value:t,configurable:!0});import{a as g,r as i,j as r}from"./react-core-Djgtqrmb.js";import{m as d,t as x}from"./index-DjBRFZUD.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";import"./ui-vendor-IhB9Znpc.js";const b=n(({remoteStreams:e,remoteVolumes:t,mutedUsers:l})=>{const[s,c]=i.useState(()=>localStorage.getItem("pawscord_audio_enabled")==="true"),u=i.useCallback(()=>{try{const o=window.AudioContext||window.webkitAudioContext,a=new o;a.state==="suspended"&&a.resume().then(()=>{d.audio("AudioContext resumed successfully")}),c(!0),localStorage.setItem("pawscord_audio_enabled","true"),d.audio("Global audio enabled")}catch(o){x.error("âŒ Ses sistemi baÅŸlatÄ±lamadÄ±: "+o.message)}},[]);return i.useEffect(()=>()=>d.audio("VoiceAudioController UNMOUNTED!"),[]),r.jsxs(r.Fragment,{children:[!s&&Object.keys(e).length>0&&r.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999999,backgroundColor:"rgba(0,0,0,0.9)",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},children:r.jsx("button",{onClick:u,style:{padding:"12px 24px",backgroundColor:"#ff4757",color:"white",fontWeight:"bold",border:"none",cursor:"pointer",borderRadius:"6px",fontSize:"16px",transition:"all 0.2s",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},onMouseOver:n(o=>o.target.style.backgroundColor="#ee5a6f","onMouseOver"),onMouseOut:n(o=>o.target.style.backgroundColor="#ff4757","onMouseOut"),children:"ðŸš¨ SES SÄ°STEMÄ°NÄ° BAÅžLAT ðŸš¨"})}),r.jsx("div",{style:{display:"none"},children:Object.entries(e).map(([o,a])=>r.jsx(y,{username:o,stream:a,volume:t[o]!==void 0?t[o]:100,isMuted:l?l.has(o):!1,globalEnabled:s},`${o}-${a.id}-${a.getAudioTracks().length}`))})]})},"VoiceAudioController"),y=n(({username:e,stream:t,volume:l,isMuted:s,globalEnabled:c})=>{const u=i.useRef(null);return i.useEffect(()=>{if(t){const o=t.getAudioTracks();d.log(`[AudioPlayer] ${e} has ${o.length} audio tracks`)}},[t,e]),i.useEffect(()=>{const o=u.current;if(!o||!t)return;o.srcObject=t,o.muted=!1,n(async()=>{if(c)try{if(t.getAudioTracks().length===0){d.warn(`[AudioPlayer] No audio tracks for ${e}`);return}await o.play(),d.log(`âœ… [AudioPlayer] Successfully playing ${e}`)}catch{}},"attemptPlay")()},[t,e,c]),i.useEffect(()=>{const o=u.current;if(!o)return;const a=s?0:l/100;o.volume=Math.max(0,Math.min(1,a))},[l,s,e]),r.jsx("audio",{ref:u,autoPlay:!0,playsInline:!0,style:{display:"none"}})},"AudioPlayer"),T=g.memo(b);export{T as default};
