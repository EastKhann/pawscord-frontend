import{r as n,n as e}from"./react-core-BMiyQWF6.js";import{b0 as G,co as L,aA as W,a as $,bL as E,u as T,w as U,bK as O,cp as Q}from"./icons-vendor-T72gfvdf.js";import"./editor-vendor-D9c4a6XZ.js";const H=({isOpen:c,onClose:y,targetUser:p,currentUser:w,localStream:l,remoteStream:s,onToggleVideo:B,onToggleMute:R,isVideoEnabled:a,isMuted:u,callDuration:F=0,callStatus:x="connecting"})=>{const[z,v]=n.useState(!1),[j,A]=n.useState(!1),[m,C]=n.useState(""),[k,S]=n.useState(""),[d,V]=n.useState({cameras:[],microphones:[]}),[D,M]=n.useState("720p"),f=n.useRef(null),h=n.useRef(null),I=n.useRef(null);n.useEffect(()=>{c&&(async()=>{try{const r=await navigator.mediaDevices.enumerateDevices(),i=r.filter(b=>b.kind==="videoinput"),g=r.filter(b=>b.kind==="audioinput");V({cameras:i,microphones:g}),i.length>0&&!m&&C(i[0].deviceId),g.length>0&&!k&&S(g[0].deviceId)}catch{}})()},[c]),n.useEffect(()=>{f.current&&l&&(f.current.srcObject=l)},[l]),n.useEffect(()=>{h.current&&s&&(h.current.srcObject=s)},[s]);const P=async()=>{if(document.fullscreenElement)await document.exitFullscreen(),v(!1);else try{await I.current?.requestFullscreen(),v(!0)}catch{}},K=o=>{const r=Math.floor(o/60),i=o%60;return`${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`};return c?e.jsx("div",{style:t.overlay,children:e.jsxs("div",{ref:I,style:t.container,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerInfo,children:[e.jsx("div",{style:t.avatar,children:p?.username?.[0]?.toUpperCase()||"U"}),e.jsxs("div",{style:t.userInfo,children:[e.jsx("span",{style:t.username,children:p?.username||"Unknown"}),e.jsxs("span",{style:t.status,children:[x==="connecting"&&"ðŸ”„ BaÄŸlanÄ±yor...",x==="active"&&`â±ï¸ ${K(F)}`,x==="ended"&&"ðŸ“ž Arama sona erdi"]})]})]}),e.jsxs("div",{style:t.headerActions,children:[e.jsx("button",{onClick:()=>A(!j),style:t.headerButton,title:"Ayarlar",children:e.jsx(G,{})}),e.jsx("button",{onClick:P,style:t.headerButton,title:"Tam ekran",children:z?e.jsx(L,{}):e.jsx(W,{})}),e.jsx("button",{onClick:y,style:t.closeButton,title:"Kapat",children:e.jsx($,{})})]})]}),j&&e.jsxs("div",{style:t.settingsPanel,children:[e.jsx("h4",{style:t.settingsTitle,children:"Video AyarlarÄ±"}),e.jsxs("div",{style:t.settingGroup,children:[e.jsx("label",{style:t.settingLabel,children:"Kamera"}),e.jsx("select",{value:m,onChange:o=>C(o.target.value),style:t.settingSelect,children:d.cameras.map(o=>e.jsx("option",{value:o.deviceId,children:o.label||`Kamera ${d.cameras.indexOf(o)+1}`},o.deviceId))})]}),e.jsxs("div",{style:t.settingGroup,children:[e.jsx("label",{style:t.settingLabel,children:"Mikrofon"}),e.jsx("select",{value:k,onChange:o=>S(o.target.value),style:t.settingSelect,children:d.microphones.map(o=>e.jsx("option",{value:o.deviceId,children:o.label||`Mikrofon ${d.microphones.indexOf(o)+1}`},o.deviceId))})]}),e.jsxs("div",{style:t.settingGroup,children:[e.jsx("label",{style:t.settingLabel,children:"Kalite"}),e.jsxs("select",{value:D,onChange:o=>M(o.target.value),style:t.settingSelect,children:[e.jsx("option",{value:"480p",children:"480p (DÃ¼ÅŸÃ¼k)"}),e.jsx("option",{value:"720p",children:"720p (Orta)"}),e.jsx("option",{value:"1080p",children:"1080p (YÃ¼ksek)"})]})]})]}),e.jsxs("div",{style:t.videoGrid,children:[e.jsx("div",{style:t.remoteVideoContainer,children:s?e.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,style:t.remoteVideo}):e.jsxs("div",{style:t.videoPlaceholder,children:[e.jsx("div",{style:t.placeholderAvatar,children:p?.username?.[0]?.toUpperCase()||"U"}),e.jsx("p",{children:"Kamera aÃ§Ä±lmadÄ±"})]})}),e.jsx("div",{style:t.localVideoContainer,children:l&&a?e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,style:t.localVideo}):e.jsx("div",{style:t.localVideoPlaceholder,children:e.jsx("div",{style:t.placeholderAvatarSmall,children:w?.[0]?.toUpperCase()||"M"})})})]}),e.jsxs("div",{style:t.controls,children:[e.jsx("button",{onClick:R,style:{...t.controlButton,...u&&t.controlButtonActive},title:u?"Mikrofonu aÃ§":"Mikrofonu kapat",children:u?e.jsx(E,{}):e.jsx(T,{})}),e.jsx("button",{onClick:B,style:{...t.controlButton,...!a&&t.controlButtonActive},title:a?"KamerayÄ± kapat":"KamerayÄ± aÃ§",children:a?e.jsx(U,{}):e.jsx(O,{})}),e.jsx("button",{onClick:y,style:t.hangupButton,title:"AramayÄ± sonlandÄ±r",children:e.jsx(Q,{style:{transform:"rotate(135deg)"}})})]})]})}):null},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},container:{width:"100%",height:"100%",backgroundColor:"#1e1f22",display:"flex",flexDirection:"column",position:"relative"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",backgroundColor:"#2f3136",borderBottom:"1px solid #1e1f22"},headerInfo:{display:"flex",alignItems:"center",gap:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold",color:"#fff"},userInfo:{display:"flex",flexDirection:"column",gap:"4px"},username:{fontSize:"16px",fontWeight:"bold",color:"#fff"},status:{fontSize:"13px",color:"#b9bbbe"},headerActions:{display:"flex",gap:"8px"},headerButton:{backgroundColor:"transparent",border:"none",color:"#b9bbbe",fontSize:"18px",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background-color 0.2s"},closeButton:{backgroundColor:"#f04747",border:"none",color:"#fff",fontSize:"18px",cursor:"pointer",padding:"8px 12px",borderRadius:"4px"},settingsPanel:{position:"absolute",top:"70px",right:"24px",backgroundColor:"#2f3136",border:"1px solid #1e1f22",borderRadius:"8px",padding:"16px",width:"280px",zIndex:100,boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},settingsTitle:{fontSize:"14px",fontWeight:"bold",color:"#fff",marginBottom:"12px"},settingGroup:{marginBottom:"12px"},settingLabel:{display:"block",fontSize:"12px",color:"#b9bbbe",marginBottom:"6px"},settingSelect:{width:"100%",backgroundColor:"#40444b",border:"1px solid #1e1f22",borderRadius:"4px",padding:"8px",color:"#dcddde",fontSize:"13px"},videoGrid:{flex:1,position:"relative",backgroundColor:"#000"},remoteVideoContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},remoteVideo:{width:"100%",height:"100%",objectFit:"contain"},videoPlaceholder:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",color:"#b9bbbe"},placeholderAvatar:{width:"120px",height:"120px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:"bold",color:"#fff"},localVideoContainer:{position:"absolute",bottom:"100px",right:"24px",width:"240px",height:"180px",borderRadius:"8px",overflow:"hidden",border:"2px solid #5865f2",backgroundColor:"#000",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},localVideo:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"},localVideoPlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#2f3136"},placeholderAvatarSmall:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",color:"#fff"},controls:{display:"flex",justifyContent:"center",alignItems:"center",gap:"16px",padding:"24px",backgroundColor:"#2f3136"},controlButton:{width:"56px",height:"56px",borderRadius:"50%",border:"none",backgroundColor:"#40444b",color:"#fff",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},controlButtonActive:{backgroundColor:"#f04747"},hangupButton:{width:"56px",height:"56px",borderRadius:"50%",border:"none",backgroundColor:"#f04747",color:"#fff",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"}};export{H as default};
