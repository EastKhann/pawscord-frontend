var k=Object.defineProperty;var t=(e,s)=>k(e,"name",{value:s,configurable:!0});import{a as p}from"./react-core-Djgtqrmb.js";const O=t(e=>{let s;const n=new Set,a=t((c,S)=>{const g=typeof c=="function"?c(s):c;if(!Object.is(g,s)){const h=s;s=S??(typeof g!="object"||g===null)?g:Object.assign({},s,g),n.forEach(f=>f(s,h))}},"setState"),i=t(()=>s,"getState"),l={setState:a,getState:i,getInitialState:t(()=>m,"getInitialState"),subscribe:t(c=>(n.add(c),()=>n.delete(c)),"subscribe")},m=s=e(a,i,l);return l},"createStoreImpl"),w=t((e=>e?O(e):O),"createStore"),E=t(e=>e,"identity");function x(e,s=E){const n=p.useSyncExternalStore(e.subscribe,p.useCallback(()=>s(e.getState()),[e,s]),p.useCallback(()=>s(e.getInitialState()),[e,s]));return p.useDebugValue(n),n}t(x,"useStore");const j=t(e=>{const s=w(e),n=t(a=>x(s,a),"useBoundStore");return Object.assign(n,s),n},"createImpl"),P=t((e=>e?j(e):j),"create");function C(e,s){let n;try{n=e()}catch{return}return{getItem:t(i=>{var o;const v=t(m=>m===null?null:JSON.parse(m,void 0),"parse"),l=(o=n.getItem(i))!=null?o:null;return l instanceof Promise?l.then(v):v(l)},"getItem"),setItem:t((i,o)=>n.setItem(i,JSON.stringify(o,void 0)),"setItem"),removeItem:t(i=>n.removeItem(i),"removeItem")}}t(C,"createJSONStorage");const _=t(e=>s=>{try{const n=e(s);return n instanceof Promise?n:{then(a){return _(a)(n)},catch(a){return this}}}catch(n){return{then(a){return this},catch(a){return _(a)(n)}}}},"toThenable"),F=t((e,s)=>(n,a,i)=>{let o={storage:C(()=>localStorage),partialize:t(r=>r,"partialize"),version:0,merge:t((r,y)=>({...y,...r}),"merge"),...s},v=!1;const l=new Set,m=new Set;let c=o.storage;if(!c)return e((...r)=>{n(...r)},a,i);const S=t(()=>{const r=o.partialize({...a()});return c.setItem(o.name,{state:r,version:o.version})},"setItem"),g=i.setState;i.setState=(r,y)=>(g(r,y),S());const h=e((...r)=>(n(...r),S()),a,i);i.getInitialState=()=>h;let f;const H=t(()=>{var r,y;if(!c)return;v=!1,l.forEach(u=>{var d;return u((d=a())!=null?d:h)});const b=((y=o.onRehydrateStorage)==null?void 0:y.call(o,(r=a())!=null?r:h))||void 0;return _(c.getItem.bind(c))(o.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==o.version){if(o.migrate){const d=o.migrate(u.state,u.version);return d instanceof Promise?d.then(I=>[!0,I]):[!0,d]}}else return[!1,u.state];return[!1,void 0]}).then(u=>{var d;const[I,R]=u;if(f=o.merge(R,(d=a())!=null?d:h),n(f,!0),I)return S()}).then(()=>{b?.(f,void 0),f=a(),v=!0,m.forEach(u=>u(f))}).catch(u=>{b?.(void 0,u)})},"hydrate");return i.persist={setOptions:t(r=>{o={...o,...r},r.storage&&(c=r.storage)},"setOptions"),clearStorage:t(()=>{c?.removeItem(o.name)},"clearStorage"),getOptions:t(()=>o,"getOptions"),rehydrate:t(()=>H(),"rehydrate"),hasHydrated:t(()=>v,"hasHydrated"),onHydrate:t(r=>(l.add(r),()=>{l.delete(r)}),"onHydrate"),onFinishHydration:t(r=>(m.add(r),()=>{m.delete(r)}),"onFinishHydration")},o.skipHydration||H(),f||h},"persistImpl"),L=F;export{P as c,L as p};
