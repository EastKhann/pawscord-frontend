import{r as c,ay as u,l as w,c0 as S,ck as y,bR as C,cl as _,bV as L}from"./react-core-B6hadH-M.js";import{t as x,h as I}from"./index-D_6pZib5.js";const T=({serverId:n,fetchWithAuth:l,apiBaseUrl:r,onClose:p})=>{const[a,s]=c.useState({enabled:!1,join_rate_limit:10,new_account_age:7,verification_level:"medium",auto_kick_suspicious:!0,lockdown_mode:!1}),[m,b]=c.useState([]),[d,B]=c.useState({blocked_joins:0,kicked_users:0,raid_attempts:0,last_raid:null}),[z,v]=c.useState(!0);c.useEffect(()=>{R(),g();const t=setInterval(g,3e4);return()=>clearInterval(t)},[n]);const R=async()=>{try{const t=await l(`${r}/moderation/raid-protection/${n}/`);if(t.ok){const i=await t.json();s(i)}}catch(t){console.error("Failed to load raid protection:",t)}v(!1)},g=async()=>{try{const t=await l(`${r}/moderation/raid-protection/check/`,{method:"POST",body:JSON.stringify({server_id:n})});if(t.ok){const i=await t.json();b(i.recent_activity||[]),i.raid_detected&&x.error(`‚ö†Ô∏è RAID DETECTED!
${i.message}

Automatic protection activated.`)}}catch(t){console.error("Failed to check raid activity:",t)}},E=async()=>{try{const t=await l(`${r}/moderation/raid-protection/enable/`,{method:"POST",body:JSON.stringify({server_id:n,enabled:!a.enabled})});if(t.ok){const i=await t.json();s({...a,enabled:!a.enabled})}}catch(t){console.error("Failed to toggle raid protection:",t)}},o=async(t,i)=>{const f={...a,[t]:i};s(f);try{await l(`${r}/moderation/raid-protection/update/`,{method:"POST",body:JSON.stringify({server_id:n,...f})})}catch(h){console.error("Failed to update setting:",h)}},k=async()=>{if(await I(`‚ö†Ô∏è LOCKDOWN MODE

This will:
- Block all new joins
- Require manual approval for each user
- Kick suspicious accounts

Activate?`))try{await o("lockdown_mode",!0),x.success("üîí Lockdown Mode Activated!")}catch(t){console.error("Failed to activate lockdown:",t)}};return React.createElement("div",{style:e.overlay,onClick:p},React.createElement("div",{style:e.panel,onClick:t=>t.stopPropagation()},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(u,{style:{...e.headerIcon,color:a.enabled?"#43b581":"#72767d"}}),React.createElement("h2",{style:e.title},"Raid Protection"),a.lockdown_mode&&React.createElement("span",{style:e.lockdownBadge},"üîí LOCKDOWN")),React.createElement("button",{onClick:p,style:e.closeButton},React.createElement(w,null))),React.createElement("div",{style:e.statsGrid},React.createElement("div",{style:e.statCard},React.createElement(S,{style:{...e.statIcon,color:"#ed4245"}}),React.createElement("div",{style:e.statValue},d.blocked_joins),React.createElement("div",{style:e.statLabel},"Blocked Joins")),React.createElement("div",{style:e.statCard},React.createElement(y,{style:{...e.statIcon,color:"#f0b132"}}),React.createElement("div",{style:e.statValue},d.kicked_users),React.createElement("div",{style:e.statLabel},"Auto-Kicked")),React.createElement("div",{style:e.statCard},React.createElement(C,{style:{...e.statIcon,color:"#f04747"}}),React.createElement("div",{style:e.statValue},d.raid_attempts),React.createElement("div",{style:e.statLabel},"Raid Attempts")),React.createElement("div",{style:e.statCard},React.createElement(_,{style:{...e.statIcon,color:"#5865f2"}}),React.createElement("div",{style:e.statValue},a.enabled?"ACTIVE":"OFF"),React.createElement("div",{style:e.statLabel},"Status"))),React.createElement("div",{style:e.section},React.createElement("div",{style:e.sectionHeader},React.createElement("h3",{style:e.sectionTitle},React.createElement(L,null)," Protection Settings"),React.createElement("label",{style:e.masterSwitch},React.createElement("input",{type:"checkbox",checked:a.enabled,onChange:E}),React.createElement("span",{style:e.switchSlider}),React.createElement("span",{style:e.switchLabel},a.enabled?"Enabled":"Disabled"))),React.createElement("div",{style:e.settings},React.createElement("div",{style:e.setting},React.createElement("div",{style:e.settingInfo},React.createElement("div",{style:e.settingLabel},"Join Rate Limit"),React.createElement("div",{style:e.settingDesc},"Maximum users per minute: ",a.join_rate_limit)),React.createElement("input",{type:"range",min:"5",max:"50",value:a.join_rate_limit,onChange:t=>o("join_rate_limit",parseInt(t.target.value)),style:e.slider,disabled:!a.enabled})),React.createElement("div",{style:e.setting},React.createElement("div",{style:e.settingInfo},React.createElement("div",{style:e.settingLabel},"New Account Age Limit"),React.createElement("div",{style:e.settingDesc},"Block accounts younger than ",a.new_account_age," days")),React.createElement("select",{value:a.new_account_age,onChange:t=>o("new_account_age",parseInt(t.target.value)),style:e.select,disabled:!a.enabled},React.createElement("option",{value:"1"},"1 day"),React.createElement("option",{value:"3"},"3 days"),React.createElement("option",{value:"7"},"7 days"),React.createElement("option",{value:"14"},"14 days"),React.createElement("option",{value:"30"},"30 days"))),React.createElement("div",{style:e.setting},React.createElement("div",{style:e.settingInfo},React.createElement("div",{style:e.settingLabel},"Verification Level"),React.createElement("div",{style:e.settingDesc},a.verification_level==="low"&&"Basic: Email verification",a.verification_level==="medium"&&"Medium: Email + Phone",a.verification_level==="high"&&"High: Email + Phone + Captcha")),React.createElement("select",{value:a.verification_level,onChange:t=>o("verification_level",t.target.value),style:e.select,disabled:!a.enabled},React.createElement("option",{value:"low"},"Low"),React.createElement("option",{value:"medium"},"Medium"),React.createElement("option",{value:"high"},"High"))),React.createElement("div",{style:e.setting},React.createElement("div",{style:e.settingInfo},React.createElement("div",{style:e.settingLabel},"Auto-Kick Suspicious Accounts"),React.createElement("div",{style:e.settingDesc},"Automatically kick accounts flagged as suspicious")),React.createElement("label",{style:e.toggleSwitch},React.createElement("input",{type:"checkbox",checked:a.auto_kick_suspicious,onChange:t=>o("auto_kick_suspicious",t.target.checked),disabled:!a.enabled}),React.createElement("span",{style:e.toggleSlider}))),React.createElement("div",{style:e.setting},React.createElement("div",{style:e.settingInfo},React.createElement("div",{style:e.settingLabel},"üîí Lockdown Mode"),React.createElement("div",{style:e.settingDesc},"Block ALL new joins (emergency mode)")),a.lockdown_mode?React.createElement("button",{onClick:()=>o("lockdown_mode",!1),style:e.lockdownDeactivateBtn},"Deactivate"):React.createElement("button",{onClick:k,style:e.lockdownBtn,disabled:!a.enabled},"Activate")))),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},React.createElement(y,null)," Recent Activity"),React.createElement("div",{style:e.activityList},m.length===0?React.createElement("div",{style:e.empty},"No suspicious activity detected"):m.map((t,i)=>React.createElement("div",{key:i,style:e.activityItem},React.createElement("div",{style:e.activityIcon},t.type==="raid"?"‚ö†Ô∏è":t.type==="suspicious"?"üëÄ":"‚úÖ"),React.createElement("div",{style:e.activityContent},React.createElement("div",{style:e.activityText},t.message),React.createElement("div",{style:e.activityTime},new Date(t.timestamp).toLocaleString())),t.action&&React.createElement("div",{style:e.activityAction},React.createElement("span",{style:e.actionBadge},t.action)))))),React.createElement("div",{style:e.infoBox},React.createElement(u,{style:e.infoIcon}),React.createElement("div",{style:e.infoContent},React.createElement("strong",null,"How Raid Protection Works:"),React.createElement("ul",{style:e.infoList},React.createElement("li",null,"Monitors join rate (users per minute)"),React.createElement("li",null,"Checks account age and activity"),React.createElement("li",null,"Auto-kicks suspicious patterns"),React.createElement("li",null,"Activates lockdown during active raids"))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,backdropFilter:"blur(5px)"},panel:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",overflow:"hidden"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #1e1f22"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerIcon:{fontSize:"24px"},title:{margin:0,color:"#fff",fontSize:"24px",fontWeight:"600"},lockdownBadge:{backgroundColor:"#ed4245",color:"#fff",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"700",animation:"pulse 1.5s infinite"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"24px",padding:"8px",borderRadius:"4px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",padding:"20px",borderBottom:"1px solid #1e1f22"},statCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"16px",textAlign:"center"},statIcon:{fontSize:"32px",marginBottom:"8px"},statValue:{fontSize:"28px",fontWeight:"bold",color:"#fff",marginBottom:"4px"},statLabel:{fontSize:"13px",color:"#b9bbbe"},section:{padding:"20px",borderBottom:"1px solid #1e1f22",overflowY:"auto"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},sectionTitle:{color:"#fff",fontSize:"18px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},masterSwitch:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},switchSlider:{position:"relative",width:"48px",height:"24px",backgroundColor:"#72767d",borderRadius:"24px",transition:"0.3s"},switchLabel:{color:"#fff",fontSize:"14px",fontWeight:"600"},settings:{display:"flex",flexDirection:"column",gap:"20px"},setting:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#1e1f22",borderRadius:"8px"},settingInfo:{flex:1},settingLabel:{color:"#fff",fontSize:"15px",fontWeight:"600",marginBottom:"4px"},settingDesc:{color:"#b9bbbe",fontSize:"13px"},slider:{width:"200px",marginLeft:"20px"},select:{backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"6px",padding:"8px 12px",color:"#fff",fontSize:"14px",marginLeft:"20px",minWidth:"150px"},toggleSwitch:{position:"relative",width:"48px",height:"24px",marginLeft:"20px"},toggleSlider:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:"#72767d",transition:"0.3s",borderRadius:"24px"},lockdownBtn:{backgroundColor:"#ed4245",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",fontWeight:"600",marginLeft:"20px"},lockdownDeactivateBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",fontWeight:"600",marginLeft:"20px"},activityList:{display:"flex",flexDirection:"column",gap:"12px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px",fontSize:"14px"},activityItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#1e1f22",borderRadius:"6px"},activityIcon:{fontSize:"24px"},activityContent:{flex:1},activityText:{color:"#fff",fontSize:"14px",marginBottom:"4px"},activityTime:{color:"#72767d",fontSize:"12px"},activityAction:{marginLeft:"auto"},actionBadge:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",backgroundColor:"#5865f2",color:"#fff"},infoBox:{display:"flex",gap:"16px",padding:"20px",backgroundColor:"rgba(88, 101, 242, 0.1)",borderTop:"1px solid #5865f2"},infoIcon:{fontSize:"24px",color:"#5865f2",marginTop:"4px"},infoContent:{color:"#fff",fontSize:"14px"},infoList:{margin:"8px 0 0 0",paddingLeft:"20px",color:"#b9bbbe"}};export{T as default};
