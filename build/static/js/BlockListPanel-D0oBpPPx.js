import{r as l,ch as t}from"./react-core-B6hadH-M.js";import{g as w}from"./index-D_6pZib5.js";const $=({onClose:d})=>{const[u,N]=l.useState([]),[c,b]=l.useState(""),[n,E]=l.useState(""),[h,v]=l.useState(!0),s=w(),r=localStorage.getItem("access_token");l.useEffect(()=>{o()},[]);const o=async()=>{try{const a=await(await fetch(`${s}/blocks/list/`,{headers:{Authorization:`Bearer ${r}`}})).json();N(a.blocked_users||[])}catch(e){console.error("Error fetching blocked users:",e),t.error("âŒ Engelli kullanÄ±cÄ±lar yÃ¼klenemedi")}finally{v(!1)}},k=async()=>{if(!n.trim()){t.error("âŒ KullanÄ±cÄ± adÄ± gerekli");return}try{const e=await fetch(`${s}/blocks/block/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({username:n})}),a=await e.json();e.ok?(t.success("âœ… KullanÄ±cÄ± engellendi"),E(""),o()):t.error(`âŒ ${a.error||"KullanÄ±cÄ± engellenemedi"}`)}catch(e){console.error("Error blocking user:",e),t.error("âŒ Engelleme hatasÄ±")}},y=async e=>{try{const a=await fetch(`${s}/blocks/unblock/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:e})}),i=await a.json();a.ok?(t.success("âœ… Engel kaldÄ±rÄ±ldÄ±"),o()):t.error(`âŒ ${i.error||"Engel kaldÄ±rÄ±lamadÄ±"}`)}catch(a){console.error("Error unblocking user:",a),t.error("âŒ Engel kaldÄ±rma hatasÄ±")}},p=u.filter(e=>e.username.toLowerCase().includes(c.toLowerCase())||e.email?.toLowerCase().includes(c.toLowerCase())),z=e=>{const a=new Date,i=new Date(e),m=a-i,g=Math.floor(m/(1e3*60*60*24)),R=Math.floor(m/(1e3*60*60)),f=Math.floor(m/(1e3*60));return g>0?`${g} gÃ¼n Ã¶nce`:R>0?`${R} saat Ã¶nce`:f>0?`${f} dakika Ã¶nce`:"Az Ã¶nce"};return h?React.createElement("div",{className:"blocklist-overlay"},React.createElement("div",{className:"blocklist-panel"},React.createElement("div",{className:"loading-state"},React.createElement("div",{className:"spinner"}),React.createElement("span",null,"YÃ¼kleniyor...")))):React.createElement("div",{className:"blocklist-overlay",onClick:d},React.createElement("div",{className:"blocklist-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"blocklist-header"},React.createElement("h2",null,"ğŸš« Engelli KullanÄ±cÄ±lar"),React.createElement("button",{className:"close-btn",onClick:d},"âœ•")),React.createElement("div",{className:"blocklist-stats"},React.createElement("div",{className:"stat-card"},React.createElement("span",{className:"stat-icon"},"ğŸš«"),React.createElement("div",{className:"stat-info"},React.createElement("span",{className:"stat-value"},u.length),React.createElement("span",{className:"stat-label"},"Engelli KullanÄ±cÄ±")))),React.createElement("div",{className:"add-user-section"},React.createElement("h3",null,"KullanÄ±cÄ± Engelle"),React.createElement("div",{className:"add-user-form"},React.createElement("input",{type:"text",placeholder:"KullanÄ±cÄ± adÄ±",value:n,onChange:e=>E(e.target.value),onKeyPress:e=>e.key==="Enter"&&k(),className:"user-input"}),React.createElement("button",{className:"block-btn",onClick:k},"ğŸš« Engelle")),React.createElement("p",{className:"info-text"},"Engellenen kullanÄ±cÄ±lar size mesaj gÃ¶nderemez ve sizi gÃ¶remez")),React.createElement("div",{className:"search-section"},React.createElement("input",{type:"text",placeholder:"ğŸ” Engelli kullanÄ±cÄ±larda ara...",value:c,onChange:e=>b(e.target.value),className:"search-input"})),React.createElement("div",{className:"blocklist-content"},p.length===0?React.createElement("div",{className:"empty-state"},React.createElement("span",{className:"empty-icon"},"ğŸ‰"),React.createElement("h3",null,"Engelli kullanÄ±cÄ± yok"),React.createElement("p",null,c?"Arama sonucu bulunamadÄ±":"HenÃ¼z kimseyi engellemediniz")):React.createElement("div",{className:"blocked-users-list"},p.map(e=>React.createElement("div",{key:e.id,className:"blocked-user-card"},React.createElement("div",{className:"user-avatar"},e.avatar?React.createElement("img",{src:e.avatar,alt:e.username}):React.createElement("div",{className:"default-avatar"},e.username.charAt(0).toUpperCase())),React.createElement("div",{className:"user-info"},React.createElement("div",{className:"user-name"},React.createElement("span",{className:"username"},e.username),React.createElement("span",{className:"user-tag"},"#",e.discriminator||"0000")),e.email&&React.createElement("span",{className:"user-email"},e.email),React.createElement("span",{className:"blocked-time"},"Engellendi: ",z(e.blocked_at))),React.createElement("div",{className:"user-actions"},React.createElement("button",{className:"unblock-btn",onClick:()=>y(e.id)},"âœ“ Engeli KaldÄ±r")))))),React.createElement("div",{className:"info-banner"},React.createElement("span",{className:"info-icon"},"â„¹ï¸"),React.createElement("p",null,"Engellenen kullanÄ±cÄ±lar size DM gÃ¶nderemez, profilinizi gÃ¶remez ve paylaÅŸÄ±mlarÄ±nÄ±zla etkileÅŸime geÃ§emez. GruplanmÄ±ÅŸ serverlarda gÃ¶rÃ¼nÃ¼rlÃ¼k sÄ±nÄ±rlÄ±dÄ±r."))))};export{$ as default};
