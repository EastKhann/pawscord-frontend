import{r as a,l as y}from"./react-core-B6hadH-M.js";const u=({parentMessage:t,onClose:p,apiBaseUrl:o,token:l})=>{const[n,m]=a.useState([]),[r,c]=a.useState(""),[f,i]=a.useState(!0);a.useEffect(()=>{t?.id&&d()},[t?.id]);const d=async()=>{i(!0);try{const x=await(await fetch(`${o}/messages/${t.id}/thread/`,{headers:{Authorization:`Bearer ${l}`}})).json();m(x.replies||[])}catch(e){console.error("Thread fetch error:",e)}i(!1)},s=async()=>{if(r.trim())try{(await fetch(`${o}/messages/${t.id}/reply/`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({content:r})})).ok&&(c(""),d())}catch(e){console.error("Reply error:",e)}};return t?React.createElement("div",{style:{position:"fixed",right:0,top:0,bottom:0,width:"420px",background:"#36393f",boxShadow:"-2px 0 8px rgba(0,0,0,0.4)",zIndex:100,display:"flex",flexDirection:"column"}},React.createElement("div",{style:{padding:"16px",borderBottom:"1px solid #202225",display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("h3",{style:{margin:0,color:"#fff"}},"ðŸ’¬ Thread"),React.createElement("button",{onClick:p,style:{background:"transparent",border:"none",color:"#fff",cursor:"pointer",fontSize:"18px"}},React.createElement(y,null))),React.createElement("div",{style:{padding:"16px",background:"#2f3136",borderBottom:"1px solid #202225"}},React.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"}},React.createElement("strong",{style:{color:"#fff"}},t.username||t.sender?.username),React.createElement("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#72767d"}},new Date(t.timestamp).toLocaleString("tr-TR"))),React.createElement("p",{style:{margin:0,color:"#dcddde"}},t.content),React.createElement("small",{style:{color:"#72767d",fontSize:"12px"}},n.length," yanÄ±t")),React.createElement("div",{style:{flex:1,overflowY:"auto",padding:"16px"}},f?React.createElement("div",{style:{textAlign:"center",color:"#aaa",padding:"20px"}},"YÃ¼kleniyor..."):n.length===0?React.createElement("div",{style:{textAlign:"center",color:"#aaa",padding:"20px"}},"HenÃ¼z yanÄ±t yok"):n.map(e=>React.createElement("div",{key:e.id,style:{marginBottom:"16px",padding:"12px",background:"#40444b",borderRadius:"8px"}},React.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"}},React.createElement("strong",{style:{color:"#fff"}},e.username||e.sender?.username),React.createElement("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#72767d"}},new Date(e.timestamp).toLocaleString("tr-TR"))),React.createElement("p",{style:{margin:0,color:"#dcddde"}},e.content)))),React.createElement("div",{style:{padding:"16px",borderTop:"1px solid #202225"}},React.createElement("div",{style:{display:"flex",gap:"8px"}},React.createElement("input",{type:"text",placeholder:"YanÄ±t yaz...",value:r,onChange:e=>c(e.target.value),onKeyPress:e=>e.key==="Enter"&&s(),style:{flex:1,padding:"10px",background:"#40444b",border:"none",borderRadius:"6px",color:"#fff"}}),React.createElement("button",{onClick:s,disabled:!r.trim(),style:{padding:"10px 20px",background:r.trim()?"#5865f2":"#4f545c",border:"none",borderRadius:"6px",color:"#fff",cursor:r.trim()?"pointer":"not-allowed",fontWeight:600}},"GÃ¶nder")))):null};export{u as default};
