var P=Object.defineProperty;var n=(o,u)=>P(o,"name",{value:u,configurable:!0});import{r as l,j as e}from"./react-core-Djgtqrmb.js";import{s as $}from"./index-m2zCEI_Z.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BW7dxHkX.js";import"./ui-vendor-IhB9Znpc.js";const R={early_supporter:{name:"Early Supporter",icon:"ðŸŒŸ",color:"#FFD700"},premium:{name:"Premium",icon:"ðŸ’Ž",color:"#a855f7"},verified:{name:"Verified",icon:"âœ“",color:"#5865F2"},developer:{name:"Developer",icon:"ðŸ› ï¸",color:"#3b82f6"},bug_hunter:{name:"Bug Hunter",icon:"ðŸ›",color:"#22c55e"},top_contributor:{name:"Top Contributor",icon:"ðŸ†",color:"#f59e0b"},server_owner:{name:"Server Owner",icon:"ðŸ‘‘",color:"#ef4444"},moderator:{name:"Moderator",icon:"ðŸ›¡ï¸",color:"#10b981"},artist:{name:"Artist",icon:"ðŸŽ¨",color:"#ec4899"},streamer:{name:"Streamer",icon:"ðŸ“º",color:"#8b5cf6"}};function E(o,u){const[s,a]=l.useState(null),[r,v]=l.useState([]),[k,b]=l.useState([]),[f,d]=l.useState(!0),[m,x]=l.useState(!1),[T,D]=l.useState("appearance"),[y,g]=l.useState({banner:"",banner_color:"#5865F2",theme:"default",bio:"",links:[]}),[S,_]=l.useState([]),[N,w]=l.useState({name:"",url:""}),p=$,C=l.useCallback(async()=>{try{const t=localStorage.getItem("access_token"),[i,h,j]=await Promise.all([fetch(`${p}/profile/card/`,{headers:{Authorization:`Bearer ${t}`}}),fetch(`${p}/profile/themes/`,{headers:{Authorization:`Bearer ${t}`}}),fetch(`${p}/profile/badges/`,{headers:{Authorization:`Bearer ${t}`}})]);if(i.ok){const c=await i.json();a(c),g({banner:c.banner||"",banner_color:c.banner_color||"#5865F2",theme:c.theme||"default",bio:c.bio||"",links:c.links||[]}),_(c.badges||[])}if(h.ok){const c=await h.json();v(c.themes||[])}if(j.ok){const c=await j.json();b(c.badges||[])}}catch{}d(!1)},[p]),A=n(async()=>{x(!0);try{const t=localStorage.getItem("access_token"),i=await fetch(`${p}/profile/card/update/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(y)});await fetch(`${p}/profile/badges/set/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({badges:S})}),i.ok&&(u?.(),o())}catch{}x(!1)},"handleSave"),B=n(async()=>{if(N.url)try{const t=localStorage.getItem("access_token"),i=await fetch(`${p}/profile/links/add/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(N)});if(i.ok){const h=await i.json();g(j=>({...j,links:h.links})),w({name:"",url:""})}}catch{}},"handleAddLink"),L=n(async t=>{try{const i=localStorage.getItem("access_token"),h=await fetch(`${p}/profile/links/${t}/remove/`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}});if(h.ok){const j=await h.json();g(c=>({...c,links:j.links}))}}catch{}},"handleRemoveLink"),z=n(t=>{_(i=>i.includes(t)?i.filter(h=>h!==t):i.length>=3?i:[...i,t])},"toggleBadge");return l.useEffect(()=>{C()},[C]),{profile:s,themes:r,badges:k,loading:f,saving:m,activeTab:T,setActiveTab:D,formData:y,setFormData:g,selectedBadges:S,newLink:N,setNewLink:w,handleSave:A,handleAddLink:B,handleRemoveLink:L,toggleBadge:z}}n(E,"useProfileCardEditor");const X=n(({onClose:o,onSave:u})=>{const s=E(o,u);return s.loading?e.jsx("div",{className:"profile-editor-modal",children:e.jsx("div",{className:"editor-loading",children:e.jsx("div",{className:"loading-spinner"})})}):e.jsx("div",{className:"profile-editor-overlay",onClick:n(a=>a.target===a.currentTarget&&o(),"onClick"),children:e.jsxs("div",{className:"profile-editor-modal",children:[e.jsxs("div",{className:"editor-header",children:[e.jsxs("h2",{children:["ðŸŽ¨"," Profil KartÄ± DÃ¼zenle"]}),e.jsx("button",{className:"close-btn",onClick:o,children:"Ã—"})]}),e.jsxs("div",{className:"editor-tabs",children:[e.jsxs("button",{className:s.activeTab==="appearance"?"active":"",onClick:n(()=>s.setActiveTab("appearance"),"onClick"),children:["ðŸŽ¨"," GÃ¶rÃ¼nÃ¼m"]}),e.jsxs("button",{className:s.activeTab==="badges"?"active":"",onClick:n(()=>s.setActiveTab("badges"),"onClick"),children:["ðŸ…"," Rozetler"]}),e.jsxs("button",{className:s.activeTab==="links"?"active":"",onClick:n(()=>s.setActiveTab("links"),"onClick"),children:["ðŸ”—"," BaÄŸlantÄ±lar"]})]}),e.jsxs("div",{className:"editor-content",children:[s.activeTab==="appearance"&&e.jsxs("div",{className:"appearance-tab",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Banner URL"}),e.jsx("input",{type:"url",placeholder:"https://...",value:s.formData.banner,onChange:n(a=>s.setFormData(r=>({...r,banner:a.target.value})),"onChange")})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Banner Rengi (resim yoksa)"}),e.jsxs("div",{className:"color-picker",children:[e.jsx("input",{type:"color",value:s.formData.banner_color,onChange:n(a=>s.setFormData(r=>({...r,banner_color:a.target.value})),"onChange")}),e.jsx("span",{children:s.formData.banner_color})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tema"}),e.jsx("div",{className:"theme-grid",children:s.themes.map(a=>e.jsxs("div",{className:`theme-option ${s.formData.theme===a.id?"selected":""}`,onClick:n(()=>s.setFormData(r=>({...r,theme:a.id})),"onClick"),style:{background:`linear-gradient(135deg, ${a.primary}, ${a.secondary})`},children:[e.jsx("span",{className:"theme-name",children:a.id}),e.jsx("div",{className:"theme-colors",children:e.jsx("span",{style:{backgroundColor:a.accent}})})]},a.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Biyografi"}),e.jsx("textarea",{placeholder:"Kendiniz hakkÄ±nda bir ÅŸeyler yazÄ±n...",value:s.formData.bio,onChange:n(a=>s.setFormData(r=>({...r,bio:a.target.value.slice(0,500)})),"onChange"),rows:4,maxLength:500}),e.jsxs("span",{className:"char-count",children:[s.formData.bio.length,"/500"]})]})]}),s.activeTab==="badges"&&e.jsxs("div",{className:"badges-tab",children:[e.jsx("p",{className:"badges-hint",children:"Profilinizde gÃ¶rÃ¼ntÃ¼lenecek en fazla 3 rozet seÃ§in"}),e.jsx("div",{className:"badges-grid",children:s.badges.map(a=>e.jsxs("div",{className:`badge-option ${a.owned?"":"locked"} ${s.selectedBadges.includes(a.id)?"selected":""}`,onClick:n(()=>a.owned&&s.toggleBadge(a.id),"onClick"),children:[e.jsx("span",{className:"badge-icon",style:{backgroundColor:a.color},children:a.icon}),e.jsx("span",{className:"badge-name",children:a.name}),!a.owned&&e.jsx("span",{className:"lock-icon",children:"ðŸ”’"})]},a.id))})]}),s.activeTab==="links"&&e.jsxs("div",{className:"links-tab",children:[e.jsx("p",{className:"links-hint",children:"En fazla 5 baÄŸlantÄ± ekleyebilirsiniz"}),e.jsx("div",{className:"current-links",children:s.formData.links.map((a,r)=>e.jsxs("div",{className:"link-row",children:[e.jsx("span",{className:"link-icon",children:a.icon}),e.jsx("span",{className:"link-name",children:a.name}),e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"link-url",children:[a.url.slice(0,40),"..."]}),e.jsx("button",{className:"remove-link",onClick:n(()=>s.handleRemoveLink(r),"onClick"),children:"Ã—"})]},r))}),s.formData.links.length<5&&e.jsxs("div",{className:"add-link-form",children:[e.jsx("input",{type:"text",placeholder:"Ä°sim (opsiyonel)",value:s.newLink.name,onChange:n(a=>s.setNewLink(r=>({...r,name:a.target.value})),"onChange")}),e.jsx("input",{type:"url",placeholder:"URL",value:s.newLink.url,onChange:n(a=>s.setNewLink(r=>({...r,url:a.target.value})),"onChange")}),e.jsx("button",{onClick:s.handleAddLink,children:"Ekle"})]})]})]}),e.jsxs("div",{className:"editor-preview",children:[e.jsx("h4",{children:"Ã–nizleme"}),e.jsx(F,{username:s.profile?.username,compact:!0})]}),e.jsxs("div",{className:"editor-footer",children:[e.jsx("button",{className:"cancel-btn",onClick:o,children:"Ä°ptal"}),e.jsx("button",{className:"save-btn",onClick:s.handleSave,disabled:s.saving,children:s.saving?"Kaydediliyor...":"Kaydet"})]})]})})},"ProfileCardEditor"),F=n(({username:o,onEdit:u,compact:s=!1})=>{const[a,r]=l.useState(null),[v,k]=l.useState(!0),b=$;if(l.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("access_token"),m=o?`${b}/profile/card/${o}/`:`${b}/profile/card/`,x=await fetch(m,{headers:{Authorization:`Bearer ${d}`}});x.ok&&r(await x.json())}catch{}k(!1)})()},[o,b]),v)return e.jsx("div",{className:"profile-card loading",children:e.jsx("div",{className:"loading-spinner"})});if(!a)return e.jsx("div",{className:"profile-card error",children:"Profil yÃ¼klenemedi"});const f=a.custom_colors||a.theme_colors;return e.jsxs("div",{className:`profile-card ${s?"compact":""}`,style:{"--primary":f.primary,"--secondary":f.secondary,"--accent":f.accent,"--bg":f.background},children:[e.jsx("div",{className:"card-banner",style:{backgroundImage:a.banner?`url(${a.banner})`:void 0,backgroundColor:a.banner_color},children:u&&e.jsx("button",{className:"edit-btn",onClick:u,children:"âœï¸"})}),e.jsxs("div",{className:"card-avatar",children:[e.jsx("img",{src:a.avatar||"/default-avatar.png",alt:""}),a.status_text&&e.jsx("div",{className:"status-indicator",title:a.status_text,children:a.status_text.slice(0,1)})]}),e.jsxs("div",{className:"card-content",children:[a.badges?.length>0&&e.jsx("div",{className:"card-badges",children:a.badges.map(d=>{const m=R[d];return m?e.jsx("span",{className:"badge",style:{backgroundColor:m.color},title:m.name,children:m.icon},d):null})}),e.jsx("h2",{className:"card-name",children:a.display_name||a.username}),e.jsxs("p",{className:"card-username",children:["@",a.username]}),a.bio&&e.jsx("p",{className:"card-bio",children:a.bio}),e.jsxs("div",{className:"card-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsxs("span",{className:"stat-value",children:["Lv.",a.level]}),e.jsx("span",{className:"stat-label",children:"Seviye"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:a.xp?.toLocaleString()}),e.jsx("span",{className:"stat-label",children:"XP"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:new Date(a.created_at).toLocaleDateString("tr-TR",{month:"short",year:"numeric"})}),e.jsx("span",{className:"stat-label",children:"KatÄ±lÄ±m"})]})]}),a.links?.length>0&&e.jsx("div",{className:"card-links",children:a.links.map((d,m)=>e.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"link-item",title:d.name,children:d.icon},m))}),a.spotify_connected&&e.jsxs("div",{className:"spotify-badge",children:["ðŸŽµ"," Spotify BaÄŸlÄ±"]}),a.is_premium&&e.jsxs("div",{className:"premium-badge",children:["ðŸ’Ž"," Premium"]})]})]})},"ProfileCard");export{F as ProfileCard,X as ProfileCardEditor,F as default};
