var k=Object.defineProperty;var o=(r,n)=>k(r,"name",{value:n,configurable:!0});import{r as a,j as e}from"./react-core-Djgtqrmb.js";import{t as i}from"./index-Dy0QUtja.js";import{an as w,a2 as p,$ as K,a0 as C,aV as S,f as v}from"./icons-vendor-BW7dxHkX.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const $=o(({fetchWithAuth:r,apiBaseUrl:n})=>{const[l,x]=a.useState([]),[y,b]=a.useState(!0),[c,g]=a.useState({});a.useEffect(()=>{d()},[]);const d=o(async()=>{try{const t=await r(`${n}/apikeys/list/`);if(t.ok){const s=await t.json();x(s)}}catch{}finally{b(!1)}},"loadKeys"),u=o(async()=>{const t=prompt("API Key name:");if(t)try{const s=await r(`${n}/apikeys/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(s.ok){const h=await s.json();i.success(`✅ Key created!

Key: ${h.key}

⚠️ Save this! It won't be shown again.`),d()}}catch{i.error("❌ Failed to create key")}},"createKey"),f=o(async t=>{if(confirm("Delete this API key?"))try{(await r(`${n}/apikeys/${t}/delete/`,{method:"DELETE"})).ok&&d()}catch{i.error("❌ Failed to delete key")}},"deleteKey"),m=o(t=>{navigator.clipboard.writeText(t),i.success("✅ Copied to clipboard!")},"copyKey"),j=o(t=>t?t.substring(0,8)+"•".repeat(24):"","maskKey");return y?e.jsx("div",{style:{padding:"20px",color:"#b9bbbe"},children:"Loading..."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,color:"#dcddde"},children:"API Keys"}),e.jsx("p",{style:{margin:"5px 0 0 0",color:"#72767d",fontSize:"13px"},children:"Create and manage API keys for external integrations"})]}),e.jsxs("button",{onClick:u,style:{padding:"8px 16px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"bold"},children:[e.jsx(w,{})," New Key"]})]}),l.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#72767d",backgroundColor:"#2f3136",borderRadius:"8px"},children:[e.jsx(p,{style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),e.jsx("p",{children:"No API keys yet"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map(t=>e.jsx("div",{style:{padding:"16px",backgroundColor:"#2f3136",borderRadius:"8px",border:"1px solid #40444b"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(p,{style:{color:"#5865f2"}}),e.jsx("span",{style:{color:"#dcddde",fontWeight:"bold"},children:t.name})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",backgroundColor:"#1e1f22",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#b9bbbe"},children:[e.jsx("span",{children:c[t.id]?t.key:j(t.key)}),e.jsx("button",{onClick:o(()=>g(s=>({...s,[t.id]:!s[t.id]})),"onClick"),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"},children:c[t.id]?e.jsx(K,{}):e.jsx(C,{})}),e.jsx("button",{onClick:o(()=>m(t.key),"onClick"),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"},children:e.jsx(S,{})})]}),e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#72767d"},children:["Created: ",new Date(t.created_at).toLocaleDateString(),t.last_used&&e.jsxs(e.Fragment,{children:[" • Last used: ",new Date(t.last_used).toLocaleDateString()]})]})]}),e.jsx("button",{onClick:o(()=>f(t.id),"onClick"),style:{background:"none",border:"none",color:"#f04747",cursor:"pointer",padding:"8px",borderRadius:"4px"},title:"Delete key",children:e.jsx(v,{})})]})},t.id))}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(250, 166, 26, 0.1)",borderLeft:"3px solid #faa61a",borderRadius:"4px",fontSize:"13px",color:"#dcddde"},children:["⚠️ ",e.jsx("strong",{children:"Security:"})," Keep your API keys secret! Anyone with your key can access your account."]})]})},"APIKeysPanel");export{$ as default};
