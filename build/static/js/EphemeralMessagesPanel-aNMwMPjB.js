var v=Object.defineProperty;var s=(a,n)=>v(a,"name",{value:n,configurable:!0});import{r as p,j as e}from"./react-core-Djgtqrmb.js";import{z as S,a as C,bo as k,bp as z}from"./icons-vendor-BW7dxHkX.js";import{t as r}from"./index-BT6pEMKq.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const O=s(({fetchWithAuth:a,apiBaseUrl:n,onClose:b,roomSlug:i})=>{const[l,m]=p.useState(null),[h,x]=p.useState(!1),[d,f]=p.useState(3600),u=[{value:300,label:"5 minutes"},{value:600,label:"10 minutes"},{value:1800,label:"30 minutes"},{value:3600,label:"1 hour"},{value:7200,label:"2 hours"},{value:14400,label:"4 hours"},{value:28800,label:"8 hours"},{value:86400,label:"24 hours"},{value:604800,label:"7 days"}];p.useEffect(()=>{g()},[i]);const g=s(async()=>{x(!0);try{const c=await(await a(`${n}/rooms/${i}/ephemeral/`)).json();m(c),c.ttl&&f(c.ttl)}catch{r.error("Failed to load ephemeral settings")}finally{x(!1)}},"fetchSettings"),y=s(async()=>{try{await a(`${n}/rooms/${i}/ephemeral/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!l?.enabled,ttl:d})}),r.success(`Ephemeral messages ${l?.enabled?"disabled":"enabled"}`),g()}catch{r.error("Failed to update settings")}},"toggleEphemeral"),j=s(async o=>{if(f(o),l?.enabled)try{await a(`${n}/rooms/${i}/ephemeral/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!0,ttl:o})}),r.success("Auto-delete time updated"),g()}catch{r.error("Failed to update TTL")}},"updateTTL");return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(S,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Auto-Delete Messages"})]}),e.jsx("button",{onClick:b,style:t.closeButton,children:e.jsx(C,{})})]}),e.jsx("div",{style:t.content,children:h?e.jsx("div",{style:t.loading,children:"Loading settings..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.toggleSection,children:[e.jsxs("div",{children:[e.jsx("div",{style:t.toggleLabel,children:"Enable Auto-Delete"}),e.jsx("div",{style:t.toggleDescription,children:"Messages will automatically delete after the specified time"})]}),e.jsx("button",{onClick:y,style:t.toggleButton,children:l?.enabled?e.jsx(k,{style:{fontSize:"32px",color:"#43b581"}}):e.jsx(z,{style:{fontSize:"32px",color:"#99aab5"}})})]}),l?.enabled&&e.jsxs("div",{style:t.ttlSection,children:[e.jsx("label",{style:t.label,children:"Auto-Delete After"}),e.jsx("div",{style:t.optionsGrid,children:u.map(o=>e.jsx("button",{onClick:s(()=>j(o.value),"onClick"),style:{...t.optionButton,...d===o.value&&t.optionButtonActive},children:o.label},o.value))}),e.jsxs("div",{style:t.info,children:["⏱️ Current setting: Messages auto-delete after"," ",e.jsx("strong",{children:u.find(o=>o.value===d)?.label||`${d} seconds`})]})]}),!l?.enabled&&e.jsx("div",{style:t.disabledMessage,children:"Ephemeral messages are currently disabled. Enable them to automatically delete messages after a set time period."})]})})]})})},"EphemeralMessagesPanel"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},toggleSection:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},toggleLabel:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},toggleDescription:{fontSize:"13px",color:"#99aab5"},toggleButton:{background:"none",border:"none",cursor:"pointer",padding:"5px"},ttlSection:{display:"flex",flexDirection:"column",gap:"16px"},label:{fontSize:"14px",fontWeight:"600",color:"#dcddde"},optionsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},optionButton:{padding:"12px",backgroundColor:"#2c2f33",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",transition:"background-color 0.2s"},optionButtonActive:{backgroundColor:"#5865f2"},info:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"12px",fontSize:"14px",color:"#dcddde",textAlign:"center"},disabledMessage:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"20px",fontSize:"14px",color:"#99aab5",textAlign:"center"}};export{O as default};
