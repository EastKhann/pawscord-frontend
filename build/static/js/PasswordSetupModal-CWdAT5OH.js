import{r as l,V as F,cX as x,y as i,aw as E,ax as R,U as Z}from"./react-core-B6hadH-M.js";import{t as s}from"./index-D_6pZib5.js";const G=({onClose:d,apiBaseUrl:h})=>{const[e,b]=l.useState(""),[r,g]=l.useState(""),[o,y]=l.useState(!1),[m,w]=l.useState(!1),[u,p]=l.useState(!1),[k,N]=l.useState(!1),v=()=>{if(e.length<8)return s.error("≈ûifre en az 8 karakter olmalƒ±dƒ±r"),!1;if(e!==r)return s.error("≈ûifreler e≈üle≈ümiyor"),!1;const t=/[A-Z]/.test(e),a=/[a-z]/.test(e),c=/[0-9]/.test(e);return!t||!a||!c?(s.error("≈ûifre en az bir b√ºy√ºk harf, bir k√º√ß√ºk harf ve bir rakam i√ßermelidir"),!1):!0},S=async t=>{if(t.preventDefault(),!!v()){p(!0);try{const a=localStorage.getItem("access_token"),c=await fetch(`${h}/users/change_password/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({new_password:e})});if(c.ok)N(!0),s.success("‚úÖ ≈ûifre ba≈üarƒ±yla belirlendi!"),setTimeout(()=>{d()},2e3);else{const A=await c.json();s.error(A.error||"≈ûifre belirlenemedi")}}catch(a){console.error("Password setup error:",a),s.error("Bir hata olu≈ütu. L√ºtfen tekrar deneyin.")}finally{p(!1)}}},C=()=>{s.info("≈ûifreyi daha sonra profil ayarlarƒ±ndan belirleyebilirsin"),d()},z=()=>{let t=0;return e.length>=8&&t++,e.length>=12&&t++,/[A-Z]/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t},f=["#f04747","#faa61a","#faa61a","#43b581","#43b581","#43b581"],P=["√áok Zayƒ±f","Zayƒ±f","Orta","ƒ∞yi","G√º√ßl√º","√áok G√º√ßl√º"],n=z();return k?React.createElement("div",{className:"password-setup-overlay"},React.createElement("div",{className:"password-setup-modal success"},React.createElement("div",{className:"success-icon"},React.createElement(F,null)),React.createElement("h2",null,"≈ûifre Belirlendi!"),React.createElement("p",null,"Artƒ±k e-posta ve ≈üifrenle de giri≈ü yapabilirsin."))):React.createElement("div",{className:"password-setup-overlay"},React.createElement("div",{className:"password-setup-modal"},React.createElement("div",{className:"password-setup-header"},React.createElement("div",{className:"header-icon"},React.createElement(x,{className:"google-icon"}),React.createElement(i,{className:"lock-icon"})),React.createElement("h2",null,"≈ûifre Belirle"),React.createElement("p",null,"Google ile giri≈ü yaptƒ±n! Hesabƒ±nƒ± daha g√ºvenli hale getirmek i√ßin bir ≈üifre belirleyebilirsin.")),React.createElement("form",{onSubmit:S,className:"password-setup-form"},React.createElement("div",{className:"input-group"},React.createElement("label",null,"Yeni ≈ûifre"),React.createElement("div",{className:"password-input-wrapper"},React.createElement(i,{className:"input-icon"}),React.createElement("input",{type:o?"text":"password",value:e,onChange:t=>b(t.target.value),placeholder:"En az 8 karakter",required:!0,minLength:8}),React.createElement("button",{type:"button",className:"toggle-visibility",onClick:()=>y(!o)},o?React.createElement(E,null):React.createElement(R,null))),e&&React.createElement("div",{className:"password-strength"},React.createElement("div",{className:"strength-bars"},[...Array(6)].map((t,a)=>React.createElement("div",{key:a,className:`strength-bar ${a<n?"active":""}`,style:{backgroundColor:a<n?f[n-1]:void 0}}))),React.createElement("span",{style:{color:f[n-1]||"#72767d"}},P[n-1]||"≈ûifre girin"))),React.createElement("div",{className:"input-group"},React.createElement("label",null,"≈ûifre Tekrar"),React.createElement("div",{className:"password-input-wrapper"},React.createElement(i,{className:"input-icon"}),React.createElement("input",{type:m?"text":"password",value:r,onChange:t=>g(t.target.value),placeholder:"≈ûifreyi tekrar girin",required:!0}),React.createElement("button",{type:"button",className:"toggle-visibility",onClick:()=>w(!m)},m?React.createElement(E,null):React.createElement(R,null))),r&&e!==r&&React.createElement("span",{className:"error-text"},"≈ûifreler e≈üle≈ümiyor"),r&&e===r&&React.createElement("span",{className:"success-text"},"‚úì ≈ûifreler e≈üle≈üiyor")),React.createElement("div",{className:"password-requirements"},React.createElement("p",null,"≈ûifre gereksinimleri:"),React.createElement("ul",null,React.createElement("li",{className:e.length>=8?"met":""},"En az 8 karakter"),React.createElement("li",{className:/[A-Z]/.test(e)?"met":""},"En az bir b√ºy√ºk harf (A-Z)"),React.createElement("li",{className:/[a-z]/.test(e)?"met":""},"En az bir k√º√ß√ºk harf (a-z)"),React.createElement("li",{className:/[0-9]/.test(e)?"met":""},"En az bir rakam (0-9)"))),React.createElement("div",{className:"button-group"},React.createElement("button",{type:"submit",className:"submit-btn",disabled:u||e.length<8||e!==r},u?React.createElement(React.Fragment,null,React.createElement(Z,{className:"spin"}),"Kaydediliyor..."):React.createElement(React.Fragment,null,React.createElement(i,null),"≈ûifreyi Belirle")),React.createElement("button",{type:"button",className:"skip-btn",onClick:C,disabled:u},"Daha Sonra"))),React.createElement("div",{className:"password-setup-footer"},React.createElement("p",null,"üí° ≈ûifreyi belirlersen hem Google hem de e-posta/≈üifre ile giri≈ü yapabilirsin."))))};export{G as default};
