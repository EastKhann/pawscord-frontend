import{r as t,d as e,aO as m,i as $,T as u,o as x,Y as _,c0 as j,aS as h,G as B,as as G,c9 as P}from"./react-core-DrOm_csO.js";const T=({userId:b,username:d,onClose:E,onNavigateToUser:v,onNavigateToServer:N})=>{const[s,p]=t.useState("friends"),[r,i]=t.useState([]),[c,o]=t.useState([]),[y,f]=t.useState(!0),[l,S]=t.useState(""),F=localStorage.getItem("access_token");t.useEffect(()=>{C()},[b]);const C=async()=>{f(!0);try{const a=await fetch(`/api/users/${d}/mutuals/`,{headers:{Authorization:`Bearer ${F}`}});if(a.ok){const n=await a.json();i(n.friends||[]),o(n.servers||[])}else i([]),o([])}catch{i([]),o([])}f(!1)},w=()=>l?r.filter(a=>a.username.toLowerCase().includes(l.toLowerCase())):r,M=()=>l?c.filter(a=>a.name.toLowerCase().includes(l.toLowerCase())):c,O=a=>({online:"#4caf50",idle:"#ffc107",dnd:"#f44336",offline:"#666"})[a]||"#666",A=a=>a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString(),L=a=>{P.info(`${a.username} ile sohbet başlatılıyor...`)},g=w(),k=M();return e.createElement("div",{className:"mutuals-overlay",onClick:a=>a.target.className==="mutuals-overlay"&&E()},e.createElement("div",{className:"mutuals-panel"},e.createElement("div",{className:"panel-header"},e.createElement("h2",null,e.createElement(m,null)," Ortak Bağlantılar"),e.createElement("span",{className:"target-user"},"@",d),e.createElement("button",{className:"close-btn",onClick:E},e.createElement($,null))),e.createElement("div",{className:"tabs"},e.createElement("button",{className:`tab ${s==="friends"?"active":""}`,onClick:()=>p("friends")},e.createElement(m,null),e.createElement("span",null,"Ortak Arkadaşlar"),e.createElement("span",{className:"count"},r.length)),e.createElement("button",{className:`tab ${s==="servers"?"active":""}`,onClick:()=>p("servers")},e.createElement(u,null),e.createElement("span",null,"Ortak Sunucular"),e.createElement("span",{className:"count"},c.length))),e.createElement("div",{className:"search-bar"},e.createElement(x,null),e.createElement("input",{type:"text",placeholder:s==="friends"?"Arkadaş ara...":"Sunucu ara...",value:l,onChange:a=>S(a.target.value)})),e.createElement("div",{className:"content"},y?e.createElement("div",{className:"loading"},"Yükleniyor..."):s==="friends"?e.createElement("div",{className:"friends-list"},g.length===0?e.createElement("div",{className:"empty-state"},e.createElement(m,null),e.createElement("p",null,"Ortak arkadaş bulunamadı")):g.map(a=>e.createElement("div",{key:a.id,className:"friend-item",onClick:()=>v&&v(a.id)},e.createElement("div",{className:"friend-avatar"},a.avatar?e.createElement("img",{src:a.avatar,alt:""}):e.createElement(_,null),e.createElement("span",{className:"status-dot",style:{background:O(a.status)}})),e.createElement("div",{className:"friend-info"},e.createElement("span",{className:"friend-name"},a.username),a.activity&&e.createElement("span",{className:"friend-activity"},a.activity)),e.createElement("div",{className:"friend-actions"},e.createElement("button",{className:"action-btn message",onClick:n=>{n.stopPropagation(),L(a)},title:"Mesaj Gönder"},e.createElement(j,null)))))):e.createElement("div",{className:"servers-list"},k.length===0?e.createElement("div",{className:"empty-state"},e.createElement(u,null),e.createElement("p",null,"Ortak sunucu bulunamadı")):k.map(a=>e.createElement("div",{key:a.id,className:"server-item",onClick:()=>N&&N(a.id)},e.createElement("div",{className:"server-icon"},a.icon?e.createElement("img",{src:a.icon,alt:""}):e.createElement("span",null,a.name.charAt(0))),e.createElement("div",{className:"server-info"},e.createElement("div",{className:"server-name-row"},e.createElement("span",{className:"server-name"},a.name),a.is_owner&&e.createElement(h,{className:"owner-badge"})),e.createElement("div",{className:"server-meta"},e.createElement("span",{className:"member-count"},e.createElement(B,null)," ",A(a.member_count)),a.role&&e.createElement("span",{className:`role-badge ${a.role.toLowerCase()}`},a.role==="Owner"&&e.createElement(h,null),a.role==="Moderator"&&e.createElement(G,null),a.role))))))),e.createElement("div",{className:"summary"},e.createElement("span",null,e.createElement(m,null)," ",r.length," ortak arkadaş"),e.createElement("span",null,e.createElement(u,null)," ",c.length," ortak sunucu"))))};export{T as default};
