import{r as n,d as e,J as p,i as R,H as B,K as I,G as z,bk as M}from"./react-core-DrOm_csO.js";const q=({onClose:b,currentUser:E,ws:D,channelId:L,fetchWithAuth:A,apiBaseUrl:F,roomSlug:W})=>{const[i,u]=n.useState(!1),[m,v]=n.useState([]),[r,c]=n.useState({quality:"720p",camera:!0,microphone:!0,screenShare:!1}),[k,C]=n.useState([]),[d,f]=n.useState(""),s=n.useRef(null),o=n.useRef(null),g=n.useRef({}),S=async()=>{try{const a={video:r.camera?{width:{ideal:r.quality==="1080p"?1920:1280},height:{ideal:r.quality==="1080p"?1080:720}}:!1,audio:r.microphone},l=await navigator.mediaDevices.getUserMedia(a);if(r.screenShare){const y=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});l.getTracks().forEach(w=>y.addTrack(w)),o.current=y}else o.current=l;s.current&&(s.current.srcObject=o.current),u(!0)}catch(a){console.error("Stream start error:",a)}},x=()=>{o.current&&(o.current.getTracks().forEach(a=>a.stop()),o.current=null),s.current&&(s.current.srcObject=null),Object.values(g.current).forEach(a=>a.close()),g.current={},u(!1),v([])},h=()=>{d.trim()&&(C(a=>[...a,{author:E||"Sen",text:d}]),f(""))};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.panel},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(p,{size:20,color:"#ed4245"}),e.createElement("h2",{style:t.title},"CanlÄ± YayÄ±n"),i&&e.createElement("span",{style:t.liveBadge},"ðŸ”´ CANLI")),e.createElement("button",{onClick:()=>{i&&x(),b()},style:t.closeButton},e.createElement(R,{size:20}))),e.createElement("div",{style:t.content},e.createElement("div",{style:t.mainArea},e.createElement("div",{style:t.videoContainer},e.createElement("video",{ref:s,autoPlay:!0,muted:!0,style:t.video}),!i&&e.createElement("div",{style:t.noStream},e.createElement(p,{size:48,color:"#4e5058"}),e.createElement("p",null,"YayÄ±n baÅŸlatÄ±lmadÄ±"))),e.createElement("div",{style:t.controls},i?e.createElement("button",{onClick:x,style:t.stopButton},"YayÄ±nÄ± Durdur"):e.createElement(e.Fragment,null,e.createElement("div",{style:t.settingsGroup},e.createElement("label",{style:t.settingLabel},e.createElement("input",{type:"checkbox",checked:r.camera,onChange:a=>c({...r,camera:a.target.checked})}),e.createElement(p,{size:14})," ",e.createElement("span",null,"Kamera")),e.createElement("label",{style:t.settingLabel},e.createElement("input",{type:"checkbox",checked:r.microphone,onChange:a=>c({...r,microphone:a.target.checked})}),e.createElement(B,{size:14})," ",e.createElement("span",null,"Mikrofon")),e.createElement("label",{style:t.settingLabel},e.createElement("input",{type:"checkbox",checked:r.screenShare,onChange:a=>c({...r,screenShare:a.target.checked})}),e.createElement(I,{size:14})," ",e.createElement("span",null,"Ekran PaylaÅŸÄ±mÄ±"))),e.createElement("select",{value:r.quality,onChange:a=>c({...r,quality:a.target.value}),style:t.qualitySelect},e.createElement("option",{value:"480p"},"480p"),e.createElement("option",{value:"720p"},"720p HD"),e.createElement("option",{value:"1080p"},"1080p Full HD")),e.createElement("button",{onClick:S,style:t.startButton},"YayÄ±nÄ± BaÅŸlat")))),e.createElement("div",{style:t.sidebar},e.createElement("div",{style:t.viewersSection},e.createElement("div",{style:t.sectionHeader},e.createElement(z,{size:16})," ",e.createElement("span",null,"Ä°zleyiciler (",m.length,")")),e.createElement("div",{style:t.viewersList},m.map((a,l)=>e.createElement("div",{key:l,style:t.viewer},e.createElement("div",{style:t.viewerAvatar},a.name?.[0]||"?"),e.createElement("span",null,a.name))))),e.createElement("div",{style:t.chatSection},e.createElement("div",{style:t.sectionHeader},e.createElement(M,{size:16})," ",e.createElement("span",null,"Sohbet")),e.createElement("div",{style:t.chatMessages},k.map((a,l)=>e.createElement("div",{key:l,style:t.chatMessage},e.createElement("span",{style:t.chatAuthor},a.author,":"),e.createElement("span",{style:t.chatText},a.text)))),e.createElement("div",{style:t.chatInput},e.createElement("input",{type:"text",placeholder:"Mesaj yaz...",value:d,onChange:a=>f(a.target.value),onKeyPress:a=>a.key==="Enter"&&h(),style:t.input}),e.createElement("button",{onClick:h,style:t.sendButton},"GÃ¶nder")))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"95%",maxWidth:"1400px",height:"90vh",display:"flex",flexDirection:"column"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},title:{margin:0,fontSize:"18px",color:"#ffffff"},liveBadge:{backgroundColor:"#ed4245",color:"#ffffff",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px"},content:{display:"flex",flex:1,gap:"16px",padding:"16px",overflow:"hidden"},mainArea:{flex:1,display:"flex",flexDirection:"column",gap:"16px"},videoContainer:{flex:1,backgroundColor:"#000000",borderRadius:"8px",position:"relative",overflow:"hidden"},video:{width:"100%",height:"100%",objectFit:"contain"},noStream:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#b9bbbe"},controls:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},settingsGroup:{display:"flex",gap:"16px",flex:1},settingLabel:{display:"flex",alignItems:"center",gap:"8px",color:"#dcddde",cursor:"pointer"},qualitySelect:{backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",cursor:"pointer"},startButton:{backgroundColor:"#3ba55d",color:"#ffffff",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},stopButton:{backgroundColor:"#ed4245",color:"#ffffff",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},sidebar:{width:"300px",display:"flex",flexDirection:"column",gap:"16px"},viewersSection:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",maxHeight:"250px",display:"flex",flexDirection:"column"},sectionHeader:{display:"flex",alignItems:"center",gap:"8px",color:"#ffffff",fontWeight:"bold",marginBottom:"12px"},viewersList:{flex:1,overflowY:"auto"},viewer:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0",color:"#dcddde"},viewerAvatar:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},chatSection:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",flex:1,display:"flex",flexDirection:"column"},chatMessages:{flex:1,overflowY:"auto",marginBottom:"12px"},chatMessage:{marginBottom:"8px",color:"#dcddde",fontSize:"14px"},chatAuthor:{fontWeight:"bold",color:"#5865f2",marginRight:"4px"},chatText:{color:"#dcddde"},chatInput:{display:"flex",gap:"8px"},input:{flex:1,backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",outline:"none"},sendButton:{backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"}};export{q as default};
