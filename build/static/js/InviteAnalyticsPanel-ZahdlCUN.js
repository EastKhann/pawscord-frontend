import{r as a,j as t}from"./react-vendor-D8Fi5F9E.js";import{L as r,a as b,f as C,n as S}from"./icons-vendor-BPCemF_6.js";import{t as I}from"./index-DQtHN9Js.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./state-vendor-De5qIGw3.js";const A=({fetchWithAuth:d,apiBaseUrl:c,onClose:x,serverId:f})=>{const[s,p]=a.useState(null),[y,o]=a.useState(!1),[l,h]=a.useState("7d");a.useEffect(()=>{v()},[l]);const v=async()=>{o(!0);try{const n=await(await d(`${c}/api/servers/${f}/invite-analytics/?range=${l}`)).json();p(n)}catch{I.error("Failed to load analytics")}finally{o(!1)}},g=[{value:"24h",label:"24 Hours"},{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"},{value:"all",label:"All Time"}];return t.jsx("div",{style:e.overlay,children:t.jsxs("div",{style:e.modal,children:[t.jsxs("div",{style:e.header,children:[t.jsxs("div",{style:e.headerLeft,children:[t.jsx(r,{style:{marginRight:"10px",color:"#5865f2"}}),t.jsx("h2",{style:e.title,children:"Invite Analytics"})]}),t.jsx("button",{onClick:x,style:e.closeButton,children:t.jsx(b,{})})]}),t.jsx("div",{style:e.toolbar,children:t.jsx("div",{style:e.timeRangeButtons,children:g.map(i=>t.jsx("button",{onClick:()=>h(i.value),style:{...e.timeRangeButton,...l===i.value&&e.timeRangeButtonActive},children:i.label},i.value))})}),t.jsx("div",{style:e.content,children:y?t.jsx("div",{style:e.loading,children:"Loading analytics..."}):s?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:e.statsGrid,children:[t.jsxs("div",{style:e.statCard,children:[t.jsx("div",{style:e.statIcon,children:t.jsx(C,{style:{color:"#5865f2"}})}),t.jsxs("div",{style:e.statInfo,children:[t.jsx("div",{style:e.statValue,children:s.total_invites||0}),t.jsx("div",{style:e.statLabel,children:"Total Invites"})]})]}),t.jsxs("div",{style:e.statCard,children:[t.jsx("div",{style:e.statIcon,children:t.jsx(S,{style:{color:"#43b581"}})}),t.jsxs("div",{style:e.statInfo,children:[t.jsx("div",{style:e.statValue,children:s.total_joins||0}),t.jsx("div",{style:e.statLabel,children:"Total Joins"})]})]}),t.jsxs("div",{style:e.statCard,children:[t.jsx("div",{style:e.statIcon,children:t.jsx(r,{style:{color:"#faa61a"}})}),t.jsxs("div",{style:e.statInfo,children:[t.jsxs("div",{style:e.statValue,children:[s.total_invites>0?(s.total_joins/s.total_invites*100).toFixed(1):0,"%"]}),t.jsx("div",{style:e.statLabel,children:"Conversion Rate"})]})]})]}),t.jsxs("div",{style:e.section,children:[t.jsx("h3",{style:e.sectionTitle,children:"Top Invites"}),t.jsx("div",{style:e.invitesList,children:(s.top_invites||[]).map((i,n)=>t.jsxs("div",{style:e.inviteCard,children:[t.jsxs("div",{style:e.inviteRank,children:["#",n+1]}),t.jsxs("div",{style:e.inviteInfo,children:[t.jsx("div",{style:e.inviteCode,children:i.code}),t.jsxs("div",{style:e.inviteMeta,children:["Created by ",i.creator_username]})]}),t.jsx("div",{style:e.inviteStats,children:t.jsxs("div",{style:e.inviteStat,children:[t.jsx("span",{style:e.inviteStatValue,children:i.uses}),t.jsx("span",{style:e.inviteStatLabel,children:"uses"})]})})]},n))})]}),t.jsxs("div",{style:e.section,children:[t.jsx("h3",{style:e.sectionTitle,children:"Daily Joins"}),t.jsx("div",{style:e.chartContainer,children:(s.daily_joins||[]).map((i,n)=>{const m=Math.max(...(s.daily_joins||[]).map(j=>j.joins),1),u=i.joins/m*100;return t.jsxs("div",{style:e.barContainer,children:[t.jsx("div",{style:{...e.bar,height:`${u}%`},children:t.jsx("div",{style:e.barValue,children:i.joins})}),t.jsx("div",{style:e.barLabel,children:new Date(i.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},n)})})]})]}):t.jsx("div",{style:e.empty,children:"No analytics data available"})})]})})},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},timeRangeButtons:{display:"flex",gap:"8px"},timeRangeButton:{padding:"8px 16px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#dcddde",cursor:"pointer",fontSize:"13px"},timeRangeButtonActive:{backgroundColor:"#5865f2",borderColor:"#5865f2",color:"#ffffff"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"30px"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",gap:"16px",alignItems:"center"},statIcon:{fontSize:"32px"},statInfo:{flex:1},statValue:{fontSize:"28px",fontWeight:"700",color:"#ffffff",marginBottom:"4px"},statLabel:{fontSize:"13px",color:"#99aab5"},section:{marginBottom:"30px"},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},invitesList:{display:"flex",flexDirection:"column",gap:"10px"},inviteCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},inviteRank:{fontSize:"20px",fontWeight:"700",color:"#5865f2",minWidth:"40px"},inviteInfo:{flex:1},inviteCode:{fontSize:"16px",fontWeight:"600",color:"#ffffff",fontFamily:"monospace",marginBottom:"4px"},inviteMeta:{fontSize:"12px",color:"#99aab5"},inviteStats:{display:"flex",gap:"20px"},inviteStat:{display:"flex",flexDirection:"column",alignItems:"center"},inviteStatValue:{fontSize:"18px",fontWeight:"700",color:"#43b581"},inviteStatLabel:{fontSize:"11px",color:"#99aab5"},chartContainer:{display:"flex",gap:"8px",alignItems:"flex-end",height:"200px",padding:"10px",backgroundColor:"#2c2f33",borderRadius:"8px"},barContainer:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",height:"100%",justifyContent:"flex-end"},bar:{width:"100%",backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"4px 0",minHeight:"20px"},barValue:{fontSize:"11px",color:"#ffffff",fontWeight:"600"},barLabel:{fontSize:"10px",color:"#99aab5",marginTop:"4px",transform:"rotate(-45deg)",transformOrigin:"center"}};export{A as default};
