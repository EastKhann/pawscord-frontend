import{r as m,h as N,a1 as R,bt as D,a7 as I,b_ as b,bZ as U,aP as A}from"./react-core-B6hadH-M.js";const K=({x:l,y:h,user:c,currentUser:M,onClose:u,onAction:E,voiceChannels:k=[],isAdmin:p=!1,isInVoiceRoom:i=!1,friendsList:x=[],conversationId:z=null})=>{const d=m.useRef(null),[f,v]=m.useState(!1),[n,a]=m.useState(0),w=x&&x.length>0&&x.some(e=>{const s=e.username||e.sender_username||e.receiver_username||e.display_name||e.friend?.username,o=c.username||c.display_name;return s===o&&s!==M.username}),r=m.useCallback((e,s=null)=>{E(e,c,s),u()},[E,c,u]);m.useEffect(()=>{const e=o=>{d.current&&!d.current.contains(o.target)&&u()},s=o=>{o.key==="Escape"?u():o.key==="ArrowDown"?(o.preventDefault(),a(g=>Math.min(g+1,S()-1))):o.key==="ArrowUp"?(o.preventDefault(),a(g=>Math.max(g-1,0))):o.key==="Enter"&&(o.preventDefault(),C())};return document.addEventListener("mousedown",e),document.addEventListener("keydown",s),d.current&&d.current.focus(),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",s)}},[u]);const S=()=>{let e=2;return i&&(e+=1),p&&i&&(e+=3),e},C=()=>{const e=["profile","message"];i&&e.push("volume"),p&&i&&e.push("move","kick","server_mute"),e[n]&&r(e[n])},F=Math.min(l,window.innerWidth-220),_=Math.min(h,window.innerHeight-300),y=document.getElementById("portal-root");return y?N.createPortal(React.createElement(React.Fragment,null,React.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483646,background:"transparent",pointerEvents:"auto"},onClick:u}),React.createElement("div",{ref:d,role:"menu","aria-label":`${c} için eylemler`,tabIndex:-1,style:{...t.menu,left:`${F}px`,top:`${_}px`,zIndex:2147483647,position:"fixed",pointerEvents:"auto"}},React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:n===0?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>r("profile"),onMouseEnter:()=>a(0)},React.createElement(R,null)," Profili Görüntüle"),React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:n===1?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>r("message"),onMouseEnter:()=>a(1)},React.createElement(D,null)," Mesaj Gönder"),React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:n===2?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>r("invite_to_server"),onMouseEnter:()=>a(2)},React.createElement(I,null)," Sunucuya Davet Et"),w?React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...t.menuItemDanger,background:n===3?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>r("remove_friend"),onMouseEnter:()=>a(3)},React.createElement(b,null)," Arkadaşlıktan Çıkar"):React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:n===3?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>r("add_friend"),onMouseEnter:()=>a(3)},React.createElement(R,null)," Arkadaş Ekle"),React.createElement("div",{role:"separator",style:t.separator}),React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:n===4?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>r("mute_user"),onMouseEnter:()=>a(4)},React.createElement(U,null)," Sessize Al"),React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...t.menuItemDanger,background:n===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>r("block_user"),onMouseEnter:()=>a(5)},React.createElement(b,null)," Kullanıcıyı Engelle"),p&&i&&React.createElement(React.Fragment,null,React.createElement("div",{role:"separator",style:t.separator}),React.createElement("div",{style:t.sectionTitle,"aria-label":"Moderasyon seçenekleri"},"Moderasyon"),React.createElement("div",{role:"menuitem",tabIndex:0,"aria-haspopup":"true","aria-expanded":f,className:"user-context-menu-item",style:{...t.menuItem,background:n===4?"rgba(88, 101, 242, 0.2)":"transparent"},onMouseEnter:()=>{v(!0),a(4)},onMouseLeave:()=>v(!1)},React.createElement(I,null)," Kanala Taşı",f&&k.length>0&&React.createElement("div",{role:"menu","aria-label":"Hedef kanallar",style:t.submenu},k.map(e=>React.createElement("div",{key:e.slug,role:"menuitem",tabIndex:0,className:"user-context-submenu-item",style:t.submenuItem,onClick:s=>{s.stopPropagation(),r("move",e.slug)}},e.name)))),React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...t.menuItemDanger,background:n===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>r("kick"),onMouseEnter:()=>a(5)},React.createElement(b,null)," Kanaldan At"),React.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:n===6?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>r("server_mute"),onMouseEnter:()=>a(6)},React.createElement(A,null)," Mikrofonu Kapat (Server)")))),y):null},t={menu:{background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"200px",padding:"6px 0",color:"#dbdee1",fontSize:"14px",border:"1px solid #1e1f22"},menuItem:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",position:"relative"},menuItemDanger:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",color:"#ed4245",position:"relative"},separator:{height:"1px",background:"#1e1f22",margin:"6px 0"},sectionTitle:{fontSize:"11px",textTransform:"uppercase",color:"#72767d",padding:"6px 12px 4px",fontWeight:"600"},submenu:{position:"absolute",left:"100%",top:0,background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"180px",padding:"6px 0",border:"1px solid #1e1f22",marginLeft:"4px"},submenuItem:{padding:"8px 12px",cursor:"pointer",transition:"background 0.1s"}};if(!document.getElementById("user-context-menu-styles")){const l=document.createElement("style");l.id="user-context-menu-styles",l.textContent=`
        .user-context-menu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        .user-context-menu-item-danger:hover {
            background: rgba(237, 66, 69, 0.2) !important;
        }
        .user-context-submenu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        
        /* ✨ Keyboard Navigation Focus Styles */
        .user-context-menu-item:focus,
        .user-context-menu-item-danger:focus,
        .user-context-submenu-item:focus {
            outline: 2px solid rgba(88, 101, 242, 0.8);
            outline-offset: -2px;
        }
        
        /* ✨ Menu Container Focus */
        [role="menu"]:focus {
            outline: none;
        }
        
        /* ✨ Smooth Transitions */
        .user-context-menu-item,
        .user-context-menu-item-danger,
        .user-context-submenu-item {
            transition: background 0.15s ease, outline 0.15s ease;
        }
    `,document.head.appendChild(l)}const L=m.memo(K);export{L as default};
