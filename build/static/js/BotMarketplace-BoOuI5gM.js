import{r as c}from"./react-core-B6hadH-M.js";import{r as z,t as T}from"./index-D_6pZib5.js";const _=({bot:e,onClick:i})=>React.createElement("div",{className:"bot-card",onClick:()=>i(e)},React.createElement("div",{className:"bot-avatar"},React.createElement("img",{src:e.avatar||"/default-bot.png",alt:e.name}),e.is_verified&&React.createElement("span",{className:"verified-badge"},"âœ“")),React.createElement("div",{className:"bot-info"},React.createElement("h3",{className:"bot-name"},e.name,e.is_featured&&React.createElement("span",{className:"featured-tag"},"â­ Ã–ne Ã‡Ä±kan")),React.createElement("p",{className:"bot-description"},e.short_description),React.createElement("div",{className:"bot-meta"},React.createElement("span",{className:"bot-installs"},React.createElement("i",null,"ðŸ“¥")," ",e.install_count?.toLocaleString()||0),React.createElement("span",{className:"bot-rating"},React.createElement("i",null,"â­")," ",e.avg_rating||0),e.category&&React.createElement("span",{className:"bot-category"},e.category)),e.tags&&e.tags.length>0&&React.createElement("div",{className:"bot-tags"},e.tags.slice(0,3).map((E,n)=>React.createElement("span",{key:n,className:"tag"},E))))),j=({bot:e,onClose:i,onInstall:E})=>{const[n,v]=c.useState("overview"),[h,p]=c.useState(!1),[g,w]=c.useState([]),[o,y]=c.useState(null),[r,S]=c.useState(!1),l=z,b=c.useCallback(async()=>{try{const t=localStorage.getItem("access_token"),s=await fetch(`${l}/bots/my-servers/`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const R=await s.json();w(R.servers||[])}}catch(t){console.error("Failed to load servers:",t)}},[l]),N=async()=>{if(o){S(!0);try{const t=localStorage.getItem("access_token"),s=await fetch(`${l}/bots/${e.id}/install/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:o.id})});if(s.ok)E?.(e,o),p(!1),T.success(`${e.name} baÅŸarÄ±yla ${o.name} sunucusuna eklendi!`);else{const R=await s.json();T.error(R.error||"YÃ¼kleme baÅŸarÄ±sÄ±z")}}catch(t){console.error("Install failed:",t)}S(!1)}};return c.useEffect(()=>{b()},[b]),e?React.createElement("div",{className:"bot-modal-overlay",onClick:t=>t.target===t.currentTarget&&i()},React.createElement("div",{className:"bot-modal"},React.createElement("div",{className:"bot-modal-header",style:{backgroundImage:e.banner?`url(${e.banner})`:void 0}},React.createElement("button",{className:"modal-close",onClick:i},"Ã—"),React.createElement("div",{className:"bot-header-content"},React.createElement("img",{src:e.avatar||"/default-bot.png",alt:e.name,className:"bot-large-avatar"}),React.createElement("div",{className:"bot-header-info"},React.createElement("h2",null,e.name,e.is_verified&&React.createElement("span",{className:"verified"},"âœ“ DoÄŸrulanmÄ±ÅŸ")),React.createElement("p",null,e.short_description),React.createElement("div",{className:"bot-stats"},React.createElement("span",null,"ðŸ“¥ ",e.install_count?.toLocaleString()," sunucu"),React.createElement("span",null,"â­ ",e.avg_rating," (",e.review_count," yorum)"))),React.createElement("button",{className:"add-bot-btn",onClick:()=>p(!0)},"Sunucuya Ekle"))),React.createElement("div",{className:"bot-modal-tabs"},React.createElement("button",{className:n==="overview"?"active":"",onClick:()=>v("overview")},"Genel BakÄ±ÅŸ"),React.createElement("button",{className:n==="commands"?"active":"",onClick:()=>v("commands")},"Komutlar"),React.createElement("button",{className:n==="reviews"?"active":"",onClick:()=>v("reviews")},"Yorumlar")),React.createElement("div",{className:"bot-modal-content"},n==="overview"&&React.createElement("div",{className:"overview-tab"},React.createElement("div",{className:"description-section"},React.createElement("h3",null,"AÃ§Ä±klama"),React.createElement("div",{className:"description-content"},e.description)),e.features&&e.features.length>0&&React.createElement("div",{className:"features-section"},React.createElement("h3",null,"Ã–zellikler"),React.createElement("div",{className:"features-list"},e.features.map((t,s)=>React.createElement("div",{key:s,className:"feature-item"},"âœ… ",t)))),React.createElement("div",{className:"links-section"},React.createElement("h3",null,"BaÄŸlantÄ±lar"),React.createElement("div",{className:"links-list"},e.website&&React.createElement("a",{href:e.website,target:"_blank",rel:"noopener noreferrer"},"ðŸŒ Web Sitesi"),e.support_server&&React.createElement("a",{href:`/invite/${e.support_server}`},"ðŸ’¬ Destek Sunucusu"),e.privacy_policy&&React.createElement("a",{href:e.privacy_policy,target:"_blank",rel:"noopener noreferrer"},"ðŸ”’ Gizlilik PolitikasÄ±"))),e.developer&&React.createElement("div",{className:"developer-section"},React.createElement("h3",null,"GeliÅŸtirici"),React.createElement("div",{className:"developer-info"},React.createElement("img",{src:e.developer.avatar||"/default-avatar.png",alt:""}),React.createElement("span",null,e.developer.username)))),n==="commands"&&React.createElement("div",{className:"commands-tab"},e.commands&&e.commands.length>0?React.createElement("div",{className:"commands-list"},e.commands.map((t,s)=>React.createElement("div",{key:s,className:"command-item"},React.createElement("code",{className:"command-name"},e.prefix,t.name),React.createElement("p",{className:"command-desc"},t.description),t.usage&&React.createElement("code",{className:"command-usage"},t.usage)))):React.createElement("p",{className:"no-data"},"Komut listesi mevcut deÄŸil")),n==="reviews"&&React.createElement("div",{className:"reviews-tab"},e.reviews&&e.reviews.length>0?React.createElement("div",{className:"reviews-list"},e.reviews.map(t=>React.createElement("div",{key:t.id,className:"review-item"},React.createElement("div",{className:"review-header"},React.createElement("img",{src:t.avatar||"/default-avatar.png",alt:""}),React.createElement("span",{className:"reviewer-name"},t.user),React.createElement("span",{className:"review-rating"},"â­".repeat(t.rating))),React.createElement("p",{className:"review-content"},t.content),React.createElement("span",{className:"review-date"},new Date(t.created_at).toLocaleDateString("tr-TR"))))):React.createElement("p",{className:"no-data"},"HenÃ¼z yorum yok"))),h&&React.createElement("div",{className:"server-select-overlay"},React.createElement("div",{className:"server-select-modal"},React.createElement("h3",null,"Sunucu SeÃ§"),React.createElement("p",null,e.name," botunu hangi sunucuya eklemek istiyorsunuz?"),React.createElement("div",{className:"server-list"},g.length===0?React.createElement("p",{className:"no-servers"},"Admin olduÄŸunuz sunucu bulunamadÄ±"):g.map(t=>React.createElement("div",{key:t.id,className:`server-item ${o?.id===t.id?"selected":""}`,onClick:()=>y(t)},React.createElement("img",{src:t.icon||"/default-server.png",alt:""}),React.createElement("span",null,t.name),React.createElement("span",{className:"member-count"},t.member_count," Ã¼ye")))),React.createElement("div",{className:"server-select-actions"},React.createElement("button",{className:"cancel-btn",onClick:()=>p(!1)},"Ä°ptal"),React.createElement("button",{className:"install-btn",disabled:!o||r,onClick:N},r?"YÃ¼kleniyor...":"Ekle")))))):null},F=({onClose:e})=>{const[i,E]=c.useState([]),[n,v]=c.useState([]),[h,p]=c.useState([]),[g,w]=c.useState([]),[o,y]=c.useState(!0),[r,S]=c.useState(null),[l,b]=c.useState(""),[N,t]=c.useState("popular"),[s,R]=c.useState(null),[k,$]=c.useState(1),[B,A]=c.useState(1),d=z,P=c.useCallback(async()=>{try{const a=new URLSearchParams({page:k,sort:N,limit:20});r&&a.append("category",r),l&&a.append("search",l);const m=await fetch(`${d}/bots/?${a}`);if(m.ok){const u=await m.json();E(u.bots||[]),A(u.pages||1)}}catch(a){console.error("Failed to load bots:",a)}},[d,k,N,r,l]),I=c.useCallback(async()=>{y(!0);try{const[a,m,u]=await Promise.all([fetch(`${d}/bots/categories/`),fetch(`${d}/bots/featured/`),fetch(`${d}/bots/trending/`)]);if(a.ok){const f=await a.json();w(f.categories||[])}if(m.ok){const f=await m.json();v(f.bots||[])}if(u.ok){const f=await u.json();p(f.bots||[])}}catch(a){console.error("Failed to load initial data:",a)}y(!1)},[d]),C=async a=>{try{const m=await fetch(`${d}/bots/${a.id}/`);if(m.ok){const u=await m.json();R(u)}}catch(m){console.error("Failed to load bot detail:",m)}};return c.useEffect(()=>{I()},[I]),c.useEffect(()=>{P()},[P]),o?React.createElement("div",{className:"bot-marketplace"},React.createElement("div",{className:"marketplace-loading"},React.createElement("div",{className:"loading-spinner"}),React.createElement("p",null,"Bot Marketplace yÃ¼kleniyor..."))):React.createElement("div",{className:"bot-marketplace"},React.createElement("div",{className:"marketplace-header"},React.createElement("div",{className:"header-content"},React.createElement("h1",null,"ðŸ¤– Bot Marketplace"),React.createElement("p",null,"Sunucunuzu gÃ¼Ã§lendirecek binlerce bot keÅŸfedin")),e&&React.createElement("button",{className:"close-btn",onClick:e},"Ã—")),React.createElement("div",{className:"marketplace-filters"},React.createElement("div",{className:"search-box"},React.createElement("input",{type:"text",placeholder:"Bot ara...",value:l,onChange:a=>b(a.target.value)}),React.createElement("span",{className:"search-icon"},"ðŸ”")),React.createElement("div",{className:"filter-group"},React.createElement("select",{value:r||"",onChange:a=>S(a.target.value||null)},React.createElement("option",{value:""},"TÃ¼m Kategoriler"),g.map(a=>React.createElement("option",{key:a.id,value:a.slug},a.icon," ",a.name," (",a.bot_count,")"))),React.createElement("select",{value:N,onChange:a=>t(a.target.value)},React.createElement("option",{value:"popular"},"PopÃ¼ler"),React.createElement("option",{value:"new"},"Yeni"),React.createElement("option",{value:"rated"},"En Ä°yi Puan")))),React.createElement("div",{className:"marketplace-content"},n.length>0&&!l&&!r&&React.createElement("section",{className:"featured-section"},React.createElement("h2",null,"â­ Ã–ne Ã‡Ä±kan Botlar"),React.createElement("div",{className:"featured-grid"},n.map(a=>React.createElement(_,{key:a.id,bot:a,onClick:C})))),h.length>0&&!l&&!r&&React.createElement("section",{className:"trending-section"},React.createElement("h2",null,"ðŸ“ˆ YÃ¼kselen Botlar"),React.createElement("div",{className:"trending-grid"},h.map(a=>React.createElement(_,{key:a.id,bot:a,onClick:C})))),React.createElement("section",{className:"all-bots-section"},React.createElement("h2",null,r?g.find(a=>a.slug===r)?.name||"Botlar":l?`"${l}" iÃ§in sonuÃ§lar`:"TÃ¼m Botlar"),i.length===0?React.createElement("div",{className:"no-results"},React.createElement("p",null,"Bot bulunamadÄ±")):React.createElement(React.Fragment,null,React.createElement("div",{className:"bots-grid"},i.map(a=>React.createElement(_,{key:a.id,bot:a,onClick:C}))),B>1&&React.createElement("div",{className:"pagination"},React.createElement("button",{disabled:k<=1,onClick:()=>$(a=>a-1)},"â† Ã–nceki"),React.createElement("span",null,"Sayfa ",k," / ",B),React.createElement("button",{disabled:k>=B,onClick:()=>$(a=>a+1)},"Sonraki â†’"))))),s&&React.createElement(j,{bot:s,onClose:()=>R(null)}))};export{F as default};
