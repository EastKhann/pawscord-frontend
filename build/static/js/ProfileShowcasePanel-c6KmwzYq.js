var L=Object.defineProperty;var a=(r,u)=>L(r,"name",{value:u,configurable:!0});import{r as h,j as e}from"./react-core-Djgtqrmb.js";import{Q as C,a as V,a0 as B,an as F,aa as O,ab as M,X as R,at as G,g as Y,aY as J,a8 as U,P as H,ap as I,aK as q,bb as K,q as Q,j as X}from"./icons-vendor-BMXAt4pj.js";import{y as k}from"./ui-vendor-IhB9Znpc.js";import{d as Z}from"./index-Bohqi95c.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";const he=a(({userId:r,onClose:u,onUpdate:W,fetchWithAuth:y,apiBaseUrl:f})=>{const[l,o]=h.useState([]),[S,b]=h.useState(!0),[_,m]=h.useState(!1),[p,v]=h.useState(null),[i,c]=h.useState({type:"game",title:"",description:"",image_url:"",link_url:""}),[ee,se]=h.useState(null),g=[{key:"game",label:"Oyun",icon:e.jsx(U,{}),color:"#9c27b0"},{key:"achievement",label:"Başarı",icon:e.jsx(H,{}),color:"#ffc107"},{key:"art",label:"Sanat",icon:e.jsx(I,{}),color:"#e91e63"},{key:"music",label:"Müzik",icon:e.jsx(q,{}),color:"#00bcd4"},{key:"video",label:"Video",icon:e.jsx(K,{}),color:"#f44336"},{key:"code",label:"Proje",icon:e.jsx(Q,{}),color:"#4caf50"},{key:"link",label:"Link",icon:e.jsx(X,{}),color:"#2196f3"}];h.useEffect(()=>{E()},[r]);const E=a(async()=>{b(!0);try{const s=await y(`${f}/users/${r}/showcase/`);if(s.ok){const n=await s.json();o(n.items||[])}else o([])}catch{o([])}b(!1)},"fetchShowcases"),$=a(async()=>{if(!i.title.trim()){k.error("Başlık gerekli");return}const s={id:Date.now(),...i,order:l.length};try{await y(`${f}/users/${r}/showcase/`,{method:"POST",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify(s)})}catch{}o([...l,s]),j(),k.success("Vitrin öğesi eklendi")},"handleAdd"),T=a(async()=>{if(!(!i.title.trim()||!p)){try{await fetch(`/api/users/${r}/showcase/${p.id}/`,{method:"PATCH",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify(i)})}catch{}o(l.map(s=>s.id===p.id?{...s,...i}:s)),j(),k.success("Vitrin öğesi güncellendi")}},"handleEdit"),z=a(async s=>{if(await Z("Bu öğeyi silmek istediğinizden emin misiniz?")){try{await fetch(`/api/users/${r}/showcase/${s}/`,{method:"DELETE",headers:{Authorization:`Bearer ${token}`}})}catch{}o(l.filter(n=>n.id!==s)),k.success("Vitrin öğesi silindi")}},"handleDelete"),w=a(async(s,n)=>{const t=l.findIndex(x=>x.id===s);if(n==="up"&&t===0||n==="down"&&t===l.length-1)return;const d=[...l],N=n==="up"?t-1:t+1;[d[t],d[N]]=[d[N],d[t]],d.forEach((x,D)=>x.order=D),o(d);try{await fetch(`/api/users/${r}/showcase/reorder/`,{method:"POST",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify({order:d.map(x=>x.id)})})}catch{}},"handleReorder"),j=a(()=>{c({type:"game",title:"",description:"",image_url:"",link_url:""}),m(!1),v(null)},"resetForm"),P=a(s=>{v(s),c({type:s.type,title:s.title,description:s.description||"",image_url:s.image_url||"",link_url:s.link_url||""}),m(!0)},"openEditModal"),A=a(s=>g.find(n=>n.key===s)||g[0],"getTypeInfo");return e.jsx("div",{className:"showcase-overlay",onClick:a(s=>s.target.className==="showcase-overlay"&&u(),"onClick"),children:e.jsxs("div",{className:"showcase-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h2",{children:[e.jsx(C,{})," Profil Vitrini"]}),e.jsx("button",{className:"close-btn",onClick:u,children:e.jsx(V,{})})]}),e.jsxs("div",{className:"panel-info",children:[e.jsx(B,{}),e.jsx("p",{children:"Profilinizde gösterilecek en fazla 6 öğe seçebilirsiniz"})]}),e.jsx("div",{className:"showcase-list",children:S?e.jsx("div",{className:"loading",children:"Yükleniyor..."}):l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(C,{}),e.jsx("p",{children:"Henüz vitrin öğesi yok"}),e.jsxs("button",{onClick:a(()=>m(!0),"onClick"),children:[e.jsx(F,{})," İlk Öğeyi Ekle"]})]}):l.map((s,n)=>{const t=A(s.type);return e.jsxs("div",{className:"showcase-item",children:[e.jsxs("div",{className:"item-drag",children:[e.jsx("button",{onClick:a(()=>w(s.id,"up"),"onClick"),disabled:n===0,children:e.jsx(O,{})}),e.jsx("button",{onClick:a(()=>w(s.id,"down"),"onClick"),disabled:n===l.length-1,children:e.jsx(M,{})})]}),e.jsx("div",{className:"item-icon",style:{background:t.color},children:t.icon}),s.image_url&&e.jsx("div",{className:"item-image",children:e.jsx("img",{src:s.image_url,alt:s.title})}),e.jsxs("div",{className:"item-info",children:[e.jsx("span",{className:"item-type",children:t.label}),e.jsx("h4",{children:s.title}),s.description&&e.jsx("p",{children:s.description}),s.link_url&&e.jsxs("a",{href:s.link_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(R,{})," Linke Git"]})]}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{onClick:a(()=>P(s),"onClick"),children:e.jsx(G,{})}),e.jsx("button",{onClick:a(()=>z(s.id),"onClick"),children:e.jsx(Y,{})})]})]},s.id)})}),l.length<6&&l.length>0&&e.jsxs("div",{className:"add-section",children:[e.jsxs("button",{className:"add-btn",onClick:a(()=>m(!0),"onClick"),children:[e.jsx(F,{})," Yeni Öğe Ekle"]}),e.jsxs("span",{className:"remaining",children:[6-l.length," slot kaldı"]})]}),_&&e.jsx("div",{className:"modal-overlay",onClick:a(()=>j(),"onClick"),children:e.jsxs("div",{className:"modal-content",onClick:a(s=>s.stopPropagation(),"onClick"),children:[e.jsx("h3",{children:p?"Öğeyi Düzenle":"Yeni Vitrin Öğesi"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tür"}),e.jsx("div",{className:"type-selector",children:g.map(s=>e.jsxs("button",{className:`type-btn ${i.type===s.key?"selected":""}`,style:{"--color":s.color},onClick:a(()=>c({...i,type:s.key}),"onClick"),children:[s.icon,e.jsx("span",{children:s.label})]},s.key))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Başlık *"}),e.jsx("input",{type:"text",placeholder:"Örn: Valorant",value:i.title,onChange:a(s=>c({...i,title:s.target.value}),"onChange")})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Açıklama"}),e.jsx("input",{type:"text",placeholder:"Örn: Diamond 3 Rank",value:i.description,onChange:a(s=>c({...i,description:s.target.value}),"onChange")})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Görsel URL"}),e.jsx("input",{type:"text",placeholder:"https://...",value:i.image_url,onChange:a(s=>c({...i,image_url:s.target.value}),"onChange")})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Link URL"}),e.jsx("input",{type:"text",placeholder:"https://...",value:i.link_url,onChange:a(s=>c({...i,link_url:s.target.value}),"onChange")})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:j,children:"İptal"}),e.jsxs("button",{className:"save-btn",onClick:p?T:$,children:[e.jsx(J,{})," ",p?"Güncelle":"Ekle"]})]})]})})]})})},"ProfileShowcasePanel");export{he as default};
