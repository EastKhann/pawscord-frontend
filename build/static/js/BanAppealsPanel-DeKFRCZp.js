import{r as t,bX as g,W as b,aK as N,b$ as f,V as A}from"./react-core-B6hadH-M.js";function D({apiBaseUrl:o,fetchWithAuth:i}){const[s,h]=t.useState([]),[n,d]=t.useState(""),[m,u]=t.useState(""),[l,y]=t.useState(null),[E,c]=t.useState(!1),[R,r]=t.useState("");t.useEffect(()=>{v(),w()},[]);const v=async()=>{c(!0);try{const e=await i(`${o}/ban-appeals/list/`);if(e.ok){const a=await e.json();h(a.appeals||[])}}catch(e){console.error("Error loading appeals:",e)}finally{c(!1)}},w=async()=>{try{const e=await i(`${o}/ban-appeals/status/`);if(e.ok){const a=await e.json();y(a)}}catch(e){console.error("Error loading ban info:",e)}},x=async()=>{if(!n.trim()){r("âŒ Please provide a reason");return}c(!0);try{const e=await i(`${o}/adv/ban-appeal/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:n,details:m||null})});if(e.ok)r("âœ… Appeal submitted successfully!"),d(""),u(""),v();else{const a=await e.json();r(`âŒ ${a.error||"Failed to submit appeal"}`)}}catch(e){r("âŒ Network error: "+e.message)}finally{c(!1)}},S=e=>{const a={pending:{icon:React.createElement(f,null),color:"#faa61a",text:"Pending"},approved:{icon:React.createElement(A,null),color:"#43b581",text:"Approved"},rejected:{icon:React.createElement(b,null),color:"#f04747",text:"Rejected"}};return a[e]||a.pending};return React.createElement("div",{className:"ban-appeals-panel"},React.createElement("div",{className:"appeals-header"},React.createElement("h2",null,React.createElement(g,null)," Ban Appeals")),R&&React.createElement("div",{className:"appeal-message"},R),l&&l.is_banned&&React.createElement("div",{className:"ban-info-card"},React.createElement("div",{className:"ban-warning"},React.createElement(b,{className:"warning-icon"}),React.createElement("div",{className:"warning-text"},React.createElement("h3",null,"You are currently banned"),React.createElement("p",null,l.ban_reason||"No reason provided"),React.createElement("div",{className:"ban-meta"},React.createElement("span",null,"Banned on: ",new Date(l.banned_at).toLocaleDateString()),l.expires_at&&React.createElement("span",null,"Expires: ",new Date(l.expires_at).toLocaleDateString()))))),React.createElement("div",{className:"submit-appeal-section"},React.createElement("h3",null,React.createElement(N,null)," Submit New Appeal"),React.createElement("div",{className:"appeal-form"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Reason for Appeal:"),React.createElement("input",{type:"text",placeholder:"Why should you be unbanned?",value:n,onChange:e=>d(e.target.value),className:"form-input",maxLength:200}),React.createElement("div",{className:"char-count"},n.length,"/200")),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Additional Details (optional):"),React.createElement("textarea",{placeholder:"Provide any additional context or evidence...",value:m,onChange:e=>u(e.target.value),className:"form-textarea",rows:5,maxLength:1e3}),React.createElement("div",{className:"char-count"},m.length,"/1000")),React.createElement("button",{className:"submit-btn",onClick:x,disabled:E||!n.trim()},React.createElement(N,null)," Submit Appeal")),React.createElement("div",{className:"appeal-guidelines"},React.createElement("h4",null,"ðŸ“‹ Guidelines:"),React.createElement("ul",null,React.createElement("li",null,"Be honest and respectful in your appeal"),React.createElement("li",null,"Explain why you believe the ban was unfair or a mistake"),React.createElement("li",null,"Provide evidence if available"),React.createElement("li",null,"Appeals are reviewed within 24-48 hours")))),React.createElement("div",{className:"appeals-history"},React.createElement("h3",null,React.createElement(f,null)," Your Appeals (",s.length,")"),E&&s.length===0?React.createElement("div",{className:"loading"},"Loading appeals..."):s.length===0?React.createElement("div",{className:"empty-appeals"},React.createElement(g,{className:"empty-icon"}),React.createElement("p",null,"No appeals submitted yet")):React.createElement("div",{className:"appeals-list"},s.map((e,a)=>{const p=S(e.status);return React.createElement("div",{key:a,className:`appeal-item status-${e.status}`},React.createElement("div",{className:"appeal-header"},React.createElement("div",{className:"appeal-date"},new Date(e.created_at).toLocaleString()),React.createElement("div",{className:"appeal-status",style:{background:p.color}},p.icon," ",p.text)),React.createElement("div",{className:"appeal-content"},React.createElement("div",{className:"appeal-reason"},React.createElement("strong",null,"Reason:")," ",e.reason),e.details&&React.createElement("div",{className:"appeal-details"},React.createElement("strong",null,"Details:")," ",e.details)),e.admin_response&&React.createElement("div",{className:"admin-response"},React.createElement("strong",null,"Admin Response:")," ",e.admin_response,React.createElement("div",{className:"response-date"},"Reviewed: ",new Date(e.reviewed_at).toLocaleString())))}))))}export{D as default};
