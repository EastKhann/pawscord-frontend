import{r as s,Y as v,l as E,ci as R,cj as h}from"./react-core-B6hadH-M.js";import{t as l}from"./index-D_6pZib5.js";const k=({fetchWithAuth:i,apiBaseUrl:c,onClose:f,roomSlug:o})=>{const[a,m]=s.useState(null),[b,p]=s.useState(!1),[n,g]=s.useState(3600),u=[{value:300,label:"5 minutes"},{value:600,label:"10 minutes"},{value:1800,label:"30 minutes"},{value:3600,label:"1 hour"},{value:7200,label:"2 hours"},{value:14400,label:"4 hours"},{value:28800,label:"8 hours"},{value:86400,label:"24 hours"},{value:604800,label:"7 days"}];s.useEffect(()=>{d()},[o]);const d=async()=>{p(!0);try{const r=await(await i(`${c}/rooms/${o}/ephemeral/`)).json();m(r),r.ttl&&g(r.ttl)}catch{l.error("Failed to load ephemeral settings")}finally{p(!1)}},x=async()=>{try{await i(`${c}/rooms/${o}/ephemeral/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!a?.enabled,ttl:n})}),l.success(`Ephemeral messages ${a?.enabled?"disabled":"enabled"}`),d()}catch{l.error("Failed to update settings")}},y=async t=>{if(g(t),a?.enabled)try{await i(`${c}/rooms/${o}/ephemeral/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!0,ttl:t})}),l.success("Auto-delete time updated"),d()}catch{l.error("Failed to update TTL")}};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(v,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Auto-Delete Messages")),React.createElement("button",{onClick:f,style:e.closeButton},React.createElement(E,null))),React.createElement("div",{style:e.content},b?React.createElement("div",{style:e.loading},"Loading settings..."):React.createElement(React.Fragment,null,React.createElement("div",{style:e.toggleSection},React.createElement("div",null,React.createElement("div",{style:e.toggleLabel},"Enable Auto-Delete"),React.createElement("div",{style:e.toggleDescription},"Messages will automatically delete after the specified time")),React.createElement("button",{onClick:x,style:e.toggleButton},a?.enabled?React.createElement(R,{style:{fontSize:"32px",color:"#43b581"}}):React.createElement(h,{style:{fontSize:"32px",color:"#99aab5"}}))),a?.enabled&&React.createElement("div",{style:e.ttlSection},React.createElement("label",{style:e.label},"Auto-Delete After"),React.createElement("div",{style:e.optionsGrid},u.map(t=>React.createElement("button",{key:t.value,onClick:()=>y(t.value),style:{...e.optionButton,...n===t.value&&e.optionButtonActive}},t.label))),React.createElement("div",{style:e.info},"⏱️ Current setting: Messages auto-delete after"," ",React.createElement("strong",null,u.find(t=>t.value===n)?.label||`${n} seconds`))),!a?.enabled&&React.createElement("div",{style:e.disabledMessage},"Ephemeral messages are currently disabled. Enable them to automatically delete messages after a set time period.")))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},toggleSection:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},toggleLabel:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},toggleDescription:{fontSize:"13px",color:"#99aab5"},toggleButton:{background:"none",border:"none",cursor:"pointer",padding:"5px"},ttlSection:{display:"flex",flexDirection:"column",gap:"16px"},label:{fontSize:"14px",fontWeight:"600",color:"#dcddde"},optionsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},optionButton:{padding:"12px",backgroundColor:"#2c2f33",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",transition:"background-color 0.2s"},optionButtonActive:{backgroundColor:"#5865f2"},info:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"12px",fontSize:"14px",color:"#dcddde",textAlign:"center"},disabledMessage:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"20px",fontSize:"14px",color:"#99aab5",textAlign:"center"}};export{k as default};
