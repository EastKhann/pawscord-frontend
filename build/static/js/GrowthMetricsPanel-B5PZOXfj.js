import{r as o,aj as s,l as v,K as h,c2 as i,cq as E}from"./react-core-B6hadH-M.js";import{t as S}from"./index-D_6pZib5.js";const _=({fetchWithAuth:d,apiBaseUrl:m,onClose:f,serverId:p})=>{const[t,x]=o.useState(null),[g,c]=o.useState(!1),[n,y]=o.useState("7d"),b=[{value:"24h",label:"Last 24 Hours"},{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"all",label:"All Time"}];o.useEffect(()=>{u()},[n]);const u=async()=>{c(!0);try{const r=await(await d(`${m}/servers/${p}/growth-metrics/?range=${n}`)).json();x(r)}catch{S.error("Failed to load growth metrics")}finally{c(!1)}},l=a=>a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a;return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(s,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Growth Metrics")),React.createElement("button",{onClick:f,style:e.closeButton},React.createElement(v,null))),React.createElement("div",{style:e.toolbar},React.createElement("select",{value:n,onChange:a=>y(a.target.value),style:e.select},b.map(a=>React.createElement("option",{key:a.value,value:a.value},a.label)))),React.createElement("div",{style:e.content},g?React.createElement("div",{style:e.loading},"Loading metrics..."):t?React.createElement("div",null,React.createElement("div",{style:e.statsGrid},React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(h,{style:{color:"#5865f2",fontSize:"24px"}})),React.createElement("div",{style:e.statInfo},React.createElement("div",{style:e.statLabel},"Total Members"),React.createElement("div",{style:e.statValue},l(t.total_members||0)),t.member_growth!==void 0&&React.createElement("div",{style:{...e.statChange,color:t.member_growth>=0?"#43b581":"#f04747"}},React.createElement(i,{style:{transform:t.member_growth<0?"rotate(180deg)":"none"}}),Math.abs(t.member_growth),"% this period"))),React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(s,{style:{color:"#43b581",fontSize:"24px"}})),React.createElement("div",{style:e.statInfo},React.createElement("div",{style:e.statLabel},"Active Members"),React.createElement("div",{style:e.statValue},l(t.active_members||0)),React.createElement("div",{style:e.statSubtext},t.total_members?(t.active_members/t.total_members*100).toFixed(1):0,"% of total"))),React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement("span",{style:{fontSize:"24px"}},"ðŸ’¬")),React.createElement("div",{style:e.statInfo},React.createElement("div",{style:e.statLabel},"Messages Sent"),React.createElement("div",{style:e.statValue},l(t.messages_sent||0)),t.message_growth!==void 0&&React.createElement("div",{style:{...e.statChange,color:t.message_growth>=0?"#43b581":"#f04747"}},React.createElement(i,{style:{transform:t.message_growth<0?"rotate(180deg)":"none"}}),Math.abs(t.message_growth),"% this period"))),React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(E,{style:{color:"#faa61a",fontSize:"24px"}})),React.createElement("div",{style:e.statInfo},React.createElement("div",{style:e.statLabel},"New Joins"),React.createElement("div",{style:e.statValue},l(t.new_joins||0)),React.createElement("div",{style:e.statSubtext},t.retention_rate?`${t.retention_rate}% retention`:"")))),t.daily_stats&&React.createElement("div",{style:e.chartSection},React.createElement("h3",{style:e.sectionTitle},"Daily Activity"),React.createElement("div",{style:e.chart},t.daily_stats.map((a,r)=>React.createElement("div",{key:r,style:e.chartBar},React.createElement("div",{style:{...e.chartBarFill,height:`${a.count/Math.max(...t.daily_stats.map(R=>R.count))*100}%`}}),React.createElement("div",{style:e.chartLabel},new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})))))),t.top_contributors&&React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"Top Contributors"),React.createElement("div",{style:e.contributorsList},t.top_contributors.slice(0,10).map((a,r)=>React.createElement("div",{key:r,style:e.contributorCard},React.createElement("div",{style:e.contributorRank},"#",r+1),React.createElement("div",{style:e.contributorInfo},React.createElement("div",{style:e.contributorName},a.username),React.createElement("div",{style:e.contributorStat},l(a.message_count)," messages"))))))):React.createElement("div",{style:e.empty},"No metrics available"))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"1100px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},select:{padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px",width:"200px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",gap:"16px"},statIcon:{minWidth:"48px"},statInfo:{flex:1},statLabel:{fontSize:"13px",color:"#99aab5",marginBottom:"6px"},statValue:{fontSize:"28px",fontWeight:"700",color:"#ffffff",marginBottom:"6px"},statChange:{fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},statSubtext:{fontSize:"12px",color:"#99aab5"},chartSection:{marginBottom:"32px"},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},chart:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",height:"200px",padding:"20px",backgroundColor:"#2c2f33",borderRadius:"8px"},chartBar:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},chartBarFill:{width:"80%",backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",minHeight:"4px"},chartLabel:{fontSize:"10px",color:"#99aab5",textAlign:"center"},section:{marginBottom:"32px"},contributorsList:{display:"flex",flexDirection:"column",gap:"8px"},contributorCard:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"12px",display:"flex",gap:"16px",alignItems:"center"},contributorRank:{fontSize:"16px",fontWeight:"700",color:"#5865f2",minWidth:"40px"},contributorInfo:{flex:1},contributorName:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},contributorStat:{fontSize:"12px",color:"#99aab5"}};export{_ as default};
