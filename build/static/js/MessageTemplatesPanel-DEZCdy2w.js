import{r,d as e,aB as m,i as h,aC as v,bU as C,E as S}from"./react-core-DrOm_csO.js";import{t as n}from"./index-BYhWpPLp.js";const B=({fetchWithAuth:i,apiBaseUrl:s,onSelectTemplate:u,onClose:c})=>{const[x,g]=r.useState([]),[a,d]=r.useState({name:"",content:""}),[y,f]=r.useState(!0);r.useEffect(()=>{p()},[]);const p=async()=>{try{f(!0);const t=await i(`${s}/templates/`);if(t.ok){const l=await t.json();g(l)}}catch(t){console.error("Şablon yükleme hatası:",t)}finally{f(!1)}},b=async()=>{if(!a.name.trim()||!a.content.trim()){n.error("İsim ve içerik gerekli");return}try{(await i(`${s}/templates/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(n.success("Şablon oluşturuldu"),d({name:"",content:""}),p()):n.error("Şablon oluşturulamadı")}catch(t){console.error("Şablon oluşturma hatası:",t),n.error("Bir hata oluştu")}},E=async t=>{try{(await i(`${s}/templates/${t}/`,{method:"DELETE"})).ok?(n.success("Şablon silindi"),p()):n.error("Şablon silinemedi")}catch(l){console.error("Şablon silme hatası:",l),n.error("Bir hata oluştu")}},k=t=>{u&&(u(t.content),n.success(`"${t.name}" şablonu kullanıldı`),c())};return e.createElement("div",{style:o.overlay,onClick:c},e.createElement("div",{style:o.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:o.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(m,{style:{color:"#5865f2"}}),e.createElement("h2",{style:{margin:0}},"Mesaj Şablonları")),e.createElement(h,{onClick:c,style:o.closeBtn})),e.createElement("div",{style:o.createSection},e.createElement("input",{type:"text",value:a.name,onChange:t=>d({...a,name:t.target.value}),placeholder:"Şablon adı (örn: Toplantı Daveti)",style:o.input}),e.createElement("textarea",{value:a.content,onChange:t=>d({...a,content:t.target.value}),placeholder:"Şablon içeriği...",style:o.textarea,rows:3}),e.createElement("button",{onClick:b,style:o.createBtn},e.createElement(v,null)," Şablon Oluştur")),e.createElement("div",{style:o.content},y?e.createElement("div",{style:o.loading},"Yükleniyor..."):x.length===0?e.createElement("div",{style:o.empty},e.createElement(m,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),e.createElement("p",null,"Henüz şablon yok"),e.createElement("p",{style:{fontSize:"12px",color:"#888"}},"Sık kullandığınız mesajları şablon olarak kaydedin")):x.map(t=>e.createElement("div",{key:t.id,style:o.templateCard},e.createElement("div",{style:o.templateIcon},e.createElement(m,{style:{color:"#5865f2"}})),e.createElement("div",{style:o.templateContent},e.createElement("div",{style:o.templateName},t.name),e.createElement("div",{style:o.templatePreview},t.content.substring(0,100),t.content.length>100&&"..."),e.createElement("div",{style:o.templateMeta},t.use_count||0," kez kullanıldı")),e.createElement("div",{style:o.templateActions},e.createElement("button",{onClick:()=>k(t),style:o.useBtn,title:"Şablonu kullan"},e.createElement(C,null)," Kullan"),e.createElement("button",{onClick:()=>E(t.id),style:o.deleteBtn,title:"Şablonu sil"},e.createElement(S,null))))))))},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},createSection:{padding:"20px",borderBottom:"1px solid #333"},input:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"10px"},textarea:{width:"100%",padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",resize:"vertical",marginBottom:"10px"},createBtn:{width:"100%",backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},templateCard:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},templateIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#5865f21a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},templateContent:{flex:1},templateName:{fontWeight:"600",fontSize:"16px",marginBottom:"6px",color:"#dcddde"},templatePreview:{fontSize:"13px",color:"#888",lineHeight:"1.4",marginBottom:"6px"},templateMeta:{fontSize:"12px",color:"#666"},templateActions:{display:"flex",flexDirection:"column",gap:"8px"},useBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},deleteBtn:{backgroundColor:"#f04747",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{B as default};
