import{r as o,j as e}from"./react-core-D6cE4lil.js";import{y as a}from"./ui-vendor-CZOhtEfS.js";function w({vanityPath:c,fetchWithAuth:u,onClose:i,apiBaseUrl:x}){const[y,p]=o.useState(!0),[f,g]=o.useState(null),[n,b]=o.useState(null),[s,h]=o.useState(!1);o.useEffect(()=>{m()},[c]);const m=async()=>{try{p(!0);const r=await fetch(`${x}/vanity/${c}/`);if(!r.ok)throw new Error("Sunucu bulunamadƒ±");if(!(r.headers.get("content-type")||"").includes("application/json"))throw new Error("Sunucu bulunamadƒ±");const d=await r.json();b(d)}catch(r){g(r.message)}finally{p(!1)}},v=async()=>{if(n){if(!u){a.warning("üîê Sunucuya katƒ±lmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!"),window.location.hash="#/";return}try{h(!0);const r=await u(`${x}/servers/${n.server_id}/join/`,{method:"POST"});if(!r.ok){const l=await r.json().catch(()=>({})),d=l.error||l.message||"Sunucuya katƒ±lƒ±namadƒ±";throw new Error(d)}a.success(`‚úÖ ${n.server_name} sunucusuna katƒ±ldƒ±nƒ±z!`),i?i():window.location.hash="#/"}catch(r){r.message.includes("zaten")?a.info("‚ÑπÔ∏è Zaten bu sunucudasƒ±nƒ±z!"):a.error("‚ùå "+r.message)}finally{h(!1)}}};return y?e.jsx("div",{style:t.container,children:e.jsxs("div",{style:t.card,children:[e.jsx("div",{style:t.loadingSpinner,children:"üîÑ"}),e.jsx("p",{style:t.loadingText,children:"Sunucu bilgileri y√ºkleniyor..."})]})}):f?e.jsx("div",{style:t.container,children:e.jsxs("div",{style:t.card,children:[e.jsx("h1",{style:t.errorTitle,children:"‚ùå Sunucu Bulunamadƒ±"}),e.jsx("p",{style:t.errorText,children:f}),e.jsx("button",{style:t.backButton,onClick:()=>{i?i():window.location.hash="#/"},children:"Ana Sayfaya D√∂n"})]})}):e.jsx("div",{style:t.container,children:e.jsxs("div",{style:t.card,children:[e.jsx("div",{style:t.avatarContainer,children:n.server_avatar?e.jsx("img",{src:n.server_avatar,alt:n.server_name,style:t.avatar}):e.jsx("div",{style:t.defaultAvatar,children:n.server_name.charAt(0).toUpperCase()})}),e.jsx("h1",{style:t.serverName,children:n.server_name}),e.jsxs("p",{style:t.inviteText,children:["seni ",e.jsx("strong",{children:n.server_name})," sunucusuna davet etti"]}),e.jsxs("div",{style:t.statsContainer,children:[e.jsxs("div",{style:t.stat,children:[e.jsx("span",{style:t.onlineDot,children:"‚óè"}),e.jsxs("span",{style:t.statText,children:[e.jsx("strong",{children:n.online_count})," √áevrimi√ßi"]})]}),e.jsxs("div",{style:t.stat,children:[e.jsx("span",{style:t.memberDot,children:"‚óè"}),e.jsxs("span",{style:t.statText,children:[e.jsx("strong",{children:n.member_count})," √úye"]})]})]}),e.jsx("button",{style:{...t.joinButton,...s?t.joinButtonDisabled:{}},onClick:v,disabled:s,children:s?"Katƒ±lƒ±nƒ±yor...":`${n.server_name} Sunucusuna Katƒ±l`}),e.jsxs("p",{style:t.vanityInfo,children:["pawscord.com/join/",n.vanity_path]})]})})}const t={container:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",overflow:"auto"},card:{backgroundColor:"#36393f",borderRadius:"12px",padding:"40px",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.3)"},avatarContainer:{display:"flex",justifyContent:"center",marginBottom:"20px"},avatar:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"4px solid #5865f2"},defaultAvatar:{width:"100px",height:"100px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:"bold",color:"#fff",border:"4px solid #4752c4"},serverName:{fontSize:"28px",fontWeight:"bold",color:"#fff",marginBottom:"10px"},inviteText:{fontSize:"16px",color:"#b9bbbe",marginBottom:"25px"},statsContainer:{display:"flex",justifyContent:"center",gap:"30px",marginBottom:"30px",padding:"15px",backgroundColor:"#2f3136",borderRadius:"8px"},stat:{display:"flex",alignItems:"center",gap:"8px"},onlineDot:{color:"#3ba55d",fontSize:"12px"},memberDot:{color:"#747f8d",fontSize:"12px"},statText:{color:"#b9bbbe",fontSize:"14px"},joinButton:{width:"100%",padding:"15px",backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s",marginBottom:"15px"},joinButtonDisabled:{backgroundColor:"#4752c4",cursor:"not-allowed",opacity:.6},vanityInfo:{fontSize:"12px",color:"#72767d",marginTop:"10px"},loadingSpinner:{fontSize:"48px",marginBottom:"20px",animation:"spin 1s linear infinite"},loadingText:{color:"#b9bbbe",fontSize:"16px"},errorTitle:{fontSize:"24px",color:"#ed4245",marginBottom:"15px"},errorText:{color:"#b9bbbe",marginBottom:"20px"},backButton:{padding:"12px 24px",backgroundColor:"#4f545c",color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer"}};export{w as default};
