var V=Object.defineProperty;var Y=e=>{throw TypeError(e)};var st=(e,i,t)=>i in e?V(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var h=(e,i)=>V(e,"name",{value:i,configurable:!0});var C=(e,i,t)=>st(e,typeof i!="symbol"?i+"":i,t),x=(e,i,t)=>i.has(e)||Y("Cannot "+t);var a=(e,i,t)=>(x(e,i,"read from private field"),t?t.call(e):i.get(e)),f=(e,i,t)=>i.has(e)?Y("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(e):i.set(e,t),n=(e,i,t,s)=>(x(e,i,"write to private field"),s?s.call(e,t):i.set(e,t),t),J=(e,i,t)=>(x(e,i,"access private method"),t);import{a as nt}from"./react-core-Djgtqrmb.js";const rt="https://open.spotify.com",ot=/open\.spotify\.com\/(\w+)\/(\w+)/i,at="https://open.spotify.com/embed-podcast/iframe-api/v1",lt="SpotifyIframeApi",ut="onSpotifyIframeApiReady";function K(e,i={}){const t={src:tt(e,i),scrolling:"no",frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"};return`
    <style>
      :host {
        display: inline-block;
        min-width: 160px;
        min-height: 80px;
        position: relative;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      :host(:not([controls])) {
        display: none !important;
      }
    </style>
    <iframe${ct(t)}></iframe>
  `}h(K,"getTemplateHTML");function tt(e,i){var t,s,u;if(!e.src)return;const c=e.src.match(ot),T=c&&c[1],w=c&&c[2],P={t:(t=i.config)==null?void 0:t.startAt,theme:((s=i.config)==null?void 0:s.theme)==="dark"?"0":null},l=(u=i.config)!=null&&u.preferVideo?"/video":"";return`${rt}/embed/${T}/${w}${l}?${ht(P)}`}h(tt,"serializeIframeUrl");var k,H,I,p,m,v,g,_,A,N,B,et;const M=class M extends(globalThis.HTMLElement??class{}){constructor(){super();f(this,B);C(this,"loadComplete",new $);f(this,k);f(this,H);f(this,I);f(this,p,!1);f(this,m,!1);f(this,v,!0);f(this,g,0);f(this,_,NaN);f(this,A,!1);f(this,N,null);J(this,B,et).call(this,"config")}async load(){var t,s,u;if(a(this,k))return;a(this,H)&&(this.loadComplete=new $),n(this,H,!0),await n(this,k,Promise.resolve()),n(this,k,null),n(this,p,!1),n(this,m,!1),n(this,g,0),n(this,_,NaN),n(this,A,!1),this.dispatchEvent(new Event("emptied"));let c=this.api;if(this.api=null,!this.src)return;this.dispatchEvent(new Event("loadstart"));const T={t:(t=this.config)==null?void 0:t.startAt,theme:((s=this.config)==null?void 0:s.theme)==="dark"?"0":null,preferVideo:(u=this.config)==null?void 0:u.preferVideo};if(a(this,I))this.api=c,this.api.iframeElement.src=tt(Q(this.attributes),this);else{n(this,I,!0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=K(Q(this.attributes),this));let w=this.shadowRoot.querySelector("iframe");const P=await ft(at,lt,ut);this.api=await new Promise(l=>P.createController(w,T,l)),this.api.iframeElement=w,this.api.addListener("ready",()=>{this.dispatchEvent(new Event("loadedmetadata")),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("volumechange"))}),this.api.addListener("playback_update",l=>{if(a(this,m)&&a(this,v)&&(l.data.isBuffering||!l.data.isPaused)){n(this,m,!1),this.currentTime=1;return}if(l.data.duration/1e3!==a(this,_)&&(n(this,m,!1),n(this,_,l.data.duration/1e3),this.dispatchEvent(new Event("durationchange"))),l.data.position/1e3!==a(this,g)&&(n(this,A,!1),n(this,m,!1),n(this,g,l.data.position/1e3),this.dispatchEvent(new Event("timeupdate"))),!a(this,p)&&!a(this,v)&&l.data.isPaused){n(this,v,!0),this.dispatchEvent(new Event("pause"));return}if(a(this,v)&&(l.data.isBuffering||!l.data.isPaused)){n(this,v,!1),this.dispatchEvent(new Event("play")),n(this,p,l.data.isBuffering),a(this,p)?this.dispatchEvent(new Event("waiting")):this.dispatchEvent(new Event("playing"));return}if(a(this,p)&&!l.data.isPaused){n(this,p,!1),this.dispatchEvent(new Event("playing"));return}if(!this.paused&&!this.seeking&&!a(this,m)&&Math.ceil(this.currentTime)>=this.duration){if(n(this,m,!0),this.loop){this.currentTime=1;return}this.continuous||(this.pause(),this.dispatchEvent(new Event("ended")));return}})}this.loadComplete.resolve(),await this.loadComplete}async attributeChangedCallback(t,s,u){if(s!==u&&t==="src"){this.load();return}}async play(){var t;return n(this,v,!1),n(this,p,!0),this.dispatchEvent(new Event("play")),await this.loadComplete,(t=this.api)==null?void 0:t.resume()}async pause(){var t;return await this.loadComplete,(t=this.api)==null?void 0:t.pause()}get config(){return a(this,N)}set config(t){n(this,N,t)}get paused(){return a(this,v)??!0}get muted(){return!1}set muted(t){}get volume(){return 1}set volume(t){}get ended(){return Math.ceil(this.currentTime)>=this.duration}get seeking(){return a(this,A)}get loop(){return this.hasAttribute("loop")}set loop(t){this.loop!=t&&this.toggleAttribute("loop",!!t)}get currentTime(){return a(this,g)}set currentTime(t){if(this.currentTime==t)return;n(this,A,!0);let s=a(this,g);n(this,g,t),this.dispatchEvent(new Event("timeupdate")),n(this,g,s),this.loadComplete.then(()=>{var u;(u=this.api)==null||u.seek(t)})}get duration(){return a(this,_)}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",`${t}`)}};k=new WeakMap,H=new WeakMap,I=new WeakMap,p=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap,_=new WeakMap,A=new WeakMap,N=new WeakMap,B=new WeakSet,et=h(function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const s=this[t];delete this[t],this[t]=s}},"#upgradeProperty"),h(M,"SpotifyAudioElement"),C(M,"getTemplateHTML",K),C(M,"shadowRootOptions",{mode:"open"}),C(M,"observedAttributes",["controls","loop","src"]);let O=M;function ct(e){let i="";for(const t in e){const s=e[t];s===""?i+=` ${t}`:i+=` ${t}="${s}"`}return i}h(ct,"serializeAttributes");function ht(e){return String(new URLSearchParams(dt(e)))}h(ht,"serialize");function dt(e){let i={};for(let t in e){let s=e[t];s===!0||s===""?i[t]=1:s===!1?i[t]=0:s!=null&&(i[t]=s)}return i}h(dt,"boolToBinary");function Q(e){let i={};for(let t of e)i[t.name]=t.value;return i}h(Q,"namedNodeMapToObject");const z={};async function ft(e,i,t){return z[e]?z[e]:self[i]?Promise.resolve(self[i]):z[e]=new Promise(function(s,u){const c=document.createElement("script");c.src=e;const T=h(w=>s(w),"ready");self[t]=T,c.onload=()=>!t,c.onerror=u,document.head.append(c)})}h(ft,"loadScript");const D=class D extends Promise{constructor(i=()=>{}){let t,s;super((u,c)=>{i(u,c),t=u,s=c}),this.resolve=t,this.reject=s}};h(D,"PublicPromise");let $=D;globalThis.customElements&&!globalThis.customElements.get("spotify-audio")&&globalThis.customElements.define("spotify-audio",O);var pt=O,mt=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),vt={className:"class",htmlFor:"for"};function it(e){return e.toLowerCase()}h(it,"defaultToAttributeName");function X(e){if(typeof e=="boolean")return e?"":void 0;if(typeof e!="function"&&!(typeof e=="object"&&e!==null))return e}h(X,"defaultToAttributeValue");function gt({react:e,tagName:i,elementClass:t,events:s,displayName:u,defaultProps:c,toAttributeName:T=it,toAttributeValue:w=X}){const P=Number.parseInt(e.version)>=19,l=e.forwardRef((U,R)=>{var q,F;const y=e.useRef(null),j=e.useRef(new Map),W={},G={},E={},S={};for(const[r,o]of Object.entries(U)){if(mt.has(r)){E[r]=o;continue}const d=T(vt[r]??r);if(t.prototype&&r in t.prototype&&!(r in(((q=globalThis.HTMLElement)==null?void 0:q.prototype)??{}))&&!((F=t.observedAttributes)!=null&&F.some(L=>L===d))){S[r]=o;continue}if(r.startsWith("on")){W[r]=o;continue}const b=w(o);if(d&&b!=null&&(G[d]=String(b),P||(E[d]=b)),d&&P){const L=X(o);b!==L?E[d]=b:E[d]=o}}if(typeof window<"u"){for(const r in W){const o=W[r],d=r.endsWith("Capture"),b=(s?.[r]??r.slice(2).toLowerCase()).slice(0,d?-7:void 0);e.useLayoutEffect(()=>{const L=y?.current;if(!(!L||typeof o!="function"))return L.addEventListener(b,o,d),()=>{L.removeEventListener(b,o,d)}},[y?.current,o])}e.useLayoutEffect(()=>{if(y.current===null)return;const r=new Map;for(const o in S)Z(y.current,o,S[o]),j.current.delete(o),r.set(o,S[o]);for(const[o,d]of j.current)Z(y.current,o,void 0);j.current=r})}if(typeof window>"u"&&t?.getTemplateHTML&&t?.shadowRootOptions){const{mode:r,delegatesFocus:o}=t.shadowRootOptions,d=e.createElement("template",{shadowrootmode:r,shadowrootdelegatesfocus:o,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(G,U)},key:"ce-la-react-ssr-template-shadow-root"});E.children=[d,E.children]}return e.createElement(i,{...c,...E,ref:e.useCallback(r=>{y.current=r,typeof R=="function"?R(r):R!==null&&(R.current=r)},[R])},E.children)});return l.displayName=u??t.name,l}h(gt,"createComponent");function Z(e,i,t){var s;e[i]=t,t==null&&i in(((s=globalThis.HTMLElement)==null?void 0:s.prototype)??{})&&e.removeAttribute(i)}h(Z,"setProperty");var Et=gt({react:nt,tagName:"spotify-audio",elementClass:pt,toAttributeName(e){return e==="muted"?"":e==="defaultMuted"?"muted":it(e)}});export{Et as default};
