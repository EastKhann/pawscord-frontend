import{r as n,D as E,l as z,al as F,cs as B,v as I}from"./react-core-B6hadH-M.js";import{t as r}from"./index-D_6pZib5.js";const D=({fetchWithAuth:i,apiBaseUrl:l,serverId:s,onClose:p})=>{const[g,b]=n.useState([]),[R,j]=n.useState([]),[k,v]=n.useState([]),[u,x]=n.useState(null),[c,y]=n.useState(""),[C,f]=n.useState(!0),[o,d]=n.useState("custom");n.useEffect(()=>{m(),o==="trending"&&S(),o==="suggestions"&&h()},[o]);const m=async()=>{try{f(!0);const e=await i(`${l}/emoji/list/?server_id=${s}`);if(e.ok){const a=await e.json();b(a)}}catch(e){console.error("Emoji yükleme hatası:",e)}finally{f(!1)}},S=async()=>{try{const e=await i(`${l}/emoji/trending/?server_id=${s}`);if(e.ok){const a=await e.json();j(a)}}catch(e){console.error("Trending yükleme hatası:",e)}},h=async()=>{try{const e=await i(`${l}/emoji/suggestions/?server_id=${s}`);if(e.ok){const a=await e.json();v(a)}}catch(e){console.error("Öneriler yükleme hatası:",e)}},T=async()=>{if(!u||!c.trim()){r.error("Emoji dosyası ve ismi gerekli");return}const e=new FormData;e.append("file",u),e.append("name",c),e.append("server_id",s);try{(await i(`${l}/emoji/upload/`,{method:"POST",body:e})).ok?(r.success("Emoji yüklendi"),x(null),y(""),m()):r.error("Emoji yüklenemedi")}catch(a){console.error("Upload hatası:",a),r.error("Bir hata oluştu")}},w=async e=>{try{(await i(`${l}/emoji/${e}/delete/`,{method:"DELETE"})).ok?(r.success("Emoji silindi"),m()):r.error("Emoji silinemedi")}catch(a){console.error("Delete hatası:",a),r.error("Bir hata oluştu")}};return React.createElement("div",{style:t.overlay,onClick:p},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(E,{style:{color:"#faa61a"}}),React.createElement("h2",{style:{margin:0}},"Emoji Yönetimi")),React.createElement(z,{onClick:p,style:t.closeBtn})),React.createElement("div",{style:t.tabs},React.createElement("button",{onClick:()=>d("custom"),style:{...t.tab,...o==="custom"?t.activeTab:{}}},"Özel Emojiler"),React.createElement("button",{onClick:()=>d("trending"),style:{...t.tab,...o==="trending"?t.activeTab:{}}},React.createElement(F,null)," Trend Olanlar"),React.createElement("button",{onClick:()=>d("suggestions"),style:{...t.tab,...o==="suggestions"?t.activeTab:{}}},"Öneriler")),o==="custom"&&React.createElement(React.Fragment,null,React.createElement("div",{style:t.uploadSection},React.createElement("input",{type:"file",accept:"image/png,image/gif,image/jpeg",onChange:e=>x(e.target.files[0]),style:t.fileInput}),React.createElement("input",{type:"text",value:c,onChange:e=>y(e.target.value),placeholder:"Emoji ismi (örn: pog, kekw)",style:t.input}),React.createElement("button",{onClick:T,style:t.uploadBtn},React.createElement(B,null)," Yükle")),React.createElement("div",{style:t.content},C?React.createElement("div",{style:t.loading},"Yükleniyor..."):g.length===0?React.createElement("div",{style:t.empty},React.createElement(E,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),React.createElement("p",null,"Henüz özel emoji yok")):React.createElement("div",{style:t.emojiGrid},g.map(e=>React.createElement("div",{key:e.id,style:t.emojiCard},React.createElement("img",{src:e.url,alt:e.name,style:t.emojiImage}),React.createElement("div",{style:t.emojiName},":",e.name,":"),React.createElement("button",{onClick:()=>w(e.id),style:t.deleteEmojiBtn},React.createElement(I,null))))))),o==="trending"&&React.createElement("div",{style:t.content},React.createElement("div",{style:t.emojiGrid},R.map((e,a)=>React.createElement("div",{key:a,style:t.emojiCard},React.createElement("img",{src:e.url,alt:e.name,style:t.emojiImage}),React.createElement("div",{style:t.emojiName},":",e.name,":"),React.createElement("div",{style:t.usageCount},e.usage_count," kullanım"))))),o==="suggestions"&&React.createElement("div",{style:t.content},React.createElement("div",{style:t.emojiGrid},k.map((e,a)=>React.createElement("div",{key:a,style:t.suggestionCard},React.createElement("img",{src:e.emoji_url,alt:e.emoji_name,style:t.emojiImage}),React.createElement("div",{style:t.emojiName},":",e.emoji_name,":"),React.createElement("div",{style:t.suggester},"Öneren: ",e.suggested_by)))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},tabs:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #333"},tab:{backgroundColor:"transparent",color:"#888",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},activeTab:{backgroundColor:"#5865f2",color:"#fff"},uploadSection:{display:"flex",gap:"10px",padding:"20px",borderBottom:"1px solid #333"},fileInput:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},input:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},uploadBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},emojiGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"15px"},emojiCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center",position:"relative"},emojiImage:{width:"64px",height:"64px",objectFit:"contain",marginBottom:"10px"},emojiName:{fontSize:"13px",fontWeight:"500",color:"#dcddde",marginBottom:"4px",fontFamily:"monospace"},usageCount:{fontSize:"11px",color:"#888"},deleteEmojiBtn:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#f04747",color:"#fff",border:"none",padding:"6px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},suggestionCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center"},suggester:{fontSize:"11px",color:"#888",marginTop:"6px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{D as default};
