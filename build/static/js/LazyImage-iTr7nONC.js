import{a as j,r as t,n as i}from"./react-core-Cj7FUMmY.js";const z=(()=>{if(typeof window>"u")return!1;const e=document.createElement("canvas");return e.getContext&&e.getContext("2d")?e.toDataURL("image/webp").indexOf("data:image/webp")===0:!1})(),I=(e,l="medium",n=85)=>{if(!e||e.startsWith("blob:")||e.startsWith("data:")||e.includes("?"))return e;const r={small:32,medium:64,large:128,xlarge:256},a=r[l]||r.medium,c=new URLSearchParams({w:a,h:a,q:n,f:z?"webp":"auto"});return`${e}?${c.toString()}`},R=({src:e,alt:l="",size:n="medium",quality:r=85,style:a={},className:c="",onLoad:p=()=>{},showBlurPlaceholder:h=!0,...x})=>{const[d,v]=t.useState(!1),[u,w]=t.useState(!1),[f,m]=t.useState(null),[y,g]=t.useState(!1),s=t.useRef(null);t.useEffect(()=>{const o=new IntersectionObserver(L=>{L.forEach(C=>{C.isIntersecting&&(v(!0),o.disconnect())})},{rootMargin:"100px",threshold:.01});return s.current&&o.observe(s.current),()=>{o&&s.current&&o.unobserve(s.current)}},[]),t.useEffect(()=>{if(d&&e){const o=I(e,n,r);m(o)}},[d,e,n,r]);const E=()=>{w(!0),g(!1),p()},S=()=>{g(!0),f!==e&&m(e)},b='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect fill="%232b2d31" width="100" height="100"/%3E%3C/svg%3E';return i.jsxs("div",{ref:s,style:{position:"relative",overflow:"hidden",...a},className:c,children:[h&&!u&&i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#2b2d31",backgroundImage:`url("${b}")`,backgroundSize:"cover",filter:"blur(10px)",transform:"scale(1.1)",transition:"opacity 0.3s ease-in-out",opacity:u?0:1}}),i.jsx("img",{src:f||b,alt:l,style:{width:"100%",height:"100%",objectFit:"cover",transition:"opacity 0.3s ease-in-out",opacity:u?1:0},onLoad:E,onError:S,loading:"lazy",...x}),y&&i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#2b2d31",color:"#b9bbbe",fontSize:"12px"},children:"‚ùå"})]})},$=j.memo(R);export{$ as L};
