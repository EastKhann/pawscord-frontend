var z=Object.defineProperty;var n=(l,a)=>z(l,"name",{value:a,configurable:!0});import{r,j as e}from"./react-core-Djgtqrmb.js";import{aB as b,a as R,t as I,a5 as B}from"./icons-vendor-BMXAt4pj.js";const E=n(({serverId:l,onClose:a,fetchWithAuth:u,apiBaseUrl:g})=>{const[y,m]=r.useState([]),[j,h]=r.useState(!0),[i,v]=r.useState("all"),[d,S]=r.useState(""),[c,w]=r.useState("7days");r.useEffect(()=>{k()},[l,i,c]);const k=n(async()=>{h(!0);try{const t=new URLSearchParams({filter:i,range:c}),s=await u(`${g}/servers/${l}/audit-logs/?${t}`);if(s.ok){const p=await s.json();m(p.logs||[])}}catch{}finally{h(!1)}},"loadAuditLogs"),C=n(async()=>{try{const s=await(await u(`${g}/servers/${l}/audit-logs/export/`)).blob(),p=window.URL.createObjectURL(s),x=document.createElement("a");x.href=p,x.download=`audit-log-${l}-${Date.now()}.csv`,x.click()}catch{}},"exportLogs"),L=n(t=>({member_join:"ðŸ‘‹",member_leave:"ðŸ‘‹",member_kick:"ðŸ‘¢",member_ban:"ðŸ”¨",channel_create:"âž•",channel_delete:"ðŸ—‘ï¸",channel_update:"âœï¸",role_create:"ðŸŽ­",role_delete:"ðŸ—‘ï¸",role_update:"âœï¸",message_delete:"ðŸ—‘ï¸",message_bulk_delete:"ðŸ—‘ï¸",server_update:"âš™ï¸",invite_create:"ðŸ”—",webhook_create:"ðŸª",webhook_delete:"ðŸ—‘ï¸"})[t]||"ðŸ“","getActionIcon"),_=n(t=>t.includes("delete")||t.includes("kick")||t.includes("ban")?"#ed4245":t.includes("create")||t.includes("join")?"#3ba55d":"#faa61a","getActionColor"),f=y.filter(t=>t.description?.toLowerCase().includes(d.toLowerCase())||t.user?.toLowerCase().includes(d.toLowerCase()));return e.jsx("div",{style:o.overlay,children:e.jsxs("div",{style:o.panel,children:[e.jsxs("div",{style:o.header,children:[e.jsxs("div",{style:o.headerLeft,children:[e.jsx(b,{size:20,color:"#5865f2"}),e.jsx("h2",{style:o.title,children:"Denetim GÃ¼nlÃ¼ÄŸÃ¼"})]}),e.jsx("button",{onClick:a,style:o.closeButton,children:e.jsx(R,{size:20})})]}),e.jsxs("div",{style:o.filters,children:[e.jsxs("div",{style:o.searchBox,children:[e.jsx(I,{size:14,color:"#b9bbbe"}),e.jsx("input",{type:"text",placeholder:"Ara...",value:d,onChange:n(t=>S(t.target.value),"onChange"),style:o.searchInput})]}),e.jsxs("select",{value:i,onChange:n(t=>v(t.target.value),"onChange"),style:o.select,children:[e.jsx("option",{value:"all",children:"TÃ¼m Eylemler"}),e.jsx("option",{value:"members",children:"Ãœye Ä°ÅŸlemleri"}),e.jsx("option",{value:"channels",children:"Kanal Ä°ÅŸlemleri"}),e.jsx("option",{value:"roles",children:"Rol Ä°ÅŸlemleri"}),e.jsx("option",{value:"messages",children:"Mesaj Ä°ÅŸlemleri"}),e.jsx("option",{value:"server",children:"Sunucu Ä°ÅŸlemleri"})]}),e.jsxs("select",{value:c,onChange:n(t=>w(t.target.value),"onChange"),style:o.select,children:[e.jsx("option",{value:"1day",children:"Son 24 Saat"}),e.jsx("option",{value:"7days",children:"Son 7 GÃ¼n"}),e.jsx("option",{value:"30days",children:"Son 30 GÃ¼n"}),e.jsx("option",{value:"90days",children:"Son 90 GÃ¼n"})]}),e.jsxs("button",{onClick:C,style:o.exportButton,children:[e.jsx(B,{size:14}),e.jsx("span",{children:"DÄ±ÅŸa Aktar"})]})]}),e.jsx("div",{style:o.logsList,children:j?e.jsx("div",{style:o.loading,children:"YÃ¼kleniyor..."}):f.length===0?e.jsxs("div",{style:o.empty,children:[e.jsx(b,{size:48,color:"#4e5058"}),e.jsx("p",{children:"HenÃ¼z log kaydÄ± yok"})]}):f.map((t,s)=>e.jsxs("div",{style:o.logItem,children:[e.jsx("div",{style:o.logIcon,children:L(t.action)}),e.jsxs("div",{style:o.logContent,children:[e.jsxs("div",{style:o.logDescription,children:[e.jsx("span",{style:{color:_(t.action),fontWeight:"bold"},children:t.user})," ",t.description]}),e.jsxs("div",{style:o.logMeta,children:[e.jsx("span",{children:new Date(t.timestamp).toLocaleString("tr-TR")}),t.target&&e.jsxs("span",{children:[" â€¢ Hedef: ",t.target]})]})]})]},s))})]})})},"AuditLogPanel"),o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"100%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.4)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},title:{margin:0,fontSize:"20px",fontWeight:"bold",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"all 0.2s"},filters:{display:"flex",gap:"12px",padding:"16px 20px",borderBottom:"1px solid #202225",flexWrap:"wrap"},searchBox:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#202225",padding:"8px 12px",borderRadius:"4px",flex:1,minWidth:"200px"},searchInput:{background:"none",border:"none",color:"#dcddde",fontSize:"14px",outline:"none",width:"100%"},select:{backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",fontSize:"14px",cursor:"pointer",outline:"none"},exportButton:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},logsList:{flex:1,overflowY:"auto",padding:"16px 20px"},loading:{textAlign:"center",padding:"40px",color:"#b9bbbe"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},logItem:{display:"flex",gap:"12px",padding:"12px",marginBottom:"8px",backgroundColor:"#36393f",borderRadius:"4px",borderLeft:"3px solid #5865f2",transition:"all 0.2s"},logIcon:{fontSize:"24px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},logContent:{flex:1},logDescription:{color:"#dcddde",fontSize:"14px",marginBottom:"4px"},logMeta:{fontSize:"12px",color:"#72767d"}};export{E as default};
