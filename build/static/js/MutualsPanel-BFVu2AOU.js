import{r as a,aU as r,l as L,X as o,w as O,a1 as $,c8 as x,aY as g,K as U,ay as _,ch as j}from"./react-core-B6hadH-M.js";const K=({userId:k,username:u,onClose:d,onNavigateToUser:E,onNavigateToServer:R})=>{const[l,v]=a.useState("friends"),[n,m]=a.useState([]),[s,i]=a.useState([]),[h,N]=a.useState(!0),[t,b]=a.useState(""),y=localStorage.getItem("access_token");a.useEffect(()=>{F()},[k]);const F=async()=>{N(!0);try{const e=await fetch(`/api/users/${u}/mutuals/`,{headers:{Authorization:`Bearer ${y}`}});if(e.ok){const c=await e.json();m(c.friends||[]),i(c.servers||[])}else m([]),i([])}catch{m([]),i([])}N(!1)},S=()=>t?n.filter(e=>e.username.toLowerCase().includes(t.toLowerCase())):n,C=()=>t?s.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())):s,w=e=>({online:"#4caf50",idle:"#ffc107",dnd:"#f44336",offline:"#666"})[e]||"#666",M=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),A=e=>{j.info(`${e.username} ile sohbet başlatılıyor...`)},p=S(),f=C();return React.createElement("div",{className:"mutuals-overlay",onClick:e=>e.target.className==="mutuals-overlay"&&d()},React.createElement("div",{className:"mutuals-panel"},React.createElement("div",{className:"panel-header"},React.createElement("h2",null,React.createElement(r,null)," Ortak Bağlantılar"),React.createElement("span",{className:"target-user"},"@",u),React.createElement("button",{className:"close-btn",onClick:d},React.createElement(L,null))),React.createElement("div",{className:"tabs"},React.createElement("button",{className:`tab ${l==="friends"?"active":""}`,onClick:()=>v("friends")},React.createElement(r,null),React.createElement("span",null,"Ortak Arkadaşlar"),React.createElement("span",{className:"count"},n.length)),React.createElement("button",{className:`tab ${l==="servers"?"active":""}`,onClick:()=>v("servers")},React.createElement(o,null),React.createElement("span",null,"Ortak Sunucular"),React.createElement("span",{className:"count"},s.length))),React.createElement("div",{className:"search-bar"},React.createElement(O,null),React.createElement("input",{type:"text",placeholder:l==="friends"?"Arkadaş ara...":"Sunucu ara...",value:t,onChange:e=>b(e.target.value)})),React.createElement("div",{className:"content"},h?React.createElement("div",{className:"loading"},"Yükleniyor..."):l==="friends"?React.createElement("div",{className:"friends-list"},p.length===0?React.createElement("div",{className:"empty-state"},React.createElement(r,null),React.createElement("p",null,"Ortak arkadaş bulunamadı")):p.map(e=>React.createElement("div",{key:e.id,className:"friend-item",onClick:()=>E&&E(e.id)},React.createElement("div",{className:"friend-avatar"},e.avatar?React.createElement("img",{src:e.avatar,alt:""}):React.createElement($,null),React.createElement("span",{className:"status-dot",style:{background:w(e.status)}})),React.createElement("div",{className:"friend-info"},React.createElement("span",{className:"friend-name"},e.username),e.activity&&React.createElement("span",{className:"friend-activity"},e.activity)),React.createElement("div",{className:"friend-actions"},React.createElement("button",{className:"action-btn message",onClick:c=>{c.stopPropagation(),A(e)},title:"Mesaj Gönder"},React.createElement(x,null)))))):React.createElement("div",{className:"servers-list"},f.length===0?React.createElement("div",{className:"empty-state"},React.createElement(o,null),React.createElement("p",null,"Ortak sunucu bulunamadı")):f.map(e=>React.createElement("div",{key:e.id,className:"server-item",onClick:()=>R&&R(e.id)},React.createElement("div",{className:"server-icon"},e.icon?React.createElement("img",{src:e.icon,alt:""}):React.createElement("span",null,e.name.charAt(0))),React.createElement("div",{className:"server-info"},React.createElement("div",{className:"server-name-row"},React.createElement("span",{className:"server-name"},e.name),e.is_owner&&React.createElement(g,{className:"owner-badge"})),React.createElement("div",{className:"server-meta"},React.createElement("span",{className:"member-count"},React.createElement(U,null)," ",M(e.member_count)),e.role&&React.createElement("span",{className:`role-badge ${e.role.toLowerCase()}`},e.role==="Owner"&&React.createElement(g,null),e.role==="Moderator"&&React.createElement(_,null),e.role))))))),React.createElement("div",{className:"summary"},React.createElement("span",null,React.createElement(r,null)," ",n.length," ortak arkadaş"),React.createElement("span",null,React.createElement(o,null)," ",s.length," ortak sunucu"))))};export{K as default};
