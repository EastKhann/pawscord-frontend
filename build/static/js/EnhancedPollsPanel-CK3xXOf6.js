import{r as i,b as e}from"./react-core-DFLfBPkm.js";import{by as P,a as R,Z as z,m as D,bl as I}from"./icons-vendor-BhMLc_xA.js";import{t as s}from"./index-HXUkOlUr.js";import"./chart-vendor-CPuFblPm.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-CHa0MeHY.js";import"./router-vendor-BjbMlE9x.js";import"./crypto-vendor-23zpSg_R.js";import"./state-vendor-CMQ4V16Y.js";const G=({fetchWithAuth:x,apiBaseUrl:b,onClose:p,roomSlug:y})=>{const[c,g]=i.useState(""),[n,d]=i.useState(["",""]),[u,h]=i.useState(!1),[m,v]=i.useState(!1),[f,E]=i.useState(24),[a,k]=i.useState(""),S=()=>{n.length<10&&d([...n,""])},C=o=>{n.length>2&&d(n.filter((l,r)=>r!==o))},w=(o,l)=>{const r=[...n];r[o]=l,d(r)},B=async()=>{if(!c.trim()){s.error("Please enter a question");return}const o=n.filter(l=>l.trim());if(o.length<2){s.error("Please add at least 2 options");return}try{const l={question:c.trim(),options:o,allow_multiple:u,anonymous:m,duration_hours:f,room_slug:y};a&&(l.scheduled_for=new Date(a).toISOString()),await x(`${b}/api/polls/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),s.success(a?"Poll scheduled successfully":"Poll created successfully"),p()}catch{s.error("Failed to create poll")}},O=[{value:1,label:"1 Hour"},{value:6,label:"6 Hours"},{value:12,label:"12 Hours"},{value:24,label:"1 Day"},{value:48,label:"2 Days"},{value:72,label:"3 Days"},{value:168,label:"1 Week"}];return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(P,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Create Poll")),e.createElement("button",{onClick:p,style:t.closeButton},e.createElement(R,null))),e.createElement("div",{style:t.content},e.createElement("div",{style:t.section},e.createElement("label",{style:t.label},"Question"),e.createElement("input",{type:"text",value:c,onChange:o=>g(o.target.value),placeholder:"What's your question?",style:t.input,maxLength:200})),e.createElement("div",{style:t.section},e.createElement("div",{style:t.sectionHeader},e.createElement("label",{style:t.label},"Options"),e.createElement("button",{onClick:S,style:t.addButton,disabled:n.length>=10},e.createElement(z,{style:{marginRight:"6px"}}),"Add Option")),e.createElement("div",{style:t.optionsList},n.map((o,l)=>e.createElement("div",{key:l,style:t.optionRow},e.createElement("input",{type:"text",value:o,onChange:r=>w(l,r.target.value),placeholder:`Option ${l+1}`,style:t.optionInput,maxLength:100}),n.length>2&&e.createElement("button",{onClick:()=>C(l),style:t.removeButton,title:"Remove"},e.createElement(D,null)))))),e.createElement("div",{style:t.section},e.createElement("label",{style:t.label},"Duration"),e.createElement("div",{style:t.durationGrid},O.map(o=>e.createElement("button",{key:o.value,onClick:()=>E(o.value),style:{...t.durationButton,...f===o.value&&t.durationButtonActive}},o.label)))),e.createElement("div",{style:t.section},e.createElement("label",{style:t.label},e.createElement(I,{style:{marginRight:"6px"}}),"Schedule (Optional)"),e.createElement("input",{type:"datetime-local",value:a,onChange:o=>k(o.target.value),style:t.input,min:new Date().toISOString().slice(0,16)}),a&&e.createElement("div",{style:t.hint},"Poll will be posted on ",new Date(a).toLocaleString())),e.createElement("div",{style:t.checkboxes},e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:u,onChange:o=>h(o.target.checked)}),e.createElement("span",{style:t.checkboxLabel},"Allow multiple selections")),e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:m,onChange:o=>v(o.target.checked)}),e.createElement("span",{style:t.checkboxLabel},"Anonymous voting"))),e.createElement("button",{onClick:B,style:t.createButton},a?"Schedule Poll":"Create Poll"))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},section:{marginBottom:"24px"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"8px"},input:{width:"100%",padding:"10px 12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},optionsList:{display:"flex",flexDirection:"column",gap:"10px"},optionRow:{display:"flex",gap:"10px"},optionInput:{flex:1,padding:"10px 12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},addButton:{padding:"6px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center"},removeButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"14px",padding:"8px 12px"},durationGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"8px"},durationButton:{padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#dcddde",cursor:"pointer",fontSize:"13px"},durationButtonActive:{backgroundColor:"#5865f2",borderColor:"#5865f2",color:"#ffffff"},hint:{fontSize:"12px",color:"#99aab5",marginTop:"8px"},checkboxes:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},checkboxLabel:{fontSize:"14px",color:"#dcddde"},createButton:{width:"100%",padding:"12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"}};export{G as default};
