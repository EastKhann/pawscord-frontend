import{r as l,n as t}from"./react-core-Cj7FUMmY.js";import{a as g,as as m,av as k}from"./icons-vendor-Mc8int3h.js";import{t as i}from"./index-J7Wast1m.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-By68PLJG.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-DGcbxrkI.js";import"./crypto-vendor-DK-7ILyQ.js";const I=({onClose:n,friendsList:a,fetchWithAuth:u,apiBaseUrl:x,onGroupCreated:b})=>{const[r,d]=l.useState([]),[c,p]=l.useState(!1);l.useEffect(()=>{const e=s=>{s.key==="Escape"&&n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]);const h=e=>{r.includes(e)?d(s=>s.filter(f=>f!==e)):d(s=>[...s,e])},y=async()=>{if(r.length<2){i.error("❌ En az 2 kişi seçmelisin");return}p(!0);try{const e=await u(`${x}/conversations/create_group/`,{method:"POST",body:JSON.stringify({usernames:r})});if(e.ok){const s=await e.json();i.success("✅ Grup oluşturuldu!"),b(s),n()}else i.error("❌ Grup oluşturulamadı")}catch(e){i.error("❌ Hata oluştu: "+e.message)}finally{p(!1)}};return t.jsx("div",{style:o.overlay,onClick:n,children:t.jsxs("div",{style:o.modal,onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:o.header,children:[t.jsx("h3",{children:"Grup Oluştur"}),t.jsx("button",{onClick:n,style:o.closeBtn,children:t.jsx(g,{})})]}),t.jsxs("div",{style:o.body,children:[t.jsxs("p",{style:{color:"#b9bbbe",marginBottom:15},children:["Gruba eklemek istediğin arkadaşlarını seç (",r.length,")"]}),t.jsxs("div",{style:o.friendList,children:[a.map(e=>t.jsxs("div",{onClick:()=>h(e),style:{...o.friendItem,backgroundColor:r.includes(e)?"rgba(88, 101, 242, 0.3)":"#2f3136",borderColor:r.includes(e)?"#5865f2":"transparent"},children:[t.jsx("span",{style:{color:"white"},children:e}),r.includes(e)?t.jsx(m,{color:"#5865f2"}):t.jsx(k,{color:"#b9bbbe"})]},e)),a.length===0&&t.jsx("p",{style:{color:"#72767d"},children:"Listenizde arkadaş yok."})]}),t.jsx("button",{onClick:y,style:o.createBtn,disabled:c||r.length<2,children:c?"Oluşturuluyor...":"Grup DM Oluştur"})]})]})})},o={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden"},header:{padding:"15px 20px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",color:"white",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em"},body:{padding:"20px"},friendList:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},friendItem:{padding:"10px",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",border:"1px solid transparent"},createBtn:{width:"100%",padding:"10px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",opacity:.9}};export{I as default};
