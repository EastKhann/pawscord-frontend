const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./web-Dg5yZS1u.js","./react-core-GQV1VuAT.js","../css/react-core-Dj12pvTl.css","./ServerSettingsModal-Do-5EL8u.js","./AutoResponderManager-BE_DpFQi.js","./VanityURLManager-Cb7lmCSP.js","./UserProfileModal-BxkGw8he.js","./ImageModal-DM5qgKTp.js","./GifPicker-BC8dSWwq.js","./StickerPicker-BABuvz6l.js","./SoundboardModal-BKG3Va3D.js","./WatchPartyEnhanced-6WOEeCnn.js","./CinemaModal-TqNOkebh.js","./WhiteboardModal-DA9fcvjG.js","./PollCreateModal--dQQ63jv.js","./CodeSnippetModal-Bn2LWIFY.js","./MessageTemplateModal-Disc5kuo.js","./Message-DiR-fvNL.js","./LazyImage-BKj1MuzP.js","./imageCaching-CdJipAoH.js","./VirtualMessageList-C34to-it.js","./MessageInput-ZpHBrChS.js","./ScheduledMessageModal-DaZCZVb6.js","../css/MessageInput-DSbUeC-P.css","./UserVideoContainer-CmGReA4j.js","./VoiceAudioController-BtpDLstf.js","./RichTextEditor-VeHZWwHN.js","./tiptap-fxy27E2W.js","./recharts-DR2X3RTC.js","../css/RichTextEditor-D3gjYEEz.css","./StickyMessageBanner-B6_3ba-a.js","./LoginPage-DKHBoXXq.js","./recaptcha-CJo6yOpK.js","./WelcomeScreen-BPdqOgzw.js","./DownloadModal-DRmyrhGg.js","./AvatarCropper-ClIKOjVB.js","../css/AvatarCropper-CvJ6GDdV.css","./CryptoChartModal-Cx0AFJMS.js","./CryptoStoreModal-Bb8rWzX8.js","./PremiumStoreModal-DzmtG55k.js","./KanbanBoard-CPa0rQ-_.js","./SummaryModal-CcOcNPhY.js","./DJModal-BEVHQE0f.js","./ThemeStoreModal-CaBzKQ-a.js","./EncryptionKeyModal-BPVMghTf.js","./CreateGroupModal-Dl_lpTQ_.js","./AdminAnalyticsPanel-D90FGXcM.js","./AdminPanelModal-CZ5j6I1m.js","./WebhooksPanel-BPKE8cEB.js","../css/WebhooksPanel-Cn13v79_.css","./AutoModerationDashboard-set_zYym.js","./AutoModerationPanel-FYdnmnlr.js","../css/AutoModerationPanel-iAw0CZQU.css","./RaidProtectionPanel-BbH6_A11.js","./ReportSystemPanel-CJGCUfn_.js","./AuditLogPanel-Bl_R9Mev.js","./UserWarningsPanel-B2LnUbrQ.js","./BookmarkPanel-DxACJuHE.js","./ReadLaterPanel-DIk5BFX5.js","../css/ReadLaterPanel-B_WZGTiX.css","./ChannelPermissionsPanel-IpiqCwFy.js","./MessageThreadsPanel-B5Xr5eFO.js","./ModeratorNotesPanel-AmBBWWsy.js","./ServerRolesPanel-oIehKCXg.js","./NotificationPreferencesPanel-Dr6ifMTQ.js","./MessageOCRPanel-CRW6bHKL.js","./MassActionsPanel-DoPgGnHR.js","./TimeoutMutePanel-DGKdfkws.js","./ServerThemesPanel-CV-B07zp.js","./KeywordMutesPanel-BicM7pmY.js","./WelcomeTemplatesPanel-D9OFTCn5.js","./StickyMessagesPanel-CPgRewzp.js","./MessageTemplatesPanel-C5Okfx_A.js","./MessageExportPanel-B8ds3kIB.js","./ArchivedRoomsPanel-CqvrqGMK.js","./SlowModePanel-ChFUzbkW.js","./EmojiManagementPanel-DSAqDEtV.js","./ReactionAnalyticsPanel-BiclrQr8.js","./LinkClickTrackingPanel-BCOmf7lh.js","./JoinLeaveLogsPanel-CEJShKum.js","./UserActivityPanel-DhBmjmvp.js","./NicknameHistoryPanel-lbLQtKZS.js","./FieldChangeTrackingPanel-CMBQuM13.js","./InviteAnalyticsPanel-DWe6bWvm.js","./ContentScannerPanel-Qtbd2ZTO.js","./EphemeralMessagesPanel-BxkoL18o.js","./TopicHistoryPanel-BfMw-qE1.js","./DraftsPanel-C_xNBD7R.js","./ServerNicknamesPanel-DptHD9VS.js","./ServerBoostPanel-CGGN7woV.js","./RoomWebhooksPanel-Bh5qgsqP.js","./OAuthAppsPanel-DtA2tNwM.js","./VanityURLPanel-ChpfChKE.js","./AutoRespondersPanel-CQ0I5cOP.js","./SessionManagementPanel-DR178Hln.js","./GDPRExportPanel-Bznj6hl4.js","./DataRetentionPanel-TgFXzkuz.js","./TwoFactorSetupWizard-BUDZuVmt.js","./EnhancedPollsPanel-Co8AL3Gq.js","./VoiceTranscriptsPanel-BMoypA-k.js","./PaymentPanel-LViFJjoc.js","./StoreModal-B8lms9ml.js","./DailyRewardsModal-DKQvz9rZ.js","./APIUsagePanel-CqgsnOX7.js","./ExportJobsPanel-DwwoFQ3k.js","./ScheduledAnnouncementsPanel-C0qq1d5T.js","./InviteExportPanel-CCM2-032.js","./AdvancedSearchPanel-_fS-36zy.js","./GrowthMetricsPanel-DCT2I8hg.js","./LinkPreviewRenderer-Byhk8mOB.js","./InventoryPanel-Dzqq9lP1.js","./WaitlistPanel-rLB79jGk.js","./ReferralRewardsPanel-Bh2oNiO1.js","./VerifyEmailPage-QT1UjqN_.js","./ForgotPasswordPage-CWSCOYjG.js","./ResetPasswordPage-B3PBYFm2.js","./TwoFactorLoginPage-rTej6dMB.js","./TwoFactorSetup-ChYQIsG-.js","../css/TwoFactorSetup-CtmcmlFU.css","./TwoFactorLogin-tBxMUzyM.js","../css/TwoFactorLogin-DgREC4Q6.css","./VanityInviteScreen-D5GgPwXF.js","./EmailVerification-BRJebnQQ.js","../css/EmailVerification-CE2S-15C.css","./MobileNav-sszEDAGg.js","../css/MobileNav-BLwPGkd1.css","./SwipeActions-CLgCj9kW.js","../css/SwipeActions-CCPpS4d3.css","./VoiceMessage-DI74E8hm.js","../css/VoiceMessage-Czmu0SFR.css","./FriendsTab-BHVtXFFp.js","./RoomList-DXI85XNp.js","./UserFooter-B_w96RaU.js","./UserProfilePanel-RvrBeRZO.js","./index-B9ygI19o.js","../css/UserProfilePanel-DaqyzPyG.css","./VoiceChatPanel-IrHAgIBA.js","./UserContextMenu-XslBqEm4.js","../css/VoiceChatPanel-D0hk1ENV.css","./ChatUserList-2aNYLEyS.js","./PinnedMessages-CUUA3BNo.js","./FloatingVoiceIsland-WGtmu8zj.js","./CinemaPlayer-Dx1s39Ql.js","./ConnectionsPanel-v7y6IiPs.js","../css/ConnectionsPanel-BHb_cRVQ.css","./PasswordSetupModal-DtzyqiFM.js","../css/PasswordSetupModal-hiiUdoNl.css","./NotificationDropdown-kjwHngfJ.js","./ReactionStatsPanel-CUkGOkVy.js","../css/ReactionStatsPanel-D_puvjpP.css","./ServerHealthPanel-DW-KbDs-.js","../css/ServerHealthPanel-DVezKW9Q.css","./ChannelAnalyticsPanel-MEIrMRpS.js","../css/ChannelAnalyticsPanel-B6Q8OoDz.css","./SmartSuggestionsPanel-BvwZ89qK.js","../css/SmartSuggestionsPanel-BFDBx7VC.css","./UserPresenceInsightsPanel-qbebvm_z.js","../css/UserPresenceInsightsPanel-C69M9XNv.css","./MiniGamesPanel-DJmaEIAk.js","./ProjectCollaborationPanel-D0BvVnJA.js","./AvatarStudioPanel-CPPqQBON.js","./pushNotifications-Bn_5QhhA.js","./urlHandlers-BF93MNaR.js","./EnglishHub-DazEQJ0W.js","./GrammarQuizPage-CqBUGN8O.js","./grammarQuestions-dLzDsU5Q.js","./EnglishLearningPage-CyTc5lr4.js","./CryptoDashboard-KF6SOy2Y.js","./CryptoSignals-0xaRk99Q.js","./PrivacyPolicyPage-Cr-u9Mja.js","./LandingPage-CjDVw3b2.js","../css/LandingPage-CHHpsw7G.css","./ReferralProgram-am-4NOO2.js","../css/ReferralProgram-CBBjqZR4.css","./GrowthDashboard-AMjUMQP9.js","../css/GrowthDashboard-xlqndw5F.css","./ToastDemo-D1j_860m.js","../css/ToastDemo-DxNVRuTl.css"])))=>i.map(i=>d[i]);
import{g as Ki,_ as M,d as e,f as ol,h as ka,r as a,u as Yi,F as nl,i as wo,k as al,l as Ns,m as Ws,n as sl,o as il,p as cl,q as ll,t as dl,v as ul,w as Hs,x as fl,y as ml,z as Fa,A as za,B as pl,C as xl,D as hl,E as gl,e as yl,G as Ji,H as Co,I as Xi,J as Ma,K as Ua,L as vl,M as El,N as Zi,O as Qi,Q as js,S as bl,T as _l,U as Sl,V as wl,W as Cl,X as kl,Y as Al,Z as Bl,$ as Dl,a0 as Tl,a1 as Fl,a2 as Re}from"./react-core-GQV1VuAT.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const x of l)if(x.type==="childList")for(const B of x.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&s(B)}).observe(document,{childList:!0,subtree:!0});function t(l){const x={};return l.integrity&&(x.integrity=l.integrity),l.referrerPolicy&&(x.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?x.credentials="include":l.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function s(l){if(l.ep)return;l.ep=!0;const x=t(l);fetch(l.href,x)}})();var Aa={exports:{}},Gs;function Rl(){return Gs||(Gs=1,(function(d,i){(function(t){d.exports=t()})(function(t){var s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function l(h,c){var o=h[0],n=h[1],f=h[2],u=h[3];o+=(n&f|~n&u)+c[0]-680876936|0,o=(o<<7|o>>>25)+n|0,u+=(o&n|~o&f)+c[1]-389564586|0,u=(u<<12|u>>>20)+o|0,f+=(u&o|~u&n)+c[2]+606105819|0,f=(f<<17|f>>>15)+u|0,n+=(f&u|~f&o)+c[3]-1044525330|0,n=(n<<22|n>>>10)+f|0,o+=(n&f|~n&u)+c[4]-176418897|0,o=(o<<7|o>>>25)+n|0,u+=(o&n|~o&f)+c[5]+1200080426|0,u=(u<<12|u>>>20)+o|0,f+=(u&o|~u&n)+c[6]-1473231341|0,f=(f<<17|f>>>15)+u|0,n+=(f&u|~f&o)+c[7]-45705983|0,n=(n<<22|n>>>10)+f|0,o+=(n&f|~n&u)+c[8]+1770035416|0,o=(o<<7|o>>>25)+n|0,u+=(o&n|~o&f)+c[9]-1958414417|0,u=(u<<12|u>>>20)+o|0,f+=(u&o|~u&n)+c[10]-42063|0,f=(f<<17|f>>>15)+u|0,n+=(f&u|~f&o)+c[11]-1990404162|0,n=(n<<22|n>>>10)+f|0,o+=(n&f|~n&u)+c[12]+1804603682|0,o=(o<<7|o>>>25)+n|0,u+=(o&n|~o&f)+c[13]-40341101|0,u=(u<<12|u>>>20)+o|0,f+=(u&o|~u&n)+c[14]-1502002290|0,f=(f<<17|f>>>15)+u|0,n+=(f&u|~f&o)+c[15]+1236535329|0,n=(n<<22|n>>>10)+f|0,o+=(n&u|f&~u)+c[1]-165796510|0,o=(o<<5|o>>>27)+n|0,u+=(o&f|n&~f)+c[6]-1069501632|0,u=(u<<9|u>>>23)+o|0,f+=(u&n|o&~n)+c[11]+643717713|0,f=(f<<14|f>>>18)+u|0,n+=(f&o|u&~o)+c[0]-373897302|0,n=(n<<20|n>>>12)+f|0,o+=(n&u|f&~u)+c[5]-701558691|0,o=(o<<5|o>>>27)+n|0,u+=(o&f|n&~f)+c[10]+38016083|0,u=(u<<9|u>>>23)+o|0,f+=(u&n|o&~n)+c[15]-660478335|0,f=(f<<14|f>>>18)+u|0,n+=(f&o|u&~o)+c[4]-405537848|0,n=(n<<20|n>>>12)+f|0,o+=(n&u|f&~u)+c[9]+568446438|0,o=(o<<5|o>>>27)+n|0,u+=(o&f|n&~f)+c[14]-1019803690|0,u=(u<<9|u>>>23)+o|0,f+=(u&n|o&~n)+c[3]-187363961|0,f=(f<<14|f>>>18)+u|0,n+=(f&o|u&~o)+c[8]+1163531501|0,n=(n<<20|n>>>12)+f|0,o+=(n&u|f&~u)+c[13]-1444681467|0,o=(o<<5|o>>>27)+n|0,u+=(o&f|n&~f)+c[2]-51403784|0,u=(u<<9|u>>>23)+o|0,f+=(u&n|o&~n)+c[7]+1735328473|0,f=(f<<14|f>>>18)+u|0,n+=(f&o|u&~o)+c[12]-1926607734|0,n=(n<<20|n>>>12)+f|0,o+=(n^f^u)+c[5]-378558|0,o=(o<<4|o>>>28)+n|0,u+=(o^n^f)+c[8]-2022574463|0,u=(u<<11|u>>>21)+o|0,f+=(u^o^n)+c[11]+1839030562|0,f=(f<<16|f>>>16)+u|0,n+=(f^u^o)+c[14]-35309556|0,n=(n<<23|n>>>9)+f|0,o+=(n^f^u)+c[1]-1530992060|0,o=(o<<4|o>>>28)+n|0,u+=(o^n^f)+c[4]+1272893353|0,u=(u<<11|u>>>21)+o|0,f+=(u^o^n)+c[7]-155497632|0,f=(f<<16|f>>>16)+u|0,n+=(f^u^o)+c[10]-1094730640|0,n=(n<<23|n>>>9)+f|0,o+=(n^f^u)+c[13]+681279174|0,o=(o<<4|o>>>28)+n|0,u+=(o^n^f)+c[0]-358537222|0,u=(u<<11|u>>>21)+o|0,f+=(u^o^n)+c[3]-722521979|0,f=(f<<16|f>>>16)+u|0,n+=(f^u^o)+c[6]+76029189|0,n=(n<<23|n>>>9)+f|0,o+=(n^f^u)+c[9]-640364487|0,o=(o<<4|o>>>28)+n|0,u+=(o^n^f)+c[12]-421815835|0,u=(u<<11|u>>>21)+o|0,f+=(u^o^n)+c[15]+530742520|0,f=(f<<16|f>>>16)+u|0,n+=(f^u^o)+c[2]-995338651|0,n=(n<<23|n>>>9)+f|0,o+=(f^(n|~u))+c[0]-198630844|0,o=(o<<6|o>>>26)+n|0,u+=(n^(o|~f))+c[7]+1126891415|0,u=(u<<10|u>>>22)+o|0,f+=(o^(u|~n))+c[14]-1416354905|0,f=(f<<15|f>>>17)+u|0,n+=(u^(f|~o))+c[5]-57434055|0,n=(n<<21|n>>>11)+f|0,o+=(f^(n|~u))+c[12]+1700485571|0,o=(o<<6|o>>>26)+n|0,u+=(n^(o|~f))+c[3]-1894986606|0,u=(u<<10|u>>>22)+o|0,f+=(o^(u|~n))+c[10]-1051523|0,f=(f<<15|f>>>17)+u|0,n+=(u^(f|~o))+c[1]-2054922799|0,n=(n<<21|n>>>11)+f|0,o+=(f^(n|~u))+c[8]+1873313359|0,o=(o<<6|o>>>26)+n|0,u+=(n^(o|~f))+c[15]-30611744|0,u=(u<<10|u>>>22)+o|0,f+=(o^(u|~n))+c[6]-1560198380|0,f=(f<<15|f>>>17)+u|0,n+=(u^(f|~o))+c[13]+1309151649|0,n=(n<<21|n>>>11)+f|0,o+=(f^(n|~u))+c[4]-145523070|0,o=(o<<6|o>>>26)+n|0,u+=(n^(o|~f))+c[11]-1120210379|0,u=(u<<10|u>>>22)+o|0,f+=(o^(u|~n))+c[2]+718787259|0,f=(f<<15|f>>>17)+u|0,n+=(u^(f|~o))+c[9]-343485551|0,n=(n<<21|n>>>11)+f|0,h[0]=o+h[0]|0,h[1]=n+h[1]|0,h[2]=f+h[2]|0,h[3]=u+h[3]|0}function x(h){var c=[],o;for(o=0;o<64;o+=4)c[o>>2]=h.charCodeAt(o)+(h.charCodeAt(o+1)<<8)+(h.charCodeAt(o+2)<<16)+(h.charCodeAt(o+3)<<24);return c}function B(h){var c=[],o;for(o=0;o<64;o+=4)c[o>>2]=h[o]+(h[o+1]<<8)+(h[o+2]<<16)+(h[o+3]<<24);return c}function b(h){var c=h.length,o=[1732584193,-271733879,-1732584194,271733878],n,f,u,P,L,q;for(n=64;n<=c;n+=64)l(o,x(h.substring(n-64,n)));for(h=h.substring(n-64),f=h.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<f;n+=1)u[n>>2]|=h.charCodeAt(n)<<(n%4<<3);if(u[n>>2]|=128<<(n%4<<3),n>55)for(l(o,u),n=0;n<16;n+=1)u[n]=0;return P=c*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(P[2],16),q=parseInt(P[1],16)||0,u[14]=L,u[15]=q,l(o,u),o}function S(h){var c=h.length,o=[1732584193,-271733879,-1732584194,271733878],n,f,u,P,L,q;for(n=64;n<=c;n+=64)l(o,B(h.subarray(n-64,n)));for(h=n-64<c?h.subarray(n-64):new Uint8Array(0),f=h.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<f;n+=1)u[n>>2]|=h[n]<<(n%4<<3);if(u[n>>2]|=128<<(n%4<<3),n>55)for(l(o,u),n=0;n<16;n+=1)u[n]=0;return P=c*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(P[2],16),q=parseInt(P[1],16)||0,u[14]=L,u[15]=q,l(o,u),o}function m(h){var c="",o;for(o=0;o<4;o+=1)c+=s[h>>o*8+4&15]+s[h>>o*8&15];return c}function y(h){var c;for(c=0;c<h.length;c+=1)h[c]=m(h[c]);return h.join("")}y(b("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function h(c,o){return c=c|0||0,c<0?Math.max(c+o,0):Math.min(c,o)}ArrayBuffer.prototype.slice=function(c,o){var n=this.byteLength,f=h(c,n),u=n,P,L,q,F;return o!==t&&(u=h(o,n)),f>u?new ArrayBuffer(0):(P=u-f,L=new ArrayBuffer(P),q=new Uint8Array(L),F=new Uint8Array(this,f,P),q.set(F),L)}})();function A(h){return/[\u0080-\uFFFF]/.test(h)&&(h=unescape(encodeURIComponent(h))),h}function g(h,c){var o=h.length,n=new ArrayBuffer(o),f=new Uint8Array(n),u;for(u=0;u<o;u+=1)f[u]=h.charCodeAt(u);return c?f:n}function k(h){return String.fromCharCode.apply(null,new Uint8Array(h))}function w(h,c,o){var n=new Uint8Array(h.byteLength+c.byteLength);return n.set(new Uint8Array(h)),n.set(new Uint8Array(c),h.byteLength),n}function C(h){var c=[],o=h.length,n;for(n=0;n<o-1;n+=2)c.push(parseInt(h.substr(n,2),16));return String.fromCharCode.apply(String,c)}function v(){this.reset()}return v.prototype.append=function(h){return this.appendBinary(A(h)),this},v.prototype.appendBinary=function(h){this._buff+=h,this._length+=h.length;var c=this._buff.length,o;for(o=64;o<=c;o+=64)l(this._hash,x(this._buff.substring(o-64,o)));return this._buff=this._buff.substring(o-64),this},v.prototype.end=function(h){var c=this._buff,o=c.length,n,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u;for(n=0;n<o;n+=1)f[n>>2]|=c.charCodeAt(n)<<(n%4<<3);return this._finish(f,o),u=y(this._hash),h&&(u=C(u)),this.reset(),u},v.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},v.prototype.setState=function(h){return this._buff=h.buff,this._length=h.length,this._hash=h.hash,this},v.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},v.prototype._finish=function(h,c){var o=c,n,f,u;if(h[o>>2]|=128<<(o%4<<3),o>55)for(l(this._hash,h),o=0;o<16;o+=1)h[o]=0;n=this._length*8,n=n.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(n[2],16),u=parseInt(n[1],16)||0,h[14]=f,h[15]=u,l(this._hash,h)},v.hash=function(h,c){return v.hashBinary(A(h),c)},v.hashBinary=function(h,c){var o=b(h),n=y(o);return c?C(n):n},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(h){var c=w(this._buff.buffer,h),o=c.length,n;for(this._length+=h.byteLength,n=64;n<=o;n+=64)l(this._hash,B(c.subarray(n-64,n)));return this._buff=n-64<o?new Uint8Array(c.buffer.slice(n-64)):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(h){var c=this._buff,o=c.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f,u;for(f=0;f<o;f+=1)n[f>>2]|=c[f]<<(f%4<<3);return this._finish(n,o),u=y(this._hash),h&&(u=C(u)),this.reset(),u},v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.getState=function(){var h=v.prototype.getState.call(this);return h.buff=k(h.buff),h},v.ArrayBuffer.prototype.setState=function(h){return h.buff=g(h.buff,!0),v.prototype.setState.call(this,h)},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.hash=function(h,c){var o=S(new Uint8Array(h)),n=y(o);return c?C(n):n},v})})(Aa)),Aa.exports}var Pl=Rl();const Il=Ki(Pl);var eo;(function(d){d.Unimplemented="UNIMPLEMENTED",d.Unavailable="UNAVAILABLE"})(eo||(eo={}));class Ba extends Error{constructor(i,t,s){super(i),this.message=i,this.code=t,this.data=s}}const Ll=d=>{var i,t;return d?.androidBridge?"android":!((t=(i=d?.webkit)===null||i===void 0?void 0:i.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},$l=d=>{const i=d.CapacitorCustomPlatform||null,t=d.Capacitor||{},s=t.Plugins=t.Plugins||{},l=()=>i!==null?i.name:Ll(d),x=()=>l()!=="web",B=A=>{const g=m.get(A);return!!(g?.platforms.has(l())||b(A))},b=A=>{var g;return(g=t.PluginHeaders)===null||g===void 0?void 0:g.find(k=>k.name===A)},S=A=>d.console.error(A),m=new Map,y=(A,g={})=>{const k=m.get(A);if(k)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),k.proxy;const w=l(),C=b(A);let v;const h=async()=>(!v&&w in g?v=typeof g[w]=="function"?v=await g[w]():v=g[w]:i!==null&&!v&&"web"in g&&(v=typeof g.web=="function"?v=await g.web():v=g.web),v),c=(L,q)=>{var F,U;if(C){const V=C?.methods.find(j=>q===j.name);if(V)return V.rtype==="promise"?j=>t.nativePromise(A,q.toString(),j):(j,re)=>t.nativeCallback(A,q.toString(),j,re);if(L)return(F=L[q])===null||F===void 0?void 0:F.bind(L)}else{if(L)return(U=L[q])===null||U===void 0?void 0:U.bind(L);throw new Ba(`"${A}" plugin is not implemented on ${w}`,eo.Unimplemented)}},o=L=>{let q;const F=(...U)=>{const V=h().then(j=>{const re=c(j,L);if(re){const ne=re(...U);return q=ne?.remove,ne}else throw new Ba(`"${A}.${L}()" is not implemented on ${w}`,eo.Unimplemented)});return L==="addListener"&&(V.remove=async()=>q()),V};return F.toString=()=>`${L.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:L,writable:!1,configurable:!1}),F},n=o("addListener"),f=o("removeListener"),u=(L,q)=>{const F=n({eventName:L},q),U=async()=>{const j=await F;f({eventName:L,callbackId:j},q)},V=new Promise(j=>F.then(()=>j({remove:U})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await U()},V},P=new Proxy({},{get(L,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?u:n;case"removeListener":return f;default:return o(q)}}});return s[A]=P,m.set(A,{name:A,proxy:P,platforms:new Set([...Object.keys(g),...C?[w]:[]])}),P};return t.convertFileSrc||(t.convertFileSrc=A=>A),t.getPlatform=l,t.handleError=S,t.isNativePlatform=x,t.isPluginAvailable=B,t.registerPlugin=y,t.Exception=Ba,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Ol=d=>d.Capacitor=$l(d),to=Ol(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Va=to.registerPlugin;class e0{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(i,t){let s=!1;this.listeners[i]||(this.listeners[i]=[],s=!0),this.listeners[i].push(t);const x=this.windowListeners[i];x&&!x.registered&&this.addWindowListener(x),s&&this.sendRetainedArgumentsForEvent(i);const B=async()=>this.removeListener(i,t);return Promise.resolve({remove:B})}async removeAllListeners(){this.listeners={};for(const i in this.windowListeners)this.removeWindowListener(this.windowListeners[i]);this.windowListeners={}}notifyListeners(i,t,s){const l=this.listeners[i];if(!l){if(s){let x=this.retainedEventArguments[i];x||(x=[]),x.push(t),this.retainedEventArguments[i]=x}return}l.forEach(x=>x(t))}hasListeners(i){var t;return!!(!((t=this.listeners[i])===null||t===void 0)&&t.length)}registerWindowListener(i,t){this.windowListeners[t]={registered:!1,windowEventName:i,pluginEventName:t,handler:s=>{this.notifyListeners(t,s)}}}unimplemented(i="not implemented"){return new to.Exception(i,eo.Unimplemented)}unavailable(i="not available"){return new to.Exception(i,eo.Unavailable)}async removeListener(i,t){const s=this.listeners[i];if(!s)return;const l=s.indexOf(t);this.listeners[i].splice(l,1),this.listeners[i].length||this.removeWindowListener(this.windowListeners[i])}addWindowListener(i){window.addEventListener(i.windowEventName,i.handler),i.registered=!0}removeWindowListener(i){i&&(window.removeEventListener(i.windowEventName,i.handler),i.registered=!1)}sendRetainedArgumentsForEvent(i){const t=this.retainedEventArguments[i];t&&(delete this.retainedEventArguments[i],t.forEach(s=>{this.notifyListeners(i,s)}))}}const qs=d=>encodeURIComponent(d).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ks=d=>d.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class zl extends e0{async getCookies(){const i=document.cookie,t={};return i.split(";").forEach(s=>{if(s.length<=0)return;let[l,x]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=Ks(l).trim(),x=Ks(x).trim(),t[l]=x}),t}async setCookie(i){try{const t=qs(i.key),s=qs(i.value),l=`; expires=${(i.expires||"").replace("expires=","")}`,x=(i.path||"/").replace("path=",""),B=i.url!=null&&i.url.length>0?`domain=${i.url}`:"";document.cookie=`${t}=${s||""}${l}; path=${x}; ${B};`}catch(t){return Promise.reject(t)}}async deleteCookie(i){try{document.cookie=`${i.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const i=document.cookie.split(";")||[];for(const t of i)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(i){return Promise.reject(i)}}async clearAllCookies(){try{await this.clearCookies()}catch(i){return Promise.reject(i)}}}Va("CapacitorCookies",{web:()=>new zl});const Ml=async d=>new Promise((i,t)=>{const s=new FileReader;s.onload=()=>{const l=s.result;i(l.indexOf(",")>=0?l.split(",")[1]:l)},s.onerror=l=>t(l),s.readAsDataURL(d)}),Ul=(d={})=>{const i=Object.keys(d);return Object.keys(d).map(l=>l.toLocaleLowerCase()).reduce((l,x,B)=>(l[x]=d[i[B]],l),{})},Vl=(d,i=!0)=>d?Object.entries(d).reduce((s,l)=>{const[x,B]=l;let b,S;return Array.isArray(B)?(S="",B.forEach(m=>{b=i?encodeURIComponent(m):m,S+=`${x}=${b}&`}),S.slice(0,-1)):(b=i?encodeURIComponent(B):B,S=`${x}=${b}`),`${s}&${S}`},"").substr(1):null,Nl=(d,i={})=>{const t=Object.assign({method:d.method||"GET",headers:d.headers},i),l=Ul(d.headers)["content-type"]||"";if(typeof d.data=="string")t.body=d.data;else if(l.includes("application/x-www-form-urlencoded")){const x=new URLSearchParams;for(const[B,b]of Object.entries(d.data||{}))x.set(B,b);t.body=x.toString()}else if(l.includes("multipart/form-data")||d.data instanceof FormData){const x=new FormData;if(d.data instanceof FormData)d.data.forEach((b,S)=>{x.append(S,b)});else for(const b of Object.keys(d.data))x.append(b,d.data[b]);t.body=x;const B=new Headers(t.headers);B.delete("content-type"),t.headers=B}else(l.includes("application/json")||typeof d.data=="object")&&(t.body=JSON.stringify(d.data));return t};class Wl extends e0{async request(i){const t=Nl(i,i.webFetchExtra),s=Vl(i.params,i.shouldEncodeUrlParams),l=s?`${i.url}?${s}`:i.url,x=await fetch(l,t),B=x.headers.get("content-type")||"";let{responseType:b="text"}=x.ok?i:{};B.includes("application/json")&&(b="json");let S,m;switch(b){case"arraybuffer":case"blob":m=await x.blob(),S=await Ml(m);break;case"json":S=await x.json();break;default:S=await x.text()}const y={};return x.headers.forEach((A,g)=>{y[g]=A}),{data:S,headers:y,status:x.status,url:x.url}}async get(i){return this.request(Object.assign(Object.assign({},i),{method:"GET"}))}async post(i){return this.request(Object.assign(Object.assign({},i),{method:"POST"}))}async put(i){return this.request(Object.assign(Object.assign({},i),{method:"PUT"}))}async patch(i){return this.request(Object.assign(Object.assign({},i),{method:"PATCH"}))}async delete(i){return this.request(Object.assign(Object.assign({},i),{method:"DELETE"}))}}Va("CapacitorHttp",{web:()=>new Wl});const Hl=Va("GoogleAuth",{web:()=>M(()=>import("./web-Dg5yZS1u.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(d=>new d.GoogleAuthWeb)});let jl=class extends e.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(i){return{hasError:!0}}componentDidCatch(i,t){console.error("Error Boundary caught error:",i,t),this.setState({error:i,errorInfo:t,errorCount:this.state.errorCount+1}),window.gtag&&window.gtag("event","exception",{description:i.toString(),fatal:!1}),this.reportError(i,t)}reportError=async(i,t)=>{try{await fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:i.toString(),stack:t.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(s){console.error("Failed to report error:",s)}};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.state.errorCount>3?e.createElement("div",{className:"error-boundary critical"},e.createElement("div",{className:"error-content"},e.createElement("h1",null,"‚ö†Ô∏è Critical Error"),e.createElement("p",null,"Multiple errors detected. Please refresh the page."),e.createElement("button",{onClick:()=>window.location.reload(),className:"btn-reload"},"Refresh Page"))):e.createElement("div",{className:"error-boundary"},e.createElement("div",{className:"error-content"},e.createElement("div",{className:"error-icon"},"üòï"),e.createElement("h1",null,"Oops! Something went wrong"),e.createElement("p",{className:"error-message"},this.props.fallbackMessage||"We're sorry for the inconvenience. The error has been reported."),!1,e.createElement("div",{className:"error-actions"},e.createElement("button",{onClick:this.handleReset,className:"btn-retry"},"Try Again"),e.createElement("button",{onClick:()=>window.location.href="/",className:"btn-home"},"Go Home")))):this.props.children}},Jr=null;function Gl(){return Jr||(Jr=document.createElement("div"),Jr.id="toast-container",Jr.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        `,document.body.appendChild(Jr)),Jr}function _o(d,i="info",t=3e3){const s=Gl(),l=document.createElement("div");l.className=`toast toast-${i}`;let x="‚ÑπÔ∏è",B="#3b82f6";switch(i){case"success":x="‚úÖ",B="#10b981";break;case"error":x="‚ùå",B="#ef4444";break;case"warning":x="‚ö†Ô∏è",B="#f59e0b";break;case"info":x="‚ÑπÔ∏è",B="#3b82f6";break}l.style.cssText=`
        background: ${B};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 300px;
        max-width: 500px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 14px;
        pointer-events: all;
        animation: slideIn 0.3s ease-out;
        transition: opacity 0.3s ease-out;
    `,l.innerHTML=`
        <span style="font-size: 20px;">${x}</span>
        <span style="flex: 1;">${d}</span>
        <button onclick="this.parentElement.remove()" style="
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
           onmouseout="this.style.background='rgba(255,255,255,0.2)'">√ó</button>
    `,s.appendChild(l);const b=document.createElement("style");b.textContent=`
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    `,document.getElementById("toast-styles")||(b.id="toast-styles",document.head.appendChild(b)),setTimeout(()=>{l.style.animation="slideOut 0.3s ease-out",setTimeout(()=>l.remove(),300)},t)}const ie={success:(d,i)=>_o(d,"success",i),error:(d,i)=>_o(d,"error",i),warning:(d,i)=>_o(d,"warning",i),info:(d,i)=>_o(d,"info",i)};typeof window<"u"&&(window.toast=ie,window.showToast=_o);const ql=async()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.toLowerCase().includes("electron")||window.location?.protocol==="file:"))return console.log("‚ö†Ô∏è [PWA] Service Worker disabled in Electron (file:// protocol)"),null;if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("‚úÖ Service Worker registered:",i.scope),i.addEventListener("updatefound",()=>{const t=i.installing;console.log("üîÑ New Service Worker installing..."),t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&Kl()})}),setInterval(()=>{i.update()},3600*1e3),i}catch(i){return console.error("‚ùå Service Worker registration failed:",i),null}},Kl=()=>{console.log("‚ÑπÔ∏è Yeni versiyon mevcut - UI g√ºncelleme butonu aktif")},Yl=()=>{window.addEventListener("beforeinstallprompt",d=>{d.preventDefault();const i=document.getElementById("install-pwa-button");i&&(i.style.display="block"),console.log("üì± PWA install prompt ready")}),window.addEventListener("appinstalled",()=>{console.log("‚úÖ PWA installed successfully"),window.gtag&&window.gtag("event","pwa_installed",{event_category:"PWA",event_label:"App Installed"})})},Jl=(d,i)=>{const t=()=>{console.log("‚úÖ Network: Online"),d&&d(),Ys("üü¢ √áevrimi√ßi","success")},s=()=>{console.log("‚ùå Network: Offline"),i&&i(),Ys("üî¥ √áevrimdƒ±≈üƒ± - Baƒülantƒ± koptu","error")};return window.addEventListener("online",t),window.addEventListener("offline",s),navigator.onLine||s(),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}},Ys=(d,i="info")=>{const t=document.getElementById("network-banner");t&&t.remove();const s=document.createElement("div");s.id="network-banner",s.textContent=d,s.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        padding: 12px;
        text-align: center;
        color: white;
        font-weight: 600;
        z-index: 9999;
        animation: slideDown 0.3s ease;
        background: ${i==="success"?"#43b581":"#ed4245"};
    `,document.body.appendChild(s),i==="success"&&setTimeout(()=>{s.style.animation="slideUp 0.3s ease",setTimeout(()=>s.remove(),300)},3e3)},Xl=()=>{const d=document.createElement("style");d.textContent=`
        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }
    `,document.head.appendChild(d)};Xl();const Zl=`
/* üé® PAWSCORD Critical CSS - Above the Fold */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #1e1f22;
    color: #dcddde;
    overflow: hidden;
}

/* Loading Screen */
#loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #1e1f22;
    display: flex;
    align-items: center;
    justify-center: center;
    z-index: 9999;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #40444b;
    border-top-color: #5865f2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Main Layout */
#root {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.app-container {
    display: flex;
    width: 100%;
    height: 100%;
}

/* Sidebar */
.sidebar {
    width: 240px;
    background: #2b2d31;
    flex-shrink: 0;
}

/* Chat Area */
.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #313338;
}

/* Message Input - Critical */
.message-input-container {
    padding: 16px;
    background: #383a40;
}

.message-input {
    width: 100%;
    padding: 12px;
    background: #40444b;
    border: none;
    border-radius: 8px;
    color: #dcddde;
    font-size: 15px;
    outline: none;
}

/* Button Base */
button {
    cursor: pointer;
    border: none;
    background: transparent;
    color: inherit;
    font-family: inherit;
}

.btn-primary {
    background: #5865f2;
    color: white;
    padding: 10px 16px;
    border-radius: 4px;
    font-weight: 500;
    transition: background 0.17s ease;
}

.btn-primary:hover {
    background: #4752c4;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #2b2d31;
}

::-webkit-scrollbar-thumb {
    background: #1a1b1e;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #141517;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
}

/* Utilities */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.gap-2 {
    gap: 8px;
}

.gap-4 {
    gap: 16px;
}

.hidden {
    display: none !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: absolute;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .sidebar.open {
        transform: translateX(0);
    }
}
`,Ql=()=>{const d=document.createElement("style");d.id="critical-css",d.textContent=Zl,document.head.insertBefore(d,document.head.firstChild),console.log("‚úÖ Critical CSS inlined")},ed=d=>new Promise((i,t)=>{const s=document.createElement("link");s.rel="stylesheet",s.href=d,s.onload=()=>{console.log(`‚úÖ Lazy loaded CSS: ${d}`),i()},s.onerror=t,document.head.appendChild(s)}),td=()=>{const d=[],i=()=>{d.forEach(t=>{ed(t)})};"requestIdleCallback"in window?requestIdleCallback(i):setTimeout(i,1)},rd=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ö° [Performance] Electron'da font preload atlandƒ±");return}console.log("‚ö° [Performance] Font preload atlandƒ± - system fonts kullanƒ±lƒ±yor")},od=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ÑπÔ∏è Preload skipped: Electron detected");return}console.log("‚úÖ Key resources preloaded")},Js=()=>{const d=document.getElementById("critical-css");d&&setTimeout(()=>{d.remove(),console.log("üóëÔ∏è Critical CSS removed (full CSS loaded)")},1e3)},nd=()=>{Ql(),od(),rd(),td(),document.readyState==="complete"?Js():window.addEventListener("load",Js)},Wn={serverSettings:()=>M(()=>import("./ServerSettingsModal-Do-5EL8u.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url),userProfile:()=>M(()=>import("./UserProfileModal-BxkGw8he.js"),__vite__mapDeps([6,1,2]),import.meta.url),imageModal:()=>M(()=>import("./ImageModal-DM5qgKTp.js"),__vite__mapDeps([7,1,2]),import.meta.url),gifPicker:()=>M(()=>import("./GifPicker-BC8dSWwq.js"),__vite__mapDeps([8,1,2]),import.meta.url),stickerPicker:()=>M(()=>import("./StickerPicker-BABuvz6l.js"),__vite__mapDeps([9,1,2]),import.meta.url),soundboard:()=>M(()=>import("./SoundboardModal-BKG3Va3D.js"),__vite__mapDeps([10,1,2]),import.meta.url),watchParty:()=>M(()=>import("./WatchPartyEnhanced-6WOEeCnn.js"),__vite__mapDeps([11,1,2]),import.meta.url),cinema:()=>M(()=>import("./CinemaModal-TqNOkebh.js"),__vite__mapDeps([12,1,2]),import.meta.url),whiteboard:()=>M(()=>import("./WhiteboardModal-DA9fcvjG.js"),__vite__mapDeps([13,1,2]),import.meta.url),poll:()=>M(()=>import("./PollCreateModal--dQQ63jv.js"),__vite__mapDeps([14,1,2]),import.meta.url),codeSnippet:()=>M(()=>import("./CodeSnippetModal-Bn2LWIFY.js"),__vite__mapDeps([15,1,2]),import.meta.url),messageTemplate:()=>M(()=>import("./MessageTemplateModal-Disc5kuo.js"),__vite__mapDeps([16,1,2]),import.meta.url)},t0=()=>{const d=[Wn.userProfile,Wn.imageModal];setTimeout(()=>{d.forEach(i=>i())},3e3)},Ra=()=>{"requestIdleCallback"in window&&requestIdleCallback(()=>{Wn.gifPicker(),Wn.stickerPicker()})},Pa={default:{name:"Pawscord Dark",colors:{"--background-primary":"#313338","--background-secondary":"#2b2d31","--background-tertiary":"#1e1f22","--background-accent":"#404249","--text-primary":"#dbdee1","--text-secondary":"#949ba4","--text-muted":"#787f89","--text-link":"#00a8fc","--button-primary":"#5865f2","--button-secondary":"#4e5058","--border-primary":"#1f2023"}},midnight:{name:"Midnight AMOLED",colors:{"--background-primary":"#000000","--background-secondary":"#0a0a0a","--background-tertiary":"#111111","--background-accent":"#222222","--text-primary":"#ffffff","--text-secondary":"#b0b0b0","--text-muted":"#666666","--text-link":"#3ea6ff","--button-primary":"#3ea6ff","--button-secondary":"#333333","--border-primary":"#333333"}},dracula:{name:"Dracula",colors:{"--background-primary":"#282a36","--background-secondary":"#44475a","--background-tertiary":"#6272a4","--background-accent":"#44475a","--text-primary":"#f8f8f2","--text-secondary":"#bfbfbf","--text-muted":"#6272a4","--text-link":"#8be9fd","--button-primary":"#bd93f9","--button-secondary":"#44475a","--border-primary":"#44475a"}},ocean:{name:"Deep Ocean",colors:{"--background-primary":"#0f172a","--background-secondary":"#1e293b","--background-tertiary":"#334155","--background-accent":"#334155","--text-primary":"#e2e8f0","--text-secondary":"#94a3b8","--text-muted":"#64748b","--text-link":"#38bdf8","--button-primary":"#0ea5e9","--button-secondary":"#334155","--border-primary":"#1e293b"}},forest:{name:"Enchanted Forest",colors:{"--background-primary":"#1a2f1a","--background-secondary":"#243b24","--background-tertiary":"#2f4b2f","--background-accent":"#3a5a3a","--text-primary":"#e0ffe0","--text-secondary":"#a0cca0","--text-muted":"#608060","--text-link":"#4caf50","--button-primary":"#4caf50","--button-secondary":"#2f4b2f","--border-primary":"#2f4b2f"}},matrix:{name:"The Matrix",colors:{"--background-primary":"#0d0d0d","--background-secondary":"#121212","--background-tertiary":"#1a1a1a","--background-accent":"#003b00","--text-primary":"#00ff41","--text-secondary":"#008f11","--text-muted":"#003b00","--text-link":"#00ff41","--button-primary":"#008f11","--button-secondary":"#003b00","--border-primary":"#003b00"}},sunset:{name:"Sunset Vibes",colors:{"--background-primary":"#2d1b2e","--background-secondary":"#442740","--background-tertiary":"#5a3450","--background-accent":"#734361","--text-primary":"#ffccaa","--text-secondary":"#ff9e7d","--text-muted":"#b05963","--text-link":"#ffbd69","--button-primary":"#ff6b6b","--button-secondary":"#5a3450","--border-primary":"#5a3450"}}},ad=d=>{const i=Pa[d]||Pa.default,t=document.documentElement;Object.entries(i.colors).forEach(([s,l])=>{t.style.setProperty(s,l)}),localStorage.setItem("pawscord_theme",d)},sd=()=>{const d=localStorage.getItem("pawscord_theme");return d&&Pa[d]?(ad(d),d):"default"},Xs=d=>{let i;const t=new Set,s=(m,y)=>{const A=typeof m=="function"?m(i):m;if(!Object.is(A,i)){const g=i;i=y??(typeof A!="object"||A===null)?A:Object.assign({},i,A),t.forEach(k=>k(i,g))}},l=()=>i,b={setState:s,getState:l,getInitialState:()=>S,subscribe:m=>(t.add(m),()=>t.delete(m))},S=i=d(s,l,b);return b},id=(d=>d?Xs(d):Xs),cd=d=>d;function ld(d,i=cd){const t=e.useSyncExternalStore(d.subscribe,e.useCallback(()=>i(d.getState()),[d,i]),e.useCallback(()=>i(d.getInitialState()),[d,i]));return e.useDebugValue(t),t}const Zs=d=>{const i=id(d),t=s=>ld(i,s);return Object.assign(t,i),t},dd=(d=>d?Zs(d):Zs),He=dd((d,i)=>({messages:[],encryptionKeys:{},activeChat:{type:"welcome",id:"welcome",targetUser:null},unreadCounts:{},typingUsers:[],onlineUsers:[],voiceUsers:{},currentPermissions:{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1},setActiveChat:(t,s,l=null)=>{console.log("üîÑ [Store] setActiveChat called:",{type:t,id:s,targetUser:l}),console.log("üîÑ [Store] Current messages count:",i().messages.length),d({activeChat:{type:t,id:s,targetUser:l}});const x=t==="room"?`room-${s}`:`dm-${s}`;d(B=>{const b={...B.unreadCounts};return delete b[x],{unreadCounts:b}})},addMessage:t=>d(s=>!t||typeof t!="object"||!t.id?(console.warn("‚ö†Ô∏è [Store] Invalid message rejected:",t),s):t.temp_id&&s.messages.some(x=>x.temp_id===t.temp_id)?{messages:s.messages.map(x=>x.temp_id===t.temp_id?t:x)}:s.messages.some(l=>l.id===t.id)?s:{messages:[...s.messages,t]}),updateMessage:(t,s)=>d(l=>({messages:l.messages.map(x=>x.id===t?{...x,...s}:x)})),setMessages:t=>d(s=>{const l=typeof t=="function"?t(s.messages):t;return{messages:Array.isArray(l)?l.filter(B=>B&&typeof B=="object"&&B.id):[]}}),prependMessages:t=>d(s=>({messages:[...t,...s.messages]})),incrementUnread:t=>d(s=>({unreadCounts:{...s.unreadCounts,[t]:(s.unreadCounts[t]||0)+1}})),setOnlineUsers:t=>d({onlineUsers:t}),setTypingUser:(t,s)=>d(l=>s?{typingUsers:l.typingUsers.includes(t)?l.typingUsers:[...l.typingUsers,t]}:{typingUsers:l.typingUsers.filter(x=>x!==t)}),setVoiceUsers:t=>d({voiceUsers:t}),setEncryptionKey:(t,s)=>d(l=>({encryptionKeys:{...l.encryptionKeys,[t]:s}})),setPermissions:t=>d({currentPermissions:t||{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1}})}));var sn={exports:{}};function ud(d){throw new Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cn={exports:{}};const fd={},md=Object.freeze(Object.defineProperty({__proto__:null,default:fd},Symbol.toStringTag,{value:"Module"})),pd=ol(md);var xd=cn.exports,Qs;function ve(){return Qs||(Qs=1,(function(d,i){(function(t,s){d.exports=s()})(xd,function(){var t=t||(function(s,l){var x;if(typeof window<"u"&&window.crypto&&(x=window.crypto),typeof self<"u"&&self.crypto&&(x=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(x=globalThis.crypto),!x&&typeof window<"u"&&window.msCrypto&&(x=window.msCrypto),!x&&typeof ka<"u"&&ka.crypto&&(x=ka.crypto),!x&&typeof ud=="function")try{x=pd}catch{}var B=function(){if(x){if(typeof x.getRandomValues=="function")try{return x.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof x.randomBytes=="function")try{return x.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},b=Object.create||(function(){function c(){}return function(o){var n;return c.prototype=o,n=new c,c.prototype=null,n}})(),S={},m=S.lib={},y=m.Base=(function(){return{extend:function(c){var o=b(this);return c&&o.mixIn(c),(!o.hasOwnProperty("init")||this.init===o.init)&&(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var o in c)c.hasOwnProperty(o)&&(this[o]=c[o]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),A=m.WordArray=y.extend({init:function(c,o){c=this.words=c||[],o!=l?this.sigBytes=o:this.sigBytes=c.length*4},toString:function(c){return(c||k).stringify(this)},concat:function(c){var o=this.words,n=c.words,f=this.sigBytes,u=c.sigBytes;if(this.clamp(),f%4)for(var P=0;P<u;P++){var L=n[P>>>2]>>>24-P%4*8&255;o[f+P>>>2]|=L<<24-(f+P)%4*8}else for(var q=0;q<u;q+=4)o[f+q>>>2]=n[q>>>2];return this.sigBytes+=u,this},clamp:function(){var c=this.words,o=this.sigBytes;c[o>>>2]&=4294967295<<32-o%4*8,c.length=s.ceil(o/4)},clone:function(){var c=y.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var o=[],n=0;n<c;n+=4)o.push(B());return new A.init(o,c)}}),g=S.enc={},k=g.Hex={stringify:function(c){for(var o=c.words,n=c.sigBytes,f=[],u=0;u<n;u++){var P=o[u>>>2]>>>24-u%4*8&255;f.push((P>>>4).toString(16)),f.push((P&15).toString(16))}return f.join("")},parse:function(c){for(var o=c.length,n=[],f=0;f<o;f+=2)n[f>>>3]|=parseInt(c.substr(f,2),16)<<24-f%8*4;return new A.init(n,o/2)}},w=g.Latin1={stringify:function(c){for(var o=c.words,n=c.sigBytes,f=[],u=0;u<n;u++){var P=o[u>>>2]>>>24-u%4*8&255;f.push(String.fromCharCode(P))}return f.join("")},parse:function(c){for(var o=c.length,n=[],f=0;f<o;f++)n[f>>>2]|=(c.charCodeAt(f)&255)<<24-f%4*8;return new A.init(n,o)}},C=g.Utf8={stringify:function(c){try{return decodeURIComponent(escape(w.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return w.parse(unescape(encodeURIComponent(c)))}},v=m.BufferedBlockAlgorithm=y.extend({reset:function(){this._data=new A.init,this._nDataBytes=0},_append:function(c){typeof c=="string"&&(c=C.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var o,n=this._data,f=n.words,u=n.sigBytes,P=this.blockSize,L=P*4,q=u/L;c?q=s.ceil(q):q=s.max((q|0)-this._minBufferSize,0);var F=q*P,U=s.min(F*4,u);if(F){for(var V=0;V<F;V+=P)this._doProcessBlock(f,V);o=f.splice(0,F),n.sigBytes-=U}return new A.init(o,U)},clone:function(){var c=y.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0});m.Hasher=v.extend({cfg:y.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){c&&this._append(c);var o=this._doFinalize();return o},blockSize:16,_createHelper:function(c){return function(o,n){return new c.init(n).finalize(o)}},_createHmacHelper:function(c){return function(o,n){return new h.HMAC.init(c,n).finalize(o)}}});var h=S.algo={};return S})(Math);return t})})(cn)),cn.exports}var ln={exports:{}},hd=ln.exports,ei;function qn(){return ei||(ei=1,(function(d,i){(function(t,s){d.exports=s(ve())})(hd,function(t){return(function(s){var l=t,x=l.lib,B=x.Base,b=x.WordArray,S=l.x64={};S.Word=B.extend({init:function(m,y){this.high=m,this.low=y}}),S.WordArray=B.extend({init:function(m,y){m=this.words=m||[],y!=s?this.sigBytes=y:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,y=m.length,A=[],g=0;g<y;g++){var k=m[g];A.push(k.high),A.push(k.low)}return b.create(A,this.sigBytes)},clone:function(){for(var m=B.clone.call(this),y=m.words=this.words.slice(0),A=y.length,g=0;g<A;g++)y[g]=y[g].clone();return m}})})(),t})})(ln)),ln.exports}var dn={exports:{}},gd=dn.exports,ti;function yd(){return ti||(ti=1,(function(d,i){(function(t,s){d.exports=s(ve())})(gd,function(t){return(function(){if(typeof ArrayBuffer=="function"){var s=t,l=s.lib,x=l.WordArray,B=x.init,b=x.init=function(S){if(S instanceof ArrayBuffer&&(S=new Uint8Array(S)),(S instanceof Int8Array||typeof Uint8ClampedArray<"u"&&S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array)&&(S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength)),S instanceof Uint8Array){for(var m=S.byteLength,y=[],A=0;A<m;A++)y[A>>>2]|=S[A]<<24-A%4*8;B.call(this,y,m)}else B.apply(this,arguments)};b.prototype=x}})(),t.lib.WordArray})})(dn)),dn.exports}var un={exports:{}},vd=un.exports,ri;function Ed(){return ri||(ri=1,(function(d,i){(function(t,s){d.exports=s(ve())})(vd,function(t){return(function(){var s=t,l=s.lib,x=l.WordArray,B=s.enc;B.Utf16=B.Utf16BE={stringify:function(S){for(var m=S.words,y=S.sigBytes,A=[],g=0;g<y;g+=2){var k=m[g>>>2]>>>16-g%4*8&65535;A.push(String.fromCharCode(k))}return A.join("")},parse:function(S){for(var m=S.length,y=[],A=0;A<m;A++)y[A>>>1]|=S.charCodeAt(A)<<16-A%2*16;return x.create(y,m*2)}},B.Utf16LE={stringify:function(S){for(var m=S.words,y=S.sigBytes,A=[],g=0;g<y;g+=2){var k=b(m[g>>>2]>>>16-g%4*8&65535);A.push(String.fromCharCode(k))}return A.join("")},parse:function(S){for(var m=S.length,y=[],A=0;A<m;A++)y[A>>>1]|=b(S.charCodeAt(A)<<16-A%2*16);return x.create(y,m*2)}};function b(S){return S<<8&4278255360|S>>>8&16711935}})(),t.enc.Utf16})})(un)),un.exports}var fn={exports:{}},bd=fn.exports,oi;function Fr(){return oi||(oi=1,(function(d,i){(function(t,s){d.exports=s(ve())})(bd,function(t){return(function(){var s=t,l=s.lib,x=l.WordArray,B=s.enc;B.Base64={stringify:function(S){var m=S.words,y=S.sigBytes,A=this._map;S.clamp();for(var g=[],k=0;k<y;k+=3)for(var w=m[k>>>2]>>>24-k%4*8&255,C=m[k+1>>>2]>>>24-(k+1)%4*8&255,v=m[k+2>>>2]>>>24-(k+2)%4*8&255,h=w<<16|C<<8|v,c=0;c<4&&k+c*.75<y;c++)g.push(A.charAt(h>>>6*(3-c)&63));var o=A.charAt(64);if(o)for(;g.length%4;)g.push(o);return g.join("")},parse:function(S){var m=S.length,y=this._map,A=this._reverseMap;if(!A){A=this._reverseMap=[];for(var g=0;g<y.length;g++)A[y.charCodeAt(g)]=g}var k=y.charAt(64);if(k){var w=S.indexOf(k);w!==-1&&(m=w)}return b(S,m,A)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function b(S,m,y){for(var A=[],g=0,k=0;k<m;k++)if(k%4){var w=y[S.charCodeAt(k-1)]<<k%4*2,C=y[S.charCodeAt(k)]>>>6-k%4*2,v=w|C;A[g>>>2]|=v<<24-g%4*8,g++}return x.create(A,g)}})(),t.enc.Base64})})(fn)),fn.exports}var mn={exports:{}},_d=mn.exports,ni;function Sd(){return ni||(ni=1,(function(d,i){(function(t,s){d.exports=s(ve())})(_d,function(t){return(function(){var s=t,l=s.lib,x=l.WordArray,B=s.enc;B.Base64url={stringify:function(S,m){m===void 0&&(m=!0);var y=S.words,A=S.sigBytes,g=m?this._safe_map:this._map;S.clamp();for(var k=[],w=0;w<A;w+=3)for(var C=y[w>>>2]>>>24-w%4*8&255,v=y[w+1>>>2]>>>24-(w+1)%4*8&255,h=y[w+2>>>2]>>>24-(w+2)%4*8&255,c=C<<16|v<<8|h,o=0;o<4&&w+o*.75<A;o++)k.push(g.charAt(c>>>6*(3-o)&63));var n=g.charAt(64);if(n)for(;k.length%4;)k.push(n);return k.join("")},parse:function(S,m){m===void 0&&(m=!0);var y=S.length,A=m?this._safe_map:this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var k=0;k<A.length;k++)g[A.charCodeAt(k)]=k}var w=A.charAt(64);if(w){var C=S.indexOf(w);C!==-1&&(y=C)}return b(S,y,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function b(S,m,y){for(var A=[],g=0,k=0;k<m;k++)if(k%4){var w=y[S.charCodeAt(k-1)]<<k%4*2,C=y[S.charCodeAt(k)]>>>6-k%4*2,v=w|C;A[g>>>2]|=v<<24-g%4*8,g++}return x.create(A,g)}})(),t.enc.Base64url})})(mn)),mn.exports}var pn={exports:{}},wd=pn.exports,ai;function Rr(){return ai||(ai=1,(function(d,i){(function(t,s){d.exports=s(ve())})(wd,function(t){return(function(s){var l=t,x=l.lib,B=x.WordArray,b=x.Hasher,S=l.algo,m=[];(function(){for(var C=0;C<64;C++)m[C]=s.abs(s.sin(C+1))*4294967296|0})();var y=S.MD5=b.extend({_doReset:function(){this._hash=new B.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(C,v){for(var h=0;h<16;h++){var c=v+h,o=C[c];C[c]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360}var n=this._hash.words,f=C[v+0],u=C[v+1],P=C[v+2],L=C[v+3],q=C[v+4],F=C[v+5],U=C[v+6],V=C[v+7],j=C[v+8],re=C[v+9],ne=C[v+10],de=C[v+11],he=C[v+12],ue=C[v+13],ge=C[v+14],be=C[v+15],p=n[0],J=n[1],X=n[2],Y=n[3];p=A(p,J,X,Y,f,7,m[0]),Y=A(Y,p,J,X,u,12,m[1]),X=A(X,Y,p,J,P,17,m[2]),J=A(J,X,Y,p,L,22,m[3]),p=A(p,J,X,Y,q,7,m[4]),Y=A(Y,p,J,X,F,12,m[5]),X=A(X,Y,p,J,U,17,m[6]),J=A(J,X,Y,p,V,22,m[7]),p=A(p,J,X,Y,j,7,m[8]),Y=A(Y,p,J,X,re,12,m[9]),X=A(X,Y,p,J,ne,17,m[10]),J=A(J,X,Y,p,de,22,m[11]),p=A(p,J,X,Y,he,7,m[12]),Y=A(Y,p,J,X,ue,12,m[13]),X=A(X,Y,p,J,ge,17,m[14]),J=A(J,X,Y,p,be,22,m[15]),p=g(p,J,X,Y,u,5,m[16]),Y=g(Y,p,J,X,U,9,m[17]),X=g(X,Y,p,J,de,14,m[18]),J=g(J,X,Y,p,f,20,m[19]),p=g(p,J,X,Y,F,5,m[20]),Y=g(Y,p,J,X,ne,9,m[21]),X=g(X,Y,p,J,be,14,m[22]),J=g(J,X,Y,p,q,20,m[23]),p=g(p,J,X,Y,re,5,m[24]),Y=g(Y,p,J,X,ge,9,m[25]),X=g(X,Y,p,J,L,14,m[26]),J=g(J,X,Y,p,j,20,m[27]),p=g(p,J,X,Y,ue,5,m[28]),Y=g(Y,p,J,X,P,9,m[29]),X=g(X,Y,p,J,V,14,m[30]),J=g(J,X,Y,p,he,20,m[31]),p=k(p,J,X,Y,F,4,m[32]),Y=k(Y,p,J,X,j,11,m[33]),X=k(X,Y,p,J,de,16,m[34]),J=k(J,X,Y,p,ge,23,m[35]),p=k(p,J,X,Y,u,4,m[36]),Y=k(Y,p,J,X,q,11,m[37]),X=k(X,Y,p,J,V,16,m[38]),J=k(J,X,Y,p,ne,23,m[39]),p=k(p,J,X,Y,ue,4,m[40]),Y=k(Y,p,J,X,f,11,m[41]),X=k(X,Y,p,J,L,16,m[42]),J=k(J,X,Y,p,U,23,m[43]),p=k(p,J,X,Y,re,4,m[44]),Y=k(Y,p,J,X,he,11,m[45]),X=k(X,Y,p,J,be,16,m[46]),J=k(J,X,Y,p,P,23,m[47]),p=w(p,J,X,Y,f,6,m[48]),Y=w(Y,p,J,X,V,10,m[49]),X=w(X,Y,p,J,ge,15,m[50]),J=w(J,X,Y,p,F,21,m[51]),p=w(p,J,X,Y,he,6,m[52]),Y=w(Y,p,J,X,L,10,m[53]),X=w(X,Y,p,J,ne,15,m[54]),J=w(J,X,Y,p,u,21,m[55]),p=w(p,J,X,Y,j,6,m[56]),Y=w(Y,p,J,X,be,10,m[57]),X=w(X,Y,p,J,U,15,m[58]),J=w(J,X,Y,p,ue,21,m[59]),p=w(p,J,X,Y,q,6,m[60]),Y=w(Y,p,J,X,de,10,m[61]),X=w(X,Y,p,J,P,15,m[62]),J=w(J,X,Y,p,re,21,m[63]),n[0]=n[0]+p|0,n[1]=n[1]+J|0,n[2]=n[2]+X|0,n[3]=n[3]+Y|0},_doFinalize:function(){var C=this._data,v=C.words,h=this._nDataBytes*8,c=C.sigBytes*8;v[c>>>5]|=128<<24-c%32;var o=s.floor(h/4294967296),n=h;v[(c+64>>>9<<4)+15]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,v[(c+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,C.sigBytes=(v.length+1)*4,this._process();for(var f=this._hash,u=f.words,P=0;P<4;P++){var L=u[P];u[P]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return f},clone:function(){var C=b.clone.call(this);return C._hash=this._hash.clone(),C}});function A(C,v,h,c,o,n,f){var u=C+(v&h|~v&c)+o+f;return(u<<n|u>>>32-n)+v}function g(C,v,h,c,o,n,f){var u=C+(v&c|h&~c)+o+f;return(u<<n|u>>>32-n)+v}function k(C,v,h,c,o,n,f){var u=C+(v^h^c)+o+f;return(u<<n|u>>>32-n)+v}function w(C,v,h,c,o,n,f){var u=C+(h^(v|~c))+o+f;return(u<<n|u>>>32-n)+v}l.MD5=b._createHelper(y),l.HmacMD5=b._createHmacHelper(y)})(Math),t.MD5})})(pn)),pn.exports}var xn={exports:{}},Cd=xn.exports,si;function r0(){return si||(si=1,(function(d,i){(function(t,s){d.exports=s(ve())})(Cd,function(t){return(function(){var s=t,l=s.lib,x=l.WordArray,B=l.Hasher,b=s.algo,S=[],m=b.SHA1=B.extend({_doReset:function(){this._hash=new x.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(y,A){for(var g=this._hash.words,k=g[0],w=g[1],C=g[2],v=g[3],h=g[4],c=0;c<80;c++){if(c<16)S[c]=y[A+c]|0;else{var o=S[c-3]^S[c-8]^S[c-14]^S[c-16];S[c]=o<<1|o>>>31}var n=(k<<5|k>>>27)+h+S[c];c<20?n+=(w&C|~w&v)+1518500249:c<40?n+=(w^C^v)+1859775393:c<60?n+=(w&C|w&v|C&v)-1894007588:n+=(w^C^v)-899497514,h=v,v=C,C=w<<30|w>>>2,w=k,k=n}g[0]=g[0]+k|0,g[1]=g[1]+w|0,g[2]=g[2]+C|0,g[3]=g[3]+v|0,g[4]=g[4]+h|0},_doFinalize:function(){var y=this._data,A=y.words,g=this._nDataBytes*8,k=y.sigBytes*8;return A[k>>>5]|=128<<24-k%32,A[(k+64>>>9<<4)+14]=Math.floor(g/4294967296),A[(k+64>>>9<<4)+15]=g,y.sigBytes=A.length*4,this._process(),this._hash},clone:function(){var y=B.clone.call(this);return y._hash=this._hash.clone(),y}});s.SHA1=B._createHelper(m),s.HmacSHA1=B._createHmacHelper(m)})(),t.SHA1})})(xn)),xn.exports}var hn={exports:{}},kd=hn.exports,ii;function Na(){return ii||(ii=1,(function(d,i){(function(t,s){d.exports=s(ve())})(kd,function(t){return(function(s){var l=t,x=l.lib,B=x.WordArray,b=x.Hasher,S=l.algo,m=[],y=[];(function(){function k(h){for(var c=s.sqrt(h),o=2;o<=c;o++)if(!(h%o))return!1;return!0}function w(h){return(h-(h|0))*4294967296|0}for(var C=2,v=0;v<64;)k(C)&&(v<8&&(m[v]=w(s.pow(C,1/2))),y[v]=w(s.pow(C,1/3)),v++),C++})();var A=[],g=S.SHA256=b.extend({_doReset:function(){this._hash=new B.init(m.slice(0))},_doProcessBlock:function(k,w){for(var C=this._hash.words,v=C[0],h=C[1],c=C[2],o=C[3],n=C[4],f=C[5],u=C[6],P=C[7],L=0;L<64;L++){if(L<16)A[L]=k[w+L]|0;else{var q=A[L-15],F=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,U=A[L-2],V=(U<<15|U>>>17)^(U<<13|U>>>19)^U>>>10;A[L]=F+A[L-7]+V+A[L-16]}var j=n&f^~n&u,re=v&h^v&c^h&c,ne=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),de=(n<<26|n>>>6)^(n<<21|n>>>11)^(n<<7|n>>>25),he=P+de+j+y[L]+A[L],ue=ne+re;P=u,u=f,f=n,n=o+he|0,o=c,c=h,h=v,v=he+ue|0}C[0]=C[0]+v|0,C[1]=C[1]+h|0,C[2]=C[2]+c|0,C[3]=C[3]+o|0,C[4]=C[4]+n|0,C[5]=C[5]+f|0,C[6]=C[6]+u|0,C[7]=C[7]+P|0},_doFinalize:function(){var k=this._data,w=k.words,C=this._nDataBytes*8,v=k.sigBytes*8;return w[v>>>5]|=128<<24-v%32,w[(v+64>>>9<<4)+14]=s.floor(C/4294967296),w[(v+64>>>9<<4)+15]=C,k.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var k=b.clone.call(this);return k._hash=this._hash.clone(),k}});l.SHA256=b._createHelper(g),l.HmacSHA256=b._createHmacHelper(g)})(Math),t.SHA256})})(hn)),hn.exports}var gn={exports:{}},Ad=gn.exports,ci;function Bd(){return ci||(ci=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Na())})(Ad,function(t){return(function(){var s=t,l=s.lib,x=l.WordArray,B=s.algo,b=B.SHA256,S=B.SHA224=b.extend({_doReset:function(){this._hash=new x.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=b._doFinalize.call(this);return m.sigBytes-=4,m}});s.SHA224=b._createHelper(S),s.HmacSHA224=b._createHmacHelper(S)})(),t.SHA224})})(gn)),gn.exports}var yn={exports:{}},Dd=yn.exports,li;function o0(){return li||(li=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),qn())})(Dd,function(t){return(function(){var s=t,l=s.lib,x=l.Hasher,B=s.x64,b=B.Word,S=B.WordArray,m=s.algo;function y(){return b.create.apply(b,arguments)}var A=[y(1116352408,3609767458),y(1899447441,602891725),y(3049323471,3964484399),y(3921009573,2173295548),y(961987163,4081628472),y(1508970993,3053834265),y(2453635748,2937671579),y(2870763221,3664609560),y(3624381080,2734883394),y(310598401,1164996542),y(607225278,1323610764),y(1426881987,3590304994),y(1925078388,4068182383),y(2162078206,991336113),y(2614888103,633803317),y(3248222580,3479774868),y(3835390401,2666613458),y(4022224774,944711139),y(264347078,2341262773),y(604807628,2007800933),y(770255983,1495990901),y(1249150122,1856431235),y(1555081692,3175218132),y(1996064986,2198950837),y(2554220882,3999719339),y(2821834349,766784016),y(2952996808,2566594879),y(3210313671,3203337956),y(3336571891,1034457026),y(3584528711,2466948901),y(113926993,3758326383),y(338241895,168717936),y(666307205,1188179964),y(773529912,1546045734),y(1294757372,1522805485),y(1396182291,2643833823),y(1695183700,2343527390),y(1986661051,1014477480),y(2177026350,1206759142),y(2456956037,344077627),y(2730485921,1290863460),y(2820302411,3158454273),y(3259730800,3505952657),y(3345764771,106217008),y(3516065817,3606008344),y(3600352804,1432725776),y(4094571909,1467031594),y(275423344,851169720),y(430227734,3100823752),y(506948616,1363258195),y(659060556,3750685593),y(883997877,3785050280),y(958139571,3318307427),y(1322822218,3812723403),y(1537002063,2003034995),y(1747873779,3602036899),y(1955562222,1575990012),y(2024104815,1125592928),y(2227730452,2716904306),y(2361852424,442776044),y(2428436474,593698344),y(2756734187,3733110249),y(3204031479,2999351573),y(3329325298,3815920427),y(3391569614,3928383900),y(3515267271,566280711),y(3940187606,3454069534),y(4118630271,4000239992),y(116418474,1914138554),y(174292421,2731055270),y(289380356,3203993006),y(460393269,320620315),y(685471733,587496836),y(852142971,1086792851),y(1017036298,365543100),y(1126000580,2618297676),y(1288033470,3409855158),y(1501505948,4234509866),y(1607167915,987167468),y(1816402316,1246189591)],g=[];(function(){for(var w=0;w<80;w++)g[w]=y()})();var k=m.SHA512=x.extend({_doReset:function(){this._hash=new S.init([new b.init(1779033703,4089235720),new b.init(3144134277,2227873595),new b.init(1013904242,4271175723),new b.init(2773480762,1595750129),new b.init(1359893119,2917565137),new b.init(2600822924,725511199),new b.init(528734635,4215389547),new b.init(1541459225,327033209)])},_doProcessBlock:function(w,C){for(var v=this._hash.words,h=v[0],c=v[1],o=v[2],n=v[3],f=v[4],u=v[5],P=v[6],L=v[7],q=h.high,F=h.low,U=c.high,V=c.low,j=o.high,re=o.low,ne=n.high,de=n.low,he=f.high,ue=f.low,ge=u.high,be=u.low,p=P.high,J=P.low,X=L.high,Y=L.low,ke=q,ce=F,we=U,me=V,Ct=j,kt=re,dr=ne,Ot=de,qe=he,Oe=ue,zt=ge,Qe=be,qt=p,lt=J,ur=X,At=Y,et=0;et<80;et++){var Fe,at,dt=g[et];if(et<16)at=dt.high=w[C+et*2]|0,Fe=dt.low=w[C+et*2+1]|0;else{var Pr=g[et-15],tt=Pr.high,Mt=Pr.low,Ir=(tt>>>1|Mt<<31)^(tt>>>8|Mt<<24)^tt>>>7,Lr=(Mt>>>1|tt<<31)^(Mt>>>8|tt<<24)^(Mt>>>7|tt<<25),Te=g[et-2],te=Te.high,ut=Te.low,fr=(te>>>19|ut<<13)^(te<<3|ut>>>29)^te>>>6,Kt=(ut>>>19|te<<13)^(ut<<3|te>>>29)^(ut>>>6|te<<26),$r=g[et-7],rt=$r.high,Yt=$r.low,ye=g[et-16],Or=ye.high,mr=ye.low;Fe=Lr+Yt,at=Ir+rt+(Fe>>>0<Lr>>>0?1:0),Fe=Fe+Kt,at=at+fr+(Fe>>>0<Kt>>>0?1:0),Fe=Fe+mr,at=at+Or+(Fe>>>0<mr>>>0?1:0),dt.high=at,dt.low=Fe}var Ut=qe&zt^~qe&qt,Bt=Oe&Qe^~Oe&lt,pr=ke&we^ke&Ct^we&Ct,zr=ce&me^ce&kt^me&kt,Ke=(ke>>>28|ce<<4)^(ke<<30|ce>>>2)^(ke<<25|ce>>>7),xr=(ce>>>28|ke<<4)^(ce<<30|ke>>>2)^(ce<<25|ke>>>7),xt=(qe>>>14|Oe<<18)^(qe>>>18|Oe<<14)^(qe<<23|Oe>>>9),hr=(Oe>>>14|qe<<18)^(Oe>>>18|qe<<14)^(Oe<<23|qe>>>9),ht=A[et],ft=ht.high,Vt=ht.low,Le=At+hr,se=ur+xt+(Le>>>0<At>>>0?1:0),Le=Le+Bt,se=se+Ut+(Le>>>0<Bt>>>0?1:0),Le=Le+Vt,se=se+ft+(Le>>>0<Vt>>>0?1:0),Le=Le+Fe,se=se+at+(Le>>>0<Fe>>>0?1:0),_e=xr+zr,gt=Ke+pr+(_e>>>0<xr>>>0?1:0);ur=qt,At=lt,qt=zt,lt=Qe,zt=qe,Qe=Oe,Oe=Ot+Le|0,qe=dr+se+(Oe>>>0<Ot>>>0?1:0)|0,dr=Ct,Ot=kt,Ct=we,kt=me,we=ke,me=ce,ce=Le+_e|0,ke=se+gt+(ce>>>0<Le>>>0?1:0)|0}F=h.low=F+ce,h.high=q+ke+(F>>>0<ce>>>0?1:0),V=c.low=V+me,c.high=U+we+(V>>>0<me>>>0?1:0),re=o.low=re+kt,o.high=j+Ct+(re>>>0<kt>>>0?1:0),de=n.low=de+Ot,n.high=ne+dr+(de>>>0<Ot>>>0?1:0),ue=f.low=ue+Oe,f.high=he+qe+(ue>>>0<Oe>>>0?1:0),be=u.low=be+Qe,u.high=ge+zt+(be>>>0<Qe>>>0?1:0),J=P.low=J+lt,P.high=p+qt+(J>>>0<lt>>>0?1:0),Y=L.low=Y+At,L.high=X+ur+(Y>>>0<At>>>0?1:0)},_doFinalize:function(){var w=this._data,C=w.words,v=this._nDataBytes*8,h=w.sigBytes*8;C[h>>>5]|=128<<24-h%32,C[(h+128>>>10<<5)+30]=Math.floor(v/4294967296),C[(h+128>>>10<<5)+31]=v,w.sigBytes=C.length*4,this._process();var c=this._hash.toX32();return c},clone:function(){var w=x.clone.call(this);return w._hash=this._hash.clone(),w},blockSize:1024/32});s.SHA512=x._createHelper(k),s.HmacSHA512=x._createHmacHelper(k)})(),t.SHA512})})(yn)),yn.exports}var vn={exports:{}},Td=vn.exports,di;function Fd(){return di||(di=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),qn(),o0())})(Td,function(t){return(function(){var s=t,l=s.x64,x=l.Word,B=l.WordArray,b=s.algo,S=b.SHA512,m=b.SHA384=S.extend({_doReset:function(){this._hash=new B.init([new x.init(3418070365,3238371032),new x.init(1654270250,914150663),new x.init(2438529370,812702999),new x.init(355462360,4144912697),new x.init(1731405415,4290775857),new x.init(2394180231,1750603025),new x.init(3675008525,1694076839),new x.init(1203062813,3204075428)])},_doFinalize:function(){var y=S._doFinalize.call(this);return y.sigBytes-=16,y}});s.SHA384=S._createHelper(m),s.HmacSHA384=S._createHmacHelper(m)})(),t.SHA384})})(vn)),vn.exports}var En={exports:{}},Rd=En.exports,ui;function Pd(){return ui||(ui=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),qn())})(Rd,function(t){return(function(s){var l=t,x=l.lib,B=x.WordArray,b=x.Hasher,S=l.x64,m=S.Word,y=l.algo,A=[],g=[],k=[];(function(){for(var v=1,h=0,c=0;c<24;c++){A[v+5*h]=(c+1)*(c+2)/2%64;var o=h%5,n=(2*v+3*h)%5;v=o,h=n}for(var v=0;v<5;v++)for(var h=0;h<5;h++)g[v+5*h]=h+(2*v+3*h)%5*5;for(var f=1,u=0;u<24;u++){for(var P=0,L=0,q=0;q<7;q++){if(f&1){var F=(1<<q)-1;F<32?L^=1<<F:P^=1<<F-32}f&128?f=f<<1^113:f<<=1}k[u]=m.create(P,L)}})();var w=[];(function(){for(var v=0;v<25;v++)w[v]=m.create()})();var C=y.SHA3=b.extend({cfg:b.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],h=0;h<25;h++)v[h]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,h){for(var c=this._state,o=this.blockSize/2,n=0;n<o;n++){var f=v[h+2*n],u=v[h+2*n+1];f=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,u=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360;var P=c[n];P.high^=u,P.low^=f}for(var L=0;L<24;L++){for(var q=0;q<5;q++){for(var F=0,U=0,V=0;V<5;V++){var P=c[q+5*V];F^=P.high,U^=P.low}var j=w[q];j.high=F,j.low=U}for(var q=0;q<5;q++)for(var re=w[(q+4)%5],ne=w[(q+1)%5],de=ne.high,he=ne.low,F=re.high^(de<<1|he>>>31),U=re.low^(he<<1|de>>>31),V=0;V<5;V++){var P=c[q+5*V];P.high^=F,P.low^=U}for(var ue=1;ue<25;ue++){var F,U,P=c[ue],ge=P.high,be=P.low,p=A[ue];p<32?(F=ge<<p|be>>>32-p,U=be<<p|ge>>>32-p):(F=be<<p-32|ge>>>64-p,U=ge<<p-32|be>>>64-p);var J=w[g[ue]];J.high=F,J.low=U}var X=w[0],Y=c[0];X.high=Y.high,X.low=Y.low;for(var q=0;q<5;q++)for(var V=0;V<5;V++){var ue=q+5*V,P=c[ue],ke=w[ue],ce=w[(q+1)%5+5*V],we=w[(q+2)%5+5*V];P.high=ke.high^~ce.high&we.high,P.low=ke.low^~ce.low&we.low}var P=c[0],me=k[L];P.high^=me.high,P.low^=me.low}},_doFinalize:function(){var v=this._data,h=v.words;this._nDataBytes*8;var c=v.sigBytes*8,o=this.blockSize*32;h[c>>>5]|=1<<24-c%32,h[(s.ceil((c+1)/o)*o>>>5)-1]|=128,v.sigBytes=h.length*4,this._process();for(var n=this._state,f=this.cfg.outputLength/8,u=f/8,P=[],L=0;L<u;L++){var q=n[L],F=q.high,U=q.low;F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,P.push(U),P.push(F)}return new B.init(P,f)},clone:function(){for(var v=b.clone.call(this),h=v._state=this._state.slice(0),c=0;c<25;c++)h[c]=h[c].clone();return v}});l.SHA3=b._createHelper(C),l.HmacSHA3=b._createHmacHelper(C)})(Math),t.SHA3})})(En)),En.exports}var bn={exports:{}},Id=bn.exports,fi;function Ld(){return fi||(fi=1,(function(d,i){(function(t,s){d.exports=s(ve())})(Id,function(t){return(function(s){var l=t,x=l.lib,B=x.WordArray,b=x.Hasher,S=l.algo,m=B.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),y=B.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),A=B.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=B.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),k=B.create([0,1518500249,1859775393,2400959708,2840853838]),w=B.create([1352829926,1548603684,1836072691,2053994217,0]),C=S.RIPEMD160=b.extend({_doReset:function(){this._hash=B.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,P){for(var L=0;L<16;L++){var q=P+L,F=u[q];u[q]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}var U=this._hash.words,V=k.words,j=w.words,re=m.words,ne=y.words,de=A.words,he=g.words,ue,ge,be,p,J,X,Y,ke,ce,we;X=ue=U[0],Y=ge=U[1],ke=be=U[2],ce=p=U[3],we=J=U[4];for(var me,L=0;L<80;L+=1)me=ue+u[P+re[L]]|0,L<16?me+=v(ge,be,p)+V[0]:L<32?me+=h(ge,be,p)+V[1]:L<48?me+=c(ge,be,p)+V[2]:L<64?me+=o(ge,be,p)+V[3]:me+=n(ge,be,p)+V[4],me=me|0,me=f(me,de[L]),me=me+J|0,ue=J,J=p,p=f(be,10),be=ge,ge=me,me=X+u[P+ne[L]]|0,L<16?me+=n(Y,ke,ce)+j[0]:L<32?me+=o(Y,ke,ce)+j[1]:L<48?me+=c(Y,ke,ce)+j[2]:L<64?me+=h(Y,ke,ce)+j[3]:me+=v(Y,ke,ce)+j[4],me=me|0,me=f(me,he[L]),me=me+we|0,X=we,we=ce,ce=f(ke,10),ke=Y,Y=me;me=U[1]+be+ce|0,U[1]=U[2]+p+we|0,U[2]=U[3]+J+X|0,U[3]=U[4]+ue+Y|0,U[4]=U[0]+ge+ke|0,U[0]=me},_doFinalize:function(){var u=this._data,P=u.words,L=this._nDataBytes*8,q=u.sigBytes*8;P[q>>>5]|=128<<24-q%32,P[(q+64>>>9<<4)+14]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,u.sigBytes=(P.length+1)*4,this._process();for(var F=this._hash,U=F.words,V=0;V<5;V++){var j=U[V];U[V]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return F},clone:function(){var u=b.clone.call(this);return u._hash=this._hash.clone(),u}});function v(u,P,L){return u^P^L}function h(u,P,L){return u&P|~u&L}function c(u,P,L){return(u|~P)^L}function o(u,P,L){return u&L|P&~L}function n(u,P,L){return u^(P|~L)}function f(u,P){return u<<P|u>>>32-P}l.RIPEMD160=b._createHelper(C),l.HmacRIPEMD160=b._createHmacHelper(C)})(),t.RIPEMD160})})(bn)),bn.exports}var _n={exports:{}},$d=_n.exports,mi;function Wa(){return mi||(mi=1,(function(d,i){(function(t,s){d.exports=s(ve())})($d,function(t){(function(){var s=t,l=s.lib,x=l.Base,B=s.enc,b=B.Utf8,S=s.algo;S.HMAC=x.extend({init:function(m,y){m=this._hasher=new m.init,typeof y=="string"&&(y=b.parse(y));var A=m.blockSize,g=A*4;y.sigBytes>g&&(y=m.finalize(y)),y.clamp();for(var k=this._oKey=y.clone(),w=this._iKey=y.clone(),C=k.words,v=w.words,h=0;h<A;h++)C[h]^=1549556828,v[h]^=909522486;k.sigBytes=w.sigBytes=g,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var y=this._hasher,A=y.finalize(m);y.reset();var g=y.finalize(this._oKey.clone().concat(A));return g}})})()})})(_n)),_n.exports}var Sn={exports:{}},Od=Sn.exports,pi;function zd(){return pi||(pi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Na(),Wa())})(Od,function(t){return(function(){var s=t,l=s.lib,x=l.Base,B=l.WordArray,b=s.algo,S=b.SHA256,m=b.HMAC,y=b.PBKDF2=x.extend({cfg:x.extend({keySize:128/32,hasher:S,iterations:25e4}),init:function(A){this.cfg=this.cfg.extend(A)},compute:function(A,g){for(var k=this.cfg,w=m.create(k.hasher,A),C=B.create(),v=B.create([1]),h=C.words,c=v.words,o=k.keySize,n=k.iterations;h.length<o;){var f=w.update(g).finalize(v);w.reset();for(var u=f.words,P=u.length,L=f,q=1;q<n;q++){L=w.finalize(L),w.reset();for(var F=L.words,U=0;U<P;U++)u[U]^=F[U]}C.concat(f),c[0]++}return C.sigBytes=o*4,C}});s.PBKDF2=function(A,g,k){return y.create(k).compute(A,g)}})(),t.PBKDF2})})(Sn)),Sn.exports}var wn={exports:{}},Md=wn.exports,xi;function cr(){return xi||(xi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),r0(),Wa())})(Md,function(t){return(function(){var s=t,l=s.lib,x=l.Base,B=l.WordArray,b=s.algo,S=b.MD5,m=b.EvpKDF=x.extend({cfg:x.extend({keySize:128/32,hasher:S,iterations:1}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,A){for(var g,k=this.cfg,w=k.hasher.create(),C=B.create(),v=C.words,h=k.keySize,c=k.iterations;v.length<h;){g&&w.update(g),g=w.update(y).finalize(A),w.reset();for(var o=1;o<c;o++)g=w.finalize(g),w.reset();C.concat(g)}return C.sigBytes=h*4,C}});s.EvpKDF=function(y,A,g){return m.create(g).compute(y,A)}})(),t.EvpKDF})})(wn)),wn.exports}var Cn={exports:{}},Ud=Cn.exports,hi;function Me(){return hi||(hi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),cr())})(Ud,function(t){t.lib.Cipher||(function(s){var l=t,x=l.lib,B=x.Base,b=x.WordArray,S=x.BufferedBlockAlgorithm,m=l.enc;m.Utf8;var y=m.Base64,A=l.algo,g=A.EvpKDF,k=x.Cipher=S.extend({cfg:B.extend(),createEncryptor:function(F,U){return this.create(this._ENC_XFORM_MODE,F,U)},createDecryptor:function(F,U){return this.create(this._DEC_XFORM_MODE,F,U)},init:function(F,U,V){this.cfg=this.cfg.extend(V),this._xformMode=F,this._key=U,this.reset()},reset:function(){S.reset.call(this),this._doReset()},process:function(F){return this._append(F),this._process()},finalize:function(F){F&&this._append(F);var U=this._doFinalize();return U},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function F(U){return typeof U=="string"?q:u}return function(U){return{encrypt:function(V,j,re){return F(j).encrypt(U,V,j,re)},decrypt:function(V,j,re){return F(j).decrypt(U,V,j,re)}}}})()});x.StreamCipher=k.extend({_doFinalize:function(){var F=this._process(!0);return F},blockSize:1});var w=l.mode={},C=x.BlockCipherMode=B.extend({createEncryptor:function(F,U){return this.Encryptor.create(F,U)},createDecryptor:function(F,U){return this.Decryptor.create(F,U)},init:function(F,U){this._cipher=F,this._iv=U}}),v=w.CBC=(function(){var F=C.extend();F.Encryptor=F.extend({processBlock:function(V,j){var re=this._cipher,ne=re.blockSize;U.call(this,V,j,ne),re.encryptBlock(V,j),this._prevBlock=V.slice(j,j+ne)}}),F.Decryptor=F.extend({processBlock:function(V,j){var re=this._cipher,ne=re.blockSize,de=V.slice(j,j+ne);re.decryptBlock(V,j),U.call(this,V,j,ne),this._prevBlock=de}});function U(V,j,re){var ne,de=this._iv;de?(ne=de,this._iv=s):ne=this._prevBlock;for(var he=0;he<re;he++)V[j+he]^=ne[he]}return F})(),h=l.pad={},c=h.Pkcs7={pad:function(F,U){for(var V=U*4,j=V-F.sigBytes%V,re=j<<24|j<<16|j<<8|j,ne=[],de=0;de<j;de+=4)ne.push(re);var he=b.create(ne,j);F.concat(he)},unpad:function(F){var U=F.words[F.sigBytes-1>>>2]&255;F.sigBytes-=U}};x.BlockCipher=k.extend({cfg:k.cfg.extend({mode:v,padding:c}),reset:function(){var F;k.reset.call(this);var U=this.cfg,V=U.iv,j=U.mode;this._xformMode==this._ENC_XFORM_MODE?F=j.createEncryptor:(F=j.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==F?this._mode.init(this,V&&V.words):(this._mode=F.call(j,this,V&&V.words),this._mode.__creator=F)},_doProcessBlock:function(F,U){this._mode.processBlock(F,U)},_doFinalize:function(){var F,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),F=this._process(!0)):(F=this._process(!0),U.unpad(F)),F},blockSize:128/32});var o=x.CipherParams=B.extend({init:function(F){this.mixIn(F)},toString:function(F){return(F||this.formatter).stringify(this)}}),n=l.format={},f=n.OpenSSL={stringify:function(F){var U,V=F.ciphertext,j=F.salt;return j?U=b.create([1398893684,1701076831]).concat(j).concat(V):U=V,U.toString(y)},parse:function(F){var U,V=y.parse(F),j=V.words;return j[0]==1398893684&&j[1]==1701076831&&(U=b.create(j.slice(2,4)),j.splice(0,4),V.sigBytes-=16),o.create({ciphertext:V,salt:U})}},u=x.SerializableCipher=B.extend({cfg:B.extend({format:f}),encrypt:function(F,U,V,j){j=this.cfg.extend(j);var re=F.createEncryptor(V,j),ne=re.finalize(U),de=re.cfg;return o.create({ciphertext:ne,key:V,iv:de.iv,algorithm:F,mode:de.mode,padding:de.padding,blockSize:F.blockSize,formatter:j.format})},decrypt:function(F,U,V,j){j=this.cfg.extend(j),U=this._parse(U,j.format);var re=F.createDecryptor(V,j).finalize(U.ciphertext);return re},_parse:function(F,U){return typeof F=="string"?U.parse(F,this):F}}),P=l.kdf={},L=P.OpenSSL={execute:function(F,U,V,j,re){if(j||(j=b.random(64/8)),re)var ne=g.create({keySize:U+V,hasher:re}).compute(F,j);else var ne=g.create({keySize:U+V}).compute(F,j);var de=b.create(ne.words.slice(U),V*4);return ne.sigBytes=U*4,o.create({key:ne,iv:de,salt:j})}},q=x.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:L}),encrypt:function(F,U,V,j){j=this.cfg.extend(j);var re=j.kdf.execute(V,F.keySize,F.ivSize,j.salt,j.hasher);j.iv=re.iv;var ne=u.encrypt.call(this,F,U,re.key,j);return ne.mixIn(re),ne},decrypt:function(F,U,V,j){j=this.cfg.extend(j),U=this._parse(U,j.format);var re=j.kdf.execute(V,F.keySize,F.ivSize,U.salt,j.hasher);j.iv=re.iv;var ne=u.decrypt.call(this,F,U,re.key,j);return ne}})})()})})(Cn)),Cn.exports}var kn={exports:{}},Vd=kn.exports,gi;function Nd(){return gi||(gi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(Vd,function(t){return t.mode.CFB=(function(){var s=t.lib.BlockCipherMode.extend();s.Encryptor=s.extend({processBlock:function(x,B){var b=this._cipher,S=b.blockSize;l.call(this,x,B,S,b),this._prevBlock=x.slice(B,B+S)}}),s.Decryptor=s.extend({processBlock:function(x,B){var b=this._cipher,S=b.blockSize,m=x.slice(B,B+S);l.call(this,x,B,S,b),this._prevBlock=m}});function l(x,B,b,S){var m,y=this._iv;y?(m=y.slice(0),this._iv=void 0):m=this._prevBlock,S.encryptBlock(m,0);for(var A=0;A<b;A++)x[B+A]^=m[A]}return s})(),t.mode.CFB})})(kn)),kn.exports}var An={exports:{}},Wd=An.exports,yi;function Hd(){return yi||(yi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(Wd,function(t){return t.mode.CTR=(function(){var s=t.lib.BlockCipherMode.extend(),l=s.Encryptor=s.extend({processBlock:function(x,B){var b=this._cipher,S=b.blockSize,m=this._iv,y=this._counter;m&&(y=this._counter=m.slice(0),this._iv=void 0);var A=y.slice(0);b.encryptBlock(A,0),y[S-1]=y[S-1]+1|0;for(var g=0;g<S;g++)x[B+g]^=A[g]}});return s.Decryptor=l,s})(),t.mode.CTR})})(An)),An.exports}var Bn={exports:{}},jd=Bn.exports,vi;function Gd(){return vi||(vi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(jd,function(t){return t.mode.CTRGladman=(function(){var s=t.lib.BlockCipherMode.extend();function l(b){if((b>>24&255)===255){var S=b>>16&255,m=b>>8&255,y=b&255;S===255?(S=0,m===255?(m=0,y===255?y=0:++y):++m):++S,b=0,b+=S<<16,b+=m<<8,b+=y}else b+=1<<24;return b}function x(b){return(b[0]=l(b[0]))===0&&(b[1]=l(b[1])),b}var B=s.Encryptor=s.extend({processBlock:function(b,S){var m=this._cipher,y=m.blockSize,A=this._iv,g=this._counter;A&&(g=this._counter=A.slice(0),this._iv=void 0),x(g);var k=g.slice(0);m.encryptBlock(k,0);for(var w=0;w<y;w++)b[S+w]^=k[w]}});return s.Decryptor=B,s})(),t.mode.CTRGladman})})(Bn)),Bn.exports}var Dn={exports:{}},qd=Dn.exports,Ei;function Kd(){return Ei||(Ei=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(qd,function(t){return t.mode.OFB=(function(){var s=t.lib.BlockCipherMode.extend(),l=s.Encryptor=s.extend({processBlock:function(x,B){var b=this._cipher,S=b.blockSize,m=this._iv,y=this._keystream;m&&(y=this._keystream=m.slice(0),this._iv=void 0),b.encryptBlock(y,0);for(var A=0;A<S;A++)x[B+A]^=y[A]}});return s.Decryptor=l,s})(),t.mode.OFB})})(Dn)),Dn.exports}var Tn={exports:{}},Yd=Tn.exports,bi;function Jd(){return bi||(bi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(Yd,function(t){return t.mode.ECB=(function(){var s=t.lib.BlockCipherMode.extend();return s.Encryptor=s.extend({processBlock:function(l,x){this._cipher.encryptBlock(l,x)}}),s.Decryptor=s.extend({processBlock:function(l,x){this._cipher.decryptBlock(l,x)}}),s})(),t.mode.ECB})})(Tn)),Tn.exports}var Fn={exports:{}},Xd=Fn.exports,_i;function Zd(){return _i||(_i=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(Xd,function(t){return t.pad.AnsiX923={pad:function(s,l){var x=s.sigBytes,B=l*4,b=B-x%B,S=x+b-1;s.clamp(),s.words[S>>>2]|=b<<24-S%4*8,s.sigBytes+=b},unpad:function(s){var l=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=l}},t.pad.Ansix923})})(Fn)),Fn.exports}var Rn={exports:{}},Qd=Rn.exports,Si;function eu(){return Si||(Si=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(Qd,function(t){return t.pad.Iso10126={pad:function(s,l){var x=l*4,B=x-s.sigBytes%x;s.concat(t.lib.WordArray.random(B-1)).concat(t.lib.WordArray.create([B<<24],1))},unpad:function(s){var l=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=l}},t.pad.Iso10126})})(Rn)),Rn.exports}var Pn={exports:{}},tu=Pn.exports,wi;function ru(){return wi||(wi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(tu,function(t){return t.pad.Iso97971={pad:function(s,l){s.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(s,l)},unpad:function(s){t.pad.ZeroPadding.unpad(s),s.sigBytes--}},t.pad.Iso97971})})(Pn)),Pn.exports}var In={exports:{}},ou=In.exports,Ci;function nu(){return Ci||(Ci=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(ou,function(t){return t.pad.ZeroPadding={pad:function(s,l){var x=l*4;s.clamp(),s.sigBytes+=x-(s.sigBytes%x||x)},unpad:function(s){for(var l=s.words,x=s.sigBytes-1,x=s.sigBytes-1;x>=0;x--)if(l[x>>>2]>>>24-x%4*8&255){s.sigBytes=x+1;break}}},t.pad.ZeroPadding})})(In)),In.exports}var Ln={exports:{}},au=Ln.exports,ki;function su(){return ki||(ki=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(au,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})})(Ln)),Ln.exports}var $n={exports:{}},iu=$n.exports,Ai;function cu(){return Ai||(Ai=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Me())})(iu,function(t){return(function(s){var l=t,x=l.lib,B=x.CipherParams,b=l.enc,S=b.Hex,m=l.format;m.Hex={stringify:function(y){return y.ciphertext.toString(S)},parse:function(y){var A=S.parse(y);return B.create({ciphertext:A})}}})(),t.format.Hex})})($n)),$n.exports}var On={exports:{}},lu=On.exports,Bi;function du(){return Bi||(Bi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Fr(),Rr(),cr(),Me())})(lu,function(t){return(function(){var s=t,l=s.lib,x=l.BlockCipher,B=s.algo,b=[],S=[],m=[],y=[],A=[],g=[],k=[],w=[],C=[],v=[];(function(){for(var o=[],n=0;n<256;n++)n<128?o[n]=n<<1:o[n]=n<<1^283;for(var f=0,u=0,n=0;n<256;n++){var P=u^u<<1^u<<2^u<<3^u<<4;P=P>>>8^P&255^99,b[f]=P,S[P]=f;var L=o[f],q=o[L],F=o[q],U=o[P]*257^P*16843008;m[f]=U<<24|U>>>8,y[f]=U<<16|U>>>16,A[f]=U<<8|U>>>24,g[f]=U;var U=F*16843009^q*65537^L*257^f*16843008;k[P]=U<<24|U>>>8,w[P]=U<<16|U>>>16,C[P]=U<<8|U>>>24,v[P]=U,f?(f=L^o[o[o[F^L]]],u^=o[o[u]]):f=u=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],c=B.AES=x.extend({_doReset:function(){var o;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var n=this._keyPriorReset=this._key,f=n.words,u=n.sigBytes/4,P=this._nRounds=u+6,L=(P+1)*4,q=this._keySchedule=[],F=0;F<L;F++)F<u?q[F]=f[F]:(o=q[F-1],F%u?u>6&&F%u==4&&(o=b[o>>>24]<<24|b[o>>>16&255]<<16|b[o>>>8&255]<<8|b[o&255]):(o=o<<8|o>>>24,o=b[o>>>24]<<24|b[o>>>16&255]<<16|b[o>>>8&255]<<8|b[o&255],o^=h[F/u|0]<<24),q[F]=q[F-u]^o);for(var U=this._invKeySchedule=[],V=0;V<L;V++){var F=L-V;if(V%4)var o=q[F];else var o=q[F-4];V<4||F<=4?U[V]=o:U[V]=k[b[o>>>24]]^w[b[o>>>16&255]]^C[b[o>>>8&255]]^v[b[o&255]]}}},encryptBlock:function(o,n){this._doCryptBlock(o,n,this._keySchedule,m,y,A,g,b)},decryptBlock:function(o,n){var f=o[n+1];o[n+1]=o[n+3],o[n+3]=f,this._doCryptBlock(o,n,this._invKeySchedule,k,w,C,v,S);var f=o[n+1];o[n+1]=o[n+3],o[n+3]=f},_doCryptBlock:function(o,n,f,u,P,L,q,F){for(var U=this._nRounds,V=o[n]^f[0],j=o[n+1]^f[1],re=o[n+2]^f[2],ne=o[n+3]^f[3],de=4,he=1;he<U;he++){var ue=u[V>>>24]^P[j>>>16&255]^L[re>>>8&255]^q[ne&255]^f[de++],ge=u[j>>>24]^P[re>>>16&255]^L[ne>>>8&255]^q[V&255]^f[de++],be=u[re>>>24]^P[ne>>>16&255]^L[V>>>8&255]^q[j&255]^f[de++],p=u[ne>>>24]^P[V>>>16&255]^L[j>>>8&255]^q[re&255]^f[de++];V=ue,j=ge,re=be,ne=p}var ue=(F[V>>>24]<<24|F[j>>>16&255]<<16|F[re>>>8&255]<<8|F[ne&255])^f[de++],ge=(F[j>>>24]<<24|F[re>>>16&255]<<16|F[ne>>>8&255]<<8|F[V&255])^f[de++],be=(F[re>>>24]<<24|F[ne>>>16&255]<<16|F[V>>>8&255]<<8|F[j&255])^f[de++],p=(F[ne>>>24]<<24|F[V>>>16&255]<<16|F[j>>>8&255]<<8|F[re&255])^f[de++];o[n]=ue,o[n+1]=ge,o[n+2]=be,o[n+3]=p},keySize:256/32});s.AES=x._createHelper(c)})(),t.AES})})(On)),On.exports}var zn={exports:{}},uu=zn.exports,Di;function fu(){return Di||(Di=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Fr(),Rr(),cr(),Me())})(uu,function(t){return(function(){var s=t,l=s.lib,x=l.WordArray,B=l.BlockCipher,b=s.algo,S=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],y=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],A=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],g=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],k=b.DES=B.extend({_doReset:function(){for(var h=this._key,c=h.words,o=[],n=0;n<56;n++){var f=S[n]-1;o[n]=c[f>>>5]>>>31-f%32&1}for(var u=this._subKeys=[],P=0;P<16;P++){for(var L=u[P]=[],q=y[P],n=0;n<24;n++)L[n/6|0]|=o[(m[n]-1+q)%28]<<31-n%6,L[4+(n/6|0)]|=o[28+(m[n+24]-1+q)%28]<<31-n%6;L[0]=L[0]<<1|L[0]>>>31;for(var n=1;n<7;n++)L[n]=L[n]>>>(n-1)*4+3;L[7]=L[7]<<5|L[7]>>>27}for(var F=this._invSubKeys=[],n=0;n<16;n++)F[n]=u[15-n]},encryptBlock:function(h,c){this._doCryptBlock(h,c,this._subKeys)},decryptBlock:function(h,c){this._doCryptBlock(h,c,this._invSubKeys)},_doCryptBlock:function(h,c,o){this._lBlock=h[c],this._rBlock=h[c+1],w.call(this,4,252645135),w.call(this,16,65535),C.call(this,2,858993459),C.call(this,8,16711935),w.call(this,1,1431655765);for(var n=0;n<16;n++){for(var f=o[n],u=this._lBlock,P=this._rBlock,L=0,q=0;q<8;q++)L|=A[q][((P^f[q])&g[q])>>>0];this._lBlock=P,this._rBlock=u^L}var F=this._lBlock;this._lBlock=this._rBlock,this._rBlock=F,w.call(this,1,1431655765),C.call(this,8,16711935),C.call(this,2,858993459),w.call(this,16,65535),w.call(this,4,252645135),h[c]=this._lBlock,h[c+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function w(h,c){var o=(this._lBlock>>>h^this._rBlock)&c;this._rBlock^=o,this._lBlock^=o<<h}function C(h,c){var o=(this._rBlock>>>h^this._lBlock)&c;this._lBlock^=o,this._rBlock^=o<<h}s.DES=B._createHelper(k);var v=b.TripleDES=B.extend({_doReset:function(){var h=this._key,c=h.words;if(c.length!==2&&c.length!==4&&c.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var o=c.slice(0,2),n=c.length<4?c.slice(0,2):c.slice(2,4),f=c.length<6?c.slice(0,2):c.slice(4,6);this._des1=k.createEncryptor(x.create(o)),this._des2=k.createEncryptor(x.create(n)),this._des3=k.createEncryptor(x.create(f))},encryptBlock:function(h,c){this._des1.encryptBlock(h,c),this._des2.decryptBlock(h,c),this._des3.encryptBlock(h,c)},decryptBlock:function(h,c){this._des3.decryptBlock(h,c),this._des2.encryptBlock(h,c),this._des1.decryptBlock(h,c)},keySize:192/32,ivSize:64/32,blockSize:64/32});s.TripleDES=B._createHelper(v)})(),t.TripleDES})})(zn)),zn.exports}var Mn={exports:{}},mu=Mn.exports,Ti;function pu(){return Ti||(Ti=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Fr(),Rr(),cr(),Me())})(mu,function(t){return(function(){var s=t,l=s.lib,x=l.StreamCipher,B=s.algo,b=B.RC4=x.extend({_doReset:function(){for(var y=this._key,A=y.words,g=y.sigBytes,k=this._S=[],w=0;w<256;w++)k[w]=w;for(var w=0,C=0;w<256;w++){var v=w%g,h=A[v>>>2]>>>24-v%4*8&255;C=(C+k[w]+h)%256;var c=k[w];k[w]=k[C],k[C]=c}this._i=this._j=0},_doProcessBlock:function(y,A){y[A]^=S.call(this)},keySize:256/32,ivSize:0});function S(){for(var y=this._S,A=this._i,g=this._j,k=0,w=0;w<4;w++){A=(A+1)%256,g=(g+y[A])%256;var C=y[A];y[A]=y[g],y[g]=C,k|=y[(y[A]+y[g])%256]<<24-w*8}return this._i=A,this._j=g,k}s.RC4=x._createHelper(b);var m=B.RC4Drop=b.extend({cfg:b.cfg.extend({drop:192}),_doReset:function(){b._doReset.call(this);for(var y=this.cfg.drop;y>0;y--)S.call(this)}});s.RC4Drop=x._createHelper(m)})(),t.RC4})})(Mn)),Mn.exports}var Un={exports:{}},xu=Un.exports,Fi;function hu(){return Fi||(Fi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Fr(),Rr(),cr(),Me())})(xu,function(t){return(function(){var s=t,l=s.lib,x=l.StreamCipher,B=s.algo,b=[],S=[],m=[],y=B.Rabbit=x.extend({_doReset:function(){for(var g=this._key.words,k=this.cfg.iv,w=0;w<4;w++)g[w]=(g[w]<<8|g[w]>>>24)&16711935|(g[w]<<24|g[w]>>>8)&4278255360;var C=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],v=this._C=[g[2]<<16|g[2]>>>16,g[0]&4294901760|g[1]&65535,g[3]<<16|g[3]>>>16,g[1]&4294901760|g[2]&65535,g[0]<<16|g[0]>>>16,g[2]&4294901760|g[3]&65535,g[1]<<16|g[1]>>>16,g[3]&4294901760|g[0]&65535];this._b=0;for(var w=0;w<4;w++)A.call(this);for(var w=0;w<8;w++)v[w]^=C[w+4&7];if(k){var h=k.words,c=h[0],o=h[1],n=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,f=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,u=n>>>16|f&4294901760,P=f<<16|n&65535;v[0]^=n,v[1]^=u,v[2]^=f,v[3]^=P,v[4]^=n,v[5]^=u,v[6]^=f,v[7]^=P;for(var w=0;w<4;w++)A.call(this)}},_doProcessBlock:function(g,k){var w=this._X;A.call(this),b[0]=w[0]^w[5]>>>16^w[3]<<16,b[1]=w[2]^w[7]>>>16^w[5]<<16,b[2]=w[4]^w[1]>>>16^w[7]<<16,b[3]=w[6]^w[3]>>>16^w[1]<<16;for(var C=0;C<4;C++)b[C]=(b[C]<<8|b[C]>>>24)&16711935|(b[C]<<24|b[C]>>>8)&4278255360,g[k+C]^=b[C]},blockSize:128/32,ivSize:64/32});function A(){for(var g=this._X,k=this._C,w=0;w<8;w++)S[w]=k[w];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<S[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<S[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<S[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<S[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<S[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<S[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<S[6]>>>0?1:0)|0,this._b=k[7]>>>0<S[7]>>>0?1:0;for(var w=0;w<8;w++){var C=g[w]+k[w],v=C&65535,h=C>>>16,c=((v*v>>>17)+v*h>>>15)+h*h,o=((C&4294901760)*C|0)+((C&65535)*C|0);m[w]=c^o}g[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,g[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,g[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,g[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,g[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,g[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,g[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,g[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}s.Rabbit=x._createHelper(y)})(),t.Rabbit})})(Un)),Un.exports}var Vn={exports:{}},gu=Vn.exports,Ri;function yu(){return Ri||(Ri=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Fr(),Rr(),cr(),Me())})(gu,function(t){return(function(){var s=t,l=s.lib,x=l.StreamCipher,B=s.algo,b=[],S=[],m=[],y=B.RabbitLegacy=x.extend({_doReset:function(){var g=this._key.words,k=this.cfg.iv,w=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],C=this._C=[g[2]<<16|g[2]>>>16,g[0]&4294901760|g[1]&65535,g[3]<<16|g[3]>>>16,g[1]&4294901760|g[2]&65535,g[0]<<16|g[0]>>>16,g[2]&4294901760|g[3]&65535,g[1]<<16|g[1]>>>16,g[3]&4294901760|g[0]&65535];this._b=0;for(var v=0;v<4;v++)A.call(this);for(var v=0;v<8;v++)C[v]^=w[v+4&7];if(k){var h=k.words,c=h[0],o=h[1],n=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,f=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,u=n>>>16|f&4294901760,P=f<<16|n&65535;C[0]^=n,C[1]^=u,C[2]^=f,C[3]^=P,C[4]^=n,C[5]^=u,C[6]^=f,C[7]^=P;for(var v=0;v<4;v++)A.call(this)}},_doProcessBlock:function(g,k){var w=this._X;A.call(this),b[0]=w[0]^w[5]>>>16^w[3]<<16,b[1]=w[2]^w[7]>>>16^w[5]<<16,b[2]=w[4]^w[1]>>>16^w[7]<<16,b[3]=w[6]^w[3]>>>16^w[1]<<16;for(var C=0;C<4;C++)b[C]=(b[C]<<8|b[C]>>>24)&16711935|(b[C]<<24|b[C]>>>8)&4278255360,g[k+C]^=b[C]},blockSize:128/32,ivSize:64/32});function A(){for(var g=this._X,k=this._C,w=0;w<8;w++)S[w]=k[w];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<S[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<S[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<S[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<S[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<S[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<S[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<S[6]>>>0?1:0)|0,this._b=k[7]>>>0<S[7]>>>0?1:0;for(var w=0;w<8;w++){var C=g[w]+k[w],v=C&65535,h=C>>>16,c=((v*v>>>17)+v*h>>>15)+h*h,o=((C&4294901760)*C|0)+((C&65535)*C|0);m[w]=c^o}g[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,g[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,g[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,g[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,g[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,g[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,g[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,g[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}s.RabbitLegacy=x._createHelper(y)})(),t.RabbitLegacy})})(Vn)),Vn.exports}var Nn={exports:{}},vu=Nn.exports,Pi;function Eu(){return Pi||(Pi=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),Fr(),Rr(),cr(),Me())})(vu,function(t){return(function(){var s=t,l=s.lib,x=l.BlockCipher,B=s.algo;const b=16,S=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var y={pbox:[],sbox:[]};function A(v,h){let c=h>>24&255,o=h>>16&255,n=h>>8&255,f=h&255,u=v.sbox[0][c]+v.sbox[1][o];return u=u^v.sbox[2][n],u=u+v.sbox[3][f],u}function g(v,h,c){let o=h,n=c,f;for(let u=0;u<b;++u)o=o^v.pbox[u],n=A(v,o)^n,f=o,o=n,n=f;return f=o,o=n,n=f,n=n^v.pbox[b],o=o^v.pbox[b+1],{left:o,right:n}}function k(v,h,c){let o=h,n=c,f;for(let u=b+1;u>1;--u)o=o^v.pbox[u],n=A(v,o)^n,f=o,o=n,n=f;return f=o,o=n,n=f,n=n^v.pbox[1],o=o^v.pbox[0],{left:o,right:n}}function w(v,h,c){for(let P=0;P<4;P++){v.sbox[P]=[];for(let L=0;L<256;L++)v.sbox[P][L]=m[P][L]}let o=0;for(let P=0;P<b+2;P++)v.pbox[P]=S[P]^h[o],o++,o>=c&&(o=0);let n=0,f=0,u=0;for(let P=0;P<b+2;P+=2)u=g(v,n,f),n=u.left,f=u.right,v.pbox[P]=n,v.pbox[P+1]=f;for(let P=0;P<4;P++)for(let L=0;L<256;L+=2)u=g(v,n,f),n=u.left,f=u.right,v.sbox[P][L]=n,v.sbox[P][L+1]=f;return!0}var C=B.Blowfish=x.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,h=v.words,c=v.sigBytes/4;w(y,h,c)}},encryptBlock:function(v,h){var c=g(y,v[h],v[h+1]);v[h]=c.left,v[h+1]=c.right},decryptBlock:function(v,h){var c=k(y,v[h],v[h+1]);v[h]=c.left,v[h+1]=c.right},blockSize:64/32,keySize:128/32,ivSize:64/32});s.Blowfish=x._createHelper(C)})(),t.Blowfish})})(Nn)),Nn.exports}var bu=sn.exports,Ii;function _u(){return Ii||(Ii=1,(function(d,i){(function(t,s,l){d.exports=s(ve(),qn(),yd(),Ed(),Fr(),Sd(),Rr(),r0(),Na(),Bd(),o0(),Fd(),Pd(),Ld(),Wa(),zd(),cr(),Me(),Nd(),Hd(),Gd(),Kd(),Jd(),Zd(),eu(),ru(),nu(),su(),cu(),du(),fu(),pu(),hu(),yu(),Eu())})(bu,function(t){return t})})(sn)),sn.exports}var Su=_u();const Ia=Ki(Su),Hn="ENC::",wu=(d,i)=>{if(!d||!i)return d;try{const t=Ia.AES.encrypt(d,i).toString();return Hn+t}catch(t){return console.error("≈ûifreleme hatasƒ±:",t),d}},ux=(d,i)=>{if(!d||!d.startsWith(Hn)||!i)return d;try{const t=d.replace(Hn,""),l=Ia.AES.decrypt(t,i).toString(Ia.enc.Utf8);return l||"üîí ≈ûifreli Mesaj (Anahtar Yanlƒ±≈ü)"}catch(t){return console.error("≈ûifre √ß√∂zme hatasƒ±:",t),"üîí √á√∂z√ºlemedi"}},fx=d=>d&&typeof d=="string"&&d.startsWith(Hn),St={mobile:768,tablet:1024,desktop:1920,ultrawide:2560},Cu=()=>{const[d,i]=a.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080});a.useEffect(()=>{if(typeof window>"u")return;let l;const x=()=>{clearTimeout(l),l=setTimeout(()=>{i({width:window.innerWidth,height:window.innerHeight})},150)};return x(),window.addEventListener("resize",x),window.addEventListener("orientationchange",x),()=>{clearTimeout(l),window.removeEventListener("resize",x),window.removeEventListener("orientationchange",x)}},[]);const{width:t,height:s}=d;return{isMobile:t<=St.mobile,isTablet:t>St.mobile&&t<=St.tablet,isDesktop:t>St.tablet&&t<=St.desktop,isUltrawide:t>St.desktop,width:t,height:s,orientation:s>t?"portrait":"landscape",isSmallScreen:t<=St.mobile,isMediumScreen:t>St.mobile&&t<=St.tablet,isLargeScreen:t>St.tablet,isTouchDevice:typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0),breakpoints:St}},ku=(d,i,t)=>a.useMemo(()=>{if(!d||!Array.isArray(d))return[];let l=d;if(i&&typeof i=="string"&&i.trim()){const x=i.toLowerCase();l=l.filter(B=>B.content?.toLowerCase().includes(x)||B.user?.username?.toLowerCase().includes(x))}return l.sort((x,B)=>{const b=new Date(x.created_at||x.timestamp),S=new Date(B.created_at||B.timestamp);return b-S})},[d,i]),Au=d=>a.useMemo(()=>!d||!Array.isArray(d)?[]:d.filter(i=>i.is_online||i.online),[d]),Ha=()=>"https://api.pawscord.com",Bu=Ha(),Du=()=>Ha().replace("/api","/media"),mx=Ha,px=Du,Tu=`${Bu}/api`,Fu=()=>{let d=sessionStorage.getItem("analytics_session_id");return d||(d=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("analytics_session_id",d)),d},Ru=()=>{const d=Yi();a.useEffect(()=>{(async()=>{try{const t=Fu();await fetch(`${Tu}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:d.pathname,session_id:t,referrer:document.referrer,timestamp:new Date().toISOString()})}),console.log("üìä Page tracked:",d.pathname)}catch(t){console.error("Analytics tracking error:",t)}})()},[d.pathname])},Pu=(d,i)=>{const t=a.useRef(null);return a.useCallback((...s)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{d(...s)},i)},[d,i])},Iu=(d,i)=>{const t=a.useRef(Date.now());return a.useCallback((...s)=>{const l=Date.now();l-t.current>=i&&(d(...s),t.current=l)},[d,i])},xx=d=>{const i=a.useRef(0),t=a.useRef(0);a.useEffect(()=>{const s=performance.now();return i.current+=1,()=>{const x=performance.now()-s;t.current+=x,i.current%10===0&&console.log(`üéØ ${d} Performance Stats:`,`
  Total Renders: ${i.current}`,`
  Average Time: ${(t.current/i.current).toFixed(2)}ms`,`
  Last Render: ${x.toFixed(2)}ms`)}})};class So extends Error{}So.prototype.name="InvalidTokenError";function Lu(d){return decodeURIComponent(atob(d).replace(/(.)/g,(i,t)=>{let s=t.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function $u(d){let i=d.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Lu(i)}catch{return atob(i)}}function Tr(d,i){if(typeof d!="string")throw new So("Invalid token specified: must be a string");i||(i={});const t=i.header===!0?0:1,s=d.split(".")[t];if(typeof s!="string")throw new So(`Invalid token specified: missing part #${t+1}`);let l;try{l=$u(s)}catch(x){throw new So(`Invalid token specified: invalid base64 for part #${t+1} (${x.message})`)}try{return JSON.parse(l)}catch(x){throw new So(`Invalid token specified: invalid json for part #${t+1} (${x.message})`)}}const Ou="pawscord.com",zu="443",ja=typeof window>"u"?!1:!!(typeof window.require=="function"||typeof process<"u"&&process.versions&&process.versions.electron||navigator.userAgent.toLowerCase().includes("electron")||window.location.protocol==="file:"),n0=to.isNativePlatform(),lr=n0||ja||!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("192.168.")?"https://api.pawscord.com":`http://${Ou}:${zu}`,Mu=`${lr}/api`;n0||ja||window.location.hostname.includes("localhost");const jn=lr.startsWith("https")?"wss":"ws",Gn=lr.replace(/^https?:\/\//,""),a0=a.createContext(null),Uu=lr,Vu=({children:d})=>{const i=localStorage.getItem("access_token"),t=(()=>{if(!i)return!1;try{return Tr(i).exp>Date.now()/1e3-300}catch{return!1}})(),[s,l]=a.useState(t?{username:localStorage.getItem("chat_username")||""}:null),[x,B]=a.useState(i),[b,S]=a.useState(t),[m,y]=a.useState(!1),A=a.useRef(null),g=a.useCallback(async()=>{const v=localStorage.getItem("refresh_token");if(!v)return console.warn("‚ö†Ô∏è [Auth] No refresh token available"),C(),!1;try{console.log("üîÑ [Auth] Refreshing access token...");const h=await fetch(`${Uu}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:v})});if(h.ok){const c=await h.json();localStorage.setItem("access_token",c.access),c.refresh&&localStorage.setItem("refresh_token",c.refresh);const o=Tr(c.access);return B(c.access),l({username:o.username}),S(!0),console.log("‚úÖ [Auth] Token refreshed successfully"),k(c.access),!0}else return console.error("‚ùå [Auth] Token refresh failed:",h.status),C(),!1}catch(h){return console.error("‚ùå [Auth] Token refresh error:",h),C(),!1}},[]),k=a.useCallback(v=>{A.current&&clearTimeout(A.current);try{const h=Tr(v),c=Date.now()/1e3,o=h.exp-c,n=Math.max((o-300)*1e3,6e4);console.log(`‚è∞ [Auth] Token will refresh in ${Math.round(n/1e3/60)} minutes`),A.current=setTimeout(()=>{g()},n)}catch(h){console.error("‚ùå [Auth] Failed to schedule token refresh:",h)}},[g]);a.useEffect(()=>{const v=localStorage.getItem("access_token");if(v)try{const h=Tr(v),c=Date.now()/1e3,o=300,n=h.exp>c-o;console.log("üîê [Auth] Token check:",{exp:h.exp,currentTime:c,gracePeriod:o,isValid:n,username:h.username}),n?(B(v),l({username:h.username}),S(!0),localStorage.setItem("chat_username",h.username),k(v),console.log("‚úÖ [Auth] User authenticated:",h.username)):(console.warn("‚ö†Ô∏è [Auth] Token expired, attempting refresh..."),g())}catch(h){console.error("‚ùå [Auth] Invalid token:",h),C()}else console.log("‚ÑπÔ∏è [Auth] No token found");return()=>{A.current&&clearTimeout(A.current)}},[k,g]);const w=(v,h)=>{console.log("üîì [Auth] Login called");try{localStorage.setItem("access_token",v),localStorage.setItem("refresh_token",h);const c=Tr(v);localStorage.setItem("chat_username",c.username),console.log("‚úÖ [Auth] Login successful, user:",c.username),B(v),l({username:c.username}),S(!0),k(v)}catch(c){console.error("‚ùå [Auth] Login failed:",c),C()}},C=a.useCallback(()=>{A.current&&clearTimeout(A.current),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("chat_username"),B(null),l(null),S(!1)},[]);return e.createElement(a0.Provider,{value:{user:s,token:x,isAuthenticated:b,login:w,logout:C,isLoading:m,refreshAccessToken:g}},d)},ro=()=>a.useContext(a0),Ge={log:(...d)=>{},warn:(...d)=>{},error:(...d)=>{console.error(...d)},debug:(...d)=>{},voice:(...d)=>{},webrtc:(...d)=>{},signal:(...d)=>{},audio:(...d)=>{}};class Nu{constructor(){this.audioContext=null,this.masterGain=null,this.spatialNodes={},this.listenerPosition={x:0,y:0,z:0},this.initialized=!1}async initialize(){if(!this.initialized)try{const i=window.AudioContext||window.webkitAudioContext;this.audioContext=new i,this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.audioContext.destination),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.setupListener(),this.initialized=!0,console.log("üéß Spatial Audio Engine initialized")}catch(i){throw console.error("Failed to initialize spatial audio:",i),i}}setupListener(){const i=this.audioContext.listener;i.positionX?(i.positionX.value=this.listenerPosition.x,i.positionY.value=this.listenerPosition.y,i.positionZ.value=this.listenerPosition.z):i.setPosition(this.listenerPosition.x,this.listenerPosition.y,this.listenerPosition.z),i.forwardX?(i.forwardX.value=0,i.forwardY.value=0,i.forwardZ.value=-1,i.upX.value=0,i.upY.value=1,i.upZ.value=0):i.setOrientation(0,0,-1,0,1,0)}addUser(i,t,s={x:0,y:0,z:-1}){if(!this.initialized)return console.warn("Spatial audio not initialized"),null;this.spatialNodes[i]&&this.removeUser(i);try{const l=this.audioContext.createMediaStreamSource(t),x=this.audioContext.createPanner();x.panningModel="HRTF",x.distanceModel="inverse",x.refDistance=1,x.maxDistance=1e4,x.rolloffFactor=1.5,x.coneInnerAngle=360,x.coneOuterAngle=360,x.coneOuterGain=0,this.setUserPosition(i,s,x);const B=this.audioContext.createGain();B.gain.value=1;const b=this.audioContext.createAnalyser();return b.fftSize=256,b.smoothingTimeConstant=.8,l.connect(b),b.connect(x),x.connect(B),B.connect(this.masterGain),this.spatialNodes[i]={source:l,panner:x,gain:B,analyser:b,position:s,audioElement:null},console.log(`üéß Added spatial audio for ${i} at position`,s),this.spatialNodes[i]}catch(l){return console.error(`Failed to add spatial audio for ${i}:`,l),null}}setUserPosition(i,t,s=null){const l=s||this.spatialNodes[i]?.panner;l&&(l.positionX?(l.positionX.setValueAtTime(t.x,this.audioContext.currentTime),l.positionY.setValueAtTime(t.y,this.audioContext.currentTime),l.positionZ.setValueAtTime(t.z,this.audioContext.currentTime)):l.setPosition(t.x,t.y,t.z),this.spatialNodes[i]&&(this.spatialNodes[i].position=t))}setUserVolume(i,t){const s=this.spatialNodes[i];if(!s)return;const l=Math.max(0,Math.min(1,t));s.gain.gain.setValueAtTime(l,this.audioContext.currentTime)}getVoiceActivity(i){const t=this.spatialNodes[i];if(!t)return 0;const s=t.analyser,l=new Uint8Array(s.frequencyBinCount);s.getByteFrequencyData(l);const B=l.reduce((b,S)=>b+S,0)/l.length;return Math.round(B/255*100)}removeUser(i){const t=this.spatialNodes[i];if(t)try{t.source.disconnect(),t.analyser.disconnect(),t.panner.disconnect(),t.gain.disconnect(),delete this.spatialNodes[i],console.log(`üéß Removed spatial audio for ${i}`)}catch(s){console.error(`Error removing spatial audio for ${i}:`,s)}}updateListenerPosition(i){this.listenerPosition=i,this.setupListener()}setMasterVolume(i){if(!this.masterGain)return;const t=Math.max(0,Math.min(1,i));this.masterGain.gain.setValueAtTime(t,this.audioContext.currentTime)}setUserMuted(i,t){this.setUserVolume(i,t?0:1)}destroy(){Object.keys(this.spatialNodes).forEach(i=>{this.removeUser(i)}),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.initialized=!1,console.log("üéß Spatial Audio Engine destroyed")}getUserDistance(i){const t=this.spatialNodes[i];if(!t)return 1/0;const s=t.position,l=this.listenerPosition;return Math.sqrt(Math.pow(s.x-l.x,2)+Math.pow(s.y-l.y,2)+Math.pow(s.z-l.z,2))}arrangeUsersInCircle(i,t=3){const s={},l=2*Math.PI/i.length;return i.forEach((x,B)=>{const b=l*B,S={x:Math.cos(b)*t,y:0,z:Math.sin(b)*t};s[x]=S,this.setUserPosition(x,S)}),s}}const bo=new Nu,Wu=lr;let Br=!1,La=[];const Li=d=>{La.push(d)},$i=d=>{La.forEach(i=>i(d)),La=[]},Hu=d=>{if(!d)return!0;try{const i=Tr(d),t=Date.now()/1e3;return i.exp<t+30}catch{return!0}},Oi=async()=>{const d=localStorage.getItem("refresh_token");if(!d)throw new Error("No refresh token available");const i=await fetch(`${Wu}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:d})});if(!i.ok)throw new Error("Token refresh failed");const t=await i.json();return localStorage.setItem("access_token",t.access),t.refresh&&localStorage.setItem("refresh_token",t.refresh),console.log("‚úÖ [AuthFetch] Token refreshed successfully"),t.access},$a=async(d,i={})=>{let t=localStorage.getItem("access_token");if(Hu(t))if(console.log("‚è∞ [AuthFetch] Token expired, refreshing before request..."),Br)t=await new Promise(x=>{Li(B=>x(B))});else{Br=!0;try{t=await Oi(),$i(t)}catch(x){throw console.error("‚ùå [AuthFetch] Token refresh failed:",x),Br=!1,window.dispatchEvent(new CustomEvent("auth:logout")),x}finally{Br=!1}}const s={...i.headers,Authorization:`Bearer ${t}`};let l=await fetch(d,{...i,headers:s});if(l.status===401)if(console.warn("‚ö†Ô∏è [AuthFetch] Got 401, attempting token refresh..."),Br)t=await new Promise(x=>{Li(B=>x(B))}),s.Authorization=`Bearer ${t}`,l=await fetch(d,{...i,headers:s});else{Br=!0;try{t=await Oi(),$i(t),s.Authorization=`Bearer ${t}`,l=await fetch(d,{...i,headers:s})}catch(x){throw console.error("‚ùå [AuthFetch] Retry refresh failed:",x),window.dispatchEvent(new CustomEvent("auth:logout")),x}finally{Br=!1}}return l},s0=a.createContext(null),Dr=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.services.mozilla.com:3478"},{urls:"stun:stun.stunprotocol.org:3478"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}];let Oa={iceServers:Dr,iceCandidatePoolSize:10,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};const tn=d=>{Oa={...Oa,iceServers:d}};console.log("[VoiceContext] üéØ isElectron:",ja,"API_URL:",lr,"WS_PROTOCOL:",jn,"API_HOST:",Gn);const ju=({children:d})=>{const{user:i,token:t}=ro(),s=i?.username,[l,x]=a.useState(!1),[B,b]=a.useState(!1),[S,m]=a.useState(null),[y,A]=a.useState(!1),[g,k]=a.useState(!1),[w,C]=a.useState(!1),[v,h]=a.useState(!1),[c,o]=a.useState(!1),[n,f]=a.useState(!1),[u,P]=a.useState(0),[L,q]=a.useState(null),[F,U]=a.useState(50),[V,j]=a.useState(null),[re,ne]=a.useState(null),[de,he]=a.useState(null),[ue,ge]=a.useState({}),[be,p]=a.useState([]),[J,X]=a.useState(null),[Y,ke]=a.useState({isActive:!1,url:"https://www.youtube.com/watch?v=jfKfPfyJRdk",playing:!1,time:0,lastSyncAction:null,timestamp:0}),[ce,we]=a.useState({gameType:"rps",moves:{},result:null,players:[],currentTurn:null}),[me,Ct]=a.useState({}),[kt,dr]=a.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_noise_gate"))||-50}catch{return-50}}),[Ot,qe]=a.useState(()=>{try{return localStorage.getItem("pawscord_noise_gate_enabled")!=="false"}catch{return!0}}),[Oe,zt]=a.useState({local:new Uint8Array(128),remote:{}}),[Qe,qt]=a.useState(()=>{try{return localStorage.getItem("pawscord_visualizer")==="true"}catch{return!1}}),[lt,ur]=a.useState(()=>{try{return JSON.parse(localStorage.getItem("pawscord_user_volumes"))||{}}catch{return{}}}),[At,et]=a.useState(new Set),[Fe,at]=a.useState(()=>{try{return localStorage.getItem("pawscord_spatial_audio")==="true"}catch{return!1}}),[dt,Pr]=a.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_vad_sensitivity"))||45}catch{return 45}}),[tt,Mt]=a.useState(()=>{try{const _=localStorage.getItem("pawscord_noise_suppression");return _===null?!0:_==="true"}catch{return!0}}),[Ir,Lr]=a.useState(()=>{try{return JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"medium"}catch{return"medium"}}),[Te,te]=a.useState(()=>{try{return localStorage.getItem("pawscord_screen_quality")||"1080p"}catch{return"1080p"}}),[ut,fr]=a.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_screen_fps"))||30}catch{return 30}}),[Kt,$r]=a.useState(()=>{try{return localStorage.getItem("pawscord_system_audio")!=="false"}catch{return!1}}),[rt,Yt]=a.useState(()=>{try{return localStorage.getItem("pawscord_ptt_mode")==="true"}catch{return!1}}),[ye,Or]=a.useState(()=>{try{return localStorage.getItem("pawscord_ptt_key")||"Space"}catch{return"Space"}}),[mr,Ut]=a.useState(!1),[Bt,pr]=a.useState(Dr),[zr,Ke]=a.useState(!1),[xr,xt]=a.useState(0),[hr,ht]=a.useState(1e3),ft=a.useRef(null),Vt=a.useRef(null);a.useRef(null);const Le=a.useCallback(async()=>{if(!t){console.log("üßä [RTC] No token, using STUN only"),pr(Dr),tn(Dr);return}try{const _=await $a(`${lr}/api/voice/turn-credentials/`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!_.ok)throw _.status===401||_.status===403?console.warn("üßä [RTC] Auth failed, using STUN only"):console.warn(`üßä [RTC] TURN fetch failed (${_.status}), using STUN only`),new Error(`TURN fetch failed ${_.status}`);const R=await _.json(),I=[...Dr,...R?.iceServers||[]];pr(I),tn(I),console.log("üßä [RTC] ICE servers updated with TURN credentials:",I.length,"servers")}catch(_){console.warn("üßä [RTC] Using STUN-only mode:",_.message),pr(Dr),tn(Dr)}},[t]);a.useEffect(()=>{Le()},[Le]);const se=a.useRef(null),_e=a.useRef({}),gt=a.useRef(null),Ue=a.useRef(null),le=a.useRef(null),Ve=a.useRef(null),Ce=a.useRef(null),Nt=a.useRef([]),Dt=a.useRef(null),Jt=a.useRef(null),st=a.useRef(!1),Tt=a.useRef(!1),yt=a.useRef(null),gr=a.useRef(null),oo=a.useRef(null),Ne=a.useRef(null);a.useEffect(()=>{localStorage.setItem("pawscord_user_volumes",JSON.stringify(lt))},[lt]);const no=a.useCallback((_,R)=>{ur(I=>({...I,[_]:Math.max(0,Math.min(100,R))}))},[]);a.useEffect(()=>{le.current=V},[V]),a.useEffect(()=>{Ve.current=re},[re]),a.useEffect(()=>{Ce.current=de},[de]),a.useEffect(()=>{if(!V||!l||y){o(!1);return}if(!Ue.current){const xe=window.AudioContext||window.webkitAudioContext;Ue.current=new xe,console.log("üéµ [Performance] Global AudioContext created (reused for all users)")}const _=Ue.current,R=_.createAnalyser();R.fftSize=2048,R.smoothingTimeConstant=.85;const I=R.frequencyBinCount,W=new Uint8Array(I),K=_.createMediaStreamSource(V);K.connect(R);let N=null;const z=dt,O=150;let Z=null;const ae=()=>{R.getByteFrequencyData(W);const xe=W.slice(10,100);xe.reduce((Pe,it)=>Pe+it,0)/xe.length>z&&(o(!0),N&&clearTimeout(N),N=setTimeout(()=>o(!1),O)),l&&!y&&(Z=requestAnimationFrame(ae))};return ae(),()=>{N&&clearTimeout(N),Z&&cancelAnimationFrame(Z),K.disconnect()}},[V,l,y,dt]);const vt=a.useCallback(()=>{if(!gt.current){const _=window.AudioContext||window.webkitAudioContext;gt.current=new _}gt.current.state==="suspended"&&gt.current.resume()},[]),Kn=a.useCallback(async()=>{const _=!Fe;if(_)try{await bo.initialize(),Object.keys(ue).forEach((R,I)=>{const W=ue[R],K=R.replace("_camera","").replace("_screen","");if(!R.includes("_camera")&&!R.includes("_screen")){const N=I/Object.keys(ue).length*2*Math.PI,z={x:Math.cos(N)*3,y:0,z:Math.sin(N)*3};bo.addUser(K,W,z),console.log(`üéß [Spatial] Added ${K} at angle ${(N*180/Math.PI).toFixed(0)}¬∞`)}}),console.log("üéß [Spatial Audio] ENABLED - 3D audio active!")}catch(R){console.error("Failed to enable spatial audio:",R),ie.warning("Spatial Audio ba≈ülatƒ±lamadƒ±. Tarayƒ±cƒ±nƒ±z desteklemiyor olabilir.");return}else bo.destroy(),console.log("üéß [Spatial Audio] DISABLED - Normal stereo audio");at(_),localStorage.setItem("pawscord_spatial_audio",_.toString())},[Fe,ue]),Ao=a.useCallback(_=>{const R=Math.max(20,Math.min(80,_));Pr(R),localStorage.setItem("pawscord_vad_sensitivity",R.toString()),console.log(`üéöÔ∏è [VAD] Sensitivity updated: ${R}`)},[]),Mr=a.useCallback(async()=>{const _=!tt;if(Mt(_),localStorage.setItem("pawscord_noise_suppression",_.toString()),V){const R=V.getAudioTracks()[0];if(R&&R.applyConstraints)try{await R.applyConstraints({noiseSuppression:_,echoCancellation:!0,autoGainControl:!0}),console.log(`üéõÔ∏è [Noise Suppression] ${_?"ENABLED":"DISABLED"}`)}catch(I){console.warn("[Noise] Failed to apply, trying fallback getUserMedia:",I);try{const K=(await navigator.mediaDevices.getUserMedia({audio:{noiseSuppression:_,echoCancellation:!0,autoGainControl:!0,googHighpassFilter:!0,googNoiseSuppression:_,googNoiseSuppression2:_,googEchoCancellation:!0,googAutoGainControl:!0,googTypingNoiseDetection:!0,sampleRate:{ideal:48e3},latency:{ideal:.01},channelCount:{ideal:1}}})).getAudioTracks()[0],N=new MediaStream([K]);j(N),le.current=N,console.log("[Noise] Enhanced fallback stream acquired")}catch(W){console.error("[Noise] Fallback failed:",W)}}}},[tt,V]),Bo=a.useCallback(_=>{const I=["low","medium","high","aggressive"].includes(_)?_:"high";Lr(I);try{const W=JSON.parse(localStorage.getItem("voice_settings")||"{}");W.audio={...W.audio,noiseSuppressionLevel:I},localStorage.setItem("voice_settings",JSON.stringify(W))}catch(W){console.error("[Noise Level] Storage error:",W)}console.log(`üéõÔ∏è [Noise Level] Updated to: ${I}`)},[]),Yn=a.useCallback(_=>{$r(_),localStorage.setItem("pawscord_system_audio",_.toString()),console.log(`üîä [System Audio] ${_?"ENABLED":"DISABLED"}`)},[]),Do=a.useCallback(()=>{const _=!rt;Yt(_),localStorage.setItem("pawscord_ptt_mode",_.toString()),_?(console.log("üéôÔ∏è [PTT] Mode enabled, VAD disabled"),le.current&&le.current.getAudioTracks().forEach(R=>{R.enabled=!1}),A(!0)):(console.log("üéôÔ∏è [PTT] Mode disabled, VAD enabled"),le.current&&le.current.getAudioTracks().forEach(R=>{R.enabled=!0}),A(!1))},[rt]),Jn=a.useCallback(_=>{Or(_),localStorage.setItem("pawscord_ptt_key",_),console.log(`‚å®Ô∏è [PTT] Key updated to: ${_}`)},[]);a.useEffect(()=>{if(!rt||!l)return;const _=I=>{const W=I.target;W.tagName==="INPUT"||W.tagName==="TEXTAREA"||I.code===ye&&!I.repeat&&(Ut(!0),le.current&&le.current.getAudioTracks().forEach(K=>{K.enabled=!0}),console.log("üéôÔ∏è [PTT] Key pressed, mic ON"))},R=I=>{I.code===ye&&(Ut(!1),le.current&&le.current.getAudioTracks().forEach(W=>{W.enabled=!1}),console.log("üéôÔ∏è [PTT] Key released, mic OFF"))};return window.addEventListener("keydown",_),window.addEventListener("keyup",R),()=>{window.removeEventListener("keydown",_),window.removeEventListener("keyup",R)}},[rt,l,ye]);const Et=a.useCallback(_=>{te(_),localStorage.setItem("pawscord_screen_quality",_),console.log(`üì∫ [Screen Quality] Updated to: ${_}`)},[]),Xn=a.useCallback(_=>{const R=parseInt(_);fr(R),localStorage.setItem("pawscord_screen_fps",R.toString()),console.log(`üé¨ [Screen FPS] Updated to: ${R}`)},[]);a.useEffect(()=>{Fe&&Object.keys(ue).forEach((_,R)=>{const I=ue[_],W=_.replace("_camera","").replace("_screen","");if(!_.includes("_camera")&&!_.includes("_screen")&&!bo.spatialNodes[W]){const K=R/Object.keys(ue).length*2*Math.PI,N={x:Math.cos(K)*3,y:0,z:Math.sin(K)*3};bo.addUser(W,I,N),console.log(`üéß [Spatial] Auto-added ${W}`)}})},[ue,Fe]),a.useCallback(async _=>{try{const R=_.getAudioTracks();if(R.length===0)return _;const I=R[0],W={echoCancellation:{exact:!0},noiseSuppression:{exact:!0},autoGainControl:{exact:!0},googEchoCancellation:{exact:!0},googAutoGainControl:{exact:!0},googNoiseSuppression:{exact:!0},googHighpassFilter:{exact:!0},googTypingNoiseDetection:{exact:!0},googAudioMirroring:!1,googAutoGainControl2:{exact:!0},echoCancellationType:"system"};if(I.applyConstraints)try{await I.applyConstraints(W),Ge.audio("üéØ ADVANCED noise suppression enabled")}catch{await I.applyConstraints({echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),Ge.audio("‚úÖ Basic noise suppression enabled (fallback)")}return _}catch{return _}},[]);const ao=a.useCallback(_=>{try{const I=JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"high",W={low:{gateThreshold:-70,compressorThreshold:-15,compressorRatio:2,highPassFreq:50,lowPassFreq:14e3,gateRelease:.3,speechThreshold:20},medium:{gateThreshold:-60,compressorThreshold:-20,compressorRatio:3,highPassFreq:80,lowPassFreq:12e3,gateRelease:.25,speechThreshold:25},high:{gateThreshold:-50,compressorThreshold:-25,compressorRatio:4,highPassFreq:100,lowPassFreq:1e4,gateRelease:.2,speechThreshold:30},aggressive:{gateThreshold:-45,compressorThreshold:-30,compressorRatio:6,highPassFreq:120,lowPassFreq:8e3,gateRelease:.15,speechThreshold:35}},K=W[I]||W.high;if(console.log(`üîä [Audio] Noise suppression level: ${I}`,K),!Ue.current){const wr=window.AudioContext||window.webkitAudioContext;Ue.current=new wr({sampleRate:48e3,latencyHint:"interactive"}),console.log("üéµ [Performance] Global AudioContext created (48kHz, interactive mode)")}const N=Ue.current;N.state==="suspended"&&N.resume().then(()=>{console.log("üéµ [Audio] AudioContext resumed from suspended state")});const z=N.createMediaStreamSource(_),O=N.createGain();let Z=!0;const ae=K.gateThreshold,xe=.005,De=K.gateRelease,Pe=N.createDynamicsCompressor();Pe.threshold.value=K.compressorThreshold,Pe.knee.value=30,Pe.ratio.value=Math.min(K.compressorRatio,4),Pe.attack.value=.003,Pe.release.value=.15;const it=N.createBiquadFilter();it.type="highpass",it.frequency.value=K.highPassFreq,it.Q.value=.707;const Qt=N.createBiquadFilter();Qt.type="lowpass",Qt.frequency.value=K.lowPassFreq,Qt.Q.value=.707;const bt=N.createBiquadFilter();bt.type="notch",bt.frequency.value=50,bt.Q.value=10;const Sr=N.createBiquadFilter();Sr.type="peaking",Sr.frequency.value=6e3,Sr.Q.value=1,Sr.gain.value=-3;const er=N.createAnalyser();er.fftSize=2048,er.smoothingTimeConstant=.85;const tr=new Uint8Array(er.frequencyBinCount);let Io=new Float32Array(er.frequencyBinCount),Lo=!0,uo=0;const qa=()=>{if(er.getByteFrequencyData(tr),tr.reduce((It,mo)=>It+mo)/tr.length<20){if(uo++,uo>10)for(let It=0;It<tr.length;It++)Io[It]=Math.max(Io[It],tr[It])}else uo=0;Lo&&uo>50&&(Lo=!1,console.log("üéØ [Audio] Noise profile learned"))},aa=K.speechThreshold||25,sa=setInterval(()=>{er.getByteFrequencyData(tr);const wr=tr.slice(8,120),mo=wr.reduce((ia,ca)=>ia+ca)/wr.length-(Io[50]||0),$o=N.currentTime;mo>aa?Z||(O.gain.setTargetAtTime(1,$o,xe),Z=!0):Z&&(O.gain.setTargetAtTime(0,$o,De),Z=!1),(Lo||Math.random()<.01)&&qa()},30);z.connect(it),it.connect(bt),bt.connect(Qt),Qt.connect(Sr),Sr.connect(Pe),Pe.connect(O),O.connect(er);const fo=N.createMediaStreamDestination();return O.connect(fo),fo.stream.addEventListener("inactive",()=>{clearInterval(sa),console.log("üéöÔ∏è [Audio] Filter chain cleaned up")}),console.log("üéöÔ∏è [Audio] Professional filters applied: Notch(50Hz) + De-Esser + Compressor + Noise Gate"),fo.stream}catch(R){return console.error("‚ùå [Audio] Could not apply professional filters:",R),_}},[]),Ye=a.useCallback(_=>{se.current?.readyState===WebSocket.OPEN?(Ge.signal(`Sending ${_.type} to ${_.receiver_username||"BROADCAST"}`),se.current.send(JSON.stringify({..._,sender_username:s}))):Ge.warn("[Signal] WS not ready, cannot send:",_.type)},[s]),yr=a.useCallback((_,R)=>{try{const W=_.getSenders().find(O=>O.track?.kind==="video");if(!W){console.log("[Bandwidth] No video sender found, skipping adjustment");return}const K=W.getParameters();(!K.encodings||K.encodings.length===0)&&(K.encodings=[{}]);const N={low:{maxBitrate:3e5,maxFramerate:15},medium:{maxBitrate:8e5,maxFramerate:24},high:{maxBitrate:25e5,maxFramerate:30}},z=N[R]||N.medium;K.encodings[0].maxBitrate=z.maxBitrate,K.encodings[0].maxFramerate=z.maxFramerate,W.setParameters(K).then(()=>{console.log(`‚úÖ [Bandwidth] Video quality set to ${R.toUpperCase()} (${z.maxBitrate/1e3}kbps, ${z.maxFramerate}fps)`)}).catch(O=>{console.warn("[Bandwidth] Failed to set parameters:",O)})}catch(I){console.warn("[Bandwidth] Error adjusting bandwidth:",I)}},[]),vr=a.useCallback((_,R)=>{const{track:I}=R;Ge.webrtc(`Track Received from ${_}:`,I.kind,I.id,"label:",I.label,"hint:",I.contentHint);const W=(I.label||"").toLowerCase(),K=W.includes("screen")||W.includes("window")||W.includes("monitor")||W.includes("display")||W.includes("tab")||I.contentHint==="detail",N=I.kind==="video"&&K?`${_}_screen`:I.kind==="video"?`${_}_camera`:_;if(console.log(`üìπ [WebRTC] Detected ${K?"SCREEN":"CAMERA"} track from ${_}, key: ${N}`),ge(z=>{const O=z[N];if(O){if(!O.getTracks().some(ae=>ae.id===I.id)){O.addTrack(I);const ae=new MediaStream(O.getTracks());return console.log(`[WebRTC] Added track to existing stream: ${N}`),{...z,[N]:ae}}return z}const Z=new MediaStream([I]);return console.log(`[WebRTC] Created new stream: ${N}`),{...z,[N]:Z}}),I.kind==="audio"){console.log(`[WebRTC] Audio track received from ${_}`),vt();try{const z=document.createElement("audio");z.id=`remote-audio-${_}`,z.srcObject=new MediaStream([I]),z.autoplay=!0,z.playsInline=!0;const O=document.getElementById(`remote-audio-${_}`);O&&O.remove(),z.style.display="none",document.body.appendChild(z),z.play().then(()=>{console.log(`üîä [Audio] Playing remote audio from ${_}`)}).catch(Z=>{console.warn(`[Audio] Autoplay blocked for ${_}, waiting for interaction:`,Z.message);const ae=()=>{z.play().catch(()=>{}),document.removeEventListener("click",ae)};document.addEventListener("click",ae,{once:!0})}),console.log(`‚úÖ [Audio] Created audio element for ${_}`)}catch(z){console.error(`[Audio] Failed to create audio element for ${_}:`,z)}}else I.kind==="video"&&console.log(`[WebRTC] Video track (${K?"screen":"camera"}) received from ${_}`)},[vt]),Je=a.useRef({}),Er=a.useCallback((_,R=!1)=>{if(_e.current[_])return _e.current[_];const I=new RTCPeerConnection(Oa);_e.current[_]=I;try{I.getTransceivers().forEach(K=>{if(K.sender&&K.sender.track?.kind==="audio"){const N=RTCRtpSender.getCapabilities("audio")?.codecs||[],z=N.filter(ae=>ae.mimeType.toLowerCase().includes("opus")),O=N.filter(ae=>!ae.mimeType.toLowerCase().includes("opus")),Z=[...z,...O];K.setCodecPreferences&&Z.length>0&&(K.setCodecPreferences(Z),console.log("üéµ [Codec] Opus prioritized for audio"))}})}catch(W){console.warn("[Codec] setCodecPreferences not supported:",W.message)}return typeof window<"u"&&(window.__pawscord_peer_connections__=_e.current),I.onicecandidate=W=>{W.candidate&&Ye({type:"candidate",candidate:W.candidate,receiver_username:_})},I.ontrack=W=>vr(_,W),le.current&&le.current.getTracks().forEach(W=>{Ge.webrtc(`Adding local audio track to PC for ${_}:`,W.kind),I.addTrack(W,le.current)}),I.oniceconnectionstatechange=()=>{console.log(`[WebRTC] ICE State (${_}):`,I.iceConnectionState),I.iceConnectionState==="failed"?(console.warn(`[WebRTC] ICE failed with ${_}, attempting restart...`),Ke(!0),Le().finally(()=>{I.restartIce(),setTimeout(()=>Ke(!1),1500)})):I.iceConnectionState==="disconnected"?(console.warn(`[WebRTC] ICE disconnected from ${_}, waiting for reconnection...`),Ke(!0),setTimeout(()=>{(I.iceConnectionState==="disconnected"||I.iceConnectionState==="failed")&&(console.error(`[WebRTC] ICE reconnection timeout for ${_}, cleaning up...`),ge(W=>{const K={...W};return delete K[_],K}),_e.current[_]&&(_e.current[_].close(),delete _e.current[_])),Ke(!1)},15e3)):I.iceConnectionState==="closed"?(console.log(`[WebRTC] ICE closed for ${_}, cleaning up...`),ge(W=>{const K={...W};return delete K[_],K}),_e.current[_]&&delete _e.current[_],Ke(!1)):I.iceConnectionState==="connected"?(console.log(`‚úÖ [WebRTC] ICE connected with ${_}`),Ke(!1),setTimeout(async()=>{try{(await I.getStats()).forEach(K=>{if(K.type==="candidate-pair"&&K.state==="succeeded"){const N=K.currentRoundTripTime*1e3;console.log(`üìä [Bandwidth] ${_} RTT: ${N.toFixed(0)}ms`),N>500?(console.warn(`‚ö†Ô∏è [Bandwidth] High latency detected (${N.toFixed(0)}ms), reducing video quality to LOW`),yr(I,"low")):N>300?(console.warn(`‚ö†Ô∏è [Bandwidth] Medium latency detected (${N.toFixed(0)}ms), reducing video quality to MEDIUM`),yr(I,"medium")):(console.log(`‚úÖ [Bandwidth] Good connection (${N.toFixed(0)}ms), using HIGH quality`),yr(I,"high"))}})}catch(W){console.warn("[Bandwidth] Failed to get stats:",W)}},2e3)):I.iceConnectionState==="checking"&&console.log(`üîç [WebRTC] ICE checking with ${_}`)},I},[Ye,vr]),Xt=a.useCallback(async _=>{if(_.type==="kicked"){console.warn("üî¥ [Voice] Kicked from channel:",_.reason,_.message),ie.warning(`Sesli Kanaldan √áƒ±karƒ±ldƒ±nƒ±z

Neden: ${_.message}`,5e3),Ft();return}if(_.type==="video_ended"){const z=_.from||_.username,O=_.streamType||"camera",Z=`${z}_${O}`;console.log(`üìπ [Video] ${z} ended ${O} stream`),ge(ae=>{const xe={...ae};return xe[Z]&&(xe[Z].getTracks().forEach(De=>De.stop()),delete xe[Z],console.log(`üìπ [Video] Cleaned up ${Z} stream`)),xe});return}if(_.type==="voice_reaction"){const z=_.from||_.username;console.log(`üí¨ [Reaction] ${z} sent: ${_.emoji}`),X({username:z,emoji:_.emoji,timestamp:Date.now()}),setTimeout(()=>{X(O=>O&&O.timestamp===Date.now()?null:O)},3e3);return}if(_.type==="game_signal"){const z=_.from||_.username;console.log(`üéÆ [Game] ${z}:`,_.action,_.move),we(O=>{const Z={...O};if(_.action==="start")Z.gameType=_.game_type,Z.players=[z,_.target].filter(Boolean),Z.moves={},Z.result=null,Z.currentTurn=z;else if(_.action==="move"){if(Z.moves={...O.moves,[z]:_.move},_.game_type==="rps"&&Object.keys(Z.moves).length===2){const[ae,xe]=Object.keys(Z.moves),De=Z.moves[ae],Pe=Z.moves[xe];De===Pe?Z.result={winner:null,type:"draw"}:{rock:"scissors",scissors:"paper",paper:"rock"}[De]===Pe?Z.result={winner:ae,loser:xe}:Z.result={winner:xe,loser:ae}}}else _.action==="end"&&(Z.result=_.result||{type:"cancelled"});return Z});return}if(_.type==="cinema_sync"){const z=_.from||_.username;console.log(`üé¨ [Cinema] ${z}:`,_.action),ke(O=>({...O,isActive:_.action!=="stop",url:_.url||O.url,playing:_.action==="play",time:_.time||O.time,lastSyncAction:_.action,timestamp:Date.now(),syncedBy:z}));return}if(_.type==="current_users"){console.log("[Voice] Received current users from backend:",_.users),p(z=>{const O=_.users||[],Z=O.some(De=>De.username===s),ae=z.find(De=>De.username===s);let xe=[...O];return!Z&&ae?(console.log("[Voice] Backend list missing me, adding from local state"),xe=[ae,...O]):!Z&&s&&(console.log("[Voice] Backend list missing me, adding with defaults"),xe=[{username:s,isMuted:y,isCameraOn:w,isScreenSharing:v,isTalking:c},...O]),console.log("‚úÖ [Voice] Final connected users:",xe.map(De=>De.username)),xe});return}const R=_.from||_.sender_username||_.username,{type:I,sdp:W,candidate:K}=_;if(!R){console.error("[Signal] No sender username found in message:",_);return}if(R===s){console.log(`[Signal] Ignoring ${I} from self (${R})`);return}console.log(`[Signal] Received ${I} from ${R}`,_);let N=_e.current[R];if(!N)if(I==="offer")N=Er(R,!1);else if(I==="user_joined"){if(p(z=>z.find(O=>O.username===R)?z:[...z,{username:R,isMuted:!1,isCameraOn:!1,isScreenSharing:!1}]),N=Er(R,!0),console.log(`[user_joined] Checking streams for ${R}:`,{hasAudio:!!le.current,hasCamera:!!Ve.current,hasScreen:!!Ce.current,cameraEnabled:w,screenEnabled:v}),le.current){const z=N.getSenders();le.current.getTracks().forEach(O=>{z.some(ae=>ae.track===O)||(Ge.webrtc(`Adding audio track to new peer ${R}:`,O.kind),N.addTrack(O,le.current))}),console.log(`‚úÖ [user_joined] Audio track added to ${R}`)}if(Ve.current){const z=N.getSenders();Ve.current.getTracks().forEach(O=>{z.some(ae=>ae.track===O)||(Ge.webrtc(`Adding camera track to new peer ${R}:`,O.kind),N.addTrack(O,Ve.current))}),console.log(`‚úÖ [user_joined] Camera track added to ${R}`)}if(Ce.current){const z=N.getSenders();Ce.current.getTracks().forEach(O=>{z.some(ae=>ae.track===O)||(Ge.webrtc(`Adding screen track to new peer ${R}:`,O.kind),N.addTrack(O,Ce.current))}),console.log(`‚úÖ [user_joined] Screen track added to ${R}`)}try{const z=await N.createOffer();await N.setLocalDescription(z),Ye({type:"offer",sdp:N.localDescription,target:R}),Ge.signal(`Sent offer to ${R}`),console.log(`‚úÖ [user_joined] Offer successfully sent to ${R}`)}catch(z){Ge.error("Offer creation failed",z),console.error(`‚ùå [user_joined] Failed to create/send offer to ${R}:`,z)}return}else if(I==="user_left"){console.log(`[Signal] ${R} left the channel`),p(O=>O.filter(Z=>Z.username!==R));const z=document.getElementById(`remote-audio-${R}`);z&&(z.pause(),z.srcObject=null,z.remove(),console.log(`üîä [Audio] Removed audio element for ${R}`)),ge(O=>{const Z={...O};return delete Z[R],delete Z[`${R}_camera`],delete Z[`${R}_screen`],Z}),_e.current[R]&&(_e.current[R].close(),delete _e.current[R]);return}else if(I==="stream_update"){if(console.log(`[Signal] ${R} stream update:`,_),p(z=>z.map(O=>O.username===R?{...O,isCameraOn:_.streamType==="camera"?_.enabled:O.isCameraOn,isScreenSharing:_.streamType==="screen"?_.enabled:O.isScreenSharing}:O)),_.enabled&&!_e.current[R]){console.log(`[stream_update] Creating PC for ${R} due to ${_.streamType} stream`);const z=Er(R,!0);le.current&&le.current.getTracks().forEach(O=>{Ge.webrtc(`Adding audio track to ${R}:`,O.kind),z.addTrack(O,le.current)}),Ve.current&&Ve.current.getTracks().forEach(O=>{Ge.webrtc(`Adding camera track to ${R}:`,O.kind),z.addTrack(O,Ve.current)}),Ce.current&&Ce.current.getTracks().forEach(O=>{Ge.webrtc(`Adding screen track to ${R}:`,O.kind),z.addTrack(O,Ce.current)});try{const O=await z.createOffer();await z.setLocalDescription(O),Ye({type:"offer",sdp:z.localDescription,target:R}),Ge.signal(`Sent offer to ${R} after stream_update`)}catch(O){Ge.error(`Failed to create offer for ${R}:`,O)}}return}else{console.warn(`[Signal] Ignored ${I} from ${R} (No PC)`);return}try{if(I==="offer"){if(N.signalingState!=="stable"){console.warn(`[Signal] Ignoring offer from ${R}, already in state: ${N.signalingState}`);return}await N.setRemoteDescription(new RTCSessionDescription(W));const z=await N.createAnswer();if(await N.setLocalDescription(z),Ye({type:"answer",sdp:N.localDescription,target:R}),console.log(`[Signal] Sent answer to ${R}`),Je.current[R]){console.log(`[Signal] Processing ${Je.current[R].length} buffered candidates for ${R}`);for(const O of Je.current[R])try{await N.addIceCandidate(O)}catch(Z){console.warn("[Signal] Failed to add buffered candidate:",Z)}delete Je.current[R]}}else if(I==="answer"){if(N.signalingState!=="have-local-offer"){console.warn(`[WebRTC] Error handling answer from ${R}: InvalidStateError: Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': Failed to set remote answer sdp: Called in wrong state: ${N.signalingState}`);return}if(await N.setRemoteDescription(new RTCSessionDescription(W)),console.log(`[Signal] Set remote description from ${R}`),Je.current[R]){console.log(`[Signal] Processing ${Je.current[R].length} buffered candidates for ${R}`);for(const z of Je.current[R])try{await N.addIceCandidate(z)}catch(O){console.warn("[Signal] Failed to add buffered candidate:",O)}delete Je.current[R]}}else I==="candidate"&&(N.remoteDescription?(await N.addIceCandidate(new RTCIceCandidate(K)),console.log(`[Signal] Added ICE candidate from ${R}`)):(console.log(`[Signal] Buffering ICE candidate from ${R} (no remote description yet)`),Je.current[R]||(Je.current[R]=[]),Je.current[R].push(new RTCIceCandidate(K))))}catch(z){console.error(`[WebRTC] Error handling ${I} from ${R}:`,z)}},[s,Er,Ye]),Ft=a.useCallback(()=>{if(st.current){console.log("[Voice] Already leaving, skipping...");return}if(st.current=!0,console.log("[Voice] Leaving voice room..."),se.current&&se.current.readyState===WebSocket.OPEN)try{se.current.send(JSON.stringify({type:"user_leaving",sender_username:s}))}catch(_){console.warn("[Voice] Failed to send leave signal:",_)}le.current&&(le.current.getTracks().forEach(_=>{_.stop(),console.log(`[Voice] Stopped track: ${_.kind}`)}),j(null),le.current=null),re&&(re.getTracks().forEach(_=>{_.stop(),console.log(`[Voice] Stopped camera track: ${_.kind}`)}),ne(null),C(!1)),de&&(de.getTracks().forEach(_=>{_.stop(),console.log(`[Voice] Stopped screen track: ${_.kind}`)}),he(null),h(!1)),Object.entries(_e.current).forEach(([_,R])=>{console.log(`[Voice] Closing PC for ${_}`),R.close()}),_e.current={},ge({}),Je.current={},se.current&&(se.current.onclose=null,se.current.close(),se.current=null),x(!1),m(null),b(!1),A(!1),k(!1),n&&(console.log("[Voice] Stopping recording on leave"),Dt.current&&Dt.current.state!=="inactive"&&Dt.current.stop(),Jt.current&&(clearInterval(Jt.current),Jt.current=null),f(!1),P(0)),yt.current&&(clearInterval(yt.current),yt.current=null),ft.current&&(clearTimeout(ft.current),ft.current=null,console.log("[Voice] Cleared pending WebSocket reconnect")),Vt.current&&(clearInterval(Vt.current),Vt.current=null),xt(0),ht(1e3),Ke(!1),setTimeout(()=>{st.current=!1},100)},[s,re,de,n]),Rt=a.useCallback(async _=>{if(l&&S&&S!==_&&!Tt.current&&(console.log(`[Voice] Switching from ${S} to ${_}`),Tt.current=!0,await new Promise(I=>{if(se.current){const W=se.current,K=W.onclose;W.onclose=N=>{K&&K(N),console.log("[Voice] Old WebSocket fully closed"),I()},W.close(1e3,"Switching channel"),se.current=null,setTimeout(I,2e3)}else I()}),Object.values(_e.current).forEach(I=>{I.close()}),_e.current={},ge({}),await new Promise(I=>setTimeout(I,150)),Tt.current=!1,console.log(`[Voice] Now joining ${_}`)),l&&S===_){console.log(`[Voice] Already in ${_}, skipping join`);return}if(Tt.current){console.log("[Voice] Currently switching channels, skipping...");return}console.log(`[Voice] Joining room: ${_}`),b(!0),m(_);try{Bt&&Bt.length>0&&(tn(Bt),console.log(`üîê [TURN] Using cached ICE servers (${Bt.length})`));const R=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:48e3},sampleSize:{ideal:16},channelCount:{ideal:1},googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,googAudioMirroring:!1,latency:{ideal:.02}},video:!1});console.log("[Voice] üé§ Got microphone access with AGGRESSIVE noise suppression");let I=R;if(tt)try{I=ao(R),console.log("üéöÔ∏è [Voice] Professional audio filters APPLIED")}catch(N){console.warn("‚ö†Ô∏è [Voice] Could not apply professional filters, using raw stream:",N),I=R}j(I),le.current=I,console.log("üé§ [Voice] Stream ready with noise suppression"),console.log("üé§ [Voice] Stream tracks:",I.getAudioTracks().map(N=>({id:N.id,label:N.label,enabled:N.enabled,readyState:N.readyState,muted:N.muted}))),vt(),yt.current||(yt.current=setInterval(async()=>{const z=le.current?.getAudioTracks()?.[0];if(!(!l||st.current)&&(gt.current?.state==="suspended"&&await gt.current.resume().catch(()=>{}),!z||z.readyState==="ended"||!z.enabled&&!y&&!rt))try{const O=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,googEchoCancellation:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,sampleRate:48e3,channelCount:1},video:!1});j(O),le.current=O;const Z=O.getAudioTracks()[0];Object.values(_e.current).forEach(ae=>{ae.getSenders().filter(xe=>xe.track?.kind==="audio").forEach(xe=>xe.replaceTrack(Z).catch(()=>{}))}),console.log("üîÑ [Mic Watchdog] Audio track yenilendi (basit stream)")}catch(O){console.warn("[Mic Watchdog] Mic refresh failed:",O)}},8e3));const W=`${jn}://${Gn}/ws/voice/${_}/?token=${t}`;console.log(`[Voice] Connecting to ${W}`);const K=new WebSocket(W);se.current=K,K.onopen=()=>{console.log("üé§ [VoiceWS] Connected to room:",_),x(!0),b(!1),p(N=>N.some(O=>O.username===s)?N:(console.log("‚úÖ [Voice] Added self to connected users immediately"),[{username:s,isMuted:y,isCameraOn:w,isScreenSharing:v,isTalking:!1},...N]))},K.onmessage=N=>{try{const z=JSON.parse(N.data);console.log("[VoiceWS] Message received:",z.type||z),Xt(z)}catch(z){console.error("[VoiceWS] Parse error:",z)}},K.onerror=N=>{console.error("üé§ [VoiceWS] Error:",N),b(!1),!st.current&&!Tt.current&&console.warn("[VoiceWS] Error occurred, reconnect will be attempted on close")},K.onclose=N=>{if(console.log("üé§ [VoiceWS] Disconnected, code:",N.code,"reason:",N.reason),st.current||Tt.current){console.log("[VoiceWS] User intentionally left or switching, not reconnecting"),Ke(!1),xt(0),ht(1e3),ft.current&&(clearTimeout(ft.current),ft.current=null);return}if(N.code===1e3){console.log("[VoiceWS] Normal closure (1000), cleaning up"),Ft();return}if(_&&l){const O=xr+1;if(O>10){console.error("[VoiceWS] ‚ùå Max retry limit reached (10), giving up"),ie.error("Sesli sohbet baƒülantƒ±sƒ± 10 denemeden sonra kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.",5e3),Ft(),xt(0),ht(1e3);return}const Z=Math.min(hr,3e4);console.warn(`[VoiceWS] üîÑ Unexpected disconnect (code: ${N.code})`),console.log(`[VoiceWS] üîÑ Reconnect attempt ${O}/10 in ${Z}ms...`),Ke(!0),xt(O),ft.current&&clearTimeout(ft.current),ft.current=setTimeout(()=>{!st.current&&!Tt.current&&_?(console.log(`[VoiceWS] ‚ö° Executing reconnect attempt ${O} to ${_}`),ht(ae=>Math.min(ae*2,3e4)),Rt(_).then(()=>{console.log("[VoiceWS] ‚úÖ Reconnection successful! Resetting retry counters."),xt(0),ht(1e3),Ke(!1)}).catch(ae=>{console.error("[VoiceWS] Reconnection failed:",ae)})):(console.log("[VoiceWS] Reconnect cancelled (user left or room changed)"),Ke(!1),xt(0),ht(1e3))},Z)}else console.log("[VoiceWS] Not in voice or no room, cleaning up"),Ft()}}catch(R){console.error("Voice Join Error:",R),b(!1),Tt.current=!1,R.name==="NotAllowedError"?ie.warning("Mikrofon izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan izin verin.",5e3):R.name==="NotFoundError"?ie.warning("Mikrofon bulunamadƒ±. L√ºtfen bir mikrofon baƒülayƒ±n."):ie.error("Sesli sohbete baƒülanƒ±lamadƒ±: "+R.message)}},[l,S,t,Xt,vt,Ft]),Zn=a.useCallback(()=>{A(_=>{const R=!_;return le.current&&le.current.getAudioTracks().forEach(I=>{I.enabled=!R}),se.current?.readyState===WebSocket.OPEN&&se.current.send(JSON.stringify({type:"mic_off_state",is_mic_off:R})),console.log(`[Voice] Mute: ${R}`),R})},[]),To=a.useCallback(()=>{k(_=>{const R=!_;return se.current?.readyState===WebSocket.OPEN&&se.current.send(JSON.stringify({type:"deaf_state",is_deafened:R})),console.log(`[Voice] Deafened: ${R}`),R})},[]),Ur=a.useRef(!1),so=a.useCallback(async()=>{if(Ur.current){console.log("[Camera] Toggle already in progress, skipping...");return}Ur.current=!0;try{const _=Ve.current;if(_){console.log("[Camera] Stopping camera stream"),C(!1),ne(null),Ve.current=null,_.getTracks().forEach(I=>{I.stop(),console.log(`[Camera] Stopped ${I.kind} track`)});const R=[];for(const[I,W]of Object.entries(_e.current)){const K=W.getSenders();let N=!1;for(const z of K)if(z.track&&z.track.kind==="video"&&z.track.contentHint!=="detail")try{W.removeTrack(z),N=!0,console.log(`[Camera] Removed video track from peer: ${I}`)}catch(O){console.warn(`[Camera] Failed to remove track from ${I}:`,O)}if(N){const z=(async()=>{try{const O=await W.createOffer();await W.setLocalDescription(O),Ye({type:"offer",sdp:W.localDescription,target:I}),console.log(`[Camera] Sent renegotiation offer to ${I} after removal`)}catch(O){console.warn(`[Camera] Renegotiation failed with ${I}:`,O)}})();R.push(z)}}se.current?.readyState===WebSocket.OPEN&&(se.current.send(JSON.stringify({type:"camera_state",is_camera_on:!1})),se.current.send(JSON.stringify({type:"video_ended",streamType:"camera"})),console.log("[Camera] Sent video_ended signal")),Promise.all(R).catch(I=>console.warn("[Camera] Some renegotiations failed:",I))}else{console.log("[Camera] Starting camera stream");const R=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}});if(!Ur.current){console.log("[Camera] Toggle was cancelled, stopping new stream"),R.getTracks().forEach(K=>K.stop());return}console.log("[Camera] Got camera stream:",R.id),Ve.current=R,ne(R),C(!0);const I=R.getVideoTracks()[0];I.onended=()=>{console.log("[Camera] Track ended by browser/system"),ne(null),Ve.current=null,C(!1),se.current?.readyState===WebSocket.OPEN&&se.current.send(JSON.stringify({type:"video_ended",streamType:"camera"}))};try{I.contentHint="motion"}catch(K){console.warn("[Camera] contentHint not supported:",K)}const W=[];for(const[K,N]of Object.entries(_e.current)){const z=(async()=>{try{N.addTrack(I,R),console.log(`[Camera] Added video track to peer: ${K}`);const O=await N.createOffer();await N.setLocalDescription(O),Ye({type:"offer",sdp:N.localDescription,target:K}),console.log(`[Camera] Sent renegotiation offer to ${K}`)}catch(O){console.warn(`[Camera] Failed to add/renegotiate with ${K}:`,O)}})();W.push(z)}se.current?.readyState===WebSocket.OPEN&&(se.current.send(JSON.stringify({type:"camera_state",is_camera_on:!0})),console.log("[Camera] State sent to backend: is_camera_on=true")),Promise.all(W).catch(K=>console.warn("[Camera] Some track additions failed:",K))}}catch(_){console.error("[Camera] Error:",_),_.name==="NotAllowedError"?ie.warning("Kamera izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan kamera iznini a√ßƒ±n.",5e3):_.name==="NotFoundError"?ie.warning("Kamera bulunamadƒ±. L√ºtfen bir kamera baƒülayƒ±n."):ie.error("Kamera ba≈ülatƒ±lamadƒ±: "+_.message),C(!1),Ve.current=null,ne(null)}finally{setTimeout(()=>{Ur.current=!1},300)}},[Ye]),Qn=so,br=a.useRef(!1),ea=a.useCallback(async()=>{if(br.current){console.log("[Screen] Toggle already in progress, skipping...");return}br.current=!0;try{const _=Ce.current;if(_){console.log("[Screen] Stopping screen share"),h(!1),he(null),Ce.current=null,_.getTracks().forEach(I=>{I.stop(),console.log(`[Screen] Stopped ${I.kind} track`)});const R=[];for(const[I,W]of Object.entries(_e.current)){const K=W.getSenders();let N=!1;for(const z of K)if(z.track&&z.track.contentHint==="detail")try{W.removeTrack(z),N=!0,console.log(`[Screen] Removed screen track from peer: ${I}`)}catch(O){console.warn(`[Screen] Failed to remove track from ${I}:`,O)}if(N){const z=(async()=>{try{const O=await W.createOffer();await W.setLocalDescription(O),Ye({type:"offer",sdp:W.localDescription,target:I}),console.log(`[Screen] Sent renegotiation offer to ${I} after removal`)}catch(O){console.warn(`[Screen] Renegotiation failed with ${I}:`,O)}})();R.push(z)}}se.current?.readyState===WebSocket.OPEN&&(se.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),se.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})),console.log("[Screen] Sent video_ended signal")),Promise.all(R).catch(I=>console.warn("[Screen] Some renegotiations failed:",I))}else{console.log("[Screen] Starting screen share");const R={"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"4K":{width:3840,height:2160}},I=R[Te]||R["1080p"];console.log(`üé¨ [Screen] Quality: ${Te}, FPS: ${ut}`);const W=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",displaySurface:"monitor",width:{ideal:I.width},height:{ideal:I.height},frameRate:{ideal:ut}},audio:Kt});if(!br.current){console.log("[Screen] Toggle was cancelled, stopping new stream"),W.getTracks().forEach(z=>z.stop());return}console.log("[Screen] Got screen stream:",W.id),W.getVideoTracks()[0].onended=()=>{console.log("[Screen] User stopped sharing via browser"),he(null),Ce.current=null,h(!1),se.current?.readyState===WebSocket.OPEN&&(se.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),se.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})))},Ce.current=W,he(W),h(!0);const K=W.getVideoTracks()[0];try{K.contentHint="detail"}catch(z){console.warn("[Screen] contentHint not supported:",z)}const N=[];for(const[z,O]of Object.entries(_e.current)){const Z=(async()=>{try{O.addTrack(K,W),console.log(`[Screen] Added screen track to peer: ${z}`);const ae=await O.createOffer();await O.setLocalDescription(ae),Ye({type:"offer",sdp:O.localDescription,target:z}),console.log(`[Screen] Sent renegotiation offer to ${z}`)}catch(ae){console.error(`[Screen] Failed to add track to ${z}:`,ae.message)}})();N.push(Z)}se.current?.readyState===WebSocket.OPEN&&se.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!0})),Promise.all(N).catch(z=>console.warn("[Screen] Some track additions failed:",z))}}catch(_){console.error("[Screen] Error:",_),_.name==="NotAllowedError"?console.log("[Screen] User cancelled screen share"):_.name==="NotFoundError"?ie.warning("Ekran payla≈üƒ±mƒ± desteklenmiyor."):ie.error("Ekran payla≈üƒ±mƒ± ba≈ülatƒ±lamadƒ±: "+_.message),h(!1),Ce.current=null,he(null)}finally{setTimeout(()=>{br.current=!1},300)}},[Ye,Te,ut,Kt]),io=a.useCallback(()=>{if(!l||n){console.warn("[Recording] Cannot start - not in voice or already recording");return}try{const _=new(window.AudioContext||window.webkitAudioContext),R=_.createMediaStreamDestination();V&&_.createMediaStreamSource(V).connect(R),Object.entries(ue).forEach(([W,K])=>{!W.includes("_camera")&&!W.includes("_screen")&&K.getAudioTracks().length>0&&_.createMediaStreamSource(K).connect(R)});const I=new MediaRecorder(R.stream,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});Nt.current=[],I.ondataavailable=W=>{W.data.size>0&&Nt.current.push(W.data)},I.onstop=()=>{const W=new Blob(Nt.current,{type:"audio/webm"}),K=URL.createObjectURL(W),N=document.createElement("a");N.href=K,N.download=`pawscord-voice-${S}-${Date.now()}.webm`,N.click(),URL.revokeObjectURL(K),console.log("‚úÖ [Recording] Saved recording")},I.start(1e3),Dt.current=I,f(!0),P(0),Jt.current=setInterval(()=>{P(W=>W+1)},1e3),console.log("üî¥ [Recording] Started")}catch(_){console.error("[Recording] Start error:",_),ie.error("Kayƒ±t ba≈ülatƒ±lamadƒ±: "+_.message)}},[l,n,V,ue,S]),co=a.useCallback(()=>{n&&(Dt.current&&Dt.current.state!=="inactive"&&Dt.current.stop(),Jt.current&&(clearInterval(Jt.current),Jt.current=null),Dt.current=null,f(!1),P(0),console.log("‚èπÔ∏è [Recording] Stopped"))},[n]),Fo=a.useCallback(()=>{if(Nt.current.length===0){ie.warning("Hen√ºz kayƒ±t yok!");return}const _=new Blob(Nt.current,{type:"audio/webm"}),R=URL.createObjectURL(_),I=document.createElement("a");I.href=R,I.download=`pawscord-voice-${S||"recording"}-${Date.now()}.webm`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(R),console.log("üíæ [Recording] Downloaded manually")},[S]),ta=a.useCallback(async(_,R=50)=>{if(!V||!l){console.warn("[VoiceEffect] No stream or not in voice");return}try{if(gr.current&&(gr.current.forEach(O=>{try{O.disconnect()}catch{}}),gr.current=null),!_){q(null),console.log("üéµ [VoiceEffect] Cleared");return}const I=Ue.current||new AudioContext;Ue.current||(Ue.current=I);const W=I.createMediaStreamSource(V),K=I.createMediaStreamDestination(),N=[],z=R/100;switch(_){case"robot":{const O=I.createOscillator(),Z=I.createGain(),ae=I.createWaveShaper();O.type="sawtooth",O.frequency.value=50+z*100,Z.gain.value=.3+z*.4;const xe=new Float32Array(256);for(let De=0;De<256;De++){const Pe=De/128-1;xe[De]=Math.tanh(Pe*(1+z*3))}ae.curve=xe,O.connect(Z),W.connect(ae),ae.connect(K),O.start(),N.push(O,Z,ae);break}case"echo":{const O=I.createDelay(1),Z=I.createGain(),ae=I.createGain(),xe=I.createGain();O.delayTime.value=.1+z*.4,Z.gain.value=.2+z*.5,ae.gain.value=.3+z*.4,xe.gain.value=1-z*.3,W.connect(xe),W.connect(O),O.connect(Z),Z.connect(O),O.connect(ae),xe.connect(K),ae.connect(K),N.push(O,Z,ae,xe);break}case"deep":{const O=I.createBiquadFilter(),Z=I.createGain();O.type="lowshelf",O.frequency.value=500,O.gain.value=10+z*15,Z.gain.value=1.2,W.connect(O),O.connect(Z),Z.connect(K),N.push(O,Z);break}case"high":{const O=I.createBiquadFilter(),Z=I.createGain();O.type="highshelf",O.frequency.value=1e3,O.gain.value=8+z*12,Z.gain.value=.9,W.connect(O),O.connect(Z),Z.connect(K),N.push(O,Z);break}case"radio":{const O=I.createBiquadFilter(),Z=I.createBiquadFilter(),ae=I.createWaveShaper();O.type="lowpass",O.frequency.value=3e3-z*1e3,Z.type="highpass",Z.frequency.value=300+z*200;const xe=new Float32Array(256);for(let De=0;De<256;De++){const Pe=De/128-1;xe[De]=Math.sign(Pe)*Math.pow(Math.abs(Pe),.8)}ae.curve=xe,W.connect(Z),Z.connect(O),O.connect(ae),ae.connect(K),N.push(O,Z,ae);break}case"reverb":{const O=I.createConvolver(),Z=I.createGain(),ae=I.createGain(),xe=I.sampleRate,De=xe*(.5+z*2),Pe=I.createBuffer(2,De,xe);for(let it=0;it<2;it++){const Qt=Pe.getChannelData(it);for(let bt=0;bt<De;bt++)Qt[bt]=(Math.random()*2-1)*Math.pow(1-bt/De,2)}O.buffer=Pe,Z.gain.value=.3+z*.5,ae.gain.value=1-z*.2,W.connect(ae),W.connect(O),O.connect(Z),ae.connect(K),Z.connect(K),N.push(O,Z,ae);break}default:W.connect(K)}gr.current=N,oo.current=K.stream,q(_),U(R),console.log(`üéµ [VoiceEffect] Applied: ${_} at ${R}%`)}catch(I){console.error("[VoiceEffect] Error:",I),ie.error("Ses efekti uygulanamadƒ±")}},[V,l]),Ro=a.useCallback(_=>{if(!se.current||se.current.readyState!==WebSocket.OPEN){console.warn("[Reaction] WebSocket not connected");return}se.current.send(JSON.stringify({type:"voice_reaction",emoji:_})),console.log(`üí¨ [Reaction] Sent: ${_}`)},[]),Ga=a.useCallback((_,R,I=null,W=null)=>{if(!se.current||se.current.readyState!==WebSocket.OPEN){console.warn("[Game] WebSocket not connected");return}se.current.send(JSON.stringify({type:"game_signal",game_type:_,action:R,move:I,target:W})),console.log(`üéÆ [Game] Sent: ${_} - ${R}`,I)},[]),ra=a.useCallback((_,R=0,I=null)=>{if(!se.current||se.current.readyState!==WebSocket.OPEN){console.warn("[Cinema] WebSocket not connected");return}se.current.send(JSON.stringify({type:"cinema_sync",action:_,time:R,url:I})),console.log(`üé¨ [Cinema] Sent: ${_}`,{time:R,url:I})},[]),oa=a.useCallback(()=>{Ne.current||(Ne.current=setInterval(async()=>{const _={};for(const[R,I]of Object.entries(_e.current))try{const W=await I.getStats();let K=null,N=null;W.forEach(z=>{z.type==="inbound-rtp"&&z.kind==="audio"&&(K={packetsReceived:z.packetsReceived,packetsLost:z.packetsLost,jitter:z.jitter,bytesReceived:z.bytesReceived}),z.type==="inbound-rtp"&&z.kind==="video"&&(N={packetsReceived:z.packetsReceived,packetsLost:z.packetsLost,framesDecoded:z.framesDecoded,frameWidth:z.frameWidth,frameHeight:z.frameHeight}),z.type==="candidate-pair"&&z.state==="succeeded"&&(_[R]={..._[R],rtt:z.currentRoundTripTime*1e3,connectionType:z.localCandidateId?.includes("relay")?"TURN":"STUN/Direct"})}),_[R]={..._[R],audio:K,video:N,connectionState:I.connectionState,iceConnectionState:I.iceConnectionState}}catch(W){console.warn(`[Stats] Failed to get stats for ${R}:`,W)}Ct(_)},2e3),console.log("üìä [Stats] Monitoring started"))},[]),Vr=a.useCallback(()=>{Ne.current&&(clearInterval(Ne.current),Ne.current=null,Ct({}),console.log("üìä [Stats] Monitoring stopped"))},[]),Po=a.useCallback(_=>{qe(_),localStorage.setItem("pawscord_noise_gate_enabled",_.toString()),console.log(`üéöÔ∏è [Noise Gate] ${_?"ENABLED":"DISABLED"}`)},[]),lo=a.useCallback(_=>{const R=Math.max(-80,Math.min(-20,_));dr(R),localStorage.setItem("pawscord_noise_gate",R.toString()),console.log(`üéöÔ∏è [Noise Gate] Threshold: ${R}dB`)},[]),na=a.useCallback(_=>{qt(_),localStorage.setItem("pawscord_visualizer",_.toString()),console.log(`üìä [Visualizer] ${_?"ENABLED":"DISABLED"}`)},[]),Zt=a.useRef(null),Pt=a.useRef(null),_r=a.useCallback(()=>{if(!(!Qe||!V)&&!Zt.current)try{Ue.current||(Ue.current=new(window.AudioContext||window.webkitAudioContext));const _=Ue.current,R=_.createAnalyser();R.fftSize=256;const I=_.createMediaStreamSource(V);I.connect(R),Pt.current={local:R,localSource:I,remote:{}},Object.entries(ue).forEach(([W,K])=>{if(!W.includes("_camera")&&!W.includes("_screen")){const N=_.createAnalyser();N.fftSize=256;const z=_.createMediaStreamSource(K);z.connect(N),Pt.current.remote[W]={analyser:N,source:z}}}),Zt.current=setInterval(()=>{const W=new Uint8Array(128);Pt.current.local.getByteFrequencyData(W);const K={};Object.entries(Pt.current.remote).forEach(([N,{analyser:z}])=>{const O=new Uint8Array(128);z.getByteFrequencyData(O),K[N]=O}),zt({local:W,remote:K})},33),console.log("üìä [Visualizer] Started")}catch(_){console.error("[Visualizer] Failed to start:",_)}},[Qe,V,ue]),Nr=a.useCallback(()=>{if(Zt.current&&(clearInterval(Zt.current),Zt.current=null),Pt.current){try{Pt.current.localSource?.disconnect(),Object.values(Pt.current.remote).forEach(({source:_})=>{_?.disconnect()})}catch{}Pt.current=null}zt({local:new Uint8Array(128),remote:{}}),console.log("üìä [Visualizer] Stopped")},[]);return a.useEffect(()=>(l&&Qe?_r():Nr(),()=>Nr()),[l,Qe,_r,Nr]),a.useEffect(()=>()=>{n&&co(),yt.current&&(clearInterval(yt.current),yt.current=null),Vr()},[n,co,Vr]),e.createElement(s0.Provider,{value:{isInVoice:l,isConnecting:B,currentRoom:S,isMuted:y,isDeafened:g,isVideoEnabled:w,isScreenSharing:v,isTalking:c,isSpatialAudioEnabled:Fe,vadSensitivity:dt,isNoiseSuppressionEnabled:tt,screenShareQuality:Te,screenShareFPS:ut,isRecording:n,recordingDuration:u,isPTTMode:rt,isPTTActive:mr,pttKey:ye,includeSystemAudio:Kt,localStream:V,localAudioStream:V,localCameraStream:re,localScreenStream:de,remoteStreams:ue,connectedUsers:be,remoteVolumes:lt,mutedUsers:At,joinVoiceRoom:Rt,leaveVoiceRoom:Ft,joinChannel:Rt,leaveChannel:Ft,setRemoteVolume:no,setIsMuted:A,setIsDeafened:k,setIsVideoEnabled:C,setIsScreenSharing:h,toggleMute:Zn,toggleDeafened:To,toggleVideo:so,toggleCamera:Qn,toggleScreenShare:ea,toggleSpatialAudio:Kn,updateVadSensitivity:Ao,toggleNoiseSuppression:Mr,updateScreenQuality:Et,updateScreenFPS:Xn,toggleSystemAudio:Yn,togglePTTMode:Do,updatePTTKey:Jn,startRecording:io,stopRecording:co,downloadRecording:Fo,sendSignal:Ye,isPttActive:mr,sendReaction:Ro,lastReaction:J,applyVoiceEffect:ta,activeVoiceEffect:L,voiceEffectIntensity:F,setVoiceEffectIntensity:U,cinemaState:Y,setCinemaState:ke,sendCinemaSync:ra,gameState:ce,setGameState:we,sendGameSignal:Ga,connectionStats:me,startStatsMonitoring:oa,stopStatsMonitoring:Vr,noiseSuppressionLevel:Ir,updateNoiseSuppressionLevel:Bo,iceServers:Bt,isReconnecting:zr,adjustBandwidth:yr,noiseGateThreshold:kt,isNoiseGateEnabled:Ot,toggleNoiseGate:Po,updateNoiseGateThreshold:lo,audioVisualizerData:Oe,isVisualizerEnabled:Qe,toggleVisualizer:na,startVisualizer:_r,stopVisualizer:Nr}},d)},Gu=()=>a.useContext(s0),i0=a.createContext(null),qu=({children:d})=>{const[i,t]=a.useState(!1),[s,l]=a.useState(null),[x,B]=a.useState(0),b=a.useRef(null),S=a.useRef(null),m=a.useCallback(()=>{const y=localStorage.getItem("access_token");if(!y)return;let A="Anonymous";try{A=Tr(y).username}catch(w){console.error("Token decode hatasƒ±",w)}const g=`${jn}://${Gn}/ws/status/?username=${encodeURIComponent(A)}&token=${y}`;b.current&&b.current.close();const k=new WebSocket(g);b.current=k,k.onopen=()=>{console.log("üåê [GlobalWS] Baƒülandƒ±"),t(!0)},k.onmessage=w=>{const C=JSON.parse(w.data);l(C),C.type==="chat_message_handler"&&C.username==="‚ö° Signal Bot"&&(Notification.permission==="granted"&&document.hidden&&new Notification("üö® YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞!",{body:`${C.content.split(`
`)[2]}`,icon:"/logo192.png"}),B(v=>v+1))},k.onclose=w=>{console.log("üåê [GlobalWS] Kapandƒ±",w.code),t(!1),clearTimeout(S.current),S.current=setTimeout(m,5e3)},k.onerror=w=>{console.error("üåê [GlobalWS] Hata",w),k.close()}},[Gn,jn]);return a.useEffect(()=>{const y=setTimeout(()=>{m()},2e3);return()=>{clearTimeout(y),b.current&&b.current.close(),clearTimeout(S.current)}},[m]),e.createElement(i0.Provider,{value:{isConnected:i,globalData:s,unreadGlobal:x,setUnreadGlobal:B}},d)},c0=()=>a.useContext(i0),Ku=({message:d,endTime:i,level:t="info",onDismiss:s})=>{const[l,x]=a.useState("");a.useEffect(()=>{if(!i)return;const S=()=>{const y=new Date,g=new Date(i)-y;if(g<=0){x("Ending soon..."),setTimeout(()=>window.location.reload(),5e3);return}const k=Math.floor(g/(1e3*60*60)),w=Math.floor(g%(1e3*60*60)/(1e3*60));x(`${k}h ${w}m remaining`)};S();const m=setInterval(S,6e4);return()=>clearInterval(m)},[i]);const B={info:{bg:"rgba(88, 101, 242, 0.1)",border:"#5865f2",text:"#5865f2"},warning:{bg:"rgba(250, 166, 26, 0.1)",border:"#faa61a",text:"#faa61a"},critical:{bg:"rgba(240, 71, 71, 0.1)",border:"#f04747",text:"#f04747"}},b=B[t]||B.info;return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:b.bg,borderBottom:`2px solid ${b.border}`,padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:9999,animation:"slideDown 0.3s ease"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement(nl,{style:{color:b.text,fontSize:"18px"}}),e.createElement("div",null,e.createElement("div",{style:{color:b.text,fontWeight:"bold"}},t==="critical"?"üö® Critical Maintenance":t==="warning"?"‚ö†Ô∏è Scheduled Maintenance":"‚ÑπÔ∏è Maintenance Notice"),e.createElement("div",{style:{color:"#dcddde",fontSize:"14px",marginTop:"2px"}},d,l&&e.createElement("span",{style:{marginLeft:"10px",opacity:.7}},"(",l,")")))),s&&e.createElement("button",{onClick:s,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:S=>S.target.style.background="rgba(255,255,255,0.1)",onMouseLeave:S=>S.target.style.background="none"},e.createElement(wo,null)))},wt=({size:d="medium",text:i="Y√ºkleniyor...",fullscreen:t=!1})=>{const s={small:{spinner:24,text:"12px"},medium:{spinner:40,text:"14px"},large:{spinner:60,text:"16px"}},l=s[d]||s.medium,x=t?Xr.fullscreenContainer:Xr.inlineContainer;return e.createElement("div",{style:x},e.createElement("div",{style:{...Xr.spinnerWrapper,width:l.spinner,height:l.spinner}},e.createElement("div",{style:Xr.spinnerOuter}),e.createElement("div",{style:Xr.spinnerInner})),i&&e.createElement("div",{style:{...Xr.loadingText,fontSize:l.text}},i))},Xr={fullscreenContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#36393f",zIndex:9999,gap:"16px"},inlineContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px",minHeight:"100px"},spinnerWrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},spinnerOuter:{position:"absolute",width:"100%",height:"100%",border:"3px solid rgba(88, 101, 242, 0.2)",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite"},spinnerInner:{position:"absolute",width:"70%",height:"70%",border:"3px solid rgba(88, 101, 242, 0.1)",borderBottom:"3px solid #7289da",borderRadius:"50%",animation:"spin 0.7s linear infinite reverse"},loadingText:{color:"#b5bac1",fontWeight:500,textAlign:"center",animation:"pulse 1.5s ease-in-out infinite"}};if(typeof document<"u"){const d=document.createElement("style");d.innerText=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
    `,document.head.querySelector("[data-loading-spinner-styles]")||(d.setAttribute("data-loading-spinner-styles","true"),document.head.appendChild(d))}const Yu="https://media.pawscord.com",Ju=`${Yu}/assets`,Xu=`${Ju}/logo.png`,Zu=Xu,Qu=()=>e.createElement("svg",{className:"splash-logo",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("ellipse",{cx:"50",cy:"62",rx:"22",ry:"18",fill:"white"}),e.createElement("ellipse",{cx:"28",cy:"38",rx:"10",ry:"12",fill:"white"}),e.createElement("ellipse",{cx:"72",cy:"38",rx:"10",ry:"12",fill:"white"}),e.createElement("ellipse",{cx:"22",cy:"55",rx:"8",ry:"10",fill:"white"}),e.createElement("ellipse",{cx:"78",cy:"55",rx:"8",ry:"10",fill:"white"})),ef=()=>{const[d,i]=a.useState(!1);return d?e.createElement(Qu,null):e.createElement("img",{src:Zu,alt:"Pawscord",className:"splash-logo",onError:()=>i(!0)})},tf=({animationState:d})=>e.createElement("div",{className:`splash-screen ${d}`},e.createElement("div",{className:"particles"},[...Array(15)].map((i,t)=>e.createElement("div",{key:t,className:"particle",style:{"--delay":`${Math.random()*2}s`,"--x":`${Math.random()*100}%`,"--size":`${4+Math.random()*8}px`,"--duration":`${2+Math.random()*3}s`}}))),e.createElement("div",{className:"rings-container"},e.createElement("div",{className:"ring ring-1"}),e.createElement("div",{className:"ring ring-2"}),e.createElement("div",{className:"ring ring-3"})),e.createElement("div",{className:"logo-container"},e.createElement("div",{className:"logo-glow"}),e.createElement(ef,null)),e.createElement("div",{className:"brand-text"},e.createElement("span",{className:"letter",style:{"--i":0}},"P"),e.createElement("span",{className:"letter",style:{"--i":1}},"A"),e.createElement("span",{className:"letter",style:{"--i":2}},"W"),e.createElement("span",{className:"letter",style:{"--i":3}},"S"),e.createElement("span",{className:"letter",style:{"--i":4}},"C"),e.createElement("span",{className:"letter",style:{"--i":5}},"O"),e.createElement("span",{className:"letter",style:{"--i":6}},"R"),e.createElement("span",{className:"letter",style:{"--i":7}},"D")),e.createElement("div",{className:"loading-bar"},e.createElement("div",{className:"loading-progress"}))),zi=e.memo(tf),Mi=e.lazy(()=>M(()=>import("./Message-DiR-fvNL.js"),__vite__mapDeps([17,1,2,18,19]),import.meta.url)),rf=e.lazy(()=>M(()=>import("./VirtualMessageList-C34to-it.js"),__vite__mapDeps([20,1,2]),import.meta.url)),of=e.lazy(()=>M(()=>import("./MessageInput-ZpHBrChS.js"),__vite__mapDeps([21,1,2,16,22,23]),import.meta.url)),rn=e.lazy(()=>M(()=>import("./UserVideoContainer-CmGReA4j.js"),__vite__mapDeps([24,1,2]),import.meta.url)),nf=e.lazy(()=>M(()=>import("./VoiceAudioController-BtpDLstf.js"),__vite__mapDeps([25,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./RichTextEditor-VeHZWwHN.js"),__vite__mapDeps([26,1,2,27,28,29]),import.meta.url));const af=e.lazy(()=>M(()=>import("./StickyMessageBanner-B6_3ba-a.js"),__vite__mapDeps([30,1,2]),import.meta.url)),sf=e.lazy(()=>M(()=>import("./LoginPage-DKHBoXXq.js"),__vite__mapDeps([31,1,2,32]),import.meta.url)),cf=e.lazy(()=>M(()=>import("./WelcomeScreen-BPdqOgzw.js"),__vite__mapDeps([33,1,2,34]),import.meta.url)),lf=e.lazy(()=>M(()=>import("./ImageModal-DM5qgKTp.js"),__vite__mapDeps([7,1,2]),import.meta.url)),df=e.lazy(()=>M(()=>import("./UserProfileModal-BxkGw8he.js"),__vite__mapDeps([6,1,2]),import.meta.url)),uf=e.lazy(()=>M(()=>import("./PollCreateModal--dQQ63jv.js"),__vite__mapDeps([14,1,2]),import.meta.url)),ff=e.lazy(()=>M(()=>import("./CodeSnippetModal-Bn2LWIFY.js"),__vite__mapDeps([15,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./AvatarCropper-ClIKOjVB.js"),__vite__mapDeps([35,1,2,36]),import.meta.url));const mf=e.lazy(()=>M(()=>import("./CryptoChartModal-Cx0AFJMS.js"),__vite__mapDeps([37,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./CryptoStoreModal-Bb8rWzX8.js"),__vite__mapDeps([38,1,2]),import.meta.url));const pf=e.lazy(()=>M(()=>import("./PremiumStoreModal-DzmtG55k.js"),__vite__mapDeps([39,1,2]),import.meta.url)),xf=e.lazy(()=>M(()=>import("./WhiteboardModal-DA9fcvjG.js"),__vite__mapDeps([13,1,2]),import.meta.url)),hf=e.lazy(()=>M(()=>import("./SoundboardModal-BKG3Va3D.js"),__vite__mapDeps([10,1,2]),import.meta.url)),gf=e.lazy(()=>M(()=>import("./KanbanBoard-CPa0rQ-_.js"),__vite__mapDeps([40,1,2,28]),import.meta.url)),Ui=e.lazy(()=>M(()=>import("./SummaryModal-CcOcNPhY.js"),__vite__mapDeps([41,1,2]),import.meta.url)),yf=e.lazy(()=>M(()=>import("./MessageTemplateModal-Disc5kuo.js"),__vite__mapDeps([16,1,2]),import.meta.url)),vf=e.lazy(()=>M(()=>import("./CinemaModal-TqNOkebh.js"),__vite__mapDeps([12,1,2]),import.meta.url)),Ef=e.lazy(()=>M(()=>import("./StickerPicker-BABuvz6l.js"),__vite__mapDeps([9,1,2]),import.meta.url)),bf=e.lazy(()=>M(()=>import("./GifPicker-BC8dSWwq.js"),__vite__mapDeps([8,1,2]),import.meta.url)),_f=e.lazy(()=>M(()=>import("./DJModal-BEVHQE0f.js"),__vite__mapDeps([42,1,2]),import.meta.url)),Sf=e.lazy(()=>M(()=>import("./ThemeStoreModal-CaBzKQ-a.js"),__vite__mapDeps([43,1,2]),import.meta.url)),wf=e.lazy(()=>M(()=>import("./EncryptionKeyModal-BPVMghTf.js"),__vite__mapDeps([44,1,2]),import.meta.url)),Cf=e.lazy(()=>M(()=>import("./DownloadModal-DRmyrhGg.js"),__vite__mapDeps([34,1,2]),import.meta.url)),kf=e.lazy(()=>M(()=>import("./ServerSettingsModal-Do-5EL8u.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),Af=e.lazy(()=>M(()=>import("./CreateGroupModal-Dl_lpTQ_.js"),__vite__mapDeps([45,1,2]),import.meta.url)),Bf=e.lazy(()=>M(()=>import("./AdminAnalyticsPanel-D90FGXcM.js"),__vite__mapDeps([46,1,2,28]),import.meta.url)),Df=e.lazy(()=>M(()=>import("./AdminPanelModal-CZ5j6I1m.js"),__vite__mapDeps([47,1,2]),import.meta.url)),Tf=e.lazy(()=>M(()=>import("./WebhooksPanel-BPKE8cEB.js"),__vite__mapDeps([48,1,2,49]),import.meta.url)),Ff=e.lazy(()=>M(()=>import("./VanityURLManager-Cb7lmCSP.js"),__vite__mapDeps([5,1,2]),import.meta.url)),Rf=e.lazy(()=>M(()=>import("./AutoModerationDashboard-set_zYym.js"),__vite__mapDeps([50,1,2]),import.meta.url)),Pf=e.lazy(()=>M(()=>import("./AutoModerationPanel-FYdnmnlr.js"),__vite__mapDeps([51,1,2,52]),import.meta.url)),If=e.lazy(()=>M(()=>import("./RaidProtectionPanel-BbH6_A11.js"),__vite__mapDeps([53,1,2]),import.meta.url)),Lf=e.lazy(()=>M(()=>import("./ReportSystemPanel-CJGCUfn_.js"),__vite__mapDeps([54,1,2]),import.meta.url)),$f=e.lazy(()=>M(()=>import("./AuditLogPanel-Bl_R9Mev.js"),__vite__mapDeps([55,1,2]),import.meta.url)),Of=e.lazy(()=>M(()=>import("./UserWarningsPanel-B2LnUbrQ.js"),__vite__mapDeps([56,1,2]),import.meta.url)),zf=e.lazy(()=>M(()=>import("./BookmarkPanel-DxACJuHE.js"),__vite__mapDeps([57,1,2]),import.meta.url)),Mf=e.lazy(()=>M(()=>import("./ReadLaterPanel-DIk5BFX5.js"),__vite__mapDeps([58,1,2,59]),import.meta.url)),Uf=e.lazy(()=>M(()=>import("./ChannelPermissionsPanel-IpiqCwFy.js"),__vite__mapDeps([60,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MessageThreadsPanel-B5Xr5eFO.js"),__vite__mapDeps([61,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ModeratorNotesPanel-AmBBWWsy.js"),__vite__mapDeps([62,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ServerRolesPanel-oIehKCXg.js"),__vite__mapDeps([63,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./NotificationPreferencesPanel-Dr6ifMTQ.js"),__vite__mapDeps([64,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MessageOCRPanel-CRW6bHKL.js"),__vite__mapDeps([65,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MassActionsPanel-DoPgGnHR.js"),__vite__mapDeps([66,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./TimeoutMutePanel-DGKdfkws.js"),__vite__mapDeps([67,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ServerThemesPanel-CV-B07zp.js"),__vite__mapDeps([68,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./KeywordMutesPanel-BicM7pmY.js"),__vite__mapDeps([69,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./WelcomeTemplatesPanel-D9OFTCn5.js"),__vite__mapDeps([70,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./StickyMessagesPanel-CPgRewzp.js"),__vite__mapDeps([71,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MessageTemplatesPanel-C5Okfx_A.js"),__vite__mapDeps([72,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MessageExportPanel-B8ds3kIB.js"),__vite__mapDeps([73,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ArchivedRoomsPanel-CqvrqGMK.js"),__vite__mapDeps([74,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./SlowModePanel-ChFUzbkW.js"),__vite__mapDeps([75,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./EmojiManagementPanel-DSAqDEtV.js"),__vite__mapDeps([76,1,2]),import.meta.url));const Vf=e.lazy(()=>M(()=>import("./ReactionAnalyticsPanel-BiclrQr8.js"),__vite__mapDeps([77,1,2]),import.meta.url)),Nf=e.lazy(()=>M(()=>import("./LinkClickTrackingPanel-BCOmf7lh.js"),__vite__mapDeps([78,1,2]),import.meta.url)),Wf=e.lazy(()=>M(()=>import("./JoinLeaveLogsPanel-CEJShKum.js"),__vite__mapDeps([79,1,2]),import.meta.url)),Hf=e.lazy(()=>M(()=>import("./UserActivityPanel-DhBmjmvp.js"),__vite__mapDeps([80,1,2]),import.meta.url)),jf=e.lazy(()=>M(()=>import("./NicknameHistoryPanel-lbLQtKZS.js"),__vite__mapDeps([81,1,2]),import.meta.url)),Gf=e.lazy(()=>M(()=>import("./FieldChangeTrackingPanel-CMBQuM13.js"),__vite__mapDeps([82,1,2]),import.meta.url)),qf=e.lazy(()=>M(()=>import("./InviteAnalyticsPanel-DWe6bWvm.js"),__vite__mapDeps([83,1,2]),import.meta.url)),Kf=e.lazy(()=>M(()=>import("./ContentScannerPanel-Qtbd2ZTO.js"),__vite__mapDeps([84,1,2]),import.meta.url)),Yf=e.lazy(()=>M(()=>import("./EphemeralMessagesPanel-BxkoL18o.js"),__vite__mapDeps([85,1,2]),import.meta.url)),Jf=e.lazy(()=>M(()=>import("./TopicHistoryPanel-BfMw-qE1.js"),__vite__mapDeps([86,1,2]),import.meta.url)),Xf=e.lazy(()=>M(()=>import("./DraftsPanel-C_xNBD7R.js"),__vite__mapDeps([87,1,2]),import.meta.url)),Zf=e.lazy(()=>M(()=>import("./ServerNicknamesPanel-DptHD9VS.js"),__vite__mapDeps([88,1,2]),import.meta.url)),Qf=e.lazy(()=>M(()=>import("./ServerBoostPanel-CGGN7woV.js"),__vite__mapDeps([89,1,2]),import.meta.url)),em=e.lazy(()=>M(()=>import("./RoomWebhooksPanel-Bh5qgsqP.js"),__vite__mapDeps([90,1,2]),import.meta.url)),tm=e.lazy(()=>M(()=>import("./OAuthAppsPanel-DtA2tNwM.js"),__vite__mapDeps([91,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./VanityURLPanel-ChpfChKE.js"),__vite__mapDeps([92,1,2]),import.meta.url));const Vi=e.lazy(()=>M(()=>import("./AutoRespondersPanel-CQ0I5cOP.js"),__vite__mapDeps([93,1,2]),import.meta.url)),rm=e.lazy(()=>M(()=>import("./SessionManagementPanel-DR178Hln.js"),__vite__mapDeps([94,1,2]),import.meta.url)),om=e.lazy(()=>M(()=>import("./GDPRExportPanel-Bznj6hl4.js"),__vite__mapDeps([95,1,2]),import.meta.url)),nm=e.lazy(()=>M(()=>import("./DataRetentionPanel-TgFXzkuz.js"),__vite__mapDeps([96,1,2]),import.meta.url)),am=e.lazy(()=>M(()=>import("./TwoFactorSetupWizard-BUDZuVmt.js"),__vite__mapDeps([97,1,2]),import.meta.url)),sm=e.lazy(()=>M(()=>import("./EnhancedPollsPanel-Co8AL3Gq.js"),__vite__mapDeps([98,1,2]),import.meta.url)),im=e.lazy(()=>M(()=>import("./VoiceTranscriptsPanel-BMoypA-k.js"),__vite__mapDeps([99,1,2]),import.meta.url)),cm=e.lazy(()=>M(()=>import("./PaymentPanel-LViFJjoc.js"),__vite__mapDeps([100,1,2]),import.meta.url)),lm=e.lazy(()=>M(()=>import("./StoreModal-B8lms9ml.js"),__vite__mapDeps([101,1,2]),import.meta.url)),dm=e.lazy(()=>M(()=>import("./DailyRewardsModal-DKQvz9rZ.js"),__vite__mapDeps([102,1,2]),import.meta.url)),um=e.lazy(()=>M(()=>import("./APIUsagePanel-CqgsnOX7.js"),__vite__mapDeps([103,1,2]),import.meta.url)),fm=e.lazy(()=>M(()=>import("./ExportJobsPanel-DwwoFQ3k.js"),__vite__mapDeps([104,1,2]),import.meta.url)),mm=e.lazy(()=>M(()=>import("./ScheduledAnnouncementsPanel-C0qq1d5T.js"),__vite__mapDeps([105,1,2]),import.meta.url)),pm=e.lazy(()=>M(()=>import("./InviteExportPanel-CCM2-032.js"),__vite__mapDeps([106,1,2]),import.meta.url)),xm=e.lazy(()=>M(()=>import("./AdvancedSearchPanel-_fS-36zy.js"),__vite__mapDeps([107,1,2]),import.meta.url)),hm=e.lazy(()=>M(()=>import("./GrowthMetricsPanel-DCT2I8hg.js"),__vite__mapDeps([108,1,2]),import.meta.url)),gm=e.lazy(()=>M(()=>import("./LinkPreviewRenderer-Byhk8mOB.js"),__vite__mapDeps([109,1,2]),import.meta.url)),ym=e.lazy(()=>M(()=>import("./InventoryPanel-Dzqq9lP1.js"),__vite__mapDeps([110,1,2]),import.meta.url)),vm=e.lazy(()=>M(()=>import("./WaitlistPanel-rLB79jGk.js"),__vite__mapDeps([111,1,2]),import.meta.url)),Em=e.lazy(()=>M(()=>import("./ReferralRewardsPanel-Bh2oNiO1.js"),__vite__mapDeps([112,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./VerifyEmailPage-QT1UjqN_.js"),__vite__mapDeps([113,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ForgotPasswordPage-CWSCOYjG.js"),__vite__mapDeps([114,1,2,32]),import.meta.url));e.lazy(()=>M(()=>import("./ResetPasswordPage-B3PBYFm2.js"),__vite__mapDeps([115,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./TwoFactorLoginPage-rTej6dMB.js"),__vite__mapDeps([116,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./TwoFactorSetup-ChYQIsG-.js"),__vite__mapDeps([117,1,2,118]),import.meta.url));e.lazy(()=>M(()=>import("./TwoFactorLogin-tBxMUzyM.js"),__vite__mapDeps([119,1,2,120]),import.meta.url));const bm=e.lazy(()=>M(()=>import("./VanityInviteScreen-D5GgPwXF.js"),__vite__mapDeps([121,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./EmailVerification-BRJebnQQ.js"),__vite__mapDeps([122,1,2,123]),import.meta.url));e.lazy(()=>M(()=>import("./MobileNav-sszEDAGg.js"),__vite__mapDeps([124,1,2,125]),import.meta.url));e.lazy(()=>M(()=>import("./SwipeActions-CLgCj9kW.js"),__vite__mapDeps([126,1,2,127]),import.meta.url));e.lazy(()=>M(()=>import("./VoiceMessage-DI74E8hm.js"),__vite__mapDeps([128,1,2,129]),import.meta.url));const _m=e.lazy(()=>M(()=>import("./FriendsTab-BHVtXFFp.js"),__vite__mapDeps([130,1,2,18]),import.meta.url)),Sm=e.lazy(()=>M(()=>import("./RoomList-DXI85XNp.js"),__vite__mapDeps([131,1,2,132,22,5,4,18]),import.meta.url)),wm=e.lazy(()=>M(()=>import("./UserProfilePanel-RvrBeRZO.js"),__vite__mapDeps([133,1,2,134,35,36,135]),import.meta.url)),Ni=e.lazy(()=>M(()=>import("./VoiceChatPanel-IrHAgIBA.js"),__vite__mapDeps([136,1,2,137,138]),import.meta.url)),Cm=e.lazy(()=>M(()=>import("./ChatUserList-2aNYLEyS.js"),__vite__mapDeps([139,1,2]),import.meta.url)),km=e.lazy(()=>M(()=>import("./PinnedMessages-CUUA3BNo.js"),__vite__mapDeps([140,1,2,17,18,19]),import.meta.url)),Am=e.lazy(()=>M(()=>import("./FloatingVoiceIsland-WGtmu8zj.js"),__vite__mapDeps([141,1,2]),import.meta.url)),Bm=e.lazy(()=>M(()=>import("./CinemaPlayer-Dx1s39Ql.js"),__vite__mapDeps([142,1,2]),import.meta.url)),Dm=e.lazy(()=>M(()=>import("./ConnectionsPanel-v7y6IiPs.js"),__vite__mapDeps([143,1,2,144]),import.meta.url)),Tm=e.lazy(()=>M(()=>import("./PasswordSetupModal-DtzyqiFM.js"),__vite__mapDeps([145,1,2,146]),import.meta.url)),Fm=e.lazy(()=>M(()=>import("./NotificationDropdown-kjwHngfJ.js"),__vite__mapDeps([147,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ReactionStatsPanel-CUkGOkVy.js"),__vite__mapDeps([148,1,2,149]),import.meta.url));e.lazy(()=>M(()=>import("./ServerHealthPanel-DW-KbDs-.js"),__vite__mapDeps([150,1,2,151]),import.meta.url));e.lazy(()=>M(()=>import("./ChannelAnalyticsPanel-MEIrMRpS.js"),__vite__mapDeps([152,1,2,153]),import.meta.url));e.lazy(()=>M(()=>import("./SmartSuggestionsPanel-BvwZ89qK.js"),__vite__mapDeps([154,1,2,155]),import.meta.url));e.lazy(()=>M(()=>import("./UserPresenceInsightsPanel-qbebvm_z.js"),__vite__mapDeps([156,1,2,157]),import.meta.url));e.lazy(()=>M(()=>import("./UserFooter-B_w96RaU.js").then(d=>d.a),__vite__mapDeps([132,1,2]),import.meta.url));const Rm=e.lazy(()=>M(()=>import("./UserContextMenu-XslBqEm4.js"),__vite__mapDeps([137,1,2]),import.meta.url)),Pm=e.lazy(()=>M(()=>import("./MiniGamesPanel-DJmaEIAk.js"),__vite__mapDeps([158,1,2]),import.meta.url)),Im=e.lazy(()=>M(()=>import("./ProjectCollaborationPanel-D0BvVnJA.js"),__vite__mapDeps([159,1,2]),import.meta.url)),Lm=e.lazy(()=>M(()=>import("./AvatarStudioPanel-CPPqQBON.js"),__vite__mapDeps([160,1,2]),import.meta.url)),$m="8888",Qr=typeof window<"u"&&typeof window.require=="function",ir=window.Capacitor&&window.Capacitor.isNativePlatform(),ko=(()=>{if(ir||Qr)return"https://api.pawscord.com";const d=window.location.protocol,i=window.location.hostname;return i.includes("pawscord.com")?"https://api.pawscord.com":`${d}//${i}:${$m}`})(),Zr=Qr||ir?"https://www.pawscord.com":ko,pe=`${ko}/api`,ee=ko,on=ko.startsWith("https")?"wss":"ws",nn=ko.replace(/^https?:\/\//,""),Wi=`${pe}/auth/login/`,Hi=`${pe}/auth/register/`,Om=`${pe}/messages/history/room/`,zm=`${pe}/messages/history/dm/`,Da=`${pe}/rooms/list_with_categories/`,Mm=`${pe}/conversations/`,Um=`${pe}/conversations/find_or_create/`,Vm=`${pe}/users/update_profile/`,Nm=`${pe}/users/default_avatars/`,Wm=`${pe}/users/change_username/`,Hm=`${pe}/gifs/list_local/`,jm="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",ji="chat_drafts_v1",an=()=>(Date.now()+Math.floor(Math.random()*1e3)).toString(),Gm=d=>new Promise((i,t)=>{const l=Math.ceil(d.size/2097152);let x=0;const B=new Il.ArrayBuffer,b=new FileReader;b.onload=m=>{B.append(m.target.result),x++,x<l?S():i(B.end())},b.onerror=m=>t(m);function S(){const m=x*2097152,y=Math.min(m+2097152,d.size);b.readAsArrayBuffer(d.slice(m,y))}S()}),qm=()=>{const{user:d,isAuthenticated:i,token:t,login:s,logout:l,isLoading:x}=ro(),{isInVoice:B,isConnecting:b,currentRoom:S,joinChannel:m,leaveChannel:y,isMuted:A,isDeafened:g,toggleMute:k,toggleDeafened:w,toggleVideo:C,toggleScreenShare:v,remoteVolumes:h,setRemoteVolume:c,localCameraStream:o,remoteStreams:n,isTalking:f,sendSignal:u,isScreenSharing:P,isVideoEnabled:L,isPttActive:q,localScreenStream:F,sendReaction:U,lastReaction:V,applyVoiceEffect:j,activeEffect:re,cinemaState:ne,setCinemaState:de,gameState:he,sendGameSignal:ue,mutedUsers:ge}=Gu(),{globalData:be}=c0(),p=He(r=>r.activeChat),J=He(r=>r.messages),X=He(r=>r.encryptionKeys),Y=He(r=>r.voiceUsers),ke=He(r=>r.unreadCounts),ce=He(r=>r.setActiveChat);He(r=>r.addMessage),He(r=>r.updateMessage);const we=He(r=>r.setMessages),me=He(r=>r.setTypingUser),Ct=He(r=>r.setOnlineUsers),kt=He(r=>r.setVoiceUsers),dr=He(r=>r.incrementUnread),Ot=He(r=>r.setEncryptionKey),[qe,Oe]=a.useState(!1),[zt,Qe]=a.useState(!1),[qt,lt]=a.useState(!1),[ur,At]=a.useState(!1),[et,Fe]=a.useState(!1),[at,dt]=a.useState(null),[Pr,tt]=a.useState(!1),[Mt,Ir]=a.useState(0),[Lr,Te]=a.useState(""),te=d?.username||"",[ut,fr]=a.useState(!1),[Kt,$r]=a.useState(!1),[rt,Yt]=a.useState(null),{isMobile:ye}=Cu(),[Or,mr]=a.useState(""),Ut=Pu(Or,300),[Bt,pr]=a.useState("0px"),zr=ir?"max(20px, env(safe-area-inset-bottom))":"0px",[Ke,xr]=a.useState({width:300,height:225,x:100,y:100}),[xt,hr]=a.useState(!0),[ht,ft]=a.useState(!0),[Vt,Le]=a.useState(!1),[se,_e]=a.useState("start"),[gt,Ue]=a.useState([]),[le,Ve]=a.useState([]),[Ce,Nt]=a.useState([]),[Dt,Jt]=a.useState([]),[st,Tt]=a.useState([]),[yt,gr]=a.useState(!1),[oo,Ne]=a.useState(!1),[no,vt]=a.useState(!1),[Kn,Ao]=a.useState(!1),[Mr,Bo]=a.useState(!1),[Yn,Do]=a.useState(!1),[Jn,Et]=a.useState(""),[Xn,ao]=a.useState(!1),[Ye,yr]=a.useState(!1),[vr,Je]=a.useState(new Set),[Er,Xt]=a.useState(null),[Ft,Rt]=a.useState(null),[Zn,To]=a.useState(null),[Ur,so]=a.useState(!1),[Qn,br]=a.useState(!1),[ea,io]=a.useState(!1),[co,Fo]=a.useState(!1),[ta,Ro]=a.useState(!1),[Ga,ra]=a.useState(!1),[oa,Vr]=a.useState(!1),[Po,lo]=a.useState(!1),[na,Zt]=a.useState(!1),[Pt,_r]=a.useState(!1),[Nr,_]=a.useState(!1),[R,I]=a.useState(!1),[W,K]=a.useState(!1),[N,z]=a.useState(!1),[O,Z]=a.useState(!1),[ae,xe]=a.useState(!1),[De,Pe]=a.useState(!1),[it,Qt]=a.useState(!1),[bt,Sr]=a.useState(!1),[er,tr]=a.useState(!1),[Io,Lo]=a.useState(!1),[uo,qa]=a.useState(!1),[aa,Ka]=a.useState(!1),[sa,fo]=a.useState(!1),[wr,It]=a.useState(!1),[mo,$o]=a.useState(!1),[ia,ca]=a.useState(!1),[p0,x0]=a.useState(!1),[h0,g0]=a.useState(!1),[y0,v0]=a.useState(!1),[E0,b0]=a.useState(!1),[_0,S0]=a.useState(!1),[w0,Ya]=a.useState(!1),[C0,k0]=a.useState(!1),[A0,B0]=a.useState(!1),[D0,T0]=a.useState(!1),[F0,R0]=a.useState(!1),[P0,I0]=a.useState(!1),[L0,$0]=a.useState(!1),[O0,z0]=a.useState(!1),[M0,U0]=a.useState(!1),[V0,Ja]=a.useState(!1),[N0,W0]=a.useState(!1),[H0,j0]=a.useState(!1),[G0,q0]=a.useState(!1),[K0,Xa]=a.useState(!1),[Y0,J0]=a.useState(!1),[X0,Z0]=a.useState(!1),[Q0,ec]=a.useState(!1),[tc,rc]=a.useState(!1),[oc,nc]=a.useState(!1),[ac,Za]=a.useState(!1),[sc,Qa]=a.useState(!1),[ic,es]=a.useState(!1),[Tp,Fp]=a.useState(!1),[Rp,Pp]=a.useState(!1),[Ip,Lp]=a.useState(!1),[$p,Op]=a.useState(!1),[zp,Mp]=a.useState(!1),[Up,Vp]=a.useState(!1),[Np,Wp]=a.useState(!1),[Hp,jp]=a.useState(!1),[Gp,qp]=a.useState(!1),[Kp,Yp]=a.useState(!1),[cc,ts]=a.useState("default"),[rs,Wr]=a.useState(null),[Jp,Xp]=a.useState(!1),[lc,Oo]=a.useState(!1),[Zp,zo]=a.useState(!0),[Qp,la]=a.useState(0),[Hr,dc]=a.useState(!1),[Cr,da]=a.useState([]),[uc,fc]=a.useState(0),[rr,os]=a.useState([]),[kr,or]=a.useState([]),[ex,mc]=a.useState(null),[Lt,Mo]=a.useState(null),[ns,as]=a.useState(!1),[pc,ss]=a.useState(!1),[is,cs]=a.useState(null),[ls,ua]=a.useState(!1),[xc,ds]=a.useState(!1),[hc,Uo]=a.useState(""),[po,us]=a.useState(()=>JSON.parse(localStorage.getItem("chat_sound_settings"))||{notifications:!0,mentions:!0,userJoinLeave:!0}),[Vo,fa]=a.useState(null),[gc,fs]=a.useState(!1),[ms,No]=a.useState(!1),[ps,ma]=a.useState(!1),[pa,Wo]=a.useState(0),[tx,rx]=a.useState(!1),[ox,jr]=a.useState(!1),[nx,Gr]=a.useState(""),[yc,Ho]=a.useState(!1),[ax,qr]=a.useState(null),[sx,xs]=a.useState(null),[ix,hs]=a.useState(null),[gs,cx]=a.useState(!1),[xa,ys]=a.useState(!1),[xo,ct]=a.useState(!1),[jo,vs]=a.useState(null),[ho,Go]=a.useState(null),[vc,Es]=a.useState(!1),[Ec,bs]=a.useState(!1),[bc,_s]=a.useState(!1),[_c,Ss]=a.useState(!1),[Sc,ws]=a.useState(!1),[wc,Cs]=a.useState(!1),[ks,As]=a.useState(null),[Cc,Bs]=a.useState(!1),[kc,Ds]=a.useState(!1),Ts=He(r=>r.typingUsers),Fs=a.useMemo(()=>Ts.filter(r=>r!==te),[Ts,te]);a.useRef(null),a.useRef([]);const We=a.useRef(null),qo=a.useRef(null),ha=a.useRef(null);a.useRef(null);const go=a.useRef(null),ga=a.useRef(null),Rs=a.useRef(null),Wt=a.useRef({}),je=te==="Eastkhan"||te==="PawPaw"||Lt?.role==="admin",Ac=a.useMemo(()=>{const r=le?.find($=>$.id===p?.serverId),E=r?.owner===te||r?.created_by===te,T=kr?.find($=>$.username===te)?.role==="moderator";return{isAdmin:je,isServerOwner:E,isModerator:T,canKick:je||E||T,canBan:je||E,canMute:je||E||T,canWarn:je||E||T,canManageRoles:je||E}},[je,le,p?.serverId,te,kr]),Bc=a.useMemo(()=>{if(!le||le.length===0)return[];if(!rr||rr.length===0)return le;const r=[],E=[];return rr.forEach(T=>{const $=le.find(D=>D.id===T);$&&r.push($)}),le.forEach(T=>{rr.includes(T.id)||E.push(T)}),[...r,...E]},[le,rr]),ya=He(r=>r.onlineUsers),Dc=He(r=>r.messages),va=ku(Dc,Ut);Au(Ce),a.useEffect(()=>{if(se==="finished")return;_e("start");const r=setTimeout(()=>_e("pre-transition"),1500),E=setTimeout(()=>_e("finished"),2200),T=setTimeout(()=>_e("finished"),3e3);return()=>{clearTimeout(r),clearTimeout(E),clearTimeout(T)}},[]),a.useEffect(()=>{const r=new URLSearchParams(window.location.search),E=r.get("verification"),T=r.get("username"),$=r.get("reason"),D=r.get("needs_password");if(E==="success")ie.success(`‚úÖ Email doƒürulandƒ±! Ho≈ügeldin ${T||"kullanƒ±cƒ±"}!`),window.history.replaceState({},document.title,window.location.pathname);else if(E==="failed"){const H=$==="expired"?"‚è∞ Doƒürulama linki s√ºresi dolmu≈ü. Yeni bir link talep edin.":"‚ùå Ge√ßersiz doƒürulama linki.";ie.error(H),window.history.replaceState({},document.title,window.location.pathname)}D==="true"&&(console.log("üîë [Auth] Google user needs to set password"),Ds(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),a.useEffect(()=>{const r=new URLSearchParams(window.location.search),E=r.get("success"),T=r.get("coins"),$=r.get("session_id"),D=r.get("canceled");E==="true"&&T&&((async()=>{try{const Q=localStorage.getItem("access_token"),Ee="https://api.pawscord.com/api";if($){const oe=await(await fetch(`${Ee}/payments/verify/`,{method:"POST",headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"},body:JSON.stringify({session_id:$,coin_amount:parseInt(T)})})).json();oe.success?oe.already_processed?ie.info(`?? ÔøΩdeme zaten islendi! Bakiye: ${oe.balance} coin`):ie.success(`?? ${T} coin hesabina eklendi! Yeni bakiye: ${oe.balance} coin`):ie.error(oe.error||"ÔøΩdeme dogrulama hatasi")}else ie.success(`?? ÔøΩdeme basarili! ${T} coin hesabina eklendi.`)}catch(Q){console.error("Payment verification error:",Q),ie.success(`?? ${T} coin satin alma tamamlandi!`)}})(),window.history.replaceState({},document.title,window.location.pathname)),D==="true"&&(ie.info("? ÔøΩdeme iptal edildi."),window.history.replaceState({},document.title,window.location.pathname))},[]),a.useEffect(()=>{const E=window.location.hash.match(/^#\/join\/([^/?]+)/);if(E){const T=E[1];console.log("üîó [Vanity] Detected vanity path:",T),As(T)}},[]),a.useEffect(()=>(window.showAutoModeration=()=>lo(!0),window.showRaidProtection=()=>Zt(!0),window.showReportSystem=()=>_r(!0),window.showAuditLog=()=>_(!0),window.showUserWarnings=()=>I(!0),()=>{delete window.showAutoModeration,delete window.showRaidProtection,delete window.showReportSystem,delete window.showAuditLog,delete window.showUserWarnings}),[]),a.useEffect(()=>{const r=E=>{xo&&!E.target.closest(".toolbar-menu-container")&&ct(!1)};return document.addEventListener("click",r),()=>document.removeEventListener("click",r)},[xo]),a.useEffect(()=>{const r=()=>{Bs(!0)};return window.addEventListener("openConnectionsPanel",r),()=>window.removeEventListener("openConnectionsPanel",r)},[]),a.useEffect(()=>{ql(),Yl(),Jl(),nd(),setTimeout(()=>{t0()},3e3),"requestIdleCallback"in window&&requestIdleCallback(()=>{Ra()}),i&&d&&M(async()=>{const{pushNotificationManager:r}=await import("./pushNotifications-Bn_5QhhA.js");return{pushNotificationManager:r}},__vite__mapDeps([161,1,2]),import.meta.url).then(({pushNotificationManager:r})=>{r.init(pe,G)}),ir&&M(async()=>{const{initializeDeepLinkHandler:r}=await import("./urlHandlers-BF93MNaR.js");return{initializeDeepLinkHandler:r}},__vite__mapDeps([162,1,2]),import.meta.url).then(({initializeDeepLinkHandler:r})=>{console.log("‚úÖ Deep link handler ready")}),console.log("‚úÖ PWA ve optimizasyonlar aktif!")},[i,d]);const yo=a.useMemo(()=>{if(p.type==="room"){if(le){for(const r of le)if(r.categories)for(const E of r.categories){const T=E.rooms?.find($=>$.slug===p.id);if(T)return String(T.name)}}return String(p.id)}else if(p.type==="dm")return`@ ${String(p.targetUser||"DM")}`;return""},[p,le]),Kr=a.useMemo(()=>!p||!p.id?"":`${p.type}-${p.id}`,[p]),Ko=a.useCallback(()=>{try{const r=localStorage.getItem(ji);if(!r)return{};const E=JSON.parse(r);return E&&typeof E=="object"?E:{}}catch(r){return console.warn("Taslak okunamadƒ±",r),{}}},[]),Tc=a.useCallback(r=>{if(!Kr)return;const E=Ko();E[Kr]=r,localStorage.setItem(ji,JSON.stringify(E))},[Kr,Ko]);a.useEffect(()=>{if(!Kr){Gr(""),jr(!1);return}const E=Ko()[Kr]||"";Gr(E),jr(!!E.trim())},[Kr,Ko]);const Fc=a.useMemo(()=>{if(p.type!=="room"||!le)return"text";for(const r of le)if(r.categories)for(const E of r.categories){const T=E.rooms?.find($=>$.slug===p.id);if(T)return T.channel_type}return"text"},[p,le]),nr=a.useCallback((r="auto")=>{ha.current&&ha.current.scrollIntoView({behavior:r})},[]),Ea=a.useCallback(()=>{const r=ga.current;return r?r.scrollHeight-r.scrollTop-r.clientHeight<160:!0},[]),ba=a.useCallback(()=>{const r=ga.current;if(!r)return;const E=r.scrollHeight-r.scrollTop-r.clientHeight;Ho(E>160)},[]),Rc=Iu(ba,100),mt=a.useCallback(r=>{if(r==="‚ö° Signal Bot")return`${Zr}/static/bot/signal.png`;if(r==="PawPaw AI")return`${Zr}/static/bot/ai.png`;if(!r||!st||st.length===0)return`${Zr}/avatars/cat_1.png`;let E=0;for(let H=0;H<r.length;H++)E=r.charCodeAt(H)+((E<<5)-E);const T=Math.abs(E%st.length),$=st[T];let D;return typeof $=="object"&&$!==null?D=$.original||$.thumbnail||$.url:typeof $=="string"&&(D=$),!D||typeof D!="string"?`${Zr}/avatars/cat_1.png`:D.startsWith("http")||D.startsWith("blob:")?D:(D.startsWith("/")||(D="/"+D),`${Zr}${D}`)},[st]),_t=a.useCallback(r=>{const E=Ce.find(T=>T.username===r);if(E&&E.avatar&&typeof E.avatar=="string"){if(E.avatar.startsWith("http://")||E.avatar.startsWith("https://")||E.avatar.startsWith("blob:"))return E.avatar;let T=E.avatar;return T.startsWith("/")||(T="/"+T),`${Zr}${T}`}return mt(r)},[Ce,mt]),G=a.useCallback(async(r,E={})=>{const T=E.headers||{};t&&(T.Authorization=`Bearer ${t}`),E.body instanceof FormData||(T["Content-Type"]="application/json");try{const D=r.includes("upload")||E.body instanceof FormData?3e5:3e4,H=new AbortController,Q=setTimeout(()=>H.abort(),D),Ee=await fetch(r,{...E,headers:T,signal:H.signal});if(clearTimeout(Q),Ee.status===401)throw r.includes("/auth/")||r.includes("/login")?(console.warn("‚ö†Ô∏è [Auth] 401 on auth endpoint, logging out"),l()):console.warn("‚ö†Ô∏è [Auth] 401 error on:",r,"- NOT logging out"),new Error("Unauthorized");return Ee}catch($){throw $.name==="AbortError"?(console.error("‚è±Ô∏è [Fetch] Request timed out:",r),new Error("ƒ∞stek zaman a≈üƒ±mƒ±na uƒüradƒ±")):(console.error("Fetch error:",$),$)}},[t,l]);Ru(),a.useEffect(()=>{const r=window.location.hash,E=r.includes("?")?r.split("?")[1]:"",$=new URLSearchParams(E).get("join_server");if($&&i&&le&&le.length>0){console.log("üîó [Vanity URL] Found join_server parameter:",$);const D=le.find(H=>H.id===parseInt($));if(D){if(console.log(`üîó Vanity URL: Redirecting to server ${D.name}`),D.categories&&D.categories.length>0){const H=D.categories[0];if(H.rooms&&H.rooms.length>0){const Q=H.rooms[0];ce({type:"room",id:Q.slug})}}window.history.replaceState({},document.title,"/#/")}else console.log(`üîó Vanity URL: Server ${$} not found, showing invite modal`),(async()=>{try{const Q=await G(`${pe}/servers/${$}/join/`,{method:"POST"});if(Q.ok)ie.success("Sunucuya katƒ±ldƒ±nƒ±z!"),window.location.reload();else{const Ee=await Q.json();ie.error(Ee.error||"Sunucuya katƒ±lƒ±namadƒ±")}}catch(Q){console.error("Join server error:",Q),ie.error("Sunucuya katƒ±lƒ±rken hata olu≈ütu")}finally{window.history.replaceState({},document.title,"/#/")}})()}},[i,le,G]);const Ps=a.useCallback(async r=>{try{await G(`${pe}/user/server-order/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_order:r})}),console.log("üíæ Server order saved:",r)}catch(E){console.error("Server order save error:",E)}},[G]),Pc=(r,E,T)=>{r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("serverId",E.toString()),r.dataTransfer.setData("sourceIndex",T.toString());const $=r.currentTarget.cloneNode(!0);$.style.position="absolute",$.style.top="-9999px",$.style.opacity="0.8",$.style.transform="rotate(5deg)",$.style.pointerEvents="none",document.body.appendChild($),r.dataTransfer.setDragImage($,24,24),setTimeout(()=>{document.body.contains($)&&document.body.removeChild($)},0),r.currentTarget.style.opacity="0.4"},Ic=r=>{r.preventDefault(),r.dataTransfer.dropEffect="move"},Lc=r=>{r.currentTarget.style.opacity="1"},$c=a.useCallback((r,E)=>{r.preventDefault(),parseInt(r.dataTransfer.getData("serverId"));const T=parseInt(r.dataTransfer.getData("sourceIndex"));if(console.log("üìù DROP: sourceIndex:",T,"‚Üí targetIndex:",E),T===E){console.log("‚ùå Aynƒ± yere bƒ±rakƒ±lƒ±yor (sourceIndex === targetIndex), i≈ülem iptal");return}let $=rr.length>0?[...rr]:le.map(Q=>Q.id);console.log("üìù Mevcut sƒ±ralama:",$),console.log("üîÑ Kaynak index:",T,"‚Üí Hedef index:",E);const[D]=$.splice(T,1),H=T<E?E-1:E;console.log("üéØ Adjusted target index:",H),$.splice(H,0,D),console.log("‚úÖ Yeni sƒ±ralama:",$),os($),Ps($)},[rr,le,Ps]),Is=r=>{const E=document.getElementById(`message-${r}`);E&&E.scrollIntoView({behavior:"smooth",block:"center"})},Oc=async()=>{if(window.confirm("Bu odadaki t√ºm mesajlarƒ± silmek istediƒüine emin misin?"))try{(await G(`${pe}/rooms/${p.id}/clear/`,{method:"POST"})).ok&&we([])}catch(r){console.error(r)}},zc=async()=>{ua(!0),ds(!0),Uo("");try{const r=await G(`${pe}/rooms/${p.id}/summarize/`,{method:"POST"}),E=await r.json();r.ok?Uo(E.summary):Uo("Hata: "+E.error)}catch{Uo("Baƒülantƒ± hatasƒ±.")}ds(!1)},_a=r=>{if(console.log("üì§ [DEBUG] sendMessage called with:",r),console.log("üì§ [DEBUG] ws.current:",We.current),console.log("üì§ [DEBUG] ws.current.readyState:",We.current?.readyState),console.log("üì§ [DEBUG] activeChat:",p),!r)return;const E=r.trim();if(!E)return;if(E==="/tema"){br(!0),qr(null),jr(!1),Gr(""),go.current?.clear?.();return}if(E==="/sablon"){Fe(!0),qr(null),jr(!1),Gr(""),go.current?.clear?.();return}if(E.startsWith("/duyuru ")){const oe=E.slice(8).trim();if(oe){const Be={type:p.type==="room"?"chat_message":"dm_message",message:`[ANNOUNCE] ${oe}`,username:te,temp_id:an(),...p.type==="room"?{room:p.id}:{conversation:p.id}};We.current?.send(JSON.stringify(Be)),Wr({message:oe,type:"info",author:te}),qr(null),jr(!1),Gr(""),go.current?.clear?.();return}}qr(null),jr(!1),Gr(""),Tc("");const T=p.type==="room"?`room-${p.id}`:`dm-${p.id}`,$=X[T];let D=E;p.type==="dm"&&$&&(D=wu(E,$));const H={type:p.type==="room"?"chat_message":"dm_message",message:D,username:te,temp_id:an(),...p.type==="room"?{room:p.id}:{conversation:p.id}},Q=JSON.stringify(H),Ee=async()=>{let ze=0;for(;We.current&&We.current.readyState===WebSocket.CONNECTING&&ze<3e3;)await new Promise(ot=>setTimeout(ot,100)),ze+=100;if(We.current&&We.current.readyState===WebSocket.OPEN)try{return We.current.send(Q),!0}catch(ot){return console.error("WebSocket send error:",ot),!1}return!1},Ae=async()=>{try{const oe=p.type==="dm"?`${pe}/messages/send_dm/`:`${pe}/messages/send/`,Be=p.type==="dm"?{conversation_id:p.id,content:D}:{room:p.id,content:D};return(await G(oe,{method:"POST",body:JSON.stringify(Be)})).ok}catch(oe){return console.error("HTTP fallback error:",oe),!1}};(async()=>await Ee()||await Ae())(),we(oe=>{const Be={...H,content:D,timestamp:new Date().toISOString(),id:H.temp_id,avatar:Lt?.avatar||mt(te)},ze=[...oe,Be],ot=p.type==="room"?`room-${p.id}`:`dm-${p.id}`;return Wt.current[ot]&&(Wt.current[ot].messages=ze),ze}),go.current?.clear?.(),nr("smooth")},Mc=r=>{const E={type:p.type==="room"?"chat_message":"dm_message",message:"",username:te,temp_id:an(),snippet_data:r,...p.type==="room"?{room:p.id}:{conversation:p.id}};We.current?.send(JSON.stringify(E)),we(T=>[...T,{...E,timestamp:new Date().toISOString(),id:E.temp_id,avatar:Lt?.avatar||mt(te)}]),fr(!1)},Sa=a.useCallback(()=>{if(!p.id||p.type==="welcome"||p.type==="friends"||!te)return;if(We.current&&We.current.readyState===WebSocket.OPEN){const $=We.current.url,D=p.type==="room"?`/ws/chat/${p.id}/`:`/ws/dm/${p.id}/`;if($.includes(D)){console.log("‚è≠Ô∏è [WebSocket] Already connected to this chat, skipping reconnect");return}}We.current&&(console.log("üîå [WebSocket] Closing existing connection before new one"),We.current.close(1e3,"change_room"));let r="";const E=`?username=${encodeURIComponent(te)}&token=${t}`;if(p.type==="room"?r=`${on}://${nn}/ws/chat/${p.id}/${E}`:p.type==="dm"&&(r=`${on}://${nn}/ws/dm/${p.id}/${E}`),!r){console.log("‚è≠Ô∏è [WebSocket] Skipping - activeChat.type is not room/dm:",p.type);return}console.log("üîå [WebSocket] Connecting to:",r.split("?")[0]);const T=new WebSocket(r);We.current=T,T.onopen=()=>{console.log("‚úÖ [WebSocket] Connected successfully"),gr(!0)},T.onmessage=$=>{const D=JSON.parse($.data);if(D.type==="chat"||D.type==="dm"||D.type==="chat_message_handler"){console.log("üì® [WebSocket] Message data:",{type:D.type,id:D.id,temp_id:D.temp_id,room:D.room,conversation:D.conversation});const H=Q=>Q.room?`room-${Q.room}`:Q.conversation?`dm-${Q.conversation}`:(console.warn("‚ö†Ô∏è [WebSocket] No room/conversation in message, using activeChat fallback"),p.type==="room"?`room-${p.id}`:`dm-${p.id}`);we(Q=>{if(D.temp_id){const oe=Q.findIndex(Be=>Be.temp_id===D.temp_id);if(oe!==-1){console.log("üîÑ [WebSocket] Replacing temp message with real message:",D.temp_id,"‚Üí",D.id);const Be=[...Q];Be[oe]=D;const ze=H(D);return Wt.current[ze]&&(Wt.current[ze].messages=Be),Be}}if(D.id&&Q.some(oe=>oe.id===D.id))return console.log("‚è≠Ô∏è [WebSocket] Duplicate message (by ID) skipped:",D.id),Q;console.log("üì® [WebSocket] New message received:",D);const Ee=[...Q,D],Ae=H(D);return Wt.current[Ae]&&(Wt.current[Ae].messages=Ee),Ee}),me(D.username,!1),Ea()?nr("smooth"):Ho(!0)}else D.type==="typing_status_update"?D.username!==te&&me(D.username,D.is_typing):D.type==="chat_cleared"&&we([]);if(D.message&&D.message.startsWith("[ANNOUNCE] ")){const H=D.message.replace("[ANNOUNCE] ","");Wr({message:H,type:"info",author:D.username})}},T.onerror=$=>{console.error("‚ùå [WebSocket] Connection error:",$)},T.onclose=$=>{console.log("üîå [WebSocket] Connection closed:",$.code,$.reason),gr(!1)}},[p.id,p.type,te,t]);a.useEffect(()=>{to.isNativePlatform()&&(Hl.initialize({clientId:jm,scopes:["profile","email"],grantOfflineAccess:!0}),pr("max(35px, env(safe-area-inset-top))"))},[]),a.useEffect(()=>{i&&!Hr&&(async()=>{try{const[E,T,$,D,H]=await Promise.all([G(Nm).then(oe=>oe.json()),G(Da).then(oe=>oe.json()),G(`${Mm}?username=${encodeURIComponent(te)}`).then(oe=>oe.json()),G(`${pe}/friends/list/`).then(oe=>oe.json()),G(`${pe}/users/me/`).then(oe=>oe.json())]);Tt(E);const Q={username:H?.username||te,email:H?.email||"",avatar:H?.avatar||null,status_message:H?.status_message||"",friend_code:H?.friend_code||"0000",social_links:H?.social_links||{},coins:H?.coins||0,xp:H?.xp||0,level:H?.level||1,status:"online",role:H?.role||"member",is_whitelisted:H?.is_whitelisted||!1};Mo(Q),console.log("üî• [DEBUG] currentUserProfile with is_whitelisted:",Q);const Ae=(D.friends||[]).map(oe=>{const Be=oe.sender_username===te,ze=Be?oe.receiver_username:oe.sender_username,ot=Be?oe.receiver_avatar:oe.sender_avatar,ar=Be?oe.receiver_status:oe.sender_status,Xe=Be?oe.receiver_activity:oe.sender_activity;return ze?{username:ze,avatar:ot,status:ar||"offline",display_name:ze,current_activity:Xe||{},status_message:"",last_seen:oe.created_at,role:"friend",friend_code:""}:null}).filter(Boolean).filter(oe=>oe.username!==Q.username);Nt(Ae),Ve(T),Ue($),da(Ae),dc(!0),M(async()=>{const{prefetchUserAvatars:oe}=await import("./imageCaching-CdJipAoH.js");return{prefetchUserAvatars:oe}},__vite__mapDeps([19,1,2]),import.meta.url).then(({prefetchUserAvatars:oe})=>{oe(Ae)})}catch(E){console.error("Init Data Error",E),Et("Veriler y√ºklenemedi.")}})()},[i,Hr,G,te]),a.useEffect(()=>{te&&(async()=>{try{const E=await G(`${pe}/user/server-order/`);if(E.ok){const T=await E.json();os(T.server_order||[]),console.log("üéØ Server order loaded:",T.server_order)}}catch(E){console.error("Server order fetch error:",E)}})()},[te,G]),a.useEffect(()=>{const r=async()=>{if(!p.id||p.type!=="room"){Wr(null);return}try{const E=await G(`${pe}/stickies/list/?room=${p.id}`);if(E.ok){const T=await E.json();T&&T.length>0?Wr({message:T[0].content,type:"info",author:T[0].creator}):Wr(null)}}catch(E){console.error("Sticky messages fetch error:",E)}};i&&p.id&&r()},[p.id,p.type,i,G]);const Yo=a.useCallback(async r=>{if(!r){or([]);return}try{console.log(`üîç [Server Members] Fetching members for server ${r}...`);const E=await G(`${pe}/servers/${r}/members/`);if(E.ok){const T=await E.json();console.log(`üë• [Server Members] Fetched ${T.length} members for server ${r}:`,T),or(T)}else{const T=await E.text();console.error("‚ùå Server members fetch failed:",E.status,T),or([])}}catch(E){console.error("‚ùå Server members fetch error:",E),or([])}},[G]),Uc=a.useCallback(r=>{console.log("üñ±Ô∏è [Server Select] Server clicked:",r.name,r.id),mc(r),Yo(r.id),ce("server",r.id,null)},[Yo,ce]);a.useEffect(()=>{const r=async()=>{if(!p.id||p.type!=="room"){p.type!=="server"&&or([]);return}try{let E=null;for(const T of le){if(!T.categories||!Array.isArray(T.categories)){console.warn("‚ö†Ô∏è Server has no categories array:",T);continue}for(const $ of T.categories)if(!(!$.rooms||!Array.isArray($.rooms))){for(const D of $.rooms)if(D.slug===p.id){E=T.id;break}if(E)break}if(E)break}if(!E){console.warn("üî¥ Server ID bulunamadƒ± for room:",p.id),or([]);return}Yo(E)}catch(E){console.error("‚ùå Server members fetch error:",E),or([])}};i&&p.id&&p.type==="room"?r():p.type!=="server"&&or([])},[p.id,p.type,i,Yo,le]),a.useEffect(()=>{const r=async()=>{try{const T=await fetch(`${pe}/maintenance/status/`);if(T.ok){const $=await T.json();$.active?fa({message:$.message||"System maintenance in progress",endTime:$.end_time,level:$.level||"info"}):fa(null)}}catch(T){console.error("Maintenance check error:",T)}};r();const E=setInterval(r,300*1e3);return()=>clearInterval(E)},[]),a.useEffect(()=>{const r=($,D)=>{try{const H=$.split(".").map(Number),Q=D.split(".").map(Number);return H[0]>Q[0]?!0:H[0]<Q[0]?!1:H[1]>Q[1]?!0:H[1]<Q[1]?!1:H[2]>Q[2]}catch(H){return console.error("‚ùå Version kar≈üƒ±la≈ütƒ±rma hatasƒ±:",H),!1}},E=async()=>{const $=window.location.hostname==="localhost"&&window.location.port==="3000";if(!Qr&&!ir&&!$){console.log("‚è≠Ô∏è Version check atlandƒ± (web browser)");return}try{console.log("üîç Version kontrol√º yapƒ±lƒ±yor...",{isElectron:Qr,isNative:ir,isDebugMode:$,hostname:window.location.hostname});let D="1.1.203";if(window.electron?.getAppVersion)try{D=await window.electron.getAppVersion(),console.log("üñ•Ô∏è Electron version:",D)}catch(oe){console.warn("‚ö†Ô∏è Electron version alƒ±namadƒ±:",oe)}console.log("üì¶ Mevcut versiyon:",D);const H=await fetch("https://media.pawscord.com/builds/version.json");if(!H.ok){console.warn("‚ö†Ô∏è version.json alƒ±namadƒ±:",H.status);return}const Q=await H.json(),Ee=Q.latest_version;console.log("üåê Son versiyon:",Ee),console.log("üìä Kar≈üƒ±la≈ütƒ±rma:",{current:D,latest:Ee});const Ae=r(Ee,D);if(console.log("üîç ƒ∞s newer?",Ae),Ee&&Ae){if(console.log("‚úÖ YENƒ∞ G√úNCELLEME MEVCUT!",{current:D,latest:Ee}),as(!0),window.require){const{ipcRenderer:oe}=window.require("electron");oe.send("update-available",{currentVersion:D,latestVersion:Ee,downloadUrl:Q.download_url_windows})}}else console.log("‚ÑπÔ∏è Versiyon g√ºncel veya eski:",D,">=",Ee),as(!1)}catch(D){console.error("‚ùå Version check hatasƒ±:",D)}};E();const T=setInterval(E,1800*1e3);return()=>clearInterval(T)},[]),a.useEffect(()=>{if(!Hr||!p.id||p.type==="friends"||p.type==="welcome")return;console.log("üîÑ [DEBUG activeChat] Chat deƒüi≈üti:",p);let r=!1;const E=p.type==="room"?`room-${p.id}`:`dm-${p.id}`,T=Wt.current[E];return T?.messages?.length>0?(console.log("üì¶ [Cache] Restoring cached messages:",T.messages.length,"(skipping API call)"),we(T.messages),zo(!!T.hasMore),la(T.offset||0),setTimeout(()=>{r||nr("auto")},50),r||Sa()):(console.log("üåê [Fetch] No cache, fetching from server..."),la(0),zo(!0),r||Sa(),setTimeout(()=>{r||$s(!0,0)},50)),()=>{r=!0,console.log("üßπ [Cleanup] activeChat useEffect cleanup triggered")}},[p.id,p.type,Hr,Sa]),a.useEffect(()=>{be?.type==="server_structure_update"&&(console.log("üîÑ Real-time Update: Refetching Server List..."),(async()=>{try{const E=await G(Da);if(E.ok){const T=await E.json();Ve(T)}}catch(E){console.error("Real-time Update Failed:",E)}})())},[be,G]),a.useEffect(()=>{if(!i||!te)return;const r={current:null},E=async()=>{try{const $=await G(`${pe}/users/rich_presence/${te}/`);if($.ok){const D=await $.json();let H={};const Q=oe=>{if(!oe)return!0;const Be=new Date(oe);return(new Date-Be)/1e3/60<2};D.spotify&&Q(D.spotify.timestamp)&&(H.spotify={type:"listening",name:D.spotify.track,details:D.spotify.artist,album_art:D.spotify.album_art}),D.steam&&Q(D.steam.timestamp)&&(H.steam={type:"playing",name:D.steam.game,state:D.steam.state}),Object.keys(H).length===0&&(H=null);const Ee=JSON.stringify(r.current),Ae=JSON.stringify(H);Ee!==Ae&&(r.current=H,qo.current&&qo.current.readyState===WebSocket.OPEN&&qo.current.send(JSON.stringify({type:"update_activity",activity:H})))}}catch{}},T=setInterval(E,3e4);return E(),()=>clearInterval(T)},[i,te,G]),a.useEffect(()=>{Ea()&&(nr("smooth"),Ho(!1))},[J,Ea,nr]),a.useEffect(()=>{ba()},[p,ba]),a.useEffect(()=>{const r=E=>{(E.ctrlKey||E.metaKey)&&E.key.toLowerCase()==="k"&&(E.preventDefault(),Rs.current?.focus())};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]),a.useEffect(()=>{if(!i||!Hr)return;const r=sd();if(ts(r),!t){console.warn("‚ö†Ô∏è [StatusWS] No token available, skipping WebSocket connection");return}const E=`${on}://${nn}/ws/status/?username=${encodeURIComponent(te)}&token=${t}`;console.log("üåê [StatusWS] Connecting to:",E.replace(t,"TOKEN_HIDDEN"));let T;try{T=new WebSocket(E)}catch($){console.error("‚ùå [StatusWS] WebSocket creation failed:",$);return}return qo.current=T,T.onopen=()=>{console.log("‚úÖ [StatusWS] Connected successfully")},T.onerror=$=>{console.error("‚ùå [StatusWS] WebSocket error:",$)},T.onclose=$=>{console.log(`üîå [StatusWS] Connection closed: code=${$.code}, reason=${$.reason||"none"}`),$.code!==1e3&&$.code!==1001&&console.log("üîÑ [StatusWS] Will attempt reconnect in 5s...")},T.onmessage=$=>{try{const D=JSON.parse($.data);if(D.type==="online_user_list_update"){const H=Array.isArray(D.users)?D.users.map(Q=>typeof Q=="string"?Q:Q.username||Q):[];console.log("üë• [Online Users] Updated:",H),Ct(H)}if(D.type==="voice_users_update"&&(console.log("üîä [GlobalWS] Received voice_users_update:",D.voice_users),kt(D.voice_users)),D.type==="user_activity_update"&&Nt(H=>H.map(Q=>Q.username===D.username?{...Q,current_activity:D.activity}:Q)),D.type==="user_profile_update"&&D.user_data){const H=D.user_data;H.username===te&&(console.log("üë§ [Profile Update] Updating currentUserProfile:",H),Mo(Q=>({...Q,avatar:H.avatar,status_message:H.status_message,social_links:H.social_links,coins:H.coins,xp:H.xp,level:H.level,status:H.status,role:H.role}))),Nt(Q=>Q.map(Ee=>Ee.username===H.username?{...Ee,...H}:Ee))}if(D.type==="global_message_notification"&&D.username!==te){const H=D.room_slug?`room-${D.room_slug}`:`dm-${D.conversation_id}`,Q=p.type==="room"?`room-${p.id}`:`dm-${p.id}`;H!==Q&&dr(H)}D.type==="server_structure_update"&&(console.log("Server structure update received, refreshing..."),G(Da).then(H=>H.json()).then(H=>Ve(H)).catch(console.error))}catch(D){console.error("‚ùå [StatusWS] Failed to parse message:",D)}},()=>{try{T.close(1e3,"Component unmount")}catch{}}},[i,Hr,te,t,p]),a.useEffect(()=>{B&&S&&(console.log(`üîä [Voice] Switched to voice chat panel: ${S}`),ce("voice",S))},[B,S]);const Ls=r=>{ce("room",r),ye&&Ne(!1)},vo=r=>{G(Um,{method:"POST",body:JSON.stringify({target_username:r})}).then(E=>E.json()).then(E=>{ce("dm",E.conversation_id,r),ye&&Ne(!1)})},Vc=a.useCallback(r=>{r&&(window.location.hash=r.startsWith("#/")?r:`#${r.startsWith("/")?r:`/${r}`}`,ye&&vt(!1))},[ye]),Nc=a.useCallback(()=>{us(r=>{const E={...r,notifications:!r.notifications};return localStorage.setItem("chat_sound_settings",JSON.stringify(E)),E})},[]),Wc=a.useCallback(async()=>{if(!p?.id)return;const r=`${window.location.origin}/#/${p.type==="dm"?`dm/${p.id}`:`room/${p.id}`}`;try{await navigator.clipboard.writeText(r),Te("Link kopyalandƒ±"),setTimeout(()=>Te(""),1500)}catch(E){console.error("Link kopyalanamadƒ±",E),ie.error("Link kopyalanamadƒ±")}},[p]),$s=async(r=!0,E=0)=>{if(!p.id)return;if(p.type==="voice"){console.log("[Voice] Skipping message history for voice chat"),we([]),zo(!1);return}console.log("üîÑ [fetchMessageHistory] Starting fetch:",{isInitial:r,offset:E,activeChat:p}),Oo(!0);const T=p.type==="room"?Om:zm,$=p.type==="room"?`room-${p.id}`:`dm-${p.id}`;try{const D=await G(`${T}${p.id}/?limit=50&offset=${E}`);if(D.ok){const H=await D.json(),Q=H.results||[],Ee=Q.filter(Xe=>!Xe||typeof Xe!="object"?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Invalid message object:",Xe),!1):!Xe.id&&!Xe.temp_id?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Message without ID:",Xe),!1):!0);Ee.length<Q.length&&console.warn(`‚ö†Ô∏è [fetchMessageHistory] Filtered out ${Q.length-Ee.length} invalid messages`);const Ae=Ee.reverse();console.log("‚úÖ [fetchMessageHistory] Fetched messages:",Ae.length);let oe=Ae;r?(console.log("üìù [fetchMessageHistory] Setting messages (INITIAL):",Ae.length),we(Ae),setTimeout(()=>nr("auto"),100)):we(Xe=>(console.log("üìù [fetchMessageHistory] Appending to existing:",Xe.length,"+",Ae.length),oe=[...Ae,...Xe],oe));const Be=r?Ae.length:E+Ae.length,ze=!!H.next;zo(ze),r||la(Be);const ot=Wt.current[$]?.messages||[],ar=r?Ae:[...Ae,...ot];Wt.current[$]={messages:oe||ar,offset:Be,hasMore:ze},console.log("üíæ [fetchMessageHistory] Cached:",$,"with",(oe||ar).length,"messages")}}catch(D){console.error("‚ùå [fetchMessageHistory] Error:",D)}Oo(!1)},Hc=async(r,E)=>{try{console.log("üîë [Auth] Login attempt:",{username:r,url:Wi});const T=await fetch(Wi,{method:"POST",body:JSON.stringify({username:r,password:E}),headers:{"Content-Type":"application/json"}});console.log("üîë [Auth] Response status:",T.status);const $=await T.json();if(T.ok)console.log("‚úÖ [Auth] Login successful"),s($.access,$.refresh);else{if(console.error("‚ùå [Auth] Login failed:",$),T.status===401&&$.requires_2fa&&$.temp_token){console.log("üîê [Auth] 2FA required, redirecting..."),window.location.href=`/#/2fa-login?temp_token=${encodeURIComponent($.temp_token)}`;return}T.status===401?Et("Kullanƒ±cƒ± adƒ± veya ≈üifre hatalƒ±"):T.status===400?Et($.detail||$.error||"Ge√ßersiz giri≈ü bilgileri"):T.status>=500?Et("Sunucu hatasƒ±. L√ºtfen daha sonra tekrar deneyin."):Et($.detail||$.error||"Giri≈ü ba≈üarƒ±sƒ±z")}}catch(T){console.error("‚ùå [Auth] Network error:",T),Et("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin.")}},jc=async(r,E,T)=>{try{console.log("üìù [Auth] Register attempt:",{username:r,email:E,url:Hi});const $=await fetch(Hi,{method:"POST",body:JSON.stringify({username:r,email:E,password:T}),headers:{"Content-Type":"application/json"}});if(console.log("üìù [Auth] Response status:",$.status),$.status===201)return console.log("‚úÖ [Auth] Registration successful"),!0;const D=await $.json();console.error("‚ùå [Auth] Registration failed:",D);let H="";return D.username?H=D.username.join(" "):D.email?H=D.email.join(" "):D.password?H=D.password.join(" "):D.detail?H=D.detail:H=Object.values(D).flat().join(" "),Et(H||"Kayƒ±t i≈ülemi ba≈üarƒ±sƒ±z"),!1}catch($){return console.error("‚ùå [Auth] Network error:",$),Et("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin."),!1}},Jo=a.useCallback(async(r,E=!1,T=0,$=null)=>{ma(!0),Wo(0);const D=$||p,H=an();try{const Q=await Gm(r),Ee=r.type||"application/octet-stream",Ae=10*1024*1024,oe=5,Be=Math.ceil(r.size/Ae);console.log("üöÄ [R2 Multipart] Starting upload:",{fileName:r.name,fileSize:(r.size/(1024*1024)).toFixed(2)+" MB",totalParts:Be,parallelUploads:oe});const ot=await(await G(`${pe}/upload/multipart/init/`,{method:"POST",body:JSON.stringify({file_name:r.name,file_size:r.size,content_type:Ee,file_hash:Q})})).json();if(ot.file_exists){console.log("‚úÖ [R2] File already exists, skipping upload"),ie.success("Dosya zaten y√ºkl√º!"),ma(!1),Wo(100);return}const{upload_id:ar,key:Xe}=ot;console.log(`üì¶ [R2] Upload ID: ${ar.substring(0,20)}..., Key: ${Xe}`);const Qo=[];let Ms=0;const el=async Ie=>{const pt=(Ie-1)*Ae,sr=Math.min(pt+Ae,r.size),Yr=r.slice(pt,sr);console.log(`üì§ [R2] Part ${Ie}/${Be} uploading...`);const Eo=new FormData;Eo.append("upload_id",ar),Eo.append("key",Xe),Eo.append("part_number",Ie.toString()),Eo.append("chunk",Yr,`part_${Ie}`);const en=await G(`${pe}/upload/multipart/upload-part/`,{method:"POST",body:Eo,headers:{}});if(!en.ok){const rl=await en.text();throw new Error(`Part ${Ie} upload failed: ${en.status} - ${rl}`)}const{etag:Us,part_number:tl}=await en.json();Ms++;const Vs=Math.round(Ms/Be*95);return Wo(Vs),console.log(`‚úÖ [R2] Part ${Ie}/${Be} complete (${Vs}%), ETag: ${Us}`),{ETag:Us,PartNumber:tl}};for(let Ie=0;Ie<Be;Ie+=oe){const pt=[];for(let Yr=0;Yr<oe&&Ie+Yr<Be;Yr++)pt.push(el(Ie+Yr+1));const sr=await Promise.all(pt);Qo.push(...sr)}Qo.sort((Ie,pt)=>Ie.PartNumber-pt.PartNumber),console.log("üìã [R2] All parts uploaded, completing...",Qo);const Ca=await G(`${pe}/upload/multipart/complete/`,{method:"POST",body:JSON.stringify({upload_id:ar,key:Xe,parts:Qo,file_name:r.name,file_hash:Q,room_slug:D.type==="room"?D.id:null,conversation_id:D.type==="dm"?D.id:null,temp_id:H,is_voice_message:E?"true":"false",duration:T.toString()})});if(!Ca.ok){const Ie=await Ca.text();throw new Error(`Complete failed: ${Ie}`)}const Ar=await Ca.json();Wo(100),console.log("‚úÖ [R2 Multipart] Upload complete!",Ar),D.id===p.id&&(we(Ie=>{if(Ar.temp_id){const pt=Ie.findIndex(sr=>sr.temp_id===Ar.temp_id);if(pt!==-1){const sr=[...Ie];return sr[pt]=Ar,sr}}return Ar.id&&Ie.some(pt=>pt.id===Ar.id)?Ie:[...Ie,Ar]}),nr("smooth"))}catch(Q){console.error("‚ùå [R2 Multipart] Error:",Q),ie.error(`Y√ºkleme hatasƒ±: ${Q.message}`)}ma(!1)},[p,te,G]),Gc=r=>{r.preventDefault(),r.stopPropagation(),No(!1),r.dataTransfer.files&&r.dataTransfer.files.length>0&&Jo(r.dataTransfer.files[0])},qc=(r,E)=>{if(r.preventDefault(),r.stopPropagation(),To(null),r.dataTransfer.files&&r.dataTransfer.files.length>0){const T=r.dataTransfer.files[0];if(E.type==="dm"){const $=gt.find(D=>D.id===E.id);if($){const D=$.participants.find(H=>H.username!==te);D&&(vo(D.username),setTimeout(()=>{Jo(T,!1,0,E)},300))}}else E.type==="room"&&roomsWithCategories.find(D=>D.room_slug===E.id)&&(handleRoomClick(E.id),setTimeout(()=>{Jo(T,!1,0,E)},300))}},Kc=async r=>{if(r.preventDefault(),!p.id||!Ut.trim()){Ut.trim()||$s(!0,0);return}Oo(!0);try{let E=`${pe}/messages/search/?q=${encodeURIComponent(Ut)}`;p.type==="room"?E+=`&room=${p.id}`:E+=`&dm=${p.id}`;const T=await G(E);if(T.ok){const $=await T.json();we($.results||$)}}catch(E){console.error(E)}Oo(!1)},Os=async r=>{if(window.confirm("Bu mesajƒ± silmek istediƒüine emin misin?"))try{(await G(`${pe}/messages/${r}/delete/`,{method:"DELETE"})).ok&&we(T=>T.filter($=>$.id!==r))}catch(E){console.error(E)}},Yc=async r=>{if(window.confirm("Bu sohbeti listenizden gizlemek istiyor musunuz?"))try{(await G(`${pe}/conversations/${r}/hide/`,{method:"POST"})).ok&&(Ue(T=>T.filter($=>$.id!==r)),p.type==="dm"&&p.id===r&&ce("welcome","welcome"))}catch(E){console.error(E)}},Jc=async r=>{if(window.confirm(`‚ö†Ô∏è ADMƒ∞N: Bu konu≈ümayƒ± HER ƒ∞Kƒ∞ TARAFTAN KALICI OLARAK silmek istediƒüinize emin misiniz?

Bu i≈ülem GERƒ∞ ALINAMAZ!`))try{const E=await G(`${pe}/conversations/${r}/admin-delete/`,{method:"DELETE"});if(E.ok){const T=await E.json();ie.success(`‚úÖ ${T.deleted_messages} mesaj silindi. Katƒ±lƒ±mcƒ±lar: ${T.participants.join(", ")}`),Ue($=>$.filter(D=>D.id!==r)),p.type==="dm"&&p.id===r&&ce("welcome","welcome")}else{const T=await E.json();ie.error(`‚ùå Hata: ${T.error||"Silme i≈ülemi ba≈üarƒ±sƒ±z"}`)}}catch(E){console.error(E),ie.error("‚ùå Sunucuyla baƒülantƒ± hatasƒ±")}},Xc=a.useCallback(()=>{ce("welcome","welcome",null),ye&&Ne(!1)},[ye]),Zc=a.useCallback(async(r,E,T)=>{switch(r){case"profile":const $=Ce.find(D=>D.username===E.username);$&&Rt($);break;case"message":vo(E.username);break;case"volume":break;case"move":if(je&&T&&S)try{(await G(`${pe}/voice/move_user/`,{method:"POST",body:JSON.stringify({username:E.username,from_channel:S,to_channel:T})})).ok&&console.log(`‚úÖ ${E.username} moved to ${T}`)}catch(D){console.error("Move user error:",D)}break;case"kick":if(je&&window.confirm(`${E.username} kullanƒ±cƒ±sƒ±nƒ± kanaldan atmak istediƒüine emin misin?`))try{(await G(`${pe}/voice/kick_user/`,{method:"POST",body:JSON.stringify({username:E.username,room:S})})).ok&&console.log(`‚úÖ ${E.username} kicked from voice`)}catch(D){console.error("Kick user error:",D)}break;case"server_mute":if(je)try{(await G(`${pe}/voice/server_mute/`,{method:"POST",body:JSON.stringify({username:E.username,room:S})})).ok&&console.log(`‚úÖ ${E.username} server muted`)}catch(D){console.error("Server mute error:",D)}break;case"add_friend":try{const D=await G(`${pe}/friends/send/`,{method:"POST",body:JSON.stringify({username:E.username})});if(D.ok)Te(`‚úÖ ${E.username} kullanƒ±cƒ±sƒ±na arkada≈ülƒ±k isteƒüi g√∂nderildi!`),setTimeout(()=>Te(""),3e3);else{const H=await D.json();Te(`‚ùå ${H.error||"ƒ∞stek g√∂nderilemedi"}`),setTimeout(()=>Te(""),3e3)}}catch(D){console.error("Add friend error:",D),Te("‚ùå Arkada≈ü ekleme hatasƒ±"),setTimeout(()=>Te(""),3e3)}break;case"remove_friend":if(window.confirm(`${E.username} ile arkada≈ülƒ±ƒüƒ± sonlandƒ±rmak istediƒüinize emin misiniz?`))try{const D=Cr.find(H=>H.sender_username===E.username||H.receiver_username===E.username);if(D&&(await G(`${pe}/friends/remove/${D.id}/`,{method:"DELETE"})).ok){Te(`‚úÖ ${E.username} ile arkada≈ülƒ±k sonlandƒ±rƒ±ldƒ±`),setTimeout(()=>Te(""),3e3);const Q=await G(`${pe}/friends/list/`);if(Q.ok){const Ee=await Q.json();da(Ee.friends||[])}}}catch(D){console.error("Remove friend error:",D),Te("‚ùå Arkada≈ülƒ±k sonlandƒ±rma hatasƒ±"),setTimeout(()=>Te(""),3e3)}break;case"invite_to_server":Go({username:E.username});break;case"mute_user":try{const D=await G(`${pe}/users/${E.username}/mute/`,{method:"POST"});if(D.ok)ie.success(`üîá ${E.username} sessize alƒ±ndƒ±`);else{const H=await D.json();ie.error(`‚ùå ${H.error||"Sessize alma ba≈üarƒ±sƒ±z"}`)}}catch(D){console.error("Mute user error:",D),ie.error("‚ùå Sessize alma hatasƒ±")}break;case"block_user":if(window.confirm(`${E.username} kullanƒ±cƒ±sƒ±nƒ± engellemek istediƒüinize emin misiniz?`))try{const D=await G(`${pe}/users/${E.username}/block/`,{method:"POST"});if(D.ok){ie.success(`üö´ ${E.username} engellendi`);const H=await G(`${pe}/friends/list/`);if(H.ok){const Q=await H.json();da(Q.friends||[])}}else{const H=await D.json();ie.error(`‚ùå ${H.error||"Engelleme ba≈üarƒ±sƒ±z"}`)}}catch(D){console.error("Block user error:",D),ie.error("‚ùå Engelleme hatasƒ±")}break;default:console.log("Unknown action:",r)}},[Ce,je,S,G,pe,vo,Cr,Te]),Qc=()=>{if(Qr){tt(!0),Te("ƒ∞ndiriliyor...");const{ipcRenderer:r}=window.require("electron"),E=`${ee}/media/build/Pawscord-Setup.exe`;r.send("start-download",E)}else window.open(`${ee}/media/build/Pawscord-Setup.exe`,"_blank")};a.useEffect(()=>{if(Qr){const{ipcRenderer:r}=window.require("electron"),E=(D,H)=>Ir(Math.round(H*100)),T=()=>{Te("Ba≈ülatƒ±lƒ±yor..."),Ir(100),setTimeout(()=>Te("Kapanƒ±yor..."),1500)},$=(D,H)=>{tt(!1),ie.error(`ƒ∞ndirme hatasƒ±: ${H}`)};return r.on("download-progress",E),r.on("download-complete",T),r.on("download-error",$),()=>{r.removeAllListeners("download-progress"),r.removeAllListeners("download-complete"),r.removeAllListeners("download-error")}}},[]);const zs=se!=="finished";if(!i)return e.createElement(e.Fragment,null,zs&&e.createElement(zi,{animationState:se}),e.createElement(sf,{onLogin:Hc,onRegister:jc,error:Jn,setAuthError:Et}));const Xo=ye&&!ir?"20px":Bt,wa=p.type==="room"?`room-${p.id}`:`dm-${p.id}`,Zo=!!X[wa];return ks?e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"large",text:"Davet y√ºkleniyor..."})},e.createElement(bm,{vanityPath:ks,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>{As(null),window.location.hash="#/"}})):e.createElement("div",{style:{...fe.mainContainer},className:"dark-theme"},zs&&e.createElement(zi,{animationState:se}),Vo&&e.createElement(Ku,{message:Vo.message,endTime:Vo.endTime,level:Vo.level,onDismiss:()=>fa(null)}),e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"medium",text:"Modal y√ºkleniyor..."})},Kn&&e.createElement(wm,{user:Lt,onClose:()=>Ao(!1),onProfileUpdate:r=>Mo(r),onLogout:l,fetchWithAuth:G,getDeterministicAvatar:mt,updateProfileUrl:Vm,changeUsernameUrl:Wm,soundSettings:po,onUpdateSoundSettings:us,onImageClick:Xt,apiBaseUrl:ee}),Ur&&e.createElement(pf,{onClose:()=>so(!1)}),ea&&e.createElement(Bf,{onClose:()=>io(!1),fetchWithAuth:G,apiBaseUrl:ee}),co&&e.createElement(Df,{onClose:()=>Fo(!1),onOpenAnalytics:()=>io(!0),onOpenWebhooks:()=>Ro(!0),onOpenModTools:()=>ra(!0),onOpenAuditLogs:()=>_(!0),onOpenReports:()=>_r(!0),onOpenVanityURL:()=>Vr(!0),onOpenAutoResponder:()=>K(!0),fetchWithAuth:G,apiBaseUrl:ee}),vc&&e.createElement(cm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Es(!1),username:te}),Ec&&e.createElement(lm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>bs(!1),username:te}),bc&&e.createElement(dm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>_s(!1),username:te}),_c&&e.createElement(um,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Ss(!1),username:te}),Sc&&e.createElement(fm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>ws(!1),username:te}),wc&&e.createElement(mm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Cs(!1),serverId:p?.type==="room"?p.server_id:null}),Cc&&e.createElement(Dm,{onClose:()=>Bs(!1)}),kc&&e.createElement(Tm,{onClose:()=>Ds(!1),apiBaseUrl:ee}),Po&&e.createElement(Rf,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>lo(!1)}),na&&e.createElement(If,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Zt(!1)}),Pt&&e.createElement(Lf,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>_r(!1)}),Nr&&e.createElement($f,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>_(!1)}),R&&e.createElement(Of,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>I(!1)}),ta&&e.createElement(Tf,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Ro(!1)}),oa&&e.createElement(Ff,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Vr(!1)}),W&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Vi,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>K(!1)})),N&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(zf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>z(!1),onMessageClick:r=>{r.room?ce({type:"room",slug:r.room}):r.conversation&&ce({type:"dm",slug:r.conversation}),z(!1)}})),O&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Mf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Z(!1),onMessageClick:r=>{r.room?ce({type:"room",slug:r.room}):r.conversation&&ce({type:"dm",slug:r.conversation}),Z(!1)}})),ae&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Uf,{fetchWithAuth:G,apiBaseUrl:ee,channelSlug:p.slug,onClose:()=>xe(!1)})),Po&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Pf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p?.type==="room"?p.server_id:null,onClose:()=>lo(!1)})),at&&e.createElement(mf,{symbol:at,onClose:()=>dt(null)}),Xn&&e.createElement(vf,{onClose:()=>ao(!1),ws:We,username:te}),ut&&e.createElement(ff,{onClose:()=>fr(!1),onSend:Mc}),is&&e.createElement(kf,{onClose:()=>cs(null),server:is,currentUsername:te,fetchWithAuth:G,apiBaseUrl:ee,serverMembers:kr}),ur&&e.createElement(wf,{onClose:()=>At(!1),onSetKey:r=>Ot(wa,r),existingKey:X[wa]}),pc&&e.createElement(Cf,{onClose:()=>ss(!1),apiBaseUrl:ee}),ls&&e.createElement(Ui,{isLoading:xc,summaryText:hc,onClose:()=>ua(!1)}),qe&&e.createElement(Af,{onClose:()=>Oe(!1),friendsList:Cr,fetchWithAuth:G,apiBaseUrl:ee,onGroupCreated:r=>{Ue(E=>[r,...E]),ce("dm",r.id,"Grup Sohbeti")}}),qt&&(p.type==="room"||p.type==="dm")&&e.createElement(xf,{roomSlug:p.type==="room"?p.id:`dm_${p.id}`,onClose:()=>lt(!1),wsProtocol:on,apiHost:nn}),zt&&e.createElement(hf,{onClose:()=>Qe(!1),fetchWithAuth:G,apiBaseUrl:ee,sendSignal:u,absoluteHostUrl:ee}),gc&&e.createElement(_f,{onClose:()=>fs(!1),ws:We,roomSlug:p.id}),Yn&&e.createElement(bf,{onSelect:r=>{const E=r.startsWith("http")?r:ee+r;_a(E),Do(!1)},onClose:()=>Do(!1),localGifListUrl:Hm,absoluteHostUrl:ee,fetchWithAuth:G}),Ye&&e.createElement(Ef,{onClose:()=>yr(!1),onSelect:r=>{_a(r),yr(!1)},fetchWithAuth:G,apiBaseUrl:ee}),Kt&&e.createElement(uf,{onClose:()=>$r(!1),fetchWithAuth:G,apiBaseUrl:ee,activeRoomSlug:p.id})),aa&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Vf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>Ka(!1)})),sa&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Nf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>fo(!1)})),wr&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Wf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>It(!1)})),mo&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Hf,{fetchWithAuth:G,apiBaseUrl:ee,username:te,onClose:()=>$o(!1)})),ia&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(jf,{fetchWithAuth:G,apiBaseUrl:ee,username:te,onClose:()=>ca(!1)})),p0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Gf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>x0(!1)})),h0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(qf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>g0(!1)})),y0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Kf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>v0(!1)})),E0&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Yf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>b0(!1)})),_0&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Jf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>S0(!1)})),w0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Xf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Ya(!1),onLoadDraft:r=>{r.room&&ce({type:"room",slug:r.room}),Ya(!1)}})),C0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Zf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>k0(!1)})),A0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Qf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,currentUsername:te,onClose:()=>B0(!1)})),D0&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(em,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>T0(!1)})),F0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(tm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>R0(!1)})),P0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Vi,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>I0(!1)})),L0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(rm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>$0(!1)})),O0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(om,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>z0(!1)})),M0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(nm,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>U0(!1)})),V0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(am,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Ja(!1),onSuccess:()=>{ie.success("2FA ba≈üarƒ±yla etkinle≈ütirildi!"),Ja(!1)}})),N0&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(sm,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>W0(!1)})),H0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(im,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>j0(!1)})),G0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(pm,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>q0(!1)})),K0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(xm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Xa(!1),onMessageClick:r=>{r.room&&ce({type:"room",slug:r.room}),Xa(!1)}})),Y0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(hm,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>J0(!1)})),X0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(gm,{fetchWithAuth:G,apiBaseUrl:ee,url:null,onClose:()=>Z0(!1)})),Q0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ym,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>ec(!1)})),tc&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(vm,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>rc(!1)})),oc&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Em,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>nc(!1)})),ac&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"üéÆ Oyunlar Y√ºkleniyor...")},e.createElement(Pm,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p?.server_id,currentUser:te,onClose:()=>Za(!1)})),sc&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"üìÇ Projeler Y√ºkleniyor...")},e.createElement(Im,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p?.server_id,currentUser:te,onClose:()=>Qa(!1)})),ic&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"üé® Avatar Studio Y√ºkleniyor...")},e.createElement(Lm,{fetchWithAuth:G,apiBaseUrl:ee,currentUser:te,onClose:()=>es(!1),onAvatarChange:r=>{Lt&&Mo({...Lt,avatar_url:r}),ie.success("üé® Avatar g√ºncellendi!")}})),Er&&e.createElement(lf,{imageUrl:Er,onClose:()=>Xt(null)}),Mr&&e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:"Sabitlenmi≈ü mesajlar y√ºkleniyor..."})},e.createElement(km,{messages:Dt,onClose:()=>Bo(!1)})),Ft&&e.createElement(df,{user:Ft,onClose:()=>Rt(null),onStartDM:vo,onImageClick:Xt,getDeterministicAvatar:mt,fetchWithAuth:G,apiBaseUrl:ee,currentUser:te,friendsList:Cr}),ye&&oo&&e.createElement("div",{style:fe.mobileOverlay,onClick:()=>Ne(!1)}),ye&&no&&e.createElement("div",{style:fe.mobileOverlay,onClick:()=>vt(!1)}),e.createElement("div",{style:fe.chatLayout},(!ye||oo)&&e.createElement("div",{style:{...fe.sidebarWrapper,...ye&&fe.mobileSidebar,paddingTop:Xo,paddingBottom:zr,height:"100%",boxSizing:"border-box"}},ye&&e.createElement("div",{style:fe.mobileSidebarHeader},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement("img",{src:"https://media.pawscord.com/assets/logo.png",alt:"",style:{width:"24px",height:"24px"},onError:r=>{r.target.style.display="none"}}),e.createElement("span",{style:{fontSize:"18px",fontWeight:"bold",color:"white"}},"Pawscord")),e.createElement("button",{onClick:()=>Ne(!1),style:fe.closeSidebarButton},e.createElement(wo,null))),e.createElement(Sm,{onFriendsClick:()=>ce("friends","friends"),onRoomSelect:Ls,onDMSelect:(r,E)=>ce("dm",r,E),onWelcomeClick:Xc,setIsLeftSidebarVisible:Ne,onProfileClick:()=>Ao(!0),onViewUserProfile:r=>{const E=Ce.find(T=>T.username===r);E&&Rt(E)},onOpenStore:()=>so(!0),onOpenServerSettings:r=>cs(r),categories:Bc,onServerDragStart:Pc,onServerDragOver:Ic,onServerDragEnd:Lc,onServerDrop:$c,conversations:gt,allUsers:Ce,onlineUsers:ya,serverMembers:kr,isAdmin:je,friendsList:Cr,pendingFriendRequests:uc,currentUsername:te,currentUserProfile:Lt,getRealUserAvatar:_t,getDeterministicAvatar:mt,unreadCounts:ke,joinVoiceChat:m,leaveVoiceChat:y,voiceUsers:Y,isConnecting:b,currentVoiceRoom:S,currentRoom:S,currentConversationId:p.type==="dm"?p.id:null,remoteVolumes:h,setRemoteVolume:c,isPttActive:q,apiBaseUrl:ee,fetchWithAuth:G,onHideConversation:Yc,handleDrop:qc,dropTarget:Zn,setDropTarget:To,isDragging:ms,onOpenCreateGroup:()=>Oe(!0),toggleMute:k,toggleDeafened:w,isMuted:A,isDeafened:g,isInVoice:B,toggleVideo:C,toggleScreenShare:v,isVideoEnabled:L,isScreenSharing:P,updateAvailable:ns,onUpdateClick:()=>ss(!0),onOpenAnalytics:()=>io(!0),onOpenAdminPanel:()=>Fo(!0),onOpenPaymentPanel:()=>Es(!0),onOpenStoreModal:()=>bs(!0),onOpenDailyRewards:()=>_s(!0),onOpenAPIUsage:()=>Ss(!0),onOpenExportJobs:()=>ws(!0),onOpenScheduledAnnouncements:()=>Cs(!0),onOpenMiniGames:()=>Za(!0),onOpenProjectCollaboration:()=>Qa(!0),onOpenAvatarStudio:()=>es(!0),onServerSelect:Uc})),e.createElement("div",{style:fe.mainContent},e.createElement("div",{style:{position:"absolute",top:60,left:0,right:0,zIndex:90}},e.createElement(af,{message:rs?.message,type:rs?.type,onDismiss:()=>Wr(null)})),p.type==="friends"?e.createElement("div",{style:{width:"100%",height:"100%",paddingTop:Xo}},e.createElement(_m,{fetchWithAuth:G,apiBaseUrl:ee,onStartDM:vo,getDeterministicAvatar:mt,onClose:()=>ce("welcome","welcome"),onPendingCountChange:fc,onlineUsers:ya})):p.type==="welcome"?e.createElement("div",{style:{width:"100%",height:"100%"}},e.createElement(cf,{isMobile:ye,onOpenMenu:()=>Ne(!0),onOpenRightMenu:()=>vt(!0),updateAvailable:ns,isDownloading:Pr,downloadProgress:Mt,updateStatusText:Lr,onStartUpdate:Qc,onSwitchToFriends:()=>{ce("friends","friends"),ye&&Ne(!1)},onSwitchToAI:()=>{Ls("ai")},onSwitchToCinema:()=>{ao(!0),ye&&Ne(!1)}})):Fc==="kanban"?e.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},e.createElement("div",{style:fe.chatHeader},e.createElement("h2",null,"# ",yo," (Pano)")),e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"medium",text:"Pano y√ºkleniyor..."})},e.createElement(gf,{roomSlug:p.id,apiBaseUrl:ee,fetchWithAuth:G}))):p.type==="voice"&&B?e.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#2f3136"}},e.createElement("div",{style:{...fe.chatHeader,justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},ye&&e.createElement("button",{onClick:()=>ce("welcome","welcome"),style:{...fe.mobileMenuButton}},"‚Üê"),e.createElement("h2",{style:{margin:0,fontSize:"1.2em"}},"üîä ",S)),e.createElement("button",{onClick:()=>{y(),ce("welcome","welcome")},style:{background:"#ed4245",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold"}},"Baƒülantƒ±yƒ± Kes")),e.createElement(Ni,{roomName:S,onClose:()=>{y(),ce("welcome","welcome")},isMinimized:!1,onToggleMinimize:()=>{},getRealUserAvatar:_t,allUsers:Ce,currentUserProfile:Lt})):e.createElement("div",{style:{...fe.chatArea,position:"relative",paddingTop:Xo,boxSizing:"border-box"},onDrop:Gc,onDragOver:r=>{r.preventDefault(),No(!0)},onDragEnter:r=>{r.preventDefault(),No(!0)},onDragLeave:r=>{r.preventDefault(),r.target===r.currentTarget&&No(!1)}},e.createElement("div",{style:{...fe.chatHeader,justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",overflow:"hidden",gap:"8px"}},ye&&!oo&&e.createElement("button",{onClick:()=>Ne(!0),style:{...fe.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Men√ºy√º A√ß"},"‚ò∞"),ye&&(p.type==="dm"||p.type==="room")&&e.createElement("button",{onClick:()=>{ce("welcome","welcome"),Ne(!1),vt(!1)},style:{...fe.mobileMenuButton,fontSize:"1.2em"},"aria-label":"Geri"},"‚Üê"),e.createElement("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0,fontSize:ye?"1em":"1.1em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},p.type==="dm"?`@ ${String(p.targetUser||"DM")}`:`# ${String(yo)}`),e.createElement("div",{style:yt?fe.connectionPillOnline:fe.connectionPillOffline},yt?"Bagli":"Kopuk")),e.createElement("div",{style:{display:"flex",gap:ye?"5px":"10px",alignItems:"center",flexWrap:ye?"nowrap":"wrap",position:"relative"}},e.createElement("form",{onSubmit:Kc,style:fe.searchForm},e.createElement("input",{type:"text",placeholder:"Ara...",value:Or,onChange:r=>mr(r.target.value),style:fe.searchInput,ref:Rs}),e.createElement(al,{style:fe.searchIcon})),!ye&&Fs.length>0&&e.createElement("span",{style:fe.typingIndicator},Fs.join(", ")," yazƒ±yor..."),e.createElement("button",{onClick:()=>ys(!xa),style:{...fe.iconButton,color:xa?"#5865f2":"#b9bbbe",position:"relative"},title:"Bildirimler"},e.createElement(Ns,null)),xa&&e.createElement("div",{style:{position:"absolute",top:"54px",right:"20px",zIndex:1e3}},e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:""})},e.createElement(Fm,{currentUser:te,onClose:()=>ys(!1),fetchWithAuth:G,apiBaseUrl:ee}))),e.createElement("div",{className:"toolbar-menu-container",style:{position:"relative"}},e.createElement("button",{onClick:()=>ct(!xo),style:{...fe.iconButton,color:xo?"#5865f2":"#b9bbbe",fontSize:"1.2em",fontWeight:"bold"},title:"Daha Fazla"},"‚ãÆ"),xo&&e.createElement("div",{style:{position:"absolute",top:"50px",right:"0",backgroundColor:"#2f3136",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.4)",minWidth:"220px",zIndex:1e3,overflow:"hidden",border:"1px solid #202225"}},p.type==="dm"&&e.createElement("button",{onClick:()=>{At(!0),ct(!1)},style:{...fe.menuItem,color:Zo?"#43b581":"#dcddde"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color=Zo?"#43b581":"#dcddde"}},Zo?e.createElement(Ws,null):e.createElement(Ws,{style:{opacity:.5}}),e.createElement("span",null,Zo?"≈ûifreli":"≈ûifrele")),e.createElement("button",{onClick:()=>{Bo(!Mr),ct(!1)},style:{...fe.menuItem,color:Mr?"#f5a524":"#dcddde"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color=Mr?"#f5a524":"#dcddde"}},e.createElement(sl,null),e.createElement("span",null,"Sabitli Mesajlar")),e.createElement("button",{onClick:()=>{Wc(),ct(!1)},style:fe.menuItem,onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#dcddde"}},e.createElement(il,null),e.createElement("span",null,"Baƒülantƒ±yƒ± Kopyala")),e.createElement("button",{onClick:()=>{Nc(),ct(!1)},style:{...fe.menuItem,color:po.notifications?"#43b581":"#f04747"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color=po.notifications?"#43b581":"#f04747"}},po.notifications?e.createElement(Ns,null):e.createElement(cl,null),e.createElement("span",null,po.notifications?"Sessize Al":"Sesi A√ß")),e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{ao(!0),ct(!1)},style:fe.menuItem,onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#dcddde"}},e.createElement(ll,null),e.createElement("span",null,"Sinema Modu")),e.createElement("button",{onClick:()=>{fs(!0),ct(!1)},style:fe.menuItem,onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#dcddde"}},e.createElement(dl,null),e.createElement("span",null,"DJ Modu")),e.createElement("button",{onClick:()=>{lt(!0),ct(!1)},style:fe.menuItem,onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#dcddde"}},e.createElement(ul,null),e.createElement("span",null,"Beyaz Tahta")),B&&e.createElement("button",{onClick:()=>{Qe(!0),ct(!1)},style:fe.menuItem,onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#dcddde"}},e.createElement(Hs,null),e.createElement("span",null,"Ses Efektleri")),p.type==="room"&&e.createElement(e.Fragment,null,e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{zc(),ct(!1)},style:fe.menuItem,onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#5865f2",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#dcddde"}},e.createElement(Hs,null),e.createElement("span",null,"Sohbeti √ñzetle")),e.createElement("button",{onClick:()=>{Oc(),ct(!1)},style:{...fe.menuItem,color:"#f04747"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#f04747",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#f04747"}},e.createElement(fl,null),e.createElement("span",null,"Sohbeti Temizle")),te==="admin"&&p.type==="dm"&&e.createElement(e.Fragment,null,e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{Jc(p.id),ct(!1)},style:{...fe.menuItem,color:"#ed4245",fontWeight:"bold"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#ed4245",r.currentTarget.style.color="#ffffff"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#ed4245"},title:"Admin: Konu≈ümayƒ± kalƒ±cƒ± olarak sil (her iki taraftan)"},e.createElement(ml,null),e.createElement("span",null,"‚ö†Ô∏è KALICI Sƒ∞L (ADMƒ∞N)")))))),ye&&!no&&e.createElement("button",{onClick:()=>vt(!0),style:{...fe.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Kullanƒ±cƒ±larƒ± G√∂ster"},e.createElement(Fa,null)))),e.createElement("div",{style:fe.messageBox,ref:ga,onScroll:Rc},lc?e.createElement("p",{style:fe.systemMessage},"Y√ºkleniyor..."):va.length>50?e.createElement(rf,{messages:va,scrollToBottom:!0,renderMessage:(r,E)=>e.createElement(Mi,{key:r.id||r.temp_id||E,msg:r,currentUser:te,absoluteHostUrl:ee,isAdmin:je,onImageClick:Xt,fetchWithAuth:G,allUsers:Ce,getDeterministicAvatar:mt,onShowChart:dt,onDelete:Os,onStartEdit:qr,onSetReply:xs,onToggleReaction:()=>{},onStartForward:hs,isSelectionMode:gs,isSelected:vr.has(r.id),onToggleSelection:T=>{const $=new Set(vr);$.has(T)?$.delete(T):$.add(T),Je($)},onScrollToMessage:Is,onViewProfile:T=>Rt(Ce.find($=>$.username===T)),onTogglePin:T=>{}})}):e.createElement(e.Fragment,null,va.map((r,E)=>{const T=r.id||r.temp_id||E;return e.createElement(Mi,{key:T,msg:r,currentUser:te,absoluteHostUrl:ee,isAdmin:je,onImageClick:Xt,fetchWithAuth:G,allUsers:Ce,getDeterministicAvatar:mt,onShowChart:dt,onDelete:Os,onStartEdit:qr,onSetReply:xs,onToggleReaction:()=>{},onStartForward:hs,isSelectionMode:gs,isSelected:vr.has(r.id),onToggleSelection:$=>{const D=new Set(vr);D.has($)?D.delete($):D.add($),Je(D)},onScrollToMessage:Is,onViewProfile:$=>Rt(Ce.find(D=>D.username===$)),onTogglePin:$=>{}})}),e.createElement("div",{ref:ha,style:{float:"left",clear:"both",height:1}}))),yc&&e.createElement("button",{type:"button",style:fe.scrollToBottomButton,onClick:()=>{nr("smooth"),Ho(!1)},"aria-label":"En alta in"},"En alta in"),e.createElement("div",{style:{...fe.inputContainer,paddingBottom:ir?`calc(16px + ${zr})`:ye?"25px":"16px"}},ms&&e.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(88, 101, 242, 0.2)",border:"2px dashed #5865f2",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1e3}},e.createElement("div",{style:{color:"#5865f2",fontSize:"1.2em",fontWeight:"bold"}},"üìÅ Dosyayƒ± buraya bƒ±rakƒ±n")),ps&&pa>0&&e.createElement("div",{style:{position:"absolute",top:"-40px",left:"16px",right:"16px",backgroundColor:"#2b2d31",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",zIndex:1001}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement("span",{style:{color:"#b9bbbe",fontSize:"12px",whiteSpace:"nowrap"}},"üì§ Y√ºkleniyor: ",pa,"%"),e.createElement("div",{style:{flex:1,height:"6px",backgroundColor:"#40444b",borderRadius:"3px",overflow:"hidden"}},e.createElement("div",{style:{width:`${pa}%`,height:"100%",backgroundColor:"#5865f2",borderRadius:"3px",transition:"width 0.3s ease"}})))),e.createElement(of,{onSendMessage:_a,onFileUpload:Jo,onShowCodeSnippet:()=>fr(!0),placeholder:yo?`${p.type==="dm"?yo:`# ${yo}`} kanalƒ±na mesaj g√∂nder`:"Mesaj yaz...",disabled:ps,fetchWithAuth:G,apiBaseUrl:ee,activeChat:p}))),(!ye||no)&&e.createElement("div",{style:{...fe.chatUserListPanel,...ye?fe.mobileRightSidebar:{},paddingTop:Xo}},ye&&e.createElement("div",{style:fe.mobileSidebarHeader},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Fa,{size:18,color:"#b9bbbe"}),e.createElement("span",{style:{fontSize:"16px",fontWeight:"bold",color:"white"}},p.type==="room"?"Sunucu √úyeleri":p.type==="friends"?"√áevrimi√ßi":"Arkada≈ülar")),e.createElement("button",{onClick:()=>vt(!1),style:fe.closeSidebarButton},e.createElement(wo,null))),e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:"Kullanƒ±cƒ±lar y√ºkleniyor..."})},e.createElement(Cm,{chatUsers:[],allUsers:Ce,onlineUsers:ya,currentUser:te,currentUserProfile:Lt,getDeterministicAvatar:mt,onUserClick:r=>{let E=Ce.find(T=>T.username===r);if(!E&&kr.length>0){const T=kr.find($=>$.username===r);T&&(E={username:T.username,display_name:T.username,avatar:mt(T.username),role:T.role||"member"})}E&&Rt(E)},onUserContextMenu:(r,E)=>{if(E===te)return;const T=Ce.find($=>$.username===E);T&&vs({x:r.clientX,y:r.clientY,user:T,permissions:Ac})},activeChat:p,serverMembers:kr,friendsList:Cr,onNavigate:Vc})))),B&&e.createElement(nf,{remoteStreams:n,remoteVolumes:h,mutedUsers:ge}),B&&!xt&&p.type!=="voice"&&e.createElement("button",{onClick:()=>hr(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9998,background:"#5865f2",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"all 0.2s"},title:"Ses Panelini A√ß",onMouseEnter:r=>r.currentTarget.style.transform="scale(1.1)",onMouseLeave:r=>r.currentTarget.style.transform="scale(1)"},"üé§"),B&&xt&&p.type!=="voice"&&e.createElement(e.Fragment,null,ht?e.createElement(Ni,{roomName:S,onClose:()=>{hr(!1)},isMinimized:Vt,onToggleMinimize:()=>Le(!Vt),getRealUserAvatar:_t,allUsers:Ce,currentUserProfile:Lt}):e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:"Sesli sohbet y√ºkleniyor..."})},e.createElement(Am,{islandState:Ke,onDrag:r=>xr(E=>({...E,x:r.x,y:r.y})),onResize:r=>xr(E=>({...E,width:r.width,height:r.height})),isMobile:ye,headerActions:e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"}},e.createElement("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),console.log("üéõÔ∏è [VoiceIsland] Hiding panel"),hr(!1)},style:{background:"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:"Paneli Gizle"},e.createElement(wo,null)),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),console.log("üé§ [VoiceIsland] Mute toggle clicked"),k()},style:{background:A?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:A?"Mikrofonu A√ß":"Mikrofonu Kapat"},e.createElement(za,{style:{opacity:A?.5:1}})),e.createElement("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),console.log("üéß [VoiceIsland] Deafen toggle clicked"),w()},style:{background:g?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:g?"Sesi A√ß":"Sesi Kapat"},e.createElement(pl,{style:{opacity:g?.5:1}})),e.createElement("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),console.log("üìπ [VoiceIsland] Video toggle clicked"),C()},style:{background:L?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:L?"Kamerayƒ± Kapat":"Kamerayƒ± A√ß"},e.createElement(xl,{style:{opacity:L?1:.5}})),e.createElement("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),console.log("üñ•Ô∏è [VoiceIsland] Screen share toggle clicked"),v()},style:{background:P?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:P?"Ekran Payla≈üƒ±mƒ±nƒ± Durdur":"Ekranƒ± Payla≈ü"},e.createElement(hl,{style:{opacity:P?1:.5}})),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:y,style:{background:"#ed4245",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},title:"Odadan Ayrƒ±l"},e.createElement(gl,null)),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:()=>de(r=>({...r,isActive:!r.isActive})),style:{background:ne.isActive?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},ne.isActive?"üé¨ Kapat":"üçø Sinema"),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("select",{onChange:r=>j(r.target.value),value:re,style:{background:"rgba(0,0,0,0.3)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"4px",padding:"2px 4px",fontSize:"12px",cursor:"pointer",outline:"none"}},e.createElement("option",{value:"none"},"Normal"),e.createElement("option",{value:"robot"},"ü§ñ Robot"),e.createElement("option",{value:"child"},"üë∂ Bebek"),e.createElement("option",{value:"monster"},"üëπ Canavar")),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("div",{style:{display:"flex",gap:"5px"}},e.createElement("button",{onClick:()=>ue("reset"),title:"Reset Game",style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px"}},"üîÑ"),["ü™®","üìÑ","‚úÇÔ∏è"].map((r,E)=>{const T=E===0?"rock":E===1?"paper":"scissors";return e.createElement("button",{key:r,onClick:()=>ue("move",T),style:{background:he?.moves?.[te]===T?"rgba(88, 101, 242, 0.5)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"50%",cursor:"pointer",fontSize:"16px",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.1s"},title:`Play ${T}`},r)})),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("div",{style:{display:"flex",gap:"5px"}},["‚ù§Ô∏è","üòÇ","üòÆ","üëç","üéâ"].map(r=>e.createElement("button",{key:r,onClick:()=>U(r),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px",padding:"0 4px",transition:"transform 0.1s"},onMouseEnter:E=>E.target.style.transform="scale(1.2)",onMouseLeave:E=>E.target.style.transform="scale(1)",title:`Send ${r}`},r))))},ne.isActive?e.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},e.createElement("div",{style:{flex:1,minHeight:0,position:"relative"}},e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"large",text:"Cinema Player y√ºkleniyor...",fullscreen:!0})},e.createElement(Bm,null))),e.createElement("div",{style:{height:"140px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",background:"rgba(0,0,0,0.5)",flexShrink:0,alignItems:"center"}},(()=>{const r=[];return r.push({id:"local-cam",user:{username:te,is_talking:f,is_mic_off:A,is_deafened:g},track:o?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:_t(te)}),F&&r.push({id:"local-screen",user:{username:te},track:F.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:_t(te)}),Object.entries(n||{}).forEach(([E,T])=>{const $=T.getVideoTracks(),D=T.getAudioTracks();$.length>0?$.forEach(H=>r.push({id:`${E}-${H.id}`,user:{username:E},track:H,streamType:"camera",isLocal:!1,avatarUrl:_t(E)})):D.length>0&&r.push({id:`${E}-audio`,user:{username:E},track:D[0],streamType:"camera",isLocal:!1,avatarUrl:_t(E)})}),r.map(E=>e.createElement(rn,{key:E.id,...E,style:{height:"100%",aspectRatio:"16/9",minWidth:"160px"},lastReaction:V,gameMove:he?.moves?.[E.user.username]}))})())):e.createElement("div",{style:{...fe.videoGrid,flexDirection:rt?"column":"row",flexWrap:rt?"nowrap":"wrap",overflowY:"auto",height:"100%"}},(()=>{const r=[];if(r.push({id:"local-cam",user:{username:te,is_talking:f,is_mic_off:A,is_deafened:g},track:o?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:_t(te)}),F?.getVideoTracks()[0]&&r.push({id:"local-screen",user:{username:te,is_talking:!1},track:F.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:_t(te)}),Object.entries(n||{}).forEach(([T,$])=>{if(T!==te){const D=$.getVideoTracks(),H=$.getAudioTracks();D.length>0?D.forEach(Q=>{r.push({id:`${T}-${Q.id}`,user:{username:T},track:Q,streamType:Q.label?.toLowerCase().includes("screen")?"screen":"camera",isLocal:!1,avatarUrl:_t(T)})}):H.length>0&&r.push({id:`${T}-audio`,user:{username:T},track:H[0],streamType:"camera",isLocal:!1,avatarUrl:_t(T)})}}),rt){const T=r.find(D=>D.id===rt);if(!T)return Yt(null),E(r);const $=r.filter(D=>D.id!==rt);return e.createElement(e.Fragment,null,e.createElement("div",{style:{flex:1,width:"100%",minHeight:"300px",padding:"0",overflow:"hidden",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"}},e.createElement(rn,{...T,style:{width:"100%",height:"100%",maxWidth:"100%",borderRadius:"0",maxHeight:"100%",margin:"0 auto",aspectRatio:"unset"},onClick:()=>Yt(null),lastReaction:V,gameMove:he?.moves?.[T.user?.username]})),e.createElement("div",{style:{height:"120px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",flexShrink:0,justifyContent:"center"}},$.map(D=>e.createElement(rn,{key:D.id,...D,style:{width:"180px",height:"100%",flexShrink:0,aspectRatio:"16/9"},onClick:()=>Yt(D.id),lastReaction:V,gameMove:he?.moves?.[D.user.username]}))))}else return E(r);function E(T){return T.map($=>e.createElement(rn,{key:$.id,...$,style:{width:"240px",maxWidth:"100%",flexGrow:1,height:"auto"},onClick:()=>Yt($.id),lastReaction:V,gameMove:he?.moves?.[$.user.username]}))}})())))),Qn&&e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"medium",text:"Temalar y√ºkleniyor..."})},e.createElement(Sf,{onClose:()=>br(!1),currentTheme:cc,onThemeChange:ts})),ls&&e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"medium",text:"√ñzet hazƒ±rlanƒ±yor..."})},e.createElement(Ui,{roomSlug:p.id,onClose:()=>ua(!1),fetchWithAuth:G,apiBaseUrl:ee})),et&&e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:"≈ûablonlar y√ºkleniyor..."})},e.createElement(yf,{onClose:()=>Fe(!1),onSelect:r=>{go.current?.appendText?.(r),Fe(!1)},fetchWithAuth:G,apiBaseUrl:ee,isAdmin:je}))),jo&&e.createElement(Rm,{x:jo.x,y:jo.y,user:jo.user,currentUser:te,onClose:()=>vs(null),onAction:Zc,voiceChannels:le.flatMap(r=>(r.categories||[]).flatMap(E=>(E.rooms||[]).filter(T=>T.is_voice))),isAdmin:je,isInVoiceRoom:B,friendsList:Cr}),ho&&yl.createPortal(e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999999},onClick:()=>Go(null)},e.createElement("div",{onClick:r=>r.stopPropagation(),style:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"400px",maxHeight:"80vh",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"}},e.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #3f4147",textAlign:"center"}},e.createElement("h2",{style:{color:"#f2f3f5",margin:0,fontSize:"18px"}},"üé´ Sunucuya Davet Et"),e.createElement("p",{style:{color:"#b9bbbe",margin:"8px 0 0",fontSize:"14px"}},e.createElement("strong",null,ho.username)," kullanƒ±cƒ±sƒ±nƒ± hangi sunucuya davet etmek istiyorsunuz?")),e.createElement("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"12px"}},le.map(r=>e.createElement("div",{key:r.id,onClick:async()=>{try{const E=await G(`${pe}/servers/${r.id}/invite/`,{method:"POST",body:JSON.stringify({target_username:ho.username})});if(E.ok)ie.success(`üé´ ${ho.username} kullanƒ±cƒ±sƒ±na davetiye g√∂nderildi!`);else{const T=await E.json();T.error&&T.error.includes("zaten")?ie.info(`‚ÑπÔ∏è ${ho.username} zaten bu sunucunun √ºyesi!`):ie.error(`‚ùå ${T.error||"Davet g√∂nderilemedi"}`)}}catch(E){console.error("‚ùå Invite error:",E),ie.error("‚ùå Baƒülantƒ± hatasƒ±")}Go(null)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",backgroundColor:"rgba(255,255,255,0.02)",marginBottom:"8px"},onMouseEnter:E=>{E.currentTarget.style.backgroundColor="rgba(88, 101, 242, 0.2)"},onMouseLeave:E=>{E.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"}},r.icon?e.createElement("img",{src:r.icon,alt:r.name,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover"}}):e.createElement("div",{style:{width:40,height:40,borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"white",fontSize:"16px"}},r.name?.substring(0,2).toUpperCase()),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{color:"#f2f3f5",fontWeight:"600"}},r.name),e.createElement("div",{style:{color:"#b9bbbe",fontSize:"12px"}},r.member_count||r.categories?.length||0," √ºye")),e.createElement("div",{style:{color:"#5865f2",fontSize:"20px"}},"‚Üí")))),e.createElement("div",{style:{padding:"16px 20px",borderTop:"1px solid #3f4147",textAlign:"center"}},e.createElement("button",{onClick:()=>Go(null),style:{backgroundColor:"#4f545c",color:"#f2f3f5",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"600"}},"ƒ∞ptal")))),document.body))},fe={mainContainer:{display:"flex",width:"100%",height:"100dvh",backgroundColor:"#1E1F22",backgroundImage:"radial-gradient(circle at 50% 10%, rgba(88, 101, 242, 0.05) 0%, transparent 40%)",color:"white",overflow:"hidden",fontFamily:"'Inter', sans-serif"},chatLayout:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},sidebarWrapper:{width:"312px",backgroundColor:"rgba(30, 31, 34, 0.6)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"row",flexShrink:0,height:"100%",borderRight:"1px solid rgba(255,255,255,0.05)"},mainContent:{flex:1,display:"flex",minWidth:0,position:"relative",height:"100%",overflow:"hidden"},chatArea:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"transparent",minWidth:0,height:"100%",overflow:"hidden",position:"relative"},chatHeader:{height:"54px",minHeight:"54px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",padding:"0 20px",flexShrink:0,backgroundColor:"rgba(20, 21, 24, 0.7)",backdropFilter:"blur(15px)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",zIndex:10},messageBox:{flex:1,overflowY:"auto",padding:"20px 0",display:"flex",flexDirection:"column",gap:"4px",scrollBehavior:"smooth",minHeight:0},inputContainer:{padding:"0 20px 24px 20px",backgroundColor:"transparent",position:"relative",flexShrink:0,minHeight:"auto",zIndex:20},chatUserListPanel:{width:"240px",backgroundColor:"rgba(30, 31, 34, 0.6)",borderLeft:"1px solid rgba(255,255,255,0.08)",flexShrink:0,height:"100%",backdropFilter:"blur(10px)"},mobileSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,left:0,width:"85vw",maxWidth:"350px",boxShadow:"5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileRightSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,right:0,width:"85vw",maxWidth:"300px",boxShadow:"-5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99,backdropFilter:"blur(3px)"},mobileMenuButton:{background:"none",border:"none",color:"white",fontSize:"1.5em",marginRight:"10px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",transition:"all 0.2s"},iconButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"1.3em",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",borderRadius:"50%",transition:"all 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff"}},videoGrid:{display:"flex",flexWrap:"wrap",gap:"5px",padding:"5px",alignContent:"center",justifyContent:"center",alignItems:"center"},systemMessage:{color:"#949ba4",textAlign:"center",fontSize:"0.85em",margin:"10px 0",fontStyle:"italic"},searchForm:{position:"relative",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"4px",padding:"0 8px",height:"32px",marginRight:"8px",border:"1px solid rgba(255,255,255,0.05)"},searchInput:{backgroundColor:"transparent",border:"none",color:"#dcddde",fontSize:"0.9em",width:"140px",outline:"none"},searchIcon:{color:"#949ba4",fontSize:"0.8em",cursor:"pointer"},typingIndicator:{color:"#dbdee1",fontSize:"0.85em",maxWidth:"180px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold"},connectionPillOnline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(59, 165, 93, 0.2)",border:"1px solid #3ba55d",color:"#3ba55d",fontSize:"0.75em",fontWeight:700},connectionPillOffline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(218, 55, 60, 0.2)",border:"1px solid #da373c",color:"#da373c",fontSize:"0.75em",fontWeight:700},scrollToBottomButton:{position:"absolute",right:"16px",bottom:"110px",backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.35)",cursor:"pointer",fontWeight:600},mobileSidebarHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",backgroundColor:"#202225",borderBottom:"1px solid #111214",minHeight:"54px",flexShrink:0},closeSidebarButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"22px",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background 0.2s, color 0.2s"},menuItem:{width:"100%",padding:"10px 16px",background:"transparent",border:"none",color:"#dcddde",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:"500",transition:"all 0.15s ease",borderRadius:"0"}};function Km(){return e.createElement(jl,{fallbackMessage:"Pawscord encountered an error. Please try refreshing the page."},e.createElement(ju,null,e.createElement(qm,null)))}const Ym=`${Mu}/auth/verify-email/`,Jm=()=>{const{token:d}=Ji(),i=Co(),[t,s]=a.useState("loading"),[l,x]=a.useState("Hesabƒ±nƒ±z doƒürulanƒ±yor, l√ºtfen bekleyin...");return a.useEffect(()=>{if(!d){s("error"),x("Ge√ßersiz veya eksik doƒürulama kodu.");return}const B=async()=>{try{const b=await fetch(`${Ym}${d}/`),S=await b.json();b.ok?(s("success"),x("√úyeliƒüiniz ba≈üarƒ±yla aktif edildi!")):(s("error"),x(S.message||"Doƒürulama ba≈üarƒ±sƒ±z oldu."))}catch{s("error"),x("Sunucuya baƒülanƒ±lamadƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.")}};setTimeout(()=>{B()},1e3)},[d]),e.createElement("div",{style:nt.container},e.createElement("div",{style:nt.card},t==="loading"&&e.createElement("div",{style:nt.content},e.createElement(Xi,{className:"spin-animation",size:50,color:"#5865f2",style:{marginBottom:20}}),e.createElement("h2",{style:nt.title},"Doƒürulanƒ±yor..."),e.createElement("p",{style:nt.text},l)),t==="success"&&e.createElement("div",{style:nt.content},e.createElement(Ma,{size:60,color:"#43b581",style:{marginBottom:20}}),e.createElement("h2",{style:{...nt.title,color:"#43b581"}},"Tebrikler! üéâ"),e.createElement("p",{style:nt.text},l),e.createElement("p",{style:nt.subText},"Artƒ±k Pawscord'a tam eri≈üim saƒülayabilirsin."),e.createElement("button",{onClick:()=>i("/"),style:nt.primaryButton},"Gƒ∞Rƒ∞≈û YAP")),t==="error"&&e.createElement("div",{style:nt.content},e.createElement(Ua,{size:60,color:"#f04747",style:{marginBottom:20}}),e.createElement("h2",{style:{...nt.title,color:"#f04747"}},"Hata Olu≈ütu"),e.createElement("p",{style:nt.text},l),e.createElement("button",{onClick:()=>i("/"),style:nt.secondaryButton},"Ana Sayfaya D√∂n"))))},nt={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#1e1f22",fontFamily:"'Poppins', sans-serif",padding:"20px"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",maxWidth:"400px",width:"100%",textAlign:"center",border:"1px solid #1f2023"},content:{display:"flex",flexDirection:"column",alignItems:"center"},title:{margin:"0 0 10px 0",color:"#fff",fontSize:"1.8em"},text:{color:"#dbdee1",fontSize:"1.1em",margin:"0 0 20px 0",lineHeight:"1.5"},subText:{color:"#949ba4",fontSize:"0.9em",marginBottom:"30px"},primaryButton:{backgroundColor:"#5865f2",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",width:"100%"},secondaryButton:{backgroundColor:"#4f545c",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",width:"100%"}},l0=document.createElement("style");l0.innerText=`
  .spin-animation { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(l0);const Xm=e.memo(Jm),Zm=()=>{const{code:d}=Ji(),i=Co(),{isAuthenticated:t,token:s}=ro(),[l,x]=a.useState(null),[B,b]=a.useState(!0),[S,m]=a.useState(""),[y,A]=a.useState(!1),[g,k]=a.useState(!1),w="8888",C=window.Capacitor&&window.Capacitor.isNativePlatform(),v=typeof window<"u"&&typeof window.require=="function",c=`${(()=>{if(C)return"https://www.pawscord.com";if(v)return`http://127.0.0.1:${w}`;const f=window.location.protocol,u=window.location.hostname;return u.includes("pawscord.com")?"https://www.pawscord.com":`${f}//${u}:${w}`})()}/api`;a.useEffect(()=>{console.log("üé´ [Invite Page] Loaded with code:",d),o()},[d]);const o=async()=>{console.log("üîç [Invite Page] Fetching invite info..."),b(!0),m("");try{const f=await fetch(`${c}/invites/${d}/`),u=await f.json();console.log("üì¶ [Invite Page] Response:",{status:f.status,data:u}),f.ok?(x(u),console.log("‚úÖ [Invite Page] Invite info loaded")):(m(u.error||"Davet bulunamadƒ±"),console.error("‚ùå [Invite Page] Error:",u.error))}catch(f){console.error("‚ùå [Invite Page] Network error:",f),m("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}b(!1)},n=async()=>{if(!t){console.log("‚ö†Ô∏è [Invite Page] User not authenticated, redirecting to login"),ie.error("‚ùå L√ºtfen √∂nce giri≈ü yapƒ±n!"),sessionStorage.setItem("pending_invite",d),i("/");return}if(!s){console.error("‚ùå [Invite Page] No token found!"),ie.error("‚ùå Giri≈ü token'ƒ± bulunamadƒ±. L√ºtfen tekrar giri≈ü yapƒ±n."),i("/");return}console.log("üé´ [Invite Page] Accepting invite...",{code:d,apiUrl:`${c}/invites/${d}/accept/`,hasToken:!!s}),A(!0),m("");try{const f=`${c}/invites/${d}/accept/`;console.log("üì° [Invite Page] POST to:",f);const u=await fetch(f,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});console.log("üì¶ [Invite Page] Response status:",u.status);const P=await u.json();if(console.log("üì¶ [Invite Page] Response data:",P),u.ok){console.log("‚úÖ [Invite Page] Successfully joined server!"),ie.success(`‚úÖ Ba≈üarƒ±lƒ±! ${P.server_name||"Sunucu"}ya katƒ±ldƒ±nƒ±z!`),k(!0);const L=P.redirect||"/";console.log("üîó [Invite Page] Redirecting to:",L),setTimeout(()=>{L.startsWith("http")?window.location.href=L:(i(L),window.location.reload())},2e3)}else{const L=P.error||P.message||"Sunucuya katƒ±lma hatasƒ±";console.error("‚ùå [Invite Page] Join failed:",L,P),m(L),ie.error(`‚ùå Hata: ${L}`)}}catch(f){console.error("‚ùå [Invite Page] Exception:",f);const u=f.message||"Baƒülantƒ± hatasƒ±";m(u),ie.error(`‚ùå Hata: ${u}`)}A(!1)};return B?e.createElement("div",{style:Se.container},e.createElement("div",{style:Se.backgroundGradient}),e.createElement("div",{style:Se.card},e.createElement("div",{style:Se.spinner}),e.createElement("p",{style:Se.loadingText},"Davet y√ºkleniyor..."))):S?e.createElement("div",{style:Se.container},e.createElement("div",{style:Se.backgroundGradient}),e.createElement("div",{style:Se.card},e.createElement(Ua,{size:64,color:"var(--error)"}),e.createElement("h2",{style:Se.errorTitle},"Hata"),e.createElement("p",{style:Se.errorText},S),e.createElement("button",{onClick:()=>i("/"),style:Se.homeButton},"Ana Sayfaya D√∂n"))):g?e.createElement("div",{style:Se.container},e.createElement("div",{style:Se.backgroundGradient}),e.createElement("div",{style:Se.card},e.createElement(Ma,{size:64,color:"var(--success)"}),e.createElement("h2",{style:Se.successTitle},"Ba≈üarƒ±lƒ±!"),e.createElement("p",{style:Se.successText},e.createElement("strong",null,l.server.name)," sunucusuna katƒ±ldƒ±nƒ±z!"),e.createElement("p",{style:Se.redirectText},"Ana sayfaya y√∂nlendiriliyorsunuz..."))):e.createElement("div",{style:Se.container},e.createElement("div",{style:Se.backgroundGradient}),e.createElement("div",{style:Se.card},l.server.icon&&e.createElement("img",{src:l.server.icon,alt:l.server.name,style:Se.serverIcon}),e.createElement("h1",{style:Se.serverName},e.createElement(vl,{style:Se.icon}),l.server.name),e.createElement("div",{style:Se.infoRow},e.createElement(Fa,{style:Se.infoIcon}),e.createElement("span",null,l.server.member_count," √úye")),l.expires_at&&e.createElement("div",{style:Se.infoRow},e.createElement(El,{style:Se.infoIcon}),e.createElement("span",null,"S√ºre: ",new Date(l.expires_at).toLocaleString("tr-TR"))),l.max_uses>0&&e.createElement("div",{style:Se.infoRow},e.createElement("span",null,"Kullanƒ±m: ",l.uses," / ",l.max_uses)),e.createElement("div",{style:Se.inviterInfo},"Davet Eden: ",e.createElement("strong",null,l.inviter.username)),e.createElement("button",{onClick:n,disabled:y,style:{...Se.joinButton,...y?Se.joinButtonDisabled:{}}},y?"Katƒ±lƒ±nƒ±yor...":t?"Sunucuya Katƒ±l":"Giri≈ü Yap ve Katƒ±l"),!t&&e.createElement("p",{style:Se.loginHint},"* Sunucuya katƒ±lmak i√ßin giri≈ü yapmanƒ±z gerekiyor")))},Se={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"var(--bg-app)",padding:"20px",position:"relative",overflow:"hidden"},backgroundGradient:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(ellipse at top, rgba(139, 92, 246, 0.15), transparent 50%), radial-gradient(ellipse at bottom, rgba(118, 75, 162, 0.15), transparent 50%)",pointerEvents:"none",zIndex:0},card:{background:"var(--glass-bg)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",padding:"48px",borderRadius:"var(--radius-2xl)",textAlign:"center",color:"var(--text-primary)",maxWidth:"560px",width:"100%",boxShadow:"var(--shadow-2xl)",border:"1px solid var(--glass-border)",position:"relative",zIndex:1,animation:"scaleIn 0.4s ease-out"},spinner:{width:"50px",height:"50px",border:"3px solid var(--glass-border)",borderTop:"3px solid var(--brand-primary)",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto"},loadingText:{marginTop:"24px",color:"var(--text-tertiary)",fontSize:"15px",fontWeight:500},serverIcon:{width:"120px",height:"120px",borderRadius:"50%",marginBottom:"24px",objectFit:"cover",border:"4px solid var(--glass-border)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.2)",transition:"var(--transition-normal)"},serverName:{fontSize:"32px",fontWeight:800,marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",background:"var(--gradient-primary)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},icon:{fontSize:"28px",color:"var(--brand-primary)"},infoRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"16px 0",color:"var(--text-secondary)",fontSize:"16px",fontWeight:500,padding:"12px 20px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},infoIcon:{fontSize:"20px",color:"var(--brand-primary)"},inviterInfo:{marginTop:"24px",marginBottom:"32px",color:"var(--text-tertiary)",fontSize:"14px",padding:"16px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},joinButton:{background:"var(--gradient-primary)",color:"white",border:"none",padding:"16px 32px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"16px",fontWeight:700,marginTop:"16px",width:"100%",transition:"var(--transition-normal)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)",position:"relative",overflow:"hidden"},joinButtonDisabled:{background:"var(--bg-tertiary)",cursor:"not-allowed",opacity:.6,boxShadow:"none"},loginHint:{marginTop:"20px",fontSize:"13px",color:"var(--warning)",fontStyle:"italic",fontWeight:500},errorTitle:{color:"var(--error)",marginTop:"24px",fontSize:"28px",fontWeight:700},errorText:{color:"var(--text-tertiary)",margin:"24px 0",fontSize:"15px",lineHeight:1.6},successTitle:{color:"var(--success)",marginTop:"24px",fontSize:"28px",fontWeight:700},successText:{color:"var(--text-primary)",margin:"24px 0",fontSize:"18px",fontWeight:600},redirectText:{color:"var(--text-tertiary)",fontSize:"14px",marginTop:"12px",fontStyle:"italic"},homeButton:{background:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--glass-border)",padding:"14px 28px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"15px",fontWeight:600,marginTop:"24px",transition:"var(--transition-normal)"}},d0=document.createElement("style");d0.textContent=`
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`;document.head.appendChild(d0);const Qm=({apiBaseUrl:d})=>{const[i,t]=a.useState(!1),[s,l]=a.useState([]),[x,B]=a.useState(!1),b=a.useRef(null),S=a.useRef([]),m=a.useRef(null),{token:y}=ro(),A=()=>{m.current?.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{A()},[s,x]);const g=async()=>{try{const C=await navigator.mediaDevices.getUserMedia({audio:!0});b.current=new MediaRecorder(C),S.current=[],b.current.ondataavailable=v=>{v.data.size>0&&S.current.push(v.data)},b.current.onstop=w,b.current.start(),t(!0)}catch{ie.error("‚ùå Mikrofon izni gerekli!")}},k=()=>{b.current&&i&&(b.current.stop(),t(!1))},w=async()=>{B(!0);const C=new Blob(S.current,{type:"audio/webm"}),v=new FormData;v.append("audio",C,"voice.webm");try{const h=await fetch(`${d}/eng-learn/voice-chat/`,{method:"POST",headers:{Authorization:`Bearer ${y}`},body:v});if(h.ok){const c=await h.json();l(n=>[...n,{sender:"user",text:c.user_text},{sender:"ai",text:c.ai_text}]),new Audio(`data:audio/mp3;base64,${c.audio_base64}`).play()}else console.error("Sunucu hatasƒ±:",h.status),ie.error("‚ùå Anla≈üƒ±lamadƒ± veya hata olu≈ütu.")}catch(h){console.error(h),ie.error("‚ùå Baƒülantƒ± hatasƒ±.")}finally{B(!1)}};return e.createElement("div",{style:Ht.container},e.createElement("div",{style:Ht.header},e.createElement(Zi,{to:"/eng-learn",style:Ht.backBtn},e.createElement(Qi,null)," Geri"),e.createElement("h2",null,"AI ile Konu≈ü (Speaking)")),e.createElement("div",{style:Ht.chatArea},s.length===0&&e.createElement("div",{style:Ht.emptyState},e.createElement(js,{size:60,color:"#5865f2",style:{marginBottom:20}}),e.createElement("h3",null,"ƒ∞ngilizce Pratik Yap"),e.createElement("p",null,"Mikrofona basƒ±lƒ± tut ve konu≈ümaya ba≈üla."),e.createElement("small",{style:{color:"#72767d"}},'"Hello, how are you?" diyebilirsin.')),s.map((C,v)=>e.createElement("div",{key:v,style:{...Ht.messageBubble,alignSelf:C.sender==="user"?"flex-end":"flex-start",backgroundColor:C.sender==="user"?"#5865f2":"#2b2d31",color:"white",borderBottomRightRadius:C.sender==="user"?"0":"12px",borderBottomLeftRadius:C.sender==="ai"?"0":"12px"}},e.createElement("div",{style:Ht.msgHeader},C.sender==="user"?e.createElement(bl,{size:12}):e.createElement(js,{size:12}),e.createElement("span",{style:{marginLeft:5,fontSize:"0.8em",fontWeight:"bold"}},C.sender==="user"?"Sen":"AI √ñƒüretmen")),C.text)),x&&e.createElement("div",{style:{alignSelf:"flex-start",color:"#949ba4",marginLeft:10,fontStyle:"italic"}},"Yazƒ±yor ve seslendiriyor..."),e.createElement("div",{ref:m})),e.createElement("div",{style:Ht.controls},e.createElement("button",{onMouseDown:g,onMouseUp:k,onTouchStart:g,onTouchEnd:k,style:{...Ht.micButton,backgroundColor:i?"#f04747":"#5865f2",transform:i?"scale(1.1)":"scale(1)"}},i?e.createElement(_l,{size:24}):e.createElement(za,{size:30})),e.createElement("p",{style:{marginTop:15,color:"#949ba4",fontSize:"0.9em"}},i?"Dinliyor... (Bƒ±rakƒ±nca G√∂nderir)":"Basƒ±lƒ± Tut ve Konu≈ü")))},Ht={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#313338",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif"},header:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px",borderBottom:"1px solid #1f2023",paddingBottom:"15px"},backBtn:{color:"#b9bbbe",fontSize:"1em",textDecoration:"none",display:"flex",alignItems:"center",gap:"5px",fontWeight:"600"},chatArea:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px",paddingBottom:"20px",paddingRight:"5px"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#949ba4",opacity:.8,textAlign:"center"},messageBubble:{maxWidth:"85%",padding:"15px",borderRadius:"12px",fontSize:"1em",lineHeight:"1.5",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",position:"relative"},msgHeader:{display:"flex",alignItems:"center",marginBottom:"5px",opacity:.8},controls:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20px",borderTop:"1px solid #1f2023"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.1s ease",boxShadow:"0 5px 20px rgba(0,0,0,0.4)"}},Gi=[{text:"Hello",difficulty:"Kolay"},{text:"Water",difficulty:"Kolay"},{text:"Friend",difficulty:"Kolay"},{text:"Family",difficulty:"Kolay"},{text:"Music",difficulty:"Kolay"},{text:"School",difficulty:"Kolay"},{text:"Computer",difficulty:"Kolay"},{text:"Beautiful",difficulty:"Kolay"},{text:"Together",difficulty:"Kolay"},{text:"Morning",difficulty:"Kolay"},{text:"Happy",difficulty:"Kolay"},{text:"Garden",difficulty:"Kolay"},{text:"People",difficulty:"Kolay"},{text:"Coffee",difficulty:"Kolay"},{text:"Purple",difficulty:"Kolay"},{text:"Technology",difficulty:"Orta"},{text:"Development",difficulty:"Orta"},{text:"Environment",difficulty:"Orta"},{text:"Successfully",difficulty:"Orta"},{text:"Opportunity",difficulty:"Orta"},{text:"Government",difficulty:"Orta"},{text:"Communication",difficulty:"Orta"},{text:"Experience",difficulty:"Orta"},{text:"Available",difficulty:"Orta"},{text:"Management",difficulty:"Orta"},{text:"International",difficulty:"Orta"},{text:"Recommendation",difficulty:"Orta"},{text:"Responsibility",difficulty:"Orta"},{text:"Understand",difficulty:"Orta"},{text:"Literature",difficulty:"Orta"},{text:"Necessary",difficulty:"Orta"},{text:"Vocabulary",difficulty:"Orta"},{text:"Interesting",difficulty:"Orta"},{text:"Comfortable",difficulty:"Orta"},{text:"Vegetable",difficulty:"Orta"},{text:"Squirrel",difficulty:"Zor"},{text:"Schedule",difficulty:"Zor"},{text:"Queue",difficulty:"Zor"},{text:"Rural",difficulty:"Zor"},{text:"Brewery",difficulty:"Zor"},{text:"Phenomenon",difficulty:"Zor"},{text:"February",difficulty:"Zor"},{text:"Library",difficulty:"Zor"},{text:"Specific",difficulty:"Zor"},{text:"Regularly",difficulty:"Zor"},{text:"Probably",difficulty:"Zor"},{text:"Algorithm",difficulty:"Zor"},{text:"Hierarchical",difficulty:"Zor"},{text:"Maintenance",difficulty:"Zor"},{text:"Pronunciation",difficulty:"Zor"},{text:"Throughout",difficulty:"Zor"},{text:"Entrepreneur",difficulty:"Zor"},{text:"Simultaneously",difficulty:"Zor"},{text:"Mischievous",difficulty:"Zor"},{text:"Chaos",difficulty:"Zor"},{text:"Recipe",difficulty:"Zor"},{text:"Worcestershire",difficulty:"Efsane"},{text:"Colonel",difficulty:"Efsane"},{text:"Miscellaneous",difficulty:"Efsane"},{text:"Anesthetist",difficulty:"Efsane"},{text:"Otorhinolaryngologist",difficulty:"Efsane"},{text:"Isthmus",difficulty:"Efsane"},{text:"Anemone",difficulty:"Efsane"},{text:"Synecdoche",difficulty:"Efsane"},{text:"Onomatopoeia",difficulty:"Efsane"},{text:"Conscientious",difficulty:"Efsane"},{text:"Defibrillator",difficulty:"Efsane"},{text:"Antidisestablishmentarianism",difficulty:"Efsane"},{text:"How are you doing today?",difficulty:"C√ºmle"},{text:"I would like to order a coffee.",difficulty:"C√ºmle"},{text:"The quick brown fox jumps over the lazy dog.",difficulty:"C√ºmle"},{text:"Can you please repeat that?",difficulty:"C√ºmle"},{text:"I am learning to speak English fluently.",difficulty:"C√ºmle"},{text:"It is raining cats and dogs outside.",difficulty:"C√ºmle"},{text:"Actions speak louder than words.",difficulty:"C√ºmle"},{text:"I need to schedule a meeting for tomorrow.",difficulty:"C√ºmle"},{text:"What do you do for a living?",difficulty:"C√ºmle"},{text:"She sells seashells by the seashore.",difficulty:"Tekerleme"},{text:"Red lorry, yellow lorry.",difficulty:"Tekerleme"},{text:"Peter Piper picked a peck of pickled peppers.",difficulty:"Tekerleme"},{text:"How much wood would a woodchuck chuck?",difficulty:"Tekerleme"},{text:"Unique New York.",difficulty:"Tekerleme"},{text:"Fuzzy Wuzzy was a bear.",difficulty:"Tekerleme"},{text:"Which wristwatches are Swiss wristwatches?",difficulty:"Tekerleme"}],ep=({apiBaseUrl:d})=>{const{token:i}=ro(),[t,s]=a.useState(null),[l,x]=a.useState(!1),[B,b]=a.useState(!1),[S,m]=a.useState("idle"),[y,A]=a.useState(""),[g,k]=a.useState(0),w=a.useRef(null),C=a.useRef([]);a.useEffect(()=>{v()},[]);const v=()=>{const f=Math.floor(Math.random()*Gi.length);s(Gi[f]),m("idle"),A("")},h=async()=>{if(t)try{const f=await fetch(`${d}/eng-learn/speak-text/`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({text:t.text})});if(f.ok){const u=await f.json();new Audio(`data:audio/mp3;base64,${u.audio_base64}`).play()}}catch(f){console.error(f)}},c=async()=>{A(""),m("recording");try{const f=await navigator.mediaDevices.getUserMedia({audio:!0});w.current=new MediaRecorder(f),C.current=[],w.current.ondataavailable=u=>{u.data.size>0&&C.current.push(u.data)},w.current.onstop=n,w.current.start(),x(!0)}catch{ie.error("‚ùå Mikrofon izni gerekli!"),m("idle")}},o=()=>{w.current&&l&&(w.current.stop(),x(!1))},n=async()=>{b(!0);const f=new Blob(C.current,{type:"audio/webm"}),u=new FormData;u.append("audio",f,"voice.webm"),u.append("target_text",t.text);try{const L=await(await fetch(`${d}/eng-learn/check-pronunciation/`,{method:"POST",headers:{Authorization:`Bearer ${i}`},body:u})).json();L.is_correct?(m("success"),A(`Harika! üéâ (${L.spoken_text})`),k(q=>q+1)):(m("error"),A(`Algƒ±lanan: "${L.spoken_text||"???"}" - Tekrar dene!`))}catch(P){console.error(P),A("Sunucu hatasƒ±."),m("error")}finally{b(!1)}};return t?e.createElement("div",{style:Ze.container},e.createElement("div",{style:Ze.header},e.createElement(Zi,{to:"/eng-learn",style:Ze.backBtn},e.createElement(Qi,null)," √áƒ±kƒ±≈ü"),e.createElement("div",{style:Ze.scoreBadge},"Skor: ",g)),e.createElement("div",{style:Ze.mainContent},e.createElement("div",{style:{...Ze.card,borderColor:S==="success"?"#43b581":S==="error"?"#f04747":"transparent",boxShadow:S==="success"?"0 0 30px rgba(67, 181, 129, 0.3)":S==="error"?"0 0 30px rgba(240, 71, 71, 0.3)":"0 10px 30px rgba(0,0,0,0.3)"}},e.createElement("span",{style:{...Ze.difficulty,backgroundColor:t.difficulty==="Efsane"?"#eb459e":t.difficulty==="Zor"?"#f04747":"#202225",color:t.difficulty==="Efsane"||t.difficulty==="Zor"?"white":"#949ba4"}},t.difficulty),e.createElement("h1",{style:Ze.wordText},t.text),e.createElement("div",{style:{height:"30px",marginTop:"10px",color:S==="success"?"#43b581":"#f04747",fontWeight:"bold"}},B?"Analiz ediliyor...":y),e.createElement("div",{style:Ze.controls},e.createElement("button",{onClick:h,style:Ze.iconButton,title:"Doƒürusunu Dinle"},e.createElement(Sl,{size:24})),e.createElement("button",{onMouseDown:c,onMouseUp:o,onTouchStart:c,onTouchEnd:o,style:{...Ze.micButton,backgroundColor:l?"#f04747":S==="success"?"#43b581":"#5865f2",transform:l?"scale(1.1)":"scale(1)"}},e.createElement(za,{size:32}))),e.createElement("p",{style:Ze.hint},l?"Dinliyor...":"Mikrofona basƒ±lƒ± tut ve oku")),e.createElement("div",{style:Ze.bottomNav},e.createElement("button",{onClick:v,style:Ze.skipButton},S==="success"?e.createElement(e.Fragment,null,"Sonraki Kelime ",e.createElement(wl,null)):e.createElement(e.Fragment,null,"Bunu Ge√ß ",e.createElement(Cl,null)))))):e.createElement("div",{style:Ze.container},"Y√ºkleniyor...")},Ze={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1e1f22",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif",alignItems:"center"},header:{width:"100%",maxWidth:"600px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},backBtn:{color:"#b9bbbe",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},scoreBadge:{backgroundColor:"#f0b232",color:"#000",padding:"5px 15px",borderRadius:"20px",fontWeight:"bold"},mainContent:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"24px",width:"100%",maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",border:"3px solid transparent",transition:"all 0.3s ease"},difficulty:{padding:"4px 12px",borderRadius:"12px",fontSize:"0.85em",marginBottom:"20px",fontWeight:"bold"},wordText:{fontSize:"2.2em",fontWeight:"800",margin:"0 0 10px 0",color:"#fff",letterSpacing:"1px",lineHeight:"1.3"},controls:{display:"flex",alignItems:"center",gap:"30px",marginTop:"30px"},iconButton:{width:"50px",height:"50px",borderRadius:"50%",border:"2px solid #40444b",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 5px 20px rgba(0,0,0,0.4)",transition:"all 0.1s ease"},hint:{marginTop:"20px",color:"#72767d",fontSize:"0.9em"},bottomNav:{marginTop:"50px"},skipButton:{background:"transparent",border:"none",color:"#b9bbbe",fontSize:"1.1em",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",padding:"10px 20px",borderRadius:"8px",transition:"background 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.05)"}}},tp=e.memo(ep),rp=({apiBaseUrl:d})=>{const[i,t]=a.useState("loading"),s=Co(),l=Yi();return a.useEffect(()=>{const x=new URLSearchParams(l.search),B=x.get("code");if(x.get("error")){t("error");return}if(B){const S=localStorage.getItem("access_token");fetch(`${d}/spotify/callback/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({code:B})}).then(m=>{m.ok?(t("success"),setTimeout(()=>{s("/",{replace:!0})},1500)):t("error")}).catch(m=>{console.error(m),t("error")})}},[l,d,s]),e.createElement("div",{style:Ta.container},e.createElement("div",{style:Ta.card},i==="loading"&&e.createElement(e.Fragment,null,e.createElement(Xi,{className:"spin",size:50,color:"#1db954",style:{marginBottom:20}}),e.createElement("h2",null,"Spotify Baƒülanƒ±yor..."),e.createElement("p",null,"Token alƒ±nƒ±yor, l√ºtfen bekleyin.")),i==="success"&&e.createElement(e.Fragment,null,e.createElement(Ma,{size:60,color:"#1db954",style:{marginBottom:20}}),e.createElement("h2",{style:{color:"#1db954"}},"Ba≈üarƒ±lƒ±!"),e.createElement("p",null,"Hesabƒ±n baƒülandƒ±. Sohbet ekranƒ±na d√∂n√ºl√ºyor...")),i==="error"&&e.createElement(e.Fragment,null,e.createElement(Ua,{size:60,color:"#f04747",style:{marginBottom:20}}),e.createElement("h2",{style:{color:"#f04747"}},"Hata Olu≈ütu"),e.createElement("p",null,"Baƒülantƒ± kurulamadƒ±."),e.createElement("button",{onClick:()=>s("/"),style:Ta.button},"Geri D√∂n"))))},Ta={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#191414",color:"white",fontFamily:"Poppins, sans-serif"},card:{backgroundColor:"#282828",padding:"40px",borderRadius:"16px",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",maxWidth:"400px",width:"90%"},button:{marginTop:"20px",padding:"10px 20px",borderRadius:"20px",border:"none",backgroundColor:"#1db954",color:"white",fontWeight:"bold",cursor:"pointer"}},u0=document.createElement("style");u0.innerText=`
  .spin { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(u0);const op=e.memo(rp),np=()=>{const{globalData:d}=c0(),[i,t]=a.useState(null),[s,l]=a.useState(!1),x=Co();if(a.useEffect(()=>{if(d&&d.type==="chat_message_handler"&&d.username==="‚ö° Signal Bot"){const b=d.content.split(`
`),S=b.find(g=>g.includes("ü™ô"))||"Bilinmiyor",m=b.find(g=>g.includes("üìà"))||"",y={title:"YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞! üö®",coin:S.replace("ü™ô","").replace(/\*/g,"").trim(),direction:m.includes("LONG")?"Y√úKSELƒ∞≈û (LONG)":"D√ú≈û√ú≈û (SHORT)",isLong:m.includes("LONG"),raw:d};t(y),l(!0);const A=setTimeout(()=>{l(!1)},8e3);return()=>clearTimeout(A)}},[d]),!s||!i)return null;const B=()=>{l(!1),x("/")};return e.createElement("div",{style:jt.container,className:"slide-in-notification"},e.createElement("div",{style:jt.iconBox},e.createElement(kl,{size:24,color:"#f0b232"})),e.createElement("div",{style:jt.content,onClick:B},e.createElement("h4",{style:jt.title},i.title),e.createElement("div",{style:jt.details},e.createElement("span",{style:jt.coinName},i.coin),e.createElement("span",{style:{...jt.directionBadge,backgroundColor:i.isLong?"rgba(35, 165, 89, 0.2)":"rgba(240, 71, 71, 0.2)",color:i.isLong?"#23a559":"#da373c"}},i.direction)),e.createElement("span",{style:jt.hint},"Detaylar i√ßin tƒ±kla ",e.createElement(Al,{size:10}))),e.createElement("button",{onClick:b=>{b.stopPropagation(),l(!1)},style:jt.closeButton},e.createElement(wo,null)))},jt={container:{position:"fixed",top:"20px",right:"20px",width:"320px",backgroundColor:"#1e1f22",borderRadius:"8px",boxShadow:"0 8px 20px rgba(0,0,0,0.5)",borderLeft:"5px solid #f0b232",display:"flex",alignItems:"center",padding:"15px",zIndex:99999,cursor:"pointer",transition:"transform 0.3s ease-out"},iconBox:{marginRight:"15px",display:"flex",alignItems:"center"},content:{flex:1,display:"flex",flexDirection:"column"},title:{margin:0,color:"#fff",fontSize:"0.95em",fontWeight:"bold",marginBottom:"5px"},details:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"},coinName:{color:"#dcddde",fontWeight:"bold",fontSize:"1.1em"},directionBadge:{fontSize:"0.75em",padding:"2px 6px",borderRadius:"4px",fontWeight:"bold"},hint:{fontSize:"0.7em",color:"#949ba4",display:"flex",alignItems:"center",gap:"5px"},closeButton:{background:"none",border:"none",color:"#949ba4",cursor:"pointer",padding:"5px",marginLeft:"10px",fontSize:"1em"}},f0=document.createElement("style");f0.innerText=`
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  .slide-in-notification {
    animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
`;document.head.appendChild(f0);function ap(d={}){const{nonce:i,onScriptLoadSuccess:t,onScriptLoadError:s}=d,[l,x]=a.useState(!1),B=a.useRef(t);B.current=t;const b=a.useRef(s);return b.current=s,a.useEffect(()=>{const S=document.createElement("script");return S.src="https://accounts.google.com/gsi/client",S.async=!0,S.defer=!0,S.nonce=i,S.onload=()=>{var m;x(!0),(m=B.current)===null||m===void 0||m.call(B)},S.onerror=()=>{var m;x(!1),(m=b.current)===null||m===void 0||m.call(b)},document.body.appendChild(S),()=>{document.body.removeChild(S)}},[i]),l}const sp=a.createContext(null);function ip({clientId:d,nonce:i,onScriptLoadSuccess:t,onScriptLoadError:s,children:l}){const x=ap({nonce:i,onScriptLoadSuccess:t,onScriptLoadError:s}),B=a.useMemo(()=>({clientId:d,scriptLoadedSuccessfully:x}),[d,x]);return e.createElement(sp.Provider,{value:B},l)}const $e=({children:d})=>{const i=to.isNativePlatform();return e.createElement("div",{style:{width:"100%",height:"100dvh",boxSizing:"border-box",paddingTop:i?"max(35px, env(safe-area-inset-top))":"0px",backgroundColor:"#1e1f22",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"}},d)};class cp extends e.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(i){return{hasError:!0}}componentDidCatch(i,t){console.error("üî¥ App Crashed:",i),console.error("Error Info:",t),this.setState({error:i,errorInfo:t});try{fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:i?.toString(),stack:i?.stack,componentStack:t?.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{})}catch(s){console.warn("Could not report error:",s)}}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()};render(){return this.state.hasError?e.createElement("div",{style:Gt.container},e.createElement("div",{style:Gt.content},e.createElement("div",{style:Gt.icon},"üí•"),e.createElement("h1",{style:Gt.title},"Oops! Bir ≈üeyler ters gitti"),e.createElement("p",{style:Gt.message},"√úzg√ºn√ºz, uygulama beklenmedik bir hatayla kar≈üƒ±la≈ütƒ±."),e.createElement("div",{style:Gt.actions},e.createElement("button",{onClick:this.handleReset,style:Gt.button},"üîÑ Yeniden Ba≈ülat"),e.createElement("button",{onClick:()=>window.location.href="/",style:{...Gt.button,...Gt.buttonSecondary}},"üè† Ana Sayfaya D√∂n")),!1)):this.props.children}}const Gt={container:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#1E1F22",color:"#FFFFFF",padding:"20px",fontFamily:"'Inter', sans-serif"},content:{textAlign:"center",maxWidth:"600px",padding:"40px",background:"linear-gradient(135deg, #2B2D31 0%, #1E1F22 100%)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},icon:{fontSize:"80px",marginBottom:"20px",animation:"shake 0.5s ease-in-out"},title:{fontSize:"32px",fontWeight:"bold",marginBottom:"16px",color:"#FFFFFF"},message:{fontSize:"16px",color:"#B9BBBE",marginBottom:"32px",lineHeight:"1.6"},actions:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},button:{padding:"12px 24px",fontSize:"16px",fontWeight:"600",border:"none",borderRadius:"8px",cursor:"pointer",backgroundColor:"#5865F2",color:"#FFFFFF",transition:"all 0.2s",":hover":{backgroundColor:"#4752C4"}},buttonSecondary:{backgroundColor:"#4E5058",":hover":{backgroundColor:"#6A6F78"}}},lp={async post(d,i,t={}){const s={"Content-Type":"application/json",...t.headers};console.log("üì° [API] POST request:",d);try{const l=await $a(d,{method:"POST",headers:s,body:JSON.stringify(i),credentials:"include"}),x=await l.json();if(!l.ok){const B=new Error(x.error||"Request failed");throw B.response={data:x,status:l.status},B}return{data:x,status:l.status}}catch(l){if(l.message==="No refresh token available"){const x=await fetch(d,{method:"POST",headers:s,body:JSON.stringify(i),credentials:"include"}),B=await x.json();if(!x.ok){const b=new Error(B.error||"Request failed");throw b.response={data:B,status:x.status},b}return{data:B,status:x.status}}throw l}},async get(d,i={}){const t={"Content-Type":"application/json",...i.headers};console.log("üì° [API] GET request:",d);try{const s=await $a(d,{method:"GET",headers:t,credentials:"include"}),l=await s.json();if(!s.ok){const x=new Error(l.error||"Request failed");throw x.response={data:l,status:s.status},x}return{data:l,status:s.status}}catch(s){if(s.message==="No refresh token available"){const l=await fetch(d,{method:"GET",headers:t,credentials:"include"}),x=await l.json();if(!l.ok){const B=new Error(x.error||"Request failed");throw B.response={data:x,status:l.status},B}return{data:x,status:l.status}}throw s}}},dp=({apiBaseUrl:d})=>{const[i]=Bl(),t=Co(),{login:s}=ro(),[l,x]=a.useState("processing"),[B,b]=a.useState(null),S=a.useRef(!1);return a.useEffect(()=>{(async()=>{if(S.current){console.log("üîê [AuthCallback] Exchange already attempted, skipping...");return}S.current=!0;const y=i.get("code"),A=i.get("access_token"),g=i.get("refresh_token"),k=i.get("error"),w=i.get("needs_password")==="true";if(console.log("üîê [AuthCallback] Starting...",{hasCode:!!y,hasAccessToken:!!A,apiBaseUrl:d}),k){console.error("üîê [AuthCallback] Error param:",k),x("error"),b("Google giri≈ü ba≈üarƒ±sƒ±z oldu. L√ºtfen tekrar deneyin."),setTimeout(()=>t("/"),3e3);return}if(A&&g){console.log("üîê [AuthCallback] Direct token mode");try{localStorage.setItem("accessToken",A),localStorage.setItem("refreshToken",g),s&&await s(A,g),x("success"),setTimeout(()=>{t(w?"/settings?section=security&action=set-password":"/")},1500)}catch(C){console.error("üîê [AuthCallback] Direct token error:",C),x("error"),b("Token i≈üleme hatasƒ±."),setTimeout(()=>t("/"),3e3)}return}if(!y){console.error("üîê [AuthCallback] No code or tokens found"),x("error"),b("Yetkilendirme bilgisi bulunamadƒ±."),setTimeout(()=>t("/"),3e3);return}try{x("exchanging");const C=`${d}/api/auth/exchange-code/`;console.log("üîê [AuthCallback] Exchanging code at:",C);const v=await lp.post(C,{code:y});if(console.log("üîê [AuthCallback] Response:",v.data),v.data.success){const{access_token:h,refresh_token:c,user_id:o,needs_password:n}=v.data;localStorage.setItem("accessToken",h),localStorage.setItem("refreshToken",c),s&&await s(h,c),x("success"),setTimeout(n?()=>{t("/settings?section=security&action=set-password")}:()=>{t("/")},1500)}else throw new Error(v.data.error||"Token exchange failed")}catch(C){console.error("Auth callback error:",C),x("error"),b(C.response?.data?.error||"Giri≈ü i≈ülemi ba≈üarƒ±sƒ±z oldu."),setTimeout(()=>t("/"),3e3)}})()},[i,t,s,d]),e.createElement("div",{className:"auth-callback-container"},e.createElement("div",{className:"auth-callback-card"},l==="processing"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-spinner"}),e.createElement("h2",null,"ƒ∞≈üleniyor..."),e.createElement("p",null,"Google hesabƒ±nƒ±z doƒürulanƒ±yor")),l==="exchanging"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-spinner"}),e.createElement("h2",null,"Giri≈ü Yapƒ±lƒ±yor..."),e.createElement("p",null,"G√ºvenli baƒülantƒ± kuruluyor")),l==="success"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-success-icon"},"‚úì"),e.createElement("h2",null,"Giri≈ü Ba≈üarƒ±lƒ±!"),e.createElement("p",null,"Y√∂nlendiriliyorsunuz...")),l==="error"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-error-icon"},"‚úï"),e.createElement("h2",null,"Hata"),e.createElement("p",null,B),e.createElement("p",{className:"auth-redirect-text"},"Ana sayfaya y√∂nlendiriliyorsunuz..."))))},up=e.lazy(()=>M(()=>import("./EnglishHub-DazEQJ0W.js"),__vite__mapDeps([163,1,2]),import.meta.url)),fp=e.lazy(()=>M(()=>import("./GrammarQuizPage-CqBUGN8O.js"),__vite__mapDeps([164,1,2,165]),import.meta.url)),mp=e.lazy(()=>M(()=>import("./EnglishLearningPage-CyTc5lr4.js"),__vite__mapDeps([166,1,2,165]),import.meta.url)),pp=e.lazy(()=>M(()=>import("./CryptoDashboard-KF6SOy2Y.js"),__vite__mapDeps([167,1,2]),import.meta.url)),xp=e.lazy(()=>M(()=>import("./CryptoSignals-0xaRk99Q.js"),__vite__mapDeps([168,1,2]),import.meta.url)),hp=e.lazy(()=>M(()=>import("./ForgotPasswordPage-CWSCOYjG.js"),__vite__mapDeps([114,1,2,32]),import.meta.url)),gp=e.lazy(()=>M(()=>import("./ResetPasswordPage-B3PBYFm2.js"),__vite__mapDeps([115,1,2]),import.meta.url)),yp=e.lazy(()=>M(()=>import("./TwoFactorLoginPage-rTej6dMB.js"),__vite__mapDeps([116,1,2]),import.meta.url)),vp=e.lazy(()=>M(()=>import("./VerifyEmailPage-QT1UjqN_.js"),__vite__mapDeps([113,1,2]),import.meta.url)),qi=e.lazy(()=>M(()=>import("./PrivacyPolicyPage-Cr-u9Mja.js"),__vite__mapDeps([169,1,2]),import.meta.url)),Ep=e.lazy(()=>M(()=>import("./LandingPage-CjDVw3b2.js"),__vite__mapDeps([170,1,2,134,171]),import.meta.url)),bp=e.lazy(()=>M(()=>import("./ReferralProgram-am-4NOO2.js"),__vite__mapDeps([172,1,2,134,173]),import.meta.url)),_p=e.lazy(()=>M(()=>import("./GrowthDashboard-AMjUMQP9.js"),__vite__mapDeps([174,1,2,134,28,175]),import.meta.url)),Sp=e.lazy(()=>M(()=>import("./ToastDemo-D1j_860m.js"),__vite__mapDeps([176,1,2,177]),import.meta.url)),wp=window.location.hostname==="pawscord.com"||window.location.hostname==="www.pawscord.com",Cp="192.168.68.53",kp="8888",m0=wp?"https://api.pawscord.com":`http://${Cp}:${kp}`,$t=`${m0}/api`,Ap="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",Bp=()=>(a.useEffect(()=>{const d=setTimeout(()=>{try{t0()}catch(i){console.warn("preloadCriticalChunks error",i)}},3e3);if("requestIdleCallback"in window)window.requestIdleCallback(()=>{try{Ra()}catch(i){console.warn("prefetchNextChunks error",i)}},{timeout:2e3});else{const i=setTimeout(()=>{try{Ra()}catch(t){console.warn("prefetchNextChunks error",t)}},4e3);return()=>clearTimeout(i)}return()=>clearTimeout(d)},[]),e.createElement(ip,{clientId:Ap},e.createElement(Vu,null,e.createElement(qu,null,e.createElement(cp,null,e.createElement(Tl,null,e.createElement(np,null),e.createElement(Fl,null,e.createElement(Re,{path:"/verify/:token",element:e.createElement($e,null,e.createElement(Xm,null))}),e.createElement(Re,{path:"/verify-email/:token",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(vp,{apiBaseUrl:$t})))}),e.createElement(Re,{path:"/forgot-password",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(hp,{apiBaseUrl:$t})))}),e.createElement(Re,{path:"/reset-password/:token",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(gp,{apiBaseUrl:$t})))}),e.createElement(Re,{path:"/2fa-login",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(yp,{apiBaseUrl:$t})))}),e.createElement(Re,{path:"/auth/callback",element:e.createElement($e,null,e.createElement(dp,{apiBaseUrl:m0}))}),e.createElement(Re,{path:"/privacy-policy",element:e.createElement(e.Suspense,{fallback:e.createElement("div",{style:{padding:"40px",textAlign:"center",color:"#fff"}},"Loading...")},e.createElement(qi,null))}),e.createElement(Re,{path:"/terms-of-service",element:e.createElement(e.Suspense,{fallback:e.createElement("div",{style:{padding:"40px",textAlign:"center",color:"#fff"}},"Loading...")},e.createElement(qi,null))}),e.createElement(Re,{path:"/launch",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Ep,{apiBaseUrl:$t})))}),e.createElement(Re,{path:"/referral",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(bp,{apiBaseUrl:$t})))}),e.createElement(Re,{path:"/growth-dashboard",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(_p,{apiBaseUrl:$t})))}),e.createElement(Re,{path:"/toast-demo",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Sp,null)))}),e.createElement(Re,{path:"/invite/:code",element:e.createElement($e,null,e.createElement(Zm,null))}),e.createElement(Re,{path:"/spotify-callback",element:e.createElement($e,null,e.createElement(op,{apiBaseUrl:$t}))}),e.createElement(Re,{path:"/eng-learn",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(up,null)))}),e.createElement(Re,{path:"/eng-learn/vocab",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(mp,null)))}),e.createElement(Re,{path:"/eng-learn/grammar",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(fp,null)))}),e.createElement(Re,{path:"/eng-learn/voice",element:e.createElement($e,null,e.createElement(Qm,{apiBaseUrl:$t}))}),e.createElement(Re,{path:"/eng-learn/pronunciation",element:e.createElement($e,null,e.createElement(tp,{apiBaseUrl:$t}))}),e.createElement(Re,{path:"/crypto-analysis",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(xp,null)))}),e.createElement(Re,{path:"/crypto-dashboard-old",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(pp,null)))}),e.createElement(Re,{path:"/*",element:e.createElement(Km,null)})))))))),Dp=Dl.createRoot(document.getElementById("root"));Dp.render(e.createElement(Bp,null));export{Mu as A,to as C,Hl as G,Il as S,Pa as T,e0 as W,ro as a,px as b,xx as c,Pu as d,He as e,fx as f,mx as g,ux as h,ja as i,Tr as j,ad as k,Ge as l,Gu as m,Cu as n,Va as r,ie as t,c0 as u};
