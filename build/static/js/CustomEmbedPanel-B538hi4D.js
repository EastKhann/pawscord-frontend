var G=Object.defineProperty;var n=(c,h)=>G(c,"name",{value:h,configurable:!0});import{r as t,j as e}from"./react-core-Djgtqrmb.js";import{y as o}from"./ui-vendor-IhB9Znpc.js";import{g as J,e as H}from"./index-CjRzheBN.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BW7dxHkX.js";const M=n(({serverId:c,onClose:h})=>{const d=J(),[p,f]=t.useState([]),[v,k]=t.useState([]),[C,N]=t.useState(!0),[j,b]=t.useState(!1),[l,i]=t.useState({title:"",description:"",color:"#5865f2",thumbnail:"",image:"",author_name:"",author_icon:"",footer_text:"",footer_icon:"",fields:[]}),[m,y]=t.useState("");t.useEffect(()=>{u(),_()},[c]);const u=n(async()=>{try{const s=await fetch(`${d}/custom-embeds/server/${c}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(s.ok){const a=await s.json();f(a)}}catch{}finally{N(!1)}},"fetchEmbeds"),_=n(async()=>{try{const s=await fetch(`${d}/channels/server/${c}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(s.ok){const a=await s.json();k(a.filter(r=>r.type==="text"))}}catch{}},"fetchChannels"),E=n(async()=>{if(!l.title&&!l.description){o.error("âŒ En az baÅŸlÄ±k veya aÃ§Ä±klama gerekli");return}try{(await fetch(`${d}/custom-embeds/save/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:c,...l})})).ok?(o.success("âœ… Embed kaydedildi"),b(!1),u(),A()):o.error("âŒ Kaydetme hatasÄ±")}catch{o.error("âŒ BaÄŸlantÄ± hatasÄ±")}},"saveEmbed"),S=n(async s=>{if(!m){o.error("âŒ LÃ¼tfen bir kanal seÃ§in");return}try{(await fetch(`${d}/custom-embeds/${s}/send/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({channel_id:m})})).ok?o.success("âœ… Embed gÃ¶nderildi"):o.error("âŒ GÃ¶nderim hatasÄ±")}catch{o.error("âŒ BaÄŸlantÄ± hatasÄ±")}},"sendEmbed"),w=n(async s=>{if(await H("Embed'i silmek istediÄŸinize emin misiniz?"))try{(await fetch(`${d}/custom-embeds/${s}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).ok&&(o.success("âœ… Embed silindi"),u())}catch{o.error("âŒ Silme hatasÄ±")}},"deleteEmbed"),z=n(()=>{i({...l,fields:[...l.fields,{name:"",value:"",inline:!1}]})},"addField"),x=n((s,a,r)=>{const g=[...l.fields];g[s][a]=r,i({...l,fields:g})},"updateField"),$=n(s=>{i({...l,fields:l.fields.filter((a,r)=>r!==s)})},"removeField"),A=n(()=>{i({title:"",description:"",color:"#5865f2",thumbnail:"",image:"",author_name:"",author_icon:"",footer_text:"",footer_icon:"",fields:[]})},"resetEmbed"),B=t.useCallback(s=>s.stopPropagation(),[]),T=t.useCallback(()=>b(s=>!s),[]),F=t.useCallback(s=>y(s.target.value),[]),L=t.useCallback(s=>i(a=>({...a,author_name:s.target.value})),[]),R=t.useCallback(s=>i(a=>({...a,author_icon:s.target.value})),[]),I=t.useCallback(s=>i(a=>({...a,title:s.target.value})),[]),O=t.useCallback(s=>i(a=>({...a,description:s.target.value})),[]),P=t.useCallback(s=>i(a=>({...a,color:s.target.value})),[]),K=t.useCallback(s=>i(a=>({...a,thumbnail:s.target.value})),[]),U=t.useCallback(s=>i(a=>({...a,image:s.target.value})),[]),D=t.useCallback(s=>i(a=>({...a,footer_text:s.target.value})),[]),Y=t.useCallback(s=>i(a=>({...a,footer_icon:s.target.value})),[]);return e.jsx("div",{className:"custom-embed-overlay",onClick:h,children:e.jsxs("div",{className:"custom-embed-panel",onClick:B,children:[e.jsxs("div",{className:"custom-embed-header",children:[e.jsx("h2",{children:"ğŸ“ Ã–zel Embed OluÅŸturucu"}),e.jsx("button",{className:"close-btn",onClick:h,children:"Ã—"})]}),e.jsxs("div",{className:"custom-embed-content",children:[e.jsx("button",{className:"create-embed-btn",onClick:T,children:j?"âŒ DÃ¼zenleyiciyi Kapat":"+ Yeni Embed OluÅŸtur"}),j&&e.jsxs("div",{className:"embed-editor",children:[e.jsxs("div",{className:"editor-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Yazar"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ä°sim"}),e.jsx("input",{value:l.author_name,onChange:L,placeholder:"Yazar adÄ±"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ä°kon URL"}),e.jsx("input",{value:l.author_icon,onChange:R,placeholder:"https://..."})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Ä°Ã§erik"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"BaÅŸlÄ±k"}),e.jsx("input",{value:l.title,onChange:I,placeholder:"Embed baÅŸlÄ±ÄŸÄ±"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"AÃ§Ä±klama"}),e.jsx("textarea",{value:l.description,onChange:O,rows:"4",placeholder:"Embed aÃ§Ä±klamasÄ±"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Renk"}),e.jsx("input",{type:"color",value:l.color,onChange:P})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"GÃ¶rseller"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KÃ¼Ã§Ã¼k Resim URL"}),e.jsx("input",{value:l.thumbnail,onChange:K,placeholder:"https://..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"BÃ¼yÃ¼k Resim URL"}),e.jsx("input",{value:l.image,onChange:U,placeholder:"https://..."})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"Alanlar"}),e.jsx("button",{className:"add-field-btn",onClick:z,children:"+ Alan Ekle"})]}),l.fields.map((s,a)=>e.jsx("div",{className:"field-item",children:e.jsxs("div",{className:"field-inputs",children:[e.jsx("input",{value:s.name,onChange:n(r=>x(a,"name",r.target.value),"onChange"),placeholder:"Alan adÄ±"}),e.jsx("input",{value:s.value,onChange:n(r=>x(a,"value",r.target.value),"onChange"),placeholder:"Alan deÄŸeri"}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:s.inline,onChange:n(r=>x(a,"inline",r.target.checked),"onChange")}),e.jsx("span",{children:"Inline"})]}),e.jsx("button",{className:"remove-field-btn",onClick:n(()=>$(a),"onClick"),children:"ğŸ—‘ï¸"})]})},a))]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Footer"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Metin"}),e.jsx("input",{value:l.footer_text,onChange:D,placeholder:"Footer metni"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ä°kon URL"}),e.jsx("input",{value:l.footer_icon,onChange:Y,placeholder:"https://..."})]})]})]}),e.jsx("button",{className:"save-embed-btn",onClick:E,children:"ğŸ’¾ Kaydet"})]}),e.jsxs("div",{className:"embed-preview",children:[e.jsx("h3",{children:"Ã–nizleme"}),e.jsxs("div",{className:"discord-embed",style:{borderLeftColor:l.color},children:[l.author_name&&e.jsxs("div",{className:"embed-author",children:[l.author_icon&&e.jsx("img",{src:l.author_icon,alt:""}),e.jsx("span",{children:l.author_name})]}),l.title&&e.jsx("div",{className:"embed-title",children:l.title}),l.description&&e.jsx("div",{className:"embed-description",children:l.description}),l.fields.length>0&&e.jsx("div",{className:"embed-fields",children:l.fields.map((s,a)=>e.jsxs("div",{className:`embed-field ${s.inline?"inline":""}`,children:[e.jsx("div",{className:"field-name",children:s.name}),e.jsx("div",{className:"field-value",children:s.value})]},a))}),l.image&&e.jsx("img",{className:"embed-image",src:l.image,alt:""}),l.footer_text&&e.jsxs("div",{className:"embed-footer",children:[l.footer_icon&&e.jsx("img",{src:l.footer_icon,alt:""}),e.jsx("span",{children:l.footer_text})]})]})]})]}),C?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"YÃ¼kleniyor..."})]}):p.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("span",{className:"empty-icon",children:"ğŸ“"}),e.jsx("p",{children:"HenÃ¼z kayÄ±tlÄ± embed yok"})]}):e.jsx("div",{className:"embeds-list",children:p.map(s=>e.jsxs("div",{className:"embed-card",children:[e.jsxs("div",{className:"embed-info",children:[e.jsx("h4",{children:s.title||"BaÅŸlÄ±ksÄ±z Embed"}),e.jsxs("p",{children:[s.description?.substring(0,100),s.description?.length>100?"...":""]})]}),e.jsxs("div",{className:"embed-actions",children:[e.jsxs("select",{value:m,onChange:F,children:[e.jsx("option",{value:"",children:"Kanal seÃ§"}),v.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx("button",{onClick:n(()=>S(s.id),"onClick"),children:"ğŸ“¤ GÃ¶nder"}),e.jsx("button",{onClick:n(()=>w(s.id),"onClick"),children:"ğŸ—‘ï¸"})]})]},s.id))})]})]})})},"CustomEmbedPanel"),le=t.memo(M);export{le as default};
