{"version":3,"file":"urlHandlers-_pbByjvw.js","sources":["../../../src/utils/urlHandlers.js"],"sourcesContent":["// frontend/src/utils/urlHandlers.js\n// ðŸ”— Deep Link & URL Handlers for APK\nimport toast from './toast';\n\n/**\n * Handle deep links in APK\n */\nexport const initializeDeepLinkHandler = (navigate) => {\n    // Check if running in Capacitor\n    if (!window.Capacitor?.isNativePlatform()) {\n        return;\n    }\n\n    // Listen for app URL open\n    window.Capacitor.Plugins.App.addListener('appUrlOpen', (data) => {\n        handleDeepLink(data.url, navigate);\n    });\n\n};\n\n/**\n * Parse and handle deep link\n */\nexport const handleDeepLink = (url, navigate) => {\n    try {\n\n        // Example: pawscord://chat/123\n        const urlObj = new URL(url);\n        const path = urlObj.pathname;\n        const params = new URLSearchParams(urlObj.search);\n\n        // Route to appropriate screen\n        if (path.startsWith('/chat/')) {\n            const conversationId = path.split('/chat/')[1];\n            navigate(`/chat/${conversationId}`);\n        } else if (path.startsWith('/server/')) {\n            const serverId = path.split('/server/')[1];\n            navigate(`/server/${serverId}`);\n        } else if (path.startsWith('/profile/')) {\n            const userId = path.split('/profile/')[1];\n            navigate(`/profile/${userId}`);\n        } else if (path === '/notifications') {\n            navigate('/notifications');\n        } else {\n            navigate(path || '/');\n        }\n\n    } catch (error) {\n        console.error('âŒ Deep link error:', error);\n    }\n};\n\n/**\n * Share content from app\n */\nexport const shareContent = async (title, text, url) => {\n    try {\n        // Web Share API\n        if (navigator.share) {\n            await navigator.share({\n                title,\n                text,\n                url\n            });\n            return true;\n        }\n\n        // Fallback: Copy to clipboard\n        if (navigator.clipboard) {\n            await navigator.clipboard.writeText(url || text);\n            toast.success('âœ… Link copied to clipboard!');\n            return true;\n        }\n\n        return false;\n    } catch (error) {\n        console.error('Share error:', error);\n        return false;\n    }\n};\n\n/**\n * Open external URL\n */\nexport const openExternalUrl = async (url) => {\n    try {\n        // Check if in Capacitor\n        if (window.Capacitor?.isNativePlatform()) {\n            const { Browser } = await import('@capacitor/browser');\n            await Browser.open({ url });\n        } else {\n            window.open(url, '_blank');\n        }\n        return true;\n    } catch (error) {\n        console.error('Open URL error:', error);\n        return false;\n    }\n};\n\n/**\n * Copy text to clipboard\n */\nexport const copyToClipboard = async (text) => {\n    try {\n        if (navigator.clipboard) {\n            await navigator.clipboard.writeText(text);\n            return true;\n        }\n\n        // Fallback for older browsers\n        const textArea = document.createElement('textarea');\n        textArea.value = text;\n        textArea.style.position = 'fixed';\n        textArea.style.left = '-999999px';\n        document.body.appendChild(textArea);\n        textArea.select();\n        document.execCommand('copy');\n        document.body.removeChild(textArea);\n        return true;\n    } catch (error) {\n        console.error('Copy error:', error);\n        return false;\n    }\n};\n\n/**\n * Get app URL for sharing\n */\nexport const getAppUrl = (path = '') => {\n    // Dynamic base URL detection\n    const isElectron = window.navigator?.userAgent?.toLowerCase().includes('electron');\n    const isPawscordDomain = window.location.hostname.includes('pawscord.com');\n    const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n\n    let baseUrl;\n    if (isElectron || isPawscordDomain) {\n        baseUrl = 'https://www.pawscord.com';\n    } else if (isLocalhost) {\n        baseUrl = `${window.location.protocol}//${window.location.host}`;\n    } else {\n        baseUrl = window.location.origin;\n    }\n\n    return `${baseUrl}${path.startsWith('/') ? path : '/' + path}`;\n};\n\n/**\n * Get deep link URL\n */\nexport const getDeepLinkUrl = (path = '') => {\n    return `pawscord://${path.startsWith('/') ? path.substring(1) : path}`;\n};\n\n/**\n * Check if running as installed PWA\n */\nexport const isInstalledPWA = () => {\n    return window.matchMedia('(display-mode: standalone)').matches ||\n        window.navigator.standalone === true ||\n        document.referrer.includes('android-app://');\n};\n\n/**\n * Prompt PWA installation\n */\nexport const promptPWAInstall = () => {\n    if (window.deferredPrompt) {\n        window.deferredPrompt.prompt();\n        window.deferredPrompt.userChoice.then((choiceResult) => {\n            if (choiceResult.outcome === 'accepted') {\n            }\n            window.deferredPrompt = null;\n        });\n    }\n};\n\n// PWA install prompt managed by pwaHelper.js â€” no duplicate listener needed\n\nexport default {\n    initializeDeepLinkHandler,\n    handleDeepLink,\n    shareContent,\n    openExternalUrl,\n    copyToClipboard,\n    getAppUrl,\n    getDeepLinkUrl,\n    isInstalledPWA,\n    promptPWAInstall\n};\n\n\n"],"names":[],"mappings":";;;;;;;;;;AAOO,MAAM,4BAA4B,wBAAC,aAAa;AAEnD,MAAI,CAAC,OAAO,WAAW,oBAAoB;AACvC;AAAA,EACJ;AAGA,SAAO,UAAU,QAAQ,IAAI,YAAY,cAAc,CAAC,SAAS;AAC7D,mBAAe,KAAK,KAAK,QAAQ;AAAA,EACrC,CAAC;AAEL,GAXyC;AAgBlC,MAAM,iBAAiB,wBAAC,KAAK,aAAa;AAC7C,MAAI;AAGA,UAAM,SAAS,IAAI,IAAI,GAAG;AAC1B,UAAM,OAAO,OAAO;AACpB,UAAM,SAAS,IAAI,gBAAgB,OAAO,MAAM;AAGhD,QAAI,KAAK,WAAW,QAAQ,GAAG;AAC3B,YAAM,iBAAiB,KAAK,MAAM,QAAQ,EAAE,CAAC;AAC7C,eAAS,SAAS,cAAc,EAAE;AAAA,IACtC,WAAW,KAAK,WAAW,UAAU,GAAG;AACpC,YAAM,WAAW,KAAK,MAAM,UAAU,EAAE,CAAC;AACzC,eAAS,WAAW,QAAQ,EAAE;AAAA,IAClC,WAAW,KAAK,WAAW,WAAW,GAAG;AACrC,YAAM,SAAS,KAAK,MAAM,WAAW,EAAE,CAAC;AACxC,eAAS,YAAY,MAAM,EAAE;AAAA,IACjC,WAAW,SAAS,kBAAkB;AAClC,eAAS,gBAAgB;AAAA,IAC7B,OAAO;AACH,eAAS,QAAQ,GAAG;AAAA,IACxB;AAAA,EAEJ,SAAS,OAAO;AACZ,YAAQ,MAAM,sBAAsB,KAAK;AAAA,EAC7C;AACJ,GA3B8B;"}