var z=Object.defineProperty;var o=(c,r)=>z(c,"name",{value:r,configurable:!0});import{r as d,j as t}from"./react-core-Djgtqrmb.js";import{aV as L,f as R,j as U,a as B}from"./icons-vendor-BW7dxHkX.js";import{P as V,t as i,e as E}from"./index-D_luy7FO.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const H=o(({onClose:c,fetchWithAuth:r,apiBaseUrl:g,serverId:a,embedded:k=!1})=>{const[s,y]=d.useState(""),[f,p]=d.useState(!1),[x,u]=d.useState(null),[v,b]=d.useState(!0);d.useEffect(()=>{h()},[a]);const h=o(async()=>{if(!a){b(!1);return}b(!0);try{const e=await r(`${g}/vanity/get/${a}/`);if(e.ok){if(!(e.headers.get("content-type")||"").includes("application/json")){u(null);return}const m=await e.json();m.exists?(u(m),y(m.path)):u(null)}}catch{}finally{b(!1)}},"loadExistingVanity"),w=o(async()=>{if(!s.trim()){i.warning("L√ºtfen bir vanity path girin");return}if(s.length<3){i.warning("Path en az 3 karakter olmalƒ±");return}p(!0);try{const e=await r(`${g}/vanity/create/`,{method:"POST",body:JSON.stringify({path:s,server_id:a})});if(e.ok){const l=await e.json();i.success("Vanity URL olu≈üturuldu!"),h()}else{const l=await e.json();i.error("Hata: "+(l.error||"Bu path zaten kullanƒ±lƒ±yor"))}}catch{i.error("Sunucu hatasƒ±")}finally{p(!1)}},"handleCreate"),S=o(async()=>{if(await E("Vanity URL'i silmek istediƒüinize emin misiniz?")){p(!0);try{const e=await r(`${g}/vanity/delete/${a}/`,{method:"DELETE"});if(e.ok)i.success("Vanity URL silindi!"),u(null),y("");else{const l=await e.json();i.error("Hata: "+(l.error||"Silme ba≈üarƒ±sƒ±z"))}}catch{i.error("Sunucu hatasƒ±")}finally{p(!1)}}},"handleDelete"),C=o(()=>{const e=`${V}/join/${x.path}`;navigator.clipboard.writeText(e),i.success("URL kopyalandƒ±!")},"copyUrl"),j=t.jsx(t.Fragment,{children:v?t.jsx("div",{style:n.description,children:"Y√ºkleniyor..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:n.description,children:["Sunucunuz i√ßin √∂zel bir davet URL'i olu≈üturun.",t.jsx("br",{}),t.jsxs("span",{style:{fontSize:"0.9em",color:"#72767d"},children:["Format: ",t.jsx("strong",{style:{color:"#5865f2"},children:"pawscord.com/join/yourpath"})]})]}),x&&t.jsxs("div",{style:n.existingSection,children:[t.jsx("div",{style:n.existingLabel,children:"üìå Mevcut Vanity URL:"}),t.jsxs("div",{style:n.existingUrl,children:[t.jsxs("span",{style:n.urlText,children:["pawscord.com/join/",x.path]}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsxs("button",{onClick:C,style:n.copyButton,children:[t.jsx(L,{})," Kopyala"]}),t.jsxs("button",{onClick:S,style:n.deleteButton,disabled:f,children:[t.jsx(R,{})," Sil"]})]})]})]}),t.jsxs("div",{style:n.inputGroup,children:[t.jsx("span",{style:n.prefix,children:"pawscord.com/join/"}),t.jsx("input",{type:"text",value:s,onChange:o(e=>y(e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")),"onChange"),placeholder:"myserver",style:n.input,maxLength:32})]}),t.jsxs("div",{style:{fontSize:"0.85em",color:"#72767d",marginTop:"8px",marginBottom:"15px"},children:["‚Ä¢ En az 3, en fazla 32 karakter",t.jsx("br",{}),"‚Ä¢ Sadece k√º√ß√ºk harf, rakam ve tire (-) kullanƒ±labilir",t.jsx("br",{}),"‚Ä¢ Sistem kelimeleri (api, admin, vb.) kullanƒ±lamaz"]}),t.jsx("button",{onClick:w,disabled:f||!s.trim(),style:n.createButton,children:f?"ƒ∞≈üleniyor...":x?"üîó Vanity URL G√ºncelle":"üîó Vanity URL Olu≈ütur"})]})});return k?t.jsx("div",{style:n.content,children:j}):t.jsx("div",{style:n.overlay,onClick:c,children:t.jsxs("div",{style:n.modal,onClick:o(e=>e.stopPropagation(),"onClick"),children:[t.jsxs("div",{style:n.header,children:[t.jsxs("h3",{style:n.title,children:[t.jsx(U,{})," Vanity URL Olu≈ütur"]}),t.jsx("button",{onClick:c,style:n.closeButton,children:t.jsx(B,{})})]}),t.jsx("div",{style:n.content,children:j})]})})},"VanityURLManager"),n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"500px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.3em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.3em"},content:{padding:"20px"},description:{color:"#b9bbbe",fontSize:"0.9em",marginBottom:"15px",padding:"10px",backgroundColor:"#40444b",borderRadius:"4px"},existingSection:{marginBottom:"20px",padding:"15px",backgroundColor:"#2f3136",borderRadius:"8px",border:"1px solid #5865f2"},existingLabel:{color:"#5865f2",fontWeight:"bold",marginBottom:"10px",fontSize:"0.9em"},existingUrl:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"},urlText:{color:"#fff",fontWeight:"bold",fontSize:"1em"},inputGroup:{display:"flex",alignItems:"center",backgroundColor:"#40444b",borderRadius:"4px",padding:"5px",marginBottom:"15px"},prefix:{color:"#b9bbbe",padding:"0 10px",fontWeight:"bold"},input:{flex:1,padding:"10px",backgroundColor:"transparent",border:"none",color:"white",fontSize:"1em",outline:"none"},copyButton:{padding:"8px 12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:"bold"},deleteButton:{padding:"8px 12px",backgroundColor:"#ed4245",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:"bold"},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"}};export{H as default};
