import{r as a,n as s}from"./react-core-zXIKm1Jm.js";import{G as r,a as S,ax as u,R as v,q as N,m as F,c1 as T,ar as b,ap as w,b3 as A,a5 as R,c2 as P,at as I}from"./icons-vendor-BBdoVeJd.js";import{g as $}from"./index-3G_5S7Np.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-PJALNo1v.js";import"./crypto-vendor-D_AcF0lD.js";import"./state-vendor-8NbFPBhQ.js";const H=({serverId:E,channelId:d,onClose:c,onUseSuggestion:m,fetchWithAuth:p})=>{const[i,l]=a.useState(null),[y,h]=a.useState(!0),[n,o]=a.useState("replies"),[f,x]=a.useState(null),j=a.useCallback(async()=>{h(!0);try{const e=await p(`${$()}/channels/${d}/suggestions/`);if(e.ok){const t=await e.json();l(t)}else l({quick_replies:[{id:1,text:"That's a great idea! ðŸŽ‰",confidence:95,context:"Positive response"},{id:2,text:"I'll look into that and get back to you.",confidence:88,context:"Action commitment"},{id:3,text:"Thanks for sharing! Very helpful.",confidence:85,context:"Appreciation"},{id:4,text:"Could you elaborate on that?",confidence:82,context:"Clarification"},{id:5,text:"Let me check the documentation first.",confidence:78,context:"Investigation"}],trending_topics:[{topic:"Server Events",mentions:45,trend:"up"},{topic:"Gaming Night",mentions:38,trend:"up"},{topic:"Music Playlist",mentions:27,trend:"stable"},{topic:"New Members",mentions:23,trend:"down"}],suggested_emojis:["ðŸ‘","ðŸŽ‰","â¤ï¸","ðŸ”¥","ðŸ˜‚","ðŸ™","ðŸ’¯","âœ¨"],conversation_insights:{sentiment:"positive",activity_level:"high",response_rate:87,avg_response_time:"2.3 min"},smart_actions:[{id:1,action:"Create a poll about this topic",icon:"poll",type:"engagement"},{id:2,action:"Share relevant resources",icon:"share",type:"helpful"},{id:3,action:"Invite related experts",icon:"invite",type:"growth"},{id:4,action:"Pin important message",icon:"pin",type:"moderation"}]})}catch(e){console.error("Error loading suggestions:",e),l({quick_replies:[],trending_topics:[],suggested_emojis:[]})}h(!1)},[d,p]);a.useEffect(()=>{j()},[j]);const _=(e,t)=>{navigator.clipboard.writeText(e),x(t),setTimeout(()=>x(null),2e3)},g=e=>{m&&m(e),c()},k=e=>{switch(e){case"positive":return"#10b981";case"neutral":return"#6b7280";case"negative":return"#ef4444";default:return"#6b7280"}},C=e=>e==="up"?s.jsx("span",{className:"trend up",children:"â†‘"}):e==="down"?s.jsx("span",{className:"trend down",children:"â†“"}):s.jsx("span",{className:"trend stable",children:"â†’"});return y?s.jsx("div",{className:"smart-suggestions-overlay",onClick:c,children:s.jsx("div",{className:"smart-suggestions-panel",onClick:e=>e.stopPropagation(),children:s.jsxs("div",{className:"loading-state",children:[s.jsx(r,{className:"pulse"}),s.jsx("span",{children:"Analyzing conversation..."})]})})}):s.jsx("div",{className:"smart-suggestions-overlay",onClick:c,children:s.jsxs("div",{className:"smart-suggestions-panel",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{className:"header-info",children:[s.jsxs("h2",{children:[s.jsx(r,{})," Smart Suggestions"]}),s.jsx("span",{className:"powered-by",children:"Powered by AI"})]}),s.jsx("button",{className:"close-btn",onClick:c,children:s.jsx(S,{})})]}),s.jsxs("div",{className:"insights-bar",children:[s.jsxs("div",{className:"insight",children:[s.jsx("span",{className:"insight-label",children:"Sentiment"}),s.jsx("span",{className:"insight-value sentiment",style:{color:k(i?.conversation_insights?.sentiment)},children:i?.conversation_insights?.sentiment||"neutral"})]}),s.jsxs("div",{className:"insight",children:[s.jsx("span",{className:"insight-label",children:"Activity"}),s.jsx("span",{className:"insight-value",children:i?.conversation_insights?.activity_level||"normal"})]}),s.jsxs("div",{className:"insight",children:[s.jsx("span",{className:"insight-label",children:"Response Rate"}),s.jsxs("span",{className:"insight-value",children:[i?.conversation_insights?.response_rate||0,"%"]})]}),s.jsxs("div",{className:"insight",children:[s.jsx("span",{className:"insight-label",children:"Avg. Response"}),s.jsx("span",{className:"insight-value",children:i?.conversation_insights?.avg_response_time||"N/A"})]})]}),s.jsxs("div",{className:"tabs",children:[s.jsxs("button",{className:`tab ${n==="replies"?"active":""}`,onClick:()=>o("replies"),children:[s.jsx(u,{})," Quick Replies"]}),s.jsxs("button",{className:`tab ${n==="topics"?"active":""}`,onClick:()=>o("topics"),children:[s.jsx(v,{})," Trending"]}),s.jsxs("button",{className:`tab ${n==="actions"?"active":""}`,onClick:()=>o("actions"),children:[s.jsx(N,{})," Smart Actions"]})]}),s.jsxs("div",{className:"tab-content",children:[n==="replies"&&s.jsxs("div",{className:"replies-tab",children:[s.jsxs("div",{className:"emoji-bar",children:[s.jsxs("span",{className:"emoji-label",children:[s.jsx(F,{})," Quick Reactions:"]}),s.jsx("div",{className:"emoji-list",children:(i?.suggested_emojis||[]).map((e,t)=>s.jsx("button",{className:"emoji-btn",onClick:()=>g(e),title:"Click to use",children:e},t))})]}),s.jsxs("div",{className:"replies-list",children:[s.jsxs("h4",{children:[s.jsx(T,{})," Suggested Replies"]}),(i?.quick_replies||[]).map(e=>s.jsxs("div",{className:"reply-item",children:[s.jsxs("div",{className:"reply-content",children:[s.jsx("span",{className:"reply-text",children:e.text}),s.jsxs("div",{className:"reply-meta",children:[s.jsx("span",{className:"context",children:e.context}),s.jsxs("span",{className:"confidence",children:[s.jsx(b,{})," ",e.confidence,"%"]})]})]}),s.jsxs("div",{className:"reply-actions",children:[s.jsx("button",{className:"action-btn copy",onClick:()=>_(e.text,e.id),title:"Copy to clipboard",children:f===e.id?s.jsx(w,{}):s.jsx(A,{})}),s.jsx("button",{className:"action-btn use",onClick:()=>g(e.text),title:"Use this reply",children:s.jsx(u,{})})]})]},e.id))]})]}),n==="topics"&&s.jsxs("div",{className:"topics-tab",children:[s.jsxs("h4",{children:[s.jsx(R,{})," Trending Topics in This Channel"]}),s.jsxs("div",{className:"topics-list",children:[(i?.trending_topics||[]).map((e,t)=>s.jsxs("div",{className:"topic-item",children:[s.jsxs("span",{className:"topic-rank",children:["#",t+1]}),s.jsxs("div",{className:"topic-info",children:[s.jsx("span",{className:"topic-name",children:e.topic}),s.jsxs("span",{className:"topic-mentions",children:[e.mentions," mentions"]})]}),C(e.trend)]},t)),(!i?.trending_topics||i.trending_topics.length===0)&&s.jsx("div",{className:"empty-state",children:"No trending topics yet"})]})]}),n==="actions"&&s.jsxs("div",{className:"actions-tab",children:[s.jsxs("h4",{children:[s.jsx(N,{})," Recommended Actions"]}),s.jsx("div",{className:"actions-list",children:(i?.smart_actions||[]).map(e=>s.jsxs("div",{className:`action-item ${e.type}`,children:[s.jsxs("div",{className:"action-icon",children:[e.icon==="poll"&&s.jsx(v,{}),e.icon==="share"&&s.jsx(P,{}),e.icon==="invite"&&s.jsx(I,{}),e.icon==="pin"&&s.jsx(b,{})]}),s.jsx("span",{className:"action-text",children:e.action}),s.jsx("span",{className:`action-type ${e.type}`,children:e.type})]},e.id))}),s.jsxs("div",{className:"ai-tip",children:[s.jsx(r,{}),s.jsx("span",{children:"These suggestions are based on conversation patterns and community engagement metrics."})]})]})]})]})})};export{H as default};
