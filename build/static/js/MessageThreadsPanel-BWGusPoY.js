import{r as n,b as e}from"./react-core-9vc7GIjk.js";import{at as m,a as v,aq as S,e as g,g as B,c as w}from"./icons-vendor-C1zuqBwn.js";import{t as a}from"./index-C1-LpR7z.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const A=({fetchWithAuth:l,apiBaseUrl:s,messageId:d,onClose:u})=>{const[z,I]=n.useState(null),[f,b]=n.useState([]),[E,x]=n.useState(!0),[c,y]=n.useState(""),[h,p]=n.useState(!1);n.useEffect(()=>{d&&i()},[d]);const i=async()=>{try{x(!0);const t=await l(`${s}/threads/list/`);if(t.ok){const o=await t.json();b(o)}}catch(t){console.error("Thread yükleme hatası:",t),a.error("Thread'ler yüklenemedi")}finally{x(!1)}},k=async()=>{if(!c.trim()){a.error("Thread adı gerekli");return}try{(await l(`${s}/threads/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message_id:d,name:c})})).ok?(a.success("Thread oluşturuldu"),y(""),p(!1),i()):a.error("Thread oluşturulamadı")}catch(t){console.error("Thread oluşturma hatası:",t),a.error("Bir hata oluştu")}},T=async t=>{try{(await l(`${s}/threads/subscribe/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:t})})).ok&&(a.success("Thread'e abone oldunuz"),i())}catch(o){console.error("Abone olma hatası:",o),a.error("Bir hata oluştu")}},C=async t=>{try{(await l(`${s}/threads/${t}/pin/`,{method:"POST"})).ok&&(a.success("Thread sabitlendi"),i())}catch(o){console.error("Pinleme hatası:",o),a.error("Bir hata oluştu")}};return e.createElement("div",{style:r.overlay,onClick:u},e.createElement("div",{style:r.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:r.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(m,{style:{color:"#5865f2"}}),e.createElement("h2",{style:{margin:0}},"Thread\\'ler")),e.createElement(v,{onClick:u,style:r.closeBtn})),e.createElement("div",{style:r.toolbar},e.createElement("button",{onClick:()=>p(!h),style:r.createBtn},e.createElement(S,null)," Yeni Thread")),h&&e.createElement("div",{style:r.createForm},e.createElement("input",{type:"text",placeholder:"Thread adı...",value:c,onChange:t=>y(t.target.value),style:r.input,autoFocus:!0}),e.createElement("div",{style:{display:"flex",gap:"10px"}},e.createElement("button",{onClick:k,style:r.saveBtn},"Oluştur"),e.createElement("button",{onClick:()=>p(!1),style:r.cancelBtn},"İptal"))),e.createElement("div",{style:r.threadsList},E?e.createElement("div",{style:r.loading},"Yükleniyor..."):f.length===0?e.createElement("div",{style:r.empty},e.createElement(m,{style:{fontSize:"48px",color:"#555"}}),e.createElement("p",null,"Henüz thread yok")):f.map(t=>e.createElement("div",{key:t.id,style:r.threadItem},e.createElement("div",{style:r.threadIcon},e.createElement(m,{style:{color:"#5865f2"}})),e.createElement("div",{style:r.threadContent},e.createElement("div",{style:r.threadName},t.name),e.createElement("div",{style:r.threadMeta},e.createElement("span",null,t.message_count||0," mesaj"),e.createElement("span",null,"•"),e.createElement("span",null,t.subscriber_count||0," abone"))),e.createElement("div",{style:r.threadActions},t.is_pinned&&e.createElement(g,{style:{color:"#faa61a"}}),e.createElement("button",{onClick:()=>T(t.id),style:r.actionBtn,title:t.is_subscribed?"Abonelikten Çık":"Abone Ol"},t.is_subscribed?e.createElement(B,null):e.createElement(w,null)),!t.is_pinned&&e.createElement("button",{onClick:()=>C(t.id),style:r.actionBtn,title:"Sabitle"},e.createElement(g,null))))))))},r={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #333"},createBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},createForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #333"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"10px"},saveBtn:{flex:1,backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelBtn:{flex:1,backgroundColor:"#4e5058",color:"#fff",border:"none",padding:"10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},threadsList:{flex:1,overflowY:"auto",padding:"20px"},threadItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px",alignItems:"center"},threadIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#5865f21a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},threadContent:{flex:1},threadName:{fontWeight:"600",marginBottom:"4px"},threadMeta:{fontSize:"12px",color:"#888",display:"flex",gap:"8px"},threadActions:{display:"flex",gap:"10px",alignItems:"center"},actionBtn:{backgroundColor:"transparent",border:"none",color:"#dcddde",cursor:"pointer",fontSize:"18px",padding:"8px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{A as default};
