import{r,cB as B,l as O,aI as P,v as z,cq as I}from"./react-core-B6hadH-M.js";import{t as c}from"./index-D_6pZib5.js";const F=({fetchWithAuth:m,apiBaseUrl:x,onClose:d,roomSlug:b})=>{const[i,y]=r.useState(""),[a,s]=r.useState(["",""]),[p,g]=r.useState(!1),[u,h]=r.useState(!1),[f,R]=r.useState(24),[l,v]=r.useState(""),E=()=>{a.length<10&&s([...a,""])},k=t=>{a.length>2&&s(a.filter((o,n)=>n!==t))},S=(t,o)=>{const n=[...a];n[t]=o,s(n)},C=async()=>{if(!i.trim()){c.error("Please enter a question");return}const t=a.filter(o=>o.trim());if(t.length<2){c.error("Please add at least 2 options");return}try{const o={question:i.trim(),options:t,allow_multiple:p,anonymous:u,duration_hours:f,room_slug:b};l&&(o.scheduled_for=new Date(l).toISOString()),await m(`${x}/polls/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),c.success(l?"Poll scheduled successfully":"Poll created successfully"),d()}catch{c.error("Failed to create poll")}},w=[{value:1,label:"1 Hour"},{value:6,label:"6 Hours"},{value:12,label:"12 Hours"},{value:24,label:"1 Day"},{value:48,label:"2 Days"},{value:72,label:"3 Days"},{value:168,label:"1 Week"}];return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(B,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Create Poll")),React.createElement("button",{onClick:d,style:e.closeButton},React.createElement(O,null))),React.createElement("div",{style:e.content},React.createElement("div",{style:e.section},React.createElement("label",{style:e.label},"Question"),React.createElement("input",{type:"text",value:i,onChange:t=>y(t.target.value),placeholder:"What's your question?",style:e.input,maxLength:200})),React.createElement("div",{style:e.section},React.createElement("div",{style:e.sectionHeader},React.createElement("label",{style:e.label},"Options"),React.createElement("button",{onClick:E,style:e.addButton,disabled:a.length>=10},React.createElement(P,{style:{marginRight:"6px"}}),"Add Option")),React.createElement("div",{style:e.optionsList},a.map((t,o)=>React.createElement("div",{key:o,style:e.optionRow},React.createElement("input",{type:"text",value:t,onChange:n=>S(o,n.target.value),placeholder:`Option ${o+1}`,style:e.optionInput,maxLength:100}),a.length>2&&React.createElement("button",{onClick:()=>k(o),style:e.removeButton,title:"Remove"},React.createElement(z,null)))))),React.createElement("div",{style:e.section},React.createElement("label",{style:e.label},"Duration"),React.createElement("div",{style:e.durationGrid},w.map(t=>React.createElement("button",{key:t.value,onClick:()=>R(t.value),style:{...e.durationButton,...f===t.value&&e.durationButtonActive}},t.label)))),React.createElement("div",{style:e.section},React.createElement("label",{style:e.label},React.createElement(I,{style:{marginRight:"6px"}}),"Schedule (Optional)"),React.createElement("input",{type:"datetime-local",value:l,onChange:t=>v(t.target.value),style:e.input,min:new Date().toISOString().slice(0,16)}),l&&React.createElement("div",{style:e.hint},"Poll will be posted on ",new Date(l).toLocaleString())),React.createElement("div",{style:e.checkboxes},React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:p,onChange:t=>g(t.target.checked)}),React.createElement("span",{style:e.checkboxLabel},"Allow multiple selections")),React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:u,onChange:t=>h(t.target.checked)}),React.createElement("span",{style:e.checkboxLabel},"Anonymous voting"))),React.createElement("button",{onClick:C,style:e.createButton},l?"Schedule Poll":"Create Poll"))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},section:{marginBottom:"24px"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"8px"},input:{width:"100%",padding:"10px 12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},optionsList:{display:"flex",flexDirection:"column",gap:"10px"},optionRow:{display:"flex",gap:"10px"},optionInput:{flex:1,padding:"10px 12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},addButton:{padding:"6px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center"},removeButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"14px",padding:"8px 12px"},durationGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"8px"},durationButton:{padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#dcddde",cursor:"pointer",fontSize:"13px"},durationButtonActive:{backgroundColor:"#5865f2",borderColor:"#5865f2",color:"#ffffff"},hint:{fontSize:"12px",color:"#99aab5",marginTop:"8px"},checkboxes:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},checkboxLabel:{fontSize:"14px",color:"#dcddde"},createButton:{width:"100%",padding:"12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"}};export{F as default};
