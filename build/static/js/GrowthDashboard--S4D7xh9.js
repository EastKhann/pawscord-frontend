import{r as n}from"./react-core-B6hadH-M.js";import{a as x}from"./index-D5GkNzM3.js";import{R as m,L as K,C as u,X as v,Y as h,T as i,a as N,b as p,B as w,c as l,P as $,d as C,e as A}from"./recharts-D4RWr7CS.js";function W(){const[c,y]=n.useState([]),[a,k]=n.useState({}),[F,D]=n.useState(!0);n.useEffect(()=>{d();const e=setInterval(d,300*1e3);return()=>clearInterval(e)},[]);const d=async()=>{try{const e=await x.get("/api/growth/dashboard/");y(e.data.metrics),k(e.data.totals)}catch(e){console.error("Failed to load dashboard:",e)}finally{D(!1)}};if(F)return React.createElement("div",{className:"loading"},"Loading growth dashboard...");const L=c.reduce((e,t)=>(Object.entries(t.sources||{}).forEach(([r,E])=>{e[r]=(e[r]||0)+E}),e),{}),g=Object.entries(L).map(([e,t])=>({name:e.charAt(0).toUpperCase()+e.slice(1),value:t})),f=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],b=c.length>0?(c.reduce((e,t)=>e+t.active_users,0)/c.length).toFixed(0):0,o=c.slice(-7).reduce((e,t)=>e+t.new_users,0),s=c.slice(-14,-7).reduce((e,t)=>e+t.new_users,0),R=s>0?((o-s)/s*100).toFixed(1):0;return React.createElement("div",{className:"growth-dashboard"},React.createElement("div",{className:"dashboard-header"},React.createElement("h1",null,"ðŸ“ˆ Growth Dashboard"),React.createElement("button",{onClick:d,className:"refresh-btn"},"ðŸ”„ Refresh")),React.createElement("div",{className:"metrics-grid"},React.createElement("div",{className:"metric-card"},React.createElement("div",{className:"metric-icon"},"ðŸ‘¥"),React.createElement("div",{className:"metric-value"},a.users?.toLocaleString()),React.createElement("div",{className:"metric-label"},"Total Users"),React.createElement("div",{className:"metric-change positive"},"+",o," this week")),React.createElement("div",{className:"metric-card"},React.createElement("div",{className:"metric-icon"},"âš¡"),React.createElement("div",{className:"metric-value"},b),React.createElement("div",{className:"metric-label"},"Avg Daily Active"),React.createElement("div",{className:"metric-change"},(b/a.users*100).toFixed(1),"% rate")),React.createElement("div",{className:"metric-card"},React.createElement("div",{className:"metric-icon"},"ðŸ’°"),React.createElement("div",{className:"metric-value"},"$",a.revenue?.toLocaleString()),React.createElement("div",{className:"metric-label"},"Total Revenue"),React.createElement("div",{className:"metric-change positive"},"MRR: $",(a.revenue/12).toFixed(2))),React.createElement("div",{className:"metric-card"},React.createElement("div",{className:"metric-icon"},"ðŸ“§"),React.createElement("div",{className:"metric-value"},a.waitlist?.toLocaleString()),React.createElement("div",{className:"metric-label"},"Waitlist Signups"),React.createElement("div",{className:"metric-change"},(a.waitlist/(a.users||1)*100).toFixed(0),"% conversion"))),React.createElement("div",{className:"growth-rate-banner"},React.createElement("h3",null,"ðŸ“Š Week-over-Week Growth"),React.createElement("div",{className:`growth-percentage ${R>0?"positive":"negative"}`},R>0?"+":"",R,"%"),React.createElement("p",null,"Last week: ",o," users | Previous week: ",s," users")),React.createElement("div",{className:"charts-grid"},React.createElement("div",{className:"chart-card"},React.createElement("h3",null,"New Users (Last 14 Days)"),React.createElement(m,{width:"100%",height:300},React.createElement(K,{data:c},React.createElement(u,{strokeDasharray:"3 3"}),React.createElement(v,{dataKey:"date"}),React.createElement(h,null),React.createElement(i,null),React.createElement(N,null),React.createElement(p,{type:"monotone",dataKey:"new_users",stroke:"#8884d8",strokeWidth:2,name:"New Users"}),React.createElement(p,{type:"monotone",dataKey:"active_users",stroke:"#82ca9d",strokeWidth:2,name:"Active Users"})))),React.createElement("div",{className:"chart-card"},React.createElement("h3",null,"Revenue & Premium Signups"),React.createElement(m,{width:"100%",height:300},React.createElement(w,{data:c},React.createElement(u,{strokeDasharray:"3 3"}),React.createElement(v,{dataKey:"date"}),React.createElement(h,null),React.createElement(i,null),React.createElement(N,null),React.createElement(l,{dataKey:"revenue",fill:"#82ca9d",name:"Revenue ($)"}),React.createElement(l,{dataKey:"premium",fill:"#ffc658",name:"Premium Signups"})))),React.createElement("div",{className:"chart-card"},React.createElement("h3",null,"Traffic Sources"),React.createElement(m,{width:"100%",height:300},React.createElement($,null,React.createElement(C,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e}: ${(t*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value"},g.map((e,t)=>React.createElement(A,{key:`cell-${t}`,fill:f[t%f.length]}))),React.createElement(i,null)))),React.createElement("div",{className:"chart-card"},React.createElement("h3",null,"Source Breakdown (Last 7 Days)"),React.createElement(m,{width:"100%",height:300},React.createElement(w,{data:c.slice(-7)},React.createElement(u,{strokeDasharray:"3 3"}),React.createElement(v,{dataKey:"date"}),React.createElement(h,null),React.createElement(i,null),React.createElement(N,null),React.createElement(l,{dataKey:"sources.producthunt",stackId:"a",fill:"#ff6384",name:"ProductHunt"}),React.createElement(l,{dataKey:"sources.reddit",stackId:"a",fill:"#36a2eb",name:"Reddit"}),React.createElement(l,{dataKey:"sources.hackernews",stackId:"a",fill:"#ffce56",name:"Hacker News"}),React.createElement(l,{dataKey:"sources.organic",stackId:"a",fill:"#4bc0c0",name:"Organic"}),React.createElement(l,{dataKey:"sources.referral",stackId:"a",fill:"#9966ff",name:"Referral"}),React.createElement(l,{dataKey:"sources.paid",stackId:"a",fill:"#ff9f40",name:"Paid Ads"}))))),React.createElement("div",{className:"stats-table-card"},React.createElement("h3",null,"ðŸ“… Daily Statistics"),React.createElement("table",{className:"stats-table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Date"),React.createElement("th",null,"New Users"),React.createElement("th",null,"Active Users"),React.createElement("th",null,"Premium"),React.createElement("th",null,"Revenue"),React.createElement("th",null,"Top Source"))),React.createElement("tbody",null,c.slice().reverse().map((e,t)=>{const r=Object.entries(e.sources||{}).sort((E,S)=>S[1]-E[1])[0];return React.createElement("tr",{key:t},React.createElement("td",null,e.date),React.createElement("td",{className:"number"},e.new_users),React.createElement("td",{className:"number"},e.active_users),React.createElement("td",{className:"number"},e.premium),React.createElement("td",{className:"number"},"$",e.revenue),React.createElement("td",null,r?r[0]:"N/A"))})))),React.createElement("div",{className:"goals-card"},React.createElement("h3",null,"ðŸŽ¯ Launch Goals (Jan 22 - Feb 5)"),React.createElement("div",{className:"goal-item"},React.createElement("div",{className:"goal-label"},"1000 Users"),React.createElement("div",{className:"progress-bar"},React.createElement("div",{className:"progress-fill",style:{width:`${Math.min(a.users/1e3*100,100)}%`}})),React.createElement("div",{className:"goal-value"},a.users," / 1000 (",(a.users/1e3*100).toFixed(1),"%)")),React.createElement("div",{className:"goal-item"},React.createElement("div",{className:"goal-label"},"$250 MRR"),React.createElement("div",{className:"progress-bar"},React.createElement("div",{className:"progress-fill",style:{width:`${Math.min(a.revenue/12/250*100,100)}%`}})),React.createElement("div",{className:"goal-value"},"$",(a.revenue/12).toFixed(2)," / $250")),React.createElement("div",{className:"goal-item"},React.createElement("div",{className:"goal-label"},"200 Waitlist"),React.createElement("div",{className:"progress-bar"},React.createElement("div",{className:"progress-fill",style:{width:`${Math.min(a.waitlist/200*100,100)}%`}})),React.createElement("div",{className:"goal-value"},a.waitlist," / 200 (",(a.waitlist/200*100).toFixed(1),"%)"))))}export{W as default};
