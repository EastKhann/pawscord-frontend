import{r as s,d as e,Q as S,i as k,al as R,b_ as z,b$ as _,y as B}from"./react-core-CecKX_Gm.js";import{t as a}from"./index-DwScqZjU.js";const I=({fetchWithAuth:i,apiBaseUrl:c,onClose:y,serverId:f})=>{const[p,h]=s.useState([]),[E,g]=s.useState(!1),[m,u]=s.useState(!1),[r,l]=s.useState({trigger:"",response:"",match_type:"contains",case_sensitive:!1,enabled:!0}),x=[{value:"exact",label:"Exact Match"},{value:"contains",label:"Contains"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"},{value:"regex",label:"Regex"}];s.useEffect(()=>{d()},[]);const d=async()=>{g(!0);try{const n=await(await i(`${c}/api/autoresponders/list/?server_id=${f}`)).json();h(n.responders||[])}catch{a.error("Failed to load auto-responders")}finally{g(!1)}},v=async()=>{if(!r.trigger.trim()||!r.response.trim()){a.error("Please enter trigger and response");return}try{await i(`${c}/api/autoresponders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,server_id:f})}),a.success("Auto-responder created"),l({trigger:"",response:"",match_type:"contains",case_sensitive:!1,enabled:!0}),u(!1),d()}catch{a.error("Failed to create auto-responder")}},C=async(o,n)=>{try{await i(`${c}/api/autoresponders/${o}/toggle/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:n})}),a.success(n?"Enabled":"Disabled"),d()}catch{a.error("Failed to toggle")}},w=async o=>{if(confirm("Delete this auto-responder?"))try{await i(`${c}/api/autoresponders/${o}/delete/`,{method:"DELETE"}),a.success("Auto-responder deleted"),d()}catch{a.error("Failed to delete")}};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(S,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Auto-Responders")),e.createElement("button",{onClick:y,style:t.closeButton},e.createElement(k,null))),e.createElement("div",{style:t.toolbar},e.createElement("div",{style:t.count},p.length," auto-responders"),e.createElement("button",{onClick:()=>u(!m),style:t.createButton},e.createElement(R,{style:{marginRight:"6px"}}),"Create New")),m&&e.createElement("div",{style:t.createForm},e.createElement("div",{style:t.formRow},e.createElement("label",{style:t.label},"Trigger"),e.createElement("input",{type:"text",value:r.trigger,onChange:o=>l({...r,trigger:o.target.value}),placeholder:"hello",style:t.input})),e.createElement("div",{style:t.formRow},e.createElement("label",{style:t.label},"Response"),e.createElement("textarea",{value:r.response,onChange:o=>l({...r,response:o.target.value}),placeholder:"Hi there! How can I help you?",style:t.textarea,rows:3})),e.createElement("div",{style:t.formRow},e.createElement("label",{style:t.label},"Match Type"),e.createElement("select",{value:r.match_type,onChange:o=>l({...r,match_type:o.target.value}),style:t.select},x.map(o=>e.createElement("option",{key:o.value,value:o.value},o.label)))),e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:r.case_sensitive,onChange:o=>l({...r,case_sensitive:o.target.checked})}),e.createElement("span",{style:t.checkboxLabel},"Case sensitive")),e.createElement("button",{onClick:v,style:t.submitButton},"Create Auto-Responder")),e.createElement("div",{style:t.content},E?e.createElement("div",{style:t.loading},"Loading..."):p.length===0?e.createElement("div",{style:t.empty},"No auto-responders configured"):e.createElement("div",{style:t.respondersList},p.map((o,n)=>e.createElement("div",{key:n,style:t.responderCard},e.createElement("div",{style:t.responderInfo},e.createElement("div",{style:t.trigger},"Trigger: ",e.createElement("span",{style:t.triggerValue},o.trigger)),e.createElement("div",{style:t.response},o.response),e.createElement("div",{style:t.meta},x.find(b=>b.value===o.match_type)?.label,o.case_sensitive&&" • Case Sensitive"," • Uses: "+(o.usage_count||0))),e.createElement("div",{style:t.actions},e.createElement("button",{onClick:()=>C(o.id,!o.enabled),style:t.toggleButton,title:o.enabled?"Disable":"Enable"},o.enabled?e.createElement(z,{style:{color:"#43b581",fontSize:"24px"}}):e.createElement(_,{style:{color:"#99aab5",fontSize:"24px"}})),e.createElement("button",{onClick:()=>w(o.id),style:t.deleteButton,title:"Delete"},e.createElement(B,null)))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px 20px",borderBottom:"1px solid #2c2f33"},count:{fontSize:"14px",color:"#dcddde"},createButton:{padding:"8px 16px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center"},createForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #2c2f33"},formRow:{marginBottom:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"6px"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},textarea:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"},select:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",cursor:"pointer"},checkboxLabel:{fontSize:"14px",color:"#dcddde"},submitButton:{width:"100%",padding:"12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},respondersList:{display:"flex",flexDirection:"column",gap:"12px"},responderCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between"},responderInfo:{flex:1},trigger:{fontSize:"14px",color:"#99aab5",marginBottom:"8px"},triggerValue:{color:"#5865f2",fontWeight:"600",fontFamily:"monospace"},response:{fontSize:"14px",color:"#ffffff",marginBottom:"8px"},meta:{fontSize:"12px",color:"#99aab5"},actions:{display:"flex",gap:"12px",alignItems:"center"},toggleButton:{background:"none",border:"none",cursor:"pointer",padding:"4px"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"8px"}};export{I as default};
