{"version":3,"file":"VanityURLPanel-BoWpWS4Q.js","sources":["../../../src/components/VanityURLPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { FaTimes, FaLink, FaHistory, FaCheck } from 'react-icons/fa';\nimport { toast } from '../utils/toast';\n\nconst VanityURLPanel = ({ fetchWithAuth, apiBaseUrl, onClose, serverId }) => {\n    const [vanityUrl, setVanityUrl] = useState('');\n    const [currentVanity, setCurrentVanity] = useState(null);\n    const [history, setHistory] = useState([]);\n    const [checking, setChecking] = useState(false);\n    const [available, setAvailable] = useState(null);\n\n    useEffect(() => {\n        fetchVanity();\n    }, []);\n\n    const fetchVanity = async () => {\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/vanity/get/${serverId}/`);\n            const data = await response.json();\n            setCurrentVanity(data.vanity_url);\n            setHistory(data.history || []);\n        } catch (error) {\n            // No vanity URL set yet\n        }\n    };\n\n    const checkAvailability = async (url) => {\n        if (!url || url.length < 3) {\n            setAvailable(null);\n            return;\n        }\n\n        setChecking(true);\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/vanity/check/?url=${url}`);\n            const data = await response.json();\n            setAvailable(data.available);\n        } catch (error) {\n            setAvailable(false);\n        } finally {\n            setChecking(false);\n        }\n    };\n\n    const setVanity = async () => {\n        if (!vanityUrl || vanityUrl.length < 3) {\n            toast.error('Vanity URL must be at least 3 characters');\n            return;\n        }\n\n        if (!available) {\n            toast.error('This vanity URL is not available');\n            return;\n        }\n\n        try {\n            await fetchWithAuth(`${apiBaseUrl}/vanity/create/`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    server_id: serverId,\n                    vanity_url: vanityUrl\n                })\n            });\n\n            toast.success('Vanity URL set successfully');\n            setVanityUrl('');\n            setAvailable(null);\n            fetchVanity();\n        } catch (error) {\n            toast.error('Failed to set vanity URL');\n        }\n    };\n\n    return (\n        <div style={styles.overlay}>\n            <div style={styles.modal}>\n                <div style={styles.header}>\n                    <div style={styles.headerLeft}>\n                        <FaLink style={{ marginRight: '10px', color: '#5865f2' }} />\n                        <h2 style={styles.title}>Vanity URL</h2>\n                    </div>\n                    <button onClick={onClose} style={styles.closeButton}>\n                        <FaTimes />\n                    </button>\n                </div>\n\n                <div style={styles.content}>\n                    {currentVanity && (\n                        <div style={styles.currentSection}>\n                            <div style={styles.label}>Current Vanity URL:</div>\n                            <div style={styles.currentUrl}>\n                                pawscord.com/{currentVanity}\n                            </div>\n                        </div>\n                    )}\n\n                    <div style={styles.section}>\n                        <div style={styles.label}>Set New Vanity URL</div>\n                        <div style={styles.inputRow}>\n                            <div style={styles.prefix}>pawscord.com/</div>\n                            <input\n                                type=\"text\"\n                                value={vanityUrl}\n                                onChange={(e) => {\n                                    const val = e.target.value.toLowerCase().replace(/[^a-z0-9-]/g, '');\n                                    setVanityUrl(val);\n                                    checkAvailability(val);\n                                }}\n                                placeholder=\"my-server\"\n                                style={styles.input}\n                                maxLength={32}\n                            />\n                            {checking && <div style={styles.checking}>Checking...</div>}\n                            {!checking && available === true && (\n                                <FaCheck style={{ color: '#43b581', fontSize: '20px' }} />\n                            )}\n                            {!checking && available === false && (\n                                <div style={styles.unavailable}>Unavailable</div>\n                            )}\n                        </div>\n                        <div style={styles.hint}>\n                            3-32 characters, letters, numbers, and hyphens only\n                        </div>\n                        <button\n                            onClick={setVanity}\n                            disabled={!available}\n                            style={{\n                                ...styles.setButton,\n                                ...((!available) && styles.setButtonDisabled)\n                            }}\n                        >\n                            Set Vanity URL\n                        </button>\n                    </div>\n\n                    {history.length > 0 && (\n                        <div style={styles.section}>\n                            <div style={styles.sectionTitle}>\n                                <FaHistory style={{ marginRight: '8px' }} />\n                                History\n                            </div>\n                            <div style={styles.historyList}>\n                                {history.map((item, idx) => (\n                                    <div key={idx} style={styles.historyItem}>\n                                        <div style={styles.historyUrl}>{item.vanity_url}</div>\n                                        <div style={styles.historyDate}>\n                                            {new Date(item.created_at).toLocaleDateString()}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 999999,\n    },\n    modal: {\n        backgroundColor: '#1e1e1e',\n        borderRadius: '8px',\n        width: '90%',\n        maxWidth: '600px',\n        maxHeight: '90vh',\n        display: 'flex',\n        flexDirection: 'column',\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4)',\n    },\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '20px',\n        borderBottom: '1px solid #2c2f33',\n    },\n    headerLeft: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    title: {\n        margin: 0,\n        fontSize: '20px',\n        color: '#ffffff',\n    },\n    closeButton: {\n        background: 'none',\n        border: 'none',\n        color: '#99aab5',\n        cursor: 'pointer',\n        fontSize: '20px',\n        padding: '5px',\n    },\n    content: {\n        padding: '20px',\n        overflowY: 'auto',\n        flex: 1,\n    },\n    currentSection: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '8px',\n        padding: '16px',\n        marginBottom: '24px',\n    },\n    currentUrl: {\n        fontSize: '18px',\n        fontWeight: '600',\n        color: '#5865f2',\n        fontFamily: 'monospace',\n    },\n    section: {\n        marginBottom: '24px',\n    },\n    label: {\n        fontSize: '14px',\n        fontWeight: '600',\n        color: '#dcddde',\n        marginBottom: '8px',\n    },\n    inputRow: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px',\n        backgroundColor: '#2c2f33',\n        borderRadius: '4px',\n        padding: '10px 12px',\n    },\n    prefix: {\n        fontSize: '14px',\n        color: '#99aab5',\n    },\n    input: {\n        flex: 1,\n        background: 'none',\n        border: 'none',\n        color: '#ffffff',\n        fontSize: '14px',\n        outline: 'none',\n    },\n    checking: {\n        fontSize: '12px',\n        color: '#faa61a',\n    },\n    unavailable: {\n        fontSize: '12px',\n        color: '#f04747',\n    },\n    hint: {\n        fontSize: '12px',\n        color: '#99aab5',\n        marginTop: '8px',\n        marginBottom: '16px',\n    },\n    setButton: {\n        width: '100%',\n        padding: '12px',\n        backgroundColor: '#5865f2',\n        border: 'none',\n        borderRadius: '4px',\n        color: '#ffffff',\n        cursor: 'pointer',\n        fontSize: '14px',\n        fontWeight: '600',\n    },\n    setButtonDisabled: {\n        backgroundColor: '#2c2f33',\n        cursor: 'not-allowed',\n    },\n    sectionTitle: {\n        fontSize: '14px',\n        fontWeight: '600',\n        color: '#dcddde',\n        marginBottom: '12px',\n        display: 'flex',\n        alignItems: 'center',\n    },\n    historyList: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '8px',\n    },\n    historyItem: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '4px',\n        padding: '12px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    historyUrl: {\n        fontSize: '14px',\n        color: '#dcddde',\n        fontFamily: 'monospace',\n    },\n    historyDate: {\n        fontSize: '12px',\n        color: '#99aab5',\n    },\n};\n\nexport default VanityURLPanel;\n"],"names":["useState","useEffect","jsx","jsxs"],"mappings":"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"}