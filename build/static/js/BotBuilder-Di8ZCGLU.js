import{r as g,j as e}from"./react-core-D6cE4lil.js";import{a$ as z,g as A,H as R,ac as I,aO as H}from"./icons-vendor-DT2gd7vx.js";import{t as u,g as T}from"./index-ClHcoIda.js";import{a as F}from"./index-BV9jtLkh.js";import"./media-vendor-Du00QUHb.js";import"./router-vendor-wrB4dqw3.js";import"./state-vendor-DnurjGY_.js";import"./crypto-vendor-BYnay7oC.js";import"./ui-vendor-CZOhtEfS.js";const W=(t,o)=>({overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:t?"0":"20px"},modal:{background:"linear-gradient(135deg, rgba(30,31,34,0.98), rgba(35,36,40,0.98))",borderRadius:t?"0":"16px",width:"100%",maxWidth:t?"100%":"900px",height:t?"100%":"auto",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0,0,0,0.8), 0 0 40px rgba(88,101,242,0.3)",border:t?"none":"1px solid rgba(88,101,242,0.4)"},header:{padding:t?"16px":"20px 24px",background:"linear-gradient(135deg, rgba(88,101,242,0.15), rgba(114,137,218,0.15))",borderBottom:"1px solid rgba(88,101,242,0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},title:{fontSize:t?"20px":"24px",fontWeight:"700",color:"rgba(255,255,255,0.95)",margin:0,display:"flex",alignItems:"center",gap:"10px"},content:{flex:1,overflowY:"auto",padding:t?"16px":"24px"},section:{marginBottom:"24px"},sectionTitle:{fontSize:"18px",fontWeight:"600",color:"rgba(255,255,255,0.9)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},inputGroup:{marginBottom:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"500",color:"rgba(255,255,255,0.8)",marginBottom:"8px"},input:{width:"100%",padding:"12px 14px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(88,101,242,0.3)",borderRadius:"8px",color:"rgba(255,255,255,0.95)",fontSize:"15px",outline:"none",boxSizing:"border-box",transition:"all 0.2s ease"},textarea:{width:"100%",minHeight:"80px",padding:"12px 14px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(88,101,242,0.3)",borderRadius:"8px",color:"rgba(255,255,255,0.95)",fontSize:"14px",outline:"none",resize:"vertical",fontFamily:"inherit",boxSizing:"border-box"},commandCard:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(88,101,242,0.3)",borderRadius:"12px",padding:t?"12px":"16px",marginBottom:"12px"},commandHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},commandActions:{display:"flex",gap:"8px"},iconBtn:{background:"rgba(88,101,242,0.2)",border:"1px solid rgba(88,101,242,0.4)",borderRadius:"6px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"rgba(255,255,255,0.9)",transition:"all 0.2s ease",fontSize:"14px"},deleteBtn:{background:"rgba(218,55,60,0.2)",border:"1px solid rgba(218,55,60,0.4)",color:"#da373c"},addBtn:{width:"100%",padding:"12px",background:"rgba(88,101,242,0.2)",border:"1px solid rgba(88,101,242,0.4)",borderRadius:"8px",color:"rgba(255,255,255,0.9)",fontSize:"15px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",minHeight:"44px"},toggle:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},switch:r=>({width:"50px",height:"28px",background:r?"linear-gradient(135deg, #43b581, #4caf50)":"rgba(255,255,255,0.2)",borderRadius:"14px",position:"relative",cursor:"pointer",transition:"all 0.3s ease",border:"2px solid rgba(88,101,242,0.3)"}),switchKnob:r=>({width:"22px",height:"22px",background:"white",borderRadius:"50%",position:"absolute",top:"1px",left:r?"24px":"1px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}),footer:{padding:t?"16px":"20px 24px",borderTop:"1px solid rgba(88,101,242,0.2)",display:"flex",gap:"12px",background:"rgba(0,0,0,0.2)"},cancelBtn:{flex:1,padding:"14px",background:"rgba(78,80,88,0.5)",border:"1px solid rgba(88,101,242,0.3)",borderRadius:"8px",color:"rgba(255,255,255,0.9)",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",minHeight:"44px"},saveBtn:{flex:1,padding:"14px",background:"linear-gradient(135deg, #5865f2, #7289da)",border:"none",borderRadius:"8px",color:"white",fontSize:"16px",fontWeight:"600",cursor:o?"not-allowed":"pointer",opacity:o?.6:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px"}}),D=(t,o,r)=>{const[l,m]=g.useState(""),[x,d]=g.useState("ðŸ¤–"),[s,c]=g.useState([{id:1,trigger:"!hello",response:"Hello! How can I help you?",enabled:!0}]),[j,S]=g.useState({onMemberJoin:{enabled:!1,message:"Welcome {{username}} to {{server}}!"},onMemberLeave:{enabled:!1,message:"Goodbye {{username}}. We will miss you!"},onMessageDelete:{enabled:!1,action:"log"}}),[h,C]=g.useState({spamDetection:!1,profanityFilter:!1,capsLimit:70,linkBlocking:!1}),[f,y]=g.useState(!1);return{botName:l,setBotName:m,botAvatar:x,setBotAvatar:d,commands:s,addCommand:()=>{c([...s,{id:Date.now(),trigger:"",response:"",enabled:!0}])},updateCommand:(i,p,k)=>{c(s.map(B=>B.id===i?{...B,[p]:k}:B))},removeCommand:i=>{s.length>1&&c(s.filter(p=>p.id!==i))},testCommand:i=>{u.info(`ðŸ“‹ Test Output:

${i.response}`)},autoModeration:h,setAutoModeration:C,isSaving:f,handleSave:async()=>{if(!l.trim()){u.error("âŒ Please enter a bot name");return}const i=s.filter(p=>p.trigger&&p.response);if(i.length===0){u.error("âŒ Please add at least one valid command");return}y(!0);try{await F.post(`${T()}/bots/create/`,{server_slug:t,name:l,avatar:x,commands:i,events:j,auto_moderation:h},{headers:{Authorization:`Bearer ${o}`}}),u.success("âœ… Bot created successfully!"),r()}catch{u.error("âŒ Failed to create bot. Please try again.")}finally{y(!1)}}}},G=({cmd:t,styles:o,onUpdate:r,onRemove:l,onTest:m,canRemove:x})=>e.jsxs("div",{style:o.commandCard,children:[e.jsxs("div",{style:o.commandHeader,children:[e.jsxs("div",{style:o.toggle,children:[e.jsx("div",{style:o.switch(t.enabled),onClick:()=>r(t.id,"enabled",!t.enabled),children:e.jsx("div",{style:o.switchKnob(t.enabled)})}),e.jsx("span",{style:{color:"rgba(255,255,255,0.8)",fontSize:"14px"},children:t.enabled?"Enabled":"Disabled"})]}),e.jsxs("div",{style:o.commandActions,children:[e.jsx("button",{onClick:()=>m(t),style:o.iconBtn,title:"Test Command",children:e.jsx(z,{})}),x&&e.jsx("button",{onClick:()=>l(t.id),style:{...o.iconBtn,...o.deleteBtn},title:"Delete Command",children:e.jsx(A,{})})]})]}),e.jsxs("div",{style:o.inputGroup,children:[e.jsx("label",{style:o.label,children:"Trigger (e.g., !hello)"}),e.jsx("input",{type:"text",value:t.trigger,onChange:d=>r(t.id,"trigger",d.target.value),placeholder:"!command",style:o.input})]}),e.jsxs("div",{style:o.inputGroup,children:[e.jsx("label",{style:o.label,children:"Response"}),e.jsx("textarea",{value:t.response,onChange:d=>r(t.id,"response",d.target.value),placeholder:"Bot response here...",style:o.textarea})]})]}),Y=({onClose:t,serverSlug:o,token:r,isMobile:l})=>{const{botName:m,setBotName:x,botAvatar:d,setBotAvatar:s,commands:c,addCommand:j,updateCommand:S,removeCommand:h,testCommand:C,autoModeration:f,setAutoModeration:y,isSaving:v,handleSave:w}=D(o,r,t),a=W(l,v);return e.jsx("div",{style:a.overlay,onClick:t,children:e.jsxs("div",{style:a.modal,onClick:n=>n.stopPropagation(),children:[e.jsx("div",{style:a.header,children:e.jsxs("h2",{style:a.title,children:[e.jsx(R,{})," Custom Bot Builder"]})}),e.jsxs("div",{style:a.content,children:[e.jsxs("div",{style:a.section,children:[e.jsxs("h3",{style:a.sectionTitle,children:["ðŸ¤–"," Basic Information"]}),e.jsxs("div",{style:a.inputGroup,children:[e.jsx("label",{style:a.label,children:"Bot Name"}),e.jsx("input",{type:"text",value:m,onChange:n=>x(n.target.value),placeholder:"My Awesome Bot",style:a.input,maxLength:32})]}),e.jsxs("div",{style:a.inputGroup,children:[e.jsx("label",{style:a.label,children:"Bot Avatar (Emoji)"}),e.jsx("input",{type:"text",value:d,onChange:n=>s(n.target.value),placeholder:"ðŸ¤–",style:a.input,maxLength:2})]})]}),e.jsxs("div",{style:a.section,children:[e.jsxs("h3",{style:a.sectionTitle,children:["âš¡"," Commands"]}),c.map(n=>e.jsx(G,{cmd:n,styles:a,onUpdate:S,onRemove:h,onTest:C,canRemove:c.length>1},n.id)),e.jsxs("button",{onClick:j,style:a.addBtn,children:[e.jsx(I,{})," Add Command"]})]}),e.jsxs("div",{style:a.section,children:[e.jsxs("h3",{style:a.sectionTitle,children:["ðŸ›¡ï¸"," Auto Moderation"]}),Object.entries(f).map(([n,b])=>typeof b!="boolean"?null:e.jsxs("div",{style:a.toggle,children:[e.jsx("div",{style:a.switch(b),onClick:()=>y({...f,[n]:!b}),children:e.jsx("div",{style:a.switchKnob(b)})}),e.jsx("span",{style:{color:"rgba(255,255,255,0.8)",fontSize:"14px"},children:n.replace(/([A-Z])/g," $1").replace(/^./,i=>i.toUpperCase())})]},n))]})]}),e.jsxs("div",{style:a.footer,children:[e.jsx("button",{onClick:t,style:a.cancelBtn,children:"Cancel"}),e.jsxs("button",{onClick:w,disabled:v,style:a.saveBtn,children:[e.jsx(H,{})," ",v?"Creating...":"Create Bot"]})]})]})})};export{Y as default};
