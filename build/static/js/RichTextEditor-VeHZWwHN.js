import{r as i,d as t,ar as w,as as b,at as v,au as k,av as z,v as I,x as T,aw as M}from"./react-core-GQV1VuAT.js";import{u as F,i as W,a as A,E as L}from"./tiptap-fxy27E2W.js";import"./recharts-DR2X3RTC.js";const D=[{name:"zar-at",description:"1-100 arasÄ± zar at",icon:t.createElement(b,null)},{name:"yazitura",description:"YazÄ± tura at",icon:t.createElement(v,null)},{name:"tkm",description:"TaÅŸ KaÄŸÄ±t Makas oyna (@kullanici)",icon:t.createElement(k,null)},{name:"xox",description:"XOX oyunu baÅŸlat",icon:t.createElement(b,null)},{name:"sec",description:"SeÃ§eneklerden birini seÃ§ (/sec a b c)",icon:t.createElement(w,null)},{name:"cuzdan",description:"Coin bakiyeni gÃ¶r",icon:t.createElement(z,null)},{name:"transfer",description:"Coin gÃ¶nder (/transfer @kullanici miktar)",icon:t.createElement(z,null)},{name:"kanban",description:"Kanban panosunu aÃ§",icon:t.createElement(b,null)},{name:"kod",description:"Python kodu Ã§alÄ±ÅŸtÄ±r",icon:t.createElement(I,null)},{name:"resimgelismis",description:"AI ile resim Ã§iz",icon:t.createElement(k,null)},{name:"temizle",description:"MesajlarÄ± sil (Admin)",icon:t.createElement(T,null),adminOnly:!0},{name:"yardim",description:"Komut listesini gÃ¶r",icon:t.createElement(w,null)},{name:"tema",description:"Tema MaÄŸazasÄ±nÄ± AÃ§",icon:t.createElement(b,null)},{name:"duyuru",description:"Sabit Duyuru Yap (/duyuru mesaj)",icon:t.createElement(T,null),adminOnly:!0},{name:"sablon",description:"HazÄ±r Åžablonlar",icon:t.createElement(M,null)},{name:"shrug",description:"Â¯\\_(ãƒ„)_/Â¯ gÃ¶nder",icon:t.createElement(k,null)}],K=({query:s,onSelect:u,activeIndex:h})=>{const[c,g]=i.useState([]);return i.useEffect(()=>{if(s==null)return;const l=s.toLowerCase().replace("/",""),a=D.filter(m=>m.name.toLowerCase().startsWith(l));g(a)},[s]),c.length===0?null:t.createElement("div",{style:x.container},t.createElement("div",{style:x.header},t.createElement(w,{style:{marginRight:6}}),"KOMUTLAR"),t.createElement("div",{style:x.list},c.map((l,a)=>t.createElement("div",{key:l.name,onClick:()=>u(l),style:{...x.item,backgroundColor:a===h?"#5865f2":"transparent"}},t.createElement("div",{style:x.iconWrapper},l.icon),t.createElement("div",{style:x.textWrapper},t.createElement("span",{style:{fontWeight:"bold",color:"white"}},"/",l.name),t.createElement("span",{style:{fontSize:"0.85em",color:a===h?"#eee":"#b9bbbe",marginLeft:8}},l.description))))))},x={container:{position:"absolute",bottom:"100%",left:0,width:"300px",maxHeight:"300px",backgroundColor:"#2f3136",borderRadius:"8px",boxShadow:"0 -4px 15px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",marginBottom:"10px",overflow:"hidden",zIndex:1e3,border:"1px solid rgba(255,255,255,0.05)"},header:{padding:"8px 12px",fontSize:"0.75em",fontWeight:"bold",color:"#b9bbbe",backgroundColor:"#202225",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",letterSpacing:"0.5px"},list:{overflowY:"auto",padding:"0"},item:{display:"flex",alignItems:"center",padding:"10px 12px",cursor:"pointer",transition:"background-color 0.1s"},iconWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",marginRight:"10px",color:"white",fontSize:"1.1em"},textWrapper:{display:"flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},O=i.forwardRef(({onSend:s,onChange:u,placeholder:h,initialValue:c="",onFileUpload:g},l)=>{const a=i.useRef(!1),[m,p]=i.useState(null),[S,C]=i.useState(0),e=F({extensions:[W,A.configure({placeholder:h||"Bir mesaj yaz..."})],content:c,editorProps:{handlePaste:(r,n,o)=>{const d=n.clipboardData?.items;if(d&&g)for(let f=0;f<d.length;f++){const y=d[f];if(y.kind==="file"){n.preventDefault();const E=y.getAsFile();return E&&(console.log("ðŸ“Ž Panodan dosya yapÄ±ÅŸtÄ±rÄ±ldÄ±:",E.name,E.type),g(E)),!0}}return!1},handleKeyDown:(r,n)=>{if(m!==null){if(n.key==="ArrowUp")return n.preventDefault(),C(o=>Math.max(0,o-1)),!0;if(n.key==="ArrowDown")return n.preventDefault(),C(o=>o+1),!0;if(n.key==="Enter"){n.preventDefault();const o=m.toLowerCase().replace("/",""),d=D.filter(f=>f.name.toLowerCase().startsWith(o));if(d.length>0){const f=Math.max(0,Math.min(S,d.length-1)),y=d[f];e.commands.setContent(`/${y.name} `),e.commands.focus("end"),p(null)}return!0}if(n.key==="Escape")return n.preventDefault(),p(null),!0}if(n.key==="Enter"&&!n.shiftKey){if(n.preventDefault(),m!==null)return!0;const o=r.state.doc.textContent;return o.trim().length>0&&(a.current=!0,s(o),e.commands.clearContent(),u?.(""),setTimeout(()=>{a.current=!1},100)),!0}return!1}}});i.useEffect(()=>{if(!e)return;const r=()=>{if(a.current)return;const n=e.getText().trim();n.startsWith("/")?n.includes(" ")?p(null):(p(n),C(0)):m!==null&&p(null),u?.(n)};return e.on("update",r),()=>e.off("update",r)},[e,u]),i.useEffect(()=>{if(!e)return;const r=e.getText();c===""&&r!==""?e.commands.clearContent():c!==""&&r===""&&e.commands.setContent(c)},[e,c]);const R=i.useCallback(()=>{e&&e.chain().focus().run()},[e]);return i.useImperativeHandle(l,()=>({send:()=>{if(!e)return;const r=e.getText().trim();r&&(a.current=!0,s(r),e.commands.clearContent(),u?.(""),setTimeout(()=>{a.current=!1},100))},clear:()=>e?.commands.clearContent(),hasContent:()=>!!e?.getText().trim(),appendText:r=>{!e||!r||e.chain().focus().insertContent(r).run()}}),[e,s,u]),e?t.createElement("div",{className:"rich-editor-wrapper",onClick:R,role:"textbox","aria-label":"Mesaj editÃ¶rÃ¼"},t.createElement(L,{editor:e,className:"tiptap-editor"}),m!==null&&t.createElement(K,{query:m,activeIndex:S,onSelect:r=>{e&&(e.commands.setContent(`/${r.name} `),e.commands.focus("end"),p(null))}})):null});O.displayName="RichTextEditor";export{O as default};
