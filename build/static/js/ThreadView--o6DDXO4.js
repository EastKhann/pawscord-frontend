var g=Object.defineProperty;var o=(r,s)=>g(r,"name",{value:s,configurable:!0});import{r as i,j as e}from"./react-core-Djgtqrmb.js";import{a as u}from"./icons-vendor-BMXAt4pj.js";const w=o(({parentMessage:r,onClose:s,apiBaseUrl:l,token:a})=>{const[d,h]=i.useState([]),[n,c]=i.useState(""),[y,x]=i.useState(!0);i.useEffect(()=>{r?.id&&p()},[r?.id]);const p=o(async()=>{x(!0);try{const m=await(await fetch(`${l}/messages/${r.id}/thread/`,{headers:{Authorization:`Bearer ${a}`}})).json();h(m.replies||[])}catch{}x(!1)},"fetchReplies"),f=o(async()=>{if(n.trim())try{(await fetch(`${l}/messages/${r.id}/reply/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({content:n})})).ok&&(c(""),p())}catch{}},"handleSendReply");return r?e.jsxs("div",{style:{position:"fixed",right:0,top:0,bottom:0,width:"420px",background:"#36393f",boxShadow:"-2px 0 8px rgba(0,0,0,0.4)",zIndex:100,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #202225",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0,color:"#fff"},children:"ðŸ’¬ Thread"}),e.jsx("button",{onClick:s,style:{background:"transparent",border:"none",color:"#fff",cursor:"pointer",fontSize:"18px"},children:e.jsx(u,{})})]}),e.jsxs("div",{style:{padding:"16px",background:"#2f3136",borderBottom:"1px solid #202225"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("strong",{style:{color:"#fff"},children:r.username||r.sender?.username}),e.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#72767d"},children:new Date(r.timestamp).toLocaleString("tr-TR")})]}),e.jsx("p",{style:{margin:0,color:"#dcddde"},children:r.content}),e.jsxs("small",{style:{color:"#72767d",fontSize:"12px"},children:[d.length," yanÄ±t"]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:y?e.jsx("div",{style:{textAlign:"center",color:"#aaa",padding:"20px"},children:"YÃ¼kleniyor..."}):d.length===0?e.jsx("div",{style:{textAlign:"center",color:"#aaa",padding:"20px"},children:"HenÃ¼z yanÄ±t yok"}):d.map(t=>e.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#40444b",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("strong",{style:{color:"#fff"},children:t.username||t.sender?.username}),e.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#72767d"},children:new Date(t.timestamp).toLocaleString("tr-TR")})]}),e.jsx("p",{style:{margin:0,color:"#dcddde"},children:t.content})]},t.id))}),e.jsx("div",{style:{padding:"16px",borderTop:"1px solid #202225"},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",placeholder:"YanÄ±t yaz...",value:n,onChange:o(t=>c(t.target.value),"onChange"),onKeyPress:o(t=>t.key==="Enter"&&f(),"onKeyPress"),style:{flex:1,padding:"10px",background:"#40444b",border:"none",borderRadius:"6px",color:"#fff"}}),e.jsx("button",{onClick:f,disabled:!n.trim(),style:{padding:"10px 20px",background:n.trim()?"#5865f2":"#4f545c",border:"none",borderRadius:"6px",color:"#fff",cursor:n.trim()?"pointer":"not-allowed",fontWeight:600},children:"GÃ¶nder"})]})})]}):null},"ThreadView");export{w as default};
