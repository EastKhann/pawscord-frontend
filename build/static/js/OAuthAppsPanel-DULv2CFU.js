import{r as i,n as e}from"./react-core-Cj7FUMmY.js";import{H as j,a as $,r as E,ad as k,g as A,aA as G}from"./icons-vendor-TGltgKsJ.js";import{t as r}from"./index-DsN-N-A2.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BsD1gqUZ.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-MN-5i-Jz.js";import"./crypto-vendor-DK-7ILyQ.js";const Q=({fetchWithAuth:a,apiBaseUrl:l,onClose:w})=>{const[x,z]=i.useState([]),[f,T]=i.useState([]),[_,v]=i.useState(!1),[u,C]=i.useState("apps"),[S,y]=i.useState(!1),[B,h]=i.useState(!1),[n,c]=i.useState({name:"",description:"",redirect_uris:"",scopes:[]}),[d,m]=i.useState({name:"",description:""}),R=["read_messages","send_messages","manage_channels","manage_roles","manage_server","read_user","modify_user"];i.useEffect(()=>{b(),g()},[]);const b=async()=>{v(!0);try{const s=await(await a(`${l}/oauth/apps/list/`)).json();z(s.apps||[])}catch{r.error("Failed to load OAuth apps")}finally{v(!1)}},g=async()=>{try{const s=await(await a(`${l}/bots/list/`)).json();T(s.bots||[])}catch{r.error("Failed to load bots")}},F=async()=>{if(!n.name){r.error("App name is required");return}try{const s=await(await a(`${l}/oauth/apps/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,redirect_uris:n.redirect_uris.split(`
`).filter(p=>p.trim())})})).json();r.success("OAuth app created successfully"),y(!1),c({name:"",description:"",redirect_uris:"",scopes:[]}),b(),s.client_id&&s.client_secret&&r.info(`Client ID: ${s.client_id}
Client Secret: ${s.client_secret}

Save these credentials securely. The secret will not be shown again.`)}catch{r.error("Failed to create OAuth app")}},D=async()=>{if(!d.name){r.error("Bot name is required");return}try{const s=await(await a(`${l}/bots/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();r.success("Bot created successfully"),h(!1),m({name:"",description:""}),g(),s.token&&r.info(`Bot Token: ${s.token}

Save this token securely. It will not be shown again.`)}catch{r.error("Failed to create bot")}},I=async o=>{if(confirm("Are you sure you want to delete this app? This cannot be undone."))try{await a(`${l}/oauth/apps/${o}/delete/`,{method:"DELETE"}),r.success("App deleted successfully"),b()}catch{r.error("Failed to delete app")}},N=async o=>{if(confirm("Are you sure you want to delete this bot? This cannot be undone."))try{await a(`${l}/bots/${o}/delete/`,{method:"DELETE"}),r.success("Bot deleted successfully"),g()}catch{r.error("Failed to delete bot")}},L=(o,s)=>{navigator.clipboard.writeText(o),r.success(`${s} copied to clipboard`)},O=o=>{c(s=>({...s,scopes:s.scopes.includes(o)?s.scopes.filter(p=>p!==o):[...s.scopes,o]}))};return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(j,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Developer Portal"})]}),e.jsx("button",{onClick:w,style:t.closeButton,children:e.jsx($,{})})]}),e.jsxs("div",{style:t.tabs,children:[e.jsxs("button",{onClick:()=>C("apps"),style:{...t.tab,...u==="apps"&&t.tabActive},children:[e.jsx(E,{style:{marginRight:"5px"}}),"OAuth Apps (",x.length,")"]}),e.jsxs("button",{onClick:()=>C("bots"),style:{...t.tab,...u==="bots"&&t.tabActive},children:[e.jsx(j,{style:{marginRight:"5px"}}),"Bots (",f.length,")"]})]}),e.jsx("div",{style:t.content,children:_?e.jsx("div",{style:t.loading,children:"Loading..."}):u==="apps"?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:t.toolbar,children:e.jsxs("button",{onClick:()=>y(!S),style:t.createButton,children:[e.jsx(k,{style:{marginRight:"5px"}}),"New OAuth App"]})}),S&&e.jsxs("div",{style:t.createForm,children:[e.jsx("h3",{style:t.formTitle,children:"Create OAuth Application"}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Application Name"}),e.jsx("input",{type:"text",value:n.name,onChange:o=>c({...n,name:o.target.value}),placeholder:"My Awesome App",style:t.input})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Description"}),e.jsx("textarea",{value:n.description,onChange:o=>c({...n,description:o.target.value}),placeholder:"What does your app do?",style:{...t.input,minHeight:"60px"}})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Redirect URIs (one per line)"}),e.jsx("textarea",{value:n.redirect_uris,onChange:o=>c({...n,redirect_uris:o.target.value}),placeholder:"https://example.com/callback",style:{...t.input,minHeight:"80px"}})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Scopes"}),e.jsx("div",{style:t.scopesGrid,children:R.map(o=>e.jsxs("label",{style:t.scopeCheckbox,children:[e.jsx("input",{type:"checkbox",checked:n.scopes.includes(o),onChange:()=>O(o)}),e.jsx("span",{children:o})]},o))})]}),e.jsxs("div",{style:t.formActions,children:[e.jsx("button",{onClick:F,style:t.submitButton,children:"Create Application"}),e.jsx("button",{onClick:()=>y(!1),style:t.cancelButton,children:"Cancel"})]})]}),e.jsx("div",{style:t.appsList,children:x.length===0?e.jsx("div",{style:t.empty,children:"No OAuth apps yet. Create one to get started!"}):x.map(o=>e.jsxs("div",{style:t.appCard,children:[e.jsxs("div",{style:t.appHeader,children:[e.jsxs("div",{children:[e.jsx("div",{style:t.appName,children:o.name}),e.jsx("div",{style:t.appDescription,children:o.description})]}),e.jsx("button",{onClick:()=>I(o.id),style:t.deleteButton,children:e.jsx(A,{})})]}),e.jsxs("div",{style:t.appDetails,children:[e.jsxs("div",{style:t.credential,children:[e.jsx("strong",{children:"Client ID:"}),e.jsx("code",{style:t.code,children:o.client_id}),e.jsx("button",{onClick:()=>L(o.client_id,"Client ID"),style:t.copyButton,children:e.jsx(G,{})})]}),e.jsxs("div",{style:t.detail,children:[e.jsx("strong",{children:"Scopes:"})," ",o.scopes?.join(", ")||"None"]}),e.jsxs("div",{style:t.detail,children:[e.jsx("strong",{children:"Redirect URIs:"}),o.redirect_uris?.map((s,p)=>e.jsx("div",{style:t.uri,children:s},p))]})]})]},o.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:t.toolbar,children:e.jsxs("button",{onClick:()=>h(!B),style:t.createButton,children:[e.jsx(k,{style:{marginRight:"5px"}}),"New Bot"]})}),B&&e.jsxs("div",{style:t.createForm,children:[e.jsx("h3",{style:t.formTitle,children:"Create Bot Account"}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Bot Name"}),e.jsx("input",{type:"text",value:d.name,onChange:o=>m({...d,name:o.target.value}),placeholder:"My Bot",style:t.input})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Description"}),e.jsx("textarea",{value:d.description,onChange:o=>m({...d,description:o.target.value}),placeholder:"What does your bot do?",style:{...t.input,minHeight:"60px"}})]}),e.jsxs("div",{style:t.formActions,children:[e.jsx("button",{onClick:D,style:t.submitButton,children:"Create Bot"}),e.jsx("button",{onClick:()=>h(!1),style:t.cancelButton,children:"Cancel"})]})]}),e.jsx("div",{style:t.botsList,children:f.length===0?e.jsx("div",{style:t.empty,children:"No bots yet. Create one to automate tasks!"}):f.map(o=>e.jsx("div",{style:t.botCard,children:e.jsxs("div",{style:t.botHeader,children:[e.jsx(j,{style:{fontSize:"32px",color:"#5865f2"}}),e.jsxs("div",{style:{flex:1,marginLeft:"12px"},children:[e.jsx("div",{style:t.botName,children:o.name}),e.jsx("div",{style:t.botDescription,children:o.description}),e.jsxs("div",{style:t.botStatus,children:["Status: ",o.is_active?"ðŸŸ¢ Active":"ðŸ”´ Inactive"]})]}),e.jsx("button",{onClick:()=>N(o.id),style:t.deleteButton,children:e.jsx(A,{})})]})},o.id))})]})})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},tabs:{display:"flex",borderBottom:"1px solid #2c2f33",padding:"0 20px"},tab:{padding:"12px 20px",backgroundColor:"transparent",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",borderBottom:"2px solid transparent"},tabActive:{color:"#5865f2",borderBottom:"2px solid #5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},toolbar:{marginBottom:"20px"},createButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",fontWeight:"500"},createForm:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",marginBottom:"20px"},formTitle:{margin:"0 0 16px 0",fontSize:"16px",color:"#ffffff"},formGroup:{marginBottom:"16px"},label:{display:"block",color:"#dcddde",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},scopesGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},scopeCheckbox:{display:"flex",alignItems:"center",gap:"8px",color:"#dcddde",fontSize:"14px",cursor:"pointer"},formActions:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"20px"},submitButton:{padding:"10px 20px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelButton:{padding:"10px 20px",backgroundColor:"#4f545c",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},appsList:{display:"flex",flexDirection:"column",gap:"16px"},appCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},appHeader:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},appName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},appDescription:{fontSize:"14px",color:"#99aab5"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"5px"},appDetails:{display:"flex",flexDirection:"column",gap:"12px"},credential:{display:"flex",alignItems:"center",gap:"10px",fontSize:"14px",color:"#dcddde"},code:{flex:1,padding:"8px",backgroundColor:"#1e1e1e",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#5865f2"},copyButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",padding:"5px"},detail:{fontSize:"14px",color:"#dcddde"},uri:{fontSize:"13px",color:"#5865f2",marginLeft:"8px",fontFamily:"monospace"},botsList:{display:"flex",flexDirection:"column",gap:"16px"},botCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},botHeader:{display:"flex",alignItems:"center"},botName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},botDescription:{fontSize:"14px",color:"#99aab5",marginBottom:"4px"},botStatus:{fontSize:"13px",color:"#dcddde"}};export{Q as default};
