var K=Object.defineProperty;var n=(m,g)=>K(m,"name",{value:g,configurable:!0});import{r as l,f as U,j as e}from"./react-core-Djgtqrmb.js";import{C as M,ac as A,K as w,ay as v,au as z,b9 as T}from"./icons-vendor-BMXAt4pj.js";const L=n(({x:m,y:g,user:c,currentUser:S,onClose:d,onAction:h,voiceChannels:y=[],isAdmin:b=!1,isInVoiceRoom:x=!1,friendsList:f=[],conversationId:R=null})=>{const p=l.useRef(null),[j,I]=l.useState(!1),[s,a]=l.useState(0),C=f&&f.length>0&&f.some(t=>{const i=t.username||t.sender_username||t.receiver_username||t.display_name||t.friend?.username,u=c.username||c.display_name;return i===u&&i!==S.username}),o=l.useCallback((t,i=null)=>{h(t,c,i),d()},[h,c,d]);l.useEffect(()=>{const t=n(u=>{p.current&&!p.current.contains(u.target)&&d()},"handleClickOutside"),i=n(u=>{u.key==="Escape"?d():u.key==="ArrowDown"?(u.preventDefault(),a(k=>Math.min(k+1,F()-1))):u.key==="ArrowUp"?(u.preventDefault(),a(k=>Math.max(k-1,0))):u.key==="Enter"&&(u.preventDefault(),N())},"handleKeyDown");return document.addEventListener("mousedown",t),document.addEventListener("keydown",i),p.current&&p.current.focus(),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",i)}},[d]);const F=n(()=>{let t=2;return x&&(t+=1),b&&x&&(t+=3),t},"getMenuItemCount"),N=n(()=>{const t=["profile","message"];x&&t.push("volume"),b&&x&&t.push("move","kick","server_mute"),t[s]&&o(t[s])},"triggerFocusedAction"),_=Math.min(m,window.innerWidth-220),D=Math.min(g,window.innerHeight-300),E=document.getElementById("portal-root");return E?U.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483646,background:"transparent",pointerEvents:"auto"},onClick:d}),e.jsxs("div",{ref:p,role:"menu","aria-label":`${c} için eylemler`,tabIndex:-1,style:{...r.menu,left:`${_}px`,top:`${D}px`,zIndex:2147483647,position:"fixed",pointerEvents:"auto"},children:[e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...r.menuItem,background:s===0?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>o("profile"),"onClick"),onMouseEnter:n(()=>a(0),"onMouseEnter"),children:[e.jsx(M,{})," Profili Görüntüle"]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...r.menuItem,background:s===1?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>o("message"),"onClick"),onMouseEnter:n(()=>a(1),"onMouseEnter"),children:[e.jsx(A,{})," Mesaj Gönder"]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...r.menuItem,background:s===2?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>o("invite_to_server"),"onClick"),onMouseEnter:n(()=>a(2),"onMouseEnter"),children:[e.jsx(w,{})," Sunucuya Davet Et"]}),C?e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...r.menuItemDanger,background:s===3?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:n(()=>o("remove_friend"),"onClick"),onMouseEnter:n(()=>a(3),"onMouseEnter"),children:[e.jsx(v,{})," Arkadaşlıktan Çıkar"]}):e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...r.menuItem,background:s===3?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>o("add_friend"),"onClick"),onMouseEnter:n(()=>a(3),"onMouseEnter"),children:[e.jsx(M,{})," Arkadaş Ekle"]}),e.jsx("div",{role:"separator",style:r.separator}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...r.menuItem,background:s===4?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>o("mute_user"),"onClick"),onMouseEnter:n(()=>a(4),"onMouseEnter"),children:[e.jsx(z,{})," Sessize Al"]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...r.menuItemDanger,background:s===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:n(()=>o("block_user"),"onClick"),onMouseEnter:n(()=>a(5),"onMouseEnter"),children:[e.jsx(v,{})," Kullanıcıyı Engelle"]}),b&&x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{role:"separator",style:r.separator}),e.jsx("div",{style:r.sectionTitle,"aria-label":"Moderasyon seçenekleri",children:"Moderasyon"}),e.jsxs("div",{role:"menuitem",tabIndex:0,"aria-haspopup":"true","aria-expanded":j,className:"user-context-menu-item",style:{...r.menuItem,background:s===4?"rgba(88, 101, 242, 0.2)":"transparent"},onMouseEnter:n(()=>{I(!0),a(4)},"onMouseEnter"),onMouseLeave:n(()=>I(!1),"onMouseLeave"),children:[e.jsx(w,{})," Kanala Taşı",j&&y.length>0&&e.jsx("div",{role:"menu","aria-label":"Hedef kanallar",style:r.submenu,children:y.map(t=>e.jsx("div",{role:"menuitem",tabIndex:0,className:"user-context-submenu-item",style:r.submenuItem,onClick:n(i=>{i.stopPropagation(),o("move",t.slug)},"onClick"),children:t.name},t.slug))})]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...r.menuItemDanger,background:s===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:n(()=>o("kick"),"onClick"),onMouseEnter:n(()=>a(5),"onMouseEnter"),children:[e.jsx(v,{})," Kanaldan At"]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...r.menuItem,background:s===6?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>o("server_mute"),"onClick"),onMouseEnter:n(()=>a(6),"onMouseEnter"),children:[e.jsx(T,{})," Mikrofonu Kapat (Server)"]})]})]})]}),E):null},"UserContextMenu"),r={menu:{background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"200px",padding:"6px 0",color:"#dbdee1",fontSize:"14px",border:"1px solid #1e1f22"},menuItem:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",position:"relative"},menuItemDanger:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",color:"#ed4245",position:"relative"},separator:{height:"1px",background:"#1e1f22",margin:"6px 0"},sectionTitle:{fontSize:"11px",textTransform:"uppercase",color:"#72767d",padding:"6px 12px 4px",fontWeight:"600"},submenu:{position:"absolute",left:"100%",top:0,background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"180px",padding:"6px 0",border:"1px solid #1e1f22",marginLeft:"4px"},submenuItem:{padding:"8px 12px",cursor:"pointer",transition:"background 0.1s"}};if(!document.getElementById("user-context-menu-styles")){const m=document.createElement("style");m.id="user-context-menu-styles",m.textContent=`
        .user-context-menu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        .user-context-menu-item-danger:hover {
            background: rgba(237, 66, 69, 0.2) !important;
        }
        .user-context-submenu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        
        /* ✨ Keyboard Navigation Focus Styles */
        .user-context-menu-item:focus,
        .user-context-menu-item-danger:focus,
        .user-context-submenu-item:focus {
            outline: 2px solid rgba(88, 101, 242, 0.8);
            outline-offset: -2px;
        }
        
        /* ✨ Menu Container Focus */
        [role="menu"]:focus {
            outline: none;
        }
        
        /* ✨ Smooth Transitions */
        .user-context-menu-item,
        .user-context-menu-item-danger,
        .user-context-submenu-item {
            transition: background 0.15s ease, outline 0.15s ease;
        }
    `,document.head.appendChild(m)}const P=l.memo(L);export{P as default};
