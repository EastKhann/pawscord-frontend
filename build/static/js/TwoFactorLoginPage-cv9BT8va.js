var C=Object.defineProperty;var o=(u,n)=>C(u,"name",{value:n,configurable:!0});import{r,j as e}from"./react-core-Djgtqrmb.js";import{b as v,c as z}from"./router-vendor-gmJ9Mn-1.js";import{A,a1 as F,a2 as L}from"./icons-vendor-BW7dxHkX.js";import{a as B,A as T}from"./index-BRQzOq3v.js";import"./media-vendor-CxFPycob.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const K=o(()=>{const{login:u}=B(),n=v(),[y]=z(),[f,h]=r.useState(""),[i,k]=r.useState(!1),[x,j]=r.useState(""),[m,s]=r.useState(""),[l,b]=r.useState(!1),d=y.get("temp_token");if(r.useEffect(()=>{d||n("/login")},[d,n]),!d)return null;const S=o(async a=>{a.preventDefault(),s(""),b(!0);const c=i?x:f;if(!c){s("Kod gerekli"),b(!1);return}try{const g=await fetch(`${T}/security/2fa/verify-login/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({temp_token:d,code:c})}),p=await g.json();g.ok&&p.verified?(u(p.access,p.refresh),n("/")):s(p.error||"Ge√ßersiz kod")}catch{s("Baƒülantƒ± hatasƒ± olu≈ütu")}finally{b(!1)}},"handleSubmit");return e.jsx("div",{style:t.container,children:e.jsxs("div",{style:t.card,children:[e.jsxs("button",{onClick:o(()=>n("/login"),"onClick"),style:t.backButton,children:[e.jsx(A,{})," Geri"]}),e.jsx(F,{style:t.icon}),e.jsx("h2",{style:t.title,children:"ƒ∞ki Fakt√∂rl√º Doƒürulama"}),e.jsx("p",{style:t.subtitle,children:i?"Yedek kodunuzu girin":"Authenticator uygulamanƒ±zdaki 6 haneli kodu girin"}),e.jsxs("form",{onSubmit:S,style:t.form,children:[i?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",placeholder:"Yedek kod",value:x,onChange:o(a=>j(a.target.value),"onChange"),style:t.backupInput,autoFocus:!0,disabled:l}),e.jsx("button",{type:"button",onClick:o(()=>k(!1),"onClick"),style:t.backupLink,children:"‚Üê Authenticator kodu kullan"})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",maxLength:6,placeholder:"000000",value:f,onChange:o(a=>{const c=a.target.value.replace(/\D/g,"");h(c)},"onChange"),style:t.codeInput,autoFocus:!0,disabled:l}),e.jsxs("button",{type:"button",onClick:o(()=>k(!0),"onClick"),style:t.backupLink,children:[e.jsx(L,{})," Yedek kod kullan"]})]}),m&&e.jsxs("div",{style:t.error,children:["‚ùå ",m]}),e.jsx("button",{type:"submit",style:t.submitButton,disabled:l||!i&&f.length!==6||i&&!x,children:l?"Doƒürulanƒ±yor...":"Giri≈ü Yap"})]}),e.jsxs("div",{style:t.info,children:[e.jsx("p",{style:t.infoTitle,children:"üí° ƒ∞pu√ßlarƒ±:"}),e.jsxs("ul",{style:t.infoList,children:[e.jsx("li",{children:"Kod s√ºrekli deƒüi≈üir (30 saniyede bir)"}),e.jsx("li",{children:"Telefonunuzu kaybettiyseniz yedek kod kullanƒ±n"}),e.jsx("li",{children:"Her yedek kod sadece bir kere kullanƒ±labilir"})]})]})]})})},"TwoFactorLoginPage"),t={container:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#1e1f22",padding:"20px"},card:{backgroundColor:"#2b2d31",borderRadius:"12px",padding:"40px",maxWidth:"500px",width:"100%",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",position:"relative"},backButton:{position:"absolute",top:"20px",left:"20px",background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px",transition:"color 0.2s"},icon:{fontSize:"64px",color:"#5865f2",display:"block",margin:"0 auto 20px"},title:{color:"#fff",fontSize:"28px",textAlign:"center",margin:"0 0 10px 0"},subtitle:{color:"#b9bbbe",fontSize:"16px",textAlign:"center",marginBottom:"30px"},form:{display:"flex",flexDirection:"column",gap:"15px"},codeInput:{backgroundColor:"#1e1f22",border:"2px solid #5865f2",borderRadius:"6px",padding:"16px",color:"#fff",fontSize:"32px",textAlign:"center",letterSpacing:"8px",fontFamily:"monospace",outline:"none"},backupInput:{backgroundColor:"#1e1f22",border:"1px solid #1e1f22",borderRadius:"6px",padding:"12px",color:"#fff",fontSize:"16px",textAlign:"center",fontFamily:"monospace",outline:"none"},backupLink:{background:"none",border:"none",color:"#5865f2",cursor:"pointer",fontSize:"14px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},error:{backgroundColor:"#da373c",color:"#fff",padding:"12px",borderRadius:"6px",fontSize:"14px",textAlign:"center"},submitButton:{backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"6px",padding:"12px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s"},info:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"15px",marginTop:"20px"},infoTitle:{color:"#fff",fontSize:"14px",fontWeight:"bold",margin:"0 0 10px 0"},infoList:{color:"#b9bbbe",fontSize:"14px",margin:0,paddingLeft:"20px"}};export{K as default};
