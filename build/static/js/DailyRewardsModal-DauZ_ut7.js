import{r as o,d as e,ch as E,i as B,cb as I,J as h,aD as F,aK as A}from"./react-core-CecKX_Gm.js";import{t as s}from"./index-B2Q2nuQ3.js";const $=({fetchWithAuth:c,apiBaseUrl:m,onClose:p,username:l})=>{const[i,y]=o.useState([]),[n,S]=o.useState(0),[x,v]=o.useState(!1),[k,R]=o.useState(!0),[f,g]=o.useState(!1),[u,D]=o.useState(null);o.useEffect(()=>{w()},[]);const w=async()=>{try{const r=await(await c(`${m}/api/rewards/daily/`)).json();y(r.rewards||[]),S(r.streak||0),v(r.can_claim||!1),D(r.last_claimed)}catch(a){console.error("Failed to load daily rewards:",a),s.error("Failed to load rewards")}finally{R(!1)}},z=async()=>{if(!x){s.error("Already claimed today!");return}g(!0);try{const r=await(await c(`${m}/api/rewards/claim/`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();r.success?(s.success(`Claimed ${r.reward.amount} ${r.reward.type}! ðŸŽ`),w()):s.error(r.error||"Failed to claim reward")}catch(a){console.error("Claim error:",a),s.error("Failed to claim reward")}finally{g(!1)}},b=a=>{switch(a){case"coins":return e.createElement(A,{style:{color:"#faa61a"}});case"premium":return e.createElement(F,{style:{color:"#f04747"}});default:return e.createElement(E,{style:{color:"#5865f2"}})}},d=(()=>{const a=n%7;return i[a]||null})();return e.createElement("div",{style:t.overlay,onClick:p},e.createElement("div",{style:t.modal,onClick:a=>a.stopPropagation()},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(E,{style:{fontSize:"24px",color:"#43b581"}}),e.createElement("h2",{style:{margin:0,fontSize:"20px"}},"Daily Rewards")),e.createElement("button",{onClick:p,style:t.closeBtn},e.createElement(B,null))),e.createElement("div",{style:t.content},k?e.createElement("div",{style:t.loading},"Loading..."):e.createElement(e.Fragment,null,e.createElement("div",{style:t.streakCard},e.createElement(I,{style:{fontSize:"48px",color:"#f04747"}}),e.createElement("div",{style:t.streakInfo},e.createElement("div",{style:t.streakNumber},n),e.createElement("div",{style:t.streakLabel},"Day Streak"))),x&&d&&e.createElement("div",{style:t.claimSection},e.createElement("h3",{style:t.sectionTitle},"Today's Reward"),e.createElement("div",{style:t.currentRewardCard},e.createElement("div",{style:t.rewardIcon},b(d.type)),e.createElement("div",{style:t.rewardDetails},e.createElement("div",{style:t.rewardAmount},d.amount," ",d.type),e.createElement("div",{style:t.rewardDescription},d.description))),e.createElement("button",{onClick:z,disabled:f,style:t.claimBtn},f?"Claiming...":"Claim Reward ðŸŽ")),!x&&u&&e.createElement("div",{style:t.alreadyClaimed},e.createElement(h,{style:{color:"#43b581",fontSize:"48px"}}),e.createElement("h3",null,"Already Claimed!"),e.createElement("p",null,"Come back tomorrow for your next reward"),e.createElement("div",{style:t.nextRewardTime},"Next reward in: ",L(u))),e.createElement("div",{style:t.calendarSection},e.createElement("h3",{style:t.sectionTitle},"7-Day Reward Cycle"),e.createElement("div",{style:t.calendar},i.map((a,r)=>{const T=r===n%7,C=r<n%7;return e.createElement("div",{key:r,style:{...t.calendarDay,...T&&t.calendarDayActive,...C&&t.calendarDayClaimed}},e.createElement("div",{style:t.dayNumber},"Day ",r+1),e.createElement("div",{style:t.dayIcon},b(a.type)),e.createElement("div",{style:t.dayReward},a.amount),C&&e.createElement("div",{style:t.claimedBadge},e.createElement(h,null)))}))),e.createElement("div",{style:t.info},e.createElement("p",{style:t.infoText},"ðŸ“… Log in every day to maintain your streak and earn rewards!"),e.createElement("p",{style:t.infoText},"ðŸ”¥ Missing a day will reset your streak to 0"))))))},L=c=>{const m=new Date,p=new Date(c),l=new Date(p);l.setDate(l.getDate()+1),l.setHours(0,0,0,0);const i=l-m,y=Math.floor(i/(1e3*60*60)),n=Math.floor(i%(1e3*60*60)/(1e3*60));return`${y}h ${n}m`},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"85vh",display:"flex",flexDirection:"column",color:"#fff"},header:{padding:"20px",borderBottom:"1px solid #444",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},closeBtn:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",padding:"40px",color:"#99aab5"},streakCard:{backgroundColor:"#2c2f33",borderRadius:"12px",padding:"24px",display:"flex",alignItems:"center",gap:"20px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},streakInfo:{display:"flex",flexDirection:"column",gap:"4px"},streakNumber:{fontSize:"48px",fontWeight:"bold",color:"#f04747",lineHeight:1},streakLabel:{fontSize:"14px",color:"#99aab5",textTransform:"uppercase",letterSpacing:"1px"},claimSection:{marginBottom:"32px"},sectionTitle:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#dcddde"},currentRewardCard:{backgroundColor:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",background:"linear-gradient(135deg, #5865f2 0%, #7289da 100%)",borderRadius:"12px",padding:"24px",display:"flex",alignItems:"center",gap:"20px",marginBottom:"16px",boxShadow:"0 8px 16px rgba(88, 101, 242, 0.3)"},rewardIcon:{fontSize:"48px",display:"flex",alignItems:"center",justifyContent:"center"},rewardDetails:{flex:1},rewardAmount:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px"},rewardDescription:{fontSize:"14px",opacity:.9},claimBtn:{width:"100%",padding:"16px",backgroundColor:"#43b581",border:"none",borderRadius:"8px",color:"#fff",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(67, 181, 129, 0.3)"},alreadyClaimed:{textAlign:"center",padding:"40px 20px",marginBottom:"32px"},nextRewardTime:{marginTop:"16px",padding:"12px",backgroundColor:"#2c2f33",borderRadius:"8px",fontSize:"16px",fontWeight:"600"},calendarSection:{marginBottom:"24px"},calendar:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(90px, 1fr))",gap:"12px"},calendarDay:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",textAlign:"center",border:"2px solid transparent",transition:"all 0.2s",position:"relative"},calendarDayActive:{borderColor:"#43b581",backgroundColor:"#2c3136",boxShadow:"0 0 20px rgba(67, 181, 129, 0.3)"},calendarDayClaimed:{opacity:.5},dayNumber:{fontSize:"12px",color:"#99aab5",marginBottom:"8px",fontWeight:"600"},dayIcon:{fontSize:"32px",marginBottom:"8px",display:"flex",justifyContent:"center"},dayReward:{fontSize:"16px",fontWeight:"bold"},claimedBadge:{position:"absolute",top:"8px",right:"8px",color:"#43b581",fontSize:"16px"},info:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},infoText:{fontSize:"14px",color:"#dcddde",margin:"8px 0",lineHeight:"1.6"}};export{$ as default};
