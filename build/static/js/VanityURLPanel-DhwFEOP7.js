import{r as i,j as e}from"./react-vendor-D8Fi5F9E.js";import{f as C,a as w,ae as R,aT as L}from"./icons-vendor-CKPm393i.js";import{t as l}from"./index-BJBcuns6.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./state-vendor-De5qIGw3.js";const F=({fetchWithAuth:c,apiBaseUrl:d,onClose:m,serverId:x})=>{const[s,y]=i.useState(""),[f,b]=i.useState(null),[h,v]=i.useState([]),[p,u]=i.useState(!1),[r,a]=i.useState(null);i.useEffect(()=>{g()},[]);const g=async()=>{try{const o=await(await c(`${d}/api/vanity/get/${x}/`)).json();b(o.vanity_url),v(o.history||[])}catch{}},j=async n=>{if(!n||n.length<3){a(null);return}u(!0);try{const k=await(await c(`${d}/api/vanity/check/?url=${n}`)).json();a(k.available)}catch{a(!1)}finally{u(!1)}},S=async()=>{if(!s||s.length<3){l.error("Vanity URL must be at least 3 characters");return}if(!r){l.error("This vanity URL is not available");return}try{await c(`${d}/api/vanity/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_id:x,vanity_url:s})}),l.success("Vanity URL set successfully"),y(""),a(null),g()}catch{l.error("Failed to set vanity URL")}};return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(C,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Vanity URL"})]}),e.jsx("button",{onClick:m,style:t.closeButton,children:e.jsx(w,{})})]}),e.jsxs("div",{style:t.content,children:[f&&e.jsxs("div",{style:t.currentSection,children:[e.jsx("div",{style:t.label,children:"Current Vanity URL:"}),e.jsxs("div",{style:t.currentUrl,children:["pawscord.com/",f]})]}),e.jsxs("div",{style:t.section,children:[e.jsx("div",{style:t.label,children:"Set New Vanity URL"}),e.jsxs("div",{style:t.inputRow,children:[e.jsx("div",{style:t.prefix,children:"pawscord.com/"}),e.jsx("input",{type:"text",value:s,onChange:n=>{const o=n.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"");y(o),j(o)},placeholder:"my-server",style:t.input,maxLength:32}),p&&e.jsx("div",{style:t.checking,children:"Checking..."}),!p&&r===!0&&e.jsx(R,{style:{color:"#43b581",fontSize:"20px"}}),!p&&r===!1&&e.jsx("div",{style:t.unavailable,children:"Unavailable"})]}),e.jsx("div",{style:t.hint,children:"3-32 characters, letters, numbers, and hyphens only"}),e.jsx("button",{onClick:S,disabled:!r,style:{...t.setButton,...!r&&t.setButtonDisabled},children:"Set Vanity URL"})]}),h.length>0&&e.jsxs("div",{style:t.section,children:[e.jsxs("div",{style:t.sectionTitle,children:[e.jsx(L,{style:{marginRight:"8px"}}),"History"]}),e.jsx("div",{style:t.historyList,children:h.map((n,o)=>e.jsxs("div",{style:t.historyItem,children:[e.jsx("div",{style:t.historyUrl,children:n.vanity_url}),e.jsx("div",{style:t.historyDate,children:new Date(n.created_at).toLocaleDateString()})]},o))})]})]})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},currentSection:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",marginBottom:"24px"},currentUrl:{fontSize:"18px",fontWeight:"600",color:"#5865f2",fontFamily:"monospace"},section:{marginBottom:"24px"},label:{fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"8px"},inputRow:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#2c2f33",borderRadius:"4px",padding:"10px 12px"},prefix:{fontSize:"14px",color:"#99aab5"},input:{flex:1,background:"none",border:"none",color:"#ffffff",fontSize:"14px",outline:"none"},checking:{fontSize:"12px",color:"#faa61a"},unavailable:{fontSize:"12px",color:"#f04747"},hint:{fontSize:"12px",color:"#99aab5",marginTop:"8px",marginBottom:"16px"},setButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},setButtonDisabled:{backgroundColor:"#2c2f33",cursor:"not-allowed"},sectionTitle:{fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"12px",display:"flex",alignItems:"center"},historyList:{display:"flex",flexDirection:"column",gap:"8px"},historyItem:{backgroundColor:"#2c2f33",borderRadius:"4px",padding:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},historyUrl:{fontSize:"14px",color:"#dcddde",fontFamily:"monospace"},historyDate:{fontSize:"12px",color:"#99aab5"}};export{F as default};
