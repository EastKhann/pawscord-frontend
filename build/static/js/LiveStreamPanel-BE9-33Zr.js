import{r as n,j as e}from"./react-core-D6cE4lil.js";import{x as p,a as R,v as B,y as I,u as z,aC as M}from"./icons-vendor-DT2gd7vx.js";const H=({onClose:m,currentUser:j,ws:D,channelId:L,fetchWithAuth:A,apiBaseUrl:F,roomSlug:W})=>{const[l,x]=n.useState(!1),[u,v]=n.useState([]),[s,d]=n.useState({quality:"720p",camera:!0,microphone:!0,screenShare:!1}),[k,C]=n.useState([]),[c,h]=n.useState(""),i=n.useRef(null),o=n.useRef(null),f=n.useRef({}),S=async()=>{try{const r={video:s.camera?{width:{ideal:s.quality==="1080p"?1920:1280},height:{ideal:s.quality==="1080p"?1080:720}}:!1,audio:s.microphone},a=await navigator.mediaDevices.getUserMedia(r);if(s.screenShare){const b=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});a.getTracks().forEach(w=>b.addTrack(w)),o.current=b}else o.current=a;i.current&&(i.current.srcObject=o.current),x(!0)}catch{}},g=()=>{o.current&&(o.current.getTracks().forEach(r=>r.stop()),o.current=null),i.current&&(i.current.srcObject=null),Object.values(f.current).forEach(r=>r.close()),f.current={},x(!1),v([])},y=()=>{c.trim()&&(C(r=>[...r,{author:j||"Sen",text:c}]),h(""))};return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.panel,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(p,{size:20,color:"#ed4245"}),e.jsx("h2",{style:t.title,children:"CanlÄ± YayÄ±n"}),l&&e.jsx("span",{style:t.liveBadge,children:"ðŸ”´ CANLI"})]}),e.jsx("button",{onClick:()=>{l&&g(),m()},style:t.closeButton,children:e.jsx(R,{size:20})})]}),e.jsxs("div",{style:t.content,children:[e.jsxs("div",{style:t.mainArea,children:[e.jsxs("div",{style:t.videoContainer,children:[e.jsx("video",{ref:i,autoPlay:!0,muted:!0,style:t.video}),!l&&e.jsxs("div",{style:t.noStream,children:[e.jsx(p,{size:48,color:"#4e5058"}),e.jsx("p",{children:"YayÄ±n baÅŸlatÄ±lmadÄ±"})]})]}),e.jsx("div",{style:t.controls,children:l?e.jsx("button",{onClick:g,style:t.stopButton,children:"YayÄ±nÄ± Durdur"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.settingsGroup,children:[e.jsxs("label",{style:t.settingLabel,children:[e.jsx("input",{type:"checkbox",checked:s.camera,onChange:r=>d({...s,camera:r.target.checked})}),e.jsx(p,{size:14})," ",e.jsx("span",{children:"Kamera"})]}),e.jsxs("label",{style:t.settingLabel,children:[e.jsx("input",{type:"checkbox",checked:s.microphone,onChange:r=>d({...s,microphone:r.target.checked})}),e.jsx(B,{size:14})," ",e.jsx("span",{children:"Mikrofon"})]}),e.jsxs("label",{style:t.settingLabel,children:[e.jsx("input",{type:"checkbox",checked:s.screenShare,onChange:r=>d({...s,screenShare:r.target.checked})}),e.jsx(I,{size:14})," ",e.jsx("span",{children:"Ekran PaylaÅŸÄ±mÄ±"})]})]}),e.jsxs("select",{value:s.quality,onChange:r=>d({...s,quality:r.target.value}),style:t.qualitySelect,children:[e.jsx("option",{value:"480p",children:"480p"}),e.jsx("option",{value:"720p",children:"720p HD"}),e.jsx("option",{value:"1080p",children:"1080p Full HD"})]}),e.jsx("button",{onClick:S,style:t.startButton,children:"YayÄ±nÄ± BaÅŸlat"})]})})]}),e.jsxs("div",{style:t.sidebar,children:[e.jsxs("div",{style:t.viewersSection,children:[e.jsxs("div",{style:t.sectionHeader,children:[e.jsx(z,{size:16})," ",e.jsxs("span",{children:["Ä°zleyiciler (",u.length,")"]})]}),e.jsx("div",{style:t.viewersList,children:u.map((r,a)=>e.jsxs("div",{style:t.viewer,children:[e.jsx("div",{style:t.viewerAvatar,children:r.name?.[0]||"?"}),e.jsx("span",{children:r.name})]},a))})]}),e.jsxs("div",{style:t.chatSection,children:[e.jsxs("div",{style:t.sectionHeader,children:[e.jsx(M,{size:16})," ",e.jsx("span",{children:"Sohbet"})]}),e.jsx("div",{style:t.chatMessages,children:k.map((r,a)=>e.jsxs("div",{style:t.chatMessage,children:[e.jsxs("span",{style:t.chatAuthor,children:[r.author,":"]}),e.jsx("span",{style:t.chatText,children:r.text})]},a))}),e.jsxs("div",{style:t.chatInput,children:[e.jsx("input",{type:"text",placeholder:"Mesaj yaz...",value:c,onChange:r=>h(r.target.value),onKeyPress:r=>r.key==="Enter"&&y(),style:t.input}),e.jsx("button",{onClick:y,style:t.sendButton,children:"GÃ¶nder"})]})]})]})]})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"95%",maxWidth:"1400px",height:"90vh",display:"flex",flexDirection:"column"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},title:{margin:0,fontSize:"18px",color:"#ffffff"},liveBadge:{backgroundColor:"#ed4245",color:"#ffffff",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px"},content:{display:"flex",flex:1,gap:"16px",padding:"16px",overflow:"hidden"},mainArea:{flex:1,display:"flex",flexDirection:"column",gap:"16px"},videoContainer:{flex:1,backgroundColor:"#000000",borderRadius:"8px",position:"relative",overflow:"hidden"},video:{width:"100%",height:"100%",objectFit:"contain"},noStream:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#b9bbbe"},controls:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},settingsGroup:{display:"flex",gap:"16px",flex:1},settingLabel:{display:"flex",alignItems:"center",gap:"8px",color:"#dcddde",cursor:"pointer"},qualitySelect:{backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",cursor:"pointer"},startButton:{backgroundColor:"#3ba55d",color:"#ffffff",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},stopButton:{backgroundColor:"#ed4245",color:"#ffffff",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},sidebar:{width:"300px",display:"flex",flexDirection:"column",gap:"16px"},viewersSection:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",maxHeight:"250px",display:"flex",flexDirection:"column"},sectionHeader:{display:"flex",alignItems:"center",gap:"8px",color:"#ffffff",fontWeight:"bold",marginBottom:"12px"},viewersList:{flex:1,overflowY:"auto"},viewer:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0",color:"#dcddde"},viewerAvatar:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},chatSection:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",flex:1,display:"flex",flexDirection:"column"},chatMessages:{flex:1,overflowY:"auto",marginBottom:"12px"},chatMessage:{marginBottom:"8px",color:"#dcddde",fontSize:"14px"},chatAuthor:{fontWeight:"bold",color:"#5865f2",marginRight:"4px"},chatText:{color:"#dcddde"},chatInput:{display:"flex",gap:"8px"},input:{flex:1,backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",outline:"none"},sendButton:{backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"}};export{H as default};
