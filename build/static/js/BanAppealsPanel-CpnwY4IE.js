var k=Object.defineProperty;var n=(i,r)=>k(i,"name",{value:r,configurable:!0});import{r as t,j as e}from"./react-core-Djgtqrmb.js";import{aA as N,x as b,aZ as f,aB as y,w as L}from"./icons-vendor-BMXAt4pj.js";function R({apiBaseUrl:i,fetchWithAuth:r}){const[d,w]=t.useState([]),[c,m]=t.useState(""),[x,j]=t.useState(""),[l,S]=t.useState(null),[u,o]=t.useState(!1),[v,p]=t.useState("");t.useEffect(()=>{g(),A()},[]);const g=n(async()=>{o(!0);try{const s=await r(`${i}/ban-appeals/list/`);if(s.ok){const a=await s.json();w(a.appeals||[])}}catch{}finally{o(!1)}},"loadAppeals"),A=n(async()=>{try{const s=await r(`${i}/ban-appeals/status/`);if(s.ok){const a=await s.json();S(a)}}catch{}},"loadBanInfo"),D=n(async()=>{if(!c.trim()){p("âŒ Please provide a reason");return}o(!0);try{const s=await r(`${i}/adv/ban-appeal/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:c,details:x||null})});if(s.ok)p("âœ… Appeal submitted successfully!"),m(""),j(""),g();else{const a=await s.json();p(`âŒ ${a.error||"Failed to submit appeal"}`)}}catch(s){p("âŒ Network error: "+s.message)}finally{o(!1)}},"submitAppeal"),_=n(s=>{const a={pending:{icon:e.jsx(y,{}),color:"#faa61a",text:"Pending"},approved:{icon:e.jsx(L,{}),color:"#43b581",text:"Approved"},rejected:{icon:e.jsx(b,{}),color:"#f04747",text:"Rejected"}};return a[s]||a.pending},"getStatusBadge");return e.jsxs("div",{className:"ban-appeals-panel",children:[e.jsx("div",{className:"appeals-header",children:e.jsxs("h2",{children:[e.jsx(N,{})," Ban Appeals"]})}),v&&e.jsx("div",{className:"appeal-message",children:v}),l&&l.is_banned&&e.jsx("div",{className:"ban-info-card",children:e.jsxs("div",{className:"ban-warning",children:[e.jsx(b,{className:"warning-icon"}),e.jsxs("div",{className:"warning-text",children:[e.jsx("h3",{children:"You are currently banned"}),e.jsx("p",{children:l.ban_reason||"No reason provided"}),e.jsxs("div",{className:"ban-meta",children:[e.jsxs("span",{children:["Banned on: ",new Date(l.banned_at).toLocaleDateString()]}),l.expires_at&&e.jsxs("span",{children:["Expires: ",new Date(l.expires_at).toLocaleDateString()]})]})]})]})}),e.jsxs("div",{className:"submit-appeal-section",children:[e.jsxs("h3",{children:[e.jsx(f,{})," Submit New Appeal"]}),e.jsxs("div",{className:"appeal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reason for Appeal:"}),e.jsx("input",{type:"text",placeholder:"Why should you be unbanned?",value:c,onChange:n(s=>m(s.target.value),"onChange"),className:"form-input",maxLength:200}),e.jsxs("div",{className:"char-count",children:[c.length,"/200"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Additional Details (optional):"}),e.jsx("textarea",{placeholder:"Provide any additional context or evidence...",value:x,onChange:n(s=>j(s.target.value),"onChange"),className:"form-textarea",rows:5,maxLength:1e3}),e.jsxs("div",{className:"char-count",children:[x.length,"/1000"]})]}),e.jsxs("button",{className:"submit-btn",onClick:D,disabled:u||!c.trim(),children:[e.jsx(f,{})," Submit Appeal"]})]}),e.jsxs("div",{className:"appeal-guidelines",children:[e.jsx("h4",{children:"ðŸ“‹ Guidelines:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Be honest and respectful in your appeal"}),e.jsx("li",{children:"Explain why you believe the ban was unfair or a mistake"}),e.jsx("li",{children:"Provide evidence if available"}),e.jsx("li",{children:"Appeals are reviewed within 24-48 hours"})]})]})]}),e.jsxs("div",{className:"appeals-history",children:[e.jsxs("h3",{children:[e.jsx(y,{})," Your Appeals (",d.length,")"]}),u&&d.length===0?e.jsx("div",{className:"loading",children:"Loading appeals..."}):d.length===0?e.jsxs("div",{className:"empty-appeals",children:[e.jsx(N,{className:"empty-icon"}),e.jsx("p",{children:"No appeals submitted yet"})]}):e.jsx("div",{className:"appeals-list",children:d.map((s,a)=>{const h=_(s.status);return e.jsxs("div",{className:`appeal-item status-${s.status}`,children:[e.jsxs("div",{className:"appeal-header",children:[e.jsx("div",{className:"appeal-date",children:new Date(s.created_at).toLocaleString()}),e.jsxs("div",{className:"appeal-status",style:{background:h.color},children:[h.icon," ",h.text]})]}),e.jsxs("div",{className:"appeal-content",children:[e.jsxs("div",{className:"appeal-reason",children:[e.jsx("strong",{children:"Reason:"})," ",s.reason]}),s.details&&e.jsxs("div",{className:"appeal-details",children:[e.jsx("strong",{children:"Details:"})," ",s.details]})]}),s.admin_response&&e.jsxs("div",{className:"admin-response",children:[e.jsx("strong",{children:"Admin Response:"})," ",s.admin_response,e.jsxs("div",{className:"response-date",children:["Reviewed: ",new Date(s.reviewed_at).toLocaleString()]})]})]},a)})})]})]})}n(R,"BanAppealsPanel");export{R as default};
