import{r as o,d as e,k as h,i as S,c3 as C,S as I,c9 as g}from"./react-core-DMT_QkRe.js";import{t as i}from"./index-w8kftCDz.js";const z=({fetchWithAuth:x,apiBaseUrl:u,onClose:y,serverId:b,roomSlug:E})=>{const[n,k]=o.useState(""),[c,v]=o.useState([]),[s,d]=o.useState(!1),[r,l]=o.useState({author:"",dateFrom:"",dateTo:"",hasImage:!1,hasVideo:!1,hasLink:!1,hasEmbed:!1}),p=async()=>{if(!n.trim()){i.error("Please enter a search query");return}d(!0);try{const a=new URLSearchParams({q:n,server_id:b||"",room_slug:E||"",author:r.author||"",date_from:r.dateFrom||"",date_to:r.dateTo||"",has_image:r.hasImage||"",has_video:r.hasVideo||"",has_link:r.hasLink||"",has_embed:r.hasEmbed||""}),f=await(await x(`${u}/api/search/advanced/?${a}`)).json();v(f.results||[]),i.success(`Found ${f.results?.length||0} results`)}catch{i.error("Search failed")}finally{d(!1)}};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(h,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Advanced Search")),e.createElement("button",{onClick:y,style:t.closeButton},e.createElement(S,null))),e.createElement("div",{style:t.searchBar},e.createElement("input",{type:"text",value:n,onChange:a=>k(a.target.value),onKeyDown:a=>a.key==="Enter"&&p(),placeholder:"Search messages...",style:t.searchInput}),e.createElement("button",{onClick:p,style:t.searchButton,disabled:s},e.createElement(h,null)," ",s?"Searching...":"Search")),e.createElement("div",{style:t.filtersSection},e.createElement("div",{style:t.filterHeader},e.createElement(C,{style:{marginRight:"8px"}}),"Filters"),e.createElement("div",{style:t.filtersGrid},e.createElement("div",{style:t.filterGroup},e.createElement("label",{style:t.filterLabel},e.createElement(I,{style:{marginRight:"6px"}}),"Author"),e.createElement("input",{type:"text",value:r.author,onChange:a=>l({...r,author:a.target.value}),placeholder:"Username",style:t.filterInput})),e.createElement("div",{style:t.filterGroup},e.createElement("label",{style:t.filterLabel},e.createElement(g,{style:{marginRight:"6px"}}),"Date From"),e.createElement("input",{type:"date",value:r.dateFrom,onChange:a=>l({...r,dateFrom:a.target.value}),style:t.filterInput})),e.createElement("div",{style:t.filterGroup},e.createElement("label",{style:t.filterLabel},e.createElement(g,{style:{marginRight:"6px"}}),"Date To"),e.createElement("input",{type:"date",value:r.dateTo,onChange:a=>l({...r,dateTo:a.target.value}),style:t.filterInput}))),e.createElement("div",{style:t.checkboxGrid},e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:r.hasImage,onChange:a=>l({...r,hasImage:a.target.checked})}),"Has Image"),e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:r.hasVideo,onChange:a=>l({...r,hasVideo:a.target.checked})}),"Has Video"),e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:r.hasLink,onChange:a=>l({...r,hasLink:a.target.checked})}),"Has Link"),e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:r.hasEmbed,onChange:a=>l({...r,hasEmbed:a.target.checked})}),"Has Embed"))),e.createElement("div",{style:t.content},s?e.createElement("div",{style:t.loading},"Searching..."):c.length===0?e.createElement("div",{style:t.empty},n?"No results found":"Enter a query and press search"):e.createElement("div",{style:t.resultsList},c.map((a,m)=>e.createElement("div",{key:m,style:t.resultCard},e.createElement("div",{style:t.resultHeader},e.createElement("span",{style:t.resultAuthor},a.author_username),e.createElement("span",{style:t.resultDate},new Date(a.created_at).toLocaleString())),e.createElement("div",{style:t.resultContent},a.content),a.room_name&&e.createElement("div",{style:t.resultMeta},"#",a.room_name),(a.has_image||a.has_video||a.has_link)&&e.createElement("div",{style:t.resultAttachments},a.has_image&&e.createElement("span",{style:t.badge},"ðŸ“· Image"),a.has_video&&e.createElement("span",{style:t.badge},"ðŸŽ¥ Video"),a.has_link&&e.createElement("span",{style:t.badge},"ðŸ”— Link"))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"1000px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},searchBar:{padding:"20px",borderBottom:"1px solid #2c2f33",display:"flex",gap:"12px"},searchInput:{flex:1,padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},searchButton:{padding:"12px 24px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},filtersSection:{padding:"20px",borderBottom:"1px solid #2c2f33",backgroundColor:"#2c2f33"},filterHeader:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"16px",display:"flex",alignItems:"center"},filtersGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"16px"},filterGroup:{display:"flex",flexDirection:"column",gap:"6px"},filterLabel:{fontSize:"13px",color:"#dcddde",display:"flex",alignItems:"center"},filterInput:{padding:"8px",backgroundColor:"#1e1e1e",border:"1px solid #1e1e1e",borderRadius:"4px",color:"#ffffff",fontSize:"13px"},checkboxGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},checkbox:{fontSize:"13px",color:"#dcddde",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},resultsList:{display:"flex",flexDirection:"column",gap:"12px"},resultCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},resultHeader:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},resultAuthor:{fontSize:"14px",fontWeight:"600",color:"#5865f2"},resultDate:{fontSize:"12px",color:"#99aab5"},resultContent:{fontSize:"14px",color:"#dcddde",marginBottom:"8px",lineHeight:"1.5"},resultMeta:{fontSize:"12px",color:"#99aab5",marginBottom:"8px"},resultAttachments:{display:"flex",gap:"8px"},badge:{fontSize:"11px",padding:"4px 8px",backgroundColor:"#5865f2",borderRadius:"4px",color:"#ffffff"}};export{z as default};
