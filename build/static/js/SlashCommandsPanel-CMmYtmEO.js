import{r as t,aL as r,bT as k,H as w,b$ as $}from"./react-core-B6hadH-M.js";function H({apiBaseUrl:o,fetchWithAuth:d}){const[i,v]=t.useState([]),[h,E]=t.useState(""),[u,y]=t.useState({}),[s,f]=t.useState(null),[l,c]=t.useState(null),[R,C]=t.useState([]),[p,m]=t.useState(!1);t.useEffect(()=>{S(),N()},[]);const S=async()=>{m(!0);try{const e=await d(`${o}/commands/list/`);if(e.ok){const a=await e.json();v(a.commands||[])}}catch(e){console.error("Error loading commands:",e)}finally{m(!1)}},N=async()=>{try{const e=await d(`${o}/commands/history/`);if(e.ok){const a=await e.json();C(a.history||[])}}catch(e){console.error("Error loading history:",e)}},b=async e=>{m(!0),c(null);try{const a=await d(`${o}/commands/${e.name}/execute/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({args:u})});if(a.ok){const n=await a.json();c({success:!0,output:n.output||"Command executed successfully!"}),N()}else{const n=await a.json();c({success:!1,output:n.error||"Command failed"})}}catch(a){c({success:!1,output:"Network error: "+a.message})}finally{m(!1)}},x=e=>{f(e),E(`/${e.name}`),y({}),c(null)},g=e=>({utility:"#5865f2",moderation:"#f04747",fun:"#43b581",info:"#faa61a",admin:"#7289da"})[e]||"#72767d";return React.createElement("div",{className:"slash-commands-panel"},React.createElement("div",{className:"commands-header"},React.createElement("h2",null,React.createElement(r,null)," Slash Commands")),React.createElement("div",{className:"command-executor"},React.createElement("div",{className:"executor-input"},React.createElement(r,{className:"terminal-icon"}),React.createElement("input",{type:"text",placeholder:"Type / to see available commands...",value:h,onChange:e=>E(e.target.value),className:"command-input"}),s&&React.createElement("button",{className:"execute-btn",onClick:()=>b(s),disabled:p},React.createElement(k,null)," Execute")),l&&React.createElement("div",{className:`command-result ${l.success?"success":"error"}`},React.createElement("div",{className:"result-header"},l.success?"✅ Success":"❌ Error"),React.createElement("div",{className:"result-output"},l.output))),s&&s.parameters&&React.createElement("div",{className:"command-params"},React.createElement("h3",null,"Parameters:"),s.parameters.map((e,a)=>React.createElement("div",{key:a,className:"param-input"},React.createElement("label",null,e.name," ",e.required&&React.createElement("span",{className:"required"},"*")),React.createElement("input",{type:e.type==="number"?"number":"text",placeholder:e.description,value:u[e.name]||"",onChange:n=>y({...u,[e.name]:n.target.value}),className:"param-field"})))),React.createElement("div",{className:"commands-list"},React.createElement("h3",null,React.createElement(w,null)," Available Commands (",i.length,")"),p&&i.length===0?React.createElement("div",{className:"loading"},"Loading commands..."):React.createElement("div",{className:"commands-grid"},i.map((e,a)=>React.createElement("div",{key:a,className:`command-card ${s?.name===e.name?"selected":""}`,onClick:()=>x(e),style:{borderLeftColor:g(e.category)}},React.createElement("div",{className:"command-header"},React.createElement("div",{className:"command-name"},"/",e.name),React.createElement("div",{className:"command-category",style:{background:g(e.category)}},e.category)),React.createElement("div",{className:"command-description"},e.description),e.usage&&React.createElement("div",{className:"command-usage"},React.createElement("code",null,e.usage)))))),React.createElement("div",{className:"command-history"},React.createElement("h3",null,React.createElement($,null)," Command History"),R.length===0?React.createElement("div",{className:"empty-history"},React.createElement(r,{className:"empty-icon"}),React.createElement("p",null,"No commands executed yet")):React.createElement("div",{className:"history-list"},R.slice(0,10).map((e,a)=>React.createElement("div",{key:a,className:`history-item ${e.success?"success":"error"}`},React.createElement("div",{className:"history-command"},React.createElement(r,null)," /",e.command),React.createElement("div",{className:"history-time"},new Date(e.executed_at).toLocaleString()))))))}export{H as default};
