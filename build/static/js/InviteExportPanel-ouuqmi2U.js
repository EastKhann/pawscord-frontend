import{r as i,b as e}from"./react-core-9vc7GIjk.js";import{ab as p,a as L}from"./icons-vendor-C1zuqBwn.js";import{t as m}from"./index-BZ_tZYbH.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const V=({fetchWithAuth:u,apiBaseUrl:y,onClose:f,serverId:g})=>{const[l,v]=i.useState([]),[b,x]=i.useState(!1),[c,E]=i.useState(!1),[d,h]=i.useState(!1);i.useEffect(()=>{k()},[c,d]);const k=async()=>{x(!0);try{const a=new URLSearchParams({include_expired:c,include_revoked:d}),s=await(await u(`${y}/servers/${g}/invites/?${a}`)).json();v(s.invites||[])}catch{m.error("Failed to load invites")}finally{x(!1)}},C=()=>{const a=[["Code","Creator","Uses","Max Uses","Created","Expires","Status"],...l.map(o=>[o.code,o.creator_username,o.uses,o.max_uses||"Unlimited",new Date(o.created_at).toLocaleString(),o.expires_at?new Date(o.expires_at).toLocaleString():"Never",o.revoked?"Revoked":o.is_expired?"Expired":"Active"])].map(o=>o.map(S=>`"${S}"`).join(",")).join(`
`),r=new Blob([a],{type:"text/csv"}),s=window.URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=`server_invites_${Date.now()}.csv`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n),m.success("Invites exported")},w=()=>{const a=JSON.stringify(l,null,2),r=new Blob([a],{type:"application/json"}),s=window.URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=`server_invites_${Date.now()}.json`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),document.body.removeChild(n),m.success("Invites exported")};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(p,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Export Invites")),e.createElement("button",{onClick:f,style:t.closeButton},e.createElement(L,null))),e.createElement("div",{style:t.toolbar},e.createElement("div",{style:t.filters},e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:c,onChange:a=>E(a.target.checked)}),e.createElement("span",{style:t.checkboxLabel},"Include expired")),e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:d,onChange:a=>h(a.target.checked)}),e.createElement("span",{style:t.checkboxLabel},"Include revoked"))),e.createElement("div",{style:t.exportButtons},e.createElement("button",{onClick:C,style:t.exportButton},e.createElement(p,{style:{marginRight:"6px"}}),"Export CSV"),e.createElement("button",{onClick:w,style:{...t.exportButton,backgroundColor:"#5865f2"}},e.createElement(p,{style:{marginRight:"6px"}}),"Export JSON"))),e.createElement("div",{style:t.content},b?e.createElement("div",{style:t.loading},"Loading invites..."):l.length===0?e.createElement("div",{style:t.empty},"No invites found"):e.createElement(e.Fragment,null,e.createElement("div",{style:t.summary},e.createElement("div",{style:t.summaryItem},e.createElement("div",{style:t.summaryValue},l.length),e.createElement("div",{style:t.summaryLabel},"Total Invites")),e.createElement("div",{style:t.summaryItem},e.createElement("div",{style:t.summaryValue},l.filter(a=>!a.revoked&&!a.is_expired).length),e.createElement("div",{style:t.summaryLabel},"Active")),e.createElement("div",{style:t.summaryItem},e.createElement("div",{style:t.summaryValue},l.reduce((a,r)=>a+r.uses,0)),e.createElement("div",{style:t.summaryLabel},"Total Uses"))),e.createElement("div",{style:t.invitesList},l.map((a,r)=>e.createElement("div",{key:r,style:t.inviteCard},e.createElement("div",{style:t.inviteCode},a.code),e.createElement("div",{style:t.inviteDetails},e.createElement("div",{style:t.inviteDetail},"Creator: ",e.createElement("span",{style:t.inviteValue},a.creator_username)),e.createElement("div",{style:t.inviteDetail},"Uses: ",e.createElement("span",{style:t.inviteValue},a.uses,"/",a.max_uses||"âˆž")),e.createElement("div",{style:t.inviteDetail},"Created: ",e.createElement("span",{style:t.inviteValue},new Date(a.created_at).toLocaleDateString()))),e.createElement("div",{style:t.inviteStatus},a.revoked?e.createElement("span",{style:{...t.statusBadge,backgroundColor:"#f04747"}},"Revoked"):a.is_expired?e.createElement("span",{style:{...t.statusBadge,backgroundColor:"#99aab5"}},"Expired"):e.createElement("span",{style:{...t.statusBadge,backgroundColor:"#43b581"}},"Active")))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33",display:"flex",justifyContent:"space-between",alignItems:"center"},filters:{display:"flex",gap:"16px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},checkboxLabel:{fontSize:"13px",color:"#dcddde"},exportButtons:{display:"flex",gap:"8px"},exportButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},summary:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},summaryItem:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",textAlign:"center"},summaryValue:{fontSize:"32px",fontWeight:"700",color:"#5865f2",marginBottom:"8px"},summaryLabel:{fontSize:"13px",color:"#99aab5"},invitesList:{display:"flex",flexDirection:"column",gap:"10px"},inviteCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},inviteCode:{fontSize:"16px",fontWeight:"600",color:"#ffffff",fontFamily:"monospace",minWidth:"120px"},inviteDetails:{flex:1,display:"flex",gap:"20px"},inviteDetail:{fontSize:"13px",color:"#99aab5"},inviteValue:{color:"#dcddde",fontWeight:"500"},inviteStatus:{minWidth:"80px",textAlign:"right"},statusBadge:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",color:"#ffffff"}};export{V as default};
