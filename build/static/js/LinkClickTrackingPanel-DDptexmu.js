import{r,b as e}from"./react-core-9vc7GIjk.js";import{f as u,a as k,aa as E,bq as h}from"./icons-vendor-BHKL7tCa.js";import{t as i}from"./index-DV60LZzJ.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-qCr-Mpaw.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const B=({fetchWithAuth:s,apiBaseUrl:c,onClose:f,roomSlug:l})=>{const[d,m]=r.useState([]),[x,p]=r.useState(!1);r.useEffect(()=>{g()},[l]);const g=async()=>{p(!0);try{const a=await(await s(`${c}/api/links/stats/?room=${l}`)).json();m(a.stats||[])}catch{i.error("Failed to load link stats")}finally{p(!1)}},y=async()=>{try{const a=await(await s(`${c}/api/links/export/?room=${l}`)).blob(),b=window.URL.createObjectURL(a),n=document.createElement("a");n.href=b,n.download=`link_stats_${new Date().toISOString()}.csv`,document.body.appendChild(n),n.click(),n.remove(),i.success("Stats exported successfully")}catch{i.error("Failed to export stats")}};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(u,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Link Click Tracking")),e.createElement("button",{onClick:f,style:t.closeButton},e.createElement(k,null))),e.createElement("div",{style:t.toolbar},e.createElement("button",{onClick:y,style:t.exportButton},e.createElement(E,{style:{marginRight:"5px"}}),"Export CSV")),e.createElement("div",{style:t.content},x?e.createElement("div",{style:t.loading},"Loading link stats..."):d.length===0?e.createElement("div",{style:t.empty},"No link click data available"):e.createElement("div",{style:t.statsTable},d.map((o,a)=>e.createElement("div",{key:a,style:t.statRow},e.createElement("div",{style:t.linkInfo},e.createElement(h,{style:{color:"#5865f2",marginRight:"10px"}}),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:t.linkUrl},o.url),e.createElement("div",{style:t.linkMeta},"Shared by ",o.user?.username," on ",new Date(o.created_at).toLocaleDateString()))),e.createElement("div",{style:t.clickCount},o.click_count," clicks")))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},exportButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsTable:{display:"flex",flexDirection:"column",gap:"12px"},statRow:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},linkInfo:{display:"flex",alignItems:"center",flex:1},linkUrl:{fontSize:"14px",color:"#5865f2",fontWeight:"500",wordBreak:"break-all",marginBottom:"4px"},linkMeta:{fontSize:"12px",color:"#99aab5"},clickCount:{fontSize:"18px",fontWeight:"600",color:"#ffffff",minWidth:"100px",textAlign:"right"}};export{B as default};
