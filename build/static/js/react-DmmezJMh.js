var Y=Object.defineProperty;var K=e=>{throw TypeError(e)};var at=(e,o,t)=>o in e?Y(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var a=(e,o)=>Y(e,"name",{value:o,configurable:!0});var _=(e,o,t)=>at(e,typeof o!="symbol"?o+"":o,t),U=(e,o,t)=>o.has(e)||K("Cannot "+t);var u=(e,o,t)=>(U(e,o,"read from private field"),t?t.call(e):o.get(e)),h=(e,o,t)=>o.has(e)?K("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(e):o.set(e,t),l=(e,o,t,s)=>(U(e,o,"write to private field"),s?s.call(e,t):o.set(e,t),t),f=(e,o,t)=>(U(e,o,"access private method"),t);import{a as lt}from"./react-core-Djgtqrmb.js";const ut="https://www.tiktok.com/player/v1",ct=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,y={INIT:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3},dt={[y.INIT]:"emptied",[y.PAUSED]:"pause",[y.ENDED]:"ended",[y.PLAYING]:"play",[y.BUFFERING]:"waiting"};function Q(e,o={}){const t={src:V(e,o),frameborder:0,width:"100%",height:"100%",allow:"accelerometer; autoplay; fullscreen; encrypted-media; gyroscope; picture-in-picture"};return o.config&&(t["data-config"]=JSON.stringify(o.config)),`
    <style>
      :host {
        display:inline-block;
        min-width: 300px;
        min-height: 150px;
        position: relative;
      }
      iframe {
        position:absolute;
        top:0;
        left:0;
        width:100%;
        height:100%;
        border:0;
      }
    </style>
    <iframe ${mt(t)} title="TikTok video"></iframe>
  `}a(Q,"getTemplateHTML");function V(e,o={}){if(!e.src)return;const t=e.src.match(ct),s=t&&t[1],r={controls:e.controls===""?null:0,autoplay:e.autoplay,muted:e.muted,loop:e.loop,rel:0,...o.config};return`${ut}/${s}?${pt(r)}`}a(V,"serializeIframeUrl");var L,N,b,A,S,R,E,I,T,P,c,k,tt,et,ot,st;const M=class M extends(globalThis.HTMLElement??class{}){constructor(){super();h(this,c);_(this,"loadComplete",new O);h(this,L);h(this,N);h(this,b,!1);h(this,A,0);h(this,S,!0);h(this,R,null);h(this,E,100);h(this,I,0);h(this,T);h(this,P,a(t=>{var s;if(t.source!==((s=u(this,T))==null?void 0:s.contentWindow))return;const r=t.data;if(r?.["x-tiktok-player"])switch(r.type){case"onPlayerReady":this.loadComplete.resolve();break;case"onStateChange":{l(this,S,[y.INIT,y.PAUSED,y.ENDED].includes(r.value));const p=dt[r.value];p&&this.dispatchEvent(new Event(p));break}case"onCurrentTime":l(this,A,r.value.currentTime),l(this,I,r.value.duration),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("timeupdate"));break;case"onVolumeChange":l(this,E,r.value),this.dispatchEvent(new Event("volumechange"));break;case"onMute":l(this,b,!!r.value),l(this,E,r.value?0:u(this,E)),this.dispatchEvent(new Event("volumechange"));break;case"onError":this.dispatchEvent(new Event("error"));break;default:break}},"#onMessage"));f(this,c,st).call(this,"config")}static get observedAttributes(){return["src","controls","loop","autoplay","muted"]}async load(){if(u(this,L))return;this.shadowRoot||this.attachShadow(M.shadowRootOptions);const t=!u(this,N);if(u(this,N)&&(this.loadComplete=new O),l(this,N,!0),await l(this,L,Promise.resolve()),l(this,L,null),l(this,A,0),l(this,b,!1),l(this,S,!0),!this.src){this.shadowRoot.innerHTML="",globalThis.removeEventListener("message",u(this,P));return}let s=this.shadowRoot.querySelector("iframe");const r=ht(this.attributes);t&&s&&l(this,R,JSON.parse(s.getAttribute("data-config")||"{}")),(!s?.src||s.src!==V(r,this))&&(this.shadowRoot.innerHTML=Q(r,this),s=this.shadowRoot.querySelector("iframe")),l(this,T,s),globalThis.addEventListener("message",u(this,P))}async attributeChangedCallback(t,s,r){if(s!==r)switch(t){case"muted":{await this.loadComplete,this.muted=r!=null;break}case"autoplay":case"controls":case"loop":case"src":{this.load();return}}}get config(){return u(this,R)}set config(t){l(this,R,t)}async play(){await this.loadComplete,f(this,c,k).call(this,"play")}async pause(){await this.loadComplete,f(this,c,k).call(this,"pause")}get volume(){return u(this,E)/100}set volume(t){}get currentTime(){return u(this,A)}set currentTime(t){f(this,c,tt).call(this,t)}get muted(){return u(this,b)}set muted(t){l(this,b,t),t?f(this,c,et).call(this):f(this,c,ot).call(this)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(t){this.toggleAttribute("muted",!!t)}get paused(){return u(this,S)}get duration(){return u(this,I)}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t??"")}};L=new WeakMap,N=new WeakMap,b=new WeakMap,A=new WeakMap,S=new WeakMap,R=new WeakMap,E=new WeakMap,I=new WeakMap,T=new WeakMap,P=new WeakMap,c=new WeakSet,k=a(function(t,s){var r;if(!((r=u(this,T))!=null&&r.contentWindow))return;const p={"x-tiktok-player":!0,type:t,...s!==void 0?{value:s}:{}};u(this,T).contentWindow.postMessage(p,"*")},"#post"),tt=a(async function(t){await this.loadComplete,f(this,c,k).call(this,"seekTo",Number(t))},"#seekTo"),et=a(async function(){await this.loadComplete,f(this,c,k).call(this,"mute")},"#mute"),ot=a(async function(){await this.loadComplete,f(this,c,k).call(this,"unMute")},"#unMute"),st=a(function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const s=this[t];delete this[t],this[t]=s}},"#upgradeProperty"),a(M,"TikTokVideoElement"),_(M,"getTemplateHTML",Q),_(M,"shadowRootOptions",{mode:"open"});let D=M;const $=class $ extends Promise{constructor(o=()=>{}){let t,s;super((r,p)=>{o(r,p),t=r,s=p}),this.resolve=t,this.reject=s}};a($,"PublicPromise");let O=$;function ht(e){let o={};for(let t of e)o[t.name]=t.value;return o}a(ht,"namedNodeMapToObject");function ft(e){let o={};for(let t in e){let s=e[t];s===!0||s===""?o[t]=1:s===!1?o[t]=0:s!=null&&(o[t]=s)}return o}a(ft,"boolToBinary");function pt(e){return String(new URLSearchParams(ft(e)))}a(pt,"serialize");function mt(e){let o="";for(const t in e){const s=e[t];s===""?o+=` ${W(t)}`:o+=` ${W(t)}="${W(`${s}`)}"`}return o}a(mt,"serializeAttributes");function W(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}a(W,"escapeHtml");globalThis.customElements&&!globalThis.customElements.get("tiktok-video")&&globalThis.customElements.define("tiktok-video",D);var vt=D,gt=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),yt={className:"class",htmlFor:"for"};function rt(e){return e.toLowerCase()}a(rt,"defaultToAttributeName");function X(e){if(typeof e=="boolean")return e?"":void 0;if(typeof e!="function"&&!(typeof e=="object"&&e!==null))return e}a(X,"defaultToAttributeValue");function wt({react:e,tagName:o,elementClass:t,events:s,displayName:r,defaultProps:p,toAttributeName:nt=rt,toAttributeValue:it=X}){const j=Number.parseInt(e.version)>=19,B=e.forwardRef((q,C)=>{var G,z;const m=e.useRef(null),x=e.useRef(new Map),F={},J={},v={},H={};for(const[n,i]of Object.entries(q)){if(gt.has(n)){v[n]=i;continue}const d=nt(yt[n]??n);if(t.prototype&&n in t.prototype&&!(n in(((G=globalThis.HTMLElement)==null?void 0:G.prototype)??{}))&&!((z=t.observedAttributes)!=null&&z.some(w=>w===d))){H[n]=i;continue}if(n.startsWith("on")){F[n]=i;continue}const g=it(i);if(d&&g!=null&&(J[d]=String(g),j||(v[d]=g)),d&&j){const w=X(i);g!==w?v[d]=g:v[d]=i}}if(typeof window<"u"){for(const n in F){const i=F[n],d=n.endsWith("Capture"),g=(s?.[n]??n.slice(2).toLowerCase()).slice(0,d?-7:void 0);e.useLayoutEffect(()=>{const w=m?.current;if(!(!w||typeof i!="function"))return w.addEventListener(g,i,d),()=>{w.removeEventListener(g,i,d)}},[m?.current,i])}e.useLayoutEffect(()=>{if(m.current===null)return;const n=new Map;for(const i in H)Z(m.current,i,H[i]),x.current.delete(i),n.set(i,H[i]);for(const[i,d]of x.current)Z(m.current,i,void 0);x.current=n})}if(typeof window>"u"&&t?.getTemplateHTML&&t?.shadowRootOptions){const{mode:n,delegatesFocus:i}=t.shadowRootOptions,d=e.createElement("template",{shadowrootmode:n,shadowrootdelegatesfocus:i,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(J,q)},key:"ce-la-react-ssr-template-shadow-root"});v.children=[d,v.children]}return e.createElement(o,{...p,...v,ref:e.useCallback(n=>{m.current=n,typeof C=="function"?C(n):C!==null&&(C.current=n)},[C])},v.children)});return B.displayName=r??t.name,B}a(wt,"createComponent");function Z(e,o,t){var s;e[o]=t,t==null&&o in(((s=globalThis.HTMLElement)==null?void 0:s.prototype)??{})&&e.removeAttribute(o)}a(Z,"setProperty");var Tt=wt({react:lt,tagName:"tiktok-video",elementClass:vt,toAttributeName(e){return e==="muted"?"":e==="defaultMuted"?"muted":rt(e)}});export{Tt as default};
