const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/web-CibVIaNu.js","static/js/media-vendor-BSOZ7IB3.js","static/js/react-core-zXIKm1Jm.js","static/js/editor-vendor-DiU449Dh.js","static/js/router-vendor-ltdGXAv4.js","static/js/crypto-vendor-D_AcF0lD.js","static/js/icons-vendor-BNHs0e-7.js","static/js/state-vendor-8NbFPBhQ.js","static/js/ServerSettingsModal-DtD0QS51.js","static/js/ui-vendor-BGw4w3Ed.js","static/js/AutoResponderManager-BwTci1oT.js","static/js/VanityURLManager-Bxz2rxcB.js","static/js/UserProfileModal-bErBfAA5.js","static/js/ImageModal-kweEZmfU.js","static/js/GifPicker-DU3Ex2pK.js","static/js/StickerPicker-Boa1KBkF.js","static/js/SoundboardModal-BQfmIZDD.js","static/js/WatchPartyEnhanced-CACyMy4W.js","static/js/CinemaModal-DNPCk8d2.js","static/js/WhiteboardModal-42-zGmrN.js","static/js/PollCreateModal-DE_LwfDI.js","static/js/CodeSnippetModal-DsKQVajo.js","static/js/MessageTemplateModal-Cq83XQfP.js","static/js/Message-D0vPH4h7.js","static/js/LazyImage-rdPSnIcj.js","static/js/imageCaching-Dr6erzFA.js","static/js/syntax-core-y67FurNK.js","static/js/perf-vendor-DgY-y5mY.js","static/js/VirtualMessageList-m7v7uZVG.js","static/js/MessageInput-Di7k3Bnz.js","static/js/ScheduledMessageModal-DUDms-GX.js","static/css/MessageInput-Q2oINpgp.css","static/js/UserVideoContainer-BpCnUF6m.js","static/js/VoiceAudioController-D5ayCxfN.js","static/js/RichTextEditor-DRBnQmlN.js","static/css/RichTextEditor-D1KllEDh.css","static/js/StickyMessageBanner-DG9Htw8v.js","static/js/LoginPage-TmCh1DIz.js","static/js/recaptcha-D7lu4pwC.js","static/js/WelcomeScreen-CmOgIbc4.js","static/js/DownloadModal-BRWKNkHV.js","static/js/AvatarCropper-BDSPZ6HC.js","static/css/AvatarCropper-D7v9iP7L.css","static/js/CryptoChartModal-DZvqxtuk.js","static/js/CryptoStoreModal-Xd1HafvC.js","static/js/PremiumStoreModal-2xz1Dwyt.js","static/js/KanbanBoard-5RltDMgc.js","static/js/SummaryModal-CnoGfHmk.js","static/js/DJModal-DAfuuwm9.js","static/js/ThemeStoreModal-Csw36e1L.js","static/js/EncryptionKeyModal-B376aOVj.js","static/js/CreateGroupModal-etgwLcuG.js","static/js/AdminAnalyticsPanel-BAuMVnWf.js","static/js/AdminPanelModal-DJs8S7Sx.js","static/js/WebhooksPanel-xlOEvJ2K.js","static/css/WebhooksPanel-Cn13v79_.css","static/js/AutoModerationDashboard-BR08frSa.js","static/js/AutoModerationPanel-BOjPyVB6.js","static/css/AutoModerationPanel-iAw0CZQU.css","static/js/RaidProtectionPanel-z7Ds-uE6.js","static/js/ReportSystemPanel-Bz3euzRR.js","static/js/AuditLogPanel-BCIpkHwY.js","static/js/UserWarningsPanel-BTbR5h5N.js","static/js/BookmarkPanel-CROPg9Mf.js","static/js/ReadLaterPanel-nz3pUG3I.js","static/css/ReadLaterPanel-B_WZGTiX.css","static/js/ChannelPermissionsPanel-B8D424zt.js","static/js/MessageThreadsPanel-Bj7xSVb7.js","static/js/ModeratorNotesPanel-jDBqJaQh.js","static/js/ServerRolesPanel-Cekp0TnG.js","static/js/NotificationPreferencesPanel-KmdbWzQ-.js","static/js/MessageOCRPanel-DI4VXy92.js","static/js/MassActionsPanel-BHsumetH.js","static/js/TimeoutMutePanel-CjEt_vv7.js","static/js/ServerThemesPanel-BfrenZdV.js","static/js/KeywordMutesPanel-CqbfMF1l.js","static/js/WelcomeTemplatesPanel-BbNsnu2b.js","static/js/StickyMessagesPanel-Dkm7mGkJ.js","static/js/MessageTemplatesPanel-CqnJXuvV.js","static/js/MessageExportPanel-D0j7UkFg.js","static/js/ArchivedRoomsPanel-iqU6Y8Az.js","static/js/SlowModePanel-D5hs75_M.js","static/js/EmojiManagementPanel-DpOIaAxq.js","static/js/MentionsInboxPanel-DtYVE4vn.js","static/js/CustomStatusModal-DptFyJR5.js","static/js/ReactionAnalyticsPanel-B_noZuC_.js","static/js/LinkClickTrackingPanel-DIFuRo1W.js","static/js/JoinLeaveLogsPanel-B86gi3SN.js","static/js/UserActivityPanel-BIsaEp7T.js","static/js/NicknameHistoryPanel-D8ASecNO.js","static/js/FieldChangeTrackingPanel-Za6Gg51_.js","static/js/InviteAnalyticsPanel-BgC--USP.js","static/js/ContentScannerPanel-DfVeCwdm.js","static/js/EphemeralMessagesPanel-BWu2TYRB.js","static/js/TopicHistoryPanel-3nJbwdxe.js","static/js/DraftsPanel-DcuNyPcz.js","static/js/ServerNicknamesPanel-DJ-ufaW5.js","static/js/ServerBoostPanel-BPxZKq4a.js","static/js/RoomWebhooksPanel-BdktQN7S.js","static/js/OAuthAppsPanel-umPaUH73.js","static/js/VanityURLPanel-BN3Lz0gJ.js","static/js/AutoRespondersPanel-DB2ggzoq.js","static/js/SessionManagementPanel-CbQQ8vTx.js","static/js/GDPRExportPanel-DpYzZuZi.js","static/js/DataRetentionPanel-Bq83hn81.js","static/js/TwoFactorSetupWizard-C0f_DOfr.js","static/js/EnhancedPollsPanel-RBdNBvr7.js","static/js/VoiceTranscriptsPanel-fyQt8eiD.js","static/js/PaymentPanel-C_ttINL8.js","static/js/StoreModal-CVCzrD0m.js","static/js/DailyRewardsModal-CKD7l6OP.js","static/js/APIUsagePanel-DNqUalJ3.js","static/js/ExportJobsPanel-DpjhtTJN.js","static/js/ScheduledAnnouncementsPanel-XEQIB_Oz.js","static/js/InviteExportPanel-CPnhlXz5.js","static/js/AdvancedSearchPanel-Dy_y-Kz7.js","static/js/GrowthMetricsPanel-B3z6oCjM.js","static/js/LinkPreviewRenderer-D0CQTxRQ.js","static/js/InventoryPanel-CtVDUwjV.js","static/js/WaitlistPanel-wc7lkdIu.js","static/js/ReferralRewardsPanel-Cf0Nkv8Y.js","static/js/VerifyEmailPage-CAsMSWZa.js","static/js/ForgotPasswordPage-V8ruJl1W.js","static/js/ResetPasswordPage-DXlgdgnW.js","static/js/TwoFactorLoginPage-CHcsM-py.js","static/js/TwoFactorSetup-CYaSyE16.js","static/css/TwoFactorSetup-CtmcmlFU.css","static/js/TwoFactorLogin-ByymwwU8.js","static/css/TwoFactorLogin-DgREC4Q6.css","static/js/VanityInviteScreen-CxTqkv2E.js","static/js/EmailVerification-D0K2JXMb.js","static/css/EmailVerification-CE2S-15C.css","static/js/MobileNav-O-Gr-luP.js","static/css/MobileNav-BLwPGkd1.css","static/js/SwipeActions-CBA3DHsH.js","static/css/SwipeActions-CCPpS4d3.css","static/js/VoiceMessage-CNcEqM1p.js","static/css/VoiceMessage-Czmu0SFR.css","static/js/FriendsTab-C_U44H_L.js","static/js/RoomList-DNBXGMg1.js","static/js/UserFooter-BnaUsduW.js","static/js/UserProfilePanel-EbxEDmc8.js","static/js/index-D5GkNzM3.js","static/css/UserProfilePanel-DaqyzPyG.css","static/js/VoiceChatPanel-UcPXbfpA.js","static/js/cjs-3PIGQicZ.js","static/js/UserContextMenu-VhlSTb0J.js","static/css/VoiceChatPanel-D0hk1ENV.css","static/js/ChatUserList-C1V-0CoQ.js","static/js/PinnedMessages-BecZCeRp.js","static/js/FloatingVoiceIsland-CeWsVX0c.js","static/css/FloatingVoiceIsland-CMKNK2uU.css","static/js/CinemaPlayer-BbRK7LeU.js","static/js/ConnectionsPanel-Do9BEccp.js","static/css/ConnectionsPanel-BHb_cRVQ.css","static/js/PasswordSetupModal-BHgx9-HL.js","static/css/PasswordSetupModal-hiiUdoNl.css","static/js/NotificationDropdown-BxCNIFCs.js","static/js/ReactionStatsPanel-CMqBWGC8.js","static/css/ReactionStatsPanel-C-EVTLx8.css","static/js/ServerHealthPanel-8yhT245r.js","static/css/ServerHealthPanel-BMi05DZE.css","static/js/ChannelAnalyticsPanel-Di8wUcG1.js","static/css/ChannelAnalyticsPanel-B6Q8OoDz.css","static/js/SmartSuggestionsPanel-Dw3YRWbq.js","static/css/SmartSuggestionsPanel-BFDBx7VC.css","static/js/UserPresenceInsightsPanel-BNxLLZce.js","static/css/UserPresenceInsightsPanel-WBZVzGk9.css","static/js/MiniGamesPanel-DcnwoPl_.js","static/js/ProjectCollaborationPanel-FO0G5FQ1.js","static/js/AvatarStudioPanel-CueYCLxG.js","static/js/pushNotifications-CsFR1VUW.js","static/js/urlHandlers-D8oGIv5A.js","static/js/EnglishHub-DHvecJYV.js","static/js/GrammarQuizPage-rcUqV7C-.js","static/js/grammarQuestions-BpOAYnZH.js","static/js/EnglishLearningPage-CX0gBc-M.js","static/js/CryptoDashboard-CP9kqHjs.js","static/js/CryptoSignals-BYwb3DWH.js","static/js/PrivacyPolicyPage-1cNh_lPF.js","static/js/StorePage-DO-h1K0f.js","static/js/LandingPage-Cbu92SfE.js","static/css/LandingPage-CHHpsw7G.css","static/js/ReferralProgram-CBHb71GI.js","static/css/ReferralProgram-CBBjqZR4.css","static/js/GrowthDashboard-Bx_Xwruo.js","static/css/GrowthDashboard-xlqndw5F.css","static/js/ToastDemo-Bu0c5OHZ.js","static/css/ToastDemo-DxNVRuTl.css"])))=>i.map(i=>d[i]);
var Ic=Object.defineProperty;var Lc=(a,r,n)=>r in a?Ic(a,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[r]=n;var zr=(a,r,n)=>Lc(a,typeof r!="symbol"?r+"":r,n);import{_ as x}from"./media-vendor-BSOZ7IB3.js";import{b as y,n as e,r as o,f as Oc,o as Dc}from"./react-core-zXIKm1Jm.js";import{u as wa,a as va,b as qo,L as _a,c as Mc,H as $c,R as zc,d as me}from"./router-vendor-ltdGXAv4.js";import{C as Un,j as Xt,S as Vc}from"./crypto-vendor-D_AcF0lD.js";import{F as Bc,a as Ko,b as Uc,c as ea,d as ta,e as Nc,f as Fc,g as Wc,h as Gc,i as Hc,j as Kc,k as qc,l as Yc,m as oa,n as Jc,o as Zc,p as Nn,q as qn,r as Xc,s as Qc,t as el,u as tl,v as ka,w as Yn,x as Jn,y as ol,z as rl,A as Ca,B as ra,C as nl,D as sl,E as al,G as il,H as cl,I as ll,J as dl}from"./icons-vendor-BNHs0e-7.js";import{c as ul}from"./state-vendor-8NbFPBhQ.js";import"./editor-vendor-DiU449Dh.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const m of c)if(m.type==="childList")for(const C of m.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&u(C)}).observe(document,{childList:!0,subtree:!0});function n(c){const m={};return c.integrity&&(m.integrity=c.integrity),c.referrerPolicy&&(m.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?m.credentials="include":c.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(c){if(c.ep)return;c.ep=!0;const m=n(c);fetch(c.href,m)}})();var bo;(function(a){a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE"})(bo||(bo={}));class zn extends Error{constructor(r,n,u){super(r),this.message=r,this.code=n,this.data=u}}const fl=a=>{var r,n;return a?.androidBridge?"android":!((n=(r=a?.webkit)===null||r===void 0?void 0:r.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},pl=a=>{const r=a.CapacitorCustomPlatform||null,n=a.Capacitor||{},u=n.Plugins=n.Plugins||{},c=()=>r!==null?r.name:fl(a),m=()=>c()!=="web",C=O=>{const z=D.get(O);return!!(z?.platforms.has(c())||E(O))},E=O=>{var z;return(z=n.PluginHeaders)===null||z===void 0?void 0:z.find(Z=>Z.name===O)},T=O=>a.console.error(O),D=new Map,H=(O,z={})=>{const Z=D.get(O);if(Z)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),Z.proxy;const K=c(),V=E(O);let B;const G=async()=>(!B&&K in z?B=typeof z[K]=="function"?B=await z[K]():B=z[K]:r!==null&&!B&&"web"in z&&(B=typeof z.web=="function"?B=await z.web():B=z.web),B),Y=(J,he)=>{var we,Be;if(V){const ee=V?.methods.find(Se=>he===Se.name);if(ee)return ee.rtype==="promise"?Se=>n.nativePromise(O,he.toString(),Se):(Se,Ue)=>n.nativeCallback(O,he.toString(),Se,Ue);if(J)return(we=J[he])===null||we===void 0?void 0:we.bind(J)}else{if(J)return(Be=J[he])===null||Be===void 0?void 0:Be.bind(J);throw new zn(`"${O}" plugin is not implemented on ${K}`,bo.Unimplemented)}},ue=J=>{let he;const we=(...Be)=>{const ee=G().then(Se=>{const Ue=Y(Se,J);if(Ue){const Me=Ue(...Be);return he=Me?.remove,Me}else throw new zn(`"${O}.${J}()" is not implemented on ${K}`,bo.Unimplemented)});return J==="addListener"&&(ee.remove=async()=>he()),ee};return we.toString=()=>`${J.toString()}() { [capacitor code] }`,Object.defineProperty(we,"name",{value:J,writable:!1,configurable:!1}),we},re=ue("addListener"),X=ue("removeListener"),ae=(J,he)=>{const we=re({eventName:J},he),Be=async()=>{const Se=await we;X({eventName:J,callbackId:Se},he)},ee=new Promise(Se=>we.then(()=>Se({remove:Be})));return ee.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Be()},ee},fe=new Proxy({},{get(J,he){switch(he){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return V?ae:re;case"removeListener":return X;default:return ue(he)}}});return u[O]=fe,D.set(O,{name:O,proxy:fe,platforms:new Set([...Object.keys(z),...V?[K]:[]])}),fe};return n.convertFileSrc||(n.convertFileSrc=O=>O),n.getPlatform=c,n.handleError=T,n.isNativePlatform=m,n.isPluginAvailable=C,n.registerPlugin=H,n.Exception=zn,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},ml=a=>a.Capacitor=pl(a),wo=ml(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Zn=wo.registerPlugin;class ja{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(r,n){let u=!1;this.listeners[r]||(this.listeners[r]=[],u=!0),this.listeners[r].push(n);const m=this.windowListeners[r];m&&!m.registered&&this.addWindowListener(m),u&&this.sendRetainedArgumentsForEvent(r);const C=async()=>this.removeListener(r,n);return Promise.resolve({remove:C})}async removeAllListeners(){this.listeners={};for(const r in this.windowListeners)this.removeWindowListener(this.windowListeners[r]);this.windowListeners={}}notifyListeners(r,n,u){const c=this.listeners[r];if(!c){if(u){let m=this.retainedEventArguments[r];m||(m=[]),m.push(n),this.retainedEventArguments[r]=m}return}c.forEach(m=>m(n))}hasListeners(r){var n;return!!(!((n=this.listeners[r])===null||n===void 0)&&n.length)}registerWindowListener(r,n){this.windowListeners[n]={registered:!1,windowEventName:r,pluginEventName:n,handler:u=>{this.notifyListeners(n,u)}}}unimplemented(r="not implemented"){return new wo.Exception(r,bo.Unimplemented)}unavailable(r="not available"){return new wo.Exception(r,bo.Unavailable)}async removeListener(r,n){const u=this.listeners[r];if(!u)return;const c=u.indexOf(n);this.listeners[r].splice(c,1),this.listeners[r].length||this.removeWindowListener(this.windowListeners[r])}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}sendRetainedArgumentsForEvent(r){const n=this.retainedEventArguments[r];n&&(delete this.retainedEventArguments[r],n.forEach(u=>{this.notifyListeners(r,u)}))}}const na=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),sa=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class hl extends ja{async getCookies(){const r=document.cookie,n={};return r.split(";").forEach(u=>{if(u.length<=0)return;let[c,m]=u.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=sa(c).trim(),m=sa(m).trim(),n[c]=m}),n}async setCookie(r){try{const n=na(r.key),u=na(r.value),c=`; expires=${(r.expires||"").replace("expires=","")}`,m=(r.path||"/").replace("path=",""),C=r.url!=null&&r.url.length>0?`domain=${r.url}`:"";document.cookie=`${n}=${u||""}${c}; path=${m}; ${C};`}catch(n){return Promise.reject(n)}}async deleteCookie(r){try{document.cookie=`${r.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const r=document.cookie.split(";")||[];for(const n of r)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(r){return Promise.reject(r)}}async clearAllCookies(){try{await this.clearCookies()}catch(r){return Promise.reject(r)}}}Zn("CapacitorCookies",{web:()=>new hl});const gl=async a=>new Promise((r,n)=>{const u=new FileReader;u.onload=()=>{const c=u.result;r(c.indexOf(",")>=0?c.split(",")[1]:c)},u.onerror=c=>n(c),u.readAsDataURL(a)}),yl=(a={})=>{const r=Object.keys(a);return Object.keys(a).map(c=>c.toLocaleLowerCase()).reduce((c,m,C)=>(c[m]=a[r[C]],c),{})},xl=(a,r=!0)=>a?Object.entries(a).reduce((u,c)=>{const[m,C]=c;let E,T;return Array.isArray(C)?(T="",C.forEach(D=>{E=r?encodeURIComponent(D):D,T+=`${m}=${E}&`}),T.slice(0,-1)):(E=r?encodeURIComponent(C):C,T=`${m}=${E}`),`${u}&${T}`},"").substr(1):null,Sl=(a,r={})=>{const n=Object.assign({method:a.method||"GET",headers:a.headers},r),c=yl(a.headers)["content-type"]||"";if(typeof a.data=="string")n.body=a.data;else if(c.includes("application/x-www-form-urlencoded")){const m=new URLSearchParams;for(const[C,E]of Object.entries(a.data||{}))m.set(C,E);n.body=m.toString()}else if(c.includes("multipart/form-data")||a.data instanceof FormData){const m=new FormData;if(a.data instanceof FormData)a.data.forEach((E,T)=>{m.append(T,E)});else for(const E of Object.keys(a.data))m.append(E,a.data[E]);n.body=m;const C=new Headers(n.headers);C.delete("content-type"),n.headers=C}else(c.includes("application/json")||typeof a.data=="object")&&(n.body=JSON.stringify(a.data));return n};class bl extends ja{async request(r){const n=Sl(r,r.webFetchExtra),u=xl(r.params,r.shouldEncodeUrlParams),c=u?`${r.url}?${u}`:r.url,m=await fetch(c,n),C=m.headers.get("content-type")||"";let{responseType:E="text"}=m.ok?r:{};C.includes("application/json")&&(E="json");let T,D;switch(E){case"arraybuffer":case"blob":D=await m.blob(),T=await gl(D);break;case"json":T=await m.json();break;default:T=await m.text()}const H={};return m.headers.forEach((O,z)=>{H[z]=O}),{data:T,headers:H,status:m.status,url:m.url}}async get(r){return this.request(Object.assign(Object.assign({},r),{method:"GET"}))}async post(r){return this.request(Object.assign(Object.assign({},r),{method:"POST"}))}async put(r){return this.request(Object.assign(Object.assign({},r),{method:"PUT"}))}async patch(r){return this.request(Object.assign(Object.assign({},r),{method:"PATCH"}))}async delete(r){return this.request(Object.assign(Object.assign({},r),{method:"DELETE"}))}}Zn("CapacitorHttp",{web:()=>new bl});const wl=Zn("GoogleAuth",{web:()=>x(()=>import("./web-CibVIaNu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(a=>new a.GoogleAuthWeb)});let vl=class extends y.Component{constructor(n){super(n);zr(this,"reportError",async(n,u)=>{try{await fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:n.toString(),stack:u.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(c){console.error("Failed to report error:",c)}});zr(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,u){console.error("Error Boundary caught error:",n,u),this.setState({error:n,errorInfo:u,errorCount:this.state.errorCount+1}),window.gtag&&window.gtag("event","exception",{description:n.toString(),fatal:!1}),this.reportError(n,u)}render(){return this.state.hasError?this.state.errorCount>3?e.jsx("div",{className:"error-boundary critical",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h1",{children:"‚ö†Ô∏è Critical Error"}),e.jsx("p",{children:"Multiple errors detected. Please refresh the page."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn-reload",children:"Refresh Page"})]})}):e.jsx("div",{className:"error-boundary",children:e.jsxs("div",{className:"error-content",children:[e.jsx("div",{className:"error-icon",children:"üòï"}),e.jsx("h1",{children:"Oops! Something went wrong"}),e.jsx("p",{className:"error-message",children:this.props.fallbackMessage||"We're sorry for the inconvenience. The error has been reported."}),!1,e.jsxs("div",{className:"error-actions",children:[e.jsx("button",{onClick:this.handleReset,className:"btn-retry",children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.href="/",className:"btn-home",children:"Go Home"})]})]})}):this.props.children}},go=null;function _l(){return go||(go=document.createElement("div"),go.id="toast-container",go.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        `,document.body.appendChild(go)),go}function Ho(a,r="info",n=3e3){const u=_l(),c=document.createElement("div");c.className=`toast toast-${r}`;let m="‚ÑπÔ∏è",C="#3b82f6";switch(r){case"success":m="‚úÖ",C="#10b981";break;case"error":m="‚ùå",C="#ef4444";break;case"warning":m="‚ö†Ô∏è",C="#f59e0b";break;case"info":m="‚ÑπÔ∏è",C="#3b82f6";break}c.style.cssText=`
        background: ${C};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 300px;
        max-width: 500px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 14px;
        pointer-events: all;
        animation: slideIn 0.3s ease-out;
        transition: opacity 0.3s ease-out;
    `,c.innerHTML=`
        <span style="font-size: 20px;">${m}</span>
        <span style="flex: 1;">${a}</span>
        <button onclick="this.parentElement.remove()" style="
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
           onmouseout="this.style.background='rgba(255,255,255,0.2)'">√ó</button>
    `,u.appendChild(c);const E=document.createElement("style");E.textContent=`
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    `,document.getElementById("toast-styles")||(E.id="toast-styles",document.head.appendChild(E)),setTimeout(()=>{c.style.animation="slideOut 0.3s ease-out",setTimeout(()=>c.remove(),300)},n)}const $={success:(a,r)=>Ho(a,"success",r),error:(a,r)=>Ho(a,"error",r),warning:(a,r)=>Ho(a,"warning",r),info:(a,r)=>Ho(a,"info",r)};typeof window<"u"&&(window.toast=$,window.showToast=Ho);const kl=async()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.toLowerCase().includes("electron")||window.location?.protocol==="file:"))return console.log("‚ö†Ô∏è [PWA] Service Worker disabled in Electron (file:// protocol)"),null;if("serviceWorker"in navigator)try{const r=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("‚úÖ Service Worker registered:",r.scope),r.addEventListener("updatefound",()=>{const n=r.installing;console.log("üîÑ New Service Worker installing..."),n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&Cl()})}),setInterval(()=>{r.update()},3600*1e3),r}catch(r){return console.error("‚ùå Service Worker registration failed:",r),null}},Cl=()=>{console.log("‚ÑπÔ∏è Yeni versiyon mevcut - UI g√ºncelleme butonu aktif")},jl=()=>{window.addEventListener("beforeinstallprompt",a=>{a.preventDefault();const r=document.getElementById("install-pwa-button");r&&(r.style.display="block"),console.log("üì± PWA install prompt ready")}),window.addEventListener("appinstalled",()=>{console.log("‚úÖ PWA installed successfully"),window.gtag&&window.gtag("event","pwa_installed",{event_category:"PWA",event_label:"App Installed"})})},Tl=(a,r)=>{const n=()=>{console.log("‚úÖ Network: Online"),a&&a(),aa("üü¢ √áevrimi√ßi","success")},u=()=>{console.log("‚ùå Network: Offline"),r&&r(),aa("üî¥ √áevrimdƒ±≈üƒ± - Baƒülantƒ± koptu","error")};return window.addEventListener("online",n),window.addEventListener("offline",u),navigator.onLine||u(),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",u)}},aa=(a,r="info")=>{const n=document.getElementById("network-banner");n&&n.remove();const u=document.createElement("div");u.id="network-banner",u.textContent=a,u.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        padding: 12px;
        text-align: center;
        color: white;
        font-weight: 600;
        z-index: 9999;
        animation: slideDown 0.3s ease;
        background: ${r==="success"?"#43b581":"#ed4245"};
    `,document.body.appendChild(u),r==="success"&&setTimeout(()=>{u.style.animation="slideUp 0.3s ease",setTimeout(()=>u.remove(),300)},3e3)},El=()=>{const a=document.createElement("style");a.textContent=`
        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }
    `,document.head.appendChild(a)};El();const Rl=`
/* üé® PAWSCORD Critical CSS - Above the Fold */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #1e1f22;
    color: #dcddde;
    overflow: hidden;
}

/* Loading Screen */
#loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #1e1f22;
    display: flex;
    align-items: center;
    justify-center: center;
    z-index: 9999;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #40444b;
    border-top-color: #5865f2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Main Layout */
#root {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.app-container {
    display: flex;
    width: 100%;
    height: 100%;
}

/* Sidebar */
.sidebar {
    width: 240px;
    background: #2b2d31;
    flex-shrink: 0;
}

/* Chat Area */
.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #313338;
}

/* Message Input - Critical */
.message-input-container {
    padding: 16px;
    background: #383a40;
}

.message-input {
    width: 100%;
    padding: 12px;
    background: #40444b;
    border: none;
    border-radius: 8px;
    color: #dcddde;
    font-size: 15px;
    outline: none;
}

/* Button Base */
button {
    cursor: pointer;
    border: none;
    background: transparent;
    color: inherit;
    font-family: inherit;
}

.btn-primary {
    background: #5865f2;
    color: white;
    padding: 10px 16px;
    border-radius: 4px;
    font-weight: 500;
    transition: background 0.17s ease;
}

.btn-primary:hover {
    background: #4752c4;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #2b2d31;
}

::-webkit-scrollbar-thumb {
    background: #1a1b1e;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #141517;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
}

/* Utilities */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.gap-2 {
    gap: 8px;
}

.gap-4 {
    gap: 16px;
}

.hidden {
    display: none !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: absolute;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .sidebar.open {
        transform: translateX(0);
    }
}
`,Al=()=>{const a=document.createElement("style");a.id="critical-css",a.textContent=Rl,document.head.insertBefore(a,document.head.firstChild),console.log("‚úÖ Critical CSS inlined")},Pl=a=>new Promise((r,n)=>{const u=document.createElement("link");u.rel="stylesheet",u.href=a,u.onload=()=>{console.log(`‚úÖ Lazy loaded CSS: ${a}`),r()},u.onerror=n,document.head.appendChild(u)}),Il=()=>{const a=[],r=()=>{a.forEach(n=>{Pl(n)})};"requestIdleCallback"in window?requestIdleCallback(r):setTimeout(r,1)},Ll=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ö° [Performance] Electron'da font preload atlandƒ±");return}console.log("‚ö° [Performance] Font preload atlandƒ± - system fonts kullanƒ±lƒ±yor")},Ol=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ÑπÔ∏è Preload skipped: Electron detected");return}console.log("‚úÖ Key resources preloaded")},ia=()=>{const a=document.getElementById("critical-css");a&&setTimeout(()=>{a.remove(),console.log("üóëÔ∏è Critical CSS removed (full CSS loaded)")},1e3)},Dl=()=>{Al(),Ol(),Ll(),Il(),document.readyState==="complete"?ia():window.addEventListener("load",ia)},Wr={serverSettings:()=>x(()=>import("./ServerSettingsModal-DtD0QS51.js"),__vite__mapDeps([8,2,3,6,9,10,11,1,4,5,7])),userProfile:()=>x(()=>import("./UserProfileModal-bErBfAA5.js"),__vite__mapDeps([12,2,3,6,1,4,5,7])),imageModal:()=>x(()=>import("./ImageModal-kweEZmfU.js"),__vite__mapDeps([13,2,3])),gifPicker:()=>x(()=>import("./GifPicker-DU3Ex2pK.js"),__vite__mapDeps([14,2,3])),stickerPicker:()=>x(()=>import("./StickerPicker-Boa1KBkF.js"),__vite__mapDeps([15,2,3])),soundboard:()=>x(()=>import("./SoundboardModal-BQfmIZDD.js"),__vite__mapDeps([16,2,3,6])),watchParty:()=>x(()=>import("./WatchPartyEnhanced-CACyMy4W.js"),__vite__mapDeps([17,2,3,6])),cinema:()=>x(()=>import("./CinemaModal-DNPCk8d2.js"),__vite__mapDeps([18,1,2,3,6])),whiteboard:()=>x(()=>import("./WhiteboardModal-42-zGmrN.js"),__vite__mapDeps([19,2,3,6])),poll:()=>x(()=>import("./PollCreateModal-DE_LwfDI.js"),__vite__mapDeps([20,2,3,6])),codeSnippet:()=>x(()=>import("./CodeSnippetModal-DsKQVajo.js"),__vite__mapDeps([21,2,3,6])),messageTemplate:()=>x(()=>import("./MessageTemplateModal-Cq83XQfP.js"),__vite__mapDeps([22,2,3,6]))},Ta=()=>{const a=[Wr.userProfile,Wr.imageModal];setTimeout(()=>{a.forEach(r=>r())},3e3)},Fn=()=>{"requestIdleCallback"in window&&requestIdleCallback(()=>{Wr.gifPicker(),Wr.stickerPicker()})},Wn={default:{name:"Pawscord Dark",colors:{"--background-primary":"#313338","--background-secondary":"#2b2d31","--background-tertiary":"#1e1f22","--background-accent":"#404249","--text-primary":"#dbdee1","--text-secondary":"#949ba4","--text-muted":"#787f89","--text-link":"#00a8fc","--button-primary":"#5865f2","--button-secondary":"#4e5058","--border-primary":"#1f2023"}},midnight:{name:"Midnight AMOLED",colors:{"--background-primary":"#000000","--background-secondary":"#0a0a0a","--background-tertiary":"#111111","--background-accent":"#222222","--text-primary":"#ffffff","--text-secondary":"#b0b0b0","--text-muted":"#666666","--text-link":"#3ea6ff","--button-primary":"#3ea6ff","--button-secondary":"#333333","--border-primary":"#333333"}},dracula:{name:"Dracula",colors:{"--background-primary":"#282a36","--background-secondary":"#44475a","--background-tertiary":"#6272a4","--background-accent":"#44475a","--text-primary":"#f8f8f2","--text-secondary":"#bfbfbf","--text-muted":"#6272a4","--text-link":"#8be9fd","--button-primary":"#bd93f9","--button-secondary":"#44475a","--border-primary":"#44475a"}},ocean:{name:"Deep Ocean",colors:{"--background-primary":"#0f172a","--background-secondary":"#1e293b","--background-tertiary":"#334155","--background-accent":"#334155","--text-primary":"#e2e8f0","--text-secondary":"#94a3b8","--text-muted":"#64748b","--text-link":"#38bdf8","--button-primary":"#0ea5e9","--button-secondary":"#334155","--border-primary":"#1e293b"}},forest:{name:"Enchanted Forest",colors:{"--background-primary":"#1a2f1a","--background-secondary":"#243b24","--background-tertiary":"#2f4b2f","--background-accent":"#3a5a3a","--text-primary":"#e0ffe0","--text-secondary":"#a0cca0","--text-muted":"#608060","--text-link":"#4caf50","--button-primary":"#4caf50","--button-secondary":"#2f4b2f","--border-primary":"#2f4b2f"}},matrix:{name:"The Matrix",colors:{"--background-primary":"#0d0d0d","--background-secondary":"#121212","--background-tertiary":"#1a1a1a","--background-accent":"#003b00","--text-primary":"#00ff41","--text-secondary":"#008f11","--text-muted":"#003b00","--text-link":"#00ff41","--button-primary":"#008f11","--button-secondary":"#003b00","--border-primary":"#003b00"}},sunset:{name:"Sunset Vibes",colors:{"--background-primary":"#2d1b2e","--background-secondary":"#442740","--background-tertiary":"#5a3450","--background-accent":"#734361","--text-primary":"#ffccaa","--text-secondary":"#ff9e7d","--text-muted":"#b05963","--text-link":"#ffbd69","--button-primary":"#ff6b6b","--button-secondary":"#5a3450","--border-primary":"#5a3450"}}},Ml=a=>{const r=Wn[a]||Wn.default,n=document.documentElement;Object.entries(r.colors).forEach(([u,c])=>{n.style.setProperty(u,c)}),localStorage.setItem("pawscord_theme",a)},$l=()=>{const a=localStorage.getItem("pawscord_theme");return a&&Wn[a]?(Ml(a),a):"default"},Te=ul((a,r)=>({messages:[],encryptionKeys:{},activeChat:{type:"welcome",id:"welcome",targetUser:null},unreadCounts:{},typingUsers:[],onlineUsers:[],voiceUsers:{},currentPermissions:{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1},setActiveChat:(n,u,c=null)=>{console.log("üîÑ [Store] setActiveChat called:",{type:n,id:u,targetUser:c}),console.log("üîÑ [Store] Current messages count:",r().messages.length),a({activeChat:{type:n,id:u,targetUser:c}});const m=n==="room"?`room-${u}`:`dm-${u}`;a(C=>{const E={...C.unreadCounts};return delete E[m],{unreadCounts:E}})},addMessage:n=>a(u=>!n||typeof n!="object"||!n.id?(console.warn("‚ö†Ô∏è [Store] Invalid message rejected:",n),u):n.temp_id&&u.messages.some(m=>m.temp_id===n.temp_id)?{messages:u.messages.map(m=>m.temp_id===n.temp_id?n:m)}:u.messages.some(c=>c.id===n.id)?u:{messages:[...u.messages,n]}),updateMessage:(n,u)=>a(c=>({messages:c.messages.map(m=>m.id===n?{...m,...u}:m)})),setMessages:n=>a(u=>{const c=typeof n=="function"?n(u.messages):n;return{messages:Array.isArray(c)?c.filter(C=>C&&typeof C=="object"&&C.id):[]}}),prependMessages:n=>a(u=>({messages:[...n,...u.messages]})),incrementUnread:n=>a(u=>({unreadCounts:{...u.unreadCounts,[n]:(u.unreadCounts[n]||0)+1}})),setOnlineUsers:n=>a({onlineUsers:n}),setTypingUser:(n,u)=>a(c=>u?{typingUsers:c.typingUsers.includes(n)?c.typingUsers:[...c.typingUsers,n]}:{typingUsers:c.typingUsers.filter(m=>m!==n)}),setVoiceUsers:n=>a({voiceUsers:n}),setEncryptionKey:(n,u)=>a(c=>({encryptionKeys:{...c.encryptionKeys,[n]:u}})),setPermissions:n=>a({currentPermissions:n||{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1}})})),Gr="ENC::",zl=(a,r)=>{if(!a||!r)return a;try{const n=Un.AES.encrypt(a,r).toString();return Gr+n}catch(n){return console.error("≈ûifreleme hatasƒ±:",n),a}},Ep=(a,r)=>{if(!a||!a.startsWith(Gr)||!r)return a;try{const n=a.replace(Gr,""),c=Un.AES.decrypt(n,r).toString(Un.enc.Utf8);return c||"üîí ≈ûifreli Mesaj (Anahtar Yanlƒ±≈ü)"}catch(n){return console.error("≈ûifre √ß√∂zme hatasƒ±:",n),"üîí √á√∂z√ºlemedi"}},Rp=a=>a&&typeof a=="string"&&a.startsWith(Gr),Qe={mobile:768,tablet:1024,desktop:1920,ultrawide:2560},Vl=()=>{const[a,r]=o.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080});o.useEffect(()=>{if(typeof window>"u")return;let c;const m=()=>{clearTimeout(c),c=setTimeout(()=>{r({width:window.innerWidth,height:window.innerHeight})},150)};return m(),window.addEventListener("resize",m),window.addEventListener("orientationchange",m),()=>{clearTimeout(c),window.removeEventListener("resize",m),window.removeEventListener("orientationchange",m)}},[]);const{width:n,height:u}=a;return{isMobile:n<=Qe.mobile,isTablet:n>Qe.mobile&&n<=Qe.tablet,isDesktop:n>Qe.tablet&&n<=Qe.desktop,isUltrawide:n>Qe.desktop,width:n,height:u,orientation:u>n?"portrait":"landscape",isSmallScreen:n<=Qe.mobile,isMediumScreen:n>Qe.mobile&&n<=Qe.tablet,isLargeScreen:n>Qe.tablet,isTouchDevice:typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0),breakpoints:Qe}},Bl=(a,r,n)=>o.useMemo(()=>{if(!a||!Array.isArray(a))return[];let c=a;if(r&&typeof r=="string"&&r.trim()){const m=r.toLowerCase();c=c.filter(C=>C.content?.toLowerCase().includes(m)||C.user?.username?.toLowerCase().includes(m))}return c.sort((m,C)=>{const E=new Date(m.created_at||m.timestamp),T=new Date(C.created_at||C.timestamp);return E-T})},[a,r]),Ul=a=>o.useMemo(()=>!a||!Array.isArray(a)?[]:a.filter(r=>r.is_online||r.online),[a]),Xn=()=>"https://api.pawscord.com",Nl=Xn(),Fl=()=>Xn().replace("/api","/media"),Ap=Xn,Pp=Fl,Wl=`${Nl}/api`,Gl=()=>{let a=sessionStorage.getItem("analytics_session_id");return a||(a=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("analytics_session_id",a)),a},Hl=()=>{const a=wa();o.useEffect(()=>{(async()=>{try{const n=Gl();await fetch(`${Wl}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a.pathname,session_id:n,referrer:document.referrer,timestamp:new Date().toISOString()})}),console.log("üìä Page tracked:",a.pathname)}catch(n){console.error("Analytics tracking error:",n)}})()},[a.pathname])},Kl=(a,r)=>{const n=o.useRef(null);return o.useCallback((...u)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{a(...u)},r)},[a,r])},ql=(a,r)=>{const n=o.useRef(Date.now());return o.useCallback((...u)=>{const c=Date.now();c-n.current>=r&&(a(...u),n.current=c)},[a,r])},Ip=a=>{const r=o.useRef(0),n=o.useRef(0);o.useEffect(()=>{const u=performance.now();return r.current+=1,()=>{const m=performance.now()-u;n.current+=m,r.current%10===0&&console.log(`üéØ ${a} Performance Stats:`,`
  Total Renders: ${r.current}`,`
  Average Time: ${(n.current/r.current).toFixed(2)}ms`,`
  Last Render: ${m.toFixed(2)}ms`)}})},Yl="pawscord.com",Jl="443",Qn=typeof window>"u"?!1:!!(typeof window.require=="function"||typeof process<"u"&&process.versions&&process.versions.electron||navigator.userAgent.toLowerCase().includes("electron")||window.location.protocol==="file:"),Ea=wo.isNativePlatform(),wt=Ea||Qn||!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("192.168.")?"https://api.pawscord.com":`http://${Yl}:${Jl}`,tt=`${wt}/api`;Ea||Qn||window.location.hostname.includes("localhost");const Hr=wt.startsWith("https")?"wss":"ws",Kr=wt.replace(/^https?:\/\//,""),Ra="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",Aa=o.createContext(null),Zl=wt,Xl=({children:a})=>{const r=localStorage.getItem("access_token"),n=(()=>{if(!r)return!1;try{return Xt(r).exp>Date.now()/1e3-300}catch{return!1}})(),[u,c]=o.useState(n?{username:localStorage.getItem("chat_username")||""}:null),[m,C]=o.useState(r),[E,T]=o.useState(n),[D,H]=o.useState(!1),O=o.useRef(null),z=o.useCallback(async()=>{const B=localStorage.getItem("refresh_token");if(!B)return console.warn("‚ö†Ô∏è [Auth] No refresh token available"),V(),!1;try{console.log("üîÑ [Auth] Refreshing access token...");const G=await fetch(`${Zl}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:B})});if(G.ok){const Y=await G.json();localStorage.setItem("access_token",Y.access),Y.refresh&&localStorage.setItem("refresh_token",Y.refresh);const ue=Xt(Y.access);return C(Y.access),c({username:ue.username}),T(!0),console.log("‚úÖ [Auth] Token refreshed successfully"),Z(Y.access),!0}else return console.error("‚ùå [Auth] Token refresh failed:",G.status),V(),!1}catch(G){return console.error("‚ùå [Auth] Token refresh error:",G),V(),!1}},[]),Z=o.useCallback(B=>{O.current&&clearTimeout(O.current);try{const G=Xt(B),Y=Date.now()/1e3,ue=G.exp-Y,re=Math.max((ue-300)*1e3,6e4);console.log(`‚è∞ [Auth] Token will refresh in ${Math.round(re/1e3/60)} minutes`),O.current=setTimeout(()=>{z()},re)}catch(G){console.error("‚ùå [Auth] Failed to schedule token refresh:",G)}},[z]);o.useEffect(()=>{const B=localStorage.getItem("access_token");if(B)try{const G=Xt(B),Y=Date.now()/1e3,ue=300,re=G.exp>Y-ue;console.log("üîê [Auth] Token check:",{exp:G.exp,currentTime:Y,gracePeriod:ue,isValid:re,username:G.username}),re?(C(B),c({username:G.username}),T(!0),localStorage.setItem("chat_username",G.username),Z(B),console.log("‚úÖ [Auth] User authenticated:",G.username)):(console.warn("‚ö†Ô∏è [Auth] Token expired, attempting refresh..."),z())}catch(G){console.error("‚ùå [Auth] Invalid token:",G),V()}else console.log("‚ÑπÔ∏è [Auth] No token found");return()=>{O.current&&clearTimeout(O.current)}},[Z,z]);const K=(B,G)=>{console.log("üîì [Auth] Login called");try{localStorage.setItem("access_token",B),localStorage.setItem("refresh_token",G);const Y=Xt(B);localStorage.setItem("chat_username",Y.username),console.log("‚úÖ [Auth] Login successful, user:",Y.username),C(B),c({username:Y.username}),T(!0),Z(B)}catch(Y){console.error("‚ùå [Auth] Login failed:",Y),V()}},V=o.useCallback(()=>{O.current&&clearTimeout(O.current),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("chat_username"),C(null),c(null),T(!1)},[]);return e.jsx(Aa.Provider,{value:{user:u,token:m,isAuthenticated:E,login:K,logout:V,isLoading:D,refreshAccessToken:z},children:a})},vo=()=>o.useContext(Aa),Ae={log:(...a)=>{},warn:(...a)=>{},error:(...a)=>{console.error(...a)},debug:(...a)=>{},voice:(...a)=>{},webrtc:(...a)=>{},signal:(...a)=>{},audio:(...a)=>{}};class Ql{constructor(){this.audioContext=null,this.masterGain=null,this.spatialNodes={},this.listenerPosition={x:0,y:0,z:0},this.initialized=!1}async initialize(){if(!this.initialized)try{const r=window.AudioContext||window.webkitAudioContext;this.audioContext=new r,this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.audioContext.destination),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.setupListener(),this.initialized=!0,console.log("üéß Spatial Audio Engine initialized")}catch(r){throw console.error("Failed to initialize spatial audio:",r),r}}setupListener(){const r=this.audioContext.listener;r.positionX?(r.positionX.value=this.listenerPosition.x,r.positionY.value=this.listenerPosition.y,r.positionZ.value=this.listenerPosition.z):r.setPosition(this.listenerPosition.x,this.listenerPosition.y,this.listenerPosition.z),r.forwardX?(r.forwardX.value=0,r.forwardY.value=0,r.forwardZ.value=-1,r.upX.value=0,r.upY.value=1,r.upZ.value=0):r.setOrientation(0,0,-1,0,1,0)}addUser(r,n,u={x:0,y:0,z:-1}){if(!this.initialized)return console.warn("Spatial audio not initialized"),null;this.spatialNodes[r]&&this.removeUser(r);try{const c=this.audioContext.createMediaStreamSource(n),m=this.audioContext.createPanner();m.panningModel="HRTF",m.distanceModel="inverse",m.refDistance=1,m.maxDistance=1e4,m.rolloffFactor=1.5,m.coneInnerAngle=360,m.coneOuterAngle=360,m.coneOuterGain=0,this.setUserPosition(r,u,m);const C=this.audioContext.createGain();C.gain.value=1;const E=this.audioContext.createAnalyser();return E.fftSize=256,E.smoothingTimeConstant=.8,c.connect(E),E.connect(m),m.connect(C),C.connect(this.masterGain),this.spatialNodes[r]={source:c,panner:m,gain:C,analyser:E,position:u,audioElement:null},console.log(`üéß Added spatial audio for ${r} at position`,u),this.spatialNodes[r]}catch(c){return console.error(`Failed to add spatial audio for ${r}:`,c),null}}setUserPosition(r,n,u=null){const c=u||this.spatialNodes[r]?.panner;c&&(c.positionX?(c.positionX.setValueAtTime(n.x,this.audioContext.currentTime),c.positionY.setValueAtTime(n.y,this.audioContext.currentTime),c.positionZ.setValueAtTime(n.z,this.audioContext.currentTime)):c.setPosition(n.x,n.y,n.z),this.spatialNodes[r]&&(this.spatialNodes[r].position=n))}setUserVolume(r,n){const u=this.spatialNodes[r];if(!u)return;const c=Math.max(0,Math.min(1,n));u.gain.gain.setValueAtTime(c,this.audioContext.currentTime)}getVoiceActivity(r){const n=this.spatialNodes[r];if(!n)return 0;const u=n.analyser,c=new Uint8Array(u.frequencyBinCount);u.getByteFrequencyData(c);const C=c.reduce((E,T)=>E+T,0)/c.length;return Math.round(C/255*100)}removeUser(r){const n=this.spatialNodes[r];if(n)try{n.source.disconnect(),n.analyser.disconnect(),n.panner.disconnect(),n.gain.disconnect(),delete this.spatialNodes[r],console.log(`üéß Removed spatial audio for ${r}`)}catch(u){console.error(`Error removing spatial audio for ${r}:`,u)}}updateListenerPosition(r){this.listenerPosition=r,this.setupListener()}setMasterVolume(r){if(!this.masterGain)return;const n=Math.max(0,Math.min(1,r));this.masterGain.gain.setValueAtTime(n,this.audioContext.currentTime)}setUserMuted(r,n){this.setUserVolume(r,n?0:1)}destroy(){Object.keys(this.spatialNodes).forEach(r=>{this.removeUser(r)}),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.initialized=!1,console.log("üéß Spatial Audio Engine destroyed")}getUserDistance(r){const n=this.spatialNodes[r];if(!n)return 1/0;const u=n.position,c=this.listenerPosition;return Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2)+Math.pow(u.z-c.z,2))}arrangeUsersInCircle(r,n=3){const u={},c=2*Math.PI/r.length;return r.forEach((m,C)=>{const E=c*C,T={x:Math.cos(E)*n,y:0,z:Math.sin(E)*n};u[m]=T,this.setUserPosition(m,T)}),u}}const Go=new Ql,ed=wt;let Jt=!1,Gn=[];const ca=a=>{Gn.push(a)},la=a=>{Gn.forEach(r=>r(a)),Gn=[]},td=a=>{if(!a)return!0;try{const r=Xt(a),n=Date.now()/1e3;return r.exp<n+30}catch{return!0}},da=async()=>{const a=localStorage.getItem("refresh_token");if(!a)throw new Error("No refresh token available");const r=await fetch(`${ed}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:a})});if(!r.ok)throw new Error("Token refresh failed");const n=await r.json();return localStorage.setItem("access_token",n.access),n.refresh&&localStorage.setItem("refresh_token",n.refresh),console.log("‚úÖ [AuthFetch] Token refreshed successfully"),n.access},Hn=async(a,r={})=>{let n=localStorage.getItem("access_token");if(td(n))if(console.log("‚è∞ [AuthFetch] Token expired, refreshing before request..."),Jt)n=await new Promise(m=>{ca(C=>m(C))});else{Jt=!0;try{n=await da(),la(n)}catch(m){throw console.error("‚ùå [AuthFetch] Token refresh failed:",m),Jt=!1,window.dispatchEvent(new CustomEvent("auth:logout")),m}finally{Jt=!1}}const u={...r.headers,Authorization:`Bearer ${n}`};let c=await fetch(a,{...r,headers:u});if(c.status===401)if(console.warn("‚ö†Ô∏è [AuthFetch] Got 401, attempting token refresh..."),Jt)n=await new Promise(m=>{ca(C=>m(C))}),u.Authorization=`Bearer ${n}`,c=await fetch(a,{...r,headers:u});else{Jt=!0;try{n=await da(),la(n),u.Authorization=`Bearer ${n}`,c=await fetch(a,{...r,headers:u})}catch(m){throw console.error("‚ùå [AuthFetch] Retry refresh failed:",m),window.dispatchEvent(new CustomEvent("auth:logout")),m}finally{Jt=!1}}return c},Pa=o.createContext(null),Zt=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.services.mozilla.com:3478"},{urls:"stun:stun.stunprotocol.org:3478"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}];let Kn={iceServers:Zt,iceCandidatePoolSize:10,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};const Vr=a=>{Kn={...Kn,iceServers:a}};console.log("[VoiceContext] üéØ isElectron:",Qn,"API_URL:",wt,"WS_PROTOCOL:",Hr,"API_HOST:",Kr);const od=({children:a})=>{const{user:r,token:n}=vo(),u=r?.username,[c,m]=o.useState(!1),[C,E]=o.useState(!1),[T,D]=o.useState(null),[H,O]=o.useState(!1),[z,Z]=o.useState(!1),[K,V]=o.useState(!1),[B,G]=o.useState(!1),[Y,ue]=o.useState(!1),[re,X]=o.useState(!1),[ae,fe]=o.useState(0),[J,he]=o.useState(null),[we,Be]=o.useState(50),[ee,Se]=o.useState(null),[Ue,Me]=o.useState(null),[vt,Ke]=o.useState(null),[Ee,ut]=o.useState({}),[Jo,d]=o.useState([]),[_o,Qt]=o.useState(null),[qr,Zo]=o.useState({isActive:!1,url:"https://www.youtube.com/watch?v=jfKfPfyJRdk",playing:!1,time:0,lastSyncAction:null,timestamp:0}),[de,ve]=o.useState({gameType:"rps",moves:{},result:null,players:[],currentTurn:null}),[Xo,Qo]=o.useState({}),[Yr,Jr]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_noise_gate"))||-50}catch{return-50}}),[Zr,Xr]=o.useState(()=>{try{return localStorage.getItem("pawscord_noise_gate_enabled")!=="false"}catch{return!0}}),[er,tr]=o.useState({local:new Uint8Array(128),remote:{}}),[_t,Qr]=o.useState(()=>{try{return localStorage.getItem("pawscord_visualizer")==="true"}catch{return!1}}),[eo,en]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("pawscord_user_volumes"))||{}}catch{return{}}}),[or,es]=o.useState(new Set),[ft,rr]=o.useState(()=>{try{return localStorage.getItem("pawscord_spatial_audio")==="true"}catch{return!1}}),[Dt,tn]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_vad_sensitivity"))||45}catch{return 45}}),[Mt,on]=o.useState(()=>{try{const i=localStorage.getItem("pawscord_noise_suppression");return i===null?!0:i==="true"}catch{return!0}}),[nr,rn]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"medium"}catch{return"medium"}}),[ge,I]=o.useState(()=>{try{return localStorage.getItem("pawscord_screen_quality")||"1080p"}catch{return"1080p"}}),[to,ko]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_screen_fps"))||30}catch{return 30}}),[Co,nn]=o.useState(()=>{try{return localStorage.getItem("pawscord_system_audio")!=="false"}catch{return!1}}),[We,oo]=o.useState(()=>{try{return localStorage.getItem("pawscord_ptt_mode")==="true"}catch{return!1}}),[te,sr]=o.useState(()=>{try{return localStorage.getItem("pawscord_ptt_key")||"Space"}catch{return"Space"}}),[ar,$t]=o.useState(!1),[zt,jo]=o.useState(Zt),[ir,Ne]=o.useState(!1),[cr,pt]=o.useState(0),[To,kt]=o.useState(1e3),ot=o.useRef(null),ro=o.useRef(null);o.useRef(null);const Eo=o.useCallback(async()=>{if(!n){console.log("üßä [RTC] No token, using STUN only"),jo(Zt),Vr(Zt);return}try{const i=await Hn(`${wt}/api/voice/turn-credentials/`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw i.status===401||i.status===403?console.warn("üßä [RTC] Auth failed, using STUN only"):console.warn(`üßä [RTC] TURN fetch failed (${i.status}), using STUN only`),new Error(`TURN fetch failed ${i.status}`);const p=await i.json(),h=[...Zt,...p?.iceServers||[]];jo(h),Vr(h),console.log("üßä [RTC] ICE servers updated with TURN credentials:",h.length,"servers")}catch(i){console.warn("üßä [RTC] Using STUN-only mode:",i.message),jo(Zt),Vr(Zt)}},[n]);o.useEffect(()=>{Eo()},[Eo]);const F=o.useRef(null),ie=o.useRef({}),mt=o.useRef(null),_e=o.useRef(null),U=o.useRef(null),ke=o.useRef(null),ne=o.useRef(null),ht=o.useRef([]),rt=o.useRef(null),nt=o.useRef(null),Fe=o.useRef(!1),st=o.useRef(!1),qe=o.useRef(null),Vt=o.useRef(null),Ro=o.useRef(null),Ce=o.useRef(null);o.useEffect(()=>{localStorage.setItem("pawscord_user_volumes",JSON.stringify(eo))},[eo]);const Ao=o.useCallback((i,p)=>{en(h=>({...h,[i]:Math.max(0,Math.min(100,p))}))},[]);o.useEffect(()=>{U.current=ee},[ee]),o.useEffect(()=>{ke.current=Ue},[Ue]),o.useEffect(()=>{ne.current=vt},[vt]),o.useEffect(()=>{if(!ee||!c||H){ue(!1);return}if(!_e.current){const q=window.AudioContext||window.webkitAudioContext;_e.current=new q,console.log("üéµ [Performance] Global AudioContext created (reused for all users)")}const i=_e.current,p=i.createAnalyser();p.fftSize=2048,p.smoothingTimeConstant=.85;const h=p.frequencyBinCount,_=new Uint8Array(h),j=i.createMediaStreamSource(ee);j.connect(p);let w=null;const b=Dt,S=150;let R=null;const M=()=>{p.getByteFrequencyData(_);const q=_.slice(10,100);q.reduce((pe,$e)=>pe+$e,0)/q.length>b&&(ue(!0),w&&clearTimeout(w),w=setTimeout(()=>ue(!1),S)),c&&!H&&(R=requestAnimationFrame(M))};return M(),()=>{w&&clearTimeout(w),R&&cancelAnimationFrame(R),j.disconnect()}},[ee,c,H,Dt]);const Ye=o.useCallback(()=>{if(!mt.current){const i=window.AudioContext||window.webkitAudioContext;mt.current=new i}mt.current.state==="suspended"&&mt.current.resume()},[]),sn=o.useCallback(async()=>{const i=!ft;if(i)try{await Go.initialize(),Object.keys(Ee).forEach((p,h)=>{const _=Ee[p],j=p.replace("_camera","").replace("_screen","");if(!p.includes("_camera")&&!p.includes("_screen")){const w=h/Object.keys(Ee).length*2*Math.PI,b={x:Math.cos(w)*3,y:0,z:Math.sin(w)*3};Go.addUser(j,_,b),console.log(`üéß [Spatial] Added ${j} at angle ${(w*180/Math.PI).toFixed(0)}¬∞`)}}),console.log("üéß [Spatial Audio] ENABLED - 3D audio active!")}catch(p){console.error("Failed to enable spatial audio:",p),$.warning("Spatial Audio ba≈ülatƒ±lamadƒ±. Tarayƒ±cƒ±nƒ±z desteklemiyor olabilir.");return}else Go.destroy(),console.log("üéß [Spatial Audio] DISABLED - Normal stereo audio");rr(i),localStorage.setItem("pawscord_spatial_audio",i.toString())},[ft,Ee]),lr=o.useCallback(i=>{const p=Math.max(20,Math.min(80,i));tn(p),localStorage.setItem("pawscord_vad_sensitivity",p.toString()),console.log(`üéöÔ∏è [VAD] Sensitivity updated: ${p}`)},[]),no=o.useCallback(async()=>{const i=!Mt;if(on(i),localStorage.setItem("pawscord_noise_suppression",i.toString()),ee){const p=ee.getAudioTracks()[0];if(p&&p.applyConstraints)try{await p.applyConstraints({noiseSuppression:i,echoCancellation:!0,autoGainControl:!0}),console.log(`üéõÔ∏è [Noise Suppression] ${i?"ENABLED":"DISABLED"}`)}catch(h){console.warn("[Noise] Failed to apply, trying fallback getUserMedia:",h);try{const j=(await navigator.mediaDevices.getUserMedia({audio:{noiseSuppression:i,echoCancellation:!0,autoGainControl:!0,googHighpassFilter:!0,googNoiseSuppression:i,googNoiseSuppression2:i,googEchoCancellation:!0,googAutoGainControl:!0,googTypingNoiseDetection:!0,sampleRate:{ideal:48e3},latency:{ideal:.01},channelCount:{ideal:1}}})).getAudioTracks()[0],w=new MediaStream([j]);Se(w),U.current=w,console.log("[Noise] Enhanced fallback stream acquired")}catch(_){console.error("[Noise] Fallback failed:",_)}}}},[Mt,ee]),dr=o.useCallback(i=>{const h=["low","medium","high","aggressive"].includes(i)?i:"high";rn(h);try{const _=JSON.parse(localStorage.getItem("voice_settings")||"{}");_.audio={..._.audio,noiseSuppressionLevel:h},localStorage.setItem("voice_settings",JSON.stringify(_))}catch(_){console.error("[Noise Level] Storage error:",_)}console.log(`üéõÔ∏è [Noise Level] Updated to: ${h}`)},[]),an=o.useCallback(i=>{nn(i),localStorage.setItem("pawscord_system_audio",i.toString()),console.log(`üîä [System Audio] ${i?"ENABLED":"DISABLED"}`)},[]),ur=o.useCallback(()=>{const i=!We;oo(i),localStorage.setItem("pawscord_ptt_mode",i.toString()),i?(console.log("üéôÔ∏è [PTT] Mode enabled, VAD disabled"),U.current&&U.current.getAudioTracks().forEach(p=>{p.enabled=!1}),O(!0)):(console.log("üéôÔ∏è [PTT] Mode disabled, VAD enabled"),U.current&&U.current.getAudioTracks().forEach(p=>{p.enabled=!0}),O(!1))},[We]),cn=o.useCallback(i=>{sr(i),localStorage.setItem("pawscord_ptt_key",i),console.log(`‚å®Ô∏è [PTT] Key updated to: ${i}`)},[]);o.useEffect(()=>{if(!We||!c)return;const i=h=>{const _=h.target;_.tagName==="INPUT"||_.tagName==="TEXTAREA"||h.code===te&&!h.repeat&&($t(!0),U.current&&U.current.getAudioTracks().forEach(j=>{j.enabled=!0}),console.log("üéôÔ∏è [PTT] Key pressed, mic ON"))},p=h=>{h.code===te&&($t(!1),U.current&&U.current.getAudioTracks().forEach(_=>{_.enabled=!1}),console.log("üéôÔ∏è [PTT] Key released, mic OFF"))};return window.addEventListener("keydown",i),window.addEventListener("keyup",p),()=>{window.removeEventListener("keydown",i),window.removeEventListener("keyup",p)}},[We,c,te]);const Je=o.useCallback(i=>{I(i),localStorage.setItem("pawscord_screen_quality",i),console.log(`üì∫ [Screen Quality] Updated to: ${i}`)},[]),ln=o.useCallback(i=>{const p=parseInt(i);ko(p),localStorage.setItem("pawscord_screen_fps",p.toString()),console.log(`üé¨ [Screen FPS] Updated to: ${p}`)},[]);o.useEffect(()=>{ft&&Object.keys(Ee).forEach((i,p)=>{const h=Ee[i],_=i.replace("_camera","").replace("_screen","");if(!i.includes("_camera")&&!i.includes("_screen")&&!Go.spatialNodes[_]){const j=p/Object.keys(Ee).length*2*Math.PI,w={x:Math.cos(j)*3,y:0,z:Math.sin(j)*3};Go.addUser(_,h,w),console.log(`üéß [Spatial] Auto-added ${_}`)}})},[Ee,ft]),o.useCallback(async i=>{try{const p=i.getAudioTracks();if(p.length===0)return i;const h=p[0],_={echoCancellation:{exact:!0},noiseSuppression:{exact:!0},autoGainControl:{exact:!0},googEchoCancellation:{exact:!0},googAutoGainControl:{exact:!0},googNoiseSuppression:{exact:!0},googHighpassFilter:{exact:!0},googTypingNoiseDetection:{exact:!0},googAudioMirroring:!1,googAutoGainControl2:{exact:!0},echoCancellationType:"system"};if(h.applyConstraints)try{await h.applyConstraints(_),Ae.audio("üéØ ADVANCED noise suppression enabled")}catch{await h.applyConstraints({echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),Ae.audio("‚úÖ Basic noise suppression enabled (fallback)")}return i}catch{return i}},[]);const Po=o.useCallback(i=>{try{const h=JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"high",_={low:{gateThreshold:-70,compressorThreshold:-15,compressorRatio:2,highPassFreq:50,lowPassFreq:14e3,gateRelease:.3,speechThreshold:20},medium:{gateThreshold:-60,compressorThreshold:-20,compressorRatio:3,highPassFreq:80,lowPassFreq:12e3,gateRelease:.25,speechThreshold:25},high:{gateThreshold:-50,compressorThreshold:-25,compressorRatio:4,highPassFreq:100,lowPassFreq:1e4,gateRelease:.2,speechThreshold:30},aggressive:{gateThreshold:-45,compressorThreshold:-30,compressorRatio:6,highPassFreq:120,lowPassFreq:8e3,gateRelease:.15,speechThreshold:35}},j=_[h]||_.high;if(console.log(`üîä [Audio] Noise suppression level: ${h}`,j),!_e.current){const Ht=window.AudioContext||window.webkitAudioContext;_e.current=new Ht({sampleRate:48e3,latencyHint:"interactive"}),console.log("üéµ [Performance] Global AudioContext created (48kHz, interactive mode)")}const w=_e.current;w.state==="suspended"&&w.resume().then(()=>{console.log("üéµ [Audio] AudioContext resumed from suspended state")});const b=w.createMediaStreamSource(i),S=w.createGain();let R=!0;const M=j.gateThreshold,q=.005,se=j.gateRelease,pe=w.createDynamicsCompressor();pe.threshold.value=j.compressorThreshold,pe.knee.value=30,pe.ratio.value=Math.min(j.compressorRatio,4),pe.attack.value=.003,pe.release.value=.15;const $e=w.createBiquadFilter();$e.type="highpass",$e.frequency.value=j.highPassFreq,$e.Q.value=.707;const gt=w.createBiquadFilter();gt.type="lowpass",gt.frequency.value=j.lowPassFreq,gt.Q.value=.707;const Ze=w.createBiquadFilter();Ze.type="notch",Ze.frequency.value=50,Ze.Q.value=10;const Gt=w.createBiquadFilter();Gt.type="peaking",Gt.frequency.value=6e3,Gt.Q.value=1,Gt.gain.value=-3;const Tt=w.createAnalyser();Tt.fftSize=2048,Tt.smoothingTimeConstant=.85;const Et=new Uint8Array(Tt.frequencyBinCount);let gr=new Float32Array(Tt.frequencyBinCount),yr=!0,Mo=0;const os=()=>{if(Tt.getByteFrequencyData(Et),Et.reduce((lt,$o)=>lt+$o)/Et.length<20){if(Mo++,Mo>10)for(let lt=0;lt<Et.length;lt++)gr[lt]=Math.max(gr[lt],Et[lt])}else Mo=0;yr&&Mo>50&&(yr=!1,console.log("üéØ [Audio] Noise profile learned"))},rs=j.speechThreshold||25,ns=setInterval(()=>{Tt.getByteFrequencyData(Et);const Ht=Et.slice(8,120),$o=Ht.reduce((yn,xn)=>yn+xn)/Ht.length-(gr[50]||0),Sr=w.currentTime;$o>rs?R||(S.gain.setTargetAtTime(1,Sr,q),R=!0):R&&(S.gain.setTargetAtTime(0,Sr,se),R=!1),(yr||Math.random()<.01)&&os()},30);b.connect($e),$e.connect(Ze),Ze.connect(gt),gt.connect(Gt),Gt.connect(pe),pe.connect(S),S.connect(Tt);const xr=w.createMediaStreamDestination();return S.connect(xr),xr.stream.addEventListener("inactive",()=>{clearInterval(ns),console.log("üéöÔ∏è [Audio] Filter chain cleaned up")}),console.log("üéöÔ∏è [Audio] Professional filters applied: Notch(50Hz) + De-Esser + Compressor + Noise Gate"),xr.stream}catch(p){return console.error("‚ùå [Audio] Could not apply professional filters:",p),i}},[]),Pe=o.useCallback(i=>{F.current?.readyState===WebSocket.OPEN?(Ae.signal(`Sending ${i.type} to ${i.receiver_username||"BROADCAST"}`),F.current.send(JSON.stringify({...i,sender_username:u}))):Ae.warn("[Signal] WS not ready, cannot send:",i.type)},[u]),Bt=o.useCallback((i,p)=>{try{const _=i.getSenders().find(S=>S.track?.kind==="video");if(!_){console.log("[Bandwidth] No video sender found, skipping adjustment");return}const j=_.getParameters();(!j.encodings||j.encodings.length===0)&&(j.encodings=[{}]);const w={low:{maxBitrate:3e5,maxFramerate:15},medium:{maxBitrate:8e5,maxFramerate:24},high:{maxBitrate:25e5,maxFramerate:30}},b=w[p]||w.medium;j.encodings[0].maxBitrate=b.maxBitrate,j.encodings[0].maxFramerate=b.maxFramerate,_.setParameters(j).then(()=>{console.log(`‚úÖ [Bandwidth] Video quality set to ${p.toUpperCase()} (${b.maxBitrate/1e3}kbps, ${b.maxFramerate}fps)`)}).catch(S=>{console.warn("[Bandwidth] Failed to set parameters:",S)})}catch(h){console.warn("[Bandwidth] Error adjusting bandwidth:",h)}},[]),Ut=o.useCallback((i,p)=>{const{track:h}=p;Ae.webrtc(`Track Received from ${i}:`,h.kind,h.id,"label:",h.label,"hint:",h.contentHint);const _=(h.label||"").toLowerCase(),j=_.includes("screen")||_.includes("window")||_.includes("monitor")||_.includes("display")||_.includes("tab")||h.contentHint==="detail",w=h.kind==="video"&&j?`${i}_screen`:h.kind==="video"?`${i}_camera`:i;if(console.log(`üìπ [WebRTC] Detected ${j?"SCREEN":"CAMERA"} track from ${i}, key: ${w}`),ut(b=>{const S=b[w];if(S){if(!S.getTracks().some(M=>M.id===h.id)){S.addTrack(h);const M=new MediaStream(S.getTracks());return console.log(`[WebRTC] Added track to existing stream: ${w}`),{...b,[w]:M}}return b}const R=new MediaStream([h]);return console.log(`[WebRTC] Created new stream: ${w}`),{...b,[w]:R}}),h.kind==="audio"){console.log(`[WebRTC] Audio track received from ${i}`),Ye();try{const b=document.createElement("audio");b.id=`remote-audio-${i}`,b.srcObject=new MediaStream([h]),b.autoplay=!0,b.playsInline=!0;const S=document.getElementById(`remote-audio-${i}`);S&&S.remove(),b.style.display="none",document.body.appendChild(b),b.play().then(()=>{console.log(`üîä [Audio] Playing remote audio from ${i}`)}).catch(R=>{console.warn(`[Audio] Autoplay blocked for ${i}, waiting for interaction:`,R.message);const M=()=>{b.play().catch(()=>{}),document.removeEventListener("click",M)};document.addEventListener("click",M,{once:!0})}),console.log(`‚úÖ [Audio] Created audio element for ${i}`)}catch(b){console.error(`[Audio] Failed to create audio element for ${i}:`,b)}}else h.kind==="video"&&console.log(`[WebRTC] Video track (${j?"screen":"camera"}) received from ${i}`)},[Ye]),Ie=o.useRef({}),Nt=o.useCallback((i,p=!1)=>{if(ie.current[i])return ie.current[i];const h=new RTCPeerConnection(Kn);ie.current[i]=h;try{h.getTransceivers().forEach(j=>{if(j.sender&&j.sender.track?.kind==="audio"){const w=RTCRtpSender.getCapabilities("audio")?.codecs||[],b=w.filter(M=>M.mimeType.toLowerCase().includes("opus")),S=w.filter(M=>!M.mimeType.toLowerCase().includes("opus")),R=[...b,...S];j.setCodecPreferences&&R.length>0&&(j.setCodecPreferences(R),console.log("üéµ [Codec] Opus prioritized for audio"))}})}catch(_){console.warn("[Codec] setCodecPreferences not supported:",_.message)}return typeof window<"u"&&(window.__pawscord_peer_connections__=ie.current),h.onicecandidate=_=>{_.candidate&&Pe({type:"candidate",candidate:_.candidate,receiver_username:i})},h.ontrack=_=>Ut(i,_),U.current&&U.current.getTracks().forEach(_=>{Ae.webrtc(`Adding local audio track to PC for ${i}:`,_.kind),h.addTrack(_,U.current)}),h.oniceconnectionstatechange=()=>{console.log(`[WebRTC] ICE State (${i}):`,h.iceConnectionState),h.iceConnectionState==="failed"?(console.warn(`[WebRTC] ICE failed with ${i}, attempting restart...`),Ne(!0),Eo().finally(()=>{h.restartIce(),setTimeout(()=>Ne(!1),1500)})):h.iceConnectionState==="disconnected"?(console.warn(`[WebRTC] ICE disconnected from ${i}, waiting for reconnection...`),Ne(!0),setTimeout(()=>{(h.iceConnectionState==="disconnected"||h.iceConnectionState==="failed")&&(console.error(`[WebRTC] ICE reconnection timeout for ${i}, cleaning up...`),ut(_=>{const j={..._};return delete j[i],j}),ie.current[i]&&(ie.current[i].close(),delete ie.current[i])),Ne(!1)},15e3)):h.iceConnectionState==="closed"?(console.log(`[WebRTC] ICE closed for ${i}, cleaning up...`),ut(_=>{const j={..._};return delete j[i],j}),ie.current[i]&&delete ie.current[i],Ne(!1)):h.iceConnectionState==="connected"?(console.log(`‚úÖ [WebRTC] ICE connected with ${i}`),Ne(!1),setTimeout(async()=>{try{(await h.getStats()).forEach(j=>{if(j.type==="candidate-pair"&&j.state==="succeeded"){const w=j.currentRoundTripTime*1e3;console.log(`üìä [Bandwidth] ${i} RTT: ${w.toFixed(0)}ms`),w>500?(console.warn(`‚ö†Ô∏è [Bandwidth] High latency detected (${w.toFixed(0)}ms), reducing video quality to LOW`),Bt(h,"low")):w>300?(console.warn(`‚ö†Ô∏è [Bandwidth] Medium latency detected (${w.toFixed(0)}ms), reducing video quality to MEDIUM`),Bt(h,"medium")):(console.log(`‚úÖ [Bandwidth] Good connection (${w.toFixed(0)}ms), using HIGH quality`),Bt(h,"high"))}})}catch(_){console.warn("[Bandwidth] Failed to get stats:",_)}},2e3)):h.iceConnectionState==="checking"&&console.log(`üîç [WebRTC] ICE checking with ${i}`)},h},[Pe,Ut]),Ct=o.useCallback(async i=>{if(i.type==="kicked"){console.warn("üî¥ [Voice] Kicked from channel:",i.reason,i.message),$.warning(`Sesli Kanaldan √áƒ±karƒ±ldƒ±nƒ±z

Neden: ${i.message}`,5e3),at();return}if(i.type==="video_ended"){const b=i.from||i.username,S=i.streamType||"camera",R=`${b}_${S}`;console.log(`üìπ [Video] ${b} ended ${S} stream`),ut(M=>{const q={...M};return q[R]&&(q[R].getTracks().forEach(se=>se.stop()),delete q[R],console.log(`üìπ [Video] Cleaned up ${R} stream`)),q});return}if(i.type==="voice_reaction"){const b=i.from||i.username;console.log(`üí¨ [Reaction] ${b} sent: ${i.emoji}`),Qt({username:b,emoji:i.emoji,timestamp:Date.now()}),setTimeout(()=>{Qt(S=>S&&S.timestamp===Date.now()?null:S)},3e3);return}if(i.type==="game_signal"){const b=i.from||i.username;console.log(`üéÆ [Game] ${b}:`,i.action,i.move),ve(S=>{const R={...S};if(i.action==="start")R.gameType=i.game_type,R.players=[b,i.target].filter(Boolean),R.moves={},R.result=null,R.currentTurn=b;else if(i.action==="move"){if(R.moves={...S.moves,[b]:i.move},i.game_type==="rps"&&Object.keys(R.moves).length===2){const[M,q]=Object.keys(R.moves),se=R.moves[M],pe=R.moves[q];se===pe?R.result={winner:null,type:"draw"}:{rock:"scissors",scissors:"paper",paper:"rock"}[se]===pe?R.result={winner:M,loser:q}:R.result={winner:q,loser:M}}}else i.action==="end"&&(R.result=i.result||{type:"cancelled"});return R});return}if(i.type==="cinema_sync"){const b=i.from||i.username;console.log(`üé¨ [Cinema] ${b}:`,i.action),Zo(S=>({...S,isActive:i.action!=="stop",url:i.url||S.url,playing:i.action==="play",time:i.time||S.time,lastSyncAction:i.action,timestamp:Date.now(),syncedBy:b}));return}if(i.type==="current_users"){console.log("[Voice] Received current users from backend:",i.users),d(b=>{const S=i.users||[],R=S.some(se=>se.username===u),M=b.find(se=>se.username===u);let q=[...S];return!R&&M?(console.log("[Voice] Backend list missing me, adding from local state"),q=[M,...S]):!R&&u&&(console.log("[Voice] Backend list missing me, adding with defaults"),q=[{username:u,isMuted:H,isCameraOn:K,isScreenSharing:B,isTalking:Y},...S]),console.log("‚úÖ [Voice] Final connected users:",q.map(se=>se.username)),q});return}const p=i.from||i.sender_username||i.username,{type:h,sdp:_,candidate:j}=i;if(!p){console.error("[Signal] No sender username found in message:",i);return}if(p===u){console.log(`[Signal] Ignoring ${h} from self (${p})`);return}console.log(`[Signal] Received ${h} from ${p}`,i);let w=ie.current[p];if(!w)if(h==="offer")w=Nt(p,!1);else if(h==="user_joined"){if(d(b=>b.find(S=>S.username===p)?b:[...b,{username:p,isMuted:!1,isCameraOn:!1,isScreenSharing:!1}]),w=Nt(p,!0),console.log(`[user_joined] Checking streams for ${p}:`,{hasAudio:!!U.current,hasCamera:!!ke.current,hasScreen:!!ne.current,cameraEnabled:K,screenEnabled:B}),U.current){const b=w.getSenders();U.current.getTracks().forEach(S=>{b.some(M=>M.track===S)||(Ae.webrtc(`Adding audio track to new peer ${p}:`,S.kind),w.addTrack(S,U.current))}),console.log(`‚úÖ [user_joined] Audio track added to ${p}`)}if(ke.current){const b=w.getSenders();ke.current.getTracks().forEach(S=>{b.some(M=>M.track===S)||(Ae.webrtc(`Adding camera track to new peer ${p}:`,S.kind),w.addTrack(S,ke.current))}),console.log(`‚úÖ [user_joined] Camera track added to ${p}`)}if(ne.current){const b=w.getSenders();ne.current.getTracks().forEach(S=>{b.some(M=>M.track===S)||(Ae.webrtc(`Adding screen track to new peer ${p}:`,S.kind),w.addTrack(S,ne.current))}),console.log(`‚úÖ [user_joined] Screen track added to ${p}`)}try{const b=await w.createOffer();await w.setLocalDescription(b),Pe({type:"offer",sdp:w.localDescription,target:p}),Ae.signal(`Sent offer to ${p}`),console.log(`‚úÖ [user_joined] Offer successfully sent to ${p}`)}catch(b){Ae.error("Offer creation failed",b),console.error(`‚ùå [user_joined] Failed to create/send offer to ${p}:`,b)}return}else if(h==="user_left"){console.log(`[Signal] ${p} left the channel`),d(S=>S.filter(R=>R.username!==p));const b=document.getElementById(`remote-audio-${p}`);b&&(b.pause(),b.srcObject=null,b.remove(),console.log(`üîä [Audio] Removed audio element for ${p}`)),ut(S=>{const R={...S};return delete R[p],delete R[`${p}_camera`],delete R[`${p}_screen`],R}),ie.current[p]&&(ie.current[p].close(),delete ie.current[p]);return}else if(h==="stream_update"){if(console.log(`[Signal] ${p} stream update:`,i),d(b=>b.map(S=>S.username===p?{...S,isCameraOn:i.streamType==="camera"?i.enabled:S.isCameraOn,isScreenSharing:i.streamType==="screen"?i.enabled:S.isScreenSharing}:S)),i.enabled&&!ie.current[p]){console.log(`[stream_update] Creating PC for ${p} due to ${i.streamType} stream`);const b=Nt(p,!0);U.current&&U.current.getTracks().forEach(S=>{Ae.webrtc(`Adding audio track to ${p}:`,S.kind),b.addTrack(S,U.current)}),ke.current&&ke.current.getTracks().forEach(S=>{Ae.webrtc(`Adding camera track to ${p}:`,S.kind),b.addTrack(S,ke.current)}),ne.current&&ne.current.getTracks().forEach(S=>{Ae.webrtc(`Adding screen track to ${p}:`,S.kind),b.addTrack(S,ne.current)});try{const S=await b.createOffer();await b.setLocalDescription(S),Pe({type:"offer",sdp:b.localDescription,target:p}),Ae.signal(`Sent offer to ${p} after stream_update`)}catch(S){Ae.error(`Failed to create offer for ${p}:`,S)}}return}else{console.warn(`[Signal] Ignored ${h} from ${p} (No PC)`);return}try{if(h==="offer"){if(w.signalingState!=="stable"){console.warn(`[Signal] Ignoring offer from ${p}, already in state: ${w.signalingState}`);return}await w.setRemoteDescription(new RTCSessionDescription(_));const b=await w.createAnswer();if(await w.setLocalDescription(b),Pe({type:"answer",sdp:w.localDescription,target:p}),console.log(`[Signal] Sent answer to ${p}`),Ie.current[p]){console.log(`[Signal] Processing ${Ie.current[p].length} buffered candidates for ${p}`);for(const S of Ie.current[p])try{await w.addIceCandidate(S)}catch(R){console.warn("[Signal] Failed to add buffered candidate:",R)}delete Ie.current[p]}}else if(h==="answer"){if(w.signalingState!=="have-local-offer"){console.warn(`[WebRTC] Error handling answer from ${p}: InvalidStateError: Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': Failed to set remote answer sdp: Called in wrong state: ${w.signalingState}`);return}if(await w.setRemoteDescription(new RTCSessionDescription(_)),console.log(`[Signal] Set remote description from ${p}`),Ie.current[p]){console.log(`[Signal] Processing ${Ie.current[p].length} buffered candidates for ${p}`);for(const b of Ie.current[p])try{await w.addIceCandidate(b)}catch(S){console.warn("[Signal] Failed to add buffered candidate:",S)}delete Ie.current[p]}}else h==="candidate"&&(w.remoteDescription?(await w.addIceCandidate(new RTCIceCandidate(j)),console.log(`[Signal] Added ICE candidate from ${p}`)):(console.log(`[Signal] Buffering ICE candidate from ${p} (no remote description yet)`),Ie.current[p]||(Ie.current[p]=[]),Ie.current[p].push(new RTCIceCandidate(j))))}catch(b){console.error(`[WebRTC] Error handling ${h} from ${p}:`,b)}},[u,Nt,Pe]),at=o.useCallback(()=>{if(Fe.current){console.log("[Voice] Already leaving, skipping...");return}if(Fe.current=!0,console.log("[Voice] Leaving voice room..."),F.current&&F.current.readyState===WebSocket.OPEN)try{F.current.send(JSON.stringify({type:"user_leaving",sender_username:u}))}catch(i){console.warn("[Voice] Failed to send leave signal:",i)}U.current&&(U.current.getTracks().forEach(i=>{i.stop(),console.log(`[Voice] Stopped track: ${i.kind}`)}),Se(null),U.current=null),Ue&&(Ue.getTracks().forEach(i=>{i.stop(),console.log(`[Voice] Stopped camera track: ${i.kind}`)}),Me(null),V(!1)),vt&&(vt.getTracks().forEach(i=>{i.stop(),console.log(`[Voice] Stopped screen track: ${i.kind}`)}),Ke(null),G(!1)),Object.entries(ie.current).forEach(([i,p])=>{console.log(`[Voice] Closing PC for ${i}`),p.close()}),ie.current={},ut({}),Ie.current={},F.current&&(F.current.onclose=null,F.current.close(),F.current=null),m(!1),D(null),E(!1),O(!1),Z(!1),re&&(console.log("[Voice] Stopping recording on leave"),rt.current&&rt.current.state!=="inactive"&&rt.current.stop(),nt.current&&(clearInterval(nt.current),nt.current=null),X(!1),fe(0)),qe.current&&(clearInterval(qe.current),qe.current=null),ot.current&&(clearTimeout(ot.current),ot.current=null,console.log("[Voice] Cleared pending WebSocket reconnect")),ro.current&&(clearInterval(ro.current),ro.current=null),pt(0),kt(1e3),Ne(!1),setTimeout(()=>{Fe.current=!1},100)},[u,Ue,vt,re]),it=o.useCallback(async i=>{if(c&&T&&T!==i&&!st.current&&(console.log(`[Voice] Switching from ${T} to ${i}`),st.current=!0,await new Promise(h=>{if(F.current){const _=F.current,j=_.onclose;_.onclose=w=>{j&&j(w),console.log("[Voice] Old WebSocket fully closed"),h()},_.close(1e3,"Switching channel"),F.current=null,setTimeout(h,2e3)}else h()}),Object.values(ie.current).forEach(h=>{h.close()}),ie.current={},ut({}),await new Promise(h=>setTimeout(h,150)),st.current=!1,console.log(`[Voice] Now joining ${i}`)),c&&T===i){console.log(`[Voice] Already in ${i}, skipping join`);return}if(st.current){console.log("[Voice] Currently switching channels, skipping...");return}console.log(`[Voice] Joining room: ${i}`),E(!0),D(i);try{zt&&zt.length>0&&(Vr(zt),console.log(`üîê [TURN] Using cached ICE servers (${zt.length})`));const p=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:48e3},sampleSize:{ideal:16},channelCount:{ideal:1},googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,googAudioMirroring:!1,latency:{ideal:.02}},video:!1});console.log("[Voice] üé§ Got microphone access with AGGRESSIVE noise suppression");let h=p;if(Mt)try{h=Po(p),console.log("üéöÔ∏è [Voice] Professional audio filters APPLIED")}catch(w){console.warn("‚ö†Ô∏è [Voice] Could not apply professional filters, using raw stream:",w),h=p}Se(h),U.current=h,console.log("üé§ [Voice] Stream ready with noise suppression"),console.log("üé§ [Voice] Stream tracks:",h.getAudioTracks().map(w=>({id:w.id,label:w.label,enabled:w.enabled,readyState:w.readyState,muted:w.muted}))),Ye(),qe.current||(qe.current=setInterval(async()=>{const b=U.current?.getAudioTracks()?.[0];if(!(!c||Fe.current)&&(mt.current?.state==="suspended"&&await mt.current.resume().catch(()=>{}),!b||b.readyState==="ended"||!b.enabled&&!H&&!We))try{const S=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,googEchoCancellation:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,sampleRate:48e3,channelCount:1},video:!1});Se(S),U.current=S;const R=S.getAudioTracks()[0];Object.values(ie.current).forEach(M=>{M.getSenders().filter(q=>q.track?.kind==="audio").forEach(q=>q.replaceTrack(R).catch(()=>{}))}),console.log("üîÑ [Mic Watchdog] Audio track yenilendi (basit stream)")}catch(S){console.warn("[Mic Watchdog] Mic refresh failed:",S)}},8e3));const _=`${Hr}://${Kr}/ws/voice/${i}/?token=${n}`;console.log(`[Voice] Connecting to ${_}`);const j=new WebSocket(_);F.current=j,j.onopen=()=>{console.log("üé§ [VoiceWS] Connected to room:",i),m(!0),E(!1),d(w=>w.some(S=>S.username===u)?w:(console.log("‚úÖ [Voice] Added self to connected users immediately"),[{username:u,isMuted:H,isCameraOn:K,isScreenSharing:B,isTalking:!1},...w]))},j.onmessage=w=>{try{const b=JSON.parse(w.data);console.log("[VoiceWS] Message received:",b.type||b),Ct(b)}catch(b){console.error("[VoiceWS] Parse error:",b)}},j.onerror=w=>{console.error("üé§ [VoiceWS] Error:",w),E(!1),!Fe.current&&!st.current&&console.warn("[VoiceWS] Error occurred, reconnect will be attempted on close")},j.onclose=w=>{if(console.log("üé§ [VoiceWS] Disconnected, code:",w.code,"reason:",w.reason),Fe.current||st.current){console.log("[VoiceWS] User intentionally left or switching, not reconnecting"),Ne(!1),pt(0),kt(1e3),ot.current&&(clearTimeout(ot.current),ot.current=null);return}if(w.code===1e3){console.log("[VoiceWS] Normal closure (1000), cleaning up"),at();return}if(i&&c){const S=cr+1;if(S>10){console.error("[VoiceWS] ‚ùå Max retry limit reached (10), giving up"),$.error("Sesli sohbet baƒülantƒ±sƒ± 10 denemeden sonra kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.",5e3),at(),pt(0),kt(1e3);return}const R=Math.min(To,3e4);console.warn(`[VoiceWS] üîÑ Unexpected disconnect (code: ${w.code})`),console.log(`[VoiceWS] üîÑ Reconnect attempt ${S}/10 in ${R}ms...`),Ne(!0),pt(S),ot.current&&clearTimeout(ot.current),ot.current=setTimeout(()=>{!Fe.current&&!st.current&&i?(console.log(`[VoiceWS] ‚ö° Executing reconnect attempt ${S} to ${i}`),kt(M=>Math.min(M*2,3e4)),it(i).then(()=>{console.log("[VoiceWS] ‚úÖ Reconnection successful! Resetting retry counters."),pt(0),kt(1e3),Ne(!1)}).catch(M=>{console.error("[VoiceWS] Reconnection failed:",M)})):(console.log("[VoiceWS] Reconnect cancelled (user left or room changed)"),Ne(!1),pt(0),kt(1e3))},R)}else console.log("[VoiceWS] Not in voice or no room, cleaning up"),at()}}catch(p){console.error("Voice Join Error:",p),E(!1),st.current=!1,p.name==="NotAllowedError"?$.warning("Mikrofon izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan izin verin.",5e3):p.name==="NotFoundError"?$.warning("Mikrofon bulunamadƒ±. L√ºtfen bir mikrofon baƒülayƒ±n."):$.error("Sesli sohbete baƒülanƒ±lamadƒ±: "+p.message)}},[c,T,n,Ct,Ye,at]),dn=o.useCallback(()=>{O(i=>{const p=!i;return U.current&&U.current.getAudioTracks().forEach(h=>{h.enabled=!p}),F.current?.readyState===WebSocket.OPEN&&F.current.send(JSON.stringify({type:"mic_off_state",is_mic_off:p})),console.log(`[Voice] Mute: ${p}`),p})},[]),fr=o.useCallback(()=>{Z(i=>{const p=!i;return F.current?.readyState===WebSocket.OPEN&&F.current.send(JSON.stringify({type:"deaf_state",is_deafened:p})),console.log(`[Voice] Deafened: ${p}`),p})},[]),so=o.useRef(!1),Io=o.useCallback(async()=>{if(so.current){console.log("[Camera] Toggle already in progress, skipping...");return}so.current=!0;try{const i=ke.current;if(i){console.log("[Camera] Stopping camera stream"),V(!1),Me(null),ke.current=null,i.getTracks().forEach(h=>{h.stop(),console.log(`[Camera] Stopped ${h.kind} track`)});const p=[];for(const[h,_]of Object.entries(ie.current)){const j=_.getSenders();let w=!1;for(const b of j)if(b.track&&b.track.kind==="video"&&b.track.contentHint!=="detail")try{_.removeTrack(b),w=!0,console.log(`[Camera] Removed video track from peer: ${h}`)}catch(S){console.warn(`[Camera] Failed to remove track from ${h}:`,S)}if(w){const b=(async()=>{try{const S=await _.createOffer();await _.setLocalDescription(S),Pe({type:"offer",sdp:_.localDescription,target:h}),console.log(`[Camera] Sent renegotiation offer to ${h} after removal`)}catch(S){console.warn(`[Camera] Renegotiation failed with ${h}:`,S)}})();p.push(b)}}F.current?.readyState===WebSocket.OPEN&&(F.current.send(JSON.stringify({type:"camera_state",is_camera_on:!1})),F.current.send(JSON.stringify({type:"video_ended",streamType:"camera"})),console.log("[Camera] Sent video_ended signal")),Promise.all(p).catch(h=>console.warn("[Camera] Some renegotiations failed:",h))}else{console.log("[Camera] Starting camera stream");const p=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}});if(!so.current){console.log("[Camera] Toggle was cancelled, stopping new stream"),p.getTracks().forEach(j=>j.stop());return}console.log("[Camera] Got camera stream:",p.id),ke.current=p,Me(p),V(!0);const h=p.getVideoTracks()[0];h.onended=()=>{console.log("[Camera] Track ended by browser/system"),Me(null),ke.current=null,V(!1),F.current?.readyState===WebSocket.OPEN&&F.current.send(JSON.stringify({type:"video_ended",streamType:"camera"}))};try{h.contentHint="motion"}catch(j){console.warn("[Camera] contentHint not supported:",j)}const _=[];for(const[j,w]of Object.entries(ie.current)){const b=(async()=>{try{w.addTrack(h,p),console.log(`[Camera] Added video track to peer: ${j}`);const S=await w.createOffer();await w.setLocalDescription(S),Pe({type:"offer",sdp:w.localDescription,target:j}),console.log(`[Camera] Sent renegotiation offer to ${j}`)}catch(S){console.warn(`[Camera] Failed to add/renegotiate with ${j}:`,S)}})();_.push(b)}F.current?.readyState===WebSocket.OPEN&&(F.current.send(JSON.stringify({type:"camera_state",is_camera_on:!0})),console.log("[Camera] State sent to backend: is_camera_on=true")),Promise.all(_).catch(j=>console.warn("[Camera] Some track additions failed:",j))}}catch(i){console.error("[Camera] Error:",i),i.name==="NotAllowedError"?$.warning("Kamera izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan kamera iznini a√ßƒ±n.",5e3):i.name==="NotFoundError"?$.warning("Kamera bulunamadƒ±. L√ºtfen bir kamera baƒülayƒ±n."):$.error("Kamera ba≈ülatƒ±lamadƒ±: "+i.message),V(!1),ke.current=null,Me(null)}finally{setTimeout(()=>{so.current=!1},300)}},[Pe]),un=Io,Ft=o.useRef(!1),fn=o.useCallback(async()=>{if(Ft.current){console.log("[Screen] Toggle already in progress, skipping...");return}Ft.current=!0;try{const i=ne.current;if(i){console.log("[Screen] Stopping screen share"),G(!1),Ke(null),ne.current=null,i.getTracks().forEach(h=>{h.stop(),console.log(`[Screen] Stopped ${h.kind} track`)});const p=[];for(const[h,_]of Object.entries(ie.current)){const j=_.getSenders();let w=!1;for(const b of j)if(b.track&&b.track.contentHint==="detail")try{_.removeTrack(b),w=!0,console.log(`[Screen] Removed screen track from peer: ${h}`)}catch(S){console.warn(`[Screen] Failed to remove track from ${h}:`,S)}if(w){const b=(async()=>{try{const S=await _.createOffer();await _.setLocalDescription(S),Pe({type:"offer",sdp:_.localDescription,target:h}),console.log(`[Screen] Sent renegotiation offer to ${h} after removal`)}catch(S){console.warn(`[Screen] Renegotiation failed with ${h}:`,S)}})();p.push(b)}}F.current?.readyState===WebSocket.OPEN&&(F.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),F.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})),console.log("[Screen] Sent video_ended signal")),Promise.all(p).catch(h=>console.warn("[Screen] Some renegotiations failed:",h))}else{console.log("[Screen] Starting screen share");const p={"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"4K":{width:3840,height:2160}},h=p[ge]||p["1080p"];console.log(`üé¨ [Screen] Quality: ${ge}, FPS: ${to}`);const _=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",displaySurface:"monitor",width:{ideal:h.width},height:{ideal:h.height},frameRate:{ideal:to}},audio:Co});if(!Ft.current){console.log("[Screen] Toggle was cancelled, stopping new stream"),_.getTracks().forEach(b=>b.stop());return}console.log("[Screen] Got screen stream:",_.id),_.getVideoTracks()[0].onended=()=>{console.log("[Screen] User stopped sharing via browser"),Ke(null),ne.current=null,G(!1),F.current?.readyState===WebSocket.OPEN&&(F.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),F.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})))},ne.current=_,Ke(_),G(!0);const j=_.getVideoTracks()[0];try{j.contentHint="detail"}catch(b){console.warn("[Screen] contentHint not supported:",b)}const w=[];for(const[b,S]of Object.entries(ie.current)){const R=(async()=>{try{S.addTrack(j,_),console.log(`[Screen] Added screen track to peer: ${b}`);const M=await S.createOffer();await S.setLocalDescription(M),Pe({type:"offer",sdp:S.localDescription,target:b}),console.log(`[Screen] Sent renegotiation offer to ${b}`)}catch(M){console.error(`[Screen] Failed to add track to ${b}:`,M.message)}})();w.push(R)}F.current?.readyState===WebSocket.OPEN&&F.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!0})),Promise.all(w).catch(b=>console.warn("[Screen] Some track additions failed:",b))}}catch(i){console.error("[Screen] Error:",i),i.name==="NotAllowedError"?console.log("[Screen] User cancelled screen share"):i.name==="NotFoundError"?$.warning("Ekran payla≈üƒ±mƒ± desteklenmiyor."):$.error("Ekran payla≈üƒ±mƒ± ba≈ülatƒ±lamadƒ±: "+i.message),G(!1),ne.current=null,Ke(null)}finally{setTimeout(()=>{Ft.current=!1},300)}},[Pe,ge,to,Co]),Lo=o.useCallback(()=>{if(!c||re){console.warn("[Recording] Cannot start - not in voice or already recording");return}try{const i=new(window.AudioContext||window.webkitAudioContext),p=i.createMediaStreamDestination();ee&&i.createMediaStreamSource(ee).connect(p),Object.entries(Ee).forEach(([_,j])=>{!_.includes("_camera")&&!_.includes("_screen")&&j.getAudioTracks().length>0&&i.createMediaStreamSource(j).connect(p)});const h=new MediaRecorder(p.stream,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});ht.current=[],h.ondataavailable=_=>{_.data.size>0&&ht.current.push(_.data)},h.onstop=()=>{const _=new Blob(ht.current,{type:"audio/webm"}),j=URL.createObjectURL(_),w=document.createElement("a");w.href=j,w.download=`pawscord-voice-${T}-${Date.now()}.webm`,w.click(),URL.revokeObjectURL(j),console.log("‚úÖ [Recording] Saved recording")},h.start(1e3),rt.current=h,X(!0),fe(0),nt.current=setInterval(()=>{fe(_=>_+1)},1e3),console.log("üî¥ [Recording] Started")}catch(i){console.error("[Recording] Start error:",i),$.error("Kayƒ±t ba≈ülatƒ±lamadƒ±: "+i.message)}},[c,re,ee,Ee,T]),Oo=o.useCallback(()=>{re&&(rt.current&&rt.current.state!=="inactive"&&rt.current.stop(),nt.current&&(clearInterval(nt.current),nt.current=null),rt.current=null,X(!1),fe(0),console.log("‚èπÔ∏è [Recording] Stopped"))},[re]),pr=o.useCallback(()=>{if(ht.current.length===0){$.warning("Hen√ºz kayƒ±t yok!");return}const i=new Blob(ht.current,{type:"audio/webm"}),p=URL.createObjectURL(i),h=document.createElement("a");h.href=p,h.download=`pawscord-voice-${T||"recording"}-${Date.now()}.webm`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(p),console.log("üíæ [Recording] Downloaded manually")},[T]),pn=o.useCallback(async(i,p=50)=>{if(!ee||!c){console.warn("[VoiceEffect] No stream or not in voice");return}try{if(Vt.current&&(Vt.current.forEach(S=>{try{S.disconnect()}catch{}}),Vt.current=null),!i){he(null),console.log("üéµ [VoiceEffect] Cleared");return}const h=_e.current||new AudioContext;_e.current||(_e.current=h);const _=h.createMediaStreamSource(ee),j=h.createMediaStreamDestination(),w=[],b=p/100;switch(i){case"robot":{const S=h.createOscillator(),R=h.createGain(),M=h.createWaveShaper();S.type="sawtooth",S.frequency.value=50+b*100,R.gain.value=.3+b*.4;const q=new Float32Array(256);for(let se=0;se<256;se++){const pe=se/128-1;q[se]=Math.tanh(pe*(1+b*3))}M.curve=q,S.connect(R),_.connect(M),M.connect(j),S.start(),w.push(S,R,M);break}case"echo":{const S=h.createDelay(1),R=h.createGain(),M=h.createGain(),q=h.createGain();S.delayTime.value=.1+b*.4,R.gain.value=.2+b*.5,M.gain.value=.3+b*.4,q.gain.value=1-b*.3,_.connect(q),_.connect(S),S.connect(R),R.connect(S),S.connect(M),q.connect(j),M.connect(j),w.push(S,R,M,q);break}case"deep":{const S=h.createBiquadFilter(),R=h.createGain();S.type="lowshelf",S.frequency.value=500,S.gain.value=10+b*15,R.gain.value=1.2,_.connect(S),S.connect(R),R.connect(j),w.push(S,R);break}case"high":{const S=h.createBiquadFilter(),R=h.createGain();S.type="highshelf",S.frequency.value=1e3,S.gain.value=8+b*12,R.gain.value=.9,_.connect(S),S.connect(R),R.connect(j),w.push(S,R);break}case"radio":{const S=h.createBiquadFilter(),R=h.createBiquadFilter(),M=h.createWaveShaper();S.type="lowpass",S.frequency.value=3e3-b*1e3,R.type="highpass",R.frequency.value=300+b*200;const q=new Float32Array(256);for(let se=0;se<256;se++){const pe=se/128-1;q[se]=Math.sign(pe)*Math.pow(Math.abs(pe),.8)}M.curve=q,_.connect(R),R.connect(S),S.connect(M),M.connect(j),w.push(S,R,M);break}case"reverb":{const S=h.createConvolver(),R=h.createGain(),M=h.createGain(),q=h.sampleRate,se=q*(.5+b*2),pe=h.createBuffer(2,se,q);for(let $e=0;$e<2;$e++){const gt=pe.getChannelData($e);for(let Ze=0;Ze<se;Ze++)gt[Ze]=(Math.random()*2-1)*Math.pow(1-Ze/se,2)}S.buffer=pe,R.gain.value=.3+b*.5,M.gain.value=1-b*.2,_.connect(M),_.connect(S),S.connect(R),M.connect(j),R.connect(j),w.push(S,R,M);break}default:_.connect(j)}Vt.current=w,Ro.current=j.stream,he(i),Be(p),console.log(`üéµ [VoiceEffect] Applied: ${i} at ${p}%`)}catch(h){console.error("[VoiceEffect] Error:",h),$.error("Ses efekti uygulanamadƒ±")}},[ee,c]),mr=o.useCallback(i=>{if(!F.current||F.current.readyState!==WebSocket.OPEN){console.warn("[Reaction] WebSocket not connected");return}F.current.send(JSON.stringify({type:"voice_reaction",emoji:i})),console.log(`üí¨ [Reaction] Sent: ${i}`)},[]),ts=o.useCallback((i,p,h=null,_=null)=>{if(!F.current||F.current.readyState!==WebSocket.OPEN){console.warn("[Game] WebSocket not connected");return}F.current.send(JSON.stringify({type:"game_signal",game_type:i,action:p,move:h,target:_})),console.log(`üéÆ [Game] Sent: ${i} - ${p}`,h)},[]),mn=o.useCallback((i,p=0,h=null)=>{if(!F.current||F.current.readyState!==WebSocket.OPEN){console.warn("[Cinema] WebSocket not connected");return}F.current.send(JSON.stringify({type:"cinema_sync",action:i,time:p,url:h})),console.log(`üé¨ [Cinema] Sent: ${i}`,{time:p,url:h})},[]),hn=o.useCallback(()=>{Ce.current||(Ce.current=setInterval(async()=>{const i={};for(const[p,h]of Object.entries(ie.current))try{const _=await h.getStats();let j=null,w=null;_.forEach(b=>{b.type==="inbound-rtp"&&b.kind==="audio"&&(j={packetsReceived:b.packetsReceived,packetsLost:b.packetsLost,jitter:b.jitter,bytesReceived:b.bytesReceived}),b.type==="inbound-rtp"&&b.kind==="video"&&(w={packetsReceived:b.packetsReceived,packetsLost:b.packetsLost,framesDecoded:b.framesDecoded,frameWidth:b.frameWidth,frameHeight:b.frameHeight}),b.type==="candidate-pair"&&b.state==="succeeded"&&(i[p]={...i[p],rtt:b.currentRoundTripTime*1e3,connectionType:b.localCandidateId?.includes("relay")?"TURN":"STUN/Direct"})}),i[p]={...i[p],audio:j,video:w,connectionState:h.connectionState,iceConnectionState:h.iceConnectionState}}catch(_){console.warn(`[Stats] Failed to get stats for ${p}:`,_)}Qo(i)},2e3),console.log("üìä [Stats] Monitoring started"))},[]),ao=o.useCallback(()=>{Ce.current&&(clearInterval(Ce.current),Ce.current=null,Qo({}),console.log("üìä [Stats] Monitoring stopped"))},[]),hr=o.useCallback(i=>{Xr(i),localStorage.setItem("pawscord_noise_gate_enabled",i.toString()),console.log(`üéöÔ∏è [Noise Gate] ${i?"ENABLED":"DISABLED"}`)},[]),Do=o.useCallback(i=>{const p=Math.max(-80,Math.min(-20,i));Jr(p),localStorage.setItem("pawscord_noise_gate",p.toString()),console.log(`üéöÔ∏è [Noise Gate] Threshold: ${p}dB`)},[]),gn=o.useCallback(i=>{Qr(i),localStorage.setItem("pawscord_visualizer",i.toString()),console.log(`üìä [Visualizer] ${i?"ENABLED":"DISABLED"}`)},[]),jt=o.useRef(null),ct=o.useRef(null),Wt=o.useCallback(()=>{if(!(!_t||!ee)&&!jt.current)try{_e.current||(_e.current=new(window.AudioContext||window.webkitAudioContext));const i=_e.current,p=i.createAnalyser();p.fftSize=256;const h=i.createMediaStreamSource(ee);h.connect(p),ct.current={local:p,localSource:h,remote:{}},Object.entries(Ee).forEach(([_,j])=>{if(!_.includes("_camera")&&!_.includes("_screen")){const w=i.createAnalyser();w.fftSize=256;const b=i.createMediaStreamSource(j);b.connect(w),ct.current.remote[_]={analyser:w,source:b}}}),jt.current=setInterval(()=>{const _=new Uint8Array(128);ct.current.local.getByteFrequencyData(_);const j={};Object.entries(ct.current.remote).forEach(([w,{analyser:b}])=>{const S=new Uint8Array(128);b.getByteFrequencyData(S),j[w]=S}),tr({local:_,remote:j})},33),console.log("üìä [Visualizer] Started")}catch(i){console.error("[Visualizer] Failed to start:",i)}},[_t,ee,Ee]),io=o.useCallback(()=>{if(jt.current&&(clearInterval(jt.current),jt.current=null),ct.current){try{ct.current.localSource?.disconnect(),Object.values(ct.current.remote).forEach(({source:i})=>{i?.disconnect()})}catch{}ct.current=null}tr({local:new Uint8Array(128),remote:{}}),console.log("üìä [Visualizer] Stopped")},[]);return o.useEffect(()=>(c&&_t?Wt():io(),()=>io()),[c,_t,Wt,io]),o.useEffect(()=>()=>{re&&Oo(),qe.current&&(clearInterval(qe.current),qe.current=null),ao()},[re,Oo,ao]),e.jsx(Pa.Provider,{value:{isInVoice:c,isConnecting:C,currentRoom:T,isMuted:H,isDeafened:z,isVideoEnabled:K,isScreenSharing:B,isTalking:Y,isSpatialAudioEnabled:ft,vadSensitivity:Dt,isNoiseSuppressionEnabled:Mt,screenShareQuality:ge,screenShareFPS:to,isRecording:re,recordingDuration:ae,isPTTMode:We,isPTTActive:ar,pttKey:te,includeSystemAudio:Co,localStream:ee,localAudioStream:ee,localCameraStream:Ue,localScreenStream:vt,remoteStreams:Ee,connectedUsers:Jo,remoteVolumes:eo,mutedUsers:or,joinVoiceRoom:it,leaveVoiceRoom:at,joinChannel:it,leaveChannel:at,setRemoteVolume:Ao,setIsMuted:O,setIsDeafened:Z,setIsVideoEnabled:V,setIsScreenSharing:G,toggleMute:dn,toggleDeafened:fr,toggleVideo:Io,toggleCamera:un,toggleScreenShare:fn,toggleSpatialAudio:sn,updateVadSensitivity:lr,toggleNoiseSuppression:no,updateScreenQuality:Je,updateScreenFPS:ln,toggleSystemAudio:an,togglePTTMode:ur,updatePTTKey:cn,startRecording:Lo,stopRecording:Oo,downloadRecording:pr,sendSignal:Pe,isPttActive:ar,sendReaction:mr,lastReaction:_o,applyVoiceEffect:pn,activeVoiceEffect:J,voiceEffectIntensity:we,setVoiceEffectIntensity:Be,cinemaState:qr,setCinemaState:Zo,sendCinemaSync:mn,gameState:de,setGameState:ve,sendGameSignal:ts,connectionStats:Xo,startStatsMonitoring:hn,stopStatsMonitoring:ao,noiseSuppressionLevel:nr,updateNoiseSuppressionLevel:dr,iceServers:zt,isReconnecting:ir,adjustBandwidth:Bt,noiseGateThreshold:Yr,isNoiseGateEnabled:Zr,toggleNoiseGate:hr,updateNoiseGateThreshold:Do,audioVisualizerData:er,isVisualizerEnabled:_t,toggleVisualizer:gn,startVisualizer:Wt,stopVisualizer:io},children:a})},rd=()=>o.useContext(Pa),Ia=o.createContext(null),nd=({children:a})=>{const[r,n]=o.useState(!1),[u,c]=o.useState(null),[m,C]=o.useState(0),E=o.useRef(null),T=o.useRef(null),D=o.useCallback(()=>{const H=localStorage.getItem("access_token");if(!H)return;let O="Anonymous";try{O=Xt(H).username}catch(K){console.error("Token decode hatasƒ±",K)}const z=`${Hr}://${Kr}/ws/status/?username=${encodeURIComponent(O)}&token=${H}`;E.current&&E.current.close();const Z=new WebSocket(z);E.current=Z,Z.onopen=()=>{console.log("üåê [GlobalWS] Baƒülandƒ±"),n(!0)},Z.onmessage=K=>{const V=JSON.parse(K.data);c(V),V.type==="chat_message_handler"&&V.username==="‚ö° Signal Bot"&&(Notification.permission==="granted"&&document.hidden&&new Notification("üö® YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞!",{body:`${V.content.split(`
`)[2]}`,icon:"/logo192.png"}),C(B=>B+1))},Z.onclose=K=>{console.log("üåê [GlobalWS] Kapandƒ±",K.code),n(!1),clearTimeout(T.current),T.current=setTimeout(D,5e3)},Z.onerror=K=>{console.error("üåê [GlobalWS] Hata",K),Z.close()}},[Kr,Hr]);return o.useEffect(()=>{const H=setTimeout(()=>{D()},2e3);return()=>{clearTimeout(H),E.current&&E.current.close(),clearTimeout(T.current)}},[D]),e.jsx(Ia.Provider,{value:{isConnected:r,globalData:u,unreadGlobal:m,setUnreadGlobal:C},children:a})},La=()=>o.useContext(Ia),sd=({message:a,endTime:r,level:n="info",onDismiss:u})=>{const[c,m]=o.useState("");o.useEffect(()=>{if(!r)return;const T=()=>{const H=new Date,z=new Date(r)-H;if(z<=0){m("Ending soon..."),setTimeout(()=>window.location.reload(),5e3);return}const Z=Math.floor(z/(1e3*60*60)),K=Math.floor(z%(1e3*60*60)/(1e3*60));m(`${Z}h ${K}m remaining`)};T();const D=setInterval(T,6e4);return()=>clearInterval(D)},[r]);const C={info:{bg:"rgba(88, 101, 242, 0.1)",border:"#5865f2",text:"#5865f2"},warning:{bg:"rgba(250, 166, 26, 0.1)",border:"#faa61a",text:"#faa61a"},critical:{bg:"rgba(240, 71, 71, 0.1)",border:"#f04747",text:"#f04747"}},E=C[n]||C.info;return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:E.bg,borderBottom:`2px solid ${E.border}`,padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:9999,animation:"slideDown 0.3s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Bc,{style:{color:E.text,fontSize:"18px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{color:E.text,fontWeight:"bold"},children:n==="critical"?"üö® Critical Maintenance":n==="warning"?"‚ö†Ô∏è Scheduled Maintenance":"‚ÑπÔ∏è Maintenance Notice"}),e.jsxs("div",{style:{color:"#dcddde",fontSize:"14px",marginTop:"2px"},children:[a,c&&e.jsxs("span",{style:{marginLeft:"10px",opacity:.7},children:["(",c,")"]})]})]})]}),u&&e.jsx("button",{onClick:u,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:T=>T.target.style.background="rgba(255,255,255,0.1)",onMouseLeave:T=>T.target.style.background="none",children:e.jsx(Ko,{})})]})},et=({size:a="medium",text:r="Y√ºkleniyor...",fullscreen:n=!1})=>{const u={small:{spinner:24,text:"12px"},medium:{spinner:40,text:"14px"},large:{spinner:60,text:"16px"}},c=u[a]||u.medium,m=n?yo.fullscreenContainer:yo.inlineContainer;return e.jsxs("div",{style:m,children:[e.jsxs("div",{style:{...yo.spinnerWrapper,width:c.spinner,height:c.spinner},children:[e.jsx("div",{style:yo.spinnerOuter}),e.jsx("div",{style:yo.spinnerInner})]}),r&&e.jsx("div",{style:{...yo.loadingText,fontSize:c.text},children:r})]})},yo={fullscreenContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#36393f",zIndex:9999,gap:"16px"},inlineContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px",minHeight:"100px"},spinnerWrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},spinnerOuter:{position:"absolute",width:"100%",height:"100%",border:"3px solid rgba(88, 101, 242, 0.2)",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite"},spinnerInner:{position:"absolute",width:"70%",height:"70%",border:"3px solid rgba(88, 101, 242, 0.1)",borderBottom:"3px solid #7289da",borderRadius:"50%",animation:"spin 0.7s linear infinite reverse"},loadingText:{color:"#b5bac1",fontWeight:500,textAlign:"center",animation:"pulse 1.5s ease-in-out infinite"}};if(typeof document<"u"){const a=document.createElement("style");a.innerText=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
    `,document.head.querySelector("[data-loading-spinner-styles]")||(a.setAttribute("data-loading-spinner-styles","true"),document.head.appendChild(a))}const ad="https://media.pawscord.com",id=`${ad}/assets`,cd=`${id}/logo.png`,ld=cd,dd=()=>e.jsxs("svg",{className:"splash-logo",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("ellipse",{cx:"50",cy:"62",rx:"22",ry:"18",fill:"white"}),e.jsx("ellipse",{cx:"28",cy:"38",rx:"10",ry:"12",fill:"white"}),e.jsx("ellipse",{cx:"72",cy:"38",rx:"10",ry:"12",fill:"white"}),e.jsx("ellipse",{cx:"22",cy:"55",rx:"8",ry:"10",fill:"white"}),e.jsx("ellipse",{cx:"78",cy:"55",rx:"8",ry:"10",fill:"white"})]}),ud=()=>{const[a,r]=o.useState(!1);return a?e.jsx(dd,{}):e.jsx("img",{src:ld,alt:"Pawscord",className:"splash-logo",onError:()=>r(!0)})},fd=({animationState:a})=>e.jsxs("div",{className:`splash-screen ${a}`,children:[e.jsx("div",{className:"particles",children:[...Array(15)].map((r,n)=>e.jsx("div",{className:"particle",style:{"--delay":`${Math.random()*2}s`,"--x":`${Math.random()*100}%`,"--size":`${4+Math.random()*8}px`,"--duration":`${2+Math.random()*3}s`}},n))}),e.jsxs("div",{className:"rings-container",children:[e.jsx("div",{className:"ring ring-1"}),e.jsx("div",{className:"ring ring-2"}),e.jsx("div",{className:"ring ring-3"})]}),e.jsxs("div",{className:"logo-container",children:[e.jsx("div",{className:"logo-glow"}),e.jsx(ud,{})]}),e.jsxs("div",{className:"brand-text",children:[e.jsx("span",{className:"letter",style:{"--i":0},children:"P"}),e.jsx("span",{className:"letter",style:{"--i":1},children:"A"}),e.jsx("span",{className:"letter",style:{"--i":2},children:"W"}),e.jsx("span",{className:"letter",style:{"--i":3},children:"S"}),e.jsx("span",{className:"letter",style:{"--i":4},children:"C"}),e.jsx("span",{className:"letter",style:{"--i":5},children:"O"}),e.jsx("span",{className:"letter",style:{"--i":6},children:"R"}),e.jsx("span",{className:"letter",style:{"--i":7},children:"D"})]}),e.jsx("div",{className:"loading-bar",children:e.jsx("div",{className:"loading-progress"})})]}),ua=y.memo(fd),fa=y.lazy(()=>x(()=>import("./Message-D0vPH4h7.js"),__vite__mapDeps([23,1,2,3,6,24,25,26,27,9,4,5,7]))),pd=y.lazy(()=>x(()=>import("./VirtualMessageList-m7v7uZVG.js"),__vite__mapDeps([28,2,3,27,9]))),md=y.lazy(()=>x(()=>import("./MessageInput-Di7k3Bnz.js"),__vite__mapDeps([29,1,2,3,6,22,30,4,5,7,31]))),Br=y.lazy(()=>x(()=>import("./UserVideoContainer-BpCnUF6m.js"),__vite__mapDeps([32,2,3]))),hd=y.lazy(()=>x(()=>import("./VoiceAudioController-D5ayCxfN.js"),__vite__mapDeps([33,2,3,1,4,5,6,7])));y.lazy(()=>x(()=>import("./RichTextEditor-DRBnQmlN.js"),__vite__mapDeps([34,2,3,6,35])));const gd=y.lazy(()=>x(()=>import("./StickyMessageBanner-DG9Htw8v.js"),__vite__mapDeps([36,2,3,6]))),yd=y.lazy(()=>x(()=>import("./LoginPage-TmCh1DIz.js"),__vite__mapDeps([37,2,3,6,38,5,1,4,7]))),xd=y.lazy(()=>x(()=>import("./WelcomeScreen-CmOgIbc4.js"),__vite__mapDeps([39,2,3,6,40,1,4,5,7]))),Sd=y.lazy(()=>x(()=>import("./ImageModal-kweEZmfU.js"),__vite__mapDeps([13,2,3]))),bd=y.lazy(()=>x(()=>import("./UserProfileModal-bErBfAA5.js"),__vite__mapDeps([12,2,3,6,1,4,5,7]))),wd=y.lazy(()=>x(()=>import("./PollCreateModal-DE_LwfDI.js"),__vite__mapDeps([20,2,3,6]))),vd=y.lazy(()=>x(()=>import("./CodeSnippetModal-DsKQVajo.js"),__vite__mapDeps([21,2,3,6])));y.lazy(()=>x(()=>import("./AvatarCropper-BDSPZ6HC.js"),__vite__mapDeps([41,2,3,42])));const _d=y.lazy(()=>x(()=>import("./CryptoChartModal-DZvqxtuk.js"),__vite__mapDeps([43,2,3,6])));y.lazy(()=>x(()=>import("./CryptoStoreModal-Xd1HafvC.js"),__vite__mapDeps([44,2,3,6,1,4,5,7])));const kd=y.lazy(()=>x(()=>import("./PremiumStoreModal-2xz1Dwyt.js"),__vite__mapDeps([45,2,3,6,1,4,5,7]))),Cd=y.lazy(()=>x(()=>import("./WhiteboardModal-42-zGmrN.js"),__vite__mapDeps([19,2,3,6]))),jd=y.lazy(()=>x(()=>import("./SoundboardModal-BQfmIZDD.js"),__vite__mapDeps([16,2,3,6]))),Td=y.lazy(()=>x(()=>import("./KanbanBoard-5RltDMgc.js"),__vite__mapDeps([46,2,3,9,6]))),pa=y.lazy(()=>x(()=>import("./SummaryModal-CnoGfHmk.js"),__vite__mapDeps([47,2,3,6]))),Ed=y.lazy(()=>x(()=>import("./MessageTemplateModal-Cq83XQfP.js"),__vite__mapDeps([22,2,3,6]))),Rd=y.lazy(()=>x(()=>import("./CinemaModal-DNPCk8d2.js"),__vite__mapDeps([18,1,2,3,6]))),Ad=y.lazy(()=>x(()=>import("./StickerPicker-Boa1KBkF.js"),__vite__mapDeps([15,2,3]))),Pd=y.lazy(()=>x(()=>import("./GifPicker-DU3Ex2pK.js"),__vite__mapDeps([14,2,3]))),Id=y.lazy(()=>x(()=>import("./DJModal-DAfuuwm9.js"),__vite__mapDeps([48,1,2,3,6]))),Ld=y.lazy(()=>x(()=>import("./ThemeStoreModal-Csw36e1L.js"),__vite__mapDeps([49,2,3,6,1,4,5,7]))),Od=y.lazy(()=>x(()=>import("./EncryptionKeyModal-B376aOVj.js"),__vite__mapDeps([50,2,3,6]))),Dd=y.lazy(()=>x(()=>import("./DownloadModal-BRWKNkHV.js"),__vite__mapDeps([40,2,3,6,1,4,5,7]))),Md=y.lazy(()=>x(()=>import("./ServerSettingsModal-DtD0QS51.js"),__vite__mapDeps([8,2,3,6,9,10,11,1,4,5,7]))),$d=y.lazy(()=>x(()=>import("./CreateGroupModal-etgwLcuG.js"),__vite__mapDeps([51,2,3,6,1,4,5,7]))),zd=y.lazy(()=>x(()=>import("./AdminAnalyticsPanel-BAuMVnWf.js"),__vite__mapDeps([52,2,3,6]))),Vd=y.lazy(()=>x(()=>import("./AdminPanelModal-DJs8S7Sx.js"),__vite__mapDeps([53,2,3,6,1,4,5,7]))),Bd=y.lazy(()=>x(()=>import("./WebhooksPanel-xlOEvJ2K.js"),__vite__mapDeps([54,2,3,9,1,4,5,6,7,55]))),Ud=y.lazy(()=>x(()=>import("./VanityURLManager-Bxz2rxcB.js"),__vite__mapDeps([11,2,3,6,1,4,5,7]))),Nd=y.lazy(()=>x(()=>import("./AutoModerationDashboard-BR08frSa.js"),__vite__mapDeps([56,2,3,6]))),Fd=y.lazy(()=>x(()=>import("./AutoModerationPanel-BOjPyVB6.js"),__vite__mapDeps([57,2,3,6,1,4,5,7,58]))),Wd=y.lazy(()=>x(()=>import("./RaidProtectionPanel-z7Ds-uE6.js"),__vite__mapDeps([59,2,3,6,1,4,5,7]))),Gd=y.lazy(()=>x(()=>import("./ReportSystemPanel-Bz3euzRR.js"),__vite__mapDeps([60,2,3,6,1,4,5,7]))),Hd=y.lazy(()=>x(()=>import("./AuditLogPanel-BCIpkHwY.js"),__vite__mapDeps([61,2,3,6]))),Kd=y.lazy(()=>x(()=>import("./UserWarningsPanel-BTbR5h5N.js"),__vite__mapDeps([62,2,3,6,1,4,5,7]))),qd=y.lazy(()=>x(()=>import("./BookmarkPanel-CROPg9Mf.js"),__vite__mapDeps([63,2,3,6,1,4,5,7]))),Yd=y.lazy(()=>x(()=>import("./ReadLaterPanel-nz3pUG3I.js"),__vite__mapDeps([64,2,3,6,65]))),Jd=y.lazy(()=>x(()=>import("./ChannelPermissionsPanel-B8D424zt.js"),__vite__mapDeps([66,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./MessageThreadsPanel-Bj7xSVb7.js"),__vite__mapDeps([67,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./ModeratorNotesPanel-jDBqJaQh.js"),__vite__mapDeps([68,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./ServerRolesPanel-Cekp0TnG.js"),__vite__mapDeps([69,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./NotificationPreferencesPanel-KmdbWzQ-.js"),__vite__mapDeps([70,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./MessageOCRPanel-DI4VXy92.js"),__vite__mapDeps([71,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./MassActionsPanel-BHsumetH.js"),__vite__mapDeps([72,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./TimeoutMutePanel-CjEt_vv7.js"),__vite__mapDeps([73,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./ServerThemesPanel-BfrenZdV.js"),__vite__mapDeps([74,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./KeywordMutesPanel-CqbfMF1l.js"),__vite__mapDeps([75,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./WelcomeTemplatesPanel-BbNsnu2b.js"),__vite__mapDeps([76,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./StickyMessagesPanel-Dkm7mGkJ.js"),__vite__mapDeps([77,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./MessageTemplatesPanel-CqnJXuvV.js"),__vite__mapDeps([78,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./MessageExportPanel-D0j7UkFg.js"),__vite__mapDeps([79,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./ArchivedRoomsPanel-iqU6Y8Az.js"),__vite__mapDeps([80,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./SlowModePanel-D5hs75_M.js"),__vite__mapDeps([81,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./EmojiManagementPanel-DpOIaAxq.js"),__vite__mapDeps([82,2,3,6,1,4,5,7])));const Zd=y.lazy(()=>x(()=>import("./MentionsInboxPanel-DtYVE4vn.js"),__vite__mapDeps([83,2,3,6,1,4,5,7]))),Xd=y.lazy(()=>x(()=>import("./CustomStatusModal-DptFyJR5.js"),__vite__mapDeps([84,2,3,6,1,4,5,7]))),Qd=y.lazy(()=>x(()=>import("./ReactionAnalyticsPanel-B_noZuC_.js"),__vite__mapDeps([85,2,3,6,1,4,5,7]))),eu=y.lazy(()=>x(()=>import("./LinkClickTrackingPanel-DIFuRo1W.js"),__vite__mapDeps([86,2,3,6,1,4,5,7]))),tu=y.lazy(()=>x(()=>import("./JoinLeaveLogsPanel-B86gi3SN.js"),__vite__mapDeps([87,2,3,6,1,4,5,7]))),ou=y.lazy(()=>x(()=>import("./UserActivityPanel-BIsaEp7T.js"),__vite__mapDeps([88,2,3,6,1,4,5,7]))),ru=y.lazy(()=>x(()=>import("./NicknameHistoryPanel-D8ASecNO.js"),__vite__mapDeps([89,2,3,6,1,4,5,7]))),nu=y.lazy(()=>x(()=>import("./FieldChangeTrackingPanel-Za6Gg51_.js"),__vite__mapDeps([90,2,3,6,1,4,5,7]))),su=y.lazy(()=>x(()=>import("./InviteAnalyticsPanel-BgC--USP.js"),__vite__mapDeps([91,2,3,6,1,4,5,7]))),au=y.lazy(()=>x(()=>import("./ContentScannerPanel-DfVeCwdm.js"),__vite__mapDeps([92,2,3,6,1,4,5,7]))),iu=y.lazy(()=>x(()=>import("./EphemeralMessagesPanel-BWu2TYRB.js"),__vite__mapDeps([93,2,3,6,1,4,5,7]))),cu=y.lazy(()=>x(()=>import("./TopicHistoryPanel-3nJbwdxe.js"),__vite__mapDeps([94,2,3,6,1,4,5,7]))),lu=y.lazy(()=>x(()=>import("./DraftsPanel-DcuNyPcz.js"),__vite__mapDeps([95,2,3,6,1,4,5,7]))),du=y.lazy(()=>x(()=>import("./ServerNicknamesPanel-DJ-ufaW5.js"),__vite__mapDeps([96,2,3,6,1,4,5,7]))),uu=y.lazy(()=>x(()=>import("./ServerBoostPanel-BPxZKq4a.js"),__vite__mapDeps([97,2,3,6,1,4,5,7]))),fu=y.lazy(()=>x(()=>import("./RoomWebhooksPanel-BdktQN7S.js"),__vite__mapDeps([98,2,3,6,1,4,5,7]))),pu=y.lazy(()=>x(()=>import("./OAuthAppsPanel-umPaUH73.js"),__vite__mapDeps([99,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./VanityURLPanel-BN3Lz0gJ.js"),__vite__mapDeps([100,2,3,6,1,4,5,7])));const ma=y.lazy(()=>x(()=>import("./AutoRespondersPanel-DB2ggzoq.js"),__vite__mapDeps([101,2,3,6,1,4,5,7]))),mu=y.lazy(()=>x(()=>import("./SessionManagementPanel-CbQQ8vTx.js"),__vite__mapDeps([102,2,3,6,1,4,5,7]))),hu=y.lazy(()=>x(()=>import("./GDPRExportPanel-DpYzZuZi.js"),__vite__mapDeps([103,2,3,6,1,4,5,7]))),gu=y.lazy(()=>x(()=>import("./DataRetentionPanel-Bq83hn81.js"),__vite__mapDeps([104,2,3,6,1,4,5,7]))),yu=y.lazy(()=>x(()=>import("./TwoFactorSetupWizard-C0f_DOfr.js"),__vite__mapDeps([105,2,3,6,1,4,5,7]))),xu=y.lazy(()=>x(()=>import("./EnhancedPollsPanel-RBdNBvr7.js"),__vite__mapDeps([106,2,3,6,1,4,5,7]))),Su=y.lazy(()=>x(()=>import("./VoiceTranscriptsPanel-fyQt8eiD.js"),__vite__mapDeps([107,2,3,6,1,4,5,7]))),bu=y.lazy(()=>x(()=>import("./PaymentPanel-C_ttINL8.js"),__vite__mapDeps([108,2,3,6,1,4,5,7]))),wu=y.lazy(()=>x(()=>import("./StoreModal-CVCzrD0m.js"),__vite__mapDeps([109,2,3,6,1,4,5,7]))),vu=y.lazy(()=>x(()=>import("./DailyRewardsModal-CKD7l6OP.js"),__vite__mapDeps([110,2,3,6,1,4,5,7]))),_u=y.lazy(()=>x(()=>import("./APIUsagePanel-DNqUalJ3.js"),__vite__mapDeps([111,2,3,6,1,4,5,7]))),ku=y.lazy(()=>x(()=>import("./ExportJobsPanel-DpjhtTJN.js"),__vite__mapDeps([112,2,3,6,1,4,5,7]))),Cu=y.lazy(()=>x(()=>import("./ScheduledAnnouncementsPanel-XEQIB_Oz.js"),__vite__mapDeps([113,2,3,6,1,4,5,7]))),ju=y.lazy(()=>x(()=>import("./InviteExportPanel-CPnhlXz5.js"),__vite__mapDeps([114,2,3,6,1,4,5,7]))),Tu=y.lazy(()=>x(()=>import("./AdvancedSearchPanel-Dy_y-Kz7.js"),__vite__mapDeps([115,2,3,6,1,4,5,7]))),Eu=y.lazy(()=>x(()=>import("./GrowthMetricsPanel-B3z6oCjM.js"),__vite__mapDeps([116,2,3,6,1,4,5,7]))),Ru=y.lazy(()=>x(()=>import("./LinkPreviewRenderer-D0CQTxRQ.js"),__vite__mapDeps([117,2,3,6]))),Au=y.lazy(()=>x(()=>import("./InventoryPanel-CtVDUwjV.js"),__vite__mapDeps([118,2,3,6,1,4,5,7]))),Pu=y.lazy(()=>x(()=>import("./WaitlistPanel-wc7lkdIu.js"),__vite__mapDeps([119,2,3,6,1,4,5,7]))),Iu=y.lazy(()=>x(()=>import("./ReferralRewardsPanel-Cf0Nkv8Y.js"),__vite__mapDeps([120,2,3,6,1,4,5,7])));y.lazy(()=>x(()=>import("./VerifyEmailPage-CAsMSWZa.js"),__vite__mapDeps([121,2,3,6,4])));y.lazy(()=>x(()=>import("./ForgotPasswordPage-V8ruJl1W.js"),__vite__mapDeps([122,2,3,6,38,4])));y.lazy(()=>x(()=>import("./ResetPasswordPage-DXlgdgnW.js"),__vite__mapDeps([123,2,3,6,4])));y.lazy(()=>x(()=>import("./TwoFactorLoginPage-CHcsM-py.js"),__vite__mapDeps([124,2,3,4,6,1,5,7])));y.lazy(()=>x(()=>import("./TwoFactorSetup-CYaSyE16.js"),__vite__mapDeps([125,2,3,1,4,5,6,7,126])));y.lazy(()=>x(()=>import("./TwoFactorLogin-ByymwwU8.js"),__vite__mapDeps([127,2,3,128])));const Lu=y.lazy(()=>x(()=>import("./VanityInviteScreen-CxTqkv2E.js"),__vite__mapDeps([129,2,3,9])));y.lazy(()=>x(()=>import("./EmailVerification-D0K2JXMb.js"),__vite__mapDeps([130,2,3,4,131])));y.lazy(()=>x(()=>import("./MobileNav-O-Gr-luP.js"),__vite__mapDeps([132,2,3,133])));y.lazy(()=>x(()=>import("./SwipeActions-CBA3DHsH.js"),__vite__mapDeps([134,2,3,135])));y.lazy(()=>x(()=>import("./VoiceMessage-CNcEqM1p.js"),__vite__mapDeps([136,2,3,1,4,5,6,7,137])));const Ou=y.lazy(()=>x(()=>import("./FriendsTab-C_U44H_L.js"),__vite__mapDeps([138,2,3,6,24,1,4,5,7]))),Du=y.lazy(()=>x(()=>import("./RoomList-DNBXGMg1.js"),__vite__mapDeps([139,2,3,6,5,140,30,11,1,4,7,10,24]))),Mu=y.lazy(()=>x(()=>import("./UserProfilePanel-EbxEDmc8.js"),__vite__mapDeps([141,2,3,142,1,41,42,4,5,6,7,143]))),ha=y.lazy(()=>x(()=>import("./VoiceChatPanel-UcPXbfpA.js"),__vite__mapDeps([144,2,3,145,9,146,6,5,1,4,7,147]))),$u=y.lazy(()=>x(()=>import("./ChatUserList-C1V-0CoQ.js"),__vite__mapDeps([148,2,3,6,4]))),zu=y.lazy(()=>x(()=>import("./PinnedMessages-BecZCeRp.js"),__vite__mapDeps([149,2,3,23,1,6,24,25,26,27,9,4,5,7]))),Vu=y.lazy(()=>x(()=>import("./FloatingVoiceIsland-CeWsVX0c.js"),__vite__mapDeps([150,2,3,145,9,151]))),Bu=y.lazy(()=>x(()=>import("./CinemaPlayer-BbRK7LeU.js"),__vite__mapDeps([152,1,2,3,6,4,5,7]))),Uu=y.lazy(()=>x(()=>import("./ConnectionsPanel-Do9BEccp.js"),__vite__mapDeps([153,2,3,6,1,4,5,7,154]))),Nu=y.lazy(()=>x(()=>import("./PasswordSetupModal-BHgx9-HL.js"),__vite__mapDeps([155,2,3,6,1,4,5,7,156]))),Fu=y.lazy(()=>x(()=>import("./NotificationDropdown-BxCNIFCs.js"),__vite__mapDeps([157,2,3,6])));y.lazy(()=>x(()=>import("./ReactionStatsPanel-CMqBWGC8.js"),__vite__mapDeps([158,2,3,6,1,4,5,7,159])));y.lazy(()=>x(()=>import("./ServerHealthPanel-8yhT245r.js"),__vite__mapDeps([160,2,3,6,1,4,5,7,161])));y.lazy(()=>x(()=>import("./ChannelAnalyticsPanel-Di8wUcG1.js"),__vite__mapDeps([162,2,3,6,1,4,5,7,163])));y.lazy(()=>x(()=>import("./SmartSuggestionsPanel-Dw3YRWbq.js"),__vite__mapDeps([164,2,3,6,1,4,5,7,165])));y.lazy(()=>x(()=>import("./UserPresenceInsightsPanel-BNxLLZce.js"),__vite__mapDeps([166,2,3,6,1,4,5,7,167])));y.lazy(()=>x(()=>import("./UserFooter-BnaUsduW.js").then(a=>a.a),__vite__mapDeps([140,2,3,6])));const Wu=y.lazy(()=>x(()=>import("./UserContextMenu-VhlSTb0J.js"),__vite__mapDeps([146,2,3,6]))),Gu=y.lazy(()=>x(()=>import("./MiniGamesPanel-DcnwoPl_.js"),__vite__mapDeps([168,2,3,6,1,4,5,7]))),Hu=y.lazy(()=>x(()=>import("./ProjectCollaborationPanel-FO0G5FQ1.js"),__vite__mapDeps([169,2,3,6,1,4,5,7]))),Ku=y.lazy(()=>x(()=>import("./AvatarStudioPanel-CueYCLxG.js"),__vite__mapDeps([170,2,3,6,1,4,5,7]))),qu="8888",So=typeof window<"u"&&typeof window.require=="function",Ot=window.Capacitor&&window.Capacitor.isNativePlatform(),Yo=(()=>{if(Ot||So)return"https://api.pawscord.com";const a=window.location.protocol,r=window.location.hostname;return r.includes("pawscord.com")?"https://api.pawscord.com":`${a}//${r}:${qu}`})(),xo=So||Ot?"https://www.pawscord.com":Yo,W=`${Yo}/api`,P=Yo,Ur=Yo.startsWith("https")?"wss":"ws",Nr=Yo.replace(/^https?:\/\//,""),ga=`${W}/auth/login/`,ya=`${W}/auth/register/`,Yu=`${W}/messages/history/room/`,Ju=`${W}/messages/history/dm/`,Vn=`${W}/rooms/list_with_categories/`,Zu=`${W}/conversations/`,Xu=`${W}/conversations/find_or_create/`,Qu=`${W}/users/update_profile/`,ef=`${W}/users/default_avatars/`,tf=`${W}/users/change_username/`,of=`${W}/gifs/list_local/`,xa="chat_drafts_v1",Fr=()=>(Date.now()+Math.floor(Math.random()*1e3)).toString(),rf=a=>new Promise((r,n)=>{const c=Math.ceil(a.size/2097152);let m=0;const C=new Vc.ArrayBuffer,E=new FileReader;E.onload=D=>{C.append(D.target.result),m++,m<c?T():r(C.end())},E.onerror=D=>n(D);function T(){const D=m*2097152,H=Math.min(D+2097152,a.size);E.readAsArrayBuffer(a.slice(D,H))}T()}),nf=()=>{const{user:a,isAuthenticated:r,token:n,login:u,logout:c,isLoading:m}=vo(),{isInVoice:C,isConnecting:E,currentRoom:T,joinChannel:D,leaveChannel:H,isMuted:O,isDeafened:z,toggleMute:Z,toggleDeafened:K,toggleVideo:V,toggleScreenShare:B,remoteVolumes:G,setRemoteVolume:Y,localCameraStream:ue,remoteStreams:re,isTalking:X,sendSignal:ae,isScreenSharing:fe,isVideoEnabled:J,isPttActive:he,localScreenStream:we,sendReaction:Be,lastReaction:ee,applyVoiceEffect:Se,activeEffect:Ue,cinemaState:Me,setCinemaState:vt,gameState:Ke,sendGameSignal:Ee,mutedUsers:ut}=rd(),{globalData:Jo}=La(),d=Te(t=>t.activeChat),_o=Te(t=>t.messages),Qt=Te(t=>t.encryptionKeys),qr=Te(t=>t.voiceUsers),Zo=Te(t=>t.unreadCounts),de=Te(t=>t.setActiveChat);Te(t=>t.addMessage),Te(t=>t.updateMessage);const ve=Te(t=>t.setMessages),Xo=Te(t=>t.setTypingUser),Qo=Te(t=>t.setOnlineUsers),Yr=Te(t=>t.setVoiceUsers),Jr=Te(t=>t.incrementUnread),Zr=Te(t=>t.setEncryptionKey),[Xr,er]=o.useState(!1),[tr,_t]=o.useState(!1),[Qr,eo]=o.useState(!1),[en,or]=o.useState(!1),[es,ft]=o.useState(!1),[rr,Dt]=o.useState(null),[tn,Mt]=o.useState(!1),[on,nr]=o.useState(0),[rn,ge]=o.useState(""),I=a?.username||"",[to,ko]=o.useState(!1),[Co,nn]=o.useState(!1),[We,oo]=o.useState(null),{isMobile:te}=Vl(),[sr,ar]=o.useState(""),$t=Kl(sr,300),[zt,jo]=o.useState("0px"),ir=Ot?"max(20px, env(safe-area-inset-bottom))":"0px",[Ne,cr]=o.useState({width:300,height:225,x:100,y:100}),[pt,To]=o.useState(!0),[kt,ot]=o.useState(!0),[ro,Eo]=o.useState(!1),[F,ie]=o.useState("start"),[mt,_e]=o.useState([]),[U,ke]=o.useState([]),[ne,ht]=o.useState([]),[rt,nt]=o.useState([]),[Fe,st]=o.useState([]),[qe,Vt]=o.useState(!1),[Ro,Ce]=o.useState(!1),[Ao,Ye]=o.useState(!1),[sn,lr]=o.useState(!1),[no,dr]=o.useState(!1),[an,ur]=o.useState(!1),[cn,Je]=o.useState(""),[ln,Po]=o.useState(!1),[Pe,Bt]=o.useState(!1),[Ut,Ie]=o.useState(new Set),[Nt,Ct]=o.useState(null),[at,it]=o.useState(null),[dn,fr]=o.useState(null),[so,Io]=o.useState(!1),[un,Ft]=o.useState(!1),[fn,Lo]=o.useState(!1),[Oo,pr]=o.useState(!1),[pn,mr]=o.useState(!1),[ts,mn]=o.useState(!1),[hn,ao]=o.useState(!1),[hr,Do]=o.useState(!1),[gn,jt]=o.useState(!1),[ct,Wt]=o.useState(!1),[io,i]=o.useState(!1),[p,h]=o.useState(!1),[_,j]=o.useState(!1),[w,b]=o.useState(!1),[S,R]=o.useState(!1),[M,q]=o.useState(!1),[se,pe]=o.useState(!1),[$e,gt]=o.useState(!1),[Ze,Gt]=o.useState(!1),[Tt,Et]=o.useState(!1),[gr,yr]=o.useState(!1),[Mo,os]=o.useState(!1),[rs,za]=o.useState(!1),[ns,xr]=o.useState(!1),[Ht,lt]=o.useState(!1),[$o,Sr]=o.useState(!1),[yn,xn]=o.useState(!1),[Va,Ba]=o.useState(!1),[Ua,Na]=o.useState(!1),[Fa,Wa]=o.useState(!1),[Ga,Ha]=o.useState(!1),[Ka,qa]=o.useState(!1),[Ya,Ja]=o.useState(!1),[Za,Xa]=o.useState(!1),[Qa,ss]=o.useState(!1),[ei,ti]=o.useState(!1),[oi,ri]=o.useState(!1),[ni,si]=o.useState(!1),[ai,ii]=o.useState(!1),[ci,li]=o.useState(!1),[di,ui]=o.useState(!1),[fi,pi]=o.useState(!1),[mi,hi]=o.useState(!1),[gi,as]=o.useState(!1),[yi,xi]=o.useState(!1),[Si,bi]=o.useState(!1),[wi,vi]=o.useState(!1),[_i,is]=o.useState(!1),[ki,Ci]=o.useState(!1),[ji,Ti]=o.useState(!1),[Ei,Ri]=o.useState(!1),[Ai,Pi]=o.useState(!1),[Ii,Li]=o.useState(!1),[Oi,cs]=o.useState(!1),[Di,ls]=o.useState(!1),[Mi,ds]=o.useState(!1),[Bf,Uf]=o.useState(!1),[Nf,Ff]=o.useState(!1),[Wf,Gf]=o.useState(!1),[Hf,Kf]=o.useState(!1),[qf,Yf]=o.useState(!1),[Jf,Zf]=o.useState(!1),[Xf,Qf]=o.useState(!1),[ep,tp]=o.useState(!1),[op,rp]=o.useState(!1),[np,sp]=o.useState(!1),[$i,us]=o.useState("default"),[fs,co]=o.useState(null),[ap,ip]=o.useState(!1),[zi,br]=o.useState(!1),[cp,wr]=o.useState(!0),[lp,Sn]=o.useState(0),[lo,Vi]=o.useState(!1),[Kt,bn]=o.useState([]),[Bi,Ui]=o.useState(0),[Rt,ps]=o.useState([]),[qt,At]=o.useState([]),[dp,Ni]=o.useState(null),[dt,vr]=o.useState(null),[ms,hs]=o.useState(!1),[Fi,gs]=o.useState(!1),[ys,xs]=o.useState(null),[Ss,wn]=o.useState(!1),[Wi,bs]=o.useState(!1),[Gi,_r]=o.useState(""),[zo,ws]=o.useState(()=>JSON.parse(localStorage.getItem("chat_sound_settings"))||{notifications:!0,mentions:!0,userJoinLeave:!0}),[kr,vn]=o.useState(null),[Hi,vs]=o.useState(!1),[_s,Cr]=o.useState(!1),[ks,_n]=o.useState(!1),[kn,jr]=o.useState(0),[up,fp]=o.useState(!1),[pp,uo]=o.useState(!1),[mp,fo]=o.useState(""),[Ki,Tr]=o.useState(!1),[hp,po]=o.useState(null),[gp,Cs]=o.useState(null),[yp,js]=o.useState(null),[Ts,xp]=o.useState(!1),[Cn,Es]=o.useState(!1),[Vo,Le]=o.useState(!1),[Er,Rs]=o.useState(null),[Bo,Rr]=o.useState(null),[qi,As]=o.useState(!1),[Yi,Ps]=o.useState(!1),[Ji,Is]=o.useState(!1),[Zi,Ls]=o.useState(!1),[Xi,Os]=o.useState(!1),[Qi,Ds]=o.useState(!1),[Ms,$s]=o.useState(null),[ec,zs]=o.useState(!1),[tc,Vs]=o.useState(!1),Bs=Te(t=>t.typingUsers),Us=o.useMemo(()=>Bs.filter(t=>t!==I),[Bs,I]);o.useRef(null),o.useRef([]);const je=o.useRef(null),Ar=o.useRef(null),jn=o.useRef(null);o.useRef(null);const Uo=o.useRef(null),Tn=o.useRef(null),Ns=o.useRef(null),yt=o.useRef({}),Re=I==="Eastkhan"||I==="PawPaw"||dt?.role==="admin",oc=o.useMemo(()=>{const t=U?.find(g=>g.id===d?.serverId),s=t?.owner===I||t?.created_by===I,f=qt?.find(g=>g.username===I)?.role==="moderator";return{isAdmin:Re,isServerOwner:s,isModerator:f,canKick:Re||s||f,canBan:Re||s,canMute:Re||s||f,canWarn:Re||s||f,canManageRoles:Re||s}},[Re,U,d?.serverId,I,qt]),rc=o.useMemo(()=>{if(!U||U.length===0)return[];if(!Rt||Rt.length===0)return U;const t=[],s=[];return Rt.forEach(f=>{const g=U.find(l=>l.id===f);g&&t.push(g)}),U.forEach(f=>{Rt.includes(f.id)||s.push(f)}),[...t,...s]},[U,Rt]),En=Te(t=>t.onlineUsers),nc=Te(t=>t.messages),Rn=Bl(nc,$t);Ul(ne),o.useEffect(()=>{if(F==="finished")return;ie("start");const t=setTimeout(()=>ie("pre-transition"),1500),s=setTimeout(()=>ie("finished"),2200),f=setTimeout(()=>ie("finished"),3e3);return()=>{clearTimeout(t),clearTimeout(s),clearTimeout(f)}},[]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search),s=t.get("verification"),f=t.get("username"),g=t.get("reason"),l=t.get("needs_password");if(s==="success")$.success(`‚úÖ Email doƒürulandƒ±! Ho≈ügeldin ${f||"kullanƒ±cƒ±"}!`),window.history.replaceState({},document.title,window.location.pathname);else if(s==="failed"){const v=g==="expired"?"‚è∞ Doƒürulama linki s√ºresi dolmu≈ü. Yeni bir link talep edin.":"‚ùå Ge√ßersiz doƒürulama linki.";$.error(v),window.history.replaceState({},document.title,window.location.pathname)}l==="true"&&(console.log("üîë [Auth] Google user needs to set password"),Vs(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search),s=t.get("success"),f=t.get("coins"),g=t.get("session_id"),l=t.get("canceled");s==="true"&&f&&((async()=>{try{const A=localStorage.getItem("access_token"),Q="https://api.pawscord.com/api";if(g){const L=await(await fetch(`${Q}/payments/verify/`,{method:"POST",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"},body:JSON.stringify({session_id:g,coin_amount:parseInt(f)})})).json();L.success?L.already_processed?$.info(`?? ÔøΩdeme zaten islendi! Bakiye: ${L.balance} coin`):$.success(`?? ${f} coin hesabina eklendi! Yeni bakiye: ${L.balance} coin`):$.error(L.error||"ÔøΩdeme dogrulama hatasi")}else $.success(`?? ÔøΩdeme basarili! ${f} coin hesabina eklendi.`)}catch(A){console.error("Payment verification error:",A),$.success(`?? ${f} coin satin alma tamamlandi!`)}})(),window.history.replaceState({},document.title,window.location.pathname)),l==="true"&&($.info("? ÔøΩdeme iptal edildi."),window.history.replaceState({},document.title,window.location.pathname))},[]),o.useEffect(()=>{const s=window.location.hash.match(/^#\/join\/([^/?]+)/);if(s){const f=s[1];console.log("üîó [Vanity] Detected vanity path:",f),$s(f)}},[]),o.useEffect(()=>(window.showAutoModeration=()=>Do(!0),window.showRaidProtection=()=>jt(!0),window.showReportSystem=()=>Wt(!0),window.showAuditLog=()=>i(!0),window.showUserWarnings=()=>h(!0),()=>{delete window.showAutoModeration,delete window.showRaidProtection,delete window.showReportSystem,delete window.showAuditLog,delete window.showUserWarnings}),[]),o.useEffect(()=>{const t=s=>{Vo&&!s.target.closest(".toolbar-menu-container")&&Le(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[Vo]),o.useEffect(()=>{const t=()=>{zs(!0)};return window.addEventListener("openConnectionsPanel",t),()=>window.removeEventListener("openConnectionsPanel",t)},[]),o.useEffect(()=>{kl(),jl(),Tl(),Dl(),setTimeout(()=>{Ta()},3e3),"requestIdleCallback"in window&&requestIdleCallback(()=>{Fn()}),r&&a&&x(async()=>{const{pushNotificationManager:t}=await import("./pushNotifications-CsFR1VUW.js");return{pushNotificationManager:t}},__vite__mapDeps([171,1,2,3])).then(({pushNotificationManager:t})=>{t.init(W,k)}),Ot&&x(async()=>{const{initializeDeepLinkHandler:t}=await import("./urlHandlers-D8oGIv5A.js");return{initializeDeepLinkHandler:t}},__vite__mapDeps([172,1,2,3,4,5,6,7])).then(({initializeDeepLinkHandler:t})=>{console.log("‚úÖ Deep link handler ready")}),console.log("‚úÖ PWA ve optimizasyonlar aktif!")},[r,a]);const No=o.useMemo(()=>{if(d.type==="room"){if(U){for(const t of U)if(t.categories)for(const s of t.categories){const f=s.rooms?.find(g=>g.slug===d.id);if(f)return String(f.name)}}return String(d.id)}else if(d.type==="dm")return`@ ${String(d.targetUser||"DM")}`;return""},[d,U]),mo=o.useMemo(()=>!d||!d.id?"":`${d.type}-${d.id}`,[d]),Pr=o.useCallback(()=>{try{const t=localStorage.getItem(xa);if(!t)return{};const s=JSON.parse(t);return s&&typeof s=="object"?s:{}}catch(t){return console.warn("Taslak okunamadƒ±",t),{}}},[]),sc=o.useCallback(t=>{if(!mo)return;const s=Pr();s[mo]=t,localStorage.setItem(xa,JSON.stringify(s))},[mo,Pr]);o.useEffect(()=>{if(!mo){fo(""),uo(!1);return}const s=Pr()[mo]||"";fo(s),uo(!!s.trim())},[mo,Pr]);const ac=o.useMemo(()=>{if(d.type!=="room"||!U)return"text";for(const t of U)if(t.categories)for(const s of t.categories){const f=s.rooms?.find(g=>g.slug===d.id);if(f)return f.channel_type}return"text"},[d,U]),Pt=o.useCallback((t="auto")=>{jn.current&&jn.current.scrollIntoView({behavior:t})},[]),An=o.useCallback(()=>{const t=Tn.current;return t?t.scrollHeight-t.scrollTop-t.clientHeight<160:!0},[]),Pn=o.useCallback(()=>{const t=Tn.current;if(!t)return;const s=t.scrollHeight-t.scrollTop-t.clientHeight;Tr(s>160)},[]),ic=ql(Pn,100),Ge=o.useCallback(t=>{if(t==="‚ö° Signal Bot")return`${xo}/static/bot/signal.png`;if(t==="PawPaw AI")return`${xo}/static/bot/ai.png`;if(!t||!Fe||Fe.length===0)return`${xo}/avatars/cat_1.png`;let s=0;for(let v=0;v<t.length;v++)s=t.charCodeAt(v)+((s<<5)-s);const f=Math.abs(s%Fe.length),g=Fe[f];let l;return typeof g=="object"&&g!==null?l=g.original||g.thumbnail||g.url:typeof g=="string"&&(l=g),!l||typeof l!="string"?`${xo}/avatars/cat_1.png`:l.startsWith("http")||l.startsWith("blob:")?l:(l.startsWith("/")||(l="/"+l),`${xo}${l}`)},[Fe]),Xe=o.useCallback(t=>{const s=ne.find(f=>f.username===t);if(s&&s.avatar&&typeof s.avatar=="string"){if(s.avatar.startsWith("http://")||s.avatar.startsWith("https://")||s.avatar.startsWith("blob:"))return s.avatar;let f=s.avatar;return f.startsWith("/")||(f="/"+f),`${xo}${f}`}return Ge(t)},[ne,Ge]),k=o.useCallback(async(t,s={})=>{const f=s.headers||{};n&&(f.Authorization=`Bearer ${n}`),s.body instanceof FormData||(f["Content-Type"]="application/json");try{const l=t.includes("upload")||s.body instanceof FormData?3e5:3e4,v=new AbortController,A=setTimeout(()=>v.abort(),l),Q=await fetch(t,{...s,headers:f,signal:v.signal});if(clearTimeout(A),Q.status===401)throw t.includes("/auth/")||t.includes("/login")?(console.warn("‚ö†Ô∏è [Auth] 401 on auth endpoint, logging out"),c()):console.warn("‚ö†Ô∏è [Auth] 401 error on:",t,"- NOT logging out"),new Error("Unauthorized");return Q}catch(g){throw g.name==="AbortError"?(console.error("‚è±Ô∏è [Fetch] Request timed out:",t),new Error("ƒ∞stek zaman a≈üƒ±mƒ±na uƒüradƒ±")):(console.error("Fetch error:",g),g)}},[n,c]);Hl(),o.useEffect(()=>{const t=window.location.hash,s=t.includes("?")?t.split("?")[1]:"",g=new URLSearchParams(s).get("join_server");if(g&&r&&U&&U.length>0){console.log("üîó [Vanity URL] Found join_server parameter:",g);const l=U.find(v=>v.id===parseInt(g));if(l){if(console.log(`üîó Vanity URL: Redirecting to server ${l.name}`),l.categories&&l.categories.length>0){const v=l.categories[0];if(v.rooms&&v.rooms.length>0){const A=v.rooms[0];de({type:"room",id:A.slug})}}window.history.replaceState({},document.title,"/#/")}else console.log(`üîó Vanity URL: Server ${g} not found, showing invite modal`),(async()=>{try{const A=await k(`${W}/servers/${g}/join/`,{method:"POST"});if(A.ok)$.success("Sunucuya katƒ±ldƒ±nƒ±z!"),window.location.reload();else{const Q=await A.json();$.error(Q.error||"Sunucuya katƒ±lƒ±namadƒ±")}}catch(A){console.error("Join server error:",A),$.error("Sunucuya katƒ±lƒ±rken hata olu≈ütu")}finally{window.history.replaceState({},document.title,"/#/")}})()}},[r,U,k]);const Fs=o.useCallback(async t=>{try{await k(`${W}/user/server-order/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_order:t})}),console.log("üíæ Server order saved:",t)}catch(s){console.error("Server order save error:",s)}},[k]),cc=(t,s,f)=>{t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("serverId",s.toString()),t.dataTransfer.setData("sourceIndex",f.toString());const g=t.currentTarget.cloneNode(!0);g.style.position="absolute",g.style.top="-9999px",g.style.opacity="0.8",g.style.transform="rotate(5deg)",g.style.pointerEvents="none",document.body.appendChild(g),t.dataTransfer.setDragImage(g,24,24),setTimeout(()=>{document.body.contains(g)&&document.body.removeChild(g)},0),t.currentTarget.style.opacity="0.4"},lc=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},dc=t=>{t.currentTarget.style.opacity="1"},uc=o.useCallback((t,s)=>{t.preventDefault(),parseInt(t.dataTransfer.getData("serverId"));const f=parseInt(t.dataTransfer.getData("sourceIndex"));if(console.log("üìù DROP: sourceIndex:",f,"‚Üí targetIndex:",s),f===s){console.log("‚ùå Aynƒ± yere bƒ±rakƒ±lƒ±yor (sourceIndex === targetIndex), i≈ülem iptal");return}let g=Rt.length>0?[...Rt]:U.map(A=>A.id);console.log("üìù Mevcut sƒ±ralama:",g),console.log("üîÑ Kaynak index:",f,"‚Üí Hedef index:",s);const[l]=g.splice(f,1),v=f<s?s-1:s;console.log("üéØ Adjusted target index:",v),g.splice(v,0,l),console.log("‚úÖ Yeni sƒ±ralama:",g),ps(g),Fs(g)},[Rt,U,Fs]),Ws=t=>{const s=document.getElementById(`message-${t}`);s&&s.scrollIntoView({behavior:"smooth",block:"center"})},fc=async()=>{if(window.confirm("Bu odadaki t√ºm mesajlarƒ± silmek istediƒüine emin misin?"))try{(await k(`${W}/rooms/${d.id}/clear/`,{method:"POST"})).ok&&ve([])}catch(t){console.error(t)}},pc=async()=>{wn(!0),bs(!0),_r("");try{const t=await k(`${W}/rooms/${d.id}/summarize/`,{method:"POST"}),s=await t.json();t.ok?_r(s.summary):_r("Hata: "+s.error)}catch{_r("Baƒülantƒ± hatasƒ±.")}bs(!1)},In=t=>{if(console.log("üì§ [DEBUG] sendMessage called with:",t),console.log("üì§ [DEBUG] ws.current:",je.current),console.log("üì§ [DEBUG] ws.current.readyState:",je.current?.readyState),console.log("üì§ [DEBUG] activeChat:",d),!t)return;const s=t.trim();if(!s)return;if(s==="/tema"){Ft(!0),po(null),uo(!1),fo(""),Uo.current?.clear?.();return}if(s==="/sablon"){ft(!0),po(null),uo(!1),fo(""),Uo.current?.clear?.();return}if(s.startsWith("/duyuru ")){const L=s.slice(8).trim();if(L){const le={type:d.type==="room"?"chat_message":"dm_message",message:`[ANNOUNCE] ${L}`,username:I,temp_id:Fr(),...d.type==="room"?{room:d.id}:{conversation:d.id}};je.current?.send(JSON.stringify(le)),co({message:L,type:"info",author:I}),po(null),uo(!1),fo(""),Uo.current?.clear?.();return}}po(null),uo(!1),fo(""),sc("");const f=d.type==="room"?`room-${d.id}`:`dm-${d.id}`,g=Qt[f];let l=s;d.type==="dm"&&g&&(l=zl(s,g));const v={type:d.type==="room"?"chat_message":"dm_message",message:l,username:I,temp_id:Fr(),...d.type==="room"?{room:d.id}:{conversation:d.id}},A=JSON.stringify(v),Q=async()=>{let be=0;for(;je.current&&je.current.readyState===WebSocket.CONNECTING&&be<3e3;)await new Promise(ze=>setTimeout(ze,100)),be+=100;if(je.current&&je.current.readyState===WebSocket.OPEN)try{return je.current.send(A),!0}catch(ze){return console.error("WebSocket send error:",ze),!1}return!1},ce=async()=>{try{const L=d.type==="dm"?`${W}/messages/send_dm/`:`${W}/messages/send/`,le=d.type==="dm"?{conversation_id:d.id,content:l}:{room:d.id,content:l};return(await k(L,{method:"POST",body:JSON.stringify(le)})).ok}catch(L){return console.error("HTTP fallback error:",L),!1}};(async()=>await Q()||await ce())(),ve(L=>{const le={...v,content:l,timestamp:new Date().toISOString(),id:v.temp_id,avatar:dt?.avatar||Ge(I)},be=[...L,le],ze=d.type==="room"?`room-${d.id}`:`dm-${d.id}`;return yt.current[ze]&&(yt.current[ze].messages=be),be}),Uo.current?.clear?.(),Pt("smooth")},mc=t=>{const s={type:d.type==="room"?"chat_message":"dm_message",message:"",username:I,temp_id:Fr(),snippet_data:t,...d.type==="room"?{room:d.id}:{conversation:d.id}};je.current?.send(JSON.stringify(s)),ve(f=>[...f,{...s,timestamp:new Date().toISOString(),id:s.temp_id,avatar:dt?.avatar||Ge(I)}]),ko(!1)},Ln=o.useCallback(()=>{if(!d.id||d.type==="welcome"||d.type==="friends"||!I)return;if(je.current&&je.current.readyState===WebSocket.OPEN){const g=je.current.url,l=d.type==="room"?`/ws/chat/${d.id}/`:`/ws/dm/${d.id}/`;if(g.includes(l)){console.log("‚è≠Ô∏è [WebSocket] Already connected to this chat, skipping reconnect");return}}je.current&&(console.log("üîå [WebSocket] Closing existing connection before new one"),je.current.close(1e3,"change_room"));let t="";const s=`?username=${encodeURIComponent(I)}&token=${n}`;if(d.type==="room"?t=`${Ur}://${Nr}/ws/chat/${d.id}/${s}`:d.type==="dm"&&(t=`${Ur}://${Nr}/ws/dm/${d.id}/${s}`),!t){console.log("‚è≠Ô∏è [WebSocket] Skipping - activeChat.type is not room/dm:",d.type);return}console.log("üîå [WebSocket] Connecting to:",t.split("?")[0]);const f=new WebSocket(t);je.current=f,f.onopen=()=>{console.log("‚úÖ [WebSocket] Connected successfully"),Vt(!0)},f.onmessage=g=>{const l=JSON.parse(g.data);if(l.type==="chat"||l.type==="dm"||l.type==="chat_message_handler"){console.log("üì® [WebSocket] Message data:",{type:l.type,id:l.id,temp_id:l.temp_id,room:l.room,conversation:l.conversation});const v=A=>A.room?`room-${A.room}`:A.conversation?`dm-${A.conversation}`:(console.warn("‚ö†Ô∏è [WebSocket] No room/conversation in message, using activeChat fallback"),d.type==="room"?`room-${d.id}`:`dm-${d.id}`);ve(A=>{if(l.temp_id){const L=A.findIndex(le=>le.temp_id===l.temp_id);if(L!==-1){console.log("üîÑ [WebSocket] Replacing temp message with real message:",l.temp_id,"‚Üí",l.id);const le=[...A];le[L]=l;const be=v(l);return yt.current[be]&&(yt.current[be].messages=le),le}}if(l.id&&A.some(L=>L.id===l.id))return console.log("‚è≠Ô∏è [WebSocket] Duplicate message (by ID) skipped:",l.id),A;console.log("üì® [WebSocket] New message received:",l);const Q=[...A,l],ce=v(l);return yt.current[ce]&&(yt.current[ce].messages=Q),Q}),Xo(l.username,!1),An()?Pt("smooth"):Tr(!0)}else l.type==="typing_status_update"?l.username!==I&&Xo(l.username,l.is_typing):l.type==="chat_cleared"&&ve([]);if(l.message&&l.message.startsWith("[ANNOUNCE] ")){const v=l.message.replace("[ANNOUNCE] ","");co({message:v,type:"info",author:l.username})}},f.onerror=g=>{console.error("‚ùå [WebSocket] Connection error:",g)},f.onclose=g=>{console.log("üîå [WebSocket] Connection closed:",g.code,g.reason),Vt(!1)}},[d.id,d.type,I,n]);o.useEffect(()=>{wo.isNativePlatform()&&(wl.initialize({clientId:Ra,scopes:["profile","email"],grantOfflineAccess:!0}),jo("max(35px, env(safe-area-inset-top))"))},[]),o.useEffect(()=>{r&&!lo&&(async()=>{try{const[s,f,g,l,v]=await Promise.all([k(ef).then(L=>L.json()),k(Vn).then(L=>L.json()),k(`${Zu}?username=${encodeURIComponent(I)}`).then(L=>L.json()),k(`${W}/friends/list/`).then(L=>L.json()),k(`${W}/users/me/`).then(L=>L.json())]);st(s);const A={username:v?.username||I,email:v?.email||"",avatar:v?.avatar||null,status_message:v?.status_message||"",friend_code:v?.friend_code||"0000",social_links:v?.social_links||{},coins:v?.coins||0,xp:v?.xp||0,level:v?.level||1,status:"online",role:v?.role||"member",is_whitelisted:v?.is_whitelisted||!1};vr(A),console.log("üî• [DEBUG] currentUserProfile with is_whitelisted:",A);const ce=(l.friends||[]).map(L=>{const le=L.sender_username===I,be=le?L.receiver_username:L.sender_username,ze=le?L.receiver_avatar:L.sender_avatar,It=le?L.receiver_status:L.sender_status,Oe=le?L.receiver_activity:L.sender_activity;return be?{username:be,avatar:ze,status:It||"offline",display_name:be,current_activity:Oe||{},status_message:"",last_seen:L.created_at,role:"friend",friend_code:""}:null}).filter(Boolean).filter(L=>L.username!==A.username);ht(ce),ke(f),_e(g),bn(ce),Vi(!0),x(async()=>{const{prefetchUserAvatars:L}=await import("./imageCaching-Dr6erzFA.js");return{prefetchUserAvatars:L}},__vite__mapDeps([25,2,3])).then(({prefetchUserAvatars:L})=>{L(ce)})}catch(s){console.error("Init Data Error",s),Je("Veriler y√ºklenemedi.")}})()},[r,lo,k,I]),o.useEffect(()=>{I&&(async()=>{try{const s=await k(`${W}/user/server-order/`);if(s.ok){const f=await s.json();ps(f.server_order||[]),console.log("üéØ Server order loaded:",f.server_order)}}catch(s){console.error("Server order fetch error:",s)}})()},[I,k]),o.useEffect(()=>{const t=async()=>{if(!d.id||d.type!=="room"){co(null);return}try{const s=await k(`${W}/stickies/list/?room=${d.id}`);if(s.ok){const f=await s.json();f&&f.length>0?co({message:f[0].content,type:"info",author:f[0].creator}):co(null)}}catch(s){console.error("Sticky messages fetch error:",s)}};r&&d.id&&t()},[d.id,d.type,r,k]);const Ir=o.useCallback(async t=>{if(!t){At([]);return}try{console.log(`üîç [Server Members] Fetching members for server ${t}...`);const s=await k(`${W}/servers/${t}/members/`);if(s.ok){const f=await s.json();console.log(`üë• [Server Members] Fetched ${f.length} members for server ${t}:`,f),At(f)}else{const f=await s.text();console.error("‚ùå Server members fetch failed:",s.status,f),At([])}}catch(s){console.error("‚ùå Server members fetch error:",s),At([])}},[k]),hc=o.useCallback(t=>{console.log("üñ±Ô∏è [Server Select] Server clicked:",t.name,t.id),Ni(t),Ir(t.id),de("server",t.id,null)},[Ir,de]);o.useEffect(()=>{const t=async()=>{if(!d.id||d.type!=="room"){d.type!=="server"&&At([]);return}try{let s=null;for(const f of U){if(!f.categories||!Array.isArray(f.categories)){console.warn("‚ö†Ô∏è Server has no categories array:",f);continue}for(const g of f.categories)if(!(!g.rooms||!Array.isArray(g.rooms))){for(const l of g.rooms)if(l.slug===d.id){s=f.id;break}if(s)break}if(s)break}if(!s){console.warn("üî¥ Server ID bulunamadƒ± for room:",d.id),At([]);return}Ir(s)}catch(s){console.error("‚ùå Server members fetch error:",s),At([])}};r&&d.id&&d.type==="room"?t():d.type!=="server"&&At([])},[d.id,d.type,r,Ir,U]),o.useEffect(()=>{const t=async()=>{try{const f=await fetch(`${W}/maintenance/status/`);if(f.ok){const g=await f.json();g.active?vn({message:g.message||"System maintenance in progress",endTime:g.end_time,level:g.level||"info"}):vn(null)}}catch(f){console.error("Maintenance check error:",f)}};t();const s=setInterval(t,300*1e3);return()=>clearInterval(s)},[]),o.useEffect(()=>{const t=(g,l)=>{try{const v=g.split(".").map(Number),A=l.split(".").map(Number);return v[0]>A[0]?!0:v[0]<A[0]?!1:v[1]>A[1]?!0:v[1]<A[1]?!1:v[2]>A[2]}catch(v){return console.error("‚ùå Version kar≈üƒ±la≈ütƒ±rma hatasƒ±:",v),!1}},s=async()=>{const g=window.location.hostname==="localhost"&&window.location.port==="3000";if(!So&&!Ot&&!g){console.log("‚è≠Ô∏è Version check atlandƒ± (web browser)");return}try{console.log("üîç Version kontrol√º yapƒ±lƒ±yor...",{isElectron:So,isNative:Ot,isDebugMode:g,hostname:window.location.hostname});let l="1.1.205";if(window.electron?.getAppVersion)try{l=await window.electron.getAppVersion(),console.log("üñ•Ô∏è Electron version:",l)}catch(L){console.warn("‚ö†Ô∏è Electron version alƒ±namadƒ±:",L)}console.log("üì¶ Mevcut versiyon:",l);const v=await fetch("https://media.pawscord.com/builds/version.json");if(!v.ok){console.warn("‚ö†Ô∏è version.json alƒ±namadƒ±:",v.status);return}const A=await v.json(),Q=A.latest_version;console.log("üåê Son versiyon:",Q),console.log("üìä Kar≈üƒ±la≈ütƒ±rma:",{current:l,latest:Q});const ce=t(Q,l);if(console.log("üîç ƒ∞s newer?",ce),Q&&ce){if(console.log("‚úÖ YENƒ∞ G√úNCELLEME MEVCUT!",{current:l,latest:Q}),hs(!0),window.require){const{ipcRenderer:L}=window.require("electron");L.send("update-available",{currentVersion:l,latestVersion:Q,downloadUrl:A.download_url_windows})}}else console.log("‚ÑπÔ∏è Versiyon g√ºncel veya eski:",l,">=",Q),hs(!1)}catch(l){console.error("‚ùå Version check hatasƒ±:",l)}};s();const f=setInterval(s,1800*1e3);return()=>clearInterval(f)},[]),o.useEffect(()=>{if(!lo||!d.id||d.type==="friends"||d.type==="welcome")return;console.log("üîÑ [DEBUG activeChat] Chat deƒüi≈üti:",d);let t=!1;const s=d.type==="room"?`room-${d.id}`:`dm-${d.id}`,f=yt.current[s];return f?.messages?.length>0?(console.log("üì¶ [Cache] Restoring cached messages:",f.messages.length,"(skipping API call)"),ve(f.messages),wr(!!f.hasMore),Sn(f.offset||0),setTimeout(()=>{t||Pt("auto")},50),t||Ln()):(console.log("üåê [Fetch] No cache, fetching from server..."),Sn(0),wr(!0),t||Ln(),setTimeout(()=>{t||Hs(!0,0)},50)),()=>{t=!0,console.log("üßπ [Cleanup] activeChat useEffect cleanup triggered")}},[d.id,d.type,lo,Ln]),o.useEffect(()=>{Jo?.type==="server_structure_update"&&(console.log("üîÑ Real-time Update: Refetching Server List..."),(async()=>{try{const s=await k(Vn);if(s.ok){const f=await s.json();ke(f)}}catch(s){console.error("Real-time Update Failed:",s)}})())},[Jo,k]),o.useEffect(()=>{if(!r||!I)return;const t={current:null},s=async()=>{try{const g=await k(`${W}/users/rich_presence/${I}/`);if(g.ok){const l=await g.json();let v={};const A=L=>{if(!L)return!0;const le=new Date(L);return(new Date-le)/1e3/60<2};l.spotify&&A(l.spotify.timestamp)&&(v.spotify={type:"listening",name:l.spotify.track,details:l.spotify.artist,album_art:l.spotify.album_art}),l.steam&&A(l.steam.timestamp)&&(v.steam={type:"playing",name:l.steam.game,state:l.steam.state}),Object.keys(v).length===0&&(v=null);const Q=JSON.stringify(t.current),ce=JSON.stringify(v);Q!==ce&&(t.current=v,Ar.current&&Ar.current.readyState===WebSocket.OPEN&&Ar.current.send(JSON.stringify({type:"update_activity",activity:v})))}}catch{}},f=setInterval(s,3e4);return s(),()=>clearInterval(f)},[r,I,k]),o.useEffect(()=>{An()&&(Pt("smooth"),Tr(!1))},[_o,An,Pt]),o.useEffect(()=>{Pn()},[d,Pn]),o.useEffect(()=>{const t=s=>{(s.ctrlKey||s.metaKey)&&s.key.toLowerCase()==="k"&&(s.preventDefault(),Ns.current?.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),o.useEffect(()=>{if(!r||!lo)return;const t=$l();if(us(t),!n){console.warn("‚ö†Ô∏è [StatusWS] No token available, skipping WebSocket connection");return}const s=`${Ur}://${Nr}/ws/status/?username=${encodeURIComponent(I)}&token=${n}`;console.log("üåê [StatusWS] Connecting to:",s.replace(n,"TOKEN_HIDDEN"));let f;try{f=new WebSocket(s)}catch(g){console.error("‚ùå [StatusWS] WebSocket creation failed:",g);return}return Ar.current=f,f.onopen=()=>{console.log("‚úÖ [StatusWS] Connected successfully")},f.onerror=g=>{console.error("‚ùå [StatusWS] WebSocket error:",g)},f.onclose=g=>{console.log(`üîå [StatusWS] Connection closed: code=${g.code}, reason=${g.reason||"none"}`),g.code!==1e3&&g.code!==1001&&console.log("üîÑ [StatusWS] Will attempt reconnect in 5s...")},f.onmessage=g=>{try{const l=JSON.parse(g.data);if(l.type==="online_user_list_update"){const v=Array.isArray(l.users)?l.users.map(A=>typeof A=="string"?A:A.username||A):[];console.log("üë• [Online Users] Updated:",v),Qo(v)}if(l.type==="voice_users_update"&&(console.log("üîä [GlobalWS] Received voice_users_update:",l.voice_users),Yr(l.voice_users)),l.type==="user_activity_update"&&ht(v=>v.map(A=>A.username===l.username?{...A,current_activity:l.activity}:A)),l.type==="user_profile_update"&&l.user_data){const v=l.user_data;v.username===I&&(console.log("üë§ [Profile Update] Updating currentUserProfile:",v),vr(A=>({...A,avatar:v.avatar,status_message:v.status_message,social_links:v.social_links,coins:v.coins,xp:v.xp,level:v.level,status:v.status,role:v.role}))),ht(A=>A.map(Q=>Q.username===v.username?{...Q,...v}:Q))}if(l.type==="global_message_notification"&&l.username!==I){const v=l.room_slug?`room-${l.room_slug}`:`dm-${l.conversation_id}`,A=d.type==="room"?`room-${d.id}`:`dm-${d.id}`;v!==A&&Jr(v)}l.type==="server_structure_update"&&(console.log("Server structure update received, refreshing..."),k(Vn).then(v=>v.json()).then(v=>ke(v)).catch(console.error))}catch(l){console.error("‚ùå [StatusWS] Failed to parse message:",l)}},()=>{try{f.close(1e3,"Component unmount")}catch{}}},[r,lo,I,n,d]),o.useEffect(()=>{C&&T&&(console.log(`üîä [Voice] Switched to voice chat panel: ${T}`),de("voice",T))},[C,T]);const Gs=t=>{de("room",t),te&&Ce(!1)},Fo=t=>{k(Xu,{method:"POST",body:JSON.stringify({target_username:t})}).then(s=>s.json()).then(s=>{de("dm",s.conversation_id,t),te&&Ce(!1)})},gc=o.useCallback(t=>{t&&(window.location.hash=t.startsWith("#/")?t:`#${t.startsWith("/")?t:`/${t}`}`,te&&Ye(!1))},[te]),yc=o.useCallback(()=>{ws(t=>{const s={...t,notifications:!t.notifications};return localStorage.setItem("chat_sound_settings",JSON.stringify(s)),s})},[]),xc=o.useCallback(async()=>{if(!d?.id)return;const t=`${window.location.origin}/#/${d.type==="dm"?`dm/${d.id}`:`room/${d.id}`}`;try{await navigator.clipboard.writeText(t),ge("Link kopyalandƒ±"),setTimeout(()=>ge(""),1500)}catch(s){console.error("Link kopyalanamadƒ±",s),$.error("Link kopyalanamadƒ±")}},[d]),Hs=async(t=!0,s=0)=>{if(!d.id)return;if(d.type==="voice"){console.log("[Voice] Skipping message history for voice chat"),ve([]),wr(!1);return}console.log("üîÑ [fetchMessageHistory] Starting fetch:",{isInitial:t,offset:s,activeChat:d}),br(!0);const f=d.type==="room"?Yu:Ju,g=d.type==="room"?`room-${d.id}`:`dm-${d.id}`;try{const l=await k(`${f}${d.id}/?limit=50&offset=${s}`);if(l.ok){const v=await l.json(),A=v.results||[],Q=A.filter(Oe=>!Oe||typeof Oe!="object"?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Invalid message object:",Oe),!1):!Oe.id&&!Oe.temp_id?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Message without ID:",Oe),!1):!0);Q.length<A.length&&console.warn(`‚ö†Ô∏è [fetchMessageHistory] Filtered out ${A.length-Q.length} invalid messages`);const ce=Q.reverse();console.log("‚úÖ [fetchMessageHistory] Fetched messages:",ce.length);let L=ce;t?(console.log("üìù [fetchMessageHistory] Setting messages (INITIAL):",ce.length),ve(ce),setTimeout(()=>Pt("auto"),100)):ve(Oe=>(console.log("üìù [fetchMessageHistory] Appending to existing:",Oe.length,"+",ce.length),L=[...ce,...Oe],L));const le=t?ce.length:s+ce.length,be=!!v.next;wr(be),t||Sn(le);const ze=yt.current[g]?.messages||[],It=t?ce:[...ce,...ze];yt.current[g]={messages:L||It,offset:le,hasMore:be},console.log("üíæ [fetchMessageHistory] Cached:",g,"with",(L||It).length,"messages")}}catch(l){console.error("‚ùå [fetchMessageHistory] Error:",l)}br(!1)},Sc=async(t,s)=>{try{console.log("üîë [Auth] Login attempt:",{username:t,url:ga});const f=await fetch(ga,{method:"POST",body:JSON.stringify({username:t,password:s}),headers:{"Content-Type":"application/json"}});console.log("üîë [Auth] Response status:",f.status);const g=await f.json();if(f.ok)console.log("‚úÖ [Auth] Login successful"),u(g.access,g.refresh);else{if(console.error("‚ùå [Auth] Login failed:",g),f.status===401&&g.requires_2fa&&g.temp_token){console.log("üîê [Auth] 2FA required, redirecting..."),window.location.href=`/#/2fa-login?temp_token=${encodeURIComponent(g.temp_token)}`;return}f.status===401?Je("Kullanƒ±cƒ± adƒ± veya ≈üifre hatalƒ±"):f.status===400?Je(g.detail||g.error||"Ge√ßersiz giri≈ü bilgileri"):f.status>=500?Je("Sunucu hatasƒ±. L√ºtfen daha sonra tekrar deneyin."):Je(g.detail||g.error||"Giri≈ü ba≈üarƒ±sƒ±z")}}catch(f){console.error("‚ùå [Auth] Network error:",f),Je("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin.")}},bc=async(t,s,f)=>{try{console.log("üìù [Auth] Register attempt:",{username:t,email:s,url:ya});const g=await fetch(ya,{method:"POST",body:JSON.stringify({username:t,email:s,password:f}),headers:{"Content-Type":"application/json"}});if(console.log("üìù [Auth] Response status:",g.status),g.status===201)return console.log("‚úÖ [Auth] Registration successful"),!0;const l=await g.json();console.error("‚ùå [Auth] Registration failed:",l);let v="";return l.username?v=l.username.join(" "):l.email?v=l.email.join(" "):l.password?v=l.password.join(" "):l.detail?v=l.detail:v=Object.values(l).flat().join(" "),Je(v||"Kayƒ±t i≈ülemi ba≈üarƒ±sƒ±z"),!1}catch(g){return console.error("‚ùå [Auth] Network error:",g),Je("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin."),!1}},Lr=o.useCallback(async(t,s=!1,f=0,g=null)=>{_n(!0),jr(0);const l=g||d,v=Fr();try{const A=await rf(t),Q=t.type||"application/octet-stream",ce=10*1024*1024,L=5,le=Math.ceil(t.size/ce);console.log("üöÄ [R2 Multipart] Starting upload:",{fileName:t.name,fileSize:(t.size/(1024*1024)).toFixed(2)+" MB",totalParts:le,parallelUploads:L});const ze=await(await k(`${W}/upload/multipart/init/`,{method:"POST",body:JSON.stringify({file_name:t.name,file_size:t.size,content_type:Q,file_hash:A})})).json();if(ze.file_exists){console.log("‚úÖ [R2] File already exists, skipping upload"),$.success("Dosya zaten y√ºkl√º!"),_n(!1),jr(100);return}const{upload_id:It,key:Oe}=ze;console.log(`üì¶ [R2] Upload ID: ${It.substring(0,20)}..., Key: ${Oe}`);const Mr=[];let Zs=0;const Rc=async ye=>{const He=(ye-1)*ce,Lt=Math.min(He+ce,t.size),ho=t.slice(He,Lt);console.log(`üì§ [R2] Part ${ye}/${le} uploading...`);const Wo=new FormData;Wo.append("upload_id",It),Wo.append("key",Oe),Wo.append("part_number",ye.toString()),Wo.append("chunk",ho,`part_${ye}`);const $r=await k(`${W}/upload/multipart/upload-part/`,{method:"POST",body:Wo,headers:{}});if(!$r.ok){const Pc=await $r.text();throw new Error(`Part ${ye} upload failed: ${$r.status} - ${Pc}`)}const{etag:Xs,part_number:Ac}=await $r.json();Zs++;const Qs=Math.round(Zs/le*95);return jr(Qs),console.log(`‚úÖ [R2] Part ${ye}/${le} complete (${Qs}%), ETag: ${Xs}`),{ETag:Xs,PartNumber:Ac}};for(let ye=0;ye<le;ye+=L){const He=[];for(let ho=0;ho<L&&ye+ho<le;ho++)He.push(Rc(ye+ho+1));const Lt=await Promise.all(He);Mr.push(...Lt)}Mr.sort((ye,He)=>ye.PartNumber-He.PartNumber),console.log("üìã [R2] All parts uploaded, completing...",Mr);const $n=await k(`${W}/upload/multipart/complete/`,{method:"POST",body:JSON.stringify({upload_id:It,key:Oe,parts:Mr,file_name:t.name,file_hash:A,room_slug:l.type==="room"?l.id:null,conversation_id:l.type==="dm"?l.id:null,temp_id:v,is_voice_message:s?"true":"false",duration:f.toString()})});if(!$n.ok){const ye=await $n.text();throw new Error(`Complete failed: ${ye}`)}const Yt=await $n.json();jr(100),console.log("‚úÖ [R2 Multipart] Upload complete!",Yt),l.id===d.id&&(ve(ye=>{if(Yt.temp_id){const He=ye.findIndex(Lt=>Lt.temp_id===Yt.temp_id);if(He!==-1){const Lt=[...ye];return Lt[He]=Yt,Lt}}return Yt.id&&ye.some(He=>He.id===Yt.id)?ye:[...ye,Yt]}),Pt("smooth"))}catch(A){console.error("‚ùå [R2 Multipart] Error:",A),$.error(`Y√ºkleme hatasƒ±: ${A.message}`)}_n(!1)},[d,I,k]),wc=t=>{t.preventDefault(),t.stopPropagation(),Cr(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&Lr(t.dataTransfer.files[0])},vc=(t,s)=>{if(t.preventDefault(),t.stopPropagation(),fr(null),t.dataTransfer.files&&t.dataTransfer.files.length>0){const f=t.dataTransfer.files[0];if(s.type==="dm"){const g=mt.find(l=>l.id===s.id);if(g){const l=g.participants.find(v=>v.username!==I);l&&(Fo(l.username),setTimeout(()=>{Lr(f,!1,0,s)},300))}}else s.type==="room"&&roomsWithCategories.find(l=>l.room_slug===s.id)&&(handleRoomClick(s.id),setTimeout(()=>{Lr(f,!1,0,s)},300))}},_c=async t=>{if(t.preventDefault(),!d.id||!$t.trim()){$t.trim()||Hs(!0,0);return}br(!0);try{let s=`${W}/messages/search/?q=${encodeURIComponent($t)}`;d.type==="room"?s+=`&room=${d.id}`:s+=`&dm=${d.id}`;const f=await k(s);if(f.ok){const g=await f.json();ve(g.results||g)}}catch(s){console.error(s)}br(!1)},On=o.useRef([]),Dn=o.useRef(null),Ks=o.useCallback(t=>{On.current.push(t),!Dn.current&&(Dn.current=setTimeout(async()=>{const s=[...new Set(On.current)];if(On.current=[],Dn.current=null,s.length!==0)try{(await k(`${W}/messages/mark_read/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message_ids:s})})).ok&&ve(g=>g.map(l=>s.includes(l.id)?{...l,read_by:[...l.read_by||[],I]}:l))}catch{}},1500))},[k,I]),qs=async t=>{if(window.confirm("Bu mesajƒ± silmek istediƒüine emin misin?"))try{(await k(`${W}/messages/${t}/delete/`,{method:"DELETE"})).ok&&ve(f=>f.filter(g=>g.id!==t))}catch(s){console.error(s)}},Ys=async t=>{try{const s=await k(`${W}/messages/${t}/pin/`,{method:"POST"});if(s.ok){const f=await s.json(),g=f.is_pinned??f.pinned??!_o.find(l=>l.id===t)?.is_pinned;ve(l=>l.map(v=>v.id===t?{...v,is_pinned:g}:v)),g?(nt(l=>{const v=_o.find(A=>A.id===t);return v&&!l.some(A=>A.id===t)?[...l,{...v,is_pinned:!0}]:l}),$.success("üìå Mesaj sabitlendi")):(nt(l=>l.filter(v=>v.id!==t)),$.success("üìå Sabitleme kaldƒ±rƒ±ldƒ±"))}}catch(s){console.error("Pin toggle error:",s),$.error("‚ùå Sabitleme hatasƒ±")}},kc=async t=>{if(window.confirm("Bu sohbeti listenizden gizlemek istiyor musunuz?"))try{(await k(`${W}/conversations/${t}/hide/`,{method:"POST"})).ok&&(_e(f=>f.filter(g=>g.id!==t)),d.type==="dm"&&d.id===t&&de("welcome","welcome"))}catch(s){console.error(s)}},Cc=async t=>{if(window.confirm(`‚ö†Ô∏è ADMƒ∞N: Bu konu≈ümayƒ± HER ƒ∞Kƒ∞ TARAFTAN KALICI OLARAK silmek istediƒüinize emin misiniz?

Bu i≈ülem GERƒ∞ ALINAMAZ!`))try{const s=await k(`${W}/conversations/${t}/admin-delete/`,{method:"DELETE"});if(s.ok){const f=await s.json();$.success(`‚úÖ ${f.deleted_messages} mesaj silindi. Katƒ±lƒ±mcƒ±lar: ${f.participants.join(", ")}`),_e(g=>g.filter(l=>l.id!==t)),d.type==="dm"&&d.id===t&&de("welcome","welcome")}else{const f=await s.json();$.error(`‚ùå Hata: ${f.error||"Silme i≈ülemi ba≈üarƒ±sƒ±z"}`)}}catch(s){console.error(s),$.error("‚ùå Sunucuyla baƒülantƒ± hatasƒ±")}},jc=o.useCallback(()=>{de("welcome","welcome",null),te&&Ce(!1)},[te]),Tc=o.useCallback(async(t,s,f)=>{switch(t){case"profile":const g=ne.find(l=>l.username===s.username);g&&it(g);break;case"message":Fo(s.username);break;case"volume":break;case"move":if(Re&&f&&T)try{(await k(`${W}/voice/move_user/`,{method:"POST",body:JSON.stringify({username:s.username,from_channel:T,to_channel:f})})).ok&&console.log(`‚úÖ ${s.username} moved to ${f}`)}catch(l){console.error("Move user error:",l)}break;case"kick":if(Re&&window.confirm(`${s.username} kullanƒ±cƒ±sƒ±nƒ± kanaldan atmak istediƒüine emin misin?`))try{(await k(`${W}/voice/kick_user/`,{method:"POST",body:JSON.stringify({username:s.username,room:T})})).ok&&console.log(`‚úÖ ${s.username} kicked from voice`)}catch(l){console.error("Kick user error:",l)}break;case"server_mute":if(Re)try{(await k(`${W}/voice/server_mute/`,{method:"POST",body:JSON.stringify({username:s.username,room:T})})).ok&&console.log(`‚úÖ ${s.username} server muted`)}catch(l){console.error("Server mute error:",l)}break;case"add_friend":try{const l=await k(`${W}/friends/send/`,{method:"POST",body:JSON.stringify({username:s.username})});if(l.ok)ge(`‚úÖ ${s.username} kullanƒ±cƒ±sƒ±na arkada≈ülƒ±k isteƒüi g√∂nderildi!`),setTimeout(()=>ge(""),3e3);else{const v=await l.json();ge(`‚ùå ${v.error||"ƒ∞stek g√∂nderilemedi"}`),setTimeout(()=>ge(""),3e3)}}catch(l){console.error("Add friend error:",l),ge("‚ùå Arkada≈ü ekleme hatasƒ±"),setTimeout(()=>ge(""),3e3)}break;case"remove_friend":if(window.confirm(`${s.username} ile arkada≈ülƒ±ƒüƒ± sonlandƒ±rmak istediƒüinize emin misiniz?`))try{const l=Kt.find(v=>v.sender_username===s.username||v.receiver_username===s.username);if(l&&(await k(`${W}/friends/remove/${l.id}/`,{method:"DELETE"})).ok){ge(`‚úÖ ${s.username} ile arkada≈ülƒ±k sonlandƒ±rƒ±ldƒ±`),setTimeout(()=>ge(""),3e3);const A=await k(`${W}/friends/list/`);if(A.ok){const Q=await A.json();bn(Q.friends||[])}}}catch(l){console.error("Remove friend error:",l),ge("‚ùå Arkada≈ülƒ±k sonlandƒ±rma hatasƒ±"),setTimeout(()=>ge(""),3e3)}break;case"invite_to_server":Rr({username:s.username});break;case"mute_user":try{const l=await k(`${W}/users/${s.username}/mute/`,{method:"POST"});if(l.ok)$.success(`üîá ${s.username} sessize alƒ±ndƒ±`);else{const v=await l.json();$.error(`‚ùå ${v.error||"Sessize alma ba≈üarƒ±sƒ±z"}`)}}catch(l){console.error("Mute user error:",l),$.error("‚ùå Sessize alma hatasƒ±")}break;case"block_user":if(window.confirm(`${s.username} kullanƒ±cƒ±sƒ±nƒ± engellemek istediƒüinize emin misiniz?`))try{const l=await k(`${W}/users/${s.username}/block/`,{method:"POST"});if(l.ok){$.success(`üö´ ${s.username} engellendi`);const v=await k(`${W}/friends/list/`);if(v.ok){const A=await v.json();bn(A.friends||[])}}else{const v=await l.json();$.error(`‚ùå ${v.error||"Engelleme ba≈üarƒ±sƒ±z"}`)}}catch(l){console.error("Block user error:",l),$.error("‚ùå Engelleme hatasƒ±")}break;default:console.log("Unknown action:",t)}},[ne,Re,T,k,W,Fo,Kt,ge]),Ec=()=>{if(So){Mt(!0),ge("ƒ∞ndiriliyor...");const{ipcRenderer:t}=window.require("electron"),s=`${P}/media/build/Pawscord-Setup.exe`;t.send("start-download",s)}else window.open(`${P}/media/build/Pawscord-Setup.exe`,"_blank")};o.useEffect(()=>{if(So){const{ipcRenderer:t}=window.require("electron"),s=(l,v)=>nr(Math.round(v*100)),f=()=>{ge("Ba≈ülatƒ±lƒ±yor..."),nr(100),setTimeout(()=>ge("Kapanƒ±yor..."),1500)},g=(l,v)=>{Mt(!1),$.error(`ƒ∞ndirme hatasƒ±: ${v}`)};return t.on("download-progress",s),t.on("download-complete",f),t.on("download-error",g),()=>{t.removeAllListeners("download-progress"),t.removeAllListeners("download-complete"),t.removeAllListeners("download-error")}}},[]);const Js=F!=="finished";if(!r)return e.jsxs(e.Fragment,{children:[Js&&e.jsx(ua,{animationState:F}),e.jsx(yd,{onLogin:Sc,onRegister:bc,error:cn,setAuthError:Je})]});const Or=te&&!Ot?"20px":zt,Mn=d.type==="room"?`room-${d.id}`:`dm-${d.id}`,Dr=!!Qt[Mn];return Ms?e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"large",text:"Davet y√ºkleniyor..."}),children:e.jsx(Lu,{vanityPath:Ms,fetchWithAuth:k,apiBaseUrl:P,onClose:()=>{$s(null),window.location.hash="#/"}})}):e.jsxs("div",{style:{...N.mainContainer},className:"dark-theme",children:[Js&&e.jsx(ua,{animationState:F}),kr&&e.jsx(sd,{message:kr.message,endTime:kr.endTime,level:kr.level,onDismiss:()=>vn(null)}),e.jsxs(o.Suspense,{fallback:e.jsx(et,{size:"medium",text:"Modal y√ºkleniyor..."}),children:[sn&&e.jsx(Mu,{user:dt,onClose:()=>lr(!1),onProfileUpdate:t=>vr(t),onLogout:c,fetchWithAuth:k,getDeterministicAvatar:Ge,updateProfileUrl:Qu,changeUsernameUrl:tf,soundSettings:zo,onUpdateSoundSettings:ws,onImageClick:Ct,apiBaseUrl:P}),so&&e.jsx(kd,{onClose:()=>Io(!1)}),fn&&e.jsx(zd,{onClose:()=>Lo(!1),fetchWithAuth:k,apiBaseUrl:P}),Oo&&e.jsx(Vd,{onClose:()=>pr(!1),onOpenAnalytics:()=>Lo(!0),onOpenWebhooks:()=>mr(!0),onOpenModTools:()=>mn(!0),onOpenAuditLogs:()=>i(!0),onOpenReports:()=>Wt(!0),onOpenVanityURL:()=>ao(!0),onOpenAutoResponder:()=>j(!0),fetchWithAuth:k,apiBaseUrl:P}),qi&&e.jsx(bu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>As(!1),username:I}),Yi&&e.jsx(wu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Ps(!1),username:I}),Ji&&e.jsx(vu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Is(!1),username:I}),Zi&&e.jsx(_u,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Ls(!1),username:I}),Xi&&e.jsx(ku,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Os(!1),username:I}),Qi&&e.jsx(Cu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Ds(!1),serverId:d?.type==="room"?d.server_id:null}),ec&&e.jsx(Uu,{onClose:()=>zs(!1)}),tc&&e.jsx(Nu,{onClose:()=>Vs(!1),apiBaseUrl:P}),hr&&e.jsx(Nd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Do(!1)}),gn&&e.jsx(Wd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:k,apiBaseUrl:P,onClose:()=>jt(!1)}),ct&&e.jsx(Gd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Wt(!1)}),io&&e.jsx(Hd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:k,apiBaseUrl:P,onClose:()=>i(!1)}),p&&e.jsx(Kd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:k,apiBaseUrl:P,onClose:()=>h(!1)}),pn&&e.jsx(Bd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:k,apiBaseUrl:P,onClose:()=>mr(!1)}),hn&&e.jsx(Ud,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:k,apiBaseUrl:P,onClose:()=>ao(!1)}),_&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(ma,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>j(!1)})}),w&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(qd,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>b(!1),onMessageClick:t=>{t.room?de({type:"room",slug:t.room}):t.conversation&&de({type:"dm",slug:t.conversation}),b(!1)}})}),S&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Yd,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>R(!1),onMessageClick:t=>{t.room?de({type:"room",slug:t.room}):t.conversation&&de({type:"dm",slug:t.conversation}),R(!1)}})}),M&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Zd,{isOpen:M,onClose:()=>q(!1),currentUsername:currentUser?.username,onNavigateToMessage:t=>{t.room_id&&de({type:"room",id:t.room_id}),q(!1)}})}),se&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Xd,{isOpen:se,onClose:()=>pe(!1),onStatusChange:t=>{currentUser&&setCurrentUser(s=>({...s,customStatus:t}))}})}),$e&&d?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Jd,{fetchWithAuth:k,apiBaseUrl:P,channelSlug:d.slug,onClose:()=>gt(!1)})}),hr&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Fd,{fetchWithAuth:k,apiBaseUrl:P,serverId:d?.type==="room"?d.server_id:null,onClose:()=>Do(!1)})}),rr&&e.jsx(_d,{symbol:rr,onClose:()=>Dt(null)}),ln&&e.jsx(Rd,{onClose:()=>Po(!1),ws:je,username:I}),to&&e.jsx(vd,{onClose:()=>ko(!1),onSend:mc}),ys&&e.jsx(Md,{onClose:()=>xs(null),server:ys,currentUsername:I,fetchWithAuth:k,apiBaseUrl:P,serverMembers:qt}),en&&e.jsx(Od,{onClose:()=>or(!1),onSetKey:t=>Zr(Mn,t),existingKey:Qt[Mn]}),Fi&&e.jsx(Dd,{onClose:()=>gs(!1),apiBaseUrl:P}),Ss&&e.jsx(pa,{isLoading:Wi,summaryText:Gi,onClose:()=>wn(!1)}),Xr&&e.jsx($d,{onClose:()=>er(!1),friendsList:Kt,fetchWithAuth:k,apiBaseUrl:P,onGroupCreated:t=>{_e(s=>[t,...s]),de("dm",t.id,"Grup Sohbeti")}}),Qr&&(d.type==="room"||d.type==="dm")&&e.jsx(Cd,{roomSlug:d.type==="room"?d.id:`dm_${d.id}`,onClose:()=>eo(!1),wsProtocol:Ur,apiHost:Nr}),tr&&e.jsx(jd,{onClose:()=>_t(!1),fetchWithAuth:k,apiBaseUrl:P,sendSignal:ae,absoluteHostUrl:P}),Hi&&e.jsx(Id,{onClose:()=>vs(!1),ws:je,roomSlug:d.id}),an&&e.jsx(Pd,{onSelect:t=>{const s=t.startsWith("http")?t:P+t;In(s),ur(!1)},onClose:()=>ur(!1),localGifListUrl:of,absoluteHostUrl:P,fetchWithAuth:k}),Pe&&e.jsx(Ad,{onClose:()=>Bt(!1),onSelect:t=>{In(t),Bt(!1)},fetchWithAuth:k,apiBaseUrl:P}),Co&&e.jsx(wd,{onClose:()=>nn(!1),fetchWithAuth:k,apiBaseUrl:P,activeRoomSlug:d.id})]}),Ht&&d?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Qd,{fetchWithAuth:k,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>lt(!1)})}),$o&&d?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(eu,{fetchWithAuth:k,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>Sr(!1)})}),yn&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(tu,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>xn(!1)})}),Va&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(ou,{fetchWithAuth:k,apiBaseUrl:P,username:I,onClose:()=>Ba(!1)})}),Ua&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(ru,{fetchWithAuth:k,apiBaseUrl:P,username:I,onClose:()=>Na(!1)})}),Fa&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(nu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Wa(!1)})}),Ga&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(su,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>Ha(!1)})}),Ka&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(au,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>qa(!1)})}),Ya&&d?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(iu,{fetchWithAuth:k,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>Ja(!1)})}),Za&&d?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(cu,{fetchWithAuth:k,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>Xa(!1)})}),Qa&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(lu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>ss(!1),onLoadDraft:t=>{t.room&&de({type:"room",slug:t.room}),ss(!1)}})}),ei&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(du,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>ti(!1)})}),oi&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(uu,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,currentUsername:I,onClose:()=>ri(!1)})}),ni&&d?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(fu,{fetchWithAuth:k,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>si(!1)})}),ai&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(pu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>ii(!1)})}),ci&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(ma,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>li(!1)})}),di&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(mu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>ui(!1)})}),fi&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(hu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>pi(!1)})}),mi&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(gu,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>hi(!1)})}),gi&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(yu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>as(!1),onSuccess:()=>{$.success("2FA ba≈üarƒ±yla etkinle≈ütirildi!"),as(!1)}})}),yi&&d?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(xu,{fetchWithAuth:k,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>xi(!1)})}),Si&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Su,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>bi(!1)})}),wi&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(ju,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>vi(!1)})}),_i&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Tu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>is(!1),onMessageClick:t=>{t.room&&de({type:"room",slug:t.room}),is(!1)}})}),ki&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Eu,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>Ci(!1)})}),ji&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Ru,{fetchWithAuth:k,apiBaseUrl:P,url:null,onClose:()=>Ti(!1)})}),Ei&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Au,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Ri(!1)})}),Ai&&d?.type==="room"&&d.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Pu,{fetchWithAuth:k,apiBaseUrl:P,serverId:d.server_id,onClose:()=>Pi(!1)})}),Ii&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Iu,{fetchWithAuth:k,apiBaseUrl:P,onClose:()=>Li(!1)})}),Oi&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"üéÆ Oyunlar Y√ºkleniyor..."}),children:e.jsx(Gu,{fetchWithAuth:k,apiBaseUrl:P,serverId:d?.server_id,currentUser:I,onClose:()=>cs(!1)})}),Di&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"üìÇ Projeler Y√ºkleniyor..."}),children:e.jsx(Hu,{fetchWithAuth:k,apiBaseUrl:P,serverId:d?.server_id,currentUser:I,onClose:()=>ls(!1)})}),Mi&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"üé® Avatar Studio Y√ºkleniyor..."}),children:e.jsx(Ku,{fetchWithAuth:k,apiBaseUrl:P,currentUser:I,onClose:()=>ds(!1),onAvatarChange:t=>{dt&&vr({...dt,avatar_url:t}),$.success("üé® Avatar g√ºncellendi!")}})}),Nt&&e.jsx(Sd,{imageUrl:Nt,onClose:()=>Ct(null)}),no&&e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"small",text:"Sabitlenmi≈ü mesajlar y√ºkleniyor..."}),children:e.jsx(zu,{messages:rt,onClose:()=>dr(!1)})}),at&&e.jsx(bd,{user:at,onClose:()=>it(null),onStartDM:Fo,onImageClick:Ct,getDeterministicAvatar:Ge,fetchWithAuth:k,apiBaseUrl:P,currentUser:I,friendsList:Kt}),te&&Ro&&e.jsx("div",{style:N.mobileOverlay,onClick:()=>Ce(!1)}),te&&Ao&&e.jsx("div",{style:N.mobileOverlay,onClick:()=>Ye(!1)}),e.jsxs("div",{style:N.chatLayout,children:[(!te||Ro)&&e.jsxs("div",{style:{...N.sidebarWrapper,...te&&N.mobileSidebar,paddingTop:Or,paddingBottom:ir,height:"100%",boxSizing:"border-box"},children:[te&&e.jsxs("div",{style:N.mobileSidebarHeader,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("img",{src:"https://media.pawscord.com/assets/logo.png",alt:"",style:{width:"24px",height:"24px"},onError:t=>{t.target.style.display="none"}}),e.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",color:"white"},children:"Pawscord"})]}),e.jsx("button",{onClick:()=>Ce(!1),style:N.closeSidebarButton,children:e.jsx(Ko,{})})]}),e.jsx(Du,{onFriendsClick:()=>de("friends","friends"),onRoomSelect:Gs,onDMSelect:(t,s)=>de("dm",t,s),onWelcomeClick:jc,setIsLeftSidebarVisible:Ce,onProfileClick:()=>lr(!0),onViewUserProfile:t=>{const s=ne.find(f=>f.username===t);s&&it(s)},onOpenStore:()=>Io(!0),onOpenServerSettings:t=>xs(t),categories:rc,onServerDragStart:cc,onServerDragOver:lc,onServerDragEnd:dc,onServerDrop:uc,conversations:mt,allUsers:ne,onlineUsers:En,serverMembers:qt,isAdmin:Re,friendsList:Kt,pendingFriendRequests:Bi,currentUsername:I,currentUserProfile:dt,getRealUserAvatar:Xe,getDeterministicAvatar:Ge,unreadCounts:Zo,joinVoiceChat:D,leaveVoiceChat:H,voiceUsers:qr,isConnecting:E,currentVoiceRoom:T,currentRoom:T,currentConversationId:d.type==="dm"?d.id:null,remoteVolumes:G,setRemoteVolume:Y,isPttActive:he,apiBaseUrl:P,fetchWithAuth:k,onHideConversation:kc,handleDrop:vc,dropTarget:dn,setDropTarget:fr,isDragging:_s,onOpenCreateGroup:()=>er(!0),toggleMute:Z,toggleDeafened:K,isMuted:O,isDeafened:z,isInVoice:C,toggleVideo:V,toggleScreenShare:B,isVideoEnabled:J,isScreenSharing:fe,updateAvailable:ms,onUpdateClick:()=>gs(!0),onOpenAnalytics:()=>Lo(!0),onOpenAdminPanel:()=>pr(!0),onOpenPaymentPanel:()=>As(!0),onOpenStoreModal:()=>Ps(!0),onOpenDailyRewards:()=>Is(!0),onOpenAPIUsage:()=>Ls(!0),onOpenExportJobs:()=>Os(!0),onOpenScheduledAnnouncements:()=>Ds(!0),onOpenMiniGames:()=>cs(!0),onOpenProjectCollaboration:()=>ls(!0),onOpenAvatarStudio:()=>ds(!0),onServerSelect:hc})]}),e.jsxs("div",{style:N.mainContent,children:[e.jsx("div",{style:{position:"absolute",top:60,left:0,right:0,zIndex:90},children:e.jsx(gd,{message:fs?.message,type:fs?.type,onDismiss:()=>co(null)})}),d.type==="friends"?e.jsx("div",{style:{width:"100%",height:"100%",paddingTop:Or},children:e.jsx(Ou,{fetchWithAuth:k,apiBaseUrl:P,onStartDM:Fo,getDeterministicAvatar:Ge,onClose:()=>de("welcome","welcome"),onPendingCountChange:Ui,onlineUsers:En})}):d.type==="welcome"?e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsx(xd,{isMobile:te,onOpenMenu:()=>Ce(!0),onOpenRightMenu:()=>Ye(!0),updateAvailable:ms,isDownloading:tn,downloadProgress:on,updateStatusText:rn,onStartUpdate:Ec,onSwitchToFriends:()=>{de("friends","friends"),te&&Ce(!1)},onSwitchToAI:()=>{Gs("ai")},onSwitchToCinema:()=>{Po(!0),te&&Ce(!1)}})}):ac==="kanban"?e.jsxs("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:[e.jsx("div",{style:N.chatHeader,children:e.jsxs("h2",{children:["# ",No," (Pano)"]})}),e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"medium",text:"Pano y√ºkleniyor..."}),children:e.jsx(Td,{roomSlug:d.id,apiBaseUrl:P,fetchWithAuth:k})})]}):d.type==="voice"&&C?e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#2f3136"},children:[e.jsxs("div",{style:{...N.chatHeader,justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[te&&e.jsx("button",{onClick:()=>de("welcome","welcome"),style:{...N.mobileMenuButton},children:"‚Üê"}),e.jsxs("h2",{style:{margin:0,fontSize:"1.2em"},children:["üîä ",T]})]}),e.jsx("button",{onClick:()=>{H(),de("welcome","welcome")},style:{background:"#ed4245",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold"},children:"Baƒülantƒ±yƒ± Kes"})]}),e.jsx(ha,{roomName:T,onClose:()=>{H(),de("welcome","welcome")},isMinimized:!1,onToggleMinimize:()=>{},getRealUserAvatar:Xe,allUsers:ne,currentUserProfile:dt})]}):e.jsxs("div",{style:{...N.chatArea,position:"relative",paddingTop:Or,boxSizing:"border-box"},onDrop:wc,onDragOver:t=>{t.preventDefault(),Cr(!0)},onDragEnter:t=>{t.preventDefault(),Cr(!0)},onDragLeave:t=>{t.preventDefault(),t.target===t.currentTarget&&Cr(!1)},children:[e.jsxs("div",{style:{...N.chatHeader,justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",overflow:"hidden",gap:"8px"},children:[te&&!Ro&&e.jsx("button",{onClick:()=>Ce(!0),style:{...N.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Men√ºy√º A√ß",children:"‚ò∞"}),te&&(d.type==="dm"||d.type==="room")&&e.jsx("button",{onClick:()=>{de("welcome","welcome"),Ce(!1),Ye(!1)},style:{...N.mobileMenuButton,fontSize:"1.2em"},"aria-label":"Geri",children:"‚Üê"}),e.jsx("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0,fontSize:te?"1em":"1.1em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:d.type==="dm"?`@ ${String(d.targetUser||"DM")}`:`# ${String(No)}`}),e.jsx("div",{style:qe?N.connectionPillOnline:N.connectionPillOffline,children:qe?"Bagli":"Kopuk"})]}),e.jsxs("div",{style:{display:"flex",gap:te?"5px":"10px",alignItems:"center",flexWrap:te?"nowrap":"wrap",position:"relative"},children:[e.jsxs("form",{onSubmit:_c,style:N.searchForm,children:[e.jsx("input",{type:"text",placeholder:"Ara...",value:sr,onChange:t=>ar(t.target.value),style:N.searchInput,ref:Ns}),e.jsx(Uc,{style:N.searchIcon})]}),!te&&Us.length>0&&e.jsxs("span",{style:N.typingIndicator,children:[Us.join(", ")," yazƒ±yor..."]}),e.jsx("button",{onClick:()=>Es(!Cn),style:{...N.iconButton,color:Cn?"#5865f2":"#b9bbbe",position:"relative"},title:"Bildirimler",children:e.jsx(ea,{})}),Cn&&e.jsx("div",{style:{position:"absolute",top:"54px",right:"20px",zIndex:1e3},children:e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"small",text:""}),children:e.jsx(Fu,{currentUser:I,onClose:()=>Es(!1),fetchWithAuth:k,apiBaseUrl:P})})}),e.jsxs("div",{className:"toolbar-menu-container",style:{position:"relative"},children:[e.jsx("button",{onClick:()=>Le(!Vo),style:{...N.iconButton,color:Vo?"#5865f2":"#b9bbbe",fontSize:"1.2em",fontWeight:"bold"},title:"Daha Fazla",children:"‚ãÆ"}),Vo&&e.jsxs("div",{style:{position:"absolute",top:"50px",right:"0",backgroundColor:"#2f3136",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.4)",minWidth:"220px",zIndex:1e3,overflow:"hidden",border:"1px solid #202225"},children:[d.type==="dm"&&e.jsxs("button",{onClick:()=>{or(!0),Le(!1)},style:{...N.menuItem,color:Dr?"#43b581":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=Dr?"#43b581":"#dcddde"},children:[Dr?e.jsx(ta,{}):e.jsx(ta,{style:{opacity:.5}}),e.jsx("span",{children:Dr?"≈ûifreli":"≈ûifrele"})]}),e.jsxs("button",{onClick:()=>{dr(!no),Le(!1)},style:{...N.menuItem,color:no?"#f5a524":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=no?"#f5a524":"#dcddde"},children:[e.jsx(Nc,{}),e.jsx("span",{children:"Sabitli Mesajlar"})]}),e.jsxs("button",{onClick:()=>{xc(),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(Fc,{}),e.jsx("span",{children:"Baƒülantƒ±yƒ± Kopyala"})]}),e.jsxs("button",{onClick:()=>{yc(),Le(!1)},style:{...N.menuItem,color:zo.notifications?"#43b581":"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=zo.notifications?"#43b581":"#f04747"},children:[zo.notifications?e.jsx(ea,{}):e.jsx(Wc,{}),e.jsx("span",{children:zo.notifications?"Sessize Al":"Sesi A√ß"})]}),e.jsx("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.jsxs("button",{onClick:()=>{q(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(Gc,{}),e.jsx("span",{children:"Bahsedilmeler"})]}),e.jsxs("button",{onClick:()=>{pe(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(Hc,{}),e.jsx("span",{children:"Durumunu Ayarla"})]}),e.jsx("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.jsxs("button",{onClick:()=>{Po(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(Kc,{}),e.jsx("span",{children:"Sinema Modu"})]}),e.jsxs("button",{onClick:()=>{vs(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(qc,{}),e.jsx("span",{children:"DJ Modu"})]}),e.jsxs("button",{onClick:()=>{eo(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(Yc,{}),e.jsx("span",{children:"Beyaz Tahta"})]}),C&&e.jsxs("button",{onClick:()=>{_t(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(oa,{}),e.jsx("span",{children:"Ses Efektleri"})]}),d.type==="room"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.jsxs("button",{onClick:()=>{pc(),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(oa,{}),e.jsx("span",{children:"Sohbeti √ñzetle"})]}),e.jsxs("button",{onClick:()=>{fc(),Le(!1)},style:{...N.menuItem,color:"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#f04747",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#f04747"},children:[e.jsx(Jc,{}),e.jsx("span",{children:"Sohbeti Temizle"})]}),I==="admin"&&d.type==="dm"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.jsxs("button",{onClick:()=>{Cc(d.id),Le(!1)},style:{...N.menuItem,color:"#ed4245",fontWeight:"bold"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#ed4245",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#ed4245"},title:"Admin: Konu≈ümayƒ± kalƒ±cƒ± olarak sil (her iki taraftan)",children:[e.jsx(Zc,{}),e.jsx("span",{children:"‚ö†Ô∏è KALICI Sƒ∞L (ADMƒ∞N)"})]})]})]})]})]}),te&&!Ao&&e.jsx("button",{onClick:()=>Ye(!0),style:{...N.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Kullanƒ±cƒ±larƒ± G√∂ster",children:e.jsx(Nn,{})})]})]}),e.jsx("div",{style:N.messageBox,ref:Tn,onScroll:ic,children:zi?e.jsx("p",{style:N.systemMessage,children:"Y√ºkleniyor..."}):Rn.length>50?e.jsx(pd,{messages:Rn,scrollToBottom:!0,renderMessage:(t,s)=>e.jsx(fa,{msg:t,currentUser:I,absoluteHostUrl:P,isAdmin:Re,onImageClick:Ct,fetchWithAuth:k,allUsers:ne,getDeterministicAvatar:Ge,onShowChart:Dt,onDelete:qs,onStartEdit:po,onSetReply:Cs,onToggleReaction:()=>{},onStartForward:js,isSelectionMode:Ts,isSelected:Ut.has(t.id),onToggleSelection:f=>{const g=new Set(Ut);g.has(f)?g.delete(f):g.add(f),Ie(g)},onScrollToMessage:Ws,onViewProfile:f=>it(ne.find(g=>g.username===f)),onTogglePin:Ys,onVisible:Ks},t.id||t.temp_id||s)}):e.jsxs(e.Fragment,{children:[Rn.map((t,s)=>{const f=t.id||t.temp_id||s;return e.jsx(fa,{msg:t,currentUser:I,absoluteHostUrl:P,isAdmin:Re,onImageClick:Ct,fetchWithAuth:k,allUsers:ne,getDeterministicAvatar:Ge,onShowChart:Dt,onDelete:qs,onStartEdit:po,onSetReply:Cs,onToggleReaction:()=>{},onStartForward:js,isSelectionMode:Ts,isSelected:Ut.has(t.id),onToggleSelection:g=>{const l=new Set(Ut);l.has(g)?l.delete(g):l.add(g),Ie(l)},onScrollToMessage:Ws,onViewProfile:g=>it(ne.find(l=>l.username===g)),onTogglePin:Ys,onVisible:Ks},f)}),e.jsx("div",{ref:jn,style:{float:"left",clear:"both",height:1}})]})}),Ki&&e.jsx("button",{type:"button",style:N.scrollToBottomButton,onClick:()=>{Pt("smooth"),Tr(!1)},"aria-label":"En alta in",children:"En alta in"}),e.jsxs("div",{style:{...N.inputContainer,paddingBottom:Ot?`calc(16px + ${ir})`:te?"25px":"16px"},children:[_s&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(88, 101, 242, 0.2)",border:"2px dashed #5865f2",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1e3},children:e.jsx("div",{style:{color:"#5865f2",fontSize:"1.2em",fontWeight:"bold"},children:"üìÅ Dosyayƒ± buraya bƒ±rakƒ±n"})}),ks&&kn>0&&e.jsx("div",{style:{position:"absolute",top:"-40px",left:"16px",right:"16px",backgroundColor:"#2b2d31",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",zIndex:1001},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("span",{style:{color:"#b9bbbe",fontSize:"12px",whiteSpace:"nowrap"},children:["üì§ Y√ºkleniyor: ",kn,"%"]}),e.jsx("div",{style:{flex:1,height:"6px",backgroundColor:"#40444b",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${kn}%`,height:"100%",backgroundColor:"#5865f2",borderRadius:"3px",transition:"width 0.3s ease"}})})]})}),e.jsx(md,{onSendMessage:In,onFileUpload:Lr,onShowCodeSnippet:()=>ko(!0),placeholder:No?`${d.type==="dm"?No:`# ${No}`} kanalƒ±na mesaj g√∂nder`:"Mesaj yaz...",disabled:ks,fetchWithAuth:k,apiBaseUrl:P,activeChat:d})]})]}),(!te||Ao)&&e.jsxs("div",{style:{...N.chatUserListPanel,...te?N.mobileRightSidebar:{},paddingTop:Or},children:[te&&e.jsxs("div",{style:N.mobileSidebarHeader,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Nn,{size:18,color:"#b9bbbe"}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",color:"white"},children:d.type==="room"?"Sunucu √úyeleri":d.type==="friends"?"√áevrimi√ßi":"Arkada≈ülar"})]}),e.jsx("button",{onClick:()=>Ye(!1),style:N.closeSidebarButton,children:e.jsx(Ko,{})})]}),e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"small",text:"Kullanƒ±cƒ±lar y√ºkleniyor..."}),children:e.jsx($u,{chatUsers:[],allUsers:ne,onlineUsers:En,currentUser:I,currentUserProfile:dt,getDeterministicAvatar:Ge,onUserClick:t=>{let s=ne.find(f=>f.username===t);if(!s&&qt.length>0){const f=qt.find(g=>g.username===t);f&&(s={username:f.username,display_name:f.username,avatar:Ge(f.username),role:f.role||"member"})}s&&it(s)},onUserContextMenu:(t,s)=>{if(s===I)return;const f=ne.find(g=>g.username===s);f&&Rs({x:t.clientX,y:t.clientY,user:f,permissions:oc})},activeChat:d,serverMembers:qt,friendsList:Kt,onNavigate:gc})})]})]}),C&&e.jsx(hd,{remoteStreams:re,remoteVolumes:G,mutedUsers:ut}),C&&!pt&&d.type!=="voice"&&e.jsx("button",{onClick:()=>To(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9998,background:"#5865f2",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"all 0.2s"},title:"Ses Panelini A√ß",onMouseEnter:t=>t.currentTarget.style.transform="scale(1.1)",onMouseLeave:t=>t.currentTarget.style.transform="scale(1)",children:"üé§"}),C&&pt&&d.type!=="voice"&&e.jsx(e.Fragment,{children:kt?e.jsx(ha,{roomName:T,onClose:()=>{To(!1)},isMinimized:ro,onToggleMinimize:()=>Eo(!ro),getRealUserAvatar:Xe,allUsers:ne,currentUserProfile:dt}):e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"small",text:"Sesli sohbet y√ºkleniyor..."}),children:e.jsx(Vu,{islandState:Ne,onDrag:t=>cr(s=>({...s,x:t.x,y:t.y})),onResize:t=>cr(s=>({...s,width:t.width,height:t.height})),isMobile:te,headerActions:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéõÔ∏è [VoiceIsland] Hiding panel"),To(!1)},style:{background:"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:"Paneli Gizle",children:e.jsx(Ko,{})}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üé§ [VoiceIsland] Mute toggle clicked"),Z()},style:{background:O?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:O?"Mikrofonu A√ß":"Mikrofonu Kapat",children:e.jsx(qn,{style:{opacity:O?.5:1}})}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéß [VoiceIsland] Deafen toggle clicked"),K()},style:{background:z?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:z?"Sesi A√ß":"Sesi Kapat",children:e.jsx(Xc,{style:{opacity:z?.5:1}})}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üìπ [VoiceIsland] Video toggle clicked"),V()},style:{background:J?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:J?"Kamerayƒ± Kapat":"Kamerayƒ± A√ß",children:e.jsx(Qc,{style:{opacity:J?1:.5}})}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üñ•Ô∏è [VoiceIsland] Screen share toggle clicked"),B()},style:{background:fe?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:fe?"Ekran Payla≈üƒ±mƒ±nƒ± Durdur":"Ekranƒ± Payla≈ü",children:e.jsx(el,{style:{opacity:fe?1:.5}})}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsx("button",{onClick:H,style:{background:"#ed4245",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},title:"Odadan Ayrƒ±l",children:e.jsx(tl,{})}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsx("button",{onClick:()=>vt(t=>({...t,isActive:!t.isActive})),style:{background:Me.isActive?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:Me.isActive?"üé¨ Kapat":"üçø Sinema"}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsxs("select",{onChange:t=>Se(t.target.value),value:Ue,style:{background:"rgba(0,0,0,0.3)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"4px",padding:"2px 4px",fontSize:"12px",cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"none",children:"Normal"}),e.jsx("option",{value:"robot",children:"ü§ñ Robot"}),e.jsx("option",{value:"child",children:"üë∂ Bebek"}),e.jsx("option",{value:"monster",children:"üëπ Canavar"})]}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",gap:"5px"},children:[e.jsx("button",{onClick:()=>Ee("reset"),title:"Reset Game",style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px"},children:"üîÑ"}),["ü™®","üìÑ","‚úÇÔ∏è"].map((t,s)=>{const f=s===0?"rock":s===1?"paper":"scissors";return e.jsx("button",{onClick:()=>Ee("move",f),style:{background:Ke?.moves?.[I]===f?"rgba(88, 101, 242, 0.5)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"50%",cursor:"pointer",fontSize:"16px",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.1s"},title:`Play ${f}`,children:t},t)})]}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{display:"flex",gap:"5px"},children:["‚ù§Ô∏è","üòÇ","üòÆ","üëç","üéâ"].map(t=>e.jsx("button",{onClick:()=>Be(t),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px",padding:"0 4px",transition:"transform 0.1s"},onMouseEnter:s=>s.target.style.transform="scale(1.2)",onMouseLeave:s=>s.target.style.transform="scale(1)",title:`Send ${t}`,children:t},t))})]}),children:Me.isActive?e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{style:{flex:1,minHeight:0,position:"relative"},children:e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"large",text:"Cinema Player y√ºkleniyor...",fullscreen:!0}),children:e.jsx(Bu,{})})}),e.jsx("div",{style:{height:"140px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",background:"rgba(0,0,0,0.5)",flexShrink:0,alignItems:"center"},children:(()=>{const t=[];return t.push({id:"local-cam",user:{username:I,is_talking:X,is_mic_off:O,is_deafened:z},track:ue?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:Xe(I)}),we&&t.push({id:"local-screen",user:{username:I},track:we.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:Xe(I)}),Object.entries(re||{}).forEach(([s,f])=>{const g=f.getVideoTracks(),l=f.getAudioTracks();g.length>0?g.forEach(v=>t.push({id:`${s}-${v.id}`,user:{username:s},track:v,streamType:"camera",isLocal:!1,avatarUrl:Xe(s)})):l.length>0&&t.push({id:`${s}-audio`,user:{username:s},track:l[0],streamType:"camera",isLocal:!1,avatarUrl:Xe(s)})}),t.map(s=>e.jsx(Br,{...s,style:{height:"100%",aspectRatio:"16/9",minWidth:"160px"},lastReaction:ee,gameMove:Ke?.moves?.[s.user.username]},s.id))})()})]}):e.jsx("div",{style:{...N.videoGrid,flexDirection:We?"column":"row",flexWrap:We?"nowrap":"wrap",overflowY:"auto",height:"100%"},children:(()=>{const t=[];if(t.push({id:"local-cam",user:{username:I,is_talking:X,is_mic_off:O,is_deafened:z},track:ue?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:Xe(I)}),we?.getVideoTracks()[0]&&t.push({id:"local-screen",user:{username:I,is_talking:!1},track:we.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:Xe(I)}),Object.entries(re||{}).forEach(([f,g])=>{if(f!==I){const l=g.getVideoTracks(),v=g.getAudioTracks();l.length>0?l.forEach(A=>{t.push({id:`${f}-${A.id}`,user:{username:f},track:A,streamType:A.label?.toLowerCase().includes("screen")?"screen":"camera",isLocal:!1,avatarUrl:Xe(f)})}):v.length>0&&t.push({id:`${f}-audio`,user:{username:f},track:v[0],streamType:"camera",isLocal:!1,avatarUrl:Xe(f)})}}),We){const f=t.find(l=>l.id===We);if(!f)return oo(null),s(t);const g=t.filter(l=>l.id!==We);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,width:"100%",minHeight:"300px",padding:"0",overflow:"hidden",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"},children:e.jsx(Br,{...f,style:{width:"100%",height:"100%",maxWidth:"100%",borderRadius:"0",maxHeight:"100%",margin:"0 auto",aspectRatio:"unset"},onClick:()=>oo(null),lastReaction:ee,gameMove:Ke?.moves?.[f.user?.username]})}),e.jsx("div",{style:{height:"120px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",flexShrink:0,justifyContent:"center"},children:g.map(l=>e.jsx(Br,{...l,style:{width:"180px",height:"100%",flexShrink:0,aspectRatio:"16/9"},onClick:()=>oo(l.id),lastReaction:ee,gameMove:Ke?.moves?.[l.user.username]},l.id))})]})}else return s(t);function s(f){return f.map(g=>e.jsx(Br,{...g,style:{width:"240px",maxWidth:"100%",flexGrow:1,height:"auto"},onClick:()=>oo(g.id),lastReaction:ee,gameMove:Ke?.moves?.[g.user.username]},g.id))}})()})})})}),un&&e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"medium",text:"Temalar y√ºkleniyor..."}),children:e.jsx(Ld,{onClose:()=>Ft(!1),currentTheme:$i,onThemeChange:us})}),Ss&&e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"medium",text:"√ñzet hazƒ±rlanƒ±yor..."}),children:e.jsx(pa,{roomSlug:d.id,onClose:()=>wn(!1),fetchWithAuth:k,apiBaseUrl:P})}),es&&e.jsx(o.Suspense,{fallback:e.jsx(et,{size:"small",text:"≈ûablonlar y√ºkleniyor..."}),children:e.jsx(Ed,{onClose:()=>ft(!1),onSelect:t=>{Uo.current?.appendText?.(t),ft(!1)},fetchWithAuth:k,apiBaseUrl:P,isAdmin:Re})})]}),Er&&e.jsx(Wu,{x:Er.x,y:Er.y,user:Er.user,currentUser:I,onClose:()=>Rs(null),onAction:Tc,voiceChannels:U.flatMap(t=>(t.categories||[]).flatMap(s=>(s.rooms||[]).filter(f=>f.is_voice))),isAdmin:Re,isInVoiceRoom:C,friendsList:Kt}),Bo&&Oc.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999999},onClick:()=>Rr(null),children:e.jsxs("div",{onClick:t=>t.stopPropagation(),style:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"400px",maxHeight:"80vh",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #3f4147",textAlign:"center"},children:[e.jsx("h2",{style:{color:"#f2f3f5",margin:0,fontSize:"18px"},children:"üé´ Sunucuya Davet Et"}),e.jsxs("p",{style:{color:"#b9bbbe",margin:"8px 0 0",fontSize:"14px"},children:[e.jsx("strong",{children:Bo.username})," kullanƒ±cƒ±sƒ±nƒ± hangi sunucuya davet etmek istiyorsunuz?"]})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"12px"},children:U.map(t=>e.jsxs("div",{onClick:async()=>{try{const s=await k(`${W}/servers/${t.id}/invite/`,{method:"POST",body:JSON.stringify({target_username:Bo.username})});if(s.ok)$.success(`üé´ ${Bo.username} kullanƒ±cƒ±sƒ±na davetiye g√∂nderildi!`);else{const f=await s.json();f.error&&f.error.includes("zaten")?$.info(`‚ÑπÔ∏è ${Bo.username} zaten bu sunucunun √ºyesi!`):$.error(`‚ùå ${f.error||"Davet g√∂nderilemedi"}`)}}catch(s){console.error("‚ùå Invite error:",s),$.error("‚ùå Baƒülantƒ± hatasƒ±")}Rr(null)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",backgroundColor:"rgba(255,255,255,0.02)",marginBottom:"8px"},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="rgba(88, 101, 242, 0.2)"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"},children:[t.icon?e.jsx("img",{src:t.icon,alt:t.name,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover"}}):e.jsx("div",{style:{width:40,height:40,borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"white",fontSize:"16px"},children:t.name?.substring(0,2).toUpperCase()}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#f2f3f5",fontWeight:"600"},children:t.name}),e.jsxs("div",{style:{color:"#b9bbbe",fontSize:"12px"},children:[t.member_count||t.categories?.length||0," √ºye"]})]}),e.jsx("div",{style:{color:"#5865f2",fontSize:"20px"},children:"‚Üí"})]},t.id))}),e.jsx("div",{style:{padding:"16px 20px",borderTop:"1px solid #3f4147",textAlign:"center"},children:e.jsx("button",{onClick:()=>Rr(null),style:{backgroundColor:"#4f545c",color:"#f2f3f5",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:"ƒ∞ptal"})})]})}),document.body)]})},N={mainContainer:{display:"flex",width:"100%",height:"100dvh",backgroundColor:"#1E1F22",backgroundImage:"radial-gradient(circle at 50% 10%, rgba(88, 101, 242, 0.05) 0%, transparent 40%)",color:"white",overflow:"hidden",fontFamily:"'Inter', sans-serif"},chatLayout:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},sidebarWrapper:{width:"312px",backgroundColor:"rgba(30, 31, 34, 0.6)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"row",flexShrink:0,height:"100%",borderRight:"1px solid rgba(255,255,255,0.05)"},mainContent:{flex:1,display:"flex",minWidth:0,position:"relative",height:"100%",overflow:"hidden"},chatArea:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"transparent",minWidth:0,height:"100%",overflow:"hidden",position:"relative"},chatHeader:{height:"54px",minHeight:"54px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",padding:"0 20px",flexShrink:0,backgroundColor:"rgba(20, 21, 24, 0.7)",backdropFilter:"blur(15px)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",zIndex:10},messageBox:{flex:1,overflowY:"auto",padding:"20px 0",display:"flex",flexDirection:"column",gap:"4px",scrollBehavior:"smooth",minHeight:0},inputContainer:{padding:"0 20px 24px 20px",backgroundColor:"transparent",position:"relative",flexShrink:0,minHeight:"auto",zIndex:20},chatUserListPanel:{width:"240px",backgroundColor:"rgba(30, 31, 34, 0.6)",borderLeft:"1px solid rgba(255,255,255,0.08)",flexShrink:0,height:"100%",backdropFilter:"blur(10px)"},mobileSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,left:0,width:"85vw",maxWidth:"350px",boxShadow:"5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileRightSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,right:0,width:"85vw",maxWidth:"300px",boxShadow:"-5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99,backdropFilter:"blur(3px)"},mobileMenuButton:{background:"none",border:"none",color:"white",fontSize:"1.5em",marginRight:"10px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",transition:"all 0.2s"},iconButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"1.3em",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",borderRadius:"50%",transition:"all 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff"}},videoGrid:{display:"flex",flexWrap:"wrap",gap:"5px",padding:"5px",alignContent:"center",justifyContent:"center",alignItems:"center"},systemMessage:{color:"#949ba4",textAlign:"center",fontSize:"0.85em",margin:"10px 0",fontStyle:"italic"},searchForm:{position:"relative",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"4px",padding:"0 8px",height:"32px",marginRight:"8px",border:"1px solid rgba(255,255,255,0.05)"},searchInput:{backgroundColor:"transparent",border:"none",color:"#dcddde",fontSize:"0.9em",width:"140px",outline:"none"},searchIcon:{color:"#949ba4",fontSize:"0.8em",cursor:"pointer"},typingIndicator:{color:"#dbdee1",fontSize:"0.85em",maxWidth:"180px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold"},connectionPillOnline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(59, 165, 93, 0.2)",border:"1px solid #3ba55d",color:"#3ba55d",fontSize:"0.75em",fontWeight:700},connectionPillOffline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(218, 55, 60, 0.2)",border:"1px solid #da373c",color:"#da373c",fontSize:"0.75em",fontWeight:700},scrollToBottomButton:{position:"absolute",right:"16px",bottom:"110px",backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.35)",cursor:"pointer",fontWeight:600},mobileSidebarHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",backgroundColor:"#202225",borderBottom:"1px solid #111214",minHeight:"54px",flexShrink:0},closeSidebarButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"22px",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background 0.2s, color 0.2s"},menuItem:{width:"100%",padding:"10px 16px",background:"transparent",border:"none",color:"#dcddde",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:"500",transition:"all 0.15s ease",borderRadius:"0"}};function sf(){return e.jsx(vl,{fallbackMessage:"Pawscord encountered an error. Please try refreshing the page.",children:e.jsx(od,{children:e.jsx(nf,{})})})}const af=`${tt}/auth/verify-email/`,cf=()=>{const{token:a}=va(),r=qo(),[n,u]=o.useState("loading"),[c,m]=o.useState("Hesabƒ±nƒ±z doƒürulanƒ±yor, l√ºtfen bekleyin...");return o.useEffect(()=>{if(!a){u("error"),m("Ge√ßersiz veya eksik doƒürulama kodu.");return}const C=async()=>{try{const E=await fetch(`${af}${a}/`),T=await E.json();E.ok?(u("success"),m("√úyeliƒüiniz ba≈üarƒ±yla aktif edildi!")):(u("error"),m(T.message||"Doƒürulama ba≈üarƒ±sƒ±z oldu."))}catch{u("error"),m("Sunucuya baƒülanƒ±lamadƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.")}};setTimeout(()=>{C()},1e3)},[a]),e.jsx("div",{style:Ve.container,children:e.jsxs("div",{style:Ve.card,children:[n==="loading"&&e.jsxs("div",{style:Ve.content,children:[e.jsx(ka,{className:"spin-animation",size:50,color:"#5865f2",style:{marginBottom:20}}),e.jsx("h2",{style:Ve.title,children:"Doƒürulanƒ±yor..."}),e.jsx("p",{style:Ve.text,children:c})]}),n==="success"&&e.jsxs("div",{style:Ve.content,children:[e.jsx(Yn,{size:60,color:"#43b581",style:{marginBottom:20}}),e.jsx("h2",{style:{...Ve.title,color:"#43b581"},children:"Tebrikler! üéâ"}),e.jsx("p",{style:Ve.text,children:c}),e.jsx("p",{style:Ve.subText,children:"Artƒ±k Pawscord'a tam eri≈üim saƒülayabilirsin."}),e.jsx("button",{onClick:()=>r("/"),style:Ve.primaryButton,children:"Gƒ∞Rƒ∞≈û YAP"})]}),n==="error"&&e.jsxs("div",{style:Ve.content,children:[e.jsx(Jn,{size:60,color:"#f04747",style:{marginBottom:20}}),e.jsx("h2",{style:{...Ve.title,color:"#f04747"},children:"Hata Olu≈ütu"}),e.jsx("p",{style:Ve.text,children:c}),e.jsx("button",{onClick:()=>r("/"),style:Ve.secondaryButton,children:"Ana Sayfaya D√∂n"})]})]})})},Ve={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#1e1f22",fontFamily:"'Poppins', sans-serif",padding:"20px"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",maxWidth:"400px",width:"100%",textAlign:"center",border:"1px solid #1f2023"},content:{display:"flex",flexDirection:"column",alignItems:"center"},title:{margin:"0 0 10px 0",color:"#fff",fontSize:"1.8em"},text:{color:"#dbdee1",fontSize:"1.1em",margin:"0 0 20px 0",lineHeight:"1.5"},subText:{color:"#949ba4",fontSize:"0.9em",marginBottom:"30px"},primaryButton:{backgroundColor:"#5865f2",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",width:"100%"},secondaryButton:{backgroundColor:"#4f545c",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",width:"100%"}},Oa=document.createElement("style");Oa.innerText=`
  .spin-animation { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(Oa);const lf=y.memo(cf),df=()=>{const{code:a}=va(),r=qo(),{isAuthenticated:n,token:u}=vo(),[c,m]=o.useState(null),[C,E]=o.useState(!0),[T,D]=o.useState(""),[H,O]=o.useState(!1),[z,Z]=o.useState(!1),K="8888",V=window.Capacitor&&window.Capacitor.isNativePlatform(),B=typeof window<"u"&&typeof window.require=="function",Y=`${(()=>{if(V)return"https://www.pawscord.com";if(B)return`http://127.0.0.1:${K}`;const X=window.location.protocol,ae=window.location.hostname;return ae.includes("pawscord.com")?"https://www.pawscord.com":`${X}//${ae}:${K}`})()}/api`;o.useEffect(()=>{console.log("üé´ [Invite Page] Loaded with code:",a),ue()},[a]);const ue=async()=>{console.log("üîç [Invite Page] Fetching invite info..."),E(!0),D("");try{const X=await fetch(`${Y}/invites/${a}/`),ae=await X.json();console.log("üì¶ [Invite Page] Response:",{status:X.status,data:ae}),X.ok?(m(ae),console.log("‚úÖ [Invite Page] Invite info loaded")):(D(ae.error||"Davet bulunamadƒ±"),console.error("‚ùå [Invite Page] Error:",ae.error))}catch(X){console.error("‚ùå [Invite Page] Network error:",X),D("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}E(!1)},re=async()=>{if(!n){console.log("‚ö†Ô∏è [Invite Page] User not authenticated, redirecting to login"),$.error("‚ùå L√ºtfen √∂nce giri≈ü yapƒ±n!"),sessionStorage.setItem("pending_invite",a),r("/");return}if(!u){console.error("‚ùå [Invite Page] No token found!"),$.error("‚ùå Giri≈ü token'ƒ± bulunamadƒ±. L√ºtfen tekrar giri≈ü yapƒ±n."),r("/");return}console.log("üé´ [Invite Page] Accepting invite...",{code:a,apiUrl:`${Y}/invites/${a}/accept/`,hasToken:!!u}),O(!0),D("");try{const X=`${Y}/invites/${a}/accept/`;console.log("üì° [Invite Page] POST to:",X);const ae=await fetch(X,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});console.log("üì¶ [Invite Page] Response status:",ae.status);const fe=await ae.json();if(console.log("üì¶ [Invite Page] Response data:",fe),ae.ok){console.log("‚úÖ [Invite Page] Successfully joined server!"),$.success(`‚úÖ Ba≈üarƒ±lƒ±! ${fe.server_name||"Sunucu"}ya katƒ±ldƒ±nƒ±z!`),Z(!0);const J=fe.redirect||"/";console.log("üîó [Invite Page] Redirecting to:",J),setTimeout(()=>{J.startsWith("http")?window.location.href=J:(r(J),window.location.reload())},2e3)}else{const J=fe.error||fe.message||"Sunucuya katƒ±lma hatasƒ±";console.error("‚ùå [Invite Page] Join failed:",J,fe),D(J),$.error(`‚ùå Hata: ${J}`)}}catch(X){console.error("‚ùå [Invite Page] Exception:",X);const ae=X.message||"Baƒülantƒ± hatasƒ±";D(ae),$.error(`‚ùå Hata: ${ae}`)}O(!1)};return C?e.jsxs("div",{style:oe.container,children:[e.jsx("div",{style:oe.backgroundGradient}),e.jsxs("div",{style:oe.card,children:[e.jsx("div",{style:oe.spinner}),e.jsx("p",{style:oe.loadingText,children:"Davet y√ºkleniyor..."})]})]}):T?e.jsxs("div",{style:oe.container,children:[e.jsx("div",{style:oe.backgroundGradient}),e.jsxs("div",{style:oe.card,children:[e.jsx(Jn,{size:64,color:"var(--error)"}),e.jsx("h2",{style:oe.errorTitle,children:"Hata"}),e.jsx("p",{style:oe.errorText,children:T}),e.jsx("button",{onClick:()=>r("/"),style:oe.homeButton,children:"Ana Sayfaya D√∂n"})]})]}):z?e.jsxs("div",{style:oe.container,children:[e.jsx("div",{style:oe.backgroundGradient}),e.jsxs("div",{style:oe.card,children:[e.jsx(Yn,{size:64,color:"var(--success)"}),e.jsx("h2",{style:oe.successTitle,children:"Ba≈üarƒ±lƒ±!"}),e.jsxs("p",{style:oe.successText,children:[e.jsx("strong",{children:c.server.name})," sunucusuna katƒ±ldƒ±nƒ±z!"]}),e.jsx("p",{style:oe.redirectText,children:"Ana sayfaya y√∂nlendiriliyorsunuz..."})]})]}):e.jsxs("div",{style:oe.container,children:[e.jsx("div",{style:oe.backgroundGradient}),e.jsxs("div",{style:oe.card,children:[c.server.icon&&e.jsx("img",{src:c.server.icon,alt:c.server.name,style:oe.serverIcon}),e.jsxs("h1",{style:oe.serverName,children:[e.jsx(ol,{style:oe.icon}),c.server.name]}),e.jsxs("div",{style:oe.infoRow,children:[e.jsx(Nn,{style:oe.infoIcon}),e.jsxs("span",{children:[c.server.member_count," √úye"]})]}),c.expires_at&&e.jsxs("div",{style:oe.infoRow,children:[e.jsx(rl,{style:oe.infoIcon}),e.jsxs("span",{children:["S√ºre: ",new Date(c.expires_at).toLocaleString("tr-TR")]})]}),c.max_uses>0&&e.jsx("div",{style:oe.infoRow,children:e.jsxs("span",{children:["Kullanƒ±m: ",c.uses," / ",c.max_uses]})}),e.jsxs("div",{style:oe.inviterInfo,children:["Davet Eden: ",e.jsx("strong",{children:c.inviter.username})]}),e.jsx("button",{onClick:re,disabled:H,style:{...oe.joinButton,...H?oe.joinButtonDisabled:{}},children:H?"Katƒ±lƒ±nƒ±yor...":n?"Sunucuya Katƒ±l":"Giri≈ü Yap ve Katƒ±l"}),!n&&e.jsx("p",{style:oe.loginHint,children:"* Sunucuya katƒ±lmak i√ßin giri≈ü yapmanƒ±z gerekiyor"})]})]})},oe={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"var(--bg-app)",padding:"20px",position:"relative",overflow:"hidden"},backgroundGradient:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(ellipse at top, rgba(139, 92, 246, 0.15), transparent 50%), radial-gradient(ellipse at bottom, rgba(118, 75, 162, 0.15), transparent 50%)",pointerEvents:"none",zIndex:0},card:{background:"var(--glass-bg)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",padding:"48px",borderRadius:"var(--radius-2xl)",textAlign:"center",color:"var(--text-primary)",maxWidth:"560px",width:"100%",boxShadow:"var(--shadow-2xl)",border:"1px solid var(--glass-border)",position:"relative",zIndex:1,animation:"scaleIn 0.4s ease-out"},spinner:{width:"50px",height:"50px",border:"3px solid var(--glass-border)",borderTop:"3px solid var(--brand-primary)",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto"},loadingText:{marginTop:"24px",color:"var(--text-tertiary)",fontSize:"15px",fontWeight:500},serverIcon:{width:"120px",height:"120px",borderRadius:"50%",marginBottom:"24px",objectFit:"cover",border:"4px solid var(--glass-border)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.2)",transition:"var(--transition-normal)"},serverName:{fontSize:"32px",fontWeight:800,marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",background:"var(--gradient-primary)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},icon:{fontSize:"28px",color:"var(--brand-primary)"},infoRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"16px 0",color:"var(--text-secondary)",fontSize:"16px",fontWeight:500,padding:"12px 20px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},infoIcon:{fontSize:"20px",color:"var(--brand-primary)"},inviterInfo:{marginTop:"24px",marginBottom:"32px",color:"var(--text-tertiary)",fontSize:"14px",padding:"16px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},joinButton:{background:"var(--gradient-primary)",color:"white",border:"none",padding:"16px 32px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"16px",fontWeight:700,marginTop:"16px",width:"100%",transition:"var(--transition-normal)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)",position:"relative",overflow:"hidden"},joinButtonDisabled:{background:"var(--bg-tertiary)",cursor:"not-allowed",opacity:.6,boxShadow:"none"},loginHint:{marginTop:"20px",fontSize:"13px",color:"var(--warning)",fontStyle:"italic",fontWeight:500},errorTitle:{color:"var(--error)",marginTop:"24px",fontSize:"28px",fontWeight:700},errorText:{color:"var(--text-tertiary)",margin:"24px 0",fontSize:"15px",lineHeight:1.6},successTitle:{color:"var(--success)",marginTop:"24px",fontSize:"28px",fontWeight:700},successText:{color:"var(--text-primary)",margin:"24px 0",fontSize:"18px",fontWeight:600},redirectText:{color:"var(--text-tertiary)",fontSize:"14px",marginTop:"12px",fontStyle:"italic"},homeButton:{background:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--glass-border)",padding:"14px 28px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"15px",fontWeight:600,marginTop:"24px",transition:"var(--transition-normal)"}},Da=document.createElement("style");Da.textContent=`
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`;document.head.appendChild(Da);const uf=({apiBaseUrl:a})=>{const[r,n]=o.useState(!1),[u,c]=o.useState([]),[m,C]=o.useState(!1),E=o.useRef(null),T=o.useRef([]),D=o.useRef(null),{token:H}=vo(),O=()=>{D.current?.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{O()},[u,m]);const z=async()=>{try{const V=await navigator.mediaDevices.getUserMedia({audio:!0});E.current=new MediaRecorder(V),T.current=[],E.current.ondataavailable=B=>{B.data.size>0&&T.current.push(B.data)},E.current.onstop=K,E.current.start(),n(!0)}catch{$.error("‚ùå Mikrofon izni gerekli!")}},Z=()=>{E.current&&r&&(E.current.stop(),n(!1))},K=async()=>{C(!0);const V=new Blob(T.current,{type:"audio/webm"}),B=new FormData;B.append("audio",V,"voice.webm");try{const G=await fetch(`${a}/eng-learn/voice-chat/`,{method:"POST",headers:{Authorization:`Bearer ${H}`},body:B});if(G.ok){const Y=await G.json();c(re=>[...re,{sender:"user",text:Y.user_text},{sender:"ai",text:Y.ai_text}]),new Audio(`data:audio/mp3;base64,${Y.audio_base64}`).play()}else console.error("Sunucu hatasƒ±:",G.status),$.error("‚ùå Anla≈üƒ±lamadƒ± veya hata olu≈ütu.")}catch(G){console.error(G),$.error("‚ùå Baƒülantƒ± hatasƒ±.")}finally{C(!1)}};return e.jsxs("div",{style:xt.container,children:[e.jsxs("div",{style:xt.header,children:[e.jsxs(_a,{to:"/eng-learn",style:xt.backBtn,children:[e.jsx(Ca,{})," Geri"]}),e.jsx("h2",{children:"AI ile Konu≈ü (Speaking)"})]}),e.jsxs("div",{style:xt.chatArea,children:[u.length===0&&e.jsxs("div",{style:xt.emptyState,children:[e.jsx(ra,{size:60,color:"#5865f2",style:{marginBottom:20}}),e.jsx("h3",{children:"ƒ∞ngilizce Pratik Yap"}),e.jsx("p",{children:"Mikrofona basƒ±lƒ± tut ve konu≈ümaya ba≈üla."}),e.jsx("small",{style:{color:"#72767d"},children:'"Hello, how are you?" diyebilirsin.'})]}),u.map((V,B)=>e.jsxs("div",{style:{...xt.messageBubble,alignSelf:V.sender==="user"?"flex-end":"flex-start",backgroundColor:V.sender==="user"?"#5865f2":"#2b2d31",color:"white",borderBottomRightRadius:V.sender==="user"?"0":"12px",borderBottomLeftRadius:V.sender==="ai"?"0":"12px"},children:[e.jsxs("div",{style:xt.msgHeader,children:[V.sender==="user"?e.jsx(nl,{size:12}):e.jsx(ra,{size:12}),e.jsx("span",{style:{marginLeft:5,fontSize:"0.8em",fontWeight:"bold"},children:V.sender==="user"?"Sen":"AI √ñƒüretmen"})]}),V.text]},B)),m&&e.jsx("div",{style:{alignSelf:"flex-start",color:"#949ba4",marginLeft:10,fontStyle:"italic"},children:"Yazƒ±yor ve seslendiriyor..."}),e.jsx("div",{ref:D})]}),e.jsxs("div",{style:xt.controls,children:[e.jsx("button",{onMouseDown:z,onMouseUp:Z,onTouchStart:z,onTouchEnd:Z,style:{...xt.micButton,backgroundColor:r?"#f04747":"#5865f2",transform:r?"scale(1.1)":"scale(1)"},children:r?e.jsx(sl,{size:24}):e.jsx(qn,{size:30})}),e.jsx("p",{style:{marginTop:15,color:"#949ba4",fontSize:"0.9em"},children:r?"Dinliyor... (Bƒ±rakƒ±nca G√∂nderir)":"Basƒ±lƒ± Tut ve Konu≈ü"})]})]})},xt={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#313338",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif"},header:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px",borderBottom:"1px solid #1f2023",paddingBottom:"15px"},backBtn:{color:"#b9bbbe",fontSize:"1em",textDecoration:"none",display:"flex",alignItems:"center",gap:"5px",fontWeight:"600"},chatArea:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px",paddingBottom:"20px",paddingRight:"5px"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#949ba4",opacity:.8,textAlign:"center"},messageBubble:{maxWidth:"85%",padding:"15px",borderRadius:"12px",fontSize:"1em",lineHeight:"1.5",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",position:"relative"},msgHeader:{display:"flex",alignItems:"center",marginBottom:"5px",opacity:.8},controls:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20px",borderTop:"1px solid #1f2023"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.1s ease",boxShadow:"0 5px 20px rgba(0,0,0,0.4)"}},Sa=[{text:"Hello",difficulty:"Kolay"},{text:"Water",difficulty:"Kolay"},{text:"Friend",difficulty:"Kolay"},{text:"Family",difficulty:"Kolay"},{text:"Music",difficulty:"Kolay"},{text:"School",difficulty:"Kolay"},{text:"Computer",difficulty:"Kolay"},{text:"Beautiful",difficulty:"Kolay"},{text:"Together",difficulty:"Kolay"},{text:"Morning",difficulty:"Kolay"},{text:"Happy",difficulty:"Kolay"},{text:"Garden",difficulty:"Kolay"},{text:"People",difficulty:"Kolay"},{text:"Coffee",difficulty:"Kolay"},{text:"Purple",difficulty:"Kolay"},{text:"Technology",difficulty:"Orta"},{text:"Development",difficulty:"Orta"},{text:"Environment",difficulty:"Orta"},{text:"Successfully",difficulty:"Orta"},{text:"Opportunity",difficulty:"Orta"},{text:"Government",difficulty:"Orta"},{text:"Communication",difficulty:"Orta"},{text:"Experience",difficulty:"Orta"},{text:"Available",difficulty:"Orta"},{text:"Management",difficulty:"Orta"},{text:"International",difficulty:"Orta"},{text:"Recommendation",difficulty:"Orta"},{text:"Responsibility",difficulty:"Orta"},{text:"Understand",difficulty:"Orta"},{text:"Literature",difficulty:"Orta"},{text:"Necessary",difficulty:"Orta"},{text:"Vocabulary",difficulty:"Orta"},{text:"Interesting",difficulty:"Orta"},{text:"Comfortable",difficulty:"Orta"},{text:"Vegetable",difficulty:"Orta"},{text:"Squirrel",difficulty:"Zor"},{text:"Schedule",difficulty:"Zor"},{text:"Queue",difficulty:"Zor"},{text:"Rural",difficulty:"Zor"},{text:"Brewery",difficulty:"Zor"},{text:"Phenomenon",difficulty:"Zor"},{text:"February",difficulty:"Zor"},{text:"Library",difficulty:"Zor"},{text:"Specific",difficulty:"Zor"},{text:"Regularly",difficulty:"Zor"},{text:"Probably",difficulty:"Zor"},{text:"Algorithm",difficulty:"Zor"},{text:"Hierarchical",difficulty:"Zor"},{text:"Maintenance",difficulty:"Zor"},{text:"Pronunciation",difficulty:"Zor"},{text:"Throughout",difficulty:"Zor"},{text:"Entrepreneur",difficulty:"Zor"},{text:"Simultaneously",difficulty:"Zor"},{text:"Mischievous",difficulty:"Zor"},{text:"Chaos",difficulty:"Zor"},{text:"Recipe",difficulty:"Zor"},{text:"Worcestershire",difficulty:"Efsane"},{text:"Colonel",difficulty:"Efsane"},{text:"Miscellaneous",difficulty:"Efsane"},{text:"Anesthetist",difficulty:"Efsane"},{text:"Otorhinolaryngologist",difficulty:"Efsane"},{text:"Isthmus",difficulty:"Efsane"},{text:"Anemone",difficulty:"Efsane"},{text:"Synecdoche",difficulty:"Efsane"},{text:"Onomatopoeia",difficulty:"Efsane"},{text:"Conscientious",difficulty:"Efsane"},{text:"Defibrillator",difficulty:"Efsane"},{text:"Antidisestablishmentarianism",difficulty:"Efsane"},{text:"How are you doing today?",difficulty:"C√ºmle"},{text:"I would like to order a coffee.",difficulty:"C√ºmle"},{text:"The quick brown fox jumps over the lazy dog.",difficulty:"C√ºmle"},{text:"Can you please repeat that?",difficulty:"C√ºmle"},{text:"I am learning to speak English fluently.",difficulty:"C√ºmle"},{text:"It is raining cats and dogs outside.",difficulty:"C√ºmle"},{text:"Actions speak louder than words.",difficulty:"C√ºmle"},{text:"I need to schedule a meeting for tomorrow.",difficulty:"C√ºmle"},{text:"What do you do for a living?",difficulty:"C√ºmle"},{text:"She sells seashells by the seashore.",difficulty:"Tekerleme"},{text:"Red lorry, yellow lorry.",difficulty:"Tekerleme"},{text:"Peter Piper picked a peck of pickled peppers.",difficulty:"Tekerleme"},{text:"How much wood would a woodchuck chuck?",difficulty:"Tekerleme"},{text:"Unique New York.",difficulty:"Tekerleme"},{text:"Fuzzy Wuzzy was a bear.",difficulty:"Tekerleme"},{text:"Which wristwatches are Swiss wristwatches?",difficulty:"Tekerleme"}],ff=({apiBaseUrl:a})=>{const{token:r}=vo(),[n,u]=o.useState(null),[c,m]=o.useState(!1),[C,E]=o.useState(!1),[T,D]=o.useState("idle"),[H,O]=o.useState(""),[z,Z]=o.useState(0),K=o.useRef(null),V=o.useRef([]);o.useEffect(()=>{B()},[]);const B=()=>{const X=Math.floor(Math.random()*Sa.length);u(Sa[X]),D("idle"),O("")},G=async()=>{if(n)try{const X=await fetch(`${a}/eng-learn/speak-text/`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({text:n.text})});if(X.ok){const ae=await X.json();new Audio(`data:audio/mp3;base64,${ae.audio_base64}`).play()}}catch(X){console.error(X)}},Y=async()=>{O(""),D("recording");try{const X=await navigator.mediaDevices.getUserMedia({audio:!0});K.current=new MediaRecorder(X),V.current=[],K.current.ondataavailable=ae=>{ae.data.size>0&&V.current.push(ae.data)},K.current.onstop=re,K.current.start(),m(!0)}catch{$.error("‚ùå Mikrofon izni gerekli!"),D("idle")}},ue=()=>{K.current&&c&&(K.current.stop(),m(!1))},re=async()=>{E(!0);const X=new Blob(V.current,{type:"audio/webm"}),ae=new FormData;ae.append("audio",X,"voice.webm"),ae.append("target_text",n.text);try{const J=await(await fetch(`${a}/eng-learn/check-pronunciation/`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:ae})).json();J.is_correct?(D("success"),O(`Harika! üéâ (${J.spoken_text})`),Z(he=>he+1)):(D("error"),O(`Algƒ±lanan: "${J.spoken_text||"???"}" - Tekrar dene!`))}catch(fe){console.error(fe),O("Sunucu hatasƒ±."),D("error")}finally{E(!1)}};return n?e.jsxs("div",{style:De.container,children:[e.jsxs("div",{style:De.header,children:[e.jsxs(_a,{to:"/eng-learn",style:De.backBtn,children:[e.jsx(Ca,{})," √áƒ±kƒ±≈ü"]}),e.jsxs("div",{style:De.scoreBadge,children:["Skor: ",z]})]}),e.jsxs("div",{style:De.mainContent,children:[e.jsxs("div",{style:{...De.card,borderColor:T==="success"?"#43b581":T==="error"?"#f04747":"transparent",boxShadow:T==="success"?"0 0 30px rgba(67, 181, 129, 0.3)":T==="error"?"0 0 30px rgba(240, 71, 71, 0.3)":"0 10px 30px rgba(0,0,0,0.3)"},children:[e.jsx("span",{style:{...De.difficulty,backgroundColor:n.difficulty==="Efsane"?"#eb459e":n.difficulty==="Zor"?"#f04747":"#202225",color:n.difficulty==="Efsane"||n.difficulty==="Zor"?"white":"#949ba4"},children:n.difficulty}),e.jsx("h1",{style:De.wordText,children:n.text}),e.jsx("div",{style:{height:"30px",marginTop:"10px",color:T==="success"?"#43b581":"#f04747",fontWeight:"bold"},children:C?"Analiz ediliyor...":H}),e.jsxs("div",{style:De.controls,children:[e.jsx("button",{onClick:G,style:De.iconButton,title:"Doƒürusunu Dinle",children:e.jsx(al,{size:24})}),e.jsx("button",{onMouseDown:Y,onMouseUp:ue,onTouchStart:Y,onTouchEnd:ue,style:{...De.micButton,backgroundColor:c?"#f04747":T==="success"?"#43b581":"#5865f2",transform:c?"scale(1.1)":"scale(1)"},children:e.jsx(qn,{size:32})})]}),e.jsx("p",{style:De.hint,children:c?"Dinliyor...":"Mikrofona basƒ±lƒ± tut ve oku"})]}),e.jsx("div",{style:De.bottomNav,children:e.jsx("button",{onClick:B,style:De.skipButton,children:T==="success"?e.jsxs(e.Fragment,{children:["Sonraki Kelime ",e.jsx(il,{})]}):e.jsxs(e.Fragment,{children:["Bunu Ge√ß ",e.jsx(cl,{})]})})})]})]}):e.jsx("div",{style:De.container,children:"Y√ºkleniyor..."})},De={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1e1f22",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif",alignItems:"center"},header:{width:"100%",maxWidth:"600px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},backBtn:{color:"#b9bbbe",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},scoreBadge:{backgroundColor:"#f0b232",color:"#000",padding:"5px 15px",borderRadius:"20px",fontWeight:"bold"},mainContent:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"24px",width:"100%",maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",border:"3px solid transparent",transition:"all 0.3s ease"},difficulty:{padding:"4px 12px",borderRadius:"12px",fontSize:"0.85em",marginBottom:"20px",fontWeight:"bold"},wordText:{fontSize:"2.2em",fontWeight:"800",margin:"0 0 10px 0",color:"#fff",letterSpacing:"1px",lineHeight:"1.3"},controls:{display:"flex",alignItems:"center",gap:"30px",marginTop:"30px"},iconButton:{width:"50px",height:"50px",borderRadius:"50%",border:"2px solid #40444b",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 5px 20px rgba(0,0,0,0.4)",transition:"all 0.1s ease"},hint:{marginTop:"20px",color:"#72767d",fontSize:"0.9em"},bottomNav:{marginTop:"50px"},skipButton:{background:"transparent",border:"none",color:"#b9bbbe",fontSize:"1.1em",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",padding:"10px 20px",borderRadius:"8px",transition:"background 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.05)"}}},pf=y.memo(ff),mf=({apiBaseUrl:a})=>{const[r,n]=o.useState("loading"),u=qo(),c=wa();return o.useEffect(()=>{const m=new URLSearchParams(c.search),C=m.get("code");if(m.get("error")){n("error");return}if(C){const T=localStorage.getItem("access_token");fetch(`${a}/spotify/callback/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({code:C})}).then(D=>{D.ok?(n("success"),setTimeout(()=>{u("/",{replace:!0})},1500)):n("error")}).catch(D=>{console.error(D),n("error")})}},[c,a,u]),e.jsx("div",{style:Bn.container,children:e.jsxs("div",{style:Bn.card,children:[r==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"spin",size:50,color:"#1db954",style:{marginBottom:20}}),e.jsx("h2",{children:"Spotify Baƒülanƒ±yor..."}),e.jsx("p",{children:"Token alƒ±nƒ±yor, l√ºtfen bekleyin."})]}),r==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(Yn,{size:60,color:"#1db954",style:{marginBottom:20}}),e.jsx("h2",{style:{color:"#1db954"},children:"Ba≈üarƒ±lƒ±!"}),e.jsx("p",{children:"Hesabƒ±n baƒülandƒ±. Sohbet ekranƒ±na d√∂n√ºl√ºyor..."})]}),r==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(Jn,{size:60,color:"#f04747",style:{marginBottom:20}}),e.jsx("h2",{style:{color:"#f04747"},children:"Hata Olu≈ütu"}),e.jsx("p",{children:"Baƒülantƒ± kurulamadƒ±."}),e.jsx("button",{onClick:()=>u("/"),style:Bn.button,children:"Geri D√∂n"})]})]})})},Bn={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#191414",color:"white",fontFamily:"Poppins, sans-serif"},card:{backgroundColor:"#282828",padding:"40px",borderRadius:"16px",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",maxWidth:"400px",width:"90%"},button:{marginTop:"20px",padding:"10px 20px",borderRadius:"20px",border:"none",backgroundColor:"#1db954",color:"white",fontWeight:"bold",cursor:"pointer"}},Ma=document.createElement("style");Ma.innerText=`
  .spin { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(Ma);const hf=y.memo(mf),gf=()=>{const{globalData:a}=La(),[r,n]=o.useState(null),[u,c]=o.useState(!1),m=qo();if(o.useEffect(()=>{if(a&&a.type==="chat_message_handler"&&a.username==="‚ö° Signal Bot"){const E=a.content.split(`
`),T=E.find(z=>z.includes("ü™ô"))||"Bilinmiyor",D=E.find(z=>z.includes("üìà"))||"",H={title:"YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞! üö®",coin:T.replace("ü™ô","").replace(/\*/g,"").trim(),direction:D.includes("LONG")?"Y√úKSELƒ∞≈û (LONG)":"D√ú≈û√ú≈û (SHORT)",isLong:D.includes("LONG"),raw:a};n(H),c(!0);const O=setTimeout(()=>{c(!1)},8e3);return()=>clearTimeout(O)}},[a]),!u||!r)return null;const C=()=>{c(!1),m("/")};return e.jsxs("div",{style:St.container,className:"slide-in-notification",children:[e.jsx("div",{style:St.iconBox,children:e.jsx(ll,{size:24,color:"#f0b232"})}),e.jsxs("div",{style:St.content,onClick:C,children:[e.jsx("h4",{style:St.title,children:r.title}),e.jsxs("div",{style:St.details,children:[e.jsx("span",{style:St.coinName,children:r.coin}),e.jsx("span",{style:{...St.directionBadge,backgroundColor:r.isLong?"rgba(35, 165, 89, 0.2)":"rgba(240, 71, 71, 0.2)",color:r.isLong?"#23a559":"#da373c"},children:r.direction})]}),e.jsxs("span",{style:St.hint,children:["Detaylar i√ßin tƒ±kla ",e.jsx(dl,{size:10})]})]}),e.jsx("button",{onClick:E=>{E.stopPropagation(),c(!1)},style:St.closeButton,children:e.jsx(Ko,{})})]})},St={container:{position:"fixed",top:"20px",right:"20px",width:"320px",backgroundColor:"#1e1f22",borderRadius:"8px",boxShadow:"0 8px 20px rgba(0,0,0,0.5)",borderLeft:"5px solid #f0b232",display:"flex",alignItems:"center",padding:"15px",zIndex:99999,cursor:"pointer",transition:"transform 0.3s ease-out"},iconBox:{marginRight:"15px",display:"flex",alignItems:"center"},content:{flex:1,display:"flex",flexDirection:"column"},title:{margin:0,color:"#fff",fontSize:"0.95em",fontWeight:"bold",marginBottom:"5px"},details:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"},coinName:{color:"#dcddde",fontWeight:"bold",fontSize:"1.1em"},directionBadge:{fontSize:"0.75em",padding:"2px 6px",borderRadius:"4px",fontWeight:"bold"},hint:{fontSize:"0.7em",color:"#949ba4",display:"flex",alignItems:"center",gap:"5px"},closeButton:{background:"none",border:"none",color:"#949ba4",cursor:"pointer",padding:"5px",marginLeft:"10px",fontSize:"1em"}},$a=document.createElement("style");$a.innerText=`
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  .slide-in-notification {
    animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
`;document.head.appendChild($a);function yf(a={}){const{nonce:r,onScriptLoadSuccess:n,onScriptLoadError:u}=a,[c,m]=o.useState(!1),C=o.useRef(n);C.current=n;const E=o.useRef(u);return E.current=u,o.useEffect(()=>{const T=document.createElement("script");return T.src="https://accounts.google.com/gsi/client",T.async=!0,T.defer=!0,T.nonce=r,T.onload=()=>{var D;m(!0),(D=C.current)===null||D===void 0||D.call(C)},T.onerror=()=>{var D;m(!1),(D=E.current)===null||D===void 0||D.call(E)},document.body.appendChild(T),()=>{document.body.removeChild(T)}},[r]),c}const xf=o.createContext(null);function Sf({clientId:a,nonce:r,onScriptLoadSuccess:n,onScriptLoadError:u,children:c}){const m=yf({nonce:r,onScriptLoadSuccess:n,onScriptLoadError:u}),C=o.useMemo(()=>({clientId:a,scriptLoadedSuccessfully:m}),[a,m]);return y.createElement(xf.Provider,{value:C},c)}const xe=({children:a})=>{const r=wo.isNativePlatform();return e.jsx("div",{style:{width:"100%",height:"100dvh",boxSizing:"border-box",paddingTop:r?"max(35px, env(safe-area-inset-top))":"0px",backgroundColor:"#1e1f22",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},children:a})};class bf extends y.Component{constructor(n){super(n);zr(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,u){console.error("üî¥ App Crashed:",n),console.error("Error Info:",u),this.setState({error:n,errorInfo:u});try{fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:n?.toString(),stack:n?.stack,componentStack:u?.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{})}catch(c){console.warn("Could not report error:",c)}}render(){return this.state.hasError?e.jsx("div",{style:bt.container,children:e.jsxs("div",{style:bt.content,children:[e.jsx("div",{style:bt.icon,children:"üí•"}),e.jsx("h1",{style:bt.title,children:"Oops! Bir ≈üeyler ters gitti"}),e.jsx("p",{style:bt.message,children:"√úzg√ºn√ºz, uygulama beklenmedik bir hatayla kar≈üƒ±la≈ütƒ±."}),e.jsxs("div",{style:bt.actions,children:[e.jsx("button",{onClick:this.handleReset,style:bt.button,children:"üîÑ Yeniden Ba≈ülat"}),e.jsx("button",{onClick:()=>window.location.href="/",style:{...bt.button,...bt.buttonSecondary},children:"üè† Ana Sayfaya D√∂n"})]}),!1]})}):this.props.children}}const bt={container:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#1E1F22",color:"#FFFFFF",padding:"20px",fontFamily:"'Inter', sans-serif"},content:{textAlign:"center",maxWidth:"600px",padding:"40px",background:"linear-gradient(135deg, #2B2D31 0%, #1E1F22 100%)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},icon:{fontSize:"80px",marginBottom:"20px",animation:"shake 0.5s ease-in-out"},title:{fontSize:"32px",fontWeight:"bold",marginBottom:"16px",color:"#FFFFFF"},message:{fontSize:"16px",color:"#B9BBBE",marginBottom:"32px",lineHeight:"1.6"},actions:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},button:{padding:"12px 24px",fontSize:"16px",fontWeight:"600",border:"none",borderRadius:"8px",cursor:"pointer",backgroundColor:"#5865F2",color:"#FFFFFF",transition:"all 0.2s",":hover":{backgroundColor:"#4752C4"}},buttonSecondary:{backgroundColor:"#4E5058",":hover":{backgroundColor:"#6A6F78"}}},wf={async post(a,r,n={}){const u={"Content-Type":"application/json",...n.headers};console.log("üì° [API] POST request:",a);try{const c=await Hn(a,{method:"POST",headers:u,body:JSON.stringify(r),credentials:"include"}),m=await c.json();if(!c.ok){const C=new Error(m.error||"Request failed");throw C.response={data:m,status:c.status},C}return{data:m,status:c.status}}catch(c){if(c.message==="No refresh token available"){const m=await fetch(a,{method:"POST",headers:u,body:JSON.stringify(r),credentials:"include"}),C=await m.json();if(!m.ok){const E=new Error(C.error||"Request failed");throw E.response={data:C,status:m.status},E}return{data:C,status:m.status}}throw c}},async get(a,r={}){const n={"Content-Type":"application/json",...r.headers};console.log("üì° [API] GET request:",a);try{const u=await Hn(a,{method:"GET",headers:n,credentials:"include"}),c=await u.json();if(!u.ok){const m=new Error(c.error||"Request failed");throw m.response={data:c,status:u.status},m}return{data:c,status:u.status}}catch(u){if(u.message==="No refresh token available"){const c=await fetch(a,{method:"GET",headers:n,credentials:"include"}),m=await c.json();if(!c.ok){const C=new Error(m.error||"Request failed");throw C.response={data:m,status:c.status},C}return{data:m,status:c.status}}throw u}}},vf=({apiBaseUrl:a})=>{const[r]=Mc(),n=qo(),{login:u}=vo(),[c,m]=o.useState("processing"),[C,E]=o.useState(null),T=o.useRef(!1);return o.useEffect(()=>{(async()=>{if(T.current){console.log("üîê [AuthCallback] Exchange already attempted, skipping...");return}T.current=!0;const H=r.get("code"),O=r.get("access_token"),z=r.get("refresh_token"),Z=r.get("error"),K=r.get("needs_password")==="true";if(console.log("üîê [AuthCallback] Starting...",{hasCode:!!H,hasAccessToken:!!O,apiBaseUrl:a}),Z){console.error("üîê [AuthCallback] Error param:",Z),m("error"),E("Google giri≈ü ba≈üarƒ±sƒ±z oldu. L√ºtfen tekrar deneyin."),setTimeout(()=>n("/"),3e3);return}if(O&&z){console.log("üîê [AuthCallback] Direct token mode");try{localStorage.setItem("access_token",O),localStorage.setItem("refreshToken",z),u&&await u(O,z),m("success"),setTimeout(()=>{n(K?"/settings?section=security&action=set-password":"/")},1500)}catch(V){console.error("üîê [AuthCallback] Direct token error:",V),m("error"),E("Token i≈üleme hatasƒ±."),setTimeout(()=>n("/"),3e3)}return}if(!H){console.error("üîê [AuthCallback] No code or tokens found"),m("error"),E("Yetkilendirme bilgisi bulunamadƒ±."),setTimeout(()=>n("/"),3e3);return}try{m("exchanging");const V=`${a}/auth/exchange-code/`;console.log("üîê [AuthCallback] Exchanging code at:",V);const B=await wf.post(V,{code:H});if(console.log("üîê [AuthCallback] Response:",B.data),B.data.success){const{access_token:G,refresh_token:Y,user_id:ue,needs_password:re}=B.data;localStorage.setItem("access_token",G),localStorage.setItem("refreshToken",Y),u&&await u(G,Y),m("success"),setTimeout(re?()=>{n("/settings?section=security&action=set-password")}:()=>{n("/")},1500)}else throw new Error(B.data.error||"Token exchange failed")}catch(V){console.error("Auth callback error:",V),m("error"),E(V.response?.data?.error||"Giri≈ü i≈ülemi ba≈üarƒ±sƒ±z oldu."),setTimeout(()=>n("/"),3e3)}})()},[r,n,u,a]),e.jsx("div",{className:"auth-callback-container",children:e.jsxs("div",{className:"auth-callback-card",children:[c==="processing"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"auth-spinner"}),e.jsx("h2",{children:"ƒ∞≈üleniyor..."}),e.jsx("p",{children:"Google hesabƒ±nƒ±z doƒürulanƒ±yor"})]}),c==="exchanging"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"auth-spinner"}),e.jsx("h2",{children:"Giri≈ü Yapƒ±lƒ±yor..."}),e.jsx("p",{children:"G√ºvenli baƒülantƒ± kuruluyor"})]}),c==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"auth-success-icon",children:"‚úì"}),e.jsx("h2",{children:"Giri≈ü Ba≈üarƒ±lƒ±!"}),e.jsx("p",{children:"Y√∂nlendiriliyorsunuz..."})]}),c==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"auth-error-icon",children:"‚úï"}),e.jsx("h2",{children:"Hata"}),e.jsx("p",{children:C}),e.jsx("p",{className:"auth-redirect-text",children:"Ana sayfaya y√∂nlendiriliyorsunuz..."})]})]})})},_f=y.lazy(()=>x(()=>import("./EnglishHub-DHvecJYV.js"),__vite__mapDeps([173,2,3,4,6]))),kf=y.lazy(()=>x(()=>import("./GrammarQuizPage-rcUqV7C-.js"),__vite__mapDeps([174,2,3,4,6,175,1,5,7]))),Cf=y.lazy(()=>x(()=>import("./EnglishLearningPage-CX0gBc-M.js"),__vite__mapDeps([176,2,3,4,175,1,5,6,7]))),jf=y.lazy(()=>x(()=>import("./CryptoDashboard-CP9kqHjs.js"),__vite__mapDeps([177,2,3,4,6,1,5,7]))),Tf=y.lazy(()=>x(()=>import("./CryptoSignals-BYwb3DWH.js"),__vite__mapDeps([178,2,3,6,4,1,5,7]))),Ef=y.lazy(()=>x(()=>import("./ForgotPasswordPage-V8ruJl1W.js"),__vite__mapDeps([122,2,3,6,38,4]))),Rf=y.lazy(()=>x(()=>import("./ResetPasswordPage-DXlgdgnW.js"),__vite__mapDeps([123,2,3,6,4]))),Af=y.lazy(()=>x(()=>import("./TwoFactorLoginPage-CHcsM-py.js"),__vite__mapDeps([124,2,3,4,6,1,5,7]))),Pf=y.lazy(()=>x(()=>import("./VerifyEmailPage-CAsMSWZa.js"),__vite__mapDeps([121,2,3,6,4]))),ba=y.lazy(()=>x(()=>import("./PrivacyPolicyPage-1cNh_lPF.js"),__vite__mapDeps([179,2,3]))),If=y.lazy(()=>x(()=>import("./StorePage-DO-h1K0f.js"),__vite__mapDeps([180,2,3,1,4,5,6,7]))),Lf=y.lazy(()=>x(()=>import("./LandingPage-Cbu92SfE.js"),__vite__mapDeps([181,2,3,142,1,4,5,6,7,182]))),Of=y.lazy(()=>x(()=>import("./ReferralProgram-CBHb71GI.js"),__vite__mapDeps([183,2,3,142,1,4,5,6,7,184]))),Df=y.lazy(()=>x(()=>import("./GrowthDashboard-Bx_Xwruo.js"),__vite__mapDeps([185,2,3,142,186]))),Mf=y.lazy(()=>x(()=>import("./ToastDemo-Bu0c5OHZ.js"),__vite__mapDeps([187,2,3,1,4,5,6,7,188]))),$f=Ra,zf=()=>(o.useEffect(()=>{const a=setTimeout(()=>{try{Ta()}catch(r){console.warn("preloadCriticalChunks error",r)}},3e3);if("requestIdleCallback"in window)window.requestIdleCallback(()=>{try{Fn()}catch(r){console.warn("prefetchNextChunks error",r)}},{timeout:2e3});else{const r=setTimeout(()=>{try{Fn()}catch(n){console.warn("prefetchNextChunks error",n)}},4e3);return()=>clearTimeout(r)}return()=>clearTimeout(a)},[]),e.jsx(Sf,{clientId:$f,children:e.jsx(Xl,{children:e.jsx(nd,{children:e.jsx(bf,{children:e.jsxs($c,{children:[e.jsx(gf,{}),e.jsxs(zc,{children:[e.jsx(me,{path:"/verify/:token",element:e.jsx(xe,{children:e.jsx(lf,{})})}),e.jsx(me,{path:"/verify-email/:token",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Pf,{apiBaseUrl:tt})})})}),e.jsx(me,{path:"/forgot-password",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Ef,{apiBaseUrl:tt})})})}),e.jsx(me,{path:"/reset-password/:token",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Rf,{apiBaseUrl:tt})})})}),e.jsx(me,{path:"/2fa-login",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Af,{apiBaseUrl:tt})})})}),e.jsx(me,{path:"/auth/callback",element:e.jsx(xe,{children:e.jsx(vf,{apiBaseUrl:wt})})}),e.jsx(me,{path:"/privacy-policy",element:e.jsx(y.Suspense,{fallback:e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#fff"},children:"Loading..."}),children:e.jsx(ba,{})})}),e.jsx(me,{path:"/terms-of-service",element:e.jsx(y.Suspense,{fallback:e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#fff"},children:"Loading..."}),children:e.jsx(ba,{})})}),e.jsx(me,{path:"/store",element:e.jsx(y.Suspense,{fallback:e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#fff"},children:"Loading..."}),children:e.jsx(If,{})})}),e.jsx(me,{path:"/launch",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Lf,{apiBaseUrl:tt})})})}),e.jsx(me,{path:"/referral",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Of,{apiBaseUrl:tt})})})}),e.jsx(me,{path:"/growth-dashboard",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Df,{apiBaseUrl:tt})})})}),e.jsx(me,{path:"/toast-demo",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Mf,{})})})}),e.jsx(me,{path:"/invite/:code",element:e.jsx(xe,{children:e.jsx(df,{})})}),e.jsx(me,{path:"/spotify-callback",element:e.jsx(xe,{children:e.jsx(hf,{apiBaseUrl:tt})})}),e.jsx(me,{path:"/eng-learn",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(_f,{})})})}),e.jsx(me,{path:"/eng-learn/vocab",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Cf,{})})})}),e.jsx(me,{path:"/eng-learn/grammar",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(kf,{})})})}),e.jsx(me,{path:"/eng-learn/voice",element:e.jsx(xe,{children:e.jsx(uf,{apiBaseUrl:tt})})}),e.jsx(me,{path:"/eng-learn/pronunciation",element:e.jsx(xe,{children:e.jsx(pf,{apiBaseUrl:tt})})}),e.jsx(me,{path:"/crypto-analysis",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Tf,{})})})}),e.jsx(me,{path:"/crypto-dashboard-old",element:e.jsx(xe,{children:e.jsx(y.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(jf,{})})})}),e.jsx(me,{path:"/*",element:e.jsx(sf,{})})]})]})})})})})),Vf=Dc.createRoot(document.getElementById("root"));Vf.render(e.jsx(zf,{}));export{tt as A,wo as C,wl as G,Wn as T,ja as W,vo as a,Pp as b,Ip as c,Kl as d,Te as e,Rp as f,Ap as g,Ep as h,Qn as i,Ml as j,rd as k,Ae as l,Vl as m,Zn as r,$ as t,La as u};
