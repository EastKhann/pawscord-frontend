var S=Object.defineProperty;var a=(d,h)=>S(d,"name",{value:h,configurable:!0});import{r as n,j as s}from"./react-core-Djgtqrmb.js";import{t as v}from"./index-CjRzheBN.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BW7dxHkX.js";import"./ui-vendor-IhB9Znpc.js";const F=a(({apiBaseUrl:d,username:h,onClose:u})=>{const[c,k]=n.useState([]),[x,b]=n.useState([]),[f,p]=n.useState(!0),[r,j]=n.useState("all"),[i,m]=n.useState("all");n.useEffect(()=>{y(),C()},[h]);const y=a(async()=>{try{p(!0);const e=localStorage.getItem("access_token"),l=await fetch(`${d}/api/user/achievements/`,{headers:{Authorization:`Bearer ${e}`}});if(l.ok){const o=await l.json();k(o.achievements||[])}else v.error("‚ùå Ba≈üarƒ±lar y√ºklenemedi")}catch{v.error("‚ùå Baƒülantƒ± hatasƒ±")}finally{p(!1)}},"fetchAchievements"),C=a(async()=>{try{const e=localStorage.getItem("access_token"),l=await fetch(`${d}/api/user/badges/`,{headers:{Authorization:`Bearer ${e}`}});if(l.ok){const o=await l.json();b(o.badges||[])}}catch{}},"fetchBadges"),g=c.filter(e=>{const l=r==="all"||r==="unlocked"&&e.unlocked||r==="locked"&&!e.unlocked,o=i==="all"||e.category===i;return l&&o}),t={total:c.length,unlocked:c.filter(e=>e.unlocked).length,locked:c.filter(e=>!e.unlocked).length,progress:c.length>0?Math.round(c.filter(e=>e.unlocked).length/c.length*100):0},N=a(e=>{const l={common:"#95a5a6",uncommon:"#3498db",rare:"#9b59b6",epic:"#e74c3c",legendary:"#f39c12"};return l[e]||l.common},"getRarityColor"),w=a(e=>e==="legendary"?"0 0 20px rgba(243, 156, 18, 0.6)":e==="epic"?"0 0 15px rgba(231, 76, 60, 0.5)":e==="rare"?"0 0 10px rgba(155, 89, 182, 0.4)":"none","getRarityGlow");return s.jsx("div",{className:"achievements-overlay",onClick:u,children:s.jsxs("div",{className:"achievements-panel",onClick:a(e=>e.stopPropagation(),"onClick"),children:[s.jsxs("div",{className:"achievements-header",children:[s.jsx("h2",{children:"üèÜ Ba≈üarƒ±lar & Rozetler"}),s.jsx("button",{className:"close-btn",onClick:u,children:"‚úï"})]}),s.jsxs("div",{className:"achievements-stats",children:[s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"üéØ"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[t.unlocked,"/",t.total]}),s.jsx("span",{className:"stat-label",children:"Ba≈üarƒ±"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"üìä"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[t.progress,"%"]}),s.jsx("span",{className:"stat-label",children:"Tamamlanma"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"üéñÔ∏è"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:x.length}),s.jsx("span",{className:"stat-label",children:"Rozet"})]})]})]}),s.jsxs("div",{className:"progress-section",children:[s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:`${t.progress}%`}})}),s.jsxs("span",{className:"progress-text",children:[t.progress,"% Complete"]})]}),s.jsxs("div",{className:"achievements-filters",children:[s.jsxs("div",{className:"filter-group",children:[s.jsxs("button",{className:r==="all"?"active":"",onClick:a(()=>j("all"),"onClick"),children:["T√ºm√º (",t.total,")"]}),s.jsxs("button",{className:r==="unlocked"?"active":"",onClick:a(()=>j("unlocked"),"onClick"),children:["‚úì A√ßƒ±k (",t.unlocked,")"]}),s.jsxs("button",{className:r==="locked"?"active":"",onClick:a(()=>j("locked"),"onClick"),children:["üîí Kilitli (",t.locked,")"]})]}),s.jsxs("div",{className:"category-group",children:[s.jsx("button",{className:i==="all"?"active":"",onClick:a(()=>m("all"),"onClick"),children:"T√ºm Kategoriler"}),s.jsx("button",{className:i==="social"?"active":"",onClick:a(()=>m("social"),"onClick"),children:"üë• Sosyal"}),s.jsx("button",{className:i==="activity"?"active":"",onClick:a(()=>m("activity"),"onClick"),children:"‚ö° Aktivite"}),s.jsx("button",{className:i==="special"?"active":"",onClick:a(()=>m("special"),"onClick"),children:"‚≠ê √ñzel"})]})]}),s.jsxs("div",{className:"achievements-content",children:[x.length>0&&s.jsxs("div",{className:"badges-section",children:[s.jsx("h3",{children:"üéñÔ∏è Rozetler"}),s.jsx("div",{className:"badges-grid",children:x.map(e=>s.jsxs("div",{className:"badge-card",title:e.description,children:[s.jsx("div",{className:"badge-icon",children:e.icon}),s.jsx("div",{className:"badge-name",children:e.name})]},e.id))})]}),s.jsx("div",{className:"achievements-grid",children:f?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"Y√ºkleniyor..."})]}):g.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"üéØ Ba≈üarƒ± bulunamadƒ±"})}):g.map(e=>s.jsxs("div",{className:`achievement-card ${e.unlocked?"unlocked":"locked"} ${e.rarity}`,style:{boxShadow:e.unlocked?w(e.rarity):"none"},children:[s.jsxs("div",{className:"achievement-icon-wrapper",children:[s.jsx("div",{className:"achievement-icon",children:e.icon||"üèÜ"}),e.unlocked&&s.jsx("div",{className:"unlocked-badge",children:"‚úì"})]}),s.jsxs("div",{className:"achievement-info",children:[s.jsx("div",{className:"achievement-name",children:e.name}),s.jsx("div",{className:"achievement-description",children:e.description}),e.progress!==void 0&&!e.unlocked&&s.jsxs("div",{className:"achievement-progress",children:[s.jsx("div",{className:"mini-progress-bar",children:s.jsx("div",{className:"mini-progress-fill",style:{width:`${e.current/e.target*100}%`,backgroundColor:N(e.rarity)}})}),s.jsxs("span",{className:"progress-label",children:[e.current,"/",e.target]})]}),e.unlocked&&e.unlocked_at&&s.jsxs("div",{className:"unlocked-date",children:["A√ßƒ±ldƒ±: ",new Date(e.unlocked_at).toLocaleDateString("tr-TR")]})]}),s.jsx("div",{className:"rarity-badge",style:{backgroundColor:N(e.rarity),color:"white"},children:e.rarity||"common"})]},e.id))})]})]})})},"AchievementsPanel");export{F as default};
