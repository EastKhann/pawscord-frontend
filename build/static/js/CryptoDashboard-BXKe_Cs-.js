var ge=Object.defineProperty;var n=(t,a)=>ge(t,"name",{value:a,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{L as xe}from"./router-vendor-gmJ9Mn-1.js";import{a as G,A as ue,J as he,T as be,c as fe,U as me,O as ye,P as je,V as Se,W as Ce}from"./icons-vendor-BMXAt4pj.js";import{a as ke,g as Be,b as ve,t as E}from"./index-DjBRFZUD.js";import{u as Te}from"./useWindowWidth-Bfmtox1e.js";import"./media-vendor-CxFPycob.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const H=Be(),Ae=ve(),we=`${H}/api/crypto/signals/`,Pe=n(()=>{const[t,a]=d.useState(null),[o,l]=d.useState(!0),[c,x]=d.useState(null),[b,m]=d.useState(""),[S,C]=d.useState("balance_mode"),[g,L]=d.useState("TUM_STRATEJILER"),[k,D]=d.useState(""),[j,F]=d.useState("rank"),[P,I]=d.useState("asc"),[v,R]=d.useState(1),T=50,[u,W]=d.useState(!1),[N,Q]=d.useState(null),[oe,Z]=d.useState(null),[_,re]=d.useState({}),$=d.useRef(t),{token:A}=ke(),{isMobile:ne}=Te();d.useEffect(()=>{$.current=t},[t]),d.useEffect(()=>{R(1)},[g,S,k]);const M=d.useCallback(async()=>{$.current||l(!0),x(null);try{const i=await fetch(we);if(!i.ok)throw new Error(`HTTP ${i.status}`);const s=await i.json();if(s.error){x(s.error),l(!1);return}a(s)}catch(i){$.current||x("Sunucuya baÄŸlanÄ±lamadÄ±: "+i.message)}finally{l(!1)}},[]),J=d.useCallback(async()=>{if(A)try{const i=await fetch(`${H}/portfolio/my/`,{headers:{Authorization:`Bearer ${A}`}});i.ok&&Z(await i.json())}catch{}},[A]),Y=d.useCallback(async()=>{try{const i=`${Ae}/crypto_prices.json?t=${Date.now()}`,s=await fetch(i);s.ok&&re(await s.json())}catch{}},[]);d.useEffect(()=>{M(),J(),Y();const i=setInterval(Y,1500),s=setInterval(M,1e4);return()=>{clearInterval(i),clearInterval(s)}},[A,M,J,Y]);const V=n(i=>{if(!i)return null;const s=i.toUpperCase(),p=s.match(/([A-Z0-9]+USDT)/);return p?p[0]:s.replace(/[^A-Z0-9]/g,"")},"extractCoinSymbol"),ae=n(i=>{const s=V(i);if(s&&_[s])return _[s];const p=s?.replace("USDT","");return p&&_[p]?_[p]:null},"getLivePrice"),se=n(async(i,s,p,f)=>{if(!A)return E.error("âŒ GiriÅŸ yapmalÄ±sÄ±nÄ±z!");let h=s.toUpperCase();h.endsWith("USDT")||(h+="USDT");try{const O=await fetch(`${H}/portfolio/trade/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({symbol:h,action:i,amount:p,price:f})}),K=await O.json();O.ok?(E.success("âœ… Ä°ÅŸlem BaÅŸarÄ±lÄ±!"),Z(K),Q(null)):E.error(`âŒ Hata: ${K.error}`)}catch{E.error("âŒ Sunucu hatasÄ±.")}},"handleTrade"),y=d.useMemo(()=>!t||!t[S]?null:t[S],[t,S]),X=d.useMemo(()=>!y||!y.tabs||!y.tabs[g]?[]:y.tabs[g].data||[],[y,g]),le=d.useMemo(()=>!y||!y.tabs||!y.tabs[g]?null:y.tabs[g],[y,g]),w=d.useMemo(()=>{let i=[...X];if(k.trim()){const s=k.trim().toUpperCase();i=i.filter(p=>p.coin&&p.coin.toUpperCase().includes(s)||p.timeframe&&p.timeframe.toUpperCase().includes(s)||p.signal&&p.signal.toUpperCase().includes(s))}return i.sort((s,p)=>{let f,h;switch(j){case"rank":f=s.rank||9999,h=p.rank||9999;break;case"coin":return f=s.coin||"",h=p.coin||"",P==="asc"?f.localeCompare(h):h.localeCompare(f);case"pnl":f=parseFloat(String(s.pnl_percent||"0").replace("%","").replace("+","")),h=parseFloat(String(p.pnl_percent||"0").replace("%","").replace("+",""));break;case"win_rate":f=parseFloat(String(s.win_rate||"0").replace("%","")),h=parseFloat(String(p.win_rate||"0").replace("%",""));break;case"x_kat":f=parseFloat(String(s.x_kat||"0").replace("x","")),h=parseFloat(String(p.x_kat||"0").replace("x",""));break;case"trades":f=parseInt(s.trades||0),h=parseInt(p.trades||0);break;default:f=s.rank||9999,h=p.rank||9999}return P==="asc"?f-h:h-f}),i},[X,k,j,P]),ie=Math.max(1,Math.ceil(w.length/T)),de=w.slice((v-1)*T,v*T),ce=g==="ACIK_POZISYONLAR",q=t?.meta||{},U=q.position_coins||[],pe=d.useMemo(()=>{const i={};return U.length>0&&w.length>0&&U.forEach(s=>{const p=w.filter(h=>h.coin===s),f=p.some(h=>h.ters_sinyal===!0);i[s]={hasTersSinyal:f,rows:p}}),i},[U,w]);return{data:t,loading:o,errorMsg:c,debugInfo:b,activeMode:S,setActiveMode:C,activeTab:g,setActiveTab:L,searchQuery:k,setSearchQuery:D,sortBy:j,sortDir:P,handleSort:n(i=>{j===i?I(s=>s==="asc"?"desc":"asc"):(F(i),I(i==="rank"?"asc":"desc"))},"handleSort"),page:v,setPage:R,showPortfolio:u,setShowPortfolio:W,tradeData:N,setTradeData:Q,portfolio:oe,prices:_,fetchData:M,handleTrade:se,modeData:y,tabInfo:le,processedData:w,pagedData:de,totalPages:ie,isPositionsTab:ce,meta:q,positionCoins:U,positionCoinStatus:pe,extractCoinSymbol:V,getLivePrice:ae,isMobile:ne}},"useCryptoData"),z=n(t=>t==null?"-":typeof t=="object"?JSON.stringify(t):String(t),"safeRender"),B=n(t=>!t||t==="YÃ¼kleniyor..."||t==="Fiyat Bekleniyor..."?t:parseFloat(t).toString(),"formatPrice"),Ie=n(t=>{if(!t)return"#949ba4";const a=String(t);return a.startsWith("+")?"#23a559":a.startsWith("-")?"#da373c":"#f0b232"},"pnlColor"),Re={TUM_STRATEJILER:{icon:"ðŸ“Š",shortLabel:"TÃ¼mÃ¼",color:"#5865f2"},ACIK_POZISYONLAR:{icon:"ðŸ’¼",shortLabel:"AÃ§Ä±k Poz.",color:"#f0b232"},POZISYON_OLMAYAN:{icon:"ðŸ”",shortLabel:"Poz. Yok",color:"#949ba4"},ZARARDA_OLANLAR:{icon:"ðŸ”´",shortLabel:"Zararda",color:"#da373c"},ALIM_FIRSATI:{icon:"ðŸ’°",shortLabel:"AlÄ±m FÄ±r.",color:"#23a559"}},te=n(({price:t})=>{const[a,o]=d.useState(t),[l,c]=d.useState("");d.useEffect(()=>{if(!t||t==="YÃ¼kleniyor..."||t==="Fiyat Bekleniyor..."||t==="...")return;const b=parseFloat(t),m=parseFloat(a);b>m?c("flash-green"):b<m&&c("flash-red"),o(t);const S=setTimeout(()=>c(""),1e3);return()=>clearTimeout(S)},[t]);const x=B(t);return e.jsx("span",{className:l,style:{fontSize:"0.95em",fontWeight:"bold",color:t==="YÃ¼kleniyor..."||t==="Fiyat Bekleniyor..."||t==="..."?"#999":l==="flash-green"?"#23a559":l==="flash-red"?"#da373c":"#23a559",transition:"color 0.5s ease"},children:t!=="YÃ¼kleniyor..."&&t!=="Fiyat Bekleniyor..."&&t!=="..."?`$${x}`:t})},"LivePrice"),ee=n(({signal:t})=>{if(!t||t==="-")return e.jsx("span",{style:{color:"#949ba4"},children:"-"});const a=t==="LONG";return e.jsxs("span",{style:{backgroundColor:a?"rgba(35,165,89,0.15)":"rgba(218,55,60,0.15)",color:a?"#23a559":"#da373c",padding:"2px 8px",borderRadius:4,fontWeight:700,fontSize:"0.8em",border:`1px solid ${a?"rgba(35,165,89,0.3)":"rgba(218,55,60,0.3)"}`},children:[a?"â–²":"â–¼"," ",t]})},"SignalBadge"),_e=n(({status:t})=>{if(!t)return e.jsx("span",{style:{color:"#949ba4"},children:"-"});const a=String(t),o=a.includes("KAR")||a.includes("UYUYOR"),l=a.includes("ZARAR")||a.includes("TERS");return e.jsx("span",{style:{fontSize:"0.8em",fontWeight:600,color:o?"#23a559":l?"#da373c":"#f0b232"},children:a})},"StatusBadge"),r={pageContainer:{minHeight:"100%",backgroundColor:"#1e1f22",color:"#dbdee1",padding:"20px",boxSizing:"border-box"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #2b2d31",flexWrap:"wrap",gap:10},headerLeft:{display:"flex",flexDirection:"column",gap:"5px"},title:{margin:0,fontSize:"1.4em",display:"flex",alignItems:"center",fontWeight:"700",color:"#fff"},backButton:{textDecoration:"none",color:"#949ba4",fontSize:"0.9em",display:"flex",alignItems:"center",gap:"5px"},refreshButton:{backgroundColor:"#5865f2",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},portfolioBtn:{backgroundColor:"#2b2d31",border:"1px solid #f0b232",color:"#f0b232",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",gap:"5px"},metaBar:{display:"flex",gap:20,flexWrap:"wrap",padding:"8px 12px",backgroundColor:"#2b2d31",borderRadius:8,marginBottom:15,fontSize:"0.85em",color:"#dbdee1",alignItems:"center"},modeToggleContainer:{display:"flex",gap:10,marginBottom:15},modeToggleBtn:{flex:1,padding:"12px 20px",borderRadius:8,border:"2px solid #40444b",backgroundColor:"#2b2d31",color:"#949ba4",cursor:"pointer",fontWeight:700,fontSize:"0.95em",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},modeToggleActive:{backgroundColor:"#313338",color:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},tabBar:{marginBottom:15,overflowX:"auto"},tabs:{display:"flex",gap:"6px",paddingBottom:"5px",minWidth:"max-content"},tabButton:{backgroundColor:"#2b2d31",border:"1px solid #40444b",color:"#949ba4",padding:"8px 14px",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"0.85em",display:"flex",alignItems:"center",gap:4,whiteSpace:"nowrap",transition:"all 0.2s"},activeTab:{color:"#fff",fontWeight:"700",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},filterBar:{display:"flex",gap:15,marginBottom:15,alignItems:"center",flexWrap:"wrap"},searchBox:{display:"flex",alignItems:"center",backgroundColor:"#2b2d31",borderRadius:8,padding:"6px 12px",border:"1px solid #40444b",flex:1,maxWidth:400},searchInput:{backgroundColor:"transparent",border:"none",outline:"none",color:"#dbdee1",fontSize:"0.9em",flex:1},clearSearchBtn:{background:"none",border:"none",color:"#949ba4",cursor:"pointer",padding:"2px 5px"},resultInfo:{display:"flex",alignItems:"center",gap:10},positionBanner:{padding:"10px 15px",backgroundColor:"rgba(240,178,50,0.08)",border:"1px solid rgba(240,178,50,0.2)",borderRadius:8,marginBottom:15,fontSize:"0.85em",color:"#dbdee1",display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},positionCoinTag:{padding:"3px 10px",borderRadius:6,fontWeight:700,fontSize:"0.8em",display:"inline-flex",alignItems:"center",gap:3,transition:"all 0.2s"},content:{},tableContainer:{overflowX:"auto",borderRadius:10,border:"1px solid #2f3136",backgroundColor:"#2b2d31"},table:{width:"100%",borderCollapse:"collapse",fontSize:"0.85em"},tableHeaderRow:{backgroundColor:"#202225",borderBottom:"2px solid #40444b"},tfBadge:{backgroundColor:"#40444b",color:"#dbdee1",padding:"2px 6px",borderRadius:4,fontSize:"0.8em",fontWeight:600},miniTradeBtn:{backgroundColor:"#23a559",color:"white",border:"none",padding:"5px 8px",borderRadius:4,cursor:"pointer",fontSize:"0.8em",display:"flex",alignItems:"center"},pagination:{display:"flex",justifyContent:"center",alignItems:"center",gap:10,marginTop:20,paddingBottom:30},pageBtn:{backgroundColor:"#2b2d31",border:"1px solid #40444b",color:"#dbdee1",padding:"8px 16px",borderRadius:6,cursor:"pointer",fontWeight:600,fontSize:"0.85em"},pageNumbers:{display:"flex",gap:4},pageNumBtn:{backgroundColor:"#2b2d31",border:"1px solid #40444b",color:"#949ba4",padding:"6px 10px",borderRadius:4,cursor:"pointer",fontSize:"0.85em",minWidth:32,textAlign:"center"},pageNumActive:{backgroundColor:"#5865f2",borderColor:"#5865f2",color:"#fff",fontWeight:700},loader:{textAlign:"center",marginTop:80,color:"#949ba4",fontSize:"1.1em"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},modalContent:{backgroundColor:"#313338",padding:"25px",borderRadius:"12px",width:"90%",maxWidth:"400px",border:"1px solid #40444b",boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,color:"white",borderBottom:"1px solid #444",paddingBottom:10},closeBtn:{background:"none",border:"none",color:"#bbb",fontSize:"1.2em",cursor:"pointer"},modeBtn:{flex:1,padding:"12px",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1em"},inputWrapper:{marginBottom:15},input:{flex:1,padding:"12px",borderRadius:"6px 0 0 6px",border:"1px solid #40444b",backgroundColor:"#202225",color:"white",fontSize:"1.1em",outline:"none",width:"100%"},maxBtn:{padding:"0 15px",backgroundColor:"#40444b",border:"1px solid #40444b",borderRadius:"0 6px 6px 0",color:"#f0b232",fontWeight:"bold",cursor:"pointer"},confirmBtn:{width:"100%",padding:"15px",border:"none",borderRadius:"6px",color:"white",fontWeight:"bold",fontSize:"1.1em",cursor:"pointer",marginTop:10},balanceCard:{backgroundColor:"#202225",padding:"15px",borderRadius:"8px",textAlign:"center",marginBottom:"20px",border:"1px solid #f0b232"},holdingsList:{maxHeight:"250px",overflowY:"auto",margin:"10px 0"},holdingItem:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #40444b",alignItems:"center"}};if(typeof document<"u"){const t="crypto-dashboard-styles";if(!document.getElementById(t)){const a=document.createElement("style");a.id=t,a.innerText=`
  @keyframes flashGreen { 0% { color: #fff; background: rgba(35, 165, 89, 0.5); } 100% { color: #23a559; background: transparent; } }
  @keyframes flashRed { 0% { color: #fff; background: rgba(218, 55, 60, 0.5); } 100% { color: #da373c; background: transparent; } }
  .flash-green { animation: flashGreen 1s ease-out; }
  .flash-red { animation: flashRed 1s ease-out; }
  td, th { padding: 8px 10px; text-align: center; border-bottom: 1px solid #2f3136; }
  th { color: #949ba4; font-weight: 600; font-size: 0.8em; }
  input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
`,document.head.appendChild(a)}}const ze=n(({coin:t,initialPrice:a,livePrices:o,portfolio:l,onClose:c,onTrade:x})=>{const[b,m]=d.useState(""),[S,C]=d.useState(""),[g,L]=d.useState("BUY"),k=Object.keys(o).find(u=>u===t||u===`${t}USDT`)||t,D=o[k]||a,j=parseFloat(String(D).replace(/,/g,"").replace("$","")),F=parseFloat(l?.balance||0),I=n(()=>{if(!l?.holdings)return 0;const W=Object.keys(l.holdings).find(N=>N.includes(t));return W?parseFloat(l.holdings[W]):0},"findHolding")();d.useEffect(()=>{b&&!isNaN(parseFloat(b))&&C((parseFloat(b)*j).toFixed(2))},[j]);const v=n(u=>{if(m(u),!u||isNaN(parseFloat(u))){C("");return}C((parseFloat(u)*j).toFixed(2))},"handleAmountChange"),R=n(u=>{if(C(u),!u||isNaN(parseFloat(u))){m("");return}m(parseFloat((parseFloat(u)/j).toFixed(6)).toString())},"handleUsdtChange"),T=n(()=>{g==="BUY"?R(F.toString()):v(I.toString())},"handleMax");return e.jsx("div",{style:r.modalOverlay,children:e.jsxs("div",{style:r.modalContent,children:[e.jsxs("div",{style:r.modalHeader,children:[e.jsxs("h3",{children:[g==="BUY"?"ðŸŸ¢ AlÄ±ÅŸ":"ðŸ”´ SatÄ±ÅŸ",": ",t]}),e.jsx("button",{onClick:c,style:r.closeBtn,children:e.jsx(G,{})})]}),e.jsxs("div",{style:{backgroundColor:"#2b2d31",padding:10,borderRadius:8,marginBottom:15,textAlign:"center"},children:[e.jsx("span",{style:{color:"#999",fontSize:"0.9em"},children:"CanlÄ± Piyasa FiyatÄ±"}),e.jsx("div",{style:{fontSize:"1.4em",fontWeight:"bold"},children:e.jsx(te,{price:D})})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginBottom:15},children:[e.jsx("button",{onClick:n(()=>{L("BUY"),m(""),C("")},"onClick"),style:{...r.modeBtn,backgroundColor:g==="BUY"?"#23a559":"#2b2d31",opacity:g==="BUY"?1:.5},children:"AL (Buy)"}),e.jsx("button",{onClick:n(()=>{L("SELL"),m(""),C("")},"onClick"),style:{...r.modeBtn,backgroundColor:g==="SELL"?"#da373c":"#2b2d31",opacity:g==="SELL"?1:.5},children:"SAT (Sell)"})]}),e.jsxs("div",{style:{marginBottom:10,fontSize:"0.85em",color:"#dbdee1",display:"flex",justifyContent:"space-between",padding:"0 5px"},children:[e.jsxs("span",{children:["ðŸ’° Bakiye: ",e.jsxs("span",{style:{color:"#23a559"},children:["$",F.toFixed(2)]})]}),e.jsxs("span",{children:["ðŸª™ VarlÄ±k: ",e.jsxs("span",{style:{color:"#f0b232"},children:[B(I)," ",t]})]})]}),e.jsxs("div",{style:r.inputWrapper,children:[e.jsxs("label",{children:["Miktar (",t,")"]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("input",{type:"number",value:b,onChange:n(u=>v(u.target.value),"onChange"),style:r.input,placeholder:"0"}),g==="SELL"&&e.jsx("button",{onClick:T,style:r.maxBtn,children:"MAX"})]})]}),e.jsxs("div",{style:r.inputWrapper,children:[e.jsx("label",{children:"Toplam (USDT)"}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("input",{type:"number",value:S,onChange:n(u=>R(u.target.value),"onChange"),style:r.input,placeholder:"0"}),g==="BUY"&&e.jsx("button",{onClick:T,style:r.maxBtn,children:"MAX"})]})]}),e.jsx("button",{onClick:n(()=>x(g,t,b,j),"onClick"),style:{...r.confirmBtn,backgroundColor:g==="BUY"?"#23a559":"#da373c"},disabled:!b||parseFloat(b)<=0,children:g==="BUY"?"SATIN AL":"SATIÅž YAP"})]})})},"TradeModal"),Le=n(({portfolio:t,onClose:a})=>t?e.jsx("div",{style:r.modalOverlay,onClick:a,children:e.jsxs("div",{style:r.modalContent,onClick:n(o=>o.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:r.modalHeader,children:[e.jsx("h2",{children:"ðŸ’¼ CÃ¼zdanÄ±m"}),e.jsx("button",{onClick:a,style:r.closeBtn,children:e.jsx(G,{})})]}),e.jsxs("div",{style:r.balanceCard,children:[e.jsx("span",{children:"Toplam Bakiye (USDT)"}),e.jsxs("h1",{style:{color:"#23a559",margin:"5px 0"},children:["$",B(t.balance)]})]}),e.jsx("h4",{style:{borderBottom:"1px solid #444",paddingBottom:5,marginBottom:10},children:"VarlÄ±klarÄ±m"}),e.jsx("div",{style:r.holdingsList,children:!t.holdings||Object.keys(t.holdings).length===0?e.jsx("p",{style:{color:"#999",textAlign:"center"},children:"HenÃ¼z coin almadÄ±nÄ±z."}):Object.entries(t.holdings).map(([o,l])=>e.jsxs("div",{style:r.holdingItem,children:[e.jsx("strong",{style:{color:"#fff",fontSize:"1.1em"},children:o.replace("USDT","")}),e.jsxs("span",{style:{color:"#f0b232"},children:[B(l)," Adet"]})]},o))})]})}):null,"PortfolioModal"),Ge=n(()=>{const t=Pe(),a=n(({field:o,children:l,style:c})=>e.jsxs("th",{onClick:n(()=>t.handleSort(o),"onClick"),style:{cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",color:t.sortBy===o?"#f0b232":"#949ba4",...c},children:[l," ",t.sortBy===o?t.sortDir==="asc"?"â–²":"â–¼":""]}),"SortHeader");return e.jsxs("div",{style:{...r.pageContainer,paddingTop:t.isMobile?"max(10px, env(safe-area-inset-top))":"20px"},children:[e.jsxs("div",{style:r.header,children:[e.jsxs("div",{style:r.headerLeft,children:[e.jsxs(xe,{to:"/",style:r.backButton,children:[e.jsx(ue,{})," Ana MenÃ¼"]}),e.jsxs("h1",{style:r.title,children:[e.jsx(he,{style:{color:"#f0b232",marginRight:"10px"}}),"Crypto AI Dashboard",t.meta.version&&e.jsxs("span",{style:{fontSize:"0.5em",color:"#949ba4",marginLeft:10},children:["v",t.meta.version]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:n(()=>t.setShowPortfolio(!0),"onClick"),style:r.portfolioBtn,children:[e.jsx(be,{})," CÃ¼zdan ($",B(t.portfolio?.balance||"0"),")"]}),e.jsxs("button",{onClick:t.fetchData,style:r.refreshButton,children:[e.jsx(fe,{className:t.loading?"spin":""})," ",t.loading?"":"Yenile"]})]})]}),t.meta.export_date&&e.jsxs("div",{style:r.metaBar,children:[e.jsxs("span",{children:["ðŸ“… Son GÃ¼ncelleme: ",e.jsx("strong",{children:t.meta.export_date})]}),e.jsxs("span",{children:["ðŸ“Š Strateji: ",e.jsx("strong",{children:t.activeMode==="balance_mode"?t.meta.balance_strategies:t.meta.winrate_strategies})]}),t.positionCoins.length>0&&e.jsxs("span",{children:["ðŸ’¼ AÃ§Ä±k Poz: ",e.jsxs("strong",{style:{color:"#f0b232"},children:[t.positionCoins.length," Coin"]})]})]}),t.loading&&!t.data?e.jsxs("div",{style:r.loader,children:[e.jsx("div",{className:"spin",style:{fontSize:40,display:"inline-block"},children:"â³"}),e.jsx("p",{children:"Kripto Verileri YÃ¼kleniyor..."})]}):t.errorMsg?e.jsxs("div",{style:{textAlign:"center",marginTop:50},children:[e.jsxs("h3",{style:{color:"#da373c"},children:["âš ï¸ ",t.errorMsg]}),t.debugInfo&&e.jsxs("div",{style:{backgroundColor:"#2b2d31",padding:10,margin:"20px auto",maxWidth:600,borderRadius:8,textAlign:"left"},children:[e.jsxs("strong",{style:{color:"#f0b232"},children:[e.jsx(me,{})," Hata Verisi:"]}),e.jsx("pre",{style:{color:"#dbdee1",fontSize:"0.8em",whiteSpace:"pre-wrap"},children:t.debugInfo})]}),e.jsx("button",{onClick:t.fetchData,style:{...r.confirmBtn,maxWidth:200,margin:"20px auto"},children:"Tekrar Dene"})]}):e.jsxs("div",{style:r.content,children:[e.jsxs("div",{style:r.modeToggleContainer,children:[e.jsxs("button",{onClick:n(()=>t.setActiveMode("balance_mode"),"onClick"),style:{...r.modeToggleBtn,...t.activeMode==="balance_mode"?r.modeToggleActive:{},borderColor:t.activeMode==="balance_mode"?"#f0b232":"#40444b"},children:[e.jsx(ye,{style:{marginRight:6}}),t.isMobile?"Balance":"ðŸ’° Balance SÄ±ralama"]}),e.jsxs("button",{onClick:n(()=>t.setActiveMode("winrate_mode"),"onClick"),style:{...r.modeToggleBtn,...t.activeMode==="winrate_mode"?r.modeToggleActive:{},borderColor:t.activeMode==="winrate_mode"?"#23a559":"#40444b"},children:[e.jsx(je,{style:{marginRight:6}}),t.isMobile?"Winrate":"ðŸ† Winrate SÄ±ralama"]})]}),e.jsx("div",{style:r.tabBar,children:e.jsx("div",{style:r.tabs,children:t.modeData&&t.modeData.tabs&&Object.keys(t.modeData.tabs).map(o=>{const l=Re[o]||{icon:"ðŸ“‹",shortLabel:o,color:"#949ba4"},c=t.modeData.tabs[o],x=t.activeTab===o;return e.jsxs("button",{onClick:n(()=>t.setActiveTab(o),"onClick"),style:{...r.tabButton,...x?{...r.activeTab,backgroundColor:l.color,borderColor:l.color}:{}},children:[e.jsx("span",{children:l.icon}),e.jsx("span",{children:t.isMobile?l.shortLabel:c.title||o}),e.jsx("span",{style:{backgroundColor:x?"rgba(0,0,0,0.3)":"rgba(255,255,255,0.1)",padding:"1px 6px",borderRadius:10,fontSize:"0.75em",marginLeft:4},children:c.count||0})]},o)})})}),e.jsxs("div",{style:r.filterBar,children:[e.jsxs("div",{style:r.searchBox,children:[e.jsx(Se,{style:{color:"#949ba4",marginRight:8}}),e.jsx("input",{type:"text",value:t.searchQuery,onChange:n(o=>t.setSearchQuery(o.target.value),"onChange"),placeholder:"Coin ara... (BTC, ETH, SOL)",style:r.searchInput}),t.searchQuery&&e.jsx("button",{onClick:n(()=>t.setSearchQuery(""),"onClick"),style:r.clearSearchBtn,children:e.jsx(G,{})})]}),e.jsx("div",{style:r.resultInfo,children:e.jsxs("span",{style:{color:"#949ba4",fontSize:"0.85em"},children:[t.processedData.length," sonuÃ§ ",t.searchQuery&&`"${t.searchQuery}" iÃ§in`]})})]}),t.isPositionsTab&&t.positionCoins.length>0&&e.jsxs("div",{style:r.positionBanner,children:[e.jsxs("strong",{children:["ðŸ’¼ AÃ§Ä±k Pozisyon (",t.positionCoins.length,"):"]})," ",t.positionCoins.map((o,l)=>{const x=t.positionCoinStatus[o]?.hasTersSinyal;return e.jsxs("span",{style:{...r.positionCoinTag,backgroundColor:x?"rgba(218,55,60,0.15)":"rgba(35,165,89,0.15)",color:x?"#da373c":"#23a559",border:`1px solid ${x?"rgba(218,55,60,0.4)":"rgba(35,165,89,0.4)"}`},children:[l+1,". ",x?"âš ï¸":"âœ…"," ",o.replace("USDT","")]},o)})]}),e.jsx("div",{style:r.tableContainer,children:e.jsxs("table",{style:r.table,children:[e.jsx("thead",{children:e.jsxs("tr",{style:r.tableHeaderRow,children:[e.jsx(a,{field:"rank",children:"#"}),e.jsx(a,{field:"coin",children:"Coin"}),e.jsx("th",{style:{color:"#949ba4"},children:"TF"}),e.jsx("th",{style:{color:"#949ba4"},children:"Sinyal"}),t.isPositionsTab&&e.jsxs(e.Fragment,{children:[e.jsx("th",{style:{color:"#949ba4"},children:"Poz.YÃ¶nÃ¼"}),e.jsx("th",{style:{color:"#949ba4"},children:"Uyum"})]}),e.jsx("th",{style:{color:"#949ba4"},children:"GiriÅŸ"}),e.jsx("th",{style:{color:"#949ba4"},children:"GÃ¼ncel"}),e.jsx(a,{field:"pnl",children:"PNL%"}),e.jsx(a,{field:"win_rate",children:"WR%"}),e.jsx(a,{field:"trades",children:"Ä°ÅŸlem"}),e.jsx(a,{field:"x_kat",children:"X Kat"}),e.jsx("th",{style:{color:"#949ba4"},children:"Hedef"}),e.jsx("th",{style:{color:"#949ba4"},children:"Durum"}),e.jsx("th",{style:{color:"#949ba4"},children:"Al/Sat"})]})}),e.jsx("tbody",{children:t.pagedData.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:t.isPositionsTab?15:13,style:{textAlign:"center",padding:40,color:"#949ba4"},children:t.searchQuery?"Arama sonucu bulunamadÄ±.":"Bu sekmede veri yok."})}):t.pagedData.map((o,l)=>{const c=t.getLivePrice(o.coin),x=t.extractCoinSymbol(o.coin)?.replace("USDT","")||o.coin,b=l%2===0?"transparent":"rgba(255,255,255,0.02)";return e.jsxs("tr",{style:{backgroundColor:b,transition:"background-color 0.2s"},onMouseEnter:n(m=>m.currentTarget.style.backgroundColor="rgba(88,101,242,0.08)","onMouseEnter"),onMouseLeave:n(m=>m.currentTarget.style.backgroundColor=b,"onMouseLeave"),children:[e.jsx("td",{style:{color:"#949ba4",fontWeight:600},children:o.rank}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx("strong",{style:{color:"#fff",fontSize:"0.9em"},children:x}),c&&e.jsx(te,{price:c})]})}),e.jsx("td",{children:e.jsx("span",{style:r.tfBadge,children:o.timeframe})}),e.jsx("td",{children:e.jsx(ee,{signal:o.signal||o.sinyal_yonu||"-"})}),t.isPositionsTab&&e.jsxs(e.Fragment,{children:[e.jsx("td",{children:e.jsx(ee,{signal:o.pozisyon_yonu||"-"})}),e.jsx("td",{children:e.jsx("span",{style:{fontSize:"0.8em",color:o.ters_sinyal?"#da373c":"#23a559",fontWeight:600},children:o.yon_uyumu||"-"})})]}),e.jsxs("td",{style:{color:"#dbdee1",fontSize:"0.85em"},children:["$",B(o.entry_price)]}),e.jsxs("td",{style:{color:"#dbdee1",fontSize:"0.85em"},children:["$",B(o.current_price)]}),e.jsx("td",{style:{color:Ie(o.pnl_percent),fontWeight:700},children:z(o.pnl_percent)}),e.jsx("td",{style:{color:parseFloat(String(o.win_rate||"0").replace("%",""))>=50?"#23a559":"#da373c",fontWeight:600},children:z(o.win_rate)}),e.jsx("td",{style:{color:"#dbdee1"},children:z(o.trades)}),e.jsx("td",{style:{color:"#f0b232",fontWeight:700},children:z(o.x_kat)}),e.jsx("td",{style:{color:"#5865f2",fontWeight:600},children:z(o.hedef_roe)}),e.jsx("td",{children:e.jsx(_e,{status:o.status})}),e.jsx("td",{children:e.jsx("button",{onClick:n(()=>t.setTradeData({coin:x,price:c}),"onClick"),style:{...r.miniTradeBtn,opacity:c?1:.4,cursor:c?"pointer":"not-allowed"},disabled:!c,title:c?`${x} Al/Sat`:"CanlÄ± fiyat bekleniyor",children:e.jsx(Ce,{})})})]},`${o.rank}-${o.coin}-${o.timeframe}-${l}`)})})]})}),t.totalPages>1&&e.jsxs("div",{style:r.pagination,children:[e.jsx("button",{onClick:n(()=>t.setPage(o=>Math.max(1,o-1)),"onClick"),disabled:t.page===1,style:{...r.pageBtn,opacity:t.page===1?.4:1},children:"â—„ Ã–nceki"}),e.jsx("div",{style:r.pageNumbers,children:Array.from({length:Math.min(t.totalPages,7)},(o,l)=>{let c;return t.totalPages<=7||t.page<=4?c=l+1:t.page>=t.totalPages-3?c=t.totalPages-6+l:c=t.page-3+l,e.jsx("button",{onClick:n(()=>t.setPage(c),"onClick"),style:{...r.pageNumBtn,...t.page===c?r.pageNumActive:{}},children:c},c)})}),e.jsx("button",{onClick:n(()=>t.setPage(o=>Math.min(t.totalPages,o+1)),"onClick"),disabled:t.page===t.totalPages,style:{...r.pageBtn,opacity:t.page===t.totalPages?.4:1},children:"Sonraki â–º"})]})]}),t.showPortfolio&&e.jsx(Le,{portfolio:t.portfolio,onClose:n(()=>t.setShowPortfolio(!1),"onClose")}),t.tradeData&&e.jsx(ze,{coin:t.tradeData.coin,initialPrice:t.tradeData.price,livePrices:t.prices,portfolio:t.portfolio,onClose:n(()=>t.setTradeData(null),"onClose"),onTrade:t.handleTrade})]})},"CryptoDashboard");export{Ge as default};
