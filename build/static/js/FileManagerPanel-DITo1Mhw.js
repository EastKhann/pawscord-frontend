import{a as z,r as a,n as t}from"./react-core-Cj7FUMmY.js";import{bt as f,h as C,ae as I,x as B,bg as k,bG as R,ao as L}from"./icons-vendor-DnRG7SaF.js";import"./editor-vendor-D9c4a6XZ.js";const D=({serverId:r,apiBaseUrl:d,fetchWithAuth:c})=>{const[s,n]=a.useState([]),[p,h]=a.useState("all"),[u,y]=a.useState(""),[b,j]=a.useState(!0),v=[{id:"all",label:"T√ºm√º",icon:f},{id:"images",label:"Resimler",icon:I},{id:"videos",label:"Videolar",icon:B},{id:"documents",label:"Belgeler",icon:k},{id:"archives",label:"Ar≈üivler",icon:R}];a.useEffect(()=>{S()},[r]);const S=async()=>{try{const e=await c(`${d}/files/?server=${r}`);if(e.ok){const i=await e.json();n(i)}}catch{}finally{j(!1)}},g=e=>{const i=e.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(i)?"images":["mp4","avi","mov","webm"].includes(i)?"videos":["pdf","doc","docx","txt","xlsx"].includes(i)?"documents":["zip","rar","7z","tar"].includes(i)?"archives":"other"},m=e=>e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":e<1024*1024*1024?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB",l=s.filter(e=>{const i=p==="all"||g(e.filename)===p,x=e.filename.toLowerCase().includes(u.toLowerCase());return i&&x}),F=l.reduce((e,i)=>e+(i.size||0),0);return t.jsxs("div",{style:o.container,children:[t.jsxs("div",{style:o.header,children:[t.jsxs("h2",{style:o.title,children:[t.jsx(f,{})," Dosya Y√∂neticisi"]}),t.jsxs("div",{style:o.stats,children:[l.length," dosya ¬∑ ",m(F)]})]}),t.jsxs("div",{style:o.search,children:[t.jsx(C,{style:o.searchIcon}),t.jsx("input",{type:"text",placeholder:"Dosya ara...",value:u,onChange:e=>y(e.target.value),style:o.searchInput})]}),t.jsx("div",{style:o.categories,children:v.map(e=>{const i=e.icon,x=s.filter(w=>e.id==="all"||g(w.filename)===e.id).length;return t.jsxs("button",{onClick:()=>h(e.id),style:{...o.categoryButton,...p===e.id?o.categoryButtonActive:{}},children:[t.jsx(i,{style:o.categoryIcon}),t.jsx("span",{children:e.label}),t.jsx("span",{style:o.categoryCount,children:x})]},e.id)})}),t.jsx("div",{style:o.fileList,children:b?t.jsx("div",{style:o.loading,children:"Y√ºkleniyor..."}):l.length===0?t.jsxs("div",{style:o.empty,children:[t.jsx(f,{style:o.emptyIcon}),t.jsx("p",{children:"Dosya bulunamadƒ±"})]}):l.map(e=>t.jsx(A,{file:e,formatSize:m},e.id))})]})},A=({file:r,formatSize:d})=>{const c=s=>{const n=s.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif"].includes(n)?"üñºÔ∏è":["mp4","avi","mov"].includes(n)?"üé•":["pdf"].includes(n)?"üìï":["doc","docx"].includes(n)?"üìò":["zip","rar"].includes(n)?"üì¶":"üìÑ"};return t.jsxs("div",{style:o.fileCard,children:[t.jsx("div",{style:o.fileIcon,children:c(r.filename)}),t.jsxs("div",{style:o.fileInfo,children:[t.jsx("div",{style:o.fileName,children:r.filename}),t.jsxs("div",{style:o.fileMeta,children:[d(r.size||0)," ¬∑ ",r.uploaded_by," ¬∑ ",new Date(r.created_at).toLocaleDateString("tr-TR")]})]}),t.jsx("a",{href:r.url,download:!0,style:o.downloadButton,children:t.jsx(L,{})})]})},o={container:{padding:"20px",backgroundColor:"#2b2d31",borderRadius:"8px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid #1e1f22"},title:{color:"#fff",fontSize:"20px",margin:0,display:"flex",alignItems:"center",gap:"10px"},stats:{color:"#72767d",fontSize:"13px"},search:{position:"relative",marginBottom:"16px"},searchIcon:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#72767d",fontSize:"14px"},searchInput:{width:"100%",padding:"10px 10px 10px 36px",backgroundColor:"#1e1f22",border:"1px solid #4e5058",borderRadius:"6px",color:"#fff",fontSize:"14px"},categories:{display:"flex",gap:"8px",marginBottom:"20px",overflowX:"auto"},categoryButton:{padding:"8px 16px",backgroundColor:"#1e1f22",border:"1px solid #4e5058",borderRadius:"6px",color:"#b9bbbe",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",whiteSpace:"nowrap",transition:"all 0.2s"},categoryButtonActive:{backgroundColor:"#5865f2",borderColor:"#5865f2",color:"#fff"},categoryIcon:{fontSize:"16px"},categoryCount:{fontSize:"12px",opacity:.7},fileList:{display:"grid",gap:"8px"},loading:{textAlign:"center",padding:"40px",color:"#b9bbbe"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},emptyIcon:{fontSize:"64px",opacity:.3,marginBottom:"20px"},fileCard:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#1e1f22",borderRadius:"6px",border:"1px solid transparent",transition:"border-color 0.2s"},fileIcon:{fontSize:"32px"},fileInfo:{flex:1,minWidth:0},fileName:{color:"#fff",fontSize:"14px",fontWeight:"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},fileMeta:{color:"#72767d",fontSize:"12px",marginTop:"4px"},downloadButton:{padding:"8px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"14px",textDecoration:"none",display:"flex",alignItems:"center"}},Y=z.memo(D);export{Y as default};
