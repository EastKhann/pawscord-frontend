import{r,ch as n}from"./react-core-B6hadH-M.js";import{g as B,h as A}from"./index-D_6pZib5.js";const F=({serverId:o,onClose:E})=>{const s=B(),[h,v]=r.useState([]),[f,b]=r.useState([]),[g,N]=r.useState(!0),[m,R]=r.useState(!1),[t,l]=r.useState({title:"",description:"",color:"#5865f2",thumbnail:"",image:"",author_name:"",author_icon:"",footer_text:"",footer_icon:"",fields:[]}),[i,k]=r.useState("");r.useEffect(()=>{d(),y()},[o]);const d=async()=>{try{const e=await fetch(`${s}/custom-embeds/server/${o}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(e.ok){const a=await e.json();v(a)}}catch(e){console.error("Error:",e)}finally{N(!1)}},y=async()=>{try{const e=await fetch(`${s}/channels/server/${o}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(e.ok){const a=await e.json();b(a.filter(c=>c.type==="text"))}}catch(e){console.error("Error:",e)}},_=async()=>{if(!t.title&&!t.description){n.error("âŒ En az baÅŸlÄ±k veya aÃ§Ä±klama gerekli");return}try{(await fetch(`${s}/custom-embeds/save/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:o,...t})})).ok?(n.success("âœ… Embed kaydedildi"),R(!1),d(),$()):n.error("âŒ Kaydetme hatasÄ±")}catch{n.error("âŒ BaÄŸlantÄ± hatasÄ±")}},C=async e=>{if(!i){n.error("âŒ LÃ¼tfen bir kanal seÃ§in");return}try{(await fetch(`${s}/custom-embeds/${e}/send/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({channel_id:i})})).ok?n.success("âœ… Embed gÃ¶nderildi"):n.error("âŒ GÃ¶nderim hatasÄ±")}catch{n.error("âŒ BaÄŸlantÄ± hatasÄ±")}},S=async e=>{if(await A("Embed'i silmek istediÄŸinize emin misiniz?"))try{(await fetch(`${s}/custom-embeds/${e}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).ok&&(n.success("âœ… Embed silindi"),d())}catch{n.error("âŒ Silme hatasÄ±")}},w=()=>{l({...t,fields:[...t.fields,{name:"",value:"",inline:!1}]})},u=(e,a,c)=>{const p=[...t.fields];p[e][a]=c,l({...t,fields:p})},z=e=>{l({...t,fields:t.fields.filter((a,c)=>c!==e)})},$=()=>{l({title:"",description:"",color:"#5865f2",thumbnail:"",image:"",author_name:"",author_icon:"",footer_text:"",footer_icon:"",fields:[]})};return React.createElement("div",{className:"custom-embed-overlay",onClick:E},React.createElement("div",{className:"custom-embed-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"custom-embed-header"},React.createElement("h2",null,"ğŸ“ Ã–zel Embed OluÅŸturucu"),React.createElement("button",{className:"close-btn",onClick:E},"Ã—")),React.createElement("div",{className:"custom-embed-content"},React.createElement("button",{className:"create-embed-btn",onClick:()=>R(!m)},m?"âŒ DÃ¼zenleyiciyi Kapat":"+ Yeni Embed OluÅŸtur"),m&&React.createElement("div",{className:"embed-editor"},React.createElement("div",{className:"editor-form"},React.createElement("div",{className:"form-section"},React.createElement("h3",null,"Yazar"),React.createElement("div",{className:"form-row"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Ä°sim"),React.createElement("input",{value:t.author_name,onChange:e=>l({...t,author_name:e.target.value}),placeholder:"Yazar adÄ±"})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Ä°kon URL"),React.createElement("input",{value:t.author_icon,onChange:e=>l({...t,author_icon:e.target.value}),placeholder:"https://..."})))),React.createElement("div",{className:"form-section"},React.createElement("h3",null,"Ä°Ã§erik"),React.createElement("div",{className:"form-group"},React.createElement("label",null,"BaÅŸlÄ±k"),React.createElement("input",{value:t.title,onChange:e=>l({...t,title:e.target.value}),placeholder:"Embed baÅŸlÄ±ÄŸÄ±"})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"AÃ§Ä±klama"),React.createElement("textarea",{value:t.description,onChange:e=>l({...t,description:e.target.value}),rows:"4",placeholder:"Embed aÃ§Ä±klamasÄ±"})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Renk"),React.createElement("input",{type:"color",value:t.color,onChange:e=>l({...t,color:e.target.value})}))),React.createElement("div",{className:"form-section"},React.createElement("h3",null,"GÃ¶rseller"),React.createElement("div",{className:"form-row"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"KÃ¼Ã§Ã¼k Resim URL"),React.createElement("input",{value:t.thumbnail,onChange:e=>l({...t,thumbnail:e.target.value}),placeholder:"https://..."})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"BÃ¼yÃ¼k Resim URL"),React.createElement("input",{value:t.image,onChange:e=>l({...t,image:e.target.value}),placeholder:"https://..."})))),React.createElement("div",{className:"form-section"},React.createElement("div",{className:"section-header"},React.createElement("h3",null,"Alanlar"),React.createElement("button",{className:"add-field-btn",onClick:w},"+ Alan Ekle")),t.fields.map((e,a)=>React.createElement("div",{key:a,className:"field-item"},React.createElement("div",{className:"field-inputs"},React.createElement("input",{value:e.name,onChange:c=>u(a,"name",c.target.value),placeholder:"Alan adÄ±"}),React.createElement("input",{value:e.value,onChange:c=>u(a,"value",c.target.value),placeholder:"Alan deÄŸeri"}),React.createElement("label",{className:"checkbox-label"},React.createElement("input",{type:"checkbox",checked:e.inline,onChange:c=>u(a,"inline",c.target.checked)}),React.createElement("span",null,"Inline")),React.createElement("button",{className:"remove-field-btn",onClick:()=>z(a)},"ğŸ—‘ï¸"))))),React.createElement("div",{className:"form-section"},React.createElement("h3",null,"Footer"),React.createElement("div",{className:"form-row"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Metin"),React.createElement("input",{value:t.footer_text,onChange:e=>l({...t,footer_text:e.target.value}),placeholder:"Footer metni"})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Ä°kon URL"),React.createElement("input",{value:t.footer_icon,onChange:e=>l({...t,footer_icon:e.target.value}),placeholder:"https://..."})))),React.createElement("button",{className:"save-embed-btn",onClick:_},"ğŸ’¾ Kaydet")),React.createElement("div",{className:"embed-preview"},React.createElement("h3",null,"Ã–nizleme"),React.createElement("div",{className:"discord-embed",style:{borderLeftColor:t.color}},t.author_name&&React.createElement("div",{className:"embed-author"},t.author_icon&&React.createElement("img",{src:t.author_icon,alt:""}),React.createElement("span",null,t.author_name)),t.title&&React.createElement("div",{className:"embed-title"},t.title),t.description&&React.createElement("div",{className:"embed-description"},t.description),t.fields.length>0&&React.createElement("div",{className:"embed-fields"},t.fields.map((e,a)=>React.createElement("div",{key:a,className:`embed-field ${e.inline?"inline":""}`},React.createElement("div",{className:"field-name"},e.name),React.createElement("div",{className:"field-value"},e.value)))),t.image&&React.createElement("img",{className:"embed-image",src:t.image,alt:""}),t.footer_text&&React.createElement("div",{className:"embed-footer"},t.footer_icon&&React.createElement("img",{src:t.footer_icon,alt:""}),React.createElement("span",null,t.footer_text))))),g?React.createElement("div",{className:"loading-state"},React.createElement("div",{className:"spinner"}),React.createElement("p",null,"YÃ¼kleniyor...")):h.length===0?React.createElement("div",{className:"empty-state"},React.createElement("span",{className:"empty-icon"},"ğŸ“"),React.createElement("p",null,"HenÃ¼z kayÄ±tlÄ± embed yok")):React.createElement("div",{className:"embeds-list"},h.map(e=>React.createElement("div",{key:e.id,className:"embed-card"},React.createElement("div",{className:"embed-info"},React.createElement("h4",null,e.title||"BaÅŸlÄ±ksÄ±z Embed"),React.createElement("p",null,e.description?.substring(0,100),e.description?.length>100?"...":"")),React.createElement("div",{className:"embed-actions"},React.createElement("select",{value:i,onChange:a=>k(a.target.value)},React.createElement("option",{value:""},"Kanal seÃ§"),f.map(a=>React.createElement("option",{key:a.id,value:a.id},"# ",a.name))),React.createElement("button",{onClick:()=>C(e.id)},"ğŸ“¤ GÃ¶nder"),React.createElement("button",{onClick:()=>S(e.id)},"ğŸ—‘ï¸"))))))))};export{F as default};
