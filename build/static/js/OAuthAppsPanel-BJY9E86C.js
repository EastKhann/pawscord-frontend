var N=Object.defineProperty;var r=(o,s)=>N(o,"name",{value:s,configurable:!0});import{r as c,j as e}from"./react-core-Djgtqrmb.js";import{an as v,f as A,aV as R,B as b,a as F,q as D}from"./icons-vendor-BW7dxHkX.js";import{t as a}from"./index-B9TNnJpS.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const I=["read_messages","send_messages","manage_channels","manage_roles","manage_server","read_user","modify_user"],L=r((o,s)=>{const[d,l]=c.useState([]),[w,B]=c.useState([]),[S,m]=c.useState(!1),[k,T]=c.useState("apps"),[z,g]=c.useState(!1),[_,j]=c.useState(!1),[p,x]=c.useState({name:"",description:"",redirect_uris:"",scopes:[]}),[f,C]=c.useState({name:"",description:""}),u=r(async()=>{m(!0);try{const n=await(await o(`${s}/oauth/apps/list/`)).json();l(n.apps||[])}catch{a.error("Failed to load OAuth apps")}finally{m(!1)}},"fetchApps"),h=r(async()=>{try{const n=await(await o(`${s}/bots/list/`)).json();B(n.bots||[])}catch{a.error("Failed to load bots")}},"fetchBots");return c.useEffect(()=>{u(),h()},[]),{apps:d,bots:w,loading:S,activeTab:k,setActiveTab:T,showCreateApp:z,setShowCreateApp:g,showCreateBot:_,setShowCreateBot:j,newApp:p,setNewApp:x,newBot:f,setNewBot:C,createApp:r(async()=>{if(!p.name){a.error("App name is required");return}try{const n=await(await o(`${s}/oauth/apps/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...p,redirect_uris:p.redirect_uris.split(`
`).filter(y=>y.trim())})})).json();a.success("OAuth app created successfully"),g(!1),x({name:"",description:"",redirect_uris:"",scopes:[]}),u(),n.client_id&&n.client_secret&&a.info(`Client ID: ${n.client_id}
Client Secret: ${n.client_secret}

Save these credentials securely. The secret will not be shown again.`)}catch{a.error("Failed to create OAuth app")}},"createApp"),createBot:r(async()=>{if(!f.name){a.error("Bot name is required");return}try{const n=await(await o(`${s}/bots/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();a.success("Bot created successfully"),j(!1),C({name:"",description:""}),h(),n.token&&a.info(`Bot Token: ${n.token}

Save this token securely. It will not be shown again.`)}catch{a.error("Failed to create bot")}},"createBot"),deleteApp:r(async i=>{if(confirm("Are you sure you want to delete this app? This cannot be undone."))try{await o(`${s}/oauth/apps/${i}/delete/`,{method:"DELETE"}),a.success("App deleted successfully"),u()}catch{a.error("Failed to delete app")}},"deleteApp"),deleteBot:r(async i=>{if(confirm("Are you sure you want to delete this bot? This cannot be undone."))try{await o(`${s}/bots/${i}/delete/`,{method:"DELETE"}),a.success("Bot deleted successfully"),h()}catch{a.error("Failed to delete bot")}},"deleteBot"),copyToClipboard:r((i,n)=>{navigator.clipboard.writeText(i),a.success(`${n} copied to clipboard`)},"copyToClipboard"),toggleScope:r(i=>{x(n=>({...n,scopes:n.scopes.includes(i)?n.scopes.filter(y=>y!==i):[...n.scopes,i]}))},"toggleScope"),availableScopes:I}},"useOAuthApps"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},tabs:{display:"flex",borderBottom:"1px solid #2c2f33",padding:"0 20px"},tab:{padding:"12px 20px",backgroundColor:"transparent",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",borderBottom:"2px solid transparent"},tabActive:{color:"#5865f2",borderBottom:"2px solid #5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},toolbar:{marginBottom:"20px"},createButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",fontWeight:"500"},createForm:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",marginBottom:"20px"},formTitle:{margin:"0 0 16px 0",fontSize:"16px",color:"#ffffff"},formGroup:{marginBottom:"16px"},label:{display:"block",color:"#dcddde",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},scopesGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},scopeCheckbox:{display:"flex",alignItems:"center",gap:"8px",color:"#dcddde",fontSize:"14px",cursor:"pointer"},formActions:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"20px"},submitButton:{padding:"10px 20px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelButton:{padding:"10px 20px",backgroundColor:"#4f545c",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},appsList:{display:"flex",flexDirection:"column",gap:"16px"},appCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},appHeader:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},appName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},appDescription:{fontSize:"14px",color:"#99aab5"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"5px"},appDetails:{display:"flex",flexDirection:"column",gap:"12px"},credential:{display:"flex",alignItems:"center",gap:"10px",fontSize:"14px",color:"#dcddde"},code:{flex:1,padding:"8px",backgroundColor:"#1e1e1e",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#5865f2"},copyButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",padding:"5px"},detail:{fontSize:"14px",color:"#dcddde"},uri:{fontSize:"13px",color:"#5865f2",marginLeft:"8px",fontFamily:"monospace"},botsList:{display:"flex",flexDirection:"column",gap:"16px"},botCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},botHeader:{display:"flex",alignItems:"center"},botName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},botDescription:{fontSize:"14px",color:"#99aab5",marginBottom:"4px"},botStatus:{fontSize:"13px",color:"#dcddde"}},O=r(({o})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:t.toolbar,children:e.jsxs("button",{onClick:r(()=>o.setShowCreateApp(!o.showCreateApp),"onClick"),style:t.createButton,children:[e.jsx(v,{style:{marginRight:"5px"}})," New OAuth App"]})}),o.showCreateApp&&e.jsxs("div",{style:t.createForm,children:[e.jsx("h3",{style:t.formTitle,children:"Create OAuth Application"}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Application Name"}),e.jsx("input",{type:"text",value:o.newApp.name,onChange:r(s=>o.setNewApp({...o.newApp,name:s.target.value}),"onChange"),placeholder:"My Awesome App",style:t.input})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Description"}),e.jsx("textarea",{value:o.newApp.description,onChange:r(s=>o.setNewApp({...o.newApp,description:s.target.value}),"onChange"),placeholder:"What does your app do?",style:{...t.input,minHeight:"60px"}})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Redirect URIs (one per line)"}),e.jsx("textarea",{value:o.newApp.redirect_uris,onChange:r(s=>o.setNewApp({...o.newApp,redirect_uris:s.target.value}),"onChange"),placeholder:"https://example.com/callback",style:{...t.input,minHeight:"80px"}})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Scopes"}),e.jsx("div",{style:t.scopesGrid,children:o.availableScopes.map(s=>e.jsxs("label",{style:t.scopeCheckbox,children:[e.jsx("input",{type:"checkbox",checked:o.newApp.scopes.includes(s),onChange:r(()=>o.toggleScope(s),"onChange")}),e.jsx("span",{children:s})]},s))})]}),e.jsxs("div",{style:t.formActions,children:[e.jsx("button",{onClick:o.createApp,style:t.submitButton,children:"Create Application"}),e.jsx("button",{onClick:r(()=>o.setShowCreateApp(!1),"onClick"),style:t.cancelButton,children:"Cancel"})]})]}),e.jsx("div",{style:t.appsList,children:o.apps.length===0?e.jsx("div",{style:t.empty,children:"No OAuth apps yet. Create one to get started!"}):o.apps.map(s=>e.jsxs("div",{style:t.appCard,children:[e.jsxs("div",{style:t.appHeader,children:[e.jsxs("div",{children:[e.jsx("div",{style:t.appName,children:s.name}),e.jsx("div",{style:t.appDescription,children:s.description})]}),e.jsx("button",{onClick:r(()=>o.deleteApp(s.id),"onClick"),style:t.deleteButton,children:e.jsx(A,{})})]}),e.jsxs("div",{style:t.appDetails,children:[e.jsxs("div",{style:t.credential,children:[e.jsx("strong",{children:"Client ID:"}),e.jsx("code",{style:t.code,children:s.client_id}),e.jsx("button",{onClick:r(()=>o.copyToClipboard(s.client_id,"Client ID"),"onClick"),style:t.copyButton,children:e.jsx(R,{})})]}),e.jsxs("div",{style:t.detail,children:[e.jsx("strong",{children:"Scopes:"})," ",s.scopes?.join(", ")||"None"]}),e.jsxs("div",{style:t.detail,children:[e.jsx("strong",{children:"Redirect URIs:"}),s.redirect_uris?.map((d,l)=>e.jsx("div",{style:t.uri,children:d},l))]})]})]},s.id))})]}),"AppsTab"),$=r(({o})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:t.toolbar,children:e.jsxs("button",{onClick:r(()=>o.setShowCreateBot(!o.showCreateBot),"onClick"),style:t.createButton,children:[e.jsx(v,{style:{marginRight:"5px"}})," New Bot"]})}),o.showCreateBot&&e.jsxs("div",{style:t.createForm,children:[e.jsx("h3",{style:t.formTitle,children:"Create Bot Account"}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Bot Name"}),e.jsx("input",{type:"text",value:o.newBot.name,onChange:r(s=>o.setNewBot({...o.newBot,name:s.target.value}),"onChange"),placeholder:"My Bot",style:t.input})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Description"}),e.jsx("textarea",{value:o.newBot.description,onChange:r(s=>o.setNewBot({...o.newBot,description:s.target.value}),"onChange"),placeholder:"What does your bot do?",style:{...t.input,minHeight:"60px"}})]}),e.jsxs("div",{style:t.formActions,children:[e.jsx("button",{onClick:o.createBot,style:t.submitButton,children:"Create Bot"}),e.jsx("button",{onClick:r(()=>o.setShowCreateBot(!1),"onClick"),style:t.cancelButton,children:"Cancel"})]})]}),e.jsx("div",{style:t.botsList,children:o.bots.length===0?e.jsx("div",{style:t.empty,children:"No bots yet. Create one to automate tasks!"}):o.bots.map(s=>e.jsx("div",{style:t.botCard,children:e.jsxs("div",{style:t.botHeader,children:[e.jsx(b,{style:{fontSize:"32px",color:"#5865f2"}}),e.jsxs("div",{style:{flex:1,marginLeft:"12px"},children:[e.jsx("div",{style:t.botName,children:s.name}),e.jsx("div",{style:t.botDescription,children:s.description}),e.jsxs("div",{style:t.botStatus,children:["Status: ",s.is_active?"ðŸŸ¢ Active":"ðŸ”´ Inactive"]})]}),e.jsx("button",{onClick:r(()=>o.deleteBot(s.id),"onClick"),style:t.deleteButton,children:e.jsx(A,{})})]})},s.id))})]}),"BotsTab"),ee=r(({fetchWithAuth:o,apiBaseUrl:s,onClose:d})=>{const l=L(o,s);return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(b,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Developer Portal"})]}),e.jsx("button",{onClick:d,style:t.closeButton,children:e.jsx(F,{})})]}),e.jsxs("div",{style:t.tabs,children:[e.jsxs("button",{onClick:r(()=>l.setActiveTab("apps"),"onClick"),style:{...t.tab,...l.activeTab==="apps"&&t.tabActive},children:[e.jsx(D,{style:{marginRight:"5px"}})," OAuth Apps (",l.apps.length,")"]}),e.jsxs("button",{onClick:r(()=>l.setActiveTab("bots"),"onClick"),style:{...t.tab,...l.activeTab==="bots"&&t.tabActive},children:[e.jsx(b,{style:{marginRight:"5px"}})," Bots (",l.bots.length,")"]})]}),e.jsx("div",{style:t.content,children:l.loading?e.jsx("div",{style:t.loading,children:"Loading..."}):l.activeTab==="apps"?e.jsx(O,{o:l}):e.jsx($,{o:l})})]})})},"OAuthAppsPanel");export{ee as default};
