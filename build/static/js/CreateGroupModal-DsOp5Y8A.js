import{r as s,d as t,i as x,aD as h,aK as k}from"./react-core-DMT_QkRe.js";import{t as l}from"./index-grPt_ios.js";const v=({onClose:a,friendsList:i,fetchWithAuth:p,apiBaseUrl:b,onGroupCreated:m})=>{const[r,d]=s.useState([]),[c,u]=s.useState(!1);s.useEffect(()=>{const e=n=>{n.key==="Escape"&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a]);const y=e=>{r.includes(e)?d(n=>n.filter(f=>f!==e)):d(n=>[...n,e])},g=async()=>{if(r.length<2){l.error("❌ En az 2 kişi seçmelisin");return}u(!0);try{const e=await p(`${b}/conversations/create_group/`,{method:"POST",body:JSON.stringify({usernames:r})});if(e.ok){const n=await e.json();l.success("✅ Grup oluşturuldu!"),m(n),a()}else l.error("❌ Grup oluşturulamadı")}catch(e){console.error(e),l.error("❌ Hata oluştu: "+e.message)}finally{u(!1)}};return t.createElement("div",{style:o.overlay,onClick:a},t.createElement("div",{style:o.modal,onClick:e=>e.stopPropagation()},t.createElement("div",{style:o.header},t.createElement("h3",null,"Grup Oluştur"),t.createElement("button",{onClick:a,style:o.closeBtn},t.createElement(x,null))),t.createElement("div",{style:o.body},t.createElement("p",{style:{color:"#b9bbbe",marginBottom:15}},"Gruba eklemek istediğin arkadaşlarını seç (",r.length,")"),t.createElement("div",{style:o.friendList},i.map(e=>t.createElement("div",{key:e,onClick:()=>y(e),style:{...o.friendItem,backgroundColor:r.includes(e)?"rgba(88, 101, 242, 0.3)":"#2f3136",borderColor:r.includes(e)?"#5865f2":"transparent"}},t.createElement("span",{style:{color:"white"}},e),r.includes(e)?t.createElement(h,{color:"#5865f2"}):t.createElement(k,{color:"#b9bbbe"}))),i.length===0&&t.createElement("p",{style:{color:"#72767d"}},"Listenizde arkadaş yok.")),t.createElement("button",{onClick:g,style:o.createBtn,disabled:c||r.length<2},c?"Oluşturuluyor...":"Grup DM Oluştur"))))},o={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden"},header:{padding:"15px 20px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",color:"white",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em"},body:{padding:"20px"},friendList:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},friendItem:{padding:"10px",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",border:"1px solid transparent"},createBtn:{width:"100%",padding:"10px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",opacity:.9}};export{v as default};
