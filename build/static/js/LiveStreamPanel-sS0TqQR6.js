import{r,N as d,l as S,L as w,O as B,K as I,bt as z}from"./react-core-B6hadH-M.js";const j=({onClose:y,currentUser:R,ws:M,channelId:D,fetchWithAuth:L,apiBaseUrl:A,roomSlug:F})=>{const[l,p]=r.useState(!1),[u,b]=r.useState([]),[a,s]=r.useState({quality:"720p",camera:!0,microphone:!0,screenShare:!1}),[E,v]=r.useState([]),[i,m]=r.useState(""),c=r.useRef(null),n=r.useRef(null),f=r.useRef({}),k=async()=>{try{const t={video:a.camera?{width:{ideal:a.quality==="1080p"?1920:1280},height:{ideal:a.quality==="1080p"?1080:720}}:!1,audio:a.microphone},o=await navigator.mediaDevices.getUserMedia(t);if(a.screenShare){const h=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});o.getTracks().forEach(C=>h.addTrack(C)),n.current=h}else n.current=o;c.current&&(c.current.srcObject=n.current),p(!0)}catch(t){console.error("Stream start error:",t)}},g=()=>{n.current&&(n.current.getTracks().forEach(t=>t.stop()),n.current=null),c.current&&(c.current.srcObject=null),Object.values(f.current).forEach(t=>t.close()),f.current={},p(!1),b([])},x=()=>{i.trim()&&(v(t=>[...t,{author:R||"Sen",text:i}]),m(""))};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.panel},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(d,{size:20,color:"#ed4245"}),React.createElement("h2",{style:e.title},"CanlÄ± YayÄ±n"),l&&React.createElement("span",{style:e.liveBadge},"ðŸ”´ CANLI")),React.createElement("button",{onClick:()=>{l&&g(),y()},style:e.closeButton},React.createElement(S,{size:20}))),React.createElement("div",{style:e.content},React.createElement("div",{style:e.mainArea},React.createElement("div",{style:e.videoContainer},React.createElement("video",{ref:c,autoPlay:!0,muted:!0,style:e.video}),!l&&React.createElement("div",{style:e.noStream},React.createElement(d,{size:48,color:"#4e5058"}),React.createElement("p",null,"YayÄ±n baÅŸlatÄ±lmadÄ±"))),React.createElement("div",{style:e.controls},l?React.createElement("button",{onClick:g,style:e.stopButton},"YayÄ±nÄ± Durdur"):React.createElement(React.Fragment,null,React.createElement("div",{style:e.settingsGroup},React.createElement("label",{style:e.settingLabel},React.createElement("input",{type:"checkbox",checked:a.camera,onChange:t=>s({...a,camera:t.target.checked})}),React.createElement(d,{size:14})," ",React.createElement("span",null,"Kamera")),React.createElement("label",{style:e.settingLabel},React.createElement("input",{type:"checkbox",checked:a.microphone,onChange:t=>s({...a,microphone:t.target.checked})}),React.createElement(w,{size:14})," ",React.createElement("span",null,"Mikrofon")),React.createElement("label",{style:e.settingLabel},React.createElement("input",{type:"checkbox",checked:a.screenShare,onChange:t=>s({...a,screenShare:t.target.checked})}),React.createElement(B,{size:14})," ",React.createElement("span",null,"Ekran PaylaÅŸÄ±mÄ±"))),React.createElement("select",{value:a.quality,onChange:t=>s({...a,quality:t.target.value}),style:e.qualitySelect},React.createElement("option",{value:"480p"},"480p"),React.createElement("option",{value:"720p"},"720p HD"),React.createElement("option",{value:"1080p"},"1080p Full HD")),React.createElement("button",{onClick:k,style:e.startButton},"YayÄ±nÄ± BaÅŸlat")))),React.createElement("div",{style:e.sidebar},React.createElement("div",{style:e.viewersSection},React.createElement("div",{style:e.sectionHeader},React.createElement(I,{size:16})," ",React.createElement("span",null,"Ä°zleyiciler (",u.length,")")),React.createElement("div",{style:e.viewersList},u.map((t,o)=>React.createElement("div",{key:o,style:e.viewer},React.createElement("div",{style:e.viewerAvatar},t.name?.[0]||"?"),React.createElement("span",null,t.name))))),React.createElement("div",{style:e.chatSection},React.createElement("div",{style:e.sectionHeader},React.createElement(z,{size:16})," ",React.createElement("span",null,"Sohbet")),React.createElement("div",{style:e.chatMessages},E.map((t,o)=>React.createElement("div",{key:o,style:e.chatMessage},React.createElement("span",{style:e.chatAuthor},t.author,":"),React.createElement("span",{style:e.chatText},t.text)))),React.createElement("div",{style:e.chatInput},React.createElement("input",{type:"text",placeholder:"Mesaj yaz...",value:i,onChange:t=>m(t.target.value),onKeyPress:t=>t.key==="Enter"&&x(),style:e.input}),React.createElement("button",{onClick:x,style:e.sendButton},"GÃ¶nder")))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"95%",maxWidth:"1400px",height:"90vh",display:"flex",flexDirection:"column"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},title:{margin:0,fontSize:"18px",color:"#ffffff"},liveBadge:{backgroundColor:"#ed4245",color:"#ffffff",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px"},content:{display:"flex",flex:1,gap:"16px",padding:"16px",overflow:"hidden"},mainArea:{flex:1,display:"flex",flexDirection:"column",gap:"16px"},videoContainer:{flex:1,backgroundColor:"#000000",borderRadius:"8px",position:"relative",overflow:"hidden"},video:{width:"100%",height:"100%",objectFit:"contain"},noStream:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#b9bbbe"},controls:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},settingsGroup:{display:"flex",gap:"16px",flex:1},settingLabel:{display:"flex",alignItems:"center",gap:"8px",color:"#dcddde",cursor:"pointer"},qualitySelect:{backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",cursor:"pointer"},startButton:{backgroundColor:"#3ba55d",color:"#ffffff",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},stopButton:{backgroundColor:"#ed4245",color:"#ffffff",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},sidebar:{width:"300px",display:"flex",flexDirection:"column",gap:"16px"},viewersSection:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",maxHeight:"250px",display:"flex",flexDirection:"column"},sectionHeader:{display:"flex",alignItems:"center",gap:"8px",color:"#ffffff",fontWeight:"bold",marginBottom:"12px"},viewersList:{flex:1,overflowY:"auto"},viewer:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0",color:"#dcddde"},viewerAvatar:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},chatSection:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",flex:1,display:"flex",flexDirection:"column"},chatMessages:{flex:1,overflowY:"auto",marginBottom:"12px"},chatMessage:{marginBottom:"8px",color:"#dcddde",fontSize:"14px"},chatAuthor:{fontWeight:"bold",color:"#5865f2",marginRight:"4px"},chatText:{color:"#dcddde"},chatInput:{display:"flex",gap:"8px"},input:{flex:1,backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",outline:"none"},sendButton:{backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"}};export{j as default};
