import{r as n}from"./react-core-B6hadH-M.js";import{t as l}from"./index-D_6pZib5.js";const b=({apiBaseUrl:m,onClose:c})=>{const[a,t]=n.useState({title:"",description:"",severity:"medium",category:"bug",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",browser:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,url:window.location.href,console_errors:[]}),[o,s]=n.useState(!1),[E,R]=n.useState([]),u=()=>{const e=window.consoleErrors||[];t(r=>({...r,console_errors:e})),l.info("â„¹ï¸ Konsol hatalarÄ± yakalandÄ±")},d=async()=>{if(!a.title.trim()){l.error("âŒ BaÅŸlÄ±k gerekli");return}if(!a.description.trim()){l.error("âŒ AÃ§Ä±klama gerekli");return}try{s(!0);const e=localStorage.getItem("access_token"),r=await fetch(`${m}/errors/report/`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){const i=await r.json();l.success("âœ… Hata raporu gÃ¶nderildi"),t({title:"",description:"",severity:"medium",category:"bug",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",browser:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,url:window.location.href,console_errors:[]}),setTimeout(()=>c(),1500)}else{const i=await r.json();l.error(`âŒ ${i.error||"GÃ¶nderim baÅŸarÄ±sÄ±z"}`)}}catch(e){console.error("Submit error report error:",e),l.error("âŒ BaÄŸlantÄ± hatasÄ±")}finally{s(!1)}},p=e=>{const r={low:"#3b82f6",medium:"#faa61a",high:"#ff6b61",critical:"#ff3b30"};return r[e]||r.medium},v=e=>({bug:"ğŸ›",feature:"âœ¨",performance:"âš¡",ui:"ğŸ¨",crash:"ğŸ’¥"})[e]||"â“";return React.createElement("div",{className:"error-reporting-overlay",onClick:c},React.createElement("div",{className:"error-reporting-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"error-reporting-header"},React.createElement("h2",null,"ğŸ› Hata Bildirimi"),React.createElement("button",{className:"close-btn",onClick:c},"âœ•")),React.createElement("div",{className:"error-reporting-content"},React.createElement("div",{className:"info-banner"},React.createElement("span",{className:"info-icon"},"ğŸ’¡"),React.createElement("p",null,"KarÅŸÄ±laÅŸtÄ±ÄŸÄ±nÄ±z hatalarÄ± detaylÄ± bir ÅŸekilde bildirerek uygulamayÄ± geliÅŸtirmemize yardÄ±mcÄ± olabilirsiniz.")),React.createElement("div",{className:"form-section"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"BaÅŸlÄ±k *"),React.createElement("input",{type:"text",className:"form-input",placeholder:"KÄ±sa ve aÃ§Ä±klayÄ±cÄ± bir baÅŸlÄ±k",value:a.title,onChange:e=>t({...a,title:e.target.value})})),React.createElement("div",{className:"form-row"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Kategori"),React.createElement("select",{className:"form-select",value:a.category,onChange:e=>t({...a,category:e.target.value})},React.createElement("option",{value:"bug"},"ğŸ› Bug (Hata)"),React.createElement("option",{value:"feature"},"âœ¨ Feature Request (Ã–zellik Ä°steÄŸi)"),React.createElement("option",{value:"performance"},"âš¡ Performance (Performans)"),React.createElement("option",{value:"ui"},"ğŸ¨ UI/UX (ArayÃ¼z)"),React.createElement("option",{value:"crash"},"ğŸ’¥ Crash (Ã‡Ã¶kme)"))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Ã–nem Derecesi"),React.createElement("select",{className:"form-select",value:a.severity,onChange:e=>t({...a,severity:e.target.value})},React.createElement("option",{value:"low"},"ğŸŸ¢ DÃ¼ÅŸÃ¼k"),React.createElement("option",{value:"medium"},"ğŸŸ¡ Orta"),React.createElement("option",{value:"high"},"ğŸŸ  YÃ¼ksek"),React.createElement("option",{value:"critical"},"ğŸ”´ Kritik")))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"AÃ§Ä±klama *"),React.createElement("textarea",{className:"form-textarea",placeholder:"HatayÄ± detaylÄ± bir ÅŸekilde aÃ§Ä±klayÄ±n...",value:a.description,onChange:e=>t({...a,description:e.target.value}),rows:5})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"HatayÄ± Yeniden OluÅŸturma AdÄ±mlarÄ±"),React.createElement("textarea",{className:"form-textarea",placeholder:`1. Ä°lk adÄ±m
2. Ä°kinci adÄ±m
3. ÃœÃ§Ã¼ncÃ¼ adÄ±m`,value:a.steps_to_reproduce,onChange:e=>t({...a,steps_to_reproduce:e.target.value}),rows:4})),React.createElement("div",{className:"form-row"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Beklenen DavranÄ±ÅŸ"),React.createElement("textarea",{className:"form-textarea",placeholder:"Ne olmasÄ±nÄ± bekliyordunuz?",value:a.expected_behavior,onChange:e=>t({...a,expected_behavior:e.target.value}),rows:3})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"GerÃ§ekleÅŸen DavranÄ±ÅŸ"),React.createElement("textarea",{className:"form-textarea",placeholder:"Ne oldu?",value:a.actual_behavior,onChange:e=>t({...a,actual_behavior:e.target.value}),rows:3}))),React.createElement("div",{className:"system-info"},React.createElement("h4",null,"ğŸ“Š Sistem Bilgileri"),React.createElement("div",{className:"info-grid"},React.createElement("div",{className:"info-item"},React.createElement("span",{className:"info-label"},"TarayÄ±cÄ±:"),React.createElement("span",{className:"info-value"},navigator.userAgent.split("(")[1]?.split(")")[0]||"Unknown")),React.createElement("div",{className:"info-item"},React.createElement("span",{className:"info-label"},"Ekran:"),React.createElement("span",{className:"info-value"},a.screen_resolution)),React.createElement("div",{className:"info-item"},React.createElement("span",{className:"info-label"},"URL:"),React.createElement("span",{className:"info-value truncate"},a.url))),React.createElement("button",{className:"capture-errors-btn",onClick:u},"ğŸ“ Konsol HatalarÄ±nÄ± Yakala")),React.createElement("div",{className:"preview-section"},React.createElement("h4",null,"ğŸ‘ï¸ Ã–nizleme"),React.createElement("div",{className:"error-preview"},React.createElement("div",{className:"preview-header"},React.createElement("span",{className:"preview-icon"},v(a.category)),React.createElement("span",{className:"preview-title"},a.title||"BaÅŸlÄ±k"),React.createElement("span",{className:"preview-severity",style:{backgroundColor:p(a.severity)}},a.severity)),React.createElement("div",{className:"preview-body"},a.description||"AÃ§Ä±klama burada gÃ¶rÃ¼necek..."))),React.createElement("div",{className:"form-actions"},React.createElement("button",{className:"cancel-btn",onClick:c},"Ä°ptal"),React.createElement("button",{className:"submit-btn",onClick:d,disabled:o},o?"â³ GÃ¶nderiliyor...":"ğŸ“¨ Raporu GÃ¶nder"))))))};export{b as default};
