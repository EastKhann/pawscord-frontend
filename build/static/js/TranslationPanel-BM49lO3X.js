import{r,n as a}from"./react-core-BMiyQWF6.js";import{y as h}from"./ui-vendor-6RMGJYFH.js";import{g as _}from"./index-BroE2O5W.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BuSyE8vR.js";import"./router-vendor-B86Z1mIL.js";import"./icons-vendor-GUGjkvMm.js";import"./state-vendor-CAyNnPM4.js";import"./crypto-vendor-1Q6e4ZD-.js";const B=({serverId:c,onClose:g})=>{const o=_(),[s,l]=r.useState({enabled:!1,auto_translate:!1,default_language:"tr",allowed_languages:["en","tr","de","fr","es"],react_to_translate:!0,translation_emoji:"ðŸŒ"}),[t,m]=r.useState({total_translations:0,top_languages:[],translations_today:0}),[j,x]=r.useState(!0),d=[{code:"tr",name:"TÃ¼rkÃ§e",flag:"ðŸ‡¹ðŸ‡·"},{code:"en",name:"English",flag:"ðŸ‡ºðŸ‡¸"},{code:"de",name:"Deutsch",flag:"ðŸ‡©ðŸ‡ª"},{code:"fr",name:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·"},{code:"es",name:"EspaÃ±ol",flag:"ðŸ‡ªðŸ‡¸"},{code:"it",name:"Italiano",flag:"ðŸ‡®ðŸ‡¹"},{code:"pt",name:"PortuguÃªs",flag:"ðŸ‡µðŸ‡¹"},{code:"ru",name:"Ð ÑƒÑÑÐºÐ¸Ð¹",flag:"ðŸ‡·ðŸ‡º"},{code:"ja",name:"æ—¥æœ¬èªž",flag:"ðŸ‡¯ðŸ‡µ"},{code:"zh",name:"ä¸­æ–‡",flag:"ðŸ‡¨ðŸ‡³"},{code:"ar",name:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",flag:"ðŸ‡¸ðŸ‡¦"},{code:"hi",name:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",flag:"ðŸ‡®ðŸ‡³"}];r.useEffect(()=>{u(),p()},[c]);const u=async()=>{try{const e=await fetch(`${o}/translation/server/${c}/config/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(e.ok){const n=await e.json();l(n)}}catch{}finally{x(!1)}},p=async()=>{try{const e=await fetch(`${o}/translation/server/${c}/stats/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(e.ok){const n=await e.json();m(n)}}catch{}},f=async()=>{try{(await fetch(`${o}/translation/server/${c}/config/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?h.success("âœ… Ã‡eviri ayarlarÄ± kaydedildi"):h.error("âŒ Kaydetme hatasÄ±")}catch{h.error("âŒ BaÄŸlantÄ± hatasÄ±")}},N=e=>{const n=s.allowed_languages.includes(e)?s.allowed_languages.filter(i=>i!==e):[...s.allowed_languages,e];l({...s,allowed_languages:n})};return a.jsx("div",{className:"translation-overlay",onClick:g,children:a.jsxs("div",{className:"translation-panel",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"translation-header",children:[a.jsx("h2",{children:"ðŸŒ Ã‡eviri Sistemi"}),a.jsx("button",{className:"close-btn",onClick:g,children:"Ã—"})]}),a.jsx("div",{className:"translation-content",children:j?a.jsxs("div",{className:"loading-state",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"YÃ¼kleniyor..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"stats-section",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-icon",children:"ðŸŒ"}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:t.total_translations}),a.jsx("p",{children:"Toplam Ã‡eviri"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-icon",children:"ðŸ“…"}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:t.translations_today}),a.jsx("p",{children:"BugÃ¼n"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-icon",children:"ðŸ†"}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:t.top_languages[0]||"N/A"}),a.jsx("p",{children:"En PopÃ¼ler"})]})]})]}),a.jsxs("div",{className:"config-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:"âš™ï¸ Ayarlar"}),a.jsxs("label",{className:"toggle-switch",children:[a.jsx("input",{type:"checkbox",checked:s.enabled,onChange:e=>l({...s,enabled:e.target.checked})}),a.jsx("span",{className:"toggle-slider"})]})]}),a.jsxs("div",{className:"config-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"ðŸŒ VarsayÄ±lan Dil"}),a.jsx("select",{value:s.default_language,onChange:e=>l({...s,default_language:e.target.value}),children:d.map(e=>a.jsxs("option",{value:e.code,children:[e.flag," ",e.name]},e.code))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"ðŸŒ Ã‡eviri Emoji"}),a.jsx("input",{type:"text",value:s.translation_emoji,onChange:e=>l({...s,translation_emoji:e.target.value})})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:s.auto_translate,onChange:e=>l({...s,auto_translate:e.target.checked})}),a.jsx("span",{children:"Otomatik Ã§eviri"})]})}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:s.react_to_translate,onChange:e=>l({...s,react_to_translate:e.target.checked})}),a.jsx("span",{children:"Emoji ile Ã§evir"})]})})]}),a.jsxs("div",{className:"languages-section",children:[a.jsx("h4",{children:"Ä°zin Verilen Diller"}),a.jsx("div",{className:"languages-grid",children:d.map(e=>a.jsxs("div",{className:`language-card ${s.allowed_languages.includes(e.code)?"active":""}`,onClick:()=>N(e.code),children:[a.jsx("span",{className:"language-flag",children:e.flag}),a.jsx("span",{className:"language-name",children:e.name}),s.allowed_languages.includes(e.code)&&a.jsx("span",{className:"check-icon",children:"âœ…"})]},e.code))})]}),a.jsx("button",{className:"save-btn",onClick:f,children:"ðŸ’¾ Kaydet"})]}),t.top_languages.length>0&&a.jsxs("div",{className:"top-languages-section",children:[a.jsx("h3",{children:"ðŸ“Š En Ã‡ok KullanÄ±lan Diller"}),a.jsx("div",{className:"top-languages-list",children:t.top_languages.slice(0,5).map((e,n)=>{const i=d.find(v=>v.code===e.code);return a.jsxs("div",{className:"top-language-item",children:[a.jsxs("span",{className:"rank",children:["#",n+1]}),a.jsx("span",{className:"flag",children:i?.flag}),a.jsx("span",{className:"name",children:i?.name}),a.jsxs("span",{className:"count",children:[e.count," Ã§eviri"]})]},n)})})]})]})})]})})};export{B as default};
