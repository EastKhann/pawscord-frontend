import{r as a,j as e}from"./react-vendor-D8Fi5F9E.js";import{aV as S,m as L,f as z,a as C}from"./icons-vendor-BPCemF_6.js";import{t as o}from"./index-DqcHZhUV.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./state-vendor-De5qIGw3.js";const W=({onClose:g,fetchWithAuth:c,apiBaseUrl:p,serverId:s,embedded:h=!1})=>{const[r,x]=a.useState(""),[u,l]=a.useState(!1),[d,y]=a.useState(null),[j,m]=a.useState(!0);a.useEffect(()=>{b()},[s]);const b=async()=>{m(!0);try{const t=await c(`${p}/vanity/get/${s}/`);if(t.ok){const i=await t.json();i.exists?(y(i),x(i.path)):y(null)}}catch(t){console.error("Vanity URL y√ºkleme hatasƒ±:",t)}finally{m(!1)}},k=async()=>{if(!r.trim()){o.warning("L√ºtfen bir vanity path girin");return}if(r.length<3){o.warning("Path en az 3 karakter olmalƒ±");return}l(!0);try{const t=await c(`${p}/vanity/create/`,{method:"POST",body:JSON.stringify({path:r,server_id:s})});if(t.ok){const i=await t.json();o.success("Vanity URL olu≈üturuldu!"),b()}else{const i=await t.json();o.error("Hata: "+(i.error||"Bu path zaten kullanƒ±lƒ±yor"))}}catch(t){console.error("Vanity URL error:",t),o.error("Sunucu hatasƒ±")}finally{l(!1)}},w=async()=>{if(window.confirm("Vanity URL'i silmek istediƒüinize emin misiniz?")){l(!0);try{const t=await c(`${p}/vanity/delete/${s}/`,{method:"DELETE"});if(t.ok)o.success("Vanity URL silindi!"),y(null),x("");else{const i=await t.json();o.error("Hata: "+(i.error||"Silme ba≈üarƒ±sƒ±z"))}}catch(t){console.error("Vanity URL silme hatasƒ±:",t),o.error("Sunucu hatasƒ±")}finally{l(!1)}}},v=()=>{const t=`https://pawscord.com/join/${d.path}`;navigator.clipboard.writeText(t),o.success("URL kopyalandƒ±!")},f=e.jsx(e.Fragment,{children:j?e.jsx("div",{style:n.description,children:"Y√ºkleniyor..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:n.description,children:["Sunucunuz i√ßin √∂zel bir davet URL'i olu≈üturun.",e.jsx("br",{}),e.jsxs("span",{style:{fontSize:"0.9em",color:"#72767d"},children:["Format: ",e.jsx("strong",{style:{color:"#5865f2"},children:"pawscord.com/join/yourpath"})]})]}),d&&e.jsxs("div",{style:n.existingSection,children:[e.jsx("div",{style:n.existingLabel,children:"üìå Mevcut Vanity URL:"}),e.jsxs("div",{style:n.existingUrl,children:[e.jsxs("span",{style:n.urlText,children:["pawscord.com/join/",d.path]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:v,style:n.copyButton,children:[e.jsx(S,{})," Kopyala"]}),e.jsxs("button",{onClick:w,style:n.deleteButton,disabled:u,children:[e.jsx(L,{})," Sil"]})]})]})]}),e.jsxs("div",{style:n.inputGroup,children:[e.jsx("span",{style:n.prefix,children:"pawscord.com/join/"}),e.jsx("input",{type:"text",value:r,onChange:t=>x(t.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")),placeholder:"myserver",style:n.input,maxLength:32})]}),e.jsxs("div",{style:{fontSize:"0.85em",color:"#72767d",marginTop:"8px",marginBottom:"15px"},children:["‚Ä¢ En az 3, en fazla 32 karakter",e.jsx("br",{}),"‚Ä¢ Sadece k√º√ß√ºk harf, rakam ve tire (-) kullanƒ±labilir",e.jsx("br",{}),"‚Ä¢ Sistem kelimeleri (api, admin, vb.) kullanƒ±lamaz"]}),e.jsx("button",{onClick:k,disabled:u||!r.trim(),style:n.createButton,children:u?"ƒ∞≈üleniyor...":d?"üîó Vanity URL G√ºncelle":"üîó Vanity URL Olu≈ütur"})]})});return h?e.jsx("div",{style:n.content,children:f}):e.jsx("div",{style:n.overlay,onClick:g,children:e.jsxs("div",{style:n.modal,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:n.header,children:[e.jsxs("h3",{style:n.title,children:[e.jsx(z,{})," Vanity URL Olu≈ütur"]}),e.jsx("button",{onClick:g,style:n.closeButton,children:e.jsx(C,{})})]}),e.jsx("div",{style:n.content,children:f})]})})},n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"500px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.3em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.3em"},content:{padding:"20px"},description:{color:"#b9bbbe",fontSize:"0.9em",marginBottom:"15px",padding:"10px",backgroundColor:"#40444b",borderRadius:"4px"},existingSection:{marginBottom:"20px",padding:"15px",backgroundColor:"#2f3136",borderRadius:"8px",border:"1px solid #5865f2"},existingLabel:{color:"#5865f2",fontWeight:"bold",marginBottom:"10px",fontSize:"0.9em"},existingUrl:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"},urlText:{color:"#fff",fontWeight:"bold",fontSize:"1em"},inputGroup:{display:"flex",alignItems:"center",backgroundColor:"#40444b",borderRadius:"4px",padding:"5px",marginBottom:"15px"},prefix:{color:"#b9bbbe",padding:"0 10px",fontWeight:"bold"},input:{flex:1,padding:"10px",backgroundColor:"transparent",border:"none",color:"white",fontSize:"1em",outline:"none"},copyButton:{padding:"8px 12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:"bold"},deleteButton:{padding:"8px 12px",backgroundColor:"#ed4245",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:"bold"},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"}};export{W as default};
