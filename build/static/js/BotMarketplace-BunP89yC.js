import{n as e,r as n}from"./react-core-DA61mcWm.js";import{s as P,t as $}from"./index-1Alyfdkn.js";import"./ui-vendor-BrUQ4r0A.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-tDmQW26m.js";import"./router-vendor-2etVlp2q.js";import"./icons-vendor-DRtjID0N.js";import"./state-vendor-CjqIs3K2.js";import"./crypto-vendor-DiGIAuUm.js";const w=({bot:s,onClick:h})=>e.jsxs("div",{className:"bot-card",onClick:()=>h(s),children:[e.jsxs("div",{className:"bot-avatar",children:[e.jsx("img",{src:s.avatar||"/default-bot.png",alt:s.name}),s.is_verified&&e.jsx("span",{className:"verified-badge",children:"âœ“"})]}),e.jsxs("div",{className:"bot-info",children:[e.jsxs("h3",{className:"bot-name",children:[s.name,s.is_featured&&e.jsxs("span",{className:"featured-tag",children:["â­"," ","Ã–","ne ","Ã‡Ä±","kan"]})]}),e.jsx("p",{className:"bot-description",children:s.short_description}),e.jsxs("div",{className:"bot-meta",children:[e.jsxs("span",{className:"bot-installs",children:[e.jsx("i",{children:"ðŸ“¥"})," ",s.install_count?.toLocaleString()||0]}),e.jsxs("span",{className:"bot-rating",children:[e.jsx("i",{children:"â­"})," ",s.avg_rating||0]}),s.category&&e.jsx("span",{className:"bot-category",children:s.category})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"bot-tags",children:s.tags.slice(0,3).map((x,c)=>e.jsx("span",{className:"tag",children:x},c))})]})]}),A=({bot:s,onClose:h,onInstall:x})=>{const[c,v]=n.useState("overview"),[b,i]=n.useState(!1),[k,u]=n.useState([]),[r,p]=n.useState(null),[y,d]=n.useState(!1),g=P,o=n.useCallback(async()=>{try{const a=localStorage.getItem("access_token"),l=await fetch(`${g}/bots/my-servers/`,{headers:{Authorization:`Bearer ${a}`}});if(l.ok){const t=await l.json();u(t.servers||[])}}catch{}},[g]),S=async()=>{if(r){d(!0);try{const a=localStorage.getItem("access_token"),l=await fetch(`${g}/bots/${s.id}/install/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:r.id})});if(l.ok)x?.(s,r),i(!1),$.success(`${s.name} baÅŸarÄ±yla ${r.name} sunucusuna eklendi!`);else{const t=await l.json();$.error(t.error||"YÃ¼kleme baÅŸarÄ±sÄ±z")}}catch{}d(!1)}};return n.useEffect(()=>{o()},[o]),s?e.jsx("div",{className:"bot-modal-overlay",onClick:a=>a.target===a.currentTarget&&h(),children:e.jsxs("div",{className:"bot-modal",children:[e.jsxs("div",{className:"bot-modal-header",style:{backgroundImage:s.banner?`url(${s.banner})`:void 0},children:[e.jsx("button",{className:"modal-close",onClick:h,children:"Ã—"}),e.jsxs("div",{className:"bot-header-content",children:[e.jsx("img",{src:s.avatar||"/default-bot.png",alt:s.name,className:"bot-large-avatar"}),e.jsxs("div",{className:"bot-header-info",children:[e.jsxs("h2",{children:[s.name,s.is_verified&&e.jsxs("span",{className:"verified",children:["âœ“"," Do\\u011Frulanm\\u0131\\u015F"]})]}),e.jsx("p",{children:s.short_description}),e.jsxs("div",{className:"bot-stats",children:[e.jsxs("span",{children:["ðŸ“¥"," ",s.install_count?.toLocaleString()," sunucu"]}),e.jsxs("span",{children:["â­"," ",s.avg_rating," (",s.review_count," yorum)"]})]})]}),e.jsx("button",{className:"add-bot-btn",onClick:()=>i(!0),children:"Sunucuya Ekle"})]})]}),e.jsxs("div",{className:"bot-modal-tabs",children:[e.jsx("button",{className:c==="overview"?"active":"",onClick:()=>v("overview"),children:"Genel Bak\\u0131\\u015F"}),e.jsx("button",{className:c==="commands"?"active":"",onClick:()=>v("commands"),children:"Komutlar"}),e.jsx("button",{className:c==="reviews"?"active":"",onClick:()=>v("reviews"),children:"Yorumlar"})]}),e.jsxs("div",{className:"bot-modal-content",children:[c==="overview"&&e.jsxs("div",{className:"overview-tab",children:[e.jsxs("div",{className:"description-section",children:[e.jsx("h3",{children:"A\\u00E7\\u0131klama"}),e.jsx("div",{className:"description-content",children:s.description})]}),s.features&&s.features.length>0&&e.jsxs("div",{className:"features-section",children:[e.jsxs("h3",{children:["Ã–","zellikler"]}),e.jsx("div",{className:"features-list",children:s.features.map((a,l)=>e.jsxs("div",{className:"feature-item",children:["âœ…"," ",a]},l))})]}),e.jsxs("div",{className:"links-section",children:[e.jsx("h3",{children:"Ba\\u011Flant\\u0131lar"}),e.jsxs("div",{className:"links-list",children:[s.website&&e.jsxs("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",children:["ðŸŒ"," Web Sitesi"]}),s.support_server&&e.jsxs("a",{href:`/invite/${s.support_server}`,children:["ðŸ’¬"," Destek Sunucusu"]}),s.privacy_policy&&e.jsxs("a",{href:s.privacy_policy,target:"_blank",rel:"noopener noreferrer",children:["ðŸ”’"," Gizlilik Politikas\\u0131"]})]})]}),s.developer&&e.jsxs("div",{className:"developer-section",children:[e.jsx("h3",{children:"Geli\\u015Ftirici"}),e.jsxs("div",{className:"developer-info",children:[e.jsx("img",{src:s.developer.avatar||"/default-avatar.png",alt:""}),e.jsx("span",{children:s.developer.username})]})]})]}),c==="commands"&&e.jsx("div",{className:"commands-tab",children:s.commands&&s.commands.length>0?e.jsx("div",{className:"commands-list",children:s.commands.map((a,l)=>e.jsxs("div",{className:"command-item",children:[e.jsxs("code",{className:"command-name",children:[s.prefix,a.name]}),e.jsx("p",{className:"command-desc",children:a.description}),a.usage&&e.jsx("code",{className:"command-usage",children:a.usage})]},l))}):e.jsx("p",{className:"no-data",children:"Komut listesi mevcut de\\u011Fil"})}),c==="reviews"&&e.jsx("div",{className:"reviews-tab",children:s.reviews&&s.reviews.length>0?e.jsx("div",{className:"reviews-list",children:s.reviews.map(a=>e.jsxs("div",{className:"review-item",children:[e.jsxs("div",{className:"review-header",children:[e.jsx("img",{src:a.avatar||"/default-avatar.png",alt:""}),e.jsx("span",{className:"reviewer-name",children:a.user}),e.jsx("span",{className:"review-rating",children:"â­".repeat(a.rating)})]}),e.jsx("p",{className:"review-content",children:a.content}),e.jsx("span",{className:"review-date",children:new Date(a.created_at).toLocaleDateString("tr-TR")})]},a.id))}):e.jsx("p",{className:"no-data",children:"Hen\\u00FCz yorum yok"})})]}),b&&e.jsx("div",{className:"server-select-overlay",children:e.jsxs("div",{className:"server-select-modal",children:[e.jsx("h3",{children:"Sunucu Se\\u00E7"}),e.jsxs("p",{children:[s.name," botunu hangi sunucuya eklemek istiyorsunuz?"]}),e.jsx("div",{className:"server-list",children:k.length===0?e.jsx("p",{className:"no-servers",children:"Admin oldu\\u011Funuz sunucu bulunamad\\u0131"}):k.map(a=>e.jsxs("div",{className:`server-item ${r?.id===a.id?"selected":""}`,onClick:()=>p(a),children:[e.jsx("img",{src:a.icon||"/default-server.png",alt:""}),e.jsx("span",{children:a.name}),e.jsxs("span",{className:"member-count",children:[a.member_count," ","Ã¼","ye"]})]},a.id))}),e.jsxs("div",{className:"server-select-actions",children:[e.jsxs("button",{className:"cancel-btn",onClick:()=>i(!1),children:["Ä°","ptal"]}),e.jsx("button",{className:"install-btn",disabled:!r||y,onClick:S,children:y?"YÃ¼kleniyor...":"Ekle"})]})]})})]})}):null},I=()=>{const[s,h]=n.useState([]),[x,c]=n.useState([]),[v,b]=n.useState([]),[i,k]=n.useState([]),[u,r]=n.useState(!0),[p,y]=n.useState(null),[d,g]=n.useState(""),[o,S]=n.useState("popular"),[a,l]=n.useState(null),[t,E]=n.useState(1),[F,T]=n.useState(1),N=P,C=n.useCallback(async()=>{try{const m=new URLSearchParams({page:t,sort:o,limit:20});p&&m.append("category",p),d&&m.append("search",d);const j=await fetch(`${N}/bots/?${m}`);if(j.ok){const f=await j.json();h(f.bots||[]),T(f.pages||1)}}catch{}},[N,t,o,p,d]),_=n.useCallback(async()=>{r(!0);try{const[m,j,f]=await Promise.all([fetch(`${N}/bots/categories/`),fetch(`${N}/bots/featured/`),fetch(`${N}/bots/trending/`)]);if(m.ok){const B=await m.json();k(B.categories||[])}if(j.ok){const B=await j.json();c(B.bots||[])}if(f.ok){const B=await f.json();b(B.bots||[])}}catch{}r(!1)},[N]),z=async m=>{try{const j=await fetch(`${N}/bots/${m.id}/`);if(j.ok){const f=await j.json();l(f)}}catch{}};return n.useEffect(()=>{_()},[_]),n.useEffect(()=>{C()},[C]),{bots:s,featuredBots:x,trendingBots:v,categories:i,loading:u,selectedCategory:p,setSelectedCategory:y,searchQuery:d,setSearchQuery:g,sortBy:o,setSortBy:S,selectedBot:a,setSelectedBot:l,page:t,setPage:E,totalPages:F,loadBotDetail:z}},O=({onClose:s})=>{const{bots:h,featuredBots:x,trendingBots:c,categories:v,loading:b,selectedCategory:i,setSelectedCategory:k,searchQuery:u,setSearchQuery:r,sortBy:p,setSortBy:y,selectedBot:d,setSelectedBot:g,page:o,setPage:S,totalPages:a,loadBotDetail:l}=I();return b?e.jsx("div",{className:"bot-marketplace",children:e.jsxs("div",{className:"marketplace-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsxs("p",{children:["Bot Marketplace y","Ã¼","kleniyor..."]})]})}):e.jsxs("div",{className:"bot-marketplace",children:[e.jsxs("div",{className:"marketplace-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsxs("h1",{children:["ðŸ¤–"," Bot Marketplace"]}),e.jsxs("p",{children:["Sunucunuzu g","Ã¼Ã§","lendirecek binlerce bot ke","ÅŸ","fedin"]})]}),s&&e.jsx("button",{className:"close-btn",onClick:s,children:"Ã—"})]}),e.jsxs("div",{className:"marketplace-filters",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:"Bot ara...",value:u,onChange:t=>r(t.target.value)}),e.jsx("span",{className:"search-icon",children:"ðŸ”"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsxs("select",{value:i||"",onChange:t=>k(t.target.value||null),children:[e.jsxs("option",{value:"",children:["T","Ã¼","m Kategoriler"]}),v.map(t=>e.jsxs("option",{value:t.slug,children:[t.icon," ",t.name," (",t.bot_count,")"]},t.id))]}),e.jsxs("select",{value:p,onChange:t=>y(t.target.value),children:[e.jsxs("option",{value:"popular",children:["Pop","Ã¼","ler"]}),e.jsx("option",{value:"new",children:"Yeni"}),e.jsxs("option",{value:"rated",children:["En ","Ä°","yi Puan"]})]})]})]}),e.jsxs("div",{className:"marketplace-content",children:[x.length>0&&!u&&!i&&e.jsxs("section",{className:"featured-section",children:[e.jsxs("h2",{children:["â­"," ","Ã–","ne ","Ã‡Ä±","kan Botlar"]}),e.jsx("div",{className:"featured-grid",children:x.map(t=>e.jsx(w,{bot:t,onClick:l},t.id))})]}),c.length>0&&!u&&!i&&e.jsxs("section",{className:"trending-section",children:[e.jsxs("h2",{children:["ðŸ“ˆ"," Y","Ã¼","kselen Botlar"]}),e.jsx("div",{className:"trending-grid",children:c.map(t=>e.jsx(w,{bot:t,onClick:l},t.id))})]}),e.jsxs("section",{className:"all-bots-section",children:[e.jsx("h2",{children:i?v.find(t=>t.slug===i)?.name||"Botlar":u?`"${u}" iÃ§in sonuÃ§lar`:"TÃ¼m Botlar"}),h.length===0?e.jsx("div",{className:"no-results",children:e.jsxs("p",{children:["Bot bulunamad","Ä±"]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bots-grid",children:h.map(t=>e.jsx(w,{bot:t,onClick:l},t.id))}),a>1&&e.jsxs("div",{className:"pagination",children:[e.jsxs("button",{disabled:o<=1,onClick:()=>S(t=>t-1),children:["â†"," ","Ã–","nceki"]}),e.jsxs("span",{children:["Sayfa ",o," / ",a]}),e.jsxs("button",{disabled:o>=a,onClick:()=>S(t=>t+1),children:["Sonraki ","â†’"]})]})]})]})]}),d&&e.jsx(A,{bot:d,onClose:()=>g(null)})]})};export{O as default};
