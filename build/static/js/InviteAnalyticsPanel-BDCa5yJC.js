import{r as i,b as e}from"./react-core-9vc7GIjk.js";import{L as s,a as h,f as C,n as S}from"./icons-vendor-c3DBUQOi.js";import{t as I}from"./index-JO48dClR.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const A=({fetchWithAuth:c,apiBaseUrl:d,onClose:m,serverId:f})=>{const[n,p]=i.useState(null),[y,r]=i.useState(!1),[o,x]=i.useState("7d");i.useEffect(()=>{v()},[o]);const v=async()=>{r(!0);try{const l=await(await c(`${d}/api/servers/${f}/invite-analytics/?range=${o}`)).json();p(l)}catch{I.error("Failed to load analytics")}finally{r(!1)}},g=[{value:"24h",label:"24 Hours"},{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"},{value:"all",label:"All Time"}];return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(s,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Invite Analytics")),e.createElement("button",{onClick:m,style:t.closeButton},e.createElement(h,null))),e.createElement("div",{style:t.toolbar},e.createElement("div",{style:t.timeRangeButtons},g.map(a=>e.createElement("button",{key:a.value,onClick:()=>x(a.value),style:{...t.timeRangeButton,...o===a.value&&t.timeRangeButtonActive}},a.label)))),e.createElement("div",{style:t.content},y?e.createElement("div",{style:t.loading},"Loading analytics..."):n?e.createElement(e.Fragment,null,e.createElement("div",{style:t.statsGrid},e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(C,{style:{color:"#5865f2"}})),e.createElement("div",{style:t.statInfo},e.createElement("div",{style:t.statValue},n.total_invites||0),e.createElement("div",{style:t.statLabel},"Total Invites"))),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(S,{style:{color:"#43b581"}})),e.createElement("div",{style:t.statInfo},e.createElement("div",{style:t.statValue},n.total_joins||0),e.createElement("div",{style:t.statLabel},"Total Joins"))),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(s,{style:{color:"#faa61a"}})),e.createElement("div",{style:t.statInfo},e.createElement("div",{style:t.statValue},n.total_invites>0?(n.total_joins/n.total_invites*100).toFixed(1):0,"%"),e.createElement("div",{style:t.statLabel},"Conversion Rate")))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"Top Invites"),e.createElement("div",{style:t.invitesList},(n.top_invites||[]).map((a,l)=>e.createElement("div",{key:l,style:t.inviteCard},e.createElement("div",{style:t.inviteRank},"#",l+1),e.createElement("div",{style:t.inviteInfo},e.createElement("div",{style:t.inviteCode},a.code),e.createElement("div",{style:t.inviteMeta},"Created by ",a.creator_username)),e.createElement("div",{style:t.inviteStats},e.createElement("div",{style:t.inviteStat},e.createElement("span",{style:t.inviteStatValue},a.uses),e.createElement("span",{style:t.inviteStatLabel},"uses"))))))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"Daily Joins"),e.createElement("div",{style:t.chartContainer},(n.daily_joins||[]).map((a,l)=>{const u=Math.max(...(n.daily_joins||[]).map(E=>E.joins),1),b=a.joins/u*100;return e.createElement("div",{key:l,style:t.barContainer},e.createElement("div",{style:{...t.bar,height:`${b}%`}},e.createElement("div",{style:t.barValue},a.joins)),e.createElement("div",{style:t.barLabel},new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})))})))):e.createElement("div",{style:t.empty},"No analytics data available"))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},timeRangeButtons:{display:"flex",gap:"8px"},timeRangeButton:{padding:"8px 16px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#dcddde",cursor:"pointer",fontSize:"13px"},timeRangeButtonActive:{backgroundColor:"#5865f2",borderColor:"#5865f2",color:"#ffffff"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"30px"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",gap:"16px",alignItems:"center"},statIcon:{fontSize:"32px"},statInfo:{flex:1},statValue:{fontSize:"28px",fontWeight:"700",color:"#ffffff",marginBottom:"4px"},statLabel:{fontSize:"13px",color:"#99aab5"},section:{marginBottom:"30px"},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},invitesList:{display:"flex",flexDirection:"column",gap:"10px"},inviteCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},inviteRank:{fontSize:"20px",fontWeight:"700",color:"#5865f2",minWidth:"40px"},inviteInfo:{flex:1},inviteCode:{fontSize:"16px",fontWeight:"600",color:"#ffffff",fontFamily:"monospace",marginBottom:"4px"},inviteMeta:{fontSize:"12px",color:"#99aab5"},inviteStats:{display:"flex",gap:"20px"},inviteStat:{display:"flex",flexDirection:"column",alignItems:"center"},inviteStatValue:{fontSize:"18px",fontWeight:"700",color:"#43b581"},inviteStatLabel:{fontSize:"11px",color:"#99aab5"},chartContainer:{display:"flex",gap:"8px",alignItems:"flex-end",height:"200px",padding:"10px",backgroundColor:"#2c2f33",borderRadius:"8px"},barContainer:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",height:"100%",justifyContent:"flex-end"},bar:{width:"100%",backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"4px 0",minHeight:"20px"},barValue:{fontSize:"11px",color:"#ffffff",fontWeight:"600"},barLabel:{fontSize:"10px",color:"#99aab5",marginTop:"4px",transform:"rotate(-45deg)",transformOrigin:"center"}};export{A as default};
