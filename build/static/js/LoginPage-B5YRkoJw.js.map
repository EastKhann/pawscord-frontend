{"version":3,"file":"LoginPage-B5YRkoJw.js","sources":["../../../src/LoginPage.js"],"sourcesContent":["// frontend/src/LoginPage.js\n\nimport { useState, useEffect } from 'react';\nimport { FaUser, FaLock, FaEnvelope, FaPaw } from 'react-icons/fa';\nimport { Capacitor } from '@capacitor/core';\nimport { GoogleAuth } from '@codetrix-studio/capacitor-google-auth';\nimport toast from './utils/toast';\nimport { useRecaptcha } from './utils/recaptcha';\nimport { jwtDecode } from 'jwt-decode'; // üî• FIX: Import jwtDecode for user extraction\nimport { API_URL_BASE_STRING, API_BASE_URL, isElectron, isNative, GOOGLE_WEB_CLIENT_ID } from './utils/constants';\n\n// --- ORTAM AYARLARI (Centralized from constants.js) ---\nconst API_URL = API_BASE_URL;\n\nconst LoginPage = ({ onLogin, onRegister, error, setAuthError }) => {\n    const [isLoginMode, setIsLoginMode] = useState(true);\n    const [formData, setFormData] = useState({ username: '', email: '', password: '' });\n    const [isLoading, setIsLoading] = useState(false);\n    const { getToken: getRecaptchaToken } = useRecaptcha();\n\n    // ‚úÖ 0. GOOGLE AUTH INITIALIZE (Mobile i√ßin gerekli)\n    useEffect(() => {\n        if (Capacitor.isNativePlatform()) {\n            try {\n                GoogleAuth.initialize({\n                    clientId: GOOGLE_WEB_CLIENT_ID,\n                    scopes: ['profile', 'email'],\n                    grantOfflineAccess: true,\n                });\n            } catch (error) {\n                console.error('‚ùå [Google] Initialization failed:', error);\n            }\n        }\n    }, []);\n\n    // ‚úÖ 1. ELECTRON DEEP LINK Dƒ∞NLEYƒ∞Cƒ∞Sƒ∞ (EXE'ye D√∂n√º≈ü)\n    useEffect(() => {\n        if (isElectron && window.require) {\n            const { ipcRenderer } = window.require('electron');\n\n            // NEW: Handle auth success event from Electron main process\n            const handleAuthSuccess = (event, data) => {\n                try {\n                    const { access, refresh } = data;\n\n                    if (access && refresh) {\n                        const decoded = jwtDecode(access);\n\n                        localStorage.removeItem('chat_username');\n                        localStorage.setItem('access_token', access);\n                        localStorage.setItem('refresh_token', refresh);\n                        localStorage.setItem('chat_username', decoded.username);\n\n                        setTimeout(() => window.location.reload(), 500);\n                    }\n                } catch (e) {\n                    console.error(\"‚ùå [Electron] Token error:\", e);\n                    setAuthError('Token i≈üleme hatasƒ±.');\n                }\n            };\n\n            // NEW: Handle auth error\n            const handleAuthError = (event, data) => {\n                console.error(\"‚ùå [Electron] Auth error:\", data);\n                setAuthError(data.error || 'Google giri≈üi ba≈üarƒ±sƒ±z.');\n            };\n\n            // üî• NEW: Handle oauth-tokens from deep link (main process'den gelen)\n            const handleOAuthTokens = (event, data) => {\n                try {\n                    const { access, refresh } = data;\n\n                    if (access && refresh) {\n                        const decoded = jwtDecode(access);\n\n                        localStorage.removeItem('chat_username');\n                        localStorage.setItem('access_token', access);\n                        localStorage.setItem('refresh_token', refresh);\n                        localStorage.setItem('chat_username', decoded.username);\n\n                        setTimeout(() => window.location.reload(), 500);\n                    }\n                } catch (e) {\n                    console.error(\"‚ùå [Electron] OAuth token error:\", e);\n                    setAuthError('Token i≈üleme hatasƒ±.');\n                }\n            };\n\n            const handleDeepLink = (event, url) => {\n                try {\n                    const urlObj = new URL(url);\n                    const params = new URLSearchParams(urlObj.search);\n                    const accessToken = params.get('access');\n                    const refreshToken = params.get('refresh');\n\n                    if (accessToken && refreshToken) {\n\n                        // üî• FIX: Decode token and save username for Electron too\n                        const decoded = jwtDecode(accessToken);\n\n                        // Clear old user data first\n                        localStorage.removeItem('chat_username');\n\n                        localStorage.setItem('access_token', accessToken);\n                        localStorage.setItem('refresh_token', refreshToken);\n                        localStorage.setItem('chat_username', decoded.username);\n                        window.location.reload();\n                    }\n                } catch (e) {\n                    console.error(\"Deep link hatasƒ±:\", e);\n                    try {\n                        if (url.includes(\"access=\") && url.includes(\"refresh=\")) {\n                            const parts = url.split(\"access=\");\n                            if (parts.length > 1) {\n                                const access = parts[1].split(\"&\")[0];\n                                const refreshParts = url.split(\"refresh=\");\n                                if (refreshParts.length > 1) {\n                                    const refresh = refreshParts[1];\n\n                                    // üî• FIX: Decode and save username here too\n                                    const decoded = jwtDecode(access);\n                                    localStorage.removeItem('chat_username');\n                                    localStorage.setItem('access_token', access);\n                                    localStorage.setItem('refresh_token', refresh);\n                                    localStorage.setItem('chat_username', decoded.username);\n                                    window.location.reload();\n                                } else {\n                                    setAuthError(\"Giri≈ü verisi okunamadƒ±.\");\n                                }\n                            } else {\n                                setAuthError(\"Giri≈ü verisi okunamadƒ±.\");\n                            }\n                        } else {\n                            setAuthError(\"Giri≈ü verisi okunamadƒ±.\");\n                        }\n                    } catch (parseError) {\n                        console.error(\"Manual parsing error:\", parseError);\n                        setAuthError(\"Giri≈ü i≈ülemi ba≈üarƒ±sƒ±z.\");\n                    }\n                }\n            };\n\n            // Register all listeners\n            ipcRenderer.on('google-auth-success', handleAuthSuccess);\n            ipcRenderer.on('google-auth-error', handleAuthError);\n            ipcRenderer.on('deep-link-auth', handleDeepLink);\n            ipcRenderer.on('oauth-tokens', handleOAuthTokens);\n\n            return () => {\n                ipcRenderer.removeListener('google-auth-success', handleAuthSuccess);\n                ipcRenderer.removeListener('google-auth-error', handleAuthError);\n                ipcRenderer.removeListener('deep-link-auth', handleDeepLink);\n                ipcRenderer.removeListener('oauth-tokens', handleOAuthTokens);\n            };\n        }\n    }, [setAuthError]);\n\n    // ‚úÖ 2. WEB Sƒ∞TESƒ∞ URL Dƒ∞NLEYƒ∞Cƒ∞Sƒ∞ (OAuth Callback i√ßin)\n    useEffect(() => {\n        if (!isElectron) {\n            const params = new URLSearchParams(window.location.search);\n            const accessToken = params.get('access');\n            const refreshToken = params.get('refresh');\n            const error = params.get('error');\n\n            // Check for error first\n            if (error) {\n                console.error(\"‚ùå [Web] OAuth error from URL:\", error);\n                setAuthError(decodeURIComponent(error));\n                // Clean URL\n                window.history.replaceState({}, document.title, \"/\");\n                return;\n            }\n\n            // Check for tokens (successful OAuth)\n            if (accessToken && refreshToken) {\n                try {\n                    // üî• FIX: Decode token and save username IMMEDIATELY\n                    const decoded = jwtDecode(accessToken);\n\n                    // Clear old user data first (CRITICAL!)\n                    localStorage.removeItem('chat_username');\n\n                    // Set new token and username atomically\n                    localStorage.setItem('access_token', accessToken);\n                    localStorage.setItem('refresh_token', refreshToken);\n                    localStorage.setItem('chat_username', decoded.username);\n\n                    // Clean URL and reload\n                    window.history.replaceState({}, document.title, \"/\");\n                    window.location.reload();\n                } catch (storageError) {\n                    console.error(\"‚ùå [Web] LocalStorage error:\", storageError);\n                    setAuthError(\"Tarayƒ±cƒ± depolama hatasƒ±. L√ºtfen gizli modda deƒüilseniz kontrol edin.\");\n                }\n            }\n        }\n    }, []);\n\n    // ‚úÖ 3. AKILLI GOOGLE Gƒ∞Rƒ∞≈û BUTONU\n    const handleGoogleLogin = async () => {\n        try {\n\n            if (Capacitor.isNativePlatform()) {\n                // MOBILE: Capacitor Google Auth kullan\n                const googleUser = await GoogleAuth.signIn();\n\n                // Token'ƒ± Backend'e G√∂nder (POST /auth/google/native/)\n                const url = `${API_BASE_URL}/auth/google/native/`;\n\n                const response = await fetch(url, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Accept': 'application/json'\n                    },\n                    body: JSON.stringify({ token: googleUser.authentication.idToken })\n                });\n\n\n                // Content-Type kontrol√º\n                const contentType = response.headers.get('content-type');\n\n                if (!contentType || !contentType.includes('application/json')) {\n                    const textResponse = await response.text();\n                    console.error('‚ùå [Google] Backend HTML d√∂nd√º:', textResponse.substring(0, 500));\n                    setAuthError('Backend hatasƒ±: JSON yerine HTML yanƒ±tƒ± alƒ±ndƒ±. Sunucu ayarlarƒ±nƒ± kontrol edin.');\n                    return;\n                }\n\n                const data = await response.json();\n\n                if (response.ok) {\n                    if (data.access && data.refresh) {\n                        localStorage.setItem('access_token', data.access);\n                        localStorage.setItem('refresh_token', data.refresh);\n                        window.location.reload();\n                    } else {\n                        console.error('‚ùå [Google] Tokens eksik:', data);\n                        setAuthError('Token bilgileri eksik.');\n                    }\n                } else {\n                    console.error('‚ùå [Google] Login failed:', data);\n                    setAuthError(data.error || 'Google giri≈üi ba≈üarƒ±sƒ±z.');\n                }\n            } else {\n                // WEB & ELECTRON: Redirect to Google\n                const source = isElectron ? 'electron' : 'web';\n                // üî• FIX: Electron i√ßin api.pawscord.com kullan (www subdomain /api route'u yok)\n                const oauthBaseUrl = isElectron ? 'https://api.pawscord.com/api' : API_BASE_URL;\n                const redirectUrl = `${oauthBaseUrl}/auth/google/start/?source=${source}`;\n\n                // üî• ELECTRON ƒ∞√áƒ∞N: Popup window a√ß (IPC kullan)\n                if (isElectron && window.require) {\n                    const { ipcRenderer } = window.require('electron');\n                    ipcRenderer.send('start-google-login', redirectUrl);\n                } else {\n                    // WEB i√ßin: Normal redirect\n                    window.location.href = redirectUrl;\n                }\n            }\n\n        } catch (error) {\n            console.error('‚ùå [Google] Unexpected error:', error);\n            setAuthError('Google giri≈üi sƒ±rasƒ±nda bir hata olu≈ütu: ' + error.message);\n        }\n    };\n\n    // ‚úÖ 4. NORMAL FORM Gƒ∞Rƒ∞≈ûƒ∞ (reCAPTCHA korumalƒ±)\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setIsLoading(true);\n        setAuthError('');\n\n        try {\n            // ü§ñ reCAPTCHA v3 token al\n            const recaptchaToken = await getRecaptchaToken(isLoginMode ? 'login' : 'register');\n\n            if (isLoginMode) {\n                await onLogin(formData.username, formData.password, recaptchaToken);\n            } else {\n                const success = await onRegister(formData.username, formData.email, formData.password, recaptchaToken);\n                if (success) {\n                    toast.success(\"Kayƒ±t ba≈üarƒ±lƒ±! L√ºtfen e-postanƒ± kontrol et.\", 4000);\n                    setIsLoginMode(true);\n                }\n            }\n        } catch (error) {\n            console.error('‚ùå [Login] Beklenmeyen hata:', error);\n            setAuthError('Giri≈ü sƒ±rasƒ±nda bir hata olu≈ütu. L√ºtfen tekrar deneyin.');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"login-container\">\n            <div className=\"background-animate\"></div>\n\n            <div className=\"login-card\">\n                <div className=\"logo-header\">\n                    <div className=\"logo-circle\">\n                        <FaPaw size={40} color=\"white\" />\n                    </div>\n                    <h1>Pawscord</h1>\n                    <p>{isLoginMode ? \"Tekrar ho≈ügeldin!\" : \"Aramƒ±za katƒ±l!\"}</p>\n                </div>\n\n                {error && <div className=\"error-message\">{error}</div>}\n\n                <form onSubmit={handleSubmit}>\n                    <div className=\"input-group\">\n                        <FaUser className=\"input-icon\" />\n                        <input\n                            type=\"text\"\n                            placeholder=\"Kullanƒ±cƒ± Adƒ±\"\n                            value={formData.username}\n                            onChange={e => setFormData({ ...formData, username: e.target.value })}\n                            required\n                        />\n                    </div>\n\n                    {!isLoginMode && (\n                        <div className=\"input-group slide-down\">\n                            <FaEnvelope className=\"input-icon\" />\n                            <input\n                                type=\"email\"\n                                placeholder=\"E-posta Adresi\"\n                                value={formData.email}\n                                onChange={e => setFormData({ ...formData, email: e.target.value })}\n                                required\n                            />\n                        </div>\n                    )}\n\n                    <div className=\"input-group\">\n                        <FaLock className=\"input-icon\" />\n                        <input\n                            type=\"password\"\n                            placeholder=\"≈ûifre\"\n                            value={formData.password}\n                            onChange={e => setFormData({ ...formData, password: e.target.value })}\n                            required\n                        />\n                    </div>\n\n                    <button type=\"submit\" className=\"submit-btn\" disabled={isLoading}>\n                        {isLoading ? <div className=\"spinner\"></div> : (isLoginMode ? \"Giri≈ü Yap\" : \"Kayƒ±t Ol\")}\n                    </button>\n                </form>\n\n                {/* üîê ROADMAP: ≈ûifremi Unuttum Linki */}\n                {isLoginMode && (\n                    <div style={{\n                        marginTop: '10px',\n                        textAlign: 'center'\n                    }}>\n                        <a\n                            href=\"#/forgot-password\"\n                            style={{\n                                color: '#5865f2',\n                                textDecoration: 'none',\n                                fontSize: '14px',\n                                transition: 'opacity 0.2s'\n                            }}\n                            onMouseEnter={e => e.target.style.opacity = '0.8'}\n                            onMouseLeave={e => e.target.style.opacity = '1'}\n                        >\n                            ≈ûifremi Unuttum?\n                        </a>\n                    </div>\n                )}\n\n                <div className=\"divider\"><span>veya</span></div>\n\n                <div className=\"google-btn-wrapper\">\n                    {/* √ñzel Google Butonu */}\n                    <button\n                        onClick={handleGoogleLogin}\n                        style={{\n                            display: 'flex', alignItems: 'center', justifyContent: 'center',\n                            width: '100%', padding: '11px', borderRadius: '20px',\n                            border: '1px solid #dadce0', backgroundColor: '#ffffff',\n                            color: '#3c4043', fontWeight: '500', cursor: 'pointer',\n                            fontSize: '14px', gap: '10px', fontFamily: '\"Google Sans\", arial, sans-serif',\n                            transition: 'background-color .2s, box-shadow .2s',\n                            boxShadow: '0 1px 2px rgba(0,0,0,0.1)'\n                        }}\n                        onMouseEnter={e => { e.currentTarget.style.backgroundColor = '#f7f8f8'; e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.2)'; }}\n                        onMouseLeave={e => { e.currentTarget.style.backgroundColor = '#ffffff'; e.currentTarget.style.boxShadow = '0 1px 2px rgba(0,0,0,0.1)'; }}\n                        onMouseDown={e => e.currentTarget.style.backgroundColor = '#eff2f5'}\n                    >\n                        <img\n                            src=\"https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg\"\n                            alt=\"G\"\n                            style={{ width: '18px', height: '18px' }}\n                        />\n                        <span>Google ile Giri≈ü Yap</span>\n                    </button>\n                </div>\n\n                <div className=\"toggle-mode\">\n                    {isLoginMode ? \"Hesabƒ±n yok mu? \" : \"Zaten √ºye misin? \"}\n                    <span onClick={() => { setIsLoginMode(!isLoginMode); setAuthError(''); }}>\n                        {isLoginMode ? \"Kayƒ±t Ol\" : \"Giri≈ü Yap\"}\n                    </span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default LoginPage;\n\n"],"names":["useState","useEffect","error","jsxs","jsx"],"mappings":"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"}