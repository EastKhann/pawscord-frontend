var k=Object.defineProperty;var p=(o,c)=>k(o,"name",{value:c,configurable:!0});import{r as a,j as e}from"./react-core-Djgtqrmb.js";import{t as u}from"./index-D09YXCFH.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";import"./ui-vendor-IhB9Znpc.js";function A({inviteCode:o,fetchWithAuth:c,onClose:d,apiBaseUrl:x}){const[v,m]=a.useState(!0),[y,h]=a.useState(null),[s,j]=a.useState(null),[f,g]=a.useState(!1);a.useEffect(()=>{S()},[o]);const S=p(async()=>{try{m(!0),h(null);const t=await fetch(`${x}/invites/${o}/`);if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.error||"Davet bulunamadƒ± veya s√ºresi dolmu≈ü")}if(!(t.headers.get("content-type")||"").includes("application/json"))throw new Error("Davet bulunamadƒ±");const l=await t.json();j(l)}catch(t){h(t.message)}finally{m(!1)}},"loadInviteInfo"),w=p(async()=>{if(s){if(!c){u.warning("üîê Sunucuya katƒ±lmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!"),sessionStorage.setItem("pending_invite",o),window.location.hash="#/";return}try{g(!0);const b=s?.type==="vanity"?`${x}/servers/${s.server.id}/join/`:`${x}/invites/${o}/accept/`,l=await c(b,{method:"POST"}),r=await l.json().catch(()=>({}));if(l.ok||r.success)u.success(`‚úÖ ${r.server_name||r.message||"Sunucuya katƒ±ldƒ±nƒ±z!"}`),d();else if(r.error&&r.error.includes("zaten"))u.info("‚ÑπÔ∏è Zaten bu sunucudasƒ±nƒ±z!"),d();else throw new Error(r.error||"Sunucuya katƒ±lƒ±namadƒ±")}catch(t){u.error("‚ùå "+t.message)}finally{g(!1)}}},"handleAccept");if(v)return e.jsx("div",{style:n.container,children:e.jsxs("div",{style:n.card,children:[e.jsx("div",{style:n.loadingSpinner}),e.jsx("p",{style:n.loadingText,children:"Davet bilgileri y√ºkleniyor..."})]})});if(y)return e.jsx("div",{style:n.container,children:e.jsxs("div",{style:n.card,children:[e.jsx("div",{style:n.errorIcon,children:"‚ùå"}),e.jsx("h2",{style:n.errorTitle,children:"Davet Bulunamadƒ±"}),e.jsx("p",{style:n.errorText,children:y}),e.jsx("button",{onClick:d,style:n.closeButton,children:"Ana Sayfaya D√∂n"})]})});const i=s?.server;return e.jsx("div",{style:n.container,children:e.jsxs("div",{style:n.card,children:[e.jsx("div",{style:n.serverIconContainer,children:i?.icon?e.jsx("img",{src:i.icon,alt:i?.name,style:n.serverIcon}):e.jsx("div",{style:n.serverIconPlaceholder,children:i?.name?.charAt(0)?.toUpperCase()||"?"})}),e.jsxs("p",{style:n.invitedBy,children:[s?.inviter?.username||"Birisi"," seni davet ediyor:"]}),e.jsx("h2",{style:n.serverName,children:i?.name||"Bilinmeyen Sunucu"}),e.jsx("div",{style:n.memberInfo,children:e.jsxs("span",{style:n.memberCount,children:["üë• ",i?.member_count||0," √ºye"]})}),e.jsx("button",{onClick:w,disabled:f,style:{...n.joinButton,opacity:f?.7:1},children:f?"‚è≥ Katƒ±lƒ±nƒ±yor...":"‚úÖ Sunucuya Katƒ±l"}),e.jsx("button",{onClick:d,style:n.backButton,children:"‚Üê Geri D√∂n"})]})})}p(A,"InviteCodeScreen");const n={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",padding:"20px"},card:{background:"#2b2d31",borderRadius:"16px",padding:"40px",maxWidth:"440px",width:"100%",textAlign:"center",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},serverIconContainer:{display:"flex",justifyContent:"center",marginBottom:"20px"},serverIcon:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:"3px solid #5865f2"},serverIconPlaceholder:{width:"80px",height:"80px",borderRadius:"50%",background:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"36px",fontWeight:"bold",color:"#fff"},invitedBy:{color:"#b5bac1",fontSize:"14px",marginBottom:"8px"},serverName:{color:"#fff",fontSize:"24px",fontWeight:"bold",marginBottom:"12px"},memberInfo:{marginBottom:"24px"},memberCount:{color:"#b5bac1",fontSize:"14px"},joinButton:{width:"100%",padding:"14px",background:"#5865f2",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"background 0.2s",marginBottom:"12px"},backButton:{width:"100%",padding:"10px",background:"transparent",color:"#b5bac1",border:"1px solid #4e5058",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},loadingSpinner:{width:"40px",height:"40px",border:"3px solid #4e5058",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"},loadingText:{color:"#b5bac1",fontSize:"16px"},errorIcon:{fontSize:"48px",marginBottom:"16px"},errorTitle:{color:"#fff",fontSize:"20px",marginBottom:"8px"},errorText:{color:"#b5bac1",fontSize:"14px",marginBottom:"20px"},closeButton:{padding:"12px 24px",background:"#4e5058",color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer"}};export{A as default};
