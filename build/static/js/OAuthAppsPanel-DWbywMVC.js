import{r,a0 as R,l as O,H as $,aI as S,v as k,bo as j}from"./react-core-B6hadH-M.js";import{t as o}from"./index-D_6pZib5.js";const P=({fetchWithAuth:l,apiBaseUrl:c,onClose:B})=>{const[d,w]=r.useState([]),[m,A]=r.useState([]),[z,E]=r.useState(!1),[u,h]=r.useState("apps"),[v,f]=r.useState(!1),[C,y]=r.useState(!1),[n,i]=r.useState({name:"",description:"",redirect_uris:"",scopes:[]}),[s,b]=r.useState({name:"",description:""}),T=["read_messages","send_messages","manage_channels","manage_roles","manage_server","read_user","modify_user"];r.useEffect(()=>{x(),g()},[]);const x=async()=>{E(!0);try{const a=await(await l(`${c}/oauth/apps/list/`)).json();w(a.apps||[])}catch{o.error("Failed to load OAuth apps")}finally{E(!1)}},g=async()=>{try{const a=await(await l(`${c}/bots/list/`)).json();A(a.bots||[])}catch{o.error("Failed to load bots")}},_=async()=>{if(!n.name){o.error("App name is required");return}try{const a=await(await l(`${c}/oauth/apps/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,redirect_uris:n.redirect_uris.split(`
`).filter(p=>p.trim())})})).json();o.success("OAuth app created successfully"),f(!1),i({name:"",description:"",redirect_uris:"",scopes:[]}),x(),a.client_id&&a.client_secret&&o.info(`Client ID: ${a.client_id}
Client Secret: ${a.client_secret}

Save these credentials securely. The secret will not be shown again.`)}catch{o.error("Failed to create OAuth app")}},F=async()=>{if(!s.name){o.error("Bot name is required");return}try{const a=await(await l(`${c}/bots/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();o.success("Bot created successfully"),y(!1),b({name:"",description:""}),g(),a.token&&o.info(`Bot Token: ${a.token}

Save this token securely. It will not be shown again.`)}catch{o.error("Failed to create bot")}},D=async t=>{if(confirm("Are you sure you want to delete this app? This cannot be undone."))try{await l(`${c}/oauth/apps/${t}/delete/`,{method:"DELETE"}),o.success("App deleted successfully"),x()}catch{o.error("Failed to delete app")}},I=async t=>{if(confirm("Are you sure you want to delete this bot? This cannot be undone."))try{await l(`${c}/bots/${t}/delete/`,{method:"DELETE"}),o.success("Bot deleted successfully"),g()}catch{o.error("Failed to delete bot")}},N=(t,a)=>{navigator.clipboard.writeText(t),o.success(`${a} copied to clipboard`)},L=t=>{i(a=>({...a,scopes:a.scopes.includes(t)?a.scopes.filter(p=>p!==t):[...a.scopes,t]}))};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(R,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Developer Portal")),React.createElement("button",{onClick:B,style:e.closeButton},React.createElement(O,null))),React.createElement("div",{style:e.tabs},React.createElement("button",{onClick:()=>h("apps"),style:{...e.tab,...u==="apps"&&e.tabActive}},React.createElement($,{style:{marginRight:"5px"}}),"OAuth Apps (",d.length,")"),React.createElement("button",{onClick:()=>h("bots"),style:{...e.tab,...u==="bots"&&e.tabActive}},React.createElement(R,{style:{marginRight:"5px"}}),"Bots (",m.length,")")),React.createElement("div",{style:e.content},z?React.createElement("div",{style:e.loading},"Loading..."):u==="apps"?React.createElement(React.Fragment,null,React.createElement("div",{style:e.toolbar},React.createElement("button",{onClick:()=>f(!v),style:e.createButton},React.createElement(S,{style:{marginRight:"5px"}}),"New OAuth App")),v&&React.createElement("div",{style:e.createForm},React.createElement("h3",{style:e.formTitle},"Create OAuth Application"),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Application Name"),React.createElement("input",{type:"text",value:n.name,onChange:t=>i({...n,name:t.target.value}),placeholder:"My Awesome App",style:e.input})),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Description"),React.createElement("textarea",{value:n.description,onChange:t=>i({...n,description:t.target.value}),placeholder:"What does your app do?",style:{...e.input,minHeight:"60px"}})),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Redirect URIs (one per line)"),React.createElement("textarea",{value:n.redirect_uris,onChange:t=>i({...n,redirect_uris:t.target.value}),placeholder:"https://example.com/callback",style:{...e.input,minHeight:"80px"}})),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Scopes"),React.createElement("div",{style:e.scopesGrid},T.map(t=>React.createElement("label",{key:t,style:e.scopeCheckbox},React.createElement("input",{type:"checkbox",checked:n.scopes.includes(t),onChange:()=>L(t)}),React.createElement("span",null,t))))),React.createElement("div",{style:e.formActions},React.createElement("button",{onClick:_,style:e.submitButton},"Create Application"),React.createElement("button",{onClick:()=>f(!1),style:e.cancelButton},"Cancel"))),React.createElement("div",{style:e.appsList},d.length===0?React.createElement("div",{style:e.empty},"No OAuth apps yet. Create one to get started!"):d.map(t=>React.createElement("div",{key:t.id,style:e.appCard},React.createElement("div",{style:e.appHeader},React.createElement("div",null,React.createElement("div",{style:e.appName},t.name),React.createElement("div",{style:e.appDescription},t.description)),React.createElement("button",{onClick:()=>D(t.id),style:e.deleteButton},React.createElement(k,null))),React.createElement("div",{style:e.appDetails},React.createElement("div",{style:e.credential},React.createElement("strong",null,"Client ID:"),React.createElement("code",{style:e.code},t.client_id),React.createElement("button",{onClick:()=>N(t.client_id,"Client ID"),style:e.copyButton},React.createElement(j,null))),React.createElement("div",{style:e.detail},React.createElement("strong",null,"Scopes:")," ",t.scopes?.join(", ")||"None"),React.createElement("div",{style:e.detail},React.createElement("strong",null,"Redirect URIs:"),t.redirect_uris?.map((a,p)=>React.createElement("div",{key:p,style:e.uri},a)))))))):React.createElement(React.Fragment,null,React.createElement("div",{style:e.toolbar},React.createElement("button",{onClick:()=>y(!C),style:e.createButton},React.createElement(S,{style:{marginRight:"5px"}}),"New Bot")),C&&React.createElement("div",{style:e.createForm},React.createElement("h3",{style:e.formTitle},"Create Bot Account"),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Bot Name"),React.createElement("input",{type:"text",value:s.name,onChange:t=>b({...s,name:t.target.value}),placeholder:"My Bot",style:e.input})),React.createElement("div",{style:e.formGroup},React.createElement("label",{style:e.label},"Description"),React.createElement("textarea",{value:s.description,onChange:t=>b({...s,description:t.target.value}),placeholder:"What does your bot do?",style:{...e.input,minHeight:"60px"}})),React.createElement("div",{style:e.formActions},React.createElement("button",{onClick:F,style:e.submitButton},"Create Bot"),React.createElement("button",{onClick:()=>y(!1),style:e.cancelButton},"Cancel"))),React.createElement("div",{style:e.botsList},m.length===0?React.createElement("div",{style:e.empty},"No bots yet. Create one to automate tasks!"):m.map(t=>React.createElement("div",{key:t.id,style:e.botCard},React.createElement("div",{style:e.botHeader},React.createElement(R,{style:{fontSize:"32px",color:"#5865f2"}}),React.createElement("div",{style:{flex:1,marginLeft:"12px"}},React.createElement("div",{style:e.botName},t.name),React.createElement("div",{style:e.botDescription},t.description),React.createElement("div",{style:e.botStatus},"Status: ",t.is_active?"ðŸŸ¢ Active":"ðŸ”´ Inactive")),React.createElement("button",{onClick:()=>I(t.id),style:e.deleteButton},React.createElement(k,null))))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},tabs:{display:"flex",borderBottom:"1px solid #2c2f33",padding:"0 20px"},tab:{padding:"12px 20px",backgroundColor:"transparent",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",borderBottom:"2px solid transparent"},tabActive:{color:"#5865f2",borderBottom:"2px solid #5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},toolbar:{marginBottom:"20px"},createButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",fontWeight:"500"},createForm:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",marginBottom:"20px"},formTitle:{margin:"0 0 16px 0",fontSize:"16px",color:"#ffffff"},formGroup:{marginBottom:"16px"},label:{display:"block",color:"#dcddde",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},scopesGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},scopeCheckbox:{display:"flex",alignItems:"center",gap:"8px",color:"#dcddde",fontSize:"14px",cursor:"pointer"},formActions:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"20px"},submitButton:{padding:"10px 20px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelButton:{padding:"10px 20px",backgroundColor:"#4f545c",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},appsList:{display:"flex",flexDirection:"column",gap:"16px"},appCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},appHeader:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},appName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},appDescription:{fontSize:"14px",color:"#99aab5"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"5px"},appDetails:{display:"flex",flexDirection:"column",gap:"12px"},credential:{display:"flex",alignItems:"center",gap:"10px",fontSize:"14px",color:"#dcddde"},code:{flex:1,padding:"8px",backgroundColor:"#1e1e1e",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#5865f2"},copyButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",padding:"5px"},detail:{fontSize:"14px",color:"#dcddde"},uri:{fontSize:"13px",color:"#5865f2",marginLeft:"8px",fontFamily:"monospace"},botsList:{display:"flex",flexDirection:"column",gap:"16px"},botCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},botHeader:{display:"flex",alignItems:"center"},botName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},botDescription:{fontSize:"14px",color:"#99aab5",marginBottom:"4px"},botStatus:{fontSize:"13px",color:"#dcddde"}};export{P as default};
