import{r as c,al as C,aX as R,K as g,bG as S,H as F,bK as T,dD as $,aW as _}from"./react-core-B6hadH-M.js";import{t as l}from"./index-D_6pZib5.js";const I=({onSelectTemplate:m,onClose:r})=>{const[i,h]=c.useState([]),[v,N]=c.useState([]),[s,u]=c.useState("all"),[k,d]=c.useState(!0),[a,n]=c.useState(null);c.useEffect(()=>{y(),f()},[]);const y=async()=>{d(!0);try{const e=await fetch("/api/templates/list/",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(e.ok){const t=await e.json();h(t.templates||[])}}catch{l.error("âŒ Åžablonlar yÃ¼klenemedi")}finally{d(!1)}},f=async()=>{try{const e=await fetch("/api/templates/categories/",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(e.ok){const t=await e.json();N(t.categories||[])}}catch(e){console.error("Failed to fetch categories:",e)}},b=async e=>{try{const t=await fetch(`/api/templates/${e}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(t.ok){const o=await t.json();n(o.template)}}catch{l.error("âŒ Åžablon detaylarÄ± yÃ¼klenemedi")}},p=async e=>{try{const t=await fetch(`/api/templates/${e}/use/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(t.ok){const o=await t.json();l.success("âœ… Sunucu oluÅŸturuldu!"),m&&m(o.server),r()}else l.error("âŒ Sunucu oluÅŸturulamadÄ±")}catch{l.error("âŒ BaÄŸlantÄ± hatasÄ±")}},E=e=>({gaming:React.createElement(_,null),education:React.createElement($,null),community:React.createElement(g,null),music:React.createElement(T,null),tech:React.createElement(F,null),other:React.createElement(S,null)})[e]||React.createElement(g,null),w=s==="all"?i:i.filter(e=>e.category===s);return React.createElement("div",{className:"templates-overlay",onClick:r},React.createElement("div",{className:"templates-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"templates-header"},React.createElement("h2",null,"Sunucu ÅžablonlarÄ±"),React.createElement("button",{className:"close-btn",onClick:r},"Ã—")),React.createElement("div",{className:"category-filters"},React.createElement("button",{className:`category-btn ${s==="all"?"active":""}`,onClick:()=>u("all")},"TÃ¼mÃ¼"),v.map(e=>React.createElement("button",{key:e.id,className:`category-btn ${s===e.slug?"active":""}`,onClick:()=>u(e.slug)},E(e.slug),React.createElement("span",null,e.name)))),k?React.createElement("div",{className:"loading-state"},React.createElement("div",{className:"spinner"}),React.createElement("p",null,"YÃ¼kleniyor...")):React.createElement("div",{className:"templates-grid"},w.map(e=>React.createElement("div",{key:e.id,className:"template-card"},React.createElement("div",{className:"template-icon"},E(e.category)),React.createElement("div",{className:"template-info"},React.createElement("h3",null,e.name),React.createElement("p",null,e.description),React.createElement("div",{className:"template-stats"},React.createElement("span",{className:"stat"},"ðŸ“ ",e.channels_count||0," kanal"),React.createElement("span",{className:"stat"},"ðŸ‘¥ ",e.roles_count||0," rol"),e.is_featured&&React.createElement("span",{className:"featured-badge"},React.createElement(C,null)," Ã–ne Ã‡Ä±kan"))),React.createElement("div",{className:"template-actions"},React.createElement("button",{className:"btn-preview",onClick:()=>b(e.id)},"Ã–nizle"),React.createElement("button",{className:"btn-use",onClick:()=>p(e.id)},React.createElement(R,null)," Kullan"))))),a&&React.createElement("div",{className:"preview-modal",onClick:()=>n(null)},React.createElement("div",{className:"preview-content",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"preview-header"},React.createElement("h3",null,a.name),React.createElement("button",{onClick:()=>n(null)},"Ã—")),React.createElement("div",{className:"preview-body"},React.createElement("p",null,a.description),a.channels&&React.createElement("div",{className:"preview-section"},React.createElement("h4",null,"Kanallar (",a.channels.length,")"),React.createElement("div",{className:"channel-list"},a.channels.map((e,t)=>React.createElement("div",{key:t,className:"channel-item"},e.type==="text"?"ðŸ’¬":"ðŸ”Š"," ",e.name)))),a.roles&&React.createElement("div",{className:"preview-section"},React.createElement("h4",null,"Roller (",a.roles.length,")"),React.createElement("div",{className:"role-list"},a.roles.map((e,t)=>React.createElement("div",{key:t,className:"role-item",style:{borderLeftColor:e.color}},e.name))))),React.createElement("div",{className:"preview-actions"},React.createElement("button",{className:"btn-use-large",onClick:()=>{p(a.id),n(null)}},React.createElement(R,null)," Bu Åžablonu Kullan"))))))};export{I as default};
