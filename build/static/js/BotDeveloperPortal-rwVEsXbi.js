import{r,n as e}from"./react-core-Cj7FUMmY.js";import{H as S,ad as T,bb as O,a as U,a_ as J,a$ as V,aG as q,g as Q,D as X,S as A,a6 as Z,a3 as ee,a4 as se,aA as E,c as ae,l as P,aQ as te}from"./icons-vendor-DnRG7SaF.js";import{t as c,h as $}from"./index-DcErrD_T.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BsD1gqUZ.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-MN-5i-Jz.js";import"./crypto-vendor-DK-7ILyQ.js";const xe=({apiBaseUrl:m,onClose:C,currentUser:ne})=>{const[l,o]=r.useState("list"),[x,u]=r.useState([]),[i,j]=r.useState(null),[z,R]=r.useState(!0),[v,b]=r.useState({}),[n,d]=r.useState({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),[D,g]=r.useState(!1),[N,_]=r.useState(""),[k,f]=r.useState([]);r.useEffect(()=>{F()},[]);const F=async()=>{try{const s=localStorage.getItem("access_token"),a=await fetch(`${m}/bots/my/`,{headers:{Authorization:`Bearer ${s}`}});if(a.ok){const t=await a.json();u(t.bots||[])}}catch{}finally{R(!1)}},W=async()=>{if(!n.name.trim()){c.error("âš ï¸ Bot adÄ± gerekli");return}try{const s=localStorage.getItem("access_token"),a=await fetch(`${m}/bots/create/`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.ok){const t=await a.json();u([...x,t.bot]),d({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),o("list"),c.success("âœ… Bot oluÅŸturuldu!"),j(t.bot),b({[t.bot.id]:!0})}else{const t=await a.json();c.error(t.error||"âŒ Bot oluÅŸturulamadÄ±")}}catch{c.error("âŒ Hata oluÅŸtu")}},M=async()=>{if(i)try{const s=localStorage.getItem("access_token"),a=await fetch(`${m}/bots/${i.id}/update/`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.ok){const t=await a.json();u(x.map(h=>h.id===i.id?t.bot:h)),o("list"),c.success("âœ… Bot gÃ¼ncellendi!")}}catch{}},K=async s=>{if(await $("Bu botu silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz."))try{const a=localStorage.getItem("access_token");(await fetch(`${m}/bots/${s}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok&&(u(x.filter(h=>h.id!==s)),i?.id===s&&j(null),c.success("âœ… Bot silindi"))}catch{}},I=async s=>{if(await $("Token yenilenecek. Eski token geÃ§ersiz olacak. Devam?"))try{const a=localStorage.getItem("access_token"),t=await fetch(`${m}/bots/${s}/regenerate-token/`,{method:"POST",headers:{Authorization:`Bearer ${a}`}});if(t.ok){const h=await t.json();u(x.map(p=>p.id===s?{...p,token:h.token}:p)),b({...v,[s]:!0}),c.success("âœ… Token yenilendi!")}}catch{}},L=async s=>{if(!N.trim()){c.error("âš ï¸ Webhook URL gerekli");return}try{const a=localStorage.getItem("access_token");(await fetch(`${m}/bots/${s}/webhook/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({url:N,events:k})})).ok&&(c.success("âœ… Webhook oluÅŸturuldu!"),g(!1),_(""),f([]))}catch{}},G=async(s,a)=>{try{const t=localStorage.getItem("access_token");if((await fetch(`${m}/bots/${s}/${a==="online"?"pause":"start"}/`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok){const w=a==="online"?"offline":"online";u(x.map(y=>y.id===s?{...y,status:w}:y)),c.success(w==="online"?"âœ… Bot baÅŸlatÄ±ldÄ±!":"â¸ï¸ Bot durduruldu")}}catch{}},B=s=>{navigator.clipboard.writeText(s),c.success("ðŸ“‹ Panoya kopyalandÄ±!")},H=[{id:"message_create",label:"Mesaj GÃ¶nderildi"},{id:"message_edit",label:"Mesaj DÃ¼zenlendi"},{id:"message_delete",label:"Mesaj Silindi"},{id:"reaction_add",label:"Reaction Eklendi"},{id:"reaction_remove",label:"Reaction KaldÄ±rÄ±ldÄ±"},{id:"member_join",label:"Ãœye KatÄ±ldÄ±"},{id:"member_leave",label:"Ãœye AyrÄ±ldÄ±"},{id:"voice_join",label:"Ses KanalÄ±na KatÄ±ldÄ±"},{id:"voice_leave",label:"Ses KanalÄ±ndan AyrÄ±ldÄ±"}],Y=s=>{d({name:s.name,description:s.description||"",avatar_url:s.avatar_url||"",prefix:s.prefix||"!",is_public:s.is_public||!1,intents:s.intents||{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),j(s),o("edit")};return e.jsx("div",{className:"bot-portal-overlay",onClick:C,children:e.jsxs("div",{className:"bot-portal-panel",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"portal-header",children:[e.jsxs("h2",{children:[e.jsx(S,{})," Bot GeliÅŸtirici PortalÄ±"]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:`nav-btn ${l==="list"?"active":""}`,onClick:()=>o("list"),children:[e.jsx(S,{})," BotlarÄ±m"]}),e.jsxs("button",{className:`nav-btn ${l==="create"?"active":""}`,onClick:()=>{o("create"),j(null),d({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}})},children:[e.jsx(T,{})," Yeni Bot"]}),e.jsxs("button",{className:`nav-btn ${l==="docs"?"active":""}`,onClick:()=>o("docs"),children:[e.jsx(O,{})," DokÃ¼mantasyon"]})]}),e.jsx("button",{className:"close-btn",onClick:C,children:e.jsx(U,{})})]}),e.jsxs("div",{className:"portal-content",children:[l==="list"&&e.jsx("div",{className:"bots-list-view",children:z?e.jsx("div",{className:"loading",children:"YÃ¼kleniyor..."}):x.length>0?e.jsx("div",{className:"bots-grid",children:x.map(s=>e.jsxs("div",{className:"bot-card",children:[e.jsxs("div",{className:"bot-header",children:[e.jsx("img",{src:s.avatar_url||"/default-bot.png",alt:s.name,className:"bot-avatar"}),e.jsxs("div",{className:"bot-info",children:[e.jsx("h3",{children:s.name}),e.jsx("span",{className:`bot-status ${s.status||"offline"}`,children:s.status==="online"?"ðŸŸ¢ Online":"ðŸ”´ Offline"})]}),e.jsxs("div",{className:"bot-actions",children:[e.jsx("button",{className:"action-btn",onClick:()=>G(s.id,s.status),title:s.status==="online"?"Durdur":"BaÅŸlat",children:s.status==="online"?e.jsx(J,{}):e.jsx(V,{})}),e.jsx("button",{className:"action-btn",onClick:()=>Y(s),title:"DÃ¼zenle",children:e.jsx(q,{})}),e.jsx("button",{className:"action-btn delete",onClick:()=>K(s.id),title:"Sil",children:e.jsx(Q,{})})]})]}),e.jsx("p",{className:"bot-description",children:s.description||"AÃ§Ä±klama yok"}),e.jsxs("div",{className:"bot-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx(X,{}),e.jsxs("span",{children:[s.servers_count||0," sunucu"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx(A,{}),e.jsxs("span",{children:[s.commands_used||0," komut"]})]})]}),e.jsxs("div",{className:"bot-token-section",children:[e.jsxs("div",{className:"token-header",children:[e.jsx(Z,{})," Token",e.jsx("button",{className:"toggle-token",onClick:()=>b({...v,[s.id]:!v[s.id]}),children:v[s.id]?e.jsx(ee,{}):e.jsx(se,{})})]}),e.jsxs("div",{className:"token-value",children:[e.jsx("code",{children:v[s.id]?s.token:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e.jsx("button",{className:"copy-btn",onClick:()=>B(s.token),children:e.jsx(E,{})})]}),e.jsxs("button",{className:"regenerate-btn",onClick:()=>I(s.id),children:[e.jsx(ae,{})," Token Yenile"]})]}),e.jsxs("div",{className:"bot-footer",children:[e.jsxs("button",{className:"webhook-btn",onClick:()=>{j(s),g(!0)},children:[e.jsx(P,{})," Webhook Ekle"]}),e.jsxs("button",{className:"analytics-btn",onClick:()=>{j(s),o("analytics")},children:[e.jsx(A,{})," Analitik"]})]})]},s.id))}):e.jsxs("div",{className:"no-bots",children:[e.jsx(S,{className:"empty-icon"}),e.jsx("p",{children:"HenÃ¼z bot oluÅŸturmadÄ±nÄ±z"}),e.jsxs("button",{onClick:()=>o("create"),children:[e.jsx(T,{})," Ä°lk botunu oluÅŸtur"]})]})}),(l==="create"||l==="edit")&&e.jsxs("div",{className:"bot-form-view",children:[e.jsx("h3",{children:l==="create"?"ðŸ¤– Yeni Bot OluÅŸtur":"âœï¸ Bot DÃ¼zenle"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bot AdÄ± *"}),e.jsx("input",{type:"text",placeholder:"Harika Bot",value:n.name,onChange:s=>d({...n,name:s.target.value}),maxLength:32})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"AÃ§Ä±klama"}),e.jsx("textarea",{placeholder:"Bu bot ne yapar?",value:n.description,onChange:s=>d({...n,description:s.target.value}),rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Avatar URL"}),e.jsx("input",{type:"text",placeholder:"https://...",value:n.avatar_url,onChange:s=>d({...n,avatar_url:s.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Komut Prefix"}),e.jsx("input",{type:"text",placeholder:"!",value:n.prefix,onChange:s=>d({...n,prefix:s.target.value}),maxLength:5})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bot Ä°zinleri (Intents)"}),e.jsx("div",{className:"intents-grid",children:Object.entries(n.intents).map(([s,a])=>e.jsxs("label",{className:"intent-checkbox",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:t=>d({...n,intents:{...n.intents,[s]:t.target.checked}})}),e.jsx("span",{children:s.charAt(0).toUpperCase()+s.slice(1)})]},s))})]}),e.jsx("div",{className:"form-group checkbox",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:n.is_public,onChange:s=>d({...n,is_public:s.target.checked})}),e.jsx("span",{children:"Bot'u herkese aÃ§Ä±k yap (keÅŸfedilebilir)"})]})}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{className:"submit-btn",onClick:l==="create"?W:M,children:[e.jsx(te,{})," ",l==="create"?"Bot OluÅŸtur":"Kaydet"]}),e.jsx("button",{className:"cancel-btn",onClick:()=>o("list"),children:"Ä°ptal"})]})]}),l==="analytics"&&i&&e.jsxs("div",{className:"analytics-view",children:[e.jsx("button",{className:"back-btn",onClick:()=>o("list"),children:"â† Geri"}),e.jsxs("h3",{children:["ðŸ“Š ",i.name," - Analitik"]}),e.jsxs("div",{className:"analytics-grid",children:[e.jsxs("div",{className:"analytics-card",children:[e.jsx("div",{className:"analytics-value",children:i.servers_count||0}),e.jsx("div",{className:"analytics-label",children:"Toplam Sunucu"})]}),e.jsxs("div",{className:"analytics-card",children:[e.jsx("div",{className:"analytics-value",children:i.users_count||0}),e.jsx("div",{className:"analytics-label",children:"Toplam KullanÄ±cÄ±"})]}),e.jsxs("div",{className:"analytics-card",children:[e.jsx("div",{className:"analytics-value",children:i.commands_used||0}),e.jsx("div",{className:"analytics-label",children:"Komut KullanÄ±mÄ±"})]}),e.jsxs("div",{className:"analytics-card",children:[e.jsx("div",{className:"analytics-value",children:i.messages_sent||0}),e.jsx("div",{className:"analytics-label",children:"Mesaj GÃ¶nderildi"})]})]}),e.jsxs("div",{className:"analytics-chart-placeholder",style:{padding:"20px"},children:[e.jsx("h4",{style:{color:"#dbdee1",marginBottom:"16px"},children:"ðŸ“ˆ HaftalÄ±k KullanÄ±m"}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px",height:"120px",padding:"0 10px"},children:["Pzt","Sal","Ã‡ar","Per","Cum","Cmt","Paz"].map((s,a)=>{const t=Math.max(10,Math.floor((i.commands_used||50)*(.3+Math.sin(a*1.2)*.5+Math.random()*.2)/7)),h=(i.commands_used||50)/4,p=Math.min(100,t/Math.max(h,1)*100);return e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{color:"#949ba4",fontSize:"0.7em"},children:t}),e.jsx("div",{style:{width:"100%",maxWidth:"40px",height:`${Math.max(p,8)}%`,backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",minHeight:"6px",transition:"height 0.3s ease"}}),e.jsx("span",{style:{color:"#949ba4",fontSize:"0.7em"},children:s})]},s)})})]})]}),l==="docs"&&e.jsxs("div",{className:"docs-view",children:[e.jsxs("h3",{children:[e.jsx(O,{})," Bot API DokÃ¼mantasyonu"]}),e.jsxs("div",{className:"docs-section",children:[e.jsx("h4",{children:"ðŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§"}),e.jsx("p",{children:"PAWSCORD Bot API ile kendi botunuzu oluÅŸturabilirsiniz."}),e.jsxs("div",{className:"code-block",children:[e.jsxs("div",{className:"code-header",children:[e.jsx("span",{children:"JavaScript (Node.js)"}),e.jsx("button",{onClick:()=>B(`const PAWSCORD = require('pawscord-bot');

const bot = new PAWSCORD.Client({
    token: 'YOUR_BOT_TOKEN'
});

bot.on('message', (message) => {
    if (message.content === '!ping') {
        message.reply('Pong! ðŸ“');
    }
});

bot.connect();`),children:e.jsx(E,{})})]}),e.jsx("pre",{children:`const PAWSCORD = require('pawscord-bot');

const bot = new PAWSCORD.Client({
    token: 'YOUR_BOT_TOKEN'
});

bot.on('message', (message) => {
    if (message.content === '!ping') {
        message.reply('Pong! ðŸ“');
    }
});

bot.connect();`})]})]}),e.jsxs("div",{className:"docs-section",children:[e.jsx("h4",{children:"ðŸ“¡ API Endpoints"}),e.jsxs("div",{className:"endpoint-list",children:[e.jsxs("div",{className:"endpoint",children:[e.jsx("span",{className:"method get",children:"GET"}),e.jsx("code",{children:"/api/bots/@me"}),e.jsx("span",{children:"Bot bilgilerini al"})]}),e.jsxs("div",{className:"endpoint",children:[e.jsx("span",{className:"method post",children:"POST"}),e.jsx("code",{children:"/api/messages/send"}),e.jsx("span",{children:"Mesaj gÃ¶nder"})]}),e.jsxs("div",{className:"endpoint",children:[e.jsx("span",{className:"method post",children:"POST"}),e.jsx("code",{children:"/api/reactions/add"}),e.jsx("span",{children:"Reaction ekle"})]}),e.jsxs("div",{className:"endpoint",children:[e.jsx("span",{className:"method get",children:"GET"}),e.jsx("code",{children:"/api/servers"}),e.jsx("span",{children:"Sunucu listesi"})]})]})]}),e.jsxs("div",{className:"docs-section",children:[e.jsx("h4",{children:"ðŸ”— WebSocket Events"}),e.jsxs("div",{className:"event-list",children:[e.jsxs("div",{className:"event",children:[e.jsx("code",{children:"MESSAGE_CREATE"}),e.jsx("span",{children:"Yeni mesaj gÃ¶nderildiÄŸinde"})]}),e.jsxs("div",{className:"event",children:[e.jsx("code",{children:"REACTION_ADD"}),e.jsx("span",{children:"Reaction eklendiÄŸinde"})]}),e.jsxs("div",{className:"event",children:[e.jsx("code",{children:"MEMBER_JOIN"}),e.jsx("span",{children:"Ãœye sunucuya katÄ±ldÄ±ÄŸÄ±nda"})]}),e.jsxs("div",{className:"event",children:[e.jsx("code",{children:"VOICE_STATE_UPDATE"}),e.jsx("span",{children:"Ses durumu deÄŸiÅŸtiÄŸinde"})]})]})]})]})]}),D&&e.jsx("div",{className:"webhook-modal-overlay",children:e.jsxs("div",{className:"webhook-modal",children:[e.jsxs("h3",{children:[e.jsx(P,{})," Webhook OluÅŸtur"]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Webhook URL *"}),e.jsx("input",{type:"text",placeholder:"https://your-server.com/webhook",value:N,onChange:s=>_(s.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Olaylar"}),e.jsx("div",{className:"webhook-events",children:H.map(s=>e.jsxs("label",{className:"event-checkbox",children:[e.jsx("input",{type:"checkbox",checked:k.includes(s.id),onChange:a=>{a.target.checked?f([...k,s.id]):f(k.filter(t=>t!==s.id))}}),e.jsx("span",{children:s.label})]},s.id))})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"submit-btn",onClick:()=>L(i.id),children:"Webhook OluÅŸtur"}),e.jsx("button",{className:"cancel-btn",onClick:()=>g(!1),children:"Ä°ptal"})]})]})})]})})};export{xe as default};
