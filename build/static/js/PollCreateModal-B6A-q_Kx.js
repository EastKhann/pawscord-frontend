import{r as o,l as S,v as w,aI as O}from"./react-core-B6hadH-M.js";const z=({onClose:r,fetchWithAuth:x,apiBaseUrl:b,activeRoomSlug:y})=>{const[c,f]=o.useState(""),[a,i]=o.useState(["",""]),[d,h]=o.useState(!1),[s,R]=o.useState("3600"),[p,m]=o.useState(!1),[g,l]=o.useState(null),E=(e,n)=>{const t=[...a];t[e]=n,i(t)},k=()=>{a.length<10&&i([...a,""])},v=e=>{if(a.length>2){const n=a.filter((t,u)=>u!==e);i(n)}},C=async e=>{if(e.preventDefault(),l(null),!c.trim()){l("Soru boş olamaz.");return}const n=a.filter(t=>t.trim()!=="");if(n.length<2){l("En az 2 seçenek girmelisiniz.");return}m(!0);try{const t=await x(`${b}/polls/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_slug:y,question:c,options:n,allow_multiple:d,expires_in:s?parseInt(s):null})});if(t.ok)r();else{const u=await t.json();l(u.error||"Anket oluşturulamadı.")}}catch(t){l("Bir hata oluştu: "+t.message)}finally{m(!1)}};return React.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3}},React.createElement("div",{style:{backgroundColor:"#36393f",padding:"20px",borderRadius:"8px",width:"400px",maxWidth:"90%",color:"white",display:"flex",flexDirection:"column",gap:"15px"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("h3",{style:{margin:0}},"Anket Oluştur"),React.createElement("button",{onClick:r,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer"}},React.createElement(S,null))),g&&React.createElement("div",{style:{color:"#ed4245",fontSize:"14px"}},g),React.createElement("input",{type:"text",placeholder:"Soru ne?",value:c,onChange:e=>f(e.target.value),style:{padding:"10px",borderRadius:"4px",border:"none",backgroundColor:"#202225",color:"white"}}),React.createElement("div",{style:{maxHeight:"200px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"}},a.map((e,n)=>React.createElement("div",{key:n,style:{display:"flex",gap:"5px"}},React.createElement("input",{type:"text",placeholder:`Seçenek ${n+1}`,value:e,onChange:t=>E(n,t.target.value),style:{flex:1,padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#202225",color:"white"}}),a.length>2&&React.createElement("button",{onClick:()=>v(n),style:{background:"none",border:"none",color:"#ed4245",cursor:"pointer"}},React.createElement(w,null))))),a.length<10&&React.createElement("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:"5px",background:"none",border:"none",color:"#3ba55d",cursor:"pointer",alignSelf:"flex-start"}},React.createElement(O,null)," Seçenek Ekle"),React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"10px"}},React.createElement("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"}},React.createElement("input",{type:"checkbox",checked:d,onChange:e=>h(e.target.checked)}),"Birden çok seçime izin ver"),React.createElement("select",{value:s,onChange:e=>R(e.target.value),style:{padding:"8px",borderRadius:"4px",backgroundColor:"#202225",color:"white",border:"none"}},React.createElement("option",{value:"3600"},"1 Saat"),React.createElement("option",{value:"86400"},"24 Saat"),React.createElement("option",{value:"604800"},"1 Hafta"),React.createElement("option",{value:""},"Süresiz"))),React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"10px"}},React.createElement("button",{onClick:r,style:{padding:"10px 20px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:"white",cursor:"pointer"}},"İptal"),React.createElement("button",{onClick:C,disabled:p,style:{padding:"10px 20px",borderRadius:"4px",border:"none",backgroundColor:"#5865f2",color:"white",cursor:"pointer",opacity:p?.7:1}},p?"Oluşturuluyor...":"Oluştur"))))};export{z as default};
