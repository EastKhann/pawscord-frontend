var S=Object.defineProperty;var n=(t,i)=>S(t,"name",{value:i,configurable:!0});import{r as c,j as e}from"./react-core-Djgtqrmb.js";import{ci as g,bv as _,cj as F,U as b,Q as M}from"./icons-vendor-BW7dxHkX.js";function E({apiBaseUrl:t,fetchWithAuth:i}){const[r,x]=c.useState([]),[o,j]=c.useState("all"),[d,p]=c.useState("all"),[v,u]=c.useState([]),[N,h]=c.useState(!1),f={new:e.jsx(M,{className:"type-icon new"}),fix:e.jsx(b,{className:"type-icon fix"}),improvement:e.jsx(F,{className:"type-icon improvement"})};c.useEffect(()=>{y(),w()},[o]);const y=n(async()=>{h(!0);try{const s=o==="all"?`${t}/changelog/`:`${t}/changelog/${o}/`,l=await i(s);if(l.ok){const a=await l.json();x(a.changes||[])}}catch{}finally{h(!1)}},"loadChanges"),w=n(async()=>{try{const s=await i(`${t}/changelog/models/`);if(s.ok){const l=await s.json();u(l.models||[])}}catch{}},"loadModels"),m=(d==="all"?r:r.filter(s=>s.change_type===d)).reduce((s,l)=>{const a=new Date(l.created_at).toLocaleDateString();return s[a]||(s[a]=[]),s[a].push(l),s},{});return e.jsxs("div",{className:"changelog-panel",children:[e.jsx("div",{className:"changelog-header",children:e.jsxs("h2",{children:[e.jsx(g,{})," Changelog"]})}),e.jsxs("div",{className:"changelog-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Model:"}),e.jsxs("select",{value:o,onChange:n(s=>j(s.target.value),"onChange"),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Models"}),v.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Type:"}),e.jsxs("select",{value:d,onChange:n(s=>p(s.target.value),"onChange"),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"new",children:"New Features"}),e.jsx("option",{value:"fix",children:"Bug Fixes"}),e.jsx("option",{value:"improvement",children:"Improvements"})]})]})]}),e.jsx("div",{className:"changelog-timeline",children:N?e.jsx("div",{className:"loading",children:"Loading changelog..."}):Object.keys(m).length===0?e.jsxs("div",{className:"empty-changelog",children:[e.jsx(g,{className:"empty-icon"}),e.jsx("p",{children:"No changelog entries found"})]}):Object.entries(m).map(([s,l])=>e.jsxs("div",{className:"date-group",children:[e.jsxs("div",{className:"date-header",children:[e.jsx(_,{}),e.jsx("h3",{children:s})]}),e.jsx("div",{className:"changes-list",children:l.map((a,C)=>e.jsxs("div",{className:`change-item ${a.change_type}`,children:[e.jsx("div",{className:"change-icon",children:f[a.change_type]}),e.jsxs("div",{className:"change-content",children:[e.jsxs("div",{className:"change-header",children:[e.jsx("span",{className:`change-badge ${a.change_type}`,children:a.change_type.toUpperCase()}),a.model_name&&e.jsx("span",{className:"change-model",children:a.model_name}),a.version&&e.jsxs("span",{className:"change-version",children:["v",a.version]})]}),e.jsx("div",{className:"change-description",children:a.description}),a.details&&e.jsx("div",{className:"change-details",children:a.details})]})]},C))})]},s))})]})}n(E,"ChangelogPanel");export{E as default};
