import{r as a,b as g}from"./react-core-DFLfBPkm.js";import{q as h,V as d}from"./perf-vendor-D59N_b8B.js";import"./chart-vendor-CPuFblPm.js";import"./editor-vendor-DiU449Dh.js";import"./ui-vendor-e-sJ6TrG.js";const o=a.memo(({index:e,style:t,data:u})=>{const{messages:s,renderMessage:i,setItemSize:l,getItemSize:c}=u,r=a.useRef();a.useEffect(()=>{if(r.current){const n=r.current.getBoundingClientRect().height;n!==c(e)&&l(e,n)}},[e,c,l]);const f=s[e];return f?g.createElement("div",{style:t,ref:r},i(f,e)):null},(e,t)=>e.index===t.index&&e.style.top===t.style.top&&e.style.height===t.style.height&&e.data.messages[e.index]?.id===t.data.messages[t.index]?.id&&e.data.messages[e.index]?.content===t.data.messages[t.index]?.content&&e.data.messages[e.index]?.reactions?.length===t.data.messages[t.index]?.reactions?.length);o.displayName="VirtualMessageRow";const R=a.memo(({messages:e,renderMessage:t,scrollToBottom:u=!1,estimatedItemSize:s=80})=>{const i=a.useRef(),l=a.useRef({}),c=a.useCallback(n=>l.current[n]||s,[s]),r=a.useCallback((n,m)=>{l.current[n]!==m&&(l.current[n]=m,i.current&&i.current.resetAfterIndex(n,!1))},[]);a.useEffect(()=>{u&&i.current&&e.length>0&&requestAnimationFrame(()=>{i.current?.scrollToItem(e.length-1,"end")})},[e.length,u]),a.useEffect(()=>{e.length===0&&(l.current={})},[e.length]);const f=g.useMemo(()=>({messages:e,renderMessage:t,setItemSize:r,getItemSize:c}),[e,t,r,c]);return!e||e.length===0?null:g.createElement(h,null,({height:n,width:m})=>g.createElement(d,{ref:i,height:n,width:m,itemCount:e.length,itemSize:c,itemData:f,overscanCount:3,useIsScrolling:!0},o))});R.displayName="VirtualMessageList";export{R as default};
