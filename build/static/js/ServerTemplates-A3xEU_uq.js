import{r as l,n as e}from"./react-core-BMiyQWF6.js";import{T as S,ar as x,t as g,aP as T,p as F,aT as $,cF as _,aq as B}from"./icons-vendor-T72gfvdf.js";import{t as r}from"./index-w75Xg-ox.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BuSyE8vR.js";import"./router-vendor-B86Z1mIL.js";import"./state-vendor-CAyNnPM4.js";import"./crypto-vendor-1Q6e4ZD-.js";const L=({onSelectTemplate:d,onClose:i})=>{const[m,v]=l.useState([]),[N,f]=l.useState([]),[n,h]=l.useState("all"),[k,p]=l.useState(!0),[t,c]=l.useState(null);l.useEffect(()=>{y(),b()},[]);const y=async()=>{p(!0);try{const s=await fetch("/api/templates/list/",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(s.ok){const a=await s.json();v(a.templates||[])}}catch{r.error("âŒ Åžablonlar yÃ¼klenemedi")}finally{p(!1)}},b=async()=>{try{const s=await fetch("/api/templates/categories/",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(s.ok){const a=await s.json();f(a.categories||[])}}catch{}},w=async s=>{try{const a=await fetch(`/api/templates/${s}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(a.ok){const o=await a.json();c(o.template)}}catch{r.error("âŒ Åžablon detaylarÄ± yÃ¼klenemedi")}},u=async s=>{try{const a=await fetch(`/api/templates/${s}/use/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(a.ok){const o=await a.json();r.success("âœ… Sunucu oluÅŸturuldu!"),d&&d(o.server),i()}else r.error("âŒ Sunucu oluÅŸturulamadÄ±")}catch{r.error("âŒ BaÄŸlantÄ± hatasÄ±")}},j=s=>({gaming:e.jsx(B,{}),education:e.jsx(_,{}),community:e.jsx(g,{}),music:e.jsx($,{}),tech:e.jsx(F,{}),other:e.jsx(T,{})})[s]||e.jsx(g,{}),C=n==="all"?m:m.filter(s=>s.category===n);return e.jsx("div",{className:"templates-overlay",onClick:i,children:e.jsxs("div",{className:"templates-panel",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"templates-header",children:[e.jsx("h2",{children:"Sunucu ÅžablonlarÄ±"}),e.jsx("button",{className:"close-btn",onClick:i,children:"Ã—"})]}),e.jsxs("div",{className:"category-filters",children:[e.jsx("button",{className:`category-btn ${n==="all"?"active":""}`,onClick:()=>h("all"),children:"TÃ¼mÃ¼"}),N.map(s=>e.jsxs("button",{className:`category-btn ${n===s.slug?"active":""}`,onClick:()=>h(s.slug),children:[j(s.slug),e.jsx("span",{children:s.name})]},s.id))]}),k?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"YÃ¼kleniyor..."})]}):e.jsx("div",{className:"templates-grid",children:C.map(s=>e.jsxs("div",{className:"template-card",children:[e.jsx("div",{className:"template-icon",children:j(s.category)}),e.jsxs("div",{className:"template-info",children:[e.jsx("h3",{children:s.name}),e.jsx("p",{children:s.description}),e.jsxs("div",{className:"template-stats",children:[e.jsxs("span",{className:"stat",children:["ðŸ“ ",s.channels_count||0," kanal"]}),e.jsxs("span",{className:"stat",children:["ðŸ‘¥ ",s.roles_count||0," rol"]}),s.is_featured&&e.jsxs("span",{className:"featured-badge",children:[e.jsx(S,{})," Ã–ne Ã‡Ä±kan"]})]})]}),e.jsxs("div",{className:"template-actions",children:[e.jsx("button",{className:"btn-preview",onClick:()=>w(s.id),children:"Ã–nizle"}),e.jsxs("button",{className:"btn-use",onClick:()=>u(s.id),children:[e.jsx(x,{})," Kullan"]})]})]},s.id))}),t&&e.jsx("div",{className:"preview-modal",onClick:()=>c(null),children:e.jsxs("div",{className:"preview-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"preview-header",children:[e.jsx("h3",{children:t.name}),e.jsx("button",{onClick:()=>c(null),children:"Ã—"})]}),e.jsxs("div",{className:"preview-body",children:[e.jsx("p",{children:t.description}),t.channels&&e.jsxs("div",{className:"preview-section",children:[e.jsxs("h4",{children:["Kanallar (",t.channels.length,")"]}),e.jsx("div",{className:"channel-list",children:t.channels.map((s,a)=>e.jsxs("div",{className:"channel-item",children:[s.type==="text"?"ðŸ’¬":"ðŸ”Š"," ",s.name]},a))})]}),t.roles&&e.jsxs("div",{className:"preview-section",children:[e.jsxs("h4",{children:["Roller (",t.roles.length,")"]}),e.jsx("div",{className:"role-list",children:t.roles.map((s,a)=>e.jsx("div",{className:"role-item",style:{borderLeftColor:s.color},children:s.name},a))})]})]}),e.jsx("div",{className:"preview-actions",children:e.jsxs("button",{className:"btn-use-large",onClick:()=>{u(t.id),c(null)},children:[e.jsx(x,{})," Bu Åžablonu Kullan"]})})]})})]})})};export{L as default};
