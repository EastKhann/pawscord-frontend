{"version":3,"mappings":"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,MAAM,MAAM,KAAK,MAAM,OAAO,OAAO,OAAO,MAAM,MAAM,OAAO,MAAM,OAAO,KAAK,MAAM,MAAM,MAAM,OAAO,OAAO,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,KAAK,MAAM,MAAM,MAAM,IAAI;AAAA,EACnqB,WAAW,CAAC,KAAK,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,OAAO,MAAM,MAAM,MAAM,KAAK,OAAO,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,OAAO,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,OAAO,MAAM,OAAO,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;AAAA,EACvzC,aAAa,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,OAAO,MAAM,KAAK,KAAK,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,OAAO,MAAM,MAAM,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,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","names":["styles","useState","useEffect","useCallback","jsxs","jsx","useMemo","S","DOMPurify","memo","useRef","type","Fragment","lazy","PendingFilesPreview","InputMenu","MarkdownPreviewToggle","ChatAutocomplete","EmojiPicker","Suspense","VoiceRecordingUI"],"ignoreList":[],"sources":["../../../src/components/EmojiPicker/styles.js","../../../src/components/EmojiPicker.js","../../../src/components/MarkdownPreviewToggle.js","../../../src/components/ChatAutocomplete.js","../../../src/components/MessageInput/styles.js","../../../src/hooks/useVoiceRecording.js","../../../src/hooks/useDragDrop.js","../../../src/utils/imageCompression.js","../../../src/components/MessageInput/PendingFilesPreview.js","../../../src/components/MessageInput/InputMenu.js","../../../src/components/MessageInput/VoiceRecordingUI.js","../../../src/components/MessageInput/hooks/useMessageDraft.js","../../../src/components/MessageInput.js"],"sourcesContent":["// EmojiPicker styles - extracted from EmojiPicker.js\r\nconst styles = {\r\n    container: {\r\n        width: '350px',\r\n        height: '400px',\r\n        backgroundColor: '#2f3136',\r\n        borderRadius: '8px',\r\n        overflow: 'hidden',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    searchBar: {\r\n        padding: '12px',\r\n        borderBottom: '1px solid #202225',\r\n    },\r\n    searchInput: {\r\n        width: '100%',\r\n        padding: '8px 12px',\r\n        backgroundColor: '#202225',\r\n        border: 'none',\r\n        borderRadius: '4px',\r\n        color: '#dcddde',\r\n        fontSize: '14px',\r\n        outline: 'none',\r\n    },\r\n    categories: {\r\n        display: 'flex',\r\n        gap: '4px',\r\n        padding: '8px',\r\n        borderBottom: '1px solid #202225',\r\n        overflowX: 'auto',\r\n        scrollbarWidth: 'thin',\r\n    },\r\n    categoryButton: {\r\n        padding: '6px 12px',\r\n        background: 'none',\r\n        border: 'none',\r\n        color: '#b9bbbe',\r\n        fontSize: '13px',\r\n        cursor: 'pointer',\r\n        borderRadius: '4px',\r\n        whiteSpace: 'nowrap',\r\n        transition: 'background 0.2s',\r\n    },\r\n    activeCategoryButton: {\r\n        backgroundColor: '#404249',\r\n        color: '#fff',\r\n    },\r\n    emojiGrid: {\r\n        flex: 1,\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(8, 1fr)',\r\n        gap: '4px',\r\n        padding: '12px',\r\n        overflowY: 'auto',\r\n        alignContent: 'start',\r\n    },\r\n    emojiButton: {\r\n        background: 'none',\r\n        border: 'none',\r\n        fontSize: '28px',\r\n        cursor: 'pointer',\r\n        padding: '8px',\r\n        borderRadius: '4px',\r\n        transition: 'background 0.2s, transform 0.1s',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        aspectRatio: '1',\r\n    },\r\n    favHighlight: {\r\n        background: 'rgba(250, 176, 5, 0.08)',\r\n        boxShadow: 'inset 0 0 0 1px rgba(250, 176, 5, 0.25)',\r\n    },\r\n    emptyState: {\r\n        gridColumn: '1 / -1',\r\n        textAlign: 'center',\r\n        color: '#72767d',\r\n        fontSize: '14px',\r\n        padding: '24px 0',\r\n    },\r\n    contextMenu: {\r\n        position: 'fixed',\r\n        zIndex: 9999,\r\n        backgroundColor: '#18191c',\r\n        border: '1px solid #2f3136',\r\n        borderRadius: '6px',\r\n        padding: '4px',\r\n        boxShadow: '0 4px 16px rgba(0,0,0,0.4)',\r\n    },\r\n    contextMenuItem: {\r\n        display: 'block',\r\n        width: '100%',\r\n        padding: '8px 16px',\r\n        background: 'none',\r\n        border: 'none',\r\n        color: '#dcddde',\r\n        fontSize: '13px',\r\n        cursor: 'pointer',\r\n        borderRadius: '4px',\r\n        whiteSpace: 'nowrap',\r\n        textAlign: 'left',\r\n    },\r\n};\r\n\r\nexport default styles;\r\n","// frontend/src/components/EmojiPicker.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport styles from './EmojiPicker/styles';\r\n\r\n//  localStorage helpers for Recents & Favorites \r\nconst RECENTS_KEY = 'pawscord_recent_emojis';\r\nconst FAVS_KEY = 'pawscord_favorite_emojis';\r\nconst MAX_RECENTS = 24;\r\n\r\nconst getRecents = () => {\r\n    try { return JSON.parse(localStorage.getItem(RECENTS_KEY)) || []; }\r\n    catch { return []; }\r\n};\r\nconst addRecent = (emoji) => {\r\n    const arr = getRecents().filter(e => e !== emoji);\r\n    arr.unshift(emoji);\r\n    localStorage.setItem(RECENTS_KEY, JSON.stringify(arr.slice(0, MAX_RECENTS)));\r\n};\r\nconst getFavorites = () => {\r\n    try { return JSON.parse(localStorage.getItem(FAVS_KEY)) || []; }\r\n    catch { return []; }\r\n};\r\nconst toggleFavorite = (emoji) => {\r\n    const arr = getFavorites();\r\n    const idx = arr.indexOf(emoji);\r\n    if (idx >= 0) arr.splice(idx, 1); else arr.push(emoji);\r\n    localStorage.setItem(FAVS_KEY, JSON.stringify(arr));\r\n    return [...arr];\r\n};\r\n\r\nconst EMOJI_CATEGORIES = {\r\n    'Trending ': [], //  Will be populated from API\r\n    'Yzler': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'Kalpler': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'El aretleri': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'Hayvanlar': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'Yiyecek': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'Aktiviteler': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'Seyahat': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'Objeler': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'Semboller': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '', '', '#', '*', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'Bayraklar': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n};\r\n\r\nconst EmojiPicker = ({ onSelect }) => {\r\n    const [activeCategory, setActiveCategory] = useState('Son Kullanlan ');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [trendingEmojis, setTrendingEmojis] = useState([]);\r\n    const [recentEmojis, setRecentEmojis] = useState(getRecents());\r\n    const [favoriteEmojis, setFavoriteEmojis] = useState(getFavorites());\r\n    const [contextMenu, setContextMenu] = useState(null); // {emoji, x, y}\r\n\r\n    //  Fetch trending emojis from API\r\n    useEffect(() => {\r\n        const fetchTrendingEmojis = async () => {\r\n            try {\r\n                const response = await fetch('/api/emoji/trending/');\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    const emojis = data.map(item => item.emoji);\r\n                    setTrendingEmojis(emojis);\r\n                    EMOJI_CATEGORIES['Trending '] = emojis;\r\n                }\r\n            } catch (error) {\r\n                const fallbackTrending = ['', '', '', '', '', '', '', '', '', ''];\r\n                setTrendingEmojis(fallbackTrending);\r\n                EMOJI_CATEGORIES['Trending '] = fallbackTrending;\r\n            }\r\n        };\r\n        fetchTrendingEmojis();\r\n    }, []);\r\n\r\n    // Close context menu on outside click\r\n    useEffect(() => {\r\n        const close = () => setContextMenu(null);\r\n        if (contextMenu) window.addEventListener('click', close);\r\n        return () => window.removeEventListener('click', close);\r\n    }, [contextMenu]);\r\n\r\n    const handleSelect = useCallback((emoji) => {\r\n        addRecent(emoji);\r\n        setRecentEmojis(getRecents());\r\n        onSelect(emoji);\r\n    }, [onSelect]);\r\n\r\n    const handleContextMenu = useCallback((e, emoji) => {\r\n        e.preventDefault();\r\n        setContextMenu({ emoji, x: e.clientX, y: e.clientY });\r\n    }, []);\r\n\r\n    const handleToggleFav = useCallback((emoji) => {\r\n        const newFavs = toggleFavorite(emoji);\r\n        setFavoriteEmojis(newFavs);\r\n        setContextMenu(null);\r\n    }, []);\r\n\r\n    // Build dynamic categories with Recents & Favorites at top\r\n    const allCategories = {\r\n        ...(recentEmojis.length > 0 ? { 'Son Kullanlan ': recentEmojis } : {}),\r\n        ...(favoriteEmojis.length > 0 ? { 'Favoriler ': favoriteEmojis } : {}),\r\n        ...EMOJI_CATEGORIES,\r\n    };\r\n\r\n    // Auto-select first available category if current is empty\r\n    const effectiveCategory = allCategories[activeCategory] ? activeCategory : Object.keys(allCategories)[0];\r\n\r\n    const filteredEmojis = searchTerm\r\n        ? Object.values(EMOJI_CATEGORIES).flat().filter(emoji => emoji.includes(searchTerm))\r\n        : allCategories[effectiveCategory] || [];\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            {/* Search Bar */}\r\n            <div style={styles.searchBar}>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Emoji ara...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    style={styles.searchInput}\r\n                />\r\n            </div>\r\n\r\n            {/* Category Tabs */}\r\n            {!searchTerm && (\r\n                <div style={styles.categories}>\r\n                    {Object.keys(allCategories).map(category => (\r\n                        <button\r\n                            key={category}\r\n                            onClick={() => setActiveCategory(category)}\r\n                            style={{\r\n                                ...styles.categoryButton,\r\n                                ...(effectiveCategory === category && styles.activeCategoryButton)\r\n                            }}\r\n                        >\r\n                            {category}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Emoji Grid */}\r\n            <div style={styles.emojiGrid}>\r\n                {filteredEmojis.map((emoji, index) => (\r\n                    <button\r\n                        key={`${emoji}-${index}`}\r\n                        onClick={() => handleSelect(emoji)}\r\n                        onContextMenu={(e) => handleContextMenu(e, emoji)}\r\n                        style={{\r\n                            ...styles.emojiButton,\r\n                            ...(favoriteEmojis.includes(emoji) && effectiveCategory !== 'Favoriler ' ? styles.favHighlight : {})\r\n                        }}\r\n                        title={favoriteEmojis.includes(emoji) ? `${emoji} ` : emoji}\r\n                    >\r\n                        {emoji}\r\n                    </button>\r\n                ))}\r\n                {filteredEmojis.length === 0 && (\r\n                    <div style={styles.emptyState}>\r\n                        {searchTerm ? ' Sonu bulunamad' : activeCategory === 'Son Kullanlan ' ? ' Henz emoji kullanlmad' : ' Sa tklayarak favori ekle'}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Context Menu (Right-click) */}\r\n            {contextMenu && (\r\n                <div style={{ ...styles.contextMenu, top: contextMenu.y - 50, left: contextMenu.x - 100 }}>\r\n                    <button style={styles.contextMenuItem} onClick={() => handleToggleFav(contextMenu.emoji)}>\r\n                        {favoriteEmojis.includes(contextMenu.emoji) ? ' Favorilerden kar' : ' Favorilere Ekle'}\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(EmojiPicker);\r\n\r\n\r\n\r\n","// frontend/src/components/MarkdownPreviewToggle.js\r\n//  FEATURE 8: Markdown Preview Toggle\r\n// Live preview of markdown before sending\r\n\r\nimport { useState, memo, useMemo } from 'react';\r\nimport { FaEye, FaEyeSlash } from 'react-icons/fa';\r\nimport DOMPurify from 'dompurify';\r\n\r\nconst parseMarkdown = (text) => {\r\n    if (!text) return '';\r\n    let html = text\r\n        // Code blocks ```\r\n        .replace(/```(\\w+)?\\n([\\s\\S]*?)```/g, '<pre style=\"background:#1e1f22;padding:8px 12px;border-radius:6px;overflow-x:auto;font-size:13px;margin:4px 0\"><code>$2</code></pre>')\r\n        // Inline code `\r\n        .replace(/`([^`]+)`/g, '<code style=\"background:#1e1f22;padding:2px 6px;border-radius:4px;font-size:13px\">$1</code>')\r\n        // Bold **\r\n        .replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>')\r\n        // Italic *\r\n        .replace(/\\*(.+?)\\*/g, '<em>$1</em>')\r\n        // Underline __\r\n        .replace(/__(.+?)__/g, '<u>$1</u>')\r\n        // Strikethrough ~~\r\n        .replace(/~~(.+?)~~/g, '<s>$1</s>')\r\n        // Spoiler ||\r\n        .replace(/\\|\\|(.+?)\\|\\|/g, '<span style=\"background:#1e1f22;color:#1e1f22;padding:0 4px;border-radius:3px;cursor:pointer\" onclick=\"this.style.color=\\'#dcddde\\'\">$1</span>')\r\n        // Headers\r\n        .replace(/^### (.+)$/gm, '<h3 style=\"margin:4px 0;font-size:1em\">$1</h3>')\r\n        .replace(/^## (.+)$/gm, '<h2 style=\"margin:4px 0;font-size:1.15em\">$1</h2>')\r\n        .replace(/^# (.+)$/gm, '<h1 style=\"margin:4px 0;font-size:1.3em\">$1</h1>')\r\n        // Blockquote\r\n        .replace(/^> (.+)$/gm, '<div style=\"border-left:3px solid #5865f2;padding-left:10px;color:#b5bac1;margin:4px 0\">$1</div>')\r\n        // Links\r\n        .replace(/\\[(.+?)\\]\\((.+?)\\)/g, '<a href=\"$2\" style=\"color:#00b0f4;text-decoration:none\">$1</a>')\r\n        // Lists\r\n        .replace(/^[-*] (.+)$/gm, '<div style=\"padding-left:12px\"> $1</div>')\r\n        // Line breaks\r\n        .replace(/\\n/g, '<br/>');\r\n    return html;\r\n};\r\n\r\nconst MarkdownPreviewToggle = ({ text, show, onToggle }) => {\r\n    const html = useMemo(() => parseMarkdown(text), [text]);\r\n\r\n    return (\r\n        <div style={S.container}>\r\n            <button\r\n                onClick={onToggle}\r\n                style={{ ...S.toggleBtn, ...(show ? S.toggleBtnActive : {}) }}\r\n                title={show ? 'nizlemeyi kapat' : 'Markdown nizleme'}\r\n            >\r\n                {show ? <FaEyeSlash /> : <FaEye />}\r\n            </button>\r\n\r\n            {show && text && (\r\n                <div style={S.preview}>\r\n                    <div style={S.previewLabel}>nizleme</div>\r\n                    <div\r\n                        style={S.previewContent}\r\n                        dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(html) }}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst S = {\r\n    container: { position: 'relative' },\r\n    toggleBtn: {\r\n        background: 'none', border: 'none', color: '#949ba4',\r\n        cursor: 'pointer', fontSize: 14, padding: 4,\r\n        display: 'flex', alignItems: 'center', transition: 'color 0.15s',\r\n    },\r\n    toggleBtnActive: { color: '#5865f2' },\r\n    preview: {\r\n        position: 'absolute', bottom: '100%', left: 0, right: 0,\r\n        marginBottom: 8, backgroundColor: '#2b2d31',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n        borderRadius: 8, overflow: 'hidden',\r\n        boxShadow: '0 4px 16px rgba(0,0,0,0.4)',\r\n        maxHeight: 200, overflowY: 'auto',\r\n        animation: 'mdPreviewIn 0.15s ease-out',\r\n    },\r\n    previewLabel: {\r\n        fontSize: 10, fontWeight: 700, color: '#949ba4',\r\n        letterSpacing: '0.05em', padding: '6px 12px',\r\n        borderBottom: '1px solid rgba(255,255,255,0.06)',\r\n        backgroundColor: 'rgba(0,0,0,0.1)',\r\n    },\r\n    previewContent: {\r\n        padding: '10px 12px', color: '#dcddde',\r\n        fontSize: 14, lineHeight: 1.5, wordBreak: 'break-word',\r\n    },\r\n};\r\n\r\nif (typeof document !== 'undefined') {\r\n    const id = 'md-preview-css';\r\n    if (!document.getElementById(id)) {\r\n        const s = document.createElement('style');\r\n        s.id = id;\r\n        s.textContent = `@keyframes mdPreviewIn { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }`;\r\n        document.head.appendChild(s);\r\n    }\r\n}\r\n\r\nexport default memo(MarkdownPreviewToggle);\r\n","// frontend/src/components/ChatAutocomplete.js\r\n//  FEATURES 1-3: @Mention, #Channel, :Emoji autocomplete popup\r\n// Shows popup above textarea when user types @, #, or :\r\n\r\nimport { useState, useEffect, useRef, useCallback, memo } from 'react';\r\nimport { FaUser, FaHashtag, FaVolumeUp, FaSmile, FaAt, FaGlobe, FaBullhorn } from 'react-icons/fa';\r\n\r\n// Common emoji list for :emoji autocomplete\r\nconst COMMON_EMOJIS = [\r\n    { name: 'grinning', emoji: '' }, { name: 'joy', emoji: '' }, { name: 'heart_eyes', emoji: '' },\r\n    { name: 'thinking', emoji: '' }, { name: 'thumbsup', emoji: '' }, { name: 'thumbsdown', emoji: '' },\r\n    { name: 'fire', emoji: '' }, { name: 'heart', emoji: '' }, { name: 'star', emoji: '' },\r\n    { name: 'check', emoji: '' }, { name: 'x', emoji: '' }, { name: 'warning', emoji: '' },\r\n    { name: 'rocket', emoji: '' }, { name: 'tada', emoji: '' }, { name: 'wave', emoji: '' },\r\n    { name: 'clap', emoji: '' }, { name: 'pray', emoji: '' }, { name: 'muscle', emoji: '' },\r\n    { name: 'eyes', emoji: '' }, { name: 'cry', emoji: '' }, { name: 'angry', emoji: '' },\r\n    { name: 'cool', emoji: '' }, { name: 'wink', emoji: '' }, { name: 'tongue', emoji: '' },\r\n    { name: 'sleeping', emoji: '' }, { name: 'skull', emoji: '' }, { name: 'ghost', emoji: '' },\r\n    { name: 'alien', emoji: '' }, { name: 'robot', emoji: '' }, { name: 'poop', emoji: '' },\r\n    { name: 'ok_hand', emoji: '' }, { name: 'peace', emoji: '' }, { name: 'raised_hand', emoji: '' },\r\n    { name: 'sparkles', emoji: '' }, { name: 'boom', emoji: '' }, { name: 'zap', emoji: '' },\r\n    { name: 'sun', emoji: '' }, { name: 'moon', emoji: '' }, { name: 'rainbow', emoji: '' },\r\n    { name: 'cloud', emoji: '' }, { name: 'umbrella', emoji: '' }, { name: 'snowflake', emoji: '' },\r\n    { name: 'cat', emoji: '' }, { name: 'dog', emoji: '' }, { name: 'bear', emoji: '' },\r\n    { name: 'panda', emoji: '' }, { name: 'fox', emoji: '' }, { name: 'lion', emoji: '' },\r\n    { name: 'pizza', emoji: '' }, { name: 'burger', emoji: '' }, { name: 'coffee', emoji: '' },\r\n    { name: 'beer', emoji: '' }, { name: 'cake', emoji: '' }, { name: 'gift', emoji: '' },\r\n    { name: 'trophy', emoji: '' }, { name: 'medal', emoji: '' }, { name: 'crown', emoji: '' },\r\n    { name: 'gem', emoji: '' }, { name: 'money', emoji: '' }, { name: 'bulb', emoji: '' },\r\n    { name: 'book', emoji: '' }, { name: 'pencil', emoji: '' }, { name: 'pin', emoji: '' },\r\n    { name: 'lock', emoji: '' }, { name: 'key', emoji: '' }, { name: 'bell', emoji: '' },\r\n    { name: 'megaphone', emoji: '' }, { name: 'loudspeaker', emoji: '' }, { name: 'mute', emoji: '' },\r\n    { name: 'music', emoji: '' }, { name: 'microphone', emoji: '' }, { name: 'headphones', emoji: '' },\r\n    { name: 'camera', emoji: '' }, { name: 'video', emoji: '' }, { name: 'tv', emoji: '' },\r\n    { name: 'computer', emoji: '' }, { name: 'phone', emoji: '' }, { name: 'email', emoji: '' },\r\n    { name: 'link', emoji: '' }, { name: 'gear', emoji: '' }, { name: 'wrench', emoji: '' },\r\n    { name: 'hammer', emoji: '' }, { name: 'shield', emoji: '' }, { name: 'sword', emoji: '' },\r\n    { name: 'flag', emoji: '' }, { name: 'checkered_flag', emoji: '' }, { name: 'party', emoji: '' },\r\n    { name: 'confused', emoji: '' }, { name: 'nervous', emoji: '' }, { name: 'scream', emoji: '' },\r\n    { name: 'sob', emoji: '' }, { name: 'sweat', emoji: '' }, { name: 'blush', emoji: '' },\r\n    { name: 'smirk', emoji: '' }, { name: 'unamused', emoji: '' }, { name: 'relieved', emoji: '' },\r\n    { name: 'dizzy', emoji: '' }, { name: 'mask', emoji: '' }, { name: 'nerd', emoji: '' },\r\n    { name: 'monocle', emoji: '' }, { name: 'shush', emoji: '' }, { name: 'salute', emoji: '' },\r\n    { name: 'rolling_eyes', emoji: '' }, { name: 'pleading', emoji: '' }, { name: 'hug', emoji: '' },\r\n];\r\n\r\nconst ChatAutocomplete = ({\r\n    message,\r\n    cursorPosition,\r\n    users = [],\r\n    channels = [],\r\n    onSelect,\r\n    textareaRef,\r\n}) => {\r\n    const [type, setType] = useState(null); // 'mention' | 'channel' | 'emoji' | null\r\n    const [query, setQuery] = useState('');\r\n    const [results, setResults] = useState([]);\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const popupRef = useRef(null);\r\n\r\n    // Detect trigger character and extract query\r\n    useEffect(() => {\r\n        if (!message || cursorPosition <= 0) {\r\n            setType(null);\r\n            return;\r\n        }\r\n\r\n        const textBeforeCursor = message.substring(0, cursorPosition);\r\n\r\n        // Find the last trigger character before cursor\r\n        // Must be at start of word (preceded by space, newline, or start of string)\r\n        const mentionMatch = textBeforeCursor.match(/(?:^|\\s)@(\\w{0,20})$/);\r\n        const channelMatch = textBeforeCursor.match(/(?:^|\\s)#(\\w{0,20})$/);\r\n        const emojiMatch = textBeforeCursor.match(/(?:^|\\s):(\\w{1,20})$/);\r\n\r\n        if (mentionMatch) {\r\n            setType('mention');\r\n            setQuery(mentionMatch[1].toLowerCase());\r\n        } else if (channelMatch) {\r\n            setType('channel');\r\n            setQuery(channelMatch[1].toLowerCase());\r\n        } else if (emojiMatch && emojiMatch[1].length >= 2) {\r\n            setType('emoji');\r\n            setQuery(emojiMatch[1].toLowerCase());\r\n        } else {\r\n            setType(null);\r\n        }\r\n        setSelectedIndex(0);\r\n    }, [message, cursorPosition]);\r\n\r\n    // Filter results based on type and query\r\n    useEffect(() => {\r\n        if (!type) {\r\n            setResults([]);\r\n            return;\r\n        }\r\n\r\n        let filtered = [];\r\n        if (type === 'mention') {\r\n            // Add @everyone and @here as special options\r\n            const specialMentions = [\r\n                { username: 'everyone', display_name: 'Everyone', special: true, icon: 'globe' },\r\n                { username: 'here', display_name: 'Online Users', special: true, icon: 'at' },\r\n            ];\r\n            const allOptions = [...specialMentions, ...users];\r\n            filtered = allOptions\r\n                .filter(u => {\r\n                    const name = (u.username || '').toLowerCase();\r\n                    const display = (u.display_name || u.nickname || '').toLowerCase();\r\n                    return name.includes(query) || display.includes(query);\r\n                })\r\n                .slice(0, 10);\r\n        } else if (type === 'channel') {\r\n            filtered = channels\r\n                .filter(c => {\r\n                    const name = (c.name || c.slug || '').toLowerCase();\r\n                    return name.includes(query);\r\n                })\r\n                .slice(0, 10);\r\n        } else if (type === 'emoji') {\r\n            filtered = COMMON_EMOJIS\r\n                .filter(e => e.name.includes(query))\r\n                .slice(0, 10);\r\n        }\r\n\r\n        setResults(filtered);\r\n    }, [type, query, users, channels]);\r\n\r\n    // Handle keyboard navigation\r\n    const handleKeyDown = useCallback((e) => {\r\n        if (!type || results.length === 0) return false;\r\n\r\n        if (e.key === 'ArrowDown') {\r\n            e.preventDefault();\r\n            setSelectedIndex(prev => (prev + 1) % results.length);\r\n            return true;\r\n        }\r\n        if (e.key === 'ArrowUp') {\r\n            e.preventDefault();\r\n            setSelectedIndex(prev => (prev - 1 + results.length) % results.length);\r\n            return true;\r\n        }\r\n        if (e.key === 'Enter' || e.key === 'Tab') {\r\n            e.preventDefault();\r\n            handleSelect(results[selectedIndex]);\r\n            return true;\r\n        }\r\n        if (e.key === 'Escape') {\r\n            setType(null);\r\n            return true;\r\n        }\r\n        return false;\r\n    }, [type, results, selectedIndex]);\r\n\r\n    // Expose handleKeyDown to parent\r\n    useEffect(() => {\r\n        if (!textareaRef?.current) return;\r\n        const textarea = textareaRef.current;\r\n\r\n        const handler = (e) => {\r\n            if (type && results.length > 0) {\r\n                if (['ArrowDown', 'ArrowUp', 'Tab'].includes(e.key) ||\r\n                    (e.key === 'Enter' && type)) {\r\n                    const handled = handleKeyDown(e);\r\n                    if (handled) e.stopPropagation();\r\n                }\r\n                if (e.key === 'Escape') {\r\n                    setType(null);\r\n                    e.stopPropagation();\r\n                }\r\n            }\r\n        };\r\n\r\n        textarea.addEventListener('keydown', handler, true); // capture phase\r\n        return () => textarea.removeEventListener('keydown', handler, true);\r\n    }, [textareaRef, type, results, handleKeyDown]);\r\n\r\n    // Handle selection\r\n    const handleSelect = useCallback((item) => {\r\n        if (!item || !textareaRef?.current) return;\r\n\r\n        const textarea = textareaRef.current;\r\n        const textBeforeCursor = message.substring(0, cursorPosition);\r\n        const textAfterCursor = message.substring(cursorPosition);\r\n\r\n        let replacement = '';\r\n        let triggerRegex;\r\n\r\n        if (type === 'mention') {\r\n            triggerRegex = /(?:^|\\s)@\\w{0,20}$/;\r\n            replacement = `@${item.username} `;\r\n        } else if (type === 'channel') {\r\n            triggerRegex = /(?:^|\\s)#\\w{0,20}$/;\r\n            replacement = `#${item.name || item.slug} `;\r\n        } else if (type === 'emoji') {\r\n            triggerRegex = /(?:^|\\s):\\w{1,20}$/;\r\n            replacement = item.emoji + ' ';\r\n        }\r\n\r\n        // Find where the trigger starts\r\n        const match = textBeforeCursor.match(triggerRegex);\r\n        if (match) {\r\n            const triggerStart = match.index + (match[0].startsWith(' ') || match[0].startsWith('\\n') ? 1 : 0);\r\n            const newText = message.substring(0, triggerStart) + replacement + textAfterCursor;\r\n            const newCursorPos = triggerStart + replacement.length;\r\n\r\n            onSelect(newText, newCursorPos);\r\n        }\r\n\r\n        setType(null);\r\n        setResults([]);\r\n    }, [type, message, cursorPosition, onSelect, textareaRef]);\r\n\r\n    // Scroll selected item into view\r\n    useEffect(() => {\r\n        if (popupRef.current) {\r\n            const items = popupRef.current.querySelectorAll('[data-autocomplete-item]');\r\n            if (items[selectedIndex]) {\r\n                items[selectedIndex].scrollIntoView({ block: 'nearest' });\r\n            }\r\n        }\r\n    }, [selectedIndex]);\r\n\r\n    if (!type || results.length === 0) return null;\r\n\r\n    const getIcon = (type, item) => {\r\n        if (type === 'mention') {\r\n            if (item.special) {\r\n                return item.icon === 'globe' ? <FaGlobe style={{ color: '#5865f2' }} /> : <FaAt style={{ color: '#faa61a' }} />;\r\n            }\r\n            return <FaUser style={{ color: '#b9bbbe' }} />;\r\n        }\r\n        if (type === 'channel') {\r\n            const ct = item.channel_type;\r\n            if (ct === 'voice') return <FaVolumeUp style={{ color: '#b9bbbe' }} />;\r\n            if (ct === 'announcement') return <FaBullhorn style={{ color: '#b9bbbe' }} />;\r\n            return <FaHashtag style={{ color: '#b9bbbe' }} />;\r\n        }\r\n        if (type === 'emoji') {\r\n            return <span style={{ fontSize: 18 }}>{item.emoji}</span>;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    const getLabel = (type, item) => {\r\n        if (type === 'mention') {\r\n            return (\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                    {item.avatar ? (\r\n                        <img src={item.avatar} alt=\"\" style={{ width: 20, height: 20, borderRadius: '50%' }} />\r\n                    ) : (\r\n                        getIcon(type, item)\r\n                    )}\r\n                    <span style={{ color: '#fff', fontWeight: 500 }}>{item.display_name || item.nickname || item.username}</span>\r\n                    {(item.display_name || item.nickname) && (\r\n                        <span style={{ color: '#72767d', fontSize: 12 }}>@{item.username}</span>\r\n                    )}\r\n                    {item.special && (\r\n                        <span style={S.specialBadge}>\r\n                            {item.username === 'everyone' ? 'Herkesi etiketle' : 'Online olanlar etiketle'}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n        if (type === 'channel') {\r\n            return (\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                    {getIcon(type, item)}\r\n                    <span style={{ color: '#fff' }}>{item.name || item.slug}</span>\r\n                    {item.category_name && (\r\n                        <span style={{ color: '#72767d', fontSize: 11 }}> {item.category_name}</span>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n        if (type === 'emoji') {\r\n            return (\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                    <span style={{ fontSize: 20 }}>{item.emoji}</span>\r\n                    <span style={{ color: '#dcddde' }}>:{item.name}:</span>\r\n                </div>\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <div ref={popupRef} style={S.popup}>\r\n            <div style={S.header}>\r\n                {type === 'mention' && <><FaAt style={{ color: '#5865f2' }} /> <span>Kullanclar</span></>}\r\n                {type === 'channel' && <><FaHashtag style={{ color: '#5865f2' }} /> <span>Kanallar</span></>}\r\n                {type === 'emoji' && <><FaSmile style={{ color: '#5865f2' }} /> <span>Emoji</span></>}\r\n            </div>\r\n            {results.map((item, i) => (\r\n                <div\r\n                    key={item.username || item.slug || item.name || i}\r\n                    data-autocomplete-item\r\n                    style={{\r\n                        ...S.item,\r\n                        backgroundColor: i === selectedIndex ? 'rgba(88,101,242,0.2)' : 'transparent',\r\n                    }}\r\n                    onClick={() => handleSelect(item)}\r\n                    onMouseEnter={() => setSelectedIndex(i)}\r\n                >\r\n                    {getLabel(type, item)}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst S = {\r\n    popup: {\r\n        position: 'absolute',\r\n        bottom: '100%',\r\n        left: 0,\r\n        right: 0,\r\n        maxHeight: 300,\r\n        overflowY: 'auto',\r\n        backgroundColor: '#2b2d31',\r\n        borderRadius: '8px 8px 0 0',\r\n        boxShadow: '0 -4px 16px rgba(0,0,0,0.4)',\r\n        zIndex: 100,\r\n        padding: '4px 0',\r\n        marginBottom: 4,\r\n    },\r\n    header: {\r\n        padding: '8px 12px',\r\n        fontSize: 11,\r\n        fontWeight: 700,\r\n        color: '#949ba4',\r\n        textTransform: 'uppercase',\r\n        letterSpacing: '0.04em',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: 6,\r\n        borderBottom: '1px solid rgba(255,255,255,0.06)',\r\n    },\r\n    item: {\r\n        padding: '8px 12px',\r\n        cursor: 'pointer',\r\n        transition: 'background 0.1s',\r\n        borderRadius: 4,\r\n        margin: '0 4px',\r\n    },\r\n    specialBadge: {\r\n        fontSize: 10,\r\n        color: '#949ba4',\r\n        backgroundColor: 'rgba(255,255,255,0.06)',\r\n        padding: '2px 6px',\r\n        borderRadius: 4,\r\n        marginLeft: 'auto',\r\n    },\r\n};\r\n\r\nexport default memo(ChatAutocomplete);\r\n","// frontend/src/components/MessageInput/styles.js\r\n// Extracted from MessageInput.js  inline styles + CSS keyframe injection\r\n\r\nconst isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\r\n\r\nconst styles = {\r\n    container: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        backgroundColor: '#383a40',\r\n        borderRadius: '8px',\r\n        padding: isMobile ? '6px' : '8px',\r\n        margin: isMobile ? '8px' : '16px',\r\n    },\r\n    replyPreview: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        padding: '8px 12px',\r\n        backgroundColor: 'rgba(88, 101, 242, 0.1)',\r\n        borderLeft: '3px solid #5865f2',\r\n        borderRadius: '4px',\r\n        marginBottom: '8px',\r\n        fontSize: '0.9em',\r\n    },\r\n    replyContent: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '4px',\r\n    },\r\n    editPreview: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        padding: '8px 12px',\r\n        backgroundColor: 'rgba(250, 166, 26, 0.1)',\r\n        borderLeft: '3px solid #faa61a',\r\n        borderRadius: '4px',\r\n        marginBottom: '8px',\r\n        fontSize: '0.9em',\r\n    },\r\n    recordingIndicator: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '12px',\r\n        padding: '12px',\r\n        backgroundColor: 'rgba(237, 66, 69, 0.1)',\r\n        borderRadius: '4px',\r\n        marginBottom: '8px',\r\n    },\r\n    recordingPulse: {\r\n        width: '12px',\r\n        height: '12px',\r\n        borderRadius: '50%',\r\n        backgroundColor: '#ed4245',\r\n    },\r\n    stopButton: {\r\n        padding: '6px 12px',\r\n        backgroundColor: '#ed4245',\r\n        color: 'white',\r\n        border: 'none',\r\n        borderRadius: '4px',\r\n        cursor: 'pointer',\r\n        marginLeft: 'auto',\r\n    },\r\n    cancelButton: {\r\n        background: 'none',\r\n        border: 'none',\r\n        color: '#b9bbbe',\r\n        cursor: 'pointer',\r\n        fontSize: '16px',\r\n        padding: '4px 8px',\r\n        transition: 'color 0.2s',\r\n    },\r\n    inputWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'flex-end',\r\n        gap: '4px',\r\n    },\r\n    leftActions: {\r\n        display: 'flex',\r\n        gap: '2px',\r\n        marginBottom: '4px',\r\n        flexShrink: 0,\r\n    },\r\n    rightActions: {\r\n        display: 'flex',\r\n        gap: '2px',\r\n        marginBottom: '4px',\r\n        flexShrink: 0,\r\n        flexWrap: 'wrap',\r\n    },\r\n    actionButton: {\r\n        background: 'none',\r\n        border: 'none',\r\n        color: '#b9bbbe',\r\n        cursor: 'pointer',\r\n        fontSize: isMobile ? '16px' : '20px',\r\n        padding: isMobile ? '6px' : '8px',\r\n        borderRadius: '4px',\r\n        transition: 'all 0.2s',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        minWidth: isMobile ? '32px' : '36px',\r\n        minHeight: isMobile ? '32px' : '36px',\r\n    },\r\n    sendButton: {\r\n        background: '#5865f2',\r\n        border: 'none',\r\n        color: 'white',\r\n        cursor: 'pointer',\r\n        fontSize: '18px',\r\n        padding: '10px 12px',\r\n        borderRadius: '4px',\r\n        transition: 'background 0.2s',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    textarea: {\r\n        flex: 1,\r\n        background: '#40444b',\r\n        border: 'none',\r\n        outline: 'none',\r\n        color: '#dcddde',\r\n        fontSize: isMobile ? '14px' : '15px',\r\n        padding: isMobile ? '8px 10px' : '11px',\r\n        borderRadius: '8px',\r\n        resize: 'none',\r\n        fontFamily: 'inherit',\r\n        lineHeight: '1.375',\r\n        maxHeight: '200px',\r\n        overflowY: 'auto',\r\n        minWidth: 0,\r\n    },\r\n    pickerWrapper: {\r\n        position: 'absolute',\r\n        bottom: '100%',\r\n        right: 0,\r\n        marginBottom: '8px',\r\n        zIndex: 1000,\r\n        boxShadow: '0 8px 16px rgba(0,0,0,0.24)',\r\n        borderRadius: '8px',\r\n    },\r\n    mobileMenu: {\r\n        position: 'absolute',\r\n        bottom: '110%',\r\n        left: 0,\r\n        backgroundColor: '#2b2d31',\r\n        border: '1px solid rgba(255,255,255,0.1)',\r\n        borderRadius: '8px',\r\n        padding: '8px',\r\n        minWidth: '200px',\r\n        boxShadow: '0 8px 16px rgba(0,0,0,0.3)',\r\n        zIndex: 1000,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '4px',\r\n    },\r\n    mobileMenuItem: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '12px',\r\n        padding: '12px 16px',\r\n        backgroundColor: 'transparent',\r\n        border: 'none',\r\n        borderRadius: '4px',\r\n        color: '#dcddde',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        transition: 'background 0.2s',\r\n        textAlign: 'left',\r\n        width: '100%',\r\n        whiteSpace: 'nowrap',\r\n    },\r\n    draftSaved: {\r\n        position: 'absolute',\r\n        top: '-30px',\r\n        right: '10px',\r\n        fontSize: '0.75em',\r\n        color: '#43b581',\r\n        backgroundColor: 'rgba(67, 181, 129, 0.1)',\r\n        padding: '4px 8px',\r\n        borderRadius: '4px',\r\n        border: '1px solid #43b581',\r\n        animation: 'fadeIn 0.3s ease-in-out',\r\n    },\r\n    //  Voice Recording Styles\r\n    micButton: {\r\n        background: 'none',\r\n        border: 'none',\r\n        color: '#b9bbbe',\r\n        cursor: 'pointer',\r\n        fontSize: isMobile ? '18px' : '20px',\r\n        padding: isMobile ? '6px' : '8px',\r\n        borderRadius: '50%',\r\n        transition: 'all 0.2s',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        userSelect: 'none',\r\n        minWidth: isMobile ? '36px' : '40px',\r\n        minHeight: isMobile ? '36px' : '40px',\r\n    },\r\n    recordingContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '12px',\r\n        position: 'relative',\r\n        flex: 1,\r\n        backgroundColor: 'rgba(237, 66, 69, 0.06)',\r\n        borderRadius: '12px',\r\n        padding: '10px 16px',\r\n        border: '1px solid rgba(237, 66, 69, 0.25)',\r\n        transition: 'all 0.3s ease',\r\n        overflow: 'hidden',\r\n    },\r\n    waveformBg: {\r\n        position: 'absolute',\r\n        left: '80px',\r\n        right: '120px',\r\n        top: '50%',\r\n        transform: 'translateY(-50%)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: '3px',\r\n        height: '24px',\r\n        pointerEvents: 'none',\r\n        zIndex: 0,\r\n    },\r\n    recLeft: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '10px',\r\n        zIndex: 1,\r\n    },\r\n    recordingDot: {\r\n        width: '12px',\r\n        height: '12px',\r\n        borderRadius: '50%',\r\n        backgroundColor: '#ed4245',\r\n    },\r\n    recordingTime: {\r\n        fontSize: '15px',\r\n        color: '#ed4245',\r\n        fontWeight: '700',\r\n        fontVariantNumeric: 'tabular-nums',\r\n        minWidth: '44px',\r\n        letterSpacing: '0.5px',\r\n    },\r\n    slideToLock: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        gap: '4px',\r\n        marginLeft: 'auto',\r\n        zIndex: 1,\r\n        cursor: 'default',\r\n    },\r\n    slideMicCircle: {\r\n        width: '36px',\r\n        height: '36px',\r\n        borderRadius: '50%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        transition: 'all 0.15s ease',\r\n        fontSize: '14px',\r\n    },\r\n    slideTrack: {\r\n        width: '4px',\r\n        height: '22px',\r\n        borderRadius: '2px',\r\n        backgroundColor: 'rgba(114, 118, 125, 0.25)',\r\n        overflow: 'hidden',\r\n        position: 'relative',\r\n    },\r\n    slideTrackFill: {\r\n        position: 'absolute',\r\n        bottom: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        borderRadius: '2px',\r\n        transition: 'height 0.05s linear',\r\n    },\r\n    slideLabel: {\r\n        fontSize: '10px',\r\n        fontWeight: '700',\r\n        textTransform: 'uppercase',\r\n        letterSpacing: '0.5px',\r\n        transition: 'color 0.15s ease',\r\n        whiteSpace: 'nowrap',\r\n    },\r\n    lockedActions: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '10px',\r\n        marginLeft: 'auto',\r\n        zIndex: 1,\r\n    },\r\n    lockedBadge: {\r\n        fontSize: '12px',\r\n        color: '#43b581',\r\n        backgroundColor: 'rgba(67, 181, 129, 0.15)',\r\n        padding: '4px 10px',\r\n        borderRadius: '12px',\r\n        fontWeight: '700',\r\n        border: '1px solid rgba(67,181,129,0.3)',\r\n    },\r\n    cancelRecButton: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '5px',\r\n        padding: '7px 14px',\r\n        backgroundColor: 'rgba(237, 66, 69, 0.12)',\r\n        color: '#ed4245',\r\n        border: '1px solid rgba(237, 66, 69, 0.3)',\r\n        borderRadius: '8px',\r\n        cursor: 'pointer',\r\n        fontSize: '13px',\r\n        fontWeight: '600',\r\n        transition: 'all 0.15s',\r\n    },\r\n    sendVoiceButton: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '5px',\r\n        padding: '7px 14px',\r\n        backgroundColor: '#5865f2',\r\n        color: 'white',\r\n        border: 'none',\r\n        borderRadius: '8px',\r\n        cursor: 'pointer',\r\n        fontSize: '13px',\r\n        fontWeight: '600',\r\n        transition: 'all 0.15s',\r\n        boxShadow: '0 2px 8px rgba(88,101,242,0.3)',\r\n    },\r\n    //  Pending Files Styles\r\n    pendingFilesContainer: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.2)',\r\n        borderRadius: '8px',\r\n        padding: '8px',\r\n        marginBottom: '8px',\r\n    },\r\n    pendingFilesHeader: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '8px',\r\n        fontSize: '12px',\r\n        color: '#b9bbbe',\r\n    },\r\n    clearAllButton: {\r\n        background: 'none',\r\n        border: 'none',\r\n        color: '#ed4245',\r\n        cursor: 'pointer',\r\n        fontSize: '11px',\r\n        padding: '4px 8px',\r\n        borderRadius: '4px',\r\n        transition: 'background 0.2s',\r\n    },\r\n    pendingFilesList: {\r\n        display: 'flex',\r\n        gap: '8px',\r\n        flexWrap: 'wrap',\r\n        maxHeight: '200px',\r\n        overflowY: 'auto',\r\n    },\r\n    pendingFileItem: {\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        backgroundColor: '#40444b',\r\n        borderRadius: '8px',\r\n        padding: '8px',\r\n        width: '100px',\r\n        gap: '4px',\r\n    },\r\n    filePreviewImage: {\r\n        width: '80px',\r\n        height: '60px',\r\n        objectFit: 'cover',\r\n        borderRadius: '4px',\r\n    },\r\n    filePreviewVideo: {\r\n        width: '80px',\r\n        height: '60px',\r\n        objectFit: 'cover',\r\n        borderRadius: '4px',\r\n    },\r\n    filePreviewIcon: {\r\n        width: '80px',\r\n        height: '60px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#2b2d31',\r\n        borderRadius: '4px',\r\n        color: '#b9bbbe',\r\n    },\r\n    fileInfo: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        gap: '2px',\r\n    },\r\n    fileName: {\r\n        fontSize: '10px',\r\n        color: '#dcddde',\r\n        textAlign: 'center',\r\n        wordBreak: 'break-all',\r\n    },\r\n    fileSize: {\r\n        fontSize: '9px',\r\n        color: '#72767d',\r\n    },\r\n    removeFileButton: {\r\n        position: 'absolute',\r\n        top: '-4px',\r\n        right: '-4px',\r\n        width: '20px',\r\n        height: '20px',\r\n        borderRadius: '50%',\r\n        backgroundColor: '#ed4245',\r\n        border: 'none',\r\n        color: 'white',\r\n        cursor: 'pointer',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        fontSize: '10px',\r\n        transition: 'transform 0.2s',\r\n    },\r\n    //  Drag & Drop Overlay Styles\r\n    dragOverlay: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(88, 101, 242, 0.9)',\r\n        zIndex: 1000,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        borderRadius: '8px',\r\n        pointerEvents: 'none',\r\n    },\r\n    dragContent: {\r\n        textAlign: 'center',\r\n        color: 'white',\r\n        padding: '20px',\r\n    },\r\n};\r\n\r\n// CSS keyframe animations  injected once into <head>\r\nconst styleSheet = document.createElement('style');\r\nstyleSheet.textContent = `\r\n    @keyframes pulse {\r\n        0%, 100% { opacity: 1; }\r\n        50% { opacity: 0.4; }\r\n    }\r\n    \r\n    @keyframes fadeIn {\r\n        from { opacity: 0; transform: translateY(5px); }\r\n        to { opacity: 1; transform: translateY(0); }\r\n    }\r\n    \r\n    /*  Recording container glow */\r\n    .rec-container-glow {\r\n        animation: recGlow 2s ease-in-out infinite;\r\n    }\r\n    @keyframes recGlow {\r\n        0%, 100% { box-shadow: 0 0 0 0 rgba(237, 66, 69, 0); border-color: rgba(237, 66, 69, 0.25); }\r\n        50% { box-shadow: 0 0 16px 2px rgba(237, 66, 69, 0.12); border-color: rgba(237, 66, 69, 0.45); }\r\n    }\r\n\r\n    /*  Recording pulse dot */\r\n    .rec-pulse {\r\n        animation: recPulse 1s ease-in-out infinite;\r\n    }\r\n    @keyframes recPulse {\r\n        0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(237, 66, 69, 0.6); }\r\n        50% { transform: scale(1.2); box-shadow: 0 0 0 8px rgba(237, 66, 69, 0); }\r\n        100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(237, 66, 69, 0); }\r\n    }\r\n    \r\n    /*  Waveform bars */\r\n    .rec-waveform {\r\n        display: flex !important;\r\n    }\r\n    .rec-wave-bar {\r\n        width: 3px;\r\n        border-radius: 2px;\r\n        background: linear-gradient(180deg, #ed4245 0%, #f04747 50%, #ed4245 100%);\r\n        animation: waveBar 0.8s ease-in-out infinite alternate;\r\n    }\r\n    @keyframes waveBar {\r\n        0% { height: 4px; opacity: 0.3; }\r\n        50% { height: 18px; opacity: 0.7; }\r\n        100% { height: 6px; opacity: 0.4; }\r\n    }\r\n    \r\n    /*  Mic button hover/active states */\r\n    .mic-button:hover {\r\n        color: #ed4245 !important;\r\n        background: rgba(237, 66, 69, 0.1) !important;\r\n    }\r\n    .mic-button:active {\r\n        transform: scale(1.15);\r\n        color: #ed4245 !important;\r\n        background: rgba(237, 66, 69, 0.2) !important;\r\n    }\r\n    \r\n    textarea::-webkit-scrollbar {\r\n        width: 8px;\r\n    }\r\n    \r\n    textarea::-webkit-scrollbar-thumb {\r\n        background: #202225;\r\n        border-radius: 4px;\r\n    }\r\n    \r\n    textarea::-webkit-scrollbar-thumb:hover {\r\n        background: #18191c;\r\n    }\r\n    \r\n    .action-button:hover {\r\n        color: #dcddde;\r\n        background-color: rgba(79, 84, 92, 0.4);\r\n    }\r\n`;\r\ndocument.head.appendChild(styleSheet);\r\n\r\nexport default styles;\r\n","// frontend/src/hooks/useVoiceRecording.js\r\n// Extracted from MessageInput.js  voice recording state cluster\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport toast from '../utils/toast';\r\n\r\nconst LOCK_THRESHOLD = 80; // px upward slide to lock\r\n\r\nconst useVoiceRecording = (onFileUpload) => {\r\n    const [isRecording, setIsRecording] = useState(false);\r\n    const [isRecordingLocked, setIsRecordingLocked] = useState(false);\r\n    const [recordingTime, setRecordingTime] = useState(0);\r\n    const [slideProgress, setSlideProgress] = useState(0);\r\n\r\n    const mediaRecorderRef = useRef(null);\r\n    const recordingTimerRef = useRef(null);\r\n    const micButtonRef = useRef(null);\r\n    const isRecordingRef = useRef(false);\r\n    const isRecordingLockedRef = useRef(false);\r\n    const touchStartYRef = useRef(0);\r\n\r\n    // Keep refs in sync with state (for document-level event listeners)\r\n    useEffect(() => {\r\n        isRecordingRef.current = isRecording;\r\n    }, [isRecording]);\r\n    useEffect(() => {\r\n        isRecordingLockedRef.current = isRecordingLocked;\r\n    }, [isRecordingLocked]);\r\n\r\n    // Document-level mouse/touch event handlers for slide-to-lock gesture\r\n    useEffect(() => {\r\n        if (!isRecording || isRecordingLocked) return;\r\n\r\n        const handleDocMouseMove = (e) => {\r\n            if (!isRecordingRef.current || isRecordingLockedRef.current) return;\r\n            const startY = touchStartYRef.current;\r\n            const deltaY = startY - e.clientY;\r\n            const progress = Math.min(Math.max(deltaY / LOCK_THRESHOLD, 0), 1);\r\n            setSlideProgress(progress);\r\n            if (deltaY > LOCK_THRESHOLD) {\r\n                setIsRecordingLocked(true);\r\n                setSlideProgress(1);\r\n            }\r\n        };\r\n\r\n        const handleDocMouseUp = () => {\r\n            if (!isRecordingRef.current) return;\r\n            if (!isRecordingLockedRef.current) {\r\n                stopRecording();\r\n            }\r\n        };\r\n\r\n        const handleDocTouchMove = (e) => {\r\n            if (!isRecordingRef.current || isRecordingLockedRef.current) return;\r\n            const currentY = e.touches[0].clientY;\r\n            const startY = touchStartYRef.current;\r\n            const deltaY = startY - currentY;\r\n            const progress = Math.min(Math.max(deltaY / LOCK_THRESHOLD, 0), 1);\r\n            setSlideProgress(progress);\r\n            if (deltaY > LOCK_THRESHOLD) {\r\n                setIsRecordingLocked(true);\r\n                setSlideProgress(1);\r\n            }\r\n        };\r\n\r\n        const handleDocTouchEnd = () => {\r\n            if (!isRecordingRef.current) return;\r\n            if (!isRecordingLockedRef.current) {\r\n                stopRecording();\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousemove', handleDocMouseMove);\r\n        document.addEventListener('mouseup', handleDocMouseUp);\r\n        document.addEventListener('touchmove', handleDocTouchMove, { passive: false });\r\n        document.addEventListener('touchend', handleDocTouchEnd);\r\n\r\n        return () => {\r\n            document.removeEventListener('mousemove', handleDocMouseMove);\r\n            document.removeEventListener('mouseup', handleDocMouseUp);\r\n            document.removeEventListener('touchmove', handleDocTouchMove);\r\n            document.removeEventListener('touchend', handleDocTouchEnd);\r\n        };\r\n    }, [isRecording, isRecordingLocked]);\r\n\r\n    const startRecording = async () => {\r\n        try {\r\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n            mediaRecorderRef.current = new MediaRecorder(stream);\r\n            const chunks = [];\r\n\r\n            mediaRecorderRef.current.ondataavailable = (e) => chunks.push(e.data);\r\n            mediaRecorderRef.current.onstop = () => {\r\n                const blob = new Blob(chunks, { type: 'audio/webm' });\r\n                const file = new File([blob], `voice-${Date.now()}.webm`, { type: 'audio/webm' });\r\n                if (onFileUpload) {\r\n                    onFileUpload(file);\r\n                }\r\n                stream.getTracks().forEach(track => track.stop());\r\n            };\r\n\r\n            mediaRecorderRef.current.start();\r\n            setIsRecording(true);\r\n            setRecordingTime(0);\r\n\r\n            recordingTimerRef.current = setInterval(() => {\r\n                setRecordingTime(t => t + 1);\r\n            }, 1000);\r\n        } catch (err) {\r\n            console.error('Mikrofon eriim hatas:', err);\r\n            toast.error(' Mikrofona eriim reddedildi!');\r\n        }\r\n    };\r\n\r\n    const stopRecording = () => {\r\n        if (mediaRecorderRef.current && isRecordingRef.current) {\r\n            mediaRecorderRef.current.stop();\r\n            setIsRecording(false);\r\n            setIsRecordingLocked(false);\r\n            clearInterval(recordingTimerRef.current);\r\n        }\r\n    };\r\n\r\n    const cancelRecording = () => {\r\n        if (mediaRecorderRef.current && isRecordingRef.current) {\r\n            const stream = mediaRecorderRef.current.stream;\r\n            mediaRecorderRef.current.onstop = null; // Prevent file upload\r\n            mediaRecorderRef.current.stop();\r\n            stream.getTracks().forEach(track => track.stop());\r\n            setIsRecording(false);\r\n            setIsRecordingLocked(false);\r\n            clearInterval(recordingTimerRef.current);\r\n        }\r\n    };\r\n\r\n    const handleMicMouseDown = (e) => {\r\n        e.preventDefault();\r\n        touchStartYRef.current = e.clientY;\r\n        setSlideProgress(0);\r\n        startRecording();\r\n    };\r\n\r\n    const handleMicTouchStart = (e) => {\r\n        e.preventDefault();\r\n        const startY = e.touches[0].clientY;\r\n        touchStartYRef.current = startY;\r\n        setSlideProgress(0);\r\n        startRecording();\r\n    };\r\n\r\n    const formatTime = (seconds) => {\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = seconds % 60;\r\n        return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    return {\r\n        isRecording,\r\n        isRecordingLocked,\r\n        recordingTime,\r\n        slideProgress,\r\n        micButtonRef,\r\n        handleMicMouseDown,\r\n        handleMicTouchStart,\r\n        stopRecording,\r\n        cancelRecording,\r\n        formatTime,\r\n    };\r\n};\r\n\r\nexport default useVoiceRecording;\r\n","// frontend/src/hooks/useDragDrop.js\r\n// Extracted from MessageInput.js  drag-and-drop state cluster\r\nimport { useState, useRef, useCallback } from 'react';\r\n\r\nconst useDragDrop = (onFilesDropped) => {\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const dragCounter = useRef(0);\r\n\r\n    const handleDragEnter = useCallback((e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        dragCounter.current++;\r\n        setIsDragging(true);\r\n    }, []);\r\n\r\n    const handleDragOver = useCallback((e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }, []);\r\n\r\n    const handleDragLeave = useCallback((e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        dragCounter.current--;\r\n        if (dragCounter.current === 0) {\r\n            setIsDragging(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleDrop = useCallback((e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        dragCounter.current = 0;\r\n        setIsDragging(false);\r\n\r\n        const files = Array.from(e.dataTransfer?.files || []);\r\n        if (files.length > 0 && onFilesDropped) {\r\n            onFilesDropped(files);\r\n        }\r\n    }, [onFilesDropped]);\r\n\r\n    const dragHandlers = {\r\n        onDragEnter: handleDragEnter,\r\n        onDragOver: handleDragOver,\r\n        onDragLeave: handleDragLeave,\r\n        onDrop: handleDrop,\r\n    };\r\n\r\n    return { isDragging, dragHandlers };\r\n};\r\n\r\nexport default useDragDrop;\r\n","// frontend/src/utils/imageCompression.js\n\n/**\n *  Image Compression & WebP Conversion Utility\n * Automatically compress images before upload\n * Convert to WebP format for better compression\n */\n\n/**\n * Compress image and convert to WebP\n * @param {File|Blob} file - Original image file\n * @param {Object} options - Compression options\n * @returns {Promise<Blob>} Compressed WebP blob\n */\nexport async function compressImage(file, options = {}) {\n    const {\n        maxWidth = 1920,\n        maxHeight = 1080,\n        quality = 0.85,\n        convertToWebP = true,\n        maintainAspectRatio = true\n    } = options;\n\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n\n        reader.onload = (e) => {\n            const img = new Image();\n\n            img.onload = () => {\n                try {\n                    // Calculate new dimensions\n                    let { width, height } = img;\n\n                    if (maintainAspectRatio) {\n                        const ratio = Math.min(maxWidth / width, maxHeight / height);\n                        if (ratio < 1) {\n                            width *= ratio;\n                            height *= ratio;\n                        }\n                    } else {\n                        width = Math.min(width, maxWidth);\n                        height = Math.min(height, maxHeight);\n                    }\n\n                    // Create canvas\n                    const canvas = document.createElement('canvas');\n                    canvas.width = width;\n                    canvas.height = height;\n\n                    const ctx = canvas.getContext('2d');\n\n                    // Enable image smoothing for better quality\n                    ctx.imageSmoothingEnabled = true;\n                    ctx.imageSmoothingQuality = 'high';\n\n                    // Draw image\n                    ctx.drawImage(img, 0, 0, width, height);\n\n                    // Convert to blob\n                    const mimeType = convertToWebP ? 'image/webp' : file.type;\n\n                    canvas.toBlob((blob) => {\n                        if (blob) {\n                            resolve(blob);\n                        } else {\n                            reject(new Error('Failed to compress image'));\n                        }\n                    }, mimeType, quality);\n\n                } catch (error) {\n                    reject(error);\n                }\n            };\n\n            img.onerror = () => reject(new Error('Failed to load image'));\n            img.src = e.target.result;\n        };\n\n        reader.onerror = () => reject(new Error('Failed to read file'));\n        reader.readAsDataURL(file);\n    });\n}\n\n/**\n * Compress avatar image (smaller, square)\n * @param {File|Blob} file - Original avatar\n * @returns {Promise<Blob>} Compressed 512x512 WebP\n */\nexport async function compressAvatar(file) {\n    return compressImage(file, {\n        maxWidth: 512,\n        maxHeight: 512,\n        quality: 0.9,\n        convertToWebP: true,\n        maintainAspectRatio: false // Force square\n    });\n}\n\n/**\n * Compress banner image (wide)\n * @param {File|Blob} file - Original banner\n * @returns {Promise<Blob>} Compressed 1920x480 WebP\n */\nexport async function compressBanner(file) {\n    return compressImage(file, {\n        maxWidth: 1920,\n        maxHeight: 480,\n        quality: 0.85,\n        convertToWebP: true,\n        maintainAspectRatio: true\n    });\n}\n\n/**\n * Compress chat image/attachment\n * @param {File|Blob} file - Original image\n * @returns {Promise<Blob>} Compressed WebP\n */\nexport async function compressChatImage(file) {\n    return compressImage(file, {\n        maxWidth: 1920,\n        maxHeight: 1080,\n        quality: 0.85,\n        convertToWebP: true,\n        maintainAspectRatio: true\n    });\n}\n\n/**\n * Batch compress multiple images\n * @param {File[]} files - Array of image files\n * @param {Object} options - Compression options\n * @returns {Promise<Blob[]>} Array of compressed blobs\n */\nexport async function compressMultipleImages(files, options = {}) {\n    const promises = files.map(file => compressImage(file, options));\n    return Promise.all(promises);\n}\n\n/**\n * Check if browser supports WebP\n * @returns {Promise<boolean>} True if WebP is supported\n */\nexport function supportsWebP() {\n    return new Promise((resolve) => {\n        const webP = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';\n        const img = new Image();\n        img.onload = () => resolve(img.width === 2);\n        img.onerror = () => resolve(false);\n        img.src = webP;\n    });\n}\n\n/**\n * Create thumbnail from image\n * @param {File|Blob} file - Original image\n * @param {number} size - Thumbnail size (default 150px)\n * @returns {Promise<Blob>} Thumbnail blob\n */\nexport async function createThumbnail(file, size = 150) {\n    return compressImage(file, {\n        maxWidth: size,\n        maxHeight: size,\n        quality: 0.8,\n        convertToWebP: true,\n        maintainAspectRatio: true\n    });\n}\n\n/**\n * Progressive image loader\n * Load thumbnail first, then full image\n */\nexport class ProgressiveImageLoader {\n    constructor(imageUrl, thumbnailUrl) {\n        this.imageUrl = imageUrl;\n        this.thumbnailUrl = thumbnailUrl;\n        this.thumbnail = null;\n        this.fullImage = null;\n    }\n\n    async loadThumbnail() {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => {\n                this.thumbnail = img;\n                resolve(img);\n            };\n            img.onerror = reject;\n            img.src = this.thumbnailUrl;\n        });\n    }\n\n    async loadFullImage() {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => {\n                this.fullImage = img;\n                resolve(img);\n            };\n            img.onerror = reject;\n            img.src = this.imageUrl;\n        });\n    }\n\n    async load(onThumbnailLoad, onFullImageLoad) {\n        try {\n            // Load thumbnail first\n            const thumbnail = await this.loadThumbnail();\n            if (onThumbnailLoad) onThumbnailLoad(thumbnail);\n\n            // Then load full image\n            const fullImage = await this.loadFullImage();\n            if (onFullImageLoad) onFullImageLoad(fullImage);\n\n            return { thumbnail, fullImage };\n        } catch (error) {\n            console.error(' [ProgressiveLoader] Failed:', error);\n            throw error;\n        }\n    }\n}\n\n/**\n * Image format converter\n * @param {File|Blob} file - Original image\n * @param {string} format - Target format (webp, jpeg, png)\n * @param {number} quality - Compression quality (0-1)\n * @returns {Promise<Blob>} Converted image blob\n */\nexport async function convertImageFormat(file, format = 'webp', quality = 0.85) {\n    const mimeTypes = {\n        webp: 'image/webp',\n        jpeg: 'image/jpeg',\n        jpg: 'image/jpeg',\n        png: 'image/png'\n    };\n\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n\n        reader.onload = (e) => {\n            const img = new Image();\n\n            img.onload = () => {\n                const canvas = document.createElement('canvas');\n                canvas.width = img.width;\n                canvas.height = img.height;\n\n                const ctx = canvas.getContext('2d');\n                ctx.drawImage(img, 0, 0);\n\n                const mimeType = mimeTypes[format] || 'image/webp';\n\n                canvas.toBlob((blob) => {\n                    if (blob) resolve(blob);\n                    else reject(new Error('Conversion failed'));\n                }, mimeType, quality);\n            };\n\n            img.onerror = reject;\n            img.src = e.target.result;\n        };\n\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n    });\n}\n\n/**\n * Get image dimensions without loading full image\n * @param {File|Blob} file - Image file\n * @returns {Promise<{width: number, height: number}>} Dimensions\n */\nexport async function getImageDimensions(file) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n\n        reader.onload = (e) => {\n            const img = new Image();\n            img.onload = () => resolve({ width: img.width, height: img.height });\n            img.onerror = reject;\n            img.src = e.target.result;\n        };\n\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n    });\n}\n\nexport default {\n    compressImage,\n    compressAvatar,\n    compressBanner,\n    compressChatImage,\n    compressMultipleImages,\n    supportsWebP,\n    createThumbnail,\n    ProgressiveImageLoader,\n    convertImageFormat,\n    getImageDimensions\n};\n\n\n","// frontend/src/components/MessageInput/PendingFilesPreview.js\r\nimport React from 'react';\r\nimport { FaFileAlt, FaTimes } from 'react-icons/fa';\r\nimport styles from './styles';\r\n\r\nconst PendingFilesPreview = ({ pendingFiles, setPendingFiles, removePendingFile }) => {\r\n    if (pendingFiles.length === 0) return null;\r\n\r\n    return (\r\n        <div style={styles.pendingFilesContainer}>\r\n            <div style={styles.pendingFilesHeader}>\r\n                <span> {pendingFiles.length} dosya bekliyor</span>\r\n                <button\r\n                    onClick={() => setPendingFiles([])}\r\n                    style={styles.clearAllButton}\r\n                    title=\"Tmn temizle\"\r\n                >\r\n                    Tmn Kaldr\r\n                </button>\r\n            </div>\r\n            <div style={styles.pendingFilesList}>\r\n                {pendingFiles.map((file) => (\r\n                    <div key={file.id} style={styles.pendingFileItem}>\r\n                        {file.previewUrl && file.type.startsWith('image/') ? (\r\n                            <img src={file.previewUrl} alt={file.name} style={styles.filePreviewImage} />\r\n                        ) : file.previewUrl && file.type.startsWith('video/') ? (\r\n                            <video src={file.previewUrl} style={styles.filePreviewVideo} muted />\r\n                        ) : (\r\n                            <div style={styles.filePreviewIcon}>\r\n                                <FaFileAlt size={24} />\r\n                            </div>\r\n                        )}\r\n                        <div style={styles.fileInfo}>\r\n                            <span style={styles.fileName}>\r\n                                {file.name.length > 20 ? file.name.substring(0, 17) + '...' : file.name}\r\n                            </span>\r\n                            <span style={styles.fileSize}>{(file.size / 1024).toFixed(1)} KB</span>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => removePendingFile(file.id)}\r\n                            style={styles.removeFileButton}\r\n                            title=\"Dosyay kaldr\"\r\n                        >\r\n                            <FaTimes />\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(PendingFilesPreview);\r\n","// frontend/src/components/MessageInput/InputMenu.js\nimport React, { useRef, useCallback } from 'react';\nimport { FaPaperclip, FaSmile, FaImage, FaPlus, FaFileAlt, FaClock, FaCode } from 'react-icons/fa';\nimport styles from './styles';\n\nconst InputMenu = ({\n    showMobileMenu, setShowMobileMenu,\n    setShowEmojiPicker, setShowGifPicker,\n    setShowTemplates, setShowScheduled,\n    onShowCodeSnippet,\n    disabled, message, setPendingFiles,\n    showEmojiPicker, showGifPicker\n}) => {\n    const fileInputRef = useRef(null);\n\n    const handleFileChange = useCallback((e) => {\n        const files = Array.from(e.target.files || []);\n        if (files.length === 0) return;\n\n        const processedFiles = files.map(file => ({\n            id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n            file,\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            previewUrl: (file.type.startsWith('image/') || file.type.startsWith('video/'))\n                ? URL.createObjectURL(file) : null,\n        }));\n\n        setPendingFiles(prev => [...prev, ...processedFiles]);\n        e.target.value = '';\n    }, [setPendingFiles]);\n\n    const menuAction = (action) => {\n        action();\n        setShowMobileMenu(false);\n    };\n\n    return (\n        <div style={styles.leftActions}>\n            <div style={{ position: 'relative' }}>\n                <button\n                    onClick={() => setShowMobileMenu(!showMobileMenu)}\n                    style={{\n                        ...styles.actionButton,\n                        backgroundColor: showMobileMenu ? 'rgba(88, 101, 242, 0.2)' : 'transparent',\n                        color: showMobileMenu ? '#5865f2' : '#b9bbbe'\n                    }}\n                    title=\"Seenekler\"\n                    disabled={disabled}\n                >\n                    <FaPlus />\n                </button>\n                <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    multiple\n                    style={{ display: 'none' }}\n                    onChange={handleFileChange}\n                    accept=\"image/*,video/*,audio/*,.pdf,.txt,.doc,.docx\"\n                />\n\n                {showMobileMenu && (\n                    <div style={styles.mobileMenu} className=\"mobile-menu-container\">\n                        <button onClick={() => menuAction(() => fileInputRef.current?.click())}\n                            style={styles.mobileMenuItem} className=\"mobile-menu-item\" disabled={disabled}>\n                            <FaPaperclip /><span>Dosya Ekle</span>\n                        </button>\n                        <button onClick={() => menuAction(() => { setShowEmojiPicker(!showEmojiPicker); setShowGifPicker(false); })}\n                            style={styles.mobileMenuItem} className=\"mobile-menu-item\" disabled={disabled}>\n                            <FaSmile /><span>Emoji Ekle</span>\n                        </button>\n                        <button onClick={() => menuAction(() => { setShowGifPicker(!showGifPicker); setShowEmojiPicker(false); })}\n                            style={styles.mobileMenuItem} className=\"mobile-menu-item\" disabled={disabled}>\n                            <FaImage /><span>GIF Ekle</span>\n                        </button>\n                        {onShowCodeSnippet && (\n                            <button onClick={() => menuAction(onShowCodeSnippet)}\n                                style={styles.mobileMenuItem} className=\"mobile-menu-item\" disabled={disabled}>\n                                <FaCode /><span>Kod Snippet</span>\n                            </button>\n                        )}\n                        <button onClick={() => menuAction(() => setShowTemplates(true))}\n                            style={styles.mobileMenuItem} className=\"mobile-menu-item\" disabled={disabled}>\n                            <FaFileAlt /><span>{''}ablon (Ctrl+T)</span>\n                        </button>\n                        <button onClick={() => menuAction(() => setShowScheduled(true))}\n                            style={styles.mobileMenuItem} className=\"mobile-menu-item\"\n                            disabled={disabled || !message.trim()}>\n                            <FaClock /><span>Zamanla</span>\n                        </button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default React.memo(InputMenu);\n","// frontend/src/components/MessageInput/VoiceRecordingUI.js\nimport React from 'react';\nimport { FaMicrophone, FaPaperPlane, FaTimes } from 'react-icons/fa';\nimport styles from './styles';\n\nconst VoiceRecordingUI = ({\n    isRecording, isRecordingLocked, recordingTime, slideProgress,\n    micButtonRef, handleMicMouseDown, handleMicTouchStart,\n    stopRecording, cancelRecording, formatTime,\n    handleSubmit, disabled, hasContent, pendingFilesCount\n}) => {\n    // No content & not recording  show mic button\n    if (!hasContent && !isRecording && pendingFilesCount === 0) {\n        return (\n            <button\n                ref={micButtonRef}\n                onMouseDown={handleMicMouseDown}\n                onTouchStart={handleMicTouchStart}\n                style={styles.micButton}\n                className=\"mic-button action-button\"\n                title=\"Basl tut  yukar kaydr kilitle\"\n                disabled={disabled}\n            >\n                <FaMicrophone />\n            </button>\n        );\n    }\n\n    // Recording in progress\n    if (isRecording) {\n        return (\n            <div style={styles.recordingContainer} className=\"rec-container-glow\">\n                <div style={styles.waveformBg} className=\"rec-waveform\">\n                    {[...Array(12)].map((_, i) => (\n                        <div key={i} className=\"rec-wave-bar\" style={{\n                            animationDelay: `${i * 0.08}s`,\n                            opacity: 0.4 + Math.random() * 0.6,\n                        }} />\n                    ))}\n                </div>\n\n                <div style={styles.recLeft}>\n                    <div style={styles.recordingDot} className=\"rec-pulse\" />\n                    <span style={styles.recordingTime}>{formatTime(recordingTime)}</span>\n                </div>\n\n                {!isRecordingLocked ? (\n                    <div style={styles.slideToLock}>\n                        <div style={{\n                            ...styles.slideMicCircle,\n                            backgroundColor: slideProgress > 0.7 ? '#43b581' : `rgba(237, 66, 69, ${0.6 + slideProgress * 0.4})`,\n                            transform: `scale(${1 + slideProgress * 0.3}) translateY(${-slideProgress * 20}px)`,\n                            boxShadow: slideProgress > 0.5 ? '0 0 12px rgba(67,181,129,0.5)' : '0 0 8px rgba(237,66,69,0.3)',\n                        }}>\n                            {slideProgress > 0.7 ? '' : <FaMicrophone style={{ color: 'white', fontSize: '14px' }} />}\n                        </div>\n                        <div style={styles.slideTrack}>\n                            <div style={{\n                                ...styles.slideTrackFill,\n                                height: `${slideProgress * 100}%`,\n                                backgroundColor: slideProgress > 0.7 ? '#43b581' : '#ed4245',\n                            }} />\n                        </div>\n                        <span style={{\n                            ...styles.slideLabel,\n                            color: slideProgress > 0.7 ? '#43b581' : '#72767d',\n                        }}>\n                            {slideProgress > 0.7 ? 'Brak  Kilitle' : ' Kilitle'}\n                        </span>\n                    </div>\n                ) : (\n                    <div style={styles.lockedActions}>\n                        <span style={styles.lockedBadge}>{''} Kilitlendi</span>\n                        <button onClick={cancelRecording} style={styles.cancelRecButton} title=\"ptal\">\n                            <FaTimes /> {''}ptal\n                        </button>\n                        <button onClick={stopRecording} style={styles.sendVoiceButton} title=\"Gnder\">\n                            <FaPaperPlane /> G{''}nder\n                        </button>\n                    </div>\n                )}\n            </div>\n        );\n    }\n\n    // Has content  show send button\n    return (\n        <button\n            onClick={handleSubmit}\n            style={styles.sendButton}\n            title=\"Gnder (Enter)\"\n            disabled={disabled}\n        >\n            <FaPaperPlane />\n        </button>\n    );\n};\n\nexport default React.memo(VoiceRecordingUI);\n","// frontend/src/components/MessageInput/hooks/useMessageDraft.js\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\nconst useMessageDraft = (activeChat, fetchWithAuth, apiBaseUrl, message, setMessage) => {\r\n    const [draftSaved, setDraftSaved] = useState(false);\r\n    const draftTimerRef = useRef(null);\r\n\r\n    // Draft loading on chat change\r\n    useEffect(() => {\r\n        if (!activeChat || !fetchWithAuth || !apiBaseUrl) return;\r\n        if (activeChat.type !== 'room' && activeChat.type !== 'dm') return;\r\n\r\n        const loadDraft = async () => {\r\n            try {\r\n                const chatKey = activeChat.type === 'room' ? `room_${activeChat.id}` : `dm_${activeChat.id}`;\r\n                const response = await fetchWithAuth(`${apiBaseUrl}/api/drafts/${chatKey}/`);\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    if (data.content) {\r\n                        setMessage(data.content);\r\n                        setDraftSaved(true);\r\n                    }\r\n                }\r\n            } catch (error) { /* silent */ }\r\n        };\r\n\r\n        loadDraft();\r\n    }, [activeChat, fetchWithAuth, apiBaseUrl, setMessage]);\r\n\r\n    // Draft auto-save every 2s\r\n    useEffect(() => {\r\n        if (!activeChat || !fetchWithAuth || !apiBaseUrl) return;\r\n        if (activeChat.type !== 'room' && activeChat.type !== 'dm') return;\r\n        if (!message.trim()) return;\r\n\r\n        if (draftTimerRef.current) clearTimeout(draftTimerRef.current);\r\n\r\n        draftTimerRef.current = setTimeout(async () => {\r\n            try {\r\n                const chatKey = activeChat.type === 'room' ? `room_${activeChat.id}` : `dm_${activeChat.id}`;\r\n                await fetchWithAuth(`${apiBaseUrl}/api/drafts/save/`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ chat_key: chatKey, content: message })\r\n                });\r\n                setDraftSaved(true);\r\n                setTimeout(() => setDraftSaved(false), 1000);\r\n            } catch (error) { /* silent */ }\r\n        }, 2000);\r\n\r\n        return () => { if (draftTimerRef.current) clearTimeout(draftTimerRef.current); };\r\n    }, [message, activeChat, fetchWithAuth, apiBaseUrl]);\r\n\r\n    // Delete draft on send\r\n    const clearDraft = () => {\r\n        if (activeChat && fetchWithAuth && apiBaseUrl && (activeChat.type === 'room' || activeChat.type === 'dm')) {\r\n            const chatKey = activeChat.type === 'room' ? `room_${activeChat.id}` : `dm_${activeChat.id}`;\r\n            fetchWithAuth(`${apiBaseUrl}/api/drafts/${chatKey}/`, { method: 'DELETE' }).catch(console.error);\r\n        }\r\n    };\r\n\r\n    return { draftSaved, clearDraft };\r\n};\r\n\r\nexport default useMessageDraft;\r\n","// frontend/src/components/MessageInput.js\nimport React, { useState, useRef, useEffect, useCallback, lazy, Suspense } from 'react';\nimport toast from '../utils/toast';\nimport { FaPaperclip, FaTimes } from 'react-icons/fa';\nimport EmojiPicker from './EmojiPicker';\nconst GifPicker = lazy(() => import('../GifPicker'));\nimport MessageTemplateModal from './MessageTemplateModal';\nimport ScheduledMessageModal from './ScheduledMessageModal';\nimport MarkdownPreviewToggle from './MarkdownPreviewToggle';\nimport ChatAutocomplete from './ChatAutocomplete';\nimport { useChatStore } from '../stores/useChatStore';\nimport '../styles/MessageInputMobile.css';\nimport styles from './MessageInput/styles';\nimport useVoiceRecording from '../hooks/useVoiceRecording';\nimport useDragDrop from '../hooks/useDragDrop';\nimport { useDebounce, useMeasurePerformance } from '../utils/performanceOptimization';\nimport { compressChatImage } from '../utils/imageCompression';\nimport PendingFilesPreview from './MessageInput/PendingFilesPreview';\nimport InputMenu from './MessageInput/InputMenu';\nimport VoiceRecordingUI from './MessageInput/VoiceRecordingUI';\nimport useMessageDraft from './MessageInput/hooks/useMessageDraft';\n\nconst MessageInput = ({\n    onSendMessage, onFileUpload, onShowCodeSnippet = null,\n    placeholder = \"Mesaj yaz...\", editingMessage = null, onCancelEdit = null,\n    replyingTo = null, onCancelReply = null, disabled = false,\n    activeChat = null, fetchWithAuth = null, apiBaseUrl = '',\n    pendingFilesFromDrop = [], onClearPendingFiles = null\n}) => {\n    useMeasurePerformance('MessageInput');\n\n    const [message, setMessage] = useState('');\n    const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n    const [showGifPicker, setShowGifPicker] = useState(false);\n    const [showTemplates, setShowTemplates] = useState(false);\n    const [showScheduled, setShowScheduled] = useState(false);\n    const [showMarkdownPreview, setShowMarkdownPreview] = useState(false);\n    const [showMobileMenu, setShowMobileMenu] = useState(false);\n    const [pendingFiles, setPendingFiles] = useState([]);\n    const [cursorPos, setCursorPos] = useState(0);\n\n    const {\n        isRecording, isRecordingLocked, recordingTime, slideProgress,\n        micButtonRef, handleMicMouseDown, handleMicTouchStart,\n        stopRecording, cancelRecording, formatTime,\n    } = useVoiceRecording(onFileUpload);\n\n    const { isDragging, dragHandlers } = useDragDrop((files) => {\n        const processedFiles = files.map(file => ({\n            id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n            file, name: file.name, size: file.size, type: file.type,\n            previewUrl: (file.type.startsWith('image/') || file.type.startsWith('video/')) ? URL.createObjectURL(file) : null,\n        }));\n        setPendingFiles(prev => [...prev, ...processedFiles]);\n    });\n\n    const onlineUsers = useChatStore(state => state.onlineUsers);\n    const debouncedMessage = useDebounce(message, 500);\n    const textareaRef = useRef(null);\n\n    const { draftSaved, clearDraft } = useMessageDraft(activeChat, fetchWithAuth, apiBaseUrl, message, setMessage);\n\n    // Capacitor scroll fix\n    useEffect(() => {\n        if (window.Capacitor) {\n            const el = textareaRef.current;\n            const handleFocus = () => { document.body.style.position = 'fixed'; document.body.style.width = '100%'; };\n            const handleBlur = () => { document.body.style.position = ''; document.body.style.width = ''; };\n            el?.addEventListener('focus', handleFocus);\n            el?.addEventListener('blur', handleBlur);\n            return () => { el?.removeEventListener('focus', handleFocus); el?.removeEventListener('blur', handleBlur); };\n        }\n    }, []);\n\n    useEffect(() => {\n        if (editingMessage) { setMessage(editingMessage.content || ''); textareaRef.current?.focus(); }\n    }, [editingMessage]);\n\n    useEffect(() => {\n        const handleClickOutside = (e) => {\n            if (showMobileMenu && !e.target.closest('.mobile-menu-container') && !e.target.closest('button')) setShowMobileMenu(false);\n        };\n        if (showMobileMenu) { document.addEventListener('mousedown', handleClickOutside); document.addEventListener('touchstart', handleClickOutside); }\n        return () => { document.removeEventListener('mousedown', handleClickOutside); document.removeEventListener('touchstart', handleClickOutside); };\n    }, [showMobileMenu]);\n\n    useEffect(() => {\n        if (textareaRef.current) {\n            textareaRef.current.style.height = 'auto';\n            textareaRef.current.style.height = Math.min(textareaRef.current.scrollHeight, 200) + 'px';\n            if (window.Capacitor && textareaRef.current === document.activeElement)\n                setTimeout(() => textareaRef.current?.scrollIntoView({ behavior: 'smooth', block: 'nearest' }), 100);\n        }\n    }, [message]);\n\n    useEffect(() => { setPendingFiles([]); }, [activeChat?.id, activeChat?.type]);\n\n    useEffect(() => {\n        if (pendingFilesFromDrop?.length > 0) {\n            if (onClearPendingFiles) onClearPendingFiles();\n            setPendingFiles(prev => [...prev, ...pendingFilesFromDrop]);\n        }\n    }, [pendingFilesFromDrop, onClearPendingFiles]);\n\n    const sendPendingFiles = useCallback(async (filesToSend) => {\n        if (!filesToSend?.length) return;\n        for (const pf of filesToSend) {\n            const file = pf.file;\n            if (file.type.startsWith('image/')) {\n                try {\n                    const compressed = await compressChatImage(file);\n                    const compressedFile = new File([compressed], file.name, { type: 'image/webp' });\n                    if (onFileUpload) await onFileUpload(compressedFile);\n                } catch { if (onFileUpload) await onFileUpload(file); }\n            } else { if (onFileUpload) await onFileUpload(file); }\n            if (pf.previewUrl) URL.revokeObjectURL(pf.previewUrl);\n        }\n        if (filesToSend.length > 1) toast.success(`$([char]0x2705) ${filesToSend.length} dosya y$([char]0x00FC)kleniyor...`);\n    }, [onFileUpload]);\n\n    const handleSubmit = useCallback(async (e) => {\n        e?.preventDefault();\n        const trimmed = message.trim();\n        if (pendingFiles.length > 0) {\n            const toSend = [...pendingFiles]; setPendingFiles([]); await sendPendingFiles(toSend);\n        }\n        if (!trimmed && pendingFiles.length === 0) return;\n        if (disabled) return;\n        if (trimmed) { onSendMessage(trimmed); setMessage(''); }\n        clearDraft();\n        if (textareaRef.current) textareaRef.current.style.height = 'auto';\n    }, [message, disabled, onSendMessage, pendingFiles, sendPendingFiles, clearDraft]);\n\n    const handleKeyDown = useCallback((e) => {\n        if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); handleSubmit(); }\n        if (e.key === 'ArrowUp' && !message.trim() && !editingMessage) {\n            e.preventDefault(); window.dispatchEvent(new CustomEvent('pawscord:editLastMessage'));\n        }\n        if (e.ctrlKey && e.key === 't') { e.preventDefault(); setShowTemplates(true); }\n        if (e.key === 'Escape') {\n            if (editingMessage && onCancelEdit) onCancelEdit();\n            if (replyingTo && onCancelReply) onCancelReply();\n        }\n    }, [editingMessage, onCancelEdit, replyingTo, onCancelReply, handleSubmit, message]);\n\n    const handleEmojiSelect = useCallback((emoji) => {\n        const ta = textareaRef.current; const s = ta.selectionStart; const end = ta.selectionEnd;\n        setMessage(message.substring(0, s) + emoji + message.substring(end));\n        setTimeout(() => { ta.selectionStart = ta.selectionEnd = s + emoji.length; ta.focus(); }, 0);\n        setShowEmojiPicker(false);\n    }, [message]);\n\n    const handleGifSelect = useCallback((gifUrl) => { onSendMessage(`[GIF:${gifUrl}]`); setShowGifPicker(false); }, [onSendMessage]);\n\n    const removePendingFile = useCallback((fileId) => {\n        setPendingFiles(prev => {\n            const f = prev.find(x => x.id === fileId);\n            if (f?.previewUrl) URL.revokeObjectURL(f.previewUrl);\n            return prev.filter(x => x.id !== fileId);\n        });\n    }, []);\n\n    return (\n        <div style={styles.container} {...dragHandlers}>\n            {isDragging && (\n                <div style={styles.dragOverlay}><div style={styles.dragContent}>\n                    <FaPaperclip style={{ fontSize: '48px' }} />\n                    <h3>Dosyalar$([char]0x0131) buraya b$([char]0x0131)rak</h3>\n                    <p>$([char]0x00C7)oklu dosya y$([char]0x00FC)klemesi destekleniyor</p>\n                </div></div>\n            )}\n\n            {replyingTo && (\n                <div style={styles.replyPreview}><div style={styles.replyContent}>\n                    <strong>@{replyingTo.author}</strong>\n                    <span>{replyingTo.content?.substring(0, 50)}...</span>\n                </div><button onClick={onCancelReply} style={styles.cancelButton}><FaTimes /></button></div>\n            )}\n\n            {editingMessage && (\n                <div style={styles.editPreview}>\n                    <span>{''} Mesaj d$([char]0x00FC)zenleniyor</span>\n                    <button onClick={onCancelEdit} style={styles.cancelButton}><FaTimes /></button>\n                </div>\n            )}\n\n            {draftSaved && !editingMessage && <div style={styles.draftSaved}>{''} Taslak kaydedildi</div>}\n\n            <PendingFilesPreview pendingFiles={pendingFiles} setPendingFiles={setPendingFiles} removePendingFile={removePendingFile} />\n\n            <div style={styles.inputWrapper}>\n                <InputMenu\n                    showMobileMenu={showMobileMenu} setShowMobileMenu={setShowMobileMenu}\n                    setShowEmojiPicker={setShowEmojiPicker} setShowGifPicker={setShowGifPicker}\n                    setShowTemplates={setShowTemplates} setShowScheduled={setShowScheduled}\n                    onShowCodeSnippet={onShowCodeSnippet}\n                    disabled={disabled} message={message} setPendingFiles={setPendingFiles}\n                    showEmojiPicker={showEmojiPicker} showGifPicker={showGifPicker}\n                />\n\n                <MarkdownPreviewToggle text={message} isPreviewMode={showMarkdownPreview}\n                    onToggle={() => setShowMarkdownPreview(prev => !prev)} />\n\n                <ChatAutocomplete message={message} cursorPosition={cursorPos}\n                    users={onlineUsers || []} channels={activeChat?.rooms || []}\n                    textareaRef={textareaRef}\n                    onSelect={(newText, newCursorPos) => {\n                        setMessage(newText); setCursorPos(newCursorPos);\n                        setTimeout(() => { if (textareaRef.current) { textareaRef.current.selectionStart = newCursorPos; textareaRef.current.selectionEnd = newCursorPos; textareaRef.current.focus(); } }, 0);\n                    }} />\n\n                <textarea ref={textareaRef} value={message}\n                    onChange={(e) => { setMessage(e.target.value); setCursorPos(e.target.selectionStart); }}\n                    onKeyDown={handleKeyDown}\n                    onSelect={(e) => setCursorPos(e.target.selectionStart)}\n                    onKeyUp={(e) => setCursorPos(e.target.selectionStart)}\n                    onPaste={(e) => {\n                        const items = e.clipboardData?.items;\n                        if (!items) return;\n                        const imageItems = Array.from(items).filter(i => i.type.startsWith('image/'));\n                        if (imageItems.length > 0) {\n                            e.preventDefault();\n                            imageItems.forEach(item => {\n                                const file = item.getAsFile();\n                                if (file) setPendingFiles(prev => [...prev, { file, previewUrl: URL.createObjectURL(file), name: file.name || 'pasted-image.png', size: file.size, type: file.type }]);\n                            });\n                            toast.success(`$([char]0xD83D)$([char]0xDCCB) G$([char]0x00F6)rsel yap$([char]0x0131)$([char]0x015F)t$([char]0x0131)r$([char]0x0131)ld$([char]0x0131)!`);\n                        }\n                    }}\n                    placeholder={placeholder} style={styles.textarea} disabled={disabled} rows={1} />\n\n                <div style={styles.rightActions}>\n                    {showEmojiPicker && <div style={styles.pickerWrapper}><EmojiPicker onSelect={handleEmojiSelect} /></div>}\n                    {showGifPicker && (\n                        <div style={styles.pickerWrapper}>\n                            <Suspense fallback={<div style={{ padding: '20px', textAlign: 'center', color: '#b9bbbe' }}>GIF y$([char]0x00FC)kleniyor...</div>}>\n                                <GifPicker onSelect={handleGifSelect} onClose={() => setShowGifPicker(false)}\n                                    localGifListUrl={`${apiBaseUrl || window.location.origin + '/api'}/gifs/list_local/`}\n                                    absoluteHostUrl={window.location.origin} fetchWithAuth={fetchWithAuth} />\n                            </Suspense>\n                        </div>\n                    )}\n\n                    <VoiceRecordingUI\n                        isRecording={isRecording} isRecordingLocked={isRecordingLocked}\n                        recordingTime={recordingTime} slideProgress={slideProgress}\n                        micButtonRef={micButtonRef} handleMicMouseDown={handleMicMouseDown}\n                        handleMicTouchStart={handleMicTouchStart}\n                        stopRecording={stopRecording} cancelRecording={cancelRecording} formatTime={formatTime}\n                        handleSubmit={handleSubmit} disabled={disabled}\n                        hasContent={!!message.trim()} pendingFilesCount={pendingFiles.length}\n                    />\n                </div>\n            </div>\n\n            {showTemplates && <MessageTemplateModal onClose={() => setShowTemplates(false)}\n                onSelect={(t) => { setMessage(t); setShowTemplates(false); }} />}\n\n            {showScheduled && <ScheduledMessageModal message={message} room={activeChat}\n                onClose={() => setShowScheduled(false)}\n                onSchedule={() => { setShowScheduled(false); setMessage(''); }} />}\n        </div>\n    );\n};\n\nexport default React.memo(MessageInput, (prevProps, nextProps) => {\n    return prevProps.disabled === nextProps.disabled &&\n        prevProps.placeholder === nextProps.placeholder &&\n        prevProps.editingMessage?.id === nextProps.editingMessage?.id &&\n        prevProps.replyingTo?.id === nextProps.replyingTo?.id &&\n        prevProps.activeChat?.id === nextProps.activeChat?.id;\n});"],"file":"MessageInput-BCyEfXGC.js"}