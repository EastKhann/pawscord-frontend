import{r as c,c9 as n,d as e}from"./react-core-DrOm_csO.js";import{g as j}from"./index-BYhWpPLp.js";const Y=({onClose:u})=>{const[b,y]=c.useState([]),[r,f]=c.useState(null),[h,k]=c.useState(!0),[E,v]=c.useState("classic"),[o,g]=c.useState("monthly"),m=j(),d=localStorage.getItem("access_token");c.useEffect(()=>{_(),p()},[]);const _=async()=>{try{const t=await(await fetch(`${m}/nitro/pricing/`,{headers:{Authorization:`Bearer ${d}`}})).json();y(t.tiers||[])}catch(a){console.error("Error fetching pricing:",a),n.error("âŒ FiyatlandÄ±rma bilgileri yÃ¼klenemedi")}},p=async()=>{try{const t=await(await fetch(`${m}/nitro/my-subscription/`,{headers:{Authorization:`Bearer ${d}`}})).json();f(t.subscription||null)}catch(a){console.error("Error fetching subscription:",a)}finally{k(!1)}},$=async()=>{try{const a=await fetch(`${m}/nitro/subscribe/`,{method:"POST",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({tier:E,billing_cycle:o,payment_method:"stripe"})}),t=await a.json();a.ok?(n.success("ğŸ‰ Abonelik baÅŸarÄ±yla baÅŸlatÄ±ldÄ±!"),p()):n.error(`âŒ ${t.error||"Abonelik baÅŸlatÄ±lamadÄ±"}`)}catch(a){console.error("Error subscribing:",a),n.error("âŒ Abonelik hatasÄ±")}},C=async()=>{if(window.confirm("AboneliÄŸinizi iptal etmek istediÄŸinizden emin misiniz?"))try{const a=await fetch(`${m}/nitro/cancel/`,{method:"POST",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}}),t=await a.json();a.ok?(n.info("â„¹ï¸ Abonelik iptal edildi"),p()):n.error(`âŒ ${t.error||"Ä°ptal edilemedi"}`)}catch(a){console.error("Error canceling:",a),n.error("âŒ Ä°ptal hatasÄ±")}},S=async a=>{try{const t=await fetch(`${m}/nitro/upgrade/`,{method:"POST",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({new_tier:a})}),l=await t.json();t.ok?(n.success("â¬†ï¸ Abonelik yÃ¼kseltildi!"),p()):n.error(`âŒ ${l.error||"YÃ¼kseltilemedi"}`)}catch(t){console.error("Error upgrading:",t),n.error("âŒ YÃ¼kseltme hatasÄ±")}},i=a=>{const t={basic:"#3b82f6",classic:"#8b5cf6",elite:"#f59e0b"};return t[a]||t.classic},N=a=>{const t={basic:"ğŸŒŸ",classic:"ğŸ’",elite:"ğŸ‘‘"};return t[a]||t.classic},w=a=>({upload_limit_mb:"ğŸ“¤",video_quality:"ğŸ¥",emoji_slots:"ğŸ˜€",custom_tag:"ğŸ·ï¸",animated_avatar:"ğŸ­",server_boosts:"ğŸš€",custom_profiles:"âœ¨",hd_video:"ğŸ“º",screen_share_quality:"ğŸ–¥ï¸",profile_banner:"ğŸ¨",custom_discriminator:"#ï¸âƒ£",badge:"ğŸ†",early_access:"ğŸ”“",priority_support:"ğŸ’¬"})[a]||"âœ“",A=(a,t)=>typeof t=="boolean"?t?"Evet":"HayÄ±r":a==="upload_limit_mb"?`${t} MB`:(a.includes("quality"),t);return h?e.createElement("div",{className:"premium-overlay"},e.createElement("div",{className:"premium-panel"},e.createElement("div",{className:"loading-state"},e.createElement("div",{className:"spinner"}),e.createElement("span",null,"YÃ¼kleniyor...")))):e.createElement("div",{className:"premium-overlay",onClick:u},e.createElement("div",{className:"premium-panel",onClick:a=>a.stopPropagation()},e.createElement("div",{className:"premium-header"},e.createElement("h2",null,"ğŸ’ Pawscord Premium"),e.createElement("button",{className:"close-btn",onClick:u},"âœ•")),r?e.createElement("div",{className:"current-subscription"},e.createElement("div",{className:"subscription-header"},e.createElement("span",{className:"subscription-icon"},N(r.tier)),e.createElement("div",{className:"subscription-info"},e.createElement("h3",null,r.tier_name||r.tier.toUpperCase()),e.createElement("span",{className:"subscription-status"},r.is_active?"âœ“ Aktif":"â¸ DurdurulmuÅŸ")),e.createElement("div",{className:"subscription-actions"},e.createElement("button",{className:"cancel-btn",onClick:C},"Ä°ptal Et"))),e.createElement("div",{className:"subscription-details"},e.createElement("div",{className:"detail-item"},e.createElement("span",{className:"detail-label"},"BaÅŸlangÄ±Ã§:"),e.createElement("span",{className:"detail-value"},new Date(r.start_date).toLocaleDateString("tr-TR"))),e.createElement("div",{className:"detail-item"},e.createElement("span",{className:"detail-label"},"BitiÅŸ:"),e.createElement("span",{className:"detail-value"},new Date(r.end_date).toLocaleDateString("tr-TR"))),e.createElement("div",{className:"detail-item"},e.createElement("span",{className:"detail-label"},"Otomatik Yenileme:"),e.createElement("span",{className:"detail-value"},r.auto_renew?"AÃ§Ä±k":"KapalÄ±")))):e.createElement("div",{className:"no-subscription"},e.createElement("div",{className:"no-subscription-icon"},"ğŸ’"),e.createElement("h3",null,"Premium Ãœyelik Yok"),e.createElement("p",null,"Premium Ã¶zelliklerden yararlanmak iÃ§in aÅŸaÄŸÄ±daki planlardan birini seÃ§in")),e.createElement("div",{className:"billing-toggle"},e.createElement("button",{className:`billing-option ${o==="monthly"?"active":""}`,onClick:()=>g("monthly")},"AylÄ±k"),e.createElement("button",{className:`billing-option ${o==="yearly"?"active":""}`,onClick:()=>g("yearly")},"YÄ±llÄ±k ",e.createElement("span",{className:"save-badge"},"%17 Ä°ndirim"))),e.createElement("div",{className:"pricing-tiers"},Object.keys(b).map(a=>{const t=b[a],l=r?.tier===a,P=o==="yearly"?t.price_yearly:t.price_monthly;return e.createElement("div",{key:a,className:`tier-card ${E===a?"selected":""} ${l?"current":""}`,style:{borderColor:i(a)},onClick:()=>!l&&v(a)},e.createElement("div",{className:"tier-header",style:{background:`linear-gradient(135deg, ${i(a)}, ${i(a)}99)`}},e.createElement("span",{className:"tier-icon"},N(a)),e.createElement("h3",null,t.name),l&&e.createElement("span",{className:"current-badge"},"Mevcut Plan")),e.createElement("div",{className:"tier-price"},e.createElement("span",{className:"price-amount"},"$",P),e.createElement("span",{className:"price-period"},"/",o==="yearly"?"yÄ±l":"ay")),e.createElement("div",{className:"tier-features"},Object.entries(t.features).map(([s,T])=>e.createElement("div",{key:s,className:"feature-item"},e.createElement("span",{className:"feature-icon"},w(s)),e.createElement("span",{className:"feature-label"},s.replace(/_/g," ").replace(/\b\w/g,z=>z.toUpperCase()),":"),e.createElement("span",{className:"feature-value"},A(s,T))))),!l&&e.createElement("div",{className:"tier-actions"},r?e.createElement("button",{className:"upgrade-btn",onClick:s=>{s.stopPropagation(),S(a)},style:{background:`linear-gradient(135deg, ${i(a)}, ${i(a)}dd)`}},"YÃ¼kselt"):e.createElement("button",{className:"subscribe-btn",onClick:s=>{s.stopPropagation(),$()},style:{background:`linear-gradient(135deg, ${i(a)}, ${i(a)}dd)`}},"Abone Ol")))})),e.createElement("div",{className:"info-banner"},e.createElement("span",{className:"info-icon"},"â„¹ï¸"),e.createElement("p",null,"Premium abonelikler Stripe ile gÃ¼venli ÅŸekilde iÅŸlenir. Ä°stediÄŸiniz zaman iptal edebilirsiniz."))))};export{Y as default};
