import{r as i,aP as v,l as D,aI as P,bU as F,cp as N,v as O}from"./react-core-B6hadH-M.js";import{t as a}from"./index-D_6pZib5.js";const j=({fetchWithAuth:c,apiBaseUrl:d,serverId:f,onClose:y})=>{const[s,R]=i.useState([]),[k,b]=i.useState(!0),[E,p]=i.useState(!1),[l,m]=i.useState({name:"",color:"#5865f2",permissions:[]}),[n,h]=i.useState(null);i.useEffect(()=>{u()},[]);const u=async()=>{try{b(!0);const e=await c(`${d}/servers/${f}/roles/list/`);if(e.ok){const o=await e.json();R(o.sort((r,g)=>(g.position||0)-(r.position||0)))}}catch(e){console.error("Rol yÃ¼kleme hatasÄ±:",e),a.error("Roller yÃ¼klenemedi")}finally{b(!1)}},S=async()=>{if(!l.name.trim()){a.error("Rol adÄ± gerekli");return}try{(await c(`${d}/servers/${f}/roles/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?(a.success("Rol oluÅŸturuldu"),m({name:"",color:"#5865f2",permissions:[]}),p(!1),u()):a.error("Rol oluÅŸturulamadÄ±")}catch(e){console.error("Rol oluÅŸturma hatasÄ±:",e),a.error("Bir hata oluÅŸtu")}},C=async e=>{if(confirm("Bu rolÃ¼ silmek istediÄŸinize emin misiniz?"))try{(await c(`${d}/roles/${e}/delete/`,{method:"DELETE"})).ok?(a.success("Rol silindi"),u()):a.error("Rol silinemedi")}catch(o){console.error("Rol silme hatasÄ±:",o),a.error("Bir hata oluÅŸtu")}},w=e=>{h(e)},B=(e,o)=>{if(e.preventDefault(),!n||n.id===o.id)return;const r=[...s],g=r.findIndex(x=>x.id===n.id),I=r.findIndex(x=>x.id===o.id);r.splice(g,1),r.splice(I,0,n),R(r)},z=async()=>{if(n){try{(await c(`${d}/roles/reorder/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roles:s.map((o,r)=>({id:o.id,position:s.length-r}))})})).ok&&a.success("Rol sÄ±ralamasÄ± gÃ¼ncellendi")}catch(e){console.error("SÄ±ralama hatasÄ±:",e),a.error("Bir hata oluÅŸtu")}h(null)}};return React.createElement("div",{style:t.overlay,onClick:y},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(v,{style:{color:"#5865f2"}}),React.createElement("h2",{style:{margin:0}},"Sunucu Rolleri")),React.createElement(D,{onClick:y,style:t.closeBtn})),React.createElement("div",{style:t.toolbar},React.createElement("button",{onClick:()=>p(!E),style:t.newRoleBtn},React.createElement(P,null)," Yeni Rol"),React.createElement("p",{style:{fontSize:"12px",color:"#888",margin:"10px 0 0 0"}},"ðŸ’¡ Rolleri sÃ¼rÃ¼kleyerek hiyerarÅŸiyi deÄŸiÅŸtirebilirsiniz")),E&&React.createElement("div",{style:t.newRoleForm},React.createElement("input",{type:"text",placeholder:"Rol adÄ±...",value:l.name,onChange:e=>m({...l,name:e.target.value}),style:t.input}),React.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"15px"}},React.createElement(F,{style:{color:"#888"}}),React.createElement("input",{type:"color",value:l.color,onChange:e=>m({...l,color:e.target.value}),style:t.colorPicker}),React.createElement("span",{style:{color:"#dcddde",fontSize:"14px"}},l.color)),React.createElement("div",{style:{display:"flex",gap:"10px"}},React.createElement("button",{onClick:S,style:t.saveBtn},"OluÅŸtur"),React.createElement("button",{onClick:()=>p(!1),style:t.cancelBtn},"Ä°ptal"))),React.createElement("div",{style:t.rolesList},k?React.createElement("div",{style:t.loading},"YÃ¼kleniyor..."):s.length===0?React.createElement("div",{style:t.empty},React.createElement(v,{style:{fontSize:"48px",color:"#555"}}),React.createElement("p",null,"HenÃ¼z rol yok")):s.map((e,o)=>React.createElement("div",{key:e.id,draggable:!0,onDragStart:()=>w(e),onDragOver:r=>B(r,e),onDragEnd:z,style:{...t.roleItem,opacity:n?.id===e.id?.5:1}},React.createElement("div",{style:t.dragHandle},React.createElement(N,{style:{color:"#888"}})),React.createElement("div",{style:{...t.roleColor,backgroundColor:e.color||"#5865f2"}}),React.createElement("div",{style:t.roleContent},React.createElement("div",{style:t.roleName},e.name),React.createElement("div",{style:t.roleMeta},"Pozisyon: ",o+1," â€¢ ",e.member_count||0," Ã¼ye")),!e.is_default&&React.createElement("button",{onClick:()=>C(e.id),style:t.deleteBtn,title:"Sil"},React.createElement(O,null)))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #333"},newRoleBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},newRoleForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #333"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"15px"},colorPicker:{width:"60px",height:"40px",border:"none",borderRadius:"4px",cursor:"pointer"},saveBtn:{flex:1,backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelBtn:{flex:1,backgroundColor:"#4e5058",color:"#fff",border:"none",padding:"10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},rolesList:{flex:1,overflowY:"auto",padding:"20px"},roleItem:{display:"flex",gap:"15px",padding:"12px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"8px",alignItems:"center",cursor:"move",transition:"opacity 0.2s"},dragHandle:{cursor:"grab",padding:"5px"},roleColor:{width:"4px",height:"40px",borderRadius:"2px"},roleContent:{flex:1},roleName:{fontWeight:"600",marginBottom:"4px"},roleMeta:{fontSize:"12px",color:"#888"},deleteBtn:{backgroundColor:"transparent",border:"none",color:"#ed4245",cursor:"pointer",fontSize:"18px",padding:"8px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{j as default};
