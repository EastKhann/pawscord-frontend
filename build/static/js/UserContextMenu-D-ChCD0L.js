import{r as m,f as D,j as e}from"./react-vendor-D8Fi5F9E.js";import{A as I,ax as A,H as E,aR as f,aP as U,a5 as K}from"./icons-vendor-BPCemF_6.js";const z=({x:d,y:M,user:l,currentUser:w,onClose:i,onAction:k,voiceChannels:v=[],isAdmin:p=!1,isInVoiceRoom:c=!1,friendsList:g=[],conversationId:R=null})=>{const x=m.useRef(null),[h,y]=m.useState(!1),[r,s]=m.useState(0),S=g&&g.length>0&&g.some(n=>{const u=n.username||n.sender_username||n.receiver_username||n.display_name||n.friend?.username,o=l.username||l.display_name;return u===o&&u!==w.username}),a=m.useCallback((n,u=null)=>{k(n,l,u),i()},[k,l,i]);m.useEffect(()=>{const n=o=>{x.current&&!x.current.contains(o.target)&&i()},u=o=>{o.key==="Escape"?i():o.key==="ArrowDown"?(o.preventDefault(),s(b=>Math.min(b+1,C()-1))):o.key==="ArrowUp"?(o.preventDefault(),s(b=>Math.max(b-1,0))):o.key==="Enter"&&(o.preventDefault(),F())};return document.addEventListener("mousedown",n),document.addEventListener("keydown",u),x.current&&x.current.focus(),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("keydown",u)}},[i]);const C=()=>{let n=2;return c&&(n+=1),p&&c&&(n+=3),n},F=()=>{const n=["profile","message"];c&&n.push("volume"),p&&c&&n.push("move","kick","server_mute"),n[r]&&a(n[r])},N=Math.min(d,window.innerWidth-220),_=Math.min(M,window.innerHeight-300),j=document.getElementById("portal-root");return j?D.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483646,background:"transparent",pointerEvents:"auto"},onClick:i}),e.jsxs("div",{ref:x,role:"menu","aria-label":`${l} için eylemler`,tabIndex:-1,style:{...t.menu,left:`${N}px`,top:`${_}px`,zIndex:2147483647,position:"fixed",pointerEvents:"auto"},children:[e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:r===0?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>a("profile"),onMouseEnter:()=>s(0),children:[e.jsx(I,{})," Profili Görüntüle"]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:r===1?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>a("message"),onMouseEnter:()=>s(1),children:[e.jsx(A,{})," Mesaj Gönder"]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:r===2?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>a("invite_to_server"),onMouseEnter:()=>s(2),children:[e.jsx(E,{})," Sunucuya Davet Et"]}),S?e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...t.menuItemDanger,background:r===3?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>a("remove_friend"),onMouseEnter:()=>s(3),children:[e.jsx(f,{})," Arkadaşlıktan Çıkar"]}):e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:r===3?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>a("add_friend"),onMouseEnter:()=>s(3),children:[e.jsx(I,{})," Arkadaş Ekle"]}),e.jsx("div",{role:"separator",style:t.separator}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:r===4?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>a("mute_user"),onMouseEnter:()=>s(4),children:[e.jsx(U,{})," Sessize Al"]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...t.menuItemDanger,background:r===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>a("block_user"),onMouseEnter:()=>s(5),children:[e.jsx(f,{})," Kullanıcıyı Engelle"]}),p&&c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{role:"separator",style:t.separator}),e.jsx("div",{style:t.sectionTitle,"aria-label":"Moderasyon seçenekleri",children:"Moderasyon"}),e.jsxs("div",{role:"menuitem",tabIndex:0,"aria-haspopup":"true","aria-expanded":h,className:"user-context-menu-item",style:{...t.menuItem,background:r===4?"rgba(88, 101, 242, 0.2)":"transparent"},onMouseEnter:()=>{y(!0),s(4)},onMouseLeave:()=>y(!1),children:[e.jsx(E,{})," Kanala Taşı",h&&v.length>0&&e.jsx("div",{role:"menu","aria-label":"Hedef kanallar",style:t.submenu,children:v.map(n=>e.jsx("div",{role:"menuitem",tabIndex:0,className:"user-context-submenu-item",style:t.submenuItem,onClick:u=>{u.stopPropagation(),a("move",n.slug)},children:n.name},n.slug))})]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...t.menuItemDanger,background:r===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>a("kick"),onMouseEnter:()=>s(5),children:[e.jsx(f,{})," Kanaldan At"]}),e.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...t.menuItem,background:r===6?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>a("server_mute"),onMouseEnter:()=>s(6),children:[e.jsx(K,{})," Mikrofonu Kapat (Server)"]})]})]})]}),j):null},t={menu:{background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"200px",padding:"6px 0",color:"#dbdee1",fontSize:"14px",border:"1px solid #1e1f22"},menuItem:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",position:"relative"},menuItemDanger:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",color:"#ed4245",position:"relative"},separator:{height:"1px",background:"#1e1f22",margin:"6px 0"},sectionTitle:{fontSize:"11px",textTransform:"uppercase",color:"#72767d",padding:"6px 12px 4px",fontWeight:"600"},submenu:{position:"absolute",left:"100%",top:0,background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"180px",padding:"6px 0",border:"1px solid #1e1f22",marginLeft:"4px"},submenuItem:{padding:"8px 12px",cursor:"pointer",transition:"background 0.1s"}};if(!document.getElementById("user-context-menu-styles")){const d=document.createElement("style");d.id="user-context-menu-styles",d.textContent=`
        .user-context-menu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        .user-context-menu-item-danger:hover {
            background: rgba(237, 66, 69, 0.2) !important;
        }
        .user-context-submenu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        
        /* ✨ Keyboard Navigation Focus Styles */
        .user-context-menu-item:focus,
        .user-context-menu-item-danger:focus,
        .user-context-submenu-item:focus {
            outline: 2px solid rgba(88, 101, 242, 0.8);
            outline-offset: -2px;
        }
        
        /* ✨ Menu Container Focus */
        [role="menu"]:focus {
            outline: none;
        }
        
        /* ✨ Smooth Transitions */
        .user-context-menu-item,
        .user-context-menu-item-danger,
        .user-context-submenu-item {
            transition: background 0.15s ease, outline 0.15s ease;
        }
    `,document.head.appendChild(d)}const P=m.memo(z);export{P as default};
