const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ReactionPicker-C0-TSIhI.js","./react-core-DrOm_csO.js","../css/react-core-Dj12pvTl.css","./LinkPreview-7uIVFHtf.js","./CodeBlock-BcfDYl5g.js","./index-BYhWpPLp.js","../css/index-CQaL4Ahz.css","./Spoiler-SdeCTbbg.js","./VoiceMessagePlayer-Dwz1JwnB.js","./TicTacToe-BA8pfD8U.js","./BookmarkButton-DRRYoYA7.js","./ReminderModal-BB-HlM80.js","./MessageThreads-DM2Nfd9z.js","./GameMessage-DjdzGW4_.js"])))=>i.map(i=>d[i]);
import{aY as Xe,aZ as Bt,a_ as Z,a$ as U,b0 as Ce,b1 as ie,b2 as ue,b3 as Ot,b4 as et,b5 as jt,b6 as _e,b7 as ne,b8 as D,b9 as $t,ba as Wt,bb as $,bc as ge,bd as qt,be as te,bf as Y,bg as Ht,r as w,d as f,q as Ae,t as be,y as Me,bh as Pe,bi as Nt,aR as Vt,bj as Be,p as Oe,bk as je,m as $e,bl as We,E as qe,aB as Kt,bm as Gt,ad as Qt,aN as Yt,_ as F}from"./react-core-DrOm_csO.js";import{L as Jt}from"./LazyImage-qWXQWv8R.js";import{useCachedImage as Ut}from"./imageCaching-C__z_MXx.js";import{d as He,t as O,f as Ne,h as Zt}from"./index-BYhWpPLp.js";import"./purify.es-HRjpPm7y.js";function Ve(e,n){const t=String(e);if(typeof n!="string")throw new TypeError("Expected character");let i=0,a=t.indexOf(n);for(;a!==-1;)i++,a=t.indexOf(n,a+n.length);return i}function Xt(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function en(e,n,t){const a=Xe((t||{}).ignore||[]),l=tn(n);let r=-1;for(;++r<l.length;)Bt(e,"text",u);function u(s,d){let c=-1,g;for(;++c<d.length;){const k=d[c],h=g?g.children:void 0;if(a(k,h?h.indexOf(k):void 0,g))return;g=k}if(g)return o(s,d)}function o(s,d){const c=d[d.length-1],g=l[r][0],k=l[r][1];let h=0;const E=c.children.indexOf(s);let v=!1,C=[];g.lastIndex=0;let _=g.exec(s.value);for(;_;){const I=_.index,z={index:_.index,input:_.input,stack:[...d,s]};let T=k(..._,z);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?g.lastIndex=I+1:(h!==I&&C.push({type:"text",value:s.value.slice(h,I)}),Array.isArray(T)?C.push(...T):T&&C.push(T),h=I+_[0].length,v=!0),!g.global)break;_=g.exec(s.value)}return v?(h<s.value.length&&C.push({type:"text",value:s.value.slice(h)}),c.children.splice(E,1,...C)):C=[s],E+C.length}}function tn(e){const n=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<t.length;){const a=t[i];n.push([nn(a[0]),rn(a[1])])}return n}function nn(e){return typeof e=="string"?new RegExp(Xt(e),"g"):e}function rn(e){return typeof e=="function"?e:function(){return e}}const ke="phrasing",xe=["autolink","link","image","label"];function on(){return{transforms:[pn],enter:{literalAutolink:ln,literalAutolinkEmail:ye,literalAutolinkHttp:ye,literalAutolinkWww:ye},exit:{literalAutolink:fn,literalAutolinkEmail:cn,literalAutolinkHttp:sn,literalAutolinkWww:un}}}function an(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ke,notInConstruct:xe},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ke,notInConstruct:xe},{character:":",before:"[ps]",after:"\\/",inConstruct:ke,notInConstruct:xe}]}}function ln(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function ye(e){this.config.enter.autolinkProtocol.call(this,e)}function sn(e){this.config.exit.autolinkProtocol.call(this,e)}function un(e){this.config.exit.data.call(this,e);const n=this.stack[this.stack.length-1];Z(n.type==="link"),n.url="http://"+this.sliceSerialize(e)}function cn(e){this.config.exit.autolinkEmail.call(this,e)}function fn(e){this.exit(e)}function pn(e){en(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,mn],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,dn]],{ignore:["link","linkReference"]})}function mn(e,n,t,i,a){let l="";if(!tt(a)||(/^w/i.test(n)&&(t=n+t,n="",l="http://"),!hn(t)))return!1;const r=gn(t+i);if(!r[0])return!1;const u={type:"link",title:null,url:l+n+r[0],children:[{type:"text",value:n+r[0]}]};return r[1]?[u,{type:"text",value:r[1]}]:u}function dn(e,n,t,i){return!tt(i,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+t,children:[{type:"text",value:n+"@"+t}]}}function hn(e){const n=e.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function gn(e){const n=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!n)return[e,void 0];e=e.slice(0,n.index);let t=n[0],i=t.indexOf(")");const a=Ve(e,"(");let l=Ve(e,")");for(;i!==-1&&a>l;)e+=t.slice(0,i+1),t=t.slice(i+1),i=t.indexOf(")"),l++;return[e,t]}function tt(e,n){const t=e.input.charCodeAt(e.index-1);return(e.index===0||U(t)||Ce(t))&&(!n||t!==47)}nt.peek=_n;function bn(){this.buffer()}function kn(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function xn(){this.buffer()}function yn(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function wn(e){const n=this.resume(),t=this.stack[this.stack.length-1];Z(t.type==="footnoteReference"),t.identifier=ie(this.sliceSerialize(e)).toLowerCase(),t.label=n}function vn(e){this.exit(e)}function En(e){const n=this.resume(),t=this.stack[this.stack.length-1];Z(t.type==="footnoteDefinition"),t.identifier=ie(this.sliceSerialize(e)).toLowerCase(),t.label=n}function Cn(e){this.exit(e)}function _n(){return"["}function nt(e,n,t,i){const a=t.createTracker(i);let l=a.move("[^");const r=t.enter("footnoteReference"),u=t.enter("reference");return l+=a.move(t.safe(t.associationId(e),{after:"]",before:l})),u(),r(),l+=a.move("]"),l}function Sn(){return{enter:{gfmFootnoteCallString:bn,gfmFootnoteCall:kn,gfmFootnoteDefinitionLabelString:xn,gfmFootnoteDefinition:yn},exit:{gfmFootnoteCallString:wn,gfmFootnoteCall:vn,gfmFootnoteDefinitionLabelString:En,gfmFootnoteDefinition:Cn}}}function In(e){let n=!1;return e&&e.firstLineBlank&&(n=!0),{handlers:{footnoteDefinition:t,footnoteReference:nt},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(i,a,l,r){const u=l.createTracker(r);let o=u.move("[^");const s=l.enter("footnoteDefinition"),d=l.enter("label");return o+=u.move(l.safe(l.associationId(i),{before:o,after:"]"})),d(),o+=u.move("]:"),i.children&&i.children.length>0&&(u.shift(4),o+=u.move((n?`
`:" ")+l.indentLines(l.containerFlow(i,u.current()),n?rt:Tn))),s(),o}}function Tn(e,n,t){return n===0?e:rt(e,n,t)}function rt(e,n,t){return(t?"":"    ")+e}const zn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];it.peek=An;function Dn(){return{canContainEols:["delete"],enter:{strikethrough:Rn},exit:{strikethrough:Fn}}}function Ln(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:zn}],handlers:{delete:it}}}function Rn(e){this.enter({type:"delete",children:[]},e)}function Fn(e){this.exit(e)}function it(e,n,t,i){const a=t.createTracker(i),l=t.enter("strikethrough");let r=a.move("~~");return r+=t.containerPhrasing(e,{...a.current(),before:r,after:"~"}),r+=a.move("~~"),l(),r}function An(){return"~"}function Mn(e){return e.length}function Pn(e,n){const t=n||{},i=(t.align||[]).concat(),a=t.stringLength||Mn,l=[],r=[],u=[],o=[];let s=0,d=-1;for(;++d<e.length;){const x=[],E=[];let v=-1;for(e[d].length>s&&(s=e[d].length);++v<e[d].length;){const C=Bn(e[d][v]);if(t.alignDelimiters!==!1){const _=a(C);E[v]=_,(o[v]===void 0||_>o[v])&&(o[v]=_)}x.push(C)}r[d]=x,u[d]=E}let c=-1;if(typeof i=="object"&&"length"in i)for(;++c<s;)l[c]=Ke(i[c]);else{const x=Ke(i);for(;++c<s;)l[c]=x}c=-1;const g=[],k=[];for(;++c<s;){const x=l[c];let E="",v="";x===99?(E=":",v=":"):x===108?E=":":x===114&&(v=":");let C=t.alignDelimiters===!1?1:Math.max(1,o[c]-E.length-v.length);const _=E+"-".repeat(C)+v;t.alignDelimiters!==!1&&(C=E.length+C+v.length,C>o[c]&&(o[c]=C),k[c]=C),g[c]=_}r.splice(1,0,g),u.splice(1,0,k),d=-1;const h=[];for(;++d<r.length;){const x=r[d],E=u[d];c=-1;const v=[];for(;++c<s;){const C=x[c]||"";let _="",I="";if(t.alignDelimiters!==!1){const z=o[c]-(E[c]||0),T=l[c];T===114?_=" ".repeat(z):T===99?z%2?(_=" ".repeat(z/2+.5),I=" ".repeat(z/2-.5)):(_=" ".repeat(z/2),I=_):I=" ".repeat(z)}t.delimiterStart!==!1&&!c&&v.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&C==="")&&(t.delimiterStart!==!1||c)&&v.push(" "),t.alignDelimiters!==!1&&v.push(_),v.push(C),t.alignDelimiters!==!1&&v.push(I),t.padding!==!1&&v.push(" "),(t.delimiterEnd!==!1||c!==s-1)&&v.push("|")}h.push(t.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return h.join(`
`)}function Bn(e){return e==null?"":String(e)}function Ke(e){const n=typeof e=="string"?e.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}function On(e,n,t,i){const a=t.enter("blockquote"),l=t.createTracker(i);l.move("> "),l.shift(2);const r=t.indentLines(t.containerFlow(e,l.current()),jn);return a(),r}function jn(e,n,t){return">"+(t?"":" ")+e}function $n(e,n){return Ge(e,n.inConstruct,!0)&&!Ge(e,n.notInConstruct,!1)}function Ge(e,n,t){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return t;let i=-1;for(;++i<n.length;)if(e.includes(n[i]))return!0;return!1}function Qe(e,n,t,i){let a=-1;for(;++a<t.unsafe.length;)if(t.unsafe[a].character===`
`&&$n(t.stack,t.unsafe[a]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function Wn(e,n){const t=String(e);let i=t.indexOf(n),a=i,l=0,r=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===a?++l>r&&(r=l):l=1,a=i+n.length,i=t.indexOf(n,a);return r}function qn(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Hn(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function Nn(e,n,t,i){const a=Hn(t),l=e.value||"",r=a==="`"?"GraveAccent":"Tilde";if(qn(e,t)){const c=t.enter("codeIndented"),g=t.indentLines(l,Vn);return c(),g}const u=t.createTracker(i),o=a.repeat(Math.max(Wn(l,a)+1,3)),s=t.enter("codeFenced");let d=u.move(o);if(e.lang){const c=t.enter(`codeFencedLang${r}`);d+=u.move(t.safe(e.lang,{before:d,after:" ",encode:["`"],...u.current()})),c()}if(e.lang&&e.meta){const c=t.enter(`codeFencedMeta${r}`);d+=u.move(" "),d+=u.move(t.safe(e.meta,{before:d,after:`
`,encode:["`"],...u.current()})),c()}return d+=u.move(`
`),l&&(d+=u.move(l+`
`)),d+=u.move(o),s(),d}function Vn(e,n,t){return(t?"":"    ")+e}function Se(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function Kn(e,n,t,i){const a=Se(t),l=a==='"'?"Quote":"Apostrophe",r=t.enter("definition");let u=t.enter("label");const o=t.createTracker(i);let s=o.move("[");return s+=o.move(t.safe(t.associationId(e),{before:s,after:"]",...o.current()})),s+=o.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=t.enter("destinationLiteral"),s+=o.move("<"),s+=o.move(t.safe(e.url,{before:s,after:">",...o.current()})),s+=o.move(">")):(u=t.enter("destinationRaw"),s+=o.move(t.safe(e.url,{before:s,after:e.title?" ":`
`,...o.current()}))),u(),e.title&&(u=t.enter(`title${l}`),s+=o.move(" "+a),s+=o.move(t.safe(e.title,{before:s,after:a,...o.current()})),s+=o.move(a),u()),r(),s}function Gn(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function re(e){return"&#x"+e.toString(16).toUpperCase()+";"}function ce(e,n,t){const i=ue(e),a=ue(n);return i===void 0?a===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}ot.peek=Qn;function ot(e,n,t,i){const a=Gn(t),l=t.enter("emphasis"),r=t.createTracker(i),u=r.move(a);let o=r.move(t.containerPhrasing(e,{after:a,before:u,...r.current()}));const s=o.charCodeAt(0),d=ce(i.before.charCodeAt(i.before.length-1),s,a);d.inside&&(o=re(s)+o.slice(1));const c=o.charCodeAt(o.length-1),g=ce(i.after.charCodeAt(0),c,a);g.inside&&(o=o.slice(0,-1)+re(c));const k=r.move(a);return l(),t.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},u+o+k}function Qn(e,n,t){return t.options.emphasis||"*"}function Yn(e,n){let t=!1;return Ot(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return t=!0,jt}),!!((!e.depth||e.depth<3)&&et(e)&&(n.options.setext||t))}function Jn(e,n,t,i){const a=Math.max(Math.min(6,e.depth||1),1),l=t.createTracker(i);if(Yn(e,t)){const d=t.enter("headingSetext"),c=t.enter("phrasing"),g=t.containerPhrasing(e,{...l.current(),before:`
`,after:`
`});return c(),d(),g+`
`+(a===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const r="#".repeat(a),u=t.enter("headingAtx"),o=t.enter("phrasing");l.move(r+" ");let s=t.containerPhrasing(e,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(s)&&(s=re(s.charCodeAt(0))+s.slice(1)),s=s?r+" "+s:r,t.options.closeAtx&&(s+=" "+r),o(),u(),s}at.peek=Un;function at(e){return e.value||""}function Un(){return"<"}lt.peek=Zn;function lt(e,n,t,i){const a=Se(t),l=a==='"'?"Quote":"Apostrophe",r=t.enter("image");let u=t.enter("label");const o=t.createTracker(i);let s=o.move("![");return s+=o.move(t.safe(e.alt,{before:s,after:"]",...o.current()})),s+=o.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=t.enter("destinationLiteral"),s+=o.move("<"),s+=o.move(t.safe(e.url,{before:s,after:">",...o.current()})),s+=o.move(">")):(u=t.enter("destinationRaw"),s+=o.move(t.safe(e.url,{before:s,after:e.title?" ":")",...o.current()}))),u(),e.title&&(u=t.enter(`title${l}`),s+=o.move(" "+a),s+=o.move(t.safe(e.title,{before:s,after:a,...o.current()})),s+=o.move(a),u()),s+=o.move(")"),r(),s}function Zn(){return"!"}st.peek=Xn;function st(e,n,t,i){const a=e.referenceType,l=t.enter("imageReference");let r=t.enter("label");const u=t.createTracker(i);let o=u.move("![");const s=t.safe(e.alt,{before:o,after:"]",...u.current()});o+=u.move(s+"]["),r();const d=t.stack;t.stack=[],r=t.enter("reference");const c=t.safe(t.associationId(e),{before:o,after:"]",...u.current()});return r(),t.stack=d,l(),a==="full"||!s||s!==c?o+=u.move(c+"]"):a==="shortcut"?o=o.slice(0,-1):o+=u.move("]"),o}function Xn(){return"!"}ut.peek=er;function ut(e,n,t){let i=e.value||"",a="`",l=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(i);)a+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++l<t.unsafe.length;){const r=t.unsafe[l],u=t.compilePattern(r);let o;if(r.atBreak)for(;o=u.exec(i);){let s=o.index;i.charCodeAt(s)===10&&i.charCodeAt(s-1)===13&&s--,i=i.slice(0,s)+" "+i.slice(o.index+1)}}return a+i+a}function er(){return"`"}function ct(e,n){const t=et(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(t===e.url||"mailto:"+t===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}ft.peek=tr;function ft(e,n,t,i){const a=Se(t),l=a==='"'?"Quote":"Apostrophe",r=t.createTracker(i);let u,o;if(ct(e,t)){const d=t.stack;t.stack=[],u=t.enter("autolink");let c=r.move("<");return c+=r.move(t.containerPhrasing(e,{before:c,after:">",...r.current()})),c+=r.move(">"),u(),t.stack=d,c}u=t.enter("link"),o=t.enter("label");let s=r.move("[");return s+=r.move(t.containerPhrasing(e,{before:s,after:"](",...r.current()})),s+=r.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=t.enter("destinationLiteral"),s+=r.move("<"),s+=r.move(t.safe(e.url,{before:s,after:">",...r.current()})),s+=r.move(">")):(o=t.enter("destinationRaw"),s+=r.move(t.safe(e.url,{before:s,after:e.title?" ":")",...r.current()}))),o(),e.title&&(o=t.enter(`title${l}`),s+=r.move(" "+a),s+=r.move(t.safe(e.title,{before:s,after:a,...r.current()})),s+=r.move(a),o()),s+=r.move(")"),u(),s}function tr(e,n,t){return ct(e,t)?"<":"["}pt.peek=nr;function pt(e,n,t,i){const a=e.referenceType,l=t.enter("linkReference");let r=t.enter("label");const u=t.createTracker(i);let o=u.move("[");const s=t.containerPhrasing(e,{before:o,after:"]",...u.current()});o+=u.move(s+"]["),r();const d=t.stack;t.stack=[],r=t.enter("reference");const c=t.safe(t.associationId(e),{before:o,after:"]",...u.current()});return r(),t.stack=d,l(),a==="full"||!s||s!==c?o+=u.move(c+"]"):a==="shortcut"?o=o.slice(0,-1):o+=u.move("]"),o}function nr(){return"["}function Ie(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function rr(e){const n=Ie(e),t=e.options.bulletOther;if(!t)return n==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+t+"`) to be different");return t}function ir(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function mt(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function or(e,n,t,i){const a=t.enter("list"),l=t.bulletCurrent;let r=e.ordered?ir(t):Ie(t);const u=e.ordered?r==="."?")":".":rr(t);let o=n&&t.bulletLastUsed?r===t.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((r==="*"||r==="-")&&d&&(!d.children||!d.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(o=!0),mt(t)===r&&d){let c=-1;for(;++c<e.children.length;){const g=e.children[c];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){o=!0;break}}}}o&&(r=u),t.bulletCurrent=r;const s=t.containerFlow(e,i);return t.bulletLastUsed=r,t.bulletCurrent=l,a(),s}function ar(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function lr(e,n,t,i){const a=ar(t);let l=t.bulletCurrent||Ie(t);n&&n.type==="list"&&n.ordered&&(l=(typeof n.start=="number"&&n.start>-1?n.start:1)+(t.options.incrementListMarker===!1?0:n.children.indexOf(e))+l);let r=l.length+1;(a==="tab"||a==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(r=Math.ceil(r/4)*4);const u=t.createTracker(i);u.move(l+" ".repeat(r-l.length)),u.shift(r);const o=t.enter("listItem"),s=t.indentLines(t.containerFlow(e,u.current()),d);return o(),s;function d(c,g,k){return g?(k?"":" ".repeat(r))+c:(k?l:l+" ".repeat(r-l.length))+c}}function sr(e,n,t,i){const a=t.enter("paragraph"),l=t.enter("phrasing"),r=t.containerPhrasing(e,i);return l(),a(),r}const ur=Xe(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function cr(e,n,t,i){return(e.children.some(function(r){return ur(r)})?t.containerPhrasing:t.containerFlow).call(t,e,i)}function fr(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}dt.peek=pr;function dt(e,n,t,i){const a=fr(t),l=t.enter("strong"),r=t.createTracker(i),u=r.move(a+a);let o=r.move(t.containerPhrasing(e,{after:a,before:u,...r.current()}));const s=o.charCodeAt(0),d=ce(i.before.charCodeAt(i.before.length-1),s,a);d.inside&&(o=re(s)+o.slice(1));const c=o.charCodeAt(o.length-1),g=ce(i.after.charCodeAt(0),c,a);g.inside&&(o=o.slice(0,-1)+re(c));const k=r.move(a+a);return l(),t.attentionEncodeSurroundingInfo={after:g.outside,before:d.outside},u+o+k}function pr(e,n,t){return t.options.strong||"*"}function mr(e,n,t,i){return t.safe(e.value,i)}function dr(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function hr(e,n,t){const i=(mt(t)+(t.options.ruleSpaces?" ":"")).repeat(dr(t));return t.options.ruleSpaces?i.slice(0,-1):i}const ht={blockquote:On,break:Qe,code:Nn,definition:Kn,emphasis:ot,hardBreak:Qe,heading:Jn,html:at,image:lt,imageReference:st,inlineCode:ut,link:ft,linkReference:pt,list:or,listItem:lr,paragraph:sr,root:cr,strong:dt,text:mr,thematicBreak:hr};function gr(){return{enter:{table:br,tableData:Ye,tableHeader:Ye,tableRow:xr},exit:{codeText:yr,table:kr,tableData:we,tableHeader:we,tableRow:we}}}function br(e){const n=e._align;this.enter({type:"table",align:n.map(function(t){return t==="none"?null:t}),children:[]},e),this.data.inTable=!0}function kr(e){this.exit(e),this.data.inTable=void 0}function xr(e){this.enter({type:"tableRow",children:[]},e)}function we(e){this.exit(e)}function Ye(e){this.enter({type:"tableCell",children:[]},e)}function yr(e){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,wr));const t=this.stack[this.stack.length-1];Z(t.type==="inlineCode"),t.value=n,this.exit(e)}function wr(e,n){return n==="|"?n:e}function vr(e){const n=e||{},t=n.tableCellPadding,i=n.tablePipeAlign,a=n.stringLength,l=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:r,tableCell:o,tableRow:u}};function r(k,h,x,E){return s(d(k,x,E),k.align)}function u(k,h,x,E){const v=c(k,x,E),C=s([v]);return C.slice(0,C.indexOf(`
`))}function o(k,h,x,E){const v=x.enter("tableCell"),C=x.enter("phrasing"),_=x.containerPhrasing(k,{...E,before:l,after:l});return C(),v(),_}function s(k,h){return Pn(k,{align:h,alignDelimiters:i,padding:t,stringLength:a})}function d(k,h,x){const E=k.children;let v=-1;const C=[],_=h.enter("table");for(;++v<E.length;)C[v]=c(E[v],h,x);return _(),C}function c(k,h,x){const E=k.children;let v=-1;const C=[],_=h.enter("tableRow");for(;++v<E.length;)C[v]=o(E[v],k,h,x);return _(),C}function g(k,h,x){let E=ht.inlineCode(k,h,x);return x.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function Er(){return{exit:{taskListCheckValueChecked:Je,taskListCheckValueUnchecked:Je,paragraph:_r}}}function Cr(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Sr}}}function Je(e){const n=this.stack[this.stack.length-2];Z(n.type==="listItem"),n.checked=e.type==="taskListCheckValueChecked"}function _r(e){const n=this.stack[this.stack.length-2];if(n&&n.type==="listItem"&&typeof n.checked=="boolean"){const t=this.stack[this.stack.length-1];Z(t.type==="paragraph");const i=t.children[0];if(i&&i.type==="text"){const a=n.children;let l=-1,r;for(;++l<a.length;){const u=a[l];if(u.type==="paragraph"){r=u;break}}r===t&&(i.value=i.value.slice(1),i.value.length===0?t.children.shift():t.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,t.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function Sr(e,n,t,i){const a=e.children[0],l=typeof e.checked=="boolean"&&a&&a.type==="paragraph",r="["+(e.checked?"x":" ")+"] ",u=t.createTracker(i);l&&u.move(r);let o=ht.listItem(e,n,t,{...i,...u.current()});return l&&(o=o.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,s)),o;function s(d){return d+r}}function Ir(){return[on(),Sn(),Dn(),gr(),Er()]}function Tr(e){return{extensions:[an(),In(e),Ln(),vr(e),Cr()]}}const zr={tokenize:Mr,partial:!0},gt={tokenize:Pr,partial:!0},bt={tokenize:Br,partial:!0},kt={tokenize:Or,partial:!0},Dr={tokenize:jr,partial:!0},xt={name:"wwwAutolink",tokenize:Fr,previous:wt},yt={name:"protocolAutolink",tokenize:Ar,previous:vt},j={name:"emailAutolink",tokenize:Rr,previous:Et},M={};function Lr(){return{text:M}}let K=48;for(;K<123;)M[K]=j,K++,K===58?K=65:K===91&&(K=97);M[43]=j;M[45]=j;M[46]=j;M[95]=j;M[72]=[j,yt];M[104]=[j,yt];M[87]=[j,xt];M[119]=[j,xt];function Rr(e,n,t){const i=this;let a,l;return r;function r(c){return!Ee(c)||!Et.call(i,i.previous)||Te(i.events)?t(c):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(c))}function u(c){return Ee(c)?(e.consume(c),u):c===64?(e.consume(c),o):t(c)}function o(c){return c===46?e.check(Dr,d,s)(c):c===45||c===95||_e(c)?(l=!0,e.consume(c),o):d(c)}function s(c){return e.consume(c),a=!0,o}function d(c){return l&&a&&ne(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),n(c)):t(c)}}function Fr(e,n,t){const i=this;return a;function a(r){return r!==87&&r!==119||!wt.call(i,i.previous)||Te(i.events)?t(r):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(zr,e.attempt(gt,e.attempt(bt,l),t),t)(r))}function l(r){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),n(r)}}function Ar(e,n,t){const i=this;let a="",l=!1;return r;function r(c){return(c===72||c===104)&&vt.call(i,i.previous)&&!Te(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(c),e.consume(c),u):t(c)}function u(c){if(ne(c)&&a.length<5)return a+=String.fromCodePoint(c),e.consume(c),u;if(c===58){const g=a.toLowerCase();if(g==="http"||g==="https")return e.consume(c),o}return t(c)}function o(c){return c===47?(e.consume(c),l?s:(l=!0,o)):t(c)}function s(c){return c===null||$t(c)||D(c)||U(c)||Ce(c)?t(c):e.attempt(gt,e.attempt(bt,d),t)(c)}function d(c){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),n(c)}}function Mr(e,n,t){let i=0;return a;function a(r){return(r===87||r===119)&&i<3?(i++,e.consume(r),a):r===46&&i===3?(e.consume(r),l):t(r)}function l(r){return r===null?t(r):n(r)}}function Pr(e,n,t){let i,a,l;return r;function r(s){return s===46||s===95?e.check(kt,o,u)(s):s===null||D(s)||U(s)||s!==45&&Ce(s)?o(s):(l=!0,e.consume(s),r)}function u(s){return s===95?i=!0:(a=i,i=void 0),e.consume(s),r}function o(s){return a||i||!l?t(s):n(s)}}function Br(e,n){let t=0,i=0;return a;function a(r){return r===40?(t++,e.consume(r),a):r===41&&i<t?l(r):r===33||r===34||r===38||r===39||r===41||r===42||r===44||r===46||r===58||r===59||r===60||r===63||r===93||r===95||r===126?e.check(kt,n,l)(r):r===null||D(r)||U(r)?n(r):(e.consume(r),a)}function l(r){return r===41&&i++,e.consume(r),a}}function Or(e,n,t){return i;function i(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),i):u===38?(e.consume(u),l):u===93?(e.consume(u),a):u===60||u===null||D(u)||U(u)?n(u):t(u)}function a(u){return u===null||u===40||u===91||D(u)||U(u)?n(u):i(u)}function l(u){return ne(u)?r(u):t(u)}function r(u){return u===59?(e.consume(u),i):ne(u)?(e.consume(u),r):t(u)}}function jr(e,n,t){return i;function i(l){return e.consume(l),a}function a(l){return _e(l)?t(l):n(l)}}function wt(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||D(e)}function vt(e){return!ne(e)}function Et(e){return!(e===47||Ee(e))}function Ee(e){return e===43||e===45||e===46||e===95||_e(e)}function Te(e){let n=e.length,t=!1;for(;n--;){const i=e[n][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){t=!0;break}if(i._gfmAutolinkLiteralWalkedInto){t=!1;break}}return e.length>0&&!t&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const $r={tokenize:Qr,partial:!0};function Wr(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Vr,continuation:{tokenize:Kr},exit:Gr}},text:{91:{name:"gfmFootnoteCall",tokenize:Nr},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:qr,resolveTo:Hr}}}}function qr(e,n,t){const i=this;let a=i.events.length;const l=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r;for(;a--;){const o=i.events[a][1];if(o.type==="labelImage"){r=o;break}if(o.type==="gfmFootnoteCall"||o.type==="labelLink"||o.type==="label"||o.type==="image"||o.type==="link")break}return u;function u(o){if(!r||!r._balanced)return t(o);const s=ie(i.sliceSerialize({start:r.end,end:i.now()}));return s.codePointAt(0)!==94||!l.includes(s.slice(1))?t(o):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),n(o))}}function Hr(e,n){let t=e.length;for(;t--;)if(e[t][1].type==="labelImage"&&e[t][0]==="enter"){e[t][1];break}e[t+1][1].type="data",e[t+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[t+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[t+3][1].end),end:Object.assign({},e[t+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const l={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},r={type:"chunkString",contentType:"string",start:Object.assign({},l.start),end:Object.assign({},l.end)},u=[e[t+1],e[t+2],["enter",i,n],e[t+3],e[t+4],["enter",a,n],["exit",a,n],["enter",l,n],["enter",r,n],["exit",r,n],["exit",l,n],e[e.length-2],e[e.length-1],["exit",i,n]];return e.splice(t,e.length-t+1,...u),e}function Nr(e,n,t){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l=0,r;return u;function u(c){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),o}function o(c){return c!==94?t(c):(e.enter("gfmFootnoteCallMarker"),e.consume(c),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",s)}function s(c){if(l>999||c===93&&!r||c===null||c===91||D(c))return t(c);if(c===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return a.includes(ie(i.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),n):t(c)}return D(c)||(r=!0),l++,e.consume(c),c===92?d:s}function d(c){return c===91||c===92||c===93?(e.consume(c),l++,s):s(c)}}function Vr(e,n,t){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l,r=0,u;return o;function o(h){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionLabelMarker"),s}function s(h){return h===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):t(h)}function d(h){if(r>999||h===93&&!u||h===null||h===91||D(h))return t(h);if(h===93){e.exit("chunkString");const x=e.exit("gfmFootnoteDefinitionLabelString");return l=ie(i.sliceSerialize(x)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return D(h)||(u=!0),r++,e.consume(h),h===92?c:d}function c(h){return h===91||h===92||h===93?(e.consume(h),r++,d):d(h)}function g(h){return h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),a.includes(l)||a.push(l),$(e,k,"gfmFootnoteDefinitionWhitespace")):t(h)}function k(h){return n(h)}}function Kr(e,n,t){return e.check(Wt,n,e.attempt($r,n,t))}function Gr(e){e.exit("gfmFootnoteDefinition")}function Qr(e,n,t){const i=this;return $(e,a,"gfmFootnoteDefinitionIndent",5);function a(l){const r=i.events[i.events.length-1];return r&&r[1].type==="gfmFootnoteDefinitionIndent"&&r[2].sliceSerialize(r[1],!0).length===4?n(l):t(l)}}function Yr(e){let t=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:l,resolveAll:a};return t==null&&(t=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function a(r,u){let o=-1;for(;++o<r.length;)if(r[o][0]==="enter"&&r[o][1].type==="strikethroughSequenceTemporary"&&r[o][1]._close){let s=o;for(;s--;)if(r[s][0]==="exit"&&r[s][1].type==="strikethroughSequenceTemporary"&&r[s][1]._open&&r[o][1].end.offset-r[o][1].start.offset===r[s][1].end.offset-r[s][1].start.offset){r[o][1].type="strikethroughSequence",r[s][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},r[s][1].start),end:Object.assign({},r[o][1].end)},c={type:"strikethroughText",start:Object.assign({},r[s][1].end),end:Object.assign({},r[o][1].start)},g=[["enter",d,u],["enter",r[s][1],u],["exit",r[s][1],u],["enter",c,u]],k=u.parser.constructs.insideSpan.null;k&&ge(g,g.length,0,qt(k,r.slice(s+1,o),u)),ge(g,g.length,0,[["exit",c,u],["enter",r[o][1],u],["exit",r[o][1],u],["exit",d,u]]),ge(r,s-1,o-s+3,g),o=s+g.length-2;break}}for(o=-1;++o<r.length;)r[o][1].type==="strikethroughSequenceTemporary"&&(r[o][1].type="data");return r}function l(r,u,o){const s=this.previous,d=this.events;let c=0;return g;function g(h){return s===126&&d[d.length-1][1].type!=="characterEscape"?o(h):(r.enter("strikethroughSequenceTemporary"),k(h))}function k(h){const x=ue(s);if(h===126)return c>1?o(h):(r.consume(h),c++,k);if(c<2&&!t)return o(h);const E=r.exit("strikethroughSequenceTemporary"),v=ue(h);return E._open=!v||v===2&&!!x,E._close=!x||x===2&&!!v,u(h)}}}class Jr{constructor(){this.map=[]}add(n,t,i){Ur(this,n,t,i)}consume(n){if(this.map.sort(function(l,r){return l[0]-r[0]}),this.map.length===0)return;let t=this.map.length;const i=[];for(;t>0;)t-=1,i.push(n.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),n.length=this.map[t][0];i.push(n.slice()),n.length=0;let a=i.pop();for(;a;){for(const l of a)n.push(l);a=i.pop()}this.map.length=0}}function Ur(e,n,t,i){let a=0;if(!(t===0&&i.length===0)){for(;a<e.map.length;){if(e.map[a][0]===n){e.map[a][1]+=t,e.map[a][2].push(...i);return}a+=1}e.map.push([n,t,i])}}function Zr(e,n){let t=!1;const i=[];for(;n<e.length;){const a=e[n];if(t){if(a[0]==="enter")a[1].type==="tableContent"&&i.push(e[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[n-1][1].type==="tableDelimiterMarker"){const l=i.length-1;i[l]=i[l]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(t=!0);n+=1}return i}function Xr(){return{flow:{null:{name:"table",tokenize:ei,resolveAll:ti}}}}function ei(e,n,t){const i=this;let a=0,l=0,r;return u;function u(p){let A=i.events.length-1;for(;A>-1;){const Q=i.events[A][1].type;if(Q==="lineEnding"||Q==="linePrefix")A--;else break}const X=A>-1?i.events[A][1].type:null,oe=X==="tableHead"||X==="tableRow"?T:o;return oe===T&&i.parser.lazy[i.now().line]?t(p):oe(p)}function o(p){return e.enter("tableHead"),e.enter("tableRow"),s(p)}function s(p){return p===124||(r=!0,l+=1),d(p)}function d(p){return p===null?t(p):te(p)?l>1?(l=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),k):t(p):Y(p)?$(e,d,"whitespace")(p):(l+=1,r&&(r=!1,a+=1),p===124?(e.enter("tableCellDivider"),e.consume(p),e.exit("tableCellDivider"),r=!0,d):(e.enter("data"),c(p)))}function c(p){return p===null||p===124||D(p)?(e.exit("data"),d(p)):(e.consume(p),p===92?g:c)}function g(p){return p===92||p===124?(e.consume(p),c):c(p)}function k(p){return i.interrupt=!1,i.parser.lazy[i.now().line]?t(p):(e.enter("tableDelimiterRow"),r=!1,Y(p)?$(e,h,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(p):h(p))}function h(p){return p===45||p===58?E(p):p===124?(r=!0,e.enter("tableCellDivider"),e.consume(p),e.exit("tableCellDivider"),x):z(p)}function x(p){return Y(p)?$(e,E,"whitespace")(p):E(p)}function E(p){return p===58?(l+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(p),e.exit("tableDelimiterMarker"),v):p===45?(l+=1,v(p)):p===null||te(p)?I(p):z(p)}function v(p){return p===45?(e.enter("tableDelimiterFiller"),C(p)):z(p)}function C(p){return p===45?(e.consume(p),C):p===58?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(p),e.exit("tableDelimiterMarker"),_):(e.exit("tableDelimiterFiller"),_(p))}function _(p){return Y(p)?$(e,I,"whitespace")(p):I(p)}function I(p){return p===124?h(p):p===null||te(p)?!r||a!==l?z(p):(e.exit("tableDelimiterRow"),e.exit("tableHead"),n(p)):z(p)}function z(p){return t(p)}function T(p){return e.enter("tableRow"),W(p)}function W(p){return p===124?(e.enter("tableCellDivider"),e.consume(p),e.exit("tableCellDivider"),W):p===null||te(p)?(e.exit("tableRow"),n(p)):Y(p)?$(e,W,"whitespace")(p):(e.enter("data"),G(p))}function G(p){return p===null||p===124||D(p)?(e.exit("data"),W(p)):(e.consume(p),p===92?q:G)}function q(p){return p===92||p===124?(e.consume(p),G):G(p)}}function ti(e,n){let t=-1,i=!0,a=0,l=[0,0,0,0],r=[0,0,0,0],u=!1,o=0,s,d,c;const g=new Jr;for(;++t<e.length;){const k=e[t],h=k[1];k[0]==="enter"?h.type==="tableHead"?(u=!1,o!==0&&(Ue(g,n,o,s,d),d=void 0,o=0),s={type:"table",start:Object.assign({},h.start),end:Object.assign({},h.end)},g.add(t,0,[["enter",s,n]])):h.type==="tableRow"||h.type==="tableDelimiterRow"?(i=!0,c=void 0,l=[0,0,0,0],r=[0,t+1,0,0],u&&(u=!1,d={type:"tableBody",start:Object.assign({},h.start),end:Object.assign({},h.end)},g.add(t,0,[["enter",d,n]])),a=h.type==="tableDelimiterRow"?2:d?3:1):a&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")?(i=!1,r[2]===0&&(l[1]!==0&&(r[0]=r[1],c=se(g,n,l,a,void 0,c),l=[0,0,0,0]),r[2]=t)):h.type==="tableCellDivider"&&(i?i=!1:(l[1]!==0&&(r[0]=r[1],c=se(g,n,l,a,void 0,c)),l=r,r=[l[1],t,0,0])):h.type==="tableHead"?(u=!0,o=t):h.type==="tableRow"||h.type==="tableDelimiterRow"?(o=t,l[1]!==0?(r[0]=r[1],c=se(g,n,l,a,t,c)):r[1]!==0&&(c=se(g,n,r,a,t,c)),a=0):a&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")&&(r[3]=t)}for(o!==0&&Ue(g,n,o,s,d),g.consume(n.events),t=-1;++t<n.events.length;){const k=n.events[t];k[0]==="enter"&&k[1].type==="table"&&(k[1]._align=Zr(n.events,t))}return e}function se(e,n,t,i,a,l){const r=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",u="tableContent";t[0]!==0&&(l.end=Object.assign({},J(n.events,t[0])),e.add(t[0],0,[["exit",l,n]]));const o=J(n.events,t[1]);if(l={type:r,start:Object.assign({},o),end:Object.assign({},o)},e.add(t[1],0,[["enter",l,n]]),t[2]!==0){const s=J(n.events,t[2]),d=J(n.events,t[3]),c={type:u,start:Object.assign({},s),end:Object.assign({},d)};if(e.add(t[2],0,[["enter",c,n]]),i!==2){const g=n.events[t[2]],k=n.events[t[3]];if(g[1].end=Object.assign({},k[1].end),g[1].type="chunkText",g[1].contentType="text",t[3]>t[2]+1){const h=t[2]+1,x=t[3]-t[2]-1;e.add(h,x,[])}}e.add(t[3]+1,0,[["exit",c,n]])}return a!==void 0&&(l.end=Object.assign({},J(n.events,a)),e.add(a,0,[["exit",l,n]]),l=void 0),l}function Ue(e,n,t,i,a){const l=[],r=J(n.events,t);a&&(a.end=Object.assign({},r),l.push(["exit",a,n])),i.end=Object.assign({},r),l.push(["exit",i,n]),e.add(t+1,0,l)}function J(e,n){const t=e[n],i=t[0]==="enter"?"start":"end";return t[1][i]}const ni={name:"tasklistCheck",tokenize:ii};function ri(){return{text:{91:ni}}}function ii(e,n,t){const i=this;return a;function a(o){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?t(o):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(o),e.exit("taskListCheckMarker"),l)}function l(o){return D(o)?(e.enter("taskListCheckValueUnchecked"),e.consume(o),e.exit("taskListCheckValueUnchecked"),r):o===88||o===120?(e.enter("taskListCheckValueChecked"),e.consume(o),e.exit("taskListCheckValueChecked"),r):t(o)}function r(o){return o===93?(e.enter("taskListCheckMarker"),e.consume(o),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):t(o)}function u(o){return te(o)?n(o):Y(o)?e.check({tokenize:oi},n,t)(o):t(o)}}function oi(e,n,t){return $(e,i,"whitespace");function i(a){return a===null?t(a):n(a)}}function ai(e){return Ht([Lr(),Wr(),Yr(e),Xr(),ri()])}const li={};function si(e){const n=this,t=e||li,i=n.data(),a=i.micromarkExtensions||(i.micromarkExtensions=[]),l=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),r=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);a.push(ai(t)),l.push(Ir()),r.push(Tr(t))}const ui=w.lazy(()=>F(()=>import("./ReactionPicker-C0-TSIhI.js"),__vite__mapDeps([0,1,2]),import.meta.url)),ci=w.lazy(()=>F(()=>import("./LinkPreview-7uIVFHtf.js"),__vite__mapDeps([3,1,2]),import.meta.url)),Ze=w.lazy(()=>F(()=>import("./CodeBlock-BcfDYl5g.js"),__vite__mapDeps([4,1,2,5,6]),import.meta.url)),fi=w.lazy(()=>F(()=>import("./Spoiler-SdeCTbbg.js"),__vite__mapDeps([7,1,2]),import.meta.url)),ve=w.lazy(()=>F(()=>import("./VoiceMessagePlayer-Dwz1JwnB.js"),__vite__mapDeps([8,1,2]),import.meta.url)),pi=w.lazy(()=>F(()=>import("./TicTacToe-BA8pfD8U.js"),__vite__mapDeps([9,1,2]),import.meta.url)),mi=w.lazy(()=>F(()=>import("./BookmarkButton-DRRYoYA7.js"),__vite__mapDeps([10,1,2]),import.meta.url).then(e=>({default:e.BookmarkButton}))),di=w.lazy(()=>F(()=>import("./BookmarkButton-DRRYoYA7.js"),__vite__mapDeps([10,1,2]),import.meta.url).then(e=>({default:e.StarButton}))),hi=w.lazy(()=>F(()=>import("./BookmarkButton-DRRYoYA7.js"),__vite__mapDeps([10,1,2]),import.meta.url).then(e=>({default:e.ReadLaterButton}))),gi=w.lazy(()=>F(()=>import("./ReminderModal-BB-HlM80.js"),__vite__mapDeps([11,1,2,5,6]),import.meta.url)),bi=w.lazy(()=>F(()=>import("./MessageThreads-DM2Nfd9z.js"),__vite__mapDeps([12,1,2,5,6]),import.meta.url));w.lazy(()=>F(()=>import("./GameMessage-DjdzGW4_.js"),__vite__mapDeps([13,1,2]),import.meta.url));const ki=w.memo(({src:e,style:n})=>{const t=w.useRef(null),[i,a]=w.useState(!1);return w.useEffect(()=>{const l=new IntersectionObserver(([r])=>{r.isIntersecting&&(a(!0),l.disconnect())},{threshold:.2});return t.current&&l.observe(t.current),()=>{t.current&&l.unobserve(t.current)}},[]),f.createElement("div",{ref:t,style:{minHeight:"200px",...n,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"}},i?f.createElement("video",{controls:!0,preload:"metadata",src:e,style:n},"TarayÄ±cÄ±nÄ±z video oynatmayÄ± desteklemiyor.",f.createElement("a",{href:e,download:!0},"Ä°ndir")):f.createElement("span",{style:{color:"#aaa"}},"Video YÃ¼kleniyor..."))}),xi=w.memo(({children:e,minHeight:n=60})=>{const t=w.useRef(null),[i,a]=w.useState(!1);return w.useEffect(()=>{const l=new IntersectionObserver(([r])=>{r.isIntersecting&&(a(!0),l.disconnect())},{threshold:.1});return t.current&&l.observe(t.current),()=>l.disconnect()},[]),f.createElement("div",{ref:t,style:{minHeight:n}},i?e:null)}),yi=({messageId:e,messageEditHistoryUrl:n,fetchWithAuth:t})=>{const[i,a]=w.useState([]),[l,r]=w.useState(!1),u=w.useRef(null);return w.useEffect(()=>{if(!l)return;(async()=>{try{const d=await t(`${n}${e}/edit_history/`);d.ok&&a(await d.json())}catch(d){console.error(d)}})();const s=d=>{u.current&&!u.current.contains(d.target)&&r(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[l,e,n,t]),f.createElement("div",{style:{position:"relative",display:"inline-block",marginLeft:"5px"},ref:u},f.createElement("span",{onClick:o=>{o.stopPropagation(),r(!l)},style:{fontSize:"0.7em",color:"#72767d",cursor:"pointer",textDecoration:"underline"}},"(dÃ¼zenlendi)"),l&&f.createElement("div",{style:b.historyDropdown},f.createElement("h4",{style:b.historyHeader},"GeÃ§miÅŸ (",i.length,")"),f.createElement("div",{style:{maxHeight:"200px",overflowY:"auto"}},i.map((o,s)=>f.createElement("div",{key:s,style:b.historyItem},f.createElement("small",null,new Date(o.edited_at).toLocaleString()),f.createElement("div",null,f.createElement("del",null,o.old_content)))))))},wi=e=>{if(!e)return"";const n=new Date(e),t=new Date;return n.toDateString()===t.toDateString()?n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):n.toLocaleString([],{hour:"2-digit",minute:"2-digit"})},vi=({msg:e,currentUser:n,isAdmin:t,onDelete:i,onStartEdit:a,onToggleReaction:l,onTogglePin:r,onSetReply:u,onImageClick:o,absoluteHostUrl:s,onScrollToMessage:d,onVisible:c,messageEditHistoryUrl:g,onViewProfile:k,onStartForward:h,fetchWithAuth:x,isSelectionMode:E,isSelected:v,onToggleSelection:C,allUsers:_,getDeterministicAvatar:I,onShowChart:z,onContentLoad:T})=>{if(!e||typeof e!="object"||!e.id)return console.warn("âš ï¸ [Message] Invalid message data:",e),null;const W=He(m=>m.encryptionKeys),G=He(m=>m.currentPermissions),[q,p]=w.useState(e.transcription||null),[A,X]=w.useState(!1),[oe,Q]=w.useState(!1),[_t,fe]=w.useState(!1),[ee,L]=w.useState(null),St=w.useCallback(async()=>{try{if((await x(`${s}/messages/${e.id}/quote/`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok){const y=e.content||"",S=`> ${e.username} said:
> ${y.split(`
`).join(`
> `)}

`;u({...e,quotedText:S}),O.success("Message quoted!")}else O.error("Failed to quote message")}catch(m){console.error("Quote error:",m),O.error("Failed to quote message")}},[e,s,x,u]),P=e.username===n,It=["Pawscord AI","PawPaw AI","âš¡ Signal Bot"].includes(e.username),pe=w.useRef(null),[ze,De]=w.useState(!1),[Tt,ae]=w.useState(!1),zt=w.useCallback(m=>{m.preventDefault(),L({x:m.clientX,y:m.clientY})},[]);w.useEffect(()=>{const m=()=>L(null);if(ee)return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[ee]),w.useEffect(()=>{if(!c||P||e.read_by?.includes(n))return;const m=new IntersectionObserver(([y])=>{y.isIntersecting&&(c(e.id),m.disconnect())},{threshold:.8});return pe.current&&m.observe(pe.current),()=>m.disconnect()},[e.id,P,e.read_by,c,n]);const H=w.useMemo(()=>{if(!e.content)return"";if(Ne(e.content)){const m=e.room?`room-${e.room}`:e.conversation?`dm-${e.conversation}`:null,y=W[m];return y?Zt(e.content,y):"ðŸ”’ Bu mesaj ÅŸifreli. Okumak iÃ§in anahtarÄ± girin."}return e.content},[e.content,e.room,e.conversation,W]),Dt=Ne(e.content),Lt=w.useMemo(()=>{let m=e.avatar;return m||(m=_?.find(S=>S.username===e.username)?.avatar),m||(m=I(e.username)),m&&m.includes("ui-avatars.com")||m&&!m.startsWith("http")&&!m.startsWith("blob:")&&(m=`${s.replace(/\/$/,"")}/${m.replace(/^\//,"")}`),m},[e.avatar,e.username,_,I,s]),{url:Rt}=Ut(Lt),Le=m=>{if(!m)return null;if(m.startsWith("http")||m.startsWith("blob:"))return m;let y=`${s.replace(/\/$/,"")}/${m.replace(/^\//,"")}`;if(y.includes("/media/local/stream/")){const S=localStorage.getItem("access_token");S&&(y+=(y.includes("?")?"&":"?")+`token=${S}`)}return y},me=Le(e.image_url||e.image),N=Le(e.file_url||e.file),Re=w.useMemo(()=>{if(!N||me)return!1;const m=(e.file_name||"").toLowerCase();return["jpg","jpeg","png","gif","webp","bmp","svg","ico"].some(S=>m.endsWith(`.${S}`))},[N,me,e.file_name]),de=me||(Re?N:null),V=Re?null:N,he=w.useMemo(()=>{if(e.username==="âš¡ Signal Bot"&&H){const m=H.match(/\*\*(.*?)\*\*/);if(m&&m[1])return m[1]}return null},[e.username,H]),Fe=w.useMemo(()=>{if(!e.reactions)return[];const m={};return e.reactions.forEach(y=>{m[y.emoji]||(m[y.emoji]=[]),m[y.emoji].push(y.username)}),Object.entries(m||{}).map(([y,S])=>({emoji:y,users:S,count:S.length}))},[e.reactions]),Ft=w.useCallback(m=>e.reactions?.some(y=>y.username===n&&y.emoji===m),[e.reactions,n]),At=w.useCallback(async m=>{if(e.poll)try{await x(`${s}/api/polls/${e.poll.id}/vote/`,{method:"POST",body:JSON.stringify({option_id:m})})}catch(y){console.error("Oy hatasÄ±:",y)}},[e.poll,x,s]),Mt=w.useCallback(async()=>{if(!(A||q)){X(!0);try{const m=await x(`${s}/api/messages/${e.id}/transcribe/`,{method:"POST"});if(m.ok){const y=await m.json();y.transcription?p(y.transcription):O.error("âŒ Ã‡eviri boÅŸ dÃ¶ndÃ¼.")}else{const y=await m.json();O.error(`âŒ Ã‡eviri hatasÄ±: ${y.error||"Bilinmeyen hata"}`)}}catch(m){console.error("Transcription error:",m),O.error("âŒ Ses metne Ã§evrilemedi. LÃ¼tfen tekrar deneyin.")}finally{X(!1)}}},[A,q,x,s,e.id]);return f.createElement("div",{ref:pe,style:{...b.chatMessage,backgroundColor:v?"rgba(88, 101, 242, 0.3)":ze?"rgba(4, 4, 5, 0.07)":"transparent",cursor:E?"pointer":"default"},onMouseEnter:()=>De(!0),onMouseLeave:()=>{De(!1),ae(!1)},onContextMenu:zt,id:`message-${e.id}`,onClick:()=>E&&C(e.id)},f.createElement("div",{style:b.avatarContainer},f.createElement(Jt,{src:Rt,alt:e.username,style:b.userAvatar,onClick:()=>k(e.username),placeholder:I(e.username)})),f.createElement("div",{style:b.contentWrapper},e.reply_to&&f.createElement("div",{style:b.replyContainer,onClick:()=>d(e.reply_to.id)},f.createElement("div",{style:b.replyLine}),f.createElement("span",{style:{fontWeight:"bold",marginRight:5}},"@",e.reply_to.username),f.createElement("span",{style:{opacity:.7,fontSize:"0.9em"}},e.reply_to.content?e.reply_to.content.substring(0,50)+"...":"Bir dosya")),f.createElement("div",{style:b.messageHeader},f.createElement("strong",{style:{cursor:"pointer",color:e.username==="âš¡ Signal Bot"?"#5865f2":t?"#f0b232":"#fff"},onClick:()=>k(e.username)},It&&"ðŸ¤– "," ",e.username),e.is_locked&&f.createElement(Ae,{style:{marginLeft:8,color:"#f0b232",fontSize:"0.9em"},title:"Locked by moderator - Cannot be edited or deleted"}),f.createElement("span",{style:b.timestamp},wi(e.timestamp),e.is_edited&&f.createElement(yi,{messageId:e.id,messageEditHistoryUrl:g,fetchWithAuth:x}),e.is_pinned&&f.createElement(be,{style:{marginLeft:5,color:"#f0b232",fontSize:"0.8em"}}))),ze&&!e.temp_id&&!E&&f.createElement("div",{style:b.messageActions},Tt&&f.createElement(ui,{onEmojiSelect:m=>l(e.id,m),onClose:()=>ae(!1)}),f.createElement("button",{onClick:()=>ae(!0),style:b.actionButton,title:"Tepki"},f.createElement(Me,null)),f.createElement("button",{onClick:()=>u(e),style:b.actionButton,title:"YanÄ±tla"},f.createElement(Pe,null)),f.createElement("button",{onClick:St,style:b.actionButton,title:"AlÄ±ntÄ±la"},f.createElement(Nt,null)),f.createElement("button",{onClick:()=>C(e.id),style:b.actionButton,title:"SeÃ§"},f.createElement(Vt,null)),f.createElement("button",{onClick:()=>h(e),style:b.actionButton,title:"Ä°let"},f.createElement(Be,null)),f.createElement(mi,{messageId:e.id,isBookmarked:e.is_bookmarked,fetchWithAuth:x,apiBaseUrl:s}),f.createElement(di,{messageId:e.id,isStarred:e.is_starred,fetchWithAuth:x,apiBaseUrl:s}),f.createElement(hi,{messageId:e.id,isReadLater:e.is_read_later,fetchWithAuth:x,apiBaseUrl:s}),f.createElement("button",{onClick:()=>Q(!0),style:b.actionButton,title:"HatÄ±rlatÄ±cÄ± Kur"},f.createElement(Oe,null)),f.createElement("button",{onClick:()=>fe(!0),style:b.actionButton,title:"Thread BaÅŸlat"},f.createElement(je,null)),!P&&f.createElement("button",{onClick:async()=>{const m=prompt("Rapor sebebi:");m&&(await x(`${s}/api/messages/report/`,{method:"POST",body:JSON.stringify({message_id:e.id,reason:m})}),O.success("âœ… Rapor gÃ¶nderildi"))},style:b.actionButton,title:"Rapor Et"},f.createElement($e,null)),P&&e.content&&f.createElement("button",{onClick:()=>a(e),style:b.actionButton,title:"DÃ¼zenle"},f.createElement(We,null)),(P||t||G.can_delete_messages)&&f.createElement("button",{onClick:()=>i(e.id),style:b.actionButton,title:"Sil"},f.createElement(qe,null)),t&&e.room&&f.createElement("button",{onClick:()=>r(e.id),style:b.actionButton,title:"Sabitle"},f.createElement(be,null))),oe&&f.createElement(gi,{messageId:e.id,messageContent:H,onClose:()=>Q(!1),fetchWithAuth:x,apiBaseUrl:s}),_t&&f.createElement(bi,{messageId:e.id,onClose:()=>fe(!1),fetchWithAuth:x,apiBaseUrl:s}),ee&&f.createElement("div",{style:{...b.contextMenu,left:`${ee.x}px`,top:`${ee.y}px`},onClick:m=>m.stopPropagation()},f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{ae(!0),L(null)}},f.createElement(Me,null)," Tepki Ekle"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{u(e),L(null)}},f.createElement(Pe,null)," YanÄ±tla"),P&&e.content&&f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{a(e),L(null)}},f.createElement(We,null)," DÃ¼zenle"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{navigator.clipboard.writeText(H),O.success("âœ… Mesaj kopyalandÄ±"),L(null)}},f.createElement(Kt,null)," MesajÄ± Kopyala"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:async()=>{await r(e.id),L(null)}},f.createElement(be,null)," ",e.is_pinned?"Sabitlemeyi KaldÄ±r":"Sabitle"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{h(e),L(null)}},f.createElement(Be,null)," Ä°let"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{fe(!0),L(null)}},f.createElement(je,null)," Thread BaÅŸlat"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{Q(!0),L(null)}},f.createElement(Oe,null)," HatÄ±rlatÄ±cÄ± Kur"),f.createElement("div",{style:b.contextMenuDivider}),P&&f.createElement("div",{className:"context-menu-item danger",style:{...b.contextMenuItem,color:"#ed4245"},onClick:async()=>{window.confirm("Bu mesajÄ± silmek istediÄŸinize emin misiniz?")&&(await i(e.id),L(null))}},f.createElement(qe,null)," Sil"),!P&&f.createElement("div",{className:"context-menu-item danger",style:{...b.contextMenuItem,color:"#ed4245"},onClick:async()=>{const m=prompt("Rapor sebebi:");m&&(await x(`${s}/api/messages/report/`,{method:"POST",body:JSON.stringify({message_id:e.id,reason:m})}),O.success("âœ… Rapor gÃ¶nderildi"),L(null))}},f.createElement($e,null)," Rapor Et")),e.snippet_data&&e.snippet_data.type==="game_xox"?f.createElement(w.Suspense,{fallback:f.createElement("div",{style:{padding:"12px",color:"#b9bbbe",fontSize:"0.9em"}},"ðŸŽ® Oyun yÃ¼kleniyor...")},f.createElement(pi,{gameData:e.snippet_data,currentUser:n,onMove:(m,y)=>{x(`${s}/api/games/xox/move/`,{method:"POST",body:JSON.stringify({game_id:m,index:y})})}})):e.snippet_data?f.createElement("div",{style:b.snippetContainer},f.createElement("div",{style:b.snippetHeader},f.createElement("span",null,"ðŸ’» ",e.snippet_data.title||"Kod ParÃ§asÄ±"),f.createElement("span",{style:b.langBadge},e.snippet_data.language)),f.createElement(Ze,{language:e.snippet_data.language},e.snippet_data.code)):H&&f.createElement("div",{style:b.messageContent},Dt&&f.createElement("span",{style:{color:"#43b581",marginRight:5},title:"UÃ§tan Uca Åžifreli"},f.createElement(Ae,null)),f.createElement(Gt,{remarkPlugins:[si],components:{code({node:m,inline:y,className:S,children:B,...R}){return y?f.createElement("code",{className:S,style:b.inlineCode,...R},B):f.createElement(Ze,{language:S?.replace("language-",""),value:B})},p:({children:m})=>{const y=f.Children.toArray(m);return f.createElement("p",{style:{margin:0}},y.map((S,B)=>typeof S=="string"?S.split(/(\|\|.*?\|\|)/g).map((le,Pt)=>le.startsWith("||")&&le.endsWith("||")?f.createElement(fi,{key:`${B}-${Pt}`},le.slice(2,-2)):le):S))}}},H)),he&&f.createElement("button",{onClick:()=>z(he),style:b.chartBtn},f.createElement(Qt,null)," ",he," GrafiÄŸi"),e.link_preview_data&&f.createElement(xi,{minHeight:80},f.createElement(ci,{data:e.link_preview_data})),e.poll&&f.createElement("div",{style:b.pollContainer},f.createElement("h4",{style:{marginTop:0,marginBottom:10}},e.poll.question),f.createElement("div",{style:{fontSize:"0.8em",color:"#b9bbbe",marginBottom:8}},e.poll.allow_multiple_votes?"Ã‡oklu SeÃ§im":"Tek SeÃ§im"," â€¢ ",e.poll.total_votes||0," Oy"),e.poll.options.map(m=>{const y=m.is_voted,S=e.poll.total_votes||0,B=S>0?Math.round(m.vote_count/S*100):0;return f.createElement("div",{key:m.id,style:{position:"relative",marginBottom:6}},f.createElement("button",{onClick:()=>At(m.id),style:{...b.pollOption,backgroundColor:y?"#4752c4":"rgba(255,255,255,0.05)",border:y?"1px solid #5865f2":"1px solid transparent",justifyContent:"space-between",display:"flex",alignItems:"center",position:"relative",zIndex:2,width:"100%",overflow:"hidden",padding:"10px 12px"}},f.createElement("span",{style:{zIndex:3,textShadow:"0 1px 2px rgba(0,0,0,0.5)"}},m.text),f.createElement("span",{style:{zIndex:3,fontWeight:"bold"}},m.vote_count," (",B,"%)"),f.createElement("div",{style:{position:"absolute",top:0,left:0,bottom:0,width:`${B}%`,backgroundColor:y?"rgba(255,255,255,0.2)":"rgba(88, 101, 242, 0.3)",zIndex:1,transition:"width 0.3s ease"}})))}),e.poll.expires_at&&f.createElement("div",{style:{fontSize:"0.75em",color:"#72767d",marginTop:5}},"BitiÅŸ: ",new Date(e.poll.expires_at).toLocaleString())),de&&f.createElement("img",{src:de,alt:"attachment",style:b.messageImage,onClick:()=>o(de),loading:"lazy",onLoad:T}),e.is_voice_message&&N&&f.createElement(w.Suspense,{fallback:f.createElement("div",{style:{padding:"12px",color:"#72767d",fontSize:"13px"}},"ðŸŽµ Ses yÃ¼kleniyor...")},f.createElement("div",null,f.createElement(ve,{audioUrl:N,duration:e.voice_duration||0,onDownload:()=>{const m=document.createElement("a");m.href=N,m.download=e.file_name||`voice-${Date.now()}.webm`,m.click()}}),q&&f.createElement("div",{style:b.voiceTranscription},f.createElement("div",{style:b.transcriptionIcon},"ðŸ’¬"),f.createElement("div",{style:b.transcriptionText},q)),!q&&!A&&f.createElement("button",{onClick:Mt,style:b.transcribeButton},"ðŸ“ Metne Ã‡evir"),A&&f.createElement("div",{style:b.transcribingLoader},"â³ Ã‡evriliyor..."))),V&&!e.is_voice_message&&(()=>{const m=(e.file_name||"").split(".").pop().toLowerCase(),y=(e.file_name||"").toLowerCase();if((y.startsWith("voice_")||y.startsWith("voice-"))&&m==="webm")return f.createElement(ve,{audioUrl:V,duration:e.voice_duration||0,onDownload:()=>{const R=document.createElement("a");R.href=V,R.download=e.file_name||`voice-${Date.now()}.webm`,R.click()}});if(["mp4","mov","mkv"].includes(m)||m==="webm"&&!y.startsWith("voice_")&&!y.startsWith("voice-"))return f.createElement(ki,{src:V,style:b.messageVideo});if(["mp3","wav","ogg"].includes(m))return f.createElement(ve,{audioUrl:V,duration:0,onDownload:()=>{const R=document.createElement("a");R.href=V,R.download=e.file_name||`audio-${Date.now()}.${m}`,R.click()}});const S=m.toUpperCase(),B=e.file_size?`(${(e.file_size/1024/1024).toFixed(2)} MB)`:"";return f.createElement("div",{style:b.fileAttachment,className:"file-attachment-hover"},f.createElement("div",{style:b.fileIcon},["zip","rar","7z","tar","gz"].includes(m)?"ðŸ“¦":["pdf"].includes(m)?"ðŸ“„":["doc","docx"].includes(m)?"ðŸ“":["xls","xlsx"].includes(m)?"ðŸ“Š":["ppt","pptx"].includes(m)?"ðŸ“½ï¸":["txt"].includes(m)?"ðŸ“ƒ":"ðŸ“Ž"),f.createElement("div",{style:b.fileInfo},f.createElement("div",{style:b.fileName},e.file_name||"Dosya"),f.createElement("div",{style:b.fileDetails},S," ",B)),f.createElement("a",{href:V,download:e.file_name,style:b.downloadButton,className:"download-button-hover",onClick:R=>R.stopPropagation()},f.createElement(Yt,{size:18}),f.createElement("span",{style:{marginLeft:"6px"}},"Ä°ndir")))})(),f.createElement("div",{style:b.footerRow},Fe.length>0&&f.createElement("div",{style:b.reactionsRow},Fe.map(({emoji:m,count:y})=>f.createElement("span",{key:m,onClick:()=>l(e.id,m),style:{...b.reactionTag,border:Ft(m)?"1px solid #5865f2":"1px solid transparent"}},m," ",y))),P&&!e.temp_id&&f.createElement("span",{style:b.readReceipt,title:"Ä°letildi"},"âœ“"))))},b={chatMessage:{display:"flex",padding:"8px 20px",marginBottom:"2px",position:"relative",transition:"background-color 0.1s ease",width:"100%",boxSizing:"border-box",borderRadius:"0"},avatarContainer:{marginTop:"4px",marginRight:"16px",flexShrink:0},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},messageHeader:{display:"flex",alignItems:"baseline",marginBottom:"4px",gap:"8px"},timestamp:{fontSize:"0.75rem",color:"#949ba4",fontWeight:"400"},messageContent:{color:"#dbdee1",fontSize:"1rem",lineHeight:"1.4rem",whiteSpace:"pre-wrap",wordBreak:"break-word",fontWeight:"400"},contentWrapper:{flex:1,minWidth:0,maxWidth:"100%"},messageActions:{position:"absolute",top:"-10px",right:"10px",backgroundColor:"#313338",borderRadius:"8px",padding:"4px",display:"flex",gap:"4px",border:"1px solid rgba(255,255,255,0.08)",zIndex:50,boxShadow:"0 4px 10px rgba(0,0,0,0.3)"},actionButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em",padding:"6px",display:"flex",borderRadius:"4px",transition:"all 0.1s"},inlineCode:{backgroundColor:"#2b2d31",padding:"2px 4px",borderRadius:"3px",fontFamily:"'Consolas', monospace",fontSize:"0.85em",border:"1px solid rgba(255,255,255,0.05)"},messageImage:{maxWidth:"min(300px, 70%)",maxHeight:"250px",width:"auto",height:"auto",display:"block",objectFit:"cover",borderRadius:"8px",marginTop:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},messageVideo:{maxWidth:"min(400px, 80%)",maxHeight:"300px",width:"auto",height:"auto",borderRadius:"8px",marginTop:"8px",backgroundColor:"black"},fileAttachment:{display:"flex",alignItems:"center",padding:"14px 16px",backgroundColor:"#2b2d31",borderRadius:"8px",marginTop:"8px",border:"1px solid #3a3d44",maxWidth:"450px",transition:"all 0.2s ease",cursor:"default"},fileIcon:{fontSize:"32px",marginRight:"12px",flexShrink:0},fileInfo:{flex:1,minWidth:0,marginRight:"12px"},fileName:{color:"#f2f3f5",fontSize:"14px",fontWeight:"500",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},fileDetails:{color:"#b9bbbe",fontSize:"12px"},downloadButton:{display:"flex",alignItems:"center",padding:"8px 14px",backgroundColor:"#5865f2",color:"white",borderRadius:"6px",textDecoration:"none",fontSize:"13px",fontWeight:"600",transition:"all 0.2s ease",border:"none",cursor:"pointer",flexShrink:0},reactionsRow:{display:"flex",gap:"4px",marginTop:"6px",flexWrap:"wrap"},reactionTag:{backgroundColor:"#2b2d31",padding:"4px 8px",borderRadius:"8px",fontSize:"0.85em",cursor:"pointer",color:"#b9bbbe",border:"1px solid transparent",display:"flex",alignItems:"center",gap:"4px"},footerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"4px",minHeight:"20px"},readReceipt:{fontSize:"0.75em",color:"#b9bbbe",marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px"},replyContainer:{display:"flex",alignItems:"center",fontSize:"0.85em",color:"#b9bbbe",marginBottom:"4px",opacity:.8},replyLine:{width:"30px",borderTop:"2px solid #4f545c",borderLeft:"2px solid #4f545c",height:"10px",marginRight:"8px",borderTopLeftRadius:"6px",marginTop:"6px"},historyDropdown:{position:"absolute",top:"100%",left:0,width:"280px",backgroundColor:"#1e1f22",border:"1px solid #111214",borderRadius:"8px",padding:"12px",zIndex:100,boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},historyHeader:{margin:"0 0 10px 0",fontSize:"0.9em",color:"#fff",borderBottom:"1px solid #2f3136",paddingBottom:"8px"},historyItem:{marginBottom:"12px",fontSize:"0.85em",color:"#b9bbbe",paddingBottom:"8px",borderBottom:"1px solid #2b2d31"},langBadge:{textTransform:"uppercase",fontSize:"0.7em",fontWeight:"bold",padding:"2px 4px",borderRadius:"4px",backgroundColor:"rgba(255,255,255,0.1)",marginLeft:"8px"},chartBtn:{marginTop:"5px",backgroundColor:"rgba(240, 178, 50, 0.1)",border:"1px solid #f0b232",color:"#f0b232",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.85em",display:"inline-flex",alignItems:"center",gap:"6px"},pollContainer:{marginTop:"10px",padding:"12px",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"8px",backgroundColor:"rgba(0,0,0,0.2)"},pollOption:{display:"flex",justifyContent:"space-between",width:"100%",padding:"10px",margin:"6px 0",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",textAlign:"left",backgroundColor:"rgba(255,255,255,0.05)",transition:"background 0.2s"},contextMenu:{position:"fixed",backgroundColor:"#18191c",border:"1px solid #2b2d31",borderRadius:"6px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:1e4,minWidth:"220px",overflow:"hidden",padding:"6px 0"},contextMenuItem:{padding:"10px 14px",cursor:"pointer",color:"#b5bac1",fontSize:"0.9em",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.15s",backgroundColor:"transparent"},contextMenuDivider:{height:"1px",backgroundColor:"#2b2d31",margin:"6px 0"},voiceTranscription:{display:"flex",alignItems:"flex-start",gap:"8px",marginTop:"8px",padding:"10px 12px",backgroundColor:"rgba(114, 137, 218, 0.1)",border:"1px solid rgba(114, 137, 218, 0.3)",borderRadius:"8px",maxWidth:"400px"},transcriptionIcon:{fontSize:"16px",flexShrink:0,marginTop:"2px"},transcriptionText:{flex:1,fontSize:"13px",lineHeight:"1.5",color:"#dcddde",fontStyle:"italic"},transcribeButton:{marginTop:"8px",padding:"6px 12px",backgroundColor:"rgba(88, 101, 242, 0.15)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"6px",color:"#7289da",fontSize:"12px",cursor:"pointer",transition:"all 0.2s",display:"inline-flex",alignItems:"center",gap:"6px"},transcribingLoader:{marginTop:"8px",padding:"6px 12px",color:"#72767d",fontSize:"12px",fontStyle:"italic"}},Ct=document.createElement("style");Ct.innerText=`
    .message-hover-trigger:hover { background-color: rgba(255, 255, 255, 0.03) !important; }
    .action-button:hover { background-color: rgba(255, 255, 255, 0.1); color: white; }
    .poll-option:hover { background-color: rgba(255, 255, 255, 0.1) !important; }
    .context-menu-item:hover { background-color: #5865f2 !important; color: #fff !important; }
    .context-menu-item.danger:hover { background-color: #ed4245 !important; }
    
    /* ðŸ†• File Attachment Hover Effects */
    .file-attachment-hover:hover {
        background-color: #32353b !important;
        border-color: #4e5159 !important;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .download-button-hover:hover {
        background-color: #4752c4 !important;
        transform: scale(1.05);
        box-shadow: 0 2px 8px rgba(88, 101, 242, 0.4);
    }
    .download-button-hover:active {
        transform: scale(0.98);
    }
`;document.head.appendChild(Ct);const Ei=(e,n)=>{const t=["msg","currentUser","isAdmin","isSelectionMode","isSelected"];for(const i of t)if(e[i]!==n[i])return!1;return!0},zi=w.memo(vi,Ei);export{zi as default};
