import{r as f,j as e}from"./react-core-D6cE4lil.js";import{B as C,a as w,an as S,bo as k,bp as z,g as B}from"./icons-vendor-fClA8qVL.js";import{t as a}from"./index-DHLSv4f5.js";import"./media-vendor-Du00QUHb.js";import"./router-vendor-wrB4dqw3.js";import"./state-vendor-DnurjGY_.js";import"./crypto-vendor-Drccqhv1.js";import"./ui-vendor-CZOhtEfS.js";const v=[{value:"exact",label:"Exact Match"},{value:"contains",label:"Contains"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"},{value:"regex",label:"Regex"}],R={trigger:"",response:"",match_type:"contains",case_sensitive:!1,enabled:!0},F=({fetchWithAuth:l,apiBaseUrl:i,serverId:g})=>{const[h,c]=f.useState([]),[b,p]=f.useState(!1),[y,r]=f.useState(!1),[s,u]=f.useState(R),d=async()=>{p(!0);try{const x=await(await l(`${i}/autoresponders/list/?server_id=${g}`)).json();c(x.responders||[])}catch{a.error("Failed to load auto-responders")}finally{p(!1)}};return f.useEffect(()=>{d()},[]),{responders:h,loading:b,showCreate:y,setShowCreate:r,newResponder:s,setNewResponder:u,createResponder:async()=>{if(!s.trigger.trim()||!s.response.trim()){a.error("Please enter trigger and response");return}try{await l(`${i}/autoresponders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,server_id:g})}),a.success("Auto-responder created"),u(R),r(!1),d()}catch{a.error("Failed to create auto-responder")}},toggleResponder:async(n,x)=>{try{await l(`${i}/autoresponders/${n}/toggle/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:x})}),a.success(x?"Enabled":"Disabled"),d()}catch{a.error("Failed to toggle")}},deleteResponder:async n=>{if(confirm("Delete this auto-responder?"))try{await l(`${i}/autoresponders/${n}/delete/`,{method:"DELETE"}),a.success("Auto-responder deleted"),d()}catch{a.error("Failed to delete")}}}},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px 20px",borderBottom:"1px solid #2c2f33"},count:{fontSize:"14px",color:"#dcddde"},createButton:{padding:"8px 16px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center"},createForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #2c2f33"},formRow:{marginBottom:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"6px"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},textarea:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"},select:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",cursor:"pointer"},checkboxLabel:{fontSize:"14px",color:"#dcddde"},submitButton:{width:"100%",padding:"12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},respondersList:{display:"flex",flexDirection:"column",gap:"12px"},responderCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between"},responderInfo:{flex:1},trigger:{fontSize:"14px",color:"#99aab5",marginBottom:"8px"},triggerValue:{color:"#5865f2",fontWeight:"600",fontFamily:"monospace"},response:{fontSize:"14px",color:"#ffffff",marginBottom:"8px"},meta:{fontSize:"12px",color:"#99aab5"},actions:{display:"flex",gap:"12px",alignItems:"center"},toggleButton:{background:"none",border:"none",cursor:"pointer",padding:"4px"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"8px"}},P=({fetchWithAuth:l,apiBaseUrl:i,onClose:g,serverId:h})=>{const{responders:c,loading:b,showCreate:p,setShowCreate:y,newResponder:r,setNewResponder:s,createResponder:u,toggleResponder:d,deleteResponder:m}=F({fetchWithAuth:l,apiBaseUrl:i,serverId:h});return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(C,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Auto-Responders"})]}),e.jsx("button",{onClick:g,style:t.closeButton,children:e.jsx(w,{})})]}),e.jsxs("div",{style:t.toolbar,children:[e.jsxs("div",{style:t.count,children:[c.length," auto-responders"]}),e.jsxs("button",{onClick:()=>y(!p),style:t.createButton,children:[e.jsx(S,{style:{marginRight:"6px"}}),"Create New"]})]}),p&&e.jsxs("div",{style:t.createForm,children:[e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Trigger"}),e.jsx("input",{type:"text",value:r.trigger,onChange:o=>s({...r,trigger:o.target.value}),placeholder:"hello",style:t.input})]}),e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Response"}),e.jsx("textarea",{value:r.response,onChange:o=>s({...r,response:o.target.value}),placeholder:"Hi there! How can I help you?",style:t.textarea,rows:3})]}),e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Match Type"}),e.jsx("select",{value:r.match_type,onChange:o=>s({...r,match_type:o.target.value}),style:t.select,children:v.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("label",{style:t.checkbox,children:[e.jsx("input",{type:"checkbox",checked:r.case_sensitive,onChange:o=>s({...r,case_sensitive:o.target.checked})}),e.jsx("span",{style:t.checkboxLabel,children:"Case sensitive"})]}),e.jsx("button",{onClick:u,style:t.submitButton,children:"Create Auto-Responder"})]}),e.jsx("div",{style:t.content,children:b?e.jsx("div",{style:t.loading,children:"Loading..."}):c.length===0?e.jsx("div",{style:t.empty,children:"No auto-responders configured"}):e.jsx("div",{style:t.respondersList,children:c.map((o,j)=>e.jsxs("div",{style:t.responderCard,children:[e.jsxs("div",{style:t.responderInfo,children:[e.jsxs("div",{style:t.trigger,children:["Trigger: ",e.jsx("span",{style:t.triggerValue,children:o.trigger})]}),e.jsx("div",{style:t.response,children:o.response}),e.jsxs("div",{style:t.meta,children:[v.find(n=>n.value===o.match_type)?.label,o.case_sensitive&&" • Case Sensitive"," • Uses: "+(o.usage_count||0)]})]}),e.jsxs("div",{style:t.actions,children:[e.jsx("button",{onClick:()=>d(o.id,!o.enabled),style:t.toggleButton,title:o.enabled?"Disable":"Enable",children:o.enabled?e.jsx(k,{style:{color:"#43b581",fontSize:"24px"}}):e.jsx(z,{style:{color:"#99aab5",fontSize:"24px"}})}),e.jsx("button",{onClick:()=>m(o.id),style:t.deleteButton,title:"Delete",children:e.jsx(B,{})})]})]},j))})})]})})};export{P as default};
