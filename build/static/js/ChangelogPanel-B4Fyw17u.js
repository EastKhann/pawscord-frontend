import{r as l,dd as d,cq as w,de as C,ap as S,al as _}from"./react-core-B6hadH-M.js";function x({apiBaseUrl:n,fetchWithAuth:o}){const[r,g]=l.useState([]),[c,p]=l.useState("all"),[s,E]=l.useState("all"),[R,u]=l.useState([]),[v,m]=l.useState(!1),h={new:React.createElement(_,{className:"type-icon new"}),fix:React.createElement(S,{className:"type-icon fix"}),improvement:React.createElement(C,{className:"type-icon improvement"})};l.useEffect(()=>{N(),y()},[c]);const N=async()=>{m(!0);try{const e=c==="all"?`${n}/changelog/`:`${n}/changelog/${c}/`,t=await o(e);if(t.ok){const a=await t.json();g(a.changes||[])}}catch(e){console.error("Error loading changelog:",e)}finally{m(!1)}},y=async()=>{try{const e=await o(`${n}/changelog/models/`);if(e.ok){const t=await e.json();u(t.models||[])}}catch(e){console.error("Error loading models:",e)}},i=(s==="all"?r:r.filter(e=>e.change_type===s)).reduce((e,t)=>{const a=new Date(t.created_at).toLocaleDateString();return e[a]||(e[a]=[]),e[a].push(t),e},{});return React.createElement("div",{className:"changelog-panel"},React.createElement("div",{className:"changelog-header"},React.createElement("h2",null,React.createElement(d,null)," Changelog")),React.createElement("div",{className:"changelog-filters"},React.createElement("div",{className:"filter-group"},React.createElement("label",null,"Model:"),React.createElement("select",{value:c,onChange:e=>p(e.target.value),className:"filter-select"},React.createElement("option",{value:"all"},"All Models"),R.map(e=>React.createElement("option",{key:e,value:e},e)))),React.createElement("div",{className:"filter-group"},React.createElement("label",null,"Type:"),React.createElement("select",{value:s,onChange:e=>E(e.target.value),className:"filter-select"},React.createElement("option",{value:"all"},"All Types"),React.createElement("option",{value:"new"},"New Features"),React.createElement("option",{value:"fix"},"Bug Fixes"),React.createElement("option",{value:"improvement"},"Improvements")))),React.createElement("div",{className:"changelog-timeline"},v?React.createElement("div",{className:"loading"},"Loading changelog..."):Object.keys(i).length===0?React.createElement("div",{className:"empty-changelog"},React.createElement(d,{className:"empty-icon"}),React.createElement("p",null,"No changelog entries found")):Object.entries(i).map(([e,t])=>React.createElement("div",{key:e,className:"date-group"},React.createElement("div",{className:"date-header"},React.createElement(w,null),React.createElement("h3",null,e)),React.createElement("div",{className:"changes-list"},t.map((a,f)=>React.createElement("div",{key:f,className:`change-item ${a.change_type}`},React.createElement("div",{className:"change-icon"},h[a.change_type]),React.createElement("div",{className:"change-content"},React.createElement("div",{className:"change-header"},React.createElement("span",{className:`change-badge ${a.change_type}`},a.change_type.toUpperCase()),a.model_name&&React.createElement("span",{className:"change-model"},a.model_name),a.version&&React.createElement("span",{className:"change-version"},"v",a.version)),React.createElement("div",{className:"change-description"},a.description),a.details&&React.createElement("div",{className:"change-details"},a.details)))))))))}export{x as default};
