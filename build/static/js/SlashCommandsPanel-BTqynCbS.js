var E=Object.defineProperty;var t=(o,l)=>E(o,"name",{value:l,configurable:!0});import{r as c,j as s}from"./react-core-Djgtqrmb.js";import{b6 as u,aN as F,q as H,aB as L}from"./icons-vendor-BW7dxHkX.js";function I({apiBaseUrl:o,fetchWithAuth:l}){const[h,f]=c.useState([]),[C,j]=c.useState(""),[x,y]=c.useState({}),[n,S]=c.useState(null),[i,r]=c.useState(null),[p,b]=c.useState([]),[N,m]=c.useState(!1);c.useEffect(()=>{w(),v()},[]);const w=t(async()=>{m(!0);try{const e=await l(`${o}/commands/list/`);if(e.ok){const a=await e.json();f(a.commands||[])}}catch{}finally{m(!1)}},"loadCommands"),v=t(async()=>{try{const e=await l(`${o}/commands/history/`);if(e.ok){const a=await e.json();b(a.history||[])}}catch{}},"loadHistory"),$=t(async e=>{m(!0),r(null);try{const a=await l(`${o}/commands/${e.name}/execute/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({args:x})});if(a.ok){const d=await a.json();r({success:!0,output:d.output||"Command executed successfully!"}),v()}else{const d=await a.json();r({success:!1,output:d.error||"Command failed"})}}catch(a){r({success:!1,output:"Network error: "+a.message})}finally{m(!1)}},"executeCommand"),k=t(e=>{S(e),j(`/${e.name}`),y({}),r(null)},"handleCommandSelect"),g=t(e=>({utility:"#5865f2",moderation:"#f04747",fun:"#43b581",info:"#faa61a",admin:"#7289da"})[e]||"#72767d","getCategoryColor");return s.jsxs("div",{className:"slash-commands-panel",children:[s.jsx("div",{className:"commands-header",children:s.jsxs("h2",{children:[s.jsx(u,{})," Slash Commands"]})}),s.jsxs("div",{className:"command-executor",children:[s.jsxs("div",{className:"executor-input",children:[s.jsx(u,{className:"terminal-icon"}),s.jsx("input",{type:"text",placeholder:"Type / to see available commands...",value:C,onChange:t(e=>j(e.target.value),"onChange"),className:"command-input"}),n&&s.jsxs("button",{className:"execute-btn",onClick:t(()=>$(n),"onClick"),disabled:N,children:[s.jsx(F,{})," Execute"]})]}),i&&s.jsxs("div",{className:`command-result ${i.success?"success":"error"}`,children:[s.jsx("div",{className:"result-header",children:i.success?"✅ Success":"❌ Error"}),s.jsx("div",{className:"result-output",children:i.output})]})]}),n&&n.parameters&&s.jsxs("div",{className:"command-params",children:[s.jsx("h3",{children:"Parameters:"}),n.parameters.map((e,a)=>s.jsxs("div",{className:"param-input",children:[s.jsxs("label",{children:[e.name," ",e.required&&s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:e.type==="number"?"number":"text",placeholder:e.description,value:x[e.name]||"",onChange:t(d=>y({...x,[e.name]:d.target.value}),"onChange"),className:"param-field"})]},a))]}),s.jsxs("div",{className:"commands-list",children:[s.jsxs("h3",{children:[s.jsx(H,{})," Available Commands (",h.length,")"]}),N&&h.length===0?s.jsx("div",{className:"loading",children:"Loading commands..."}):s.jsx("div",{className:"commands-grid",children:h.map((e,a)=>s.jsxs("div",{className:`command-card ${n?.name===e.name?"selected":""}`,onClick:t(()=>k(e),"onClick"),style:{borderLeftColor:g(e.category)},children:[s.jsxs("div",{className:"command-header",children:[s.jsxs("div",{className:"command-name",children:["/",e.name]}),s.jsx("div",{className:"command-category",style:{background:g(e.category)},children:e.category})]}),s.jsx("div",{className:"command-description",children:e.description}),e.usage&&s.jsx("div",{className:"command-usage",children:s.jsx("code",{children:e.usage})})]},a))})]}),s.jsxs("div",{className:"command-history",children:[s.jsxs("h3",{children:[s.jsx(L,{})," Command History"]}),p.length===0?s.jsxs("div",{className:"empty-history",children:[s.jsx(u,{className:"empty-icon"}),s.jsx("p",{children:"No commands executed yet"})]}):s.jsx("div",{className:"history-list",children:p.slice(0,10).map((e,a)=>s.jsxs("div",{className:`history-item ${e.success?"success":"error"}`,children:[s.jsxs("div",{className:"history-command",children:[s.jsx(u,{})," /",e.command]}),s.jsx("div",{className:"history-time",children:new Date(e.executed_at).toLocaleString()})]},a))})]})]})}t(I,"SlashCommandsPanel");export{I as default};
