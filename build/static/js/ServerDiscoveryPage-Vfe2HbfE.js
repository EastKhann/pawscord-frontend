import{r as n,d as e}from"./react-core-DrOm_csO.js";const z=({apiBaseUrl:s,token:y,onJoinServer:u})=>{const[c,h]=n.useState([]),[d,N]=n.useState([]),[f,E]=n.useState(!0),[t,r]=n.useState({category:"all",language:"all",size:"all",search:""}),[k]=n.useState([{value:"all",label:"ğŸŒ TÃ¼mÃ¼"},{value:"gaming",label:"ğŸ® Oyun"},{value:"music",label:"ğŸµ MÃ¼zik"},{value:"education",label:"ğŸ“š EÄŸitim"},{value:"technology",label:"ğŸ’» Teknoloji"},{value:"art",label:"ğŸ¨ Sanat"},{value:"anime",label:"ğŸ­ Anime"},{value:"memes",label:"ğŸ˜‚ Meme"},{value:"community",label:"ğŸ‘¥ Topluluk"}]);n.useEffect(()=>{b(),S()},[t]);const m=async(a,l={})=>{const i={Authorization:`Bearer ${y}`,"Content-Type":"application/json",...l.headers},o=await fetch(a,{...l,headers:i});if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.json()},b=async()=>{try{E(!0);const a=new URLSearchParams;t.category!=="all"&&a.append("category",t.category),t.language!=="all"&&a.append("language",t.language),t.size!=="all"&&a.append("size",t.size),t.search&&a.append("search",t.search);const l=await m(`${s}/discovery/servers/?${a}`);h(l.servers||[])}catch(a){console.error("âŒ Servers yÃ¼klenemedi:",a)}finally{E(!1)}},S=async()=>{try{const a=await m(`${s}/discovery/featured/`);N(a.servers||[])}catch(a){console.error("âŒ Featured servers yÃ¼klenemedi:",a)}},v=async a=>{try{await m(`${s}/servers/${a}/join/`,{method:"POST"}),alert("âœ… Sunucuya katÄ±ldÄ±nÄ±z!"),u&&u(a)}catch(l){console.error("âŒ Sunucuya katÄ±lÄ±namadÄ±:",l),alert("âŒ Sunucuya katÄ±lÄ±namadÄ±!")}},g=a=>a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a,p=a=>a>=1e3?`${(a/1e3).toFixed(1)}K`:a;return f&&c.length===0?e.createElement("div",{className:"discovery-page"},e.createElement("div",{className:"loading"},"ğŸ”„ Sunucular yÃ¼kleniyor...")):e.createElement("div",{className:"discovery-page"},e.createElement("div",{className:"page-header"},e.createElement("h1",null,"ğŸ” Sunucu KeÅŸfet"),e.createElement("p",null,"Ä°lgi alanlarÄ±na uygun yeni topluluklar bul ve katÄ±l")),e.createElement("div",{className:"search-filters"},e.createElement("div",{className:"search-bar"},e.createElement("input",{type:"text",placeholder:"ğŸ” Sunucu ara...",value:t.search,onChange:a=>r({...t,search:a.target.value})})),e.createElement("div",{className:"filters-row"},e.createElement("select",{value:t.category,onChange:a=>r({...t,category:a.target.value})},k.map(a=>e.createElement("option",{key:a.value,value:a.value},a.label))),e.createElement("select",{value:t.size,onChange:a=>r({...t,size:a.target.value})},e.createElement("option",{value:"all"},"ğŸ‘¥ TÃ¼m Boyutlar"),e.createElement("option",{value:"small"},"KÃ¼Ã§Ã¼k (0-100)"),e.createElement("option",{value:"medium"},"Orta (100-1K)"),e.createElement("option",{value:"large"},"BÃ¼yÃ¼k (1K-10K)"),e.createElement("option",{value:"huge"},"Ã‡ok BÃ¼yÃ¼k (10K+)")),e.createElement("select",{value:t.language,onChange:a=>r({...t,language:a.target.value})},e.createElement("option",{value:"all"},"ğŸŒ TÃ¼m Diller"),e.createElement("option",{value:"tr"},"ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e"),e.createElement("option",{value:"en"},"ğŸ‡ºğŸ‡¸ English"),e.createElement("option",{value:"de"},"ğŸ‡©ğŸ‡ª Deutsch"),e.createElement("option",{value:"fr"},"ğŸ‡«ğŸ‡· FranÃ§ais"),e.createElement("option",{value:"es"},"ğŸ‡ªğŸ‡¸ EspaÃ±ol")))),d.length>0&&e.createElement("div",{className:"featured-section"},e.createElement("h2",null,"â­ Ã–ne Ã‡Ä±kanlar"),e.createElement("div",{className:"featured-grid"},d.map(a=>e.createElement("div",{key:a.id,className:"featured-card"},e.createElement("div",{className:"featured-badge"},"â­ Ã–ne Ã‡Ä±kan"),e.createElement("img",{src:a.icon||"/default-server.png",alt:a.name,className:"server-icon-large"}),e.createElement("h3",null,a.name),e.createElement("p",{className:"server-description"},a.description),e.createElement("div",{className:"server-stats"},e.createElement("div",{className:"stat"},e.createElement("span",{className:"stat-icon"},"ğŸ‘¥"),e.createElement("span",null,g(a.member_count)," Ã¼ye")),e.createElement("div",{className:"stat"},e.createElement("span",{className:"stat-icon"},"ğŸŸ¢"),e.createElement("span",null,p(a.online_count)," Ã§evrimiÃ§i"))),e.createElement("button",{className:"join-btn",onClick:()=>v(a.id)},"ğŸš€ KatÄ±l"))))),e.createElement("div",{className:"servers-section"},e.createElement("h2",null,"ğŸŒ TÃ¼m Sunucular"),c.length===0?e.createElement("div",{className:"empty-state"},e.createElement("p",null,"AramanÄ±za uygun sunucu bulunamadÄ±")):e.createElement("div",{className:"servers-grid"},c.map(a=>e.createElement("div",{key:a.id,className:"server-card"},e.createElement("div",{className:"server-header"},e.createElement("img",{src:a.icon||"/default-server.png",alt:a.name,className:"server-icon"}),e.createElement("div",{className:"server-info"},e.createElement("h3",null,a.name),e.createElement("div",{className:"server-meta"},e.createElement("span",{className:"category-badge"},a.category),a.verified&&e.createElement("span",{className:"verified-badge"},"âœ“ DoÄŸrulanmÄ±ÅŸ")))),e.createElement("p",{className:"server-description"},a.description||"AÃ§Ä±klama yok"),e.createElement("div",{className:"server-stats-row"},e.createElement("div",{className:"stat-item"},e.createElement("span",{className:"stat-icon"},"ğŸ‘¥"),e.createElement("span",null,g(a.member_count))),e.createElement("div",{className:"stat-item online"},e.createElement("span",{className:"stat-icon"},"ğŸŸ¢"),e.createElement("span",null,p(a.online_count)))),a.tags&&a.tags.length>0&&e.createElement("div",{className:"server-tags"},a.tags.slice(0,3).map((l,i)=>e.createElement("span",{key:i,className:"tag"},l))),e.createElement("button",{className:"join-btn-small",onClick:()=>v(a.id)},"KatÄ±l"))))))};export{z as default};
