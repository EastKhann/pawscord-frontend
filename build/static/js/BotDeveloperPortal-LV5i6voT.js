import{r as i,d as e,X as S,aC as T,bY as O,i as G,bJ as H,bK as J,bl as q,E as V,T as X,ad as A,at as Q,aq as Z,ar as ee,bU as P,l as te,v as $,bx as ae}from"./react-core-DrOm_csO.js";import{t as r}from"./index-DmEhdEtw.js";const ce=({apiBaseUrl:u,onClose:_,currentUser:le})=>{const[c,o]=i.useState("list"),[E,p]=i.useState([]),[s,h]=i.useState(null),[z,R]=i.useState(!0),[v,g]=i.useState({}),[n,m]=i.useState({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),[F,N]=i.useState(!1),[f,x]=i.useState(""),[k,y]=i.useState([]);i.useEffect(()=>{D()},[]);const D=async()=>{try{const t=localStorage.getItem("access_token"),a=await fetch(`${u}/bots/my/`,{headers:{Authorization:`Bearer ${t}`}});if(a.ok){const l=await a.json();p(l.bots||[])}}catch(t){console.error("Fetch bots error:",t)}finally{R(!1)}},j=async()=>{if(!n.name.trim()){r.error("âš ï¸ Bot adÄ± gerekli");return}try{const t=localStorage.getItem("access_token"),a=await fetch(`${u}/bots/create/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.ok){const l=await a.json();p([...E,l.bot]),m({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),o("list"),r.success("âœ… Bot oluÅŸturuldu!"),h(l.bot),g({[l.bot.id]:!0})}else{const l=await a.json();r.error(l.error||"âŒ Bot oluÅŸturulamadÄ±")}}catch(t){console.error("Create bot error:",t),r.error("âŒ Hata oluÅŸtu")}},W=async()=>{if(s)try{const t=localStorage.getItem("access_token"),a=await fetch(`${u}/bots/${s.id}/update/`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.ok){const l=await a.json();p(E.map(d=>d.id===s.id?l.bot:d)),o("list"),r.success("âœ… Bot gÃ¼ncellendi!")}}catch(t){console.error("Update bot error:",t)}},K=async t=>{if(window.confirm("Bu botu silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz."))try{const a=localStorage.getItem("access_token");(await fetch(`${u}/bots/${t}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok&&(p(E.filter(d=>d.id!==t)),s?.id===t&&h(null),r.success("âœ… Bot silindi"))}catch(a){console.error("Delete bot error:",a)}},M=async t=>{if(window.confirm("Token yenilenecek. Eski token geÃ§ersiz olacak. Devam?"))try{const a=localStorage.getItem("access_token"),l=await fetch(`${u}/bots/${t}/regenerate-token/`,{method:"POST",headers:{Authorization:`Bearer ${a}`}});if(l.ok){const d=await l.json();p(E.map(b=>b.id===t?{...b,token:d.token}:b)),g({...v,[t]:!0}),r.success("âœ… Token yenilendi!")}}catch(a){console.error("Regenerate token error:",a)}},I=async t=>{if(!f.trim()){r.error("âš ï¸ Webhook URL gerekli");return}try{const a=localStorage.getItem("access_token");(await fetch(`${u}/bots/${t}/webhook/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({url:f,events:k})})).ok&&(r.success("âœ… Webhook oluÅŸturuldu!"),N(!1),x(""),y([]))}catch(a){console.error("Create webhook error:",a)}},L=async(t,a)=>{try{const l=localStorage.getItem("access_token");if((await fetch(`${u}/bots/${t}/${a==="online"?"pause":"start"}/`,{method:"POST",headers:{Authorization:`Bearer ${l}`}})).ok){const B=a==="online"?"offline":"online";p(E.map(C=>C.id===t?{...C,status:B}:C)),r.success(B==="online"?"âœ… Bot baÅŸlatÄ±ldÄ±!":"â¸ï¸ Bot durduruldu")}}catch(l){console.error("Toggle bot status error:",l)}},w=t=>{navigator.clipboard.writeText(t),r.success("ðŸ“‹ Panoya kopyalandÄ±!")},U=[{id:"message_create",label:"Mesaj GÃ¶nderildi"},{id:"message_edit",label:"Mesaj DÃ¼zenlendi"},{id:"message_delete",label:"Mesaj Silindi"},{id:"reaction_add",label:"Reaction Eklendi"},{id:"reaction_remove",label:"Reaction KaldÄ±rÄ±ldÄ±"},{id:"member_join",label:"Ãœye KatÄ±ldÄ±"},{id:"member_leave",label:"Ãœye AyrÄ±ldÄ±"},{id:"voice_join",label:"Ses KanalÄ±na KatÄ±ldÄ±"},{id:"voice_leave",label:"Ses KanalÄ±ndan AyrÄ±ldÄ±"}],Y=t=>{m({name:t.name,description:t.description||"",avatar_url:t.avatar_url||"",prefix:t.prefix||"!",is_public:t.is_public||!1,intents:t.intents||{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),h(t),o("edit")};return e.createElement("div",{className:"bot-portal-overlay",onClick:_},e.createElement("div",{className:"bot-portal-panel",onClick:t=>t.stopPropagation()},e.createElement("div",{className:"portal-header"},e.createElement("h2",null,e.createElement(S,null)," Bot GeliÅŸtirici PortalÄ±"),e.createElement("div",{className:"header-actions"},e.createElement("button",{className:`nav-btn ${c==="list"?"active":""}`,onClick:()=>o("list")},e.createElement(S,null)," BotlarÄ±m"),e.createElement("button",{className:`nav-btn ${c==="create"?"active":""}`,onClick:()=>{o("create"),h(null),m({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}})}},e.createElement(T,null)," Yeni Bot"),e.createElement("button",{className:`nav-btn ${c==="docs"?"active":""}`,onClick:()=>o("docs")},e.createElement(O,null)," DokÃ¼mantasyon")),e.createElement("button",{className:"close-btn",onClick:_},e.createElement(G,null))),e.createElement("div",{className:"portal-content"},c==="list"&&e.createElement("div",{className:"bots-list-view"},z?e.createElement("div",{className:"loading"},"YÃ¼kleniyor..."):E.length>0?e.createElement("div",{className:"bots-grid"},E.map(t=>e.createElement("div",{key:t.id,className:"bot-card"},e.createElement("div",{className:"bot-header"},e.createElement("img",{src:t.avatar_url||"/default-bot.png",alt:t.name,className:"bot-avatar"}),e.createElement("div",{className:"bot-info"},e.createElement("h3",null,t.name),e.createElement("span",{className:`bot-status ${t.status||"offline"}`},t.status==="online"?"ðŸŸ¢ Online":"ðŸ”´ Offline")),e.createElement("div",{className:"bot-actions"},e.createElement("button",{className:"action-btn",onClick:()=>L(t.id,t.status),title:t.status==="online"?"Durdur":"BaÅŸlat"},t.status==="online"?e.createElement(H,null):e.createElement(J,null)),e.createElement("button",{className:"action-btn",onClick:()=>Y(t),title:"DÃ¼zenle"},e.createElement(q,null)),e.createElement("button",{className:"action-btn delete",onClick:()=>K(t.id),title:"Sil"},e.createElement(V,null)))),e.createElement("p",{className:"bot-description"},t.description||"AÃ§Ä±klama yok"),e.createElement("div",{className:"bot-stats"},e.createElement("div",{className:"stat"},e.createElement(X,null),e.createElement("span",null,t.servers_count||0," sunucu")),e.createElement("div",{className:"stat"},e.createElement(A,null),e.createElement("span",null,t.commands_used||0," komut"))),e.createElement("div",{className:"bot-token-section"},e.createElement("div",{className:"token-header"},e.createElement(Q,null)," Token",e.createElement("button",{className:"toggle-token",onClick:()=>g({...v,[t.id]:!v[t.id]})},v[t.id]?e.createElement(Z,null):e.createElement(ee,null))),e.createElement("div",{className:"token-value"},e.createElement("code",null,v[t.id]?t.token:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),e.createElement("button",{className:"copy-btn",onClick:()=>w(t.token)},e.createElement(P,null))),e.createElement("button",{className:"regenerate-btn",onClick:()=>M(t.id)},e.createElement(te,null)," Token Yenile")),e.createElement("div",{className:"bot-footer"},e.createElement("button",{className:"webhook-btn",onClick:()=>{h(t),N(!0)}},e.createElement($,null)," Webhook Ekle"),e.createElement("button",{className:"analytics-btn",onClick:()=>{h(t),o("analytics")}},e.createElement(A,null)," Analitik"))))):e.createElement("div",{className:"no-bots"},e.createElement(S,{className:"empty-icon"}),e.createElement("p",null,"HenÃ¼z bot oluÅŸturmadÄ±nÄ±z"),e.createElement("button",{onClick:()=>o("create")},e.createElement(T,null)," Ä°lk botunu oluÅŸtur"))),(c==="create"||c==="edit")&&e.createElement("div",{className:"bot-form-view"},e.createElement("h3",null,c==="create"?"ðŸ¤– Yeni Bot OluÅŸtur":"âœï¸ Bot DÃ¼zenle"),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Bot AdÄ± *"),e.createElement("input",{type:"text",placeholder:"Harika Bot",value:n.name,onChange:t=>m({...n,name:t.target.value}),maxLength:32})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"AÃ§Ä±klama"),e.createElement("textarea",{placeholder:"Bu bot ne yapar?",value:n.description,onChange:t=>m({...n,description:t.target.value}),rows:3})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Avatar URL"),e.createElement("input",{type:"text",placeholder:"https://...",value:n.avatar_url,onChange:t=>m({...n,avatar_url:t.target.value})})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Komut Prefix"),e.createElement("input",{type:"text",placeholder:"!",value:n.prefix,onChange:t=>m({...n,prefix:t.target.value}),maxLength:5})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Bot Ä°zinleri (Intents)"),e.createElement("div",{className:"intents-grid"},Object.entries(n.intents).map(([t,a])=>e.createElement("label",{key:t,className:"intent-checkbox"},e.createElement("input",{type:"checkbox",checked:a,onChange:l=>m({...n,intents:{...n.intents,[t]:l.target.checked}})}),e.createElement("span",null,t.charAt(0).toUpperCase()+t.slice(1)))))),e.createElement("div",{className:"form-group checkbox"},e.createElement("label",null,e.createElement("input",{type:"checkbox",checked:n.is_public,onChange:t=>m({...n,is_public:t.target.checked})}),e.createElement("span",null,"Bot'u herkese aÃ§Ä±k yap (keÅŸfedilebilir)"))),e.createElement("div",{className:"form-actions"},e.createElement("button",{className:"submit-btn",onClick:c==="create"?j:W},e.createElement(ae,null)," ",c==="create"?"Bot OluÅŸtur":"Kaydet"),e.createElement("button",{className:"cancel-btn",onClick:()=>o("list")},"Ä°ptal"))),c==="analytics"&&s&&e.createElement("div",{className:"analytics-view"},e.createElement("button",{className:"back-btn",onClick:()=>o("list")},"â† Geri"),e.createElement("h3",null,"ðŸ“Š ",s.name," - Analitik"),e.createElement("div",{className:"analytics-grid"},e.createElement("div",{className:"analytics-card"},e.createElement("div",{className:"analytics-value"},s.servers_count||0),e.createElement("div",{className:"analytics-label"},"Toplam Sunucu")),e.createElement("div",{className:"analytics-card"},e.createElement("div",{className:"analytics-value"},s.users_count||0),e.createElement("div",{className:"analytics-label"},"Toplam KullanÄ±cÄ±")),e.createElement("div",{className:"analytics-card"},e.createElement("div",{className:"analytics-value"},s.commands_used||0),e.createElement("div",{className:"analytics-label"},"Komut KullanÄ±mÄ±")),e.createElement("div",{className:"analytics-card"},e.createElement("div",{className:"analytics-value"},s.messages_sent||0),e.createElement("div",{className:"analytics-label"},"Mesaj GÃ¶nderildi"))),e.createElement("div",{className:"analytics-chart-placeholder",style:{padding:"20px"}},e.createElement("h4",{style:{color:"#dbdee1",marginBottom:"16px"}},"ðŸ“ˆ HaftalÄ±k KullanÄ±m"),e.createElement("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px",height:"120px",padding:"0 10px"}},["Pzt","Sal","Ã‡ar","Per","Cum","Cmt","Paz"].map((t,a)=>{const l=Math.max(10,Math.floor((s.commands_used||50)*(.3+Math.sin(a*1.2)*.5+Math.random()*.2)/7)),d=(s.commands_used||50)/4,b=Math.min(100,l/Math.max(d,1)*100);return e.createElement("div",{key:t,style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"}},e.createElement("span",{style:{color:"#949ba4",fontSize:"0.7em"}},l),e.createElement("div",{style:{width:"100%",maxWidth:"40px",height:`${Math.max(b,8)}%`,backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",minHeight:"6px",transition:"height 0.3s ease"}}),e.createElement("span",{style:{color:"#949ba4",fontSize:"0.7em"}},t))})))),c==="docs"&&e.createElement("div",{className:"docs-view"},e.createElement("h3",null,e.createElement(O,null)," Bot API DokÃ¼mantasyonu"),e.createElement("div",{className:"docs-section"},e.createElement("h4",null,"ðŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§"),e.createElement("p",null,"PAWSCORD Bot API ile kendi botunuzu oluÅŸturabilirsiniz."),e.createElement("div",{className:"code-block"},e.createElement("div",{className:"code-header"},e.createElement("span",null,"JavaScript (Node.js)"),e.createElement("button",{onClick:()=>w(`const PAWSCORD = require('pawscord-bot');

const bot = new PAWSCORD.Client({
    token: 'YOUR_BOT_TOKEN'
});

bot.on('message', (message) => {
    if (message.content === '!ping') {
        message.reply('Pong! ðŸ“');
    }
});

bot.connect();`)},e.createElement(P,null))),e.createElement("pre",null,`const PAWSCORD = require('pawscord-bot');

const bot = new PAWSCORD.Client({
    token: 'YOUR_BOT_TOKEN'
});

bot.on('message', (message) => {
    if (message.content === '!ping') {
        message.reply('Pong! ðŸ“');
    }
});

bot.connect();`))),e.createElement("div",{className:"docs-section"},e.createElement("h4",null,"ðŸ“¡ API Endpoints"),e.createElement("div",{className:"endpoint-list"},e.createElement("div",{className:"endpoint"},e.createElement("span",{className:"method get"},"GET"),e.createElement("code",null,"/api/bots/@me"),e.createElement("span",null,"Bot bilgilerini al")),e.createElement("div",{className:"endpoint"},e.createElement("span",{className:"method post"},"POST"),e.createElement("code",null,"/api/messages/send"),e.createElement("span",null,"Mesaj gÃ¶nder")),e.createElement("div",{className:"endpoint"},e.createElement("span",{className:"method post"},"POST"),e.createElement("code",null,"/api/reactions/add"),e.createElement("span",null,"Reaction ekle")),e.createElement("div",{className:"endpoint"},e.createElement("span",{className:"method get"},"GET"),e.createElement("code",null,"/api/servers"),e.createElement("span",null,"Sunucu listesi")))),e.createElement("div",{className:"docs-section"},e.createElement("h4",null,"ðŸ”— WebSocket Events"),e.createElement("div",{className:"event-list"},e.createElement("div",{className:"event"},e.createElement("code",null,"MESSAGE_CREATE"),e.createElement("span",null,"Yeni mesaj gÃ¶nderildiÄŸinde")),e.createElement("div",{className:"event"},e.createElement("code",null,"REACTION_ADD"),e.createElement("span",null,"Reaction eklendiÄŸinde")),e.createElement("div",{className:"event"},e.createElement("code",null,"MEMBER_JOIN"),e.createElement("span",null,"Ãœye sunucuya katÄ±ldÄ±ÄŸÄ±nda")),e.createElement("div",{className:"event"},e.createElement("code",null,"VOICE_STATE_UPDATE"),e.createElement("span",null,"Ses durumu deÄŸiÅŸtiÄŸinde")))))),F&&e.createElement("div",{className:"webhook-modal-overlay"},e.createElement("div",{className:"webhook-modal"},e.createElement("h3",null,e.createElement($,null)," Webhook OluÅŸtur"),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Webhook URL *"),e.createElement("input",{type:"text",placeholder:"https://your-server.com/webhook",value:f,onChange:t=>x(t.target.value)})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Olaylar"),e.createElement("div",{className:"webhook-events"},U.map(t=>e.createElement("label",{key:t.id,className:"event-checkbox"},e.createElement("input",{type:"checkbox",checked:k.includes(t.id),onChange:a=>{a.target.checked?y([...k,t.id]):y(k.filter(l=>l!==t.id))}}),e.createElement("span",null,t.label))))),e.createElement("div",{className:"modal-actions"},e.createElement("button",{className:"submit-btn",onClick:()=>I(s.id)},"Webhook OluÅŸtur"),e.createElement("button",{className:"cancel-btn",onClick:()=>N(!1)},"Ä°ptal"))))))};export{ce as default};
