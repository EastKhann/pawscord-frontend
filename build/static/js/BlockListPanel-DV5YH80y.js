import{r as n,c9 as l,d as e}from"./react-core-DrOm_csO.js";import{g as B}from"./index-DmEhdEtw.js";const K=({onClose:u})=>{const[E,v]=n.useState([]),[s,h]=n.useState(""),[r,k]=n.useState(""),[y,z]=n.useState(!0),c=B(),o=localStorage.getItem("access_token");n.useEffect(()=>{i()},[]);const i=async()=>{try{const t=await(await fetch(`${c}/blocks/list/`,{headers:{Authorization:`Bearer ${o}`}})).json();v(t.blocked_users||[])}catch(a){console.error("Error fetching blocked users:",a),l.error("âŒ Engelli kullanÄ±cÄ±lar yÃ¼klenemedi")}finally{z(!1)}},p=async()=>{if(!r.trim()){l.error("âŒ KullanÄ±cÄ± adÄ± gerekli");return}try{const a=await fetch(`${c}/blocks/block/`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({username:r})}),t=await a.json();a.ok?(l.success("âœ… KullanÄ±cÄ± engellendi"),k(""),i()):l.error(`âŒ ${t.error||"KullanÄ±cÄ± engellenemedi"}`)}catch(a){console.error("Error blocking user:",a),l.error("âŒ Engelleme hatasÄ±")}},w=async a=>{try{const t=await fetch(`${c}/blocks/unblock/`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:a})}),m=await t.json();t.ok?(l.success("âœ… Engel kaldÄ±rÄ±ldÄ±"),i()):l.error(`âŒ ${m.error||"Engel kaldÄ±rÄ±lamadÄ±"}`)}catch(t){console.error("Error unblocking user:",t),l.error("âŒ Engel kaldÄ±rma hatasÄ±")}},g=E.filter(a=>a.username.toLowerCase().includes(s.toLowerCase())||a.email?.toLowerCase().includes(s.toLowerCase())),C=a=>{const t=new Date,m=new Date(a),d=t-m,f=Math.floor(d/(1e3*60*60*24)),N=Math.floor(d/(1e3*60*60)),b=Math.floor(d/(1e3*60));return f>0?`${f} gÃ¼n Ã¶nce`:N>0?`${N} saat Ã¶nce`:b>0?`${b} dakika Ã¶nce`:"Az Ã¶nce"};return y?e.createElement("div",{className:"blocklist-overlay"},e.createElement("div",{className:"blocklist-panel"},e.createElement("div",{className:"loading-state"},e.createElement("div",{className:"spinner"}),e.createElement("span",null,"YÃ¼kleniyor...")))):e.createElement("div",{className:"blocklist-overlay",onClick:u},e.createElement("div",{className:"blocklist-panel",onClick:a=>a.stopPropagation()},e.createElement("div",{className:"blocklist-header"},e.createElement("h2",null,"ğŸš« Engelli KullanÄ±cÄ±lar"),e.createElement("button",{className:"close-btn",onClick:u},"âœ•")),e.createElement("div",{className:"blocklist-stats"},e.createElement("div",{className:"stat-card"},e.createElement("span",{className:"stat-icon"},"ğŸš«"),e.createElement("div",{className:"stat-info"},e.createElement("span",{className:"stat-value"},E.length),e.createElement("span",{className:"stat-label"},"Engelli KullanÄ±cÄ±")))),e.createElement("div",{className:"add-user-section"},e.createElement("h3",null,"KullanÄ±cÄ± Engelle"),e.createElement("div",{className:"add-user-form"},e.createElement("input",{type:"text",placeholder:"KullanÄ±cÄ± adÄ±",value:r,onChange:a=>k(a.target.value),onKeyPress:a=>a.key==="Enter"&&p(),className:"user-input"}),e.createElement("button",{className:"block-btn",onClick:p},"ğŸš« Engelle")),e.createElement("p",{className:"info-text"},"Engellenen kullanÄ±cÄ±lar size mesaj gÃ¶nderemez ve sizi gÃ¶remez")),e.createElement("div",{className:"search-section"},e.createElement("input",{type:"text",placeholder:"ğŸ” Engelli kullanÄ±cÄ±larda ara...",value:s,onChange:a=>h(a.target.value),className:"search-input"})),e.createElement("div",{className:"blocklist-content"},g.length===0?e.createElement("div",{className:"empty-state"},e.createElement("span",{className:"empty-icon"},"ğŸ‰"),e.createElement("h3",null,"Engelli kullanÄ±cÄ± yok"),e.createElement("p",null,s?"Arama sonucu bulunamadÄ±":"HenÃ¼z kimseyi engellemediniz")):e.createElement("div",{className:"blocked-users-list"},g.map(a=>e.createElement("div",{key:a.id,className:"blocked-user-card"},e.createElement("div",{className:"user-avatar"},a.avatar?e.createElement("img",{src:a.avatar,alt:a.username}):e.createElement("div",{className:"default-avatar"},a.username.charAt(0).toUpperCase())),e.createElement("div",{className:"user-info"},e.createElement("div",{className:"user-name"},e.createElement("span",{className:"username"},a.username),e.createElement("span",{className:"user-tag"},"#",a.discriminator||"0000")),a.email&&e.createElement("span",{className:"user-email"},a.email),e.createElement("span",{className:"blocked-time"},"Engellendi: ",C(a.blocked_at))),e.createElement("div",{className:"user-actions"},e.createElement("button",{className:"unblock-btn",onClick:()=>w(a.id)},"âœ“ Engeli KaldÄ±r")))))),e.createElement("div",{className:"info-banner"},e.createElement("span",{className:"info-icon"},"â„¹ï¸"),e.createElement("p",null,"Engellenen kullanÄ±cÄ±lar size DM gÃ¶nderemez, profilinizi gÃ¶remez ve paylaÅŸÄ±mlarÄ±nÄ±zla etkileÅŸime geÃ§emez. GruplanmÄ±ÅŸ serverlarda gÃ¶rÃ¼nÃ¼rlÃ¼k sÄ±nÄ±rlÄ±dÄ±r."))))};export{K as default};
