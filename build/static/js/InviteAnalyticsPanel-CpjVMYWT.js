import{r as l,aj as r,l as b,A as E,K as h}from"./react-core-B6hadH-M.js";import{t as C}from"./index-D_6pZib5.js";const k=({fetchWithAuth:c,apiBaseUrl:s,onClose:d,serverId:f})=>{const[a,m]=l.useState(null),[p,o]=l.useState(!1),[i,y]=l.useState("7d");l.useEffect(()=>{x()},[i]);const x=async()=>{o(!0);try{const n=await(await c(`${s}/servers/${f}/invite-analytics/?range=${i}`)).json();m(n)}catch{C.error("Failed to load analytics")}finally{o(!1)}},v=[{value:"24h",label:"24 Hours"},{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"},{value:"all",label:"All Time"}];return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(r,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Invite Analytics")),React.createElement("button",{onClick:d,style:e.closeButton},React.createElement(b,null))),React.createElement("div",{style:e.toolbar},React.createElement("div",{style:e.timeRangeButtons},v.map(t=>React.createElement("button",{key:t.value,onClick:()=>y(t.value),style:{...e.timeRangeButton,...i===t.value&&e.timeRangeButtonActive}},t.label)))),React.createElement("div",{style:e.content},p?React.createElement("div",{style:e.loading},"Loading analytics..."):a?React.createElement(React.Fragment,null,React.createElement("div",{style:e.statsGrid},React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(E,{style:{color:"#5865f2"}})),React.createElement("div",{style:e.statInfo},React.createElement("div",{style:e.statValue},a.total_invites||0),React.createElement("div",{style:e.statLabel},"Total Invites"))),React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(h,{style:{color:"#43b581"}})),React.createElement("div",{style:e.statInfo},React.createElement("div",{style:e.statValue},a.total_joins||0),React.createElement("div",{style:e.statLabel},"Total Joins"))),React.createElement("div",{style:e.statCard},React.createElement("div",{style:e.statIcon},React.createElement(r,{style:{color:"#faa61a"}})),React.createElement("div",{style:e.statInfo},React.createElement("div",{style:e.statValue},a.total_invites>0?(a.total_joins/a.total_invites*100).toFixed(1):0,"%"),React.createElement("div",{style:e.statLabel},"Conversion Rate")))),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"Top Invites"),React.createElement("div",{style:e.invitesList},(a.top_invites||[]).map((t,n)=>React.createElement("div",{key:n,style:e.inviteCard},React.createElement("div",{style:e.inviteRank},"#",n+1),React.createElement("div",{style:e.inviteInfo},React.createElement("div",{style:e.inviteCode},t.code),React.createElement("div",{style:e.inviteMeta},"Created by ",t.creator_username)),React.createElement("div",{style:e.inviteStats},React.createElement("div",{style:e.inviteStat},React.createElement("span",{style:e.inviteStatValue},t.uses),React.createElement("span",{style:e.inviteStatLabel},"uses"))))))),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"Daily Joins"),React.createElement("div",{style:e.chartContainer},(a.daily_joins||[]).map((t,n)=>{const g=Math.max(...(a.daily_joins||[]).map(u=>u.joins),1),R=t.joins/g*100;return React.createElement("div",{key:n,style:e.barContainer},React.createElement("div",{style:{...e.bar,height:`${R}%`}},React.createElement("div",{style:e.barValue},t.joins)),React.createElement("div",{style:e.barLabel},new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})))})))):React.createElement("div",{style:e.empty},"No analytics data available"))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},timeRangeButtons:{display:"flex",gap:"8px"},timeRangeButton:{padding:"8px 16px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#dcddde",cursor:"pointer",fontSize:"13px"},timeRangeButtonActive:{backgroundColor:"#5865f2",borderColor:"#5865f2",color:"#ffffff"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"30px"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",gap:"16px",alignItems:"center"},statIcon:{fontSize:"32px"},statInfo:{flex:1},statValue:{fontSize:"28px",fontWeight:"700",color:"#ffffff",marginBottom:"4px"},statLabel:{fontSize:"13px",color:"#99aab5"},section:{marginBottom:"30px"},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},invitesList:{display:"flex",flexDirection:"column",gap:"10px"},inviteCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},inviteRank:{fontSize:"20px",fontWeight:"700",color:"#5865f2",minWidth:"40px"},inviteInfo:{flex:1},inviteCode:{fontSize:"16px",fontWeight:"600",color:"#ffffff",fontFamily:"monospace",marginBottom:"4px"},inviteMeta:{fontSize:"12px",color:"#99aab5"},inviteStats:{display:"flex",gap:"20px"},inviteStat:{display:"flex",flexDirection:"column",alignItems:"center"},inviteStatValue:{fontSize:"18px",fontWeight:"700",color:"#43b581"},inviteStatLabel:{fontSize:"11px",color:"#99aab5"},chartContainer:{display:"flex",gap:"8px",alignItems:"flex-end",height:"200px",padding:"10px",backgroundColor:"#2c2f33",borderRadius:"8px"},barContainer:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",height:"100%",justifyContent:"flex-end"},bar:{width:"100%",backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"4px 0",minHeight:"20px"},barValue:{fontSize:"11px",color:"#ffffff",fontWeight:"600"},barLabel:{fontSize:"10px",color:"#99aab5",marginTop:"4px",transform:"rotate(-45deg)",transformOrigin:"center"}};export{k as default};
