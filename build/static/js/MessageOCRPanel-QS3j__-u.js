import{r as i,d as e,ao as u,i as R,al as v,bI as w,az as h}from"./react-core-DMT_QkRe.js";import{t as n}from"./index-w8kftCDz.js";const S=({fetchWithAuth:c,apiBaseUrl:d,messageId:a,onClose:p})=>{const[l,g]=i.useState(""),[b,m]=i.useState(!0),[x,f]=i.useState(!1);i.useEffect(()=>{y()},[a]);const y=async()=>{try{m(!0);const o=await c(`${d}/api/messages/${a}/ocr/`);if(o.ok){const r=await o.json();g(r.text||"")}}catch(o){console.error("OCR yükleme hatası:",o)}finally{m(!1)}},C=async()=>{try{f(!0),(await c(`${d}/api/messages/${a}/ocr/request/`,{method:"POST"})).ok?(n.success("OCR işlemi başlatıldı"),setTimeout(y,3e3)):n.error("OCR işlemi başlatılamadı")}catch(o){console.error("OCR isteği hatası:",o),n.error("Bir hata oluştu")}finally{f(!1)}},E=()=>{navigator.clipboard.writeText(l),n.success("Metin kopyalandı")},k=()=>{const o=new Blob([l],{type:"text/plain"}),r=URL.createObjectURL(o),s=document.createElement("a");s.href=r,s.download=`ocr_${a}.txt`,s.click(),URL.revokeObjectURL(r),n.success("Metin indirildi")};return e.createElement("div",{style:t.overlay,onClick:p},e.createElement("div",{style:t.modal,onClick:o=>o.stopPropagation()},e.createElement("div",{style:t.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(u,{style:{color:"#5865f2"}}),e.createElement("h2",{style:{margin:0}},"OCR - Görüntüden Metin")),e.createElement(R,{onClick:p,style:t.closeBtn})),e.createElement("div",{style:t.content},b?e.createElement("div",{style:t.loading},e.createElement(v,{style:{fontSize:"48px",color:"#888",marginBottom:"10px"}}),e.createElement("p",null,"Yükleniyor...")):l?e.createElement(e.Fragment,null,e.createElement("div",{style:t.toolbar},e.createElement("button",{onClick:E,style:t.toolBtn},e.createElement(w,null)," Kopyala"),e.createElement("button",{onClick:k,style:t.toolBtn},e.createElement(h,null)," İndir")),e.createElement("div",{style:t.textArea},e.createElement("pre",{style:t.textContent},l))):e.createElement("div",{style:t.empty},e.createElement(u,{style:{fontSize:"64px",color:"#555",marginBottom:"15px"}}),e.createElement("p",null,"Bu mesajda OCR metni yok"),e.createElement("button",{onClick:C,disabled:x,style:t.requestBtn},x?"İşleniyor...":"OCR İşlemini Başlat")))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column"},toolbar:{display:"flex",gap:"10px",marginBottom:"15px"},toolBtn:{backgroundColor:"#2c2f33",color:"#fff",border:"none",padding:"10px 15px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},textArea:{flex:1,backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",overflow:"auto"},textContent:{color:"#dcddde",fontSize:"14px",lineHeight:"1.6",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:"#888"},empty:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:"#888"},requestBtn:{marginTop:"20px",backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"600"}};export{S as default};
