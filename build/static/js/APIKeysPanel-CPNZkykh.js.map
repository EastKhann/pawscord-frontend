{"version":3,"file":"APIKeysPanel-CPNZkykh.js","sources":["../../../src/components/APIKeysPanel.js"],"sourcesContent":["// components/APIKeysPanel.js\r\n// üîë API Keys Management Panel\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport toast from '../utils/toast';\r\nimport { FaKey, FaTrash, FaCopy, FaPlus, FaEye, FaEyeSlash } from 'react-icons/fa';\r\n\r\nconst APIKeysPanel = ({ fetchWithAuth, apiBaseUrl }) => {\r\n    const [keys, setKeys] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showKey, setShowKey] = useState({});\r\n\r\n    useEffect(() => {\r\n        loadKeys();\r\n    }, []);\r\n\r\n    const loadKeys = async () => {\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/apikeys/list/`);\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setKeys(data);\r\n            }\r\n        } catch (e) {\r\n            console.error('API keys load error:', e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const createKey = async () => {\r\n        const name = prompt('API Key name:');\r\n        if (!name) return;\r\n\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/apikeys/create/`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ name })\r\n            });\r\n\r\n            if (res.ok) {\r\n                const newKey = await res.json();\r\n                toast.success(`‚úÖ Key created!\\n\\nKey: ${newKey.key}\\n\\n‚ö†Ô∏è Save this! It won't be shown again.`);\r\n                loadKeys();\r\n            }\r\n        } catch (e) {\r\n            toast.error('‚ùå Failed to create key');\r\n        }\r\n    };\r\n\r\n    const deleteKey = async (keyId) => {\r\n        if (!confirm('Delete this API key?')) return;\r\n\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/apikeys/${keyId}/delete/`, {\r\n                method: 'DELETE'\r\n            });\r\n            if (res.ok) {\r\n                loadKeys();\r\n            }\r\n        } catch (e) {\r\n            toast.error('‚ùå Failed to delete key');\r\n        }\r\n    };\r\n\r\n    const copyKey = (key) => {\r\n        navigator.clipboard.writeText(key);\r\n        toast.success('‚úÖ Copied to clipboard!');\r\n    };\r\n\r\n    const maskKey = (key) => {\r\n        if (!key) return '';\r\n        return key.substring(0, 8) + '‚Ä¢'.repeat(24);\r\n    };\r\n\r\n    if (loading) return <div style={{ padding: '20px', color: '#b9bbbe' }}>Loading...</div>;\r\n\r\n    return (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                    <h4 style={{ margin: 0, color: '#dcddde' }}>API Keys</h4>\r\n                    <p style={{ margin: '5px 0 0 0', color: '#72767d', fontSize: '13px' }}>\r\n                        Create and manage API keys for external integrations\r\n                    </p>\r\n                </div>\r\n                <button\r\n                    onClick={createKey}\r\n                    style={{\r\n                        padding: '8px 16px',\r\n                        backgroundColor: '#5865f2',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '4px',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '8px',\r\n                        fontWeight: 'bold'\r\n                    }}\r\n                >\r\n                    <FaPlus /> New Key\r\n                </button>\r\n            </div>\r\n\r\n            {keys.length === 0 ? (\r\n                <div style={{\r\n                    padding: '40px',\r\n                    textAlign: 'center',\r\n                    color: '#72767d',\r\n                    backgroundColor: '#2f3136',\r\n                    borderRadius: '8px'\r\n                }}>\r\n                    <FaKey style={{ fontSize: '48px', marginBottom: '16px', opacity: 0.5 }} />\r\n                    <p>No API keys yet</p>\r\n                </div>\r\n            ) : (\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                    {keys.map(key => (\r\n                        <div\r\n                            key={key.id}\r\n                            style={{\r\n                                padding: '16px',\r\n                                backgroundColor: '#2f3136',\r\n                                borderRadius: '8px',\r\n                                border: '1px solid #40444b'\r\n                            }}\r\n                        >\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                                <div style={{ flex: 1 }}>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n                                        <FaKey style={{ color: '#5865f2' }} />\r\n                                        <span style={{ color: '#dcddde', fontWeight: 'bold' }}>\r\n                                            {key.name}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '8px',\r\n                                        padding: '8px',\r\n                                        backgroundColor: '#1e1f22',\r\n                                        borderRadius: '4px',\r\n                                        fontFamily: 'monospace',\r\n                                        fontSize: '13px',\r\n                                        color: '#b9bbbe'\r\n                                    }}>\r\n                                        <span>\r\n                                            {showKey[key.id] ? key.key : maskKey(key.key)}\r\n                                        </span>\r\n                                        <button\r\n                                            onClick={() => setShowKey(prev => ({ ...prev, [key.id]: !prev[key.id] }))}\r\n                                            style={{\r\n                                                background: 'none',\r\n                                                border: 'none',\r\n                                                color: '#b9bbbe',\r\n                                                cursor: 'pointer',\r\n                                                padding: '4px'\r\n                                            }}\r\n                                        >\r\n                                            {showKey[key.id] ? <FaEyeSlash /> : <FaEye />}\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => copyKey(key.key)}\r\n                                            style={{\r\n                                                background: 'none',\r\n                                                border: 'none',\r\n                                                color: '#b9bbbe',\r\n                                                cursor: 'pointer',\r\n                                                padding: '4px'\r\n                                            }}\r\n                                        >\r\n                                            <FaCopy />\r\n                                        </button>\r\n                                    </div>\r\n                                    <div style={{ marginTop: '8px', fontSize: '12px', color: '#72767d' }}>\r\n                                        Created: {new Date(key.created_at).toLocaleDateString()}\r\n                                        {key.last_used && (\r\n                                            <> ‚Ä¢ Last used: {new Date(key.last_used).toLocaleDateString()}</>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => deleteKey(key.id)}\r\n                                    style={{\r\n                                        background: 'none',\r\n                                        border: 'none',\r\n                                        color: '#f04747',\r\n                                        cursor: 'pointer',\r\n                                        padding: '8px',\r\n                                        borderRadius: '4px'\r\n                                    }}\r\n                                    title=\"Delete key\"\r\n                                >\r\n                                    <FaTrash />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            <div style={{\r\n                padding: '12px',\r\n                backgroundColor: 'rgba(250, 166, 26, 0.1)',\r\n                borderLeft: '3px solid #faa61a',\r\n                borderRadius: '4px',\r\n                fontSize: '13px',\r\n                color: '#dcddde'\r\n            }}>\r\n                ‚ö†Ô∏è <strong>Security:</strong> Keep your API keys secret! Anyone with your key can access your account.\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default APIKeysPanel;\r\n\r\n\r\n\r\n"],"names":["useState","useEffect","jsx","jsxs","Fragment"],"mappings":"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"}