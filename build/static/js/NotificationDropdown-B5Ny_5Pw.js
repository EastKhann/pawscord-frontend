var B=Object.defineProperty;var i=(r,a)=>B(r,"name",{value:a,configurable:!0});import{r as l,j as t}from"./react-core-Djgtqrmb.js";import{k as I,a as y,S as E,f as R,a9 as $}from"./icons-vendor-BW7dxHkX.js";import{e as D}from"./index-BRQzOq3v.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const q=i(({fetchWithAuth:r,apiBaseUrl:a,currentUser:L,onClose:f})=>{const[c,d]=l.useState([]),[j,v]=l.useState(!0),p=l.useRef(null);l.useEffect(()=>{w()},[]),l.useEffect(()=>{const e=i(n=>{p.current&&!p.current.contains(n.target)&&f()},"handleClickOutside");return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[f]);const w=i(async()=>{try{const e=await r(`${a}/notifications/`);if(e.ok){const n=await e.json();d(n.results||n)}}catch{}finally{v(!1)}},"loadNotifications"),b=i(async e=>{try{await r(`${a}/notifications/${e}/read/`,{method:"POST"}),d(n=>n.map(s=>s.id===e?{...s,is_read:!0}:s))}catch{}},"markAsRead"),S=i(async()=>{try{await r(`${a}/notifications/mark_all_read/`,{method:"POST"}),d(e=>e.map(n=>({...n,is_read:!0})))}catch{}},"markAllAsRead"),C=i(async e=>{try{await r(`${a}/notifications/${e}/`,{method:"DELETE"}),d(n=>n.filter(s=>s.id!==e))}catch{}},"deleteNotification"),z=i(async()=>{if(await D("TÃ¼m bildirimleri silmek istediÄŸinize emin misiniz?"))try{await r(`${a}/notifications/clear_all/`,{method:"POST"}),d([])}catch{}},"clearAll"),T=i(e=>{switch(e){case"message":return"ðŸ’¬";case"mention":return"@";case"friend_request":return"ðŸ‘¥";case"server_invite":return"ðŸ ";case"reaction":return"ðŸ‘";case"reply":return"â†©ï¸";default:return"ðŸ””"}},"getNotificationIcon"),_=i(e=>{const n=new Date(e),m=new Date-n,u=Math.floor(m/6e4),g=Math.floor(m/36e5),h=Math.floor(m/864e5);return u<1?"Az Ã¶nce":u<60?`${u} dakika Ã¶nce`:g<24?`${g} saat Ã¶nce`:h<7?`${h} gÃ¼n Ã¶nce`:n.toLocaleDateString()},"formatTime"),x=c.filter(e=>!e.is_read).length;return t.jsxs("div",{ref:p,style:o.dropdown,children:[t.jsxs("div",{style:o.header,children:[t.jsxs("div",{style:o.headerLeft,children:[t.jsx(I,{}),t.jsx("span",{style:o.headerTitle,children:"Bildirimler"}),x>0&&t.jsx("span",{style:o.badge,children:x})]}),t.jsx("button",{onClick:f,style:o.closeButton,children:t.jsx(y,{})})]}),c.length>0&&t.jsxs("div",{style:o.actions,children:[x>0&&t.jsxs("button",{onClick:S,style:o.actionButton,children:[t.jsx(E,{})," TÃ¼mÃ¼nÃ¼ okundu iÅŸaretle"]}),t.jsxs("button",{onClick:z,style:{...o.actionButton,color:"#ed4245"},children:[t.jsx(R,{})," TÃ¼mÃ¼nÃ¼ temizle"]})]}),t.jsx("div",{style:o.list,children:j?t.jsx("div",{style:o.loading,children:"YÃ¼kleniyor..."}):c.length===0?t.jsxs("div",{style:o.empty,children:[t.jsx("div",{style:o.emptyIcon,children:"ðŸ””"}),t.jsx("div",{children:"Bildirim yok"}),t.jsx("div",{style:o.emptySubtext,children:"Yeni bildirimler burada gÃ¶rÃ¼necek"})]}):c.map(e=>t.jsxs("div",{style:{...o.notificationItem,backgroundColor:e.is_read?"transparent":"rgba(88, 101, 242, 0.05)"},onClick:i(()=>!e.is_read&&b(e.id),"onClick"),children:[t.jsx("div",{style:o.notificationIcon,children:T(e.notification_type)}),t.jsxs("div",{style:o.notificationContent,children:[t.jsx("div",{style:o.notificationMessage,children:e.message}),t.jsx("div",{style:o.notificationTime,children:_(e.created_at)})]}),t.jsxs("div",{style:o.notificationActions,children:[!e.is_read&&t.jsx("button",{onClick:i(n=>{n.stopPropagation(),b(e.id)},"onClick"),style:o.iconButton,title:"Okundu iÅŸaretle",children:t.jsx($,{})}),t.jsx("button",{onClick:i(n=>{n.stopPropagation(),C(e.id)},"onClick"),style:o.iconButton,title:"Sil",children:t.jsx(y,{})})]})]},e.id))})]})},"NotificationDropdown"),o={dropdown:{position:"absolute",top:"100%",right:0,marginTop:"8px",width:"420px",maxWidth:"90vw",maxHeight:"600px",backgroundColor:"#2b2d31",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:1e4,display:"flex",flexDirection:"column",overflow:"hidden"},header:{padding:"16px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#1e1f22"},headerLeft:{display:"flex",alignItems:"center",gap:"8px",color:"#fff",fontSize:"1em",fontWeight:"600"},headerTitle:{fontSize:"1em",fontWeight:"600"},badge:{backgroundColor:"#ed4245",color:"#fff",fontSize:"0.75em",fontWeight:"bold",padding:"2px 6px",borderRadius:"10px",minWidth:"18px",textAlign:"center"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em",padding:"4px",display:"flex",alignItems:"center",borderRadius:"4px",transition:"all 0.15s"},actions:{padding:"12px",display:"flex",gap:"8px",borderBottom:"1px solid #1e1f22",flexWrap:"wrap"},actionButton:{background:"none",border:"1px solid #40444b",color:"#b9bbbe",cursor:"pointer",fontSize:"0.85em",padding:"6px 12px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.15s"},list:{flex:1,overflowY:"auto",overflowX:"hidden"},loading:{padding:"40px",textAlign:"center",color:"#b9bbbe"},empty:{padding:"40px 20px",textAlign:"center",color:"#b9bbbe"},emptyIcon:{fontSize:"3em",marginBottom:"12px",opacity:.5},emptySubtext:{fontSize:"0.85em",color:"#72767d",marginTop:"8px"},notificationItem:{padding:"12px 16px",display:"flex",gap:"12px",borderBottom:"1px solid #1e1f22",cursor:"pointer",transition:"background-color 0.15s"},notificationIcon:{fontSize:"1.5em",flexShrink:0},notificationContent:{flex:1,minWidth:0},notificationMessage:{color:"#dbdee1",fontSize:"0.9em",lineHeight:"1.4",marginBottom:"4px"},notificationTime:{color:"#72767d",fontSize:"0.75em"},notificationActions:{display:"flex",gap:"4px",flexShrink:0},iconButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"0.9em",padding:"4px",display:"flex",alignItems:"center",borderRadius:"4px",transition:"all 0.15s"}},k=document.createElement("style");k.textContent=`
    .notification-item:hover {
        background-color: rgba(255, 255, 255, 0.05) !important;
    }
    .icon-button-notification:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff;
    }
    .close-button-notification:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff;
    }
    .action-button-notification:hover {
        background-color: rgba(88, 101, 242, 0.1);
        color: #fff;
        border-color: #5865f2;
    }
`;document.head.appendChild(k);export{q as default};
