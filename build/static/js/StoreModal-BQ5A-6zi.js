var W=Object.defineProperty;var s=(o,a)=>W(o,"name",{value:a,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{a as I,bC as S,aq as h,ai as v,ah as D,R as k,aI as T,ap as L}from"./icons-vendor-BW7dxHkX.js";import{t as g,d as N}from"./index-m2zCEI_Z.js";import{u as A}from"./useModalA11y-VFHkzbFx.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const O=s(({fetchWithAuth:o,apiBaseUrl:a})=>{const[l,f]=d.useState([]),[c,m]=d.useState(!0),[i,r]=d.useState(0),[p,B]=d.useState("all"),[P,y]=d.useState(null),z=s(async()=>{try{const x=await(await o(`${a}/store/items/`)).json();f(x.items||[])}catch{g.error("Failed to load store")}finally{m(!1)}},"loadStoreItems"),u=s(async()=>{try{const x=await(await o(`${a}/users/balance/`)).json();r(x.balance||0)}catch{}},"loadBalance"),F=s(async n=>{if(i<n.price){g.error("Insufficient coins!");return}if(await N(`Purchase ${n.name} for ${n.price} coins?`))try{const b=await(await o(`${a}/store/buy/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:n.id})})).json();b.success?(g.success(`Successfully purchased ${n.name}!`),u(),y(null)):g.error(b.error||"Purchase failed")}catch{g.error("Purchase failed")}},"handlePurchase");d.useEffect(()=>{z(),u()},[]);const R=p==="all"?l:l.filter(n=>n.category===p),M=l.filter(n=>n.featured);return{items:l,loading:c,balance:i,selectedCategory:p,setSelectedCategory:B,selectedItem:P,setSelectedItem:y,filteredItems:R,featuredItems:M,handlePurchase:F}},"useStoreAPI"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"95%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{padding:"20px",borderBottom:"1px solid #444",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},balance:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#2c2f33",padding:"8px 16px",borderRadius:"20px",fontSize:"16px",fontWeight:"600"},closeBtn:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px"},categories:{display:"flex",gap:"8px",padding:"16px 20px",borderBottom:"1px solid #444",overflowX:"auto"},categoryBtn:{background:"none",border:"none",color:"#99aab5",padding:"10px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap",transition:"all 0.2s"},activeCategoryBtn:{backgroundColor:"#5865f2",color:"#fff"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",padding:"40px",color:"#99aab5"},section:{marginBottom:"32px"},sectionTitle:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},itemsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"16px"},itemCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"12px",cursor:"pointer",transition:"transform 0.2s",position:"relative",overflow:"hidden"},itemImage:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"6px",marginBottom:"8px"},itemPlaceholder:{width:"100%",height:"150px",backgroundColor:"#202225",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px"},itemInfo:{display:"flex",flexDirection:"column",gap:"8px"},itemName:{fontSize:"14px",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},itemPrice:{display:"flex",alignItems:"center",gap:"6px",fontSize:"16px",fontWeight:"bold"},limitedBadge:{position:"absolute",top:"12px",right:"12px",backgroundColor:"#f04747",color:"#fff",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold"},empty:{textAlign:"center",padding:"40px",color:"#99aab5"},detailOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e6},detailModal:{backgroundColor:"#2c2f33",borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"90%",position:"relative",textAlign:"center"},detailClose:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer"},detailImage:{width:"100%",maxHeight:"300px",objectFit:"cover",borderRadius:"8px",marginBottom:"20px"},detailPlaceholder:{width:"100%",height:"300px",backgroundColor:"#202225",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},detailName:{fontSize:"28px",fontWeight:"bold",marginBottom:"12px"},detailRarity:{display:"inline-block",padding:"6px 12px",backgroundColor:"#202225",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",marginBottom:"16px"},detailDescription:{fontSize:"14px",color:"#dcddde",lineHeight:"1.6",marginBottom:"24px"},detailPrice:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"24px",color:"#faa61a"},purchaseBtn:{width:"100%",padding:"14px",backgroundColor:"#43b581",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},purchaseBtnDisabled:{backgroundColor:"#555",cursor:"not-allowed"}},j=[{id:"all",name:"All Items",icon:"FaShoppingCart"},{id:"cosmetics",name:"Cosmetics",icon:"FaPalette"},{id:"badges",name:"Badges",icon:"FaMedal"},{id:"boosters",name:"Boosters",icon:"FaFire"},{id:"special",name:"Special",icon:"FaCrown"}],w=s(o=>{const a={common:"#b0b0b0",uncommon:"#1eff00",rare:"#0070dd",epic:"#a335ee",legendary:"#ff8000"};return a[o]||a.common},"getRarityColor"),E=s(({item:o,balance:a,onClose:l,onPurchase:f})=>o?e.jsx("div",{style:t.detailOverlay,onClick:l,children:e.jsxs("div",{style:t.detailModal,onClick:s(c=>c.stopPropagation(),"onClick"),children:[e.jsx("button",{onClick:l,style:t.detailClose,children:e.jsx(I,{})}),o.image?e.jsx("img",{src:o.image,alt:o.name,style:t.detailImage}):e.jsx("div",{style:t.detailPlaceholder,children:e.jsx(S,{style:{fontSize:"120px",color:"#99aab5"}})}),e.jsx("h2",{style:{...t.detailName,color:w(o.rarity)},children:o.name}),e.jsx("div",{style:t.detailRarity,children:o.rarity.toUpperCase()}),e.jsx("p",{style:t.detailDescription,children:o.description||"No description available."}),e.jsxs("div",{style:t.detailPrice,children:[e.jsx(h,{style:{fontSize:"24px",color:"#faa61a"}}),e.jsx("span",{style:{fontSize:"32px",fontWeight:"bold"},children:o.price.toLocaleString()})]}),e.jsx("button",{onClick:s(()=>f(o),"onClick"),disabled:a<o.price,style:{...t.purchaseBtn,...a<o.price&&t.purchaseBtnDisabled},children:a<o.price?"Insufficient Coins":"Purchase"})]})}):null,"ItemDetailModal"),$={FaShoppingCart:v,FaPalette:L,FaMedal:T,FaFire:k,FaCrown:D},C=s(({item:o,onClick:a})=>e.jsxs("div",{style:t.itemCard,onClick:s(()=>a(o),"onClick"),children:[o.image?e.jsx("img",{src:o.image,alt:o.name,style:t.itemImage}):e.jsx("div",{style:t.itemPlaceholder,children:e.jsx(S,{style:{fontSize:"48px",color:"#99aab5"}})}),e.jsxs("div",{style:t.itemInfo,children:[e.jsx("div",{style:{...t.itemName,color:w(o.rarity)},children:o.name}),e.jsxs("div",{style:t.itemPrice,children:[e.jsx(h,{style:{color:"#faa61a"}}),o.price.toLocaleString()]})]}),o.limited&&e.jsx("div",{style:t.limitedBadge,children:"LIMITED"})]}),"ItemCard"),Z=s(({fetchWithAuth:o,apiBaseUrl:a,onClose:l,username:f})=>{const{overlayProps:c,dialogProps:m}=A({onClose:l,label:"MaÄŸaza"}),i=O({fetchWithAuth:o,apiBaseUrl:a});return e.jsx("div",{style:t.overlay,...c,children:e.jsxs("div",{style:t.modal,...m,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(v,{style:{fontSize:"24px",color:"#5865f2"}}),e.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Item Store"})]}),e.jsxs("div",{style:t.headerRight,children:[e.jsxs("div",{style:t.balance,children:[e.jsx(h,{style:{color:"#faa61a"}}),e.jsx("span",{children:i.balance.toLocaleString()})]}),e.jsx("button",{onClick:l,style:t.closeBtn,children:e.jsx(I,{})})]})]}),e.jsx("div",{style:t.categories,children:j.map(r=>{const p=$[r.icon];return e.jsxs("button",{onClick:s(()=>i.setSelectedCategory(r.id),"onClick"),style:{...t.categoryBtn,...i.selectedCategory===r.id&&t.activeCategoryBtn},children:[e.jsx(p,{}),e.jsx("span",{children:r.name})]},r.id)})}),e.jsx("div",{style:t.content,children:i.loading?e.jsx("div",{style:t.loading,children:"Loading store..."}):e.jsxs(e.Fragment,{children:[i.selectedCategory==="all"&&i.featuredItems.length>0&&e.jsxs("div",{style:t.section,children:[e.jsxs("h3",{style:t.sectionTitle,children:[e.jsx(k,{style:{color:"#f04747"}})," Featured Items"]}),e.jsx("div",{style:t.itemsGrid,children:i.featuredItems.map(r=>e.jsx(C,{item:r,onClick:i.setSelectedItem},r.id))})]}),e.jsxs("div",{style:t.section,children:[e.jsx("h3",{style:t.sectionTitle,children:j.find(r=>r.id===i.selectedCategory)?.name||"All Items"}),i.filteredItems.length===0?e.jsx("div",{style:t.empty,children:"No items in this category"}):e.jsx("div",{style:t.itemsGrid,children:i.filteredItems.map(r=>e.jsx(C,{item:r,onClick:i.setSelectedItem},r.id))})]})]})}),e.jsx(E,{item:i.selectedItem,balance:i.balance,onClose:s(()=>i.setSelectedItem(null),"onClose"),onPurchase:i.handlePurchase})]})})},"StoreModal");export{Z as default};
