var j=Object.defineProperty;var s=(n,t)=>j(n,"name",{value:t,configurable:!0});import{r as c,j as e}from"./react-core-Djgtqrmb.js";import{t as o}from"./index-DwVhiipM.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";import"./ui-vendor-IhB9Znpc.js";const B=s(({apiBaseUrl:n,onClose:t})=>{const[r,i]=c.useState({title:"",description:"",severity:"medium",category:"bug",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",browser:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,url:window.location.href,console_errors:[]}),[d,m]=c.useState(!1),[g,f]=c.useState([]),u=s(()=>{const a=window.consoleErrors||[];i(l=>({...l,console_errors:a})),o.info("â„¹ï¸ Konsol hatalarÄ± yakalandÄ±")},"captureConsoleErrors"),p=s(async()=>{if(!r.title.trim()){o.error("âŒ BaÅŸlÄ±k gerekli");return}if(!r.description.trim()){o.error("âŒ AÃ§Ä±klama gerekli");return}try{m(!0);const a=localStorage.getItem("access_token"),l=await fetch(`${n}/errors/report/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(l.ok){const h=await l.json();o.success("âœ… Hata raporu gÃ¶nderildi"),i({title:"",description:"",severity:"medium",category:"bug",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",browser:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,url:window.location.href,console_errors:[]}),setTimeout(()=>t(),1500)}else{const h=await l.json();o.error(`âŒ ${h.error||"GÃ¶nderim baÅŸarÄ±sÄ±z"}`)}}catch{o.error("âŒ BaÄŸlantÄ± hatasÄ±")}finally{m(!1)}},"submitErrorReport"),x=s(a=>{const l={low:"#3b82f6",medium:"#faa61a",high:"#ff6b61",critical:"#ff3b30"};return l[a]||l.medium},"getSeverityColor"),v=s(a=>({bug:"ğŸ›",feature:"âœ¨",performance:"âš¡",ui:"ğŸ¨",crash:"ğŸ’¥"})[a]||"â“","getCategoryIcon");return e.jsx("div",{className:"error-reporting-overlay",onClick:t,children:e.jsxs("div",{className:"error-reporting-panel",onClick:s(a=>a.stopPropagation(),"onClick"),children:[e.jsxs("div",{className:"error-reporting-header",children:[e.jsx("h2",{children:"ğŸ› Hata Bildirimi"}),e.jsx("button",{className:"close-btn",onClick:t,children:"âœ•"})]}),e.jsxs("div",{className:"error-reporting-content",children:[e.jsxs("div",{className:"info-banner",children:[e.jsx("span",{className:"info-icon",children:"ğŸ’¡"}),e.jsx("p",{children:"KarÅŸÄ±laÅŸtÄ±ÄŸÄ±nÄ±z hatalarÄ± detaylÄ± bir ÅŸekilde bildirerek uygulamayÄ± geliÅŸtirmemize yardÄ±mcÄ± olabilirsiniz."})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"BaÅŸlÄ±k *"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"KÄ±sa ve aÃ§Ä±klayÄ±cÄ± bir baÅŸlÄ±k",value:r.title,onChange:s(a=>i({...r,title:a.target.value}),"onChange")})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Kategori"}),e.jsxs("select",{className:"form-select",value:r.category,onChange:s(a=>i({...r,category:a.target.value}),"onChange"),children:[e.jsx("option",{value:"bug",children:"ğŸ› Bug (Hata)"}),e.jsx("option",{value:"feature",children:"âœ¨ Feature Request (Ã–zellik Ä°steÄŸi)"}),e.jsx("option",{value:"performance",children:"âš¡ Performance (Performans)"}),e.jsx("option",{value:"ui",children:"ğŸ¨ UI/UX (ArayÃ¼z)"}),e.jsx("option",{value:"crash",children:"ğŸ’¥ Crash (Ã‡Ã¶kme)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ã–nem Derecesi"}),e.jsxs("select",{className:"form-select",value:r.severity,onChange:s(a=>i({...r,severity:a.target.value}),"onChange"),children:[e.jsx("option",{value:"low",children:"ğŸŸ¢ DÃ¼ÅŸÃ¼k"}),e.jsx("option",{value:"medium",children:"ğŸŸ¡ Orta"}),e.jsx("option",{value:"high",children:"ğŸŸ  YÃ¼ksek"}),e.jsx("option",{value:"critical",children:"ğŸ”´ Kritik"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"AÃ§Ä±klama *"}),e.jsx("textarea",{className:"form-textarea",placeholder:"HatayÄ± detaylÄ± bir ÅŸekilde aÃ§Ä±klayÄ±n...",value:r.description,onChange:s(a=>i({...r,description:a.target.value}),"onChange"),rows:5})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HatayÄ± Yeniden OluÅŸturma AdÄ±mlarÄ±"}),e.jsx("textarea",{className:"form-textarea",placeholder:`1. Ä°lk adÄ±m
2. Ä°kinci adÄ±m
3. ÃœÃ§Ã¼ncÃ¼ adÄ±m`,value:r.steps_to_reproduce,onChange:s(a=>i({...r,steps_to_reproduce:a.target.value}),"onChange"),rows:4})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Beklenen DavranÄ±ÅŸ"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Ne olmasÄ±nÄ± bekliyordunuz?",value:r.expected_behavior,onChange:s(a=>i({...r,expected_behavior:a.target.value}),"onChange"),rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"GerÃ§ekleÅŸen DavranÄ±ÅŸ"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Ne oldu?",value:r.actual_behavior,onChange:s(a=>i({...r,actual_behavior:a.target.value}),"onChange"),rows:3})]})]}),e.jsxs("div",{className:"system-info",children:[e.jsx("h4",{children:"ğŸ“Š Sistem Bilgileri"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"TarayÄ±cÄ±:"}),e.jsx("span",{className:"info-value",children:navigator.userAgent.split("(")[1]?.split(")")[0]||"Unknown"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Ekran:"}),e.jsx("span",{className:"info-value",children:r.screen_resolution})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"URL:"}),e.jsx("span",{className:"info-value truncate",children:r.url})]})]}),e.jsx("button",{className:"capture-errors-btn",onClick:u,children:"ğŸ“ Konsol HatalarÄ±nÄ± Yakala"})]}),e.jsxs("div",{className:"preview-section",children:[e.jsx("h4",{children:"ğŸ‘ï¸ Ã–nizleme"}),e.jsxs("div",{className:"error-preview",children:[e.jsxs("div",{className:"preview-header",children:[e.jsx("span",{className:"preview-icon",children:v(r.category)}),e.jsx("span",{className:"preview-title",children:r.title||"BaÅŸlÄ±k"}),e.jsx("span",{className:"preview-severity",style:{backgroundColor:x(r.severity)},children:r.severity})]}),e.jsx("div",{className:"preview-body",children:r.description||"AÃ§Ä±klama burada gÃ¶rÃ¼necek..."})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:t,children:"Ä°ptal"}),e.jsx("button",{className:"submit-btn",onClick:p,disabled:d,children:d?"â³ GÃ¶nderiliyor...":"ğŸ“¨ Raporu GÃ¶nder"})]})]})]})]})})},"ErrorReportingPanel");export{B as default};
