import{r as m,j as e}from"./react-core-D6cE4lil.js";import{y as a}from"./ui-vendor-CZOhtEfS.js";import{g as v,d as f}from"./index-DHLSv4f5.js";import"./media-vendor-Du00QUHb.js";import"./router-vendor-wrB4dqw3.js";import"./state-vendor-DnurjGY_.js";import"./crypto-vendor-Drccqhv1.js";import"./icons-vendor-fClA8qVL.js";const b={allow_dm_from_everyone:!0,allow_dm_from_friends_only:!1,allow_dm_from_server_members:!0,allow_friend_requests:!0,keep_dm_history_on_server_leave:!0,show_current_activity:!0,explicit_content_filter:"friends",blocked_words_filter_enabled:!1,show_online_status:!0,show_read_receipts:!0,show_typing_indicator:!0,allow_profile_views_from_non_friends:!1,allow_data_collection:!1,allow_personalized_ads:!1};function x(){const[t,s]=m.useState(b),[l,n]=m.useState([]),[r,k]=m.useState(""),[h,_]=m.useState(!0),o=v(),c=(i=!1)=>{const d={Authorization:`Bearer ${localStorage.getItem("access_token")}`};return i&&(d["Content-Type"]="application/json"),d};m.useEffect(()=>{Promise.all([fetch(`${o}/privacy/settings/`,{headers:c()}).then(i=>i.ok?i.json():null),fetch(`${o}/privacy/blocked-words/`,{headers:c()}).then(i=>i.ok?i.json():null)]).then(([i,d])=>{i&&s(i),d&&n(d.blocked_words||[])}).catch(i=>{}).finally(()=>_(!1))},[]);const g=async i=>{try{(await fetch(`${o}/privacy/settings/update/`,{method:"POST",headers:c(!0),body:JSON.stringify(i)})).ok?(s(i),a.success("‚úÖ Gizlilik ayarlarƒ± kaydedildi")):a.error("‚ùå Ayarlar kaydedilemedi")}catch{a.error("‚ùå Baƒülantƒ± hatasƒ±")}};return{settings:t,loading:h,blockedWords:l,newWord:r,setNewWord:k,toggleSetting:i=>g({...t,[i]:!t[i]}),updateExplicitFilter:i=>g({...t,explicit_content_filter:i}),addBlockedWord:async()=>{if(r.trim())try{(await fetch(`${o}/privacy/blocked-words/add/`,{method:"POST",headers:c(!0),body:JSON.stringify({word:r.trim()})})).ok?(n(d=>[...d,r.trim()]),a.success(`‚úÖ "${r.trim()}" engellenmi≈ü kelimeler listesine eklendi`),k("")):a.error("‚ùå Kelime eklenemedi")}catch{a.error("‚ùå Baƒülantƒ± hatasƒ±")}},removeBlockedWord:async i=>{try{(await fetch(`${o}/privacy/blocked-words/remove/`,{method:"POST",headers:c(!0),body:JSON.stringify({word:i})})).ok?(n(y=>y.filter(p=>p!==i)),a.success(`‚úÖ "${i}" engellenmi≈ü kelimeler listesinden kaldƒ±rƒ±ldƒ±`)):a.error("‚ùå Kelime kaldƒ±rƒ±lamadƒ±")}catch{a.error("‚ùå Baƒülantƒ± hatasƒ±")}},requestDataExport:async()=>{if(await f("Verilerinizi dƒ±≈üa aktarmak istediƒüinizden emin misiniz? Bu i≈ülem biraz zaman alabilir."))try{(await fetch(`${o}/privacy/data-export/request/`,{method:"POST",headers:c()})).ok?a.success("‚úÖ Veri dƒ±≈üa aktarma i≈ülemi ba≈ülatƒ±ldƒ±. E-postanƒ±za link g√∂nderilecek."):a.error("‚ùå ƒ∞stek g√∂nderilemedi")}catch{a.error("‚ùå Baƒülantƒ± hatasƒ±")}}}}const j=[{title:"üí¨ Direkt Mesaj Gizliliƒüi",toggles:[{key:"allow_dm_from_everyone",label:"Herkesten DM alabilir",desc:"Sunucu √ºyesi olmasalar bile"},{key:"allow_dm_from_friends_only",label:"Sadece arkada≈ülardan DM",desc:"Yalnƒ±zca arkada≈ülarƒ±nƒ±zdan mesaj alabilirsiniz"},{key:"allow_dm_from_server_members",label:"Sunucu √ºyelerinden DM",desc:"Aynƒ± sunucudaki √ºyelerden mesaj alabilirsiniz"},{key:"allow_friend_requests",label:"Arkada≈ülƒ±k isteklerini kabul et",desc:"Diƒüer kullanƒ±cƒ±lar size istek g√∂nderebilir"}]},{title:"üè† Sunucu Gizliliƒüi",toggles:[{key:"keep_dm_history_on_server_leave",label:"Sunucudan ayrƒ±lƒ±rken DM ge√ßmi≈üini sakla",desc:"Sunucudan ayrƒ±ldƒ±ktan sonra DM'ler silinmez"},{key:"show_current_activity",label:"Mevcut aktiviteyi g√∂ster",desc:"Oynadƒ±ƒüƒ±nƒ±z oyun veya dinlediƒüiniz m√ºziƒüi g√∂sterin"}]},{title:"üëÅÔ∏è G√∂r√ºn√ºrl√ºk",toggles:[{key:"show_online_status",label:"√áevrimi√ßi durumu g√∂ster",desc:"Diƒüer kullanƒ±cƒ±lar √ßevrimi√ßi olduƒüunuzu g√∂rebilir"},{key:"show_read_receipts",label:"Okundu bilgisi g√∂nder",desc:"Mesajlarƒ± okudunuzda kar≈üƒ± tarafa bildirim g√∂sterilir"},{key:"show_typing_indicator",label:"Yazƒ±yor g√∂stergesini g√∂ster",desc:"Mesaj yazarken kar≈üƒ± tarafa bildirim g√∂sterilir"},{key:"allow_profile_views_from_non_friends",label:"Arkada≈ü olmayanlar profilimi g√∂rebilir",desc:"Herkes profilinizi g√∂r√ºnt√ºleyebilir"}]},{title:"üìä Veri Gizliliƒüi",toggles:[{key:"allow_data_collection",label:"Veri toplamaya izin ver",desc:"Uygulamayƒ± geli≈ütirmek i√ßin anonim kullanƒ±m verisi toplanƒ±r"},{key:"allow_personalized_ads",label:"Ki≈üiselle≈ütirilmi≈ü reklamlara izin ver",desc:"Size √∂zel reklamlar g√∂sterilir"}],hasExport:!0}],u=({label:t,desc:s,checked:l,onChange:n})=>e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-label",children:t}),e.jsx("div",{className:"setting-desc",children:s})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:n}),e.jsx("span",{className:"slider"})]})]}),T=({onClose:t})=>{const s=x();return s.loading?e.jsx("div",{className:"privacy-settings-overlay",children:e.jsx("div",{className:"privacy-settings-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Gizlilik ayarlarƒ± y√ºkleniyor..."})]})})}):e.jsx("div",{className:"privacy-settings-overlay",onClick:t,children:e.jsxs("div",{className:"privacy-settings-panel",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"privacy-settings-header",children:[e.jsxs("h2",{children:["üîí"," Gizlilik ve G√ºvenlik Ayarlarƒ±"]}),e.jsx("button",{className:"close-btn",onClick:t,children:"√ó"})]}),e.jsxs("div",{className:"privacy-settings-content",children:[j.map((l,n)=>e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:l.title}),e.jsx("div",{className:"settings-group",children:l.toggles.map(r=>e.jsx(u,{label:r.label,desc:r.desc,checked:s.settings[r.key],onChange:()=>s.toggleSetting(r.key)},r.key))}),l.hasExport&&e.jsxs("button",{className:"export-data-btn",onClick:s.requestDataExport,children:["üì•"," Verilerimi Dƒ±≈üa Aktar"]})]},n)),e.jsxs("div",{className:"settings-section",children:[e.jsxs("h3",{children:["üõ°Ô∏è"," Mesaj Filtreleme"]}),e.jsxs("div",{className:"settings-group",children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-label",children:"A√ßƒ±k i√ßerik filtresi"}),e.jsx("div",{className:"setting-desc",children:"Mesajlardaki m√ºstehcen i√ßeriƒüi otomatik tara"})]}),e.jsxs("select",{className:"explicit-filter-select",value:s.settings.explicit_content_filter,onChange:l=>s.updateExplicitFilter(l.target.value),children:[e.jsx("option",{value:"none",children:"Kapalƒ±"}),e.jsx("option",{value:"friends",children:"Arkada≈ülar hari√ß"}),e.jsx("option",{value:"all",children:"Herkesten tara"})]})]}),e.jsx(u,{label:"Engellenmi≈ü kelime filtresi",desc:"Belirlediƒüiniz kelimeleri i√ßeren mesajlarƒ± gizleyin",checked:s.settings.blocked_words_filter_enabled,onChange:()=>s.toggleSetting("blocked_words_filter_enabled")})]}),s.settings.blocked_words_filter_enabled&&e.jsxs("div",{className:"blocked-words-section",children:[e.jsx("h4",{children:"Engellenmi≈ü Kelimeler"}),e.jsxs("div",{className:"add-word-form",children:[e.jsx("input",{type:"text",placeholder:"Engellenecek kelime...",value:s.newWord,onChange:l=>s.setNewWord(l.target.value),onKeyPress:l=>l.key==="Enter"&&s.addBlockedWord()}),e.jsxs("button",{className:"add-word-btn",onClick:s.addBlockedWord,children:["‚ûï"," Ekle"]})]}),s.blockedWords.length>0?e.jsx("div",{className:"blocked-words-list",children:s.blockedWords.map((l,n)=>e.jsxs("div",{className:"blocked-word-item",children:[e.jsx("span",{children:l}),e.jsx("button",{className:"remove-word-btn",onClick:()=>s.removeBlockedWord(l),children:"‚úï"})]},n))}):e.jsx("p",{className:"empty-state",children:"Hen√ºz engellenmi≈ü kelime yok"})]})]})]})]})})};export{T as default};
