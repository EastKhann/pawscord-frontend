{"version":3,"file":"CreateGroupModal-D_BiSitZ.js","sources":["../../../src/components/CreateGroupModal.js"],"sourcesContent":["// frontend/src/components/CreateGroupModal.js\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { FaTimes, FaUserPlus, FaCheck } from 'react-icons/fa';\r\nimport toast from '../utils/toast';\r\n\r\nconst CreateGroupModal = ({ onClose, friendsList, fetchWithAuth, apiBaseUrl, onGroupCreated }) => {\r\n    const [selectedFriends, setSelectedFriends] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const handleEsc = (e) => { if (e.key === 'Escape') onClose(); };\r\n        window.addEventListener('keydown', handleEsc);\r\n        return () => window.removeEventListener('keydown', handleEsc);\r\n    }, [onClose]);\r\n\r\n    const toggleFriend = (username) => {\r\n        if (selectedFriends.includes(username)) {\r\n            setSelectedFriends(prev => prev.filter(u => u !== username));\r\n        } else {\r\n            setSelectedFriends(prev => [...prev, username]);\r\n        }\r\n    };\r\n\r\n    const handleCreate = async () => {\r\n        if (selectedFriends.length < 2) {\r\n            toast.error('❌ En az 2 kişi seçmelisin');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/conversations/create_group/`, {\r\n                method: 'POST',\r\n                body: JSON.stringify({ usernames: selectedFriends })\r\n            });\r\n\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                toast.success('✅ Grup oluşturuldu!');\r\n                onGroupCreated(data); // App.js'deki listeyi güncellemek için\r\n                onClose();\r\n            } else {\r\n                toast.error('❌ Grup oluşturulamadı');\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n            toast.error('❌ Hata oluştu: ' + e.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={styles.overlay} onClick={onClose}>\r\n            <div style={styles.modal} onClick={e => e.stopPropagation()}>\r\n                <div style={styles.header}>\r\n                    <h3>Grup Oluştur</h3>\r\n                    <button onClick={onClose} style={styles.closeBtn}><FaTimes /></button>\r\n                </div>\r\n\r\n                <div style={styles.body}>\r\n                    <p style={{ color: '#b9bbbe', marginBottom: 15 }}>\r\n                        Gruba eklemek istediğin arkadaşlarını seç ({selectedFriends.length})\r\n                    </p>\r\n\r\n                    <div style={styles.friendList}>\r\n                        {friendsList.map(friendName => (\r\n                            <div\r\n                                key={friendName}\r\n                                onClick={() => toggleFriend(friendName)}\r\n                                style={{\r\n                                    ...styles.friendItem,\r\n                                    backgroundColor: selectedFriends.includes(friendName) ? 'rgba(88, 101, 242, 0.3)' : '#2f3136',\r\n                                    borderColor: selectedFriends.includes(friendName) ? '#5865f2' : 'transparent'\r\n                                }}\r\n                            >\r\n                                <span style={{ color: 'white' }}>{friendName}</span>\r\n                                {selectedFriends.includes(friendName) ? <FaCheck color=\"#5865f2\" /> : <FaUserPlus color=\"#b9bbbe\" />}\r\n                            </div>\r\n                        ))}\r\n                        {friendsList.length === 0 && <p style={{ color: '#72767d' }}>Listenizde arkadaş yok.</p>}\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={handleCreate}\r\n                        style={styles.createBtn}\r\n                        disabled={loading || selectedFriends.length < 2}\r\n                    >\r\n                        {loading ? 'Oluşturuluyor...' : 'Grup DM Oluştur'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    overlay: { position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', backgroundColor: 'rgba(0,0,0,0.8)', zIndex: 2000, display: 'flex', justifyContent: 'center', alignItems: 'center' },\r\n    modal: { backgroundColor: '#313338', width: '400px', borderRadius: '8px', overflow: 'hidden' },\r\n    header: { padding: '15px 20px', borderBottom: '1px solid #1e1f22', display: 'flex', justifyContent: 'space-between', color: 'white', alignItems: 'center' },\r\n    closeBtn: { background: 'none', border: 'none', color: '#b9bbbe', cursor: 'pointer', fontSize: '1.2em' },\r\n    body: { padding: '20px' },\r\n    friendList: { maxHeight: '300px', overflowY: 'auto', display: 'flex', flexDirection: 'column', gap: '8px', marginBottom: '20px' },\r\n    friendItem: { padding: '10px', borderRadius: '4px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', cursor: 'pointer', border: '1px solid transparent' },\r\n    createBtn: { width: '100%', padding: '10px', backgroundColor: '#5865f2', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', fontWeight: 'bold', opacity: 0.9 },\r\n};\r\n\r\nexport default CreateGroupModal;\r\n\r\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":"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"}