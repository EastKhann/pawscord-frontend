import{r as s,d as e}from"./react-core-DrOm_csO.js";import{t as n}from"./index-DmEhdEtw.js";const N=({apiBaseUrl:u,onClose:o})=>{const[t,r]=s.useState({title:"",description:"",severity:"medium",category:"bug",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",browser:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,url:window.location.href,console_errors:[]}),[c,i]=s.useState(!1),[g,f]=s.useState([]),d=()=>{const a=window.consoleErrors||[];r(l=>({...l,console_errors:a})),n.info("â„¹ï¸ Konsol hatalarÄ± yakalandÄ±")},p=async()=>{if(!t.title.trim()){n.error("âŒ BaÅŸlÄ±k gerekli");return}if(!t.description.trim()){n.error("âŒ AÃ§Ä±klama gerekli");return}try{i(!0);const a=localStorage.getItem("access_token"),l=await fetch(`${u}/errors/report/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(l.ok){const m=await l.json();n.success("âœ… Hata raporu gÃ¶nderildi"),r({title:"",description:"",severity:"medium",category:"bug",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",browser:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,url:window.location.href,console_errors:[]}),setTimeout(()=>o(),1500)}else{const m=await l.json();n.error(`âŒ ${m.error||"GÃ¶nderim baÅŸarÄ±sÄ±z"}`)}}catch(a){console.error("Submit error report error:",a),n.error("âŒ BaÄŸlantÄ± hatasÄ±")}finally{i(!1)}},v=a=>{const l={low:"#3b82f6",medium:"#faa61a",high:"#ff6b61",critical:"#ff3b30"};return l[a]||l.medium},E=a=>({bug:"ğŸ›",feature:"âœ¨",performance:"âš¡",ui:"ğŸ¨",crash:"ğŸ’¥"})[a]||"â“";return e.createElement("div",{className:"error-reporting-overlay",onClick:o},e.createElement("div",{className:"error-reporting-panel",onClick:a=>a.stopPropagation()},e.createElement("div",{className:"error-reporting-header"},e.createElement("h2",null,"ğŸ› Hata Bildirimi"),e.createElement("button",{className:"close-btn",onClick:o},"âœ•")),e.createElement("div",{className:"error-reporting-content"},e.createElement("div",{className:"info-banner"},e.createElement("span",{className:"info-icon"},"ğŸ’¡"),e.createElement("p",null,"KarÅŸÄ±laÅŸtÄ±ÄŸÄ±nÄ±z hatalarÄ± detaylÄ± bir ÅŸekilde bildirerek uygulamayÄ± geliÅŸtirmemize yardÄ±mcÄ± olabilirsiniz.")),e.createElement("div",{className:"form-section"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"BaÅŸlÄ±k *"),e.createElement("input",{type:"text",className:"form-input",placeholder:"KÄ±sa ve aÃ§Ä±klayÄ±cÄ± bir baÅŸlÄ±k",value:t.title,onChange:a=>r({...t,title:a.target.value})})),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Kategori"),e.createElement("select",{className:"form-select",value:t.category,onChange:a=>r({...t,category:a.target.value})},e.createElement("option",{value:"bug"},"ğŸ› Bug (Hata)"),e.createElement("option",{value:"feature"},"âœ¨ Feature Request (Ã–zellik Ä°steÄŸi)"),e.createElement("option",{value:"performance"},"âš¡ Performance (Performans)"),e.createElement("option",{value:"ui"},"ğŸ¨ UI/UX (ArayÃ¼z)"),e.createElement("option",{value:"crash"},"ğŸ’¥ Crash (Ã‡Ã¶kme)"))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Ã–nem Derecesi"),e.createElement("select",{className:"form-select",value:t.severity,onChange:a=>r({...t,severity:a.target.value})},e.createElement("option",{value:"low"},"ğŸŸ¢ DÃ¼ÅŸÃ¼k"),e.createElement("option",{value:"medium"},"ğŸŸ¡ Orta"),e.createElement("option",{value:"high"},"ğŸŸ  YÃ¼ksek"),e.createElement("option",{value:"critical"},"ğŸ”´ Kritik")))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"AÃ§Ä±klama *"),e.createElement("textarea",{className:"form-textarea",placeholder:"HatayÄ± detaylÄ± bir ÅŸekilde aÃ§Ä±klayÄ±n...",value:t.description,onChange:a=>r({...t,description:a.target.value}),rows:5})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"HatayÄ± Yeniden OluÅŸturma AdÄ±mlarÄ±"),e.createElement("textarea",{className:"form-textarea",placeholder:`1. Ä°lk adÄ±m
2. Ä°kinci adÄ±m
3. ÃœÃ§Ã¼ncÃ¼ adÄ±m`,value:t.steps_to_reproduce,onChange:a=>r({...t,steps_to_reproduce:a.target.value}),rows:4})),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Beklenen DavranÄ±ÅŸ"),e.createElement("textarea",{className:"form-textarea",placeholder:"Ne olmasÄ±nÄ± bekliyordunuz?",value:t.expected_behavior,onChange:a=>r({...t,expected_behavior:a.target.value}),rows:3})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"GerÃ§ekleÅŸen DavranÄ±ÅŸ"),e.createElement("textarea",{className:"form-textarea",placeholder:"Ne oldu?",value:t.actual_behavior,onChange:a=>r({...t,actual_behavior:a.target.value}),rows:3}))),e.createElement("div",{className:"system-info"},e.createElement("h4",null,"ğŸ“Š Sistem Bilgileri"),e.createElement("div",{className:"info-grid"},e.createElement("div",{className:"info-item"},e.createElement("span",{className:"info-label"},"TarayÄ±cÄ±:"),e.createElement("span",{className:"info-value"},navigator.userAgent.split("(")[1]?.split(")")[0]||"Unknown")),e.createElement("div",{className:"info-item"},e.createElement("span",{className:"info-label"},"Ekran:"),e.createElement("span",{className:"info-value"},t.screen_resolution)),e.createElement("div",{className:"info-item"},e.createElement("span",{className:"info-label"},"URL:"),e.createElement("span",{className:"info-value truncate"},t.url))),e.createElement("button",{className:"capture-errors-btn",onClick:d},"ğŸ“ Konsol HatalarÄ±nÄ± Yakala")),e.createElement("div",{className:"preview-section"},e.createElement("h4",null,"ğŸ‘ï¸ Ã–nizleme"),e.createElement("div",{className:"error-preview"},e.createElement("div",{className:"preview-header"},e.createElement("span",{className:"preview-icon"},E(t.category)),e.createElement("span",{className:"preview-title"},t.title||"BaÅŸlÄ±k"),e.createElement("span",{className:"preview-severity",style:{backgroundColor:v(t.severity)}},t.severity)),e.createElement("div",{className:"preview-body"},t.description||"AÃ§Ä±klama burada gÃ¶rÃ¼necek..."))),e.createElement("div",{className:"form-actions"},e.createElement("button",{className:"cancel-btn",onClick:o},"Ä°ptal"),e.createElement("button",{className:"submit-btn",onClick:p,disabled:c},c?"â³ GÃ¶nderiliyor...":"ğŸ“¨ Raporu GÃ¶nder"))))))};export{N as default};
