import{r as s,n as e}from"./react-core-Cj7FUMmY.js";import{h as F,t as x}from"./index-iTJBRymP.js";import{aw as K,a as O,ax as q,N as A,ay as M,j as W,as as D}from"./icons-vendor-DnRG7SaF.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BsD1gqUZ.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-MN-5i-Jz.js";import"./crypto-vendor-DK-7ILyQ.js";const U=({onClose:y,fetchWithAuth:l,apiBaseUrl:d})=>{const[b,f]=s.useState("store"),[m,v]=s.useState(0),[w,I]=s.useState([]),[C,B]=s.useState([]),[r,c]=s.useState(!1),[a,j]=s.useState(null),[S,k]=s.useState(""),[p,u]=s.useState(null),T=[{id:"p1",coins:1e3,price:"15 USDT",note:"BaÅŸlangÄ±Ã§ paketi"},{id:"p2",coins:2500,price:"35 USDT",note:"PopÃ¼ler seÃ§im"},{id:"p3",coins:6e3,price:"75 USDT",note:"En iyi deÄŸer"},{id:"p4",coins:15e3,price:"180 USDT",note:"Topluluk paketi"}],_=[{label:"USDT (TRC20)",value:"TGAny6VmDAWdVmTXCPrpsbLKKQQdvyvnWC"},{label:"USDT (ERC20)",value:"0xeaa14d4651a8ea7488289209b9294a1309dde37c"},{label:"SOL (Solana)",value:"Bk6ywhae86fp6BHmGtxabS6ncEGsFxhcnZEWJRZLVr9z"}],[h,R]=s.useState(T[0]),P=async()=>{c(!0);try{const o=await l(`${d}/store/daily-reward/`,{method:"POST"});let n=null;try{n=await o.json()}catch{n=null}if(o.ok&&n){const t={claimed:!!n.claimed,added_coins:typeof n.added_coins=="number"?n.added_coins:0,new_balance:typeof n.new_balance=="number"?n.new_balance:m,streak:typeof n.streak=="number"?n.streak:void 0,reason:n.reason,remaining_seconds:typeof n.remaining_seconds=="number"?n.remaining_seconds:void 0,error:n.error};j(t),t.claimed&&typeof t.new_balance=="number"&&v(t.new_balance),g()}else{const t=n&&(n.error||n.message||n.detail)||"Ä°stek baÅŸarÄ±sÄ±z";j({claimed:!1,error:t})}}catch{j({claimed:!1,error:"Beklenmeyen hata"})}c(!1)},g=()=>{l(`${d}/store/balance/`).then(o=>o.json()).then(o=>v(o.coins)),l(`${d}/store/items/`).then(o=>o.json()).then(o=>I(o)),l(`${d}/store/inventory/`).then(o=>o.json()).then(o=>B(o))};s.useEffect(()=>{g()},[d,l]),s.useEffect(()=>{const o=n=>{n.key==="Escape"&&y()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[y]);const E=async o=>{if(await F("Bu Ã¼rÃ¼nÃ¼ satÄ±n almak istiyor musunuz?")){c(!0);try{const n=await l(`${d}/store/buy/`,{method:"POST",body:JSON.stringify({item_id:o})}),t=await n.json();n.ok?(x.success(t.message),g()):x.error(t.error)}catch{x.error("âŒ Hata oluÅŸtu.")}c(!1)}},H=async o=>{c(!0);try{(await l(`${d}/store/equip/${o}/`,{method:"POST"})).ok&&g()}catch{x.error("Item equip failed")}c(!1)},z=async()=>{const o=S.trim();if(!o){x.error("âŒ LÃ¼tfen iÅŸlem ID girin");return}if(o.length<6){u({success:!1,message:"Ä°ÅŸlem ID Ã§ok kÄ±sa gÃ¶rÃ¼nÃ¼yor"});return}c(!0),u(null);try{const n=await l(`${d}/store/verify-txid/`,{method:"POST",body:JSON.stringify({txid:o})}),t=await n.json();n.ok?(u({success:!0,message:t.message||"Ã–deme doÄŸrulandÄ±!",added_coins:t.added_coins}),g(),k("")):u({success:!1,message:t.error||t.detail||"DoÄŸrulama baÅŸarÄ±sÄ±z"})}catch{u({success:!1,message:"Beklenmeyen hata"})}c(!1)},L=async o=>{try{await navigator.clipboard.writeText(o),x.success("âœ… Adres kopyalandÄ±: "+o)}catch{x.error("âŒ Kopyalama baÅŸarÄ±sÄ±z oldu")}},$=async()=>{try{const o=await navigator.clipboard.readText();o&&k(o.trim())}catch{}};return e.jsx("div",{style:i.overlay,onClick:y,children:e.jsxs("div",{style:i.modal,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:i.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(K,{color:"#f0b232",size:24}),e.jsx("h2",{style:{margin:0,color:"white"},children:"Pawscord MaÄŸaza"})]}),e.jsx("button",{onClick:y,style:i.closeBtn,children:e.jsx(O,{})})]}),e.jsx("div",{style:i.balanceBar,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"Mevcut Bakiye:"}),e.jsxs("strong",{style:{color:"#f0b232",fontSize:"1.2em"},children:[m," Coin"]}),e.jsx("button",{onClick:P,style:i.dailyBtn,disabled:r,children:"ğŸ +10"})]})}),e.jsxs("div",{style:i.tabs,children:[e.jsxs("button",{style:b==="store"?i.activeTab:i.tab,onClick:()=>f("store"),children:[e.jsx(q,{})," MaÄŸaza"]}),e.jsxs("button",{style:b==="deposit"?i.activeTab:i.tab,onClick:()=>f("deposit"),children:[e.jsx(A,{})," PawsCoin SatÄ±n Al"]}),e.jsxs("button",{style:b==="inventory"?i.activeTab:i.tab,onClick:()=>f("inventory"),children:[e.jsx(M,{})," Envanterim"]})]}),e.jsxs("div",{style:i.content,children:[b==="store"&&e.jsxs("div",{style:i.grid,children:[w.map(o=>e.jsxs("div",{style:i.itemCard,children:[e.jsx("div",{style:i.iconPlace,children:o.preview_image?e.jsx("img",{src:o.preview_image,alt:o.name,style:{width:50,height:50}}):e.jsx("span",{style:{fontSize:"2em"},children:"ğŸ"})}),e.jsx("h4",{children:o.name}),e.jsx("p",{style:{fontSize:"0.8em",color:"#999"},children:o.description}),o.rarity&&e.jsxs("span",{style:{fontSize:"0.75em",color:"#b9bbbe",marginBottom:6},children:["Nadirlik: ",o.rarity]}),o.is_owned?e.jsx("button",{style:i.ownedBtn,disabled:!0,children:"Sahipsin"}):e.jsxs("button",{onClick:()=>E(o.id),style:i.buyBtn,disabled:r||m<o.price,children:[m<o.price?e.jsx(W,{}):null," ",o.price," Coin"]})]},o.id)),w.length===0&&e.jsx("p",{style:{color:"#ccc"},children:"MaÄŸazada Ã¼rÃ¼n yok."})]}),b==="inventory"&&e.jsxs("div",{style:i.grid,children:[C.map(o=>e.jsxs("div",{style:{...i.itemCard,border:o.is_equipped?"1px solid #23a559":"1px solid #1e1f22"},children:[e.jsx("div",{style:i.iconPlace,children:o.preview_image?e.jsx("img",{src:o.preview_image,alt:o.name,style:{width:50,height:50}}):e.jsx("span",{style:{fontSize:"2em"},children:"ğŸ’"})}),e.jsx("h4",{children:o.name}),e.jsx("p",{style:{fontSize:"0.8em",color:"#999"},children:o.item_type}),o.is_equipped?e.jsxs("button",{style:i.equippedBtn,disabled:!0,children:[e.jsx(D,{})," KuÅŸanÄ±ldÄ±"]}):e.jsx("button",{onClick:()=>H(o.id),style:i.useBtn,disabled:r,children:"KuÅŸan"})]},o.id)),C.length===0&&e.jsx("p",{style:{color:"#ccc"},children:"HenÃ¼z bir ÅŸey satÄ±n almadÄ±n."})]}),b==="deposit"&&e.jsxs("div",{style:{padding:"10px",color:"white"},children:[e.jsx("h3",{style:{marginTop:0,color:"#f0b232"},children:"ğŸ’° PawsCoin SatÄ±n Al"}),e.jsx("p",{style:{color:"#b9bbbe",fontSize:"0.9em"},children:"Kripto para ile PawsCoin satÄ±n alÄ±n. Ã–demenizi yaptÄ±ktan sonra iÅŸlem ID'sini (TXID) aÅŸaÄŸÄ±ya girin."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12,margin:"16px 0"},children:T.map(o=>{const n=h?.id===o.id;return e.jsxs("div",{onClick:()=>R(o),style:{backgroundColor:n?"#3b3f47":"#202225",border:`1px solid ${n?"#5865f2":"#1e1f22"}`,borderRadius:10,padding:12,cursor:"pointer",display:"flex",flexDirection:"column",gap:6,transition:"border-color 0.2s, background-color 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontWeight:700,color:"white"},children:[o.coins.toLocaleString()," Coin"]}),n&&e.jsx(D,{color:"#23a559"})]}),e.jsx("div",{style:{color:"#f0b232",fontWeight:600},children:o.price}),e.jsx("div",{style:{color:"#b9bbbe",fontSize:"0.8em"},children:o.note})]},o.id)})}),h&&e.jsxs("div",{style:{marginBottom:14,padding:12,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22",color:"#b9bbbe",fontSize:"0.9em"},children:["SeÃ§ilen paket: ",e.jsxs("strong",{style:{color:"white"},children:[h.coins.toLocaleString()," Coin"]})," â€“",e.jsxs("span",{style:{color:"#f0b232",fontWeight:600},children:[" ",h.price]})]}),e.jsxs("div",{style:{marginTop:20,marginBottom:20,padding:15,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#5865f2"},children:"ğŸ“‹ Ã–deme Bilgileri"}),e.jsx("div",{style:{fontSize:"0.85em",color:"#b9bbbe",lineHeight:1.6,display:"flex",flexDirection:"column",gap:8},children:_.map(o=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[e.jsx("p",{style:{margin:0},children:e.jsxs("strong",{children:[o.label,":"]})}),e.jsx("button",{onClick:()=>L(o.value),style:{backgroundColor:"#2f3136",color:"white",border:"1px solid #1e1f22",borderRadius:6,padding:"4px 10px",cursor:"pointer",fontSize:"0.8em"},children:"Kopyala"})]}),e.jsx("code",{style:{display:"block",padding:8,backgroundColor:"#2b2d31",borderRadius:4,wordBreak:"break-all"},children:o.value})]},o.label))}),e.jsx("p",{style:{fontSize:"0.75em",color:"#999",marginTop:10},children:"Ã–deme sonrasÄ± iÅŸlem ID'sini (TXID) aÅŸaÄŸÄ±ya girin. Not: Åu an seÃ§ilen paket bilgisi bilgilendirme amaÃ§lÄ±, TXID doÄŸrulamasÄ± iÅŸlem miktarÄ±nÄ± otomatik algÄ±lamaz."})]}),e.jsxs("div",{style:{marginBottom:15},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"0.9em",color:"#b9bbbe"},children:"Ä°ÅŸlem ID (TXID):"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:S,onChange:o=>k(o.target.value),onKeyDown:o=>{o.key==="Enter"&&(o.preventDefault(),z())},placeholder:"Ä°ÅŸlem ID'sini buraya yapÄ±ÅŸtÄ±rÄ±n",style:{width:"100%",padding:"10px",backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"4px",color:"white",fontSize:"0.9em"},disabled:r}),e.jsx("button",{onClick:$,style:{padding:"0 12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:r?"not-allowed":"pointer",opacity:r?.6:1},disabled:r,children:"YapÄ±ÅŸtÄ±r"})]})]}),e.jsx("button",{onClick:z,style:{width:"100%",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:r?"not-allowed":"pointer",fontSize:"1em",fontWeight:"600",opacity:r?.6:1},disabled:r,children:r?"DoÄŸrulanÄ±yor...":"DoÄŸrula ve Coin Al"}),p&&e.jsxs("div",{style:{marginTop:15,padding:12,backgroundColor:p.success?"#23a55933":"#ff5d5d33",border:`1px solid ${p.success?"#23a559":"#ff5d5d"}`,borderRadius:6,color:p.success?"#23a559":"#ff5d5d"},children:[p.success?"âœ…":"âŒ"," ",p.message,p.added_coins&&e.jsxs("strong",{children:[" (+",p.added_coins," coin)"]})]})]})]}),a&&e.jsx("div",{style:{padding:"10px 20px",borderTop:"1px solid #1e1f22",backgroundColor:"#202225"},children:a.claimed?e.jsxs("div",{style:{color:"#23a559"},children:["ğŸ ",a.added_coins??0," coin aldÄ±n! Yeni bakiye: ",e.jsx("strong",{children:a.new_balance??m}),".",typeof a.streak<"u"&&e.jsxs("span",{style:{marginLeft:8,color:"#b9bbbe"},children:["Streak: ",a.streak]})]}):a.reason==="cooldown"?e.jsxs("div",{style:{color:"#b9bbbe"},children:["â³ GÃ¼nlÃ¼k Ã¶dÃ¼l iÃ§in bekle: ",e.jsx("strong",{children:Math.max(0,a.remaining_seconds??0)})," sn"]}):e.jsxs("div",{style:{color:"#ff5d5d"},children:["âš ï¸ ",a.error||"Ã–dÃ¼l alÄ±namadÄ±."]})})]})})},i={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",boxSizing:"border-box"},modal:{backgroundColor:"#2b2d31",width:"100%",maxWidth:"600px",maxHeight:"90vh",borderRadius:"12px",overflow:"hidden",border:"1px solid #1e1f22",display:"flex",flexDirection:"column"},header:{padding:"20px",backgroundColor:"#202225",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},closeBtn:{background:"none",border:"none",color:"#bbb",cursor:"pointer",fontSize:"1.2em",padding:"10px",minWidth:"44px",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center"},balanceBar:{padding:"10px 12px",backgroundColor:"#2f3136",color:"white",borderBottom:"1px solid #1e1f22",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},tabs:{display:"flex",borderBottom:"1px solid #1e1f22",backgroundColor:"#202225",flexShrink:0},tab:{flex:1,padding:"15px",background:"none",border:"none",color:"#bbb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},activeTab:{flex:1,padding:"15px",background:"rgba(255,255,255,0.05)",border:"none",color:"white",cursor:"pointer",borderBottom:"2px solid #5865f2",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},content:{padding:"20px",overflowY:"auto",flex:1,WebkitOverflowScrolling:"touch",overflowX:"hidden"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"15px",paddingBottom:"20px"},itemCard:{backgroundColor:"#202225",padding:"15px",borderRadius:"8px",textAlign:"center",border:"1px solid #1e1f22",display:"flex",flexDirection:"column",alignItems:"center",color:"white",minHeight:"180px"},iconPlace:{width:60,height:60,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10,flexShrink:0},buyBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},ownedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#40444b",color:"#aaa",border:"none",borderRadius:"4px",width:"100%",fontSize:"0.9em",minHeight:"44px"},useBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#23a559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},equippedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"transparent",color:"#23a559",border:"1px solid #23a559",borderRadius:"4px",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px"},dailyBtn:{padding:"4px 8px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"0.75em",lineHeight:1,minHeight:"24px",marginLeft:"8px"}};export{U as default};
