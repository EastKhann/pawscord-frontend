import{r as c,j as e}from"./react-core-D6cE4lil.js";import{a5 as h,a as w,b6 as S,bs as u,aZ as C,b7 as _,b3 as L}from"./icons-vendor-DT2gd7vx.js";import{t as y,h as I}from"./index-ClHcoIda.js";import"./media-vendor-Du00QUHb.js";import"./router-vendor-wrB4dqw3.js";import"./state-vendor-DnurjGY_.js";import"./crypto-vendor-BYnay7oC.js";import"./ui-vendor-CZOhtEfS.js";const A=(a,l,r)=>{const[s,i]=c.useState({enabled:!1,join_rate_limit:10,new_account_age:7,verification_level:"medium",auto_kick_suspicious:!0,lockdown_mode:!1}),[o,p]=c.useState([]),[b,B]=c.useState({blocked_joins:0,kicked_users:0,raid_attempts:0,last_raid:null}),[v,m]=c.useState(!0),j=async()=>{try{const n=await l(`${r}/moderation/raid-protection/${a}/`);n.ok&&i(await n.json())}catch{}m(!1)},x=async()=>{try{const n=await l(`${r}/moderation/raid-protection/check/`,{method:"POST",body:JSON.stringify({server_id:a})});if(n.ok){const d=await n.json();p(d.recent_activity||[]),d.raid_detected&&y.error(`‚ö†Ô∏è RAID DETECTED!
${d.message}

Automatic protection activated.`)}}catch{}};c.useEffect(()=>{j(),x();const n=setInterval(x,3e4);return()=>clearInterval(n)},[a]);const k=async()=>{try{(await l(`${r}/moderation/raid-protection/enable/`,{method:"POST",body:JSON.stringify({server_id:a,enabled:!s.enabled})})).ok&&i({...s,enabled:!s.enabled})}catch{}},g=async(n,d)=>{const f={...s,[n]:d};i(f);try{await l(`${r}/moderation/raid-protection/update/`,{method:"POST",body:JSON.stringify({server_id:a,...f})})}catch{}};return{protection:s,raidActivity:o,stats:b,loading:v,toggleProtection:k,updateSetting:g,activateLockdown:async()=>{if(await I(`‚ö†Ô∏è LOCKDOWN MODE

This will:
- Block all new joins
- Require manual approval for each user
- Kick suspicious accounts

Activate?`))try{await g("lockdown_mode",!0),y.success("üîí Lockdown Mode Activated!")}catch{}}}},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,backdropFilter:"blur(5px)"},panel:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",overflow:"hidden"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #1e1f22"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerIcon:{fontSize:"24px"},title:{margin:0,color:"#fff",fontSize:"24px",fontWeight:"600"},lockdownBadge:{backgroundColor:"#ed4245",color:"#fff",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"700",animation:"pulse 1.5s infinite"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"24px",padding:"8px",borderRadius:"4px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",padding:"20px",borderBottom:"1px solid #1e1f22"},statCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"16px",textAlign:"center"},statIcon:{fontSize:"32px",marginBottom:"8px"},statValue:{fontSize:"28px",fontWeight:"bold",color:"#fff",marginBottom:"4px"},statLabel:{fontSize:"13px",color:"#b9bbbe"},section:{padding:"20px",borderBottom:"1px solid #1e1f22",overflowY:"auto"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},sectionTitle:{color:"#fff",fontSize:"18px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},masterSwitch:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},switchSlider:{position:"relative",width:"48px",height:"24px",backgroundColor:"#72767d",borderRadius:"24px",transition:"0.3s"},switchLabel:{color:"#fff",fontSize:"14px",fontWeight:"600"},settings:{display:"flex",flexDirection:"column",gap:"20px"},setting:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#1e1f22",borderRadius:"8px"},settingInfo:{flex:1},settingLabel:{color:"#fff",fontSize:"15px",fontWeight:"600",marginBottom:"4px"},settingDesc:{color:"#b9bbbe",fontSize:"13px"},slider:{width:"200px",marginLeft:"20px"},select:{backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"6px",padding:"8px 12px",color:"#fff",fontSize:"14px",marginLeft:"20px",minWidth:"150px"},toggleSwitch:{position:"relative",width:"48px",height:"24px",marginLeft:"20px"},toggleSlider:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:"#72767d",transition:"0.3s",borderRadius:"24px"},lockdownBtn:{backgroundColor:"#ed4245",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",fontWeight:"600",marginLeft:"20px"},lockdownDeactivateBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",fontWeight:"600",marginLeft:"20px"},activityList:{display:"flex",flexDirection:"column",gap:"12px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px",fontSize:"14px"},activityItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#1e1f22",borderRadius:"6px"},activityIcon:{fontSize:"24px"},activityContent:{flex:1},activityText:{color:"#fff",fontSize:"14px",marginBottom:"4px"},activityTime:{color:"#72767d",fontSize:"12px"},activityAction:{marginLeft:"auto"},actionBadge:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",backgroundColor:"#5865f2",color:"#fff"},infoBox:{display:"flex",gap:"16px",padding:"20px",backgroundColor:"rgba(88, 101, 242, 0.1)",borderTop:"1px solid #5865f2"},infoIcon:{fontSize:"24px",color:"#5865f2",marginTop:"4px"},infoContent:{color:"#fff",fontSize:"14px"},infoList:{margin:"8px 0 0 0",paddingLeft:"20px",color:"#b9bbbe"}},N=({serverId:a,fetchWithAuth:l,apiBaseUrl:r,onClose:s})=>{const i=A(a,l,r);return e.jsx("div",{style:t.overlay,onClick:s,children:e.jsxs("div",{style:t.panel,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(h,{style:{...t.headerIcon,color:i.protection.enabled?"#43b581":"#72767d"}}),e.jsx("h2",{style:t.title,children:"Raid Protection"}),i.protection.lockdown_mode&&e.jsxs("span",{style:t.lockdownBadge,children:["üîí"," LOCKDOWN"]})]}),e.jsx("button",{onClick:s,style:t.closeButton,children:e.jsx(w,{})})]}),e.jsxs("div",{style:t.statsGrid,children:[e.jsxs("div",{style:t.statCard,children:[e.jsx(S,{style:{...t.statIcon,color:"#ed4245"}}),e.jsx("div",{style:t.statValue,children:i.stats.blocked_joins}),e.jsx("div",{style:t.statLabel,children:"Blocked Joins"})]}),e.jsxs("div",{style:t.statCard,children:[e.jsx(u,{style:{...t.statIcon,color:"#f0b132"}}),e.jsx("div",{style:t.statValue,children:i.stats.kicked_users}),e.jsx("div",{style:t.statLabel,children:"Auto-Kicked"})]}),e.jsxs("div",{style:t.statCard,children:[e.jsx(C,{style:{...t.statIcon,color:"#f04747"}}),e.jsx("div",{style:t.statValue,children:i.stats.raid_attempts}),e.jsx("div",{style:t.statLabel,children:"Raid Attempts"})]}),e.jsxs("div",{style:t.statCard,children:[e.jsx(_,{style:{...t.statIcon,color:"#5865f2"}}),e.jsx("div",{style:t.statValue,children:i.protection.enabled?"ACTIVE":"OFF"}),e.jsx("div",{style:t.statLabel,children:"Status"})]})]}),e.jsxs("div",{style:t.section,children:[e.jsxs("div",{style:t.sectionHeader,children:[e.jsxs("h3",{style:t.sectionTitle,children:[e.jsx(L,{})," Protection Settings"]}),e.jsxs("label",{style:t.masterSwitch,children:[e.jsx("input",{type:"checkbox",checked:i.protection.enabled,onChange:i.toggleProtection}),e.jsx("span",{style:t.switchSlider}),e.jsx("span",{style:t.switchLabel,children:i.protection.enabled?"Enabled":"Disabled"})]})]}),e.jsxs("div",{style:t.settings,children:[e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsx("div",{style:t.settingLabel,children:"Join Rate Limit"}),e.jsxs("div",{style:t.settingDesc,children:["Maximum users per minute: ",i.protection.join_rate_limit]})]}),e.jsx("input",{type:"range",min:"5",max:"50",value:i.protection.join_rate_limit,onChange:o=>i.updateSetting("join_rate_limit",parseInt(o.target.value)),style:t.slider,disabled:!i.protection.enabled})]}),e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsx("div",{style:t.settingLabel,children:"New Account Age Limit"}),e.jsxs("div",{style:t.settingDesc,children:["Block accounts younger than ",i.protection.new_account_age," days"]})]}),e.jsxs("select",{value:i.protection.new_account_age,onChange:o=>i.updateSetting("new_account_age",parseInt(o.target.value)),style:t.select,disabled:!i.protection.enabled,children:[e.jsx("option",{value:"1",children:"1 day"}),e.jsx("option",{value:"3",children:"3 days"}),e.jsx("option",{value:"7",children:"7 days"}),e.jsx("option",{value:"14",children:"14 days"}),e.jsx("option",{value:"30",children:"30 days"})]})]}),e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsx("div",{style:t.settingLabel,children:"Verification Level"}),e.jsxs("div",{style:t.settingDesc,children:[i.protection.verification_level==="low"&&"Basic: Email verification",i.protection.verification_level==="medium"&&"Medium: Email + Phone",i.protection.verification_level==="high"&&"High: Email + Phone + Captcha"]})]}),e.jsxs("select",{value:i.protection.verification_level,onChange:o=>i.updateSetting("verification_level",o.target.value),style:t.select,disabled:!i.protection.enabled,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsx("div",{style:t.settingLabel,children:"Auto-Kick Suspicious Accounts"}),e.jsx("div",{style:t.settingDesc,children:"Automatically kick accounts flagged as suspicious"})]}),e.jsxs("label",{style:t.toggleSwitch,children:[e.jsx("input",{type:"checkbox",checked:i.protection.auto_kick_suspicious,onChange:o=>i.updateSetting("auto_kick_suspicious",o.target.checked),disabled:!i.protection.enabled}),e.jsx("span",{style:t.toggleSlider})]})]}),e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsxs("div",{style:t.settingLabel,children:["üîí"," Lockdown Mode"]}),e.jsx("div",{style:t.settingDesc,children:"Block ALL new joins (emergency mode)"})]}),i.protection.lockdown_mode?e.jsx("button",{onClick:()=>i.updateSetting("lockdown_mode",!1),style:t.lockdownDeactivateBtn,children:"Deactivate"}):e.jsx("button",{onClick:i.activateLockdown,style:t.lockdownBtn,disabled:!i.protection.enabled,children:"Activate"})]})]})]}),e.jsxs("div",{style:t.section,children:[e.jsxs("h3",{style:t.sectionTitle,children:[e.jsx(u,{})," Recent Activity"]}),e.jsx("div",{style:t.activityList,children:i.raidActivity.length===0?e.jsx("div",{style:t.empty,children:"No suspicious activity detected"}):i.raidActivity.map((o,p)=>e.jsxs("div",{style:t.activityItem,children:[e.jsx("div",{style:t.activityIcon,children:o.type==="raid"?"‚ö†Ô∏è":o.type==="suspicious"?"üëÄ":"‚úÖ"}),e.jsxs("div",{style:t.activityContent,children:[e.jsx("div",{style:t.activityText,children:o.message}),e.jsx("div",{style:t.activityTime,children:new Date(o.timestamp).toLocaleString()})]}),o.action&&e.jsx("div",{style:t.activityAction,children:e.jsx("span",{style:t.actionBadge,children:o.action})})]},p))})]}),e.jsxs("div",{style:t.infoBox,children:[e.jsx(h,{style:t.infoIcon}),e.jsxs("div",{style:t.infoContent,children:[e.jsx("strong",{children:"How Raid Protection Works:"}),e.jsxs("ul",{style:t.infoList,children:[e.jsx("li",{children:"Monitors join rate (users per minute)"}),e.jsx("li",{children:"Checks account age and activity"}),e.jsx("li",{children:"Auto-kicks suspicious patterns"}),e.jsx("li",{children:"Activates lockdown during active raids"})]})]})]})]})})};export{N as default};
