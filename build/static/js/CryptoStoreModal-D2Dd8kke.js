var E=Object.defineProperty;var s=(t,l)=>E(t,"name",{value:l,configurable:!0});import{r as x,j as e}from"./react-core-Djgtqrmb.js";import{h as P,a9 as S,aq as R,a as H,ar as A,J as L,as as q}from"./icons-vendor-BW7dxHkX.js";import{t as m,e as K,c as $}from"./index-D_luy7FO.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const T=[{id:"p1",coins:1e3,price:"15 USDT",note:"Ba≈ülangƒ±√ß paketi"},{id:"p2",coins:2500,price:"35 USDT",note:"Pop√ºler se√ßim"},{id:"p3",coins:6e3,price:"75 USDT",note:"En iyi deƒüer"},{id:"p4",coins:15e3,price:"180 USDT",note:"Topluluk paketi"}],O=[{label:"USDT (TRC20)",value:"TGAny6VmDAWdVmTXCPrpsbLKKQQdvyvnWC"},{label:"USDT (ERC20)",value:"0xeaa14d4651a8ea7488289209b9294a1309dde37c"},{label:"SOL (Solana)",value:"Bk6ywhae86fp6BHmGtxabS6ncEGsFxhcnZEWJRZLVr9z"}],F=s(({fetchWithAuth:t,apiBaseUrl:l,onClose:b})=>{const[c,a]=x.useState("store"),[n,u]=x.useState(0),[j,v]=x.useState([]),[d,g]=x.useState([]),[I,y]=x.useState(!1),[D,k]=x.useState(null),[C,w]=x.useState(""),[z,h]=x.useState(null),[B,_]=x.useState(T[0]),f=s(()=>{t(`${l}/store/balance/`).then(o=>o.json()).then(o=>u(o.coins)),t(`${l}/store/items/`).then(o=>o.json()).then(o=>v(o)),t(`${l}/store/inventory/`).then(o=>o.json()).then(o=>g(o))},"refreshData");return x.useEffect(()=>{f()},[l,t]),x.useEffect(()=>{const o=s(i=>{i.key==="Escape"&&b()},"handleEsc");return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[b]),{activeTab:c,setActiveTab:a,balance:n,storeItems:j,inventory:d,loading:I,dailyInfo:D,txid:C,setTxid:w,txidResult:z,selectedPack:B,setSelectedPack:_,handleDailyClaim:s(async()=>{y(!0);try{const o=await t(`${l}/store/daily-reward/`,{method:"POST"});let i=null;try{i=await o.json()}catch{i=null}if(o.ok&&i){const p={claimed:!!i.claimed,added_coins:typeof i.added_coins=="number"?i.added_coins:0,new_balance:typeof i.new_balance=="number"?i.new_balance:n,streak:typeof i.streak=="number"?i.streak:void 0,reason:i.reason,remaining_seconds:typeof i.remaining_seconds=="number"?i.remaining_seconds:void 0,error:i.error};k(p),p.claimed&&typeof p.new_balance=="number"&&u(p.new_balance),f()}else{const p=i&&(i.error||i.message||i.detail)||"ƒ∞stek ba≈üarƒ±sƒ±z";k({claimed:!1,error:p})}}catch{k({claimed:!1,error:"Beklenmeyen hata"})}y(!1)},"handleDailyClaim"),handleBuy:s(async o=>{if(await K("Bu √ºr√ºn√º satƒ±n almak istiyor musunuz?")){y(!0);try{const i=await t(`${l}/store/buy/`,{method:"POST",body:JSON.stringify({item_id:o})}),p=await i.json();i.ok?(m.success(p.message),f()):m.error(p.error)}catch{m.error("‚ùå Hata olu≈ütu.")}y(!1)}},"handleBuy"),handleEquip:s(async o=>{y(!0);try{(await t(`${l}/store/equip/${o}/`,{method:"POST"})).ok&&f()}catch{m.error("Item equip failed")}y(!1)},"handleEquip"),handleVerifyTxid:s(async()=>{const o=C.trim();if(!o){m.error("‚ùå L√ºtfen i≈ülem ID girin");return}if(o.length<6){h({success:!1,message:"ƒ∞≈ülem ID √ßok kƒ±sa g√∂r√ºn√ºyor"});return}y(!0),h(null);try{const i=await t(`${l}/store/verify-txid/`,{method:"POST",body:JSON.stringify({txid:o})}),p=await i.json();i.ok?(h({success:!0,message:p.message||"√ñdeme doƒürulandƒ±!",added_coins:p.added_coins}),f(),w("")):h({success:!1,message:p.error||p.detail||"Doƒürulama ba≈üarƒ±sƒ±z"})}catch{h({success:!1,message:"Beklenmeyen hata"})}y(!1)},"handleVerifyTxid"),handleCopyAddress:s(async o=>{try{await navigator.clipboard.writeText(o),m.success("‚úÖ Adres kopyalandƒ±: "+o)}catch{m.error("‚ùå Kopyalama ba≈üarƒ±sƒ±z oldu")}},"handleCopyAddress"),handlePasteTxid:s(async()=>{try{const o=await navigator.clipboard.readText();o&&w(o.trim())}catch{}},"handlePasteTxid")}},"useCryptoStore"),r={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",boxSizing:"border-box"},modal:{backgroundColor:"#2b2d31",width:"100%",maxWidth:"600px",maxHeight:"90vh",borderRadius:"12px",overflow:"hidden",border:"1px solid #1e1f22",display:"flex",flexDirection:"column"},header:{padding:"20px",backgroundColor:"#202225",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},closeBtn:{background:"none",border:"none",color:"#bbb",cursor:"pointer",fontSize:"1.2em",padding:"10px",minWidth:"44px",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center"},balanceBar:{padding:"10px 12px",backgroundColor:"#2f3136",color:"white",borderBottom:"1px solid #1e1f22",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},tabs:{display:"flex",borderBottom:"1px solid #1e1f22",backgroundColor:"#202225",flexShrink:0},tab:{flex:1,padding:"15px",background:"none",border:"none",color:"#bbb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},activeTab:{flex:1,padding:"15px",background:"rgba(255,255,255,0.05)",border:"none",color:"white",cursor:"pointer",borderBottom:"2px solid #5865f2",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},content:{padding:"20px",overflowY:"auto",flex:1,WebkitOverflowScrolling:"touch",overflowX:"hidden"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"15px",paddingBottom:"20px"},itemCard:{backgroundColor:"#202225",padding:"15px",borderRadius:"8px",textAlign:"center",border:"1px solid #1e1f22",display:"flex",flexDirection:"column",alignItems:"center",color:"white",minHeight:"180px"},iconPlace:{width:60,height:60,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10,flexShrink:0},buyBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},ownedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#40444b",color:"#aaa",border:"none",borderRadius:"4px",width:"100%",fontSize:"0.9em",minHeight:"44px"},useBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#23a559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},equippedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"transparent",color:"#23a559",border:"1px solid #23a559",borderRadius:"4px",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px"},dailyBtn:{padding:"4px 8px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"0.75em",lineHeight:1,minHeight:"24px",marginLeft:"8px"}},M=s(({storeItems:t,loading:l,balance:b,handleBuy:c})=>e.jsxs("div",{style:r.grid,children:[t.map(a=>e.jsxs("div",{style:r.itemCard,children:[e.jsx("div",{style:r.iconPlace,children:a.preview_image?e.jsx("img",{src:a.preview_image,alt:a.name,style:{width:50,height:50}}):e.jsx("span",{style:{fontSize:"2em"},children:"üéÅ"})}),e.jsx("h4",{children:a.name}),e.jsx("p",{style:{fontSize:"0.8em",color:"#999"},children:a.description}),a.rarity&&e.jsxs("span",{style:{fontSize:"0.75em",color:"#b9bbbe",marginBottom:6},children:["Nadirlik: ",a.rarity]}),a.is_owned?e.jsx("button",{style:r.ownedBtn,disabled:!0,children:"Sahipsin"}):e.jsxs("button",{onClick:s(()=>c(a.id),"onClick"),style:r.buyBtn,disabled:l||b<a.price,children:[b<a.price?e.jsx(P,{}):null," ",a.price," Coin"]})]},a.id)),t.length===0&&e.jsx("p",{style:{color:"#ccc"},children:"Maƒüazada √ºr√ºn yok."})]}),"StoreTab"),W=s(({inventory:t,loading:l,handleEquip:b})=>e.jsxs("div",{style:r.grid,children:[t.map(c=>e.jsxs("div",{style:{...r.itemCard,border:c.is_equipped?"1px solid #23a559":"1px solid #1e1f22"},children:[e.jsx("div",{style:r.iconPlace,children:c.preview_image?e.jsx("img",{src:c.preview_image,alt:c.name,style:{width:50,height:50}}):e.jsx("span",{style:{fontSize:"2em"},children:"üéí"})}),e.jsx("h4",{children:c.name}),e.jsx("p",{style:{fontSize:"0.8em",color:"#999"},children:c.item_type}),c.is_equipped?e.jsxs("button",{style:r.equippedBtn,disabled:!0,children:[e.jsx(S,{})," Ku≈üanƒ±ldƒ±"]}):e.jsx("button",{onClick:s(()=>b(c.id),"onClick"),style:r.useBtn,disabled:l,children:"Ku≈üan"})]},c.id)),t.length===0&&e.jsx("p",{style:{color:"#ccc"},children:"Hen√ºz bir ≈üey satƒ±n almadƒ±n."})]}),"InventoryTab"),X=s(({selectedPack:t,setSelectedPack:l,txid:b,setTxid:c,txidResult:a,loading:n,handleVerifyTxid:u,handleCopyAddress:j,handlePasteTxid:v})=>e.jsxs("div",{style:{padding:"10px",color:"white"},children:[e.jsxs("h3",{style:{marginTop:0,color:"#f0b232"},children:["üí∞"," PawsCoin Satƒ±n Al"]}),e.jsx("p",{style:{color:"#b9bbbe",fontSize:"0.9em"},children:"Kripto para ile PawsCoin satƒ±n alƒ±n. √ñdemenizi yaptƒ±ktan sonra i≈ülem ID'sini (TXID) a≈üaƒüƒ±ya girin."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12,margin:"16px 0"},children:T.map(d=>{const g=t?.id===d.id;return e.jsxs("div",{onClick:s(()=>l(d),"onClick"),style:{backgroundColor:g?"#3b3f47":"#202225",border:`1px solid ${g?"#5865f2":"#1e1f22"}`,borderRadius:10,padding:12,cursor:"pointer",display:"flex",flexDirection:"column",gap:6,transition:"border-color 0.2s, background-color 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontWeight:700,color:"white"},children:[d.coins.toLocaleString()," Coin"]}),g&&e.jsx(S,{color:"#23a559"})]}),e.jsx("div",{style:{color:"#f0b232",fontWeight:600},children:d.price}),e.jsx("div",{style:{color:"#b9bbbe",fontSize:"0.8em"},children:d.note})]},d.id)})}),t&&e.jsxs("div",{style:{marginBottom:14,padding:12,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22",color:"#b9bbbe",fontSize:"0.9em"},children:["Se√ßilen paket: ",e.jsxs("strong",{style:{color:"white"},children:[t.coins.toLocaleString()," Coin"]})," ","‚Äì",e.jsxs("span",{style:{color:"#f0b232",fontWeight:600},children:[" ",t.price]})]}),e.jsxs("div",{style:{marginTop:20,marginBottom:20,padding:15,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22"},children:[e.jsxs("h4",{style:{margin:"0 0 10px 0",color:"#5865f2"},children:["üìã"," √ñdeme Bilgileri"]}),e.jsx("div",{style:{fontSize:"0.85em",color:"#b9bbbe",lineHeight:1.6,display:"flex",flexDirection:"column",gap:8},children:O.map(d=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[e.jsx("p",{style:{margin:0},children:e.jsxs("strong",{children:[d.label,":"]})}),e.jsx("button",{onClick:s(()=>j(d.value),"onClick"),style:{backgroundColor:"#2f3136",color:"white",border:"1px solid #1e1f22",borderRadius:6,padding:"4px 10px",cursor:"pointer",fontSize:"0.8em"},children:"Kopyala"})]}),e.jsx("code",{style:{display:"block",padding:8,backgroundColor:"#2b2d31",borderRadius:4,wordBreak:"break-all"},children:d.value})]},d.label))}),e.jsx("p",{style:{fontSize:"0.75em",color:"#999",marginTop:10},children:"√ñdeme sonrasƒ± i≈ülem ID'sini (TXID) a≈üaƒüƒ±ya girin. Not: ≈ûu an se√ßilen paket bilgisi bilgilendirme ama√ßlƒ±, TXID doƒürulamasƒ± i≈ülem miktarƒ±nƒ± otomatik algƒ±lamaz."})]}),e.jsxs("div",{style:{marginBottom:15},children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:"0.9em",color:"#b9bbbe"},children:["ƒ∞","≈ülem ID (TXID):"]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:b,onChange:s(d=>c(d.target.value),"onChange"),onKeyDown:s(d=>{d.key==="Enter"&&(d.preventDefault(),u())},"onKeyDown"),placeholder:"ƒ∞≈ülem ID'sini buraya yapƒ±≈ütƒ±rƒ±n",style:{width:"100%",padding:"10px",backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"4px",color:"white",fontSize:"0.9em"},disabled:n}),e.jsx("button",{onClick:v,style:{padding:"0 12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",opacity:n?.6:1},disabled:n,children:"Yapƒ±≈ütƒ±r"})]})]}),e.jsx("button",{onClick:u,style:{width:"100%",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"1em",fontWeight:"600",opacity:n?.6:1},disabled:n,children:n?"Doƒürulanƒ±yor...":"Doƒürula ve Coin Al"}),a&&e.jsxs("div",{style:{marginTop:15,padding:12,backgroundColor:a.success?"#23a55933":"#ff5d5d33",border:`1px solid ${a.success?"#23a559":"#ff5d5d"}`,borderRadius:6,color:a.success?"#23a559":"#ff5d5d"},children:[a.success?"‚úÖ":"‚ùå"," ",a.message,a.added_coins&&e.jsxs("strong",{children:[" (+",a.added_coins," coin)"]})]})]}),"DepositTab"),se=s(({onClose:t,fetchWithAuth:l,apiBaseUrl:b})=>{const{overlayProps:c,dialogProps:a}=$({onClose:t,label:"Kripto Maƒüaza"}),n=F({fetchWithAuth:l,apiBaseUrl:b,onClose:t});return e.jsx("div",{style:r.overlay,...c,children:e.jsxs("div",{style:r.modal,...a,children:[e.jsxs("div",{style:r.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(R,{color:"#f0b232",size:24}),e.jsxs("h2",{style:{margin:0,color:"white"},children:["Pawscord Ma","ƒü","aza"]})]}),e.jsx("button",{onClick:t,style:r.closeBtn,children:e.jsx(H,{})})]}),e.jsx("div",{style:r.balanceBar,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"Mevcut Bakiye:"}),e.jsxs("strong",{style:{color:"#f0b232",fontSize:"1.2em"},children:[n.balance," Coin"]}),e.jsxs("button",{onClick:n.handleDailyClaim,style:r.dailyBtn,disabled:n.loading,children:["üéÅ"," +10"]})]})}),e.jsxs("div",{style:r.tabs,children:[e.jsxs("button",{style:n.activeTab==="store"?r.activeTab:r.tab,onClick:s(()=>n.setActiveTab("store"),"onClick"),children:[e.jsx(A,{})," Ma","ƒü","aza"]}),e.jsxs("button",{style:n.activeTab==="deposit"?r.activeTab:r.tab,onClick:s(()=>n.setActiveTab("deposit"),"onClick"),children:[e.jsx(L,{})," PawsCoin Sat","ƒ±","n Al"]}),e.jsxs("button",{style:n.activeTab==="inventory"?r.activeTab:r.tab,onClick:s(()=>n.setActiveTab("inventory"),"onClick"),children:[e.jsx(q,{})," Envanterim"]})]}),e.jsxs("div",{style:r.content,children:[n.activeTab==="store"&&e.jsx(M,{storeItems:n.storeItems,loading:n.loading,balance:n.balance,handleBuy:n.handleBuy}),n.activeTab==="inventory"&&e.jsx(W,{inventory:n.inventory,loading:n.loading,handleEquip:n.handleEquip}),n.activeTab==="deposit"&&e.jsx(X,{...n})]}),n.dailyInfo&&e.jsx("div",{style:{padding:"10px 20px",borderTop:"1px solid #1e1f22",backgroundColor:"#202225"},children:n.dailyInfo.claimed?e.jsxs("div",{style:{color:"#23a559"},children:["üéÅ"," ",n.dailyInfo.added_coins??0," coin ald","ƒ±","n! Yeni bakiye: ",e.jsx("strong",{children:n.dailyInfo.new_balance??n.balance}),".",typeof n.dailyInfo.streak<"u"&&e.jsxs("span",{style:{marginLeft:8,color:"#b9bbbe"},children:["Streak: ",n.dailyInfo.streak]})]}):n.dailyInfo.reason==="cooldown"?e.jsxs("div",{style:{color:"#b9bbbe"},children:["‚è≥"," G","√º","nl","√º","k ","√∂","d","√º","l i","√ß","in bekle: ",e.jsx("strong",{children:Math.max(0,n.dailyInfo.remaining_seconds??0)})," sn"]}):e.jsxs("div",{style:{color:"#ff5d5d"},children:["‚ö†Ô∏è"," ",n.dailyInfo.error||"√ñd√ºl alƒ±namadƒ±."]})})]})})},"CryptoStoreModal");export{se as default};
