var S=Object.defineProperty;var o=(i,a)=>S(i,"name",{value:a,configurable:!0});import{r as n,j as e}from"./react-core-Djgtqrmb.js";import{i as p,a as b,an as C,f as v}from"./icons-vendor-BW7dxHkX.js";import{t as r}from"./index-GGLPABCW.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const F=o(({fetchWithAuth:i,apiBaseUrl:a,roomSlug:x,onClose:y})=>{const[f,m]=n.useState([]),[l,g]=n.useState(""),[k,u]=n.useState(!0);n.useEffect(()=>{c()},[]);const c=o(async()=>{try{u(!0);const t=await i(`${a}/stickies/list/?room_slug=${x}`);if(t.ok){const d=await t.json();m(d)}}catch{}finally{u(!1)}},"loadStickies"),h=o(async()=>{if(!l.trim()){r.error("Mesaj girin");return}try{(await i(`${a}/stickies/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_slug:x,message:l})})).ok?(r.success("Sticky mesaj oluşturuldu"),g(""),c()):r.error("Sticky oluşturulamadı")}catch{r.error("Bir hata oluştu")}},"createSticky"),j=o(async t=>{try{(await i(`${a}/stickies/${t}/delete/`,{method:"DELETE"})).ok?(r.success("Sticky mesaj silindi"),c()):r.error("Sticky silinemedi")}catch{r.error("Bir hata oluştu")}},"deleteSticky");return e.jsx("div",{style:s.overlay,onClick:y,children:e.jsxs("div",{style:s.modal,onClick:o(t=>t.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:s.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(p,{style:{color:"#faa61a"}}),e.jsx("h2",{style:{margin:0},children:"Sticky Mesajlar"})]}),e.jsx(b,{onClick:y,style:s.closeBtn})]}),e.jsxs("div",{style:s.createSection,children:[e.jsx("textarea",{value:l,onChange:o(t=>g(t.target.value),"onChange"),placeholder:"Bu mesaj kanalın en üstünde sabitlenecek...",style:s.textarea,rows:3}),e.jsxs("button",{onClick:h,style:s.createBtn,children:[e.jsx(C,{})," Sticky Oluştur"]})]}),e.jsx("div",{style:s.content,children:k?e.jsx("div",{style:s.loading,children:"Yükleniyor..."}):f.length===0?e.jsxs("div",{style:s.empty,children:[e.jsx(p,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),e.jsx("p",{children:"Henüz sticky mesaj yok"}),e.jsx("p",{style:{fontSize:"12px",color:"#888"},children:"Sticky mesajlar kanalın en üstünde sabitlenir"})]}):f.map(t=>e.jsxs("div",{style:s.stickyCard,children:[e.jsx("div",{style:s.stickyIcon,children:e.jsx(p,{style:{color:"#faa61a"}})}),e.jsxs("div",{style:s.stickyContent,children:[e.jsx("div",{style:s.stickyMessage,children:t.message}),e.jsxs("div",{style:s.stickyMeta,children:["Oluşturan: ",t.created_by," • ",new Date(t.created_at).toLocaleString("tr-TR")]})]}),e.jsx("button",{onClick:o(()=>j(t.id),"onClick"),style:s.deleteBtn,children:e.jsx(v,{})})]},t.id))})]})})},"StickyMessagesPanel"),s={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},createSection:{padding:"20px",borderBottom:"1px solid #333"},textarea:{width:"100%",padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",resize:"vertical",marginBottom:"10px"},createBtn:{width:"100%",backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},stickyCard:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#faa61a1a",border:"1px solid #faa61a",borderRadius:"8px",marginBottom:"10px"},stickyIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#faa61a33",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},stickyContent:{flex:1},stickyMessage:{color:"#dcddde",fontSize:"14px",marginBottom:"8px",lineHeight:"1.5"},stickyMeta:{fontSize:"12px",color:"#888"},deleteBtn:{backgroundColor:"#f04747",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",alignSelf:"flex-start"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{F as default};
