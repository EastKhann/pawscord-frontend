import{r as o,z as i,l as S,aI as R,v as E}from"./react-core-B6hadH-M.js";import{t as a}from"./index-D_6pZib5.js";const v=({fetchWithAuth:n,apiBaseUrl:s,roomSlug:d,onClose:p})=>{const[y,f]=o.useState([]),[c,m]=o.useState(""),[u,x]=o.useState(!0);o.useEffect(()=>{l()},[]);const l=async()=>{try{x(!0);const e=await n(`${s}/stickies/list/?room_slug=${d}`);if(e.ok){const r=await e.json();f(r)}}catch(e){console.error("Sticky yükleme hatası:",e)}finally{x(!1)}},g=async()=>{if(!c.trim()){a.error("Mesaj girin");return}try{(await n(`${s}/stickies/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_slug:d,message:c})})).ok?(a.success("Sticky mesaj oluşturuldu"),m(""),l()):a.error("Sticky oluşturulamadı")}catch(e){console.error("Sticky oluşturma hatası:",e),a.error("Bir hata oluştu")}},k=async e=>{try{(await n(`${s}/stickies/${e}/delete/`,{method:"DELETE"})).ok?(a.success("Sticky mesaj silindi"),l()):a.error("Sticky silinemedi")}catch(r){console.error("Sticky silme hatası:",r),a.error("Bir hata oluştu")}};return React.createElement("div",{style:t.overlay,onClick:p},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(i,{style:{color:"#faa61a"}}),React.createElement("h2",{style:{margin:0}},"Sticky Mesajlar")),React.createElement(S,{onClick:p,style:t.closeBtn})),React.createElement("div",{style:t.createSection},React.createElement("textarea",{value:c,onChange:e=>m(e.target.value),placeholder:"Bu mesaj kanalın en üstünde sabitlenecek...",style:t.textarea,rows:3}),React.createElement("button",{onClick:g,style:t.createBtn},React.createElement(R,null)," Sticky Oluştur")),React.createElement("div",{style:t.content},u?React.createElement("div",{style:t.loading},"Yükleniyor..."):y.length===0?React.createElement("div",{style:t.empty},React.createElement(i,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),React.createElement("p",null,"Henüz sticky mesaj yok"),React.createElement("p",{style:{fontSize:"12px",color:"#888"}},"Sticky mesajlar kanalın en üstünde sabitlenir")):y.map(e=>React.createElement("div",{key:e.id,style:t.stickyCard},React.createElement("div",{style:t.stickyIcon},React.createElement(i,{style:{color:"#faa61a"}})),React.createElement("div",{style:t.stickyContent},React.createElement("div",{style:t.stickyMessage},e.message),React.createElement("div",{style:t.stickyMeta},"Oluşturan: ",e.created_by," • ",new Date(e.created_at).toLocaleString("tr-TR"))),React.createElement("button",{onClick:()=>k(e.id),style:t.deleteBtn},React.createElement(E,null)))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},createSection:{padding:"20px",borderBottom:"1px solid #333"},textarea:{width:"100%",padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",resize:"vertical",marginBottom:"10px"},createBtn:{width:"100%",backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},stickyCard:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#faa61a1a",border:"1px solid #faa61a",borderRadius:"8px",marginBottom:"10px"},stickyIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#faa61a33",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},stickyContent:{flex:1},stickyMessage:{color:"#dcddde",fontSize:"14px",marginBottom:"8px",lineHeight:"1.5"},stickyMeta:{fontSize:"12px",color:"#888"},deleteBtn:{backgroundColor:"#f04747",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",alignSelf:"flex-start"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{v as default};
