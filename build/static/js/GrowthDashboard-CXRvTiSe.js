import{r as d,j as e}from"./react-vendor-D8Fi5F9E.js";import{a as K}from"./index-B9ygI19o.js";import{R as n,L as $,C as v,X as u,Y as N,T as h,f as g,g as w,B as y,h as t,j as C,k as A,l as U}from"./chart-vendor-Bq6p6uOO.js";function T(){const[i,k]=d.useState([]),[r,R]=d.useState({}),[F,D]=d.useState(!0);d.useEffect(()=>{o();const s=setInterval(o,300*1e3);return()=>clearInterval(s)},[]);const o=async()=>{try{const s=await K.get("/api/growth/dashboard/");k(s.data.metrics),R(s.data.totals)}catch(s){console.error("Failed to load dashboard:",s)}finally{D(!1)}};if(F)return e.jsx("div",{className:"loading",children:"Loading growth dashboard..."});const L=i.reduce((s,a)=>(Object.entries(a.sources||{}).forEach(([c,j])=>{s[c]=(s[c]||0)+j}),s),{}),f=Object.entries(L).map(([s,a])=>({name:s.charAt(0).toUpperCase()+s.slice(1),value:a})),p=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],b=i.length>0?(i.reduce((s,a)=>s+a.active_users,0)/i.length).toFixed(0):0,x=i.slice(-7).reduce((s,a)=>s+a.new_users,0),l=i.slice(-14,-7).reduce((s,a)=>s+a.new_users,0),m=l>0?((x-l)/l*100).toFixed(1):0;return e.jsxs("div",{className:"growth-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h1",{children:"ðŸ“ˆ Growth Dashboard"}),e.jsx("button",{onClick:o,className:"refresh-btn",children:"ðŸ”„ Refresh"})]}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:"ðŸ‘¥"}),e.jsx("div",{className:"metric-value",children:r.users?.toLocaleString()}),e.jsx("div",{className:"metric-label",children:"Total Users"}),e.jsxs("div",{className:"metric-change positive",children:["+",x," this week"]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:"âš¡"}),e.jsx("div",{className:"metric-value",children:b}),e.jsx("div",{className:"metric-label",children:"Avg Daily Active"}),e.jsxs("div",{className:"metric-change",children:[(b/r.users*100).toFixed(1),"% rate"]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:"ðŸ’°"}),e.jsxs("div",{className:"metric-value",children:["$",r.revenue?.toLocaleString()]}),e.jsx("div",{className:"metric-label",children:"Total Revenue"}),e.jsxs("div",{className:"metric-change positive",children:["MRR: $",(r.revenue/12).toFixed(2)]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-icon",children:"ðŸ“§"}),e.jsx("div",{className:"metric-value",children:r.waitlist?.toLocaleString()}),e.jsx("div",{className:"metric-label",children:"Waitlist Signups"}),e.jsxs("div",{className:"metric-change",children:[(r.waitlist/(r.users||1)*100).toFixed(0),"% conversion"]})]})]}),e.jsxs("div",{className:"growth-rate-banner",children:[e.jsx("h3",{children:"ðŸ“Š Week-over-Week Growth"}),e.jsxs("div",{className:`growth-percentage ${m>0?"positive":"negative"}`,children:[m>0?"+":"",m,"%"]}),e.jsxs("p",{children:["Last week: ",x," users | Previous week: ",l," users"]})]}),e.jsxs("div",{className:"charts-grid",children:[e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"New Users (Last 14 Days)"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs($,{data:i,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(N,{}),e.jsx(h,{}),e.jsx(g,{}),e.jsx(w,{type:"monotone",dataKey:"new_users",stroke:"#8884d8",strokeWidth:2,name:"New Users"}),e.jsx(w,{type:"monotone",dataKey:"active_users",stroke:"#82ca9d",strokeWidth:2,name:"Active Users"})]})})]}),e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Revenue & Premium Signups"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs(y,{data:i,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(N,{}),e.jsx(h,{}),e.jsx(g,{}),e.jsx(t,{dataKey:"revenue",fill:"#82ca9d",name:"Revenue ($)"}),e.jsx(t,{dataKey:"premium",fill:"#ffc658",name:"Premium Signups"})]})})]}),e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Traffic Sources"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs(C,{children:[e.jsx(A,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s}: ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:f.map((s,a)=>e.jsx(U,{fill:p[a%p.length]},`cell-${a}`))}),e.jsx(h,{})]})})]}),e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:"Source Breakdown (Last 7 Days)"}),e.jsx(n,{width:"100%",height:300,children:e.jsxs(y,{data:i.slice(-7),children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(N,{}),e.jsx(h,{}),e.jsx(g,{}),e.jsx(t,{dataKey:"sources.producthunt",stackId:"a",fill:"#ff6384",name:"ProductHunt"}),e.jsx(t,{dataKey:"sources.reddit",stackId:"a",fill:"#36a2eb",name:"Reddit"}),e.jsx(t,{dataKey:"sources.hackernews",stackId:"a",fill:"#ffce56",name:"Hacker News"}),e.jsx(t,{dataKey:"sources.organic",stackId:"a",fill:"#4bc0c0",name:"Organic"}),e.jsx(t,{dataKey:"sources.referral",stackId:"a",fill:"#9966ff",name:"Referral"}),e.jsx(t,{dataKey:"sources.paid",stackId:"a",fill:"#ff9f40",name:"Paid Ads"})]})})]})]}),e.jsxs("div",{className:"stats-table-card",children:[e.jsx("h3",{children:"ðŸ“… Daily Statistics"}),e.jsxs("table",{className:"stats-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"New Users"}),e.jsx("th",{children:"Active Users"}),e.jsx("th",{children:"Premium"}),e.jsx("th",{children:"Revenue"}),e.jsx("th",{children:"Top Source"})]})}),e.jsx("tbody",{children:i.slice().reverse().map((s,a)=>{const c=Object.entries(s.sources||{}).sort((j,S)=>S[1]-j[1])[0];return e.jsxs("tr",{children:[e.jsx("td",{children:s.date}),e.jsx("td",{className:"number",children:s.new_users}),e.jsx("td",{className:"number",children:s.active_users}),e.jsx("td",{className:"number",children:s.premium}),e.jsxs("td",{className:"number",children:["$",s.revenue]}),e.jsx("td",{children:c?c[0]:"N/A"})]},a)})})]})]}),e.jsxs("div",{className:"goals-card",children:[e.jsx("h3",{children:"ðŸŽ¯ Launch Goals (Jan 22 - Feb 5)"}),e.jsxs("div",{className:"goal-item",children:[e.jsx("div",{className:"goal-label",children:"1000 Users"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${Math.min(r.users/1e3*100,100)}%`}})}),e.jsxs("div",{className:"goal-value",children:[r.users," / 1000 (",(r.users/1e3*100).toFixed(1),"%)"]})]}),e.jsxs("div",{className:"goal-item",children:[e.jsx("div",{className:"goal-label",children:"$250 MRR"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${Math.min(r.revenue/12/250*100,100)}%`}})}),e.jsxs("div",{className:"goal-value",children:["$",(r.revenue/12).toFixed(2)," / $250"]})]}),e.jsxs("div",{className:"goal-item",children:[e.jsx("div",{className:"goal-label",children:"200 Waitlist"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${Math.min(r.waitlist/200*100,100)}%`}})}),e.jsxs("div",{className:"goal-value",children:[r.waitlist," / 200 (",(r.waitlist/200*100).toFixed(1),"%)"]})]})]})]})}export{T as default};
