{"version":3,"file":"VoiceChatPanel-Dov42lJK.js","sources":["../../../src/VoiceChatPanel/UserVideoCard/useVideoAudio.js","../../../src/VoiceChatPanel/avatarUtils.js","../../../src/VoiceChatPanel/UserVideoCard/VideoDisplay.js","../../../src/VoiceChatPanel/UserVideoCard/UserOverlay.js","../../../src/VoiceChatPanel/ActionButton.js","../../../src/VoiceChatPanel/UserVideoCard/HoverControls.js","../../../src/VoiceChatPanel/UserVideoCard.js","../../../src/VoiceChatPanel/VoiceControlBtn.js","../../../src/VoiceChatPanel/ControlBar.js","../../../src/VoiceChatPanel/VideoFeed.js","../../../src/VoiceChatPanel/MiniButton.js","../../../src/VoiceChatPanel/MinimizedView.js","../../../src/VoiceChatPanel/useVoiceMonitoring.js","../../../src/VoiceChatPanel/voicePanelStyles.js","../../../src/VoiceChatPanel.js"],"sourcesContent":["// frontend/src/VoiceChatPanel/UserVideoCard/useVideoAudio.js\r\n// ğŸ¤ Custom hook for video/audio stream management with WebAudio GainNode amplification\r\n\r\nimport { useRef, useEffect } from 'react';\r\n\r\n/**\r\n * useVideoAudio Hook\r\n * Manages video and audio stream binding with volume control.\r\n * Supports >100% volume via WebAudio API GainNode amplification.\r\n * \r\n * @param {MediaStream} stream - The media stream to bind\r\n * @param {Object} user - User object with isLocal, volume, username\r\n * @returns {{ videoRef: React.RefObject, audioRef: React.RefObject }}\r\n */\r\nconst useVideoAudio = (stream, user) => {\r\n    const videoRef = useRef(null);\r\n    const audioRef = useRef(null);\r\n\r\n    // Video stream binding\r\n    useEffect(() => {\r\n        if (videoRef.current && stream) {\r\n            videoRef.current.srcObject = stream;\r\n        }\r\n    }, [stream]);\r\n\r\n    // ğŸ”¥ Audio stream with volume control via GainNode\r\n    useEffect(() => {\r\n        if (audioRef.current && stream && !user.isLocal) {\r\n            const audioTracks = stream.getAudioTracks();\r\n            if (audioTracks.length > 0) {\r\n                audioRef.current.srcObject = new MediaStream(audioTracks);\r\n                const volumePercent = user.volume || 100;\r\n                if (volumePercent <= 100) {\r\n                    audioRef.current.volume = Math.max(0, volumePercent / 100);\r\n                } else {\r\n                    // >100% â€” use Web Audio API GainNode for amplification\r\n                    audioRef.current.volume = 1.0;\r\n                    try {\r\n                        const audio = audioRef.current;\r\n                        if (!audio._audioContext) {\r\n                            audio._audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n                            audio._sourceNode = audio._audioContext.createMediaElementSource(audio);\r\n                            audio._gainNode = audio._audioContext.createGain();\r\n                            audio._sourceNode.connect(audio._gainNode);\r\n                            audio._gainNode.connect(audio._audioContext.destination);\r\n                        }\r\n                        audio._gainNode.gain.value = volumePercent / 100;\r\n                    } catch (e) {\r\n                        console.warn('[Volume] GainNode amplification failed:', e);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, [stream, user.isLocal, user.username, user.volume]);\r\n\r\n    return { videoRef, audioRef };\r\n};\r\n\r\nexport default useVideoAudio;\r\n","// frontend/src/VoiceChatPanel/avatarUtils.js\r\n// ğŸ”¥ Shared avatar helper utilities for VoiceChatPanel components\r\n\r\nimport SparkMD5 from 'spark-md5';\r\n\r\n/**\r\n * Generate a deterministic avatar fallback URL based on username hash\r\n * @param {string} username - The username to generate avatar for\r\n * @param {number} size - Avatar size in pixels\r\n * @returns {string} Avatar URL from ui-avatars.com\r\n */\r\nexport const getDeterministicAvatarFallback = (username, size = 256) => {\r\n    if (!username) return `https://ui-avatars.com/api/?name=User&background=5865f2&color=fff&bold=true&size=${size}`;\r\n    const hash = SparkMD5.hash(username);\r\n    const hue = parseInt(hash.substring(0, 8), 16) % 360;\r\n    return `https://ui-avatars.com/api/?name=${encodeURIComponent(username)}&background=${hue.toString(16).padStart(2, '0')}${((hue + 60) % 360).toString(16).padStart(2, '0')}${((hue + 120) % 360).toString(16).padStart(2, '0')}&color=fff&bold=true&size=${size}`;\r\n};\r\n","// frontend/src/VoiceChatPanel/UserVideoCard/VideoDisplay.js\r\n// ğŸ“¹ Video feed or avatar fallback display with talking animation\r\n\r\nimport React from 'react';\r\nimport { getDeterministicAvatarFallback } from '../avatarUtils';\r\n\r\n/**\r\n * VideoDisplay Component\r\n * Shows live video stream when camera is on, or large avatar with\r\n * talking animation and status when camera is off.\r\n */\r\nconst VideoDisplay = ({ user, stream, videoRef, getUserAvatar, badge }) => {\r\n    const hasVideo = stream && stream.active && stream.getVideoTracks().length > 0;\r\n\r\n    return (\r\n        <div style={{\r\n            width: '100%',\r\n            height: '100%',\r\n            background: '#1a1a1a',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n        }}>\r\n            {badge}\r\n            {hasVideo ? (\r\n                <video\r\n                    ref={videoRef}\r\n                    autoPlay\r\n                    playsInline\r\n                    muted={user.isLocal === true}\r\n                    style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        objectFit: user.streamType === 'screen' ? 'contain' : 'cover',\r\n                        backgroundColor: user.streamType === 'screen' ? '#000' : '#1a1a1a',\r\n                    }}\r\n                />\r\n            ) : (\r\n                // ğŸ”¥ Camera off â€” large avatar with talking animation\r\n                <div style={{\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: '16px',\r\n                    background: 'linear-gradient(135deg, #36393f 0%, #2f3136 50%, #202225 100%)',\r\n                    position: 'relative',\r\n                }}>\r\n                    {/* Avatar Container with Talking Animation */}\r\n                    <div style={{\r\n                        position: 'relative',\r\n                        padding: '8px',\r\n                        borderRadius: '50%',\r\n                        background: user.isTalking\r\n                            ? 'linear-gradient(135deg, #43b581, #3ca374)'\r\n                            : 'transparent',\r\n                        boxShadow: user.isTalking\r\n                            ? '0 0 20px rgba(67, 181, 129, 0.6), 0 0 40px rgba(67, 181, 129, 0.3)'\r\n                            : 'none',\r\n                        transition: 'all 0.3s ease',\r\n                        animation: user.isTalking ? 'talkingPulse 1s ease-in-out infinite' : 'none',\r\n                    }}>\r\n                        <img\r\n                            src={getUserAvatar(user.username)}\r\n                            alt={user.username}\r\n                            onError={(e) => {\r\n                                e.target.onerror = null;\r\n                                e.target.src = getDeterministicAvatarFallback(user.username, 256);\r\n                            }}\r\n                            style={{\r\n                                width: '140px',\r\n                                height: '140px',\r\n                                borderRadius: '50%',\r\n                                objectFit: 'cover',\r\n                                border: '5px solid #40444b',\r\n                                boxShadow: '0 8px 32px rgba(0, 0, 0, 0.5)',\r\n                                display: 'block',\r\n                            }}\r\n                            loading=\"lazy\"\r\n                        />\r\n                    </div>\r\n                    {/* Username */}\r\n                    <div style={{\r\n                        color: '#fff',\r\n                        fontSize: '18px',\r\n                        fontWeight: 700,\r\n                        textShadow: '0 2px 8px rgba(0, 0, 0, 0.7)',\r\n                        letterSpacing: '0.5px',\r\n                    }}>\r\n                        {user.username}\r\n                    </div>\r\n                    {/* Status */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '8px',\r\n                        padding: '6px 14px',\r\n                        background: user.isMuted ? 'rgba(240, 71, 71, 0.2)' : 'rgba(67, 181, 129, 0.2)',\r\n                        borderRadius: '16px',\r\n                        border: user.isMuted ? '1px solid rgba(240, 71, 71, 0.4)' : '1px solid rgba(67, 181, 129, 0.4)',\r\n                    }}>\r\n                        <span style={{ fontSize: '16px' }}>{user.isMuted ? 'ğŸ”‡' : 'ğŸ¤'}</span>\r\n                        <span style={{\r\n                            color: user.isMuted ? '#f04747' : '#43b581',\r\n                            fontSize: '13px',\r\n                            fontWeight: 600,\r\n                        }}>\r\n                            {user.isMuted ? 'Sessiz' : (user.isTalking ? 'KonuÅŸuyor...' : 'Dinliyor')}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VideoDisplay;\r\n","// frontend/src/VoiceChatPanel/UserVideoCard/UserOverlay.js\r\n// ğŸ¨ Bottom info overlay with talking indicator, connection quality, username, status icons\r\n\r\nimport React from 'react';\r\n\r\n/**\r\n * UserOverlay Component\r\n * Renders the bottom gradient overlay with user info, talking waves,\r\n * connection quality indicator, and status icons.\r\n */\r\nconst UserOverlay = ({ user, isActive, connectionQuality }) => {\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            bottom: 0,\r\n            left: 0,\r\n            right: 0,\r\n            background: 'linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent)',\r\n            padding: '12px 16px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            zIndex: 10,\r\n        }}>\r\n            {/* ğŸ”¥ Talking Indicator Waves */}\r\n            {user.isTalking && (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '3px',\r\n                }}>\r\n                    <div style={{\r\n                        width: '3px',\r\n                        height: '12px',\r\n                        background: '#43b581',\r\n                        borderRadius: '2px',\r\n                        animation: 'wave1 0.6s ease-in-out infinite',\r\n                    }} />\r\n                    <div style={{\r\n                        width: '3px',\r\n                        height: '16px',\r\n                        background: '#43b581',\r\n                        borderRadius: '2px',\r\n                        animation: 'wave2 0.6s ease-in-out infinite 0.1s',\r\n                    }} />\r\n                    <div style={{\r\n                        width: '3px',\r\n                        height: '12px',\r\n                        background: '#43b581',\r\n                        borderRadius: '2px',\r\n                        animation: 'wave3 0.6s ease-in-out infinite 0.2s',\r\n                    }} />\r\n                </div>\r\n            )}\r\n\r\n            {/* ğŸ”¥ Connection Quality Indicator */}\r\n            {!user.isLocal && connectionQuality && (\r\n                <div\r\n                    title={`RTT: ${connectionQuality.rtt}ms, Packet Loss: ${connectionQuality.packetLoss}%`}\r\n                    style={{\r\n                        fontSize: '16px',\r\n                        filter: connectionQuality.quality === 'excellent' ? 'none' :\r\n                            connectionQuality.quality === 'good' ? 'hue-rotate(30deg)' :\r\n                                'hue-rotate(90deg) saturate(2)',\r\n                        opacity: 0.9,\r\n                    }}\r\n                >\r\n                    {connectionQuality.quality === 'excellent' ? 'ğŸ“¶' :\r\n                        connectionQuality.quality === 'good' ? 'ğŸ“¶' :\r\n                            'âš ï¸'}\r\n                </div>\r\n            )}\r\n\r\n            {/* Username */}\r\n            <span\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    if (!user.isLocal) {\r\n                        if (window.openUserProfile) {\r\n                            window.openUserProfile(user.username);\r\n                        } else {\r\n                            window.location.hash = `#/profile/${user.username}`;\r\n                        }\r\n                    }\r\n                }}\r\n                style={{\r\n                    color: '#fff',\r\n                    fontSize: '14px',\r\n                    fontWeight: 600,\r\n                    flex: 1,\r\n                    cursor: user.isLocal ? 'default' : 'pointer',\r\n                    textDecoration: user.isLocal ? 'none' : 'underline',\r\n                    textDecorationColor: 'rgba(255, 255, 255, 0.3)',\r\n                    whiteSpace: 'nowrap',\r\n                    overflow: 'hidden',\r\n                    textOverflow: 'ellipsis',\r\n                }}>\r\n                {user.username} {user.streamType === 'screen' && 'ğŸ–¥ï¸ Ekran'}\r\n            </span>\r\n\r\n            {/* Status Icons */}\r\n            <div style={{ display: 'flex', gap: '6px' }}>\r\n                {user.isMuted && <span style={{ fontSize: '16px' }}>ğŸ”‡</span>}\r\n                {user.streamType === 'camera' && user.isCameraOn && <span style={{ fontSize: '16px' }}>ğŸ“¹</span>}\r\n                {isActive && <span style={{ fontSize: '16px' }}>ğŸ”Š</span>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserOverlay;\r\n","\r\nconst ActionButton = ({ icon, onClick, title, bgColor = 'rgba(0, 0, 0, 0.7)' }) => {\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            title={title}\r\n            style={{\r\n                background: bgColor,\r\n                border: '1px solid rgba(255, 255, 255, 0.3)',\r\n                borderRadius: '8px',\r\n                width: '36px',\r\n                height: '36px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                cursor: 'pointer',\r\n                fontSize: '14px',\r\n                color: '#fff',\r\n                fontWeight: 'bold',\r\n                transition: 'all 0.2s ease',\r\n                boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\r\n            }}\r\n            onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1.1)';\r\n                e.currentTarget.style.boxShadow = '0 4px 16px rgba(255, 255, 255, 0.3)';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1)';\r\n                e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\r\n            }}\r\n        >\r\n            {icon}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default ActionButton;\r\n","// frontend/src/VoiceChatPanel/UserVideoCard/HoverControls.js\r\n// ğŸ® Hover action buttons (pin, expand, fullscreen) and volume slider\r\n\r\nimport React from 'react';\r\nimport ActionButton from '../ActionButton';\r\n\r\n/**\r\n * HoverControls Component\r\n * Renders action buttons and volume slider that appear on hover.\r\n * Supports pin, expand, fullscreen, and 0-200% volume control.\r\n */\r\nconst HoverControls = ({ user, isPinned, onPin, onExpand, showFullControls, videoRef }) => {\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            top: '12px',\r\n            right: '12px',\r\n            display: 'flex',\r\n            gap: '6px',\r\n            opacity: showFullControls ? 1 : 0,\r\n            transition: 'opacity 0.25s ease, transform 0.25s ease',\r\n            transform: showFullControls ? 'translateY(0)' : 'translateY(-6px)',\r\n            zIndex: 20,\r\n            pointerEvents: showFullControls ? 'auto' : 'none',\r\n        }}>\r\n            <ActionButton\r\n                icon={isPinned ? 'ğŸ“Œ' : 'ğŸ“'}\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    onPin();\r\n                }}\r\n                title={isPinned ? 'Sabitlemeyi KaldÄ±r' : 'Sabitle'}\r\n                bgColor=\"rgba(88, 101, 242, 0.9)\"\r\n            />\r\n            <ActionButton\r\n                icon=\"â›¶\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    onExpand();\r\n                }}\r\n                title=\"Panelde GeniÅŸlet\"\r\n                bgColor=\"rgba(67, 181, 129, 0.9)\"\r\n            />\r\n            <ActionButton\r\n                icon=\"ğŸ–¥ï¸\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    // ğŸ”¥ Fullscreen mode\r\n                    const videoElement = videoRef.current;\r\n                    if (videoElement) {\r\n                        const parentDiv = videoElement.parentElement?.parentElement;\r\n                        const element = parentDiv || videoElement;\r\n                        if (element.requestFullscreen) {\r\n                            element.requestFullscreen();\r\n                        } else if (element.webkitRequestFullscreen) {\r\n                            element.webkitRequestFullscreen();\r\n                        } else if (element.mozRequestFullScreen) {\r\n                            element.mozRequestFullScreen();\r\n                        } else if (element.msRequestFullscreen) {\r\n                            element.msRequestFullscreen();\r\n                        }\r\n                    }\r\n                }}\r\n                title=\"Tam Ekran Ä°zle\"\r\n                bgColor=\"rgba(250, 166, 26, 0.9)\"\r\n            />\r\n\r\n            {/* ğŸ”¥ Volume Slider (only for remote users, visible on hover) */}\r\n            {!user.isLocal && showFullControls && (\r\n                <div style={{\r\n                    background: 'rgba(0, 0, 0, 0.9)',\r\n                    borderRadius: '10px',\r\n                    padding: '6px 10px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '6px',\r\n                    minWidth: '100px',\r\n                    backdropFilter: 'blur(8px)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    animation: 'fadeIn 0.2s ease',\r\n                }}>\r\n                    <span style={{ fontSize: '12px' }}>\r\n                        {(user.volume || 100) === 0 ? 'ğŸ”‡' : (user.volume || 100) > 100 ? 'ğŸ”Š' : 'ğŸ”‰'}\r\n                    </span>\r\n                    <input\r\n                        type=\"range\"\r\n                        min=\"0\"\r\n                        max=\"200\"\r\n                        value={user.volume || 100}\r\n                        onChange={(e) => {\r\n                            e.stopPropagation();\r\n                            if (user.onVolumeChange) {\r\n                                user.onVolumeChange(parseInt(e.target.value));\r\n                            }\r\n                        }}\r\n                        style={{\r\n                            flex: 1,\r\n                            cursor: 'pointer',\r\n                            height: '4px',\r\n                        }}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                    />\r\n                    <span style={{ fontSize: '10px', color: '#fff', minWidth: '30px', fontWeight: 600 }}>\r\n                        {user.volume || 100}%\r\n                    </span>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HoverControls;\r\n","// frontend/src/VoiceChatPanel/UserVideoCard.js\r\n// ğŸ“¹ Voice chat video card - Orchestrator\r\n// Sub-components: useVideoAudio, VideoDisplay, UserOverlay, HoverControls\r\n\r\nimport React, { useState, useCallback } from 'react';\r\nimport useVideoAudio from './UserVideoCard/useVideoAudio';\r\nimport VideoDisplay from './UserVideoCard/VideoDisplay';\r\nimport UserOverlay from './UserVideoCard/UserOverlay';\r\nimport HoverControls from './UserVideoCard/HoverControls';\r\n\r\n/**\r\n * UserVideoCard Component\r\n * Displays a user's video/audio stream in voice chat with\r\n * avatar fallback, talking animation, connection quality indicator,\r\n * and hover controls (pin, expand, fullscreen, volume).\r\n */\r\nconst UserVideoCard = React.memo(({\r\n    user,\r\n    stream,\r\n    isActive,\r\n    isPinned,\r\n    onExpand,\r\n    onPin,\r\n    onContextMenu,\r\n    compact = false,\r\n    badge,\r\n    connectionQuality,\r\n    getUserAvatar\r\n}) => {\r\n    const { videoRef, audioRef } = useVideoAudio(stream, user);\r\n    const [showFullControls, setShowFullControls] = useState(false);\r\n\r\n    const handleRightClick = useCallback((e) => {\r\n        e.preventDefault();\r\n        if (onContextMenu && user.username !== user.isLocal) {\r\n            onContextMenu({\r\n                user,\r\n                position: { x: e.clientX, y: e.clientY }\r\n            });\r\n        }\r\n    }, [onContextMenu, user]);\r\n\r\n    const handleClick = useCallback((e) => {\r\n        if (!user.isLocal && onContextMenu) {\r\n            onContextMenu({\r\n                user,\r\n                position: { x: e.clientX, y: e.clientY }\r\n            });\r\n        }\r\n    }, [user, onContextMenu]);\r\n\r\n    return (\r\n        <div\r\n            onContextMenu={handleRightClick}\r\n            onClick={handleClick}\r\n            onMouseEnter={() => setShowFullControls(true)}\r\n            onMouseLeave={() => setShowFullControls(false)}\r\n            style={{\r\n                background: 'linear-gradient(135deg, #2c2f33 0%, #23272a 100%)',\r\n                borderRadius: '16px',\r\n                overflow: 'hidden',\r\n                position: 'relative',\r\n                border: isActive ? '3px solid #43b581' : isPinned ? '3px solid #5865f2' : '1px solid rgba(255, 255, 255, 0.1)',\r\n                boxShadow: isActive ? '0 0 20px rgba(67, 181, 129, 0.5)' : '0 4px 16px rgba(0, 0, 0, 0.3)',\r\n                transition: 'all 0.3s ease',\r\n                cursor: user.isLocal ? 'default' : 'pointer',\r\n                width: '100%',\r\n                height: '100%',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n            }}>\r\n            {/* Hidden audio element for remote user sound output */}\r\n            {!user.isLocal && stream && (\r\n                <audio\r\n                    ref={audioRef}\r\n                    autoPlay\r\n                    playsInline\r\n                    data-username={user.username}\r\n                    style={{ display: 'none' }}\r\n                />\r\n            )}\r\n\r\n            <VideoDisplay\r\n                user={user}\r\n                stream={stream}\r\n                videoRef={videoRef}\r\n                getUserAvatar={getUserAvatar}\r\n                badge={badge}\r\n            />\r\n\r\n            <UserOverlay\r\n                user={user}\r\n                isActive={isActive}\r\n                connectionQuality={connectionQuality}\r\n            />\r\n\r\n            <HoverControls\r\n                user={user}\r\n                isPinned={isPinned}\r\n                onPin={onPin}\r\n                onExpand={onExpand}\r\n                showFullControls={showFullControls}\r\n                videoRef={videoRef}\r\n            />\r\n\r\n            <style>{`\r\n                div:hover .hover-actions {\r\n                    opacity: 1;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}, (prevProps, nextProps) => {\r\n    // ğŸ”¥ PERFORMANS: Only re-render when these props change\r\n    // isTalking is excluded to avoid re-renders every 150ms\r\n    return (\r\n        prevProps.user.username === nextProps.user.username &&\r\n        prevProps.stream === nextProps.stream &&\r\n        prevProps.user.isCameraOn === nextProps.user.isCameraOn &&\r\n        prevProps.user.isScreenSharing === nextProps.user.isScreenSharing &&\r\n        prevProps.user.isMuted === nextProps.user.isMuted &&\r\n        prevProps.isActive === nextProps.isActive &&\r\n        prevProps.isPinned === nextProps.isPinned &&\r\n        prevProps.compact === nextProps.compact\r\n    );\r\n});\r\n\r\nexport default UserVideoCard;\r\n","\r\nconst VoiceControlBtn = ({ icon, active, danger, special, subtle, small, isLeave, onClick, title, label }) => {\r\n    const getBackground = () => {\r\n        if (isLeave) return 'linear-gradient(135deg, #ed4245 0%, #c03537 100%)';\r\n        if (danger && active) return 'rgba(240, 71, 71, 0.4)';\r\n        if (danger) return 'rgba(240, 71, 71, 0.15)';\r\n        if (special) return 'linear-gradient(135deg, #5865f2 0%, #4752c4 100%)';\r\n        if (active) return 'rgba(67, 181, 129, 0.25)';\r\n        if (subtle) return 'rgba(255, 255, 255, 0.05)';\r\n        return 'rgba(255, 255, 255, 0.1)';\r\n    };\r\n\r\n    const getBorder = () => {\r\n        if (isLeave) return 'none';\r\n        if (danger && active) return '2px solid rgba(240, 71, 71, 0.6)';\r\n        if (active) return '2px solid rgba(67, 181, 129, 0.5)';\r\n        if (special) return '2px solid rgba(88, 101, 242, 0.5)';\r\n        return '2px solid transparent';\r\n    };\r\n\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            title={title}\r\n            style={{\r\n                background: getBackground(),\r\n                border: getBorder(),\r\n                borderRadius: isLeave ? '50%' : '12px',\r\n                width: isLeave ? '48px' : (small ? '40px' : '48px'),\r\n                height: isLeave ? '48px' : (small ? '40px' : '48px'),\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                cursor: 'pointer',\r\n                fontSize: small ? '16px' : '20px',\r\n                color: '#fff',\r\n                transition: 'all 0.2s ease',\r\n                boxShadow: isLeave\r\n                    ? '0 4px 15px rgba(237, 66, 69, 0.4)'\r\n                    : (active ? '0 2px 10px rgba(67, 181, 129, 0.3)' : 'none'),\r\n                transform: 'scale(1)',\r\n            }}\r\n            onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1.1)';\r\n                e.currentTarget.style.boxShadow = isLeave\r\n                    ? '0 6px 20px rgba(237, 66, 69, 0.6)'\r\n                    : '0 4px 15px rgba(255, 255, 255, 0.2)';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1)';\r\n                e.currentTarget.style.boxShadow = isLeave\r\n                    ? '0 4px 15px rgba(237, 66, 69, 0.4)'\r\n                    : (active ? '0 2px 10px rgba(67, 181, 129, 0.3)' : 'none');\r\n            }}\r\n        >\r\n            <span>{icon}</span>\r\n            {label && (\r\n                <span style={{ fontSize: '9px', marginTop: '2px', fontWeight: 600 }}>{label}</span>\r\n            )}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default VoiceControlBtn;\r\n","import VoiceControlBtn from './VoiceControlBtn';\r\n\r\nconst ControlBar = ({\r\n    isMuted,\r\n    isDeafened,\r\n    isCameraOn,\r\n    isScreenSharing,\r\n    isSpatialAudio,\r\n    isRecording,\r\n    recordingDuration,\r\n    onToggleMute,\r\n    onToggleDeafened,\r\n    onToggleCamera,\r\n    onToggleScreenShare,\r\n    onToggleSpatialAudio,\r\n    onStartRecording,\r\n    onStopRecording,\r\n    onDownloadRecording,\r\n    onLeave,\r\n    onSettings\r\n}) => {\r\n    const formatDuration = (sec) => {\r\n        const m = Math.floor(sec / 60).toString().padStart(2, '0');\r\n        const s = Math.floor(sec % 60).toString().padStart(2, '0');\r\n        return `${m}:${s}`;\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            background: 'linear-gradient(180deg, rgba(32, 34, 37, 0.98) 0%, rgba(24, 25, 28, 1) 100%)',\r\n            padding: '12px 20px',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            gap: '10px',\r\n            borderTop: '1px solid rgba(255, 255, 255, 0.08)',\r\n            boxShadow: '0 -4px 20px rgba(0, 0, 0, 0.4)',\r\n            flexShrink: 0, // ğŸ”¥ FIX: Asla kÃ¼Ã§Ã¼lme - her zaman gÃ¶rÃ¼nsÃ¼n\r\n            minHeight: '70px', // ğŸ”¥ FIX: Minimum yÃ¼kseklik garantisi\r\n            position: 'relative',\r\n            zIndex: 100,\r\n        }}>\r\n            {/* Sol Grup: Ses Kontrolleri */}\r\n            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                <VoiceControlBtn\r\n                    icon={isMuted ? 'ğŸ”‡' : 'ğŸ¤'}\r\n                    active={!isMuted}\r\n                    danger={isMuted}\r\n                    onClick={onToggleMute}\r\n                    title={isMuted ? 'Mikrofonu AÃ§' : 'Mikrofonu Kapat'}\r\n                />\r\n                <VoiceControlBtn\r\n                    icon={isDeafened ? 'ğŸ”ˆ' : 'ğŸ§'}\r\n                    active={!isDeafened}\r\n                    danger={isDeafened}\r\n                    onClick={onToggleDeafened}\r\n                    title={isDeafened ? 'KulaklÄ±ÄŸÄ± AÃ§' : 'KulaklÄ±ÄŸÄ± Kapat'}\r\n                />\r\n            </div>\r\n\r\n            {/* Orta Grup: Video/Ekran Kontrolleri */}\r\n            <div style={{\r\n                display: 'flex',\r\n                gap: '8px',\r\n                padding: '0 16px',\r\n                borderLeft: '1px solid rgba(255, 255, 255, 0.1)',\r\n                borderRight: '1px solid rgba(255, 255, 255, 0.1)',\r\n            }}>\r\n                <VoiceControlBtn\r\n                    icon={isCameraOn ? 'ğŸ“¹' : 'ğŸ“·'}\r\n                    active={isCameraOn}\r\n                    onClick={onToggleCamera}\r\n                    title={isCameraOn ? 'KamerayÄ± Kapat' : 'KamerayÄ± AÃ§'}\r\n                />\r\n                <VoiceControlBtn\r\n                    icon=\"ğŸ–¥ï¸\"\r\n                    active={isScreenSharing}\r\n                    special={isScreenSharing}\r\n                    onClick={onToggleScreenShare}\r\n                    title={isScreenSharing ? 'PaylaÅŸÄ±mÄ± Durdur' : 'Ekran PaylaÅŸ'}\r\n                />\r\n                {onToggleSpatialAudio && (\r\n                    <VoiceControlBtn\r\n                        icon=\"ğŸ”Š\"\r\n                        active={isSpatialAudio}\r\n                        onClick={onToggleSpatialAudio}\r\n                        title={isSpatialAudio ? '3D Ses (AÃ§Ä±k)' : '3D Ses (KapalÄ±)'}\r\n                        small\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            {/* SaÄŸ Grup: KayÄ±t & Ayarlar */}\r\n            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                {onStartRecording && onStopRecording && (\r\n                    <VoiceControlBtn\r\n                        icon={isRecording ? 'â¹ï¸' : 'âºï¸'}\r\n                        active={isRecording}\r\n                        danger={isRecording}\r\n                        onClick={isRecording ? onStopRecording : onStartRecording}\r\n                        title={isRecording ? `KaydÄ± Durdur (${formatDuration(recordingDuration)})` : 'KayÄ±t BaÅŸlat'}\r\n                        label={isRecording ? formatDuration(recordingDuration) : null}\r\n                    />\r\n                )}\r\n                {onSettings && (\r\n                    <VoiceControlBtn\r\n                        icon=\"âš™ï¸\"\r\n                        onClick={onSettings}\r\n                        title=\"Ayarlar\"\r\n                        subtle\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            {/* AyrÄ±l Butonu - Vurgulu */}\r\n            <VoiceControlBtn\r\n                icon=\"ğŸ“\"\r\n                danger\r\n                onClick={onLeave}\r\n                title=\"AyrÄ±l\"\r\n                isLeave\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ControlBar;\r\n","import React, { useEffect, useRef } from 'react';\r\n\r\nconst VideoFeed = ({ stream, fullscreen }) => {\r\n    const videoRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (videoRef.current && stream) {\r\n            videoRef.current.srcObject = stream;\r\n        }\r\n    }, [stream]);\r\n\r\n    return (\r\n        <video\r\n            ref={videoRef}\r\n            autoPlay\r\n            playsInline\r\n            muted={false}\r\n            style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                objectFit: fullscreen ? 'contain' : 'cover',\r\n                background: '#000',\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default VideoFeed;\r\n","\r\nconst MiniButton = ({ icon, active, danger, onClick, title }) => {\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            title={title}\r\n            style={{\r\n                background: active\r\n                    ? 'rgba(88, 101, 242, 0.8)'\r\n                    : danger\r\n                        ? 'rgba(237, 66, 69, 0.8)'\r\n                        : 'rgba(255, 255, 255, 0.15)',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                width: '36px',\r\n                height: '36px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                cursor: 'pointer',\r\n                fontSize: '16px',\r\n                transition: 'all 0.2s ease',\r\n            }}\r\n        >\r\n            {icon}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default MiniButton;\r\n","// frontend/src/VoiceChatPanel/MinimizedView.js\r\n// ğŸ¨ KÃ¼Ã§Ã¼k Ada - Minimized Voice Panel (Discord TarzÄ±)\r\n\r\nimport React, { useRef } from 'react';\r\nimport Draggable from 'react-draggable';\r\nimport MiniButton from './MiniButton';\r\nimport { getDeterministicAvatarFallback } from './avatarUtils';\r\n\r\nconst MinimizedView = React.memo(({\r\n    roomName,\r\n    userCount,\r\n    combinedUsers,\r\n    currentUser,\r\n    onToggleMinimize,\r\n    onContextMenu,\r\n    getUserAvatar,\r\n    // Voice controls\r\n    isMuted,\r\n    isCameraOn,\r\n    isScreenSharing,\r\n    toggleMute,\r\n    toggleCamera,\r\n    toggleScreenShare,\r\n    leaveVoice,\r\n}) => {\r\n    const nodeRef = useRef(null);\r\n\r\n    return (\r\n        <Draggable\r\n            nodeRef={nodeRef}\r\n            handle=\".mini-drag-handle\"\r\n            defaultPosition={{ x: 20, y: window.innerHeight - 180 }}\r\n            bounds=\"parent\"\r\n        >\r\n            <div\r\n                ref={nodeRef}\r\n                style={{\r\n                    position: 'fixed',\r\n                    zIndex: 9999,\r\n                    background: 'linear-gradient(135deg, #1e2124 0%, #2c2f33 50%, #23272a 100%)',\r\n                    borderRadius: '16px',\r\n                    padding: '16px',\r\n                    boxShadow: '0 12px 48px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(88, 101, 242, 0.15)',\r\n                    border: '1px solid rgba(88, 101, 242, 0.1)',\r\n                    minWidth: '320px',\r\n                    maxWidth: '400px',\r\n                    backdropFilter: 'blur(12px)',\r\n                    animation: 'slideIn 0.3s ease',\r\n                }}\r\n            >\r\n                {/* MINI HEADER */}\r\n                <div\r\n                    className=\"mini-drag-handle\"\r\n                    style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '12px',\r\n                        cursor: 'move',\r\n                        marginBottom: '12px',\r\n                        paddingBottom: '12px',\r\n                        borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    }}\r\n                >\r\n                    <div style={{\r\n                        width: '10px',\r\n                        height: '10px',\r\n                        borderRadius: '50%',\r\n                        background: '#43b581',\r\n                        boxShadow: '0 0 12px #43b581',\r\n                        animation: 'pulse 2s infinite',\r\n                    }} />\r\n                    <span style={{\r\n                        color: '#fff',\r\n                        fontSize: '14px',\r\n                        fontWeight: 600,\r\n                        flex: 1,\r\n                    }}>\r\n                        ğŸ¤ {roomName}\r\n                    </span>\r\n                    <div style={{\r\n                        background: 'rgba(67, 181, 129, 0.2)',\r\n                        borderRadius: '12px',\r\n                        padding: '4px 10px',\r\n                        fontSize: '11px',\r\n                        color: '#43b581',\r\n                        fontWeight: 600,\r\n                    }}>\r\n                        ğŸ‘¥ {userCount}\r\n                    </div>\r\n                    <button\r\n                        onClick={onToggleMinimize}\r\n                        style={{\r\n                            background: 'rgba(255, 255, 255, 0.1)',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            padding: '6px 10px',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            fontSize: '12px',\r\n                            transition: 'all 0.2s',\r\n                        }}\r\n                        onMouseEnter={(e) => e.target.style.background = 'rgba(255, 255, 255, 0.2)'}\r\n                        onMouseLeave={(e) => e.target.style.background = 'rgba(255, 255, 255, 0.1)'}\r\n                    >\r\n                        â¬†ï¸ AÃ§\r\n                    </button>\r\n                </div>\r\n\r\n                {/* KULLANICILAR */}\r\n                <div style={{\r\n                    marginBottom: '12px',\r\n                    maxHeight: '120px',\r\n                    overflowY: 'auto',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '6px',\r\n                }}>\r\n                    {combinedUsers.slice(0, 3).map(user => (\r\n                        <div\r\n                            key={user.username}\r\n                            onContextMenu={(e) => {\r\n                                e.preventDefault();\r\n                                if (user.username !== currentUser?.username) {\r\n                                    onContextMenu({\r\n                                        user,\r\n                                        position: { x: e.clientX, y: e.clientY }\r\n                                    });\r\n                                }\r\n                            }}\r\n                            onClick={(e) => {\r\n                                if (user.username !== currentUser?.username) {\r\n                                    onContextMenu({\r\n                                        user,\r\n                                        position: { x: e.clientX, y: e.clientY }\r\n                                    });\r\n                                }\r\n                            }}\r\n                            style={{\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '10px',\r\n                                padding: '8px',\r\n                                background: user.isTalking\r\n                                    ? 'rgba(67, 181, 129, 0.15)'\r\n                                    : 'rgba(255, 255, 255, 0.05)',\r\n                                borderRadius: '8px',\r\n                                border: user.isTalking\r\n                                    ? '1px solid rgba(67, 181, 129, 0.4)'\r\n                                    : '1px solid transparent',\r\n                                transition: 'all 0.2s',\r\n                                cursor: user.username !== currentUser?.username ? 'pointer' : 'default',\r\n                            }}\r\n                            onMouseEnter={(e) => {\r\n                                if (user.username !== currentUser?.username) {\r\n                                    e.currentTarget.style.background = 'rgba(67, 181, 129, 0.2)';\r\n                                }\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                                e.currentTarget.style.background = user.isTalking\r\n                                    ? 'rgba(67, 181, 129, 0.15)'\r\n                                    : 'rgba(255, 255, 255, 0.05)';\r\n                            }}\r\n                        >\r\n                            <img\r\n                                src={getUserAvatar(user.username)}\r\n                                alt={user.username}\r\n                                onError={(e) => {\r\n                                    e.target.onerror = null;\r\n                                    e.target.src = getDeterministicAvatarFallback(user.username, 64);\r\n                                }}\r\n                                style={{\r\n                                    width: '32px',\r\n                                    height: '32px',\r\n                                    borderRadius: '50%',\r\n                                    objectFit: 'cover',\r\n                                    border: user.isTalking\r\n                                        ? '2px solid #43b581'\r\n                                        : '2px solid rgba(255, 255, 255, 0.15)',\r\n                                    boxShadow: user.isTalking\r\n                                        ? '0 0 10px rgba(67, 181, 129, 0.5)'\r\n                                        : 'none',\r\n                                    transition: 'all 0.3s ease',\r\n                                }}\r\n                            />\r\n                            <div style={{ flex: 1 }}>\r\n                                <div style={{\r\n                                    color: '#fff',\r\n                                    fontSize: '13px',\r\n                                    fontWeight: 600,\r\n                                }}>\r\n                                    {user.username} {user.isLocal && '(Siz)'}\r\n                                </div>\r\n                                <div style={{\r\n                                    color: 'rgba(255, 255, 255, 0.5)',\r\n                                    fontSize: '11px',\r\n                                }}>\r\n                                    {user.isMuted ? 'ğŸ”‡ Sessiz' : user.isTalking ? 'ğŸ”Š KonuÅŸuyor' : 'ğŸ¤ Aktif'}\r\n                                </div>\r\n                            </div>\r\n                            {user.isCameraOn && <span style={{ fontSize: '14px' }}>ğŸ“¹</span>}\r\n                            {user.isScreenSharing && <span style={{ fontSize: '14px' }}>ğŸ–¥ï¸</span>}\r\n                        </div>\r\n                    ))}\r\n                    {userCount > 3 && (\r\n                        <div style={{\r\n                            textAlign: 'center',\r\n                            color: 'rgba(255, 255, 255, 0.5)',\r\n                            fontSize: '11px',\r\n                            padding: '6px',\r\n                        }}>\r\n                            +{userCount - 3} daha...\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* MINI CONTROLS */}\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: 'repeat(4, 1fr)',\r\n                    gap: '8px',\r\n                }}>\r\n                    <MiniButton\r\n                        icon={isMuted ? 'ğŸ”‡' : 'ğŸ¤'}\r\n                        active={!isMuted}\r\n                        onClick={toggleMute}\r\n                        title={isMuted ? 'Mikrofonu AÃ§' : 'Mikrofonu Kapat'}\r\n                    />\r\n                    <MiniButton\r\n                        icon={isCameraOn ? 'ğŸ“¹' : 'ğŸ“·'}\r\n                        active={isCameraOn}\r\n                        onClick={toggleCamera}\r\n                        title={isCameraOn ? 'KamerayÄ± Kapat' : 'KamerayÄ± AÃ§'}\r\n                    />\r\n                    <MiniButton\r\n                        icon=\"ğŸ–¥ï¸\"\r\n                        active={isScreenSharing}\r\n                        onClick={toggleScreenShare}\r\n                        title={isScreenSharing ? 'PaylaÅŸÄ±mÄ± Durdur' : 'Ekran PaylaÅŸ'}\r\n                    />\r\n                    <MiniButton\r\n                        icon=\"âŒ\"\r\n                        danger\r\n                        onClick={leaveVoice}\r\n                        title=\"AyrÄ±l\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </Draggable>\r\n    );\r\n});\r\n\r\nMinimizedView.displayName = 'MinimizedView';\r\n\r\nexport default MinimizedView;\r\n","// frontend/src/VoiceChatPanel/useVoiceMonitoring.js\r\n// ğŸ¤ Voice Monitoring Custom Hook - Extracted from VoiceChatPanel\r\n// Connection quality, echo detection, network monitoring, volume normalization, talking indicators\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\n/**\r\n * Custom hook for voice chat monitoring effects.\r\n *\r\n * @param {Object} params\r\n * @param {boolean} params.isInVoice - Whether the user is currently in a voice channel\r\n * @param {MediaStream|null} params.localAudioStream - Local audio stream reference\r\n * @param {boolean} params.isMuted - Whether the user is muted\r\n * @param {Function|null} params.startStatsMonitoring - Start WebRTC stats monitoring (from VoiceContext)\r\n * @param {Function|null} params.stopStatsMonitoring - Stop WebRTC stats monitoring (from VoiceContext)\r\n * @param {string} params.screenShareQuality - Current screen share quality setting\r\n * @param {Function|null} params.updateScreenQuality - Function to update screen share quality\r\n */\r\nexport default function useVoiceMonitoring({\r\n    isInVoice,\r\n    localAudioStream,\r\n    isMuted,\r\n    startStatsMonitoring,\r\n    stopStatsMonitoring,\r\n    screenShareQuality,\r\n    updateScreenQuality,\r\n}) {\r\n    // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n\r\n    // Connection Quality Monitoring\r\n    const [connectionQuality, setConnectionQuality] = useState({});\r\n\r\n    // Echo Detection\r\n    const [hasEchoRisk, setHasEchoRisk] = useState(false);\r\n\r\n    // Network Quality Monitor\r\n    const [networkQuality, setNetworkQuality] = useState('good'); // 'excellent', 'good', 'poor'\r\n    const [networkType, setNetworkType] = useState('unknown');\r\n    const [autoQualityEnabled, setAutoQualityEnabled] = useState(true);\r\n\r\n    // Volume Normalization\r\n    const [volumeNormalization, setVolumeNormalization] = useState(true);\r\n    const [userAudioLevels, setUserAudioLevels] = useState({}); // Track audio levels per user\r\n    const [normalizedGains, setNormalizedGains] = useState({}); // Auto-adjusted gains\r\n\r\n    // Visual Enhancements\r\n    const [talkingIndicators, setTalkingIndicators] = useState({}); // Animated waves when talking\r\n    const [activeSpeaker, setActiveSpeaker] = useState(null); // Currently dominant speaker\r\n\r\n    // â”€â”€ Effect #1: Connection Quality Monitoring (polls WebRTC getStats() every 3s) â”€â”€\r\n\r\n    useEffect(() => {\r\n        if (!isInVoice) return;\r\n\r\n        const monitorConnections = async () => {\r\n            // VoiceContext'ten peer connections'a eriÅŸmek iÃ§in global reference kullan\r\n            const peerConnections = window.__pawscord_peer_connections__ || {};\r\n\r\n            for (const [username, pc] of Object.entries(peerConnections)) {\r\n                if (pc && pc.getStats) {\r\n                    try {\r\n                        const stats = await pc.getStats();\r\n                        stats.forEach(report => {\r\n                            if (report.type === 'candidate-pair' && report.state === 'succeeded') {\r\n                                setConnectionQuality(prev => ({\r\n                                    ...prev,\r\n                                    [username]: {\r\n                                        rtt: Math.round((report.currentRoundTripTime || 0) * 1000), // ms\r\n                                        packetLoss: report.packetsLost && report.packetsSent\r\n                                            ? Math.round((report.packetsLost / report.packetsSent) * 100 * 10) / 10\r\n                                            : 0,\r\n                                        quality: (report.currentRoundTripTime || 0) < 0.1 ? 'excellent' :\r\n                                            (report.currentRoundTripTime || 0) < 0.2 ? 'good' : 'poor'\r\n                                    }\r\n                                }));\r\n                            }\r\n                        });\r\n                    } catch (err) {\r\n                        console.warn('[Quality] Failed to get stats for', username, err);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        const interval = setInterval(monitorConnections, 3000);\r\n        monitorConnections(); // Ä°lk Ã§alÄ±ÅŸtÄ±rma\r\n\r\n        return () => clearInterval(interval);\r\n    }, [isInVoice]);\r\n\r\n    // â”€â”€ Effect #2: WebRTC Stats Monitoring from VoiceContext â”€â”€\r\n\r\n    useEffect(() => {\r\n        if (isInVoice && startStatsMonitoring) {\r\n            startStatsMonitoring();\r\n        }\r\n        return () => {\r\n            if (stopStatsMonitoring) {\r\n                stopStatsMonitoring();\r\n            }\r\n        };\r\n    }, [isInVoice, startStatsMonitoring, stopStatsMonitoring]);\r\n\r\n    // â”€â”€ Effect #3: Echo Detection (AudioContext frequency analysis every 1s) â”€â”€\r\n\r\n    useEffect(() => {\r\n        if (!localAudioStream || isMuted || !isInVoice) {\r\n            setHasEchoRisk(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n            const audioContext = new AudioContext();\r\n            const analyser = audioContext.createAnalyser();\r\n            analyser.fftSize = 2048;\r\n            analyser.smoothingTimeConstant = 0.8;\r\n\r\n            const source = audioContext.createMediaStreamSource(localAudioStream);\r\n            source.connect(analyser);\r\n\r\n            const dataArray = new Uint8Array(analyser.frequencyBinCount);\r\n            let consecutiveHighReadings = 0;\r\n\r\n            const detectEcho = () => {\r\n                analyser.getByteFrequencyData(dataArray);\r\n\r\n                // YÃ¼ksek frekanslÄ± feedback tespiti (2-4 kHz arasÄ±)\r\n                const highFreqRange = dataArray.slice(80, 160);\r\n                const highFreqPeak = Math.max(...highFreqRange);\r\n                const highFreqAvg = highFreqRange.reduce((a, b) => a + b, 0) / highFreqRange.length;\r\n\r\n                // DÃ¼ÅŸÃ¼k frekanslÄ± (kendi sesimiz)\r\n                const lowFreqRange = dataArray.slice(10, 40);\r\n                const lowFreqAvg = lowFreqRange.reduce((a, b) => a + b, 0) / lowFreqRange.length;\r\n\r\n                // Echo riski: YÃ¼ksek frekans Ã§ok yÃ¼ksek VE dÃ¼ÅŸÃ¼k frekansa gÃ¶re orantÄ±sÄ±z\r\n                if (highFreqPeak > 180 && highFreqAvg > 100 && highFreqAvg > lowFreqAvg * 1.5) {\r\n                    consecutiveHighReadings++;\r\n                    if (consecutiveHighReadings > 3) { // 3 saniye Ã¼st Ã¼ste\r\n                        setHasEchoRisk(true);\r\n                    }\r\n                } else {\r\n                    consecutiveHighReadings = 0;\r\n                    if (highFreqPeak < 120) {\r\n                        setHasEchoRisk(false);\r\n                    }\r\n                }\r\n            };\r\n\r\n            const interval = setInterval(detectEcho, 1000);\r\n\r\n            return () => {\r\n                clearInterval(interval);\r\n                source.disconnect();\r\n                audioContext.close();\r\n            };\r\n        } catch (err) {\r\n            console.warn('[Echo] Detection failed:', err);\r\n        }\r\n    }, [localAudioStream, isMuted, isInVoice]);\r\n\r\n    // â”€â”€ Effect #4: Network Quality Monitoring (Network Info API + auto quality adjust every 10s) â”€â”€\r\n\r\n    useEffect(() => {\r\n        if (!isInVoice) return;\r\n\r\n        // Check if Network Information API is available\r\n        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\r\n\r\n        const updateNetworkQuality = () => {\r\n            if (!connection) {\r\n                setNetworkQuality('good');\r\n                setNetworkType('unknown');\r\n                return;\r\n            }\r\n\r\n            // Get network type (4g, 3g, wifi, etc.)\r\n            const effectiveType = connection.effectiveType || 'unknown';\r\n            setNetworkType(effectiveType);\r\n\r\n            // Get downlink speed (Mbps)\r\n            const downlink = connection.downlink || 10; // Default 10 Mbps\r\n            const rtt = connection.rtt || 50; // Round trip time\r\n\r\n            // Determine quality based on network conditions\r\n            let quality = 'good';\r\n            if (effectiveType === '4g' && downlink >= 5 && rtt < 100) {\r\n                quality = 'excellent';\r\n            } else if (effectiveType === 'slow-2g' || downlink < 1 || rtt > 300) {\r\n                quality = 'poor';\r\n            } else if (effectiveType === '2g' || effectiveType === '3g' || downlink < 3 || rtt > 150) {\r\n                quality = 'good';\r\n            } else {\r\n                quality = 'excellent';\r\n            }\r\n\r\n            setNetworkQuality(quality);\r\n\r\n            // Auto-adjust video quality if enabled\r\n            if (autoQualityEnabled && updateScreenQuality) {\r\n                if (quality === 'poor' && screenShareQuality !== '720p') {\r\n                    updateScreenQuality('720p');\r\n                } else if (quality === 'excellent' && screenShareQuality === '720p') {\r\n                    updateScreenQuality('1080p');\r\n                }\r\n            }\r\n        };\r\n\r\n        // Initial check\r\n        updateNetworkQuality();\r\n\r\n        // Listen for network changes\r\n        if (connection) {\r\n            connection.addEventListener('change', updateNetworkQuality);\r\n        }\r\n\r\n        // Periodic check (every 10 seconds)\r\n        const interval = setInterval(updateNetworkQuality, 10000);\r\n\r\n        return () => {\r\n            clearInterval(interval);\r\n            if (connection) {\r\n                connection.removeEventListener('change', updateNetworkQuality);\r\n            }\r\n        };\r\n    }, [isInVoice, autoQualityEnabled, screenShareQuality, updateScreenQuality]);\r\n\r\n    // â”€â”€ Effect #5: Volume Normalization & Audio Level Monitoring (every 2s) â”€â”€\r\n\r\n    useEffect(() => {\r\n        if (!volumeNormalization || !isInVoice) return;\r\n\r\n        const monitorAudioLevels = () => {\r\n            const remoteAudios = document.querySelectorAll('audio[data-username]');\r\n            const levels = {};\r\n            const newGains = { ...normalizedGains };\r\n\r\n            remoteAudios.forEach(audio => {\r\n                const username = audio.getAttribute('data-username');\r\n                if (!username) return;\r\n\r\n                try {\r\n                    // Create audio context for analysis\r\n                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n                    const source = audioContext.createMediaElementSource(audio);\r\n                    const analyser = audioContext.createAnalyser();\r\n                    analyser.fftSize = 256;\r\n\r\n                    source.connect(analyser);\r\n                    analyser.connect(audioContext.destination);\r\n\r\n                    const dataArray = new Uint8Array(analyser.frequencyBinCount);\r\n                    analyser.getByteFrequencyData(dataArray);\r\n\r\n                    // Calculate average audio level\r\n                    const average = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;\r\n                    levels[username] = average;\r\n\r\n                    // Auto-adjust gain for quiet/loud talkers\r\n                    // Target level: 70-100 (good speaking volume)\r\n                    if (average > 0) {\r\n                        if (average < 50) {\r\n                            // Quiet talker - boost volume\r\n                            newGains[username] = Math.min(1.5, (newGains[username] || 1) * 1.05);\r\n                        } else if (average > 120) {\r\n                            // Loud talker - reduce volume\r\n                            newGains[username] = Math.max(0.7, (newGains[username] || 1) * 0.95);\r\n                        }\r\n                    }\r\n\r\n                    audioContext.close();\r\n                } catch (err) {\r\n                    // Ignore errors for already connected sources\r\n                    console.debug('Audio analysis error (expected):', err.message);\r\n                }\r\n            });\r\n\r\n            setUserAudioLevels(levels);\r\n            setNormalizedGains(newGains);\r\n        };\r\n\r\n        const interval = setInterval(monitorAudioLevels, 2000);\r\n        return () => clearInterval(interval);\r\n    }, [volumeNormalization, isInVoice, normalizedGains]);\r\n\r\n    // â”€â”€ Effect #6: Talking Indicator & Active Speaker Detection (every 100ms) â”€â”€\r\n\r\n    useEffect(() => {\r\n        if (!isInVoice) return;\r\n\r\n        const detectTalking = () => {\r\n            const indicators = {};\r\n            let loudestUser = null;\r\n            let maxLevel = 0;\r\n\r\n            // Check all users including self\r\n            Object.entries(userAudioLevels).forEach(([username, level]) => {\r\n                // Talking threshold: 30+ (adjusted for sensitivity)\r\n                if (level > 30) {\r\n                    indicators[username] = true;\r\n\r\n                    // Track loudest speaker\r\n                    if (level > maxLevel) {\r\n                        maxLevel = level;\r\n                        loudestUser = username;\r\n                    }\r\n                } else {\r\n                    indicators[username] = false;\r\n                }\r\n            });\r\n\r\n            setTalkingIndicators(indicators);\r\n\r\n            // Update active speaker (with debounce to avoid flickering)\r\n            if (loudestUser && maxLevel > 50) {\r\n                setActiveSpeaker(loudestUser);\r\n            } else if (maxLevel === 0) {\r\n                // No one talking\r\n                setActiveSpeaker(null);\r\n            }\r\n        };\r\n\r\n        const interval = setInterval(detectTalking, 100); // 10 FPS for smooth animation\r\n        return () => clearInterval(interval);\r\n    }, [isInVoice, userAudioLevels]);\r\n\r\n    // â”€â”€ Return â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n\r\n    return {\r\n        // Connection quality\r\n        connectionQuality,\r\n        setConnectionQuality,\r\n\r\n        // Echo detection\r\n        hasEchoRisk,\r\n        setHasEchoRisk,\r\n\r\n        // Network quality\r\n        networkQuality,\r\n        setNetworkQuality,\r\n        networkType,\r\n        setNetworkType,\r\n        autoQualityEnabled,\r\n        setAutoQualityEnabled,\r\n\r\n        // Volume normalization\r\n        volumeNormalization,\r\n        setVolumeNormalization,\r\n        userAudioLevels,\r\n        setUserAudioLevels,\r\n        normalizedGains,\r\n        setNormalizedGains,\r\n\r\n        // Talking indicators & active speaker\r\n        talkingIndicators,\r\n        setTalkingIndicators,\r\n        activeSpeaker,\r\n        setActiveSpeaker,\r\n    };\r\n}\r\n","// frontend/src/VoiceChatPanel/voicePanelStyles.js\r\n// ğŸ¨ Voice Panel CSS Injection - Fullscreen, badge, talking animations\r\n// Auto-injects on import (same pattern as RoomList/animations.js)\r\n\r\nexport function injectVoicePanelStyles() {\r\n    if (typeof document === 'undefined') return;\r\n\r\n    if (document.head.querySelector('style#voice-fullscreen-styles')) return;\r\n\r\n    const style = document.createElement('style');\r\n    style.id = 'voice-fullscreen-styles';\r\n    style.textContent = `\r\n            /* Tam Ekran Video Stilleri */\r\n            div:fullscreen video,\r\n            div:-webkit-full-screen video,\r\n            div:-moz-full-screen video,\r\n            div:-ms-fullscreen video {\r\n                width: 100% !important;\r\n                height: 100% !important;\r\n                object-fit: contain !important;\r\n                background: #000 !important;\r\n            }\r\n\r\n            /* Tam Ekran Container */\r\n            div:fullscreen,\r\n            div:-webkit-full-screen,\r\n            div:-moz-full-screen,\r\n            div:-ms-fullscreen {\r\n                background: #000 !important;\r\n                display: flex !important;\r\n                align-items: center !important;\r\n                justify-content: center !important;\r\n            }\r\n\r\n            /* Tam Ekran Kontrolleri */\r\n            div:fullscreen .hover-actions,\r\n            div:-webkit-full-screen .hover-actions,\r\n            div:-moz-full-screen .hover-actions,\r\n            div:-ms-fullscreen .hover-actions {\r\n                opacity: 1 !important;\r\n                z-index: 9999 !important;\r\n            }\r\n\r\n            /* ğŸ”¥ YENÄ°: Badge AnimasyonlarÄ± */\r\n            @keyframes badgePulse {\r\n                0%, 100% {\r\n                    transform: scale(1);\r\n                    box-shadow: 0 4px 16px rgba(88, 101, 242, 0.6), 0 0 0 2px rgba(255, 255, 255, 0.2);\r\n                }\r\n                50% {\r\n                    transform: scale(1.05);\r\n                    box-shadow: 0 6px 20px rgba(88, 101, 242, 0.9), 0 0 0 3px rgba(255, 255, 255, 0.4);\r\n                }\r\n            }\r\n\r\n            @keyframes pulse {\r\n                0%, 100% {\r\n                    opacity: 1;\r\n                    transform: scale(1);\r\n                }\r\n                50% {\r\n                    opacity: 0.7;\r\n                    transform: scale(1.2);\r\n                }\r\n            }\r\n\r\n            /* ğŸ”¥ YENÄ°: Talking Indicator Wave Animations */\r\n            @keyframes wave1 {\r\n                0%, 100% { height: 12px; }\r\n                50% { height: 20px; }\r\n            }\r\n            @keyframes wave2 {\r\n                0%, 100% { height: 16px; }\r\n                50% { height: 24px; }\r\n            }\r\n            @keyframes wave3 {\r\n                0%, 100% { height: 12px; }\r\n                50% { height: 20px; }\r\n            }\r\n\r\n            /* ğŸ”¥ YENÄ°: Avatar Talking Pulse Animation */\r\n            @keyframes talkingPulse {\r\n                0%, 100% {\r\n                    box-shadow: 0 0 0 0 rgba(67, 181, 129, 0.7);\r\n                    transform: scale(1);\r\n                }\r\n                50% {\r\n                    box-shadow: 0 0 0 15px rgba(67, 181, 129, 0);\r\n                    transform: scale(1.02);\r\n                }\r\n            }\r\n\r\n            @keyframes slideIn {\r\n                from { opacity: 0; transform: translateY(10px) scale(0.95); }\r\n                to { opacity: 1; transform: translateY(0) scale(1); }\r\n            }\r\n            @keyframes fadeIn {\r\n                from { opacity: 0; }\r\n                to { opacity: 1; }\r\n            }\r\n            @keyframes connectionGlow {\r\n                0%, 100% { box-shadow: 0 0 12px rgba(67, 181, 129, 0.3); }\r\n                50% { box-shadow: 0 0 20px rgba(67, 181, 129, 0.6); }\r\n            }\r\n            @keyframes screenShareGlow {\r\n                0%, 100% { border-color: rgba(88, 101, 242, 0.5); }\r\n                50% { border-color: rgba(88, 101, 242, 0.9); }\r\n            }\r\n\r\n            /* Smooth grid transitions */\r\n            .voice-grid-item {\r\n                animation: slideIn 0.3s ease forwards;\r\n            }\r\n            /* Video card hover effects */\r\n            .voice-video-card:hover {\r\n                transform: scale(1.01);\r\n                z-index: 10;\r\n            }\r\n            /* Active speaker highlight */\r\n            .voice-active-speaker {\r\n                animation: connectionGlow 2s ease-in-out infinite;\r\n            }\r\n            /* Screen share border animation */\r\n            .voice-screen-share {\r\n                animation: screenShareGlow 2s ease-in-out infinite;\r\n            }\r\n    `;\r\n    document.head.appendChild(style);\r\n}\r\n\r\nexport function removeVoicePanelStyles() {\r\n    const existingStyle = document.getElementById('voice-fullscreen-styles');\r\n    if (existingStyle) {\r\n        existingStyle.remove();\r\n    }\r\n}\r\n\r\n// Auto-execute on import\r\ninjectVoicePanelStyles();\r\n","// frontend/src/VoiceChatPanel.js\r\n// Ã°Å¸Å½Â¤ PROFESYONEL SESLÃ„Â° SOHBET PANELÃ„Â° - Discord/Zoom TarzÃ„Â±\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useVoice } from './VoiceContext';\r\nimport { useAuth } from './AuthContext';\r\nimport useResponsive from './hooks/useResponsive'; // Ã°Å¸â€Â¥ RESPONSIVE\r\nimport UserContextMenu from './components/UserContextMenu';\r\nimport VoiceSettingsPanel from './components/VoiceSettingsPanel'; // Ã°Å¸â€Â¥ YENÃ„Â°: GeliÃ…Å¸miÃ…Å¸ Ses AyarlarÃ„Â±\r\nimport toast from './utils/toast';\r\nimport { PRODUCTION_URL } from './utils/constants';\r\n\r\n// Extracted Sub-Components\r\nimport UserVideoCard from './VoiceChatPanel/UserVideoCard';\r\nimport ControlBar from './VoiceChatPanel/ControlBar';\r\nimport VideoFeed from './VoiceChatPanel/VideoFeed';\r\nimport MinimizedView from './VoiceChatPanel/MinimizedView';\r\nimport useVoiceMonitoring from './VoiceChatPanel/useVoiceMonitoring';\r\nimport './VoiceChatPanel/voicePanelStyles';\r\nimport { getDeterministicAvatarFallback } from './VoiceChatPanel/avatarUtils';\r\n\r\n// Ã°Å¸â€Â¥ YENÃ„Â°: Avatar URL'sinden _100x100 thumbnail suffix'ini kaldÃ„Â±r\r\nconst getFullResolutionAvatar = (avatarUrl) => {\r\n    if (!avatarUrl) return null;\r\n    // _100x100 veya benzeri thumbnail suffix'lerini kaldÃ„Â±r\r\n    return avatarUrl\r\n        .replace(/_100x100\\./gi, '.')\r\n        .replace(/_150x150\\./gi, '.')\r\n        .replace(/_50x50\\./gi, '.')\r\n        .replace(/\\?.*$/, ''); // Query parametrelerini de temizle (size= gibi)\r\n};\r\n\r\nconst VoiceChatPanel = ({\r\n    roomName,\r\n    onClose,\r\n    isMinimized,\r\n    onToggleMinimize,\r\n    getRealUserAvatar,  // Ã°Å¸â€Â¥ YENÃ„Â°: GerÃƒÂ§ek avatar URL alÃ„Â±cÃ„Â±\r\n    allUsers = [],      // Ã°Å¸â€Â¥ YENÃ„Â°: TÃƒÂ¼m kullanÃ„Â±cÃ„Â± listesi\r\n    currentUserProfile  // Ã°Å¸â€Â¥ YENÃ„Â°: Mevcut kullanÃ„Â±cÃ„Â±nÃ„Â±n profili\r\n}) => {\r\n    const {\r\n        isInVoice,\r\n        isMuted,\r\n        isDeafened,\r\n        isVideoEnabled,\r\n        isScreenSharing,\r\n        isSpatialAudioEnabled,\r\n        vadSensitivity,\r\n        isNoiseSuppressionEnabled,\r\n        screenShareQuality,\r\n        screenShareFPS,\r\n        isRecording,\r\n        recordingDuration,\r\n        isPTTMode,\r\n        isPTTActive,\r\n        pttKey,\r\n        includeSystemAudio,\r\n        connectedUsers = [],\r\n        isReconnecting = false,\r\n        connectionStats = {},\r\n        startStatsMonitoring,\r\n        stopStatsMonitoring,\r\n        toggleMute,\r\n        toggleDeafened,\r\n        toggleCamera,\r\n        toggleScreenShare,\r\n        toggleSpatialAudio,\r\n        updateVadSensitivity,\r\n        toggleNoiseSuppression,\r\n        updateScreenQuality,\r\n        updateScreenFPS,\r\n        toggleSystemAudio,\r\n        togglePTTMode,\r\n        updatePTTKey,\r\n        startRecording,\r\n        stopRecording,\r\n        downloadRecording,\r\n        leaveVoiceRoom: leaveVoice,\r\n        localAudioStream,\r\n        remoteStreams = {},\r\n        remoteVolumes = {},\r\n        setRemoteVolume,\r\n        localCameraStream,\r\n        localScreenStream,\r\n        isTalking = false\r\n    } = useVoice();\r\n\r\n    // Ã°Å¸â€Â¥ ALIAS: isCameraOn = isVideoEnabled\r\n    const isCameraOn = isVideoEnabled;\r\n\r\n    // Ã°Å¸â€Â¥ FIX: Combine local and remote streams\r\n    const { user: currentUser } = useAuth();\r\n    const combinedUsers = React.useMemo(() => {\r\n        const users = [...connectedUsers];\r\n        // Kendi local stream'imi ekle (eÃ„Å¸er yoksa)\r\n        if (currentUser && !users.some(u => u.username === currentUser.username)) {\r\n            users.push({\r\n                username: currentUser.username,\r\n                isMuted: isMuted,\r\n                isCameraOn: isCameraOn,\r\n                isScreenSharing: isScreenSharing,\r\n                isTalking: isTalking, // Burada kullan ama dependency'de deÃ„Å¸il\r\n                isLocal: true // Ã°Å¸â€Â¥ Flag to identify local user\r\n            });\r\n        } else if (currentUser) {\r\n            // Update existing user with local state\r\n            const index = users.findIndex(u => u.username === currentUser.username);\r\n            if (index >= 0) {\r\n                users[index] = {\r\n                    ...users[index],\r\n                    isMuted: isMuted,\r\n                    isCameraOn: isCameraOn,\r\n                    isScreenSharing: isScreenSharing,\r\n                    isTalking: isTalking, // Burada kullan ama dependency'de deÃ„Å¸il\r\n                    isLocal: true\r\n                };\r\n            }\r\n        }\r\n        return users;\r\n    }, [connectedUsers, currentUser, isMuted, isCameraOn, isScreenSharing]);\r\n    // Ã°Å¸â€Â¥ PERFORMANS: isTalking ÃƒÂ§Ã„Â±karÃ„Â±ldÃ„Â±! Her 150ms re-render engellenecek\r\n\r\n    // Ã°Å¸â€Â¥ YENÃ„Â°: GerÃƒÂ§ek avatar alma fonksiyonu (TAM Ãƒâ€¡Ãƒâ€“ZÃƒÅ“NÃƒÅ“RLÃƒÅ“KLÃƒÅ“)\r\n    const getUserAvatar = useCallback((username) => {\r\n        let avatarUrl = null;\r\n\r\n        // 1. Ãƒâ€“nce currentUserProfile kontrol et (kendi avatar'Ã„Â±m)\r\n        if (currentUserProfile && username === currentUser?.username) {\r\n            // Ã°Å¸â€Â¥ FIX: avatar string olmalÃ„Â±\r\n            if (currentUserProfile.avatar && typeof currentUserProfile.avatar === 'string') {\r\n                // Tam URL ise direkt kullan\r\n                if (currentUserProfile.avatar.startsWith('http') || currentUserProfile.avatar.startsWith('blob:')) {\r\n                    avatarUrl = currentUserProfile.avatar;\r\n                } else {\r\n                    // Relative path ise tam URL yap\r\n                    avatarUrl = `${PRODUCTION_URL}${currentUserProfile.avatar.startsWith('/') ? '' : '/'}${currentUserProfile.avatar}`;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 2. getRealUserAvatar prop'unu kullan (varsa)\r\n        if (!avatarUrl && getRealUserAvatar) {\r\n            avatarUrl = getRealUserAvatar(username);\r\n        }\r\n\r\n        // 3. allUsers'tan avatar bul\r\n        if (!avatarUrl) {\r\n            const userFromList = allUsers.find(u => u.username === username);\r\n            // Ã°Å¸â€Â¥ FIX: avatar string olmalÃ„Â±\r\n            if (userFromList?.avatar && typeof userFromList.avatar === 'string') {\r\n                if (userFromList.avatar.startsWith('http') || userFromList.avatar.startsWith('blob:')) {\r\n                    avatarUrl = userFromList.avatar;\r\n                } else {\r\n                    avatarUrl = `${PRODUCTION_URL}${userFromList.avatar.startsWith('/') ? '' : '/'}${userFromList.avatar}`;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 4. Avatar bulunduysa, tam ÃƒÂ§ÃƒÂ¶zÃƒÂ¼nÃƒÂ¼rlÃƒÂ¼klÃƒÂ¼ versiyonu dÃƒÂ¶ndÃƒÂ¼r\r\n        if (avatarUrl) {\r\n            return getFullResolutionAvatar(avatarUrl);\r\n        }\r\n\r\n        // 5. Fallback: Deterministic avatar (yÃƒÂ¼ksek ÃƒÂ§ÃƒÂ¶zÃƒÂ¼nÃƒÂ¼rlÃƒÂ¼k)\r\n        return getDeterministicAvatarFallback(username, 256);\r\n    }, [currentUserProfile, currentUser, getRealUserAvatar, allUsers]);\r\n\r\n    // Ã°Å¸â€Â¥ Separate camera and screen streams\r\n    const allStreams = React.useMemo(() => {\r\n        const streams = { ...remoteStreams };\r\n        if (currentUser?.username) {\r\n            if (localCameraStream) {\r\n                streams[`${currentUser.username}_camera`] = localCameraStream;\r\n            }\r\n            if (localScreenStream) {\r\n                streams[`${currentUser.username}_screen`] = localScreenStream;\r\n            }\r\n        }\r\n        return streams;\r\n    }, [remoteStreams, currentUser, localCameraStream, localScreenStream]);\r\n\r\n    const [expandedUser, setExpandedUser] = useState(null); // Fullscreen mode\r\n    const [pinnedUser, setPinnedUser] = useState(null); // Pinned user\r\n    const [isSettingsOpen, setIsSettingsOpen] = useState(false);\r\n    const [contextMenu, setContextMenu] = useState(null); // Ã°Å¸â€ â€¢ User context menu\r\n    const [volumeSettings, setVolumeSettings] = useState(() => {\r\n        // Ã°Å¸â€Â¥ YENÃ„Â°: localStorage'dan yÃƒÂ¼kle\r\n        try {\r\n            const saved = localStorage.getItem('pawscord_voice_volumes');\r\n            return saved ? JSON.parse(saved) : {};\r\n        } catch {\r\n            return {};\r\n        }\r\n    }); // Ã°Å¸â€ â€¢ Per-user volume\r\n\r\n    const [showEchoWarning, setShowEchoWarning] = useState(true);\r\n\r\n    // Monitoring effects (extracted hook)\r\n    const {\r\n        connectionQuality, hasEchoRisk, networkQuality, networkType,\r\n        autoQualityEnabled, setAutoQualityEnabled,\r\n        volumeNormalization, setVolumeNormalization,\r\n        talkingIndicators, activeSpeaker\r\n    } = useVoiceMonitoring({\r\n        isInVoice, localAudioStream, isMuted,\r\n        startStatsMonitoring, stopStatsMonitoring,\r\n        screenShareQuality, updateScreenQuality\r\n    });\r\n\r\n\r\n    // Ã°Å¸â€Â¥ YENÃ„Â°: RoomList'teki ayar butonundan settings aÃƒÂ§ma\r\n    useEffect(() => {\r\n        const handleOpenSettings = () => {\r\n            setIsSettingsOpen(true);\r\n        };\r\n        window.addEventListener('openVoiceSettings', handleOpenSettings);\r\n        return () => window.removeEventListener('openVoiceSettings', handleOpenSettings);\r\n    }, []);\r\n\r\n    // Ã°Å¸â€Â¥ YENÃ„Â°: Volume ayarlarÃ„Â±nÃ„Â± localStorage'a kaydet\r\n    useEffect(() => {\r\n        try {\r\n            localStorage.setItem('pawscord_voice_volumes', JSON.stringify(volumeSettings));\r\n        } catch (err) {\r\n            console.warn('Failed to save volume settings:', err);\r\n        }\r\n    }, [volumeSettings]);\r\n\r\n    // Ã°Å¸â€Â¥ RESPONSIVE HOOK\r\n    // Ã°Å¸â€Â¥ RESPONSIVE HOOK\r\n    const { isMobile } = useResponsive();\r\n\r\n    // Ã°Å¸Å½Â¨ RENDER MODES (mobile iÃƒÂ§in ÃƒÂ¶zel)\r\n    const renderMode = expandedUser ? 'fullscreen' :\r\n        isMinimized ? 'minimized' :\r\n            isMobile ? 'mobile' : 'grid';\r\n\r\n    useEffect(() => {\r\n        if (!isInVoice) {\r\n            onClose();\r\n        }\r\n    }, [isInVoice, onClose]);\r\n\r\n    // Ã°Å¸Å½Â¯ VIDEO GRID LAYOUT (responsive)\r\n    const getGridLayout = (count) => {\r\n        // Mobile: 1 column\r\n        if (isMobile) {\r\n            return { cols: 1, rows: count };\r\n        }\r\n\r\n        // Tablet/Desktop\r\n        if (count <= 1) return { cols: 1, rows: 1 };\r\n        if (count <= 4) return { cols: 2, rows: 2 };\r\n        if (count <= 6) return { cols: 3, rows: 2 };\r\n        if (count <= 9) return { cols: 3, rows: 3 };\r\n        return { cols: 4, rows: Math.ceil(count / 4) };\r\n    };\r\n\r\n    // Calculate total stream count (camera + screen shares)\r\n    const totalStreamCount = React.useMemo(() => {\r\n        let count = combinedUsers.length; // Her kullanÃ„Â±cÃ„Â± iÃƒÂ§in kamera kartÃ„Â±\r\n        combinedUsers.forEach(user => {\r\n            const baseKey = user.username;\r\n            const hasScreenStream = allStreams[`${baseKey}_screen`];\r\n            if (hasScreenStream && user.isScreenSharing) {\r\n                count++; // Ekran paylaÃ…Å¸Ã„Â±mÃ„Â± varsa bir kart daha ekle\r\n            }\r\n        });\r\n        return count;\r\n    }, [combinedUsers, allStreams]);\r\n\r\n    const userCount = combinedUsers.length;\r\n    const { cols, rows } = getGridLayout(totalStreamCount);\r\n\r\n    // Ã°Å¸â€ â€¢ CONTEXT MENU HANDLERS\r\n    const handleSendMessage = useCallback(async (targetUser) => {\r\n        window.location.hash = `#/dm/${targetUser.username}`;\r\n    }, []);\r\n\r\n    const handleAddFriend = useCallback(async (targetUser) => {\r\n        try {\r\n            const response = await fetch(`/api/friends/send_request/`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${localStorage.getItem('access_token')}`\r\n                },\r\n                body: JSON.stringify({ username: targetUser.username })\r\n            });\r\n            if (response.ok) {\r\n                toast.success(`Ã¢Å“â€¦ ${targetUser.username} kullanÃ„Â±cÃ„Â±sÃ„Â±na arkadaÃ…Å¸lÃ„Â±k isteÃ„Å¸i gÃƒÂ¶nderildi!`);\r\n            } else {\r\n                toast.error('Ã¢ÂÅ’ ArkadaÃ…Å¸lÃ„Â±k isteÃ„Å¸i gÃƒÂ¶nderilemedi');\r\n            }\r\n        } catch (error) {\r\n            console.error('Friend request error:', error);\r\n            toast.error('Ã¢ÂÅ’ Bir hata oluÃ…Å¸tu');\r\n        }\r\n    }, []);\r\n\r\n    const handleBlock = useCallback(async (targetUser) => {\r\n        try {\r\n            const response = await fetch(`/api/users/block/`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${localStorage.getItem('access_token')}`\r\n                },\r\n                body: JSON.stringify({ username: targetUser.username })\r\n            });\r\n            if (response.ok) {\r\n                toast.success(`Ã¢Å“â€¦ ${targetUser.username} engellendi!`);\r\n            } else {\r\n                toast.error('Ã¢ÂÅ’ Engelleme iÃ…Å¸lemi baÃ…Å¸arÃ„Â±sÃ„Â±z');\r\n            }\r\n        } catch (error) {\r\n            console.error('Block error:', error);\r\n            toast.error('Ã¢ÂÅ’ Bir hata oluÃ…Å¸tu');\r\n        }\r\n    }, []);\r\n\r\n    const handleViewProfile = useCallback((targetUser) => {\r\n        setContextMenu(null);\r\n        // Ã°Å¸â€Â¥ Profil panelini aÃƒÂ§\r\n        if (window.openUserProfile) {\r\n            window.openUserProfile(targetUser.username);\r\n        } else {\r\n            // Fallback - profil sayfasÃ„Â±na git\r\n            window.location.hash = `#/profile/${targetUser.username}`;\r\n        }\r\n    }, []);\r\n\r\n    const handleMuteUser = useCallback((targetUser) => {\r\n        setVolumeSettings(prev => ({\r\n            ...prev,\r\n            [targetUser.username]: {\r\n                ...prev[targetUser.username],\r\n                isMuted: !prev[targetUser.username]?.isMuted\r\n            }\r\n        }));\r\n    }, []);\r\n\r\n    const handleAdjustVolume = useCallback((targetUser, newVolume) => {\r\n        const volume = Math.max(0, Math.min(200, newVolume)); // 0-200% range\r\n\r\n        setVolumeSettings(prev => ({\r\n            ...prev,\r\n            [targetUser.username]: {\r\n                ...prev[targetUser.username],\r\n                volume: volume\r\n            }\r\n        }));\r\n\r\n        // Ã°Å¸â€Â¥ Ã„Â°YÃ„Â°LEÃ…Å¾TÃ„Â°RME: Audio element'e anÃ„Â±nda uygula (GainNode ile >100% destek)\r\n        const audioElements = document.querySelectorAll(`audio[data-username=\"${targetUser.username}\"]`);\r\n        audioElements.forEach(audio => {\r\n            if (volume <= 100) {\r\n                // Normal range Ã¢â‚¬â€ use native volume\r\n                audio.volume = volume / 100;\r\n                // Disconnect any existing GainNode\r\n                if (audio._gainNode) {\r\n                    try { audio._gainNode.gain.value = 1; } catch (e) { /* */ }\r\n                }\r\n            } else {\r\n                // >100% Ã¢â‚¬â€ use Web Audio API GainNode for amplification\r\n                audio.volume = 1.0; // Max native volume\r\n                try {\r\n                    if (!audio._audioContext) {\r\n                        audio._audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n                        audio._sourceNode = audio._audioContext.createMediaElementSource(audio);\r\n                        audio._gainNode = audio._audioContext.createGain();\r\n                        audio._sourceNode.connect(audio._gainNode);\r\n                        audio._gainNode.connect(audio._audioContext.destination);\r\n                    }\r\n                    audio._gainNode.gain.value = volume / 100; // e.g., 1.5 for 150%, 2.0 for 200%\r\n                } catch (e) {\r\n                    console.warn('[Volume] GainNode amplification failed:', e);\r\n                }\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    // Ã°Å¸Å½Â¨ HELPER: Status Badges\r\n    const renderStatusBadges = () => {\r\n        const badges = [];\r\n        if (isRecording) {\r\n            badges.push(\r\n                <span key=\"rec\" style={{ background: 'rgba(237,66,69,0.2)', color: '#ed4245', border: '1px solid rgba(237,66,69,0.4)', padding: '4px 8px', borderRadius: '10px', fontSize: '12px', display: 'inline-flex', alignItems: 'center', gap: '6px' }}>\r\n                    Ã¢ÂÂºÃ¯Â¸Â KayÃ„Â±tta ({Math.floor(recordingDuration / 60).toString().padStart(2, '0')}:{Math.floor(recordingDuration % 60).toString().padStart(2, '0')})\r\n                </span>\r\n            );\r\n        }\r\n        if (isScreenSharing) {\r\n            badges.push(\r\n                <span key=\"ss\" style={{ background: 'rgba(88,101,242,0.15)', color: '#8893ff', border: '1px solid rgba(88,101,242,0.35)', padding: '4px 8px', borderRadius: '10px', fontSize: '12px', display: 'inline-flex', alignItems: 'center', gap: '6px' }}>\r\n                    Ã°Å¸â€“Â¥Ã¯Â¸Â PaylaÃ…Å¸Ã„Â±lÃ„Â±yor {screenShareQuality} Ã¢â‚¬Â¢ {screenShareFPS}fps{includeSystemAudio ? ' Ã¢â‚¬Â¢ Ã°Å¸â€Å  Sistem' : ''}\r\n                </span>\r\n            );\r\n        }\r\n        if (isPTTMode) {\r\n            badges.push(\r\n                <span key=\"ptt\" style={{ background: 'rgba(250,166,26,0.18)', color: '#faa61a', border: '1px solid rgba(250,166,26,0.35)', padding: '4px 8px', borderRadius: '10px', fontSize: '12px', display: 'inline-flex', alignItems: 'center', gap: '6px' }}>\r\n                    Ã°Å¸Å½â„¢Ã¯Â¸Â PTT ({pttKey}) {isPTTActive ? 'Ã¢â‚¬Â¢ Aktif' : ''}\r\n                </span>\r\n            );\r\n        }\r\n        if (isReconnecting) {\r\n            badges.push(\r\n                <span key=\"reconnect\" style={{ background: 'rgba(255,255,255,0.08)', color: '#fff', border: '1px solid rgba(255,255,255,0.2)', padding: '4px 8px', borderRadius: '10px', fontSize: '12px', display: 'inline-flex', alignItems: 'center', gap: '6px' }}>\r\n                    Ã°Å¸â€â€ Yeniden baÃ„Å¸lanÃ„Â±yor\r\n                </span>\r\n            );\r\n        }\r\n        return badges.length ? <div style={{ display: 'flex', gap: '8px', alignItems: 'center', flexWrap: 'wrap' }}>{badges}</div> : null;\r\n    };\r\n\r\n    // Ã°Å¸Å½Â¨ HELPER: Stream Type Badge (Ekran/Kamera GÃƒÂ¶stergesi)\r\n    const renderStreamBadge = (user) => {\r\n        if (user.streamType === 'screen') {\r\n            return (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '12px',\r\n                    left: '12px',\r\n                    background: 'linear-gradient(135deg, #5865f2 0%, #7289da 100%)',\r\n                    color: '#fff',\r\n                    padding: '8px 16px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '13px',\r\n                    fontWeight: 700,\r\n                    boxShadow: '0 4px 16px rgba(88, 101, 242, 0.6), 0 0 0 2px rgba(255, 255, 255, 0.2)',\r\n                    zIndex: 100,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '8px',\r\n                    animation: 'badgePulse 2s infinite',\r\n                }}>\r\n                    Ã°Å¸â€“Â¥Ã¯Â¸Â <span style={{ textShadow: '0 2px 4px rgba(0, 0, 0, 0.5)' }}>{user.username} - Ekran PaylaÃ…Å¸Ã„Â±yor</span>\r\n                </div>\r\n            );\r\n        } else if (user.streamType === 'camera') {\r\n            return (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '12px',\r\n                    left: '12px',\r\n                    background: 'rgba(67, 181, 129, 0.85)',\r\n                    color: '#fff',\r\n                    padding: '6px 12px',\r\n                    borderRadius: '8px',\r\n                    fontSize: '11px',\r\n                    fontWeight: 600,\r\n                    boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\r\n                    zIndex: 100,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '6px',\r\n                }}>\r\n                    Ã°Å¸â€œÂ¹ Kamera\r\n                </div>\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    // ğŸ¨ MINIMIZED VIEW (KÃ¼Ã§Ã¼k Ada - Discord TarzÄ±)\r\n    if (renderMode === 'minimized') {\r\n        return (\r\n            <MinimizedView\r\n                roomName={roomName}\r\n                userCount={userCount}\r\n                combinedUsers={combinedUsers}\r\n                currentUser={currentUser}\r\n                onToggleMinimize={onToggleMinimize}\r\n                onContextMenu={(data) => setContextMenu(data)}\r\n                getUserAvatar={getUserAvatar}\r\n                isMuted={isMuted}\r\n                isCameraOn={isCameraOn}\r\n                isScreenSharing={isScreenSharing}\r\n                toggleMute={toggleMute}\r\n                toggleCamera={toggleCamera}\r\n                toggleScreenShare={toggleScreenShare}\r\n                leaveVoice={leaveVoice}\r\n            />\r\n        );\r\n    }\r\n\r\n    // Ã°Å¸Å½Â¨ FULLSCREEN VIEW (Bir kullanÃ„Â±cÃ„Â± geniÃ…Å¸letildi)\r\n    if (renderMode === 'fullscreen' && expandedUser) {\r\n        const streamKey = expandedUser.streamType === 'screen'\r\n            ? `${expandedUser.username}_screen`\r\n            : `${expandedUser.username}_camera`;\r\n        const expandedStream = allStreams[streamKey] || allStreams[expandedUser.username];\r\n\r\n        return (\r\n            <div style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                background: '#000',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                overflow: 'hidden',\r\n            }}>\r\n                {/* FULLSCREEN HEADER */}\r\n                <div style={{\r\n                    background: 'rgba(0, 0, 0, 0.8)',\r\n                    padding: '16px 24px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '16px',\r\n                }}>\r\n                    <button\r\n                        onClick={() => setExpandedUser(null)}\r\n                        style={{\r\n                            background: 'rgba(255, 255, 255, 0.1)',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            padding: '8px 16px',\r\n                            color: '#fff',\r\n                            cursor: 'pointer',\r\n                            fontSize: '14px',\r\n                        }}\r\n                    >\r\n                        Ã¢Â¬â€¦Ã¯Â¸Â Geri\r\n                    </button>\r\n                    <h3 style={{ color: '#fff', margin: 0, flex: 1 }}>\r\n                        Ã°Å¸â€˜Â¤ {expandedUser.username} {expandedUser.streamType === 'screen' && 'Ã°Å¸â€“Â¥Ã¯Â¸Â Ekran PaylaÃ…Å¸Ã„Â±mÃ„Â±'}\r\n                    </h3>\r\n                </div>\r\n\r\n                {/* FULLSCREEN VIDEO */}\r\n                <div style={{\r\n                    flex: 1,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    background: '#1a1a1a',\r\n                }}>\r\n                    <VideoFeed\r\n                        user={expandedUser}\r\n                        stream={expandedStream}\r\n                        fullscreen\r\n                    />\r\n                </div>\r\n\r\n                {/* FULLSCREEN CONTROLS */}\r\n                <ControlBar\r\n                    isMuted={isMuted}\r\n                    isDeafened={isDeafened} // Ã°Å¸â€Â¥ YENÃ„Â°\r\n                    isCameraOn={isCameraOn}\r\n                    isScreenSharing={isScreenSharing}\r\n                    isSpatialAudio={isSpatialAudioEnabled}\r\n                    isRecording={isRecording}\r\n                    recordingDuration={recordingDuration}\r\n                    onToggleMute={toggleMute}\r\n                    onToggleDeafened={toggleDeafened} // Ã°Å¸â€Â¥ YENÃ„Â°\r\n                    onToggleCamera={toggleCamera}\r\n                    onToggleScreenShare={toggleScreenShare}\r\n                    onToggleSpatialAudio={toggleSpatialAudio}\r\n                    onStartRecording={startRecording}\r\n                    onStopRecording={stopRecording}\r\n                    onLeave={leaveVoice}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Ã°Å¸Å½Â¨ GRID VIEW (Ana GÃƒÂ¶rÃƒÂ¼nÃƒÂ¼m)\r\n    return (\r\n        <div style={{\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'linear-gradient(135deg, #1e1e1e 0%, #2c2c2c 100%)',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            overflow: 'hidden',\r\n        }}>\r\n            {/* HEADER */}\r\n            <div style={{\r\n                background: 'rgba(0, 0, 0, 0.3)',\r\n                padding: '16px 24px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '16px',\r\n                borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n            }}>\r\n                <div style={{\r\n                    width: '10px',\r\n                    height: '10px',\r\n                    borderRadius: '50%',\r\n                    background: '#43b581',\r\n                    boxShadow: '0 0 12px #43b581',\r\n                    animation: 'pulse 2s infinite',\r\n                }} />\r\n                <h2 style={{\r\n                    color: '#fff',\r\n                    margin: 0,\r\n                    fontSize: '17px',\r\n                    fontWeight: 700,\r\n                    flex: 1,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '12px',\r\n                    letterSpacing: '0.3px',\r\n                }}>\r\n                    Ã°Å¸Å½â„¢Ã¯Â¸Â {roomName}\r\n                    {renderStatusBadges()}\r\n                    {/* Ã°Å¸â€Â¥ YENÃ„Â°: Network Quality Badge */}\r\n                    {networkQuality === 'poor' && (\r\n                        <div style={{\r\n                            background: 'rgba(240, 71, 71, 0.2)',\r\n                            border: '1px solid #f04747',\r\n                            borderRadius: '6px',\r\n                            padding: '4px 8px',\r\n                            fontSize: '12px',\r\n                            color: '#f04747',\r\n                            fontWeight: '600',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '4px',\r\n                        }}>\r\n                            Ã¢Å¡Â Ã¯Â¸Â ZayÃ„Â±f BaÃ„Å¸lantÃ„Â±\r\n                        </div>\r\n                    )}\r\n                    {networkQuality === 'excellent' && networkType !== 'unknown' && (\r\n                        <div style={{\r\n                            background: 'rgba(67, 181, 129, 0.2)',\r\n                            border: '1px solid #43b581',\r\n                            borderRadius: '6px',\r\n                            padding: '4px 8px',\r\n                            fontSize: '12px',\r\n                            color: '#43b581',\r\n                            fontWeight: '600',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '4px',\r\n                        }}>\r\n                            Ã°Å¸â€œÂ¶ {networkType.toUpperCase()}\r\n                        </div>\r\n                    )}\r\n                </h2>\r\n                <div style={{\r\n                    color: 'rgba(255, 255, 255, 0.7)',\r\n                    fontSize: '14px',\r\n                }}>\r\n                    Ã°Å¸â€˜Â¥ {userCount} kiÃ…Å¸i\r\n                </div>\r\n                <button\r\n                    onClick={onToggleMinimize}\r\n                    style={{\r\n                        background: 'rgba(255, 255, 255, 0.1)',\r\n                        border: 'none',\r\n                        borderRadius: '8px',\r\n                        padding: '8px 16px',\r\n                        color: '#fff',\r\n                        cursor: 'pointer',\r\n                        fontSize: '13px',\r\n                    }}\r\n                >\r\n                    Ã¢Â¬â€¡Ã¯Â¸Â KÃƒÂ¼ÃƒÂ§ÃƒÂ¼lt\r\n                </button>\r\n            </div>\r\n\r\n            {/* VIDEO GRID */}\r\n            <div style={{\r\n                flex: 1,\r\n                padding: '20px',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                overflow: 'auto', // Ã°Å¸â€Â¥ FIX: auto olsun ki scroll yapÃ„Â±labilsin\r\n                position: 'relative',\r\n                minHeight: 0, // Ã°Å¸â€Â¥ FIX: Flex child overflow iÃƒÂ§in gerekli\r\n            }}>\r\n                {/* Ana ekran paylaÃ…Å¸Ã„Â±mlarÃ„Â± varsa bÃƒÂ¼yÃƒÂ¼k gÃƒÂ¶ster */}\r\n                {(() => {\r\n                    const screenShares = combinedUsers.filter(u => u.isScreenSharing && allStreams[`${u.username}_screen`]);\r\n                    const hasScreenShares = screenShares.length > 0;\r\n\r\n                    if (hasScreenShares) {\r\n                        // Ã°Å¸â€Â¥ FIX: TÃƒÂ¼m kullanÃ„Â±cÃ„Â±larÃ„Â± tek grid'de gÃƒÂ¶ster (ekran + kamera karÃ„Â±Ã…Å¸Ã„Â±k)\r\n                        const allItems = [];\r\n\r\n                        // Ãƒâ€“nce ekran paylaÃ…Å¸Ã„Â±mlarÃ„Â±nÃ„Â± ekle\r\n                        screenShares.forEach(user => {\r\n                            const screenStream = allStreams[`${user.username}_screen`];\r\n                            if (screenStream) { // Ã°Å¸â€Â¥ Stream varsa ekle\r\n                                allItems.push({\r\n                                    key: `${user.username}_screen`,\r\n                                    username: user.username,\r\n                                    type: 'screen',\r\n                                    component: (\r\n                                        <UserVideoCard\r\n                                            key={`${user.username}_screen`}\r\n                                            user={{ ...user, streamType: 'screen' }}\r\n                                            stream={screenStream}\r\n                                            isActive={false}\r\n                                            isPinned={false}\r\n                                            onExpand={() => setExpandedUser({ ...user, streamType: 'screen' })}\r\n                                            onPin={() => { }}\r\n                                            onContextMenu={(data) => setContextMenu(data)}\r\n                                            badge={renderStreamBadge({ ...user, streamType: 'screen' })}\r\n                                            connectionQuality={connectionQuality[user.username]}\r\n                                            getUserAvatar={getUserAvatar}\r\n                                        />\r\n                                    )\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        // Sonra kameralarÃ„Â± ekle (sadece aktif stream'ler veya kendim)\r\n                        combinedUsers.forEach(user => {\r\n                            const cameraStream = allStreams[`${user.username}_camera`] || allStreams[user.username];\r\n\r\n                            // Ã°Å¸â€Â¥ CRITICAL: Stream varsa VEYA kendim isem gÃƒÂ¶ster\r\n                            const shouldShow = (cameraStream && cameraStream.active) || user.isLocal;\r\n\r\n                            if (shouldShow) {\r\n                                allItems.push({\r\n                                    key: `${user.username}_camera`,\r\n                                    username: user.username,\r\n                                    type: 'camera',\r\n                                    component: (\r\n                                        <UserVideoCard\r\n                                            key={`${user.username}_camera`}\r\n                                            user={{\r\n                                                ...user,\r\n                                                streamType: 'camera',\r\n                                                volume: remoteVolumes[user.username] || 100,\r\n                                                onVolumeChange: (vol) => setRemoteVolume(user.username, vol),\r\n                                                isTalking: talkingIndicators[user.username] || false, // Ã°Å¸â€Â¥ YENÃ„Â°\r\n                                            }}\r\n                                            stream={cameraStream}\r\n                                            isActive={activeSpeaker === user.username}\r\n                                            isPinned={pinnedUser === user.username}\r\n                                            onExpand={() => setExpandedUser({ ...user, streamType: 'camera' })}\r\n                                            onPin={() => setPinnedUser(pinnedUser === user.username ? null : user.username)}\r\n                                            onContextMenu={(data) => setContextMenu(data)}\r\n                                            badge={renderStreamBadge(user)}\r\n                                            connectionQuality={connectionQuality[user.username]}\r\n                                            getUserAvatar={getUserAvatar}\r\n                                        />\r\n                                    )\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        // Grid layout hesapla - Daha iyi daÃ„Å¸Ã„Â±lÃ„Â±m\r\n                        const totalItems = allItems.length;\r\n                        let cols, rows;\r\n\r\n                        if (totalItems <= 2) {\r\n                            cols = totalItems;\r\n                            rows = 1;\r\n                        } else if (totalItems <= 4) {\r\n                            cols = 2;\r\n                            rows = 2;\r\n                        } else if (totalItems <= 6) {\r\n                            cols = 3;\r\n                            rows = 2;\r\n                        } else {\r\n                            cols = 3;\r\n                            rows = Math.ceil(totalItems / 3);\r\n                        }\r\n\r\n                        return (\r\n                            <div style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                display: 'grid',\r\n                                gridTemplateColumns: `repeat(${cols}, 1fr)`,\r\n                                gridTemplateRows: `repeat(${rows}, 1fr)`,\r\n                                gap: '16px',\r\n                                padding: '0',\r\n                                position: 'relative', // Ã°Å¸â€Â¥ FIX: Parent relative olmalÃ„Â±\r\n                            }}>\r\n                                {allItems.map((item, index) => (\r\n                                    <div\r\n                                        key={item.key}\r\n                                        style={{\r\n                                            position: 'relative', // Ã°Å¸â€Â¥ FIX: Her cell relative\r\n                                            width: '100%',\r\n                                            height: '100%',\r\n                                            overflow: 'hidden', // Ã°Å¸â€Â¥ FIX: TaÃ…Å¸mayÃ„Â± ÃƒÂ¶nle\r\n                                            zIndex: 1, // Ã°Å¸â€Â¥ FIX: Base z-index\r\n                                            isolation: 'isolate', // Ã°Å¸â€Â¥ FIX: Z-index context izolasyonu\r\n                                        }}\r\n                                    >\r\n                                        {item.component}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        );\r\n                    } else {\r\n                        // Ã°Å¸â€Â¥ YENÃ„Â°: HiÃƒÂ§ stream yoksa profil fotoÃ„Å¸raflarÃ„Â±nÃ„Â± gÃƒÂ¶ster\r\n                        const hasAnyActiveStream = combinedUsers.some(u => {\r\n                            const cameraStream = allStreams[`${u.username}_camera`] || allStreams[u.username];\r\n                            return cameraStream && cameraStream.active;\r\n                        });\r\n\r\n                        if (!hasAnyActiveStream) {\r\n                            // Profil kartlarÃ„Â± gÃƒÂ¶ster\r\n                            return (\r\n                                <div style={{\r\n                                    flex: 1,\r\n                                    display: 'grid',\r\n                                    gridTemplateColumns: `repeat(${Math.min(cols, 3)}, 1fr)`,\r\n                                    gridTemplateRows: `repeat(${rows}, 1fr)`,\r\n                                    gap: '24px',\r\n                                    padding: '40px',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                }}>\r\n                                    {combinedUsers.map(user => (\r\n                                        <div\r\n                                            key={user.username}\r\n                                            style={{\r\n                                                display: 'flex',\r\n                                                flexDirection: 'column',\r\n                                                alignItems: 'center',\r\n                                                justifyContent: 'center',\r\n                                                gap: '12px',\r\n                                                padding: '32px',\r\n                                                borderRadius: '16px',\r\n                                                background: activeSpeaker === user.username\r\n                                                    ? 'linear-gradient(135deg, rgba(88, 101, 242, 0.25) 0%, rgba(114, 137, 218, 0.15) 100%)'\r\n                                                    : 'rgba(47, 49, 54, 0.5)',\r\n                                                border: activeSpeaker === user.username\r\n                                                    ? '2px solid rgba(88, 101, 242, 0.9)'\r\n                                                    : '2px solid rgba(79, 84, 92, 0.3)',\r\n                                                boxShadow: activeSpeaker === user.username\r\n                                                    ? '0 8px 32px rgba(88, 101, 242, 0.4), 0 0 20px rgba(88, 101, 242, 0.3)'\r\n                                                    : '0 4px 12px rgba(0, 0, 0, 0.2)',\r\n                                                transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                                                cursor: 'pointer',\r\n                                                position: 'relative',\r\n                                                transform: activeSpeaker === user.username ? 'scale(1.05)' : 'scale(1)',\r\n                                                animation: 'slideIn 0.4s ease forwards',\r\n                                            }}\r\n                                            onClick={() => setContextMenu({\r\n                                                user,\r\n                                                position: { x: window.innerWidth / 2, y: window.innerHeight / 2 }\r\n                                            })}\r\n                                        >\r\n                                            {/* Avatar */}\r\n                                            <div style={{\r\n                                                width: '140px',\r\n                                                height: '140px',\r\n                                                borderRadius: '50%',\r\n                                                overflow: 'hidden',\r\n                                                border: `5px solid ${activeSpeaker === user.username ? '#5865f2' : '#40444b'}`,\r\n                                                boxShadow: activeSpeaker === user.username\r\n                                                    ? '0 8px 24px rgba(88, 101, 242, 0.6), inset 0 0 20px rgba(88, 101, 242, 0.2)'\r\n                                                    : '0 4px 12px rgba(0, 0, 0, 0.4)',\r\n                                                animation: activeSpeaker === user.username ? 'pulse 1.5s infinite' : 'none',\r\n                                                position: 'relative',\r\n                                            }}>\r\n                                                <img\r\n                                                    src={getUserAvatar(user.username)}\r\n                                                    alt={user.username}\r\n                                                    onError={(e) => {\r\n                                                        e.target.onerror = null;\r\n                                                        e.target.src = getDeterministicAvatarFallback(user.username, 256);\r\n                                                    }}\r\n                                                    style={{\r\n                                                        width: '100%',\r\n                                                        height: '100%',\r\n                                                        objectFit: 'cover',\r\n                                                        filter: activeSpeaker === user.username ? 'brightness(1.1)' : 'brightness(0.95)',\r\n                                                    }}\r\n                                                />\r\n                                            </div>\r\n\r\n                                            {/* Username */}\r\n                                            <div style={{\r\n                                                fontSize: '20px',\r\n                                                fontWeight: '700',\r\n                                                color: activeSpeaker === user.username ? '#dee0fc' : '#fff',\r\n                                                textAlign: 'center',\r\n                                                textShadow: '0 2px 8px rgba(0, 0, 0, 0.7)',\r\n                                                letterSpacing: '0.3px',\r\n                                            }}>\r\n                                                {user.username}\r\n                                            </div>\r\n\r\n                                            {/* Status badges */}\r\n                                            <div style={{\r\n                                                display: 'flex',\r\n                                                gap: '12px',\r\n                                                fontSize: '22px',\r\n                                                marginTop: '4px',\r\n                                            }}>\r\n                                                {user.isMuted && (\r\n                                                    <span\r\n                                                        title=\"Mikrofon KapalÃ„Â±\"\r\n                                                        style={{\r\n                                                            filter: 'drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5))',\r\n                                                        }}\r\n                                                    >\r\n                                                        Ã°Å¸â€â€¡\r\n                                                    </span>\r\n                                                )}\r\n                                                {user.isDeafened && (\r\n                                                    <span\r\n                                                        title=\"KulaklÃ„Â±k KapalÃ„Â±\"\r\n                                                        style={{\r\n                                                            filter: 'drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5))',\r\n                                                        }}\r\n                                                    >\r\n                                                        Ã°Å¸â€Ë†\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            );\r\n                        }\r\n\r\n                        // Sadece kameralar varsa normal grid\r\n                        return (\r\n                            <div style={{\r\n                                flex: 1,\r\n                                display: 'grid',\r\n                                gridTemplateColumns: `repeat(${cols}, 1fr)`,\r\n                                gridTemplateRows: `repeat(${rows}, 1fr)`,\r\n                                gap: '16px',\r\n                                // Ã°Å¸â€Â¥ FIX: Responsive sizing\r\n                                minHeight: '400px',\r\n                                height: '100%',\r\n                            }}>\r\n                                {combinedUsers.map(user => {\r\n                                    const cameraStream = allStreams[`${user.username}_camera`] || (user.isLocal ? null : allStreams[user.username]);\r\n                                    return (\r\n                                        <UserVideoCard\r\n                                            key={`${user.username}_camera`}\r\n                                            user={{\r\n                                                ...user,\r\n                                                streamType: 'camera',\r\n                                                volume: remoteVolumes[user.username] || 100,\r\n                                                onVolumeChange: (vol) => setRemoteVolume(user.username, vol)\r\n                                            }}\r\n                                            stream={cameraStream}\r\n                                            isActive={activeSpeaker === user.username}\r\n                                            isPinned={pinnedUser === user.username}\r\n                                            onExpand={() => setExpandedUser({ ...user, streamType: 'camera' })}\r\n                                            onPin={() => setPinnedUser(pinnedUser === user.username ? null : user.username)}\r\n                                            onContextMenu={(data) => setContextMenu(data)}\r\n                                            badge={renderStreamBadge({ ...user, streamType: 'camera' })}\r\n                                            connectionQuality={connectionQuality[user.username]}\r\n                                            getUserAvatar={getUserAvatar}\r\n                                        />\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        );\r\n                    }\r\n                })()}\r\n            </div>\r\n\r\n            {/* Ã°Å¸â€Â¥ CONTROL BAR KALDIRILDI - Sol sidebar'da \"Ses BaÃ„Å¸landÃ„Â±\" bÃƒÂ¶lÃƒÂ¼mÃƒÂ¼nden kontrol edilecek */}\r\n\r\n            {/* Ã°Å¸â€Â¥ YENÃ„Â°: ECHO WARNING */}\r\n            {hasEchoRisk && showEchoWarning && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: '100px',\r\n                    left: '50%',\r\n                    transform: 'translateX(-50%)',\r\n                    background: 'linear-gradient(135deg, rgba(250, 166, 26, 0.95) 0%, rgba(237, 66, 69, 0.95) 100%)',\r\n                    color: '#fff',\r\n                    padding: '16px 24px',\r\n                    borderRadius: '12px',\r\n                    zIndex: 1000,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '12px',\r\n                    boxShadow: '0 8px 32px rgba(250, 166, 26, 0.6)',\r\n                    animation: 'pulse 2s infinite',\r\n                    maxWidth: '90%',\r\n                }}>\r\n                    <div style={{ fontSize: '24px', animation: 'pulse 1.5s infinite' }}>Ã¢Å¡Â Ã¯Â¸Â</div>\r\n                    <div style={{ flex: 1 }}>\r\n                        <div style={{ fontWeight: 'bold', marginBottom: '4px', fontSize: '15px' }}>Echo Tespit Edildi!</div>\r\n                        <div style={{ fontSize: '13px', opacity: 0.9 }}>KulaklÃ„Â±k kullanmanÃ„Â±z ÃƒÂ¶nerilir. HoparlÃƒÂ¶r kullanÃ„Â±mÃ„Â± echo'ya neden olur.</div>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowEchoWarning(false)}\r\n                        style={{\r\n                            background: 'rgba(255, 255, 255, 0.2)',\r\n                            border: 'none',\r\n                            borderRadius: '6px',\r\n                            color: '#fff',\r\n                            padding: '6px 12px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '12px',\r\n                            fontWeight: 'bold',\r\n                        }}\r\n                    >\r\n                        Kapat\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {/* SETTINGS MODAL - YENÃ„Â° GELÃ„Â°Ã…Å¾MÃ„Â°Ã…Å¾ PANEL */}\r\n            {isSettingsOpen && (\r\n                <VoiceSettingsPanel\r\n                    onClose={() => setIsSettingsOpen(false)}\r\n                    channelId={roomName}\r\n                />\r\n            )}\r\n\r\n            {/* Ã°Å¸â€ â€¢ CONTEXT MENU */}\r\n            {contextMenu && (\r\n                <UserContextMenu\r\n                    user={contextMenu.user}\r\n                    position={contextMenu.position}\r\n                    onClose={() => setContextMenu(null)}\r\n                    onSendMessage={handleSendMessage}\r\n                    onAddFriend={handleAddFriend}\r\n                    onBlock={handleBlock}\r\n                    onViewProfile={handleViewProfile}\r\n                    onMuteUser={handleMuteUser}\r\n                    onAdjustVolume={handleAdjustVolume}\r\n                    currentUser={currentUser}\r\n                    isInVoiceChat={true}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Ã°Å¸Å½Â® CONTROL BAR COMPONENT - Discord Style\r\n\r\n// Ã°Å¸â€Ëœ VOICE CONTROL BUTTON - Modern Discord Style\r\n\r\n// Ã°Å¸â€Ëœ MINI BUTTON\r\n\r\n// Ã°Å¸â€Ëœ ACTION BUTTON\r\n\r\n// Ã°Å¸â€œÂ¹ VIDEO FEED COMPONENT\r\n\r\n// Ã¢Å¡â„¢Ã¯Â¸Â SETTINGS MODAL COMPONENT\r\n\r\nexport default React.memo(VoiceChatPanel);\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["useRef","useEffect","jsxs","jsx","useState","useCallback","cols","rows"],"mappings":"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"}