const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./react-core-B6hadH-M.js","../css/react-core-Dj12pvTl.css"])))=>i.map(i=>d[i]);
import{f as e,r as a,l as h,aI as b,a4 as v,bK as k,_ as w}from"./react-core-B6hadH-M.js";const S=a.lazy(()=>w(()=>import("./react-core-B6hadH-M.js").then(o=>o.e4),__vite__mapDeps([0,1]),import.meta.url)),_=({onClose:o,ws:d,roomSlug:q})=>{const[l,c]=a.useState([]),[g,u]=a.useState(""),[s,p]=a.useState(""),[f,m]=a.useState(!1),E=()=>{if(!s)return;const t=[...l,s];c(t),p(""),y("queue_update",{queue:t})},x=()=>{if(l.length>0){const t=l[0],r=l.slice(1);u(t),c(r),m(!0),y("play_track",{url:t,queue:r})}},y=(t,r)=>{d.current?.readyState===WebSocket.OPEN&&d.current.send(JSON.stringify({type:"media_sync",action:t,payload:r}))};return a.useEffect(()=>{const t=r=>{const i=JSON.parse(r.data);i.type==="media_sync"&&(i.action==="queue_update"&&c(i.payload.queue),i.action==="play_track"&&(u(i.payload.url),c(i.payload.queue),m(!0)))};return d.current?.addEventListener("message",t),()=>d.current?.removeEventListener("message",t)},[d]),a.useEffect(()=>{const t=r=>{r.key==="Escape"&&o()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[o]),e.createElement("div",{style:n.overlay,onClick:o},e.createElement("div",{style:n.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:n.header},e.createElement("h3",null,"ðŸŽµ DJ OdasÄ±"),e.createElement("button",{onClick:o,style:n.closeBtn},e.createElement(h,null))),e.createElement("div",{style:n.playerWrapper},e.createElement(a.Suspense,{fallback:e.createElement("div",{style:{color:"#fff",padding:"20px",textAlign:"center"}},"Loading player...")},e.createElement(S,{url:g,playing:f,controls:!0,width:"100%",height:"200px"}))),e.createElement("div",{style:n.controls},e.createElement("input",{value:s,onChange:t=>p(t.target.value),placeholder:"YouTube ÅžarkÄ± Linki...",style:n.input}),e.createElement("button",{onClick:E,style:n.addBtn},e.createElement(b,null)),e.createElement("button",{onClick:x,style:n.nextBtn},e.createElement(v,null)," SÄ±radaki")),e.createElement("div",{style:n.queueList},e.createElement("h4",null,"SÄ±radakiler (",l.length,")"),l.map((t,r)=>e.createElement("div",{key:r,style:n.queueItem},e.createElement(k,{color:"#ccc"})," ",t)))))},n={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{background:"#2b2d31",width:"500px",borderRadius:"12px",padding:"20px"},header:{display:"flex",justifyContent:"space-between",color:"white",marginBottom:20},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.2em",cursor:"pointer"},playerWrapper:{marginBottom:20,borderRadius:"8px",overflow:"hidden"},controls:{display:"flex",gap:10,marginBottom:20},input:{flex:1,padding:8,borderRadius:4,border:"1px solid #444",background:"#202225",color:"white"},addBtn:{padding:"8px 12px",background:"#5865f2",color:"white",border:"none",borderRadius:4,cursor:"pointer"},nextBtn:{padding:"8px 12px",background:"#23a559",color:"white",border:"none",borderRadius:4,cursor:"pointer"},queueList:{maxHeight:200,overflowY:"auto",color:"#ccc"},queueItem:{padding:"8px",borderBottom:"1px solid #444",fontSize:"0.9em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},L=e.memo(_);export{L as default};
