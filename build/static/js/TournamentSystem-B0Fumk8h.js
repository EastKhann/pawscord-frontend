import{r as f,ak as y,aI as k,l as g,K as h,Y as T}from"./react-core-B6hadH-M.js";import{t as S}from"./index-D_6pZib5.js";const I=({onClose:t,fetchWithAuth:s,apiBaseUrl:n,currentUser:i})=>{const[d,o]=f.useState([]),[u,l]=f.useState(null),[m,c]=f.useState(!1),[a,b]=f.useState("all");f.useEffect(()=>{x()},[a]);const x=async()=>{try{const r=await s(`${n}/tournaments/?filter=${a}`);if(r.ok){const p=await r.json();o(p.tournaments||[])}}catch(r){console.error("Tournament load error:",r)}},R=async r=>{try{const p=await s(`${n}/tournaments/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(p.ok){const C=await p.json();o([C.tournament,...d]),c(!1)}}catch(p){console.error("Tournament create error:",p)}},E=async r=>{try{(await s(`${n}/tournaments/${r}/join/`,{method:"POST"})).ok&&(S.success("✅ Turnuvaya katıldınız!"),x())}catch(p){console.error("Join error:",p)}},v=async r=>{if(confirm("Turnuvadan ayrılmak istediğinize emin misiniz?"))try{await s(`${n}/tournaments/${r}/leave/`,{method:"POST"}),x()}catch(p){console.error("Leave error:",p)}};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.panel},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(y,{size:24,color:"#faa61a"}),React.createElement("h2",{style:e.title},"Turnuvalar")),React.createElement("div",{style:e.headerActions},React.createElement("button",{onClick:()=>c(!0),style:e.createButton},React.createElement(k,{size:14}),React.createElement("span",null,"Yeni Turnuva")),React.createElement("button",{onClick:t,style:e.closeButton},React.createElement(g,{size:20})))),React.createElement("div",{style:e.filters},["all","active","upcoming","completed"].map(r=>React.createElement("button",{key:r,onClick:()=>b(r),style:{...e.filterButton,backgroundColor:a===r?"#5865f2":"#2f3136"}},r==="all"?"Tümü":r==="active"?"Aktif":r==="upcoming"?"Yaklaşan":"Tamamlanan"))),React.createElement("div",{style:e.content},d.length===0?React.createElement("div",{style:e.empty},React.createElement(y,{size:48,color:"#4e5058"}),React.createElement("p",null,"Henüz turnuva yok")):React.createElement("div",{style:e.tournamentGrid},d.map(r=>React.createElement(w,{key:r.id,tournament:r,currentUser:i,onJoin:()=>E(r.id),onLeave:()=>v(r.id),onView:()=>l(r)})))),m&&React.createElement(z,{onClose:()=>c(!1),onCreate:R}),u&&React.createElement(B,{tournament:u,onClose:()=>l(null),fetchWithAuth:s,apiBaseUrl:n})))},w=({tournament:t,currentUser:s,onJoin:n,onLeave:i,onView:d})=>{const o=t.participants?.some(c=>c.username===s),u=t.participants?.length>=t.max_participants,l=t.status==="active",m=t.status==="completed";return React.createElement("div",{style:e.tournamentCard},React.createElement("div",{style:e.cardHeader},React.createElement("div",{style:e.tournamentName},t.name),React.createElement("div",{style:{...e.statusBadge,backgroundColor:l?"#3ba55d":m?"#72767d":"#faa61a"}},t.status)),React.createElement("div",{style:e.cardBody},React.createElement("div",{style:e.cardInfo},React.createElement(h,{size:14}),React.createElement("span",null,t.participants?.length||0,"/",t.max_participants)),React.createElement("div",{style:e.cardInfo},React.createElement(T,{size:14}),React.createElement("span",null,new Date(t.start_date).toLocaleDateString("tr-TR")))),React.createElement("div",{style:e.cardFooter},React.createElement("button",{onClick:d,style:e.viewButton},"Detaylar"),!m&&(o?React.createElement("button",{onClick:i,style:e.leaveButton},"Ayrıl"):React.createElement("button",{onClick:n,disabled:u,style:{...e.joinButton,opacity:u?.5:1,cursor:u?"not-allowed":"pointer"}},u?"Dolu":"Katıl"))))},z=({onClose:t,onCreate:s})=>{const[n,i]=f.useState({name:"",game:"",max_participants:8,start_date:"",prize:"",rules:""}),d=o=>{o.preventDefault(),s(n)};return React.createElement("div",{style:e.modalOverlay},React.createElement("div",{style:e.modal},React.createElement("h3",{style:e.modalTitle},"Yeni Turnuva Oluştur"),React.createElement("form",{onSubmit:d,style:e.form},React.createElement("input",{type:"text",placeholder:"Turnuva Adı",value:n.name,onChange:o=>i({...n,name:o.target.value}),style:e.input,required:!0}),React.createElement("input",{type:"text",placeholder:"Oyun",value:n.game,onChange:o=>i({...n,game:o.target.value}),style:e.input,required:!0}),React.createElement("select",{value:n.max_participants,onChange:o=>i({...n,max_participants:parseInt(o.target.value)}),style:e.input},React.createElement("option",{value:4},"4 Kişi"),React.createElement("option",{value:8},"8 Kişi"),React.createElement("option",{value:16},"16 Kişi"),React.createElement("option",{value:32},"32 Kişi")),React.createElement("input",{type:"datetime-local",value:n.start_date,onChange:o=>i({...n,start_date:o.target.value}),style:e.input,required:!0}),React.createElement("input",{type:"text",placeholder:"Ödül (opsiyonel)",value:n.prize,onChange:o=>i({...n,prize:o.target.value}),style:e.input}),React.createElement("textarea",{placeholder:"Kurallar",value:n.rules,onChange:o=>i({...n,rules:o.target.value}),style:{...e.input,minHeight:"100px"}}),React.createElement("div",{style:e.modalButtons},React.createElement("button",{type:"button",onClick:t,style:e.cancelButton},"İptal"),React.createElement("button",{type:"submit",style:e.submitButton},"Oluştur")))))},B=({tournament:t,onClose:s,fetchWithAuth:n,apiBaseUrl:i})=>{const[d,o]=f.useState(null);f.useEffect(()=>{u()},[t.id]);const u=async()=>{try{const l=await n(`${i}/tournaments/${t.id}/bracket/`);if(l.ok){const m=await l.json();o(m.bracket)}}catch(l){console.error("Bracket load error:",l)}};return React.createElement("div",{style:e.modalOverlay},React.createElement("div",{style:{...e.modal,maxWidth:"800px"}},React.createElement("div",{style:e.modalHeader},React.createElement("h3",{style:e.modalTitle},t.name),React.createElement("button",{onClick:s,style:e.modalClose},React.createElement(g,{size:18}))),React.createElement("div",{style:e.modalContent},React.createElement("div",{style:e.detailSection},React.createElement("h4",null,"Bilgiler"),React.createElement("p",null,React.createElement("strong",null,"Oyun:")," ",t.game),React.createElement("p",null,React.createElement("strong",null,"Katılımcı:")," ",t.participants?.length,"/",t.max_participants),React.createElement("p",null,React.createElement("strong",null,"Başlangıç:")," ",new Date(t.start_date).toLocaleString("tr-TR")),t.prize&&React.createElement("p",null,React.createElement("strong",null,"Ödül:")," ",t.prize)),t.rules&&React.createElement("div",{style:e.detailSection},React.createElement("h4",null,"Kurallar"),React.createElement("p",null,t.rules)),d&&React.createElement("div",{style:e.detailSection},React.createElement("h4",null,"Eşleşmeler"),(()=>{const l={};(Array.isArray(d)?d:[]).forEach(c=>{const a=c.round||1;l[a]||(l[a]=[]),l[a].push(c)});const m=Object.keys(l).sort((c,a)=>c-a);return React.createElement("div",{style:{display:"flex",gap:"20px",overflowX:"auto",padding:"12px 0"}},m.map(c=>React.createElement("div",{key:c,style:{minWidth:"200px",flex:"0 0 auto"}},React.createElement("div",{style:{color:"#5865f2",fontWeight:600,fontSize:"0.85em",marginBottom:"10px",textAlign:"center"}},m.length===1?"Final":`Tur ${c}`),React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},l[c].map(a=>React.createElement("div",{key:a.id,style:{backgroundColor:"#1e1f22",borderRadius:"8px",overflow:"hidden",border:a.status==="completed"?"1px solid #23a559":"1px solid #3f4147"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",backgroundColor:a.winner&&a.winner===a.participant1?.user_id?"rgba(35,165,89,0.1)":"transparent",borderBottom:"1px solid #2b2d31"}},React.createElement("span",{style:{color:"#dbdee1",fontSize:"0.85em",fontWeight:a.winner===a.participant1?.user_id?700:400}},a.participant1?.username||"TBD"),React.createElement("span",{style:{color:"#949ba4",fontSize:"0.8em",fontWeight:600}},a.score1??"-")),React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",backgroundColor:a.winner&&a.winner===a.participant2?.user_id?"rgba(35,165,89,0.1)":"transparent"}},React.createElement("span",{style:{color:"#dbdee1",fontSize:"0.85em",fontWeight:a.winner===a.participant2?.user_id?700:400}},a.participant2?.username||"TBD"),React.createElement("span",{style:{color:"#949ba4",fontSize:"0.8em",fontWeight:600}},a.score2??"-"))))))))})()),React.createElement("div",{style:e.detailSection},React.createElement("h4",null,"Katılımcılar"),React.createElement("div",{style:e.participantList},t.participants?.map(l=>React.createElement("div",{key:l.id,style:e.participant},React.createElement("span",null,l.username),l.seed&&React.createElement("span",{style:e.seed},"#",l.seed))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"100%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerActions:{display:"flex",gap:"12px"},title:{margin:0,fontSize:"20px",color:"#ffffff"},createButton:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px"},filters:{display:"flex",gap:"8px",padding:"16px 20px",borderBottom:"1px solid #202225"},filterButton:{padding:"8px 16px",borderRadius:"4px",border:"none",color:"#ffffff",cursor:"pointer",fontSize:"13px"},content:{flex:1,overflowY:"auto",padding:"20px"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},tournamentGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"16px"},tournamentCard:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"start"},tournamentName:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",flex:1},statusBadge:{padding:"4px 8px",borderRadius:"12px",fontSize:"11px",color:"#ffffff",textTransform:"uppercase",fontWeight:"bold"},cardBody:{display:"flex",flexDirection:"column",gap:"8px"},cardInfo:{display:"flex",alignItems:"center",gap:"8px",color:"#b9bbbe",fontSize:"13px"},cardFooter:{display:"flex",gap:"8px",marginTop:"auto"},viewButton:{flex:1,backgroundColor:"#202225",color:"#ffffff",border:"none",padding:"8px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},joinButton:{flex:1,backgroundColor:"#3ba55d",color:"#ffffff",border:"none",padding:"8px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},leaveButton:{flex:1,backgroundColor:"#ed4245",color:"#ffffff",border:"none",padding:"8px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},modal:{backgroundColor:"#36393f",borderRadius:"8px",padding:"24px",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto"},modalTitle:{color:"#ffffff",marginBottom:"16px"},form:{display:"flex",flexDirection:"column",gap:"12px"},input:{width:"100%",backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"10px",borderRadius:"4px",fontSize:"14px",outline:"none"},modalButtons:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"16px"},cancelButton:{backgroundColor:"transparent",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},submitButton:{backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},modalClose:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"},modalContent:{display:"flex",flexDirection:"column",gap:"16px"},detailSection:{backgroundColor:"#2f3136",padding:"16px",borderRadius:"8px"},participantList:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"8px"},participant:{backgroundColor:"#36393f",padding:"8px 12px",borderRadius:"4px",color:"#dcddde",fontSize:"13px",display:"flex",justifyContent:"space-between"},seed:{color:"#faa61a",fontWeight:"bold"}};export{I as default};
