import{r as c,a1 as h,l as R}from"./react-core-B6hadH-M.js";import{t as n}from"./index-D_6pZib5.js";const C=({fetchWithAuth:i,apiBaseUrl:s,onClose:f,serverId:l})=>{const[u,x]=c.useState([]),[y,m]=c.useState(!1),[r,g]=c.useState("");c.useEffect(()=>{d()},[]);const d=async()=>{m(!0);try{const a=await(await i(`${s}/servers/${l}/nicknames/`)).json();x(a.nicknames||[])}catch{n.error("Failed to load nicknames")}finally{m(!1)}},k=async(t,a)=>{try{await i(`${s}/servers/${l}/nicknames/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,nickname:a})}),n.success("Nickname updated"),d()}catch{n.error("Failed to update nickname")}},b=async t=>{try{await i(`${s}/servers/${l}/nicknames/clear/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t})}),n.success("Nickname cleared"),d()}catch{n.error("Failed to clear nickname")}},p=u.filter(t=>t.username.toLowerCase().includes(r.toLowerCase())||t.nickname&&t.nickname.toLowerCase().includes(r.toLowerCase()));return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(h,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Server Nicknames")),React.createElement("button",{onClick:f,style:e.closeButton},React.createElement(R,null))),React.createElement("div",{style:e.toolbar},React.createElement("input",{type:"text",value:r,onChange:t=>g(t.target.value),placeholder:"Search members...",style:e.searchInput})),React.createElement("div",{style:e.content},y?React.createElement("div",{style:e.loading},"Loading nicknames..."):p.length===0?React.createElement("div",{style:e.empty},r?"No members match your search":"No members found"):React.createElement("div",{style:e.nicknamesList},p.map((t,a)=>React.createElement("div",{key:a,style:e.nicknameCard},React.createElement("div",{style:e.userInfo},React.createElement("div",{style:e.username},t.username),t.nickname&&React.createElement("div",{style:e.currentNickname},"Current nickname: ",React.createElement("span",{style:e.nicknameValue},t.nickname))),React.createElement("div",{style:e.actions},React.createElement("button",{onClick:()=>{const o=prompt("Enter new nickname:",t.nickname||"");o!==null&&o.trim()&&k(t.user_id,o.trim())},style:e.editButton},"Edit"),t.nickname&&React.createElement("button",{onClick:()=>b(t.user_id),style:e.clearButton},"Clear"))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},searchInput:{width:"100%",padding:"10px 12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},nicknamesList:{display:"flex",flexDirection:"column",gap:"10px"},nicknameCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},userInfo:{flex:1},username:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},currentNickname:{fontSize:"13px",color:"#99aab5"},nicknameValue:{color:"#5865f2",fontWeight:"500"},actions:{display:"flex",gap:"8px"},editButton:{padding:"6px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500"},clearButton:{padding:"6px 12px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500"}};export{C as default};
