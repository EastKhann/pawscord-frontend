import{r as s,n as e}from"./react-core-DA61mcWm.js";import{a as m,a$ as b,$ as c}from"./icons-vendor-l2qVv93x.js";import"./ui-vendor-BrUQ4r0A.js";import"./editor-vendor-D9c4a6XZ.js";const C=({url:r,onRemove:d})=>{const[t,f]=s.useState(null),[x,l]=s.useState(!0),[h,a]=s.useState(!1);s.useEffect(()=>{g()},[r]);const g=async()=>{l(!0),a(!1);try{const o=await fetch(`/api/link-preview/?url=${encodeURIComponent(r)}`);if(!o.ok)throw new Error("Failed to fetch preview");const n=await o.json();f(n)}catch{a(!0)}finally{l(!1)}},v=o=>({youtube:"#FF0000",twitter:"#1DA1F2",github:"#333333",spotify:"#1DB954",twitch:"#9146FF"})[o?.toLowerCase()]||"#5865f2",u=o=>o.includes("youtube.com")||o.includes("youtu.be")||o.includes("vimeo.com")||t?.type==="video",p=o=>{if(o.includes("youtube.com")||o.includes("youtu.be")){const n=o.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/)?.[1];return n?`https://img.youtube.com/vi/${n}/maxresdefault.jpg`:null}return t?.image};return x?e.jsxs("div",{style:i.loadingContainer,children:[e.jsx("div",{style:i.loadingSpinner}),e.jsx("span",{style:i.loadingText,children:"Loading preview..."})]}):h||!t?null:e.jsxs("div",{style:i.container,children:[d&&e.jsx("button",{onClick:d,style:i.removeButton,children:e.jsx(m,{})}),u(r)?e.jsxs("div",{style:i.videoPreview,children:[p(r)&&e.jsxs("div",{style:i.videoThumbnail,children:[e.jsx("img",{src:p(r),alt:"Video thumbnail",style:i.videoImage}),e.jsx("div",{style:i.playOverlay,children:e.jsx(b,{style:i.playIcon})})]}),e.jsxs("div",{style:i.videoInfo,children:[e.jsx("div",{style:i.videoTitle,children:t.title||"Video"}),t.description&&e.jsxs("div",{style:i.videoDescription,children:[t.description.substring(0,150),"..."]}),e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:i.videoLink,children:[e.jsx(c,{style:{marginRight:"6px"}}),"Watch on ",t.provider||"YouTube"]})]})]}):e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:i.linkPreview,children:[t.image&&e.jsx("div",{style:i.imageContainer,children:e.jsx("img",{src:t.image,alt:t.title,style:i.image})}),e.jsxs("div",{style:i.contentContainer,children:[t.provider&&e.jsx("div",{style:{...i.provider,borderLeftColor:v(t.provider)},children:t.provider}),e.jsx("div",{style:i.title,children:t.title}),t.description&&e.jsx("div",{style:i.description,children:t.description}),e.jsxs("div",{style:i.url,children:[e.jsx(c,{style:{marginRight:"6px",fontSize:"10px"}}),new URL(r).hostname]})]})]})]})},i={container:{position:"relative",marginTop:"12px",marginBottom:"8px"},loadingContainer:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#2c2f33",borderRadius:"8px",borderLeft:"4px solid #5865f2"},loadingSpinner:{width:"20px",height:"20px",border:"3px solid #2c2f33",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite"},loadingText:{fontSize:"13px",color:"#99aab5"},removeButton:{position:"absolute",top:"8px",right:"8px",background:"rgba(0, 0, 0, 0.7)",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",cursor:"pointer",zIndex:10,fontSize:"12px"},linkPreview:{display:"flex",backgroundColor:"#2c2f33",borderRadius:"8px",overflow:"hidden",textDecoration:"none",color:"inherit",transition:"transform 0.2s",borderLeft:"4px solid #5865f2",maxWidth:"500px"},imageContainer:{minWidth:"120px",maxWidth:"120px",height:"120px",overflow:"hidden",backgroundColor:"#1e1e1e"},image:{width:"100%",height:"100%",objectFit:"cover"},contentContainer:{padding:"12px",flex:1,display:"flex",flexDirection:"column",gap:"6px"},provider:{fontSize:"11px",fontWeight:"600",color:"#5865f2",textTransform:"uppercase",borderLeft:"3px solid #5865f2",paddingLeft:"8px"},title:{fontSize:"14px",fontWeight:"600",color:"#ffffff",lineHeight:"1.3",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},description:{fontSize:"12px",color:"#dcddde",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},url:{fontSize:"11px",color:"#99aab5",display:"flex",alignItems:"center",marginTop:"auto"},videoPreview:{backgroundColor:"#2c2f33",borderRadius:"8px",overflow:"hidden",borderLeft:"4px solid #FF0000",maxWidth:"500px"},videoThumbnail:{position:"relative",width:"100%",paddingBottom:"56.25%",backgroundColor:"#1e1e1e",overflow:"hidden"},videoImage:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"},playOverlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"60px",height:"60px",backgroundColor:"rgba(255, 0, 0, 0.9)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},playIcon:{color:"#ffffff",fontSize:"24px",marginLeft:"4px"},videoInfo:{padding:"12px"},videoTitle:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"6px",lineHeight:"1.3"},videoDescription:{fontSize:"12px",color:"#dcddde",marginBottom:"8px",lineHeight:"1.4"},videoLink:{fontSize:"12px",color:"#5865f2",textDecoration:"none",display:"flex",alignItems:"center",fontWeight:"600"}};export{C as default};
