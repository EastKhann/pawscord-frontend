{"version":3,"file":"LinkPreviewRenderer-C2LxW31e.js","sources":["../../../src/components/LinkPreviewRenderer.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { FaExternalLinkAlt, FaImage, FaVideo, FaPlay, FaTimes } from 'react-icons/fa';\r\n\r\nconst LinkPreviewRenderer = ({ url, onRemove }) => {\r\n    const [preview, setPreview] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchPreview();\r\n    }, [url]);\r\n\r\n    const fetchPreview = async () => {\r\n        setLoading(true);\r\n        setError(false);\r\n        try {\r\n            const response = await fetch(`/api/link-preview/?url=${encodeURIComponent(url)}`);\r\n            if (!response.ok) throw new Error('Failed to fetch preview');\r\n            const data = await response.json();\r\n            setPreview(data);\r\n        } catch (err) {\r\n            setError(true);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const getProviderColor = (provider) => {\r\n        const colors = {\r\n            youtube: '#FF0000',\r\n            twitter: '#1DA1F2',\r\n            github: '#333333',\r\n            spotify: '#1DB954',\r\n            twitch: '#9146FF',\r\n        };\r\n        return colors[provider?.toLowerCase()] || '#5865f2';\r\n    };\r\n\r\n    const isVideo = (url) => {\r\n        return url.includes('youtube.com') || url.includes('youtu.be') || url.includes('vimeo.com') || preview?.type === 'video';\r\n    };\r\n\r\n    const getVideoThumbnail = (url) => {\r\n        if (url.includes('youtube.com') || url.includes('youtu.be')) {\r\n            const videoId = url.match(/(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/)?.[1];\r\n            return videoId ? `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg` : null;\r\n        }\r\n        return preview?.image;\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={styles.loadingContainer}>\r\n                <div style={styles.loadingSpinner}></div>\r\n                <span style={styles.loadingText}>Loading preview...</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error || !preview) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            {onRemove && (\r\n                <button onClick={onRemove} style={styles.removeButton}>\r\n                    <FaTimes />\r\n                </button>\r\n            )}\r\n\r\n            {isVideo(url) ? (\r\n                <div style={styles.videoPreview}>\r\n                    {getVideoThumbnail(url) && (\r\n                        <div style={styles.videoThumbnail}>\r\n                            <img src={getVideoThumbnail(url)} alt=\"Video thumbnail\" style={styles.videoImage} />\r\n                            <div style={styles.playOverlay}>\r\n                                <FaPlay style={styles.playIcon} />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <div style={styles.videoInfo}>\r\n                        <div style={styles.videoTitle}>{preview.title || 'Video'}</div>\r\n                        {preview.description && (\r\n                            <div style={styles.videoDescription}>{preview.description.substring(0, 150)}...</div>\r\n                        )}\r\n                        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\" style={styles.videoLink}>\r\n                            <FaExternalLinkAlt style={{ marginRight: '6px' }} />\r\n                            Watch on {preview.provider || 'YouTube'}\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <a href={url} target=\"_blank\" rel=\"noopener noreferrer\" style={styles.linkPreview}>\r\n                    {preview.image && (\r\n                        <div style={styles.imageContainer}>\r\n                            <img src={preview.image} alt={preview.title} style={styles.image} />\r\n                        </div>\r\n                    )}\r\n                    <div style={styles.contentContainer}>\r\n                        {preview.provider && (\r\n                            <div style={{ ...styles.provider, borderLeftColor: getProviderColor(preview.provider) }}>\r\n                                {preview.provider}\r\n                            </div>\r\n                        )}\r\n                        <div style={styles.title}>{preview.title}</div>\r\n                        {preview.description && (\r\n                            <div style={styles.description}>{preview.description}</div>\r\n                        )}\r\n                        <div style={styles.url}>\r\n                            <FaExternalLinkAlt style={{ marginRight: '6px', fontSize: '10px' }} />\r\n                            {new URL(url).hostname}\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        marginTop: '12px',\r\n        marginBottom: '8px',\r\n    },\r\n    loadingContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '12px',\r\n        padding: '16px',\r\n        backgroundColor: '#2c2f33',\r\n        borderRadius: '8px',\r\n        borderLeft: '4px solid #5865f2',\r\n    },\r\n    loadingSpinner: {\r\n        width: '20px',\r\n        height: '20px',\r\n        border: '3px solid #2c2f33',\r\n        borderTop: '3px solid #5865f2',\r\n        borderRadius: '50%',\r\n        animation: 'spin 1s linear infinite',\r\n    },\r\n    loadingText: {\r\n        fontSize: '13px',\r\n        color: '#99aab5',\r\n    },\r\n    removeButton: {\r\n        position: 'absolute',\r\n        top: '8px',\r\n        right: '8px',\r\n        background: 'rgba(0, 0, 0, 0.7)',\r\n        border: 'none',\r\n        borderRadius: '50%',\r\n        width: '24px',\r\n        height: '24px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        color: '#ffffff',\r\n        cursor: 'pointer',\r\n        zIndex: 10,\r\n        fontSize: '12px',\r\n    },\r\n    linkPreview: {\r\n        display: 'flex',\r\n        backgroundColor: '#2c2f33',\r\n        borderRadius: '8px',\r\n        overflow: 'hidden',\r\n        textDecoration: 'none',\r\n        color: 'inherit',\r\n        transition: 'transform 0.2s',\r\n        borderLeft: '4px solid #5865f2',\r\n        maxWidth: '500px',\r\n    },\r\n    imageContainer: {\r\n        minWidth: '120px',\r\n        maxWidth: '120px',\r\n        height: '120px',\r\n        overflow: 'hidden',\r\n        backgroundColor: '#1e1e1e',\r\n    },\r\n    image: {\r\n        width: '100%',\r\n        height: '100%',\r\n        objectFit: 'cover',\r\n    },\r\n    contentContainer: {\r\n        padding: '12px',\r\n        flex: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '6px',\r\n    },\r\n    provider: {\r\n        fontSize: '11px',\r\n        fontWeight: '600',\r\n        color: '#5865f2',\r\n        textTransform: 'uppercase',\r\n        borderLeft: '3px solid #5865f2',\r\n        paddingLeft: '8px',\r\n    },\r\n    title: {\r\n        fontSize: '14px',\r\n        fontWeight: '600',\r\n        color: '#ffffff',\r\n        lineHeight: '1.3',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        display: '-webkit-box',\r\n        WebkitLineClamp: 2,\r\n        WebkitBoxOrient: 'vertical',\r\n    },\r\n    description: {\r\n        fontSize: '12px',\r\n        color: '#dcddde',\r\n        lineHeight: '1.4',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        display: '-webkit-box',\r\n        WebkitLineClamp: 2,\r\n        WebkitBoxOrient: 'vertical',\r\n    },\r\n    url: {\r\n        fontSize: '11px',\r\n        color: '#99aab5',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: 'auto',\r\n    },\r\n    videoPreview: {\r\n        backgroundColor: '#2c2f33',\r\n        borderRadius: '8px',\r\n        overflow: 'hidden',\r\n        borderLeft: '4px solid #FF0000',\r\n        maxWidth: '500px',\r\n    },\r\n    videoThumbnail: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        paddingBottom: '56.25%',\r\n        backgroundColor: '#1e1e1e',\r\n        overflow: 'hidden',\r\n    },\r\n    videoImage: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        objectFit: 'cover',\r\n    },\r\n    playOverlay: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        width: '60px',\r\n        height: '60px',\r\n        backgroundColor: 'rgba(255, 0, 0, 0.9)',\r\n        borderRadius: '50%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        cursor: 'pointer',\r\n    },\r\n    playIcon: {\r\n        color: '#ffffff',\r\n        fontSize: '24px',\r\n        marginLeft: '4px',\r\n    },\r\n    videoInfo: {\r\n        padding: '12px',\r\n    },\r\n    videoTitle: {\r\n        fontSize: '14px',\r\n        fontWeight: '600',\r\n        color: '#ffffff',\r\n        marginBottom: '6px',\r\n        lineHeight: '1.3',\r\n    },\r\n    videoDescription: {\r\n        fontSize: '12px',\r\n        color: '#dcddde',\r\n        marginBottom: '8px',\r\n        lineHeight: '1.4',\r\n    },\r\n    videoLink: {\r\n        fontSize: '12px',\r\n        color: '#5865f2',\r\n        textDecoration: 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontWeight: '600',\r\n    },\r\n};\r\n\r\nexport default LinkPreviewRenderer;\r\n"],"names":["useState","useEffect","url","jsxs","jsx"],"mappings":"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"}