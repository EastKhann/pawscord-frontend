const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/media-vendor-CxFPycob.js","static/js/react-core-Djgtqrmb.js"])))=>i.map(i=>d[i]);
var w=Object.defineProperty;var r=(d,a)=>w(d,"name",{value:a,configurable:!0});import{_ as E}from"./media-vendor-CxFPycob.js";import{r as s,j as e}from"./react-core-Djgtqrmb.js";import{a as _,aL as P,j as F,aM as I,aN as L}from"./icons-vendor-BMXAt4pj.js";const O=s.lazy(()=>E(()=>import("./media-vendor-CxFPycob.js").then(d=>d.i),__vite__mapDeps([0,1]))),W=r(({onClose:d,ws:a})=>{const[b,j]=s.useState("https://www.youtube.com/watch?v=jfKfPfyJRdk"),[p,v]=s.useState(""),[f,i]=s.useState(!1),[C,z]=s.useState(.8),[x,h]=s.useState(null),[S,y]=s.useState(!1),l=s.useRef(null),c=s.useRef(!1),m=r(()=>{if(l.current&&typeof l.current.getCurrentTime=="function")try{return l.current.getCurrentTime()}catch{return 0}return 0},"getCurrentTimeSafe");s.useEffect(()=>{if(!a.current)return;const t=r(g=>{try{const o=JSON.parse(g.data);if(o.type==="media_sync"){if(c.current=!0,o.action==="change_url")i(!1),y(!1),j(o.payload.url),h(null);else if(o.action==="play"){const T=m();Math.abs(T-o.payload.time)>2&&l.current&&typeof l.current.seekTo=="function"&&l.current.seekTo(o.payload.time),i(!0)}else o.action==="pause"&&i(!1);setTimeout(()=>{c.current=!1},1e3)}}catch{}},"handleMessage");return a.current.addEventListener("message",t),()=>a.current?.removeEventListener("message",t)},[a]);const u=r((t,g={})=>{c.current||a.current?.readyState===WebSocket.OPEN&&a.current.send(JSON.stringify({type:"media_sync",action:t,payload:g}))},"sendSignal"),R=r(t=>{t.preventDefault(),p.trim()&&(c.current=!1,i(!1),y(!1),j(p),h(null),u("change_url",{url:p}),v(""))},"handleLoadUrl");return e.jsx("div",{style:n.overlay,children:e.jsxs("div",{style:n.modal,children:[e.jsxs("div",{style:n.header,children:[e.jsx("h3",{children:"ðŸ¿ Sinema & MÃ¼zik"}),e.jsx("button",{onClick:d,style:n.closeBtn,children:e.jsx(_,{})})]}),e.jsxs("div",{style:n.playerWrapper,children:[x&&e.jsxs("div",{style:n.statusOverlay,children:[e.jsx(P,{size:40,color:"#f04747"}),e.jsx("p",{style:{marginTop:10},children:x})]}),!S&&!x&&e.jsxs("div",{style:n.statusOverlay,children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{style:{marginTop:10},children:"YÃ¼kleniyor..."})]}),e.jsx(s.Suspense,{fallback:e.jsx("div",{style:{color:"#fff",padding:"50px",textAlign:"center"},children:"Loading player..."}),children:e.jsx(O,{ref:l,url:b,playing:f,volume:C,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},onReady:r(()=>{y(!0)},"onReady"),onError:r(t=>{h("Video oynatÄ±lamadÄ±. Link geÃ§ersiz olabilir."),y(!0)},"onError"),onPlay:r(()=>{const t=m();u("play",{time:t})},"onPlay"),onPause:r(()=>{u("pause")},"onPause"),onProgress:r(()=>{},"onProgress")},b)})]}),e.jsxs("div",{style:n.controls,children:[e.jsxs("form",{onSubmit:R,style:n.urlForm,children:[e.jsx(F,{style:{color:"#b9bbbe"}}),e.jsx("input",{type:"text",value:p,onChange:r(t=>v(t.target.value),"onChange"),placeholder:"YouTube linki yapÄ±ÅŸtÄ±r...",style:n.input}),e.jsx("button",{type:"submit",style:n.loadBtn,children:"YÃ¼kle"})]}),e.jsx("button",{onClick:r(()=>{if(c.current=!1,f)i(!1),u("pause");else{i(!0);const t=m();u("play",{time:t})}},"onClick"),style:{...n.loadBtn,backgroundColor:f?"#da373c":"#43b581",marginLeft:10,width:110,display:"flex",alignItems:"center",justifyContent:"center",gap:5},children:f?e.jsxs(e.Fragment,{children:[e.jsx(I,{})," Durdur"]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{})," Oynat"]})})]})]})})},"CinemaModal"),n={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{width:"90%",maxWidth:"900px",backgroundColor:"#202225",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},header:{padding:"15px",backgroundColor:"#2f3136",display:"flex",justifyContent:"space-between",color:"white"},playerWrapper:{position:"relative",paddingTop:"56.25%",backgroundColor:"black"},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.5em",cursor:"pointer"},controls:{padding:"20px",display:"flex",alignItems:"center"},urlForm:{display:"flex",gap:"10px",backgroundColor:"#40444b",padding:"10px",borderRadius:"8px",flex:1},input:{flex:1,background:"transparent",border:"none",color:"white",outline:"none"},loadBtn:{padding:"8px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},statusOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.7)",color:"white",zIndex:10}},k=document.createElement("style");k.innerText=`
    .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4px solid #ffffff;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
`;document.head.appendChild(k);export{W as default};
