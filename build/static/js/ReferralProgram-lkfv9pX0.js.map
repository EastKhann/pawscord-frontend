{"version":3,"file":"ReferralProgram-lkfv9pX0.js","sources":["../../../src/components/ReferralProgram.jsx"],"sourcesContent":["// Referral Program Component\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport toast from '../utils/toast';\r\nimport { PRODUCTION_URL } from '../utils/constants';\r\nimport './ReferralProgram.css';\r\n\r\nexport default function ReferralProgram({ user }) {\r\n    const [referralCode, setReferralCode] = useState('');\r\n    const [referralCount, setReferralCount] = useState(0);\r\n    const [rewards, setRewards] = useState([]);\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            loadReferralData();\r\n        }\r\n    }, [user]);\r\n\r\n    const loadReferralData = async () => {\r\n        try {\r\n            const response = await axios.get('/api/user/profile/');\r\n            setReferralCode(response.data.referral_code || generateCode());\r\n            setReferralCount(response.data.referral_count || 0);\r\n        } catch (error) {\r\n            console.error('Failed to load referral data:', error);\r\n        }\r\n    };\r\n\r\n    const generateCode = () => {\r\n        return Math.random().toString(36).substring(2, 10).toUpperCase();\r\n    };\r\n\r\n    const copyReferralLink = () => {\r\n        const link = `${PRODUCTION_URL}/join/${referralCode}`;\r\n        navigator.clipboard.writeText(link);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    const shareOnTwitter = () => {\r\n        const text = `Join me on Pawscord - a privacy-first Discord alternative! üêæ\\n\\nNo tracking. No ads. 100% open source.\\n\\nSign up with my link for 3 months free premium:`;\r\n        const url = `${PRODUCTION_URL}/join/${referralCode}`;\r\n        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');\r\n    };\r\n\r\n    const claimReward = async () => {\r\n        try {\r\n            const response = await axios.post('/api/referral/claim/');\r\n            toast.success(`Reward claimed! You got ${response.data.reward}`);\r\n            loadReferralData();\r\n        } catch (error) {\r\n            toast.error(error.response?.data?.error || 'Failed to claim reward');\r\n        }\r\n    };\r\n\r\n    const getReferralTier = () => {\r\n        if (referralCount >= 10) return 'lifetime';\r\n        if (referralCount >= 5) return '6months';\r\n        if (referralCount >= 1) return '1month';\r\n        return 'none';\r\n    };\r\n\r\n    const tier = getReferralTier();\r\n\r\n    return (\r\n        <div className=\"referral-program\">\r\n            <div className=\"referral-header\">\r\n                <h2>üéÅ Invite Friends, Get Rewards</h2>\r\n                <p>Share Pawscord and earn free premium for every friend who joins!</p>\r\n            </div>\r\n\r\n            {/* Referral Link */}\r\n            <div className=\"referral-link-card\">\r\n                <label>Your Referral Link:</label>\r\n                <div className=\"link-container\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={`${PRODUCTION_URL}/join/${referralCode}`}\r\n                        readOnly\r\n                        className=\"referral-input\"\r\n                    />\r\n                    <button onClick={copyReferralLink} className=\"copy-btn\">\r\n                        {copied ? '‚úÖ Copied!' : 'üìã Copy'}\r\n                    </button>\r\n                </div>\r\n                <button onClick={shareOnTwitter} className=\"share-btn twitter\">\r\n                    üê¶ Share on Twitter\r\n                </button>\r\n            </div>\r\n\r\n            {/* Referral Stats */}\r\n            <div className=\"referral-stats\">\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{referralCount}</div>\r\n                    <div className=\"stat-label\">Friends Referred</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{tier === 'lifetime' ? '‚àû' : tier === '6months' ? '6mo' : tier === '1month' ? '1mo' : '0'}</div>\r\n                    <div className=\"stat-label\">Premium Earned</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Rewards Tiers */}\r\n            <div className=\"rewards-tiers\">\r\n                <h3>Reward Tiers:</h3>\r\n                <div className=\"tier-list\">\r\n                    <div className={`tier-item ${referralCount >= 1 ? 'unlocked' : ''}`}>\r\n                        <div className=\"tier-icon\">ü•â</div>\r\n                        <div className=\"tier-info\">\r\n                            <div className=\"tier-title\">Bronze</div>\r\n                            <div className=\"tier-reward\">1 Month Premium</div>\r\n                            <div className=\"tier-requirement\">1 Friend</div>\r\n                        </div>\r\n                        {referralCount >= 1 && referralCount < 5 && (\r\n                            <button onClick={claimReward} className=\"claim-btn\">Claim</button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className={`tier-item ${referralCount >= 5 ? 'unlocked' : ''}`}>\r\n                        <div className=\"tier-icon\">ü•à</div>\r\n                        <div className=\"tier-info\">\r\n                            <div className=\"tier-title\">Silver</div>\r\n                            <div className=\"tier-reward\">6 Months Premium</div>\r\n                            <div className=\"tier-requirement\">5 Friends</div>\r\n                        </div>\r\n                        {referralCount >= 5 && referralCount < 10 && (\r\n                            <button onClick={claimReward} className=\"claim-btn\">Claim</button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className={`tier-item ${referralCount >= 10 ? 'unlocked' : ''}`}>\r\n                        <div className=\"tier-icon\">ü•á</div>\r\n                        <div className=\"tier-info\">\r\n                            <div className=\"tier-title\">Gold</div>\r\n                            <div className=\"tier-reward\">Lifetime Premium üöÄ</div>\r\n                            <div className=\"tier-requirement\">10 Friends</div>\r\n                        </div>\r\n                        {referralCount >= 10 && (\r\n                            <button onClick={claimReward} className=\"claim-btn\">Claim</button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"progress-section\">\r\n                <h3>Your Progress:</h3>\r\n                <div className=\"progress-bar\">\r\n                    <div\r\n                        className=\"progress-fill\"\r\n                        style={{ width: `${Math.min((referralCount / 10) * 100, 100)}%` }}\r\n                    >\r\n                        <span>{referralCount} / 10</span>\r\n                    </div>\r\n                </div>\r\n                <p className=\"progress-hint\">\r\n                    {referralCount >= 10 ? (\r\n                        'üéâ You unlocked Lifetime Premium!'\r\n                    ) : referralCount >= 5 ? (\r\n                        `${10 - referralCount} more friends for Lifetime Premium!`\r\n                    ) : referralCount >= 1 ? (\r\n                        `${5 - referralCount} more for 6 Months Premium!`\r\n                    ) : (\r\n                        'Share your link to start earning rewards!'\r\n                    )}\r\n                </p>\r\n            </div>\r\n\r\n            {/* How It Works */}\r\n            <div className=\"how-it-works\">\r\n                <h3>How It Works:</h3>\r\n                <ol>\r\n                    <li>üì§ Share your unique referral link with friends</li>\r\n                    <li>‚úÖ They sign up using your link</li>\r\n                    <li>üéÅ You automatically earn premium time!</li>\r\n                    <li>üîÅ Keep sharing to unlock more rewards</li>\r\n                </ol>\r\n            </div>\r\n\r\n            {/* Social Share Buttons */}\r\n            <div className=\"social-share\">\r\n                <h3>Share on:</h3>\r\n                <div className=\"share-buttons\">\r\n                    <button\r\n                        onClick={() => window.open(`https://www.facebook.com/sharer/sharer.php?u=${PRODUCTION_URL}/join/${referralCode}`, '_blank')}\r\n                        className=\"share-btn facebook\"\r\n                    >\r\n                        üìò Facebook\r\n                    </button>\r\n                    <button\r\n                        onClick={() => window.open(`https://www.reddit.com/submit?url=${PRODUCTION_URL}/join/${referralCode}&title=Check out Pawscord!`, '_blank')}\r\n                        className=\"share-btn reddit\"\r\n                    >\r\n                        ü§ñ Reddit\r\n                    </button>\r\n                    <button\r\n                        onClick={() => window.open(`https://wa.me/?text=Join me on Pawscord! ${PRODUCTION_URL}/join/${referralCode}`, '_blank')}\r\n                        className=\"share-btn whatsapp\"\r\n                    >\r\n                        üí¨ WhatsApp\r\n                    </button>\r\n                    <button\r\n                        onClick={() => window.open(`https://t.me/share/url?url=${PRODUCTION_URL}/join/${referralCode}&text=Check out Pawscord!`, '_blank')}\r\n                        className=\"share-btn telegram\"\r\n                    >\r\n                        ‚úàÔ∏è Telegram\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":"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"}