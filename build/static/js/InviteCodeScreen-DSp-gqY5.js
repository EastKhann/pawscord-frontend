import{r as a,d as e}from"./react-core-DrOm_csO.js";import{t as s}from"./index-BYhWpPLp.js";function I({inviteCode:i,fetchWithAuth:u,onClose:c,apiBaseUrl:p}){const[g,m]=a.useState(!0),[f,x]=a.useState(null),[l,b]=a.useState(null),[d,y]=a.useState(!1);a.useEffect(()=>{v()},[i]);const v=async()=>{try{m(!0),x(null);const n=await fetch(`${p}/invites/${i}/`);if(!n.ok){const S=await n.json().catch(()=>({}));throw new Error(S.error||"Davet bulunamadƒ± veya s√ºresi dolmu≈ü")}if(!(n.headers.get("content-type")||"").includes("application/json"))throw new Error("Davet bulunamadƒ±");const E=await n.json();b(E)}catch(n){x(n.message)}finally{m(!1)}},h=async()=>{if(l){if(!u){s.warning("üîê Sunucuya katƒ±lmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!"),sessionStorage.setItem("pending_invite",i),window.location.hash="#/";return}try{y(!0);const n=await u(`${p}/invites/${i}/accept/`,{method:"POST"}),r=await n.json().catch(()=>({}));if(n.ok||r.success)s.success(`‚úÖ ${r.server_name||r.message||"Sunucuya katƒ±ldƒ±nƒ±z!"}`),window.location.hash="#/",setTimeout(()=>window.location.reload(),200);else if(r.error&&r.error.includes("zaten"))s.info("‚ÑπÔ∏è Zaten bu sunucudasƒ±nƒ±z!"),c();else throw new Error(r.error||"Sunucuya katƒ±lƒ±namadƒ±")}catch(n){s.error("‚ùå "+n.message)}finally{y(!1)}}};if(g)return e.createElement("div",{style:t.container},e.createElement("div",{style:t.card},e.createElement("div",{style:t.loadingSpinner}),e.createElement("p",{style:t.loadingText},"Davet bilgileri y√ºkleniyor...")));if(f)return e.createElement("div",{style:t.container},e.createElement("div",{style:t.card},e.createElement("div",{style:t.errorIcon},"‚ùå"),e.createElement("h2",{style:t.errorTitle},"Davet Bulunamadƒ±"),e.createElement("p",{style:t.errorText},f),e.createElement("button",{onClick:c,style:t.closeButton},"Ana Sayfaya D√∂n")));const o=l?.server;return e.createElement("div",{style:t.container},e.createElement("div",{style:t.card},e.createElement("div",{style:t.serverIconContainer},o?.icon?e.createElement("img",{src:o.icon,alt:o?.name,style:t.serverIcon}):e.createElement("div",{style:t.serverIconPlaceholder},o?.name?.charAt(0)?.toUpperCase()||"?")),e.createElement("p",{style:t.invitedBy},l?.inviter?.username||"Birisi"," seni davet ediyor:"),e.createElement("h2",{style:t.serverName},o?.name||"Bilinmeyen Sunucu"),e.createElement("div",{style:t.memberInfo},e.createElement("span",{style:t.memberCount},"üë• ",o?.member_count||0," √ºye")),e.createElement("button",{onClick:h,disabled:d,style:{...t.joinButton,opacity:d?.7:1}},d?"‚è≥ Katƒ±lƒ±nƒ±yor...":"‚úÖ Sunucuya Katƒ±l"),e.createElement("button",{onClick:c,style:t.backButton},"‚Üê Geri D√∂n")))}const t={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",padding:"20px"},card:{background:"#2b2d31",borderRadius:"16px",padding:"40px",maxWidth:"440px",width:"100%",textAlign:"center",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},serverIconContainer:{display:"flex",justifyContent:"center",marginBottom:"20px"},serverIcon:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:"3px solid #5865f2"},serverIconPlaceholder:{width:"80px",height:"80px",borderRadius:"50%",background:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"36px",fontWeight:"bold",color:"#fff"},invitedBy:{color:"#b5bac1",fontSize:"14px",marginBottom:"8px"},serverName:{color:"#fff",fontSize:"24px",fontWeight:"bold",marginBottom:"12px"},memberInfo:{marginBottom:"24px"},memberCount:{color:"#b5bac1",fontSize:"14px"},joinButton:{width:"100%",padding:"14px",background:"#5865f2",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"background 0.2s",marginBottom:"12px"},backButton:{width:"100%",padding:"10px",background:"transparent",color:"#b5bac1",border:"1px solid #4e5058",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},loadingSpinner:{width:"40px",height:"40px",border:"3px solid #4e5058",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"},loadingText:{color:"#b5bac1",fontSize:"16px"},errorIcon:{fontSize:"48px",marginBottom:"16px"},errorTitle:{color:"#fff",fontSize:"20px",marginBottom:"8px"},errorText:{color:"#b5bac1",fontSize:"14px",marginBottom:"20px"},closeButton:{padding:"12px 24px",background:"#4e5058",color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer"}};export{I as default};
