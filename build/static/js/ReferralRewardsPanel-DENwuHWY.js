import{r as o,d as e,ci as x,i as C,z as k,aL as g,a7 as y}from"./react-core-DMT_QkRe.js";import{t as n}from"./index-DsxO5r0w.js";const L=({fetchWithAuth:i,apiBaseUrl:s,onClose:u,username:R})=>{const[c,b]=o.useState([]),[l,E]=o.useState(null),[v,f]=o.useState(!1),[d,w]=o.useState("");o.useEffect(()=>{p(),m()},[]);const p=async()=>{f(!0);try{const a=await(await i(`${s}/api/referrals/rewards/`)).json();b(a.rewards||[]),w(a.referral_link||"")}catch{n.error("Failed to load rewards")}finally{f(!1)}},m=async()=>{try{const a=await(await i(`${s}/api/referrals/stats/`)).json();E(a)}catch{console.error("Failed to load stats")}},h=async r=>{try{await i(`${s}/api/referrals/rewards/${r}/claim/`,{method:"POST"}),n.success("Reward claimed!"),p(),m()}catch{n.error("Failed to claim reward")}},S=()=>{navigator.clipboard.writeText(d),n.success("Referral link copied to clipboard!")};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(x,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Referral Rewards")),e.createElement("button",{onClick:u,style:t.closeButton},e.createElement(C,null))),d&&e.createElement("div",{style:t.referralSection},e.createElement("div",{style:t.referralLabel},"Your Referral Link"),e.createElement("div",{style:t.referralLinkBox},e.createElement("input",{type:"text",value:d,readOnly:!0,style:t.referralInput}),e.createElement("button",{onClick:S,style:t.copyButton},"Copy")),e.createElement("div",{style:t.referralHint},"Share this link to earn rewards when friends join!")),l&&e.createElement("div",{style:t.statsSection},e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(k,{style:{color:"#5865f2",fontSize:"24px"}})),e.createElement("div",null,e.createElement("div",{style:t.statValue},l.total_referrals||0),e.createElement("div",{style:t.statLabel},"Total Referrals"))),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(g,{style:{color:"#faa61a",fontSize:"24px"}})),e.createElement("div",null,e.createElement("div",{style:t.statValue},l.coins_earned||0),e.createElement("div",{style:t.statLabel},"Coins Earned"))),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(y,{style:{color:"#43b581",fontSize:"24px"}})),e.createElement("div",null,e.createElement("div",{style:t.statValue},l.rewards_claimed||0),e.createElement("div",{style:t.statLabel},"Rewards Claimed")))),e.createElement("div",{style:t.content},e.createElement("h3",{style:t.sectionTitle},"Available Rewards"),v?e.createElement("div",{style:t.loading},"Loading rewards..."):c.length===0?e.createElement("div",{style:t.empty},"No rewards available"):e.createElement("div",{style:t.rewardsList},c.map((r,a)=>e.createElement("div",{key:a,style:t.rewardCard},e.createElement("div",{style:t.rewardIcon},r.type==="coins"&&e.createElement(g,{style:{color:"#faa61a",fontSize:"32px"}}),r.type==="badge"&&e.createElement(y,{style:{color:"#5865f2",fontSize:"32px"}}),r.type==="item"&&e.createElement(x,{style:{color:"#43b581",fontSize:"32px"}})),e.createElement("div",{style:t.rewardInfo},e.createElement("div",{style:t.rewardName},r.name),e.createElement("div",{style:t.rewardDescription},r.description),e.createElement("div",{style:t.rewardRequirement},"Requires ",r.referrals_required," referrals"),r.progress!==void 0&&e.createElement("div",{style:t.progressBar},e.createElement("div",{style:{...t.progressFill,width:`${r.progress/r.referrals_required*100}%`}}))),e.createElement("div",{style:t.rewardActions},r.claimed?e.createElement("div",{style:t.claimedBadge},"âœ“ Claimed"):r.claimable?e.createElement("button",{onClick:()=>h(r.id),style:t.claimButton},"Claim"):e.createElement("div",{style:t.lockedBadge},"ðŸ”’ Locked"))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},referralSection:{padding:"20px",borderBottom:"1px solid #2c2f33",backgroundColor:"#2c2f33"},referralLabel:{fontSize:"13px",color:"#dcddde",marginBottom:"8px"},referralLinkBox:{display:"flex",gap:"12px",marginBottom:"8px"},referralInput:{flex:1,padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #1e1e1e",borderRadius:"4px",color:"#ffffff",fontSize:"13px"},copyButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"600"},referralHint:{fontSize:"12px",color:"#99aab5",fontStyle:"italic"},statsSection:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",padding:"20px",borderBottom:"1px solid #2c2f33"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},statIcon:{minWidth:"48px"},statValue:{fontSize:"24px",fontWeight:"700",color:"#ffffff",marginBottom:"4px"},statLabel:{fontSize:"12px",color:"#99aab5"},content:{padding:"20px",overflowY:"auto",flex:1},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},rewardsList:{display:"flex",flexDirection:"column",gap:"12px"},rewardCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},rewardIcon:{minWidth:"48px"},rewardInfo:{flex:1},rewardName:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"6px"},rewardDescription:{fontSize:"13px",color:"#dcddde",marginBottom:"6px"},rewardRequirement:{fontSize:"12px",color:"#99aab5",marginBottom:"8px"},progressBar:{height:"6px",backgroundColor:"#1e1e1e",borderRadius:"3px",overflow:"hidden"},progressFill:{height:"100%",backgroundColor:"#5865f2",transition:"width 0.3s"},rewardActions:{minWidth:"100px"},claimButton:{width:"100%",padding:"10px 20px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},claimedBadge:{width:"100%",padding:"10px 20px",backgroundColor:"#2c2f33",border:"1px solid #43b581",borderRadius:"4px",color:"#43b581",textAlign:"center",fontSize:"14px",fontWeight:"600"},lockedBadge:{width:"100%",padding:"10px 20px",backgroundColor:"#2c2f33",border:"1px solid #99aab5",borderRadius:"4px",color:"#99aab5",textAlign:"center",fontSize:"14px",fontWeight:"600"}};export{L as default};
