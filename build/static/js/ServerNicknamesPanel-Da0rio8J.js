import{r as i,n as e}from"./react-core-Cj7FUMmY.js";import{I as j,a as v}from"./icons-vendor-TGltgKsJ.js";import{t as o}from"./index-7m1MRR8f.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BsD1gqUZ.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-DGcbxrkI.js";import"./crypto-vendor-DK-7ILyQ.js";const R=({fetchWithAuth:c,apiBaseUrl:l,onClose:m,serverId:d})=>{const[u,y]=i.useState([]),[h,f]=i.useState(!1),[a,g]=i.useState("");i.useEffect(()=>{p()},[]);const p=async()=>{f(!0);try{const r=await(await c(`${l}/servers/${d}/nicknames/`)).json();y(r.nicknames||[])}catch{o.error("Failed to load nicknames")}finally{f(!1)}},k=async(t,r)=>{try{await c(`${l}/servers/${d}/nicknames/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,nickname:r})}),o.success("Nickname updated"),p()}catch{o.error("Failed to update nickname")}},b=async t=>{try{await c(`${l}/servers/${d}/nicknames/clear/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t})}),o.success("Nickname cleared"),p()}catch{o.error("Failed to clear nickname")}},x=u.filter(t=>t.username.toLowerCase().includes(a.toLowerCase())||t.nickname&&t.nickname.toLowerCase().includes(a.toLowerCase()));return e.jsx("div",{style:n.overlay,children:e.jsxs("div",{style:n.modal,children:[e.jsxs("div",{style:n.header,children:[e.jsxs("div",{style:n.headerLeft,children:[e.jsx(j,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:n.title,children:"Server Nicknames"})]}),e.jsx("button",{onClick:m,style:n.closeButton,children:e.jsx(v,{})})]}),e.jsx("div",{style:n.toolbar,children:e.jsx("input",{type:"text",value:a,onChange:t=>g(t.target.value),placeholder:"Search members...",style:n.searchInput})}),e.jsx("div",{style:n.content,children:h?e.jsx("div",{style:n.loading,children:"Loading nicknames..."}):x.length===0?e.jsx("div",{style:n.empty,children:a?"No members match your search":"No members found"}):e.jsx("div",{style:n.nicknamesList,children:x.map((t,r)=>e.jsxs("div",{style:n.nicknameCard,children:[e.jsxs("div",{style:n.userInfo,children:[e.jsx("div",{style:n.username,children:t.username}),t.nickname&&e.jsxs("div",{style:n.currentNickname,children:["Current nickname: ",e.jsx("span",{style:n.nicknameValue,children:t.nickname})]})]}),e.jsxs("div",{style:n.actions,children:[e.jsx("button",{onClick:()=>{const s=prompt("Enter new nickname:",t.nickname||"");s!==null&&s.trim()&&k(t.user_id,s.trim())},style:n.editButton,children:"Edit"}),t.nickname&&e.jsx("button",{onClick:()=>b(t.user_id),style:n.clearButton,children:"Clear"})]})]},r))})})]})})},n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},searchInput:{width:"100%",padding:"10px 12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},nicknamesList:{display:"flex",flexDirection:"column",gap:"10px"},nicknameCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},userInfo:{flex:1},username:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},currentNickname:{fontSize:"13px",color:"#99aab5"},nicknameValue:{color:"#5865f2",fontWeight:"500"},actions:{display:"flex",gap:"8px"},editButton:{padding:"6px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500"},clearButton:{padding:"6px 12px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500"}};export{R as default};
