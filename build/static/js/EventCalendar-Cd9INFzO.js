import{r as l,j as e}from"./react-core-D6cE4lil.js";import{am as g,an as k,z as S,bE as C,u as B}from"./icons-vendor-fClA8qVL.js";const R=({serverId:n,apiBaseUrl:a,fetchWithAuth:d})=>{const[r,c]=l.useState([]),[x,p]=l.useState(!0),[f,b]=l.useState(!1);l.useEffect(()=>{n&&u()},[n]);const u=async()=>{try{const o=await d(`${a}/events/?server=${n}`);if(o.ok){const s=await o.json();c(s)}}catch{}finally{p(!1)}},m=async(o,s)=>{try{(await d(`${a}/events/${o}/rsvp/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok&&u()}catch{}},h=o=>{const s=new Date(o),j=s-new Date,i=Math.floor(j/(1e3*60*60*24));return i===0?"Bugün":i===1?"Yarın":i>0&&i<7?`${i} gün sonra`:s.toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})},v=o=>new Date(o).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});return x?e.jsx("div",{style:t.loading,children:"Etkinlikler yükleniyor..."}):e.jsxs("div",{style:t.container,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("h2",{style:t.title,children:[e.jsx(g,{})," Etkinlikler"]}),e.jsxs("button",{onClick:()=>b(!0),style:t.createButton,children:[e.jsx(k,{})," Etkinlik Oluştur"]})]}),r.length===0?e.jsxs("div",{style:t.empty,children:[e.jsx(g,{style:t.emptyIcon}),e.jsx("p",{children:"Henüz etkinlik yok"}),e.jsx("p",{style:t.emptySubtext,children:"İlk etkinliği sen oluştur!"})]}):e.jsx("div",{style:t.eventsList,children:r.map(o=>e.jsx(D,{event:o,onRSVP:m,formatDate:h,formatTime:v},o.id))})]})},D=({event:n,onRSVP:a,formatDate:d,formatTime:r})=>{const[c,x]=l.useState(null),p=f=>{x(f),a(n.id,f)};return e.jsxs("div",{style:t.eventCard,children:[e.jsxs("div",{style:t.eventHeader,children:[e.jsx("h3",{style:t.eventTitle,children:n.title}),e.jsx("span",{style:t.eventDate,children:d(n.start_time)})]}),n.description&&e.jsx("p",{style:t.eventDescription,children:n.description}),e.jsxs("div",{style:t.eventDetails,children:[e.jsxs("div",{style:t.detail,children:[e.jsx(S,{style:t.detailIcon}),e.jsxs("span",{children:[r(n.start_time)," - ",r(n.end_time)]})]}),e.jsxs("div",{style:t.detail,children:[e.jsx(C,{style:t.detailIcon}),e.jsx("span",{children:n.location_type==="voice"?n.voice_channel_name||"Sesli Kanal":"Dış Link"})]}),e.jsxs("div",{style:t.detail,children:[e.jsx(B,{style:t.detailIcon}),e.jsxs("span",{children:[n.going_count," katılacak,",n.interested_count," ilgileniyor"]})]})]}),e.jsxs("div",{style:t.rsvpButtons,children:[e.jsx("button",{onClick:()=>p("going"),style:{...t.rsvpButton,...c==="going"?t.rsvpButtonActive:{}},children:"✓ Katılacağım"}),e.jsx("button",{onClick:()=>p("interested"),style:{...t.rsvpButton,...c==="interested"?t.rsvpButtonInterested:{}},children:"⭐ İlgileniyorum"})]})]})},t={container:{padding:"20px",backgroundColor:"#2b2d31",borderRadius:"8px",minHeight:"400px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #1e1f22",paddingBottom:"15px"},title:{color:"#fff",fontSize:"20px",margin:0,display:"flex",alignItems:"center",gap:"10px"},createButton:{backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},loading:{color:"#b9bbbe",textAlign:"center",padding:"40px"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},emptyIcon:{fontSize:"64px",opacity:.3,marginBottom:"20px"},emptySubtext:{fontSize:"14px",opacity:.7},eventsList:{display:"grid",gap:"15px"},eventCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"16px",border:"1px solid transparent",transition:"border-color 0.2s"},eventHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},eventTitle:{color:"#fff",fontSize:"18px",margin:0},eventDate:{color:"#5865f2",fontSize:"14px",fontWeight:"bold"},eventDescription:{color:"#b9bbbe",fontSize:"14px",marginBottom:"12px"},eventDetails:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},detail:{display:"flex",alignItems:"center",gap:"8px",color:"#b9bbbe",fontSize:"13px"},detailIcon:{color:"#72767d",fontSize:"12px"},rsvpButtons:{display:"flex",gap:"10px"},rsvpButton:{flex:1,padding:"10px",border:"1px solid #4e5058",borderRadius:"6px",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",fontSize:"14px",transition:"all 0.2s"},rsvpButtonActive:{backgroundColor:"#23a559",borderColor:"#23a559",color:"#fff"},rsvpButtonInterested:{backgroundColor:"#f0b132",borderColor:"#f0b132",color:"#1e1f22"}};export{R as default};
