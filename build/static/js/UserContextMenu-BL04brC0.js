var oe=Object.defineProperty;var i=(c,x)=>oe(c,"name",{value:x,configurable:!0});import{r as t,f as le,j as a}from"./react-core-Djgtqrmb.js";import{C as j,ac as ue,K as I,ay as f,au as ie,b9 as ce}from"./icons-vendor-BW7dxHkX.js";const de=i(({x:c,y:x,user:m,currentUser:K,onClose:d,onAction:h,voiceChannels:v=[],isAdmin:b=!1,isInVoiceRoom:k=!1,friendsList:g=[],conversationId:me=null})=>{const p=t.useRef(null),[C,D]=t.useState(!1),[o,u]=t.useState(0),F=g&&g.length>0&&g.some(e=>{const r=e.username||e.sender_username||e.receiver_username||e.display_name||e.friend?.username,l=m.username||m.display_name;return r===l&&r!==K.username}),n=t.useCallback((e,r=null)=>{h(e,m,r),d()},[h,m,d]),S=t.useCallback(()=>n("profile"),[n]),_=t.useCallback(()=>n("message"),[n]),N=t.useCallback(()=>n("invite_to_server"),[n]),A=t.useCallback(()=>n("remove_friend"),[n]),U=t.useCallback(()=>n("add_friend"),[n]),P=t.useCallback(()=>n("mute_user"),[n]),R=t.useCallback(()=>n("block_user"),[n]),z=t.useCallback(()=>n("kick"),[n]),B=t.useCallback(()=>n("server_mute"),[n]),T=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("profile"))},[n]),L=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("message"))},[n]),W=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("invite_to_server"))},[n]),$=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("remove_friend"))},[n]),H=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("add_friend"))},[n]),G=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("mute_user"))},[n]),O=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("block_user"))},[n]),X=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("kick"))},[n]),Y=t.useCallback(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),n("server_mute"))},[n]),q=t.useCallback(()=>u(0),[]),J=t.useCallback(()=>u(1),[]),Q=t.useCallback(()=>u(2),[]),w=t.useCallback(()=>u(3),[]),Z=t.useCallback(()=>u(4),[]),E=t.useCallback(()=>u(5),[]),V=t.useCallback(()=>u(6),[]),ee=t.useCallback(()=>{D(!0),u(4)},[]),ne=t.useCallback(()=>D(!1),[]);t.useEffect(()=>{const e=i(l=>{p.current&&!p.current.contains(l.target)&&d()},"handleClickOutside"),r=i(l=>{l.key==="Escape"?d():l.key==="ArrowDown"?(l.preventDefault(),u(y=>Math.min(y+1,te()-1))):l.key==="ArrowUp"?(l.preventDefault(),u(y=>Math.max(y-1,0))):(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),ae())},"handleKeyDown");return document.addEventListener("mousedown",e),document.addEventListener("keydown",r),p.current&&p.current.focus(),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",r)}},[d]);const te=i(()=>{let e=2;return k&&(e+=1),b&&k&&(e+=3),e},"getMenuItemCount"),ae=i(()=>{const e=["profile","message"];k&&e.push("volume"),b&&k&&e.push("move","kick","server_mute"),e[o]&&n(e[o])},"triggerFocusedAction"),se=Math.min(c,window.innerWidth-220),re=Math.min(x,window.innerHeight-300),M=document.getElementById("portal-root");return M?le.createPortal(a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483646,background:"transparent",pointerEvents:"auto"},onClick:d}),a.jsxs("div",{ref:p,role:"menu","aria-label":`${m} için eylemler`,tabIndex:-1,style:{...s.menu,left:`${se}px`,top:`${re}px`,zIndex:2147483647,position:"fixed",pointerEvents:"auto"},children:[a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...s.menuItem,background:o===0?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:S,onKeyDown:T,onMouseEnter:q,children:[a.jsx(j,{})," Profili Görüntüle"]}),a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...s.menuItem,background:o===1?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:_,onKeyDown:L,onMouseEnter:J,children:[a.jsx(ue,{})," Mesaj Gönder"]}),a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...s.menuItem,background:o===2?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:N,onKeyDown:W,onMouseEnter:Q,children:[a.jsx(I,{})," Sunucuya Davet Et"]}),F?a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...s.menuItemDanger,background:o===3?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:A,onKeyDown:$,onMouseEnter:w,children:[a.jsx(f,{})," Arkadaşlıktan Çıkar"]}):a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...s.menuItem,background:o===3?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:U,onKeyDown:H,onMouseEnter:w,children:[a.jsx(j,{})," Arkadaş Ekle"]}),a.jsx("div",{role:"separator",style:s.separator}),a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...s.menuItem,background:o===4?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:P,onKeyDown:G,onMouseEnter:Z,children:[a.jsx(ie,{})," Sessize Al"]}),a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...s.menuItemDanger,background:o===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:R,onKeyDown:O,onMouseEnter:E,children:[a.jsx(f,{})," Kullanıcıyı Engelle"]}),b&&k&&a.jsxs(a.Fragment,{children:[a.jsx("div",{role:"separator",style:s.separator}),a.jsx("div",{style:s.sectionTitle,"aria-label":"Moderasyon seçenekleri",children:"Moderasyon"}),a.jsxs("div",{role:"menuitem",tabIndex:0,"aria-haspopup":"true","aria-expanded":C,className:"user-context-menu-item",style:{...s.menuItem,background:o===4?"rgba(88, 101, 242, 0.2)":"transparent"},onMouseEnter:ee,onMouseLeave:ne,children:[a.jsx(I,{})," Kanala Taşı",C&&v.length>0&&a.jsx("div",{role:"menu","aria-label":"Hedef kanallar",style:s.submenu,children:v.map(e=>a.jsx("div",{role:"menuitem",tabIndex:0,className:"user-context-submenu-item",style:s.submenuItem,onClick:i(r=>{r.stopPropagation(),n("move",e.slug)},"onClick"),onKeyDown:i(r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),r.stopPropagation(),n("move",e.slug))},"onKeyDown"),children:e.name},e.slug))})]}),a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...s.menuItemDanger,background:o===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:z,onKeyDown:X,onMouseEnter:E,children:[a.jsx(f,{})," Kanaldan At"]}),a.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...s.menuItem,background:o===6?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:B,onKeyDown:Y,onMouseEnter:V,children:[a.jsx(ce,{})," Mikrofonu Kapat (Server)"]})]})]})]}),M):null},"UserContextMenu"),s={menu:{background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"200px",padding:"6px 0",color:"#dbdee1",fontSize:"14px",border:"1px solid #1e1f22"},menuItem:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",position:"relative"},menuItemDanger:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",color:"#ed4245",position:"relative"},separator:{height:"1px",background:"#1e1f22",margin:"6px 0"},sectionTitle:{fontSize:"11px",textTransform:"uppercase",color:"#72767d",padding:"6px 12px 4px",fontWeight:"600"},submenu:{position:"absolute",left:"100%",top:0,background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"180px",padding:"6px 0",border:"1px solid #1e1f22",marginLeft:"4px"},submenuItem:{padding:"8px 12px",cursor:"pointer",transition:"background 0.1s"}};if(!document.getElementById("user-context-menu-styles")){const c=document.createElement("style");c.id="user-context-menu-styles",c.textContent=`
        .user-context-menu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        .user-context-menu-item-danger:hover {
            background: rgba(237, 66, 69, 0.2) !important;
        }
        .user-context-submenu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        
        /* ✨ Keyboard Navigation Focus Styles */
        .user-context-menu-item:focus,
        .user-context-menu-item-danger:focus,
        .user-context-submenu-item:focus {
            outline: 2px solid rgba(88, 101, 242, 0.8);
            outline-offset: -2px;
        }
        
        /* ✨ Menu Container Focus */
        [role="menu"]:focus {
            outline: none;
        }
        
        /* ✨ Smooth Transitions */
        .user-context-menu-item,
        .user-context-menu-item-danger,
        .user-context-submenu-item {
            transition: background 0.15s ease, outline 0.15s ease;
        }
    `,document.head.appendChild(c)}const be=t.memo(de);export{be as default};
