{"version":3,"file":"BanAppealsPanel-BmWzFlW5.js","sources":["../../../src/components/BanAppealsPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport './BanAppealsPanel.css';\nimport { FaGavel, FaPaperPlane, FaHistory, FaCheckCircle, FaTimesCircle } from 'react-icons/fa';\n\nfunction BanAppealsPanel({ apiBaseUrl, fetchWithAuth }) {\n  const [appeals, setAppeals] = useState([]);\n  const [reason, setReason] = useState('');\n  const [details, setDetails] = useState('');\n  const [banInfo, setBanInfo] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    loadAppeals();\n    loadBanInfo();\n  }, []);\n\n  const loadAppeals = async () => {\n    setLoading(true);\n    try {\n      const response = await fetchWithAuth(`${apiBaseUrl}/ban-appeals/list/`);\n      if (response.ok) {\n        const data = await response.json();\n        setAppeals(data.appeals || []);\n      }\n    } catch (err) {\n      console.error('Error loading appeals:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadBanInfo = async () => {\n    try {\n      const response = await fetchWithAuth(`${apiBaseUrl}/ban-appeals/status/`);\n      if (response.ok) {\n        const data = await response.json();\n        setBanInfo(data);\n      }\n    } catch (err) {\n      console.error('Error loading ban info:', err);\n    }\n  };\n\n  const submitAppeal = async () => {\n    if (!reason.trim()) {\n      setMessage('âŒ Please provide a reason');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await fetchWithAuth(`${apiBaseUrl}/adv/ban-appeal/`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          reason,\n          details: details || null\n        })\n      });\n\n      if (response.ok) {\n        setMessage('âœ… Appeal submitted successfully!');\n        setReason('');\n        setDetails('');\n        loadAppeals();\n      } else {\n        const data = await response.json();\n        setMessage(`âŒ ${data.error || 'Failed to submit appeal'}`);\n      }\n    } catch (err) {\n      setMessage('âŒ Network error: ' + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusBadge = (status) => {\n    const badges = {\n      pending: { icon: <FaHistory />, color: '#faa61a', text: 'Pending' },\n      approved: { icon: <FaCheckCircle />, color: '#43b581', text: 'Approved' },\n      rejected: { icon: <FaTimesCircle />, color: '#f04747', text: 'Rejected' }\n    };\n    return badges[status] || badges.pending;\n  };\n\n  return (\n    <div className=\"ban-appeals-panel\">\n      <div className=\"appeals-header\">\n        <h2><FaGavel /> Ban Appeals</h2>\n      </div>\n\n      {message && <div className=\"appeal-message\">{message}</div>}\n\n      {banInfo && banInfo.is_banned && (\n        <div className=\"ban-info-card\">\n          <div className=\"ban-warning\">\n            <FaTimesCircle className=\"warning-icon\" />\n            <div className=\"warning-text\">\n              <h3>You are currently banned</h3>\n              <p>{banInfo.ban_reason || 'No reason provided'}</p>\n              <div className=\"ban-meta\">\n                <span>Banned on: {new Date(banInfo.banned_at).toLocaleDateString()}</span>\n                {banInfo.expires_at && (\n                  <span>Expires: {new Date(banInfo.expires_at).toLocaleDateString()}</span>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"submit-appeal-section\">\n        <h3><FaPaperPlane /> Submit New Appeal</h3>\n        <div className=\"appeal-form\">\n          <div className=\"form-group\">\n            <label>Reason for Appeal:</label>\n            <input\n              type=\"text\"\n              placeholder=\"Why should you be unbanned?\"\n              value={reason}\n              onChange={(e) => setReason(e.target.value)}\n              className=\"form-input\"\n              maxLength={200}\n            />\n            <div className=\"char-count\">{reason.length}/200</div>\n          </div>\n          <div className=\"form-group\">\n            <label>Additional Details (optional):</label>\n            <textarea\n              placeholder=\"Provide any additional context or evidence...\"\n              value={details}\n              onChange={(e) => setDetails(e.target.value)}\n              className=\"form-textarea\"\n              rows={5}\n              maxLength={1000}\n            />\n            <div className=\"char-count\">{details.length}/1000</div>\n          </div>\n          <button\n            className=\"submit-btn\"\n            onClick={submitAppeal}\n            disabled={loading || !reason.trim()}\n          >\n            <FaPaperPlane /> Submit Appeal\n          </button>\n        </div>\n        <div className=\"appeal-guidelines\">\n          <h4>ðŸ“‹ Guidelines:</h4>\n          <ul>\n            <li>Be honest and respectful in your appeal</li>\n            <li>Explain why you believe the ban was unfair or a mistake</li>\n            <li>Provide evidence if available</li>\n            <li>Appeals are reviewed within 24-48 hours</li>\n          </ul>\n        </div>\n      </div>\n\n      <div className=\"appeals-history\">\n        <h3><FaHistory /> Your Appeals ({appeals.length})</h3>\n        {loading && appeals.length === 0 ? (\n          <div className=\"loading\">Loading appeals...</div>\n        ) : appeals.length === 0 ? (\n          <div className=\"empty-appeals\">\n            <FaGavel className=\"empty-icon\" />\n            <p>No appeals submitted yet</p>\n          </div>\n        ) : (\n          <div className=\"appeals-list\">\n            {appeals.map((appeal, idx) => {\n              const statusBadge = getStatusBadge(appeal.status);\n              return (\n                <div key={idx} className={`appeal-item status-${appeal.status}`}>\n                  <div className=\"appeal-header\">\n                    <div className=\"appeal-date\">\n                      {new Date(appeal.created_at).toLocaleString()}\n                    </div>\n                    <div className=\"appeal-status\" style={{ background: statusBadge.color }}>\n                      {statusBadge.icon} {statusBadge.text}\n                    </div>\n                  </div>\n                  <div className=\"appeal-content\">\n                    <div className=\"appeal-reason\">\n                      <strong>Reason:</strong> {appeal.reason}\n                    </div>\n                    {appeal.details && (\n                      <div className=\"appeal-details\">\n                        <strong>Details:</strong> {appeal.details}\n                      </div>\n                    )}\n                  </div>\n                  {appeal.admin_response && (\n                    <div className=\"admin-response\">\n                      <strong>Admin Response:</strong> {appeal.admin_response}\n                      <div className=\"response-date\">\n                        Reviewed: {new Date(appeal.reviewed_at).toLocaleString()}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default BanAppealsPanel;\n"],"names":["useState","useEffect","jsx","jsxs"],"mappings":"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"}