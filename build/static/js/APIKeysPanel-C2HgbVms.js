import{r as n,d as e,aC as k,at as d,aq as w,ar as C,bU as K,E as S}from"./react-core-DrOm_csO.js";import{t as o}from"./index-BYhWpPLp.js";const h=({fetchWithAuth:r,apiBaseUrl:l})=>{const[c,p]=n.useState([]),[y,m]=n.useState(!0),[i,u]=n.useState({});n.useEffect(()=>{s()},[]);const s=async()=>{try{const t=await r(`${l}/apikeys/list/`);if(t.ok){const a=await t.json();p(a)}}catch(t){console.error("API keys load error:",t)}finally{m(!1)}},b=async()=>{const t=prompt("API Key name:");if(t)try{const a=await r(`${l}/apikeys/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(a.ok){const E=await a.json();o.success(`✅ Key created!

Key: ${E.key}

⚠️ Save this! It won't be shown again.`),s()}}catch{o.error("❌ Failed to create key")}},g=async t=>{if(confirm("Delete this API key?"))try{(await r(`${l}/apikeys/${t}/delete/`,{method:"DELETE"})).ok&&s()}catch{o.error("❌ Failed to delete key")}},x=t=>{navigator.clipboard.writeText(t),o.success("✅ Copied to clipboard!")},f=t=>t?t.substring(0,8)+"•".repeat(24):"";return y?e.createElement("div",{style:{padding:"20px",color:"#b9bbbe"}},"Loading..."):e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"20px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",null,e.createElement("h4",{style:{margin:0,color:"#dcddde"}},"API Keys"),e.createElement("p",{style:{margin:"5px 0 0 0",color:"#72767d",fontSize:"13px"}},"Create and manage API keys for external integrations")),e.createElement("button",{onClick:b,style:{padding:"8px 16px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"bold"}},e.createElement(k,null)," New Key")),c.length===0?e.createElement("div",{style:{padding:"40px",textAlign:"center",color:"#72767d",backgroundColor:"#2f3136",borderRadius:"8px"}},e.createElement(d,{style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),e.createElement("p",null,"No API keys yet")):e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},c.map(t=>e.createElement("div",{key:t.id,style:{padding:"16px",backgroundColor:"#2f3136",borderRadius:"8px",border:"1px solid #40444b"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"}},e.createElement(d,{style:{color:"#5865f2"}}),e.createElement("span",{style:{color:"#dcddde",fontWeight:"bold"}},t.name)),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",backgroundColor:"#1e1f22",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#b9bbbe"}},e.createElement("span",null,i[t.id]?t.key:f(t.key)),e.createElement("button",{onClick:()=>u(a=>({...a,[t.id]:!a[t.id]})),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"}},i[t.id]?e.createElement(w,null):e.createElement(C,null)),e.createElement("button",{onClick:()=>x(t.key),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"}},e.createElement(K,null))),e.createElement("div",{style:{marginTop:"8px",fontSize:"12px",color:"#72767d"}},"Created: ",new Date(t.created_at).toLocaleDateString(),t.last_used&&e.createElement(e.Fragment,null," • Last used: ",new Date(t.last_used).toLocaleDateString()))),e.createElement("button",{onClick:()=>g(t.id),style:{background:"none",border:"none",color:"#f04747",cursor:"pointer",padding:"8px",borderRadius:"4px"},title:"Delete key"},e.createElement(S,null)))))),e.createElement("div",{style:{padding:"12px",backgroundColor:"rgba(250, 166, 26, 0.1)",borderLeft:"3px solid #faa61a",borderRadius:"4px",fontSize:"13px",color:"#dcddde"}},"⚠️ ",e.createElement("strong",null,"Security:")," Keep your API keys secret! Anyone with your key can access your account."))};export{h as default};
