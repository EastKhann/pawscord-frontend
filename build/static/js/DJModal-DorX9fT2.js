const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/media-vendor-B-uSUaIv.js","static/js/react-core-9vc7GIjk.js","static/js/editor-vendor-DiU449Dh.js"])))=>i.map(i=>d[i]);
import{_ as h}from"./media-vendor-B-uSUaIv.js";import{b as e,r as a}from"./react-core-9vc7GIjk.js";import{a as b,a3 as v,G as k,aK as w}from"./icons-vendor-NoxEirJf.js";import"./editor-vendor-DiU449Dh.js";const S=a.lazy(()=>h(()=>import("./media-vendor-B-uSUaIv.js").then(o=>o.i),__vite__mapDeps([0,1,2]))),_=({onClose:o,ws:d,roomSlug:q})=>{const[l,c]=a.useState([]),[f,u]=a.useState(""),[s,p]=a.useState(""),[g,m]=a.useState(!1),E=()=>{if(!s)return;const t=[...l,s];c(t),p(""),y("queue_update",{queue:t})},x=()=>{if(l.length>0){const t=l[0],n=l.slice(1);u(t),c(n),m(!0),y("play_track",{url:t,queue:n})}},y=(t,n)=>{d.current?.readyState===WebSocket.OPEN&&d.current.send(JSON.stringify({type:"media_sync",action:t,payload:n}))};return a.useEffect(()=>{const t=n=>{const i=JSON.parse(n.data);i.type==="media_sync"&&(i.action==="queue_update"&&c(i.payload.queue),i.action==="play_track"&&(u(i.payload.url),c(i.payload.queue),m(!0)))};return d.current?.addEventListener("message",t),()=>d.current?.removeEventListener("message",t)},[d]),a.useEffect(()=>{const t=n=>{n.key==="Escape"&&o()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[o]),e.createElement("div",{style:r.overlay,onClick:o},e.createElement("div",{style:r.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:r.header},e.createElement("h3",null,"ðŸŽµ DJ OdasÄ±"),e.createElement("button",{onClick:o,style:r.closeBtn},e.createElement(b,null))),e.createElement("div",{style:r.playerWrapper},e.createElement(a.Suspense,{fallback:e.createElement("div",{style:{color:"#fff",padding:"20px",textAlign:"center"}},"Loading player...")},e.createElement(S,{url:f,playing:g,controls:!0,width:"100%",height:"200px"}))),e.createElement("div",{style:r.controls},e.createElement("input",{value:s,onChange:t=>p(t.target.value),placeholder:"YouTube ÅžarkÄ± Linki...",style:r.input}),e.createElement("button",{onClick:E,style:r.addBtn},e.createElement(v,null)),e.createElement("button",{onClick:x,style:r.nextBtn},e.createElement(k,null)," SÄ±radaki")),e.createElement("div",{style:r.queueList},e.createElement("h4",null,"SÄ±radakiler (",l.length,")"),l.map((t,n)=>e.createElement("div",{key:n,style:r.queueItem},e.createElement(w,{color:"#ccc"})," ",t)))))},r={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{background:"#2b2d31",width:"500px",borderRadius:"12px",padding:"20px"},header:{display:"flex",justifyContent:"space-between",color:"white",marginBottom:20},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.2em",cursor:"pointer"},playerWrapper:{marginBottom:20,borderRadius:"8px",overflow:"hidden"},controls:{display:"flex",gap:10,marginBottom:20},input:{flex:1,padding:8,borderRadius:4,border:"1px solid #444",background:"#202225",color:"white"},addBtn:{padding:"8px 12px",background:"#5865f2",color:"white",border:"none",borderRadius:4,cursor:"pointer"},nextBtn:{padding:"8px 12px",background:"#23a559",color:"white",border:"none",borderRadius:4,cursor:"pointer"},queueList:{maxHeight:200,overflowY:"auto",color:"#ccc"},queueItem:{padding:"8px",borderBottom:"1px solid #444",fontSize:"0.9em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},C=e.memo(_);export{C as default};
