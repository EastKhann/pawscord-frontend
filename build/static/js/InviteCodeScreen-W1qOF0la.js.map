{"version":3,"file":"InviteCodeScreen-W1qOF0la.js","sources":["../../../src/components/InviteCodeScreen.js"],"sourcesContent":["// frontend/src/components/InviteCodeScreen.js\r\n// üî• Invite code kabul ekranƒ± - /#/invite/CODE formatƒ± i√ßin\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport toast from '../utils/toast';\r\n\r\nfunction InviteCodeScreen({ inviteCode, fetchWithAuth, onClose, apiBaseUrl }) {\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [inviteInfo, setInviteInfo] = useState(null);\r\n    const [joining, setJoining] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadInviteInfo();\r\n    }, [inviteCode]);\r\n\r\n    const loadInviteInfo = async () => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            // GET /api/invites/<code>/ - ServerInvite bilgilerini al\r\n            const response = await fetch(`${apiBaseUrl}/invites/${inviteCode}/`);\r\n\r\n            if (!response.ok) {\r\n                const data = await response.json().catch(() => ({}));\r\n                throw new Error(data.error || 'Davet bulunamadƒ± veya s√ºresi dolmu≈ü');\r\n            }\r\n\r\n            const contentType = response.headers.get('content-type') || '';\r\n            if (!contentType.includes('application/json')) {\r\n                throw new Error('Davet bulunamadƒ±');\r\n            }\r\n\r\n            const data = await response.json();\r\n            setInviteInfo(data);\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleAccept = async () => {\r\n        if (!inviteInfo) return;\r\n\r\n        if (!fetchWithAuth) {\r\n            toast.warning('üîê Sunucuya katƒ±lmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!');\r\n            // Daveti sakla, giri≈ü sonrasƒ± i≈üle\r\n            sessionStorage.setItem('pending_invite', inviteCode);\r\n            window.location.hash = '#/';\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setJoining(true);\r\n            // Vanity URL ise server join, deƒüilse invite accept endpoint'ini kullan\r\n            const isVanity = inviteInfo?.type === 'vanity';\r\n            const url = isVanity\r\n                ? `${apiBaseUrl}/servers/${inviteInfo.server.id}/join/`\r\n                : `${apiBaseUrl}/invites/${inviteCode}/accept/`;\r\n            const response = await fetchWithAuth(url, {\r\n                method: 'POST',\r\n            });\r\n\r\n            const data = await response.json().catch(() => ({}));\r\n\r\n            if (response.ok || data.success) {\r\n                toast.success(`‚úÖ ${data.server_name || data.message || 'Sunucuya katƒ±ldƒ±nƒ±z!'}`);\r\n                // Ana sayfaya git - sayfa yenileme yok\r\n                onClose();\r\n            } else if (data.error && data.error.includes('zaten')) {\r\n                toast.info('‚ÑπÔ∏è Zaten bu sunucudasƒ±nƒ±z!');\r\n                onClose();\r\n            } else {\r\n                throw new Error(data.error || 'Sunucuya katƒ±lƒ±namadƒ±');\r\n            }\r\n        } catch (err) {\r\n            toast.error('‚ùå ' + err.message);\r\n        } finally {\r\n            setJoining(false);\r\n        }\r\n    };\r\n\r\n    // Alternatif: join_via_code endpoint'i ile katƒ±l (code g√∂nder)\r\n    const handleJoinViaCode = async () => {\r\n        if (!fetchWithAuth) {\r\n            toast.warning('üîê Sunucuya katƒ±lmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!');\r\n            sessionStorage.setItem('pending_invite', inviteCode);\r\n            window.location.hash = '#/';\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setJoining(true);\r\n            const response = await fetchWithAuth(`${apiBaseUrl}/invites/join/`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ code: inviteCode })\r\n            });\r\n\r\n            const data = await response.json().catch(() => ({}));\r\n\r\n            if (response.ok) {\r\n                toast.success(`‚úÖ ${data.server_name ? `\"${data.server_name}\" sunucusuna katƒ±ldƒ±nƒ±z!` : 'Sunucuya katƒ±ldƒ±nƒ±z!'}`);\r\n                // Ana sayfaya git - sayfa yenileme yok\r\n                onClose();\r\n            } else {\r\n                throw new Error(data.error || 'Sunucuya katƒ±lƒ±namadƒ±');\r\n            }\r\n        } catch (err) {\r\n            toast.error('‚ùå ' + err.message);\r\n        } finally {\r\n            setJoining(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={styles.container}>\r\n                <div style={styles.card}>\r\n                    <div style={styles.loadingSpinner} />\r\n                    <p style={styles.loadingText}>Davet bilgileri y√ºkleniyor...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div style={styles.container}>\r\n                <div style={styles.card}>\r\n                    <div style={styles.errorIcon}>‚ùå</div>\r\n                    <h2 style={styles.errorTitle}>Davet Bulunamadƒ±</h2>\r\n                    <p style={styles.errorText}>{error}</p>\r\n                    <button onClick={onClose} style={styles.closeButton}>\r\n                        Ana Sayfaya D√∂n\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const server = inviteInfo?.server;\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            <div style={styles.card}>\r\n                {/* Sunucu ƒ∞konu */}\r\n                <div style={styles.serverIconContainer}>\r\n                    {server?.icon ? (\r\n                        <img src={server.icon} alt={server?.name} style={styles.serverIcon} />\r\n                    ) : (\r\n                        <div style={styles.serverIconPlaceholder}>\r\n                            {server?.name?.charAt(0)?.toUpperCase() || '?'}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Davet Bilgisi */}\r\n                <p style={styles.invitedBy}>\r\n                    {inviteInfo?.inviter?.username || 'Birisi'} seni davet ediyor:\r\n                </p>\r\n\r\n                {/* Sunucu Adƒ± */}\r\n                <h2 style={styles.serverName}>{server?.name || 'Bilinmeyen Sunucu'}</h2>\r\n\r\n                {/* √úye Sayƒ±sƒ± */}\r\n                <div style={styles.memberInfo}>\r\n                    <span style={styles.memberCount}>\r\n                        üë• {server?.member_count || 0} √ºye\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Katƒ±l Butonu */}\r\n                <button\r\n                    onClick={handleAccept}\r\n                    disabled={joining}\r\n                    style={{\r\n                        ...styles.joinButton,\r\n                        opacity: joining ? 0.7 : 1,\r\n                    }}\r\n                >\r\n                    {joining ? '‚è≥ Katƒ±lƒ±nƒ±yor...' : '‚úÖ Sunucuya Katƒ±l'}\r\n                </button>\r\n\r\n                {/* Geri D√∂n */}\r\n                <button onClick={onClose} style={styles.backButton}>\r\n                    ‚Üê Geri D√∂n\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst styles = {\r\n    container: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '100vh',\r\n        background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)',\r\n        padding: '20px',\r\n    },\r\n    card: {\r\n        background: '#2b2d31',\r\n        borderRadius: '16px',\r\n        padding: '40px',\r\n        maxWidth: '440px',\r\n        width: '100%',\r\n        textAlign: 'center',\r\n        boxShadow: '0 8px 32px rgba(0,0,0,0.4)',\r\n    },\r\n    serverIconContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        marginBottom: '20px',\r\n    },\r\n    serverIcon: {\r\n        width: '80px',\r\n        height: '80px',\r\n        borderRadius: '50%',\r\n        objectFit: 'cover',\r\n        border: '3px solid #5865f2',\r\n    },\r\n    serverIconPlaceholder: {\r\n        width: '80px',\r\n        height: '80px',\r\n        borderRadius: '50%',\r\n        background: '#5865f2',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        fontSize: '36px',\r\n        fontWeight: 'bold',\r\n        color: '#fff',\r\n    },\r\n    invitedBy: {\r\n        color: '#b5bac1',\r\n        fontSize: '14px',\r\n        marginBottom: '8px',\r\n    },\r\n    serverName: {\r\n        color: '#fff',\r\n        fontSize: '24px',\r\n        fontWeight: 'bold',\r\n        marginBottom: '12px',\r\n    },\r\n    memberInfo: {\r\n        marginBottom: '24px',\r\n    },\r\n    memberCount: {\r\n        color: '#b5bac1',\r\n        fontSize: '14px',\r\n    },\r\n    joinButton: {\r\n        width: '100%',\r\n        padding: '14px',\r\n        background: '#5865f2',\r\n        color: '#fff',\r\n        border: 'none',\r\n        borderRadius: '8px',\r\n        fontSize: '16px',\r\n        fontWeight: '600',\r\n        cursor: 'pointer',\r\n        transition: 'background 0.2s',\r\n        marginBottom: '12px',\r\n    },\r\n    backButton: {\r\n        width: '100%',\r\n        padding: '10px',\r\n        background: 'transparent',\r\n        color: '#b5bac1',\r\n        border: '1px solid #4e5058',\r\n        borderRadius: '8px',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n    },\r\n    loadingSpinner: {\r\n        width: '40px',\r\n        height: '40px',\r\n        border: '3px solid #4e5058',\r\n        borderTop: '3px solid #5865f2',\r\n        borderRadius: '50%',\r\n        animation: 'spin 1s linear infinite',\r\n        margin: '0 auto 16px',\r\n    },\r\n    loadingText: {\r\n        color: '#b5bac1',\r\n        fontSize: '16px',\r\n    },\r\n    errorIcon: {\r\n        fontSize: '48px',\r\n        marginBottom: '16px',\r\n    },\r\n    errorTitle: {\r\n        color: '#fff',\r\n        fontSize: '20px',\r\n        marginBottom: '8px',\r\n    },\r\n    errorText: {\r\n        color: '#b5bac1',\r\n        fontSize: '14px',\r\n        marginBottom: '20px',\r\n    },\r\n    closeButton: {\r\n        padding: '12px 24px',\r\n        background: '#4e5058',\r\n        color: '#fff',\r\n        border: 'none',\r\n        borderRadius: '8px',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n    },\r\n};\r\n\r\nexport default InviteCodeScreen;\r\n"],"names":["useState","useEffect","data","jsx","jsxs"],"mappings":"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"}