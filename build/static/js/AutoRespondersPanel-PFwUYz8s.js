import{r as l,a0 as C,l as w,aI as S,ci as k,cj as z,v as B}from"./react-core-B6hadH-M.js";import{t as o}from"./index-D_6pZib5.js";const T=({fetchWithAuth:s,apiBaseUrl:c,onClose:b,serverId:p})=>{const[d,y]=l.useState([]),[R,f]=l.useState(!1),[g,m]=l.useState(!1),[a,n]=l.useState({trigger:"",response:"",match_type:"contains",case_sensitive:!1,enabled:!0}),u=[{value:"exact",label:"Exact Match"},{value:"contains",label:"Contains"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"},{value:"regex",label:"Regex"}];l.useEffect(()=>{i()},[]);const i=async()=>{f(!0);try{const r=await(await s(`${c}/autoresponders/list/?server_id=${p}`)).json();y(r.responders||[])}catch{o.error("Failed to load auto-responders")}finally{f(!1)}},h=async()=>{if(!a.trigger.trim()||!a.response.trim()){o.error("Please enter trigger and response");return}try{await s(`${c}/autoresponders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,server_id:p})}),o.success("Auto-responder created"),n({trigger:"",response:"",match_type:"contains",case_sensitive:!1,enabled:!0}),m(!1),i()}catch{o.error("Failed to create auto-responder")}},E=async(t,r)=>{try{await s(`${c}/autoresponders/${t}/toggle/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:r})}),o.success(r?"Enabled":"Disabled"),i()}catch{o.error("Failed to toggle")}},v=async t=>{if(confirm("Delete this auto-responder?"))try{await s(`${c}/autoresponders/${t}/delete/`,{method:"DELETE"}),o.success("Auto-responder deleted"),i()}catch{o.error("Failed to delete")}};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(C,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Auto-Responders")),React.createElement("button",{onClick:b,style:e.closeButton},React.createElement(w,null))),React.createElement("div",{style:e.toolbar},React.createElement("div",{style:e.count},d.length," auto-responders"),React.createElement("button",{onClick:()=>m(!g),style:e.createButton},React.createElement(S,{style:{marginRight:"6px"}}),"Create New")),g&&React.createElement("div",{style:e.createForm},React.createElement("div",{style:e.formRow},React.createElement("label",{style:e.label},"Trigger"),React.createElement("input",{type:"text",value:a.trigger,onChange:t=>n({...a,trigger:t.target.value}),placeholder:"hello",style:e.input})),React.createElement("div",{style:e.formRow},React.createElement("label",{style:e.label},"Response"),React.createElement("textarea",{value:a.response,onChange:t=>n({...a,response:t.target.value}),placeholder:"Hi there! How can I help you?",style:e.textarea,rows:3})),React.createElement("div",{style:e.formRow},React.createElement("label",{style:e.label},"Match Type"),React.createElement("select",{value:a.match_type,onChange:t=>n({...a,match_type:t.target.value}),style:e.select},u.map(t=>React.createElement("option",{key:t.value,value:t.value},t.label)))),React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:a.case_sensitive,onChange:t=>n({...a,case_sensitive:t.target.checked})}),React.createElement("span",{style:e.checkboxLabel},"Case sensitive")),React.createElement("button",{onClick:h,style:e.submitButton},"Create Auto-Responder")),React.createElement("div",{style:e.content},R?React.createElement("div",{style:e.loading},"Loading..."):d.length===0?React.createElement("div",{style:e.empty},"No auto-responders configured"):React.createElement("div",{style:e.respondersList},d.map((t,r)=>React.createElement("div",{key:r,style:e.responderCard},React.createElement("div",{style:e.responderInfo},React.createElement("div",{style:e.trigger},"Trigger: ",React.createElement("span",{style:e.triggerValue},t.trigger)),React.createElement("div",{style:e.response},t.response),React.createElement("div",{style:e.meta},u.find(x=>x.value===t.match_type)?.label,t.case_sensitive&&" • Case Sensitive"," • Uses: "+(t.usage_count||0))),React.createElement("div",{style:e.actions},React.createElement("button",{onClick:()=>E(t.id,!t.enabled),style:e.toggleButton,title:t.enabled?"Disable":"Enable"},t.enabled?React.createElement(k,{style:{color:"#43b581",fontSize:"24px"}}):React.createElement(z,{style:{color:"#99aab5",fontSize:"24px"}})),React.createElement("button",{onClick:()=>v(t.id),style:e.deleteButton,title:"Delete"},React.createElement(B,null)))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px 20px",borderBottom:"1px solid #2c2f33"},count:{fontSize:"14px",color:"#dcddde"},createButton:{padding:"8px 16px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center"},createForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #2c2f33"},formRow:{marginBottom:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"6px"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},textarea:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"},select:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",cursor:"pointer"},checkboxLabel:{fontSize:"14px",color:"#dcddde"},submitButton:{width:"100%",padding:"12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},respondersList:{display:"flex",flexDirection:"column",gap:"12px"},responderCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between"},responderInfo:{flex:1},trigger:{fontSize:"14px",color:"#99aab5",marginBottom:"8px"},triggerValue:{color:"#5865f2",fontWeight:"600",fontFamily:"monospace"},response:{fontSize:"14px",color:"#ffffff",marginBottom:"8px"},meta:{fontSize:"12px",color:"#99aab5"},actions:{display:"flex",gap:"12px",alignItems:"center"},toggleButton:{background:"none",border:"none",cursor:"pointer",padding:"4px"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"8px"}};export{T as default};
