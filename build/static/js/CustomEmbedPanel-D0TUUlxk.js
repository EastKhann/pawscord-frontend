import{r as s,d as e,c9 as c}from"./react-core-DrOm_csO.js";import{g as x}from"./index-BYhWpPLp.js";const F=({serverId:m,onClose:h})=>{const o=x(),[p,b]=s.useState([]),[g,N]=s.useState([]),[k,y]=s.useState(!0),[i,v]=s.useState(!1),[a,n]=s.useState({title:"",description:"",color:"#5865f2",thumbnail:"",image:"",author_name:"",author_icon:"",footer_text:"",footer_icon:"",fields:[]}),[d,_]=s.useState("");s.useEffect(()=>{u(),C()},[m]);const u=async()=>{try{const t=await fetch(`${o}/custom-embeds/server/${m}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(t.ok){const l=await t.json();b(l)}}catch(t){console.error("Error:",t)}finally{y(!1)}},C=async()=>{try{const t=await fetch(`${o}/channels/server/${m}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(t.ok){const l=await t.json();N(l.filter(r=>r.type==="text"))}}catch(t){console.error("Error:",t)}},S=async()=>{if(!a.title&&!a.description){c.error("âŒ En az baÅŸlÄ±k veya aÃ§Ä±klama gerekli");return}try{(await fetch(`${o}/custom-embeds/save/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:m,...a})})).ok?(c.success("âœ… Embed kaydedildi"),v(!1),u(),A()):c.error("âŒ Kaydetme hatasÄ±")}catch{c.error("âŒ BaÄŸlantÄ± hatasÄ±")}},w=async t=>{if(!d){c.error("âŒ LÃ¼tfen bir kanal seÃ§in");return}try{(await fetch(`${o}/custom-embeds/${t}/send/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"},body:JSON.stringify({channel_id:d})})).ok?c.success("âœ… Embed gÃ¶nderildi"):c.error("âŒ GÃ¶nderim hatasÄ±")}catch{c.error("âŒ BaÄŸlantÄ± hatasÄ±")}},z=async t=>{if(window.confirm("Embed'i silmek istediÄŸinize emin misiniz?"))try{(await fetch(`${o}/custom-embeds/${t}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).ok&&(c.success("âœ… Embed silindi"),u())}catch{c.error("âŒ Silme hatasÄ±")}},$=()=>{n({...a,fields:[...a.fields,{name:"",value:"",inline:!1}]})},E=(t,l,r)=>{const f=[...a.fields];f[t][l]=r,n({...a,fields:f})},B=t=>{n({...a,fields:a.fields.filter((l,r)=>r!==t)})},A=()=>{n({title:"",description:"",color:"#5865f2",thumbnail:"",image:"",author_name:"",author_icon:"",footer_text:"",footer_icon:"",fields:[]})};return e.createElement("div",{className:"custom-embed-overlay",onClick:h},e.createElement("div",{className:"custom-embed-panel",onClick:t=>t.stopPropagation()},e.createElement("div",{className:"custom-embed-header"},e.createElement("h2",null,"ğŸ“ Ã–zel Embed OluÅŸturucu"),e.createElement("button",{className:"close-btn",onClick:h},"Ã—")),e.createElement("div",{className:"custom-embed-content"},e.createElement("button",{className:"create-embed-btn",onClick:()=>v(!i)},i?"âŒ DÃ¼zenleyiciyi Kapat":"+ Yeni Embed OluÅŸtur"),i&&e.createElement("div",{className:"embed-editor"},e.createElement("div",{className:"editor-form"},e.createElement("div",{className:"form-section"},e.createElement("h3",null,"Yazar"),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Ä°sim"),e.createElement("input",{value:a.author_name,onChange:t=>n({...a,author_name:t.target.value}),placeholder:"Yazar adÄ±"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Ä°kon URL"),e.createElement("input",{value:a.author_icon,onChange:t=>n({...a,author_icon:t.target.value}),placeholder:"https://..."})))),e.createElement("div",{className:"form-section"},e.createElement("h3",null,"Ä°Ã§erik"),e.createElement("div",{className:"form-group"},e.createElement("label",null,"BaÅŸlÄ±k"),e.createElement("input",{value:a.title,onChange:t=>n({...a,title:t.target.value}),placeholder:"Embed baÅŸlÄ±ÄŸÄ±"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"AÃ§Ä±klama"),e.createElement("textarea",{value:a.description,onChange:t=>n({...a,description:t.target.value}),rows:"4",placeholder:"Embed aÃ§Ä±klamasÄ±"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Renk"),e.createElement("input",{type:"color",value:a.color,onChange:t=>n({...a,color:t.target.value})}))),e.createElement("div",{className:"form-section"},e.createElement("h3",null,"GÃ¶rseller"),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"KÃ¼Ã§Ã¼k Resim URL"),e.createElement("input",{value:a.thumbnail,onChange:t=>n({...a,thumbnail:t.target.value}),placeholder:"https://..."})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"BÃ¼yÃ¼k Resim URL"),e.createElement("input",{value:a.image,onChange:t=>n({...a,image:t.target.value}),placeholder:"https://..."})))),e.createElement("div",{className:"form-section"},e.createElement("div",{className:"section-header"},e.createElement("h3",null,"Alanlar"),e.createElement("button",{className:"add-field-btn",onClick:$},"+ Alan Ekle")),a.fields.map((t,l)=>e.createElement("div",{key:l,className:"field-item"},e.createElement("div",{className:"field-inputs"},e.createElement("input",{value:t.name,onChange:r=>E(l,"name",r.target.value),placeholder:"Alan adÄ±"}),e.createElement("input",{value:t.value,onChange:r=>E(l,"value",r.target.value),placeholder:"Alan deÄŸeri"}),e.createElement("label",{className:"checkbox-label"},e.createElement("input",{type:"checkbox",checked:t.inline,onChange:r=>E(l,"inline",r.target.checked)}),e.createElement("span",null,"Inline")),e.createElement("button",{className:"remove-field-btn",onClick:()=>B(l)},"ğŸ—‘ï¸"))))),e.createElement("div",{className:"form-section"},e.createElement("h3",null,"Footer"),e.createElement("div",{className:"form-row"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Metin"),e.createElement("input",{value:a.footer_text,onChange:t=>n({...a,footer_text:t.target.value}),placeholder:"Footer metni"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Ä°kon URL"),e.createElement("input",{value:a.footer_icon,onChange:t=>n({...a,footer_icon:t.target.value}),placeholder:"https://..."})))),e.createElement("button",{className:"save-embed-btn",onClick:S},"ğŸ’¾ Kaydet")),e.createElement("div",{className:"embed-preview"},e.createElement("h3",null,"Ã–nizleme"),e.createElement("div",{className:"discord-embed",style:{borderLeftColor:a.color}},a.author_name&&e.createElement("div",{className:"embed-author"},a.author_icon&&e.createElement("img",{src:a.author_icon,alt:""}),e.createElement("span",null,a.author_name)),a.title&&e.createElement("div",{className:"embed-title"},a.title),a.description&&e.createElement("div",{className:"embed-description"},a.description),a.fields.length>0&&e.createElement("div",{className:"embed-fields"},a.fields.map((t,l)=>e.createElement("div",{key:l,className:`embed-field ${t.inline?"inline":""}`},e.createElement("div",{className:"field-name"},t.name),e.createElement("div",{className:"field-value"},t.value)))),a.image&&e.createElement("img",{className:"embed-image",src:a.image,alt:""}),a.footer_text&&e.createElement("div",{className:"embed-footer"},a.footer_icon&&e.createElement("img",{src:a.footer_icon,alt:""}),e.createElement("span",null,a.footer_text))))),k?e.createElement("div",{className:"loading-state"},e.createElement("div",{className:"spinner"}),e.createElement("p",null,"YÃ¼kleniyor...")):p.length===0?e.createElement("div",{className:"empty-state"},e.createElement("span",{className:"empty-icon"},"ğŸ“"),e.createElement("p",null,"HenÃ¼z kayÄ±tlÄ± embed yok")):e.createElement("div",{className:"embeds-list"},p.map(t=>e.createElement("div",{key:t.id,className:"embed-card"},e.createElement("div",{className:"embed-info"},e.createElement("h4",null,t.title||"BaÅŸlÄ±ksÄ±z Embed"),e.createElement("p",null,t.description?.substring(0,100),t.description?.length>100?"...":"")),e.createElement("div",{className:"embed-actions"},e.createElement("select",{value:d,onChange:l=>_(l.target.value)},e.createElement("option",{value:""},"Kanal seÃ§"),g.map(l=>e.createElement("option",{key:l.id,value:l.id},"# ",l.name))),e.createElement("button",{onClick:()=>w(t.id)},"ğŸ“¤ GÃ¶nder"),e.createElement("button",{onClick:()=>z(t.id)},"ğŸ—‘ï¸"))))))))};export{F as default};
