const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/media-vendor-Du00QUHb.js","static/js/react-core-D6cE4lil.js"])))=>i.map(i=>d[i]);
import{_ as T}from"./media-vendor-Du00QUHb.js";import{r as n,j as e}from"./react-core-D6cE4lil.js";import{a as w,aL as E,j as _,aM as P,aN as F}from"./icons-vendor-fClA8qVL.js";const I=n.lazy(()=>T(()=>import("./media-vendor-Du00QUHb.js").then(f=>f.i),__vite__mapDeps([0,1]))),M=({onClose:f,ws:o})=>{const[g,b]=n.useState("https://www.youtube.com/watch?v=jfKfPfyJRdk"),[c,j]=n.useState(""),[u,l]=n.useState(!1),[k,L]=n.useState(.8),[y,x]=n.useState(null),[C,p]=n.useState(!1),a=n.useRef(null),i=n.useRef(!1),h=()=>{if(a.current&&typeof a.current.getCurrentTime=="function")try{return a.current.getCurrentTime()}catch{return 0}return 0};n.useEffect(()=>{if(!o.current)return;const t=m=>{try{const s=JSON.parse(m.data);if(s.type==="media_sync"){if(i.current=!0,s.action==="change_url")l(!1),p(!1),b(s.payload.url),x(null);else if(s.action==="play"){const R=h();Math.abs(R-s.payload.time)>2&&a.current&&typeof a.current.seekTo=="function"&&a.current.seekTo(s.payload.time),l(!0)}else s.action==="pause"&&l(!1);setTimeout(()=>{i.current=!1},1e3)}}catch{}};return o.current.addEventListener("message",t),()=>o.current?.removeEventListener("message",t)},[o]);const d=(t,m={})=>{i.current||o.current?.readyState===WebSocket.OPEN&&o.current.send(JSON.stringify({type:"media_sync",action:t,payload:m}))},S=t=>{t.preventDefault(),c.trim()&&(i.current=!1,l(!1),p(!1),b(c),x(null),d("change_url",{url:c}),j(""))};return e.jsx("div",{style:r.overlay,children:e.jsxs("div",{style:r.modal,children:[e.jsxs("div",{style:r.header,children:[e.jsx("h3",{children:"ðŸ¿ Sinema & MÃ¼zik"}),e.jsx("button",{onClick:f,style:r.closeBtn,children:e.jsx(w,{})})]}),e.jsxs("div",{style:r.playerWrapper,children:[y&&e.jsxs("div",{style:r.statusOverlay,children:[e.jsx(E,{size:40,color:"#f04747"}),e.jsx("p",{style:{marginTop:10},children:y})]}),!C&&!y&&e.jsxs("div",{style:r.statusOverlay,children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{style:{marginTop:10},children:"YÃ¼kleniyor..."})]}),e.jsx(n.Suspense,{fallback:e.jsx("div",{style:{color:"#fff",padding:"50px",textAlign:"center"},children:"Loading player..."}),children:e.jsx(I,{ref:a,url:g,playing:u,volume:k,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},onReady:()=>{p(!0)},onError:t=>{x("Video oynatÄ±lamadÄ±. Link geÃ§ersiz olabilir."),p(!0)},onPlay:()=>{const t=h();d("play",{time:t})},onPause:()=>{d("pause")},onProgress:()=>{}},g)})]}),e.jsxs("div",{style:r.controls,children:[e.jsxs("form",{onSubmit:S,style:r.urlForm,children:[e.jsx(_,{style:{color:"#b9bbbe"}}),e.jsx("input",{type:"text",value:c,onChange:t=>j(t.target.value),placeholder:"YouTube linki yapÄ±ÅŸtÄ±r...",style:r.input}),e.jsx("button",{type:"submit",style:r.loadBtn,children:"YÃ¼kle"})]}),e.jsx("button",{onClick:()=>{if(i.current=!1,u)l(!1),d("pause");else{l(!0);const t=h();d("play",{time:t})}},style:{...r.loadBtn,backgroundColor:u?"#da373c":"#43b581",marginLeft:10,width:110,display:"flex",alignItems:"center",justifyContent:"center",gap:5},children:u?e.jsxs(e.Fragment,{children:[e.jsx(P,{})," Durdur"]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{})," Oynat"]})})]})]})})},r={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{width:"90%",maxWidth:"900px",backgroundColor:"#202225",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},header:{padding:"15px",backgroundColor:"#2f3136",display:"flex",justifyContent:"space-between",color:"white"},playerWrapper:{position:"relative",paddingTop:"56.25%",backgroundColor:"black"},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.5em",cursor:"pointer"},controls:{padding:"20px",display:"flex",alignItems:"center"},urlForm:{display:"flex",gap:"10px",backgroundColor:"#40444b",padding:"10px",borderRadius:"8px",flex:1},input:{flex:1,background:"transparent",border:"none",color:"white",outline:"none"},loadBtn:{padding:"8px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},statusOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.7)",color:"white",zIndex:10}},v=document.createElement("style");v.innerText=`
    .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4px solid #ffffff;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
`;document.head.appendChild(v);export{M as default};
