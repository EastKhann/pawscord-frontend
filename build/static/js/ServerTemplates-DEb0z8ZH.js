var T=Object.defineProperty;var t=(i,n)=>T(i,"name",{value:n,configurable:!0});import{r,j as e}from"./react-core-Djgtqrmb.js";import{Q as F,a9 as g,u as v,ao as $,q as _,aK as B,cH as z,a8 as I}from"./icons-vendor-BW7dxHkX.js";import{t as c}from"./index-CjRzheBN.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const H=t(({onSelectTemplate:i,onClose:n})=>{const[h,N]=r.useState([]),[f,k]=r.useState([]),[o,p]=r.useState("all"),[y,u]=r.useState(!0),[l,d]=r.useState(null);r.useEffect(()=>{b(),w()},[]);const b=t(async()=>{u(!0);try{const s=await fetch("/api/templates/list/",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(s.ok){const a=await s.json();N(a.templates||[])}}catch{c.error("âŒ Åžablonlar yÃ¼klenemedi")}finally{u(!1)}},"fetchTemplates"),w=t(async()=>{try{const s=await fetch("/api/templates/categories/",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(s.ok){const a=await s.json();k(a.categories||[])}}catch{}},"fetchCategories"),C=t(async s=>{try{const a=await fetch(`/api/templates/${s}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(a.ok){const m=await a.json();d(m.template)}}catch{c.error("âŒ Åžablon detaylarÄ± yÃ¼klenemedi")}},"getTemplateDetails"),j=t(async s=>{try{const a=await fetch(`/api/templates/${s}/use/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(a.ok){const m=await a.json();c.success("âœ… Sunucu oluÅŸturuldu!"),i&&i(m.server),n()}else c.error("âŒ Sunucu oluÅŸturulamadÄ±")}catch{c.error("âŒ BaÄŸlantÄ± hatasÄ±")}},"useTemplate"),x=t(s=>({gaming:e.jsx(I,{}),education:e.jsx(z,{}),community:e.jsx(v,{}),music:e.jsx(B,{}),tech:e.jsx(_,{}),other:e.jsx($,{})})[s]||e.jsx(v,{}),"getCategoryIcon"),S=o==="all"?h:h.filter(s=>s.category===o);return e.jsx("div",{className:"templates-overlay",onClick:n,children:e.jsxs("div",{className:"templates-panel",onClick:t(s=>s.stopPropagation(),"onClick"),children:[e.jsxs("div",{className:"templates-header",children:[e.jsx("h2",{children:"Sunucu ÅžablonlarÄ±"}),e.jsx("button",{className:"close-btn",onClick:n,children:"Ã—"})]}),e.jsxs("div",{className:"category-filters",children:[e.jsx("button",{className:`category-btn ${o==="all"?"active":""}`,onClick:t(()=>p("all"),"onClick"),children:"TÃ¼mÃ¼"}),f.map(s=>e.jsxs("button",{className:`category-btn ${o===s.slug?"active":""}`,onClick:t(()=>p(s.slug),"onClick"),children:[x(s.slug),e.jsx("span",{children:s.name})]},s.id))]}),y?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"YÃ¼kleniyor..."})]}):e.jsx("div",{className:"templates-grid",children:S.map(s=>e.jsxs("div",{className:"template-card",children:[e.jsx("div",{className:"template-icon",children:x(s.category)}),e.jsxs("div",{className:"template-info",children:[e.jsx("h3",{children:s.name}),e.jsx("p",{children:s.description}),e.jsxs("div",{className:"template-stats",children:[e.jsxs("span",{className:"stat",children:["ðŸ“ ",s.channels_count||0," kanal"]}),e.jsxs("span",{className:"stat",children:["ðŸ‘¥ ",s.roles_count||0," rol"]}),s.is_featured&&e.jsxs("span",{className:"featured-badge",children:[e.jsx(F,{})," Ã–ne Ã‡Ä±kan"]})]})]}),e.jsxs("div",{className:"template-actions",children:[e.jsx("button",{className:"btn-preview",onClick:t(()=>C(s.id),"onClick"),children:"Ã–nizle"}),e.jsxs("button",{className:"btn-use",onClick:t(()=>j(s.id),"onClick"),children:[e.jsx(g,{})," Kullan"]})]})]},s.id))}),l&&e.jsx("div",{className:"preview-modal",onClick:t(()=>d(null),"onClick"),children:e.jsxs("div",{className:"preview-content",onClick:t(s=>s.stopPropagation(),"onClick"),children:[e.jsxs("div",{className:"preview-header",children:[e.jsx("h3",{children:l.name}),e.jsx("button",{onClick:t(()=>d(null),"onClick"),children:"Ã—"})]}),e.jsxs("div",{className:"preview-body",children:[e.jsx("p",{children:l.description}),l.channels&&e.jsxs("div",{className:"preview-section",children:[e.jsxs("h4",{children:["Kanallar (",l.channels.length,")"]}),e.jsx("div",{className:"channel-list",children:l.channels.map((s,a)=>e.jsxs("div",{className:"channel-item",children:[s.type==="text"?"ðŸ’¬":"ðŸ”Š"," ",s.name]},a))})]}),l.roles&&e.jsxs("div",{className:"preview-section",children:[e.jsxs("h4",{children:["Roller (",l.roles.length,")"]}),e.jsx("div",{className:"role-list",children:l.roles.map((s,a)=>e.jsx("div",{className:"role-item",style:{borderLeftColor:s.color},children:s.name},a))})]})]}),e.jsx("div",{className:"preview-actions",children:e.jsxs("button",{className:"btn-use-large",onClick:t(()=>{j(l.id),d(null)},"onClick"),children:[e.jsx(g,{})," Bu Åžablonu Kullan"]})})]})})]})})},"ServerTemplates");export{H as default};
