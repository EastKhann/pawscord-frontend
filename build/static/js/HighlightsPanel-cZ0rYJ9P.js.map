{"version":3,"file":"HighlightsPanel-cZ0rYJ9P.js","sources":["../../../src/services/ApiService.js","../../../src/components/HighlightsPanel.js"],"sourcesContent":["// frontend/src/services/ApiService.js\r\n// üöÄ ENTERPRISE-GRADE API SERVICE - Full Implementation\r\n// Centralized API layer with retry, caching, rate limiting, and error handling\r\n\r\nimport { API_URL_BASE_STRING } from '../utils/constants';\r\nimport toast from '../utils/toast';\r\n\r\n/**\r\n * API Error class with detailed error information\r\n */\r\nexport class ApiError extends Error {\r\n    constructor(message, status, code, data = null) {\r\n        super(message);\r\n        this.name = 'ApiError';\r\n        this.status = status;\r\n        this.code = code;\r\n        this.data = data;\r\n        this.timestamp = new Date().toISOString();\r\n    }\r\n\r\n    toJSON() {\r\n        return {\r\n            name: this.name,\r\n            message: this.message,\r\n            status: this.status,\r\n            code: this.code,\r\n            data: this.data,\r\n            timestamp: this.timestamp\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n * Request Queue for rate limiting\r\n */\r\nclass RequestQueue {\r\n    constructor(maxConcurrent = 6, rateLimit = 100) {\r\n        this.queue = [];\r\n        this.running = 0;\r\n        this.maxConcurrent = maxConcurrent;\r\n        this.rateLimit = rateLimit; // requests per minute\r\n        this.requestTimes = [];\r\n    }\r\n\r\n    async add(fn) {\r\n        return new Promise((resolve, reject) => {\r\n            this.queue.push({ fn, resolve, reject });\r\n            this.process();\r\n        });\r\n    }\r\n\r\n    async process() {\r\n        if (this.running >= this.maxConcurrent || this.queue.length === 0) return;\r\n\r\n        // Rate limiting check\r\n        const now = Date.now();\r\n        this.requestTimes = this.requestTimes.filter(t => now - t < 60000);\r\n        if (this.requestTimes.length >= this.rateLimit) {\r\n            setTimeout(() => this.process(), 1000);\r\n            return;\r\n        }\r\n\r\n        const { fn, resolve, reject } = this.queue.shift();\r\n        this.running++;\r\n        this.requestTimes.push(now);\r\n\r\n        try {\r\n            const result = await fn();\r\n            resolve(result);\r\n        } catch (error) {\r\n            reject(error);\r\n        } finally {\r\n            this.running--;\r\n            this.process();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Smart Cache with TTL and size limits\r\n */\r\nclass SmartCache {\r\n    constructor(options = {}) {\r\n        this.cache = new Map();\r\n        this.maxSize = options.maxSize || 200;\r\n        this.defaultTTL = options.defaultTTL || 5 * 60 * 1000; // 5 minutes\r\n        this.hits = 0;\r\n        this.misses = 0;\r\n    }\r\n\r\n    generateKey(url, params) {\r\n        const sortedParams = params ? JSON.stringify(Object.keys(params).sort().reduce((obj, key) => {\r\n            obj[key] = params[key];\r\n            return obj;\r\n        }, {})) : '';\r\n        return `${url}:${sortedParams}`;\r\n    }\r\n\r\n    get(key) {\r\n        const item = this.cache.get(key);\r\n        if (!item) {\r\n            this.misses++;\r\n            return null;\r\n        }\r\n\r\n        if (Date.now() > item.expiry) {\r\n            this.cache.delete(key);\r\n            this.misses++;\r\n            return null;\r\n        }\r\n\r\n        this.hits++;\r\n        return item.data;\r\n    }\r\n\r\n    set(key, data, ttl = this.defaultTTL) {\r\n        // Evict oldest if at capacity\r\n        if (this.cache.size >= this.maxSize) {\r\n            const oldestKey = this.cache.keys().next().value;\r\n            this.cache.delete(oldestKey);\r\n        }\r\n\r\n        this.cache.set(key, {\r\n            data,\r\n            expiry: Date.now() + ttl,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n\r\n    invalidate(pattern) {\r\n        if (typeof pattern === 'string') {\r\n            for (const key of this.cache.keys()) {\r\n                if (key.includes(pattern)) {\r\n                    this.cache.delete(key);\r\n                }\r\n            }\r\n        } else if (pattern instanceof RegExp) {\r\n            for (const key of this.cache.keys()) {\r\n                if (pattern.test(key)) {\r\n                    this.cache.delete(key);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this.cache.clear();\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            size: this.cache.size,\r\n            maxSize: this.maxSize,\r\n            hits: this.hits,\r\n            misses: this.misses,\r\n            hitRate: this.hits + this.misses > 0\r\n                ? ((this.hits / (this.hits + this.misses)) * 100).toFixed(2) + '%'\r\n                : '0%'\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n * Main API Service Class\r\n */\r\nclass ApiService {\r\n    constructor() {\r\n        this.baseURL = API_URL_BASE_STRING;\r\n        this.cache = new SmartCache();\r\n        this.queue = new RequestQueue();\r\n        this.pendingRequests = new Map();\r\n        this.interceptors = {\r\n            request: [],\r\n            response: [],\r\n            error: []\r\n        };\r\n\r\n        // Default configuration\r\n        this.config = {\r\n            timeout: 30000,\r\n            retryAttempts: 3,\r\n            retryDelay: 1000,\r\n            retryMultiplier: 2,\r\n            cacheTTL: {\r\n                short: 30 * 1000,      // 30 seconds\r\n                medium: 5 * 60 * 1000,  // 5 minutes\r\n                long: 30 * 60 * 1000    // 30 minutes\r\n            }\r\n        };\r\n\r\n        // Setup default interceptors\r\n        this.setupDefaultInterceptors();\r\n    }\r\n\r\n    setupDefaultInterceptors() {\r\n        // Auth interceptor\r\n        this.addRequestInterceptor((config) => {\r\n            const token = localStorage.getItem('access_token');\r\n            if (token) {\r\n                config.headers = {\r\n                    ...config.headers,\r\n                    'Authorization': `Bearer ${token}`\r\n                };\r\n            }\r\n            return config;\r\n        });\r\n\r\n        // Error interceptor for auth errors\r\n        this.addErrorInterceptor(async (error) => {\r\n            if (error.status === 401) {\r\n                // Try to refresh token\r\n                const refreshed = await this.refreshToken();\r\n                if (refreshed) {\r\n                    // Retry original request\r\n                    return this.request(error.originalConfig);\r\n                }\r\n            }\r\n            throw error;\r\n        });\r\n    }\r\n\r\n    addRequestInterceptor(fn) {\r\n        this.interceptors.request.push(fn);\r\n    }\r\n\r\n    addResponseInterceptor(fn) {\r\n        this.interceptors.response.push(fn);\r\n    }\r\n\r\n    addErrorInterceptor(fn) {\r\n        this.interceptors.error.push(fn);\r\n    }\r\n\r\n    /**\r\n     * Build full URL with query parameters\r\n     */\r\n    buildURL(endpoint, params) {\r\n        const url = new URL(endpoint, this.baseURL);\r\n        if (params) {\r\n            Object.entries(params).forEach(([key, value]) => {\r\n                if (value !== undefined && value !== null) {\r\n                    url.searchParams.append(key, value);\r\n                }\r\n            });\r\n        }\r\n        return url.toString();\r\n    }\r\n\r\n    /**\r\n     * Main request method\r\n     */\r\n    async request(endpoint, options = {}) {\r\n        const {\r\n            method = 'GET',\r\n            headers = {},\r\n            body,\r\n            params,\r\n            cache: useCache = method === 'GET',\r\n            cacheTTL = this.config.cacheTTL.medium,\r\n            retry = true,\r\n            deduplicate = true,\r\n            timeout = this.config.timeout,\r\n            showError = true,\r\n            ...fetchOptions\r\n        } = options;\r\n\r\n        const url = this.buildURL(endpoint, params);\r\n        const cacheKey = this.cache.generateKey(url, params);\r\n\r\n        // Check cache for GET requests\r\n        if (useCache && method === 'GET') {\r\n            const cached = this.cache.get(cacheKey);\r\n            if (cached) {\r\n                return { data: cached, fromCache: true };\r\n            }\r\n        }\r\n\r\n        // Deduplicate identical GET requests\r\n        if (deduplicate && method === 'GET') {\r\n            const pending = this.pendingRequests.get(cacheKey);\r\n            if (pending) {\r\n                return pending;\r\n            }\r\n        }\r\n\r\n        // Apply request interceptors\r\n        let config = {\r\n            url,\r\n            method,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...headers\r\n            },\r\n            body: body ? JSON.stringify(body) : undefined,\r\n            ...fetchOptions\r\n        };\r\n\r\n        for (const interceptor of this.interceptors.request) {\r\n            config = await interceptor(config);\r\n        }\r\n\r\n        // Create request promise\r\n        const requestPromise = this.executeRequest(config, {\r\n            retry,\r\n            timeout,\r\n            showError,\r\n            cacheKey,\r\n            cacheTTL,\r\n            useCache,\r\n            method\r\n        });\r\n\r\n        // Track pending request for deduplication\r\n        if (deduplicate && method === 'GET') {\r\n            this.pendingRequests.set(cacheKey, requestPromise);\r\n            requestPromise.finally(() => {\r\n                this.pendingRequests.delete(cacheKey);\r\n            });\r\n        }\r\n\r\n        return requestPromise;\r\n    }\r\n\r\n    /**\r\n     * Execute request with retry logic\r\n     */\r\n    async executeRequest(config, options) {\r\n        const { retry, timeout, showError, cacheKey, cacheTTL, useCache, method } = options;\r\n        let lastError;\r\n\r\n        for (let attempt = 0; attempt <= (retry ? this.config.retryAttempts : 0); attempt++) {\r\n            try {\r\n                // Add to queue for rate limiting\r\n                const response = await this.queue.add(() =>\r\n                    this.fetchWithTimeout(config.url, {\r\n                        method: config.method,\r\n                        headers: config.headers,\r\n                        body: config.body\r\n                    }, timeout)\r\n                );\r\n\r\n                if (!response.ok) {\r\n                    const errorData = await response.json().catch(() => ({}));\r\n                    throw new ApiError(\r\n                        errorData.message || errorData.error || `HTTP Error ${response.status}`,\r\n                        response.status,\r\n                        errorData.code || 'HTTP_ERROR',\r\n                        errorData\r\n                    );\r\n                }\r\n\r\n                let data;\r\n                const contentType = response.headers.get('content-type');\r\n                if (contentType?.includes('application/json')) {\r\n                    data = await response.json();\r\n                } else {\r\n                    data = await response.text();\r\n                }\r\n\r\n                // Apply response interceptors\r\n                for (const interceptor of this.interceptors.response) {\r\n                    data = await interceptor(data, response);\r\n                }\r\n\r\n                // Cache successful GET responses\r\n                if (useCache && method === 'GET') {\r\n                    this.cache.set(cacheKey, data, cacheTTL);\r\n                }\r\n\r\n                return { data, fromCache: false };\r\n\r\n            } catch (error) {\r\n                lastError = error;\r\n\r\n                // Don't retry certain errors\r\n                if (error.status === 401 || error.status === 403 || error.status === 404) {\r\n                    break;\r\n                }\r\n\r\n                // Wait before retry with exponential backoff\r\n                if (attempt < this.config.retryAttempts) {\r\n                    const delay = this.config.retryDelay * Math.pow(this.config.retryMultiplier, attempt);\r\n                    await this.sleep(delay);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Apply error interceptors\r\n        for (const interceptor of this.interceptors.error) {\r\n            try {\r\n                const result = await interceptor({ ...lastError, originalConfig: config });\r\n                if (result) return result;\r\n            } catch (e) {\r\n                lastError = e;\r\n            }\r\n        }\r\n\r\n        // Show error toast if enabled\r\n        if (showError) {\r\n            toast.error(lastError.message || 'Bir hata olu≈ütu');\r\n        }\r\n\r\n        throw lastError;\r\n    }\r\n\r\n    /**\r\n     * Fetch with timeout\r\n     */\r\n    async fetchWithTimeout(url, options, timeout) {\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                ...options,\r\n                signal: controller.signal\r\n            });\r\n            return response;\r\n        } finally {\r\n            clearTimeout(timeoutId);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Refresh access token\r\n     */\r\n    async refreshToken() {\r\n        const refreshToken = localStorage.getItem('refresh_token');\r\n        if (!refreshToken) return false;\r\n\r\n        try {\r\n            const response = await fetch(`${this.baseURL}/api/auth/refresh/`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ refresh: refreshToken })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                localStorage.setItem('access_token', data.access);\r\n                return true;\r\n            }\r\n        } catch (e) {\r\n            console.error('Token refresh failed:', e);\r\n        }\r\n\r\n        // Clear tokens on failure\r\n        localStorage.removeItem('access_token');\r\n        localStorage.removeItem('refresh_token');\r\n        return false;\r\n    }\r\n\r\n    sleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    // =====================\r\n    // CONVENIENCE METHODS\r\n    // =====================\r\n\r\n    async get(endpoint, options = {}) {\r\n        return this.request(endpoint, { ...options, method: 'GET' });\r\n    }\r\n\r\n    async post(endpoint, body, options = {}) {\r\n        const result = await this.request(endpoint, { ...options, method: 'POST', body });\r\n        // Invalidate related cache\r\n        this.cache.invalidate(endpoint.split('/')[0]);\r\n        return result;\r\n    }\r\n\r\n    async put(endpoint, body, options = {}) {\r\n        const result = await this.request(endpoint, { ...options, method: 'PUT', body });\r\n        this.cache.invalidate(endpoint.split('/')[0]);\r\n        return result;\r\n    }\r\n\r\n    async patch(endpoint, body, options = {}) {\r\n        const result = await this.request(endpoint, { ...options, method: 'PATCH', body });\r\n        this.cache.invalidate(endpoint.split('/')[0]);\r\n        return result;\r\n    }\r\n\r\n    async delete(endpoint, options = {}) {\r\n        const result = await this.request(endpoint, { ...options, method: 'DELETE' });\r\n        this.cache.invalidate(endpoint.split('/')[0]);\r\n        return result;\r\n    }\r\n\r\n    // =====================\r\n    // SPECIALIZED ENDPOINTS\r\n    // =====================\r\n\r\n    // User APIs\r\n    users = {\r\n        getProfile: (userId) => this.get(`/api/users/${userId}/`),\r\n        updateProfile: (userId, data) => this.patch(`/api/users/${userId}/`, data),\r\n        getSettings: () => this.get('/api/users/settings/'),\r\n        updateSettings: (data) => this.patch('/api/users/settings/', data),\r\n        getFriends: () => this.get('/api/friends/', { cacheTTL: this.config.cacheTTL.short }),\r\n        sendFriendRequest: (userId) => this.post('/api/friends/send/', { user_id: userId }),\r\n        getBlocked: () => this.get('/api/blocked-users/'),\r\n        blockUser: (userId) => this.post('/api/blocked-users/', { user_id: userId }),\r\n        unblockUser: (userId) => this.delete(`/api/blocked-users/${userId}/`)\r\n    };\r\n\r\n    // Server APIs\r\n    servers = {\r\n        list: () => this.get('/api/servers/', { cacheTTL: this.config.cacheTTL.short }),\r\n        get: (serverId) => this.get(`/api/servers/${serverId}/`),\r\n        create: (data) => this.post('/api/servers/', data),\r\n        update: (serverId, data) => this.patch(`/api/servers/${serverId}/`, data),\r\n        delete: (serverId) => this.delete(`/api/servers/${serverId}/`),\r\n        getMembers: (serverId) => this.get(`/api/servers/${serverId}/members/`),\r\n        getRoles: (serverId) => this.get(`/api/servers/${serverId}/roles/`),\r\n        getBoostStats: (serverId) => this.get(`/api/servers/${serverId}/boost-stats/`)\r\n    };\r\n\r\n    // Room/Channel APIs\r\n    rooms = {\r\n        list: (serverId) => this.get(`/api/servers/${serverId}/rooms/`),\r\n        get: (roomId) => this.get(`/api/rooms/${roomId}/`),\r\n        create: (serverId, data) => this.post(`/api/servers/${serverId}/rooms/`, data),\r\n        update: (roomId, data) => this.patch(`/api/rooms/${roomId}/`, data),\r\n        delete: (roomId) => this.delete(`/api/rooms/${roomId}/`),\r\n        getMessages: (roomId, params) => this.get(`/api/rooms/${roomId}/messages/`, {\r\n            params,\r\n            cacheTTL: this.config.cacheTTL.short\r\n        })\r\n    };\r\n\r\n    // Message APIs\r\n    messages = {\r\n        send: (roomId, data) => this.post(`/api/rooms/${roomId}/messages/`, data),\r\n        edit: (messageId, content) => this.patch(`/api/messages/${messageId}/`, { content }),\r\n        delete: (messageId) => this.delete(`/api/messages/${messageId}/`),\r\n        pin: (messageId) => this.post(`/api/messages/${messageId}/pin/`),\r\n        unpin: (messageId) => this.post(`/api/messages/${messageId}/unpin/`),\r\n        react: (messageId, emoji) => this.post(`/api/messages/${messageId}/react/`, { emoji }),\r\n        search: (params) => this.get('/api/messages/search/', { params })\r\n    };\r\n\r\n    // Auth APIs\r\n    auth = {\r\n        login: (credentials) => this.post('/api/auth/login/', credentials, { showError: false }),\r\n        register: (data) => this.post('/api/auth/register/', data),\r\n        logout: () => this.post('/api/auth/logout/'),\r\n        refreshToken: () => this.refreshToken(),\r\n        verifyEmail: (token) => this.post('/api/auth/verify-email/', { token }),\r\n        resetPassword: (email) => this.post('/api/auth/reset-password/', { email }),\r\n        enable2FA: () => this.post('/api/auth/2fa/enable/'),\r\n        verify2FA: (code) => this.post('/api/auth/2fa/verify/', { code })\r\n    };\r\n\r\n    // Moderation APIs\r\n    moderation = {\r\n        ban: (serverId, userId, reason) => this.post(`/api/servers/${serverId}/bans/`, { user_id: userId, reason }),\r\n        unban: (serverId, banId) => this.delete(`/api/servers/${serverId}/bans/${banId}/`),\r\n        kick: (serverId, userId, reason) => this.post(`/api/servers/${serverId}/kicks/`, { user_id: userId, reason }),\r\n        warn: (serverId, userId, reason) => this.post(`/api/servers/${serverId}/warnings/`, { user_id: userId, reason }),\r\n        getAuditLogs: (serverId, params) => this.get(`/api/servers/${serverId}/audit-logs/`, { params })\r\n    };\r\n\r\n    // Premium/Payment APIs\r\n    premium = {\r\n        getPlans: () => this.get('/api/premium/plans/', { cacheTTL: this.config.cacheTTL.long }),\r\n        subscribe: (planId, paymentMethod) => this.post('/api/premium/subscribe/', { plan_id: planId, payment_method: paymentMethod }),\r\n        cancelSubscription: () => this.post('/api/premium/cancel/'),\r\n        getStatus: () => this.get('/api/premium/status/')\r\n    };\r\n\r\n    // Analytics APIs\r\n    analytics = {\r\n        getServerStats: (serverId) => this.get(`/api/servers/${serverId}/analytics/`),\r\n        getUserActivity: () => this.get('/api/users/analytics/'),\r\n        trackEvent: (event, data) => this.post('/api/analytics/events/', { event, data }, { showError: false })\r\n    };\r\n\r\n    // Utility methods\r\n    getCacheStats() {\r\n        return this.cache.getStats();\r\n    }\r\n\r\n    clearCache() {\r\n        this.cache.clear();\r\n    }\r\n\r\n    invalidateCache(pattern) {\r\n        this.cache.invalidate(pattern);\r\n    }\r\n}\r\n\r\n// Export singleton instance\r\nexport const api = new ApiService();\r\nexport default api;\r\n","import { useState, useEffect } from 'react';\r\nimport './HighlightsPanel.css';\r\nimport { toast } from 'react-toastify';\r\nimport DOMPurify from 'dompurify';\r\nimport { api } from '../services/ApiService';  // üöÄ Centralized API service\r\nimport confirmDialog from '../utils/confirmDialog';\r\n\r\nconst HighlightsPanel = ({ serverId, onClose }) => {\r\n  const [config, setConfig] = useState({\r\n    enabled: false,\r\n    keywords: [],\r\n    dm_notifications: true,\r\n    highlight_color: '#fbbf24'\r\n  });\r\n  const [highlights, setHighlights] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [newKeyword, setNewKeyword] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchConfig();\r\n    fetchHighlights();\r\n  }, [serverId]);\r\n\r\n  const fetchConfig = async () => {\r\n    try {\r\n      // üöÄ Using centralized ApiService instead of direct fetch\r\n      const data = await api.get(`/highlights/server/${serverId}/config/`);\r\n      setConfig(data);\r\n    } catch (error) {\r\n      console.error('Fetch config error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchHighlights = async () => {\r\n    try {\r\n      // üöÄ Using centralized ApiService\r\n      const data = await api.get(`/highlights/server/${serverId}/messages/`);\r\n      setHighlights(data);\r\n    } catch (error) {\r\n      console.error('Fetch highlights error:', error);\r\n    }\r\n  };\r\n\r\n  const saveConfig = async () => {\r\n    try {\r\n      // üöÄ Using centralized ApiService\r\n      await api.post(`/highlights/server/${serverId}/config/`, config);\r\n      toast.success('‚úÖ Highlight ayarlarƒ± kaydedildi');\r\n    } catch (error) {\r\n      console.error('Save config error:', error);\r\n      toast.error('‚ùå Kaydetme hatasƒ±');\r\n    }\r\n  };\r\n\r\n  const addKeyword = () => {\r\n    if (!newKeyword.trim()) return;\r\n    if (config.keywords.includes(newKeyword.toLowerCase())) {\r\n      toast.warning('‚ö†Ô∏è Bu kelime zaten ekli');\r\n      return;\r\n    }\r\n    setConfig({ ...config, keywords: [...config.keywords, newKeyword.toLowerCase()] });\r\n    setNewKeyword('');\r\n  };\r\n\r\n  const removeKeyword = (keyword) => {\r\n    setConfig({ ...config, keywords: config.keywords.filter(k => k !== keyword) });\r\n  };\r\n\r\n  const clearHighlights = async () => {\r\n    if (!await confirmDialog('T√ºm highlight ge√ßmi≈üini temizlemek istediƒüinize emin misiniz?')) return;\r\n    try {\r\n      const response = await fetch(`${apiBaseUrl}/highlights/server/${serverId}/clear/`, {\r\n        method: 'POST',\r\n        headers: { 'Authorization': `Bearer ${localStorage.getItem('access_token')}` }\r\n      });\r\n      if (response.ok) {\r\n        toast.success('‚úÖ Ge√ßmi≈ü temizlendi');\r\n        setHighlights([]);\r\n      }\r\n    } catch (error) {\r\n      toast.error('‚ùå Temizleme hatasƒ±');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"highlights-overlay\" onClick={onClose}>\r\n      <div className=\"highlights-panel\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"highlights-header\">\r\n          <h2>‚ú® Highlight Sistemi</h2>\r\n          <button className=\"close-btn\" onClick={onClose}>√ó</button>\r\n        </div>\r\n\r\n        <div className=\"highlights-content\">\r\n          {loading ? (\r\n            <div className=\"loading-state\">\r\n              <div className=\"spinner\"></div>\r\n              <p>Y√ºkleniyor...</p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"config-section\">\r\n                <div className=\"section-header\">\r\n                  <h3>‚öôÔ∏è Ayarlar</h3>\r\n                  <label className=\"toggle-switch\">\r\n                    <input type=\"checkbox\" checked={config.enabled} onChange={(e) => setConfig({ ...config, enabled: e.target.checked })} />\r\n                    <span className=\"toggle-slider\"></span>\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"keywords-section\">\r\n                  <h4>üîë Anahtar Kelimeler</h4>\r\n                  <div className=\"keyword-input\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newKeyword}\r\n                      onChange={(e) => setNewKeyword(e.target.value)}\r\n                      onKeyPress={(e) => e.key === 'Enter' && addKeyword()}\r\n                      placeholder=\"Kelime ekle...\"\r\n                    />\r\n                    <button onClick={addKeyword}>‚ûï</button>\r\n                  </div>\r\n                  {config.keywords.length > 0 && (\r\n                    <div className=\"keywords-list\">\r\n                      {config.keywords.map((keyword, idx) => (\r\n                        <div key={idx} className=\"keyword-tag\">\r\n                          <span>{keyword}</span>\r\n                          <button onClick={() => removeKeyword(keyword)}>√ó</button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"config-options\">\r\n                  <div className=\"form-group\">\r\n                    <label className=\"checkbox-label\">\r\n                      <input type=\"checkbox\" checked={config.dm_notifications} onChange={(e) => setConfig({ ...config, dm_notifications: e.target.checked })} />\r\n                      <span>DM bildirimleri g√∂nder</span>\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Highlight Rengi</label>\r\n                    <input type=\"color\" value={config.highlight_color} onChange={(e) => setConfig({ ...config, highlight_color: e.target.value })} />\r\n                  </div>\r\n                </div>\r\n\r\n                <button className=\"save-btn\" onClick={saveConfig}>üíæ Kaydet</button>\r\n              </div>\r\n\r\n              <div className=\"highlights-section\">\r\n                <div className=\"section-header\">\r\n                  <h3>üìù Highlight Ge√ßmi≈üi ({highlights.length})</h3>\r\n                  {highlights.length > 0 && (\r\n                    <button className=\"clear-btn\" onClick={clearHighlights}>üóëÔ∏è Temizle</button>\r\n                  )}\r\n                </div>\r\n\r\n                {highlights.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <span className=\"empty-icon\">‚ú®</span>\r\n                    <p>Hen√ºz highlight yok</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"highlights-list\">\r\n                    {highlights.map((hl) => (\r\n                      <div key={hl.id} className=\"highlight-card\">\r\n                        <div className=\"highlight-header\">\r\n                          <div className=\"highlight-author\">\r\n                            {hl.author_avatar ? <img src={hl.author_avatar} alt=\"\" /> : <div className=\"default-avatar\">üë§</div>}\r\n                            <div className=\"author-info\">\r\n                              <span className=\"author-name\">{hl.author_name}</span>\r\n                              <span className=\"channel-name\"># {hl.channel_name}</span>\r\n                            </div>\r\n                          </div>\r\n                          <span className=\"highlight-time\">{new Date(hl.created_at).toLocaleString('tr-TR')}</span>\r\n                        </div>\r\n                        <div className=\"highlight-content\">\r\n                          <p dangerouslySetInnerHTML={{\r\n                            __html: DOMPurify.sanitize(hl.content.replace(\r\n                              new RegExp(`(${config.keywords.join('|')})`, 'gi'),\r\n                              `<mark style=\"background: ${config.highlight_color}; color: #000; padding: 2px 4px; border-radius: 4px;\">$1</mark>`\r\n                            ))\r\n                          }} />\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HighlightsPanel;\r\n\r\n"],"names":["useState","useEffect","toast","jsx","jsxs","Fragment","DOMPurify"],"mappings":"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"}