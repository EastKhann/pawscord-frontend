import{a as T,r,n as e}from"./react-core-BMiyQWF6.js";import{a as I}from"./icons-vendor-T72gfvdf.js";import{A as m}from"./index-CJOKRwJG.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BuSyE8vR.js";import"./router-vendor-B86Z1mIL.js";import"./state-vendor-CAyNnPM4.js";import"./crypto-vendor-1Q6e4ZD-.js";const k=[{key:"custom",label:"Ã–zel",icon:"âœ¨",color:"#5865F2",placeholder:"Ã–zel durumunu yaz..."},{key:"gaming",label:"Oynuyor",icon:"ðŸŽ®",color:"#57F287",placeholder:"Hangi oyunu oynuyorsun?"},{key:"happy",label:"Dinliyor",icon:"ðŸŽ§",color:"#1DB954",placeholder:"Ne dinliyorsun?"},{key:"focused",label:"Ä°zliyor",icon:"ðŸ‘€",color:"#E91E63",placeholder:"Ne izliyorsun?"},{key:"creative",label:"YayÄ±nda",icon:"ðŸ“¡",color:"#9146FF",placeholder:"YayÄ±n baÅŸlÄ±ÄŸÄ±..."},{key:"excited",label:"YarÄ±ÅŸÄ±yor",icon:"ðŸ†",color:"#FAA61A",placeholder:"Hangi yarÄ±ÅŸma?"},{key:"working",label:"Ã‡alÄ±ÅŸÄ±yor",icon:"ðŸ’¼",color:"#747F8D",placeholder:"Ne Ã¼zerinde Ã§alÄ±ÅŸÄ±yorsun?"},{key:"studying",label:"Okuyor",icon:"ðŸ“š",color:"#5865F2",placeholder:"Ne okuyorsun?"}],E=[{label:"Temizleme",value:null},{label:"30 dakika",value:30},{label:"1 saat",value:60},{label:"4 saat",value:240},{label:"BugÃ¼n",value:"today"}],A=({isOpen:x,onClose:a,onStatusChange:j})=>{const[u,b]=r.useState("custom"),[y,c]=r.useState("âœ¨"),[n,f]=r.useState(""),[h,S]=r.useState(null),[g,d]=r.useState(!1),[C,v]=r.useState(null);r.useEffect(()=>{if(!x)return;(async()=>{try{const p=localStorage.getItem("access_token"),s=await fetch(`${m}/api/status/custom/`,{headers:{Authorization:`Bearer ${p}`}});if(s.ok){const l=await s.json();l.type&&(v(l),b(l.type),c(l.emoji||"âœ¨"),f(l.text||l.activity||""))}}catch{}})()},[x]);const z=async()=>{d(!0);try{const t=localStorage.getItem("access_token");let p=h;if(h==="today"){const l=new Date,B=new Date(l.getFullYear(),l.getMonth(),l.getDate(),23,59,59);p=Math.floor((B-l)/6e4)}const s=await fetch(`${m}/api/status/custom/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({type:u,emoji:y,text:n,activity:n,expires_in:p})});if(s.ok){const l=await s.json();j?.(l),a()}}catch{}finally{d(!1)}},w=async()=>{d(!0);try{const t=localStorage.getItem("access_token");await fetch(`${m}/api/status/custom/`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),v(null),b("custom"),c("âœ¨"),f(""),j?.(null),a()}catch{}finally{d(!1)}};if(!x)return null;const i=k.find(t=>t.key===u)||k[0];return e.jsx("div",{style:o.overlay,onClick:a,children:e.jsxs("div",{style:o.modal,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:o.header,children:[e.jsx("h3",{style:o.title,children:"Durumunu Ayarla"}),e.jsx("button",{onClick:a,style:o.closeBtn,children:e.jsx(I,{})})]}),e.jsxs("div",{style:{...o.preview,borderColor:i.color},children:[e.jsx("span",{style:o.previewEmoji,children:y}),e.jsxs("div",{style:o.previewText,children:[e.jsx("span",{style:{color:i.color,fontWeight:600,fontSize:12},children:i.label}),e.jsx("span",{style:o.previewContent,children:n||i.placeholder})]})]}),e.jsxs("div",{style:o.section,children:[e.jsx("label",{style:o.label,children:"Durum Tipi"}),e.jsx("div",{style:o.typeGrid,children:k.map(t=>e.jsxs("button",{onClick:()=>{b(t.key),c(t.icon)},style:{...o.typeBtn,...u===t.key?{backgroundColor:`${t.color}20`,borderColor:t.color,color:t.color}:{}},children:[e.jsx("span",{children:t.icon}),e.jsx("span",{style:{fontSize:11},children:t.label})]},t.key))})]}),e.jsxs("div",{style:o.section,children:[e.jsx("label",{style:o.label,children:"Emoji"}),e.jsx("input",{type:"text",value:y,onChange:t=>c(t.target.value.slice(-2)),style:o.emojiInput,maxLength:4})]}),e.jsxs("div",{style:o.section,children:[e.jsx("label",{style:o.label,children:"Durum Metni"}),e.jsx("input",{type:"text",value:n,onChange:t=>f(t.target.value),placeholder:i.placeholder,style:o.textInput,maxLength:100}),e.jsxs("span",{style:o.charCount,children:[n.length,"/100"]})]}),e.jsxs("div",{style:o.section,children:[e.jsx("label",{style:o.label,children:"Otomatik Temizle"}),e.jsx("div",{style:o.expiryRow,children:E.map(t=>e.jsx("button",{onClick:()=>S(t.value),style:{...o.expiryBtn,...h===t.value?o.expiryBtnActive:{}},children:t.label},t.label))})]}),e.jsxs("div",{style:o.actions,children:[C&&e.jsx("button",{onClick:w,style:o.clearBtn,disabled:g,children:"Durumu Temizle"}),e.jsx("div",{style:{flex:1}}),e.jsx("button",{onClick:a,style:o.cancelBtn,children:"Ä°ptal"}),e.jsx("button",{onClick:z,style:o.saveBtn,disabled:g||!n.trim(),children:g?"...":"Kaydet"})]})]})})},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{width:"440px",maxWidth:"90vw",backgroundColor:"#36393f",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid #2f3136"},title:{margin:0,fontSize:"18px",fontWeight:700,color:"#fff"},closeBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"16px",padding:"4px"},preview:{display:"flex",alignItems:"center",gap:"12px",margin:"16px 20px",padding:"14px 16px",backgroundColor:"#2f3136",borderRadius:"8px",borderLeft:"4px solid #5865F2"},previewEmoji:{fontSize:"28px"},previewText:{display:"flex",flexDirection:"column",gap:"2px"},previewContent:{color:"#dcddde",fontSize:"14px"},section:{padding:"0 20px",marginBottom:"16px",position:"relative"},label:{display:"block",color:"#b9bbbe",fontSize:"12px",fontWeight:700,textTransform:"uppercase",marginBottom:"8px"},typeGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"6px"},typeBtn:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"10px 8px",backgroundColor:"#2f3136",border:"2px solid transparent",borderRadius:"8px",color:"#b9bbbe",cursor:"pointer",transition:"all 0.15s",fontSize:"16px"},emojiInput:{width:"60px",padding:"8px 12px",backgroundColor:"#202225",border:"1px solid #40444b",borderRadius:"6px",color:"#fff",fontSize:"24px",textAlign:"center",outline:"none"},textInput:{width:"100%",padding:"10px 14px",backgroundColor:"#202225",border:"1px solid #40444b",borderRadius:"6px",color:"#dcddde",fontSize:"14px",outline:"none",boxSizing:"border-box"},charCount:{position:"absolute",right:"28px",bottom:"-16px",fontSize:"11px",color:"#72767d"},expiryRow:{display:"flex",gap:"6px",flexWrap:"wrap"},expiryBtn:{padding:"6px 12px",backgroundColor:"#2f3136",border:"1px solid #40444b",borderRadius:"6px",color:"#b9bbbe",cursor:"pointer",fontSize:"12px",transition:"all 0.15s"},expiryBtnActive:{backgroundColor:"#5865F2",borderColor:"#5865F2",color:"#fff"},actions:{display:"flex",alignItems:"center",gap:"8px",padding:"16px 20px",borderTop:"1px solid #2f3136",backgroundColor:"#2f3136"},clearBtn:{padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #ed4245",borderRadius:"6px",color:"#ed4245",cursor:"pointer",fontSize:"13px",fontWeight:500},cancelBtn:{padding:"8px 16px",backgroundColor:"transparent",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"13px",fontWeight:500},saveBtn:{padding:"8px 20px",backgroundColor:"#5865F2",border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"13px",fontWeight:600,transition:"background 0.15s"}},N=T.memo(A);export{N as default};
