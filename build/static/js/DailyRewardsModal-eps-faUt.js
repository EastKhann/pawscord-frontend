import{r,cx as b,l as T,am as B,V as C,aY as I,a$ as F}from"./react-core-B6hadH-M.js";import{t as c}from"./index-D_6pZib5.js";const W=({fetchWithAuth:d,apiBaseUrl:s,onClose:m,username:n})=>{const[l,p]=r.useState([]),[o,E]=r.useState(0),[y,h]=r.useState(!1),[S,v]=r.useState(!0),[x,f]=r.useState(!1),[g,k]=r.useState(null);r.useEffect(()=>{u()},[]);const u=async()=>{try{const a=await(await d(`${s}/rewards/daily/`)).json();p(a.rewards||[]),E(a.streak||0),h(a.can_claim||!1),k(a.last_claimed)}catch(t){console.error("Failed to load daily rewards:",t),c.error("Failed to load rewards")}finally{v(!1)}},D=async()=>{if(!y){c.error("Already claimed today!");return}f(!0);try{const a=await(await d(`${s}/rewards/claim/`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();a.success?(c.success(`Claimed ${a.reward.amount} ${a.reward.type}! ðŸŽ`),u()):c.error(a.error||"Failed to claim reward")}catch(t){console.error("Claim error:",t),c.error("Failed to claim reward")}finally{f(!1)}},R=t=>{switch(t){case"coins":return React.createElement(F,{style:{color:"#faa61a"}});case"premium":return React.createElement(I,{style:{color:"#f04747"}});default:return React.createElement(b,{style:{color:"#5865f2"}})}},i=(()=>{const t=o%7;return l[t]||null})();return React.createElement("div",{style:e.overlay,onClick:m},React.createElement("div",{style:e.modal,onClick:t=>t.stopPropagation()},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(b,{style:{fontSize:"24px",color:"#43b581"}}),React.createElement("h2",{style:{margin:0,fontSize:"20px"}},"Daily Rewards")),React.createElement("button",{onClick:m,style:e.closeBtn},React.createElement(T,null))),React.createElement("div",{style:e.content},S?React.createElement("div",{style:e.loading},"Loading..."):React.createElement(React.Fragment,null,React.createElement("div",{style:e.streakCard},React.createElement(B,{style:{fontSize:"48px",color:"#f04747"}}),React.createElement("div",{style:e.streakInfo},React.createElement("div",{style:e.streakNumber},o),React.createElement("div",{style:e.streakLabel},"Day Streak"))),y&&i&&React.createElement("div",{style:e.claimSection},React.createElement("h3",{style:e.sectionTitle},"Today's Reward"),React.createElement("div",{style:e.currentRewardCard},React.createElement("div",{style:e.rewardIcon},R(i.type)),React.createElement("div",{style:e.rewardDetails},React.createElement("div",{style:e.rewardAmount},i.amount," ",i.type),React.createElement("div",{style:e.rewardDescription},i.description))),React.createElement("button",{onClick:D,disabled:x,style:e.claimBtn},x?"Claiming...":"Claim Reward ðŸŽ")),!y&&g&&React.createElement("div",{style:e.alreadyClaimed},React.createElement(C,{style:{color:"#43b581",fontSize:"48px"}}),React.createElement("h3",null,"Already Claimed!"),React.createElement("p",null,"Come back tomorrow for your next reward"),React.createElement("div",{style:e.nextRewardTime},"Next reward in: ",A(g))),React.createElement("div",{style:e.calendarSection},React.createElement("h3",{style:e.sectionTitle},"7-Day Reward Cycle"),React.createElement("div",{style:e.calendar},l.map((t,a)=>{const z=a===o%7,w=a<o%7;return React.createElement("div",{key:a,style:{...e.calendarDay,...z&&e.calendarDayActive,...w&&e.calendarDayClaimed}},React.createElement("div",{style:e.dayNumber},"Day ",a+1),React.createElement("div",{style:e.dayIcon},R(t.type)),React.createElement("div",{style:e.dayReward},t.amount),w&&React.createElement("div",{style:e.claimedBadge},React.createElement(C,null)))}))),React.createElement("div",{style:e.info},React.createElement("p",{style:e.infoText},"ðŸ“… Log in every day to maintain your streak and earn rewards!"),React.createElement("p",{style:e.infoText},"ðŸ”¥ Missing a day will reset your streak to 0"))))))},A=d=>{const s=new Date,m=new Date(d),n=new Date(m);n.setDate(n.getDate()+1),n.setHours(0,0,0,0);const l=n-s,p=Math.floor(l/(1e3*60*60)),o=Math.floor(l%(1e3*60*60)/(1e3*60));return`${p}h ${o}m`},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"85vh",display:"flex",flexDirection:"column",color:"#fff"},header:{padding:"20px",borderBottom:"1px solid #444",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},closeBtn:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",padding:"40px",color:"#99aab5"},streakCard:{backgroundColor:"#2c2f33",borderRadius:"12px",padding:"24px",display:"flex",alignItems:"center",gap:"20px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},streakInfo:{display:"flex",flexDirection:"column",gap:"4px"},streakNumber:{fontSize:"48px",fontWeight:"bold",color:"#f04747",lineHeight:1},streakLabel:{fontSize:"14px",color:"#99aab5",textTransform:"uppercase",letterSpacing:"1px"},claimSection:{marginBottom:"32px"},sectionTitle:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#dcddde"},currentRewardCard:{backgroundColor:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",background:"linear-gradient(135deg, #5865f2 0%, #7289da 100%)",borderRadius:"12px",padding:"24px",display:"flex",alignItems:"center",gap:"20px",marginBottom:"16px",boxShadow:"0 8px 16px rgba(88, 101, 242, 0.3)"},rewardIcon:{fontSize:"48px",display:"flex",alignItems:"center",justifyContent:"center"},rewardDetails:{flex:1},rewardAmount:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px"},rewardDescription:{fontSize:"14px",opacity:.9},claimBtn:{width:"100%",padding:"16px",backgroundColor:"#43b581",border:"none",borderRadius:"8px",color:"#fff",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(67, 181, 129, 0.3)"},alreadyClaimed:{textAlign:"center",padding:"40px 20px",marginBottom:"32px"},nextRewardTime:{marginTop:"16px",padding:"12px",backgroundColor:"#2c2f33",borderRadius:"8px",fontSize:"16px",fontWeight:"600"},calendarSection:{marginBottom:"24px"},calendar:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(90px, 1fr))",gap:"12px"},calendarDay:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",textAlign:"center",border:"2px solid transparent",transition:"all 0.2s",position:"relative"},calendarDayActive:{borderColor:"#43b581",backgroundColor:"#2c3136",boxShadow:"0 0 20px rgba(67, 181, 129, 0.3)"},calendarDayClaimed:{opacity:.5},dayNumber:{fontSize:"12px",color:"#99aab5",marginBottom:"8px",fontWeight:"600"},dayIcon:{fontSize:"32px",marginBottom:"8px",display:"flex",justifyContent:"center"},dayReward:{fontSize:"16px",fontWeight:"bold"},claimedBadge:{position:"absolute",top:"8px",right:"8px",color:"#43b581",fontSize:"16px"},info:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},infoText:{fontSize:"14px",color:"#dcddde",margin:"8px 0",lineHeight:"1.6"}};export{W as default};
