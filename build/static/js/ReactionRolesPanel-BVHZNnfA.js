import{r,ch as n}from"./react-core-B6hadH-M.js";import{g as S,h as z}from"./index-D_6pZib5.js";const A=({serverId:o,onClose:d})=>{const[i,m]=r.useState([]),[p,h]=r.useState([]),[g,v]=r.useState([]),[t,l]=r.useState({message_id:"",channel_id:"",emoji:"",role_id:"",description:""}),[N,f]=r.useState(!0),[R,u]=r.useState(!1),s=S();r.useEffect(()=>{o&&(E(),k(),y())},[o]);const E=async()=>{try{const e=localStorage.getItem("access_token"),a=await fetch(`${s}/reaction-roles/server/${o}/`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const c=await a.json();m(c.reaction_roles||[])}}catch(e){console.error("Error fetching reaction roles:",e)}finally{f(!1)}},k=async()=>{try{const e=localStorage.getItem("access_token"),a=await fetch(`${s}/servers/${o}/roles/`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const c=await a.json();h(c.roles||[])}}catch(e){console.error("Error fetching roles:",e)}},y=async()=>{try{const e=localStorage.getItem("access_token"),a=await fetch(`${s}/servers/${o}/channels/`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const c=await a.json();v(c.channels||[])}}catch(e){console.error("Error fetching channels:",e)}},_=async()=>{if(!t.message_id||!t.emoji||!t.role_id){n.error("âŒ Mesaj ID, emoji ve rol zorunludur");return}try{const e=localStorage.getItem("access_token"),a=await fetch(`${s}/reaction-roles/create/`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:o,...t})});if(a.ok){const c=await a.json();m([...i,c.reaction_role]),l({message_id:"",channel_id:"",emoji:"",role_id:"",description:""}),n.success("âœ… Reaction role oluÅŸturuldu")}else{const c=await a.json();n.error(`âŒ ${c.error||"OluÅŸturma baÅŸarÄ±sÄ±z"}`)}}catch(e){console.error("Error creating reaction role:",e),n.error("âŒ OluÅŸturma baÅŸarÄ±sÄ±z")}},j=async e=>{if(await z("Bu reaction role'Ã¼ silmek istediÄŸinizden emin misiniz?"))try{const a=localStorage.getItem("access_token");(await fetch(`${s}/reaction-roles/${e}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok&&(m(i.filter(w=>w.id!==e)),n.success("âœ… Reaction role silindi"))}catch(a){console.error("Error deleting reaction role:",a),n.error("âŒ Silme baÅŸarÄ±sÄ±z")}},b=async()=>{try{const e=localStorage.getItem("access_token");(await fetch(`${s}/reaction-roles/server/${o}/sync/`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})).ok&&(n.success("âœ… Reaction roller senkronize edildi"),E())}catch(e){console.error("Error syncing reaction roles:",e),n.error("âŒ Senkronizasyon baÅŸarÄ±sÄ±z")}},$=["â¤ï¸","ğŸ’™","ğŸ’š","ğŸ’›","ğŸ§¡","ğŸ’œ","ğŸ–¤","ğŸ¤","ğŸ”´","ğŸŸ ","ğŸŸ¡","ğŸŸ¢","ğŸ”µ","ğŸŸ£","âšª","âš«","âœ…","âŒ","â­","ğŸ‰","ğŸ®","ğŸµ","ğŸ“š","ğŸ†"];return N?React.createElement("div",{className:"reaction-roles-overlay"},React.createElement("div",{className:"reaction-roles-panel"},React.createElement("div",{className:"loading-state"},React.createElement("div",{className:"spinner"}),React.createElement("p",null,"Reaction roller yÃ¼kleniyor...")))):React.createElement("div",{className:"reaction-roles-overlay",onClick:d},React.createElement("div",{className:"reaction-roles-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"reaction-header"},React.createElement("h2",null,"â­ Reaction Roles"),React.createElement("button",{className:"close-btn",onClick:d},"Ã—")),React.createElement("div",{className:"create-section"},React.createElement("h3",null,"ğŸ†• Yeni Reaction Role"),React.createElement("div",{className:"form-grid"},React.createElement("div",{className:"form-group full-width"},React.createElement("label",null,"Kanal"),React.createElement("select",{value:t.channel_id,onChange:e=>l({...t,channel_id:e.target.value})},React.createElement("option",{value:""},"Kanal seÃ§in (opsiyonel)"),g.map(e=>React.createElement("option",{key:e.id,value:e.id},"#",e.name)))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Mesaj ID *"),React.createElement("input",{type:"text",placeholder:"Mesaj ID'sini girin",value:t.message_id,onChange:e=>l({...t,message_id:e.target.value})}),React.createElement("span",{className:"input-hint"},"Mesaja saÄŸ tÄ±k â†’ Mesaj ID'sini Kopyala")),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Rol *"),React.createElement("select",{value:t.role_id,onChange:e=>l({...t,role_id:e.target.value})},React.createElement("option",{value:""},"Rol seÃ§in"),p.map(e=>React.createElement("option",{key:e.id,value:e.id},e.name)))),React.createElement("div",{className:"form-group full-width"},React.createElement("label",null,"Emoji *"),React.createElement("div",{className:"emoji-input-group"},React.createElement("input",{type:"text",placeholder:"Emoji seÃ§ veya gir",value:t.emoji,onChange:e=>l({...t,emoji:e.target.value}),readOnly:!0}),React.createElement("button",{className:"emoji-picker-btn",onClick:()=>u(!R)},"ğŸ˜€")),R&&React.createElement("div",{className:"emoji-picker"},$.map(e=>React.createElement("button",{key:e,className:"emoji-option",onClick:()=>{l({...t,emoji:e}),u(!1)}},e)))),React.createElement("div",{className:"form-group full-width"},React.createElement("label",null,"AÃ§Ä±klama"),React.createElement("input",{type:"text",placeholder:"Bu rol iÃ§in aÃ§Ä±klama (opsiyonel)",value:t.description,onChange:e=>l({...t,description:e.target.value})}))),React.createElement("button",{className:"create-btn",onClick:_},"â• Reaction Role OluÅŸtur")),React.createElement("div",{className:"actions-bar"},React.createElement("div",{className:"info-text"},React.createElement("span",{className:"count-badge"},i.length)," adet reaction role"),React.createElement("button",{className:"sync-btn",onClick:b},"ğŸ”„ Senkronize Et")),React.createElement("div",{className:"reaction-roles-list"},i.length===0?React.createElement("div",{className:"empty-state"},React.createElement("span",{className:"empty-icon"},"â­"),React.createElement("p",null,"HenÃ¼z reaction role yok"),React.createElement("span",null,"KullanÄ±cÄ±larÄ±n emoji ile rol almasÄ±nÄ± saÄŸlayÄ±n")):i.map(e=>React.createElement("div",{key:e.id,className:"reaction-role-card"},React.createElement("div",{className:"rr-header"},React.createElement("div",{className:"rr-emoji"},e.emoji),React.createElement("div",{className:"rr-info"},React.createElement("h4",null,e.role_name||`Role #${e.role_id}`),e.description&&React.createElement("p",{className:"rr-description"},e.description)),React.createElement("button",{className:"delete-btn",onClick:()=>j(e.id)},"ğŸ—‘ï¸")),React.createElement("div",{className:"rr-meta"},React.createElement("div",{className:"meta-item"},React.createElement("span",{className:"meta-label"},"ğŸ“¢ Kanal:"),React.createElement("span",{className:"meta-value"},e.channel_name?`#${e.channel_name}`:"Belirtilmedi")),React.createElement("div",{className:"meta-item"},React.createElement("span",{className:"meta-label"},"ğŸ’¬ Mesaj ID:"),React.createElement("span",{className:"meta-value mono"},e.message_id)),React.createElement("div",{className:"meta-item"},React.createElement("span",{className:"meta-label"},"ğŸ‘¥ KullanÄ±mlar:"),React.createElement("span",{className:"meta-value"},e.usage_count||0," kez kullanÄ±ldÄ±"))))))))};export{A as default};
