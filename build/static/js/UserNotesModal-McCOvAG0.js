import{r as i,n as e}from"./react-core-zXIKm1Jm.js";import{ai as g,a as v,aJ as j}from"./icons-vendor-BBdoVeJd.js";import"./editor-vendor-DiU449Dh.js";const S=({targetUser:r,apiBaseUrl:u,fetchWithAuth:y,onClose:d,inline:f=!1})=>{const[n,c]=i.useState(""),[a,x]=i.useState("yellow"),[l,p]=i.useState(!1),s=[{name:"yellow",value:"#fef3bd"},{name:"green",value:"#d4edda"},{name:"blue",value:"#d1ecf1"},{name:"red",value:"#f8d7da"},{name:"purple",value:"#e2d9f3"}];i.useEffect(()=>{h()},[r]);const h=async()=>{try{const o=await y(`${u}/user-notes/${r}/`);if(o.ok){const m=await o.json();c(m.note||""),x(m.color||"yellow")}}catch(o){console.error("Failed to load note:",o)}},b=async()=>{p(!0);try{(await y(`${u}/user-notes/${r}/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:n,color:a})})).ok&&(f?p(!1):d())}catch(o){console.error("Failed to save note:",o)}finally{p(!1)}};return f?e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsx("p",{style:t.info,children:"Bu not sadece sen gÃ¶rebilirsin"}),e.jsxs("div",{style:t.colorPicker,children:[e.jsx("label",{style:t.label,children:"Renk:"}),e.jsx("div",{style:t.colors,children:s.map(o=>e.jsx("button",{onClick:()=>x(o.name),style:{...t.colorButton,backgroundColor:o.value,...a===o.name?t.colorButtonActive:{}}},o.name))})]}),e.jsx("textarea",{value:n,onChange:o=>c(o.target.value),placeholder:"Notunu buraya yaz...",style:{...t.textarea,backgroundColor:s.find(o=>o.name===a)?.value},maxLength:500}),e.jsxs("div",{style:t.footer,children:[e.jsxs("span",{style:t.charCount,children:[n.length,"/500"]}),e.jsx("button",{onClick:b,disabled:l,style:t.saveButton,children:l?"Kaydediliyor...":"ðŸ’¾ Kaydet"})]})]}):e.jsx("div",{style:t.overlay,onClick:d,children:e.jsxs("div",{style:t.modal,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:t.header,children:[e.jsxs("h3",{style:t.title,children:[e.jsx(g,{})," ",r," HakkÄ±nda Not"]}),e.jsx("button",{onClick:d,style:t.closeButton,children:e.jsx(v,{})})]}),e.jsxs("div",{style:t.content,children:[e.jsx("p",{style:t.info,children:"Bu not sadece sen gÃ¶rebilirsin"}),e.jsxs("div",{style:t.colorPicker,children:[e.jsx("label",{style:t.label,children:"Renk:"}),e.jsx("div",{style:t.colors,children:s.map(o=>e.jsx("button",{onClick:()=>x(o.name),style:{...t.colorButton,backgroundColor:o.value,...a===o.name?t.colorButtonActive:{}}},o.name))})]}),e.jsx("textarea",{value:n,onChange:o=>c(o.target.value),placeholder:"Notunu buraya yaz...",style:{...t.textarea,backgroundColor:s.find(o=>o.name===a)?.value},maxLength:500}),e.jsxs("div",{style:t.footer,children:[e.jsxs("span",{style:t.charCount,children:[n.length,"/500"]}),e.jsxs("button",{onClick:b,disabled:l,style:t.saveButton,children:[e.jsx(j,{})," ",l?"Kaydediliyor...":"Kaydet"]})]})]})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"500px",maxWidth:"90vw",boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},header:{padding:"16px 20px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",alignItems:"center"},title:{color:"#fff",fontSize:"18px",margin:0,display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"20px",cursor:"pointer",padding:"4px"},content:{padding:"20px"},info:{color:"#72767d",fontSize:"13px",marginBottom:"16px",fontStyle:"italic"},colorPicker:{marginBottom:"16px"},label:{color:"#b9bbbe",fontSize:"14px",marginBottom:"8px",display:"block"},colors:{display:"flex",gap:"8px"},colorButton:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid transparent",cursor:"pointer",transition:"transform 0.2s"},colorButtonActive:{border:"2px solid #5865f2",transform:"scale(1.1)"},textarea:{width:"100%",minHeight:"150px",padding:"12px",border:"1px solid #4e5058",borderRadius:"6px",fontSize:"14px",color:"#1e1f22",resize:"vertical",fontFamily:"inherit",marginBottom:"12px"},footer:{display:"flex",justifyContent:"space-between",alignItems:"center"},charCount:{color:"#72767d",fontSize:"12px"},saveButton:{backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"6px",padding:"10px 20px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"}};export{S as default};
