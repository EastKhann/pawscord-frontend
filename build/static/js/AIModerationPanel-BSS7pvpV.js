import{r,n as e}from"./react-core-zXIKm1Jm.js";import{a as x}from"./index-D5GkNzM3.js";import{a2 as w,d as f,A as D,b0 as B,a1 as C}from"./icons-vendor-BBdoVeJd.js";import{g,t as m}from"./index-CiRJFVVz.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-ltdGXAv4.js";import"./crypto-vendor-D_AcF0lD.js";import"./state-vendor-8NbFPBhQ.js";const E=({serverSlug:p,token:d,isMobile:a})=>{const[i,n]=r.useState({spamDetection:!0,profanityFilter:!0,nsfwDetection:!0,toxicityThreshold:70,autoTimeout:!1,autoDelete:!1,warningCount:3}),[l,b]=r.useState([]),[o,u]=r.useState({messagesScanned:0,flaggedToday:0,autoModActions:0,accuracy:0}),[T,h]=r.useState(!1);r.useEffect(()=>{y()},[]);const y=async()=>{h(!0);try{const s=await x.get(`${g()}/moderation/${p}/`,{headers:{Authorization:`Bearer ${d}`}});s.data.settings&&n(s.data.settings),s.data.recent_flags&&b(s.data.recent_flags),s.data.stats&&u(s.data.stats)}catch(s){console.error("Failed to load moderation:",s)}finally{h(!1)}},j=async()=>{try{await x.post(`${g()}/moderation/${p}/update/`,{settings:i},{headers:{Authorization:`Bearer ${d}`}}),m.success("âœ… Moderation settings saved!")}catch(s){console.error("Failed to save:",s),m.error("âŒ Failed to save settings")}},c=async(s,v)=>{try{await x.post(`${g()}/moderation/flag/${s}/action/`,{action:v},{headers:{Authorization:`Bearer ${d}`}}),y()}catch(S){console.error("Action failed:",S)}},t={container:{padding:a?"16px":"24px",maxWidth:"1200px",margin:"0 auto"},header:{marginBottom:"32px"},title:{fontSize:a?"24px":"32px",fontWeight:"700",color:"rgba(255, 255, 255, 0.95)",display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},subtitle:{fontSize:a?"14px":"16px",color:"rgba(255, 255, 255, 0.6)"},statsGrid:{display:"grid",gridTemplateColumns:a?"1fr 1fr":"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},statCard:{background:"linear-gradient(135deg, rgba(88, 101, 242, 0.1), rgba(114, 137, 218, 0.1))",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},statValue:{fontSize:a?"24px":"32px",fontWeight:"700",color:"#5865f2",marginBottom:"8px"},statLabel:{fontSize:"14px",color:"rgba(255, 255, 255, 0.7)"},section:{background:"rgba(30, 31, 34, 0.6)",border:"1px solid rgba(88, 101, 242, 0.2)",borderRadius:"16px",padding:a?"20px":"24px",marginBottom:"24px"},sectionTitle:{fontSize:"20px",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},setting:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",borderBottom:"1px solid rgba(88, 101, 242, 0.1)"},settingInfo:{flex:1},settingLabel:{fontSize:"16px",fontWeight:"500",color:"rgba(255, 255, 255, 0.9)",marginBottom:"4px"},settingDesc:{fontSize:"13px",color:"rgba(255, 255, 255, 0.6)"},switch:s=>({width:"56px",height:"32px",background:s?"linear-gradient(135deg, #43b581, #4caf50)":"rgba(255, 255, 255, 0.2)",borderRadius:"16px",position:"relative",cursor:"pointer",transition:"all 0.3s ease",border:"2px solid rgba(88, 101, 242, 0.3)"}),switchKnob:s=>({width:"26px",height:"26px",background:"white",borderRadius:"50%",position:"absolute",top:"1px",left:s?"26px":"1px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}),slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255, 255, 255, 0.2)",outline:"none",marginTop:"8px"},flagsList:{display:"flex",flexDirection:"column",gap:"12px"},flagCard:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(218, 55, 60, 0.4)",borderRadius:"12px",padding:"16px"},flagHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},flagType:s=>({display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",background:s==="spam"?"rgba(218, 55, 60, 0.2)":s==="nsfw"?"rgba(240, 183, 50, 0.2)":"rgba(88, 101, 242, 0.2)",color:s==="spam"?"#da373c":s==="nsfw"?"#f0b732":"#5865f2"}),flagMessage:{background:"rgba(0, 0, 0, 0.4)",padding:"12px",borderRadius:"8px",color:"rgba(255, 255, 255, 0.8)",fontSize:"14px",marginBottom:"12px",fontFamily:"monospace"},flagActions:{display:"flex",gap:"8px",flexWrap:"wrap"},actionBtn:s=>({padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",minHeight:"36px",background:s==="delete"?"rgba(218, 55, 60, 0.2)":s==="timeout"?"rgba(240, 183, 50, 0.2)":"rgba(67, 181, 129, 0.2)",color:s==="delete"?"#da373c":s==="timeout"?"#f0b732":"#43b581",border:`1px solid ${s==="delete"?"rgba(218, 55, 60, 0.4)":s==="timeout"?"rgba(240, 183, 50, 0.4)":"rgba(67, 181, 129, 0.4)"}`}),saveBtn:{width:"100%",padding:"16px",background:"linear-gradient(135deg, #5865f2, #7289da)",border:"none",borderRadius:"12px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginTop:"24px",transition:"all 0.2s ease",minHeight:"48px"}};return e.jsxs("div",{style:t.container,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("h1",{style:t.title,children:[e.jsx(w,{}),"AI Moderation"]}),e.jsx("p",{style:t.subtitle,children:"Automated content filtering powered by machine learning"})]}),e.jsxs("div",{style:t.statsGrid,children:[e.jsxs("div",{style:t.statCard,children:[e.jsx("div",{style:t.statValue,children:o.messagesScanned.toLocaleString()}),e.jsx("div",{style:t.statLabel,children:"Messages Scanned"})]}),e.jsxs("div",{style:t.statCard,children:[e.jsx("div",{style:t.statValue,children:o.flaggedToday}),e.jsx("div",{style:t.statLabel,children:"Flagged Today"})]}),e.jsxs("div",{style:t.statCard,children:[e.jsx("div",{style:t.statValue,children:o.autoModActions}),e.jsx("div",{style:t.statLabel,children:"Auto Actions"})]}),e.jsxs("div",{style:t.statCard,children:[e.jsxs("div",{style:t.statValue,children:[o.accuracy,"%"]}),e.jsx("div",{style:t.statLabel,children:"Accuracy"})]})]}),e.jsxs("div",{style:t.section,children:[e.jsx("h2",{style:t.sectionTitle,children:"âš™ï¸ Detection Settings"}),e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsx("div",{style:t.settingLabel,children:"Spam Detection"}),e.jsx("div",{style:t.settingDesc,children:"Detect repeated or mass messages"})]}),e.jsx("div",{style:t.switch(i.spamDetection),onClick:()=>n({...i,spamDetection:!i.spamDetection}),children:e.jsx("div",{style:t.switchKnob(i.spamDetection)})})]}),e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsx("div",{style:t.settingLabel,children:"Profanity Filter"}),e.jsx("div",{style:t.settingDesc,children:"Block offensive language"})]}),e.jsx("div",{style:t.switch(i.profanityFilter),onClick:()=>n({...i,profanityFilter:!i.profanityFilter}),children:e.jsx("div",{style:t.switchKnob(i.profanityFilter)})})]}),e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsx("div",{style:t.settingLabel,children:"NSFW Detection"}),e.jsx("div",{style:t.settingDesc,children:"Detect inappropriate images"})]}),e.jsx("div",{style:t.switch(i.nsfwDetection),onClick:()=>n({...i,nsfwDetection:!i.nsfwDetection}),children:e.jsx("div",{style:t.switchKnob(i.nsfwDetection)})})]}),e.jsxs("div",{style:t.setting,children:[e.jsxs("div",{style:t.settingInfo,children:[e.jsxs("div",{style:t.settingLabel,children:["Toxicity Threshold: ",i.toxicityThreshold,"%"]}),e.jsx("div",{style:t.settingDesc,children:"Sensitivity level for toxic content"})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.toxicityThreshold,onChange:s=>n({...i,toxicityThreshold:parseInt(s.target.value)}),style:t.slider})]})]}),e.jsxs("div",{style:t.section,children:[e.jsxs("h2",{style:t.sectionTitle,children:[e.jsx(f,{}),"Recent Flags (",l.length,")"]}),l.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"rgba(255, 255, 255, 0.5)"},children:[e.jsx(D,{size:48}),e.jsx("p",{style:{marginTop:"16px"},children:"No recent violations detected"})]}):e.jsx("div",{style:t.flagsList,children:l.map(s=>e.jsxs("div",{style:t.flagCard,children:[e.jsxs("div",{style:t.flagHeader,children:[e.jsxs("div",{children:[e.jsxs("span",{style:t.flagType(s.type),children:[e.jsx(f,{}),s.type.toUpperCase()]}),e.jsxs("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.5)",marginTop:"8px"},children:[s.user," â€¢ ",s.timestamp]})]}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"700",color:s.confidence>80?"#da373c":"#f0b732"},children:[s.confidence,"%"]})]}),e.jsx("div",{style:t.flagMessage,children:s.message}),e.jsxs("div",{style:t.flagActions,children:[e.jsxs("button",{onClick:()=>c(s.id,"delete"),style:t.actionBtn("delete"),children:[e.jsx(B,{}),"Delete"]}),e.jsx("button",{onClick:()=>c(s.id,"timeout"),style:t.actionBtn("timeout"),children:"Timeout User"}),e.jsxs("button",{onClick:()=>c(s.id,"dismiss"),style:t.actionBtn("dismiss"),children:[e.jsx(C,{}),"Dismiss"]})]})]},s.id))})]}),e.jsx("button",{onClick:j,style:t.saveBtn,children:"ğŸ’¾ Save Settings"})]})};export{E as default};
