{"version":3,"file":"MessageTemplateModal-CnWeDgQg.js","sources":["../../../src/components/MessageTemplateModal.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { FaTimes, FaPlus, FaTrash, FaCheck, FaStickyNote } from 'react-icons/fa';\r\nimport confirmDialog from '../utils/confirmDialog';\r\n\r\nconst MessageTemplateModal = ({ onClose, onSelect, fetchWithAuth, apiBaseUrl, isAdmin }) => {\r\n    const [templates, setTemplates] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [creating, setCreating] = useState(false);\r\n    const [newTemplate, setNewTemplate] = useState({ name: '', content: '', is_global: false });\r\n\r\n    useEffect(() => {\r\n        loadTemplates();\r\n    }, []);\r\n\r\n    const loadTemplates = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/templates/`);\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setTemplates(data || []);\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleCreate = async () => {\r\n        if (!newTemplate.name || !newTemplate.content) return;\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/templates/`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(newTemplate)\r\n            });\r\n            if (res.ok) {\r\n                setNewTemplate({ name: '', content: '', is_global: false });\r\n                setCreating(false);\r\n                loadTemplates();\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id, e) => {\r\n        e.stopPropagation();\r\n        if (!await confirmDialog(\"Bu şablonu silmek istediğine emin misin?\")) return;\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/templates/${id}/`, { method: 'DELETE' });\r\n            if (res.ok) {\r\n                setTemplates(prev => prev.filter(t => t.id !== id));\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={overlayStyle}>\r\n            <div style={modalStyle}>\r\n                {/* HEAD */}\r\n                <div style={headerStyle}>\r\n                    <h3 style={{ margin: 0, display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                        <FaStickyNote /> Hazır Şablonlar\r\n                    </h3>\r\n                    <button onClick={onClose} style={closeButtonStyle}><FaTimes /></button>\r\n                </div>\r\n\r\n                {/* CONTENT */}\r\n                <div style={contentStyle}>\r\n                    {creating ? (\r\n                        <div style={formStyle}>\r\n                            <input\r\n                                placeholder=\"Şablon Adı\"\r\n                                value={newTemplate.name}\r\n                                onChange={e => setNewTemplate({ ...newTemplate, name: e.target.value })}\r\n                                style={inputStyle}\r\n                            />\r\n                            <textarea\r\n                                placeholder=\"Şablon İçeriği...\"\r\n                                value={newTemplate.content}\r\n                                onChange={e => setNewTemplate({ ...newTemplate, content: e.target.value })}\r\n                                style={textareaStyle}\r\n                            />\r\n                            {isAdmin && (\r\n                                <label style={{ display: 'flex', alignItems: 'center', gap: '5px', fontSize: '12px' }}>\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={newTemplate.is_global}\r\n                                        onChange={e => setNewTemplate({ ...newTemplate, is_global: e.target.checked })}\r\n                                    />\r\n                                    Herkese Açık (Global)\r\n                                </label>\r\n                            )}\r\n                            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                                <button onClick={handleCreate} style={saveButtonStyle}><FaCheck /> Kaydet</button>\r\n                                <button onClick={() => setCreating(false)} style={cancelButtonStyle}>İptal</button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <button onClick={() => setCreating(true)} style={addButtonStyle}>\r\n                                <FaPlus /> Yeni Şablon Oluştur\r\n                            </button>\r\n                            <div style={listStyle}>\r\n                                {loading ? <p>Yükleniyor...</p> : templates.length === 0 ? <p style={{ opacity: 0.5 }}>Henüz şablon yok.</p> : (\r\n                                    templates.map(t => (\r\n                                        <div key={t.id} style={itemStyle} onClick={() => onSelect(t.content)}>\r\n                                            <div>\r\n                                                <div style={{ fontWeight: 'bold' }}>{t.name}</div>\r\n                                                <div style={{ fontSize: '12px', opacity: 0.7, whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: '200px' }}>{t.content}</div>\r\n                                            </div>\r\n                                            <div style={{ display: 'flex', gap: '10px' }}>\r\n                                                {t.is_global && <span style={badgeStyle}>Global</span>}\r\n                                                <button onClick={(e) => handleDelete(t.id, e)} style={deleteButtonStyle}><FaTrash /></button>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- STYLES ---\r\nconst overlayStyle = {\r\n    position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\r\n    backgroundColor: 'rgba(0,0,0,0.7)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000,\r\n    backdropFilter: 'blur(5px)'\r\n};\r\nconst modalStyle = {\r\n    backgroundColor: '#313338', width: '400px', borderRadius: '8px', overflow: 'hidden',\r\n    boxShadow: '0 4px 15px rgba(0,0,0,0.5)', color: 'white', display: 'flex', flexDirection: 'column', maxHeight: '80vh'\r\n};\r\nconst headerStyle = {\r\n    padding: '16px', backgroundColor: '#2B2D31', borderBottom: '1px solid #1F2023',\r\n    display: 'flex', justifyContent: 'space-between', alignItems: 'center'\r\n};\r\nconst closeButtonStyle = { background: 'none', border: 'none', color: '#B5BAC1', cursor: 'pointer', fontSize: '16px' };\r\nconst contentStyle = { padding: '16px', overflowY: 'auto' };\r\nconst addButtonStyle = {\r\n    width: '100%', padding: '10px', backgroundColor: '#5865F2', color: 'white', border: 'none', borderRadius: '4px',\r\n    cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '5px', marginBottom: '15px'\r\n};\r\nconst listStyle = { display: 'flex', flexDirection: 'column', gap: '8px' };\r\nconst itemStyle = {\r\n    backgroundColor: '#2B2D31', padding: '10px', borderRadius: '4px', cursor: 'pointer',\r\n    display: 'flex', justifyContent: 'space-between', alignItems: 'center', transition: '0.2s'\r\n};\r\nconst badgeStyle = { fontSize: '10px', backgroundColor: '#FAA61A', color: 'black', padding: '2px 6px', borderRadius: '10px', fontWeight: 'bold' };\r\nconst deleteButtonStyle = { background: 'none', border: 'none', color: '#DA373C', cursor: 'pointer' };\r\nconst formStyle = { display: 'flex', flexDirection: 'column', gap: '10px' };\r\nconst inputStyle = { padding: '8px', borderRadius: '4px', border: 'none', backgroundColor: '#1E1F22', color: 'white' };\r\nconst textareaStyle = { padding: '8px', borderRadius: '4px', border: 'none', backgroundColor: '#1E1F22', color: 'white', minHeight: '100px', resize: 'vertical' };\r\nconst saveButtonStyle = { flex: 1, padding: '8px', backgroundColor: '#23A559', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' };\r\nconst cancelButtonStyle = { flex: 1, padding: '8px', backgroundColor: '#DA373C', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' };\r\n\r\nexport default MessageTemplateModal;\r\n\r\n\r\n"],"names":["useState","useEffect","e","jsxs","jsx","Fragment"],"mappings":"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"}