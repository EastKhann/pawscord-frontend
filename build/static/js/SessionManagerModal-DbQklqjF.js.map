{"version":3,"file":"SessionManagerModal-DbQklqjF.js","sources":["../../../src/components/SessionManagerModal.js"],"sourcesContent":["// frontend/src/components/SessionManagerModal.js\r\nimport { useState, useEffect } from 'react';\r\nimport toast from '../utils/toast';\r\nimport { FaTimes, FaDesktop, FaMobile, FaTablet, FaTrash, FaCircle } from 'react-icons/fa';\r\n\r\nconst SessionManagerModal = ({ onClose, fetchWithAuth, apiBaseUrl }) => {\r\n    const [sessions, setSessions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        loadSessions();\r\n    }, []);\r\n\r\n    const loadSessions = async () => {\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/sessions/list/`);\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setSessions(data.sessions || []);\r\n            }\r\n        } catch (error) {\r\n            console.error('Load sessions error:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleRevoke = async (sessionId) => {\r\n        if (!confirm('Bu oturumu sonlandƒ±rmak istediƒüinizden emin misiniz?')) return;\r\n\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/sessions/revoke/`, {\r\n                method: 'POST',\r\n                body: JSON.stringify({ session_id: sessionId })\r\n            });\r\n\r\n            if (res.ok) {\r\n                setSessions(prev => prev.filter(s => s.id !== sessionId));\r\n                toast.success('‚úÖ Oturum sonlandƒ±rƒ±ldƒ±');\r\n            } else {\r\n                toast.error('‚ùå Oturum sonlandƒ±rƒ±lamadƒ±');\r\n            }\r\n        } catch (error) {\r\n            console.error('Revoke session error:', error);\r\n            toast.error('‚ùå Bir hata olu≈ütu');\r\n        }\r\n    };\r\n\r\n    const getDeviceIcon = (deviceType) => {\r\n        if (deviceType?.includes('mobile') || deviceType?.includes('android') || deviceType?.includes('ios')) {\r\n            return <FaMobile />;\r\n        }\r\n        if (deviceType?.includes('tablet')) return <FaTablet />;\r\n        return <FaDesktop />;\r\n    };\r\n\r\n    const formatDate = (dateStr) => {\r\n        return new Date(dateStr).toLocaleString('tr-TR');\r\n    };\r\n\r\n    return (\r\n        <div style={styles.overlay} onClick={onClose}>\r\n            <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n                <div style={styles.header}>\r\n                    <h2 style={styles.title}>\r\n                        üîê Aktif Oturumlar\r\n                    </h2>\r\n                    <button onClick={onClose} style={styles.closeButton}>\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={styles.content}>\r\n                    {loading ? (\r\n                        <div style={styles.loading}>Y√ºkleniyor...</div>\r\n                    ) : sessions.length === 0 ? (\r\n                        <div style={styles.empty}>Aktif oturum bulunamadƒ±</div>\r\n                    ) : (\r\n                        <div style={styles.sessionList}>\r\n                            {sessions.map(session => (\r\n                                <div key={session.id} style={styles.sessionItem}>\r\n                                    <div style={styles.sessionIcon}>\r\n                                        {getDeviceIcon(session.device_type)}\r\n                                    </div>\r\n                                    <div style={styles.sessionInfo}>\r\n                                        <div style={styles.sessionDevice}>\r\n                                            {session.device_name || session.device_type || 'Bilinmeyen Cihaz'}\r\n                                            {session.is_current && (\r\n                                                <span style={styles.currentBadge}>\r\n                                                    <FaCircle style={{ fontSize: '6px' }} /> Bu Cihaz\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                        <div style={styles.sessionDetails}>\r\n                                            {session.ip_address && (\r\n                                                <span>IP: {session.ip_address}</span>\r\n                                            )}\r\n                                            {session.location && (\r\n                                                <span> ‚Ä¢ {session.location}</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <div style={styles.sessionTime}>\r\n                                            Son Aktivite: {formatDate(session.last_activity || session.created_at)}\r\n                                        </div>\r\n                                    </div>\r\n                                    {!session.is_current && (\r\n                                        <button\r\n                                            onClick={() => handleRevoke(session.id)}\r\n                                            style={styles.revokeButton}\r\n                                            title=\"Oturumu sonlandƒ±r\"\r\n                                        >\r\n                                            <FaTrash />\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 10000\r\n    },\r\n    modal: {\r\n        backgroundColor: '#2b2d31',\r\n        borderRadius: '8px',\r\n        width: '90%',\r\n        maxWidth: '600px',\r\n        maxHeight: '80vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        boxShadow: '0 8px 16px rgba(0,0,0,0.4)'\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        padding: '20px',\r\n        borderBottom: '1px solid #40444b'\r\n    },\r\n    title: {\r\n        color: 'white',\r\n        margin: 0,\r\n        fontSize: '1.5em'\r\n    },\r\n    closeButton: {\r\n        background: 'none',\r\n        border: 'none',\r\n        color: '#b9bbbe',\r\n        cursor: 'pointer',\r\n        fontSize: '1.5em',\r\n        padding: '5px'\r\n    },\r\n    content: {\r\n        padding: '20px',\r\n        overflowY: 'auto',\r\n        flex: 1\r\n    },\r\n    loading: {\r\n        textAlign: 'center',\r\n        color: '#b9bbbe',\r\n        padding: '40px'\r\n    },\r\n    empty: {\r\n        textAlign: 'center',\r\n        color: '#b9bbbe',\r\n        padding: '40px'\r\n    },\r\n    sessionList: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '12px'\r\n    },\r\n    sessionItem: {\r\n        backgroundColor: '#40444b',\r\n        borderRadius: '8px',\r\n        padding: '15px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '15px'\r\n    },\r\n    sessionIcon: {\r\n        fontSize: '2em',\r\n        color: '#5865f2',\r\n        minWidth: '40px',\r\n        textAlign: 'center'\r\n    },\r\n    sessionInfo: {\r\n        flex: 1\r\n    },\r\n    sessionDevice: {\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        fontSize: '1em',\r\n        marginBottom: '5px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '10px'\r\n    },\r\n    currentBadge: {\r\n        backgroundColor: '#3ba55d',\r\n        color: 'white',\r\n        padding: '2px 8px',\r\n        borderRadius: '10px',\r\n        fontSize: '0.7em',\r\n        fontWeight: 'bold',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '4px'\r\n    },\r\n    sessionDetails: {\r\n        color: '#b9bbbe',\r\n        fontSize: '0.85em',\r\n        marginBottom: '3px'\r\n    },\r\n    sessionTime: {\r\n        color: '#72767d',\r\n        fontSize: '0.75em'\r\n    },\r\n    revokeButton: {\r\n        backgroundColor: '#f04747',\r\n        border: 'none',\r\n        color: 'white',\r\n        padding: '8px 12px',\r\n        borderRadius: '4px',\r\n        cursor: 'pointer',\r\n        fontSize: '1em'\r\n    }\r\n};\r\n\r\nexport default SessionManagerModal;\r\n\r\n\r\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":"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"}