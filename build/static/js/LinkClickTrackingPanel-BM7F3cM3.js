var u=Object.defineProperty;var r=(i,l)=>u(i,"name",{value:l,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{j as k,a as j,a5 as v,bz as w}from"./icons-vendor-BMXAt4pj.js";import{t as c}from"./index-Bohqi95c.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const E=r(({fetchWithAuth:i,apiBaseUrl:l,onClose:f,roomSlug:a})=>{const[x,g]=d.useState([]),[y,p]=d.useState(!1);d.useEffect(()=>{m()},[a]);const m=r(async()=>{p(!0);try{const n=await(await i(`${l}/links/stats/?room=${a}`)).json();g(n.stats||[])}catch{c.error("Failed to load link stats")}finally{p(!1)}},"fetchLinkStats"),h=r(async()=>{try{const n=await(await i(`${l}/links/export/?room=${a}`)).blob(),b=window.URL.createObjectURL(n),s=document.createElement("a");s.href=b,s.download=`link_stats_${new Date().toISOString()}.csv`,document.body.appendChild(s),s.click(),s.remove(),c.success("Stats exported successfully")}catch{c.error("Failed to export stats")}},"exportStats");return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(k,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Link Click Tracking"})]}),e.jsx("button",{onClick:f,style:t.closeButton,children:e.jsx(j,{})})]}),e.jsx("div",{style:t.toolbar,children:e.jsxs("button",{onClick:h,style:t.exportButton,children:[e.jsx(v,{style:{marginRight:"5px"}}),"Export CSV"]})}),e.jsx("div",{style:t.content,children:y?e.jsx("div",{style:t.loading,children:"Loading link stats..."}):x.length===0?e.jsx("div",{style:t.empty,children:"No link click data available"}):e.jsx("div",{style:t.statsTable,children:x.map((o,n)=>e.jsxs("div",{style:t.statRow,children:[e.jsxs("div",{style:t.linkInfo,children:[e.jsx(w,{style:{color:"#5865f2",marginRight:"10px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:t.linkUrl,children:o.url}),e.jsxs("div",{style:t.linkMeta,children:["Shared by ",o.user?.username," on ",new Date(o.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{style:t.clickCount,children:[o.click_count," clicks"]})]},n))})})]})})},"LinkClickTrackingPanel"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},exportButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsTable:{display:"flex",flexDirection:"column",gap:"12px"},statRow:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},linkInfo:{display:"flex",alignItems:"center",flex:1},linkUrl:{fontSize:"14px",color:"#5865f2",fontWeight:"500",wordBreak:"break-all",marginBottom:"4px"},linkMeta:{fontSize:"12px",color:"#99aab5"},clickCount:{fontSize:"18px",fontWeight:"600",color:"#ffffff",minWidth:"100px",textAlign:"right"}};export{E as default};
