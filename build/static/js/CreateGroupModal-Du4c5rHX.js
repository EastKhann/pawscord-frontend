import{r as l,l as f,aX as x,a_ as h}from"./react-core-B6hadH-M.js";import{t as n}from"./index-D_6pZib5.js";const w=({onClose:a,friendsList:s,fetchWithAuth:u,apiBaseUrl:p,onGroupCreated:b})=>{const[t,c]=l.useState([]),[i,d]=l.useState(!1);l.useEffect(()=>{const e=o=>{o.key==="Escape"&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a]);const m=e=>{t.includes(e)?c(o=>o.filter(g=>g!==e)):c(o=>[...o,e])},y=async()=>{if(t.length<2){n.error("❌ En az 2 kişi seçmelisin");return}d(!0);try{const e=await u(`${p}/conversations/create_group/`,{method:"POST",body:JSON.stringify({usernames:t})});if(e.ok){const o=await e.json();n.success("✅ Grup oluşturuldu!"),b(o),a()}else n.error("❌ Grup oluşturulamadı")}catch(e){console.error(e),n.error("❌ Hata oluştu: "+e.message)}finally{d(!1)}};return React.createElement("div",{style:r.overlay,onClick:a},React.createElement("div",{style:r.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:r.header},React.createElement("h3",null,"Grup Oluştur"),React.createElement("button",{onClick:a,style:r.closeBtn},React.createElement(f,null))),React.createElement("div",{style:r.body},React.createElement("p",{style:{color:"#b9bbbe",marginBottom:15}},"Gruba eklemek istediğin arkadaşlarını seç (",t.length,")"),React.createElement("div",{style:r.friendList},s.map(e=>React.createElement("div",{key:e,onClick:()=>m(e),style:{...r.friendItem,backgroundColor:t.includes(e)?"rgba(88, 101, 242, 0.3)":"#2f3136",borderColor:t.includes(e)?"#5865f2":"transparent"}},React.createElement("span",{style:{color:"white"}},e),t.includes(e)?React.createElement(x,{color:"#5865f2"}):React.createElement(h,{color:"#b9bbbe"}))),s.length===0&&React.createElement("p",{style:{color:"#72767d"}},"Listenizde arkadaş yok.")),React.createElement("button",{onClick:y,style:r.createBtn,disabled:i||t.length<2},i?"Oluşturuluyor...":"Grup DM Oluştur"))))},r={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden"},header:{padding:"15px 20px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",color:"white",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em"},body:{padding:"20px"},friendList:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},friendItem:{padding:"10px",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",border:"1px solid transparent"},createBtn:{width:"100%",padding:"10px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",opacity:.9}};export{w as default};
