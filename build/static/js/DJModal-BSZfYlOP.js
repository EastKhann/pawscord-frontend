const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/media-vendor-CxFPycob.js","static/js/react-core-Djgtqrmb.js"])))=>i.map(i=>d[i]);
var j=Object.defineProperty;var o=(a,i)=>j(a,"name",{value:i,configurable:!0});import{_ as v}from"./media-vendor-CxFPycob.js";import{a as k,r as s,j as e}from"./react-core-Djgtqrmb.js";import{a as w,an as S,H as _,aK as E}from"./icons-vendor-BMXAt4pj.js";const q=s.lazy(()=>v(()=>import("./media-vendor-CxFPycob.js").then(a=>a.i),__vite__mapDeps([0,1]))),B=o(({onClose:a,ws:i,roomSlug:L})=>{const[d,c]=s.useState([]),[f,p]=s.useState(""),[u,x]=s.useState(""),[g,y]=s.useState(!1),m=o(()=>{if(!u)return;const t=[...d,u];c(t),x(""),h("queue_update",{queue:t})},"addToQueue"),b=o(()=>{if(d.length>0){const t=d[0],n=d.slice(1);p(t),c(n),y(!0),h("play_track",{url:t,queue:n})}},"playNext"),h=o((t,n)=>{i.current?.readyState===WebSocket.OPEN&&i.current.send(JSON.stringify({type:"media_sync",action:t,payload:n}))},"sendSignal");return s.useEffect(()=>{const t=o(n=>{const l=JSON.parse(n.data);l.type==="media_sync"&&(l.action==="queue_update"&&c(l.payload.queue),l.action==="play_track"&&(p(l.payload.url),c(l.payload.queue),y(!0)))},"handleMessage");return i.current?.addEventListener("message",t),()=>i.current?.removeEventListener("message",t)},[i]),s.useEffect(()=>{const t=o(n=>{n.key==="Escape"&&a()},"handleEsc");return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[a]),e.jsx("div",{style:r.overlay,onClick:a,children:e.jsxs("div",{style:r.modal,onClick:o(t=>t.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:r.header,children:[e.jsx("h3",{children:"ðŸŽµ DJ OdasÄ±"}),e.jsx("button",{onClick:a,style:r.closeBtn,children:e.jsx(w,{})})]}),e.jsx("div",{style:r.playerWrapper,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{style:{color:"#fff",padding:"20px",textAlign:"center"},children:"Loading player..."}),children:e.jsx(q,{url:f,playing:g,controls:!0,width:"100%",height:"200px"})})}),e.jsxs("div",{style:r.controls,children:[e.jsx("input",{value:u,onChange:o(t=>x(t.target.value),"onChange"),placeholder:"YouTube ÅžarkÄ± Linki...",style:r.input}),e.jsx("button",{onClick:m,style:r.addBtn,children:e.jsx(S,{})}),e.jsxs("button",{onClick:b,style:r.nextBtn,children:[e.jsx(_,{})," SÄ±radaki"]})]}),e.jsxs("div",{style:r.queueList,children:[e.jsxs("h4",{children:["SÄ±radakiler (",d.length,")"]}),d.map((t,n)=>e.jsxs("div",{style:r.queueItem,children:[e.jsx(E,{color:"#ccc"})," ",t]},n))]})]})})},"DJModal"),r={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{background:"#2b2d31",width:"500px",borderRadius:"12px",padding:"20px"},header:{display:"flex",justifyContent:"space-between",color:"white",marginBottom:20},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.2em",cursor:"pointer"},playerWrapper:{marginBottom:20,borderRadius:"8px",overflow:"hidden"},controls:{display:"flex",gap:10,marginBottom:20},input:{flex:1,padding:8,borderRadius:4,border:"1px solid #444",background:"#202225",color:"white"},addBtn:{padding:"8px 12px",background:"#5865f2",color:"white",border:"none",borderRadius:4,cursor:"pointer"},nextBtn:{padding:"8px 12px",background:"#23a559",color:"white",border:"none",borderRadius:4,cursor:"pointer"},queueList:{maxHeight:200,overflowY:"auto",color:"#ccc"},queueItem:{padding:"8px",borderBottom:"1px solid #444",fontSize:"0.9em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},O=k.memo(B);export{O as default};
