import{r as l,n as e}from"./react-core-CvG1duuD.js";import{T as x,E as _,V as G,U as c,au as y,cx as f,bD as h,j as V,as as H,x as W,aU as A,cy as M,bz as Y,ar as E,u as K,v as U,aF as $,aw as O}from"./icons-vendor-DhG1XKwU.js";import"./editor-vendor-D9c4a6XZ.js";const Q=({fetchWithAuth:j,apiBaseUrl:b,currentUser:N})=>{const[a,k]=l.useState({weekly:[],daily:[],special:[]}),[o,v]=l.useState({totalPoints:0,weeklyPoints:0,streak:0,completedChallenges:0,rank:1,rewards:[]}),[S,w]=l.useState(!0),[d,u]=l.useState("weekly"),[g,I]=l.useState({days:0,hours:0,minutes:0}),C=l.useCallback(async()=>{w(!0);try{const t=await j(`${b}/challenges/`);if(t.ok){const r=await t.json();k(r.challenges),v(r.userProgress)}else k({weekly:[{id:1,title:"Sosyal Kelebek",description:"50 mesaj gÃ¶nder",icon:"comments",type:"messages",target:50,current:32,points:100,reward:{type:"badge",name:"KonuÅŸkan"},difficulty:"easy",status:"in_progress"},{id:2,title:"Ses UstasÄ±",description:"2 saat sesli sohbette kal",icon:"microphone",type:"voice_time",target:120,current:85,points:200,reward:{type:"coins",amount:500},difficulty:"medium",status:"in_progress"},{id:3,title:"Topluluk YÄ±ldÄ±zÄ±",description:"10 farklÄ± sunucuda aktif ol",icon:"users",type:"servers_active",target:10,current:10,points:300,reward:{type:"badge",name:"YÄ±ldÄ±z"},difficulty:"hard",status:"completed"},{id:4,title:"Oyun Maratonu",description:"5 oyun aktivitesi baÅŸlat",icon:"gamepad",type:"games_played",target:5,current:2,points:150,reward:{type:"xp",amount:1e3},difficulty:"medium",status:"in_progress"},{id:5,title:"Kalp DaÄŸÄ±tÄ±cÄ±",description:"25 mesaja tepki ver",icon:"heart",type:"reactions",target:25,current:0,points:75,reward:{type:"emoji",name:"â¤ï¸â€ðŸ”¥"},difficulty:"easy",status:"not_started"}],daily:[{id:101,title:"GÃ¼nlÃ¼k Selamlama",description:"Ä°lk mesajÄ±nÄ± gÃ¶nder",icon:"comments",target:1,current:1,points:25,status:"completed"},{id:102,title:"Sesli KatÄ±lÄ±m",description:"Bir sesli kanala katÄ±l",icon:"microphone",target:1,current:0,points:25,status:"not_started"},{id:103,title:"Tepki Ver",description:"5 mesaja emoji tepkisi ver",icon:"heart",target:5,current:3,points:25,status:"in_progress"}],special:[{id:201,title:"Yeni YÄ±l Ã–zel",description:"Yeni yÄ±l kutlamasÄ±na katÄ±l",icon:"gift",target:1,current:0,points:500,reward:{type:"special_badge",name:"2026 YÄ±ldÄ±zÄ±"},endsAt:"2026-01-31T23:59:59",status:"locked"}]}),v({totalPoints:2450,weeklyPoints:625,streak:7,completedChallenges:23,rank:156,rewards:[{type:"badge",name:"KonuÅŸkan",earnedAt:"2026-01-20"},{type:"badge",name:"Yeni BaÅŸlayan",earnedAt:"2026-01-15"}]})}catch{}finally{w(!1)}},[j,b]);l.useEffect(()=>{C()},[C]),l.useEffect(()=>{const t=()=>{const n=new Date,i=new Date;i.setDate(n.getDate()+(7-n.getDay())),i.setHours(23,59,59,999);const p=i-n,L=Math.floor(p/(1e3*60*60*24)),P=Math.floor(p%(1e3*60*60*24)/(1e3*60*60)),D=Math.floor(p%(1e3*60*60)/(1e3*60));I({days:L,hours:P,minutes:D})};t();const r=setInterval(t,6e4);return()=>clearInterval(r)},[]);const F=t=>{const n={comments:$,microphone:U,users:K,gamepad:E,heart:Y,share:M,music:A,video:W,gift:h}[t]||c;return e.jsx(n,{})},z=t=>{switch(t){case"easy":return"#43b581";case"medium":return"#faa61a";case"hard":return"#f04747";default:return"#72767d"}},R=t=>Array(t==="easy"?1:t==="medium"?2:3).fill(0).map((n,i)=>e.jsx(c,{size:10,color:z(t)},i)),B=t=>{if(!t)return null;switch(t.type){case"badge":return e.jsx(y,{color:"#faa61a"});case"coins":return e.jsx(O,{color:"#f1c40f"});case"xp":return e.jsx(c,{color:"#5865f2"});case"emoji":return e.jsx("span",{children:t.name});case"special_badge":return e.jsx(f,{color:"#e91e63"});default:return e.jsx(h,{color:"#43b581"})}},T=t=>{if(!t)return"";switch(t.type){case"badge":return t.name;case"coins":return`${t.amount} Coin`;case"xp":return`${t.amount} XP`;case"emoji":return"Ã–zel Emoji";case"special_badge":return t.name;default:return"Ã–dÃ¼l"}},m=(t,r=!1)=>{const n=t.current/t.target*100,i=t.status==="completed",p=t.status==="locked";return e.jsxs("div",{style:{...s.challengeCard,opacity:i?.7:1,backgroundColor:i?"#202225":"#2f3136"},children:[e.jsx("div",{style:s.challengeIcon,children:p?e.jsx(V,{size:20,color:"#72767d"}):i?e.jsx(H,{size:20,color:"#43b581"}):e.jsx("span",{style:{color:z(t.difficulty)},children:F(t.icon)})}),e.jsxs("div",{style:s.challengeContent,children:[e.jsxs("div",{style:s.challengeHeader,children:[e.jsx("h4",{style:s.challengeTitle,children:t.title}),!r&&t.difficulty&&e.jsx("div",{style:s.difficultyStars,children:R(t.difficulty)})]}),e.jsx("p",{style:s.challengeDescription,children:t.description}),e.jsxs("div",{style:s.progressContainer,children:[e.jsx("div",{style:s.progressBar,children:e.jsx("div",{style:{...s.progressFill,width:`${Math.min(n,100)}%`,backgroundColor:i?"#43b581":"#5865f2"}})}),e.jsxs("span",{style:s.progressText,children:[t.current,"/",t.target]})]})]}),e.jsxs("div",{style:s.challengeReward,children:[e.jsxs("div",{style:s.pointsBadge,children:[e.jsx(c,{size:10,color:"#faa61a"}),e.jsx("span",{children:t.points})]}),t.reward&&e.jsxs("div",{style:s.rewardBadge,children:[B(t.reward),e.jsx("span",{children:T(t.reward)})]})]})]},t.id)};return S?e.jsx("div",{style:s.container,children:e.jsxs("div",{style:s.loading,children:[e.jsx(x,{className:"pulse",size:32,color:"#faa61a"}),e.jsx("span",{children:"GÃ¶revler yÃ¼kleniyor..."})]})}):e.jsxs("div",{style:s.container,children:[e.jsxs("div",{style:s.header,children:[e.jsxs("div",{style:s.headerLeft,children:[e.jsx(x,{size:24,color:"#faa61a"}),e.jsxs("div",{children:[e.jsx("h2",{style:s.title,children:"HaftalÄ±k GÃ¶revler"}),e.jsx("p",{style:s.subtitle,children:"GÃ¶revleri tamamla, Ã¶dÃ¼ller kazan!"})]})]}),e.jsxs("div",{style:s.timer,children:[e.jsx(_,{size:14,color:"#72767d"}),e.jsxs("span",{children:[g.days,"g ",g.hours,"s ",g.minutes,"d kaldÄ±"]})]})]}),e.jsxs("div",{style:s.statsGrid,children:[e.jsxs("div",{style:s.statCard,children:[e.jsx(G,{size:20,color:"#f04747"}),e.jsxs("div",{style:s.statInfo,children:[e.jsx("span",{style:s.statValue,children:o.streak}),e.jsx("span",{style:s.statLabel,children:"GÃ¼nlÃ¼k Seri"})]})]}),e.jsxs("div",{style:s.statCard,children:[e.jsx(c,{size:20,color:"#faa61a"}),e.jsxs("div",{style:s.statInfo,children:[e.jsx("span",{style:s.statValue,children:o.weeklyPoints}),e.jsx("span",{style:s.statLabel,children:"HaftalÄ±k Puan"})]})]}),e.jsxs("div",{style:s.statCard,children:[e.jsx(x,{size:20,color:"#5865f2"}),e.jsxs("div",{style:s.statInfo,children:[e.jsxs("span",{style:s.statValue,children:["#",o.rank]}),e.jsx("span",{style:s.statLabel,children:"SÄ±ralama"})]})]}),e.jsxs("div",{style:s.statCard,children:[e.jsx(y,{size:20,color:"#43b581"}),e.jsxs("div",{style:s.statInfo,children:[e.jsx("span",{style:s.statValue,children:o.completedChallenges}),e.jsx("span",{style:s.statLabel,children:"Tamamlanan"})]})]})]}),e.jsxs("div",{style:s.tabs,children:[e.jsxs("button",{style:{...s.tab,...d==="weekly"?s.tabActive:{}},onClick:()=>u("weekly"),children:[e.jsx(x,{size:14}),"HaftalÄ±k (",a.weekly.length,")"]}),e.jsxs("button",{style:{...s.tab,...d==="daily"?s.tabActive:{}},onClick:()=>u("daily"),children:[e.jsx(c,{size:14}),"GÃ¼nlÃ¼k (",a.daily.length,")"]}),e.jsxs("button",{style:{...s.tab,...d==="special"?s.tabActive:{}},onClick:()=>u("special"),children:[e.jsx(f,{size:14}),"Ã–zel (",a.special.length,")"]})]}),e.jsxs("div",{style:s.challengesList,children:[d==="weekly"&&a.weekly.map(t=>m(t)),d==="daily"&&a.daily.map(t=>m(t,!0)),d==="special"&&a.special.map(t=>m(t))]}),o.rewards.length>0&&e.jsxs("div",{style:s.rewardsSection,children:[e.jsxs("h3",{style:s.rewardsSectionTitle,children:[e.jsx(h,{size:14})," KazanÄ±lan Ã–dÃ¼ller"]}),e.jsx("div",{style:s.rewardsList,children:o.rewards.map((t,r)=>e.jsxs("div",{style:s.earnedReward,children:[e.jsx(y,{size:16,color:"#faa61a"}),e.jsx("span",{children:t.name})]},r))})]}),e.jsxs("div",{style:s.summaryCard,children:[e.jsxs("div",{style:s.summaryHeader,children:[e.jsx(f,{size:16,color:"#e91e63"}),e.jsx("span",{children:"Bu Hafta"})]}),e.jsxs("div",{style:s.summaryStats,children:[e.jsxs("div",{style:s.summaryItem,children:[e.jsxs("span",{style:s.summaryValue,children:[a.weekly.filter(t=>t.status==="completed").length,"/",a.weekly.length]}),e.jsx("span",{style:s.summaryLabel,children:"GÃ¶rev"})]}),e.jsxs("div",{style:s.summaryItem,children:[e.jsx("span",{style:s.summaryValue,children:o.weeklyPoints}),e.jsx("span",{style:s.summaryLabel,children:"Puan"})]}),e.jsxs("div",{style:s.summaryItem,children:[e.jsxs("span",{style:s.summaryValue,children:[Math.round(a.weekly.filter(t=>t.status==="completed").length/a.weekly.length*100),"%"]}),e.jsx("span",{style:s.summaryLabel,children:"Ä°lerleme"})]})]}),e.jsx("div",{style:s.totalProgressBar,children:e.jsx("div",{style:{...s.totalProgressFill,width:`${a.weekly.filter(t=>t.status==="completed").length/a.weekly.length*100}%`}})})]})]})},s={container:{backgroundColor:"#36393f",borderRadius:"8px",padding:"20px",color:"#dcddde"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"60px",color:"#b9bbbe"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},title:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff"},subtitle:{margin:"4px 0 0",fontSize:"13px",color:"#72767d"},timer:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",backgroundColor:"#2f3136",borderRadius:"4px",fontSize:"13px",color:"#b9bbbe"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",marginBottom:"20px"},statCard:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#2f3136",borderRadius:"8px"},statInfo:{display:"flex",flexDirection:"column"},statValue:{fontSize:"20px",fontWeight:"700",color:"#fff"},statLabel:{fontSize:"11px",color:"#72767d",textTransform:"uppercase"},tabs:{display:"flex",gap:"8px",marginBottom:"16px",borderBottom:"1px solid #40444b",paddingBottom:"12px"},tab:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"transparent",border:"none",borderRadius:"4px",color:"#72767d",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},tabActive:{backgroundColor:"#5865f2",color:"#fff"},challengesList:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px"},challengeCard:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",backgroundColor:"#2f3136",borderRadius:"8px",transition:"transform 0.2s"},challengeIcon:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#202225",borderRadius:"12px",fontSize:"20px"},challengeContent:{flex:1},challengeHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},challengeTitle:{margin:0,fontSize:"15px",fontWeight:"600",color:"#fff"},difficultyStars:{display:"flex",gap:"2px"},challengeDescription:{margin:"0 0 8px",fontSize:"13px",color:"#b9bbbe"},progressContainer:{display:"flex",alignItems:"center",gap:"8px"},progressBar:{flex:1,height:"6px",backgroundColor:"#202225",borderRadius:"3px",overflow:"hidden"},progressFill:{height:"100%",backgroundColor:"#5865f2",borderRadius:"3px",transition:"width 0.3s"},progressText:{fontSize:"12px",color:"#72767d",minWidth:"45px",textAlign:"right"},challengeReward:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px"},pointsBadge:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"rgba(250, 166, 26, 0.2)",borderRadius:"12px",fontSize:"12px",color:"#faa61a",fontWeight:"600"},rewardBadge:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"rgba(88, 101, 242, 0.2)",borderRadius:"12px",fontSize:"11px",color:"#dcddde"},rewardsSection:{marginBottom:"20px"},rewardsSectionTitle:{display:"flex",alignItems:"center",gap:"8px",margin:"0 0 12px",fontSize:"14px",fontWeight:"600",color:"#fff"},rewardsList:{display:"flex",flexWrap:"wrap",gap:"8px"},earnedReward:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",backgroundColor:"#2f3136",borderRadius:"16px",fontSize:"13px",color:"#dcddde"},summaryCard:{padding:"20px",backgroundColor:"linear-gradient(135deg, #5865f2 0%, #7289da 100%)",background:"linear-gradient(135deg, rgba(88, 101, 242, 0.3) 0%, rgba(114, 137, 218, 0.3) 100%)",borderRadius:"12px",border:"1px solid rgba(88, 101, 242, 0.5)"},summaryHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",fontSize:"14px",fontWeight:"600",color:"#fff"},summaryStats:{display:"flex",justifyContent:"space-around",marginBottom:"16px"},summaryItem:{display:"flex",flexDirection:"column",alignItems:"center"},summaryValue:{fontSize:"24px",fontWeight:"700",color:"#fff"},summaryLabel:{fontSize:"11px",color:"#b9bbbe",textTransform:"uppercase"},totalProgressBar:{height:"8px",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",overflow:"hidden"},totalProgressFill:{height:"100%",backgroundColor:"#43b581",borderRadius:"4px",transition:"width 0.3s"}};export{Q as default};
