{"version":3,"file":"JoinLeaveLogsPanel-Dtt005vw.js","sources":["../../../src/components/JoinLeaveLogsPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { FaTimes, FaSignInAlt, FaSignOutAlt, FaDownload } from 'react-icons/fa';\nimport { toast } from '../utils/toast';\n\nconst JoinLeaveLogsPanel = ({ fetchWithAuth, apiBaseUrl, onClose, serverId }) => {\n    const [logs, setLogs] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [filter, setFilter] = useState('all'); // all, joins, leaves\n\n    useEffect(() => {\n        fetchLogs();\n    }, [serverId]);\n\n    const fetchLogs = async () => {\n        setLoading(true);\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/servers/${serverId}/logs/`);\n            const data = await response.json();\n            setLogs(data.logs || []);\n        } catch (error) {\n            toast.error('Failed to load join/leave logs');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const exportLogs = async () => {\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/servers/${serverId}/logs/export/`);\n            const blob = await response.blob();\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `join_leave_logs_${new Date().toISOString()}.csv`;\n            document.body.appendChild(a);\n            a.click();\n            a.remove();\n            toast.success('Logs exported successfully');\n        } catch (error) {\n            toast.error('Failed to export logs');\n        }\n    };\n\n    const filteredLogs = logs.filter(log => {\n        if (filter === 'all') return true;\n        return log.action === filter;\n    });\n\n    return (\n        <div style={styles.overlay}>\n            <div style={styles.modal}>\n                <div style={styles.header}>\n                    <div style={styles.headerLeft}>\n                        <FaSignInAlt style={{ marginRight: '10px', color: '#5865f2' }} />\n                        <h2 style={styles.title}>Join/Leave Logs</h2>\n                    </div>\n                    <button onClick={onClose} style={styles.closeButton}>\n                        <FaTimes />\n                    </button>\n                </div>\n\n                <div style={styles.filters}>\n                    <button onClick={() => setFilter('all')} style={{ ...styles.filterButton, ...(filter === 'all' && styles.filterButtonActive) }}>\n                        All ({logs.length})\n                    </button>\n                    <button onClick={() => setFilter('joined')} style={{ ...styles.filterButton, ...(filter === 'joined' && styles.filterButtonActive) }}>\n                        ðŸŸ¢ Joins ({logs.filter(l => l.action === 'joined').length})\n                    </button>\n                    <button onClick={() => setFilter('left')} style={{ ...styles.filterButton, ...(filter === 'left' && styles.filterButtonActive) }}>\n                        ðŸ”´ Leaves ({logs.filter(l => l.action === 'left').length})\n                    </button>\n                    <button onClick={exportLogs} style={styles.exportButton}>\n                        <FaDownload style={{ marginRight: '5px' }} />\n                        Export\n                    </button>\n                </div>\n\n                <div style={styles.content}>\n                    {loading ? (\n                        <div style={styles.loading}>Loading logs...</div>\n                    ) : filteredLogs.length === 0 ? (\n                        <div style={styles.empty}>No logs found</div>\n                    ) : (\n                        <div style={styles.logsList}>\n                            {filteredLogs.map((log, idx) => (\n                                <div key={idx} style={styles.logItem}>\n                                    <div style={styles.logIcon}>\n                                        {log.action === 'joined' ? (\n                                            <FaSignInAlt style={{ color: '#43b581' }} />\n                                        ) : (\n                                            <FaSignOutAlt style={{ color: '#f04747' }} />\n                                        )}\n                                    </div>\n                                    <div style={styles.logInfo}>\n                                        <div style={styles.logUser}>{log.user?.username || 'Unknown User'}</div>\n                                        <div style={styles.logAction}>\n                                            {log.action === 'joined' ? 'Joined the server' : 'Left the server'}\n                                        </div>\n                                        {log.invite_code && (\n                                            <div style={styles.logMeta}>via invite: {log.invite_code}</div>\n                                        )}\n                                    </div>\n                                    <div style={styles.logTime}>\n                                        {new Date(log.timestamp).toLocaleString()}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 999999,\n    },\n    modal: {\n        backgroundColor: '#1e1e1e',\n        borderRadius: '8px',\n        width: '90%',\n        maxWidth: '800px',\n        maxHeight: '90vh',\n        display: 'flex',\n        flexDirection: 'column',\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4)',\n    },\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '20px',\n        borderBottom: '1px solid #2c2f33',\n    },\n    headerLeft: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    title: {\n        margin: 0,\n        fontSize: '20px',\n        color: '#ffffff',\n    },\n    closeButton: {\n        background: 'none',\n        border: 'none',\n        color: '#99aab5',\n        cursor: 'pointer',\n        fontSize: '20px',\n        padding: '5px',\n    },\n    filters: {\n        display: 'flex',\n        gap: '10px',\n        padding: '15px 20px',\n        borderBottom: '1px solid #2c2f33',\n        flexWrap: 'wrap',\n    },\n    filterButton: {\n        padding: '8px 16px',\n        backgroundColor: '#2c2f33',\n        border: 'none',\n        borderRadius: '4px',\n        color: '#ffffff',\n        cursor: 'pointer',\n        fontSize: '14px',\n    },\n    filterButtonActive: {\n        backgroundColor: '#5865f2',\n    },\n    exportButton: {\n        marginLeft: 'auto',\n        padding: '8px 16px',\n        backgroundColor: '#43b581',\n        border: 'none',\n        borderRadius: '4px',\n        color: '#ffffff',\n        cursor: 'pointer',\n        fontSize: '14px',\n        display: 'flex',\n        alignItems: 'center',\n    },\n    content: {\n        padding: '20px',\n        overflowY: 'auto',\n        flex: 1,\n    },\n    loading: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '40px',\n    },\n    empty: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '40px',\n    },\n    logsList: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '12px',\n    },\n    logItem: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '6px',\n        padding: '16px',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '16px',\n    },\n    logIcon: {\n        fontSize: '20px',\n    },\n    logInfo: {\n        flex: 1,\n    },\n    logUser: {\n        fontSize: '16px',\n        fontWeight: '600',\n        color: '#ffffff',\n        marginBottom: '4px',\n    },\n    logAction: {\n        fontSize: '14px',\n        color: '#dcddde',\n        marginBottom: '2px',\n    },\n    logMeta: {\n        fontSize: '12px',\n        color: '#99aab5',\n    },\n    logTime: {\n        fontSize: '13px',\n        color: '#99aab5',\n    },\n};\n\nexport default JoinLeaveLogsPanel;\n"],"names":["useState","useEffect","jsx","jsxs"],"mappings":";;;;;;;;;;AAIA,MAAM,qBAAqB,wBAAC,EAAE,eAAe,YAAY,SAAS,eAAe;AAC7E,QAAM,CAAC,MAAM,OAAO,IAAIA,aAAAA,SAAS,CAAA,CAAE;AACnC,QAAM,CAAC,SAAS,UAAU,IAAIA,aAAAA,SAAS,KAAK;AAC5C,QAAM,CAAC,QAAQ,SAAS,IAAIA,aAAAA,SAAS,KAAK;AAE1CC,eAAAA,UAAU,MAAM;AACZ,cAAA;AAAA,EACJ,GAAG,CAAC,QAAQ,CAAC;AAEb,QAAM,YAAY,mCAAY;AAC1B,eAAW,IAAI;AACf,QAAI;AACA,YAAM,WAAW,MAAM,cAAc,GAAG,UAAU,YAAY,QAAQ,QAAQ;AAC9E,YAAM,OAAO,MAAM,SAAS,KAAA;AAC5B,cAAQ,KAAK,QAAQ,EAAE;AAAA,IAC3B,SAAS,OAAO;AACZ,YAAM,MAAM,gCAAgC;AAAA,IAChD,UAAA;AACI,iBAAW,KAAK;AAAA,IACpB;AAAA,EACJ,GAXkB;AAalB,QAAM,aAAa,mCAAY;AAC3B,QAAI;AACA,YAAM,WAAW,MAAM,cAAc,GAAG,UAAU,YAAY,QAAQ,eAAe;AACrF,YAAM,OAAO,MAAM,SAAS,KAAA;AAC5B,YAAM,MAAM,OAAO,IAAI,gBAAgB,IAAI;AAC3C,YAAM,IAAI,SAAS,cAAc,GAAG;AACpC,QAAE,OAAO;AACT,QAAE,WAAW,oBAAmB,oBAAI,QAAO,aAAa;AACxD,eAAS,KAAK,YAAY,CAAC;AAC3B,QAAE,MAAA;AACF,QAAE,OAAA;AACF,YAAM,QAAQ,4BAA4B;AAAA,IAC9C,SAAS,OAAO;AACZ,YAAM,MAAM,uBAAuB;AAAA,IACvC;AAAA,EACJ,GAfmB;AAiBnB,QAAM,eAAe,KAAK,OAAO,CAAA,QAAO;AACpC,QAAI,WAAW,MAAO,QAAO;AAC7B,WAAO,IAAI,WAAW;AAAA,EAC1B,CAAC;AAED,SACIC,kCAAAA,IAAC,SAAI,OAAO,OAAO,SACf,UAAAC,kCAAAA,KAAC,OAAA,EAAI,OAAO,OAAO,OACf,UAAA;AAAA,IAAAA,kCAAAA,KAAC,OAAA,EAAI,OAAO,OAAO,QACf,UAAA;AAAA,MAAAA,kCAAAA,KAAC,OAAA,EAAI,OAAO,OAAO,YACf,UAAA;AAAA,QAAAD,sCAAC,eAAY,OAAO,EAAE,aAAa,QAAQ,OAAO,aAAa;AAAA,QAC/DA,kCAAAA,IAAC,MAAA,EAAG,OAAO,OAAO,OAAO,UAAA,kBAAA,CAAe;AAAA,MAAA,GAC5C;AAAA,MACAA,kCAAAA,IAAC,YAAO,SAAS,SAAS,OAAO,OAAO,aACpC,UAAAA,kCAAAA,IAAC,SAAA,CAAA,CAAQ,EAAA,CACb;AAAA,IAAA,GACJ;AAAA,IAEAC,kCAAAA,KAAC,OAAA,EAAI,OAAO,OAAO,SACf,UAAA;AAAA,MAAAA,kCAAAA,KAAC,YAAO,SAAS,6BAAM,UAAU,KAAK,GAArB,YAAwB,OAAO,EAAE,GAAG,OAAO,cAAc,GAAI,WAAW,SAAS,OAAO,sBAAuB,UAAA;AAAA,QAAA;AAAA,QACtH,KAAK;AAAA,QAAO;AAAA,MAAA,GACtB;AAAA,6CACC,UAAA,EAAO,SAAS,6BAAM,UAAU,QAAQ,GAAxB,YAA2B,OAAO,EAAE,GAAG,OAAO,cAAc,GAAI,WAAW,YAAY,OAAO,sBAAuB,UAAA;AAAA,QAAA;AAAA,QACvH,KAAK,OAAO,CAAA,MAAK,EAAE,WAAW,QAAQ,EAAE;AAAA,QAAO;AAAA,MAAA,GAC9D;AAAA,6CACC,UAAA,EAAO,SAAS,6BAAM,UAAU,MAAM,GAAtB,YAAyB,OAAO,EAAE,GAAG,OAAO,cAAc,GAAI,WAAW,UAAU,OAAO,sBAAuB,UAAA;AAAA,QAAA;AAAA,QAClH,KAAK,OAAO,CAAA,MAAK,EAAE,WAAW,MAAM,EAAE;AAAA,QAAO;AAAA,MAAA,GAC7D;AAAA,6CACC,UAAA,EAAO,SAAS,YAAY,OAAO,OAAO,cACvC,UAAA;AAAA,QAAAD,kCAAAA,IAAC,YAAA,EAAW,OAAO,EAAE,aAAa,SAAS;AAAA,QAAE;AAAA,MAAA,EAAA,CAEjD;AAAA,IAAA,GACJ;AAAA,0CAEC,OAAA,EAAI,OAAO,OAAO,SACd,oBACGA,sCAAC,OAAA,EAAI,OAAO,OAAO,SAAS,UAAA,mBAAe,IAC3C,aAAa,WAAW,IACxBA,sCAAC,OAAA,EAAI,OAAO,OAAO,OAAO,UAAA,iBAAa,IAEvCA,sCAAC,OAAA,EAAI,OAAO,OAAO,UACd,UAAA,aAAa,IAAI,CAAC,KAAK,+CACnB,OAAA,EAAc,OAAO,OAAO,SACzB,UAAA;AAAA,MAAAA,kCAAAA,IAAC,OAAA,EAAI,OAAO,OAAO,SACd,cAAI,WAAW,WACZA,kCAAAA,IAAC,aAAA,EAAY,OAAO,EAAE,OAAO,YAAU,CAAG,IAE1CA,kCAAAA,IAAC,cAAA,EAAa,OAAO,EAAE,OAAO,UAAA,EAAU,CAAG,EAAA,CAEnD;AAAA,MACAC,kCAAAA,KAAC,OAAA,EAAI,OAAO,OAAO,SACf,UAAA;AAAA,QAAAD,kCAAAA,IAAC,SAAI,OAAO,OAAO,SAAU,UAAA,IAAI,MAAM,YAAY,eAAA,CAAe;AAAA,QAClEA,kCAAAA,IAAC,SAAI,OAAO,OAAO,WACd,UAAA,IAAI,WAAW,WAAW,sBAAsB,kBAAA,CACrD;AAAA,QACC,IAAI,eACDC,kCAAAA,KAAC,OAAA,EAAI,OAAO,OAAO,SAAS,UAAA;AAAA,UAAA;AAAA,UAAa,IAAI;AAAA,QAAA,EAAA,CAAY;AAAA,MAAA,GAEjE;AAAA,MACAD,kCAAAA,IAAC,OAAA,EAAI,OAAO,OAAO,SACd,UAAA,IAAI,KAAK,IAAI,SAAS,EAAE,eAAA,EAAe,CAC5C;AAAA,IAAA,KAnBM,GAoBV,CACH,EAAA,CACL,EAAA,CAER;AAAA,EAAA,EAAA,CACJ,EAAA,CACJ;AAER,GA7G2B;AA+G3B,MAAM,SAAS;AAAA,EACX,SAAS;AAAA,IACL,UAAU;AAAA,IACV,KAAK;AAAA,IACL,MAAM;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,iBAAiB;AAAA,IACjB,SAAS;AAAA,IACT,YAAY;AAAA,IACZ,gBAAgB;AAAA,IAChB,QAAQ;AAAA,EAAA;AAAA,EAEZ,OAAO;AAAA,IACH,iBAAiB;AAAA,IACjB,cAAc;AAAA,IACd,OAAO;AAAA,IACP,UAAU;AAAA,IACV,WAAW;AAAA,IACX,SAAS;AAAA,IACT,eAAe;AAAA,IACf,WAAW;AAAA,EAAA;AAAA,EAEf,QAAQ;AAAA,IACJ,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,cAAc;AAAA,EAAA;AAAA,EAElB,YAAY;AAAA,IACR,SAAS;AAAA,IACT,YAAY;AAAA,EAAA;AAAA,EAEhB,OAAO;AAAA,IACH,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,OAAO;AAAA,EAAA;AAAA,EAEX,aAAa;AAAA,IACT,YAAY;AAAA,IACZ,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,SAAS;AAAA,EAAA;AAAA,EAEb,SAAS;AAAA,IACL,SAAS;AAAA,IACT,KAAK;AAAA,IACL,SAAS;AAAA,IACT,cAAc;AAAA,IACd,UAAU;AAAA,EAAA;AAAA,EAEd,cAAc;AAAA,IACV,SAAS;AAAA,IACT,iBAAiB;AAAA,IACjB,QAAQ;AAAA,IACR,cAAc;AAAA,IACd,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,UAAU;AAAA,EAAA;AAAA,EAEd,oBAAoB;AAAA,IAChB,iBAAiB;AAAA,EAAA;AAAA,EAErB,cAAc;AAAA,IACV,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,iBAAiB;AAAA,IACjB,QAAQ;AAAA,IACR,cAAc;AAAA,IACd,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,SAAS;AAAA,IACT,YAAY;AAAA,EAAA;AAAA,EAEhB,SAAS;AAAA,IACL,SAAS;AAAA,IACT,WAAW;AAAA,IACX,MAAM;AAAA,EAAA;AAAA,EAEV,SAAS;AAAA,IACL,WAAW;AAAA,IACX,OAAO;AAAA,IACP,SAAS;AAAA,EAAA;AAAA,EAEb,OAAO;AAAA,IACH,WAAW;AAAA,IACX,OAAO;AAAA,IACP,SAAS;AAAA,EAAA;AAAA,EAEb,UAAU;AAAA,IACN,SAAS;AAAA,IACT,eAAe;AAAA,IACf,KAAK;AAAA,EAAA;AAAA,EAET,SAAS;AAAA,IACL,iBAAiB;AAAA,IACjB,cAAc;AAAA,IACd,SAAS;AAAA,IACT,SAAS;AAAA,IACT,YAAY;AAAA,IACZ,KAAK;AAAA,EAAA;AAAA,EAET,SAAS;AAAA,IACL,UAAU;AAAA,EAAA;AAAA,EAEd,SAAS;AAAA,IACL,MAAM;AAAA,EAAA;AAAA,EAEV,SAAS;AAAA,IACL,UAAU;AAAA,IACV,YAAY;AAAA,IACZ,OAAO;AAAA,IACP,cAAc;AAAA,EAAA;AAAA,EAElB,WAAW;AAAA,IACP,UAAU;AAAA,IACV,OAAO;AAAA,IACP,cAAc;AAAA,EAAA;AAAA,EAElB,SAAS;AAAA,IACL,UAAU;AAAA,IACV,OAAO;AAAA,EAAA;AAAA,EAEX,SAAS;AAAA,IACL,UAAU;AAAA,IACV,OAAO;AAAA,EAAA;AAEf;"}