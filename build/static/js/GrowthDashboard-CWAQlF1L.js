import{r as m,d as e}from"./react-core-DrOm_csO.js";import{a as K}from"./index-D5GkNzM3.js";import{R as i,L as $,C as h,X as N,Y as g,T as d,a as f,b as y,B as k,c as s,P as C,d as A,e as U}from"./recharts-B9Pb22s1.js";function T(){const[r,R]=m.useState([]),[l,F]=m.useState({}),[D,L]=m.useState(!0);m.useEffect(()=>{o();const t=setInterval(o,300*1e3);return()=>clearInterval(t)},[]);const o=async()=>{try{const t=await K.get("/api/growth/dashboard/");R(t.data.metrics),F(t.data.totals)}catch(t){console.error("Failed to load dashboard:",t)}finally{L(!1)}};if(D)return e.createElement("div",{className:"loading"},"Loading growth dashboard...");const S=r.reduce((t,a)=>(Object.entries(a.sources||{}).forEach(([c,v])=>{t[c]=(t[c]||0)+v}),t),{}),b=Object.entries(S).map(([t,a])=>({name:t.charAt(0).toUpperCase()+t.slice(1),value:a})),p=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],w=r.length>0?(r.reduce((t,a)=>t+a.active_users,0)/r.length).toFixed(0):0,E=r.slice(-7).reduce((t,a)=>t+a.new_users,0),n=r.slice(-14,-7).reduce((t,a)=>t+a.new_users,0),u=n>0?((E-n)/n*100).toFixed(1):0;return e.createElement("div",{className:"growth-dashboard"},e.createElement("div",{className:"dashboard-header"},e.createElement("h1",null,"ðŸ“ˆ Growth Dashboard"),e.createElement("button",{onClick:o,className:"refresh-btn"},"ðŸ”„ Refresh")),e.createElement("div",{className:"metrics-grid"},e.createElement("div",{className:"metric-card"},e.createElement("div",{className:"metric-icon"},"ðŸ‘¥"),e.createElement("div",{className:"metric-value"},l.users?.toLocaleString()),e.createElement("div",{className:"metric-label"},"Total Users"),e.createElement("div",{className:"metric-change positive"},"+",E," this week")),e.createElement("div",{className:"metric-card"},e.createElement("div",{className:"metric-icon"},"âš¡"),e.createElement("div",{className:"metric-value"},w),e.createElement("div",{className:"metric-label"},"Avg Daily Active"),e.createElement("div",{className:"metric-change"},(w/l.users*100).toFixed(1),"% rate")),e.createElement("div",{className:"metric-card"},e.createElement("div",{className:"metric-icon"},"ðŸ’°"),e.createElement("div",{className:"metric-value"},"$",l.revenue?.toLocaleString()),e.createElement("div",{className:"metric-label"},"Total Revenue"),e.createElement("div",{className:"metric-change positive"},"MRR: $",(l.revenue/12).toFixed(2))),e.createElement("div",{className:"metric-card"},e.createElement("div",{className:"metric-icon"},"ðŸ“§"),e.createElement("div",{className:"metric-value"},l.waitlist?.toLocaleString()),e.createElement("div",{className:"metric-label"},"Waitlist Signups"),e.createElement("div",{className:"metric-change"},(l.waitlist/(l.users||1)*100).toFixed(0),"% conversion"))),e.createElement("div",{className:"growth-rate-banner"},e.createElement("h3",null,"ðŸ“Š Week-over-Week Growth"),e.createElement("div",{className:`growth-percentage ${u>0?"positive":"negative"}`},u>0?"+":"",u,"%"),e.createElement("p",null,"Last week: ",E," users | Previous week: ",n," users")),e.createElement("div",{className:"charts-grid"},e.createElement("div",{className:"chart-card"},e.createElement("h3",null,"New Users (Last 14 Days)"),e.createElement(i,{width:"100%",height:300},e.createElement($,{data:r},e.createElement(h,{strokeDasharray:"3 3"}),e.createElement(N,{dataKey:"date"}),e.createElement(g,null),e.createElement(d,null),e.createElement(f,null),e.createElement(y,{type:"monotone",dataKey:"new_users",stroke:"#8884d8",strokeWidth:2,name:"New Users"}),e.createElement(y,{type:"monotone",dataKey:"active_users",stroke:"#82ca9d",strokeWidth:2,name:"Active Users"})))),e.createElement("div",{className:"chart-card"},e.createElement("h3",null,"Revenue & Premium Signups"),e.createElement(i,{width:"100%",height:300},e.createElement(k,{data:r},e.createElement(h,{strokeDasharray:"3 3"}),e.createElement(N,{dataKey:"date"}),e.createElement(g,null),e.createElement(d,null),e.createElement(f,null),e.createElement(s,{dataKey:"revenue",fill:"#82ca9d",name:"Revenue ($)"}),e.createElement(s,{dataKey:"premium",fill:"#ffc658",name:"Premium Signups"})))),e.createElement("div",{className:"chart-card"},e.createElement("h3",null,"Traffic Sources"),e.createElement(i,{width:"100%",height:300},e.createElement(C,null,e.createElement(A,{data:b,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,percent:a})=>`${t}: ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value"},b.map((t,a)=>e.createElement(U,{key:`cell-${a}`,fill:p[a%p.length]}))),e.createElement(d,null)))),e.createElement("div",{className:"chart-card"},e.createElement("h3",null,"Source Breakdown (Last 7 Days)"),e.createElement(i,{width:"100%",height:300},e.createElement(k,{data:r.slice(-7)},e.createElement(h,{strokeDasharray:"3 3"}),e.createElement(N,{dataKey:"date"}),e.createElement(g,null),e.createElement(d,null),e.createElement(f,null),e.createElement(s,{dataKey:"sources.producthunt",stackId:"a",fill:"#ff6384",name:"ProductHunt"}),e.createElement(s,{dataKey:"sources.reddit",stackId:"a",fill:"#36a2eb",name:"Reddit"}),e.createElement(s,{dataKey:"sources.hackernews",stackId:"a",fill:"#ffce56",name:"Hacker News"}),e.createElement(s,{dataKey:"sources.organic",stackId:"a",fill:"#4bc0c0",name:"Organic"}),e.createElement(s,{dataKey:"sources.referral",stackId:"a",fill:"#9966ff",name:"Referral"}),e.createElement(s,{dataKey:"sources.paid",stackId:"a",fill:"#ff9f40",name:"Paid Ads"}))))),e.createElement("div",{className:"stats-table-card"},e.createElement("h3",null,"ðŸ“… Daily Statistics"),e.createElement("table",{className:"stats-table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Date"),e.createElement("th",null,"New Users"),e.createElement("th",null,"Active Users"),e.createElement("th",null,"Premium"),e.createElement("th",null,"Revenue"),e.createElement("th",null,"Top Source"))),e.createElement("tbody",null,r.slice().reverse().map((t,a)=>{const c=Object.entries(t.sources||{}).sort((v,x)=>x[1]-v[1])[0];return e.createElement("tr",{key:a},e.createElement("td",null,t.date),e.createElement("td",{className:"number"},t.new_users),e.createElement("td",{className:"number"},t.active_users),e.createElement("td",{className:"number"},t.premium),e.createElement("td",{className:"number"},"$",t.revenue),e.createElement("td",null,c?c[0]:"N/A"))})))),e.createElement("div",{className:"goals-card"},e.createElement("h3",null,"ðŸŽ¯ Launch Goals (Jan 22 - Feb 5)"),e.createElement("div",{className:"goal-item"},e.createElement("div",{className:"goal-label"},"1000 Users"),e.createElement("div",{className:"progress-bar"},e.createElement("div",{className:"progress-fill",style:{width:`${Math.min(l.users/1e3*100,100)}%`}})),e.createElement("div",{className:"goal-value"},l.users," / 1000 (",(l.users/1e3*100).toFixed(1),"%)")),e.createElement("div",{className:"goal-item"},e.createElement("div",{className:"goal-label"},"$250 MRR"),e.createElement("div",{className:"progress-bar"},e.createElement("div",{className:"progress-fill",style:{width:`${Math.min(l.revenue/12/250*100,100)}%`}})),e.createElement("div",{className:"goal-value"},"$",(l.revenue/12).toFixed(2)," / $250")),e.createElement("div",{className:"goal-item"},e.createElement("div",{className:"goal-label"},"200 Waitlist"),e.createElement("div",{className:"progress-bar"},e.createElement("div",{className:"progress-fill",style:{width:`${Math.min(l.waitlist/200*100,100)}%`}})),e.createElement("div",{className:"goal-value"},l.waitlist," / 200 (",(l.waitlist/200*100).toFixed(1),"%)"))))}export{T as default};
