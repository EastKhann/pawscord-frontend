{"version":3,"file":"MessageThreads-DTDZ-u58.js","sources":["../../../src/components/MessageThreads.js"],"sourcesContent":["// frontend/src/components/MessageThreads.js\r\nimport { useState } from 'react';\r\nimport { FaTimes, FaComments, FaBell, FaBellSlash } from 'react-icons/fa';\r\nimport toast from '../utils/toast';\r\n\r\nconst MessageThreads = ({ messageId, onClose, fetchWithAuth, apiBaseUrl }) => {\r\n    const [threadMessage, setThreadMessage] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [subscribed, setSubscribed] = useState(false); // ðŸ†• Subscription state\r\n\r\n    // ðŸ†• Toggle subscription\r\n    const handleToggleSubscription = async () => {\r\n        try {\r\n            const endpoint = subscribed ? 'unsubscribe' : 'subscribe';\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/threads/${endpoint}/`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ thread_id: messageId })\r\n            });\r\n\r\n            if (res.ok) {\r\n                setSubscribed(!subscribed);\r\n            }\r\n        } catch (error) {\r\n            console.error('Subscription error:', error);\r\n        }\r\n    };\r\n\r\n    const handleSendThread = async () => {\r\n        if (!threadMessage.trim()) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetchWithAuth(`${apiBaseUrl}/threads/create/`, {\r\n                method: 'POST',\r\n                body: JSON.stringify({\r\n                    parent_message_id: messageId,\r\n                    content: threadMessage\r\n                })\r\n            });\r\n\r\n            if (res.ok) {\r\n                toast.success('âœ… Thread oluÅŸturuldu!');\r\n                setThreadMessage('');\r\n                onClose();\r\n            }\r\n        } catch (error) {\r\n            console.error('Thread error:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={styles.overlay} onClick={onClose}>\r\n            <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n                <div style={styles.header}>\r\n                    <h3 style={styles.title}>\r\n                        <FaComments /> Thread BaÅŸlat\r\n                    </h3>\r\n                    <button onClick={onClose} style={styles.closeButton}>\r\n                        <FaTimes />\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={styles.content}>\r\n                    {/* ðŸ†• Subscription Toggle */}\r\n                    <div style={{\r\n                        padding: '12px',\r\n                        backgroundColor: '#2f3136',\r\n                        borderRadius: '6px',\r\n                        marginBottom: '12px',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'space-between'\r\n                    }}>\r\n                        <span style={{ color: '#dcddde', fontSize: '14px' }}>\r\n                            {subscribed ? 'ðŸ”” Subscribed to notifications' : 'ðŸ”• Not subscribed'}\r\n                        </span>\r\n                        <button\r\n                            onClick={handleToggleSubscription}\r\n                            style={{\r\n                                padding: '6px 12px',\r\n                                backgroundColor: subscribed ? '#f04747' : '#43b581',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '4px',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '6px',\r\n                                fontSize: '13px',\r\n                                fontWeight: 'bold'\r\n                            }}\r\n                        >\r\n                            {subscribed ? <><FaBellSlash /> Unsubscribe</> : <><FaBell /> Subscribe</>}\r\n                        </button>\r\n                    </div>\r\n\r\n                    <textarea\r\n                        value={threadMessage}\r\n                        onChange={(e) => setThreadMessage(e.target.value)}\r\n                        placeholder=\"Thread mesajÄ±nÄ± yazÄ±n...\"\r\n                        style={styles.textarea}\r\n                    />\r\n                    <button\r\n                        onClick={handleSendThread}\r\n                        disabled={loading || !threadMessage.trim()}\r\n                        style={styles.sendButton}\r\n                    >\r\n                        {loading ? 'GÃ¶nderiliyor...' : 'ðŸ’¬ Thread GÃ¶nder'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 10000\r\n    },\r\n    modal: {\r\n        backgroundColor: '#2b2d31',\r\n        borderRadius: '8px',\r\n        width: '90%',\r\n        maxWidth: '500px'\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        padding: '20px',\r\n        borderBottom: '1px solid #40444b'\r\n    },\r\n    title: {\r\n        color: 'white',\r\n        margin: 0,\r\n        fontSize: '1.3em',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '8px'\r\n    },\r\n    closeButton: {\r\n        background: 'none',\r\n        border: 'none',\r\n        color: '#b9bbbe',\r\n        cursor: 'pointer',\r\n        fontSize: '1.3em'\r\n    },\r\n    content: {\r\n        padding: '20px'\r\n    },\r\n    textarea: {\r\n        width: '100%',\r\n        minHeight: '100px',\r\n        padding: '10px',\r\n        backgroundColor: '#40444b',\r\n        border: '1px solid #5865f2',\r\n        borderRadius: '4px',\r\n        color: 'white',\r\n        fontSize: '1em',\r\n        resize: 'vertical',\r\n        marginBottom: '15px'\r\n    },\r\n    sendButton: {\r\n        width: '100%',\r\n        padding: '12px',\r\n        backgroundColor: '#5865f2',\r\n        border: 'none',\r\n        borderRadius: '4px',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        cursor: 'pointer',\r\n        fontSize: '1em'\r\n    }\r\n};\r\n\r\nexport default MessageThreads;\r\n\r\n\r\n"],"names":["useState","jsxs","jsx","Fragment"],"mappings":"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"}