import{r as s,a0 as r,l as C,bq as E,aj as v,I as N,D as x,d0 as S,al as h,aX as F,bo as T,aD as w,d1 as A,a_ as j}from"./react-core-B6hadH-M.js";import{g as I}from"./index-D_6pZib5.js";const L=({serverId:P,channelId:o,onClose:c,onUseSuggestion:m,fetchWithAuth:p})=>{const[t,i]=s.useState(null),[b,d]=s.useState(!0),[n,l]=s.useState("replies"),[y,u]=s.useState(null),R=s.useCallback(async()=>{d(!0);try{const e=await p(`${I()}/channels/${o}/suggestions/`);if(e.ok){const a=await e.json();i(a)}else i({quick_replies:[{id:1,text:"That's a great idea! ðŸŽ‰",confidence:95,context:"Positive response"},{id:2,text:"I'll look into that and get back to you.",confidence:88,context:"Action commitment"},{id:3,text:"Thanks for sharing! Very helpful.",confidence:85,context:"Appreciation"},{id:4,text:"Could you elaborate on that?",confidence:82,context:"Clarification"},{id:5,text:"Let me check the documentation first.",confidence:78,context:"Investigation"}],trending_topics:[{topic:"Server Events",mentions:45,trend:"up"},{topic:"Gaming Night",mentions:38,trend:"up"},{topic:"Music Playlist",mentions:27,trend:"stable"},{topic:"New Members",mentions:23,trend:"down"}],suggested_emojis:["ðŸ‘","ðŸŽ‰","â¤ï¸","ðŸ”¥","ðŸ˜‚","ðŸ™","ðŸ’¯","âœ¨"],conversation_insights:{sentiment:"positive",activity_level:"high",response_rate:87,avg_response_time:"2.3 min"},smart_actions:[{id:1,action:"Create a poll about this topic",icon:"poll",type:"engagement"},{id:2,action:"Share relevant resources",icon:"share",type:"helpful"},{id:3,action:"Invite related experts",icon:"invite",type:"growth"},{id:4,action:"Pin important message",icon:"pin",type:"moderation"}]})}catch(e){console.error("Error loading suggestions:",e),i({quick_replies:[],trending_topics:[],suggested_emojis:[]})}d(!1)},[o,p]);s.useEffect(()=>{R()},[R]);const k=(e,a)=>{navigator.clipboard.writeText(e),u(a),setTimeout(()=>u(null),2e3)},g=e=>{m&&m(e),c()},_=e=>{switch(e){case"positive":return"#10b981";case"neutral":return"#6b7280";case"negative":return"#ef4444";default:return"#6b7280"}},f=e=>e==="up"?React.createElement("span",{className:"trend up"},"â†‘"):e==="down"?React.createElement("span",{className:"trend down"},"â†“"):React.createElement("span",{className:"trend stable"},"â†’");return b?React.createElement("div",{className:"smart-suggestions-overlay",onClick:c},React.createElement("div",{className:"smart-suggestions-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"loading-state"},React.createElement(r,{className:"pulse"}),React.createElement("span",null,"Analyzing conversation...")))):React.createElement("div",{className:"smart-suggestions-overlay",onClick:c},React.createElement("div",{className:"smart-suggestions-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"panel-header"},React.createElement("div",{className:"header-info"},React.createElement("h2",null,React.createElement(r,null)," Smart Suggestions"),React.createElement("span",{className:"powered-by"},"Powered by AI")),React.createElement("button",{className:"close-btn",onClick:c},React.createElement(C,null))),React.createElement("div",{className:"insights-bar"},React.createElement("div",{className:"insight"},React.createElement("span",{className:"insight-label"},"Sentiment"),React.createElement("span",{className:"insight-value sentiment",style:{color:_(t?.conversation_insights?.sentiment)}},t?.conversation_insights?.sentiment||"neutral")),React.createElement("div",{className:"insight"},React.createElement("span",{className:"insight-label"},"Activity"),React.createElement("span",{className:"insight-value"},t?.conversation_insights?.activity_level||"normal")),React.createElement("div",{className:"insight"},React.createElement("span",{className:"insight-label"},"Response Rate"),React.createElement("span",{className:"insight-value"},t?.conversation_insights?.response_rate||0,"%")),React.createElement("div",{className:"insight"},React.createElement("span",{className:"insight-label"},"Avg. Response"),React.createElement("span",{className:"insight-value"},t?.conversation_insights?.avg_response_time||"N/A"))),React.createElement("div",{className:"tabs"},React.createElement("button",{className:`tab ${n==="replies"?"active":""}`,onClick:()=>l("replies")},React.createElement(E,null)," Quick Replies"),React.createElement("button",{className:`tab ${n==="topics"?"active":""}`,onClick:()=>l("topics")},React.createElement(v,null)," Trending"),React.createElement("button",{className:`tab ${n==="actions"?"active":""}`,onClick:()=>l("actions")},React.createElement(N,null)," Smart Actions")),React.createElement("div",{className:"tab-content"},n==="replies"&&React.createElement("div",{className:"replies-tab"},React.createElement("div",{className:"emoji-bar"},React.createElement("span",{className:"emoji-label"},React.createElement(x,null)," Quick Reactions:"),React.createElement("div",{className:"emoji-list"},(t?.suggested_emojis||[]).map((e,a)=>React.createElement("button",{key:a,className:"emoji-btn",onClick:()=>g(e),title:"Click to use"},e)))),React.createElement("div",{className:"replies-list"},React.createElement("h4",null,React.createElement(S,null)," Suggested Replies"),(t?.quick_replies||[]).map(e=>React.createElement("div",{key:e.id,className:"reply-item"},React.createElement("div",{className:"reply-content"},React.createElement("span",{className:"reply-text"},e.text),React.createElement("div",{className:"reply-meta"},React.createElement("span",{className:"context"},e.context),React.createElement("span",{className:"confidence"},React.createElement(h,null)," ",e.confidence,"%"))),React.createElement("div",{className:"reply-actions"},React.createElement("button",{className:"action-btn copy",onClick:()=>k(e.text,e.id),title:"Copy to clipboard"},y===e.id?React.createElement(F,null):React.createElement(T,null)),React.createElement("button",{className:"action-btn use",onClick:()=>g(e.text),title:"Use this reply"},React.createElement(E,null))))))),n==="topics"&&React.createElement("div",{className:"topics-tab"},React.createElement("h4",null,React.createElement(w,null)," Trending Topics in This Channel"),React.createElement("div",{className:"topics-list"},(t?.trending_topics||[]).map((e,a)=>React.createElement("div",{key:a,className:"topic-item"},React.createElement("span",{className:"topic-rank"},"#",a+1),React.createElement("div",{className:"topic-info"},React.createElement("span",{className:"topic-name"},e.topic),React.createElement("span",{className:"topic-mentions"},e.mentions," mentions")),f(e.trend))),(!t?.trending_topics||t.trending_topics.length===0)&&React.createElement("div",{className:"empty-state"},"No trending topics yet"))),n==="actions"&&React.createElement("div",{className:"actions-tab"},React.createElement("h4",null,React.createElement(N,null)," Recommended Actions"),React.createElement("div",{className:"actions-list"},(t?.smart_actions||[]).map(e=>React.createElement("div",{key:e.id,className:`action-item ${e.type}`},React.createElement("div",{className:"action-icon"},e.icon==="poll"&&React.createElement(v,null),e.icon==="share"&&React.createElement(A,null),e.icon==="invite"&&React.createElement(j,null),e.icon==="pin"&&React.createElement(h,null)),React.createElement("span",{className:"action-text"},e.action),React.createElement("span",{className:`action-type ${e.type}`},e.type)))),React.createElement("div",{className:"ai-tip"},React.createElement(r,null),React.createElement("span",null,"These suggestions are based on conversation patterns and community engagement metrics."))))))};export{L as default};
