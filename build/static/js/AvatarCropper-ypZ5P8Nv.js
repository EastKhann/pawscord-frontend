var K=Object.defineProperty;var m=(c,t)=>K(c,"name",{value:t,configurable:!0});import{r as R,a as u,j as v}from"./react-core-Djgtqrmb.js";var I=Object.defineProperty,A=m((c,t,e)=>t in c?I(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e,"$"),x=m((c,t,e)=>A(c,typeof t!="symbol"?t+"":t,e),"m");const P={x:0,y:0,width:0,height:0,unit:"px"},H=m((c,t,e)=>Math.min(Math.max(c,t),e),"b"),B=m((...c)=>c.filter(t=>t&&typeof t=="string").join(" "),"H"),j=m((c,t)=>c===t||c.width===t.width&&c.height===t.height&&c.x===t.x&&c.y===t.y&&c.unit===t.unit,"X");function N(c,t,e){return c.unit==="%"?{...P,...c,unit:"%"}:{unit:"%",x:c.x?c.x/t*100:0,y:c.y?c.y/e*100:0,width:c.width?c.width/t*100:0,height:c.height?c.height/e*100:0}}m(N,"v");function E(c,t,e){return c.unit?c.unit==="px"?{...P,...c,unit:"px"}:{unit:"px",x:c.x?c.x*t/100:0,y:c.y?c.y*e/100:0,width:c.width?c.width*t/100:0,height:c.height?c.height*e/100:0}:{...P,...c,unit:"px"}}m(E,"D");function _(c,t,e,a,i,n=0,h=0,l=a,s=i){const r={...c};let d=Math.min(n,a),p=Math.min(h,i),w=Math.min(l,a),o=Math.min(s,i);t&&(t>1?(d=h?h*t:d,p=d/t,w=l*t):(p=n?n/t:p,d=p*t,o=s/t)),r.y<0&&(r.height=Math.max(r.height+r.y,p),r.y=0),r.x<0&&(r.width=Math.max(r.width+r.x,d),r.x=0);const g=a-(r.x+r.width);g<0&&(r.x=Math.min(r.x,a-d),r.width+=g);const y=i-(r.y+r.height);if(y<0&&(r.y=Math.min(r.y,i-p),r.height+=y),r.width<d&&((e==="sw"||e=="nw")&&(r.x-=d-r.width),r.width=d),r.height<p&&((e==="nw"||e=="ne")&&(r.y-=p-r.height),r.height=p),r.width>w&&((e==="sw"||e=="nw")&&(r.x-=w-r.width),r.width=w),r.height>o&&((e==="nw"||e=="ne")&&(r.y-=o-r.height),r.height=o),t){const C=r.width/r.height;if(C<t){const f=Math.max(r.width/t,p);(e==="nw"||e=="ne")&&(r.y-=f-r.height),r.height=f}else if(C>t){const f=Math.max(r.height*t,d);(e==="sw"||e=="nw")&&(r.x-=f-r.width),r.width=f}}return r}m(_,"k");function O(c,t,e,a){const i={...c};return t==="ArrowLeft"?a==="nw"?(i.x-=e,i.y-=e,i.width+=e,i.height+=e):a==="w"?(i.x-=e,i.width+=e):a==="sw"?(i.x-=e,i.width+=e,i.height+=e):a==="ne"?(i.y+=e,i.width-=e,i.height-=e):a==="e"?i.width-=e:a==="se"&&(i.width-=e,i.height-=e):t==="ArrowRight"&&(a==="nw"?(i.x+=e,i.y+=e,i.width-=e,i.height-=e):a==="w"?(i.x+=e,i.width-=e):a==="sw"?(i.x+=e,i.width-=e,i.height-=e):a==="ne"?(i.y-=e,i.width+=e,i.height+=e):a==="e"?i.width+=e:a==="se"&&(i.width+=e,i.height+=e)),t==="ArrowUp"?a==="nw"?(i.x-=e,i.y-=e,i.width+=e,i.height+=e):a==="n"?(i.y-=e,i.height+=e):a==="ne"?(i.y-=e,i.width+=e,i.height+=e):a==="sw"?(i.x+=e,i.width-=e,i.height-=e):a==="s"?i.height-=e:a==="se"&&(i.width-=e,i.height-=e):t==="ArrowDown"&&(a==="nw"?(i.x+=e,i.y+=e,i.width-=e,i.height-=e):a==="n"?(i.y+=e,i.height-=e):a==="ne"?(i.y+=e,i.width-=e,i.height-=e):a==="sw"?(i.x-=e,i.width+=e,i.height+=e):a==="s"?i.height+=e:a==="se"&&(i.width+=e,i.height+=e)),i}m(O,"I");const Y={capture:!0,passive:!1};let L=0;var D;const S=(D=class extends R.PureComponent{constructor(){super(...arguments),x(this,"docMoveBound",!1),x(this,"mouseDownOnCrop",!1),x(this,"dragStarted",!1),x(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),x(this,"componentRef",R.createRef()),x(this,"mediaRef",R.createRef()),x(this,"resizeObserver"),x(this,"initChangeCalled",!1),x(this,"instanceId",`rc-${L++}`),x(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),x(this,"onCropPointerDown",t=>{const{crop:e,disabled:a}=this.props,i=this.getBox();if(!e)return;const n=E(e,i.width,i.height);if(a)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=t.target.dataset.ord,l=!!h;let s=t.clientX,r=t.clientY,d=n.x,p=n.y;if(h){const w=t.clientX-i.x,o=t.clientY-i.y;let g=0,y=0;h==="ne"||h=="e"?(g=w-(n.x+n.width),y=o-n.y,d=n.x,p=n.y+n.height):h==="se"||h==="s"?(g=w-(n.x+n.width),y=o-(n.y+n.height),d=n.x,p=n.y):h==="sw"||h=="w"?(g=w-n.x,y=o-(n.y+n.height),d=n.x+n.width,p=n.y):(h==="nw"||h=="n")&&(g=w-n.x,y=o-n.y,d=n.x+n.width,p=n.y+n.height),s=d+i.x+g,r=p+i.y+y}this.evData={startClientX:s,startClientY:r,startCropX:d,startCropY:p,clientX:t.clientX,clientY:t.clientY,isResize:l,ord:h},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),x(this,"onComponentPointerDown",t=>{const{crop:e,disabled:a,locked:i,keepSelection:n,onChange:h}=this.props,l=this.getBox();if(a||i||n&&e)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const s=t.clientX-l.x,r=t.clientY-l.y,d={unit:"px",x:s,y:r,width:0,height:0};this.evData={startClientX:t.clientX,startClientY:t.clientY,startCropX:s,startCropY:r,clientX:t.clientX,clientY:t.clientY,isResize:!0},this.mouseDownOnCrop=!0,h(E(d,l.width,l.height),N(d,l.width,l.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),x(this,"onDocPointerMove",t=>{const{crop:e,disabled:a,onChange:i,onDragStart:n}=this.props,h=this.getBox();if(a||!e||!this.mouseDownOnCrop)return;t.cancelable&&t.preventDefault(),this.dragStarted||(this.dragStarted=!0,n&&n(t));const{evData:l}=this;l.clientX=t.clientX,l.clientY=t.clientY;let s;l.isResize?s=this.resizeCrop():s=this.dragCrop(),j(e,s)||i(E(s,h.width,h.height),N(s,h.width,h.height))}),x(this,"onComponentKeyDown",t=>{const{crop:e,disabled:a,onChange:i,onComplete:n}=this.props;if(a)return;const h=t.key;let l=!1;if(!e)return;const s=this.getBox(),r=this.makePixelCrop(s),d=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?D.nudgeStepLarge:t.shiftKey?D.nudgeStepMedium:D.nudgeStep;if(h==="ArrowLeft"?(r.x-=d,l=!0):h==="ArrowRight"?(r.x+=d,l=!0):h==="ArrowUp"?(r.y-=d,l=!0):h==="ArrowDown"&&(r.y+=d,l=!0),l){t.cancelable&&t.preventDefault(),r.x=H(r.x,0,s.width-r.width),r.y=H(r.y,0,s.height-r.height);const p=E(r,s.width,s.height),w=N(r,s.width,s.height);i(p,w),n&&n(p,w)}}),x(this,"onHandlerKeyDown",(t,e)=>{const{aspect:a=0,crop:i,disabled:n,minWidth:h=0,minHeight:l=0,maxWidth:s,maxHeight:r,onChange:d,onComplete:p}=this.props,w=this.getBox();if(n||!i)return;if(t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="ArrowLeft"||t.key==="ArrowRight")t.stopPropagation(),t.preventDefault();else return;const o=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?D.nudgeStepLarge:t.shiftKey?D.nudgeStepMedium:D.nudgeStep,g=E(i,w.width,w.height),y=O(g,t.key,o,e),C=_(y,a,e,w.width,w.height,h,l,s,r);if(!j(i,C)){const f=N(C,w.width,w.height);d(C,f),p&&p(C,f)}}),x(this,"onDocPointerDone",t=>{const{crop:e,disabled:a,onComplete:i,onDragEnd:n}=this.props,h=this.getBox();this.unbindDocMove(),!(a||!e)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,n&&n(t),i&&i(E(e,h.width,h.height),N(e,h.width,h.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),x(this,"onDragFocus",()=>{var t;(t=this.componentRef.current)==null||t.scrollTo(0,0)})}get document(){return document}getBox(){const t=this.mediaRef.current;if(!t)return{x:0,y:0,width:0,height:0};const{x:e,y:a,width:i,height:n}=t.getBoundingClientRect();return{x:e,y:a,width:i,height:n}}componentDidUpdate(t){const{crop:e,onComplete:a}=this.props;if(a&&!t.crop&&e){const{width:i,height:n}=this.getBox();i&&n&&a(E(e,i,n),N(e,i,n))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,Y),this.document.addEventListener("pointerup",this.onDocPointerDone,Y),this.document.addEventListener("pointercancel",this.onDocPointerDone,Y),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,Y),this.document.removeEventListener("pointerup",this.onDocPointerDone,Y),this.document.removeEventListener("pointercancel",this.onDocPointerDone,Y),this.docMoveBound=!1)}getCropStyle(){const{crop:t}=this.props;if(t)return{top:`${t.y}${t.unit}`,left:`${t.x}${t.unit}`,width:`${t.width}${t.unit}`,height:`${t.height}${t.unit}`}}dragCrop(){const{evData:t}=this,e=this.getBox(),a=this.makePixelCrop(e),i=t.clientX-t.startClientX,n=t.clientY-t.startClientY;return a.x=H(t.startCropX+i,0,e.width-a.width),a.y=H(t.startCropY+n,0,e.height-a.height),a}getPointRegion(t,e,a,i){const{evData:n}=this,h=n.clientX-t.x,l=n.clientY-t.y;let s;i&&e?s=e==="nw"||e==="n"||e==="ne":s=l<n.startCropY;let r;return a&&e?r=e==="nw"||e==="w"||e==="sw":r=h<n.startCropX,r?s?"nw":"sw":s?"ne":"se"}resolveMinDimensions(t,e,a=0,i=0){const n=Math.min(a,t.width),h=Math.min(i,t.height);return!e||!n&&!h?[n,h]:e>1?n?[n,n/e]:[h*e,h]:h?[h*e,h]:[n,n/e]}resizeCrop(){const{evData:t}=this,{aspect:e=0,maxWidth:a,maxHeight:i}=this.props,n=this.getBox(),[h,l]=this.resolveMinDimensions(n,e,this.props.minWidth,this.props.minHeight);let s=this.makePixelCrop(n);const r=this.getPointRegion(n,t.ord,h,l),d=t.ord||r;let p=t.clientX-t.startClientX,w=t.clientY-t.startClientY;(h&&d==="nw"||d==="w"||d==="sw")&&(p=Math.min(p,-h)),(l&&d==="nw"||d==="n"||d==="ne")&&(w=Math.min(w,-l));const o={unit:"px",x:0,y:0,width:0,height:0};r==="ne"?(o.x=t.startCropX,o.width=p,e?(o.height=o.width/e,o.y=t.startCropY-o.height):(o.height=Math.abs(w),o.y=t.startCropY-o.height)):r==="se"?(o.x=t.startCropX,o.y=t.startCropY,o.width=p,e?o.height=o.width/e:o.height=w):r==="sw"?(o.x=t.startCropX+p,o.y=t.startCropY,o.width=Math.abs(p),e?o.height=o.width/e:o.height=w):r==="nw"&&(o.x=t.startCropX+p,o.width=Math.abs(p),e?(o.height=o.width/e,o.y=t.startCropY-o.height):(o.height=Math.abs(w),o.y=t.startCropY+w));const g=_(o,e,r,n.width,n.height,h,l,a,i);return e||D.xyOrds.indexOf(d)>-1?s=g:D.xOrds.indexOf(d)>-1?(s.x=g.x,s.width=g.width):D.yOrds.indexOf(d)>-1&&(s.y=g.y,s.height=g.height),s.x=H(s.x,0,n.width-s.width),s.y=H(s.y,0,n.height-s.height),s}renderCropSelection(){const{ariaLabels:t=D.defaultProps.ariaLabels,disabled:e,locked:a,renderSelectionAddon:i,ruleOfThirds:n,crop:h}=this.props,l=this.getCropStyle();if(h)return u.createElement("div",{style:l,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!e&&!a&&u.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},u.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),u.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),u.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),u.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:m(s=>this.onHandlerKeyDown(s,"nw"),"onKeyDown"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:m(s=>this.onHandlerKeyDown(s,"n"),"onKeyDown"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:m(s=>this.onHandlerKeyDown(s,"ne"),"onKeyDown"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:m(s=>this.onHandlerKeyDown(s,"e"),"onKeyDown"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:m(s=>this.onHandlerKeyDown(s,"se"),"onKeyDown"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:m(s=>this.onHandlerKeyDown(s,"s"),"onKeyDown"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:m(s=>this.onHandlerKeyDown(s,"sw"),"onKeyDown"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:m(s=>this.onHandlerKeyDown(s,"w"),"onKeyDown"),role:"button"})),i&&u.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:m(s=>s.stopPropagation(),"onPointerDown")},i(this.state)),n&&u.createElement(u.Fragment,null,u.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),u.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(t){const e={...P,...this.props.crop||{}};return E(e,t.width,t.height)}render(){const{aspect:t,children:e,circularCrop:a,className:i,crop:n,disabled:h,locked:l,style:s,ruleOfThirds:r}=this.props,{cropIsActive:d,newCropIsBeingDrawn:p}=this.state,w=n?this.renderCropSelection():null,o=B("ReactCrop",i,d&&"ReactCrop--active",h&&"ReactCrop--disabled",l&&"ReactCrop--locked",p&&"ReactCrop--new-crop",n&&t&&"ReactCrop--fixed-aspect",n&&a&&"ReactCrop--circular-crop",n&&r&&"ReactCrop--rule-of-thirds",!this.dragStarted&&n&&!n.width&&!n.height&&"ReactCrop--invisible-crop",a&&"ReactCrop--no-animate");return u.createElement("div",{ref:this.componentRef,className:o,style:s},u.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},e),n?u.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},u.createElement("defs",null,u.createElement("mask",{id:`hole-${this.instanceId}`},u.createElement("rect",{width:"100%",height:"100%",fill:"white"}),a?u.createElement("ellipse",{cx:`${n.x+n.width/2}${n.unit}`,cy:`${n.y+n.height/2}${n.unit}`,rx:`${n.width/2}${n.unit}`,ry:`${n.height/2}${n.unit}`,fill:"black"}):u.createElement("rect",{x:`${n.x}${n.unit}`,y:`${n.y}${n.unit}`,width:`${n.width}${n.unit}`,height:`${n.height}${n.unit}`,fill:"black"}))),u.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,w)}},m(D,"x"),D);x(S,"xOrds",["e","w"]),x(S,"yOrds",["n","s"]),x(S,"xyOrds",["nw","ne","se","sw"]),x(S,"nudgeStep",1),x(S,"nudgeStepMedium",10),x(S,"nudgeStepLarge",100),x(S,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let z=S;const T=m(({onCropComplete:c,onCancel:t,imageFile:e})=>{const[a,i]=R.useState(null),[n,h]=R.useState({unit:"%",width:50,aspect:1}),[l,s]=R.useState(null),r=R.useRef(null),d=R.useRef(null);R.useEffect(()=>{if(e){const o=new FileReader;o.addEventListener("load",()=>{i(o.result)}),o.readAsDataURL(e)}},[e]);const p=R.useCallback(o=>{r.current=o;const g=o.width,y=o.height,C=Math.min(g,y),f=(g-C)/2,M=(y-C)/2,b={unit:"px",width:C,height:C,x:f,y:M,aspect:1};h(b),s(b)},[]);R.useEffect(()=>{if(!l||!r.current||!d.current)return;const o=r.current,g=d.current,y=l,C=o.naturalWidth/o.width,f=o.naturalHeight/o.height,M=g.getContext("2d"),b=window.devicePixelRatio||1,k=180;g.width=k*b,g.height=k*b,M.setTransform(b,0,0,b,0,0),M.imageSmoothingQuality="high",M.drawImage(o,y.x*C,y.y*f,y.width*C,y.height*f,0,0,k,k)},[l]);const w=R.useCallback(async()=>{if(!l||!r.current||!d.current)return;const o=r.current,g=d.current,y=l,C=o.naturalWidth/o.width,f=o.naturalHeight/o.height,M=g.getContext("2d"),b=window.devicePixelRatio,k=512;return g.width=k*b,g.height=k*b,M.setTransform(b,0,0,b,0,0),M.imageSmoothingQuality="high",M.drawImage(o,y.x*C,y.y*f,y.width*C,y.height*f,0,0,k,k),new Promise($=>{g.toBlob(X=>{X&&(X.name="avatar.png",c(X),$())},"image/png",1)})},[l,c]);return v.jsx("div",{className:"avatar-cropper-modal",onClick:t,children:v.jsxs("div",{className:"avatar-cropper-content",onClick:m(o=>o.stopPropagation(),"onClick"),children:[v.jsxs("div",{className:"avatar-cropper-header",children:[v.jsx("h2",{children:"üì∏ Profil Fotoƒürafƒ±nƒ± D√ºzenle"}),v.jsx("button",{className:"close-btn",onClick:t,children:"√ó"})]}),v.jsxs("div",{className:"avatar-cropper-body",children:[!a&&v.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#dcddde"},children:[v.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"‚è≥"}),v.jsx("p",{children:"Fotoƒüraf y√ºkleniyor..."}),!e&&v.jsx("p",{style:{color:"#f04747",marginTop:"8px"},children:"‚ö†Ô∏è Dosya bulunamadƒ±!"})]}),a&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"crop-container",children:v.jsx(z,{crop:n,onChange:m(o=>h(o),"onChange"),onComplete:m(o=>s(o),"onComplete"),aspect:1,circularCrop:!1,keepSelection:!0,minWidth:100,minHeight:100,children:v.jsx("img",{ref:r,src:a,alt:"Crop",onLoad:m(o=>p(o.currentTarget),"onLoad"),style:{maxWidth:"100%",maxHeight:"55vh",display:"block",objectFit:"contain"}})})}),v.jsxs("div",{className:"preview-section",children:[v.jsx("h3",{children:"√ñnizleme:"}),v.jsx("div",{className:"preview-container",children:v.jsx("canvas",{ref:d,style:{width:180,height:180,borderRadius:"50%",objectFit:"cover"}})}),v.jsx("p",{className:"preview-note",children:"‚ÑπÔ∏è Tam kare (1:1)"})]})]})]}),a&&v.jsxs("div",{className:"avatar-cropper-footer",children:[v.jsx("button",{className:"btn-secondary",onClick:t,children:"ƒ∞ptal"}),v.jsx("button",{className:"btn-primary",onClick:w,children:"‚úì Kaydet"})]})]})})},"AvatarCropper");export{T as default};
