import{r as s,j as e}from"./react-vendor-D8Fi5F9E.js";import{t as x}from"./index-DqcHZhUV.js";import{am as q,a as F,an as K,G as O,ao as X,d as A,ae as D}from"./icons-vendor-BPCemF_6.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./state-vendor-De5qIGw3.js";const Q=({onClose:y,fetchWithAuth:l,apiBaseUrl:d})=>{const[b,h]=s.useState("store"),[m,w]=s.useState(0),[v,I]=s.useState([]),[C,B]=s.useState([]),[t,c]=s.useState(!1),[a,j]=s.useState(null),[S,k]=s.useState(""),[p,u]=s.useState(null),T=[{id:"p1",coins:1e3,price:"15 USDT",note:"BaÅŸlangÄ±Ã§ paketi"},{id:"p2",coins:2500,price:"35 USDT",note:"PopÃ¼ler seÃ§im"},{id:"p3",coins:6e3,price:"75 USDT",note:"En iyi deÄŸer"},{id:"p4",coins:15e3,price:"180 USDT",note:"Topluluk paketi"}],_=[{label:"USDT (TRC20)",value:"TGAny6VmDAWdVmTXCPrpsbLKKQQdvyvnWC"},{label:"USDT (ERC20)",value:"0xeaa14d4651a8ea7488289209b9294a1309dde37c"},{label:"SOL (Solana)",value:"Bk6ywhae86fp6BHmGtxabS6ncEGsFxhcnZEWJRZLVr9z"}],[f,R]=s.useState(T[0]),P=async()=>{c(!0);try{const o=await l(`${d}/api/store/daily-reward/`,{method:"POST"});let i=null;try{i=await o.json()}catch{i=null}if(console.log("[DailyReward] status",o.status,"data",i),o.ok&&i){const r={claimed:!!i.claimed,added_coins:typeof i.added_coins=="number"?i.added_coins:0,new_balance:typeof i.new_balance=="number"?i.new_balance:m,streak:typeof i.streak=="number"?i.streak:void 0,reason:i.reason,remaining_seconds:typeof i.remaining_seconds=="number"?i.remaining_seconds:void 0,error:i.error};j(r),r.claimed&&typeof r.new_balance=="number"&&w(r.new_balance),g()}else{const r=i&&(i.error||i.message||i.detail)||"Ä°stek baÅŸarÄ±sÄ±z";j({claimed:!1,error:r})}}catch(o){console.error("[DailyReward] exception",o),j({claimed:!1,error:"Beklenmeyen hata"})}c(!1)},g=()=>{l(`${d}/api/store/balance/`).then(o=>o.json()).then(o=>w(o.coins)),l(`${d}/api/store/items/`).then(o=>o.json()).then(o=>I(o)),l(`${d}/api/store/inventory/`).then(o=>o.json()).then(o=>B(o))};s.useEffect(()=>{g()},[d,l]),s.useEffect(()=>{const o=i=>{i.key==="Escape"&&y()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[y]);const E=async o=>{if(window.confirm("Bu Ã¼rÃ¼nÃ¼ satÄ±n almak istiyor musunuz?")){c(!0);try{const i=await l(`${d}/api/store/buy/`,{method:"POST",body:JSON.stringify({item_id:o})}),r=await i.json();i.ok?(x.success(r.message),g()):x.error(r.error)}catch{x.error("âŒ Hata oluÅŸtu.")}c(!1)}},H=async o=>{c(!0);try{(await l(`${d}/api/store/equip/${o}/`,{method:"POST"})).ok&&g()}catch(i){console.error("Equip error:",i),x.error("Item equip failed")}c(!1)},z=async()=>{const o=S.trim();if(!o){x.error("âŒ LÃ¼tfen iÅŸlem ID girin");return}if(o.length<6){u({success:!1,message:"Ä°ÅŸlem ID Ã§ok kÄ±sa gÃ¶rÃ¼nÃ¼yor"});return}c(!0),u(null);try{const i=await l(`${d}/api/store/verify-txid/`,{method:"POST",body:JSON.stringify({txid:o})}),r=await i.json();console.log("[VerifyTXID]",i.status,r),i.ok?(u({success:!0,message:r.message||"Ã–deme doÄŸrulandÄ±!",added_coins:r.added_coins}),g(),k("")):u({success:!1,message:r.error||r.detail||"DoÄŸrulama baÅŸarÄ±sÄ±z"})}catch(i){console.error("[VerifyTXID] exception",i),u({success:!1,message:"Beklenmeyen hata"})}c(!1)},L=async o=>{try{await navigator.clipboard.writeText(o),x.success("âœ… Adres kopyalandÄ±: "+o)}catch{x.error("âŒ Kopyalama baÅŸarÄ±sÄ±z oldu")}},$=async()=>{try{const o=await navigator.clipboard.readText();o&&k(o.trim())}catch(o){console.error("Clipboard read failed",o)}};return e.jsx("div",{style:n.overlay,onClick:y,children:e.jsxs("div",{style:n.modal,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:n.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(q,{color:"#f0b232",size:24}),e.jsx("h2",{style:{margin:0,color:"white"},children:"Pawscord MaÄŸaza"})]}),e.jsx("button",{onClick:y,style:n.closeBtn,children:e.jsx(F,{})})]}),e.jsx("div",{style:n.balanceBar,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"Mevcut Bakiye:"}),e.jsxs("strong",{style:{color:"#f0b232",fontSize:"1.2em"},children:[m," Coin"]}),e.jsx("button",{onClick:P,style:n.dailyBtn,disabled:t,children:"ğŸ +10"})]})}),e.jsxs("div",{style:n.tabs,children:[e.jsxs("button",{style:b==="store"?n.activeTab:n.tab,onClick:()=>h("store"),children:[e.jsx(K,{})," MaÄŸaza"]}),e.jsxs("button",{style:b==="deposit"?n.activeTab:n.tab,onClick:()=>h("deposit"),children:[e.jsx(O,{})," PawsCoin SatÄ±n Al"]}),e.jsxs("button",{style:b==="inventory"?n.activeTab:n.tab,onClick:()=>h("inventory"),children:[e.jsx(X,{})," Envanterim"]})]}),e.jsxs("div",{style:n.content,children:[b==="store"&&e.jsxs("div",{style:n.grid,children:[v.map(o=>e.jsxs("div",{style:n.itemCard,children:[e.jsx("div",{style:n.iconPlace,children:o.preview_image?e.jsx("img",{src:o.preview_image,alt:o.name,style:{width:50,height:50}}):e.jsx("span",{style:{fontSize:"2em"},children:"ğŸ"})}),e.jsx("h4",{children:o.name}),e.jsx("p",{style:{fontSize:"0.8em",color:"#999"},children:o.description}),o.rarity&&e.jsxs("span",{style:{fontSize:"0.75em",color:"#b9bbbe",marginBottom:6},children:["Nadirlik: ",o.rarity]}),o.is_owned?e.jsx("button",{style:n.ownedBtn,disabled:!0,children:"Sahipsin"}):e.jsxs("button",{onClick:()=>E(o.id),style:n.buyBtn,disabled:t||m<o.price,children:[m<o.price?e.jsx(A,{}):null," ",o.price," Coin"]})]},o.id)),v.length===0&&e.jsx("p",{style:{color:"#ccc"},children:"MaÄŸazada Ã¼rÃ¼n yok."})]}),b==="inventory"&&e.jsxs("div",{style:n.grid,children:[C.map(o=>e.jsxs("div",{style:{...n.itemCard,border:o.is_equipped?"1px solid #23a559":"1px solid #1e1f22"},children:[e.jsx("div",{style:n.iconPlace,children:o.preview_image?e.jsx("img",{src:o.preview_image,alt:o.name,style:{width:50,height:50}}):e.jsx("span",{style:{fontSize:"2em"},children:"ğŸ’"})}),e.jsx("h4",{children:o.name}),e.jsx("p",{style:{fontSize:"0.8em",color:"#999"},children:o.item_type}),o.is_equipped?e.jsxs("button",{style:n.equippedBtn,disabled:!0,children:[e.jsx(D,{})," KuÅŸanÄ±ldÄ±"]}):e.jsx("button",{onClick:()=>H(o.id),style:n.useBtn,disabled:t,children:"KuÅŸan"})]},o.id)),C.length===0&&e.jsx("p",{style:{color:"#ccc"},children:"HenÃ¼z bir ÅŸey satÄ±n almadÄ±n."})]}),b==="deposit"&&e.jsxs("div",{style:{padding:"10px",color:"white"},children:[e.jsx("h3",{style:{marginTop:0,color:"#f0b232"},children:"ğŸ’° PawsCoin SatÄ±n Al"}),e.jsx("p",{style:{color:"#b9bbbe",fontSize:"0.9em"},children:"Kripto para ile PawsCoin satÄ±n alÄ±n. Ã–demenizi yaptÄ±ktan sonra iÅŸlem ID'sini (TXID) aÅŸaÄŸÄ±ya girin."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12,margin:"16px 0"},children:T.map(o=>{const i=f?.id===o.id;return e.jsxs("div",{onClick:()=>R(o),style:{backgroundColor:i?"#3b3f47":"#202225",border:`1px solid ${i?"#5865f2":"#1e1f22"}`,borderRadius:10,padding:12,cursor:"pointer",display:"flex",flexDirection:"column",gap:6,transition:"border-color 0.2s, background-color 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontWeight:700,color:"white"},children:[o.coins.toLocaleString()," Coin"]}),i&&e.jsx(D,{color:"#23a559"})]}),e.jsx("div",{style:{color:"#f0b232",fontWeight:600},children:o.price}),e.jsx("div",{style:{color:"#b9bbbe",fontSize:"0.8em"},children:o.note})]},o.id)})}),f&&e.jsxs("div",{style:{marginBottom:14,padding:12,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22",color:"#b9bbbe",fontSize:"0.9em"},children:["SeÃ§ilen paket: ",e.jsxs("strong",{style:{color:"white"},children:[f.coins.toLocaleString()," Coin"]})," â€“",e.jsxs("span",{style:{color:"#f0b232",fontWeight:600},children:[" ",f.price]})]}),e.jsxs("div",{style:{marginTop:20,marginBottom:20,padding:15,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#5865f2"},children:"ğŸ“‹ Ã–deme Bilgileri"}),e.jsx("div",{style:{fontSize:"0.85em",color:"#b9bbbe",lineHeight:1.6,display:"flex",flexDirection:"column",gap:8},children:_.map(o=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[e.jsx("p",{style:{margin:0},children:e.jsxs("strong",{children:[o.label,":"]})}),e.jsx("button",{onClick:()=>L(o.value),style:{backgroundColor:"#2f3136",color:"white",border:"1px solid #1e1f22",borderRadius:6,padding:"4px 10px",cursor:"pointer",fontSize:"0.8em"},children:"Kopyala"})]}),e.jsx("code",{style:{display:"block",padding:8,backgroundColor:"#2b2d31",borderRadius:4,wordBreak:"break-all"},children:o.value})]},o.label))}),e.jsx("p",{style:{fontSize:"0.75em",color:"#999",marginTop:10},children:"Ã–deme sonrasÄ± iÅŸlem ID'sini (TXID) aÅŸaÄŸÄ±ya girin. Not: Åu an seÃ§ilen paket bilgisi bilgilendirme amaÃ§lÄ±, TXID doÄŸrulamasÄ± iÅŸlem miktarÄ±nÄ± otomatik algÄ±lamaz."})]}),e.jsxs("div",{style:{marginBottom:15},children:[e.jsx("label",{style:{display:"block",marginBottom:8,fontSize:"0.9em",color:"#b9bbbe"},children:"Ä°ÅŸlem ID (TXID):"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:S,onChange:o=>k(o.target.value),onKeyDown:o=>{o.key==="Enter"&&(o.preventDefault(),z())},placeholder:"Ä°ÅŸlem ID'sini buraya yapÄ±ÅŸtÄ±rÄ±n",style:{width:"100%",padding:"10px",backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"4px",color:"white",fontSize:"0.9em"},disabled:t}),e.jsx("button",{onClick:$,style:{padding:"0 12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:t?"not-allowed":"pointer",opacity:t?.6:1},disabled:t,children:"YapÄ±ÅŸtÄ±r"})]})]}),e.jsx("button",{onClick:z,style:{width:"100%",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:t?"not-allowed":"pointer",fontSize:"1em",fontWeight:"600",opacity:t?.6:1},disabled:t,children:t?"DoÄŸrulanÄ±yor...":"DoÄŸrula ve Coin Al"}),p&&e.jsxs("div",{style:{marginTop:15,padding:12,backgroundColor:p.success?"#23a55933":"#ff5d5d33",border:`1px solid ${p.success?"#23a559":"#ff5d5d"}`,borderRadius:6,color:p.success?"#23a559":"#ff5d5d"},children:[p.success?"âœ…":"âŒ"," ",p.message,p.added_coins&&e.jsxs("strong",{children:[" (+",p.added_coins," coin)"]})]})]})]}),a&&e.jsx("div",{style:{padding:"10px 20px",borderTop:"1px solid #1e1f22",backgroundColor:"#202225"},children:a.claimed?e.jsxs("div",{style:{color:"#23a559"},children:["ğŸ ",a.added_coins??0," coin aldÄ±n! Yeni bakiye: ",e.jsx("strong",{children:a.new_balance??m}),".",typeof a.streak<"u"&&e.jsxs("span",{style:{marginLeft:8,color:"#b9bbbe"},children:["Streak: ",a.streak]})]}):a.reason==="cooldown"?e.jsxs("div",{style:{color:"#b9bbbe"},children:["â³ GÃ¼nlÃ¼k Ã¶dÃ¼l iÃ§in bekle: ",e.jsx("strong",{children:Math.max(0,a.remaining_seconds??0)})," sn"]}):e.jsxs("div",{style:{color:"#ff5d5d"},children:["âš ï¸ ",a.error||"Ã–dÃ¼l alÄ±namadÄ±."]})})]})})},n={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",boxSizing:"border-box"},modal:{backgroundColor:"#2b2d31",width:"100%",maxWidth:"600px",maxHeight:"90vh",borderRadius:"12px",overflow:"hidden",border:"1px solid #1e1f22",display:"flex",flexDirection:"column"},header:{padding:"20px",backgroundColor:"#202225",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},closeBtn:{background:"none",border:"none",color:"#bbb",cursor:"pointer",fontSize:"1.2em",padding:"10px",minWidth:"44px",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center"},balanceBar:{padding:"10px 12px",backgroundColor:"#2f3136",color:"white",borderBottom:"1px solid #1e1f22",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},tabs:{display:"flex",borderBottom:"1px solid #1e1f22",backgroundColor:"#202225",flexShrink:0},tab:{flex:1,padding:"15px",background:"none",border:"none",color:"#bbb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},activeTab:{flex:1,padding:"15px",background:"rgba(255,255,255,0.05)",border:"none",color:"white",cursor:"pointer",borderBottom:"2px solid #5865f2",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},content:{padding:"20px",overflowY:"auto",flex:1,WebkitOverflowScrolling:"touch",overflowX:"hidden"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"15px",paddingBottom:"20px"},itemCard:{backgroundColor:"#202225",padding:"15px",borderRadius:"8px",textAlign:"center",border:"1px solid #1e1f22",display:"flex",flexDirection:"column",alignItems:"center",color:"white",minHeight:"180px"},iconPlace:{width:60,height:60,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10,flexShrink:0},buyBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},ownedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#40444b",color:"#aaa",border:"none",borderRadius:"4px",width:"100%",fontSize:"0.9em",minHeight:"44px"},useBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#23a559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},equippedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"transparent",color:"#23a559",border:"1px solid #23a559",borderRadius:"4px",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px"},dailyBtn:{padding:"4px 8px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"0.75em",lineHeight:1,minHeight:"24px",marginLeft:"8px"}};export{Q as default};
