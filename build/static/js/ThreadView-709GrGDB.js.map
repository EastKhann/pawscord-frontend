{"version":3,"file":"ThreadView-709GrGDB.js","sources":["../../../src/components/ThreadView.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { FaTimes } from 'react-icons/fa';\r\n\r\nconst ThreadView = ({ parentMessage, onClose, apiBaseUrl, token }) => {\r\n    const [replies, setReplies] = useState([]);\r\n    const [newReply, setNewReply] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (parentMessage?.id) fetchReplies();\r\n    }, [parentMessage?.id]);\r\n\r\n    const fetchReplies = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch(`${apiBaseUrl}/messages/${parentMessage.id}/thread/`, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            const data = await res.json();\r\n            setReplies(data.replies || []);\r\n        } catch (error) {\r\n            console.error('Thread fetch error:', error);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleSendReply = async () => {\r\n        if (!newReply.trim()) return;\r\n\r\n        try {\r\n            const res = await fetch(`${apiBaseUrl}/messages/${parentMessage.id}/reply/`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ content: newReply })\r\n            });\r\n\r\n            if (res.ok) {\r\n                setNewReply('');\r\n                fetchReplies();\r\n            }\r\n        } catch (error) {\r\n            console.error('Reply error:', error);\r\n        }\r\n    };\r\n\r\n    if (!parentMessage) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed', right: 0, top: 0, bottom: 0, width: '420px',\r\n            background: '#36393f', boxShadow: '-2px 0 8px rgba(0,0,0,0.4)',\r\n            zIndex: 100, display: 'flex', flexDirection: 'column'\r\n        }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                padding: '16px', borderBottom: '1px solid #202225',\r\n                display: 'flex', justifyContent: 'space-between', alignItems: 'center'\r\n            }}>\r\n                <h3 style={{ margin: 0, color: '#fff' }}>ðŸ’¬ Thread</h3>\r\n                <button onClick={onClose} style={{\r\n                    background: 'transparent', border: 'none', color: '#fff',\r\n                    cursor: 'pointer', fontSize: '18px'\r\n                }}><FaTimes /></button>\r\n            </div>\r\n\r\n            {/* Parent Message */}\r\n            <div style={{ padding: '16px', background: '#2f3136', borderBottom: '1px solid #202225' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', marginBottom: '8px' }}>\r\n                    <strong style={{ color: '#fff' }}>{parentMessage.username || parentMessage.sender?.username}</strong>\r\n                    <span style={{ marginLeft: '8px', fontSize: '12px', color: '#72767d' }}>\r\n                        {new Date(parentMessage.timestamp).toLocaleString('tr-TR')}\r\n                    </span>\r\n                </div>\r\n                <p style={{ margin: 0, color: '#dcddde' }}>{parentMessage.content}</p>\r\n                <small style={{ color: '#72767d', fontSize: '12px' }}>\r\n                    {replies.length} yanÄ±t\r\n                </small>\r\n            </div>\r\n\r\n            {/* Replies */}\r\n            <div style={{ flex: 1, overflowY: 'auto', padding: '16px' }}>\r\n                {loading ? (\r\n                    <div style={{ textAlign: 'center', color: '#aaa', padding: '20px' }}>\r\n                        YÃ¼kleniyor...\r\n                    </div>\r\n                ) : replies.length === 0 ? (\r\n                    <div style={{ textAlign: 'center', color: '#aaa', padding: '20px' }}>\r\n                        HenÃ¼z yanÄ±t yok\r\n                    </div>\r\n                ) : (\r\n                    replies.map(reply => (\r\n                        <div key={reply.id} style={{\r\n                            marginBottom: '16px', padding: '12px',\r\n                            background: '#40444b', borderRadius: '8px'\r\n                        }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', marginBottom: '8px' }}>\r\n                                <strong style={{ color: '#fff' }}>{reply.username || reply.sender?.username}</strong>\r\n                                <span style={{ marginLeft: '8px', fontSize: '12px', color: '#72767d' }}>\r\n                                    {new Date(reply.timestamp).toLocaleString('tr-TR')}\r\n                                </span>\r\n                            </div>\r\n                            <p style={{ margin: 0, color: '#dcddde' }}>{reply.content}</p>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n\r\n            {/* Reply Input */}\r\n            <div style={{ padding: '16px', borderTop: '1px solid #202225' }}>\r\n                <div style={{ display: 'flex', gap: '8px' }}>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"YanÄ±t yaz...\"\r\n                        value={newReply}\r\n                        onChange={(e) => setNewReply(e.target.value)}\r\n                        onKeyPress={(e) => e.key === 'Enter' && handleSendReply()}\r\n                        style={{\r\n                            flex: 1, padding: '10px', background: '#40444b',\r\n                            border: 'none', borderRadius: '6px', color: '#fff'\r\n                        }}\r\n                    />\r\n                    <button\r\n                        onClick={handleSendReply}\r\n                        disabled={!newReply.trim()}\r\n                        style={{\r\n                            padding: '10px 20px', background: newReply.trim() ? '#5865f2' : '#4f545c',\r\n                            border: 'none', borderRadius: '6px', color: '#fff',\r\n                            cursor: newReply.trim() ? 'pointer' : 'not-allowed',\r\n                            fontWeight: 600\r\n                        }}\r\n                    >\r\n                        GÃ¶nder\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ThreadView;\r\n\r\n\r\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":"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"}