const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/media-vendor-CxFPycob.js","static/js/react-core-Djgtqrmb.js"])))=>i.map(i=>d[i]);
var k=Object.defineProperty;var n=(i,a)=>k(i,"name",{value:a,configurable:!0});import{_ as S}from"./media-vendor-CxFPycob.js";import{a as _,r as s,j as e}from"./react-core-Djgtqrmb.js";import{a as w,an as q,H as B,aK as R}from"./icons-vendor-BW7dxHkX.js";import{u as E}from"./useModalA11y-VFHkzbFx.js";const P=s.lazy(()=>S(()=>import("./media-vendor-CxFPycob.js").then(i=>i.i),__vite__mapDeps([0,1]))),L=n(({onClose:i,ws:a,roomSlug:O})=>{const{overlayProps:g,dialogProps:m}=E({onClose:i,label:"DJ OdasÄ±"}),[d,u]=s.useState([]),[f,p]=s.useState(""),[c,x]=s.useState(""),[b,y]=s.useState(!1),j=n(()=>{if(!c)return;const t=[...d,c];u(t),x(""),h("queue_update",{queue:t})},"addToQueue"),v=n(()=>{if(d.length>0){const t=d[0],o=d.slice(1);p(t),u(o),y(!0),h("play_track",{url:t,queue:o})}},"playNext"),h=n((t,o)=>{a.current?.readyState===WebSocket.OPEN&&a.current.send(JSON.stringify({type:"media_sync",action:t,payload:o}))},"sendSignal");return s.useEffect(()=>{const t=n(o=>{const l=JSON.parse(o.data);l.type==="media_sync"&&(l.action==="queue_update"&&u(l.payload.queue),l.action==="play_track"&&(p(l.payload.url),u(l.payload.queue),y(!0)))},"handleMessage");return a.current?.addEventListener("message",t),()=>a.current?.removeEventListener("message",t)},[a]),e.jsx("div",{style:r.overlay,...g,children:e.jsxs("div",{style:r.modal,...m,children:[e.jsxs("div",{style:r.header,children:[e.jsx("h3",{children:"ðŸŽµ DJ OdasÄ±"}),e.jsx("button",{onClick:i,style:r.closeBtn,children:e.jsx(w,{})})]}),e.jsx("div",{style:r.playerWrapper,children:e.jsx(s.Suspense,{fallback:e.jsx("div",{style:{color:"#fff",padding:"20px",textAlign:"center"},children:"Loading player..."}),children:e.jsx(P,{url:f,playing:b,controls:!0,width:"100%",height:"200px"})})}),e.jsxs("div",{style:r.controls,children:[e.jsx("input",{value:c,onChange:n(t=>x(t.target.value),"onChange"),placeholder:"YouTube ÅžarkÄ± Linki...",style:r.input}),e.jsx("button",{onClick:j,style:r.addBtn,children:e.jsx(q,{})}),e.jsxs("button",{onClick:v,style:r.nextBtn,children:[e.jsx(B,{})," SÄ±radaki"]})]}),e.jsxs("div",{style:r.queueList,children:[e.jsxs("h4",{children:["SÄ±radakiler (",d.length,")"]}),d.map((t,o)=>e.jsxs("div",{style:r.queueItem,children:[e.jsx(R,{color:"#ccc"})," ",t]},o))]})]})})},"DJModal"),r={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{background:"#2b2d31",width:"500px",borderRadius:"12px",padding:"20px"},header:{display:"flex",justifyContent:"space-between",color:"white",marginBottom:20},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.2em",cursor:"pointer"},playerWrapper:{marginBottom:20,borderRadius:"8px",overflow:"hidden"},controls:{display:"flex",gap:10,marginBottom:20},input:{flex:1,padding:8,borderRadius:4,border:"1px solid #444",background:"#202225",color:"white"},addBtn:{padding:"8px 12px",background:"#5865f2",color:"white",border:"none",borderRadius:4,cursor:"pointer"},nextBtn:{padding:"8px 12px",background:"#23a559",color:"white",border:"none",borderRadius:4,cursor:"pointer"},queueList:{maxHeight:200,overflowY:"auto",color:"#ccc"},queueItem:{padding:"8px",borderBottom:"1px solid #444",fontSize:"0.9em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},M=_.memo(L);export{M as default};
