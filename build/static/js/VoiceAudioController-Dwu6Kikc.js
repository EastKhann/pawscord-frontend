import{b as f,r as i,j as r}from"./react-vendor-D8Fi5F9E.js";import{l,t as p}from"./index-DZYOpCY3.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./icons-vendor-CfNiWYc_.js";import"./state-vendor-De5qIGw3.js";const x=({remoteStreams:e,remoteVolumes:t,mutedUsers:n})=>{const[d,u]=i.useState(()=>localStorage.getItem("pawscord_audio_enabled")==="true"),s=i.useCallback(()=>{try{const o=window.AudioContext||window.webkitAudioContext,a=new o;a.state==="suspended"&&a.resume().then(()=>{l.audio("AudioContext resumed successfully")}),u(!0),localStorage.setItem("pawscord_audio_enabled","true"),l.audio("Global audio enabled")}catch(o){l.error("Failed to enable AudioContext:",o),p.error("âŒ Ses sistemi baÅŸlatÄ±lamadÄ±: "+o.message)}},[]);return i.useEffect(()=>()=>l.audio("VoiceAudioController UNMOUNTED!"),[]),r.jsxs(r.Fragment,{children:[!d&&Object.keys(e).length>0&&r.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999999,backgroundColor:"rgba(0,0,0,0.9)",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},children:r.jsx("button",{onClick:s,style:{padding:"12px 24px",backgroundColor:"#ff4757",color:"white",fontWeight:"bold",border:"none",cursor:"pointer",borderRadius:"6px",fontSize:"16px",transition:"all 0.2s",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},onMouseOver:o=>o.target.style.backgroundColor="#ee5a6f",onMouseOut:o=>o.target.style.backgroundColor="#ff4757",children:"ðŸš¨ SES SÄ°STEMÄ°NÄ° BAÅžLAT ðŸš¨"})}),r.jsx("div",{style:{display:"none"},children:Object.entries(e).map(([o,a])=>r.jsx(b,{username:o,stream:a,volume:t[o]!==void 0?t[o]:100,isMuted:n?n.has(o):!1,globalEnabled:d},`${o}-${a.id}-${a.getAudioTracks().length}`))})]})},b=({username:e,stream:t,volume:n,isMuted:d,globalEnabled:u})=>{const s=i.useRef(null);return i.useEffect(()=>{if(t){const o=t.getAudioTracks();l.log(`[AudioPlayer] ${e} has ${o.length} audio tracks`)}},[t,e]),i.useEffect(()=>{const o=s.current;if(!o||!t)return;o.srcObject=t,o.muted=!1,(async()=>{if(u)try{if(t.getAudioTracks().length===0){l.warn(`[AudioPlayer] No audio tracks for ${e}`);return}await o.play(),l.log(`âœ… [AudioPlayer] Successfully playing ${e}`)}catch{}})()},[t,e,u]),i.useEffect(()=>{const o=s.current;if(!o)return;const a=d?0:n/100;o.volume=Math.max(0,Math.min(1,a))},[n,d,e]),r.jsx("audio",{ref:s,autoPlay:!0,playsInline:!0,style:{display:"none"}})},j=f.memo(x);export{j as default};
