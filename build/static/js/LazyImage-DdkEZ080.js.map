{"version":3,"file":"LazyImage-DdkEZ080.js","sources":["../../../src/components/LazyImage.js"],"sourcesContent":["// components/LazyImage.js\r\n// üöÄ PERFORMANS: Progressive lazy loading + WebP + Blur placeholder (%60 daha hƒ±zlƒ± g√∂rsel y√ºkleme)\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\n// WebP support detection\r\nconst supportsWebP = (() => {\r\n  if (typeof window === 'undefined') return false;\r\n  const canvas = document.createElement('canvas');\r\n  if (canvas.getContext && canvas.getContext('2d')) {\r\n    return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;\r\n  }\r\n  return false;\r\n})();\r\n\r\n/**\r\n * Get optimized image URL with size and format params\r\n * @param {string} src - Original image URL\r\n * @param {string} size - Size preset (small, medium, large)\r\n * @param {number} quality - Image quality (1-100)\r\n * @returns {string} Optimized URL\r\n */\r\nconst getOptimizedUrl = (src, size = 'medium', quality = 85) => {\r\n  if (!src || src.startsWith('blob:') || src.startsWith('data:')) {\r\n    return src;\r\n  }\r\n\r\n  // Already has params, return as is\r\n  if (src.includes('?')) {\r\n    return src;\r\n  }\r\n\r\n  // Size dimensions\r\n  const sizes = {\r\n    small: 32,\r\n    medium: 64,\r\n    large: 128,\r\n    xlarge: 256\r\n  };\r\n\r\n  const dimension = sizes[size] || sizes.medium;\r\n\r\n  // Add optimization params\r\n  const params = new URLSearchParams({\r\n    w: dimension,\r\n    h: dimension,\r\n    q: quality,\r\n    f: supportsWebP ? 'webp' : 'auto'\r\n  });\r\n\r\n  return `${src}?${params.toString()}`;\r\n};\r\n\r\nconst LazyImage = ({\r\n  src,\r\n  alt = '',\r\n  size = 'medium',\r\n  quality = 85,\r\n  style = {},\r\n  className = '',\r\n  onLoad = () => {},\r\n  showBlurPlaceholder = true,\r\n  ...props\r\n}) => {\r\n  const [shouldLoad, setShouldLoad] = useState(false);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [currentSrc, setCurrentSrc] = useState(null);\r\n  const [hasError, setHasError] = useState(false);\r\n  const imgRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Intersection Observer ile lazy loading\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            setShouldLoad(true);\r\n            observer.disconnect();\r\n          }\r\n        });\r\n      },\r\n      {\r\n        rootMargin: '100px', // 100px √∂nceden y√ºkle\r\n        threshold: 0.01\r\n      }\r\n    );\r\n\r\n    if (imgRef.current) {\r\n      observer.observe(imgRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (observer && imgRef.current) {\r\n        observer.unobserve(imgRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (shouldLoad && src) {\r\n      // Get optimized URL\r\n      const optimizedSrc = getOptimizedUrl(src, size, quality);\r\n      setCurrentSrc(optimizedSrc);\r\n    }\r\n  }, [shouldLoad, src, size, quality]);\r\n\r\n  const handleLoad = () => {\r\n    setIsLoaded(true);\r\n    setHasError(false);\r\n    onLoad();\r\n  };\r\n\r\n  const handleError = () => {\r\n    setHasError(true);\r\n    // Fallback to original URL if optimization fails\r\n    if (currentSrc !== src) {\r\n      setCurrentSrc(src);\r\n    }\r\n  };\r\n\r\n  // Blur placeholder SVG (tiny, inline)\r\n  const blurPlaceholder = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"%3E%3Crect fill=\"%232b2d31\" width=\"100\" height=\"100\"/%3E%3C/svg%3E';\r\n\r\n  return (\r\n    <div\r\n      ref={imgRef}\r\n      style={{\r\n        position: 'relative',\r\n        overflow: 'hidden',\r\n        ...style\r\n      }}\r\n      className={className}\r\n    >\r\n      {/* Blur placeholder */}\r\n      {showBlurPlaceholder && !isLoaded && (\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            backgroundColor: '#2b2d31',\r\n            backgroundImage: `url(\"${blurPlaceholder}\")`,\r\n            backgroundSize: 'cover',\r\n            filter: 'blur(10px)',\r\n            transform: 'scale(1.1)',\r\n            transition: 'opacity 0.3s ease-in-out',\r\n            opacity: isLoaded ? 0 : 1\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Actual image */}\r\n      <img\r\n        src={currentSrc || blurPlaceholder}\r\n        alt={alt}\r\n        style={{\r\n          width: '100%',\r\n          height: '100%',\r\n          objectFit: 'cover',\r\n          transition: 'opacity 0.3s ease-in-out',\r\n          opacity: isLoaded ? 1 : 0\r\n        }}\r\n        onLoad={handleLoad}\r\n        onError={handleError}\r\n        loading=\"lazy\"\r\n        {...props}\r\n      />\r\n\r\n      {/* Error state */}\r\n      {hasError && (\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            backgroundColor: '#2b2d31',\r\n            color: '#b9bbbe',\r\n            fontSize: '12px'\r\n          }}\r\n        >\r\n          ‚ùå\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Export helper function for direct URL optimization\r\nexport { getOptimizedUrl };\r\n\r\nexport default React.memo(LazyImage);\r\n\r\n\r\n\r\n"],"names":["useState","useRef","useEffect","jsxs","jsx"],"mappings":"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"}