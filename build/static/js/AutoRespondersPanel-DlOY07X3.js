import{r as l,n as e}from"./react-core-zXIKm1Jm.js";import{G as S,a as R,aa as k,bk as z,bl as B,s as _}from"./icons-vendor-BBdoVeJd.js";import{t as s}from"./index-CnDr1_HI.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-ltdGXAv4.js";import"./crypto-vendor-D_AcF0lD.js";import"./state-vendor-8NbFPBhQ.js";const N=({fetchWithAuth:i,apiBaseUrl:d,onClose:y,serverId:x})=>{const[p,m]=l.useState([]),[j,f]=l.useState(!1),[g,u]=l.useState(!1),[r,a]=l.useState({trigger:"",response:"",match_type:"contains",case_sensitive:!1,enabled:!0}),b=[{value:"exact",label:"Exact Match"},{value:"contains",label:"Contains"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"},{value:"regex",label:"Regex"}];l.useEffect(()=>{c()},[]);const c=async()=>{f(!0);try{const n=await(await i(`${d}/autoresponders/list/?server_id=${x}`)).json();m(n.responders||[])}catch{s.error("Failed to load auto-responders")}finally{f(!1)}},v=async()=>{if(!r.trigger.trim()||!r.response.trim()){s.error("Please enter trigger and response");return}try{await i(`${d}/autoresponders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,server_id:x})}),s.success("Auto-responder created"),a({trigger:"",response:"",match_type:"contains",case_sensitive:!1,enabled:!0}),u(!1),c()}catch{s.error("Failed to create auto-responder")}},C=async(o,n)=>{try{await i(`${d}/autoresponders/${o}/toggle/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:n})}),s.success(n?"Enabled":"Disabled"),c()}catch{s.error("Failed to toggle")}},w=async o=>{if(confirm("Delete this auto-responder?"))try{await i(`${d}/autoresponders/${o}/delete/`,{method:"DELETE"}),s.success("Auto-responder deleted"),c()}catch{s.error("Failed to delete")}};return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(S,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Auto-Responders"})]}),e.jsx("button",{onClick:y,style:t.closeButton,children:e.jsx(R,{})})]}),e.jsxs("div",{style:t.toolbar,children:[e.jsxs("div",{style:t.count,children:[p.length," auto-responders"]}),e.jsxs("button",{onClick:()=>u(!g),style:t.createButton,children:[e.jsx(k,{style:{marginRight:"6px"}}),"Create New"]})]}),g&&e.jsxs("div",{style:t.createForm,children:[e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Trigger"}),e.jsx("input",{type:"text",value:r.trigger,onChange:o=>a({...r,trigger:o.target.value}),placeholder:"hello",style:t.input})]}),e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Response"}),e.jsx("textarea",{value:r.response,onChange:o=>a({...r,response:o.target.value}),placeholder:"Hi there! How can I help you?",style:t.textarea,rows:3})]}),e.jsxs("div",{style:t.formRow,children:[e.jsx("label",{style:t.label,children:"Match Type"}),e.jsx("select",{value:r.match_type,onChange:o=>a({...r,match_type:o.target.value}),style:t.select,children:b.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("label",{style:t.checkbox,children:[e.jsx("input",{type:"checkbox",checked:r.case_sensitive,onChange:o=>a({...r,case_sensitive:o.target.checked})}),e.jsx("span",{style:t.checkboxLabel,children:"Case sensitive"})]}),e.jsx("button",{onClick:v,style:t.submitButton,children:"Create Auto-Responder"})]}),e.jsx("div",{style:t.content,children:j?e.jsx("div",{style:t.loading,children:"Loading..."}):p.length===0?e.jsx("div",{style:t.empty,children:"No auto-responders configured"}):e.jsx("div",{style:t.respondersList,children:p.map((o,n)=>e.jsxs("div",{style:t.responderCard,children:[e.jsxs("div",{style:t.responderInfo,children:[e.jsxs("div",{style:t.trigger,children:["Trigger: ",e.jsx("span",{style:t.triggerValue,children:o.trigger})]}),e.jsx("div",{style:t.response,children:o.response}),e.jsxs("div",{style:t.meta,children:[b.find(h=>h.value===o.match_type)?.label,o.case_sensitive&&" • Case Sensitive"," • Uses: "+(o.usage_count||0)]})]}),e.jsxs("div",{style:t.actions,children:[e.jsx("button",{onClick:()=>C(o.id,!o.enabled),style:t.toggleButton,title:o.enabled?"Disable":"Enable",children:o.enabled?e.jsx(z,{style:{color:"#43b581",fontSize:"24px"}}):e.jsx(B,{style:{color:"#99aab5",fontSize:"24px"}})}),e.jsx("button",{onClick:()=>w(o.id),style:t.deleteButton,title:"Delete",children:e.jsx(_,{})})]})]},n))})})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px 20px",borderBottom:"1px solid #2c2f33"},count:{fontSize:"14px",color:"#dcddde"},createButton:{padding:"8px 16px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center"},createForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #2c2f33"},formRow:{marginBottom:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"6px"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},textarea:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"},select:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",cursor:"pointer"},checkboxLabel:{fontSize:"14px",color:"#dcddde"},submitButton:{width:"100%",padding:"12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},respondersList:{display:"flex",flexDirection:"column",gap:"12px"},responderCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between"},responderInfo:{flex:1},trigger:{fontSize:"14px",color:"#99aab5",marginBottom:"8px"},triggerValue:{color:"#5865f2",fontWeight:"600",fontFamily:"monospace"},response:{fontSize:"14px",color:"#ffffff",marginBottom:"8px"},meta:{fontSize:"12px",color:"#99aab5"},actions:{display:"flex",gap:"12px",alignItems:"center"},toggleButton:{background:"none",border:"none",cursor:"pointer",padding:"4px"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"8px"}};export{N as default};
