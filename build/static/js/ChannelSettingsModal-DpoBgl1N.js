var fe=Object.defineProperty;var s=(i,h)=>fe(i,"name",{value:h,configurable:!0});import{j as e,r as l,f as ve}from"./react-core-Djgtqrmb.js";import{h as $,ax as ke,d as Y,bP as Se,a6 as ze,z as Z,f as V,aY as Ce,b9 as we,an as X,j as F,B as Te,k as Be,a0 as _e,aB as H,O as Ie,a as Re,az as Oe,a1 as Le}from"./icons-vendor-BW7dxHkX.js";import{t as x,e as D,c as Ke}from"./index-CjRzheBN.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,padding:"20px",overflow:"auto"},modal:{background:"#313338",width:"960px",maxWidth:"100%",borderRadius:"8px",overflow:"hidden",maxHeight:"calc(100vh - 40px)",display:"flex",flexDirection:"column",minHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.6)",position:"relative",alignSelf:"center"},header:{padding:"24px 28px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",alignItems:"center",color:"white",flexShrink:0},closeBtn:{background:"none",border:"none",color:"#bbb",cursor:"pointer",fontSize:"1.4em",transition:"color 0.2s",padding:"8px"},tabs:{display:"flex",borderBottom:"1px solid #1e1f22",background:"#2b2d31",flexShrink:0},tab:{flex:1,padding:"14px 20px",background:"transparent",border:"none",color:"#949ba4",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontSize:"1em",transition:"all 0.2s",borderBottom:"2px solid transparent"},tabActive:{flex:1,padding:"14px 20px",background:"transparent",border:"none",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontSize:"1em",fontWeight:"bold",borderBottom:"2px solid #5865f2"},body:{padding:"28px 32px",overflowY:"auto",flex:1},section:{marginBottom:"24px",color:"#dbdee1",fontSize:"1em"},input:{width:"100%",padding:"12px 14px",background:"#1e1f22",border:"1px solid #1e1f22",color:"white",borderRadius:"6px",marginTop:"8px",boxSizing:"border-box",fontSize:"0.95em",transition:"border-color 0.2s"},rolesList:{maxHeight:"250px",overflowY:"auto",background:"#2b2d31",padding:"12px",borderRadius:"6px",marginTop:"12px"},roleItem:{display:"flex",justifyContent:"space-between",padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid #333",color:"white",alignItems:"center",fontSize:"0.95em",borderRadius:"4px",transition:"background-color 0.2s"},footer:{display:"flex",justifyContent:"space-between",marginTop:"28px",paddingTop:"20px",borderTop:"1px solid #1e1f22"},saveBtn:{background:"#23a559",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:8,fontWeight:"bold",fontSize:"0.95em",transition:"background-color 0.2s"},deleteBtn:{background:"transparent",color:"#da373c",border:"1px solid #da373c",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:8,fontSize:"0.95em",transition:"all 0.2s"},permissionsHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid #1e1f22"},addPermBtn:{background:"#5865f2",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9em",fontWeight:"bold"},permSection:{marginBottom:"20px"},permissionItem:{background:"#2b2d31",padding:"12px",borderRadius:"6px",marginBottom:"10px",display:"flex",flexDirection:"column",gap:"8px",position:"relative"},removeBtn:{position:"absolute",top:"10px",right:"10px",background:"#da373c",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",cursor:"pointer",fontSize:"0.8em"},addPermModal:{background:"#2b2d31",padding:"20px",borderRadius:"8px",marginTop:"20px",border:"2px solid #5865f2"},cancelBtn:{background:"transparent",color:"#b9bbbe",border:"1px solid #4e5058",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"0.95em",transition:"all 0.2s"},confirmBtn:{background:"#5865f2",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"0.95em",fontWeight:"bold",transition:"background-color 0.2s"},label:{color:"#b5bac1",fontSize:"0.875em",fontWeight:"600",textTransform:"uppercase",marginBottom:"8px",display:"block",letterSpacing:"0.5px"},checkboxLabel:{display:"flex",alignItems:"center",gap:12,cursor:"pointer",fontSize:"0.95em",padding:"8px 0"},integrationHeader:{marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #1e1f22"},integrationCard:{background:"#2b2d31",borderRadius:"12px",padding:"20px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #3f4147",transition:"border-color 0.2s"},integrationCardHeader:{display:"flex",alignItems:"center",gap:"16px"},integrationIcon:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(88, 101, 242, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},integrationTitle:{color:"#fff",fontSize:"1em",fontWeight:"bold",margin:0},integrationDesc:{color:"#72767d",fontSize:"0.85em",margin:"4px 0 0 0"},integrationBtn:{background:"#5865f2",color:"white",border:"none",padding:"10px 18px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9em",fontWeight:"bold",transition:"background-color 0.2s"},advancedSection:{background:"#2b2d31",borderRadius:"12px",padding:"20px",marginBottom:"16px",border:"1px solid #3f4147"},advancedSectionTitle:{color:"#fff",fontSize:"1em",fontWeight:"bold",margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"10px"},advancedOption:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderTop:"1px solid #3f4147"},advancedOptionTitle:{color:"#dbdee1",fontSize:"0.95em",fontWeight:"500",margin:0},advancedOptionDesc:{color:"#72767d",fontSize:"0.8em",margin:"4px 0 0 0"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},statBox:{background:"#1e1f22",borderRadius:"8px",padding:"16px",textAlign:"center",display:"flex",flexDirection:"column",gap:"4px"},statValue:{color:"#5865f2",fontSize:"1.5em",fontWeight:"bold"},statLabel:{color:"#72767d",fontSize:"0.8em"},dangerZone:{background:"rgba(237, 66, 69, 0.1)",borderRadius:"12px",padding:"20px",marginTop:"24px",border:"1px solid rgba(237, 66, 69, 0.3)"},dangerZoneTitle:{color:"#ed4245",fontSize:"1em",fontWeight:"bold",margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"10px"},dangerBtnSmall:{background:"#ed4245",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"0.85em",fontWeight:"bold"},dangerBtnLarge:{background:"#ed4245",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9em",fontWeight:"bold",transition:"background-color 0.2s"}},Pe=s(({name:i,setName:h,isPrivate:r,handlePrivateChange:o,isNsfw:c,handleNsfwChange:p,isLocked:g,handleLockedChange:d,isReadOnly:u,handleReadOnlyChange:y,isVoiceChannel:v,userLimit:j,handleUserLimitChange:k,bitrate:S,setBitrate:z,selectedRoles:C,toggleRole:t,serverRoles:f,handleDelete:O,handleSave:B})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:n.section,children:[e.jsx("label",{style:n.label,children:"Kanal Adƒ±"}),e.jsx("input",{value:i,onChange:s(m=>h(m.target.value),"onChange"),style:n.input})]}),e.jsx("div",{style:n.section,children:e.jsxs("label",{style:n.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:r,onChange:o}),r?e.jsx($,{color:"#f04747"}):e.jsx(ke,{color:"#43b581"}),e.jsx("span",{children:r?"üîí √ñzel Kanal (ƒ∞zinli roller)":"üåç Herkese A√ßƒ±k Kanal"})]})}),r&&e.jsxs("div",{style:n.rolesList,children:[e.jsx("p",{style:{fontSize:"0.9em",color:"#ccc"},children:"Kimler eri≈üebilir?"}),f.map(m=>e.jsxs("div",{style:n.roleItem,onClick:s(()=>t(m.id),"onClick"),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:m.color}}),e.jsx("span",{children:m.name})]}),e.jsx("input",{type:"checkbox",checked:C.includes(m.id),readOnly:!0})]},m.id))]}),e.jsxs("div",{style:n.section,children:[e.jsxs("label",{style:n.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:c,onChange:p}),e.jsx(Y,{color:"#f04747",size:16}),e.jsx("span",{children:"üîû NSFW (18+ ƒ∞√ßerik)"})]}),e.jsx("p",{style:{fontSize:"0.875em",color:"#949ba4",marginTop:"8px",marginLeft:"28px",fontStyle:"italic"},children:"Yeti≈ükin i√ßerik uyarƒ±sƒ± g√∂sterilir."})]}),e.jsxs("div",{style:n.section,children:[e.jsxs("label",{style:n.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:g,onChange:d}),e.jsx($,{color:"#f04747",size:14}),e.jsx("span",{children:"üîí Kanal Kilitli"})]}),e.jsx("p",{style:{fontSize:"0.875em",color:"#949ba4",marginTop:"8px",marginLeft:"28px",fontStyle:"italic"},children:"Kimse mesaj g√∂nderemez (ge√ßici kilitleme)."})]}),e.jsxs("div",{style:n.section,children:[e.jsxs("label",{style:n.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:u,onChange:y}),e.jsx(Se,{color:"#faa61a",size:16}),e.jsx("span",{children:"üì¢ Duyuru Kanalƒ± (Sadece Admin Yazar)"})]}),e.jsx("p",{style:{fontSize:"0.875em",color:"#949ba4",marginTop:"8px",marginLeft:"28px",fontStyle:"italic"},children:"Herkes okuyabilir, sadece adminler yazabilir."})]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:n.section,children:[e.jsxs("label",{style:{...n.label,display:"flex",alignItems:"center",gap:10},children:[e.jsx(ze,{size:14})," Kullanƒ±cƒ± Limiti"]}),e.jsx("input",{type:"number",min:"0",max:"99",value:j,onChange:k,style:n.input,placeholder:"0 = Sƒ±nƒ±rsƒ±z"}),e.jsx("p",{style:{fontSize:"0.875em",color:"#949ba4",marginTop:"8px",fontStyle:"italic"},children:"Max ki≈üi sayƒ±sƒ± (0 = limitsiz)"})]}),e.jsxs("div",{style:n.section,children:[e.jsxs("label",{style:{...n.label,display:"flex",alignItems:"center",gap:10},children:[e.jsx(Z,{size:14})," Ses Kalitesi (Bitrate)"]}),e.jsxs("select",{value:S,onChange:s(m=>z(parseInt(m.target.value)),"onChange"),style:n.input,children:[e.jsx("option",{value:8,children:"8 kbps (D√º≈ü√ºk)"}),e.jsx("option",{value:32,children:"32 kbps"}),e.jsx("option",{value:64,children:"64 kbps (Normal)"}),e.jsx("option",{value:96,children:"96 kbps (ƒ∞yi)"}),e.jsx("option",{value:128,children:"128 kbps (Y√ºksek)"}),e.jsx("option",{value:256,children:"256 kbps (√áok Y√ºksek)"}),e.jsx("option",{value:384,children:"384 kbps (Maksimum)"})]}),e.jsx("p",{style:{fontSize:"0.85em",color:"#949ba4",marginTop:"6px",fontStyle:"italic"},children:"Y√ºksek bitrate = daha iyi ses"})]})]}),e.jsxs("div",{style:n.footer,children:[e.jsxs("button",{onClick:O,style:n.deleteBtn,children:[e.jsx(V,{})," Kanalƒ± Sil"]}),e.jsxs("button",{onClick:B,style:n.saveBtn,children:[e.jsx(Ce,{})," Kaydet"]})]})]}),"GeneralTab"),$e=s(({permissions:i,showAddPermission:h,setShowAddPermission:r,permissionType:o,setPermissionType:c,selectedRoleForPerm:p,setSelectedRoleForPerm:g,selectedUserForPerm:d,setSelectedUserForPerm:u,searchUser:y,setSearchUser:v,searchResults:j,setSearchResults:k,searchUsers:S,removePermission:z,addPermission:C})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:n.permissionsHeader,children:[e.jsxs("h4",{style:{margin:0,color:"#fff"},children:[e.jsx(we,{})," Kanal ƒ∞zinleri"]}),e.jsxs("button",{onClick:s(()=>r(!0),"onClick"),style:n.addPermBtn,children:[e.jsx(X,{})," ƒ∞zin Ekle"]})]}),i.role_permissions?.length>0&&e.jsxs("div",{style:n.permSection,children:[e.jsx("h5",{style:{color:"#b9bbbe",fontSize:"0.9em",marginBottom:"10px"},children:"ROL ƒ∞Zƒ∞NLERƒ∞"}),i.role_permissions.map(t=>e.jsxs("div",{style:n.permissionItem,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:t.role_color}}),e.jsx("span",{style:{fontWeight:"bold"},children:t.role_name})]}),e.jsxs("div",{style:{fontSize:"0.85em",color:"#949ba4",marginTop:"5px"},children:[t.can_view&&"üëÅ G√∂r√ºnt√ºle ",t.can_send_messages&&"‚úèÔ∏è Mesaj ",t.can_connect&&"üé§ Baƒülan ",t.can_speak&&"üîä Konu≈ü "]}),e.jsx("button",{onClick:s(()=>z(t.id),"onClick"),style:n.removeBtn,children:"Kaldƒ±r"})]},t.id))]}),i.user_permissions?.length>0&&e.jsxs("div",{style:n.permSection,children:[e.jsx("h5",{style:{color:"#b9bbbe",fontSize:"0.9em",marginBottom:"10px"},children:"KULLANICI ƒ∞Zƒ∞NLERƒ∞"}),i.user_permissions.map(t=>e.jsxs("div",{style:n.permissionItem,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("img",{src:t.avatar||"/default-avatar.png",alt:t.username,style:{width:24,height:24,borderRadius:"50%"}}),e.jsx("span",{children:t.username})]}),e.jsxs("div",{style:{fontSize:"0.85em",color:"#949ba4",marginTop:"5px"},children:[t.can_view&&"üëÅ G√∂r√ºnt√ºle ",t.can_send_messages&&"‚úèÔ∏è Mesaj ",t.can_connect&&"üé§ Baƒülan "]}),e.jsx("button",{onClick:s(()=>z(t.id),"onClick"),style:n.removeBtn,children:"Kaldƒ±r"})]},t.id))]}),i.role_permissions?.length===0&&i.user_permissions?.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#949ba4"},children:[e.jsx($,{size:40,style:{opacity:.3,marginBottom:"10px"}}),e.jsx("p",{children:"Hen√ºz √∂zel izin tanƒ±mlanmamƒ±≈ü"}),e.jsx("p",{style:{fontSize:"0.85em"},children:"Belirli roller veya kullanƒ±cƒ±lara √∂zel izinler tanƒ±mlayabilirsiniz"})]}),h&&e.jsxs("div",{style:n.addPermModal,children:[e.jsx("h5",{style:{color:"#fff",marginBottom:"15px"},children:"ƒ∞zin Ekle"}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{color:"#b9bbbe",fontSize:"0.9em"},children:"ƒ∞zin T√ºr√º"}),e.jsxs("select",{value:o,onChange:s(t=>c(t.target.value),"onChange"),style:n.input,children:[e.jsx("option",{value:"role",children:"Rol"}),e.jsx("option",{value:"user",children:"Kullanƒ±cƒ±"})]})]}),o==="role"&&e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{color:"#b9bbbe",fontSize:"0.9em"},children:"Rol Se√ß"}),e.jsxs("select",{value:p||"",onChange:s(t=>g(t.target.value),"onChange"),style:n.input,children:[e.jsx("option",{value:"",children:"Rol se√ßin..."}),i.available_roles?.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),o==="user"&&e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{color:"#b9bbbe",fontSize:"0.9em"},children:"Kullanƒ±cƒ± Ara"}),e.jsx("input",{type:"text",placeholder:"Kullanƒ±cƒ± adƒ± yazƒ±n... (min 2 karakter)",value:y,onChange:s(t=>{v(t.target.value),S(t.target.value)},"onChange"),style:n.input}),j.length>0&&e.jsx("div",{style:{background:"#1e1f22",borderRadius:"6px",marginTop:"8px",maxHeight:"200px",overflowY:"auto",border:"1px solid #4e5058"},children:j.map(t=>e.jsxs("div",{onClick:s(()=>{u(t.id),v(t.username),k([])},"onClick"),style:{padding:"10px 12px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",borderBottom:"1px solid #2b2d31",backgroundColor:d===t.id?"#5865f2":"transparent",transition:"background-color 0.2s"},onMouseEnter:s(f=>{d!==t.id&&(f.currentTarget.style.backgroundColor="#2b2d31")},"onMouseEnter"),onMouseLeave:s(f=>{d!==t.id&&(f.currentTarget.style.backgroundColor="transparent")},"onMouseLeave"),children:[e.jsx("img",{src:t.avatar||"/default-avatar.png",alt:t.username,style:{width:24,height:24,borderRadius:"50%"}}),e.jsx("span",{style:{color:"#fff",fontSize:"0.95em"},children:t.username})]},t.id))}),y&&j.length===0&&e.jsx("p",{style:{fontSize:"0.8em",color:"#949ba4",marginTop:"5px"},children:y.length<2?"En az 2 karakter girin":"Kullanƒ±cƒ± bulunamadƒ±"}),d&&e.jsxs("p",{style:{fontSize:"0.85em",color:"#43b581",marginTop:"5px"},children:["‚úÖ Kullanƒ±cƒ± se√ßildi: ",e.jsx("strong",{children:y})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:s(()=>{r(!1),v(""),k([]),u(null),g(null)},"onClick"),style:n.cancelBtn,children:"ƒ∞ptal"}),e.jsx("button",{onClick:C,style:n.confirmBtn,children:"Ekle"})]})]})]}),"PermissionsTab"),Fe=s(({room:i,fetchWithAuth:h,apiBaseUrl:r,notificationPref:o,setNotificationPref:c})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:n.integrationHeader,children:[e.jsxs("h4",{style:{margin:0,color:"#fff"},children:[e.jsx(F,{})," Kanal Entegrasyonlarƒ±"]}),e.jsx("p",{style:{color:"#72767d",fontSize:"13px",marginTop:"8px"},children:"Webhooklar, botlar ve dƒ±≈ü servisler ile entegrasyon ayarlarƒ±"})]}),e.jsxs("div",{style:n.integrationCard,children:[e.jsxs("div",{style:n.integrationCardHeader,children:[e.jsx("div",{style:n.integrationIcon,children:e.jsx(Te,{style:{color:"#5865f2",fontSize:"20px"}})}),e.jsxs("div",{children:[e.jsx("h5",{style:n.integrationTitle,children:"Webhook"}),e.jsx("p",{style:n.integrationDesc,children:"Bu kanala mesaj g√∂ndermek i√ßin webhook URL'i olu≈üturun"})]})]}),e.jsxs("button",{style:n.integrationBtn,onClick:s(async()=>{try{const p=await h(`${r}/webhooks/create/`,{method:"POST",body:JSON.stringify({room_id:i.id,name:`${i.name} Webhook`})});if(p.ok){const g=await p.json();navigator.clipboard.writeText(g.url),x.success("Webhook olu≈üturuldu ve kopyalandƒ±!")}else x.error("Webhook olu≈üturulamadƒ±")}catch{x.error("Hata olu≈ütu")}},"onClick"),children:[e.jsx(X,{})," Webhook Olu≈ütur"]})]}),e.jsxs("div",{style:n.integrationCard,children:[e.jsxs("div",{style:n.integrationCardHeader,children:[e.jsx("div",{style:{...n.integrationIcon,backgroundColor:"rgba(250, 166, 26, 0.2)"},children:e.jsx(Be,{style:{color:"#faa61a",fontSize:"20px"}})}),e.jsxs("div",{children:[e.jsx("h5",{style:n.integrationTitle,children:"Bildirim Ayarlarƒ±"}),e.jsx("p",{style:n.integrationDesc,children:"Bu kanal i√ßin bildirim tercihlerini yapƒ±landƒ±rƒ±n"})]})]}),e.jsxs("select",{style:{...n.input,maxWidth:"200px"},value:o,onChange:s(async p=>{const g=p.target.value;c(g);try{await h(`${r}/channels/${i.slug}/notification-preference/`,{method:"POST",body:JSON.stringify({preference:g})}),x.success("Bildirim tercihi g√ºncellendi!")}catch{x.error("Bildirim tercihi g√ºncellenemedi")}},"onChange"),children:[e.jsx("option",{value:"all",children:"T√ºm Mesajlar"}),e.jsx("option",{value:"mentions",children:"Sadece Mention"}),e.jsx("option",{value:"none",children:"Bildirimsiz"})]})]}),e.jsxs("div",{style:n.integrationCard,children:[e.jsxs("div",{style:n.integrationCardHeader,children:[e.jsx("div",{style:{...n.integrationIcon,backgroundColor:"rgba(67, 181, 129, 0.2)"},children:e.jsx(_e,{style:{color:"#43b581",fontSize:"20px"}})}),e.jsxs("div",{children:[e.jsx("h5",{style:n.integrationTitle,children:"Kanal Takibi"}),e.jsx("p",{style:n.integrationDesc,children:"Bu kanalƒ± ba≈üka bir sunucuya yansƒ±tƒ±n (mirror)"})]})]}),e.jsxs("button",{style:{...n.integrationBtn,backgroundColor:"#43b581"},onClick:s(async()=>{try{const p=await h(`${r}/channels/${i.slug}/follow-link/`,{method:"POST"});if(p.ok){const g=await p.json();g.url?(navigator.clipboard.writeText(g.url),x.success("Takip linki olu≈üturuldu ve kopyalandƒ±!")):x.success("Kanal takibi aktif edildi!")}else x.error("Takip linki olu≈üturulamadƒ±")}catch{x.error("Hata olu≈ütu")}},"onClick"),children:[e.jsx(F,{})," Takip Linki Olu≈ütur"]})]})]}),"IntegrationsTab"),He=s(({room:i,serverRoles:h,deleteHistoryDays:r,setDeleteHistoryDays:o,fetchWithAuth:c,apiBaseUrl:p,updateChannelRestriction:g,handleDelete:d})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:n.integrationHeader,children:[e.jsxs("h4",{style:{margin:0,color:"#fff"},children:[e.jsx(H,{})," Geli≈ümi≈ü Ayarlar"]}),e.jsx("p",{style:{color:"#72767d",fontSize:"13px",marginTop:"8px"},children:"Kanal ge√ßmi≈üi, ar≈üiv ve tehlikeli i≈ülemler"})]}),e.jsxs("div",{style:n.advancedSection,children:[e.jsxs("h5",{style:n.advancedSectionTitle,children:[e.jsx(H,{})," Mesaj Ge√ßmi≈üi"]}),e.jsxs("div",{style:n.advancedOption,children:[e.jsxs("div",{children:[e.jsx("p",{style:n.advancedOptionTitle,children:"Mesaj Ge√ßmi≈üini Sil"}),e.jsx("p",{style:n.advancedOptionDesc,children:"Son X g√ºn√ºn mesajlarƒ±nƒ± toplu olarak sil"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("select",{style:{...n.input,width:"100px"},value:r,onChange:s(u=>o(u.target.value),"onChange"),children:[e.jsx("option",{value:"1",children:"1 G√ºn"}),e.jsx("option",{value:"7",children:"7 G√ºn"}),e.jsx("option",{value:"30",children:"30 G√ºn"}),e.jsx("option",{value:"all",children:"T√ºm√º"})]}),e.jsx("button",{style:n.dangerBtnSmall,onClick:s(async()=>{if(await D(`Son ${r==="all"?"t√ºm":r+" g√ºnl√ºk"} mesajlarƒ± silmek istediƒüinize emin misiniz? Bu i≈ülem geri alƒ±namaz!`))try{(await c(`${p}/rooms/${i.slug}/clear-history/`,{method:"POST",body:JSON.stringify({days:r})})).ok?x.success("Mesaj ge√ßmi≈üi silindi!"):x.error("Mesaj ge√ßmi≈üi silinemedi")}catch{x.error("Hata olu≈ütu")}},"onClick"),children:"Sil"})]})]})]}),e.jsxs("div",{style:n.advancedSection,children:[e.jsxs("h5",{style:n.advancedSectionTitle,children:[e.jsx(Z,{})," Slow Mode"]}),e.jsxs("div",{style:n.advancedOption,children:[e.jsxs("div",{children:[e.jsx("p",{style:n.advancedOptionTitle,children:"Mesaj Bekleme S√ºresi"}),e.jsx("p",{style:n.advancedOptionDesc,children:"Kullanƒ±cƒ±lar arasƒ±ndaki minimum bekleme s√ºresi"})]}),e.jsxs("select",{style:{...n.input,width:"150px"},onChange:s(async u=>{await g({slow_mode_seconds:parseInt(u.target.value)}),x.success("Slow mode g√ºncellendi!")},"onChange"),children:[e.jsx("option",{value:"0",children:"Kapalƒ±"}),e.jsx("option",{value:"5",children:"5 Saniye"}),e.jsx("option",{value:"10",children:"10 Saniye"}),e.jsx("option",{value:"30",children:"30 Saniye"}),e.jsx("option",{value:"60",children:"1 Dakika"}),e.jsx("option",{value:"300",children:"5 Dakika"}),e.jsx("option",{value:"900",children:"15 Dakika"}),e.jsx("option",{value:"3600",children:"1 Saat"})]})]})]}),e.jsxs("div",{style:n.advancedSection,children:[e.jsxs("h5",{style:n.advancedSectionTitle,children:[e.jsx(Ie,{})," Kanal ƒ∞statistikleri"]}),e.jsxs("div",{style:n.statsGrid,children:[e.jsxs("div",{style:n.statBox,children:[e.jsx("span",{style:n.statValue,children:i.message_count||0}),e.jsx("span",{style:n.statLabel,children:"Toplam Mesaj"})]}),e.jsxs("div",{style:n.statBox,children:[e.jsx("span",{style:n.statValue,children:i.member_count||h?.length||0}),e.jsx("span",{style:n.statLabel,children:"Eri≈üebilen √úye"})]}),e.jsxs("div",{style:n.statBox,children:[e.jsx("span",{style:n.statValue,children:i.file_count||0}),e.jsx("span",{style:n.statLabel,children:"Payla≈üƒ±lan Dosya"})]})]})]}),e.jsxs("div",{style:n.dangerZone,children:[e.jsxs("h5",{style:n.dangerZoneTitle,children:[e.jsx(Y,{})," Tehlikeli B√∂lge"]}),e.jsxs("div",{style:n.advancedOption,children:[e.jsxs("div",{children:[e.jsx("p",{style:n.advancedOptionTitle,children:"Kanalƒ± Sil"}),e.jsx("p",{style:n.advancedOptionDesc,children:"Bu i≈ülem geri alƒ±namaz! T√ºm mesajlar silinir."})]}),e.jsxs("button",{onClick:d,style:n.dangerBtnLarge,children:[e.jsx(V,{})," Kanalƒ± Sil"]})]})]})]}),"AdvancedTab"),Ze=s(({room:i,serverRoles:h,onClose:r,fetchWithAuth:o,apiBaseUrl:c})=>{const{overlayProps:p,dialogProps:g}=Ke({onClose:r,label:"Kanal Ayarlarƒ±"}),[d,u]=l.useState("general"),[y,v]=l.useState(i.name),[j,k]=l.useState(i.allowed_roles||[]),[S,z]=l.useState(i.is_private||!1),[C,t]=l.useState(i.is_nsfw||!1),[f,O]=l.useState(i.is_locked||!1),[B,m]=l.useState(i.admin_only_chat||!1),[M,Q]=l.useState(i.user_limit||0),[N,q]=l.useState(i.bitrate||64),[U,ee]=l.useState({role_permissions:[],user_permissions:[],available_roles:[],available_users:[]}),[ne,E]=l.useState(!1),[_,ie]=l.useState("role"),[L,G]=l.useState(null),[K,W]=l.useState(null),[te,A]=l.useState(""),[se,w]=l.useState([]),[ae,le]=l.useState("all"),[re,oe]=l.useState("7"),T=i.channel_type==="voice",de=l.useCallback(a=>{z(a.target.checked),I({is_private:a.target.checked})},[]),ce=l.useCallback(a=>{t(a.target.checked)},[]),xe=l.useCallback(a=>{O(a.target.checked),I({is_locked:a.target.checked})},[]),pe=l.useCallback(a=>{m(a.target.checked)},[]),ge=l.useCallback(a=>{const b=parseInt(a.target.value)||0;Q(b),I({user_limit:b})},[]);l.useEffect(()=>{d==="permissions"&&P()},[d]);const P=s(async()=>{try{const b=await(await o(`${c}/channels/${i.slug}/permissions/`)).json();ee(b)}catch{}},"loadPermissions"),ue=s(async()=>{try{y!==i.name&&await o(`${c}/rooms/${i.slug}/settings/`,{method:"POST",body:JSON.stringify({action:"rename",name:y})}),S&&await o(`${c}/rooms/${i.slug}/settings/`,{method:"POST",body:JSON.stringify({action:"update_roles",allowed_roles:j})}),await o(`${c}/rooms/${i.slug}/settings/`,{method:"POST",body:JSON.stringify({action:"update_settings",is_private:S,is_nsfw:C,is_locked:f,admin_only_chat:B,user_limit:T?M:null,bitrate:T?N:null})}),r()}catch{x.error("‚ùå Hata olu≈ütu.")}},"handleSave"),J=s(async()=>{if(await D("Bu kanalƒ± kalƒ±cƒ± olarak silmek istiyor musun?"))try{await o(`${c}/rooms/${i.slug}/settings/`,{method:"POST",body:JSON.stringify({action:"delete"})}),r()}catch{}},"handleDelete"),he=s(a=>{j.includes(a)?k(b=>b.filter(R=>R!==a)):k(b=>[...b,a])},"toggleRole"),be=s(async()=>{if(_==="role"&&!L){x.error("‚ùå L√ºtfen bir rol se√ßin!");return}if(_==="user"&&!K){x.error("‚ùå L√ºtfen bir kullanƒ±cƒ± se√ßin!");return}try{const a={room_id:i.id,permissions:{can_view:!0,can_send_messages:!0,can_read_history:!0,can_connect:!0,can_speak:!0,can_video:!0}};_==="role"?a.role_id=L:a.user_id=K,await o(`${c}/channels/permissions/add/`,{method:"POST",body:JSON.stringify(a)}),E(!1),G(null),W(null),A(""),w([]),P()}catch(a){x.error("‚ùå ƒ∞zin eklenemedi! Hata: "+(a.message||"Bilinmeyen hata"))}},"addPermission"),me=s(async a=>{if(!a||a.length<2){w([]);return}try{const R=await(await o(`${c}/users/search/?q=${encodeURIComponent(a)}`)).json();w(R.users||R||[])}catch{w([])}},"searchUsers"),ye=s(async a=>{if(await D("Bu izni kaldƒ±rmak istediƒüinizden emin misiniz?"))try{await o(`${c}/channels/permissions/${a}/remove/`,{method:"DELETE"}),P()}catch{}},"removePermission"),I=s(async a=>{try{await o(`${c}/channels/${i.slug}/restriction/`,{method:"PATCH",body:JSON.stringify(a)})}catch{x.error("‚ùå Hata olu≈ütu!")}},"updateChannelRestriction"),je=e.jsx("div",{style:n.overlay,...p,children:e.jsxs("div",{style:n.modal,...g,children:[e.jsxs("div",{style:n.header,children:[e.jsxs("div",{style:n.headerLeft,children:[e.jsx("div",{style:n.channelIcon,children:T?"üîä":"#"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1em",color:"#fff"},children:i.name}),e.jsxs("span",{style:{fontSize:"0.8em",color:"#72767d"},children:[T?"Ses Kanalƒ±":"Metin Kanalƒ±"," Ayarlarƒ±"]})]})]}),e.jsx("button",{onClick:r,style:n.closeBtn,children:e.jsx(Re,{})})]}),e.jsxs("div",{style:n.tabs,children:[e.jsxs("button",{style:d==="general"?n.tabActive:n.tab,onClick:s(()=>u("general"),"onClick"),children:[e.jsx(Oe,{})," Genel"]}),e.jsxs("button",{style:d==="permissions"?n.tabActive:n.tab,onClick:s(()=>u("permissions"),"onClick"),children:[e.jsx(Le,{})," ƒ∞zinler"]}),e.jsxs("button",{style:d==="integrations"?n.tabActive:n.tab,onClick:s(()=>u("integrations"),"onClick"),children:[e.jsx(F,{})," Entegrasyonlar"]}),e.jsxs("button",{style:d==="advanced"?n.tabActive:n.tab,onClick:s(()=>u("advanced"),"onClick"),children:[e.jsx(H,{})," Geli≈ümi≈ü"]})]}),e.jsxs("div",{style:n.body,children:[d==="general"&&e.jsx(Pe,{name:y,setName:v,isPrivate:S,handlePrivateChange:de,isNsfw:C,handleNsfwChange:ce,isLocked:f,handleLockedChange:xe,isReadOnly:B,handleReadOnlyChange:pe,isVoiceChannel:T,userLimit:M,handleUserLimitChange:ge,bitrate:N,setBitrate:q,selectedRoles:j,toggleRole:he,serverRoles:h,handleDelete:J,handleSave:ue}),d==="permissions"&&e.jsx($e,{permissions:U,showAddPermission:ne,setShowAddPermission:E,permissionType:_,setPermissionType:ie,selectedRoleForPerm:L,setSelectedRoleForPerm:G,selectedUserForPerm:K,setSelectedUserForPerm:W,searchUser:te,setSearchUser:A,searchResults:se,setSearchResults:w,searchUsers:me,removePermission:ye,addPermission:be}),d==="integrations"&&e.jsx(Fe,{room:i,fetchWithAuth:o,apiBaseUrl:c,notificationPref:ae,setNotificationPref:le}),d==="advanced"&&e.jsx(He,{room:i,serverRoles:h,deleteHistoryDays:re,setDeleteHistoryDays:oe,fetchWithAuth:o,apiBaseUrl:c,updateChannelRestriction:I,handleDelete:J})]})]})});return ve.createPortal(je,document.body)},"ChannelSettingsModal");export{Ze as default};
