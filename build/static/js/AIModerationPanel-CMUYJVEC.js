var j=Object.defineProperty;var n=(s,t)=>j(s,"name",{value:t,configurable:!0});import{r as c,j as e}from"./react-core-Djgtqrmb.js";import{d as u,ay as v,a0 as S,a1 as k,w as T}from"./icons-vendor-BW7dxHkX.js";import{a as f}from"./index-BNjLOQm3.js";import{g as m,t as b}from"./index-B9TNnJpS.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const w=n(s=>({container:{padding:s?"16px":"24px",maxWidth:"1200px",margin:"0 auto"},header:{marginBottom:"32px"},title:{fontSize:s?"24px":"32px",fontWeight:"700",color:"rgba(255,255,255,0.95)",display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},subtitle:{fontSize:s?"14px":"16px",color:"rgba(255,255,255,0.6)"},statsGrid:{display:"grid",gridTemplateColumns:s?"1fr 1fr":"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},statCard:{background:"linear-gradient(135deg, rgba(88,101,242,0.1), rgba(114,137,218,0.1))",border:"1px solid rgba(88,101,242,0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},statValue:{fontSize:s?"24px":"32px",fontWeight:"700",color:"#5865f2",marginBottom:"8px"},statLabel:{fontSize:"14px",color:"rgba(255,255,255,0.7)"},section:{background:"rgba(30,31,34,0.6)",border:"1px solid rgba(88,101,242,0.2)",borderRadius:"16px",padding:s?"20px":"24px",marginBottom:"24px"},sectionTitle:{fontSize:"20px",fontWeight:"600",color:"rgba(255,255,255,0.9)",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},setting:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",borderBottom:"1px solid rgba(88,101,242,0.1)"},settingInfo:{flex:1},settingLabel:{fontSize:"16px",fontWeight:"500",color:"rgba(255,255,255,0.9)",marginBottom:"4px"},settingDesc:{fontSize:"13px",color:"rgba(255,255,255,0.6)"},switch:n(t=>({width:"56px",height:"32px",background:t?"linear-gradient(135deg, #43b581, #4caf50)":"rgba(255,255,255,0.2)",borderRadius:"16px",position:"relative",cursor:"pointer",transition:"all 0.3s ease",border:"2px solid rgba(88,101,242,0.3)"}),"switch"),switchKnob:n(t=>({width:"26px",height:"26px",background:"white",borderRadius:"50%",position:"absolute",top:"1px",left:t?"26px":"1px",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}),"switchKnob"),slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.2)",outline:"none",marginTop:"8px"},flagsList:{display:"flex",flexDirection:"column",gap:"12px"},flagCard:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(218,55,60,0.4)",borderRadius:"12px",padding:"16px"},flagHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},flagType:n(t=>({display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",background:t==="spam"?"rgba(218,55,60,0.2)":t==="nsfw"?"rgba(240,183,50,0.2)":"rgba(88,101,242,0.2)",color:t==="spam"?"#da373c":t==="nsfw"?"#f0b732":"#5865f2"}),"flagType"),flagMessage:{background:"rgba(0,0,0,0.4)",padding:"12px",borderRadius:"8px",color:"rgba(255,255,255,0.8)",fontSize:"14px",marginBottom:"12px",fontFamily:"monospace"},flagActions:{display:"flex",gap:"8px",flexWrap:"wrap"},actionBtn:n(t=>({padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",minHeight:"36px",background:t==="delete"?"rgba(218,55,60,0.2)":t==="timeout"?"rgba(240,183,50,0.2)":"rgba(67,181,129,0.2)",color:t==="delete"?"#da373c":t==="timeout"?"#f0b732":"#43b581",border:`1px solid ${t==="delete"?"rgba(218,55,60,0.4)":t==="timeout"?"rgba(240,183,50,0.4)":"rgba(67,181,129,0.4)"}`}),"actionBtn"),saveBtn:{width:"100%",padding:"16px",background:"linear-gradient(135deg, #5865f2, #7289da)",border:"none",borderRadius:"12px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginTop:"24px",transition:"all 0.2s ease",minHeight:"48px"}}),"getStyles"),A={spamDetection:!0,profanityFilter:!0,nsfwDetection:!0,toxicityThreshold:70,autoTimeout:!1,autoDelete:!1,warningCount:3},B=n((s,t)=>{const[d,r]=c.useState(A),[g,l]=c.useState([]),[p,x]=c.useState({messagesScanned:0,flaggedToday:0,autoModActions:0,accuracy:0}),[h,i]=c.useState(!1),a=n(async()=>{i(!0);try{const o=await f.get(`${m()}/moderation/${s}/`,{headers:{Authorization:`Bearer ${t}`}});o.data.settings&&r(o.data.settings),o.data.recent_flags&&l(o.data.recent_flags),o.data.stats&&x(o.data.stats)}catch{}finally{i(!1)}},"loadModeration");return c.useEffect(()=>{a()},[]),{settings:d,setSettings:r,recentFlags:g,stats:p,isLoading:h,saveSettings:n(async()=>{try{await f.post(`${m()}/moderation/${s}/update/`,{settings:d},{headers:{Authorization:`Bearer ${t}`}}),b.success("âœ… Moderation settings saved!")}catch{b.error("âŒ Failed to save settings")}},"saveSettings"),handleAction:n(async(o,y)=>{try{await f.post(`${m()}/moderation/flag/${o}/action/`,{action:y},{headers:{Authorization:`Bearer ${t}`}}),a()}catch{}},"handleAction")}},"useAIModeration"),z=n(({flag:s,styles:t,onAction:d})=>e.jsxs("div",{style:t.flagCard,children:[e.jsxs("div",{style:t.flagHeader,children:[e.jsxs("div",{children:[e.jsxs("span",{style:t.flagType(s.type),children:[e.jsx(u,{})," ",s.type.toUpperCase()]}),e.jsxs("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.5)",marginTop:"8px"},children:[s.user," ","â€¢"," ",s.timestamp]})]}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"700",color:s.confidence>80?"#da373c":"#f0b732"},children:[s.confidence,"%"]})]}),e.jsx("div",{style:t.flagMessage,children:s.message}),e.jsxs("div",{style:t.flagActions,children:[e.jsxs("button",{onClick:n(()=>d(s.id,"delete"),"onClick"),style:t.actionBtn("delete"),children:[e.jsx(v,{})," Delete"]}),e.jsx("button",{onClick:n(()=>d(s.id,"timeout"),"onClick"),style:t.actionBtn("timeout"),children:"Timeout User"}),e.jsxs("button",{onClick:n(()=>d(s.id,"dismiss"),"onClick"),style:t.actionBtn("dismiss"),children:[e.jsx(S,{})," Dismiss"]})]})]}),"FlagCard"),C=[{key:"spamDetection",label:"Spam Detection",desc:"Detect repeated or mass messages"},{key:"profanityFilter",label:"Profanity Filter",desc:"Block offensive language"},{key:"nsfwDetection",label:"NSFW Detection",desc:"Detect inappropriate images"}],F=[{key:"messagesScanned",label:"Messages Scanned",fmt:n(s=>s.toLocaleString(),"fmt")},{key:"flaggedToday",label:"Flagged Today"},{key:"autoModActions",label:"Auto Actions"},{key:"accuracy",label:"Accuracy",suffix:"%"}],K=n(({serverSlug:s,token:t,isMobile:d})=>{const{settings:r,setSettings:g,recentFlags:l,stats:p,saveSettings:x,handleAction:h}=B(s,t),i=w(d);return e.jsxs("div",{style:i.container,children:[e.jsxs("div",{style:i.header,children:[e.jsxs("h1",{style:i.title,children:[e.jsx(k,{})," AI Moderation"]}),e.jsx("p",{style:i.subtitle,children:"Automated content filtering powered by machine learning"})]}),e.jsx("div",{style:i.statsGrid,children:F.map(a=>e.jsxs("div",{style:i.statCard,children:[e.jsxs("div",{style:i.statValue,children:[a.fmt?a.fmt(p[a.key]):p[a.key],a.suffix||""]}),e.jsx("div",{style:i.statLabel,children:a.label})]},a.key))}),e.jsxs("div",{style:i.section,children:[e.jsxs("h2",{style:i.sectionTitle,children:["âš™ï¸"," Detection Settings"]}),C.map(a=>e.jsxs("div",{style:i.setting,children:[e.jsxs("div",{style:i.settingInfo,children:[e.jsx("div",{style:i.settingLabel,children:a.label}),e.jsx("div",{style:i.settingDesc,children:a.desc})]}),e.jsx("div",{style:i.switch(r[a.key]),onClick:n(()=>g({...r,[a.key]:!r[a.key]}),"onClick"),children:e.jsx("div",{style:i.switchKnob(r[a.key])})})]},a.key)),e.jsxs("div",{style:i.setting,children:[e.jsxs("div",{style:i.settingInfo,children:[e.jsxs("div",{style:i.settingLabel,children:["Toxicity Threshold: ",r.toxicityThreshold,"%"]}),e.jsx("div",{style:i.settingDesc,children:"Sensitivity level for toxic content"})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:r.toxicityThreshold,onChange:n(a=>g({...r,toxicityThreshold:parseInt(a.target.value)}),"onChange"),style:i.slider})]})]}),e.jsxs("div",{style:i.section,children:[e.jsxs("h2",{style:i.sectionTitle,children:[e.jsx(u,{})," Recent Flags (",l.length,")"]}),l.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"rgba(255,255,255,0.5)"},children:[e.jsx(T,{size:48}),e.jsx("p",{style:{marginTop:"16px"},children:"No recent violations detected"})]}):e.jsx("div",{style:i.flagsList,children:l.map(a=>e.jsx(z,{flag:a,styles:i,onAction:h},a.id))})]}),e.jsxs("button",{onClick:x,style:i.saveBtn,children:["ðŸ’¾"," Save Settings"]})]})},"AIModerationPanel");export{K as default};
