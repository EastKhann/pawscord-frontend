import{r,d as e,i as O,y as I,am as z}from"./react-core-DMT_QkRe.js";const j=({onClose:i,fetchWithAuth:b,apiBaseUrl:y,activeRoomSlug:f})=>{const[s,h]=r.useState(""),[l,c]=r.useState(["",""]),[m,E]=r.useState(!1),[p,k]=r.useState("3600"),[u,g]=r.useState(!1),[x,a]=r.useState(null),v=(t,o)=>{const n=[...l];n[t]=o,c(n)},C=()=>{l.length<10&&c([...l,""])},S=t=>{if(l.length>2){const o=l.filter((n,d)=>d!==t);c(o)}},w=async t=>{if(t.preventDefault(),a(null),!s.trim()){a("Soru boş olamaz.");return}const o=l.filter(n=>n.trim()!=="");if(o.length<2){a("En az 2 seçenek girmelisiniz.");return}g(!0);try{const n=await b(`${y}/api/polls/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_slug:f,question:s,options:o,allow_multiple:m,expires_in:p?parseInt(p):null})});if(n.ok)i();else{const d=await n.json();a(d.error||"Anket oluşturulamadı.")}}catch(n){a("Bir hata oluştu: "+n.message)}finally{g(!1)}};return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3}},e.createElement("div",{style:{backgroundColor:"#36393f",padding:"20px",borderRadius:"8px",width:"400px",maxWidth:"90%",color:"white",display:"flex",flexDirection:"column",gap:"15px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h3",{style:{margin:0}},"Anket Oluştur"),e.createElement("button",{onClick:i,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer"}},e.createElement(O,null))),x&&e.createElement("div",{style:{color:"#ed4245",fontSize:"14px"}},x),e.createElement("input",{type:"text",placeholder:"Soru ne?",value:s,onChange:t=>h(t.target.value),style:{padding:"10px",borderRadius:"4px",border:"none",backgroundColor:"#202225",color:"white"}}),e.createElement("div",{style:{maxHeight:"200px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"}},l.map((t,o)=>e.createElement("div",{key:o,style:{display:"flex",gap:"5px"}},e.createElement("input",{type:"text",placeholder:`Seçenek ${o+1}`,value:t,onChange:n=>v(o,n.target.value),style:{flex:1,padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#202225",color:"white"}}),l.length>2&&e.createElement("button",{onClick:()=>S(o),style:{background:"none",border:"none",color:"#ed4245",cursor:"pointer"}},e.createElement(I,null))))),l.length<10&&e.createElement("button",{onClick:C,style:{display:"flex",alignItems:"center",gap:"5px",background:"none",border:"none",color:"#3ba55d",cursor:"pointer",alignSelf:"flex-start"}},e.createElement(z,null)," Seçenek Ekle"),e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"10px"}},e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"}},e.createElement("input",{type:"checkbox",checked:m,onChange:t=>E(t.target.checked)}),"Birden çok seçime izin ver"),e.createElement("select",{value:p,onChange:t=>k(t.target.value),style:{padding:"8px",borderRadius:"4px",backgroundColor:"#202225",color:"white",border:"none"}},e.createElement("option",{value:"3600"},"1 Saat"),e.createElement("option",{value:"86400"},"24 Saat"),e.createElement("option",{value:"604800"},"1 Hafta"),e.createElement("option",{value:""},"Süresiz"))),e.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"10px"}},e.createElement("button",{onClick:i,style:{padding:"10px 20px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:"white",cursor:"pointer"}},"İptal"),e.createElement("button",{onClick:w,disabled:u,style:{padding:"10px 20px",borderRadius:"4px",border:"none",backgroundColor:"#5865f2",color:"white",cursor:"pointer",opacity:u?.7:1}},u?"Oluşturuluyor...":"Oluştur"))))};export{j as default};
