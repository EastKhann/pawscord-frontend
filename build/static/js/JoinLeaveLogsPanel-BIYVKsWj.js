import{r as i,b as e}from"./react-core-9vc7GIjk.js";import{bu as x,a as L,ae as S,bv as w}from"./icons-vendor-u_f-1GKM.js";import{t as d}from"./index-Bm9YmRqY.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const F=({fetchWithAuth:f,apiBaseUrl:p,onClose:u,serverId:s})=>{const[a,y]=i.useState([]),[b,g]=i.useState(!1),[n,c]=i.useState("all");i.useEffect(()=>{v()},[s]);const v=async()=>{g(!0);try{const l=await(await f(`${p}/servers/${s}/logs/`)).json();y(l.logs||[])}catch{d.error("Failed to load join/leave logs")}finally{g(!1)}},E=async()=>{try{const l=await(await f(`${p}/servers/${s}/logs/export/`)).blob(),h=window.URL.createObjectURL(l),r=document.createElement("a");r.href=h,r.download=`join_leave_logs_${new Date().toISOString()}.csv`,document.body.appendChild(r),r.click(),r.remove(),d.success("Logs exported successfully")}catch{d.error("Failed to export logs")}},m=a.filter(o=>n==="all"?!0:o.action===n);return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(x,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Join/Leave Logs")),e.createElement("button",{onClick:u,style:t.closeButton},e.createElement(L,null))),e.createElement("div",{style:t.filters},e.createElement("button",{onClick:()=>c("all"),style:{...t.filterButton,...n==="all"&&t.filterButtonActive}},"All (",a.length,")"),e.createElement("button",{onClick:()=>c("joined"),style:{...t.filterButton,...n==="joined"&&t.filterButtonActive}},"ðŸŸ¢ Joins (",a.filter(o=>o.action==="joined").length,")"),e.createElement("button",{onClick:()=>c("left"),style:{...t.filterButton,...n==="left"&&t.filterButtonActive}},"ðŸ”´ Leaves (",a.filter(o=>o.action==="left").length,")"),e.createElement("button",{onClick:E,style:t.exportButton},e.createElement(S,{style:{marginRight:"5px"}}),"Export")),e.createElement("div",{style:t.content},b?e.createElement("div",{style:t.loading},"Loading logs..."):m.length===0?e.createElement("div",{style:t.empty},"No logs found"):e.createElement("div",{style:t.logsList},m.map((o,l)=>e.createElement("div",{key:l,style:t.logItem},e.createElement("div",{style:t.logIcon},o.action==="joined"?e.createElement(x,{style:{color:"#43b581"}}):e.createElement(w,{style:{color:"#f04747"}})),e.createElement("div",{style:t.logInfo},e.createElement("div",{style:t.logUser},o.user?.username||"Unknown User"),e.createElement("div",{style:t.logAction},o.action==="joined"?"Joined the server":"Left the server"),o.invite_code&&e.createElement("div",{style:t.logMeta},"via invite: ",o.invite_code)),e.createElement("div",{style:t.logTime},new Date(o.timestamp).toLocaleString())))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},filters:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #2c2f33",flexWrap:"wrap"},filterButton:{padding:"8px 16px",backgroundColor:"#2c2f33",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},filterButtonActive:{backgroundColor:"#5865f2"},exportButton:{marginLeft:"auto",padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},logsList:{display:"flex",flexDirection:"column",gap:"12px"},logItem:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",alignItems:"center",gap:"16px"},logIcon:{fontSize:"20px"},logInfo:{flex:1},logUser:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},logAction:{fontSize:"14px",color:"#dcddde",marginBottom:"2px"},logMeta:{fontSize:"12px",color:"#99aab5"},logTime:{fontSize:"13px",color:"#99aab5"}};export{F as default};
