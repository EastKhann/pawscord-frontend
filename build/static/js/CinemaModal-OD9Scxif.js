const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./react-core-CecKX_Gm.js","../css/react-core-Dj12pvTl.css"])))=>i.map(i=>d[i]);
import{r as n,d as e,i as w,bu as T,o as _,bv as P,bw as F,_ as I}from"./react-core-CecKX_Gm.js";const L=n.lazy(()=>I(()=>import("./react-core-CecKX_Gm.js").then(m=>m.dk),__vite__mapDeps([0,1]),import.meta.url)),U=({onClose:m,ws:o})=>{const[h,x]=n.useState("https://www.youtube.com/watch?v=jfKfPfyJRdk"),[u,E]=n.useState(""),[d,s]=n.useState(!1),[v,O]=n.useState(.8),[f,y]=n.useState(null),[C,p]=n.useState(!1),l=n.useRef(null),i=n.useRef(!1),g=()=>{if(l.current&&typeof l.current.getCurrentTime=="function")try{return l.current.getCurrentTime()}catch{return 0}return 0};n.useEffect(()=>{if(!o.current)return;const t=b=>{try{const a=JSON.parse(b.data);if(a.type==="media_sync"){if(i.current=!0,a.action==="change_url")console.log("ðŸ”— [Remote] URL:",a.payload.url),s(!1),p(!1),x(a.payload.url),y(null);else if(a.action==="play"){const R=g();Math.abs(R-a.payload.time)>2&&l.current&&typeof l.current.seekTo=="function"&&l.current.seekTo(a.payload.time),s(!0)}else a.action==="pause"&&s(!1);setTimeout(()=>{i.current=!1},1e3)}}catch(a){console.error("WS HatasÄ±:",a)}};return o.current.addEventListener("message",t),()=>o.current?.removeEventListener("message",t)},[o]);const c=(t,b={})=>{i.current||o.current?.readyState===WebSocket.OPEN&&(console.log("ðŸ“¡ Sinyal:",t),o.current.send(JSON.stringify({type:"media_sync",action:t,payload:b})))},S=t=>{t.preventDefault(),u.trim()&&(i.current=!1,s(!1),p(!1),x(u),y(null),c("change_url",{url:u}),E(""))};return e.createElement("div",{style:r.overlay},e.createElement("div",{style:r.modal},e.createElement("div",{style:r.header},e.createElement("h3",null,"ðŸ¿ Sinema & MÃ¼zik"),e.createElement("button",{onClick:m,style:r.closeBtn},e.createElement(w,null))),e.createElement("div",{style:r.playerWrapper},f&&e.createElement("div",{style:r.statusOverlay},e.createElement(T,{size:40,color:"#f04747"}),e.createElement("p",{style:{marginTop:10}},f)),!C&&!f&&e.createElement("div",{style:r.statusOverlay},e.createElement("div",{className:"spinner"}),e.createElement("p",{style:{marginTop:10}},"YÃ¼kleniyor...")),e.createElement(n.Suspense,{fallback:e.createElement("div",{style:{color:"#fff",padding:"50px",textAlign:"center"}},"Loading player...")},e.createElement(L,{key:h,ref:l,url:h,playing:d,volume:v,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},onReady:()=>{console.log("âœ… Video HazÄ±r"),p(!0)},onError:t=>{console.error("Video Oynatma HatasÄ±:",t),y("Video oynatÄ±lamadÄ±. Link geÃ§ersiz olabilir."),p(!0)},onPlay:()=>{const t=g();c("play",{time:t})},onPause:()=>{c("pause")},onProgress:()=>{}}))),e.createElement("div",{style:r.controls},e.createElement("form",{onSubmit:S,style:r.urlForm},e.createElement(_,{style:{color:"#b9bbbe"}}),e.createElement("input",{type:"text",value:u,onChange:t=>E(t.target.value),placeholder:"YouTube linki yapÄ±ÅŸtÄ±r...",style:r.input}),e.createElement("button",{type:"submit",style:r.loadBtn},"YÃ¼kle")),e.createElement("button",{onClick:()=>{if(i.current=!1,d)s(!1),c("pause");else{s(!0);const t=g();c("play",{time:t})}},style:{...r.loadBtn,backgroundColor:d?"#da373c":"#43b581",marginLeft:10,width:110,display:"flex",alignItems:"center",justifyContent:"center",gap:5}},d?e.createElement(e.Fragment,null,e.createElement(P,null)," Durdur"):e.createElement(e.Fragment,null,e.createElement(F,null)," Oynat")))))},r={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{width:"90%",maxWidth:"900px",backgroundColor:"#202225",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},header:{padding:"15px",backgroundColor:"#2f3136",display:"flex",justifyContent:"space-between",color:"white"},playerWrapper:{position:"relative",paddingTop:"56.25%",backgroundColor:"black"},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.5em",cursor:"pointer"},controls:{padding:"20px",display:"flex",alignItems:"center"},urlForm:{display:"flex",gap:"10px",backgroundColor:"#40444b",padding:"10px",borderRadius:"8px",flex:1},input:{flex:1,background:"transparent",border:"none",color:"white",outline:"none"},loadBtn:{padding:"8px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},statusOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.7)",color:"white",zIndex:10}},k=document.createElement("style");k.innerText=`
    .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4px solid #ffffff;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
`;document.head.appendChild(k);export{U as default};
