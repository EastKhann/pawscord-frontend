var ue=Object.defineProperty;var l=(e,i)=>ue(e,"name",{value:i,configurable:!0});import{r as n,j as t}from"./react-core-Djgtqrmb.js";import{L as he}from"./router-vendor-gmJ9Mn-1.js";import{a as Z,A as xe,J as be,T as fe,c as ye,U as me,O as je,P as Se,V as Ce,W as ke}from"./icons-vendor-BW7dxHkX.js";import{a as Be,g as ve,b as Te,t as O,c as oe}from"./index-D_luy7FO.js";import{u as Ae}from"./useWindowWidth-Bfmtox1e.js";import"./media-vendor-CxFPycob.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const G=ve(),Pe=Te(),we=`${G}/api/crypto/signals/`,Ie=l(()=>{const[e,i]=n.useState(null),[j,b]=n.useState(!0),[m,S]=n.useState(null),[y,C]=n.useState(""),[k,v]=n.useState("balance_mode"),[d,r]=n.useState("TUM_STRATEJILER"),[g,c]=n.useState(""),[u,A]=n.useState("rank"),[T,R]=n.useState("asc"),[_,F]=n.useState(1),w=50,[W,U]=n.useState(!1),[h,z]=n.useState(null),[$,J]=n.useState(null),[D,ne]=n.useState({}),Y=n.useRef(e),{token:I}=Be(),{isMobile:ae}=Ae();n.useEffect(()=>{Y.current=e},[e]),n.useEffect(()=>{F(1)},[d,k,g]);const E=n.useCallback(async()=>{Y.current||b(!0),S(null);try{const s=await fetch(we);if(!s.ok)throw new Error(`HTTP ${s.status}`);const a=await s.json();if(a.error){S(a.error),b(!1);return}i(a)}catch(s){Y.current||S("Sunucuya baÄŸlanÄ±lamadÄ±: "+s.message)}finally{b(!1)}},[]),V=n.useCallback(async()=>{if(I)try{const s=await fetch(`${G}/portfolio/my/`,{headers:{Authorization:`Bearer ${I}`}});s.ok&&J(await s.json())}catch{}},[I]),H=n.useCallback(async()=>{try{const s=`${Pe}/crypto_prices.json?t=${Date.now()}`,a=await fetch(s);a.ok&&ne(await a.json())}catch{}},[]);n.useEffect(()=>{E(),V(),H();const s=setInterval(H,1500),a=setInterval(E,1e4);return()=>{clearInterval(s),clearInterval(a)}},[I,E,V,H]);const X=l(s=>{if(!s)return null;const a=s.toUpperCase(),p=a.match(/([A-Z0-9]+USDT)/);return p?p[0]:a.replace(/[^A-Z0-9]/g,"")},"extractCoinSymbol"),se=l(s=>{const a=X(s);if(a&&D[a])return D[a];const p=a?.replace("USDT","");return p&&D[p]?D[p]:null},"getLivePrice"),le=l(async(s,a,p,f)=>{if(!I)return O.error("âŒ GiriÅŸ yapmalÄ±sÄ±nÄ±z!");let x=a.toUpperCase();x.endsWith("USDT")||(x+="USDT");try{const Q=await fetch(`${G}/portfolio/trade/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I}`},body:JSON.stringify({symbol:x,action:s,amount:p,price:f})}),ee=await Q.json();Q.ok?(O.success("âœ… Ä°ÅŸlem BaÅŸarÄ±lÄ±!"),J(ee),z(null)):O.error(`âŒ Hata: ${ee.error}`)}catch{O.error("âŒ Sunucu hatasÄ±.")}},"handleTrade"),B=n.useMemo(()=>!e||!e[k]?null:e[k],[e,k]),q=n.useMemo(()=>!B||!B.tabs||!B.tabs[d]?[]:B.tabs[d].data||[],[B,d]),ie=n.useMemo(()=>!B||!B.tabs||!B.tabs[d]?null:B.tabs[d],[B,d]),M=n.useMemo(()=>{let s=[...q];if(g.trim()){const a=g.trim().toUpperCase();s=s.filter(p=>p.coin&&p.coin.toUpperCase().includes(a)||p.timeframe&&p.timeframe.toUpperCase().includes(a)||p.signal&&p.signal.toUpperCase().includes(a))}return s.sort((a,p)=>{let f,x;switch(u){case"rank":f=a.rank||9999,x=p.rank||9999;break;case"coin":return f=a.coin||"",x=p.coin||"",T==="asc"?f.localeCompare(x):x.localeCompare(f);case"pnl":f=parseFloat(String(a.pnl_percent||"0").replace("%","").replace("+","")),x=parseFloat(String(p.pnl_percent||"0").replace("%","").replace("+",""));break;case"win_rate":f=parseFloat(String(a.win_rate||"0").replace("%","")),x=parseFloat(String(p.win_rate||"0").replace("%",""));break;case"x_kat":f=parseFloat(String(a.x_kat||"0").replace("x","")),x=parseFloat(String(p.x_kat||"0").replace("x",""));break;case"trades":f=parseInt(a.trades||0),x=parseInt(p.trades||0);break;default:f=a.rank||9999,x=p.rank||9999}return T==="asc"?f-x:x-f}),s},[q,g,u,T]),de=Math.max(1,Math.ceil(M.length/w)),ce=M.slice((_-1)*w,_*w),pe=d==="ACIK_POZISYONLAR",K=e?.meta||{},N=K.position_coins||[],ge=n.useMemo(()=>{const s={};return N.length>0&&M.length>0&&N.forEach(a=>{const p=M.filter(x=>x.coin===a),f=p.some(x=>x.ters_sinyal===!0);s[a]={hasTersSinyal:f,rows:p}}),s},[N,M]);return{data:e,loading:j,errorMsg:m,debugInfo:y,activeMode:k,setActiveMode:v,activeTab:d,setActiveTab:r,searchQuery:g,setSearchQuery:c,sortBy:u,sortDir:T,handleSort:l(s=>{u===s?R(a=>a==="asc"?"desc":"asc"):(A(s),R(s==="rank"?"asc":"desc"))},"handleSort"),page:_,setPage:F,showPortfolio:W,setShowPortfolio:U,tradeData:h,setTradeData:z,portfolio:$,prices:D,fetchData:E,handleTrade:le,modeData:B,tabInfo:ie,processedData:M,pagedData:ce,totalPages:de,isPositionsTab:pe,meta:K,positionCoins:N,positionCoinStatus:ge,extractCoinSymbol:X,getLivePrice:se,isMobile:ae}},"useCryptoData"),L=l(e=>e==null?"-":typeof e=="object"?JSON.stringify(e):String(e),"safeRender"),P=l(e=>!e||e==="YÃ¼kleniyor..."||e==="Fiyat Bekleniyor..."?e:parseFloat(e).toString(),"formatPrice"),Me=l(e=>{if(!e)return"#949ba4";const i=String(e);return i.startsWith("+")?"#23a559":i.startsWith("-")?"#da373c":"#f0b232"},"pnlColor"),Re={TUM_STRATEJILER:{icon:"ðŸ“Š",shortLabel:"TÃ¼mÃ¼",color:"#5865f2"},ACIK_POZISYONLAR:{icon:"ðŸ’¼",shortLabel:"AÃ§Ä±k Poz.",color:"#f0b232"},POZISYON_OLMAYAN:{icon:"ðŸ”",shortLabel:"Poz. Yok",color:"#949ba4"},ZARARDA_OLANLAR:{icon:"ðŸ”´",shortLabel:"Zararda",color:"#da373c"},ALIM_FIRSATI:{icon:"ðŸ’°",shortLabel:"AlÄ±m FÄ±r.",color:"#23a559"}},re=l(({price:e})=>{const[i,j]=n.useState(e),[b,m]=n.useState("");n.useEffect(()=>{if(!e||e==="YÃ¼kleniyor..."||e==="Fiyat Bekleniyor..."||e==="...")return;const y=parseFloat(e),C=parseFloat(i);y>C?m("flash-green"):y<C&&m("flash-red"),j(e);const k=setTimeout(()=>m(""),1e3);return()=>clearTimeout(k)},[e]);const S=P(e);return t.jsx("span",{className:b,style:{fontSize:"0.95em",fontWeight:"bold",color:e==="YÃ¼kleniyor..."||e==="Fiyat Bekleniyor..."||e==="..."?"#999":b==="flash-green"?"#23a559":b==="flash-red"?"#da373c":"#23a559",transition:"color 0.5s ease"},children:e!=="YÃ¼kleniyor..."&&e!=="Fiyat Bekleniyor..."&&e!=="..."?`$${S}`:e})},"LivePrice"),te=l(({signal:e})=>{if(!e||e==="-")return t.jsx("span",{style:{color:"#949ba4"},children:"-"});const i=e==="LONG";return t.jsxs("span",{style:{backgroundColor:i?"rgba(35,165,89,0.15)":"rgba(218,55,60,0.15)",color:i?"#23a559":"#da373c",padding:"2px 8px",borderRadius:4,fontWeight:700,fontSize:"0.8em",border:`1px solid ${i?"rgba(35,165,89,0.3)":"rgba(218,55,60,0.3)"}`},children:[i?"â–²":"â–¼"," ",e]})},"SignalBadge"),_e=l(({status:e})=>{if(!e)return t.jsx("span",{style:{color:"#949ba4"},children:"-"});const i=String(e),j=i.includes("KAR")||i.includes("UYUYOR"),b=i.includes("ZARAR")||i.includes("TERS");return t.jsx("span",{style:{fontSize:"0.8em",fontWeight:600,color:j?"#23a559":b?"#da373c":"#f0b232"},children:i})},"StatusBadge"),o={pageContainer:{minHeight:"100%",backgroundColor:"#1e1f22",color:"#dbdee1",padding:"20px",boxSizing:"border-box"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid #2b2d31",flexWrap:"wrap",gap:10},headerLeft:{display:"flex",flexDirection:"column",gap:"5px"},title:{margin:0,fontSize:"1.4em",display:"flex",alignItems:"center",fontWeight:"700",color:"#fff"},backButton:{textDecoration:"none",color:"#949ba4",fontSize:"0.9em",display:"flex",alignItems:"center",gap:"5px"},refreshButton:{backgroundColor:"#5865f2",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},portfolioBtn:{backgroundColor:"#2b2d31",border:"1px solid #f0b232",color:"#f0b232",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",gap:"5px"},metaBar:{display:"flex",gap:20,flexWrap:"wrap",padding:"8px 12px",backgroundColor:"#2b2d31",borderRadius:8,marginBottom:15,fontSize:"0.85em",color:"#dbdee1",alignItems:"center"},modeToggleContainer:{display:"flex",gap:10,marginBottom:15},modeToggleBtn:{flex:1,padding:"12px 20px",borderRadius:8,border:"2px solid #40444b",backgroundColor:"#2b2d31",color:"#949ba4",cursor:"pointer",fontWeight:700,fontSize:"0.95em",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},modeToggleActive:{backgroundColor:"#313338",color:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},tabBar:{marginBottom:15,overflowX:"auto"},tabs:{display:"flex",gap:"6px",paddingBottom:"5px",minWidth:"max-content"},tabButton:{backgroundColor:"#2b2d31",border:"1px solid #40444b",color:"#949ba4",padding:"8px 14px",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"0.85em",display:"flex",alignItems:"center",gap:4,whiteSpace:"nowrap",transition:"all 0.2s"},activeTab:{color:"#fff",fontWeight:"700",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},filterBar:{display:"flex",gap:15,marginBottom:15,alignItems:"center",flexWrap:"wrap"},searchBox:{display:"flex",alignItems:"center",backgroundColor:"#2b2d31",borderRadius:8,padding:"6px 12px",border:"1px solid #40444b",flex:1,maxWidth:400},searchInput:{backgroundColor:"transparent",border:"none",outline:"none",color:"#dbdee1",fontSize:"0.9em",flex:1},clearSearchBtn:{background:"none",border:"none",color:"#949ba4",cursor:"pointer",padding:"2px 5px"},resultInfo:{display:"flex",alignItems:"center",gap:10},positionBanner:{padding:"10px 15px",backgroundColor:"rgba(240,178,50,0.08)",border:"1px solid rgba(240,178,50,0.2)",borderRadius:8,marginBottom:15,fontSize:"0.85em",color:"#dbdee1",display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},positionCoinTag:{padding:"3px 10px",borderRadius:6,fontWeight:700,fontSize:"0.8em",display:"inline-flex",alignItems:"center",gap:3,transition:"all 0.2s"},content:{},tableContainer:{overflowX:"auto",borderRadius:10,border:"1px solid #2f3136",backgroundColor:"#2b2d31"},table:{width:"100%",borderCollapse:"collapse",fontSize:"0.85em"},tableHeaderRow:{backgroundColor:"#202225",borderBottom:"2px solid #40444b"},tfBadge:{backgroundColor:"#40444b",color:"#dbdee1",padding:"2px 6px",borderRadius:4,fontSize:"0.8em",fontWeight:600},miniTradeBtn:{backgroundColor:"#23a559",color:"white",border:"none",padding:"5px 8px",borderRadius:4,cursor:"pointer",fontSize:"0.8em",display:"flex",alignItems:"center"},pagination:{display:"flex",justifyContent:"center",alignItems:"center",gap:10,marginTop:20,paddingBottom:30},pageBtn:{backgroundColor:"#2b2d31",border:"1px solid #40444b",color:"#dbdee1",padding:"8px 16px",borderRadius:6,cursor:"pointer",fontWeight:600,fontSize:"0.85em"},pageNumbers:{display:"flex",gap:4},pageNumBtn:{backgroundColor:"#2b2d31",border:"1px solid #40444b",color:"#949ba4",padding:"6px 10px",borderRadius:4,cursor:"pointer",fontSize:"0.85em",minWidth:32,textAlign:"center"},pageNumActive:{backgroundColor:"#5865f2",borderColor:"#5865f2",color:"#fff",fontWeight:700},loader:{textAlign:"center",marginTop:80,color:"#949ba4",fontSize:"1.1em"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},modalContent:{backgroundColor:"#313338",padding:"25px",borderRadius:"12px",width:"90%",maxWidth:"400px",border:"1px solid #40444b",boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,color:"white",borderBottom:"1px solid #444",paddingBottom:10},closeBtn:{background:"none",border:"none",color:"#bbb",fontSize:"1.2em",cursor:"pointer"},modeBtn:{flex:1,padding:"12px",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"1em"},inputWrapper:{marginBottom:15},input:{flex:1,padding:"12px",borderRadius:"6px 0 0 6px",border:"1px solid #40444b",backgroundColor:"#202225",color:"white",fontSize:"1.1em",outline:"none",width:"100%"},maxBtn:{padding:"0 15px",backgroundColor:"#40444b",border:"1px solid #40444b",borderRadius:"0 6px 6px 0",color:"#f0b232",fontWeight:"bold",cursor:"pointer"},confirmBtn:{width:"100%",padding:"15px",border:"none",borderRadius:"6px",color:"white",fontWeight:"bold",fontSize:"1.1em",cursor:"pointer",marginTop:10},balanceCard:{backgroundColor:"#202225",padding:"15px",borderRadius:"8px",textAlign:"center",marginBottom:"20px",border:"1px solid #f0b232"},holdingsList:{maxHeight:"250px",overflowY:"auto",margin:"10px 0"},holdingItem:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #40444b",alignItems:"center"}};if(typeof document<"u"){const e="crypto-dashboard-styles";if(!document.getElementById(e)){const i=document.createElement("style");i.id=e,i.innerText=`
  @keyframes flashGreen { 0% { color: #fff; background: rgba(35, 165, 89, 0.5); } 100% { color: #23a559; background: transparent; } }
  @keyframes flashRed { 0% { color: #fff; background: rgba(218, 55, 60, 0.5); } 100% { color: #da373c; background: transparent; } }
  .flash-green { animation: flashGreen 1s ease-out; }
  .flash-red { animation: flashRed 1s ease-out; }
  td, th { padding: 8px 10px; text-align: center; border-bottom: 1px solid #2f3136; }
  th { color: #949ba4; font-weight: 600; font-size: 0.8em; }
  input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
`,document.head.appendChild(i)}}const ze=l(({coin:e,initialPrice:i,livePrices:j,portfolio:b,onClose:m,onTrade:S})=>{const[y,C]=n.useState(""),[k,v]=n.useState(""),[d,r]=n.useState("BUY"),g=Object.keys(j).find(h=>h===e||h===`${e}USDT`)||e,c=j[g]||i,u=parseFloat(String(c).replace(/,/g,"").replace("$","")),A=parseFloat(b?.balance||0),R=l(()=>{if(!b?.holdings)return 0;const z=Object.keys(b.holdings).find($=>$.includes(e));return z?parseFloat(b.holdings[z]):0},"findHolding")(),{overlayProps:_,dialogProps:F}=oe({onClose:m,isOpen:!0,label:"Trade Modal"});n.useEffect(()=>{y&&!isNaN(parseFloat(y))&&v((parseFloat(y)*u).toFixed(2))},[u]);const w=l(h=>{if(C(h),!h||isNaN(parseFloat(h))){v("");return}v((parseFloat(h)*u).toFixed(2))},"handleAmountChange"),W=l(h=>{if(v(h),!h||isNaN(parseFloat(h))){C("");return}C(parseFloat((parseFloat(h)/u).toFixed(6)).toString())},"handleUsdtChange"),U=l(()=>{d==="BUY"?W(A.toString()):w(R.toString())},"handleMax");return t.jsx("div",{style:o.modalOverlay,..._,children:t.jsxs("div",{style:o.modalContent,...F,children:[t.jsxs("div",{style:o.modalHeader,children:[t.jsxs("h3",{children:[d==="BUY"?"ðŸŸ¢ AlÄ±ÅŸ":"ðŸ”´ SatÄ±ÅŸ",": ",e]}),t.jsx("button",{onClick:m,style:o.closeBtn,children:t.jsx(Z,{})})]}),t.jsxs("div",{style:{backgroundColor:"#2b2d31",padding:10,borderRadius:8,marginBottom:15,textAlign:"center"},children:[t.jsx("span",{style:{color:"#999",fontSize:"0.9em"},children:"CanlÄ± Piyasa FiyatÄ±"}),t.jsx("div",{style:{fontSize:"1.4em",fontWeight:"bold"},children:t.jsx(re,{price:c})})]}),t.jsxs("div",{style:{display:"flex",gap:10,marginBottom:15},children:[t.jsx("button",{onClick:l(()=>{r("BUY"),C(""),v("")},"onClick"),style:{...o.modeBtn,backgroundColor:d==="BUY"?"#23a559":"#2b2d31",opacity:d==="BUY"?1:.5},children:"AL (Buy)"}),t.jsx("button",{onClick:l(()=>{r("SELL"),C(""),v("")},"onClick"),style:{...o.modeBtn,backgroundColor:d==="SELL"?"#da373c":"#2b2d31",opacity:d==="SELL"?1:.5},children:"SAT (Sell)"})]}),t.jsxs("div",{style:{marginBottom:10,fontSize:"0.85em",color:"#dbdee1",display:"flex",justifyContent:"space-between",padding:"0 5px"},children:[t.jsxs("span",{children:["ðŸ’° Bakiye: ",t.jsxs("span",{style:{color:"#23a559"},children:["$",A.toFixed(2)]})]}),t.jsxs("span",{children:["ðŸª™ VarlÄ±k: ",t.jsxs("span",{style:{color:"#f0b232"},children:[P(R)," ",e]})]})]}),t.jsxs("div",{style:o.inputWrapper,children:[t.jsxs("label",{children:["Miktar (",e,")"]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx("input",{type:"number",value:y,onChange:l(h=>w(h.target.value),"onChange"),style:o.input,placeholder:"0"}),d==="SELL"&&t.jsx("button",{onClick:U,style:o.maxBtn,children:"MAX"})]})]}),t.jsxs("div",{style:o.inputWrapper,children:[t.jsx("label",{children:"Toplam (USDT)"}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx("input",{type:"number",value:k,onChange:l(h=>W(h.target.value),"onChange"),style:o.input,placeholder:"0"}),d==="BUY"&&t.jsx("button",{onClick:U,style:o.maxBtn,children:"MAX"})]})]}),t.jsx("button",{onClick:l(()=>S(d,e,y,u),"onClick"),style:{...o.confirmBtn,backgroundColor:d==="BUY"?"#23a559":"#da373c"},disabled:!y||parseFloat(y)<=0,children:d==="BUY"?"SATIN AL":"SATIÅž YAP"})]})})},"TradeModal"),De=l(({portfolio:e,onClose:i})=>{const{overlayProps:j,dialogProps:b}=oe({onClose:i,isOpen:!!e,label:"PortfÃ¶y"});return e?t.jsx("div",{style:o.modalOverlay,...j,children:t.jsxs("div",{style:o.modalContent,...b,children:[t.jsxs("div",{style:o.modalHeader,children:[t.jsx("h2",{children:"ðŸ’¼ CÃ¼zdanÄ±m"}),t.jsx("button",{onClick:i,style:o.closeBtn,children:t.jsx(Z,{})})]}),t.jsxs("div",{style:o.balanceCard,children:[t.jsx("span",{children:"Toplam Bakiye (USDT)"}),t.jsxs("h1",{style:{color:"#23a559",margin:"5px 0"},children:["$",P(e.balance)]})]}),t.jsx("h4",{style:{borderBottom:"1px solid #444",paddingBottom:5,marginBottom:10},children:"VarlÄ±klarÄ±m"}),t.jsx("div",{style:o.holdingsList,children:!e.holdings||Object.keys(e.holdings).length===0?t.jsx("p",{style:{color:"#999",textAlign:"center"},children:"HenÃ¼z coin almadÄ±nÄ±z."}):Object.entries(e.holdings).map(([m,S])=>t.jsxs("div",{style:o.holdingItem,children:[t.jsx("strong",{style:{color:"#fff",fontSize:"1.1em"},children:m.replace("USDT","")}),t.jsxs("span",{style:{color:"#f0b232"},children:[P(S)," Adet"]})]},m))})]})}):null},"PortfolioModal"),Le=l(()=>{const e=Ie(),i=n.useCallback(()=>e.setShowPortfolio(!0),[e.setShowPortfolio]),j=n.useCallback(()=>e.setShowPortfolio(!1),[e.setShowPortfolio]),b=n.useCallback(r=>e.setSearchQuery(r.target.value),[e.setSearchQuery]),m=n.useCallback(()=>e.setSearchQuery(""),[e.setSearchQuery]),S=n.useCallback(()=>e.setActiveMode("balance_mode"),[e.setActiveMode]),y=n.useCallback(()=>e.setActiveMode("winrate_mode"),[e.setActiveMode]),C=n.useCallback(()=>e.setPage(r=>Math.max(1,r-1)),[e.setPage]),k=n.useCallback(()=>e.setPage(r=>Math.min(e.totalPages,r+1)),[e.setPage,e.totalPages]),v=n.useCallback(()=>e.setTradeData(null),[e.setTradeData]),d=l(({field:r,children:g,style:c})=>t.jsxs("th",{onClick:l(()=>e.handleSort(r),"onClick"),style:{cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",color:e.sortBy===r?"#f0b232":"#949ba4",...c},children:[g," ",e.sortBy===r?e.sortDir==="asc"?"â–²":"â–¼":""]}),"SortHeader");return t.jsxs("div",{style:{...o.pageContainer,paddingTop:e.isMobile?"max(10px, env(safe-area-inset-top))":"20px"},children:[t.jsxs("div",{style:o.header,children:[t.jsxs("div",{style:o.headerLeft,children:[t.jsxs(he,{to:"/",style:o.backButton,children:[t.jsx(xe,{})," Ana MenÃ¼"]}),t.jsxs("h1",{style:o.title,children:[t.jsx(be,{style:{color:"#f0b232",marginRight:"10px"}}),"Crypto AI Dashboard",e.meta.version&&t.jsxs("span",{style:{fontSize:"0.5em",color:"#949ba4",marginLeft:10},children:["v",e.meta.version]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[t.jsxs("button",{onClick:i,style:o.portfolioBtn,children:[t.jsx(fe,{})," CÃ¼zdan ($",P(e.portfolio?.balance||"0"),")"]}),t.jsxs("button",{onClick:e.fetchData,style:o.refreshButton,children:[t.jsx(ye,{className:e.loading?"spin":""})," ",e.loading?"":"Yenile"]})]})]}),e.meta.export_date&&t.jsxs("div",{style:o.metaBar,children:[t.jsxs("span",{children:["ðŸ“… Son GÃ¼ncelleme: ",t.jsx("strong",{children:e.meta.export_date})]}),t.jsxs("span",{children:["ðŸ“Š Strateji: ",t.jsx("strong",{children:e.activeMode==="balance_mode"?e.meta.balance_strategies:e.meta.winrate_strategies})]}),e.positionCoins.length>0&&t.jsxs("span",{children:["ðŸ’¼ AÃ§Ä±k Poz: ",t.jsxs("strong",{style:{color:"#f0b232"},children:[e.positionCoins.length," Coin"]})]})]}),e.loading&&!e.data?t.jsxs("div",{style:o.loader,children:[t.jsx("div",{className:"spin",style:{fontSize:40,display:"inline-block"},children:"â³"}),t.jsx("p",{children:"Kripto Verileri YÃ¼kleniyor..."})]}):e.errorMsg?t.jsxs("div",{style:{textAlign:"center",marginTop:50},children:[t.jsxs("h3",{style:{color:"#da373c"},children:["âš ï¸ ",e.errorMsg]}),e.debugInfo&&t.jsxs("div",{style:{backgroundColor:"#2b2d31",padding:10,margin:"20px auto",maxWidth:600,borderRadius:8,textAlign:"left"},children:[t.jsxs("strong",{style:{color:"#f0b232"},children:[t.jsx(me,{})," Hata Verisi:"]}),t.jsx("pre",{style:{color:"#dbdee1",fontSize:"0.8em",whiteSpace:"pre-wrap"},children:e.debugInfo})]}),t.jsx("button",{onClick:e.fetchData,style:{...o.confirmBtn,maxWidth:200,margin:"20px auto"},children:"Tekrar Dene"})]}):t.jsxs("div",{style:o.content,children:[t.jsxs("div",{style:o.modeToggleContainer,children:[t.jsxs("button",{onClick:S,style:{...o.modeToggleBtn,...e.activeMode==="balance_mode"?o.modeToggleActive:{},borderColor:e.activeMode==="balance_mode"?"#f0b232":"#40444b"},children:[t.jsx(je,{style:{marginRight:6}}),e.isMobile?"Balance":"ðŸ’° Balance SÄ±ralama"]}),t.jsxs("button",{onClick:y,style:{...o.modeToggleBtn,...e.activeMode==="winrate_mode"?o.modeToggleActive:{},borderColor:e.activeMode==="winrate_mode"?"#23a559":"#40444b"},children:[t.jsx(Se,{style:{marginRight:6}}),e.isMobile?"Winrate":"ðŸ† Winrate SÄ±ralama"]})]}),t.jsx("div",{style:o.tabBar,children:t.jsx("div",{style:o.tabs,children:e.modeData&&e.modeData.tabs&&Object.keys(e.modeData.tabs).map(r=>{const g=Re[r]||{icon:"ðŸ“‹",shortLabel:r,color:"#949ba4"},c=e.modeData.tabs[r],u=e.activeTab===r;return t.jsxs("button",{onClick:l(()=>e.setActiveTab(r),"onClick"),style:{...o.tabButton,...u?{...o.activeTab,backgroundColor:g.color,borderColor:g.color}:{}},children:[t.jsx("span",{children:g.icon}),t.jsx("span",{children:e.isMobile?g.shortLabel:c.title||r}),t.jsx("span",{style:{backgroundColor:u?"rgba(0,0,0,0.3)":"rgba(255,255,255,0.1)",padding:"1px 6px",borderRadius:10,fontSize:"0.75em",marginLeft:4},children:c.count||0})]},r)})})}),t.jsxs("div",{style:o.filterBar,children:[t.jsxs("div",{style:o.searchBox,children:[t.jsx(Ce,{style:{color:"#949ba4",marginRight:8}}),t.jsx("input",{type:"text",value:e.searchQuery,onChange:b,placeholder:"Coin ara... (BTC, ETH, SOL)",style:o.searchInput}),e.searchQuery&&t.jsx("button",{onClick:m,style:o.clearSearchBtn,children:t.jsx(Z,{})})]}),t.jsx("div",{style:o.resultInfo,children:t.jsxs("span",{style:{color:"#949ba4",fontSize:"0.85em"},children:[e.processedData.length," sonuÃ§ ",e.searchQuery&&`"${e.searchQuery}" iÃ§in`]})})]}),e.isPositionsTab&&e.positionCoins.length>0&&t.jsxs("div",{style:o.positionBanner,children:[t.jsxs("strong",{children:["ðŸ’¼ AÃ§Ä±k Pozisyon (",e.positionCoins.length,"):"]})," ",e.positionCoins.map((r,g)=>{const u=e.positionCoinStatus[r]?.hasTersSinyal;return t.jsxs("span",{style:{...o.positionCoinTag,backgroundColor:u?"rgba(218,55,60,0.15)":"rgba(35,165,89,0.15)",color:u?"#da373c":"#23a559",border:`1px solid ${u?"rgba(218,55,60,0.4)":"rgba(35,165,89,0.4)"}`},children:[g+1,". ",u?"âš ï¸":"âœ…"," ",r.replace("USDT","")]},r)})]}),t.jsx("div",{style:o.tableContainer,children:t.jsxs("table",{style:o.table,children:[t.jsx("thead",{children:t.jsxs("tr",{style:o.tableHeaderRow,children:[t.jsx(d,{field:"rank",children:"#"}),t.jsx(d,{field:"coin",children:"Coin"}),t.jsx("th",{style:{color:"#949ba4"},children:"TF"}),t.jsx("th",{style:{color:"#949ba4"},children:"Sinyal"}),e.isPositionsTab&&t.jsxs(t.Fragment,{children:[t.jsx("th",{style:{color:"#949ba4"},children:"Poz.YÃ¶nÃ¼"}),t.jsx("th",{style:{color:"#949ba4"},children:"Uyum"})]}),t.jsx("th",{style:{color:"#949ba4"},children:"GiriÅŸ"}),t.jsx("th",{style:{color:"#949ba4"},children:"GÃ¼ncel"}),t.jsx(d,{field:"pnl",children:"PNL%"}),t.jsx(d,{field:"win_rate",children:"WR%"}),t.jsx(d,{field:"trades",children:"Ä°ÅŸlem"}),t.jsx(d,{field:"x_kat",children:"X Kat"}),t.jsx("th",{style:{color:"#949ba4"},children:"Hedef"}),t.jsx("th",{style:{color:"#949ba4"},children:"Durum"}),t.jsx("th",{style:{color:"#949ba4"},children:"Al/Sat"})]})}),t.jsx("tbody",{children:e.pagedData.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:e.isPositionsTab?15:13,style:{textAlign:"center",padding:40,color:"#949ba4"},children:e.searchQuery?"Arama sonucu bulunamadÄ±.":"Bu sekmede veri yok."})}):e.pagedData.map((r,g)=>{const c=e.getLivePrice(r.coin),u=e.extractCoinSymbol(r.coin)?.replace("USDT","")||r.coin,A=g%2===0?"transparent":"rgba(255,255,255,0.02)";return t.jsxs("tr",{style:{backgroundColor:A,transition:"background-color 0.2s"},onMouseEnter:l(T=>T.currentTarget.style.backgroundColor="rgba(88,101,242,0.08)","onMouseEnter"),onMouseLeave:l(T=>T.currentTarget.style.backgroundColor=A,"onMouseLeave"),children:[t.jsx("td",{style:{color:"#949ba4",fontWeight:600},children:r.rank}),t.jsx("td",{children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t.jsx("strong",{style:{color:"#fff",fontSize:"0.9em"},children:u}),c&&t.jsx(re,{price:c})]})}),t.jsx("td",{children:t.jsx("span",{style:o.tfBadge,children:r.timeframe})}),t.jsx("td",{children:t.jsx(te,{signal:r.signal||r.sinyal_yonu||"-"})}),e.isPositionsTab&&t.jsxs(t.Fragment,{children:[t.jsx("td",{children:t.jsx(te,{signal:r.pozisyon_yonu||"-"})}),t.jsx("td",{children:t.jsx("span",{style:{fontSize:"0.8em",color:r.ters_sinyal?"#da373c":"#23a559",fontWeight:600},children:r.yon_uyumu||"-"})})]}),t.jsxs("td",{style:{color:"#dbdee1",fontSize:"0.85em"},children:["$",P(r.entry_price)]}),t.jsxs("td",{style:{color:"#dbdee1",fontSize:"0.85em"},children:["$",P(r.current_price)]}),t.jsx("td",{style:{color:Me(r.pnl_percent),fontWeight:700},children:L(r.pnl_percent)}),t.jsx("td",{style:{color:parseFloat(String(r.win_rate||"0").replace("%",""))>=50?"#23a559":"#da373c",fontWeight:600},children:L(r.win_rate)}),t.jsx("td",{style:{color:"#dbdee1"},children:L(r.trades)}),t.jsx("td",{style:{color:"#f0b232",fontWeight:700},children:L(r.x_kat)}),t.jsx("td",{style:{color:"#5865f2",fontWeight:600},children:L(r.hedef_roe)}),t.jsx("td",{children:t.jsx(_e,{status:r.status})}),t.jsx("td",{children:t.jsx("button",{onClick:l(()=>e.setTradeData({coin:u,price:c}),"onClick"),style:{...o.miniTradeBtn,opacity:c?1:.4,cursor:c?"pointer":"not-allowed"},disabled:!c,title:c?`${u} Al/Sat`:"CanlÄ± fiyat bekleniyor",children:t.jsx(ke,{})})})]},`${r.rank}-${r.coin}-${r.timeframe}-${g}`)})})]})}),e.totalPages>1&&t.jsxs("div",{style:o.pagination,children:[t.jsx("button",{onClick:C,disabled:e.page===1,style:{...o.pageBtn,opacity:e.page===1?.4:1},children:"â—„ Ã–nceki"}),t.jsx("div",{style:o.pageNumbers,children:Array.from({length:Math.min(e.totalPages,7)},(r,g)=>{let c;return e.totalPages<=7||e.page<=4?c=g+1:e.page>=e.totalPages-3?c=e.totalPages-6+g:c=e.page-3+g,t.jsx("button",{onClick:l(()=>e.setPage(c),"onClick"),style:{...o.pageNumBtn,...e.page===c?o.pageNumActive:{}},children:c},c)})}),t.jsx("button",{onClick:k,disabled:e.page===e.totalPages,style:{...o.pageBtn,opacity:e.page===e.totalPages?.4:1},children:"Sonraki â–º"})]})]}),e.showPortfolio&&t.jsx(De,{portfolio:e.portfolio,onClose:j}),e.tradeData&&t.jsx(ze,{coin:e.tradeData.coin,initialPrice:e.tradeData.price,livePrices:e.prices,portfolio:e.portfolio,onClose:v,onTrade:e.handleTrade})]})},"CryptoDashboard"),Ze=n.memo(Le);export{Ze as default};
