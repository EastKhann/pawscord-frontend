import{r as l,b as e}from"./react-core-9vc7GIjk.js";import{z as h,a as O,j as $,Z as B,m as w,aV as G}from"./icons-vendor-BHKL7tCa.js";import{t as r}from"./index-Ci34lwbp.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const Z=({fetchWithAuth:s,apiBaseUrl:i,onClose:A})=>{const[m,z]=l.useState([]),[u,T]=l.useState([]),[_,v]=l.useState(!1),[f,C]=l.useState("apps"),[S,y]=l.useState(!1),[k,b]=l.useState(!1),[n,p]=l.useState({name:"",description:"",redirect_uris:"",scopes:[]}),[c,x]=l.useState({name:"",description:""}),R=["read_messages","send_messages","manage_channels","manage_roles","manage_server","read_user","modify_user"];l.useEffect(()=>{g(),E()},[]);const g=async()=>{v(!0);try{const a=await(await s(`${i}/api/oauth/apps/list/`)).json();z(a.apps||[])}catch{r.error("Failed to load OAuth apps")}finally{v(!1)}},E=async()=>{try{const a=await(await s(`${i}/api/bots/list/`)).json();T(a.bots||[])}catch{r.error("Failed to load bots")}},F=async()=>{if(!n.name){r.error("App name is required");return}try{const a=await(await s(`${i}/api/oauth/apps/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,redirect_uris:n.redirect_uris.split(`
`).filter(d=>d.trim())})})).json();r.success("OAuth app created successfully"),y(!1),p({name:"",description:"",redirect_uris:"",scopes:[]}),g(),a.client_id&&a.client_secret&&alert(`Client ID: ${a.client_id}
Client Secret: ${a.client_secret}

Save these credentials securely. The secret will not be shown again.`)}catch{r.error("Failed to create OAuth app")}},D=async()=>{if(!c.name){r.error("Bot name is required");return}try{const a=await(await s(`${i}/api/bots/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json();r.success("Bot created successfully"),b(!1),x({name:"",description:""}),E(),a.token&&alert(`Bot Token: ${a.token}

Save this token securely. It will not be shown again.`)}catch{r.error("Failed to create bot")}},I=async o=>{if(confirm("Are you sure you want to delete this app? This cannot be undone."))try{await s(`${i}/api/oauth/apps/${o}/delete/`,{method:"DELETE"}),r.success("App deleted successfully"),g()}catch{r.error("Failed to delete app")}},N=async o=>{if(confirm("Are you sure you want to delete this bot? This cannot be undone."))try{await s(`${i}/api/bots/${o}/delete/`,{method:"DELETE"}),r.success("Bot deleted successfully"),E()}catch{r.error("Failed to delete bot")}},j=(o,a)=>{navigator.clipboard.writeText(o),r.success(`${a} copied to clipboard`)},L=o=>{p(a=>({...a,scopes:a.scopes.includes(o)?a.scopes.filter(d=>d!==o):[...a.scopes,o]}))};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(h,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Developer Portal")),e.createElement("button",{onClick:A,style:t.closeButton},e.createElement(O,null))),e.createElement("div",{style:t.tabs},e.createElement("button",{onClick:()=>C("apps"),style:{...t.tab,...f==="apps"&&t.tabActive}},e.createElement($,{style:{marginRight:"5px"}}),"OAuth Apps (",m.length,")"),e.createElement("button",{onClick:()=>C("bots"),style:{...t.tab,...f==="bots"&&t.tabActive}},e.createElement(h,{style:{marginRight:"5px"}}),"Bots (",u.length,")")),e.createElement("div",{style:t.content},_?e.createElement("div",{style:t.loading},"Loading..."):f==="apps"?e.createElement(e.Fragment,null,e.createElement("div",{style:t.toolbar},e.createElement("button",{onClick:()=>y(!S),style:t.createButton},e.createElement(B,{style:{marginRight:"5px"}}),"New OAuth App")),S&&e.createElement("div",{style:t.createForm},e.createElement("h3",{style:t.formTitle},"Create OAuth Application"),e.createElement("div",{style:t.formGroup},e.createElement("label",{style:t.label},"Application Name"),e.createElement("input",{type:"text",value:n.name,onChange:o=>p({...n,name:o.target.value}),placeholder:"My Awesome App",style:t.input})),e.createElement("div",{style:t.formGroup},e.createElement("label",{style:t.label},"Description"),e.createElement("textarea",{value:n.description,onChange:o=>p({...n,description:o.target.value}),placeholder:"What does your app do?",style:{...t.input,minHeight:"60px"}})),e.createElement("div",{style:t.formGroup},e.createElement("label",{style:t.label},"Redirect URIs (one per line)"),e.createElement("textarea",{value:n.redirect_uris,onChange:o=>p({...n,redirect_uris:o.target.value}),placeholder:"https://example.com/callback",style:{...t.input,minHeight:"80px"}})),e.createElement("div",{style:t.formGroup},e.createElement("label",{style:t.label},"Scopes"),e.createElement("div",{style:t.scopesGrid},R.map(o=>e.createElement("label",{key:o,style:t.scopeCheckbox},e.createElement("input",{type:"checkbox",checked:n.scopes.includes(o),onChange:()=>L(o)}),e.createElement("span",null,o))))),e.createElement("div",{style:t.formActions},e.createElement("button",{onClick:F,style:t.submitButton},"Create Application"),e.createElement("button",{onClick:()=>y(!1),style:t.cancelButton},"Cancel"))),e.createElement("div",{style:t.appsList},m.length===0?e.createElement("div",{style:t.empty},"No OAuth apps yet. Create one to get started!"):m.map(o=>e.createElement("div",{key:o.id,style:t.appCard},e.createElement("div",{style:t.appHeader},e.createElement("div",null,e.createElement("div",{style:t.appName},o.name),e.createElement("div",{style:t.appDescription},o.description)),e.createElement("button",{onClick:()=>I(o.id),style:t.deleteButton},e.createElement(w,null))),e.createElement("div",{style:t.appDetails},e.createElement("div",{style:t.credential},e.createElement("strong",null,"Client ID:"),e.createElement("code",{style:t.code},o.client_id),e.createElement("button",{onClick:()=>j(o.client_id,"Client ID"),style:t.copyButton},e.createElement(G,null))),e.createElement("div",{style:t.detail},e.createElement("strong",null,"Scopes:")," ",o.scopes?.join(", ")||"None"),e.createElement("div",{style:t.detail},e.createElement("strong",null,"Redirect URIs:"),o.redirect_uris?.map((a,d)=>e.createElement("div",{key:d,style:t.uri},a)))))))):e.createElement(e.Fragment,null,e.createElement("div",{style:t.toolbar},e.createElement("button",{onClick:()=>b(!k),style:t.createButton},e.createElement(B,{style:{marginRight:"5px"}}),"New Bot")),k&&e.createElement("div",{style:t.createForm},e.createElement("h3",{style:t.formTitle},"Create Bot Account"),e.createElement("div",{style:t.formGroup},e.createElement("label",{style:t.label},"Bot Name"),e.createElement("input",{type:"text",value:c.name,onChange:o=>x({...c,name:o.target.value}),placeholder:"My Bot",style:t.input})),e.createElement("div",{style:t.formGroup},e.createElement("label",{style:t.label},"Description"),e.createElement("textarea",{value:c.description,onChange:o=>x({...c,description:o.target.value}),placeholder:"What does your bot do?",style:{...t.input,minHeight:"60px"}})),e.createElement("div",{style:t.formActions},e.createElement("button",{onClick:D,style:t.submitButton},"Create Bot"),e.createElement("button",{onClick:()=>b(!1),style:t.cancelButton},"Cancel"))),e.createElement("div",{style:t.botsList},u.length===0?e.createElement("div",{style:t.empty},"No bots yet. Create one to automate tasks!"):u.map(o=>e.createElement("div",{key:o.id,style:t.botCard},e.createElement("div",{style:t.botHeader},e.createElement(h,{style:{fontSize:"32px",color:"#5865f2"}}),e.createElement("div",{style:{flex:1,marginLeft:"12px"}},e.createElement("div",{style:t.botName},o.name),e.createElement("div",{style:t.botDescription},o.description),e.createElement("div",{style:t.botStatus},"Status: ",o.is_active?"ðŸŸ¢ Active":"ðŸ”´ Inactive")),e.createElement("button",{onClick:()=>N(o.id),style:t.deleteButton},e.createElement(w,null))))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},tabs:{display:"flex",borderBottom:"1px solid #2c2f33",padding:"0 20px"},tab:{padding:"12px 20px",backgroundColor:"transparent",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",borderBottom:"2px solid transparent"},tabActive:{color:"#5865f2",borderBottom:"2px solid #5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},toolbar:{marginBottom:"20px"},createButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",fontWeight:"500"},createForm:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",marginBottom:"20px"},formTitle:{margin:"0 0 16px 0",fontSize:"16px",color:"#ffffff"},formGroup:{marginBottom:"16px"},label:{display:"block",color:"#dcddde",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},scopesGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},scopeCheckbox:{display:"flex",alignItems:"center",gap:"8px",color:"#dcddde",fontSize:"14px",cursor:"pointer"},formActions:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"20px"},submitButton:{padding:"10px 20px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelButton:{padding:"10px 20px",backgroundColor:"#4f545c",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},appsList:{display:"flex",flexDirection:"column",gap:"16px"},appCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},appHeader:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},appName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},appDescription:{fontSize:"14px",color:"#99aab5"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"5px"},appDetails:{display:"flex",flexDirection:"column",gap:"12px"},credential:{display:"flex",alignItems:"center",gap:"10px",fontSize:"14px",color:"#dcddde"},code:{flex:1,padding:"8px",backgroundColor:"#1e1e1e",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#5865f2"},copyButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",padding:"5px"},detail:{fontSize:"14px",color:"#dcddde"},uri:{fontSize:"13px",color:"#5865f2",marginLeft:"8px",fontFamily:"monospace"},botsList:{display:"flex",flexDirection:"column",gap:"16px"},botCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},botHeader:{display:"flex",alignItems:"center"},botName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},botDescription:{fontSize:"14px",color:"#99aab5",marginBottom:"4px"},botStatus:{fontSize:"13px",color:"#dcddde"}};export{Z as default};
