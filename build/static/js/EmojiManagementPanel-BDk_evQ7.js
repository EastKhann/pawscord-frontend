import{r,b as t}from"./react-core-9vc7GIjk.js";import{i as b,a as B,al as I,br as R,o as _}from"./icons-vendor-NoxEirJf.js";import{t as i}from"./index-C8QEFqrd.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const O=({fetchWithAuth:l,apiBaseUrl:s,serverId:d,onClose:g})=>{const[u,j]=r.useState([]),[k,v]=r.useState([]),[C,S]=r.useState([]),[x,y]=r.useState(null),[c,f]=r.useState(""),[h,E]=r.useState(!0),[a,m]=r.useState("custom");r.useEffect(()=>{p(),a==="trending"&&T(),a==="suggestions"&&w()},[a]);const p=async()=>{try{E(!0);const e=await l(`${s}/emoji/list/?server_id=${d}`);if(e.ok){const n=await e.json();j(n)}}catch(e){console.error("Emoji yükleme hatası:",e)}finally{E(!1)}},T=async()=>{try{const e=await l(`${s}/emoji/trending/?server_id=${d}`);if(e.ok){const n=await e.json();v(n)}}catch(e){console.error("Trending yükleme hatası:",e)}},w=async()=>{try{const e=await l(`${s}/emoji/suggestions/?server_id=${d}`);if(e.ok){const n=await e.json();S(n)}}catch(e){console.error("Öneriler yükleme hatası:",e)}},z=async()=>{if(!x||!c.trim()){i.error("Emoji dosyası ve ismi gerekli");return}const e=new FormData;e.append("file",x),e.append("name",c),e.append("server_id",d);try{(await l(`${s}/emoji/upload/`,{method:"POST",body:e})).ok?(i.success("Emoji yüklendi"),y(null),f(""),p()):i.error("Emoji yüklenemedi")}catch(n){console.error("Upload hatası:",n),i.error("Bir hata oluştu")}},F=async e=>{try{(await l(`${s}/emoji/${e}/delete/`,{method:"DELETE"})).ok?(i.success("Emoji silindi"),p()):i.error("Emoji silinemedi")}catch(n){console.error("Delete hatası:",n),i.error("Bir hata oluştu")}};return t.createElement("div",{style:o.overlay,onClick:g},t.createElement("div",{style:o.modal,onClick:e=>e.stopPropagation()},t.createElement("div",{style:o.header},t.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},t.createElement(b,{style:{color:"#faa61a"}}),t.createElement("h2",{style:{margin:0}},"Emoji Yönetimi")),t.createElement(B,{onClick:g,style:o.closeBtn})),t.createElement("div",{style:o.tabs},t.createElement("button",{onClick:()=>m("custom"),style:{...o.tab,...a==="custom"?o.activeTab:{}}},"Özel Emojiler"),t.createElement("button",{onClick:()=>m("trending"),style:{...o.tab,...a==="trending"?o.activeTab:{}}},t.createElement(I,null)," Trend Olanlar"),t.createElement("button",{onClick:()=>m("suggestions"),style:{...o.tab,...a==="suggestions"?o.activeTab:{}}},"Öneriler")),a==="custom"&&t.createElement(t.Fragment,null,t.createElement("div",{style:o.uploadSection},t.createElement("input",{type:"file",accept:"image/png,image/gif,image/jpeg",onChange:e=>y(e.target.files[0]),style:o.fileInput}),t.createElement("input",{type:"text",value:c,onChange:e=>f(e.target.value),placeholder:"Emoji ismi (örn: pog, kekw)",style:o.input}),t.createElement("button",{onClick:z,style:o.uploadBtn},t.createElement(R,null)," Yükle")),t.createElement("div",{style:o.content},h?t.createElement("div",{style:o.loading},"Yükleniyor..."):u.length===0?t.createElement("div",{style:o.empty},t.createElement(b,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),t.createElement("p",null,"Henüz özel emoji yok")):t.createElement("div",{style:o.emojiGrid},u.map(e=>t.createElement("div",{key:e.id,style:o.emojiCard},t.createElement("img",{src:e.url,alt:e.name,style:o.emojiImage}),t.createElement("div",{style:o.emojiName},":",e.name,":"),t.createElement("button",{onClick:()=>F(e.id),style:o.deleteEmojiBtn},t.createElement(_,null))))))),a==="trending"&&t.createElement("div",{style:o.content},t.createElement("div",{style:o.emojiGrid},k.map((e,n)=>t.createElement("div",{key:n,style:o.emojiCard},t.createElement("img",{src:e.url,alt:e.name,style:o.emojiImage}),t.createElement("div",{style:o.emojiName},":",e.name,":"),t.createElement("div",{style:o.usageCount},e.usage_count," kullanım"))))),a==="suggestions"&&t.createElement("div",{style:o.content},t.createElement("div",{style:o.emojiGrid},C.map((e,n)=>t.createElement("div",{key:n,style:o.suggestionCard},t.createElement("img",{src:e.emoji_url,alt:e.emoji_name,style:o.emojiImage}),t.createElement("div",{style:o.emojiName},":",e.emoji_name,":"),t.createElement("div",{style:o.suggester},"Öneren: ",e.suggested_by)))))))},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},tabs:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #333"},tab:{backgroundColor:"transparent",color:"#888",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},activeTab:{backgroundColor:"#5865f2",color:"#fff"},uploadSection:{display:"flex",gap:"10px",padding:"20px",borderBottom:"1px solid #333"},fileInput:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},input:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},uploadBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},emojiGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"15px"},emojiCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center",position:"relative"},emojiImage:{width:"64px",height:"64px",objectFit:"contain",marginBottom:"10px"},emojiName:{fontSize:"13px",fontWeight:"500",color:"#dcddde",marginBottom:"4px",fontFamily:"monospace"},usageCount:{fontSize:"11px",color:"#888"},deleteEmojiBtn:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#f04747",color:"#fff",border:"none",padding:"6px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},suggestionCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center"},suggester:{fontSize:"11px",color:"#888",marginTop:"6px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{O as default};
