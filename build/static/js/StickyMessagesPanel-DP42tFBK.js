import{r as n,b as e}from"./react-core-9vc7GIjk.js";import{e as d,a as b,Z as E,m as h}from"./icons-vendor-BHKL7tCa.js";import{t as r}from"./index-BhQiWqdf.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const R=({fetchWithAuth:i,apiBaseUrl:s,roomSlug:p,onClose:m})=>{const[y,u]=n.useState([]),[l,x]=n.useState(""),[g,f]=n.useState(!0);n.useEffect(()=>{c()},[]);const c=async()=>{try{f(!0);const t=await i(`${s}/api/stickies/list/?room_slug=${p}`);if(t.ok){const o=await t.json();u(o)}}catch(t){console.error("Sticky yükleme hatası:",t)}finally{f(!1)}},k=async()=>{if(!l.trim()){r.error("Mesaj girin");return}try{(await i(`${s}/api/stickies/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_slug:p,message:l})})).ok?(r.success("Sticky mesaj oluşturuldu"),x(""),c()):r.error("Sticky oluşturulamadı")}catch(t){console.error("Sticky oluşturma hatası:",t),r.error("Bir hata oluştu")}},S=async t=>{try{(await i(`${s}/api/stickies/${t}/delete/`,{method:"DELETE"})).ok?(r.success("Sticky mesaj silindi"),c()):r.error("Sticky silinemedi")}catch(o){console.error("Sticky silme hatası:",o),r.error("Bir hata oluştu")}};return e.createElement("div",{style:a.overlay,onClick:m},e.createElement("div",{style:a.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:a.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(d,{style:{color:"#faa61a"}}),e.createElement("h2",{style:{margin:0}},"Sticky Mesajlar")),e.createElement(b,{onClick:m,style:a.closeBtn})),e.createElement("div",{style:a.createSection},e.createElement("textarea",{value:l,onChange:t=>x(t.target.value),placeholder:"Bu mesaj kanalın en üstünde sabitlenecek...",style:a.textarea,rows:3}),e.createElement("button",{onClick:k,style:a.createBtn},e.createElement(E,null)," Sticky Oluştur")),e.createElement("div",{style:a.content},g?e.createElement("div",{style:a.loading},"Yükleniyor..."):y.length===0?e.createElement("div",{style:a.empty},e.createElement(d,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),e.createElement("p",null,"Henüz sticky mesaj yok"),e.createElement("p",{style:{fontSize:"12px",color:"#888"}},"Sticky mesajlar kanalın en üstünde sabitlenir")):y.map(t=>e.createElement("div",{key:t.id,style:a.stickyCard},e.createElement("div",{style:a.stickyIcon},e.createElement(d,{style:{color:"#faa61a"}})),e.createElement("div",{style:a.stickyContent},e.createElement("div",{style:a.stickyMessage},t.message),e.createElement("div",{style:a.stickyMeta},"Oluşturan: ",t.created_by," • ",new Date(t.created_at).toLocaleString("tr-TR"))),e.createElement("button",{onClick:()=>S(t.id),style:a.deleteBtn},e.createElement(h,null)))))))},a={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},createSection:{padding:"20px",borderBottom:"1px solid #333"},textarea:{width:"100%",padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",resize:"vertical",marginBottom:"10px"},createBtn:{width:"100%",backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},stickyCard:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#faa61a1a",border:"1px solid #faa61a",borderRadius:"8px",marginBottom:"10px"},stickyIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#faa61a33",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},stickyContent:{flex:1},stickyMessage:{color:"#dcddde",fontSize:"14px",marginBottom:"8px",lineHeight:"1.5"},stickyMeta:{fontSize:"12px",color:"#888"},deleteBtn:{backgroundColor:"#f04747",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",alignSelf:"flex-start"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{R as default};
