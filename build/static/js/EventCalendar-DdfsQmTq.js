var S=Object.defineProperty;var s=(n,r)=>S(n,"name",{value:r,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{am as b,an as C,z as B,bE as D,u as w}from"./icons-vendor-BW7dxHkX.js";const _=s(({serverId:n,apiBaseUrl:r,fetchWithAuth:c})=>{const[l,p]=d.useState([]),[f,x]=d.useState(!0),[u,m]=d.useState(!1);d.useEffect(()=>{n&&y()},[n]);const y=s(async()=>{try{const o=await c(`${r}/events/?server=${n}`);if(o.ok){const i=await o.json();p(i)}}catch{}finally{x(!1)}},"loadEvents"),h=s(async(o,i)=>{try{(await c(`${r}/events/${o}/rsvp/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:i})})).ok&&y()}catch{}},"handleRSVP"),v=s(o=>{const i=new Date(o),k=i-new Date,a=Math.floor(k/(1e3*60*60*24));return a===0?"Bugün":a===1?"Yarın":a>0&&a<7?`${a} gün sonra`:i.toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})},"formatDate"),j=s(o=>new Date(o).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),"formatTime");return f?e.jsx("div",{style:t.loading,children:"Etkinlikler yükleniyor..."}):e.jsxs("div",{style:t.container,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("h2",{style:t.title,children:[e.jsx(b,{})," Etkinlikler"]}),e.jsxs("button",{onClick:s(()=>m(!0),"onClick"),style:t.createButton,children:[e.jsx(C,{})," Etkinlik Oluştur"]})]}),l.length===0?e.jsxs("div",{style:t.empty,children:[e.jsx(b,{style:t.emptyIcon}),e.jsx("p",{children:"Henüz etkinlik yok"}),e.jsx("p",{style:t.emptySubtext,children:"İlk etkinliği sen oluştur!"})]}):e.jsx("div",{style:t.eventsList,children:l.map(o=>e.jsx(z,{event:o,onRSVP:h,formatDate:v,formatTime:j},o.id))})]})},"EventCalendar"),z=s(({event:n,onRSVP:r,formatDate:c,formatTime:l})=>{const[p,f]=d.useState(null),x=s(u=>{f(u),r(n.id,u)},"handleRsvpClick");return e.jsxs("div",{style:t.eventCard,children:[e.jsxs("div",{style:t.eventHeader,children:[e.jsx("h3",{style:t.eventTitle,children:n.title}),e.jsx("span",{style:t.eventDate,children:c(n.start_time)})]}),n.description&&e.jsx("p",{style:t.eventDescription,children:n.description}),e.jsxs("div",{style:t.eventDetails,children:[e.jsxs("div",{style:t.detail,children:[e.jsx(B,{style:t.detailIcon}),e.jsxs("span",{children:[l(n.start_time)," - ",l(n.end_time)]})]}),e.jsxs("div",{style:t.detail,children:[e.jsx(D,{style:t.detailIcon}),e.jsx("span",{children:n.location_type==="voice"?n.voice_channel_name||"Sesli Kanal":"Dış Link"})]}),e.jsxs("div",{style:t.detail,children:[e.jsx(w,{style:t.detailIcon}),e.jsxs("span",{children:[n.going_count," katılacak,",n.interested_count," ilgileniyor"]})]})]}),e.jsxs("div",{style:t.rsvpButtons,children:[e.jsx("button",{onClick:s(()=>x("going"),"onClick"),style:{...t.rsvpButton,...p==="going"?t.rsvpButtonActive:{}},children:"✓ Katılacağım"}),e.jsx("button",{onClick:s(()=>x("interested"),"onClick"),style:{...t.rsvpButton,...p==="interested"?t.rsvpButtonInterested:{}},children:"⭐ İlgileniyorum"})]})]})},"EventCard"),t={container:{padding:"20px",backgroundColor:"#2b2d31",borderRadius:"8px",minHeight:"400px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #1e1f22",paddingBottom:"15px"},title:{color:"#fff",fontSize:"20px",margin:0,display:"flex",alignItems:"center",gap:"10px"},createButton:{backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},loading:{color:"#b9bbbe",textAlign:"center",padding:"40px"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},emptyIcon:{fontSize:"64px",opacity:.3,marginBottom:"20px"},emptySubtext:{fontSize:"14px",opacity:.7},eventsList:{display:"grid",gap:"15px"},eventCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"16px",border:"1px solid transparent",transition:"border-color 0.2s"},eventHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},eventTitle:{color:"#fff",fontSize:"18px",margin:0},eventDate:{color:"#5865f2",fontSize:"14px",fontWeight:"bold"},eventDescription:{color:"#b9bbbe",fontSize:"14px",marginBottom:"12px"},eventDetails:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},detail:{display:"flex",alignItems:"center",gap:"8px",color:"#b9bbbe",fontSize:"13px"},detailIcon:{color:"#72767d",fontSize:"12px"},rsvpButtons:{display:"flex",gap:"10px"},rsvpButton:{flex:1,padding:"10px",border:"1px solid #4e5058",borderRadius:"6px",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",fontSize:"14px",transition:"all 0.2s"},rsvpButtonActive:{backgroundColor:"#23a559",borderColor:"#23a559",color:"#fff"},rsvpButtonInterested:{backgroundColor:"#f0b132",borderColor:"#f0b132",color:"#1e1f22"}};export{_ as default};
