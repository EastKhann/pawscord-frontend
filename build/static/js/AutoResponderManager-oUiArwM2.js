var v=Object.defineProperty;var o=(i,a)=>v(i,"name",{value:a,configurable:!0});import{r as s,j as e}from"./react-core-Djgtqrmb.js";import{t as b}from"./index-GGLPABCW.js";import{an as C,B as w,a as R}from"./icons-vendor-BW7dxHkX.js";const O=o(({onClose:i,fetchWithAuth:a,apiBaseUrl:c,serverId:B,embedded:h=!1})=>{const[p,m]=s.useState([]),[y,f]=s.useState(!0),[x,d]=s.useState(!1),[n,l]=s.useState({trigger:"",response:"",is_regex:!1});s.useEffect(()=>{g()},[]);const g=o(async()=>{try{const r=await a(`${c}/autoresponders/list/`);if(r.ok){const k=await r.json();m(k.responders||[])}}catch{}finally{f(!1)}},"loadResponders"),j=o(async()=>{if(!n.trigger||!n.response){b.error("âŒ Tetikleyici ve yanÄ±t gerekli");return}try{(await a(`${c}/autoresponders/create/`,{method:"POST",body:JSON.stringify(n)})).ok&&(b.success("âœ… Auto-responder oluÅŸturuldu!"),d(!1),l({trigger:"",response:"",is_regex:!1}),g())}catch{}},"handleCreate"),u=e.jsxs(e.Fragment,{children:[!x&&e.jsxs("button",{onClick:o(()=>d(!0),"onClick"),style:t.createButton,children:[e.jsx(C,{})," Yeni Otomatik YanÄ±t"]}),x&&e.jsxs("div",{style:t.createForm,children:[e.jsx("input",{type:"text",placeholder:"Tetikleyici kelime (Ã¶rn: merhaba)",value:n.trigger,onChange:o(r=>l({...n,trigger:r.target.value}),"onChange"),style:t.input}),e.jsx("textarea",{placeholder:"Otomatik yanÄ±t mesajÄ±",value:n.response,onChange:o(r=>l({...n,response:r.target.value}),"onChange"),style:t.textarea}),e.jsxs("label",{style:t.checkbox,children:[e.jsx("input",{type:"checkbox",checked:n.is_regex,onChange:o(r=>l({...n,is_regex:r.target.checked}),"onChange")}),e.jsx("span",{style:{marginLeft:"8px",color:"#b9bbbe"},children:"Regex kullan"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:j,style:t.submitButton,children:"OluÅŸtur"}),e.jsx("button",{onClick:o(()=>d(!1),"onClick"),style:t.cancelButton,children:"Ä°ptal"})]})]}),y?e.jsx("div",{style:t.loading,children:"YÃ¼kleniyor..."}):p.length===0?e.jsx("div",{style:t.empty,children:"HenÃ¼z otomatik yanÄ±t oluÅŸturulmamÄ±ÅŸ"}):e.jsx("div",{style:t.responderList,children:p.map(r=>e.jsx("div",{style:t.responderItem,children:e.jsxs("div",{children:[e.jsxs("div",{style:t.trigger,children:["ðŸ¤– ",r.trigger]}),e.jsx("div",{style:t.response,children:r.response})]})},r.id))})]});return h?e.jsx("div",{style:t.content,children:u}):e.jsx("div",{style:t.overlay,onClick:i,children:e.jsxs("div",{style:t.modal,onClick:o(r=>r.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:t.header,children:[e.jsxs("h2",{style:t.title,children:[e.jsx(w,{})," Otomatik YanÄ±tlar"]}),e.jsx("button",{onClick:i,style:t.closeButton,children:e.jsx(R,{})})]}),e.jsx("div",{style:t.content,children:u})]})})},"AutoResponderManager"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.5em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.5em"},content:{padding:"20px",overflowY:"auto",flex:1},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"15px"},createForm:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px",marginBottom:"15px"},input:{width:"100%",padding:"10px",marginBottom:"10px",backgroundColor:"#2b2d31",border:"1px solid #5865f2",borderRadius:"4px",color:"white"},textarea:{width:"100%",padding:"10px",marginBottom:"10px",minHeight:"80px",backgroundColor:"#2b2d31",border:"1px solid #5865f2",borderRadius:"4px",color:"white",resize:"vertical"},checkbox:{display:"flex",alignItems:"center",marginBottom:"10px"},submitButton:{flex:1,padding:"10px",backgroundColor:"#3ba55d",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},cancelButton:{flex:1,padding:"10px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px"},responderList:{display:"flex",flexDirection:"column",gap:"10px"},responderItem:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px"},trigger:{color:"#5865f2",fontWeight:"bold",marginBottom:"8px"},response:{color:"#dcddde",fontSize:"0.9em"}};export{O as A};
