import{r as x,n as e}from"./react-core-zXIKm1Jm.js";import{t as T}from"./index-3G_5S7Np.js";import{S as g,aa as S,a as h,t as z,D as B}from"./icons-vendor-BBdoVeJd.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-PJALNo1v.js";import"./crypto-vendor-D_AcF0lD.js";import"./state-vendor-8NbFPBhQ.js";const A=({onClose:r,fetchWithAuth:l,apiBaseUrl:o,currentUser:s})=>{const[c,a]=x.useState([]),[p,i]=x.useState(null),[u,f]=x.useState(!1),[m,b]=x.useState("all");x.useEffect(()=>{y()},[m]);const y=async()=>{try{const n=await l(`${o}/tournaments/?filter=${m}`);if(n.ok){const d=await n.json();a(d.tournaments||[])}}catch(n){console.error("Tournament load error:",n)}},j=async n=>{try{const d=await l(`${o}/tournaments/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(d.ok){const k=await d.json();a([k.tournament,...c]),f(!1)}}catch(d){console.error("Tournament create error:",d)}},v=async n=>{try{(await l(`${o}/tournaments/${n}/join/`,{method:"POST"})).ok&&(T.success("✅ Turnuvaya katıldınız!"),y())}catch(d){console.error("Join error:",d)}},C=async n=>{if(confirm("Turnuvadan ayrılmak istediğinize emin misiniz?"))try{await l(`${o}/tournaments/${n}/leave/`,{method:"POST"}),y()}catch(d){console.error("Leave error:",d)}};return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.panel,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(g,{size:24,color:"#faa61a"}),e.jsx("h2",{style:t.title,children:"Turnuvalar"})]}),e.jsxs("div",{style:t.headerActions,children:[e.jsxs("button",{onClick:()=>f(!0),style:t.createButton,children:[e.jsx(S,{size:14}),e.jsx("span",{children:"Yeni Turnuva"})]}),e.jsx("button",{onClick:r,style:t.closeButton,children:e.jsx(h,{size:20})})]})]}),e.jsx("div",{style:t.filters,children:["all","active","upcoming","completed"].map(n=>e.jsx("button",{onClick:()=>b(n),style:{...t.filterButton,backgroundColor:m===n?"#5865f2":"#2f3136"},children:n==="all"?"Tümü":n==="active"?"Aktif":n==="upcoming"?"Yaklaşan":"Tamamlanan"},n))}),e.jsx("div",{style:t.content,children:c.length===0?e.jsxs("div",{style:t.empty,children:[e.jsx(g,{size:48,color:"#4e5058"}),e.jsx("p",{children:"Henüz turnuva yok"})]}):e.jsx("div",{style:t.tournamentGrid,children:c.map(n=>e.jsx(w,{tournament:n,currentUser:s,onJoin:()=>v(n.id),onLeave:()=>C(n.id),onView:()=>i(n)},n.id))})}),u&&e.jsx(R,{onClose:()=>f(!1),onCreate:j}),p&&e.jsx(I,{tournament:p,onClose:()=>i(null),fetchWithAuth:l,apiBaseUrl:o})]})})},w=({tournament:r,currentUser:l,onJoin:o,onLeave:s,onView:c})=>{const a=r.participants?.some(f=>f.username===l),p=r.participants?.length>=r.max_participants,i=r.status==="active",u=r.status==="completed";return e.jsxs("div",{style:t.tournamentCard,children:[e.jsxs("div",{style:t.cardHeader,children:[e.jsx("div",{style:t.tournamentName,children:r.name}),e.jsx("div",{style:{...t.statusBadge,backgroundColor:i?"#3ba55d":u?"#72767d":"#faa61a"},children:r.status})]}),e.jsxs("div",{style:t.cardBody,children:[e.jsxs("div",{style:t.cardInfo,children:[e.jsx(z,{size:14}),e.jsxs("span",{children:[r.participants?.length||0,"/",r.max_participants]})]}),e.jsxs("div",{style:t.cardInfo,children:[e.jsx(B,{size:14}),e.jsx("span",{children:new Date(r.start_date).toLocaleDateString("tr-TR")})]})]}),e.jsxs("div",{style:t.cardFooter,children:[e.jsx("button",{onClick:c,style:t.viewButton,children:"Detaylar"}),!u&&(a?e.jsx("button",{onClick:s,style:t.leaveButton,children:"Ayrıl"}):e.jsx("button",{onClick:o,disabled:p,style:{...t.joinButton,opacity:p?.5:1,cursor:p?"not-allowed":"pointer"},children:p?"Dolu":"Katıl"}))]})]})},R=({onClose:r,onCreate:l})=>{const[o,s]=x.useState({name:"",game:"",max_participants:8,start_date:"",prize:"",rules:""}),c=a=>{a.preventDefault(),l(o)};return e.jsx("div",{style:t.modalOverlay,children:e.jsxs("div",{style:t.modal,children:[e.jsx("h3",{style:t.modalTitle,children:"Yeni Turnuva Oluştur"}),e.jsxs("form",{onSubmit:c,style:t.form,children:[e.jsx("input",{type:"text",placeholder:"Turnuva Adı",value:o.name,onChange:a=>s({...o,name:a.target.value}),style:t.input,required:!0}),e.jsx("input",{type:"text",placeholder:"Oyun",value:o.game,onChange:a=>s({...o,game:a.target.value}),style:t.input,required:!0}),e.jsxs("select",{value:o.max_participants,onChange:a=>s({...o,max_participants:parseInt(a.target.value)}),style:t.input,children:[e.jsx("option",{value:4,children:"4 Kişi"}),e.jsx("option",{value:8,children:"8 Kişi"}),e.jsx("option",{value:16,children:"16 Kişi"}),e.jsx("option",{value:32,children:"32 Kişi"})]}),e.jsx("input",{type:"datetime-local",value:o.start_date,onChange:a=>s({...o,start_date:a.target.value}),style:t.input,required:!0}),e.jsx("input",{type:"text",placeholder:"Ödül (opsiyonel)",value:o.prize,onChange:a=>s({...o,prize:a.target.value}),style:t.input}),e.jsx("textarea",{placeholder:"Kurallar",value:o.rules,onChange:a=>s({...o,rules:a.target.value}),style:{...t.input,minHeight:"100px"}}),e.jsxs("div",{style:t.modalButtons,children:[e.jsx("button",{type:"button",onClick:r,style:t.cancelButton,children:"İptal"}),e.jsx("button",{type:"submit",style:t.submitButton,children:"Oluştur"})]})]})]})})},I=({tournament:r,onClose:l,fetchWithAuth:o,apiBaseUrl:s})=>{const[c,a]=x.useState(null);x.useEffect(()=>{p()},[r.id]);const p=async()=>{try{const i=await o(`${s}/tournaments/${r.id}/bracket/`);if(i.ok){const u=await i.json();a(u.bracket)}}catch(i){console.error("Bracket load error:",i)}};return e.jsx("div",{style:t.modalOverlay,children:e.jsxs("div",{style:{...t.modal,maxWidth:"800px"},children:[e.jsxs("div",{style:t.modalHeader,children:[e.jsx("h3",{style:t.modalTitle,children:r.name}),e.jsx("button",{onClick:l,style:t.modalClose,children:e.jsx(h,{size:18})})]}),e.jsxs("div",{style:t.modalContent,children:[e.jsxs("div",{style:t.detailSection,children:[e.jsx("h4",{children:"Bilgiler"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Oyun:"})," ",r.game]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Katılımcı:"})," ",r.participants?.length,"/",r.max_participants]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Başlangıç:"})," ",new Date(r.start_date).toLocaleString("tr-TR")]}),r.prize&&e.jsxs("p",{children:[e.jsx("strong",{children:"Ödül:"})," ",r.prize]})]}),r.rules&&e.jsxs("div",{style:t.detailSection,children:[e.jsx("h4",{children:"Kurallar"}),e.jsx("p",{children:r.rules})]}),c&&e.jsxs("div",{style:t.detailSection,children:[e.jsx("h4",{children:"Eşleşmeler"}),e.jsx("div",{style:t.bracketInfo,children:"Bracket görseli yakında eklenecek"})]}),e.jsxs("div",{style:t.detailSection,children:[e.jsx("h4",{children:"Katılımcılar"}),e.jsx("div",{style:t.participantList,children:r.participants?.map(i=>e.jsxs("div",{style:t.participant,children:[e.jsx("span",{children:i.username}),i.seed&&e.jsxs("span",{style:t.seed,children:["#",i.seed]})]},i.id))})]})]})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"100%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerActions:{display:"flex",gap:"12px"},title:{margin:0,fontSize:"20px",color:"#ffffff"},createButton:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px"},filters:{display:"flex",gap:"8px",padding:"16px 20px",borderBottom:"1px solid #202225"},filterButton:{padding:"8px 16px",borderRadius:"4px",border:"none",color:"#ffffff",cursor:"pointer",fontSize:"13px"},content:{flex:1,overflowY:"auto",padding:"20px"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},tournamentGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"16px"},tournamentCard:{backgroundColor:"#36393f",borderRadius:"8px",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"start"},tournamentName:{color:"#ffffff",fontSize:"16px",fontWeight:"bold",flex:1},statusBadge:{padding:"4px 8px",borderRadius:"12px",fontSize:"11px",color:"#ffffff",textTransform:"uppercase",fontWeight:"bold"},cardBody:{display:"flex",flexDirection:"column",gap:"8px"},cardInfo:{display:"flex",alignItems:"center",gap:"8px",color:"#b9bbbe",fontSize:"13px"},cardFooter:{display:"flex",gap:"8px",marginTop:"auto"},viewButton:{flex:1,backgroundColor:"#202225",color:"#ffffff",border:"none",padding:"8px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},joinButton:{flex:1,backgroundColor:"#3ba55d",color:"#ffffff",border:"none",padding:"8px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},leaveButton:{flex:1,backgroundColor:"#ed4245",color:"#ffffff",border:"none",padding:"8px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},modal:{backgroundColor:"#36393f",borderRadius:"8px",padding:"24px",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto"},modalTitle:{color:"#ffffff",marginBottom:"16px"},form:{display:"flex",flexDirection:"column",gap:"12px"},input:{width:"100%",backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"10px",borderRadius:"4px",fontSize:"14px",outline:"none"},modalButtons:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"16px"},cancelButton:{backgroundColor:"transparent",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},submitButton:{backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},modalClose:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"},modalContent:{display:"flex",flexDirection:"column",gap:"16px"},detailSection:{backgroundColor:"#2f3136",padding:"16px",borderRadius:"8px"},bracketInfo:{textAlign:"center",padding:"20px",color:"#b9bbbe"},participantList:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"8px"},participant:{backgroundColor:"#36393f",padding:"8px 12px",borderRadius:"4px",color:"#dcddde",fontSize:"13px",display:"flex",justifyContent:"space-between"},seed:{color:"#faa61a",fontWeight:"bold"}};export{A as default};
