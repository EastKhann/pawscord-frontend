import{a as w,r,j as a}from"./react-core-D6cE4lil.js";import{t as f,a as g,aF as S,b3 as y}from"./icons-vendor-fClA8qVL.js";const E=({onClose:i,onNavigate:k,channels:u=[],users:d=[],conversations:h=[]})=>{const[l,x]=r.useState(""),[p,c]=r.useState(0),m=r.useRef(null);r.useEffect(()=>{m.current?.focus()},[]);const v=(e,s)=>{if(!e||!s)return!1;if(e=e.toLowerCase(),s=s.toLowerCase(),e.includes(s))return!0;let n=0;for(let o=0;o<e.length&&n<s.length;o++)e[o]===s[n]&&n++;return n===s.length},t=r.useMemo(()=>l.trim()?[...u.map(s=>({type:"channel",...s,searchText:s.name})),...d.map(s=>({type:"user",...s,searchText:s.username})),...h.map(s=>({type:"dm",...s,searchText:s.target_user}))].filter(s=>v(s.searchText,l)).slice(0,10):[...u.slice(0,5).map(s=>({type:"channel",...s})),...d.slice(0,5).map(s=>({type:"user",...s})),...h.slice(0,5).map(s=>({type:"dm",...s}))].slice(0,10),[l,u,d,h]),N=e=>{e.key==="ArrowDown"?(e.preventDefault(),c(s=>(s+1)%t.length)):e.key==="ArrowUp"?(e.preventDefault(),c(s=>(s-1+t.length)%t.length)):e.key==="Enter"&&t[p]?(e.preventDefault(),j(t[p])):e.key==="Escape"&&i()},j=e=>{k(e),i()};return a.jsx("div",{className:"quick-switcher-overlay",onClick:i,children:a.jsxs("div",{className:"quick-switcher-panel",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"quick-switcher-search",children:[a.jsx(f,{className:"search-icon"}),a.jsx("input",{ref:m,type:"text",placeholder:"Kanal veya kullanıcı ara... (Ctrl+K)",value:l,onChange:e=>{x(e.target.value),c(0)},onKeyDown:N,className:"search-input"}),l&&a.jsx("button",{className:"clear-btn",onClick:()=>x(""),children:a.jsx(g,{})})]}),a.jsx("div",{className:"quick-switcher-results",children:t.length>0?t.map((e,s)=>a.jsxs("div",{className:`quick-result-item ${s===p?"selected":""}`,onClick:()=>j(e),onMouseEnter:()=>c(s),children:[a.jsxs("div",{className:"result-icon",children:[e.type==="channel"&&a.jsx(S,{}),e.type==="user"&&a.jsx(y,{}),e.type==="dm"&&a.jsx(y,{})]}),a.jsxs("div",{className:"result-content",children:[a.jsxs("div",{className:"result-name",children:[e.type==="channel"&&e.name,e.type==="user"&&e.username,e.type==="dm"&&e.target_user]}),a.jsxs("div",{className:"result-type",children:[e.type==="channel"&&"Kanal",e.type==="user"&&"Kullanıcı",e.type==="dm"&&"Direkt Mesaj"]})]})]},`${e.type}-${e.id||e.username}`)):a.jsxs("div",{className:"no-results",children:[a.jsx(f,{size:32}),a.jsx("p",{children:"Sonuç bulunamadı"})]})}),a.jsx("div",{className:"quick-switcher-footer",children:a.jsxs("div",{className:"shortcut-hints",children:[a.jsxs("span",{children:[a.jsx("kbd",{children:"↑↓"})," Gezin"]}),a.jsxs("span",{children:[a.jsx("kbd",{children:"Enter"})," Seç"]}),a.jsxs("span",{children:[a.jsx("kbd",{children:"Esc"})," Kapat"]})]})})]})})},K=w.memo(E);export{K as default};
