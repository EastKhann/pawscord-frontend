var _=Object.defineProperty;var a=(r,n)=>_(r,"name",{value:n,configurable:!0});import{r as c,a as R,j as e}from"./react-core-Djgtqrmb.js";import{a6 as A,a as j,a9 as L,k as M,aZ as K}from"./icons-vendor-BW7dxHkX.js";import{u as O,e as $}from"./index-GGLPABCW.js";import{L as T}from"./LazyImage-h7tJnYE0.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const D=a(({fetchWithAuth:r,apiBaseUrl:n,onPendingCountChange:l})=>{const[p,o]=c.useState("all"),[u,b]=c.useState([]),[t,y]=c.useState([]),[f,k]=c.useState([]),[x,S]=c.useState(""),[v,w]=c.useState(!0),[C,i]=c.useState(null),{globalData:B}=O(),m=c.useCallback(async()=>{try{const g=await r(`${n}/friends/list/`);if(g.ok){const d=await g.json();b(d.friends||[]),y(d.incoming_requests||[]),k(d.outgoing_requests||[]),l&&l((d.incoming_requests||[]).length)}}catch{}finally{w(!1)}},[n,r,l]);c.useEffect(()=>{m()},[m]),c.useEffect(()=>{B?.type==="friend_list_update"&&(m(),i({type:"info",text:'ğŸ”” ArkadaÅŸ listeniz gÃ¼ncellendi! "Bekleyenler" sekmesini kontrol edin.'}),setTimeout(()=>i(null),5e3))},[B,m]);const E=c.useCallback(async g=>{if(g.preventDefault(),!!x.trim())try{const d=await r(`${n}/friends/send/`,{method:"POST",body:JSON.stringify({username:x.trim()})}),h=await d.json();d.ok?(i({type:"success",text:`âœ… Ä°stek gÃ¶nderildi: ${x}`}),S(""),m()):i({type:"error",text:`âŒ ${h.error||"Hata."}`})}catch{i({type:"error",text:"âŒ Sunucu hatasÄ±."})}},[x,n,r,m]),F=c.useCallback(async(g,d)=>{try{(await r(`${n}/friends/respond/${g}/`,{method:"POST",body:JSON.stringify({action:d})})).ok&&(m(),i({type:"success",text:d==="accept"?"ArkadaÅŸlÄ±k kabul edildi!":"Ä°stek reddedildi."}))}catch{}},[n,r,m]),z=c.useCallback(async(g,d)=>{if(await $(`${d} ile arkadaÅŸlÄ±ÄŸÄ± sonlandÄ±rmak istediÄŸinize emin misiniz?`))try{(await r(`${n}/friends/remove/${g}/`,{method:"DELETE"})).ok?(m(),i({type:"success",text:"âŒ ArkadaÅŸlÄ±k sonlandÄ±rÄ±ldÄ±."})):i({type:"error",text:"âŒ Silme baÅŸarÄ±sÄ±z."})}catch{i({type:"error",text:"âŒ Sunucu hatasÄ±."})}},[n,r,m]);return{activeTab:p,setActiveTab:o,friends:u,requests:t,outgoing:f,addUsername:x,setAddUsername:S,loading:v,statusMsg:C,setStatusMsg:i,handleSendRequest:E,handleRespond:F,handleRemoveFriend:z}},"useFriendsAPI"),s={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#313338",color:"#dcddde"},topBar:{padding:"10px 15px",borderBottom:"1px solid #1f2023",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#313338",height:"50px",boxSizing:"border-box"},headerLeft:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},title:{fontSize:"1em",fontWeight:"bold",color:"#fff",display:"flex",alignItems:"center",marginRight:"10px",paddingRight:"10px",borderRight:"1px solid #4f545c",whiteSpace:"nowrap"},tabButtons:{display:"flex",gap:"10px",overflowX:"auto"},tabBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"0.9em",padding:"2px 8px",borderRadius:"4px",fontWeight:"500",transition:"all 0.2s",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"5px"},activeTabBtn:{color:"#fff",backgroundColor:"rgba(79,84,92,0.32)"},addFriendBtn:{backgroundColor:"#23a559",color:"#fff",border:"none",borderRadius:"4px",padding:"2px 10px",fontSize:"0.9em",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s",whiteSpace:"nowrap"},activeAddFriendBtn:{backgroundColor:"transparent",color:"#23a559",border:"1px solid transparent"},closeHeaderBtn:{background:"none",border:"none",color:"#b9bbbe",fontSize:"1.5em",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",borderRadius:"50%"},contentArea:{flexGrow:1,padding:"20px",overflowY:"auto"},addSection:{maxWidth:"100%",borderBottom:"1px solid #4f545c",paddingBottom:"20px"},addForm:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"10px",backgroundColor:"#1e1f22",padding:"10px",borderRadius:"8px",border:"1px solid #1e1f22",alignItems:"stretch",marginTop:"10px"},input:{flexGrow:1,background:"transparent",border:"none",color:"#fff",fontSize:"1em",outline:"none",minHeight:"40px"},sendRequestBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap"},listContainer:{},listHeader:{fontSize:"0.8em",color:"#b9bbbe",textTransform:"uppercase",marginBottom:"15px",borderBottom:"1px solid #4f545c",paddingBottom:"10px"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"50px"},emptyText:{color:"#72767d",fontStyle:"italic",marginBottom:"20px",textAlign:"center"},emptyBtn:{padding:"10px 20px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},listItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",borderTop:"1px solid #4f545c",cursor:"pointer",transition:"background-color 0.2s"},userInfo:{display:"flex",alignItems:"center"},avatar:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover"},username:{color:"#fff",fontWeight:"600"},status:{fontSize:"0.8em",color:"#b9bbbe"},actions:{display:"flex",gap:"10px"},iconButton:{padding:"8px",borderRadius:"50%",backgroundColor:"#2f3136",border:"none",color:"#b9bbbe",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},acceptBtn:{padding:"8px",borderRadius:"50%",backgroundColor:"#2f3136",border:"none",color:"#43b581",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},rejectBtn:{padding:"8px",borderRadius:"50%",backgroundColor:"#2f3136",border:"none",color:"#f04747",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},badgePulse:{backgroundColor:"#f04747",color:"#fff",borderRadius:"50%",padding:"1px 6px",fontSize:"0.75em",marginLeft:"5px",animation:"pulseBadge 1.5s infinite"}},I=document.createElement("style");I.innerText=`
  @keyframes pulseBadge {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(240, 71, 71, 0.7); }
    70% { transform: scale(1.1); box-shadow: 0 0 0 6px rgba(240, 71, 71, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(240, 71, 71, 0); }
  }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
`;document.head.appendChild(I);const P=new Set(["fps monitor","msi afterburner","rivatuner","fraps","nvidia geforce experience","amd radeon software","obs","obs studio","streamlabs","xsplit","nvidia shadowplay","movavi video suite","movavi","camtasia","bandicam","soundpad","voicemod","discord overlay","teamspeak","mumble","overwolf","razer cortex","steam","epic games launcher","origin","uplay","battle.net","gog galaxy","ea app","xbox app","microsoft store"]),H=a(r=>{if(!r)return!1;const n=r.toLowerCase().trim();for(const l of P)if(n.includes(l)||l.includes(n))return!0;return!1},"isIgnoredApp"),G={online:"Ã‡evrimiÃ§i",idle:"BoÅŸta",dnd:"RahatsÄ±z Etmeyin",invisible:"GÃ¶rÃ¼nmez",offline:"Ã‡evrimdÄ±ÅŸÄ±"},q={online:"#23a559",idle:"#f0b232",dnd:"#f23f43",invisible:"#80848e",offline:"#80848e"},U=a(({friends:r,onlineUsers:n=[],getDeterministicAvatar:l,onStartDM:p,handleRemoveFriend:o,setActiveTab:u})=>{if(r.length===0)return e.jsxs("div",{style:s.emptyState,children:[e.jsx("div",{style:{fontSize:"3em",marginBottom:"10px"},children:"ğŸ¥º"}),e.jsx("p",{style:s.emptyText,children:"HenÃ¼z kimseyle arkadaÅŸ deÄŸilsin."}),e.jsx("button",{onClick:a(()=>u("add"),"onClick"),style:s.emptyBtn,children:"ArkadaÅŸ Ekle"})]});const b=localStorage.getItem("chat_username")||"";return r.map(t=>{const y=t.sender_username===b,f=y?t.receiver_username:t.sender_username,k=y?t.receiver_avatar:t.sender_avatar,x=y?t.receiver_activity:t.sender_activity,v=Array.isArray(n)&&n.includes(f)?"online":"offline",w=G[v]||"Ã‡evrimdÄ±ÅŸÄ±",C=q[v]||"#80848e";return e.jsxs("div",{style:s.listItem,children:[e.jsxs("div",{style:s.userInfo,role:"button",tabIndex:0,onClick:a(()=>p(f),"onClick"),onKeyDown:a(i=>i.key==="Enter"&&p(f),"onKeyDown"),"aria-label":`${f} ile sohbet et`,children:[e.jsx(T,{src:k||l(f),style:s.avatar,alt:"avatar"}),e.jsxs("div",{style:{marginLeft:"12px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("div",{style:s.username,children:f}),e.jsx("div",{style:{...s.status,color:C},children:w}),x?.spotify&&e.jsxs("span",{style:{fontSize:"10px",color:"#1db954",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:"2px"},children:["ğŸµ"," ",x.spotify.track]}),x?.steam&&!H(x.steam.game)&&e.jsxs("span",{style:{fontSize:"10px",color:"#66c0f4",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:"2px"},children:["ğŸ®"," ",x.steam.game]})]})]}),e.jsxs("div",{style:s.actions,children:[e.jsx("button",{style:s.iconButton,title:"Mesaj At",onClick:a(i=>{i.stopPropagation(),p(f)},"onClick"),children:e.jsx(A,{})}),e.jsx("button",{style:{...s.iconButton,backgroundColor:"#ed4245"},title:"ArkadaÅŸlÄ±ktan Ã‡Ä±kar",onClick:a(i=>{i.stopPropagation(),o(t.id,f)},"onClick"),children:e.jsx(j,{})})]})]},t.id)})},"FriendsList"),N=R.memo(U),Y=a(({requests:r,outgoing:n,getDeterministicAvatar:l,handleRespond:p})=>e.jsxs("div",{style:s.listContainer,children:[e.jsxs("h4",{style:s.listHeader,children:["BEKLEYEN ","Ä°","STEKLER ","â€”"," ",r.length]}),r.length===0&&n.length===0&&e.jsx("p",{style:s.emptyText,children:"Bekleyen istek yok."}),r.map(o=>{const u=o.sender_username||"Unknown",b=o.sender_avatar;return e.jsxs("div",{style:{...s.listItem,backgroundColor:"rgba(250, 166, 26, 0.1)"},children:[e.jsxs("div",{style:s.userInfo,children:[e.jsx(T,{src:b||l(u),style:s.avatar,alt:"avatar"}),e.jsxs("div",{style:{marginLeft:"12px"},children:[e.jsx("strong",{style:{color:"white",display:"block"},children:u}),e.jsx("span",{style:{fontSize:"0.8em",color:"#faa61a"},children:"Sana istek gÃ¶nderdi!"})]})]}),e.jsxs("div",{style:s.actions,children:[e.jsx("button",{onClick:a(()=>p(o.id,"accept"),"onClick"),style:s.acceptBtn,title:"Kabul Et",children:e.jsx(L,{})}),e.jsx("button",{onClick:a(()=>p(o.id,"reject"),"onClick"),style:s.rejectBtn,title:"Reddet",children:e.jsx(j,{})})]})]},o.id)}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("h4",{style:{...s.listHeader,marginTop:"30px"},children:["G","Ã–","NDERD","Ä°","KLER","Ä°","M ","â€”"," ",n.length]}),n.map(o=>{const u=o.receiver_username||"Unknown",b=o.receiver_avatar;return e.jsxs("div",{style:s.listItem,children:[e.jsxs("div",{style:s.userInfo,children:[e.jsx(T,{src:b||l(u),style:s.avatar,alt:"avatar"}),e.jsxs("span",{style:{marginLeft:"12px",color:"#b9bbbe"},children:[u," (Bekliyor...)"]})]}),e.jsx("button",{onClick:a(()=>p(o.id,"reject"),"onClick"),style:s.rejectBtn,title:"{'Ä°'}ptal Et",children:e.jsx(j,{})})]},o.id)})]})]}),"PendingRequests"),J=a(({fetchWithAuth:r,apiBaseUrl:n,getDeterministicAvatar:l,onStartDM:p,onClose:o,onPendingCountChange:u,onlineUsers:b=[]})=>{const t=D({fetchWithAuth:r,apiBaseUrl:n,onPendingCountChange:u});return e.jsxs("div",{style:s.container,children:[e.jsxs("div",{style:s.topBar,children:[e.jsxs("div",{style:s.headerLeft,children:[e.jsxs("div",{style:s.title,children:[e.jsx(A,{style:{marginRight:"10px"}}),"Arkada","ÅŸ","lar"]}),e.jsxs("div",{style:s.tabButtons,children:[e.jsxs("button",{style:{...s.tabBtn,...t.activeTab==="all"?s.activeTabBtn:{}},onClick:a(()=>{t.setActiveTab("all"),t.setStatusMsg(null)},"onClick"),children:["T","Ã¼","m","Ã¼"," (",t.friends.length,")"]}),e.jsxs("button",{style:{...s.tabBtn,...t.activeTab==="pending"?s.activeTabBtn:{}},onClick:a(()=>{t.setActiveTab("pending"),t.setStatusMsg(null)},"onClick"),children:["Bekleyenler",t.requests.length>0&&e.jsx("span",{style:s.badgePulse,children:t.requests.length})]}),e.jsxs("button",{style:{...s.addFriendBtn,...t.activeTab==="add"?s.activeAddFriendBtn:{}},onClick:a(()=>{t.setActiveTab("add"),t.setStatusMsg(null)},"onClick"),children:["Arkada","ÅŸ"," Ekle"]})]})]}),e.jsx("button",{onClick:o,style:s.closeHeaderBtn,title:"Kapat",children:e.jsx(j,{})})]}),e.jsxs("div",{style:s.contentArea,children:[t.statusMsg&&e.jsxs("div",{style:{marginBottom:"20px",padding:"12px",borderRadius:"8px",backgroundColor:t.statusMsg.type==="success"?"rgba(67, 181, 129, 0.2)":t.statusMsg.type==="info"?"rgba(88, 101, 242, 0.2)":"rgba(240, 71, 71, 0.2)",color:t.statusMsg.type==="success"?"#43b581":t.statusMsg.type==="info"?"#dee0fc":"#f04747",border:`1px solid ${t.statusMsg.type==="success"?"#43b581":t.statusMsg.type==="info"?"#5865f2":"#f04747"}`,display:"flex",alignItems:"center",gap:"10px",animation:"fadeIn 0.3s ease"},children:[t.statusMsg.type==="info"&&e.jsx(M,{}),t.statusMsg.text]}),t.activeTab==="add"&&e.jsxs("div",{style:s.addSection,children:[e.jsxs("h3",{style:{color:"#fff",marginBottom:"10px"},children:["ARKADA","Å"," EKLE"]}),e.jsxs("p",{style:{color:"#b9bbbe",fontSize:"0.9em",marginBottom:"20px"},children:["Kullan","Ä±","c","Ä±"," ad","Ä±","n","Ä±"," girerek arkada","ÅŸ"," ekleyebilirsin."]}),e.jsxs("form",{onSubmit:t.handleSendRequest,style:s.addForm,children:[e.jsx("input",{type:"text",value:t.addUsername,onChange:a(y=>t.setAddUsername(y.target.value),"onChange"),placeholder:"KullanÄ±cÄ± AdÄ± veya ArkadaÅŸ Kodu (Ã–rn: 8392014)","aria-label":"KullanÄ±cÄ± adÄ± veya arkadaÅŸ kodu",style:s.input,autoFocus:!0}),e.jsxs("button",{type:"submit",style:s.sendRequestBtn,children:[e.jsx(K,{style:{marginRight:"5px"}})," G","Ã¶","nder"]})]})]}),t.activeTab==="all"&&e.jsxs("div",{style:s.listContainer,children:[e.jsxs("h4",{style:s.listHeader,children:["ARKADA","Å","LAR ","â€”"," ",t.friends.length]}),e.jsx(N,{friends:t.friends,onlineUsers:b,getDeterministicAvatar:l,onStartDM:p,handleRemoveFriend:t.handleRemoveFriend,setActiveTab:t.setActiveTab})]}),t.activeTab==="pending"&&e.jsx(Y,{requests:t.requests,outgoing:t.outgoing,getDeterministicAvatar:l,handleRespond:t.handleRespond})]})]})},"FriendsTab"),ae=R.memo(J);export{ae as default};
