var k=Object.defineProperty;var s=(c,p)=>k(c,"name",{value:p,configurable:!0});import{r as b,j as e}from"./react-core-Djgtqrmb.js";import{c as v,t as l}from"./index-GGLPABCW.js";import{z as w,a as B}from"./icons-vendor-BW7dxHkX.js";const I=s(({room:c,conversation:p,onClose:u,fetchWithAuth:h,apiBaseUrl:g})=>{const{overlayProps:y,dialogProps:j}=v({onClose:u,label:"Zamanlanmış Mesaj"}),[r,f]=b.useState(""),[n,i]=b.useState(""),[d,m]=b.useState(!1),S=s(async()=>{if(!r.trim()){l.error("❌ Mesaj boş olamaz");return}if(!n){l.error("❌ Lütfen bir tarih seçin");return}m(!0);try{const o=await h(`${g}/scheduled/create/`,{method:"POST",body:JSON.stringify({content:r,scheduled_time:n,room_slug:c,conversation_id:p})});if(o.ok)l.success("✅ Mesaj plandı!"),u();else{const a=await o.json();l.error("❌ Hata: "+(a.error||"Bilinmeyen hata"))}}catch{l.error("❌ Mesaj planlanamadı")}finally{m(!1)}},"handleSchedule"),x=s(o=>{const a=new Date;return a.setMinutes(a.getMinutes()+o),a.toISOString().slice(0,16)},"getPresetTime");return e.jsx("div",{style:t.overlay,...y,children:e.jsxs("div",{style:t.modal,...j,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("h3",{style:t.title,children:[e.jsx(w,{})," Mesaj Planla"]}),e.jsx("button",{onClick:u,style:t.closeButton,children:e.jsx(B,{})})]}),e.jsxs("div",{style:t.content,children:[e.jsxs("div",{style:t.presets,children:[e.jsx("button",{onClick:s(()=>i(x(5)),"onClick"),style:t.presetButton,children:"5 dk sonra"}),e.jsx("button",{onClick:s(()=>i(x(30)),"onClick"),style:t.presetButton,children:"30 dk sonra"}),e.jsx("button",{onClick:s(()=>i(x(60)),"onClick"),style:t.presetButton,children:"1 saat sonra"})]}),e.jsxs("div",{style:t.inputGroup,children:[e.jsx("label",{style:t.label,children:"Gönderilme Zamanı"}),e.jsx("input",{type:"datetime-local",value:n,onChange:s(o=>i(o.target.value),"onChange"),style:t.input})]}),e.jsxs("div",{style:t.inputGroup,children:[e.jsx("label",{style:t.label,children:"Mesaj"}),e.jsx("textarea",{value:r,onChange:s(o=>f(o.target.value),"onChange"),placeholder:"Planlanacak mesajı yazın...",style:{...t.input,minHeight:"100px",resize:"vertical"}})]}),e.jsx("button",{onClick:S,disabled:d||!r.trim()||!n,style:{...t.scheduleButton,opacity:d||!r.trim()||!n?.5:1,cursor:d||!r.trim()||!n?"not-allowed":"pointer"},children:d?"Planlanıyor...":"⏰ Mesajı Planla"})]})]})})},"ScheduledMessageModal"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"500px",boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.3em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.3em",padding:"5px"},content:{padding:"20px"},presets:{display:"flex",gap:"8px",marginBottom:"15px"},presetButton:{flex:1,padding:"8px",backgroundColor:"#40444b",border:"1px solid #5865f2",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"0.85em"},inputGroup:{marginBottom:"15px"},label:{display:"block",color:"#b9bbbe",fontSize:"0.85em",marginBottom:"5px",fontWeight:"bold"},input:{width:"100%",padding:"10px",backgroundColor:"#40444b",border:"1px solid #5865f2",borderRadius:"4px",color:"white",fontSize:"1em"},scheduleButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",fontSize:"1em"}};export{I as S};
