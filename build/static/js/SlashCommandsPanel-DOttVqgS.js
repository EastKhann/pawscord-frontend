import{r as t,n as s}from"./react-core-Cj7FUMmY.js";import{ag as d,a$ as k,r as E,b5 as F}from"./icons-vendor-DsJCxoAK.js";import"./editor-vendor-D9c4a6XZ.js";function T({apiBaseUrl:i,fetchWithAuth:m}){const[u,g]=t.useState([]),[f,x]=t.useState(""),[h,j]=t.useState({}),[c,C]=t.useState(null),[l,n]=t.useState(null),[y,S]=t.useState([]),[p,r]=t.useState(!1);t.useEffect(()=>{b(),N()},[]);const b=async()=>{r(!0);try{const e=await m(`${i}/commands/list/`);if(e.ok){const a=await e.json();g(a.commands||[])}}catch{}finally{r(!1)}},N=async()=>{try{const e=await m(`${i}/commands/history/`);if(e.ok){const a=await e.json();S(a.history||[])}}catch{}},w=async e=>{r(!0),n(null);try{const a=await m(`${i}/commands/${e.name}/execute/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({args:h})});if(a.ok){const o=await a.json();n({success:!0,output:o.output||"Command executed successfully!"}),N()}else{const o=await a.json();n({success:!1,output:o.error||"Command failed"})}}catch(a){n({success:!1,output:"Network error: "+a.message})}finally{r(!1)}},$=e=>{C(e),x(`/${e.name}`),j({}),n(null)},v=e=>({utility:"#5865f2",moderation:"#f04747",fun:"#43b581",info:"#faa61a",admin:"#7289da"})[e]||"#72767d";return s.jsxs("div",{className:"slash-commands-panel",children:[s.jsx("div",{className:"commands-header",children:s.jsxs("h2",{children:[s.jsx(d,{})," Slash Commands"]})}),s.jsxs("div",{className:"command-executor",children:[s.jsxs("div",{className:"executor-input",children:[s.jsx(d,{className:"terminal-icon"}),s.jsx("input",{type:"text",placeholder:"Type / to see available commands...",value:f,onChange:e=>x(e.target.value),className:"command-input"}),c&&s.jsxs("button",{className:"execute-btn",onClick:()=>w(c),disabled:p,children:[s.jsx(k,{})," Execute"]})]}),l&&s.jsxs("div",{className:`command-result ${l.success?"success":"error"}`,children:[s.jsx("div",{className:"result-header",children:l.success?"✅ Success":"❌ Error"}),s.jsx("div",{className:"result-output",children:l.output})]})]}),c&&c.parameters&&s.jsxs("div",{className:"command-params",children:[s.jsx("h3",{children:"Parameters:"}),c.parameters.map((e,a)=>s.jsxs("div",{className:"param-input",children:[s.jsxs("label",{children:[e.name," ",e.required&&s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:e.type==="number"?"number":"text",placeholder:e.description,value:h[e.name]||"",onChange:o=>j({...h,[e.name]:o.target.value}),className:"param-field"})]},a))]}),s.jsxs("div",{className:"commands-list",children:[s.jsxs("h3",{children:[s.jsx(E,{})," Available Commands (",u.length,")"]}),p&&u.length===0?s.jsx("div",{className:"loading",children:"Loading commands..."}):s.jsx("div",{className:"commands-grid",children:u.map((e,a)=>s.jsxs("div",{className:`command-card ${c?.name===e.name?"selected":""}`,onClick:()=>$(e),style:{borderLeftColor:v(e.category)},children:[s.jsxs("div",{className:"command-header",children:[s.jsxs("div",{className:"command-name",children:["/",e.name]}),s.jsx("div",{className:"command-category",style:{background:v(e.category)},children:e.category})]}),s.jsx("div",{className:"command-description",children:e.description}),e.usage&&s.jsx("div",{className:"command-usage",children:s.jsx("code",{children:e.usage})})]},a))})]}),s.jsxs("div",{className:"command-history",children:[s.jsxs("h3",{children:[s.jsx(F,{})," Command History"]}),y.length===0?s.jsxs("div",{className:"empty-history",children:[s.jsx(d,{className:"empty-icon"}),s.jsx("p",{children:"No commands executed yet"})]}):s.jsx("div",{className:"history-list",children:y.slice(0,10).map((e,a)=>s.jsxs("div",{className:`history-item ${e.success?"success":"error"}`,children:[s.jsxs("div",{className:"history-command",children:[s.jsx(d,{})," /",e.command]}),s.jsx("div",{className:"history-time",children:new Date(e.executed_at).toLocaleString()})]},a))})]})]})}export{T as default};
