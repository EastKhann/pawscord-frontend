import{b as e,r as a}from"./react-core-9vc7GIjk.js";import{a as T}from"./icons-vendor-NoxEirJf.js";import{A as h}from"./index-DR3ngHaW.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const k=[{key:"custom",label:"Ã–zel",icon:"âœ¨",color:"#5865F2",placeholder:"Ã–zel durumunu yaz..."},{key:"gaming",label:"Oynuyor",icon:"ðŸŽ®",color:"#57F287",placeholder:"Hangi oyunu oynuyorsun?"},{key:"happy",label:"Dinliyor",icon:"ðŸŽ§",color:"#1DB954",placeholder:"Ne dinliyorsun?"},{key:"focused",label:"Ä°zliyor",icon:"ðŸ‘€",color:"#E91E63",placeholder:"Ne izliyorsun?"},{key:"creative",label:"YayÄ±nda",icon:"ðŸ“¡",color:"#9146FF",placeholder:"YayÄ±n baÅŸlÄ±ÄŸÄ±..."},{key:"excited",label:"YarÄ±ÅŸÄ±yor",icon:"ðŸ†",color:"#FAA61A",placeholder:"Hangi yarÄ±ÅŸma?"},{key:"working",label:"Ã‡alÄ±ÅŸÄ±yor",icon:"ðŸ’¼",color:"#747F8D",placeholder:"Ne Ã¼zerinde Ã§alÄ±ÅŸÄ±yorsun?"},{key:"studying",label:"Okuyor",icon:"ðŸ“š",color:"#5865F2",placeholder:"Ne okuyorsun?"}],I=[{label:"Temizleme",value:null},{label:"30 dakika",value:30},{label:"1 saat",value:60},{label:"4 saat",value:240},{label:"BugÃ¼n",value:"today"}],A=({isOpen:u,onClose:n,onStatusChange:E})=>{const[x,b]=a.useState("custom"),[m,s]=a.useState("âœ¨"),[r,y]=a.useState(""),[f,S]=a.useState(null),[g,p]=a.useState(!1),[C,v]=a.useState(null);a.useEffect(()=>{if(!u)return;(async()=>{try{const d=localStorage.getItem("access_token"),c=await fetch(`${h}/api/status/custom/`,{headers:{Authorization:`Bearer ${d}`}});if(c.ok){const l=await c.json();l.type&&(v(l),b(l.type),s(l.emoji||"âœ¨"),y(l.text||l.activity||""))}}catch{}})()},[u]);const z=async()=>{p(!0);try{const o=localStorage.getItem("access_token");let d=f;if(f==="today"){const l=new Date,B=new Date(l.getFullYear(),l.getMonth(),l.getDate(),23,59,59);d=Math.floor((B-l)/6e4)}const c=await fetch(`${h}/api/status/custom/`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({type:x,emoji:m,text:r,activity:r,expires_in:d})});if(c.ok){const l=await c.json();E?.(l),n()}}catch{}finally{p(!1)}},w=async()=>{p(!0);try{const o=localStorage.getItem("access_token");await fetch(`${h}/api/status/custom/`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}}),v(null),b("custom"),s("âœ¨"),y(""),E?.(null),n()}catch{}finally{p(!1)}};if(!u)return null;const i=k.find(o=>o.key===x)||k[0];return e.createElement("div",{style:t.overlay,onClick:n},e.createElement("div",{style:t.modal,onClick:o=>o.stopPropagation()},e.createElement("div",{style:t.header},e.createElement("h3",{style:t.title},"Durumunu Ayarla"),e.createElement("button",{onClick:n,style:t.closeBtn},e.createElement(T,null))),e.createElement("div",{style:{...t.preview,borderColor:i.color}},e.createElement("span",{style:t.previewEmoji},m),e.createElement("div",{style:t.previewText},e.createElement("span",{style:{color:i.color,fontWeight:600,fontSize:12}},i.label),e.createElement("span",{style:t.previewContent},r||i.placeholder))),e.createElement("div",{style:t.section},e.createElement("label",{style:t.label},"Durum Tipi"),e.createElement("div",{style:t.typeGrid},k.map(o=>e.createElement("button",{key:o.key,onClick:()=>{b(o.key),s(o.icon)},style:{...t.typeBtn,...x===o.key?{backgroundColor:`${o.color}20`,borderColor:o.color,color:o.color}:{}}},e.createElement("span",null,o.icon),e.createElement("span",{style:{fontSize:11}},o.label))))),e.createElement("div",{style:t.section},e.createElement("label",{style:t.label},"Emoji"),e.createElement("input",{type:"text",value:m,onChange:o=>s(o.target.value.slice(-2)),style:t.emojiInput,maxLength:4})),e.createElement("div",{style:t.section},e.createElement("label",{style:t.label},"Durum Metni"),e.createElement("input",{type:"text",value:r,onChange:o=>y(o.target.value),placeholder:i.placeholder,style:t.textInput,maxLength:100}),e.createElement("span",{style:t.charCount},r.length,"/100")),e.createElement("div",{style:t.section},e.createElement("label",{style:t.label},"Otomatik Temizle"),e.createElement("div",{style:t.expiryRow},I.map(o=>e.createElement("button",{key:o.label,onClick:()=>S(o.value),style:{...t.expiryBtn,...f===o.value?t.expiryBtnActive:{}}},o.label)))),e.createElement("div",{style:t.actions},C&&e.createElement("button",{onClick:w,style:t.clearBtn,disabled:g},"Durumu Temizle"),e.createElement("div",{style:{flex:1}}),e.createElement("button",{onClick:n,style:t.cancelBtn},"Ä°ptal"),e.createElement("button",{onClick:z,style:t.saveBtn,disabled:g||!r.trim()},g?"...":"Kaydet"))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{width:"440px",maxWidth:"90vw",backgroundColor:"#36393f",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid #2f3136"},title:{margin:0,fontSize:"18px",fontWeight:700,color:"#fff"},closeBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"16px",padding:"4px"},preview:{display:"flex",alignItems:"center",gap:"12px",margin:"16px 20px",padding:"14px 16px",backgroundColor:"#2f3136",borderRadius:"8px",borderLeft:"4px solid #5865F2"},previewEmoji:{fontSize:"28px"},previewText:{display:"flex",flexDirection:"column",gap:"2px"},previewContent:{color:"#dcddde",fontSize:"14px"},section:{padding:"0 20px",marginBottom:"16px",position:"relative"},label:{display:"block",color:"#b9bbbe",fontSize:"12px",fontWeight:700,textTransform:"uppercase",marginBottom:"8px"},typeGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"6px"},typeBtn:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"10px 8px",backgroundColor:"#2f3136",border:"2px solid transparent",borderRadius:"8px",color:"#b9bbbe",cursor:"pointer",transition:"all 0.15s",fontSize:"16px"},emojiInput:{width:"60px",padding:"8px 12px",backgroundColor:"#202225",border:"1px solid #40444b",borderRadius:"6px",color:"#fff",fontSize:"24px",textAlign:"center",outline:"none"},textInput:{width:"100%",padding:"10px 14px",backgroundColor:"#202225",border:"1px solid #40444b",borderRadius:"6px",color:"#dcddde",fontSize:"14px",outline:"none",boxSizing:"border-box"},charCount:{position:"absolute",right:"28px",bottom:"-16px",fontSize:"11px",color:"#72767d"},expiryRow:{display:"flex",gap:"6px",flexWrap:"wrap"},expiryBtn:{padding:"6px 12px",backgroundColor:"#2f3136",border:"1px solid #40444b",borderRadius:"6px",color:"#b9bbbe",cursor:"pointer",fontSize:"12px",transition:"all 0.15s"},expiryBtnActive:{backgroundColor:"#5865F2",borderColor:"#5865F2",color:"#fff"},actions:{display:"flex",alignItems:"center",gap:"8px",padding:"16px 20px",borderTop:"1px solid #2f3136",backgroundColor:"#2f3136"},clearBtn:{padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #ed4245",borderRadius:"6px",color:"#ed4245",cursor:"pointer",fontSize:"13px",fontWeight:500},cancelBtn:{padding:"8px 16px",backgroundColor:"transparent",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"13px",fontWeight:500},saveBtn:{padding:"8px 20px",backgroundColor:"#5865F2",border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"13px",fontWeight:600,transition:"background 0.15s"}},M=e.memo(A);export{M as default};
