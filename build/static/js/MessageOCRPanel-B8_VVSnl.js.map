{"version":3,"file":"MessageOCRPanel-B8_VVSnl.js","sources":["../../../src/components/MessageOCRPanel.js"],"sourcesContent":["// frontend/src/components/MessageOCRPanel.js\nimport { useState, useEffect } from 'react';\nimport { FaTimes, FaImage, FaFileAlt, FaCopy, FaDownload } from 'react-icons/fa';\nimport toast from '../utils/toast';\n\n/**\n * ðŸ” Message OCR Panel\n * Resimlerden metin Ã§Ä±karma\n */\n\nconst MessageOCRPanel = ({ fetchWithAuth, apiBaseUrl, messageId, onClose }) => {\n    const [ocrText, setOcrText] = useState('');\n    const [loading, setLoading] = useState(true);\n    const [processing, setProcessing] = useState(false);\n\n    useEffect(() => {\n        loadOCRText();\n    }, [messageId]);\n\n    const loadOCRText = async () => {\n        try {\n            setLoading(true);\n            const response = await fetchWithAuth(`${apiBaseUrl}/messages/${messageId}/ocr/`);\n            if (response.ok) {\n                const data = await response.json();\n                setOcrText(data.text || '');\n            }\n        } catch (error) {\n            console.error('OCR yÃ¼kleme hatasÄ±:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const requestOCR = async () => {\n        try {\n            setProcessing(true);\n            const response = await fetchWithAuth(`${apiBaseUrl}/messages/${messageId}/ocr/request/`, {\n                method: 'POST'\n            });\n\n            if (response.ok) {\n                toast.success('OCR iÅŸlemi baÅŸlatÄ±ldÄ±');\n                setTimeout(loadOCRText, 3000); // 3 saniye sonra tekrar yÃ¼kle\n            } else {\n                toast.error('OCR iÅŸlemi baÅŸlatÄ±lamadÄ±');\n            }\n        } catch (error) {\n            console.error('OCR isteÄŸi hatasÄ±:', error);\n            toast.error('Bir hata oluÅŸtu');\n        } finally {\n            setProcessing(false);\n        }\n    };\n\n    const copyText = () => {\n        navigator.clipboard.writeText(ocrText);\n        toast.success('Metin kopyalandÄ±');\n    };\n\n    const downloadText = () => {\n        const blob = new Blob([ocrText], { type: 'text/plain' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `ocr_${messageId}.txt`;\n        a.click();\n        URL.revokeObjectURL(url);\n        toast.success('Metin indirildi');\n    };\n\n    return (\n        <div style={styles.overlay} onClick={onClose}>\n            <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\n                <div style={styles.header}>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                        <FaImage style={{ color: '#5865f2' }} />\n                        <h2 style={{ margin: 0 }}>OCR - GÃ¶rÃ¼ntÃ¼den Metin</h2>\n                    </div>\n                    <FaTimes onClick={onClose} style={styles.closeBtn} />\n                </div>\n\n                <div style={styles.content}>\n                    {loading ? (\n                        <div style={styles.loading}>\n                            <FaFileAlt style={{ fontSize: '48px', color: '#888', marginBottom: '10px' }} />\n                            <p>YÃ¼kleniyor...</p>\n                        </div>\n                    ) : ocrText ? (\n                        <>\n                            <div style={styles.toolbar}>\n                                <button onClick={copyText} style={styles.toolBtn}>\n                                    <FaCopy /> Kopyala\n                                </button>\n                                <button onClick={downloadText} style={styles.toolBtn}>\n                                    <FaDownload /> Ä°ndir\n                                </button>\n                            </div>\n                            <div style={styles.textArea}>\n                                <pre style={styles.textContent}>{ocrText}</pre>\n                            </div>\n                        </>\n                    ) : (\n                        <div style={styles.empty}>\n                            <FaImage style={{ fontSize: '64px', color: '#555', marginBottom: '15px' }} />\n                            <p>Bu mesajda OCR metni yok</p>\n                            <button\n                                onClick={requestOCR}\n                                disabled={processing}\n                                style={styles.requestBtn}\n                            >\n                                {processing ? 'Ä°ÅŸleniyor...' : 'OCR Ä°ÅŸlemini BaÅŸlat'}\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0,0,0,0.7)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 999999\n    },\n    modal: {\n        backgroundColor: '#1e1e1e',\n        borderRadius: '8px',\n        width: '90%',\n        maxWidth: '700px',\n        maxHeight: '90vh',\n        display: 'flex',\n        flexDirection: 'column',\n        color: '#fff'\n    },\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '20px',\n        borderBottom: '1px solid #333'\n    },\n    closeBtn: {\n        cursor: 'pointer',\n        fontSize: '24px',\n        color: '#888'\n    },\n    content: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    toolbar: {\n        display: 'flex',\n        gap: '10px',\n        marginBottom: '15px'\n    },\n    toolBtn: {\n        backgroundColor: '#2c2f33',\n        color: '#fff',\n        border: 'none',\n        padding: '10px 15px',\n        borderRadius: '4px',\n        cursor: 'pointer',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px',\n        fontSize: '14px'\n    },\n    textArea: {\n        flex: 1,\n        backgroundColor: '#2c2f33',\n        borderRadius: '8px',\n        padding: '15px',\n        overflow: 'auto'\n    },\n    textContent: {\n        color: '#dcddde',\n        fontSize: '14px',\n        lineHeight: '1.6',\n        margin: 0,\n        whiteSpace: 'pre-wrap',\n        wordBreak: 'break-word',\n        fontFamily: 'monospace'\n    },\n    loading: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: '60px',\n        color: '#888'\n    },\n    empty: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: '60px',\n        color: '#888'\n    },\n    requestBtn: {\n        marginTop: '20px',\n        backgroundColor: '#5865f2',\n        color: '#fff',\n        border: 'none',\n        padding: '12px 24px',\n        borderRadius: '4px',\n        cursor: 'pointer',\n        fontSize: '16px',\n        fontWeight: '600'\n    }\n};\n\nexport default MessageOCRPanel;\n"],"names":["useState","useEffect","jsxs","jsx","Fragment"],"mappings":"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"}