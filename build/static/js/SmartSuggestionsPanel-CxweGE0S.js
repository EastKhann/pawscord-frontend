var T=Object.defineProperty;var i=(p,l)=>T(p,"name",{value:l,configurable:!0});import{r as c,j as s}from"./react-core-Djgtqrmb.js";import{B as m,a as w,a_ as N,O as b,r as y,n as A,c5 as R,Q as _,a9 as P,aV as I,aF as $,c6 as E,ad as L}from"./icons-vendor-BW7dxHkX.js";import{g as q}from"./index-GGLPABCW.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const D=i(({serverId:p,channelId:l,onClose:o,onUseSuggestion:h,fetchWithAuth:x})=>{const[t,r]=c.useState(null),[f,j]=c.useState(!0),[a,d]=c.useState("replies"),[k,g]=c.useState(null),u=c.useCallback(async()=>{j(!0);try{const e=await x(`${q()}/channels/${l}/suggestions/`);if(e.ok){const n=await e.json();r(n)}else r({quick_replies:[{id:1,text:"That's a great idea! ðŸŽ‰",confidence:95,context:"Positive response"},{id:2,text:"I'll look into that and get back to you.",confidence:88,context:"Action commitment"},{id:3,text:"Thanks for sharing! Very helpful.",confidence:85,context:"Appreciation"},{id:4,text:"Could you elaborate on that?",confidence:82,context:"Clarification"},{id:5,text:"Let me check the documentation first.",confidence:78,context:"Investigation"}],trending_topics:[{topic:"Server Events",mentions:45,trend:"up"},{topic:"Gaming Night",mentions:38,trend:"up"},{topic:"Music Playlist",mentions:27,trend:"stable"},{topic:"New Members",mentions:23,trend:"down"}],suggested_emojis:["ðŸ‘","ðŸŽ‰","â¤ï¸","ðŸ”¥","ðŸ˜‚","ðŸ™","ðŸ’¯","âœ¨"],conversation_insights:{sentiment:"positive",activity_level:"high",response_rate:87,avg_response_time:"2.3 min"},smart_actions:[{id:1,action:"Create a poll about this topic",icon:"poll",type:"engagement"},{id:2,action:"Share relevant resources",icon:"share",type:"helpful"},{id:3,action:"Invite related experts",icon:"invite",type:"growth"},{id:4,action:"Pin important message",icon:"pin",type:"moderation"}]})}catch{r({quick_replies:[],trending_topics:[],suggested_emojis:[]})}j(!1)},[l,x]);c.useEffect(()=>{u()},[u]);const C=i((e,n)=>{navigator.clipboard.writeText(e),g(n),setTimeout(()=>g(null),2e3)},"handleCopy"),v=i(e=>{h&&h(e),o()},"handleUseSuggestion"),S=i(e=>{switch(e){case"positive":return"#10b981";case"neutral":return"#6b7280";case"negative":return"#ef4444";default:return"#6b7280"}},"getSentimentColor"),F=i(e=>e==="up"?s.jsx("span",{className:"trend up",children:"â†‘"}):e==="down"?s.jsx("span",{className:"trend down",children:"â†“"}):s.jsx("span",{className:"trend stable",children:"â†’"}),"getTrendIcon");return f?s.jsx("div",{className:"smart-suggestions-overlay",onClick:o,children:s.jsx("div",{className:"smart-suggestions-panel",onClick:i(e=>e.stopPropagation(),"onClick"),children:s.jsxs("div",{className:"loading-state",children:[s.jsx(m,{className:"pulse"}),s.jsx("span",{children:"Analyzing conversation..."})]})})}):s.jsx("div",{className:"smart-suggestions-overlay",onClick:o,children:s.jsxs("div",{className:"smart-suggestions-panel",onClick:i(e=>e.stopPropagation(),"onClick"),children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{className:"header-info",children:[s.jsxs("h2",{children:[s.jsx(m,{})," Smart Suggestions"]}),s.jsx("span",{className:"powered-by",children:"Powered by AI"})]}),s.jsx("button",{className:"close-btn",onClick:o,children:s.jsx(w,{})})]}),s.jsxs("div",{className:"insights-bar",children:[s.jsxs("div",{className:"insight",children:[s.jsx("span",{className:"insight-label",children:"Sentiment"}),s.jsx("span",{className:"insight-value sentiment",style:{color:S(t?.conversation_insights?.sentiment)},children:t?.conversation_insights?.sentiment||"neutral"})]}),s.jsxs("div",{className:"insight",children:[s.jsx("span",{className:"insight-label",children:"Activity"}),s.jsx("span",{className:"insight-value",children:t?.conversation_insights?.activity_level||"normal"})]}),s.jsxs("div",{className:"insight",children:[s.jsx("span",{className:"insight-label",children:"Response Rate"}),s.jsxs("span",{className:"insight-value",children:[t?.conversation_insights?.response_rate||0,"%"]})]}),s.jsxs("div",{className:"insight",children:[s.jsx("span",{className:"insight-label",children:"Avg. Response"}),s.jsx("span",{className:"insight-value",children:t?.conversation_insights?.avg_response_time||"N/A"})]})]}),s.jsxs("div",{className:"tabs",children:[s.jsxs("button",{className:`tab ${a==="replies"?"active":""}`,onClick:i(()=>d("replies"),"onClick"),children:[s.jsx(N,{})," Quick Replies"]}),s.jsxs("button",{className:`tab ${a==="topics"?"active":""}`,onClick:i(()=>d("topics"),"onClick"),children:[s.jsx(b,{})," Trending"]}),s.jsxs("button",{className:`tab ${a==="actions"?"active":""}`,onClick:i(()=>d("actions"),"onClick"),children:[s.jsx(y,{})," Smart Actions"]})]}),s.jsxs("div",{className:"tab-content",children:[a==="replies"&&s.jsxs("div",{className:"replies-tab",children:[s.jsxs("div",{className:"emoji-bar",children:[s.jsxs("span",{className:"emoji-label",children:[s.jsx(A,{})," Quick Reactions:"]}),s.jsx("div",{className:"emoji-list",children:(t?.suggested_emojis||[]).map((e,n)=>s.jsx("button",{className:"emoji-btn",onClick:i(()=>v(e),"onClick"),title:"Click to use",children:e},n))})]}),s.jsxs("div",{className:"replies-list",children:[s.jsxs("h4",{children:[s.jsx(R,{})," Suggested Replies"]}),(t?.quick_replies||[]).map(e=>s.jsxs("div",{className:"reply-item",children:[s.jsxs("div",{className:"reply-content",children:[s.jsx("span",{className:"reply-text",children:e.text}),s.jsxs("div",{className:"reply-meta",children:[s.jsx("span",{className:"context",children:e.context}),s.jsxs("span",{className:"confidence",children:[s.jsx(_,{})," ",e.confidence,"%"]})]})]}),s.jsxs("div",{className:"reply-actions",children:[s.jsx("button",{className:"action-btn copy",onClick:i(()=>C(e.text,e.id),"onClick"),title:"Copy to clipboard",children:k===e.id?s.jsx(P,{}):s.jsx(I,{})}),s.jsx("button",{className:"action-btn use",onClick:i(()=>v(e.text),"onClick"),title:"Use this reply",children:s.jsx(N,{})})]})]},e.id))]})]}),a==="topics"&&s.jsxs("div",{className:"topics-tab",children:[s.jsxs("h4",{children:[s.jsx($,{})," Trending Topics in This Channel"]}),s.jsxs("div",{className:"topics-list",children:[(t?.trending_topics||[]).map((e,n)=>s.jsxs("div",{className:"topic-item",children:[s.jsx("span",{className:"topic-rank",children:n+1}),s.jsxs("div",{className:"topic-info",children:[s.jsx("span",{className:"topic-name",children:e.topic}),s.jsxs("span",{className:"topic-mentions",children:[e.mentions," mentions"]})]}),F(e.trend)]},n)),(!t?.trending_topics||t.trending_topics.length===0)&&s.jsx("div",{className:"empty-state",children:"No trending topics yet"})]})]}),a==="actions"&&s.jsxs("div",{className:"actions-tab",children:[s.jsxs("h4",{children:[s.jsx(y,{})," Recommended Actions"]}),s.jsx("div",{className:"actions-list",children:(t?.smart_actions||[]).map(e=>s.jsxs("div",{className:`action-item ${e.type}`,children:[s.jsxs("div",{className:"action-icon",children:[e.icon==="poll"&&s.jsx(b,{}),e.icon==="share"&&s.jsx(E,{}),e.icon==="invite"&&s.jsx(L,{}),e.icon==="pin"&&s.jsx(_,{})]}),s.jsx("span",{className:"action-text",children:e.action}),s.jsx("span",{className:`action-type ${e.type}`,children:e.type})]},e.id))}),s.jsxs("div",{className:"ai-tip",children:[s.jsx(m,{}),s.jsx("span",{children:"These suggestions are based on conversation patterns and community engagement metrics."})]})]})]})]})})},"SmartSuggestionsPanel");export{D as default};
