import{r as n,w as f,l as k,aq as v,a1 as S,cq as h}from"./react-core-B6hadH-M.js";import{t as c}from"./index-D_6pZib5.js";const _=({fetchWithAuth:g,apiBaseUrl:x,onClose:u,serverId:y,roomSlug:b})=>{const[l,R]=n.useState(""),[s,E]=n.useState([]),[o,i]=n.useState(!1),[a,r]=n.useState({author:"",dateFrom:"",dateTo:"",hasImage:!1,hasVideo:!1,hasLink:!1,hasEmbed:!1}),d=async()=>{if(!l.trim()){c.error("Please enter a search query");return}i(!0);try{const t=new URLSearchParams({q:l,server_id:y||"",room_slug:b||"",author:a.author||"",date_from:a.dateFrom||"",date_to:a.dateTo||"",has_image:a.hasImage||"",has_video:a.hasVideo||"",has_link:a.hasLink||"",has_embed:a.hasEmbed||""}),m=await(await g(`${x}/search/advanced/?${t}`)).json();E(m.results||[]),c.success(`Found ${m.results?.length||0} results`)}catch{c.error("Search failed")}finally{i(!1)}};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(f,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Advanced Search")),React.createElement("button",{onClick:u,style:e.closeButton},React.createElement(k,null))),React.createElement("div",{style:e.searchBar},React.createElement("input",{type:"text",value:l,onChange:t=>R(t.target.value),onKeyDown:t=>t.key==="Enter"&&d(),placeholder:"Search messages...",style:e.searchInput}),React.createElement("button",{onClick:d,style:e.searchButton,disabled:o},React.createElement(f,null)," ",o?"Searching...":"Search")),React.createElement("div",{style:e.filtersSection},React.createElement("div",{style:e.filterHeader},React.createElement(v,{style:{marginRight:"8px"}}),"Filters"),React.createElement("div",{style:e.filtersGrid},React.createElement("div",{style:e.filterGroup},React.createElement("label",{style:e.filterLabel},React.createElement(S,{style:{marginRight:"6px"}}),"Author"),React.createElement("input",{type:"text",value:a.author,onChange:t=>r({...a,author:t.target.value}),placeholder:"Username",style:e.filterInput})),React.createElement("div",{style:e.filterGroup},React.createElement("label",{style:e.filterLabel},React.createElement(h,{style:{marginRight:"6px"}}),"Date From"),React.createElement("input",{type:"date",value:a.dateFrom,onChange:t=>r({...a,dateFrom:t.target.value}),style:e.filterInput})),React.createElement("div",{style:e.filterGroup},React.createElement("label",{style:e.filterLabel},React.createElement(h,{style:{marginRight:"6px"}}),"Date To"),React.createElement("input",{type:"date",value:a.dateTo,onChange:t=>r({...a,dateTo:t.target.value}),style:e.filterInput}))),React.createElement("div",{style:e.checkboxGrid},React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:a.hasImage,onChange:t=>r({...a,hasImage:t.target.checked})}),"Has Image"),React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:a.hasVideo,onChange:t=>r({...a,hasVideo:t.target.checked})}),"Has Video"),React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:a.hasLink,onChange:t=>r({...a,hasLink:t.target.checked})}),"Has Link"),React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:a.hasEmbed,onChange:t=>r({...a,hasEmbed:t.target.checked})}),"Has Embed"))),React.createElement("div",{style:e.content},o?React.createElement("div",{style:e.loading},"Searching..."):s.length===0?React.createElement("div",{style:e.empty},l?"No results found":"Enter a query and press search"):React.createElement("div",{style:e.resultsList},s.map((t,p)=>React.createElement("div",{key:p,style:e.resultCard},React.createElement("div",{style:e.resultHeader},React.createElement("span",{style:e.resultAuthor},t.author_username),React.createElement("span",{style:e.resultDate},new Date(t.created_at).toLocaleString())),React.createElement("div",{style:e.resultContent},t.content),t.room_name&&React.createElement("div",{style:e.resultMeta},"#",t.room_name),(t.has_image||t.has_video||t.has_link)&&React.createElement("div",{style:e.resultAttachments},t.has_image&&React.createElement("span",{style:e.badge},"ðŸ“· Image"),t.has_video&&React.createElement("span",{style:e.badge},"ðŸŽ¥ Video"),t.has_link&&React.createElement("span",{style:e.badge},"ðŸ”— Link"))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"1000px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},searchBar:{padding:"20px",borderBottom:"1px solid #2c2f33",display:"flex",gap:"12px"},searchInput:{flex:1,padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},searchButton:{padding:"12px 24px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},filtersSection:{padding:"20px",borderBottom:"1px solid #2c2f33",backgroundColor:"#2c2f33"},filterHeader:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"16px",display:"flex",alignItems:"center"},filtersGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"16px"},filterGroup:{display:"flex",flexDirection:"column",gap:"6px"},filterLabel:{fontSize:"13px",color:"#dcddde",display:"flex",alignItems:"center"},filterInput:{padding:"8px",backgroundColor:"#1e1e1e",border:"1px solid #1e1e1e",borderRadius:"4px",color:"#ffffff",fontSize:"13px"},checkboxGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},checkbox:{fontSize:"13px",color:"#dcddde",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},resultsList:{display:"flex",flexDirection:"column",gap:"12px"},resultCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},resultHeader:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},resultAuthor:{fontSize:"14px",fontWeight:"600",color:"#5865f2"},resultDate:{fontSize:"12px",color:"#99aab5"},resultContent:{fontSize:"14px",color:"#dcddde",marginBottom:"8px",lineHeight:"1.5"},resultMeta:{fontSize:"12px",color:"#99aab5",marginBottom:"8px"},resultAttachments:{display:"flex",gap:"8px"},badge:{fontSize:"11px",padding:"4px 8px",backgroundColor:"#5865f2",borderRadius:"4px",color:"#ffffff"}};export{_ as default};
