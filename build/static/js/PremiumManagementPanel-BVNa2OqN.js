import{r as l,n as e}from"./react-core-Cj7FUMmY.js";import{y as r}from"./ui-vendor-cfknPlRs.js";import{g as z,h as B}from"./index-J7Wast1m.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-By68PLJG.js";import"./router-vendor-QeioVw-9.js";import"./icons-vendor-Mc8int3h.js";import"./state-vendor-DGcbxrkI.js";import"./crypto-vendor-DK-7ILyQ.js";const R=({onClose:u})=>{const[h,g]=l.useState([]),[a,N]=l.useState(null),[y,f]=l.useState(!0),[b,v]=l.useState("classic"),[o,j]=l.useState("monthly"),d=z(),m=localStorage.getItem("access_token");l.useEffect(()=>{k(),p()},[]);const k=async()=>{try{const i=await(await fetch(`${d}/nitro/pricing/`,{headers:{Authorization:`Bearer ${m}`}})).json();g(i.tiers||[])}catch{r.error("âŒ FiyatlandÄ±rma bilgileri yÃ¼klenemedi")}},p=async()=>{try{const i=await(await fetch(`${d}/nitro/my-subscription/`,{headers:{Authorization:`Bearer ${m}`}})).json();N(i.subscription||null)}catch{}finally{f(!1)}},_=async()=>{try{const s=await fetch(`${d}/nitro/subscribe/`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({tier:b,billing_cycle:o,payment_method:"stripe"})}),i=await s.json();s.ok?(r.success("ğŸ‰ Abonelik baÅŸarÄ±yla baÅŸlatÄ±ldÄ±!"),p()):r.error(`âŒ ${i.error||"Abonelik baÅŸlatÄ±lamadÄ±"}`)}catch{r.error("âŒ Abonelik hatasÄ±")}},$=async()=>{if(await B("AboneliÄŸinizi iptal etmek istediÄŸinizden emin misiniz?"))try{const s=await fetch(`${d}/nitro/cancel/`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),i=await s.json();s.ok?(r.info("â„¹ï¸ Abonelik iptal edildi"),p()):r.error(`âŒ ${i.error||"Ä°ptal edilemedi"}`)}catch{r.error("âŒ Ä°ptal hatasÄ±")}},C=async s=>{try{const i=await fetch(`${d}/nitro/upgrade/`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({new_tier:s})}),c=await i.json();i.ok?(r.success("â¬†ï¸ Abonelik yÃ¼kseltildi!"),p()):r.error(`âŒ ${c.error||"YÃ¼kseltilemedi"}`)}catch{r.error("âŒ YÃ¼kseltme hatasÄ±")}},t=s=>{const i={basic:"#3b82f6",classic:"#8b5cf6",elite:"#f59e0b"};return i[s]||i.classic},x=s=>{const i={basic:"ğŸŒŸ",classic:"ğŸ’",elite:"ğŸ‘‘"};return i[s]||i.classic},S=s=>({upload_limit_mb:"ğŸ“¤",video_quality:"ğŸ¥",emoji_slots:"ğŸ˜€",custom_tag:"ğŸ·ï¸",animated_avatar:"ğŸ­",server_boosts:"ğŸš€",custom_profiles:"âœ¨",hd_video:"ğŸ“º",screen_share_quality:"ğŸ–¥ï¸",profile_banner:"ğŸ¨",custom_discriminator:"#ï¸âƒ£",badge:"ğŸ†",early_access:"ğŸ”“",priority_support:"ğŸ’¬"})[s]||"âœ“",w=(s,i)=>typeof i=="boolean"?i?"Evet":"HayÄ±r":s==="upload_limit_mb"?`${i} MB`:(s.includes("quality"),i);return y?e.jsx("div",{className:"premium-overlay",children:e.jsx("div",{className:"premium-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]})})}):e.jsx("div",{className:"premium-overlay",onClick:u,children:e.jsxs("div",{className:"premium-panel",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"premium-header",children:[e.jsx("h2",{children:"ğŸ’ Pawscord Premium"}),e.jsx("button",{className:"close-btn",onClick:u,children:"âœ•"})]}),a?e.jsxs("div",{className:"current-subscription",children:[e.jsxs("div",{className:"subscription-header",children:[e.jsx("span",{className:"subscription-icon",children:x(a.tier)}),e.jsxs("div",{className:"subscription-info",children:[e.jsx("h3",{children:a.tier_name||a.tier.toUpperCase()}),e.jsx("span",{className:"subscription-status",children:a.is_active?"âœ“ Aktif":"â¸ DurdurulmuÅŸ"})]}),e.jsx("div",{className:"subscription-actions",children:e.jsx("button",{className:"cancel-btn",onClick:$,children:"Ä°ptal Et"})})]}),e.jsxs("div",{className:"subscription-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"BaÅŸlangÄ±Ã§:"}),e.jsx("span",{className:"detail-value",children:new Date(a.start_date).toLocaleDateString("tr-TR")})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"BitiÅŸ:"}),e.jsx("span",{className:"detail-value",children:new Date(a.end_date).toLocaleDateString("tr-TR")})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Otomatik Yenileme:"}),e.jsx("span",{className:"detail-value",children:a.auto_renew?"AÃ§Ä±k":"KapalÄ±"})]})]})]}):e.jsxs("div",{className:"no-subscription",children:[e.jsx("div",{className:"no-subscription-icon",children:"ğŸ’"}),e.jsx("h3",{children:"Premium Ãœyelik Yok"}),e.jsx("p",{children:"Premium Ã¶zelliklerden yararlanmak iÃ§in aÅŸaÄŸÄ±daki planlardan birini seÃ§in"})]}),e.jsxs("div",{className:"billing-toggle",children:[e.jsx("button",{className:`billing-option ${o==="monthly"?"active":""}`,onClick:()=>j("monthly"),children:"AylÄ±k"}),e.jsxs("button",{className:`billing-option ${o==="yearly"?"active":""}`,onClick:()=>j("yearly"),children:["YÄ±llÄ±k ",e.jsx("span",{className:"save-badge",children:"%17 Ä°ndirim"})]})]}),e.jsx("div",{className:"pricing-tiers",children:Object.keys(h).map(s=>{const i=h[s],c=a?.tier===s,A=o==="yearly"?i.price_yearly:i.price_monthly;return e.jsxs("div",{className:`tier-card ${b===s?"selected":""} ${c?"current":""}`,style:{borderColor:t(s)},onClick:()=>!c&&v(s),children:[e.jsxs("div",{className:"tier-header",style:{background:`linear-gradient(135deg, ${t(s)}, ${t(s)}99)`},children:[e.jsx("span",{className:"tier-icon",children:x(s)}),e.jsx("h3",{children:i.name}),c&&e.jsx("span",{className:"current-badge",children:"Mevcut Plan"})]}),e.jsxs("div",{className:"tier-price",children:[e.jsxs("span",{className:"price-amount",children:["$",A]}),e.jsxs("span",{className:"price-period",children:["/",o==="yearly"?"yÄ±l":"ay"]})]}),e.jsx("div",{className:"tier-features",children:Object.entries(i.features).map(([n,P])=>e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:S(n)}),e.jsxs("span",{className:"feature-label",children:[n.replace(/_/g," ").replace(/\b\w/g,T=>T.toUpperCase()),":"]}),e.jsx("span",{className:"feature-value",children:w(n,P)})]},n))}),!c&&e.jsx("div",{className:"tier-actions",children:a?e.jsx("button",{className:"upgrade-btn",onClick:n=>{n.stopPropagation(),C(s)},style:{background:`linear-gradient(135deg, ${t(s)}, ${t(s)}dd)`},children:"YÃ¼kselt"}):e.jsx("button",{className:"subscribe-btn",onClick:n=>{n.stopPropagation(),_()},style:{background:`linear-gradient(135deg, ${t(s)}, ${t(s)}dd)`},children:"Abone Ol"})})]},s)})}),e.jsxs("div",{className:"info-banner",children:[e.jsx("span",{className:"info-icon",children:"â„¹ï¸"}),e.jsx("p",{children:"Premium abonelikler Stripe ile gÃ¼venli ÅŸekilde iÅŸlenir. Ä°stediÄŸiniz zaman iptal edebilirsiniz."})]})]})})};export{R as default};
