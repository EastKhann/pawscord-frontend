{"version":3,"file":"PremiumMarketplace-S1HoIffv.js","sources":["../../../src/components/PremiumMarketplace.js"],"sourcesContent":["// frontend/src/components/PremiumMarketplace.js\r\n// ðŸ’Ž Premium Marketplace - Strategic Pricing & Discounts\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport toast from '../utils/toast';\r\nimport axios from 'axios';\r\nimport './PremiumMarketplace.css';\r\n\r\nconst PremiumMarketplace = () => {\r\n    const [plans, setPlans] = useState([]);\r\n    const [selectedPlan, setSelectedPlan] = useState(null);\r\n    const [billingCycle, setBillingCycle] = useState('yearly'); // yearly saves money!\r\n    const [promotion, setPromotion] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchPlans();\r\n    }, []);\r\n\r\n    const fetchPlans = async () => {\r\n        try {\r\n            const response = await axios.get('/api/premium/plans/');\r\n            setPlans(response.data.plans);\r\n            setPromotion(response.data.promotion);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Failed to fetch plans:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handlePurchase = async (plan) => {\r\n        setSelectedPlan(plan);\r\n\r\n        try {\r\n            const response = await axios.post('/api/premium/purchase/', {\r\n                plan_id: plan.id,\r\n                billing_cycle: billingCycle\r\n            });\r\n\r\n            // Redirect to backend-generated checkout URL (Stripe Checkout Session)\r\n            if (response.data.checkout_url) {\r\n                window.location.href = response.data.checkout_url;\r\n                return;\r\n            }\r\n\r\n            toast.info(`ðŸ“‹ Purchasing ${plan.name} - ${billingCycle} plan`);\r\n        } catch (error) {\r\n            console.error('Purchase failed:', error);\r\n            toast.error('âŒ Purchase failed. Please try again.');\r\n        }\r\n    };\r\n\r\n    const calculateSavings = (plan) => {\r\n        const monthlyTotal = plan.monthly_price * 12;\r\n        const yearlyPrice = plan.yearly_price;\r\n        const savings = monthlyTotal - yearlyPrice;\r\n        const percentage = Math.round((savings / monthlyTotal) * 100);\r\n        return { amount: savings.toFixed(2), percentage };\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"loading\">Loading premium plans...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"premium-marketplace\">\r\n            {/* Promotion Banner */}\r\n            {promotion && (\r\n                <div className=\"promotion-banner\">\r\n                    <h2>{promotion.name}</h2>\r\n                    <p>ðŸ”¥ Save {promotion.discount_percent}% on all plans!</p>\r\n                    <p className=\"promotion-ends\">Ends: {new Date(promotion.ends_at).toLocaleDateString()}</p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Billing Toggle */}\r\n            <div className=\"billing-toggle\">\r\n                <button\r\n                    className={billingCycle === 'monthly' ? 'active' : ''}\r\n                    onClick={() => setBillingCycle('monthly')}\r\n                >\r\n                    Monthly\r\n                </button>\r\n                <button\r\n                    className={billingCycle === 'yearly' ? 'active' : ''}\r\n                    onClick={() => setBillingCycle('yearly')}\r\n                >\r\n                    Yearly <span className=\"save-badge\">Save 17%</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Plans Grid */}\r\n            <div className=\"plans-grid\">\r\n                {plans.map((plan, index) => {\r\n                    const savings = calculateSavings(plan);\r\n                    const price = billingCycle === 'yearly' ? plan.yearly_price : plan.monthly_price;\r\n                    const originalPrice = plan.original_yearly_price || plan.original_monthly_price;\r\n\r\n                    return (\r\n                        <PremiumPlanCard\r\n                            key={plan.id}\r\n                            plan={plan}\r\n                            price={price}\r\n                            originalPrice={originalPrice}\r\n                            billingCycle={billingCycle}\r\n                            savings={savings}\r\n                            promotion={promotion}\r\n                            onPurchase={() => handlePurchase(plan)}\r\n                            featured={index === 1} // Premium is featured\r\n                        />\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* FAQ */}\r\n            <div className=\"premium-faq\">\r\n                <h3>Frequently Asked Questions</h3>\r\n                <div className=\"faq-item\">\r\n                    <h4>Can I cancel anytime?</h4>\r\n                    <p>Yes! Cancel anytime and keep your benefits until the end of the billing period.</p>\r\n                </div>\r\n                <div className=\"faq-item\">\r\n                    <h4>What payment methods do you accept?</h4>\r\n                    <p>We accept all major credit cards, PayPal, and cryptocurrencies.</p>\r\n                </div>\r\n                <div className=\"faq-item\">\r\n                    <h4>Is there a free trial?</h4>\r\n                    <p>Yes! 7-day free trial on all plans. No credit card required.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PremiumPlanCard = ({ plan, price, originalPrice, billingCycle, savings, promotion, onPurchase, featured }) => {\r\n    return (\r\n        <div className={`premium-plan-card ${featured ? 'featured' : ''}`}>\r\n            {featured && <div className=\"featured-badge\">ðŸŒŸ Most Popular</div>}\r\n\r\n            <div className=\"plan-header\">\r\n                <h3>{plan.name}</h3>\r\n\r\n                <div className=\"plan-price\">\r\n                    {originalPrice && promotion && (\r\n                        <span className=\"original-price\">${originalPrice}</span>\r\n                    )}\r\n                    <span className=\"current-price\">\r\n                        ${price}\r\n                        <span className=\"billing-period\">/{billingCycle === 'yearly' ? 'year' : 'month'}</span>\r\n                    </span>\r\n\r\n                    {billingCycle === 'yearly' && (\r\n                        <div className=\"savings-badge\">\r\n                            ðŸ’° Save ${savings.amount}/year ({savings.percentage}% off)\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <ul className=\"plan-features\">\r\n                {plan.features.map((feature, i) => (\r\n                    <li key={i}>\r\n                        <span className=\"check\">âœ“</span> {feature}\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n\r\n            <button className=\"purchase-btn\" onClick={onPurchase}>\r\n                {featured ? 'ðŸš€ Upgrade Now' : 'Get Started'}\r\n            </button>\r\n\r\n            {billingCycle === 'yearly' && (\r\n                <p className=\"monthly-equivalent\">\r\n                    Just ${(price / 12).toFixed(2)}/month\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PremiumMarketplace;\r\n\r\n\r\n"],"names":["useState","useEffect","jsx","jsxs"],"mappings":"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"}