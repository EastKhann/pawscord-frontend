import{r as s,b as e}from"./react-core-9vc7GIjk.js";import{bm as c,a as v,x as h,a3 as k,m as E}from"./icons-vendor-BHKL7tCa.js";import{t as a}from"./index-BmHz9cUO.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-qCr-Mpaw.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const I=({fetchWithAuth:n,apiBaseUrl:l,serverId:x,onClose:d})=>{const[m,y]=s.useState([]),[f,p]=s.useState(!0);s.useEffect(()=>{i()},[]);const i=async()=>{try{p(!0);const t=await n(`${l}/api/rooms/archived/list/?server_id=${x}`);if(t.ok){const r=await t.json();y(r)}}catch(t){console.error("Arşiv yükleme hatası:",t)}finally{p(!1)}},g=async t=>{try{(await n(`${l}/api/rooms/${t}/unarchive/`,{method:"POST"})).ok?(a.success("Kanal geri yüklendi"),i()):a.error("Kanal geri yüklenemedi")}catch(r){console.error("Unarchive hatası:",r),a.error("Bir hata oluştu")}},u=async t=>{if(window.confirm("Bu kanalı kalıcı olarak silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!"))try{(await n(`${l}/api/rooms/${t}/delete/`,{method:"DELETE"})).ok?(a.success("Kanal kalıcı olarak silindi"),i()):a.error("Kanal silinemedi")}catch(r){console.error("Delete hatası:",r),a.error("Bir hata oluştu")}};return e.createElement("div",{style:o.overlay,onClick:d},e.createElement("div",{style:o.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:o.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(c,{style:{color:"#888"}}),e.createElement("h2",{style:{margin:0}},"Arşivlenmiş Kanallar")),e.createElement(v,{onClick:d,style:o.closeBtn})),e.createElement("div",{style:o.content},f?e.createElement("div",{style:o.loading},"Yükleniyor..."):m.length===0?e.createElement("div",{style:o.empty},e.createElement(c,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),e.createElement("p",null,"Arşivlenmiş kanal yok"),e.createElement("p",{style:{fontSize:"12px",color:"#888"}},"Arşivlenen kanallar burada görünür")):m.map(t=>e.createElement("div",{key:t.id,style:o.roomCard},e.createElement("div",{style:o.roomIcon},e.createElement(c,{style:{color:"#888"}})),e.createElement("div",{style:o.roomContent},e.createElement("div",{style:o.roomName},"#",t.name),e.createElement("div",{style:o.roomMeta},e.createElement(h,{style:{fontSize:"12px"}}),e.createElement("span",null,"Arşivlendi: ",new Date(t.archived_at).toLocaleDateString("tr-TR"))),t.archived_reason&&e.createElement("div",{style:o.roomReason},"Sebep: ",t.archived_reason)),e.createElement("div",{style:o.roomActions},e.createElement("button",{onClick:()=>g(t.slug),style:o.unarchiveBtn,title:"Geri yükle"},e.createElement(k,null)," Geri Yükle"),e.createElement("button",{onClick:()=>u(t.slug),style:o.deleteBtn,title:"Kalıcı olarak sil"},e.createElement(E,null))))))))},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},roomCard:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},roomIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#1e1e1e",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},roomContent:{flex:1},roomName:{fontWeight:"600",fontSize:"16px",marginBottom:"6px",color:"#dcddde"},roomMeta:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#888",marginBottom:"4px"},roomReason:{fontSize:"13px",color:"#888",fontStyle:"italic"},roomActions:{display:"flex",flexDirection:"column",gap:"8px"},unarchiveBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},deleteBtn:{backgroundColor:"#f04747",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{I as default};
