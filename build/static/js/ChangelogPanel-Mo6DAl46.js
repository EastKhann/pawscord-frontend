import{r as n,n as e}from"./react-core-Cj7FUMmY.js";import{ch as m,bv as C,ci as S,Y as _,U as F}from"./icons-vendor-Mc8int3h.js";import"./editor-vendor-D9c4a6XZ.js";function k({apiBaseUrl:t,fetchWithAuth:o}){const[d,g]=n.useState([]),[c,p]=n.useState("all"),[i,x]=n.useState("all"),[j,v]=n.useState([]),[u,r]=n.useState(!1),N={new:e.jsx(F,{className:"type-icon new"}),fix:e.jsx(_,{className:"type-icon fix"}),improvement:e.jsx(S,{className:"type-icon improvement"})};n.useEffect(()=>{f(),y()},[c]);const f=async()=>{r(!0);try{const s=c==="all"?`${t}/changelog/`:`${t}/changelog/${c}/`,l=await o(s);if(l.ok){const a=await l.json();g(a.changes||[])}}catch{}finally{r(!1)}},y=async()=>{try{const s=await o(`${t}/changelog/models/`);if(s.ok){const l=await s.json();v(l.models||[])}}catch{}},h=(i==="all"?d:d.filter(s=>s.change_type===i)).reduce((s,l)=>{const a=new Date(l.created_at).toLocaleDateString();return s[a]||(s[a]=[]),s[a].push(l),s},{});return e.jsxs("div",{className:"changelog-panel",children:[e.jsx("div",{className:"changelog-header",children:e.jsxs("h2",{children:[e.jsx(m,{})," Changelog"]})}),e.jsxs("div",{className:"changelog-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Model:"}),e.jsxs("select",{value:c,onChange:s=>p(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Models"}),j.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Type:"}),e.jsxs("select",{value:i,onChange:s=>x(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"new",children:"New Features"}),e.jsx("option",{value:"fix",children:"Bug Fixes"}),e.jsx("option",{value:"improvement",children:"Improvements"})]})]})]}),e.jsx("div",{className:"changelog-timeline",children:u?e.jsx("div",{className:"loading",children:"Loading changelog..."}):Object.keys(h).length===0?e.jsxs("div",{className:"empty-changelog",children:[e.jsx(m,{className:"empty-icon"}),e.jsx("p",{children:"No changelog entries found"})]}):Object.entries(h).map(([s,l])=>e.jsxs("div",{className:"date-group",children:[e.jsxs("div",{className:"date-header",children:[e.jsx(C,{}),e.jsx("h3",{children:s})]}),e.jsx("div",{className:"changes-list",children:l.map((a,w)=>e.jsxs("div",{className:`change-item ${a.change_type}`,children:[e.jsx("div",{className:"change-icon",children:N[a.change_type]}),e.jsxs("div",{className:"change-content",children:[e.jsxs("div",{className:"change-header",children:[e.jsx("span",{className:`change-badge ${a.change_type}`,children:a.change_type.toUpperCase()}),a.model_name&&e.jsx("span",{className:"change-model",children:a.model_name}),a.version&&e.jsxs("span",{className:"change-version",children:["v",a.version]})]}),e.jsx("div",{className:"change-description",children:a.description}),a.details&&e.jsx("div",{className:"change-details",children:a.details})]})]},w))})]},s))})]})}export{k as default};
