var O=Object.defineProperty;var n=(d,c)=>O(d,"name",{value:c,configurable:!0});import{r as t,j as e}from"./react-core-Djgtqrmb.js";import{br as L,a as $,t as E,an as H,bs as Q,bt as W,f as Y}from"./icons-vendor-BW7dxHkX.js";import{t as i}from"./index-BRQzOq3v.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888",transition:"color 0.2s"},toolbar:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #333"},searchBox:{flex:1,display:"flex",alignItems:"center",gap:"10px",backgroundColor:"#2c2f33",padding:"10px 15px",borderRadius:"8px"},searchInput:{flex:1,background:"none",border:"none",color:"#fff",outline:"none",fontSize:"14px"},newTagBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},tagsContainer:{display:"flex",gap:"10px",padding:"15px 20px",overflowX:"auto",borderBottom:"1px solid #333"},tagChip:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"16px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#fff",whiteSpace:"nowrap",transition:"all 0.2s"},bookmarksList:{flex:1,overflowY:"auto",padding:"20px"},bookmarkItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px",transition:"background-color 0.2s"},bookmarkContent:{flex:1},bookmarkMeta:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},bookmarkText:{color:"#dcddde",marginBottom:"10px",cursor:"pointer",lineHeight:"1.5"},bookmarkTags:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},miniTag:{padding:"4px 10px",borderRadius:"12px",fontSize:"12px",color:"#fff",fontWeight:"500"},tagSelect:{backgroundColor:"#1e1e1e",color:"#fff",border:"1px solid #444",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",cursor:"pointer"},deleteBtn:{backgroundColor:"transparent",border:"none",color:"#ed4245",cursor:"pointer",fontSize:"18px",padding:"10px",borderRadius:"4px",transition:"background-color 0.2s"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999999},newTagModal:{backgroundColor:"#2c2f33",padding:"30px",borderRadius:"8px",width:"90%",maxWidth:"400px",color:"#fff"},input:{width:"100%",padding:"12px",backgroundColor:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginTop:"15px",outline:"none"},colorPicker:{width:"60px",height:"40px",border:"none",borderRadius:"4px",cursor:"pointer"},primaryBtn:{flex:1,backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},secondaryBtn:{flex:1,backgroundColor:"#4e5058",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"}},_=n((d,c)=>{const[u,z]=t.useState([]),[R,b]=t.useState([]),[p,m]=t.useState(null),[f,T]=t.useState(""),[I,C]=t.useState(!0),[x,j]=t.useState(!1),[g,w]=t.useState(""),[k,S]=t.useState("#5865f2");t.useEffect(()=>{h(),v()},[]);const h=n(async()=>{try{C(!0);const r=await d(`${c}/bookmarks/list/`);if(r.ok){const s=await r.json();z(s)}}catch{i.error("Bookmark'lar yüklenemedi")}finally{C(!1)}},"loadBookmarks"),v=n(async()=>{try{const r=await d(`${c}/bookmarks/tags/list/`);if(r.ok){const s=await r.json();b(s)}}catch{}},"loadTags"),B=n(async()=>{if(!g.trim()){i.error("Tag adı boş olamaz");return}try{(await d(`${c}/bookmarks/tags/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g,color:k})})).ok?(i.success("Tag oluşturuldu"),w(""),S("#5865f2"),j(!1),v()):i.error("Tag oluşturulamadı")}catch{i.error("Bir hata oluştu")}},"createTag"),N=n(async r=>{try{(await d(`${c}/bookmarks/${r}/delete/`,{method:"DELETE"})).ok?(i.success("Bookmark silindi"),h()):i.error("Bookmark silinemedi")}catch{i.error("Bir hata oluştu")}},"deleteBookmark"),M=n(async(r,s)=>{try{(await d(`${c}/bookmarks/tags/${s}/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookmark_id:r})})).ok?(i.success("Tag eklendi"),h()):i.error("Tag eklenemedi")}catch{i.error("Bir hata oluştu")}},"addTagToBookmark"),F=u.filter(r=>{const s=!p||r.tags?.some(P=>P.id===p),y=!f||r.message?.content?.toLowerCase().includes(f.toLowerCase());return s&&y});return{bookmarks:u,tags:R,selectedTag:p,setSelectedTag:m,searchQuery:f,setSearchQuery:T,loading:I,showNewTagModal:x,setShowNewTagModal:j,newTagName:g,setNewTagName:w,newTagColor:k,setNewTagColor:S,createTag:B,deleteBookmark:N,addTagToBookmark:M,filteredBookmarks:F}},"useBookmarks"),D=n(({fetchWithAuth:d,apiBaseUrl:c,onClose:u,onMessageClick:z})=>{const{bookmarks:R,tags:b,selectedTag:p,setSelectedTag:m,searchQuery:f,setSearchQuery:T,loading:I,showNewTagModal:C,setShowNewTagModal:x,newTagName:j,setNewTagName:g,newTagColor:w,setNewTagColor:k,createTag:S,deleteBookmark:h,addTagToBookmark:v,filteredBookmarks:B}=_(d,c),N=t.useCallback(a=>a.stopPropagation(),[]),M=t.useCallback(a=>T(a.target.value),[T]),F=t.useCallback(()=>x(!0),[x]),r=t.useCallback(()=>m(null),[m]),s=t.useCallback(()=>x(!1),[x]),y=t.useCallback(a=>g(a.target.value),[g]),P=t.useCallback(a=>k(a.target.value),[k]);return e.jsx("div",{style:o.overlay,onClick:u,children:e.jsxs("div",{style:o.modal,onClick:N,children:[e.jsxs("div",{style:o.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(L,{style:{color:"#faa61a"}}),e.jsx("h2",{style:{margin:0},children:"Kaydedilenler"})]}),e.jsx($,{onClick:u,style:o.closeBtn})]}),e.jsxs("div",{style:o.toolbar,children:[e.jsxs("div",{style:o.searchBox,children:[e.jsx(E,{style:{color:"#888"}}),e.jsx("input",{type:"text",placeholder:"Mesajlarda ara...",value:f,onChange:M,style:o.searchInput})]}),e.jsxs("button",{onClick:F,style:o.newTagBtn,children:[e.jsx(H,{})," Yeni Tag"]})]}),e.jsxs("div",{style:o.tagsContainer,children:[e.jsxs("button",{onClick:r,style:{...o.tagChip,backgroundColor:p?"#2c2f33":"#5865f2"},children:[e.jsx(Q,{})," Tümü (",R.length,")"]}),b.map(a=>e.jsxs("button",{onClick:n(()=>m(a.id),"onClick"),style:{...o.tagChip,backgroundColor:p===a.id?a.color:"#2c2f33",borderLeft:`3px solid ${a.color}`},children:[e.jsx(W,{})," ",a.name," (",a.bookmark_count||0,")"]},a.id))]}),e.jsx("div",{style:o.bookmarksList,children:I?e.jsx("div",{style:o.loading,children:"Yükleniyor..."}):B.length===0?e.jsxs("div",{style:o.empty,children:[e.jsx(L,{style:{fontSize:"48px",color:"#555"}}),e.jsx("p",{children:"Henüz bookmark yok"})]}):B.map(a=>e.jsxs("div",{style:o.bookmarkItem,children:[e.jsxs("div",{style:o.bookmarkContent,children:[e.jsxs("div",{style:o.bookmarkMeta,children:[e.jsx("strong",{children:a.message?.username}),e.jsx("span",{style:{color:"#888",fontSize:"12px"},children:new Date(a.created_at).toLocaleString("tr-TR")})]}),e.jsx("div",{style:o.bookmarkText,onClick:n(()=>z?.(a.message),"onClick"),children:a.message?.content||"Mesaj içeriği yok"}),e.jsxs("div",{style:o.bookmarkTags,children:[a.tags?.map(l=>e.jsx("span",{style:{...o.miniTag,backgroundColor:l.color},children:l.name},l.id)),e.jsxs("select",{onChange:n(l=>{l.target.value&&(v(a.id,l.target.value),l.target.value="")},"onChange"),style:o.tagSelect,children:[e.jsx("option",{value:"",children:"+ Tag Ekle"}),b.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]})]}),e.jsx("button",{onClick:n(()=>h(a.id),"onClick"),style:o.deleteBtn,children:e.jsx(Y,{})})]},a.id))}),C&&e.jsx("div",{style:o.modalOverlay,onClick:s,children:e.jsxs("div",{style:o.newTagModal,onClick:N,children:[e.jsx("h3",{children:"Yeni Tag Oluştur"}),e.jsx("input",{type:"text",placeholder:"Tag adı...",value:j,onChange:y,style:o.input,autoFocus:!0}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("label",{children:"Renk:"}),e.jsx("input",{type:"color",value:w,onChange:P,style:o.colorPicker})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[e.jsx("button",{onClick:S,style:o.primaryBtn,children:"Oluştur"}),e.jsx("button",{onClick:s,style:o.secondaryBtn,children:"İptal"})]})]})})]})})},"BookmarkPanel"),ee=t.memo(D);export{ee as default};
