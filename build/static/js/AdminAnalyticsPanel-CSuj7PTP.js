import{r as x,b as e,o as b,A as L,C as p,X as u,Y as f,T as y,y as A,L as K,q as R,B as P,s as M}from"./react-core-9vc7GIjk.js";import{N as z,af as W,a as j,p as E,ak as I,y as k,ay as w,ar as T,_ as h,aW as V,ao as $,t as U,b0 as Y,aG as Z,b1 as N,b2 as q}from"./icons-vendor-NoxEirJf.js";import"./editor-vendor-DiU449Dh.js";const ae=({onClose:l,fetchWithAuth:a,apiBaseUrl:r})=>{const[n,m]=x.useState(null),[B,D]=x.useState(!0),[c,v]=x.useState("overview");x.useEffect(()=>{G();const i=setInterval(G,3e4);return()=>clearInterval(i)},[]);const G=async()=>{try{const i=await a(`${r}/admin/analytics/`);if(i.ok){const _=await i.json();m(_)}}catch(i){console.error("Analytics fetch error:",i)}finally{D(!1)}},F=()=>{if(!n)return;const i=JSON.stringify(n,null,2),_=new Blob([i],{type:"application/json"}),O=URL.createObjectURL(_),S=document.createElement("a");S.href=O,S.download=`analytics_${new Date().toISOString().split("T")[0]}.json`,S.click()};return B?e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.loading},"YÃ¼kleniyor..."))):n?e.createElement("div",{style:t.overlay,onClick:l},e.createElement("div",{style:t.modal,onClick:i=>i.stopPropagation()},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(z,{size:24}),e.createElement("h2",{style:t.title},"Admin Analytics")),e.createElement("div",{style:t.headerRight},e.createElement("button",{onClick:F,style:t.exportButton,title:"Export JSON"},e.createElement(W,null)),e.createElement("button",{onClick:l,style:t.closeButton},e.createElement(j,null)))),e.createElement("div",{style:t.tabs},e.createElement("button",{onClick:()=>v("overview"),style:{...t.tab,...c==="overview"&&t.activeTab}},e.createElement(z,null)," Genel"),e.createElement("button",{onClick:()=>v("users"),style:{...t.tab,...c==="users"&&t.activeTab}},e.createElement(E,null)," KullanÄ±cÄ±lar"),e.createElement("button",{onClick:()=>v("premium"),style:{...t.tab,...c==="premium"&&t.activeTab}},e.createElement(I,null)," Premium"),e.createElement("button",{onClick:()=>v("servers"),style:{...t.tab,...c==="servers"&&t.activeTab}},e.createElement(k,null)," Sunucular")),e.createElement("div",{style:t.content},c==="overview"&&e.createElement(J,{stats:n}),c==="users"&&e.createElement(X,{stats:n}),c==="premium"&&e.createElement(H,{stats:n}),c==="servers"&&e.createElement(Q,{stats:n})))):e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.error},"Analytics verisi yÃ¼klenemedi")))},J=({stats:l})=>(l.mobile_views,l.desktop_views,e.createElement("div",{style:t.tabContent},e.createElement("div",{style:t.growthSection},e.createElement(g,{label:"Mesaj ArtÄ±ÅŸÄ± (24h)",value:l.message_growth_24h||0,isPositive:(l.message_growth_24h||0)>=0}),e.createElement(g,{label:"KayÄ±t ArtÄ±ÅŸÄ± (24h)",value:l.signup_growth_24h||0,isPositive:(l.signup_growth_24h||0)>=0}),e.createElement(g,{label:"GÃ¼nlÃ¼k Ort. Mesaj",value:l.avg_messages_per_day||0,isPositive:!0,suffix:"",icon:e.createElement(w,null)}),e.createElement(g,{label:"GÃ¼nlÃ¼k Ort. KayÄ±t",value:l.avg_signups_per_day||0,isPositive:!0,suffix:"",icon:e.createElement(T,null)})),e.createElement("div",{style:t.statsGrid},e.createElement(o,{icon:e.createElement(E,null),label:"Toplam KullanÄ±cÄ±",value:l.total_users||0,color:"#5865f2",subtitle:`Online: ${l.online_users||0} | Aktif: ${l.active_users||0}`}),e.createElement(o,{icon:e.createElement(k,null),label:"Toplam Sunucu",value:l.total_servers||0,color:"#23a559",subtitle:`Son 24h: +${l.new_servers_24h||0}`}),e.createElement(o,{icon:e.createElement(w,null),label:"Toplam Mesaj",value:s(l.total_messages||0),color:"#f0b132",subtitle:`Son 24h: ${s(l.messages_24h||0)}`}),e.createElement(o,{icon:e.createElement(h,null),label:"Toplam Ziyaret",value:s(l.total_page_views||0),color:"#e91e63",subtitle:`Son 24h: ${s(l.page_views_24h||0)}`}),e.createElement(o,{icon:e.createElement(I,null),label:"Premium KullanÄ±cÄ±",value:l.premium_users||0,color:"#9b59b6",subtitle:`Gelir: ${l.monthly_revenue||0} TL/ay`}),e.createElement(o,{icon:e.createElement(V,null),label:"Benzersiz ZiyaretÃ§i",value:s(l.unique_visitors_30d||0),color:"#00bcd4",subtitle:`Son 24h: ${s(l.unique_visitors_24h||0)}`})),(l.mobile_views>0||l.desktop_views>0)&&e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"ðŸ“± Cihaz DaÄŸÄ±lÄ±mÄ± (Son 7 GÃ¼n)"),e.createElement("div",{style:t.deviceStats},e.createElement("div",{style:t.deviceCard},e.createElement($,{size:32,color:"#5865f2"}),e.createElement("div",{style:t.deviceInfo},e.createElement("span",{style:t.deviceLabel},"Mobil"),e.createElement("span",{style:t.deviceValue},s(l.mobile_views||0)),e.createElement("span",{style:t.devicePercent},Math.round((l.mobile_views||0)/((l.mobile_views||0)+(l.desktop_views||1))*100),"%"))),e.createElement("div",{style:t.deviceCard},e.createElement(U,{size:32,color:"#23a559"}),e.createElement("div",{style:t.deviceInfo},e.createElement("span",{style:t.deviceLabel},"MasaÃ¼stÃ¼"),e.createElement("span",{style:t.deviceValue},s(l.desktop_views||0)),e.createElement("span",{style:t.devicePercent},Math.round((l.desktop_views||0)/((l.mobile_views||0)+(l.desktop_views||1))*100),"%"))))),l.daily_stats&&l.daily_stats.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"ðŸ“¨ GÃ¼nlÃ¼k Mesaj SayÄ±sÄ± (Son 30 GÃ¼n)"),e.createElement(b,{width:"100%",height:250},e.createElement(L,{data:l.daily_stats},e.createElement("defs",null,e.createElement("linearGradient",{id:"colorMessages",x1:"0",y1:"0",x2:"0",y2:"1"},e.createElement("stop",{offset:"5%",stopColor:"#5865f2",stopOpacity:.8}),e.createElement("stop",{offset:"95%",stopColor:"#5865f2",stopOpacity:0}))),e.createElement(p,{strokeDasharray:"3 3",stroke:"#1e1f22"}),e.createElement(u,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),e.createElement(f,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),e.createElement(y,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #5865f2",borderRadius:"6px",color:"#fff"}}),e.createElement(A,{type:"monotone",dataKey:"messages",stroke:"#5865f2",strokeWidth:2,fillOpacity:1,fill:"url(#colorMessages)"})))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"ðŸ‘¥ GÃ¼nlÃ¼k Aktif KullanÄ±cÄ± (Son 30 GÃ¼n)"),e.createElement(b,{width:"100%",height:250},e.createElement(K,{data:l.daily_stats},e.createElement(p,{strokeDasharray:"3 3",stroke:"#1e1f22"}),e.createElement(u,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),e.createElement(f,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),e.createElement(y,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #23a559",borderRadius:"6px",color:"#fff"}}),e.createElement(R,{type:"monotone",dataKey:"active_users",stroke:"#23a559",strokeWidth:3,dot:{fill:"#23a559",r:4},activeDot:{r:6}})))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"ðŸ†• GÃ¼nlÃ¼k Yeni KayÄ±tlar (Son 30 GÃ¼n)"),e.createElement(b,{width:"100%",height:250},e.createElement(P,{data:l.daily_stats},e.createElement(p,{strokeDasharray:"3 3",stroke:"#1e1f22"}),e.createElement(u,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),e.createElement(f,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),e.createElement(y,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #f0b132",borderRadius:"6px",color:"#fff"}}),e.createElement(M,{dataKey:"signups",fill:"#f0b132",radius:[8,8,0,0]})))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"ðŸ‘ï¸ GÃ¼nlÃ¼k Ziyaret SayÄ±sÄ± (Son 30 GÃ¼n)"),e.createElement(b,{width:"100%",height:250},e.createElement(L,{data:l.daily_stats},e.createElement("defs",null,e.createElement("linearGradient",{id:"colorPageViews",x1:"0",y1:"0",x2:"0",y2:"1"},e.createElement("stop",{offset:"5%",stopColor:"#e91e63",stopOpacity:.8}),e.createElement("stop",{offset:"95%",stopColor:"#e91e63",stopOpacity:0}))),e.createElement(p,{strokeDasharray:"3 3",stroke:"#1e1f22"}),e.createElement(u,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),e.createElement(f,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),e.createElement(y,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #e91e63",borderRadius:"6px",color:"#fff"}}),e.createElement(A,{type:"monotone",dataKey:"page_views",stroke:"#e91e63",strokeWidth:2,fillOpacity:1,fill:"url(#colorPageViews)"})))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"ðŸ‘¥ GÃ¼nlÃ¼k Benzersiz ZiyaretÃ§i (Son 30 GÃ¼n)"),e.createElement(b,{width:"100%",height:250},e.createElement(K,{data:l.daily_stats},e.createElement(p,{strokeDasharray:"3 3",stroke:"#1e1f22"}),e.createElement(u,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),e.createElement(f,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),e.createElement(y,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #00bcd4",borderRadius:"6px",color:"#fff"}}),e.createElement(R,{type:"monotone",dataKey:"unique_visitors",stroke:"#00bcd4",strokeWidth:3,dot:{fill:"#00bcd4",r:4},activeDot:{r:6}}))))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"Son Aktiviteler (24 Saat)"),e.createElement("div",{style:t.activityList},e.createElement(d,{icon:e.createElement(T,null),label:"Yeni KayÄ±tlar",value:l.new_signups_24h||0}),e.createElement(d,{icon:e.createElement(k,null),label:"Yeni Sunucular",value:l.new_servers_24h||0}),e.createElement(d,{icon:e.createElement(w,null),label:"Mesajlar",value:l.messages_24h||0}),e.createElement(d,{icon:e.createElement(h,null),label:"Aktif KullanÄ±cÄ±",value:l.active_users_24h||0}),e.createElement(d,{icon:e.createElement(h,null),label:"Sayfa Ziyareti",value:l.page_views_24h||0,color:"#e91e63"}),e.createElement(d,{icon:e.createElement(E,null),label:"Benzersiz ZiyaretÃ§i",value:l.unique_visitors_24h||0,color:"#00bcd4"}))),l.top_pages&&l.top_pages.length>0&&e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"ðŸ“Š En Ã‡ok Ziyaret Edilen Sayfalar (Son 30 GÃ¼n)"),e.createElement("div",{style:t.list},l.top_pages.slice(0,10).map((a,r)=>e.createElement("div",{key:r,style:t.listItem},e.createElement("span",null,"#",r+1," ",a?.path||"Unknown"),e.createElement("span",{style:{color:"#e91e63",fontWeight:"bold"}},(a?.views||0).toLocaleString()," ziyaret"))))))),s=l=>l==null?"0":l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l.toLocaleString(),g=({label:l,value:a,isPositive:r,suffix:n="%",icon:m})=>e.createElement("div",{style:{...t.growthCard,borderLeft:`4px solid ${r?"#23a559":"#ed4245"}`}},e.createElement("div",{style:t.growthLabel},l),e.createElement("div",{style:{...t.growthValue,color:r?"#23a559":"#ed4245"}},m||(r?e.createElement(N,null):e.createElement(q,null)),e.createElement("span",null,typeof a=="number"?a.toFixed(1):a,n))),X=({stats:l})=>e.createElement("div",{style:t.tabContent},e.createElement("div",{style:t.statsGrid},e.createElement(o,{icon:e.createElement(E,null),label:"Toplam KullanÄ±cÄ±",value:l.total_users||0,color:"#5865f2"}),e.createElement(o,{icon:e.createElement(T,null),label:"Online",value:l.online_users||0,color:"#23a559"}),e.createElement(o,{icon:e.createElement(Y,null),label:"Offline",value:l.total_users-l.online_users||0,color:"#747f8d"})),l.top_users&&l.top_users.length>0&&e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"En Aktif KullanÄ±cÄ±lar"),e.createElement("div",{style:t.list},l.top_users.map((a,r)=>e.createElement("div",{key:r,style:t.listItem},e.createElement("span",null,"#",r+1," ",a.username),e.createElement("span",null,a.message_count," mesaj")))))),H=({stats:l})=>e.createElement("div",{style:t.tabContent},e.createElement("div",{style:t.statsGrid},e.createElement(o,{icon:e.createElement(I,null),label:"Premium KullanÄ±cÄ±",value:l.premium_users||0,color:"#9b59b6"}),e.createElement(o,{icon:e.createElement(Z,null),label:"AylÄ±k Gelir",value:`${l.monthly_revenue||0} TL`,color:"#f0b132"}),e.createElement(o,{icon:e.createElement(z,null),label:"YÄ±llÄ±k Tahmin",value:`${(l.monthly_revenue||0)*12} TL`,color:"#23a559"})),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"Premium DaÄŸÄ±lÄ±mÄ±"),e.createElement("div",{style:t.pieChart},e.createElement(C,{label:"Ãœcretsiz",value:l.free_users||0,color:"#747f8d"}),e.createElement(C,{label:"Nitro Basic",value:l.basic_users||0,color:"#5865f2"}),e.createElement(C,{label:"Nitro Premium",value:l.premium_tier_users||0,color:"#9b59b6"})))),Q=({stats:l})=>e.createElement("div",{style:t.tabContent},e.createElement("div",{style:t.statsGrid},e.createElement(o,{icon:e.createElement(k,null),label:"Toplam Sunucu",value:l.total_servers||0,color:"#5865f2"}),e.createElement(o,{icon:e.createElement(h,null),label:"Genel Sunucu",value:l.public_servers||0,color:"#23a559"}),e.createElement(o,{icon:e.createElement(E,null),label:"Ortalama Ãœye",value:l.avg_server_members||0,color:"#f0b132"})),l.top_servers&&l.top_servers.length>0&&e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"En BÃ¼yÃ¼k Sunucular"),e.createElement("div",{style:t.list},l.top_servers.map((a,r)=>e.createElement("div",{key:r,style:t.listItem},e.createElement("span",null,"#",r+1," ",a.name),e.createElement("span",null,a.member_count," Ã¼ye")))))),o=({icon:l,label:a,value:r,color:n,subtitle:m})=>e.createElement("div",{style:{...t.statCard,borderTop:`3px solid ${n}`}},e.createElement("div",{style:{...t.statIcon,color:n}},l),e.createElement("div",{style:t.statContent},e.createElement("div",{style:t.statLabel},a),e.createElement("div",{style:t.statValue},r),m&&e.createElement("div",{style:t.statSubtitle},m))),d=({icon:l,label:a,value:r,color:n="#5865f2"})=>e.createElement("div",{style:t.activityItem},e.createElement("div",{style:{...t.activityIcon,color:n}},l),e.createElement("div",{style:t.activityLabel},a),e.createElement("div",{style:{...t.activityValue,color:n}},r)),C=({label:l,value:a,color:r})=>e.createElement("div",{style:t.pieItem},e.createElement("div",{style:{...t.pieColor,backgroundColor:r}}),e.createElement("div",{style:t.pieLabel},l),e.createElement("div",{style:t.pieValue},a)),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,backdropFilter:"blur(5px)"},modal:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"90%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},header:{padding:"20px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px",color:"#fff"},headerRight:{display:"flex",gap:"10px"},title:{margin:0,fontSize:"24px",color:"#fff"},exportButton:{background:"#23a559",border:"none",color:"#fff",padding:"10px 15px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"#da373c",border:"none",color:"#fff",padding:"10px 15px",borderRadius:"6px",cursor:"pointer",fontSize:"16px"},tabs:{display:"flex",padding:"0 20px",borderBottom:"1px solid #1e1f22",gap:"5px"},tab:{background:"none",border:"none",color:"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500",borderBottom:"2px solid transparent",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},activeTab:{color:"#fff",borderBottomColor:"#5865f2"},content:{flex:1,overflow:"auto",padding:"20px"},tabContent:{display:"flex",flexDirection:"column",gap:"20px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},statCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"20px",display:"flex",alignItems:"center",gap:"15px"},statIcon:{fontSize:"32px"},statContent:{flex:1},statLabel:{color:"#b9bbbe",fontSize:"12px",marginBottom:"5px"},statValue:{color:"#fff",fontSize:"24px",fontWeight:"bold"},statSubtitle:{color:"#747f8d",fontSize:"11px",marginTop:"3px"},section:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"20px"},sectionTitle:{color:"#fff",fontSize:"16px",marginBottom:"15px",margin:"0 0 15px 0"},activityList:{display:"flex",flexDirection:"column",gap:"10px"},activityItem:{display:"flex",alignItems:"center",padding:"10px",backgroundColor:"#2b2d31",borderRadius:"6px"},activityIcon:{color:"#5865f2",marginRight:"12px",fontSize:"18px"},activityLabel:{flex:1,color:"#b9bbbe",fontSize:"14px"},activityValue:{color:"#fff",fontSize:"16px",fontWeight:"bold"},list:{display:"flex",flexDirection:"column",gap:"8px"},listItem:{display:"flex",justifyContent:"space-between",padding:"10px",backgroundColor:"#2b2d31",borderRadius:"6px",color:"#b9bbbe",fontSize:"14px"},pieChart:{display:"flex",flexDirection:"column",gap:"12px"},pieItem:{display:"flex",alignItems:"center",gap:"12px"},pieColor:{width:"20px",height:"20px",borderRadius:"4px"},pieLabel:{flex:1,color:"#b9bbbe",fontSize:"14px"},pieValue:{color:"#fff",fontSize:"16px",fontWeight:"bold"},loading:{color:"#fff",textAlign:"center",padding:"40px"},error:{color:"#da373c",textAlign:"center",padding:"40px"},growthSection:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px",marginBottom:"20px"},growthCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"15px",display:"flex",flexDirection:"column",gap:"8px"},growthLabel:{color:"#b9bbbe",fontSize:"12px"},growthValue:{display:"flex",alignItems:"center",gap:"8px",fontSize:"20px",fontWeight:"bold"},deviceStats:{display:"flex",gap:"20px",flexWrap:"wrap"},deviceCard:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"15px",backgroundColor:"#2b2d31",padding:"20px",borderRadius:"8px"},deviceInfo:{display:"flex",flexDirection:"column",gap:"4px"},deviceLabel:{color:"#b9bbbe",fontSize:"12px"},deviceValue:{color:"#fff",fontSize:"24px",fontWeight:"bold"},devicePercent:{color:"#5865f2",fontSize:"14px",fontWeight:"bold"}};export{ae as default};
