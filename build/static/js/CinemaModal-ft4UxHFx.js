const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./react-core-B6hadH-M.js","../css/react-core-Dj12pvTl.css"])))=>i.map(i=>d[i]);
import{r,l as S,bR as T,A as w,bS as _,bT as P,_ as F}from"./react-core-B6hadH-M.js";const I=r.lazy(()=>F(()=>import("./react-core-B6hadH-M.js").then(p=>p.e4),__vite__mapDeps([0,1]),import.meta.url)),z=({onClose:p,ws:l})=>{const[b,R]=r.useState("https://www.youtube.com/watch?v=jfKfPfyJRdk"),[i,h]=r.useState(""),[u,o]=r.useState(!1),[E,O]=r.useState(.8),[m,f]=r.useState(null),[k,d]=r.useState(!1),n=r.useRef(null),s=r.useRef(!1),y=()=>{if(n.current&&typeof n.current.getCurrentTime=="function")try{return n.current.getCurrentTime()}catch{return 0}return 0};r.useEffect(()=>{if(!l.current)return;const e=g=>{try{const a=JSON.parse(g.data);if(a.type==="media_sync"){if(s.current=!0,a.action==="change_url")o(!1),d(!1),R(a.payload.url),f(null);else if(a.action==="play"){const C=y();Math.abs(C-a.payload.time)>2&&n.current&&typeof n.current.seekTo=="function"&&n.current.seekTo(a.payload.time),o(!0)}else a.action==="pause"&&o(!1);setTimeout(()=>{s.current=!1},1e3)}}catch(a){console.error("WS HatasÄ±:",a)}};return l.current.addEventListener("message",e),()=>l.current?.removeEventListener("message",e)},[l]);const c=(e,g={})=>{s.current||l.current?.readyState===WebSocket.OPEN&&l.current.send(JSON.stringify({type:"media_sync",action:e,payload:g}))},v=e=>{e.preventDefault(),i.trim()&&(s.current=!1,o(!1),d(!1),R(i),f(null),c("change_url",{url:i}),h(""))};return React.createElement("div",{style:t.overlay},React.createElement("div",{style:t.modal},React.createElement("div",{style:t.header},React.createElement("h3",null,"ðŸ¿ Sinema & MÃ¼zik"),React.createElement("button",{onClick:p,style:t.closeBtn},React.createElement(S,null))),React.createElement("div",{style:t.playerWrapper},m&&React.createElement("div",{style:t.statusOverlay},React.createElement(T,{size:40,color:"#f04747"}),React.createElement("p",{style:{marginTop:10}},m)),!k&&!m&&React.createElement("div",{style:t.statusOverlay},React.createElement("div",{className:"spinner"}),React.createElement("p",{style:{marginTop:10}},"YÃ¼kleniyor...")),React.createElement(r.Suspense,{fallback:React.createElement("div",{style:{color:"#fff",padding:"50px",textAlign:"center"}},"Loading player...")},React.createElement(I,{key:b,ref:n,url:b,playing:u,volume:E,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},onReady:()=>{d(!0)},onError:e=>{console.error("Video Oynatma HatasÄ±:",e),f("Video oynatÄ±lamadÄ±. Link geÃ§ersiz olabilir."),d(!0)},onPlay:()=>{const e=y();c("play",{time:e})},onPause:()=>{c("pause")},onProgress:()=>{}}))),React.createElement("div",{style:t.controls},React.createElement("form",{onSubmit:v,style:t.urlForm},React.createElement(w,{style:{color:"#b9bbbe"}}),React.createElement("input",{type:"text",value:i,onChange:e=>h(e.target.value),placeholder:"YouTube linki yapÄ±ÅŸtÄ±r...",style:t.input}),React.createElement("button",{type:"submit",style:t.loadBtn},"YÃ¼kle")),React.createElement("button",{onClick:()=>{if(s.current=!1,u)o(!1),c("pause");else{o(!0);const e=y();c("play",{time:e})}},style:{...t.loadBtn,backgroundColor:u?"#da373c":"#43b581",marginLeft:10,width:110,display:"flex",alignItems:"center",justifyContent:"center",gap:5}},u?React.createElement(React.Fragment,null,React.createElement(_,null)," Durdur"):React.createElement(React.Fragment,null,React.createElement(P,null)," Oynat")))))},t={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{width:"90%",maxWidth:"900px",backgroundColor:"#202225",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},header:{padding:"15px",backgroundColor:"#2f3136",display:"flex",justifyContent:"space-between",color:"white"},playerWrapper:{position:"relative",paddingTop:"56.25%",backgroundColor:"black"},closeBtn:{background:"none",border:"none",color:"white",fontSize:"1.5em",cursor:"pointer"},controls:{padding:"20px",display:"flex",alignItems:"center"},urlForm:{display:"flex",gap:"10px",backgroundColor:"#40444b",padding:"10px",borderRadius:"8px",flex:1},input:{flex:1,background:"transparent",border:"none",color:"white",outline:"none"},loadBtn:{padding:"8px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},statusOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.7)",color:"white",zIndex:10}},x=document.createElement("style");x.innerText=`
    .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4px solid #ffffff;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
`;document.head.appendChild(x);export{z as default};
