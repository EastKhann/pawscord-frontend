import{r,d as e,as as w,m as f,Q as D,bR as B,ar as C}from"./react-core-DrOm_csO.js";import{a as g}from"./index-D5GkNzM3.js";import{g as p,t as b}from"./index-BYhWpPLp.js";const z=({serverSlug:m,token:l,isMobile:i})=>{const[n,s]=r.useState({spamDetection:!0,profanityFilter:!0,nsfwDetection:!0,toxicityThreshold:70,autoTimeout:!1,autoDelete:!1,warningCount:3}),[c,u]=r.useState([]),[o,E]=r.useState({messagesScanned:0,flaggedToday:0,autoModActions:0,accuracy:0}),[T,x]=r.useState(!1);r.useEffect(()=>{y()},[]);const y=async()=>{x(!0);try{const a=await g.get(`${p()}/moderation/${m}/`,{headers:{Authorization:`Bearer ${l}`}});a.data.settings&&s(a.data.settings),a.data.recent_flags&&u(a.data.recent_flags),a.data.stats&&E(a.data.stats)}catch(a){console.error("Failed to load moderation:",a)}finally{x(!1)}},h=async()=>{try{await g.post(`${p()}/moderation/${m}/update/`,{settings:n},{headers:{Authorization:`Bearer ${l}`}}),b.success("âœ… Moderation settings saved!")}catch(a){console.error("Failed to save:",a),b.error("âŒ Failed to save settings")}},d=async(a,v)=>{try{await g.post(`${p()}/moderation/flag/${a}/action/`,{action:v},{headers:{Authorization:`Bearer ${l}`}}),y()}catch(S){console.error("Action failed:",S)}},t={container:{padding:i?"16px":"24px",maxWidth:"1200px",margin:"0 auto"},header:{marginBottom:"32px"},title:{fontSize:i?"24px":"32px",fontWeight:"700",color:"rgba(255, 255, 255, 0.95)",display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},subtitle:{fontSize:i?"14px":"16px",color:"rgba(255, 255, 255, 0.6)"},statsGrid:{display:"grid",gridTemplateColumns:i?"1fr 1fr":"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},statCard:{background:"linear-gradient(135deg, rgba(88, 101, 242, 0.1), rgba(114, 137, 218, 0.1))",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},statValue:{fontSize:i?"24px":"32px",fontWeight:"700",color:"#5865f2",marginBottom:"8px"},statLabel:{fontSize:"14px",color:"rgba(255, 255, 255, 0.7)"},section:{background:"rgba(30, 31, 34, 0.6)",border:"1px solid rgba(88, 101, 242, 0.2)",borderRadius:"16px",padding:i?"20px":"24px",marginBottom:"24px"},sectionTitle:{fontSize:"20px",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},setting:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",borderBottom:"1px solid rgba(88, 101, 242, 0.1)"},settingInfo:{flex:1},settingLabel:{fontSize:"16px",fontWeight:"500",color:"rgba(255, 255, 255, 0.9)",marginBottom:"4px"},settingDesc:{fontSize:"13px",color:"rgba(255, 255, 255, 0.6)"},switch:a=>({width:"56px",height:"32px",background:a?"linear-gradient(135deg, #43b581, #4caf50)":"rgba(255, 255, 255, 0.2)",borderRadius:"16px",position:"relative",cursor:"pointer",transition:"all 0.3s ease",border:"2px solid rgba(88, 101, 242, 0.3)"}),switchKnob:a=>({width:"26px",height:"26px",background:"white",borderRadius:"50%",position:"absolute",top:"1px",left:a?"26px":"1px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}),slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255, 255, 255, 0.2)",outline:"none",marginTop:"8px"},flagsList:{display:"flex",flexDirection:"column",gap:"12px"},flagCard:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(218, 55, 60, 0.4)",borderRadius:"12px",padding:"16px"},flagHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},flagType:a=>({display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",background:a==="spam"?"rgba(218, 55, 60, 0.2)":a==="nsfw"?"rgba(240, 183, 50, 0.2)":"rgba(88, 101, 242, 0.2)",color:a==="spam"?"#da373c":a==="nsfw"?"#f0b732":"#5865f2"}),flagMessage:{background:"rgba(0, 0, 0, 0.4)",padding:"12px",borderRadius:"8px",color:"rgba(255, 255, 255, 0.8)",fontSize:"14px",marginBottom:"12px",fontFamily:"monospace"},flagActions:{display:"flex",gap:"8px",flexWrap:"wrap"},actionBtn:a=>({padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",minHeight:"36px",background:a==="delete"?"rgba(218, 55, 60, 0.2)":a==="timeout"?"rgba(240, 183, 50, 0.2)":"rgba(67, 181, 129, 0.2)",color:a==="delete"?"#da373c":a==="timeout"?"#f0b732":"#43b581",border:`1px solid ${a==="delete"?"rgba(218, 55, 60, 0.4)":a==="timeout"?"rgba(240, 183, 50, 0.4)":"rgba(67, 181, 129, 0.4)"}`}),saveBtn:{width:"100%",padding:"16px",background:"linear-gradient(135deg, #5865f2, #7289da)",border:"none",borderRadius:"12px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginTop:"24px",transition:"all 0.2s ease",minHeight:"48px"}};return e.createElement("div",{style:t.container},e.createElement("div",{style:t.header},e.createElement("h1",{style:t.title},e.createElement(w,null),"AI Moderation"),e.createElement("p",{style:t.subtitle},"Automated content filtering powered by machine learning")),e.createElement("div",{style:t.statsGrid},e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statValue},o.messagesScanned.toLocaleString()),e.createElement("div",{style:t.statLabel},"Messages Scanned")),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statValue},o.flaggedToday),e.createElement("div",{style:t.statLabel},"Flagged Today")),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statValue},o.autoModActions),e.createElement("div",{style:t.statLabel},"Auto Actions")),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statValue},o.accuracy,"%"),e.createElement("div",{style:t.statLabel},"Accuracy"))),e.createElement("div",{style:t.section},e.createElement("h2",{style:t.sectionTitle},"âš™ï¸ Detection Settings"),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("div",{style:t.settingLabel},"Spam Detection"),e.createElement("div",{style:t.settingDesc},"Detect repeated or mass messages")),e.createElement("div",{style:t.switch(n.spamDetection),onClick:()=>s({...n,spamDetection:!n.spamDetection})},e.createElement("div",{style:t.switchKnob(n.spamDetection)}))),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("div",{style:t.settingLabel},"Profanity Filter"),e.createElement("div",{style:t.settingDesc},"Block offensive language")),e.createElement("div",{style:t.switch(n.profanityFilter),onClick:()=>s({...n,profanityFilter:!n.profanityFilter})},e.createElement("div",{style:t.switchKnob(n.profanityFilter)}))),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("div",{style:t.settingLabel},"NSFW Detection"),e.createElement("div",{style:t.settingDesc},"Detect inappropriate images")),e.createElement("div",{style:t.switch(n.nsfwDetection),onClick:()=>s({...n,nsfwDetection:!n.nsfwDetection})},e.createElement("div",{style:t.switchKnob(n.nsfwDetection)}))),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("div",{style:t.settingLabel},"Toxicity Threshold: ",n.toxicityThreshold,"%"),e.createElement("div",{style:t.settingDesc},"Sensitivity level for toxic content")),e.createElement("input",{type:"range",min:"0",max:"100",value:n.toxicityThreshold,onChange:a=>s({...n,toxicityThreshold:parseInt(a.target.value)}),style:t.slider}))),e.createElement("div",{style:t.section},e.createElement("h2",{style:t.sectionTitle},e.createElement(f,null),"Recent Flags (",c.length,")"),c.length===0?e.createElement("div",{style:{textAlign:"center",padding:"40px",color:"rgba(255, 255, 255, 0.5)"}},e.createElement(D,{size:48}),e.createElement("p",{style:{marginTop:"16px"}},"No recent violations detected")):e.createElement("div",{style:t.flagsList},c.map(a=>e.createElement("div",{key:a.id,style:t.flagCard},e.createElement("div",{style:t.flagHeader},e.createElement("div",null,e.createElement("span",{style:t.flagType(a.type)},e.createElement(f,null),a.type.toUpperCase()),e.createElement("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.5)",marginTop:"8px"}},a.user," â€¢ ",a.timestamp)),e.createElement("div",{style:{fontSize:"18px",fontWeight:"700",color:a.confidence>80?"#da373c":"#f0b732"}},a.confidence,"%")),e.createElement("div",{style:t.flagMessage},a.message),e.createElement("div",{style:t.flagActions},e.createElement("button",{onClick:()=>d(a.id,"delete"),style:t.actionBtn("delete")},e.createElement(B,null),"Delete"),e.createElement("button",{onClick:()=>d(a.id,"timeout"),style:t.actionBtn("timeout")},"Timeout User"),e.createElement("button",{onClick:()=>d(a.id,"dismiss"),style:t.actionBtn("dismiss")},e.createElement(C,null),"Dismiss")))))),e.createElement("button",{onClick:h,style:t.saveBtn},"ğŸ’¾ Save Settings"))};export{z as default};
