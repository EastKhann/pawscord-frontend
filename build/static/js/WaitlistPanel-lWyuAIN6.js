import{r as n,b as e}from"./react-core-9vc7GIjk.js";import{n as v,a as C,f as h,u as S}from"./icons-vendor-C1zuqBwn.js";import{t as a}from"./index-BZ_tZYbH.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const L=({fetchWithAuth:l,apiBaseUrl:i,onClose:f,serverId:m})=>{const[d,x]=n.useState([]),[g,p]=n.useState(!1),[s,y]=n.useState("");n.useEffect(()=>{c()},[]);const c=async()=>{p(!0);try{const o=await(await l(`${i}/servers/${m}/waitlist/`)).json();x(o.entries||[]),y(o.referral_code||"")}catch{a.error("Failed to load waitlist")}finally{p(!1)}},u=async r=>{try{await l(`${i}/waitlist/${r}/approve/`,{method:"POST"}),a.success("Waitlist entry approved"),c()}catch{a.error("Failed to approve entry")}},b=async r=>{try{await l(`${i}/waitlist/${r}/reject/`,{method:"POST"}),a.success("Waitlist entry rejected"),c()}catch{a.error("Failed to reject entry")}},E=()=>{navigator.clipboard.writeText(s),a.success("Referral code copied to clipboard")};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(v,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Server Waitlist")),e.createElement("button",{onClick:f,style:t.closeButton},e.createElement(C,null))),s&&e.createElement("div",{style:t.referralSection},e.createElement("div",{style:t.referralLabel},"Your Referral Code"),e.createElement("div",{style:t.referralCode},e.createElement("code",null,s),e.createElement("button",{onClick:E,style:t.copyButton},e.createElement(h,null))),e.createElement("div",{style:t.referralHint},"Share this code with others to move up in the waitlist")),e.createElement("div",{style:t.content},g?e.createElement("div",{style:t.loading},"Loading waitlist..."):d.length===0?e.createElement("div",{style:t.empty},"No waitlist entries"):e.createElement("div",{style:t.entriesList},d.map((r,o)=>e.createElement("div",{key:o,style:t.entryCard},e.createElement("div",{style:t.entryInfo},e.createElement("div",{style:t.entryHeader},e.createElement("span",{style:t.entryPosition},"#",r.position),e.createElement("span",{style:t.entryEmail},r.email)),e.createElement("div",{style:t.entryMeta},e.createElement("span",null,"Joined: ",new Date(r.created_at).toLocaleDateString()),r.referrals_count>0&&e.createElement(e.Fragment,null,e.createElement("span",null," â€¢ "),e.createElement("span",{style:t.referralsCount},r.referrals_count," referral",r.referrals_count!==1?"s":""))),r.status==="approved"&&e.createElement("div",{style:t.approvedBadge},e.createElement(S,null)," Approved"),r.status==="rejected"&&e.createElement("div",{style:t.rejectedBadge},"Rejected")),r.status==="pending"&&e.createElement("div",{style:t.entryActions},e.createElement("button",{onClick:()=>u(r.id),style:t.approveButton},"Approve"),e.createElement("button",{onClick:()=>b(r.id),style:t.rejectButton},"Reject"))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},referralSection:{padding:"20px",borderBottom:"1px solid #2c2f33",backgroundColor:"#2c2f33"},referralLabel:{fontSize:"13px",color:"#dcddde",marginBottom:"8px"},referralCode:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},copyButton:{padding:"8px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},referralHint:{fontSize:"12px",color:"#99aab5",fontStyle:"italic"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},entriesList:{display:"flex",flexDirection:"column",gap:"12px"},entryCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},entryInfo:{flex:1},entryHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},entryPosition:{fontSize:"16px",fontWeight:"700",color:"#5865f2"},entryEmail:{fontSize:"14px",color:"#ffffff"},entryMeta:{fontSize:"12px",color:"#99aab5",marginBottom:"8px"},referralsCount:{color:"#43b581",fontWeight:"600"},approvedBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",backgroundColor:"#43b581",borderRadius:"4px",fontSize:"12px",color:"#ffffff",fontWeight:"600"},rejectedBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",backgroundColor:"#f04747",borderRadius:"4px",fontSize:"12px",color:"#ffffff",fontWeight:"600"},entryActions:{display:"flex",gap:"8px"},approveButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"600"},rejectButton:{padding:"8px 16px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"600"}};export{L as default};
