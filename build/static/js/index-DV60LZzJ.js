const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/web-Bprpo68n.js","static/js/media-vendor-B-uSUaIv.js","static/js/react-core-9vc7GIjk.js","static/js/editor-vendor-DiU449Dh.js","static/js/router-vendor-qCr-Mpaw.js","static/js/crypto-vendor-C1qXRpJv.js","static/js/icons-vendor-BHKL7tCa.js","static/js/state-vendor-0vlBuk0v.js","static/js/ServerSettingsModal-7QIDs-jH.js","static/js/ui-vendor-_iSLAufy.js","static/js/AutoResponderManager-DGY6nl5S.js","static/js/VanityURLManager-DfPTMMtW.js","static/js/UserProfileModal-z5LIpH_L.js","static/js/ImageModal-C99nj2Rh.js","static/js/GifPicker-BFh2Z4QW.js","static/js/StickerPicker-DZkr96jN.js","static/js/SoundboardModal--hcW7TI2.js","static/js/WatchPartyEnhanced-Bs6Fv2kW.js","static/js/CinemaModal-CNCTR4Ij.js","static/js/WhiteboardModal-DDRBrJKs.js","static/js/PollCreateModal-BLgQdCYy.js","static/js/CodeSnippetModal-BgyE0mGP.js","static/js/MessageTemplateModal-SDn1-KoA.js","static/js/Message-CjV_cGot.js","static/js/LazyImage-BGwIjfgb.js","static/js/imageCaching-B8rCcNnf.js","static/js/syntax-core-BoGMOf4E.js","static/js/perf-vendor-DCe9hQ6U.js","static/js/VirtualMessageList-B83NbI3e.js","static/js/MessageInput-COMnIy2Y.js","static/js/ScheduledMessageModal-1n1TFCD3.js","static/css/MessageInput-Q2oINpgp.css","static/js/UserVideoContainer-BUAIG94Z.js","static/js/VoiceAudioController-DwP-796S.js","static/js/RichTextEditor-C8bgbXks.js","static/css/RichTextEditor-D1KllEDh.css","static/js/StickyMessageBanner-BoEiMFpM.js","static/js/LoginPage-CpsIHSi4.js","static/js/recaptcha-DCjcE_52.js","static/js/WelcomeScreen-BRpCebbG.js","static/js/DownloadModal-5FrQ_BMa.js","static/js/AvatarCropper-DKjxipOm.js","static/css/AvatarCropper-D7v9iP7L.css","static/js/CryptoChartModal-yQ_P1yJ0.js","static/js/CryptoStoreModal-3hW9PsS7.js","static/js/PremiumStoreModal-BquDC-S6.js","static/js/KanbanBoard-D60zVje3.js","static/js/SummaryModal-D2qEY_8K.js","static/js/DJModal-CFPtRpJq.js","static/js/ThemeStoreModal-DdVlH2aT.js","static/js/EncryptionKeyModal-DNfXH39V.js","static/js/CreateGroupModal-CMnZq7js.js","static/js/AdminAnalyticsPanel-UWU5Yg4e.js","static/js/AdminPanelModal-BbiQXxfM.js","static/js/WebhooksPanel-ClPIKXp8.js","static/css/WebhooksPanel-Cn13v79_.css","static/js/AutoModerationDashboard-DEH_N75J.js","static/js/AutoModerationPanel-DcR5Jc7z.js","static/css/AutoModerationPanel-iAw0CZQU.css","static/js/RaidProtectionPanel-DuK4zB4H.js","static/js/ReportSystemPanel-CYiCYLM_.js","static/js/AuditLogPanel-BhrYkcUv.js","static/js/UserWarningsPanel-BP5IlPxZ.js","static/js/BookmarkPanel-CshuI77S.js","static/js/ReadLaterPanel-o2EoczRH.js","static/css/ReadLaterPanel-B_WZGTiX.css","static/js/ChannelPermissionsPanel-DRBodxf4.js","static/js/MessageThreadsPanel-DSjkzica.js","static/js/ModeratorNotesPanel-DlE0rKhZ.js","static/js/ServerRolesPanel-aoxytP7T.js","static/js/NotificationPreferencesPanel-BXYwHZBV.js","static/js/MessageOCRPanel-466GCNsp.js","static/js/MassActionsPanel-D_C474vY.js","static/js/TimeoutMutePanel-CqB5VmD1.js","static/js/ServerThemesPanel-BVQDjR6u.js","static/js/KeywordMutesPanel-MxvS3rZM.js","static/js/WelcomeTemplatesPanel-D3_ZyH8x.js","static/js/StickyMessagesPanel-D4IqJTUk.js","static/js/MessageTemplatesPanel-BSxULKfO.js","static/js/MessageExportPanel-CzJorP0V.js","static/js/ArchivedRoomsPanel-CsgTeZ-U.js","static/js/SlowModePanel-Dh_iQSzj.js","static/js/EmojiManagementPanel-Lfis2Q2D.js","static/js/ReactionAnalyticsPanel-BW-VT0nI.js","static/js/LinkClickTrackingPanel-DDptexmu.js","static/js/JoinLeaveLogsPanel-C3i5eUVW.js","static/js/UserActivityPanel-B7FywSKe.js","static/js/NicknameHistoryPanel-BQfMv1Hu.js","static/js/FieldChangeTrackingPanel-_sHx0NzT.js","static/js/InviteAnalyticsPanel-BzYAFBvH.js","static/js/ContentScannerPanel-tIZJUxlt.js","static/js/EphemeralMessagesPanel-BGQGjVIj.js","static/js/TopicHistoryPanel-CsdgTEaR.js","static/js/DraftsPanel-C1l_1Bb5.js","static/js/ServerNicknamesPanel-C1cIz_k4.js","static/js/ServerBoostPanel-zn40_PoG.js","static/js/RoomWebhooksPanel-DKvVve0a.js","static/js/OAuthAppsPanel-BV7iJ7a2.js","static/js/VanityURLPanel-BdrJcJGE.js","static/js/AutoRespondersPanel-CTuhipow.js","static/js/SessionManagementPanel-CLMrZciS.js","static/js/GDPRExportPanel-DY5nFH4w.js","static/js/DataRetentionPanel-7TXtAZVa.js","static/js/TwoFactorSetupWizard-De9NRXpl.js","static/js/EnhancedPollsPanel-C0dVu3dz.js","static/js/VoiceTranscriptsPanel-CX83dTV-.js","static/js/PaymentPanel-rP7L--Wm.js","static/js/StoreModal-hR17QIdo.js","static/js/DailyRewardsModal-DwNy4LHA.js","static/js/APIUsagePanel-CTsHOntN.js","static/js/ExportJobsPanel-BXPi6xTd.js","static/js/ScheduledAnnouncementsPanel-w3AM5dyF.js","static/js/InviteExportPanel-CsFzWfn_.js","static/js/AdvancedSearchPanel-BXexfVds.js","static/js/GrowthMetricsPanel-Cek5oyhH.js","static/js/LinkPreviewRenderer-C1xDxn-z.js","static/js/InventoryPanel-6uix6XVX.js","static/js/WaitlistPanel-CI6b0CSg.js","static/js/ReferralRewardsPanel-CftLGCTk.js","static/js/VerifyEmailPage-Cbi4zzDw.js","static/js/ForgotPasswordPage-DBfB7USe.js","static/js/ResetPasswordPage-wZ5RYW5i.js","static/js/TwoFactorLoginPage-B-iuCr7a.js","static/js/TwoFactorSetup-M1CIJefp.js","static/css/TwoFactorSetup-CtmcmlFU.css","static/js/TwoFactorLogin-NYOByexZ.js","static/css/TwoFactorLogin-DgREC4Q6.css","static/js/VanityInviteScreen-B4PHBlOh.js","static/js/EmailVerification-DZLgJ2dq.js","static/css/EmailVerification-CE2S-15C.css","static/js/MobileNav--ZizGSGJ.js","static/css/MobileNav-BLwPGkd1.css","static/js/SwipeActions-CXI45k7R.js","static/css/SwipeActions-CCPpS4d3.css","static/js/VoiceMessage-B0egG8MO.js","static/css/VoiceMessage-Czmu0SFR.css","static/js/FriendsTab-Dnm5C-m0.js","static/js/RoomList-B8FV_zDl.js","static/js/UserFooter-B-GIwjM_.js","static/js/UserProfilePanel-BwXb-Qhv.js","static/js/index-B9ygI19o.js","static/css/UserProfilePanel-DaqyzPyG.css","static/js/VoiceChatPanel-CR84NPF2.js","static/js/cjs-B1PcxHQ9.js","static/js/UserContextMenu-vGVjbVNg.js","static/css/VoiceChatPanel-D0hk1ENV.css","static/js/ChatUserList-BTvFSvCn.js","static/js/PinnedMessages-D12SAmXc.js","static/js/FloatingVoiceIsland-QkrgBdse.js","static/css/FloatingVoiceIsland-CMKNK2uU.css","static/js/CinemaPlayer-C9irxhSO.js","static/js/ConnectionsPanel-C0w7oTof.js","static/css/ConnectionsPanel-BHb_cRVQ.css","static/js/PasswordSetupModal-Ci806j9E.js","static/css/PasswordSetupModal-hiiUdoNl.css","static/js/NotificationDropdown-BvvnXljc.js","static/js/ReactionStatsPanel-CNxFa_y6.js","static/css/ReactionStatsPanel-C-EVTLx8.css","static/js/ServerHealthPanel-CpVkqOsf.js","static/css/ServerHealthPanel-BMi05DZE.css","static/js/ChannelAnalyticsPanel-DQgRWwKt.js","static/css/ChannelAnalyticsPanel-B6Q8OoDz.css","static/js/SmartSuggestionsPanel-D6L0NFPJ.js","static/css/SmartSuggestionsPanel-BFDBx7VC.css","static/js/UserPresenceInsightsPanel-DKWdbZm5.js","static/css/UserPresenceInsightsPanel-WBZVzGk9.css","static/js/MiniGamesPanel-CgJUCVvv.js","static/js/ProjectCollaborationPanel-CTQvqvvh.js","static/js/AvatarStudioPanel-BEU7qAlE.js","static/js/pushNotifications-DySc_Ipw.js","static/js/urlHandlers-CkIgbdK3.js","static/js/EnglishHub-CvHxTHnB.js","static/js/GrammarQuizPage-B-eIuW3m.js","static/js/grammarQuestions-BDmFtbiy.js","static/js/EnglishLearningPage-CqVdDO17.js","static/js/CryptoDashboard-D56xiOB_.js","static/js/CryptoSignals-BdqR-T_5.js","static/js/LandingPage-CF0bijEq.js","static/css/LandingPage-CHHpsw7G.css","static/js/ReferralProgram-DSzx_tqh.js","static/css/ReferralProgram-CBBjqZR4.css","static/js/GrowthDashboard-DGfOEJq0.js","static/css/GrowthDashboard-xlqndw5F.css","static/js/ToastDemo-CLfdMtal.js","static/css/ToastDemo-DxNVRuTl.css"])))=>i.map(i=>d[i]);
var yl=Object.defineProperty;var Sl=(i,n,r)=>n in i?yl(i,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[n]=r;var $n=(i,n,r)=>Sl(i,typeof n!="symbol"?n+"":n,r);import{_ as y}from"./media-vendor-B-uSUaIv.js";import{b as e,r as o,f as wl,n as bl}from"./react-core-9vc7GIjk.js";import{u as ms,a as fs,b as Gn,L as ps,H as El,R as vl,c as he}from"./router-vendor-qCr-Mpaw.js";import{C as Ur,j as ho,S as _l}from"./crypto-vendor-C1qXRpJv.js";import{F as kl,a as jo,b as xl,c as Ya,d as qa,e as Cl,f as Tl,g as Rl,h as Al,i as Pl,j as Il,k as Ja,l as Ll,m as Ol,n as Br,o as jr,p as Dl,q as $l,r as Ml,s as zl,t as gs,u as Gr,v as Hr,w as Vl,x as Ul,y as hs,z as Za,A as Bl,B as Nl,C as Fl,D as Wl,E as jl,G as Gl,H as Hl}from"./icons-vendor-BHKL7tCa.js";import{c as Kl}from"./state-vendor-0vlBuk0v.js";import"./editor-vendor-DiU449Dh.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))p(d);new MutationObserver(d=>{for(const w of d)if(w.type==="childList")for(const x of w.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&p(x)}).observe(document,{childList:!0,subtree:!0});function r(d){const w={};return d.integrity&&(w.integrity=d.integrity),d.referrerPolicy&&(w.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?w.credentials="include":d.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function p(d){if(d.ep)return;d.ep=!0;const w=r(d);fetch(d.href,w)}})();var So;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(So||(So={}));class Mr extends Error{constructor(n,r,p){super(n),this.message=n,this.code=r,this.data=p}}const Yl=i=>{var n,r;return i?.androidBridge?"android":!((r=(n=i?.webkit)===null||n===void 0?void 0:n.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},ql=i=>{const n=i.CapacitorCustomPlatform||null,r=i.Capacitor||{},p=r.Plugins=r.Plugins||{},d=()=>n!==null?n.name:Yl(i),w=()=>d()!=="web",x=$=>{const V=O.get($);return!!(V?.platforms.has(d())||R($))},R=$=>{var V;return(V=r.PluginHeaders)===null||V===void 0?void 0:V.find(ee=>ee.name===$)},C=$=>i.console.error($),O=new Map,K=($,V={})=>{const ee=O.get($);if(ee)return console.warn(`Capacitor plugin "${$}" already registered. Cannot register plugins twice.`),ee.proxy;const G=d(),B=R($);let U;const j=async()=>(!U&&G in V?U=typeof V[G]=="function"?U=await V[G]():U=V[G]:n!==null&&!U&&"web"in V&&(U=typeof V.web=="function"?U=await V.web():U=V.web),U),q=(Y,me)=>{var be,ze;if(B){const X=B?.methods.find(ye=>me===ye.name);if(X)return X.rtype==="promise"?ye=>r.nativePromise($,me.toString(),ye):(ye,Ve)=>r.nativeCallback($,me.toString(),ye,Ve);if(Y)return(be=Y[me])===null||be===void 0?void 0:be.bind(Y)}else{if(Y)return(ze=Y[me])===null||ze===void 0?void 0:ze.bind(Y);throw new Mr(`"${$}" plugin is not implemented on ${G}`,So.Unimplemented)}},ue=Y=>{let me;const be=(...ze)=>{const X=j().then(ye=>{const Ve=q(ye,Y);if(Ve){const De=Ve(...ze);return me=De?.remove,De}else throw new Mr(`"${$}.${Y}()" is not implemented on ${G}`,So.Unimplemented)});return Y==="addListener"&&(X.remove=async()=>me()),X};return be.toString=()=>`${Y.toString()}() { [capacitor code] }`,Object.defineProperty(be,"name",{value:Y,writable:!1,configurable:!1}),be},ie=ue("addListener"),J=ue("removeListener"),ne=(Y,me)=>{const be=ie({eventName:Y},me),ze=async()=>{const ye=await be;J({eventName:Y,callbackId:ye},me)},X=new Promise(ye=>be.then(()=>ye({remove:ze})));return X.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ze()},X},de=new Proxy({},{get(Y,me){switch(me){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return B?ne:ie;case"removeListener":return J;default:return ue(me)}}});return p[$]=de,O.set($,{name:$,proxy:de,platforms:new Set([...Object.keys(V),...B?[G]:[]])}),de};return r.convertFileSrc||(r.convertFileSrc=$=>$),r.getPlatform=d,r.handleError=C,r.isNativePlatform=w,r.isPluginAvailable=x,r.registerPlugin=K,r.Exception=Mr,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},Jl=i=>i.Capacitor=ql(i),wo=Jl(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Kr=wo.registerPlugin;class ys{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(n,r){let p=!1;this.listeners[n]||(this.listeners[n]=[],p=!0),this.listeners[n].push(r);const w=this.windowListeners[n];w&&!w.registered&&this.addWindowListener(w),p&&this.sendRetainedArgumentsForEvent(n);const x=async()=>this.removeListener(n,r);return Promise.resolve({remove:x})}async removeAllListeners(){this.listeners={};for(const n in this.windowListeners)this.removeWindowListener(this.windowListeners[n]);this.windowListeners={}}notifyListeners(n,r,p){const d=this.listeners[n];if(!d){if(p){let w=this.retainedEventArguments[n];w||(w=[]),w.push(r),this.retainedEventArguments[n]=w}return}d.forEach(w=>w(r))}hasListeners(n){var r;return!!(!((r=this.listeners[n])===null||r===void 0)&&r.length)}registerWindowListener(n,r){this.windowListeners[r]={registered:!1,windowEventName:n,pluginEventName:r,handler:p=>{this.notifyListeners(r,p)}}}unimplemented(n="not implemented"){return new wo.Exception(n,So.Unimplemented)}unavailable(n="not available"){return new wo.Exception(n,So.Unavailable)}async removeListener(n,r){const p=this.listeners[n];if(!p)return;const d=p.indexOf(r);this.listeners[n].splice(d,1),this.listeners[n].length||this.removeWindowListener(this.windowListeners[n])}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}sendRetainedArgumentsForEvent(n){const r=this.retainedEventArguments[n];r&&(delete this.retainedEventArguments[n],r.forEach(p=>{this.notifyListeners(n,p)}))}}const Xa=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Qa=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Zl extends ys{async getCookies(){const n=document.cookie,r={};return n.split(";").forEach(p=>{if(p.length<=0)return;let[d,w]=p.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");d=Qa(d).trim(),w=Qa(w).trim(),r[d]=w}),r}async setCookie(n){try{const r=Xa(n.key),p=Xa(n.value),d=`; expires=${(n.expires||"").replace("expires=","")}`,w=(n.path||"/").replace("path=",""),x=n.url!=null&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${r}=${p||""}${d}; path=${w}; ${x};`}catch(r){return Promise.reject(r)}}async deleteCookie(n){try{document.cookie=`${n.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const n=document.cookie.split(";")||[];for(const r of n)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(n){return Promise.reject(n)}}async clearAllCookies(){try{await this.clearCookies()}catch(n){return Promise.reject(n)}}}Kr("CapacitorCookies",{web:()=>new Zl});const Xl=async i=>new Promise((n,r)=>{const p=new FileReader;p.onload=()=>{const d=p.result;n(d.indexOf(",")>=0?d.split(",")[1]:d)},p.onerror=d=>r(d),p.readAsDataURL(i)}),Ql=(i={})=>{const n=Object.keys(i);return Object.keys(i).map(d=>d.toLocaleLowerCase()).reduce((d,w,x)=>(d[w]=i[n[x]],d),{})},ec=(i,n=!0)=>i?Object.entries(i).reduce((p,d)=>{const[w,x]=d;let R,C;return Array.isArray(x)?(C="",x.forEach(O=>{R=n?encodeURIComponent(O):O,C+=`${w}=${R}&`}),C.slice(0,-1)):(R=n?encodeURIComponent(x):x,C=`${w}=${R}`),`${p}&${C}`},"").substr(1):null,tc=(i,n={})=>{const r=Object.assign({method:i.method||"GET",headers:i.headers},n),d=Ql(i.headers)["content-type"]||"";if(typeof i.data=="string")r.body=i.data;else if(d.includes("application/x-www-form-urlencoded")){const w=new URLSearchParams;for(const[x,R]of Object.entries(i.data||{}))w.set(x,R);r.body=w.toString()}else if(d.includes("multipart/form-data")||i.data instanceof FormData){const w=new FormData;if(i.data instanceof FormData)i.data.forEach((R,C)=>{w.append(C,R)});else for(const R of Object.keys(i.data))w.append(R,i.data[R]);r.body=w;const x=new Headers(r.headers);x.delete("content-type"),r.headers=x}else(d.includes("application/json")||typeof i.data=="object")&&(r.body=JSON.stringify(i.data));return r};class oc extends ys{async request(n){const r=tc(n,n.webFetchExtra),p=ec(n.params,n.shouldEncodeUrlParams),d=p?`${n.url}?${p}`:n.url,w=await fetch(d,r),x=w.headers.get("content-type")||"";let{responseType:R="text"}=w.ok?n:{};x.includes("application/json")&&(R="json");let C,O;switch(R){case"arraybuffer":case"blob":O=await w.blob(),C=await Xl(O);break;case"json":C=await w.json();break;default:C=await w.text()}const K={};return w.headers.forEach(($,V)=>{K[V]=$}),{data:C,headers:K,status:w.status,url:w.url}}async get(n){return this.request(Object.assign(Object.assign({},n),{method:"GET"}))}async post(n){return this.request(Object.assign(Object.assign({},n),{method:"POST"}))}async put(n){return this.request(Object.assign(Object.assign({},n),{method:"PUT"}))}async patch(n){return this.request(Object.assign(Object.assign({},n),{method:"PATCH"}))}async delete(n){return this.request(Object.assign(Object.assign({},n),{method:"DELETE"}))}}Kr("CapacitorHttp",{web:()=>new oc});const nc=Kr("GoogleAuth",{web:()=>y(()=>import("./web-Bprpo68n.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(i=>new i.GoogleAuthWeb)});let rc=class extends e.Component{constructor(r){super(r);$n(this,"reportError",async(r,p)=>{try{await fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:r.toString(),stack:p.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(d){console.error("Failed to report error:",d)}});$n(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,p){console.error("Error Boundary caught error:",r,p),this.setState({error:r,errorInfo:p,errorCount:this.state.errorCount+1}),window.gtag&&window.gtag("event","exception",{description:r.toString(),fatal:!1}),this.reportError(r,p)}render(){return this.state.hasError?this.state.errorCount>3?e.createElement("div",{className:"error-boundary critical"},e.createElement("div",{className:"error-content"},e.createElement("h1",null,"‚ö†Ô∏è Critical Error"),e.createElement("p",null,"Multiple errors detected. Please refresh the page."),e.createElement("button",{onClick:()=>window.location.reload(),className:"btn-reload"},"Refresh Page"))):e.createElement("div",{className:"error-boundary"},e.createElement("div",{className:"error-content"},e.createElement("div",{className:"error-icon"},"üòï"),e.createElement("h1",null,"Oops! Something went wrong"),e.createElement("p",{className:"error-message"},this.props.fallbackMessage||"We're sorry for the inconvenience. The error has been reported."),!1,e.createElement("div",{className:"error-actions"},e.createElement("button",{onClick:this.handleReset,className:"btn-retry"},"Try Again"),e.createElement("button",{onClick:()=>window.location.href="/",className:"btn-home"},"Go Home")))):this.props.children}},fo=null;function ac(){return fo||(fo=document.createElement("div"),fo.id="toast-container",fo.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        `,document.body.appendChild(fo)),fo}function Wo(i,n="info",r=3e3){const p=ac(),d=document.createElement("div");d.className=`toast toast-${n}`;let w="‚ÑπÔ∏è",x="#3b82f6";switch(n){case"success":w="‚úÖ",x="#10b981";break;case"error":w="‚ùå",x="#ef4444";break;case"warning":w="‚ö†Ô∏è",x="#f59e0b";break;case"info":w="‚ÑπÔ∏è",x="#3b82f6";break}d.style.cssText=`
        background: ${x};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 300px;
        max-width: 500px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 14px;
        pointer-events: all;
        animation: slideIn 0.3s ease-out;
        transition: opacity 0.3s ease-out;
    `,d.innerHTML=`
        <span style="font-size: 20px;">${w}</span>
        <span style="flex: 1;">${i}</span>
        <button onclick="this.parentElement.remove()" style="
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
           onmouseout="this.style.background='rgba(255,255,255,0.2)'">√ó</button>
    `,p.appendChild(d);const R=document.createElement("style");R.textContent=`
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    `,document.getElementById("toast-styles")||(R.id="toast-styles",document.head.appendChild(R)),setTimeout(()=>{d.style.animation="slideOut 0.3s ease-out",setTimeout(()=>d.remove(),300)},r)}const M={success:(i,n)=>Wo(i,"success",n),error:(i,n)=>Wo(i,"error",n),warning:(i,n)=>Wo(i,"warning",n),info:(i,n)=>Wo(i,"info",n)};typeof window<"u"&&(window.toast=M,window.showToast=Wo);const sc=async()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.toLowerCase().includes("electron")||window.location?.protocol==="file:"))return console.log("‚ö†Ô∏è [PWA] Service Worker disabled in Electron (file:// protocol)"),null;if("serviceWorker"in navigator)try{const n=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("‚úÖ Service Worker registered:",n.scope),n.addEventListener("updatefound",()=>{const r=n.installing;console.log("üîÑ New Service Worker installing..."),r.addEventListener("statechange",()=>{r.state==="installed"&&navigator.serviceWorker.controller&&ic()})}),setInterval(()=>{n.update()},3600*1e3),n}catch(n){return console.error("‚ùå Service Worker registration failed:",n),null}},ic=()=>{console.log("‚ÑπÔ∏è Yeni versiyon mevcut - UI g√ºncelleme butonu aktif")},lc=()=>{window.addEventListener("beforeinstallprompt",i=>{i.preventDefault();const n=document.getElementById("install-pwa-button");n&&(n.style.display="block"),console.log("üì± PWA install prompt ready")}),window.addEventListener("appinstalled",()=>{console.log("‚úÖ PWA installed successfully"),window.gtag&&window.gtag("event","pwa_installed",{event_category:"PWA",event_label:"App Installed"})})},cc=(i,n)=>{const r=()=>{console.log("‚úÖ Network: Online"),i&&i(),es("üü¢ √áevrimi√ßi","success")},p=()=>{console.log("‚ùå Network: Offline"),n&&n(),es("üî¥ √áevrimdƒ±≈üƒ± - Baƒülantƒ± koptu","error")};return window.addEventListener("online",r),window.addEventListener("offline",p),navigator.onLine||p(),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",p)}},es=(i,n="info")=>{const r=document.getElementById("network-banner");r&&r.remove();const p=document.createElement("div");p.id="network-banner",p.textContent=i,p.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        padding: 12px;
        text-align: center;
        color: white;
        font-weight: 600;
        z-index: 9999;
        animation: slideDown 0.3s ease;
        background: ${n==="success"?"#43b581":"#ed4245"};
    `,document.body.appendChild(p),n==="success"&&setTimeout(()=>{p.style.animation="slideUp 0.3s ease",setTimeout(()=>p.remove(),300)},3e3)},dc=()=>{const i=document.createElement("style");i.textContent=`
        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }
    `,document.head.appendChild(i)};dc();const uc=`
/* üé® PAWSCORD Critical CSS - Above the Fold */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #1e1f22;
    color: #dcddde;
    overflow: hidden;
}

/* Loading Screen */
#loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #1e1f22;
    display: flex;
    align-items: center;
    justify-center: center;
    z-index: 9999;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #40444b;
    border-top-color: #5865f2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Main Layout */
#root {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.app-container {
    display: flex;
    width: 100%;
    height: 100%;
}

/* Sidebar */
.sidebar {
    width: 240px;
    background: #2b2d31;
    flex-shrink: 0;
}

/* Chat Area */
.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #313338;
}

/* Message Input - Critical */
.message-input-container {
    padding: 16px;
    background: #383a40;
}

.message-input {
    width: 100%;
    padding: 12px;
    background: #40444b;
    border: none;
    border-radius: 8px;
    color: #dcddde;
    font-size: 15px;
    outline: none;
}

/* Button Base */
button {
    cursor: pointer;
    border: none;
    background: transparent;
    color: inherit;
    font-family: inherit;
}

.btn-primary {
    background: #5865f2;
    color: white;
    padding: 10px 16px;
    border-radius: 4px;
    font-weight: 500;
    transition: background 0.17s ease;
}

.btn-primary:hover {
    background: #4752c4;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #2b2d31;
}

::-webkit-scrollbar-thumb {
    background: #1a1b1e;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #141517;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
}

/* Utilities */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.gap-2 {
    gap: 8px;
}

.gap-4 {
    gap: 16px;
}

.hidden {
    display: none !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: absolute;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .sidebar.open {
        transform: translateX(0);
    }
}
`,mc=()=>{const i=document.createElement("style");i.id="critical-css",i.textContent=uc,document.head.insertBefore(i,document.head.firstChild),console.log("‚úÖ Critical CSS inlined")},fc=i=>new Promise((n,r)=>{const p=document.createElement("link");p.rel="stylesheet",p.href=i,p.onload=()=>{console.log(`‚úÖ Lazy loaded CSS: ${i}`),n()},p.onerror=r,document.head.appendChild(p)}),pc=()=>{const i=[],n=()=>{i.forEach(r=>{fc(r)})};"requestIdleCallback"in window?requestIdleCallback(n):setTimeout(n,1)},gc=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ö° [Performance] Electron'da font preload atlandƒ±");return}console.log("‚ö° [Performance] Font preload atlandƒ± - system fonts kullanƒ±lƒ±yor")},hc=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ÑπÔ∏è Preload skipped: Electron detected");return}console.log("‚úÖ Key resources preloaded")},ts=()=>{const i=document.getElementById("critical-css");i&&setTimeout(()=>{i.remove(),console.log("üóëÔ∏è Critical CSS removed (full CSS loaded)")},1e3)},yc=()=>{mc(),hc(),gc(),pc(),document.readyState==="complete"?ts():window.addEventListener("load",ts)},Nn={serverSettings:()=>y(()=>import("./ServerSettingsModal-7QIDs-jH.js"),__vite__mapDeps([8,2,3,6,9,10,11,1,4,5,7])),userProfile:()=>y(()=>import("./UserProfileModal-z5LIpH_L.js"),__vite__mapDeps([12,2,3,6,1,4,5,7])),imageModal:()=>y(()=>import("./ImageModal-C99nj2Rh.js"),__vite__mapDeps([13,2,3])),gifPicker:()=>y(()=>import("./GifPicker-BFh2Z4QW.js"),__vite__mapDeps([14,2,3])),stickerPicker:()=>y(()=>import("./StickerPicker-DZkr96jN.js"),__vite__mapDeps([15,2,3])),soundboard:()=>y(()=>import("./SoundboardModal--hcW7TI2.js"),__vite__mapDeps([16,2,3,6])),watchParty:()=>y(()=>import("./WatchPartyEnhanced-Bs6Fv2kW.js"),__vite__mapDeps([17,2,3,6])),cinema:()=>y(()=>import("./CinemaModal-CNCTR4Ij.js"),__vite__mapDeps([18,1,2,3,6])),whiteboard:()=>y(()=>import("./WhiteboardModal-DDRBrJKs.js"),__vite__mapDeps([19,2,3,6])),poll:()=>y(()=>import("./PollCreateModal-BLgQdCYy.js"),__vite__mapDeps([20,2,3,6])),codeSnippet:()=>y(()=>import("./CodeSnippetModal-BgyE0mGP.js"),__vite__mapDeps([21,2,3,6])),messageTemplate:()=>y(()=>import("./MessageTemplateModal-SDn1-KoA.js"),__vite__mapDeps([22,2,3,6]))},Ss=()=>{const i=[Nn.userProfile,Nn.imageModal];setTimeout(()=>{i.forEach(n=>n())},3e3)},Nr=()=>{"requestIdleCallback"in window&&requestIdleCallback(()=>{Nn.gifPicker(),Nn.stickerPicker()})},Fr={default:{name:"Pawscord Dark",colors:{"--background-primary":"#313338","--background-secondary":"#2b2d31","--background-tertiary":"#1e1f22","--background-accent":"#404249","--text-primary":"#dbdee1","--text-secondary":"#949ba4","--text-muted":"#787f89","--text-link":"#00a8fc","--button-primary":"#5865f2","--button-secondary":"#4e5058","--border-primary":"#1f2023"}},midnight:{name:"Midnight AMOLED",colors:{"--background-primary":"#000000","--background-secondary":"#0a0a0a","--background-tertiary":"#111111","--background-accent":"#222222","--text-primary":"#ffffff","--text-secondary":"#b0b0b0","--text-muted":"#666666","--text-link":"#3ea6ff","--button-primary":"#3ea6ff","--button-secondary":"#333333","--border-primary":"#333333"}},dracula:{name:"Dracula",colors:{"--background-primary":"#282a36","--background-secondary":"#44475a","--background-tertiary":"#6272a4","--background-accent":"#44475a","--text-primary":"#f8f8f2","--text-secondary":"#bfbfbf","--text-muted":"#6272a4","--text-link":"#8be9fd","--button-primary":"#bd93f9","--button-secondary":"#44475a","--border-primary":"#44475a"}},ocean:{name:"Deep Ocean",colors:{"--background-primary":"#0f172a","--background-secondary":"#1e293b","--background-tertiary":"#334155","--background-accent":"#334155","--text-primary":"#e2e8f0","--text-secondary":"#94a3b8","--text-muted":"#64748b","--text-link":"#38bdf8","--button-primary":"#0ea5e9","--button-secondary":"#334155","--border-primary":"#1e293b"}},forest:{name:"Enchanted Forest",colors:{"--background-primary":"#1a2f1a","--background-secondary":"#243b24","--background-tertiary":"#2f4b2f","--background-accent":"#3a5a3a","--text-primary":"#e0ffe0","--text-secondary":"#a0cca0","--text-muted":"#608060","--text-link":"#4caf50","--button-primary":"#4caf50","--button-secondary":"#2f4b2f","--border-primary":"#2f4b2f"}},matrix:{name:"The Matrix",colors:{"--background-primary":"#0d0d0d","--background-secondary":"#121212","--background-tertiary":"#1a1a1a","--background-accent":"#003b00","--text-primary":"#00ff41","--text-secondary":"#008f11","--text-muted":"#003b00","--text-link":"#00ff41","--button-primary":"#008f11","--button-secondary":"#003b00","--border-primary":"#003b00"}},sunset:{name:"Sunset Vibes",colors:{"--background-primary":"#2d1b2e","--background-secondary":"#442740","--background-tertiary":"#5a3450","--background-accent":"#734361","--text-primary":"#ffccaa","--text-secondary":"#ff9e7d","--text-muted":"#b05963","--text-link":"#ffbd69","--button-primary":"#ff6b6b","--button-secondary":"#5a3450","--border-primary":"#5a3450"}}},Sc=i=>{const n=Fr[i]||Fr.default,r=document.documentElement;Object.entries(n.colors).forEach(([p,d])=>{r.style.setProperty(p,d)}),localStorage.setItem("pawscord_theme",i)},wc=()=>{const i=localStorage.getItem("pawscord_theme");return i&&Fr[i]?(Sc(i),i):"default"},xe=Kl((i,n)=>({messages:[],encryptionKeys:{},activeChat:{type:"welcome",id:"welcome",targetUser:null},unreadCounts:{},typingUsers:[],onlineUsers:[],voiceUsers:{},currentPermissions:{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1},setActiveChat:(r,p,d=null)=>{console.log("üîÑ [Store] setActiveChat called:",{type:r,id:p,targetUser:d}),console.log("üîÑ [Store] Current messages count:",n().messages.length),i({activeChat:{type:r,id:p,targetUser:d}});const w=r==="room"?`room-${p}`:`dm-${p}`;i(x=>{const R={...x.unreadCounts};return delete R[w],{unreadCounts:R}})},addMessage:r=>i(p=>!r||typeof r!="object"||!r.id?(console.warn("‚ö†Ô∏è [Store] Invalid message rejected:",r),p):r.temp_id&&p.messages.some(w=>w.temp_id===r.temp_id)?{messages:p.messages.map(w=>w.temp_id===r.temp_id?r:w)}:p.messages.some(d=>d.id===r.id)?p:{messages:[...p.messages,r]}),updateMessage:(r,p)=>i(d=>({messages:d.messages.map(w=>w.id===r?{...w,...p}:w)})),setMessages:r=>i(p=>{const d=typeof r=="function"?r(p.messages):r;return{messages:Array.isArray(d)?d.filter(x=>x&&typeof x=="object"&&x.id):[]}}),prependMessages:r=>i(p=>({messages:[...r,...p.messages]})),incrementUnread:r=>i(p=>({unreadCounts:{...p.unreadCounts,[r]:(p.unreadCounts[r]||0)+1}})),setOnlineUsers:r=>i({onlineUsers:r}),setTypingUser:(r,p)=>i(d=>p?{typingUsers:d.typingUsers.includes(r)?d.typingUsers:[...d.typingUsers,r]}:{typingUsers:d.typingUsers.filter(w=>w!==r)}),setVoiceUsers:r=>i({voiceUsers:r}),setEncryptionKey:(r,p)=>i(d=>({encryptionKeys:{...d.encryptionKeys,[r]:p}})),setPermissions:r=>i({currentPermissions:r||{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1}})})),Fn="ENC::",bc=(i,n)=>{if(!i||!n)return i;try{const r=Ur.AES.encrypt(i,n).toString();return Fn+r}catch(r){return console.error("≈ûifreleme hatasƒ±:",r),i}},yf=(i,n)=>{if(!i||!i.startsWith(Fn)||!n)return i;try{const r=i.replace(Fn,""),d=Ur.AES.decrypt(r,n).toString(Ur.enc.Utf8);return d||"üîí ≈ûifreli Mesaj (Anahtar Yanlƒ±≈ü)"}catch(r){return console.error("≈ûifre √ß√∂zme hatasƒ±:",r),"üîí √á√∂z√ºlemedi"}},Sf=i=>i&&typeof i=="string"&&i.startsWith(Fn),Xe={mobile:768,tablet:1024,desktop:1920,ultrawide:2560},Ec=()=>{const[i,n]=o.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080});o.useEffect(()=>{if(typeof window>"u")return;let d;const w=()=>{clearTimeout(d),d=setTimeout(()=>{n({width:window.innerWidth,height:window.innerHeight})},150)};return w(),window.addEventListener("resize",w),window.addEventListener("orientationchange",w),()=>{clearTimeout(d),window.removeEventListener("resize",w),window.removeEventListener("orientationchange",w)}},[]);const{width:r,height:p}=i;return{isMobile:r<=Xe.mobile,isTablet:r>Xe.mobile&&r<=Xe.tablet,isDesktop:r>Xe.tablet&&r<=Xe.desktop,isUltrawide:r>Xe.desktop,width:r,height:p,orientation:p>r?"portrait":"landscape",isSmallScreen:r<=Xe.mobile,isMediumScreen:r>Xe.mobile&&r<=Xe.tablet,isLargeScreen:r>Xe.tablet,isTouchDevice:typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0),breakpoints:Xe}},vc=(i,n,r)=>o.useMemo(()=>{if(!i||!Array.isArray(i))return[];let d=i;if(n&&typeof n=="string"&&n.trim()){const w=n.toLowerCase();d=d.filter(x=>x.content?.toLowerCase().includes(w)||x.user?.username?.toLowerCase().includes(w))}return d.sort((w,x)=>{const R=new Date(w.created_at||w.timestamp),C=new Date(x.created_at||x.timestamp);return R-C})},[i,n]),_c=i=>o.useMemo(()=>!i||!Array.isArray(i)?[]:i.filter(n=>n.is_online||n.online),[i]),kc=typeof window<"u"&&typeof window.require=="function",xc=typeof window<"u"&&window.Capacitor?.isNativePlatform?.(),Cc=!0,Tc=typeof window<"u"&&window.location?.hostname?.includes("pawscord.com"),os=8888,Yr=()=>{if(xc||kc&&Cc||Tc)return"https://api.pawscord.com";if(typeof window<"u"){const i=window.location?.hostname;return i==="localhost"||i==="127.0.0.1"?`http://${i}:${os}`:`${window.location.protocol}//${i}:${os}`}return"https://api.pawscord.com"},Rc=()=>`${Yr()}/api`,Ac=()=>Yr().startsWith("https")?"wss":"ws",Pc=()=>Yr().replace(/^https?:\/\//,""),Ic={API_BASE_URL:Rc(),WS_PROTOCOL:Ac(),API_HOSTNAME:Pc()},Lc=Ic.API_BASE_URL,Oc=()=>{let i=sessionStorage.getItem("analytics_session_id");return i||(i=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("analytics_session_id",i)),i},Dc=()=>{const i=ms();o.useEffect(()=>{(async()=>{try{const r=Oc();await fetch(`${Lc}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:i.pathname,session_id:r,referrer:document.referrer,timestamp:new Date().toISOString()})}),console.log("üìä Page tracked:",i.pathname)}catch(r){console.error("Analytics tracking error:",r)}})()},[i.pathname])},$c=(i,n)=>{const r=o.useRef(null);return o.useCallback((...p)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{i(...p)},n)},[i,n])},Mc=(i,n)=>{const r=o.useRef(Date.now());return o.useCallback((...p)=>{const d=Date.now();d-r.current>=n&&(i(...p),r.current=d)},[i,n])},wf=i=>{const n=o.useRef(0),r=o.useRef(0);o.useEffect(()=>{const p=performance.now();return n.current+=1,()=>{const w=performance.now()-p;r.current+=w,n.current%10===0&&console.log(`üéØ ${i} Performance Stats:`,`
  Total Renders: ${n.current}`,`
  Average Time: ${(r.current/n.current).toFixed(2)}ms`,`
  Last Render: ${w.toFixed(2)}ms`)}})},zc="192.168.68.53",Vc="8888",qr=typeof window>"u"?!1:!!(typeof window.require=="function"||typeof process<"u"&&process.versions&&process.versions.electron||navigator.userAgent.toLowerCase().includes("electron")||window.location.protocol==="file:"),ws=wo.isNativePlatform(),qt=ws||qr||!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("192.168.")?"https://api.pawscord.com":`http://${zc}:${Vc}`,Uc=`${qt}/api`;ws||qr||window.location.hostname.includes("localhost");const Wn=qt.startsWith("https")?"wss":"ws",jn=qt.replace(/^https?:\/\//,""),bs=o.createContext(null),Bc=qt,Nc=({children:i})=>{const n=localStorage.getItem("access_token"),r=(()=>{if(!n)return!1;try{return ho(n).exp>Date.now()/1e3-300}catch{return!1}})(),[p,d]=o.useState(r?{username:localStorage.getItem("chat_username")||""}:null),[w,x]=o.useState(n),[R,C]=o.useState(r),[O,K]=o.useState(!1),$=o.useRef(null),V=o.useCallback(async()=>{const U=localStorage.getItem("refresh_token");if(!U)return console.warn("‚ö†Ô∏è [Auth] No refresh token available"),B(),!1;try{console.log("üîÑ [Auth] Refreshing access token...");const j=await fetch(`${Bc}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:U})});if(j.ok){const q=await j.json();localStorage.setItem("access_token",q.access),q.refresh&&localStorage.setItem("refresh_token",q.refresh);const ue=ho(q.access);return x(q.access),d({username:ue.username}),C(!0),console.log("‚úÖ [Auth] Token refreshed successfully"),ee(q.access),!0}else return console.error("‚ùå [Auth] Token refresh failed:",j.status),B(),!1}catch(j){return console.error("‚ùå [Auth] Token refresh error:",j),B(),!1}},[]),ee=o.useCallback(U=>{$.current&&clearTimeout($.current);try{const j=ho(U),q=Date.now()/1e3,ue=j.exp-q,ie=Math.max((ue-300)*1e3,6e4);console.log(`‚è∞ [Auth] Token will refresh in ${Math.round(ie/1e3/60)} minutes`),$.current=setTimeout(()=>{V()},ie)}catch(j){console.error("‚ùå [Auth] Failed to schedule token refresh:",j)}},[V]);o.useEffect(()=>{const U=localStorage.getItem("access_token");if(U)try{const j=ho(U),q=Date.now()/1e3,ue=300,ie=j.exp>q-ue;console.log("üîê [Auth] Token check:",{exp:j.exp,currentTime:q,gracePeriod:ue,isValid:ie,username:j.username}),ie?(x(U),d({username:j.username}),C(!0),localStorage.setItem("chat_username",j.username),ee(U),console.log("‚úÖ [Auth] User authenticated:",j.username)):(console.warn("‚ö†Ô∏è [Auth] Token expired, attempting refresh..."),V())}catch(j){console.error("‚ùå [Auth] Invalid token:",j),B()}else console.log("‚ÑπÔ∏è [Auth] No token found");return()=>{$.current&&clearTimeout($.current)}},[ee,V]);const G=(U,j)=>{console.log("üîì [Auth] Login called");try{localStorage.setItem("access_token",U),localStorage.setItem("refresh_token",j);const q=ho(U);localStorage.setItem("chat_username",q.username),console.log("‚úÖ [Auth] Login successful, user:",q.username),x(U),d({username:q.username}),C(!0),ee(U)}catch(q){console.error("‚ùå [Auth] Login failed:",q),B()}},B=o.useCallback(()=>{$.current&&clearTimeout($.current),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("chat_username"),x(null),d(null),C(!1)},[]);return e.createElement(bs.Provider,{value:{user:p,token:w,isAuthenticated:R,login:G,logout:B,isLoading:O,refreshAccessToken:V}},i)},Go=()=>o.useContext(bs),Re={log:(...i)=>{},warn:(...i)=>{},error:(...i)=>{console.error(...i)},debug:(...i)=>{},voice:(...i)=>{},webrtc:(...i)=>{},signal:(...i)=>{},audio:(...i)=>{}};class Fc{constructor(){this.audioContext=null,this.masterGain=null,this.spatialNodes={},this.listenerPosition={x:0,y:0,z:0},this.initialized=!1}async initialize(){if(!this.initialized)try{const n=window.AudioContext||window.webkitAudioContext;this.audioContext=new n,this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.audioContext.destination),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.setupListener(),this.initialized=!0,console.log("üéß Spatial Audio Engine initialized")}catch(n){throw console.error("Failed to initialize spatial audio:",n),n}}setupListener(){const n=this.audioContext.listener;n.positionX?(n.positionX.value=this.listenerPosition.x,n.positionY.value=this.listenerPosition.y,n.positionZ.value=this.listenerPosition.z):n.setPosition(this.listenerPosition.x,this.listenerPosition.y,this.listenerPosition.z),n.forwardX?(n.forwardX.value=0,n.forwardY.value=0,n.forwardZ.value=-1,n.upX.value=0,n.upY.value=1,n.upZ.value=0):n.setOrientation(0,0,-1,0,1,0)}addUser(n,r,p={x:0,y:0,z:-1}){if(!this.initialized)return console.warn("Spatial audio not initialized"),null;this.spatialNodes[n]&&this.removeUser(n);try{const d=this.audioContext.createMediaStreamSource(r),w=this.audioContext.createPanner();w.panningModel="HRTF",w.distanceModel="inverse",w.refDistance=1,w.maxDistance=1e4,w.rolloffFactor=1.5,w.coneInnerAngle=360,w.coneOuterAngle=360,w.coneOuterGain=0,this.setUserPosition(n,p,w);const x=this.audioContext.createGain();x.gain.value=1;const R=this.audioContext.createAnalyser();return R.fftSize=256,R.smoothingTimeConstant=.8,d.connect(R),R.connect(w),w.connect(x),x.connect(this.masterGain),this.spatialNodes[n]={source:d,panner:w,gain:x,analyser:R,position:p,audioElement:null},console.log(`üéß Added spatial audio for ${n} at position`,p),this.spatialNodes[n]}catch(d){return console.error(`Failed to add spatial audio for ${n}:`,d),null}}setUserPosition(n,r,p=null){const d=p||this.spatialNodes[n]?.panner;d&&(d.positionX?(d.positionX.setValueAtTime(r.x,this.audioContext.currentTime),d.positionY.setValueAtTime(r.y,this.audioContext.currentTime),d.positionZ.setValueAtTime(r.z,this.audioContext.currentTime)):d.setPosition(r.x,r.y,r.z),this.spatialNodes[n]&&(this.spatialNodes[n].position=r))}setUserVolume(n,r){const p=this.spatialNodes[n];if(!p)return;const d=Math.max(0,Math.min(1,r));p.gain.gain.setValueAtTime(d,this.audioContext.currentTime)}getVoiceActivity(n){const r=this.spatialNodes[n];if(!r)return 0;const p=r.analyser,d=new Uint8Array(p.frequencyBinCount);p.getByteFrequencyData(d);const x=d.reduce((R,C)=>R+C,0)/d.length;return Math.round(x/255*100)}removeUser(n){const r=this.spatialNodes[n];if(r)try{r.source.disconnect(),r.analyser.disconnect(),r.panner.disconnect(),r.gain.disconnect(),delete this.spatialNodes[n],console.log(`üéß Removed spatial audio for ${n}`)}catch(p){console.error(`Error removing spatial audio for ${n}:`,p)}}updateListenerPosition(n){this.listenerPosition=n,this.setupListener()}setMasterVolume(n){if(!this.masterGain)return;const r=Math.max(0,Math.min(1,n));this.masterGain.gain.setValueAtTime(r,this.audioContext.currentTime)}setUserMuted(n,r){this.setUserVolume(n,r?0:1)}destroy(){Object.keys(this.spatialNodes).forEach(n=>{this.removeUser(n)}),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.initialized=!1,console.log("üéß Spatial Audio Engine destroyed")}getUserDistance(n){const r=this.spatialNodes[n];if(!r)return 1/0;const p=r.position,d=this.listenerPosition;return Math.sqrt(Math.pow(p.x-d.x,2)+Math.pow(p.y-d.y,2)+Math.pow(p.z-d.z,2))}arrangeUsersInCircle(n,r=3){const p={},d=2*Math.PI/n.length;return n.forEach((w,x)=>{const R=d*x,C={x:Math.cos(R)*r,y:0,z:Math.sin(R)*r};p[w]=C,this.setUserPosition(w,C)}),p}}const Fo=new Fc,Es=o.createContext(null),Yt=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.services.mozilla.com:3478"},{urls:"stun:stun.stunprotocol.org:3478"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}];let Wr={iceServers:Yt,iceCandidatePoolSize:10,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};const Mn=i=>{Wr={...Wr,iceServers:i}};console.log("[VoiceContext] üéØ isElectron:",qr,"API_URL:",qt,"WS_PROTOCOL:",Wn,"API_HOST:",jn);const Wc=({children:i})=>{const{user:n,token:r}=Go(),p=n?.username,[d,w]=o.useState(!1),[x,R]=o.useState(!1),[C,O]=o.useState(null),[K,$]=o.useState(!1),[V,ee]=o.useState(!1),[G,B]=o.useState(!1),[U,j]=o.useState(!1),[q,ue]=o.useState(!1),[ie,J]=o.useState(!1),[ne,de]=o.useState(0),[Y,me]=o.useState(null),[be,ze]=o.useState(50),[X,ye]=o.useState(null),[Ve,De]=o.useState(null),[St,He]=o.useState(null),[Ce,ct]=o.useState({}),[Ko,l]=o.useState([]),[Hn,Jt]=o.useState(null),[Kn,Yo]=o.useState({isActive:!1,url:"https://www.youtube.com/watch?v=jfKfPfyJRdk",playing:!1,time:0,lastSyncAction:null,timestamp:0}),[ce,Ae]=o.useState({gameType:"rps",moves:{},result:null,players:[],currentTurn:null}),[qo,Jo]=o.useState({}),[Yn,qn]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_noise_gate"))||-50}catch{return-50}}),[Jn,Zn]=o.useState(()=>{try{return localStorage.getItem("pawscord_noise_gate_enabled")!=="false"}catch{return!0}}),[Zo,Xo]=o.useState({local:new Uint8Array(128),remote:{}}),[wt,Xn]=o.useState(()=>{try{return localStorage.getItem("pawscord_visualizer")==="true"}catch{return!1}}),[Zt,Qn]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("pawscord_user_volumes"))||{}}catch{return{}}}),[Qo,Zr]=o.useState(new Set),[dt,en]=o.useState(()=>{try{return localStorage.getItem("pawscord_spatial_audio")==="true"}catch{return!1}}),[Ot,er]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_vad_sensitivity"))||45}catch{return 45}}),[Dt,tr]=o.useState(()=>{try{const s=localStorage.getItem("pawscord_noise_suppression");return s===null?!0:s==="true"}catch{return!0}}),[tn,or]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"medium"}catch{return"medium"}}),[fe,I]=o.useState(()=>{try{return localStorage.getItem("pawscord_screen_quality")||"1080p"}catch{return"1080p"}}),[Xt,bo]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_screen_fps"))||30}catch{return 30}}),[Eo,nr]=o.useState(()=>{try{return localStorage.getItem("pawscord_system_audio")!=="false"}catch{return!1}}),[We,Qt]=o.useState(()=>{try{return localStorage.getItem("pawscord_ptt_mode")==="true"}catch{return!1}}),[Q,on]=o.useState(()=>{try{return localStorage.getItem("pawscord_ptt_key")||"Space"}catch{return"Space"}}),[nn,$t]=o.useState(!1),[Mt,vo]=o.useState(Yt),[rn,Ue]=o.useState(!1),[an,ut]=o.useState(0),[_o,bt]=o.useState(1e3),et=o.useRef(null),eo=o.useRef(null);o.useRef(null);const ko=o.useCallback(async()=>{if(!r){console.log("üßä [RTC] No token, using STUN only"),vo(Yt),Mn(Yt);return}try{const s=await fetch(`${qt}/api/voice/turn-credentials/`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok)throw s.status===401||s.status===403?console.warn("üßä [RTC] Auth failed, using STUN only"):console.warn(`üßä [RTC] TURN fetch failed (${s.status}), using STUN only`),new Error(`TURN fetch failed ${s.status}`);const m=await s.json(),f=[...Yt,...m?.iceServers||[]];vo(f),Mn(f),console.log("üßä [RTC] ICE servers updated with TURN credentials:",f.length,"servers")}catch(s){console.warn("üßä [RTC] Using STUN-only mode:",s.message),vo(Yt),Mn(Yt)}},[r]);o.useEffect(()=>{ko()},[ko]);const N=o.useRef(null),re=o.useRef({}),mt=o.useRef(null),Ee=o.useRef(null),z=o.useRef(null),ve=o.useRef(null),oe=o.useRef(null),ft=o.useRef([]),tt=o.useRef(null),Et=o.useRef(null),Be=o.useRef(!1),ot=o.useRef(!1),Ke=o.useRef(null),zt=o.useRef(null),xo=o.useRef(null),_e=o.useRef(null);o.useEffect(()=>{localStorage.setItem("pawscord_user_volumes",JSON.stringify(Zt))},[Zt]);const Co=o.useCallback((s,m)=>{Qn(f=>({...f,[s]:Math.max(0,Math.min(100,m))}))},[]);o.useEffect(()=>{z.current=X},[X]),o.useEffect(()=>{ve.current=Ve},[Ve]),o.useEffect(()=>{oe.current=St},[St]),o.useEffect(()=>{if(!X||!d||K){ue(!1);return}if(!Ee.current){const H=window.AudioContext||window.webkitAudioContext;Ee.current=new H,console.log("üéµ [Performance] Global AudioContext created (reused for all users)")}const s=Ee.current,m=s.createAnalyser();m.fftSize=2048,m.smoothingTimeConstant=.85;const f=m.frequencyBinCount,E=new Uint8Array(f),k=s.createMediaStreamSource(X);k.connect(m);let b=null;const h=Ot,g=150;let T=null;const D=()=>{m.getByteFrequencyData(E);const H=E.slice(10,100);H.reduce((pe,Ne)=>pe+Ne,0)/H.length>h&&(ue(!0),b&&clearTimeout(b),b=setTimeout(()=>ue(!1),g)),d&&!K&&(T=requestAnimationFrame(D))};return D(),()=>{b&&clearTimeout(b),T&&cancelAnimationFrame(T),k.disconnect()}},[X,d,K,Ot]);const Ye=o.useCallback(()=>{if(!mt.current){const s=window.AudioContext||window.webkitAudioContext;mt.current=new s}mt.current.state==="suspended"&&mt.current.resume()},[]),rr=o.useCallback(async()=>{const s=!dt;if(s)try{await Fo.initialize(),Object.keys(Ce).forEach((m,f)=>{const E=Ce[m],k=m.replace("_camera","").replace("_screen","");if(!m.includes("_camera")&&!m.includes("_screen")){const b=f/Object.keys(Ce).length*2*Math.PI,h={x:Math.cos(b)*3,y:0,z:Math.sin(b)*3};Fo.addUser(k,E,h),console.log(`üéß [Spatial] Added ${k} at angle ${(b*180/Math.PI).toFixed(0)}¬∞`)}}),console.log("üéß [Spatial Audio] ENABLED - 3D audio active!")}catch(m){console.error("Failed to enable spatial audio:",m),M.warning("Spatial Audio ba≈ülatƒ±lamadƒ±. Tarayƒ±cƒ±nƒ±z desteklemiyor olabilir.");return}else Fo.destroy(),console.log("üéß [Spatial Audio] DISABLED - Normal stereo audio");en(s),localStorage.setItem("pawscord_spatial_audio",s.toString())},[dt,Ce]),sn=o.useCallback(s=>{const m=Math.max(20,Math.min(80,s));er(m),localStorage.setItem("pawscord_vad_sensitivity",m.toString()),console.log(`üéöÔ∏è [VAD] Sensitivity updated: ${m}`)},[]),to=o.useCallback(async()=>{const s=!Dt;if(tr(s),localStorage.setItem("pawscord_noise_suppression",s.toString()),X){const m=X.getAudioTracks()[0];if(m&&m.applyConstraints)try{await m.applyConstraints({noiseSuppression:s,echoCancellation:!0,autoGainControl:!0}),console.log(`üéõÔ∏è [Noise Suppression] ${s?"ENABLED":"DISABLED"}`)}catch(f){console.warn("[Noise] Failed to apply, trying fallback getUserMedia:",f);try{const k=(await navigator.mediaDevices.getUserMedia({audio:{noiseSuppression:s,echoCancellation:!0,autoGainControl:!0,googHighpassFilter:!0,googNoiseSuppression:s,googNoiseSuppression2:s,googEchoCancellation:!0,googAutoGainControl:!0,googTypingNoiseDetection:!0,sampleRate:{ideal:48e3},latency:{ideal:.01},channelCount:{ideal:1}}})).getAudioTracks()[0],b=new MediaStream([k]);ye(b),z.current=b,console.log("[Noise] Enhanced fallback stream acquired")}catch(E){console.error("[Noise] Fallback failed:",E)}}}},[Dt,X]),ln=o.useCallback(s=>{const f=["low","medium","high","aggressive"].includes(s)?s:"high";or(f);try{const E=JSON.parse(localStorage.getItem("voice_settings")||"{}");E.audio={...E.audio,noiseSuppressionLevel:f},localStorage.setItem("voice_settings",JSON.stringify(E))}catch(E){console.error("[Noise Level] Storage error:",E)}console.log(`üéõÔ∏è [Noise Level] Updated to: ${f}`)},[]),ar=o.useCallback(s=>{nr(s),localStorage.setItem("pawscord_system_audio",s.toString()),console.log(`üîä [System Audio] ${s?"ENABLED":"DISABLED"}`)},[]),cn=o.useCallback(()=>{const s=!We;Qt(s),localStorage.setItem("pawscord_ptt_mode",s.toString()),s?(console.log("üéôÔ∏è [PTT] Mode enabled, VAD disabled"),z.current&&z.current.getAudioTracks().forEach(m=>{m.enabled=!1}),$(!0)):(console.log("üéôÔ∏è [PTT] Mode disabled, VAD enabled"),z.current&&z.current.getAudioTracks().forEach(m=>{m.enabled=!0}),$(!1))},[We]),sr=o.useCallback(s=>{on(s),localStorage.setItem("pawscord_ptt_key",s),console.log(`‚å®Ô∏è [PTT] Key updated to: ${s}`)},[]);o.useEffect(()=>{if(!We||!d)return;const s=f=>{const E=f.target;E.tagName==="INPUT"||E.tagName==="TEXTAREA"||f.code===Q&&!f.repeat&&($t(!0),z.current&&z.current.getAudioTracks().forEach(k=>{k.enabled=!0}),console.log("üéôÔ∏è [PTT] Key pressed, mic ON"))},m=f=>{f.code===Q&&($t(!1),z.current&&z.current.getAudioTracks().forEach(E=>{E.enabled=!1}),console.log("üéôÔ∏è [PTT] Key released, mic OFF"))};return window.addEventListener("keydown",s),window.addEventListener("keyup",m),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",m)}},[We,d,Q]);const qe=o.useCallback(s=>{I(s),localStorage.setItem("pawscord_screen_quality",s),console.log(`üì∫ [Screen Quality] Updated to: ${s}`)},[]),ir=o.useCallback(s=>{const m=parseInt(s);bo(m),localStorage.setItem("pawscord_screen_fps",m.toString()),console.log(`üé¨ [Screen FPS] Updated to: ${m}`)},[]);o.useEffect(()=>{dt&&Object.keys(Ce).forEach((s,m)=>{const f=Ce[s],E=s.replace("_camera","").replace("_screen","");if(!s.includes("_camera")&&!s.includes("_screen")&&!Fo.spatialNodes[E]){const k=m/Object.keys(Ce).length*2*Math.PI,b={x:Math.cos(k)*3,y:0,z:Math.sin(k)*3};Fo.addUser(E,f,b),console.log(`üéß [Spatial] Auto-added ${E}`)}})},[Ce,dt]),o.useCallback(async s=>{try{const m=s.getAudioTracks();if(m.length===0)return s;const f=m[0],E={echoCancellation:{exact:!0},noiseSuppression:{exact:!0},autoGainControl:{exact:!0},googEchoCancellation:{exact:!0},googAutoGainControl:{exact:!0},googNoiseSuppression:{exact:!0},googHighpassFilter:{exact:!0},googTypingNoiseDetection:{exact:!0},googAudioMirroring:!1,googAutoGainControl2:{exact:!0},echoCancellationType:"system"};if(f.applyConstraints)try{await f.applyConstraints(E),Re.audio("üéØ ADVANCED noise suppression enabled")}catch{await f.applyConstraints({echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),Re.audio("‚úÖ Basic noise suppression enabled (fallback)")}return s}catch{return s}},[]);const To=o.useCallback(s=>{try{const f=JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"high",E={low:{gateThreshold:-70,compressorThreshold:-15,compressorRatio:2,highPassFreq:50,lowPassFreq:14e3,gateRelease:.3,speechThreshold:20},medium:{gateThreshold:-60,compressorThreshold:-20,compressorRatio:3,highPassFreq:80,lowPassFreq:12e3,gateRelease:.25,speechThreshold:25},high:{gateThreshold:-50,compressorThreshold:-25,compressorRatio:4,highPassFreq:100,lowPassFreq:1e4,gateRelease:.2,speechThreshold:30},aggressive:{gateThreshold:-45,compressorThreshold:-30,compressorRatio:6,highPassFreq:120,lowPassFreq:8e3,gateRelease:.15,speechThreshold:35}},k=E[f]||E.high;if(console.log(`üîä [Audio] Noise suppression level: ${f}`,k),!Ee.current){const jt=window.AudioContext||window.webkitAudioContext;Ee.current=new jt({sampleRate:48e3,latencyHint:"interactive"}),console.log("üéµ [Performance] Global AudioContext created (48kHz, interactive mode)")}const b=Ee.current;b.state==="suspended"&&b.resume().then(()=>{console.log("üéµ [Audio] AudioContext resumed from suspended state")});const h=b.createMediaStreamSource(s),g=b.createGain();let T=!0;const D=k.gateThreshold,H=.005,le=k.gateRelease,pe=b.createDynamicsCompressor();pe.threshold.value=k.compressorThreshold,pe.knee.value=30,pe.ratio.value=Math.min(k.compressorRatio,4),pe.attack.value=.003,pe.release.value=.15;const Ne=b.createBiquadFilter();Ne.type="highpass",Ne.frequency.value=k.highPassFreq,Ne.Q.value=.707;const kt=b.createBiquadFilter();kt.type="lowpass",kt.frequency.value=k.lowPassFreq,kt.Q.value=.707;const Je=b.createBiquadFilter();Je.type="notch",Je.frequency.value=50,Je.Q.value=10;const Wt=b.createBiquadFilter();Wt.type="peaking",Wt.frequency.value=6e3,Wt.Q.value=1,Wt.gain.value=-3;const xt=b.createAnalyser();xt.fftSize=2048,xt.smoothingTimeConstant=.85;const Ct=new Uint8Array(xt.frequencyBinCount);let pn=new Float32Array(xt.frequencyBinCount),gn=!0,Lo=0;const Qr=()=>{if(xt.getByteFrequencyData(Ct),Ct.reduce((st,Do)=>st+Do)/Ct.length<20){if(Lo++,Lo>10)for(let st=0;st<Ct.length;st++)pn[st]=Math.max(pn[st],Ct[st])}else Lo=0;gn&&Lo>50&&(gn=!1,console.log("üéØ [Audio] Noise profile learned"))},gr=k.speechThreshold||25,hr=setInterval(()=>{xt.getByteFrequencyData(Ct);const jt=Ct.slice(8,120),Do=jt.reduce((yr,Sr)=>yr+Sr)/jt.length-(pn[50]||0),hn=b.currentTime;Do>gr?T||(g.gain.setTargetAtTime(1,hn,H),T=!0):T&&(g.gain.setTargetAtTime(0,hn,le),T=!1),(gn||Math.random()<.01)&&Qr()},30);h.connect(Ne),Ne.connect(Je),Je.connect(kt),kt.connect(Wt),Wt.connect(pe),pe.connect(g),g.connect(xt);const Oo=b.createMediaStreamDestination();return g.connect(Oo),Oo.stream.addEventListener("inactive",()=>{clearInterval(hr),console.log("üéöÔ∏è [Audio] Filter chain cleaned up")}),console.log("üéöÔ∏è [Audio] Professional filters applied: Notch(50Hz) + De-Esser + Compressor + Noise Gate"),Oo.stream}catch(m){return console.error("‚ùå [Audio] Could not apply professional filters:",m),s}},[]),Pe=o.useCallback(s=>{N.current?.readyState===WebSocket.OPEN?(Re.signal(`Sending ${s.type} to ${s.receiver_username||"BROADCAST"}`),N.current.send(JSON.stringify({...s,sender_username:p}))):Re.warn("[Signal] WS not ready, cannot send:",s.type)},[p]),Vt=o.useCallback((s,m)=>{try{const E=s.getSenders().find(g=>g.track?.kind==="video");if(!E){console.log("[Bandwidth] No video sender found, skipping adjustment");return}const k=E.getParameters();(!k.encodings||k.encodings.length===0)&&(k.encodings=[{}]);const b={low:{maxBitrate:3e5,maxFramerate:15},medium:{maxBitrate:8e5,maxFramerate:24},high:{maxBitrate:25e5,maxFramerate:30}},h=b[m]||b.medium;k.encodings[0].maxBitrate=h.maxBitrate,k.encodings[0].maxFramerate=h.maxFramerate,E.setParameters(k).then(()=>{console.log(`‚úÖ [Bandwidth] Video quality set to ${m.toUpperCase()} (${h.maxBitrate/1e3}kbps, ${h.maxFramerate}fps)`)}).catch(g=>{console.warn("[Bandwidth] Failed to set parameters:",g)})}catch(f){console.warn("[Bandwidth] Error adjusting bandwidth:",f)}},[]),Ut=o.useCallback((s,m)=>{const{track:f}=m;Re.webrtc(`Track Received from ${s}:`,f.kind,f.id,"label:",f.label,"hint:",f.contentHint);const E=(f.label||"").toLowerCase(),k=E.includes("screen")||E.includes("window")||E.includes("monitor")||E.includes("display")||E.includes("tab")||f.contentHint==="detail",b=f.kind==="video"&&k?`${s}_screen`:f.kind==="video"?`${s}_camera`:s;if(console.log(`üìπ [WebRTC] Detected ${k?"SCREEN":"CAMERA"} track from ${s}, key: ${b}`),ct(h=>{const g=h[b];if(g){if(!g.getTracks().some(D=>D.id===f.id)){g.addTrack(f);const D=new MediaStream(g.getTracks());return console.log(`[WebRTC] Added track to existing stream: ${b}`),{...h,[b]:D}}return h}const T=new MediaStream([f]);return console.log(`[WebRTC] Created new stream: ${b}`),{...h,[b]:T}}),f.kind==="audio"){console.log(`[WebRTC] Audio track received from ${s}`),Ye();try{const h=document.createElement("audio");h.id=`remote-audio-${s}`,h.srcObject=new MediaStream([f]),h.autoplay=!0,h.playsInline=!0;const g=document.getElementById(`remote-audio-${s}`);g&&g.remove(),h.style.display="none",document.body.appendChild(h),h.play().then(()=>{console.log(`üîä [Audio] Playing remote audio from ${s}`)}).catch(T=>{console.warn(`[Audio] Autoplay blocked for ${s}, waiting for interaction:`,T.message);const D=()=>{h.play().catch(()=>{}),document.removeEventListener("click",D)};document.addEventListener("click",D,{once:!0})}),console.log(`‚úÖ [Audio] Created audio element for ${s}`)}catch(h){console.error(`[Audio] Failed to create audio element for ${s}:`,h)}}else f.kind==="video"&&console.log(`[WebRTC] Video track (${k?"screen":"camera"}) received from ${s}`)},[Ye]),Ie=o.useRef({}),Bt=o.useCallback((s,m=!1)=>{if(re.current[s])return re.current[s];const f=new RTCPeerConnection(Wr);re.current[s]=f;try{f.getTransceivers().forEach(k=>{if(k.sender&&k.sender.track?.kind==="audio"){const b=RTCRtpSender.getCapabilities("audio")?.codecs||[],h=b.filter(D=>D.mimeType.toLowerCase().includes("opus")),g=b.filter(D=>!D.mimeType.toLowerCase().includes("opus")),T=[...h,...g];k.setCodecPreferences&&T.length>0&&(k.setCodecPreferences(T),console.log("üéµ [Codec] Opus prioritized for audio"))}})}catch(E){console.warn("[Codec] setCodecPreferences not supported:",E.message)}return typeof window<"u"&&(window.__pawscord_peer_connections__=re.current),f.onicecandidate=E=>{E.candidate&&Pe({type:"candidate",candidate:E.candidate,receiver_username:s})},f.ontrack=E=>Ut(s,E),z.current&&z.current.getTracks().forEach(E=>{Re.webrtc(`Adding local audio track to PC for ${s}:`,E.kind),f.addTrack(E,z.current)}),f.oniceconnectionstatechange=()=>{console.log(`[WebRTC] ICE State (${s}):`,f.iceConnectionState),f.iceConnectionState==="failed"?(console.warn(`[WebRTC] ICE failed with ${s}, attempting restart...`),Ue(!0),ko().finally(()=>{f.restartIce(),setTimeout(()=>Ue(!1),1500)})):f.iceConnectionState==="disconnected"?(console.warn(`[WebRTC] ICE disconnected from ${s}, waiting for reconnection...`),Ue(!0),setTimeout(()=>{(f.iceConnectionState==="disconnected"||f.iceConnectionState==="failed")&&(console.error(`[WebRTC] ICE reconnection timeout for ${s}, cleaning up...`),ct(E=>{const k={...E};return delete k[s],k}),re.current[s]&&(re.current[s].close(),delete re.current[s])),Ue(!1)},15e3)):f.iceConnectionState==="closed"?(console.log(`[WebRTC] ICE closed for ${s}, cleaning up...`),ct(E=>{const k={...E};return delete k[s],k}),re.current[s]&&delete re.current[s],Ue(!1)):f.iceConnectionState==="connected"?(console.log(`‚úÖ [WebRTC] ICE connected with ${s}`),Ue(!1),setTimeout(async()=>{try{(await f.getStats()).forEach(k=>{if(k.type==="candidate-pair"&&k.state==="succeeded"){const b=k.currentRoundTripTime*1e3;console.log(`üìä [Bandwidth] ${s} RTT: ${b.toFixed(0)}ms`),b>500?(console.warn(`‚ö†Ô∏è [Bandwidth] High latency detected (${b.toFixed(0)}ms), reducing video quality to LOW`),Vt(f,"low")):b>300?(console.warn(`‚ö†Ô∏è [Bandwidth] Medium latency detected (${b.toFixed(0)}ms), reducing video quality to MEDIUM`),Vt(f,"medium")):(console.log(`‚úÖ [Bandwidth] Good connection (${b.toFixed(0)}ms), using HIGH quality`),Vt(f,"high"))}})}catch(E){console.warn("[Bandwidth] Failed to get stats:",E)}},2e3)):f.iceConnectionState==="checking"&&console.log(`üîç [WebRTC] ICE checking with ${s}`)},f},[Pe,Ut]),vt=o.useCallback(async s=>{if(s.type==="kicked"){console.warn("üî¥ [Voice] Kicked from channel:",s.reason,s.message),M.warning(`Sesli Kanaldan √áƒ±karƒ±ldƒ±nƒ±z

Neden: ${s.message}`,5e3),nt();return}if(s.type==="video_ended"){const h=s.from||s.username,g=s.streamType||"camera",T=`${h}_${g}`;console.log(`üìπ [Video] ${h} ended ${g} stream`),ct(D=>{const H={...D};return H[T]&&(H[T].getTracks().forEach(le=>le.stop()),delete H[T],console.log(`üìπ [Video] Cleaned up ${T} stream`)),H});return}if(s.type==="voice_reaction"){const h=s.from||s.username;console.log(`üí¨ [Reaction] ${h} sent: ${s.emoji}`),Jt({username:h,emoji:s.emoji,timestamp:Date.now()}),setTimeout(()=>{Jt(g=>g&&g.timestamp===Date.now()?null:g)},3e3);return}if(s.type==="game_signal"){const h=s.from||s.username;console.log(`üéÆ [Game] ${h}:`,s.action,s.move),Ae(g=>{const T={...g};if(s.action==="start")T.gameType=s.game_type,T.players=[h,s.target].filter(Boolean),T.moves={},T.result=null,T.currentTurn=h;else if(s.action==="move"){if(T.moves={...g.moves,[h]:s.move},s.game_type==="rps"&&Object.keys(T.moves).length===2){const[D,H]=Object.keys(T.moves),le=T.moves[D],pe=T.moves[H];le===pe?T.result={winner:null,type:"draw"}:{rock:"scissors",scissors:"paper",paper:"rock"}[le]===pe?T.result={winner:D,loser:H}:T.result={winner:H,loser:D}}}else s.action==="end"&&(T.result=s.result||{type:"cancelled"});return T});return}if(s.type==="cinema_sync"){const h=s.from||s.username;console.log(`üé¨ [Cinema] ${h}:`,s.action),Yo(g=>({...g,isActive:s.action!=="stop",url:s.url||g.url,playing:s.action==="play",time:s.time||g.time,lastSyncAction:s.action,timestamp:Date.now(),syncedBy:h}));return}if(s.type==="current_users"){console.log("[Voice] Received current users from backend:",s.users),l(h=>{const g=s.users||[],T=g.some(le=>le.username===p),D=h.find(le=>le.username===p);let H=[...g];return!T&&D?(console.log("[Voice] Backend list missing me, adding from local state"),H=[D,...g]):!T&&p&&(console.log("[Voice] Backend list missing me, adding with defaults"),H=[{username:p,isMuted:K,isCameraOn:G,isScreenSharing:U,isTalking:q},...g]),console.log("‚úÖ [Voice] Final connected users:",H.map(le=>le.username)),H});return}const m=s.from||s.sender_username||s.username,{type:f,sdp:E,candidate:k}=s;if(!m){console.error("[Signal] No sender username found in message:",s);return}if(m===p){console.log(`[Signal] Ignoring ${f} from self (${m})`);return}console.log(`[Signal] Received ${f} from ${m}`,s);let b=re.current[m];if(!b)if(f==="offer")b=Bt(m,!1);else if(f==="user_joined"){if(l(h=>h.find(g=>g.username===m)?h:[...h,{username:m,isMuted:!1,isCameraOn:!1,isScreenSharing:!1}]),b=Bt(m,!0),console.log(`[user_joined] Checking streams for ${m}:`,{hasAudio:!!z.current,hasCamera:!!ve.current,hasScreen:!!oe.current,cameraEnabled:G,screenEnabled:U}),z.current){const h=b.getSenders();z.current.getTracks().forEach(g=>{h.some(D=>D.track===g)||(Re.webrtc(`Adding audio track to new peer ${m}:`,g.kind),b.addTrack(g,z.current))}),console.log(`‚úÖ [user_joined] Audio track added to ${m}`)}if(ve.current){const h=b.getSenders();ve.current.getTracks().forEach(g=>{h.some(D=>D.track===g)||(Re.webrtc(`Adding camera track to new peer ${m}:`,g.kind),b.addTrack(g,ve.current))}),console.log(`‚úÖ [user_joined] Camera track added to ${m}`)}if(oe.current){const h=b.getSenders();oe.current.getTracks().forEach(g=>{h.some(D=>D.track===g)||(Re.webrtc(`Adding screen track to new peer ${m}:`,g.kind),b.addTrack(g,oe.current))}),console.log(`‚úÖ [user_joined] Screen track added to ${m}`)}try{const h=await b.createOffer();await b.setLocalDescription(h),Pe({type:"offer",sdp:b.localDescription,target:m}),Re.signal(`Sent offer to ${m}`),console.log(`‚úÖ [user_joined] Offer successfully sent to ${m}`)}catch(h){Re.error("Offer creation failed",h),console.error(`‚ùå [user_joined] Failed to create/send offer to ${m}:`,h)}return}else if(f==="user_left"){console.log(`[Signal] ${m} left the channel`),l(g=>g.filter(T=>T.username!==m));const h=document.getElementById(`remote-audio-${m}`);h&&(h.pause(),h.srcObject=null,h.remove(),console.log(`üîä [Audio] Removed audio element for ${m}`)),ct(g=>{const T={...g};return delete T[m],delete T[`${m}_camera`],delete T[`${m}_screen`],T}),re.current[m]&&(re.current[m].close(),delete re.current[m]);return}else if(f==="stream_update"){if(console.log(`[Signal] ${m} stream update:`,s),l(h=>h.map(g=>g.username===m?{...g,isCameraOn:s.streamType==="camera"?s.enabled:g.isCameraOn,isScreenSharing:s.streamType==="screen"?s.enabled:g.isScreenSharing}:g)),s.enabled&&!re.current[m]){console.log(`[stream_update] Creating PC for ${m} due to ${s.streamType} stream`);const h=Bt(m,!0);z.current&&z.current.getTracks().forEach(g=>{Re.webrtc(`Adding audio track to ${m}:`,g.kind),h.addTrack(g,z.current)}),ve.current&&ve.current.getTracks().forEach(g=>{Re.webrtc(`Adding camera track to ${m}:`,g.kind),h.addTrack(g,ve.current)}),oe.current&&oe.current.getTracks().forEach(g=>{Re.webrtc(`Adding screen track to ${m}:`,g.kind),h.addTrack(g,oe.current)});try{const g=await h.createOffer();await h.setLocalDescription(g),Pe({type:"offer",sdp:h.localDescription,target:m}),Re.signal(`Sent offer to ${m} after stream_update`)}catch(g){Re.error(`Failed to create offer for ${m}:`,g)}}return}else{console.warn(`[Signal] Ignored ${f} from ${m} (No PC)`);return}try{if(f==="offer"){if(b.signalingState!=="stable"){console.warn(`[Signal] Ignoring offer from ${m}, already in state: ${b.signalingState}`);return}await b.setRemoteDescription(new RTCSessionDescription(E));const h=await b.createAnswer();if(await b.setLocalDescription(h),Pe({type:"answer",sdp:b.localDescription,target:m}),console.log(`[Signal] Sent answer to ${m}`),Ie.current[m]){console.log(`[Signal] Processing ${Ie.current[m].length} buffered candidates for ${m}`);for(const g of Ie.current[m])try{await b.addIceCandidate(g)}catch(T){console.warn("[Signal] Failed to add buffered candidate:",T)}delete Ie.current[m]}}else if(f==="answer"){if(b.signalingState!=="have-local-offer"){console.warn(`[WebRTC] Error handling answer from ${m}: InvalidStateError: Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': Failed to set remote answer sdp: Called in wrong state: ${b.signalingState}`);return}if(await b.setRemoteDescription(new RTCSessionDescription(E)),console.log(`[Signal] Set remote description from ${m}`),Ie.current[m]){console.log(`[Signal] Processing ${Ie.current[m].length} buffered candidates for ${m}`);for(const h of Ie.current[m])try{await b.addIceCandidate(h)}catch(g){console.warn("[Signal] Failed to add buffered candidate:",g)}delete Ie.current[m]}}else f==="candidate"&&(b.remoteDescription?(await b.addIceCandidate(new RTCIceCandidate(k)),console.log(`[Signal] Added ICE candidate from ${m}`)):(console.log(`[Signal] Buffering ICE candidate from ${m} (no remote description yet)`),Ie.current[m]||(Ie.current[m]=[]),Ie.current[m].push(new RTCIceCandidate(k))))}catch(h){console.error(`[WebRTC] Error handling ${f} from ${m}:`,h)}},[p,Bt,Pe]),nt=o.useCallback(()=>{if(Be.current){console.log("[Voice] Already leaving, skipping...");return}if(Be.current=!0,console.log("[Voice] Leaving voice room..."),N.current&&N.current.readyState===WebSocket.OPEN)try{N.current.send(JSON.stringify({type:"user_leaving",sender_username:p}))}catch(s){console.warn("[Voice] Failed to send leave signal:",s)}z.current&&(z.current.getTracks().forEach(s=>{s.stop(),console.log(`[Voice] Stopped track: ${s.kind}`)}),ye(null),z.current=null),Ve&&(Ve.getTracks().forEach(s=>{s.stop(),console.log(`[Voice] Stopped camera track: ${s.kind}`)}),De(null),B(!1)),St&&(St.getTracks().forEach(s=>{s.stop(),console.log(`[Voice] Stopped screen track: ${s.kind}`)}),He(null),j(!1)),Object.entries(re.current).forEach(([s,m])=>{console.log(`[Voice] Closing PC for ${s}`),m.close()}),re.current={},ct({}),Ie.current={},N.current&&(N.current.onclose=null,N.current.close(),N.current=null),w(!1),O(null),R(!1),$(!1),ee(!1),ie&&(console.log("[Voice] Stopping recording on leave"),tt.current&&tt.current.state!=="inactive"&&tt.current.stop(),Et.current&&(clearInterval(Et.current),Et.current=null),J(!1),de(0)),Ke.current&&(clearInterval(Ke.current),Ke.current=null),et.current&&(clearTimeout(et.current),et.current=null,console.log("[Voice] Cleared pending WebSocket reconnect")),eo.current&&(clearInterval(eo.current),eo.current=null),ut(0),bt(1e3),Ue(!1),setTimeout(()=>{Be.current=!1},100)},[p,Ve,St,ie]),rt=o.useCallback(async s=>{if(d&&C&&C!==s&&!ot.current&&(console.log(`[Voice] Switching from ${C} to ${s}`),ot.current=!0,await new Promise(f=>{if(N.current){const E=N.current,k=E.onclose;E.onclose=b=>{k&&k(b),console.log("[Voice] Old WebSocket fully closed"),f()},E.close(1e3,"Switching channel"),N.current=null,setTimeout(f,2e3)}else f()}),Object.values(re.current).forEach(f=>{f.close()}),re.current={},ct({}),await new Promise(f=>setTimeout(f,150)),ot.current=!1,console.log(`[Voice] Now joining ${s}`)),d&&C===s){console.log(`[Voice] Already in ${s}, skipping join`);return}if(ot.current){console.log("[Voice] Currently switching channels, skipping...");return}console.log(`[Voice] Joining room: ${s}`),R(!0),O(s);try{Mt&&Mt.length>0&&(Mn(Mt),console.log(`üîê [TURN] Using cached ICE servers (${Mt.length})`));const m=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:48e3},sampleSize:{ideal:16},channelCount:{ideal:1},googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,googAudioMirroring:!1,latency:{ideal:.02}},video:!1});console.log("[Voice] üé§ Got microphone access with AGGRESSIVE noise suppression");let f=m;if(Dt)try{f=To(m),console.log("üéöÔ∏è [Voice] Professional audio filters APPLIED")}catch(b){console.warn("‚ö†Ô∏è [Voice] Could not apply professional filters, using raw stream:",b),f=m}ye(f),z.current=f,console.log("üé§ [Voice] Stream ready with noise suppression"),console.log("üé§ [Voice] Stream tracks:",f.getAudioTracks().map(b=>({id:b.id,label:b.label,enabled:b.enabled,readyState:b.readyState,muted:b.muted}))),Ye(),Ke.current||(Ke.current=setInterval(async()=>{const h=z.current?.getAudioTracks()?.[0];if(!(!d||Be.current)&&(mt.current?.state==="suspended"&&await mt.current.resume().catch(()=>{}),!h||h.readyState==="ended"||!h.enabled&&!K&&!We))try{const g=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,googEchoCancellation:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,sampleRate:48e3,channelCount:1},video:!1});ye(g),z.current=g;const T=g.getAudioTracks()[0];Object.values(re.current).forEach(D=>{D.getSenders().filter(H=>H.track?.kind==="audio").forEach(H=>H.replaceTrack(T).catch(()=>{}))}),console.log("üîÑ [Mic Watchdog] Audio track yenilendi (basit stream)")}catch(g){console.warn("[Mic Watchdog] Mic refresh failed:",g)}},8e3));const E=`${Wn}://${jn}/ws/voice/${s}/?token=${r}`;console.log(`[Voice] Connecting to ${E}`);const k=new WebSocket(E);N.current=k,k.onopen=()=>{console.log("üé§ [VoiceWS] Connected to room:",s),w(!0),R(!1),l(b=>b.some(g=>g.username===p)?b:(console.log("‚úÖ [Voice] Added self to connected users immediately"),[{username:p,isMuted:K,isCameraOn:G,isScreenSharing:U,isTalking:!1},...b]))},k.onmessage=b=>{try{const h=JSON.parse(b.data);console.log("[VoiceWS] Message received:",h.type||h),vt(h)}catch(h){console.error("[VoiceWS] Parse error:",h)}},k.onerror=b=>{console.error("üé§ [VoiceWS] Error:",b),R(!1),!Be.current&&!ot.current&&console.warn("[VoiceWS] Error occurred, reconnect will be attempted on close")},k.onclose=b=>{if(console.log("üé§ [VoiceWS] Disconnected, code:",b.code,"reason:",b.reason),Be.current||ot.current){console.log("[VoiceWS] User intentionally left or switching, not reconnecting"),Ue(!1),ut(0),bt(1e3),et.current&&(clearTimeout(et.current),et.current=null);return}if(b.code===1e3){console.log("[VoiceWS] Normal closure (1000), cleaning up"),nt();return}if(s&&d){const g=an+1;if(g>10){console.error("[VoiceWS] ‚ùå Max retry limit reached (10), giving up"),M.error("Sesli sohbet baƒülantƒ±sƒ± 10 denemeden sonra kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.",5e3),nt(),ut(0),bt(1e3);return}const T=Math.min(_o,3e4);console.warn(`[VoiceWS] üîÑ Unexpected disconnect (code: ${b.code})`),console.log(`[VoiceWS] üîÑ Reconnect attempt ${g}/10 in ${T}ms...`),Ue(!0),ut(g),et.current&&clearTimeout(et.current),et.current=setTimeout(()=>{!Be.current&&!ot.current&&s?(console.log(`[VoiceWS] ‚ö° Executing reconnect attempt ${g} to ${s}`),bt(D=>Math.min(D*2,3e4)),rt(s).then(()=>{console.log("[VoiceWS] ‚úÖ Reconnection successful! Resetting retry counters."),ut(0),bt(1e3),Ue(!1)}).catch(D=>{console.error("[VoiceWS] Reconnection failed:",D)})):(console.log("[VoiceWS] Reconnect cancelled (user left or room changed)"),Ue(!1),ut(0),bt(1e3))},T)}else console.log("[VoiceWS] Not in voice or no room, cleaning up"),nt()}}catch(m){console.error("Voice Join Error:",m),R(!1),ot.current=!1,m.name==="NotAllowedError"?M.warning("Mikrofon izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan izin verin.",5e3):m.name==="NotFoundError"?M.warning("Mikrofon bulunamadƒ±. L√ºtfen bir mikrofon baƒülayƒ±n."):M.error("Sesli sohbete baƒülanƒ±lamadƒ±: "+m.message)}},[d,C,r,vt,Ye,nt]),lr=o.useCallback(()=>{$(s=>{const m=!s;return z.current&&z.current.getAudioTracks().forEach(f=>{f.enabled=!m}),N.current?.readyState===WebSocket.OPEN&&N.current.send(JSON.stringify({type:"mic_off_state",is_mic_off:m})),console.log(`[Voice] Mute: ${m}`),m})},[]),dn=o.useCallback(()=>{ee(s=>{const m=!s;return N.current?.readyState===WebSocket.OPEN&&N.current.send(JSON.stringify({type:"deaf_state",is_deafened:m})),console.log(`[Voice] Deafened: ${m}`),m})},[]),oo=o.useRef(!1),Ro=o.useCallback(async()=>{if(oo.current){console.log("[Camera] Toggle already in progress, skipping...");return}oo.current=!0;try{const s=ve.current;if(s){console.log("[Camera] Stopping camera stream"),B(!1),De(null),ve.current=null,s.getTracks().forEach(f=>{f.stop(),console.log(`[Camera] Stopped ${f.kind} track`)});const m=[];for(const[f,E]of Object.entries(re.current)){const k=E.getSenders();let b=!1;for(const h of k)if(h.track&&h.track.kind==="video"&&h.track.contentHint!=="detail")try{E.removeTrack(h),b=!0,console.log(`[Camera] Removed video track from peer: ${f}`)}catch(g){console.warn(`[Camera] Failed to remove track from ${f}:`,g)}if(b){const h=(async()=>{try{const g=await E.createOffer();await E.setLocalDescription(g),Pe({type:"offer",sdp:E.localDescription,target:f}),console.log(`[Camera] Sent renegotiation offer to ${f} after removal`)}catch(g){console.warn(`[Camera] Renegotiation failed with ${f}:`,g)}})();m.push(h)}}N.current?.readyState===WebSocket.OPEN&&(N.current.send(JSON.stringify({type:"camera_state",is_camera_on:!1})),N.current.send(JSON.stringify({type:"video_ended",streamType:"camera"})),console.log("[Camera] Sent video_ended signal")),Promise.all(m).catch(f=>console.warn("[Camera] Some renegotiations failed:",f))}else{console.log("[Camera] Starting camera stream");const m=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}});if(!oo.current){console.log("[Camera] Toggle was cancelled, stopping new stream"),m.getTracks().forEach(k=>k.stop());return}console.log("[Camera] Got camera stream:",m.id),ve.current=m,De(m),B(!0);const f=m.getVideoTracks()[0];f.onended=()=>{console.log("[Camera] Track ended by browser/system"),De(null),ve.current=null,B(!1),N.current?.readyState===WebSocket.OPEN&&N.current.send(JSON.stringify({type:"video_ended",streamType:"camera"}))};try{f.contentHint="motion"}catch(k){console.warn("[Camera] contentHint not supported:",k)}const E=[];for(const[k,b]of Object.entries(re.current)){const h=(async()=>{try{b.addTrack(f,m),console.log(`[Camera] Added video track to peer: ${k}`);const g=await b.createOffer();await b.setLocalDescription(g),Pe({type:"offer",sdp:b.localDescription,target:k}),console.log(`[Camera] Sent renegotiation offer to ${k}`)}catch(g){console.warn(`[Camera] Failed to add/renegotiate with ${k}:`,g)}})();E.push(h)}N.current?.readyState===WebSocket.OPEN&&(N.current.send(JSON.stringify({type:"camera_state",is_camera_on:!0})),console.log("[Camera] State sent to backend: is_camera_on=true")),Promise.all(E).catch(k=>console.warn("[Camera] Some track additions failed:",k))}}catch(s){console.error("[Camera] Error:",s),s.name==="NotAllowedError"?M.warning("Kamera izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan kamera iznini a√ßƒ±n.",5e3):s.name==="NotFoundError"?M.warning("Kamera bulunamadƒ±. L√ºtfen bir kamera baƒülayƒ±n."):M.error("Kamera ba≈ülatƒ±lamadƒ±: "+s.message),B(!1),ve.current=null,De(null)}finally{setTimeout(()=>{oo.current=!1},300)}},[Pe]),cr=Ro,Nt=o.useRef(!1),dr=o.useCallback(async()=>{if(Nt.current){console.log("[Screen] Toggle already in progress, skipping...");return}Nt.current=!0;try{const s=oe.current;if(s){console.log("[Screen] Stopping screen share"),j(!1),He(null),oe.current=null,s.getTracks().forEach(f=>{f.stop(),console.log(`[Screen] Stopped ${f.kind} track`)});const m=[];for(const[f,E]of Object.entries(re.current)){const k=E.getSenders();let b=!1;for(const h of k)if(h.track&&h.track.contentHint==="detail")try{E.removeTrack(h),b=!0,console.log(`[Screen] Removed screen track from peer: ${f}`)}catch(g){console.warn(`[Screen] Failed to remove track from ${f}:`,g)}if(b){const h=(async()=>{try{const g=await E.createOffer();await E.setLocalDescription(g),Pe({type:"offer",sdp:E.localDescription,target:f}),console.log(`[Screen] Sent renegotiation offer to ${f} after removal`)}catch(g){console.warn(`[Screen] Renegotiation failed with ${f}:`,g)}})();m.push(h)}}N.current?.readyState===WebSocket.OPEN&&(N.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),N.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})),console.log("[Screen] Sent video_ended signal")),Promise.all(m).catch(f=>console.warn("[Screen] Some renegotiations failed:",f))}else{console.log("[Screen] Starting screen share");const m={"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"4K":{width:3840,height:2160}},f=m[fe]||m["1080p"];console.log(`üé¨ [Screen] Quality: ${fe}, FPS: ${Xt}`);const E=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",displaySurface:"monitor",width:{ideal:f.width},height:{ideal:f.height},frameRate:{ideal:Xt}},audio:Eo});if(!Nt.current){console.log("[Screen] Toggle was cancelled, stopping new stream"),E.getTracks().forEach(h=>h.stop());return}console.log("[Screen] Got screen stream:",E.id),E.getVideoTracks()[0].onended=()=>{console.log("[Screen] User stopped sharing via browser"),He(null),oe.current=null,j(!1),N.current?.readyState===WebSocket.OPEN&&(N.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),N.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})))},oe.current=E,He(E),j(!0);const k=E.getVideoTracks()[0];try{k.contentHint="detail"}catch(h){console.warn("[Screen] contentHint not supported:",h)}const b=[];for(const[h,g]of Object.entries(re.current)){const T=(async()=>{try{g.addTrack(k,E),console.log(`[Screen] Added screen track to peer: ${h}`);const D=await g.createOffer();await g.setLocalDescription(D),Pe({type:"offer",sdp:g.localDescription,target:h}),console.log(`[Screen] Sent renegotiation offer to ${h}`)}catch(D){console.error(`[Screen] Failed to add track to ${h}:`,D.message)}})();b.push(T)}N.current?.readyState===WebSocket.OPEN&&N.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!0})),Promise.all(b).catch(h=>console.warn("[Screen] Some track additions failed:",h))}}catch(s){console.error("[Screen] Error:",s),s.name==="NotAllowedError"?console.log("[Screen] User cancelled screen share"):s.name==="NotFoundError"?M.warning("Ekran payla≈üƒ±mƒ± desteklenmiyor."):M.error("Ekran payla≈üƒ±mƒ± ba≈ülatƒ±lamadƒ±: "+s.message),j(!1),oe.current=null,He(null)}finally{setTimeout(()=>{Nt.current=!1},300)}},[Pe,fe,Xt,Eo]),Ao=o.useCallback(()=>{if(!d||ie){console.warn("[Recording] Cannot start - not in voice or already recording");return}try{const s=new(window.AudioContext||window.webkitAudioContext),m=s.createMediaStreamDestination();X&&s.createMediaStreamSource(X).connect(m),Object.entries(Ce).forEach(([E,k])=>{!E.includes("_camera")&&!E.includes("_screen")&&k.getAudioTracks().length>0&&s.createMediaStreamSource(k).connect(m)});const f=new MediaRecorder(m.stream,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});ft.current=[],f.ondataavailable=E=>{E.data.size>0&&ft.current.push(E.data)},f.onstop=()=>{const E=new Blob(ft.current,{type:"audio/webm"}),k=URL.createObjectURL(E),b=document.createElement("a");b.href=k,b.download=`pawscord-voice-${C}-${Date.now()}.webm`,b.click(),URL.revokeObjectURL(k),console.log("‚úÖ [Recording] Saved recording")},f.start(1e3),tt.current=f,J(!0),de(0),Et.current=setInterval(()=>{de(E=>E+1)},1e3),console.log("üî¥ [Recording] Started")}catch(s){console.error("[Recording] Start error:",s),M.error("Kayƒ±t ba≈ülatƒ±lamadƒ±: "+s.message)}},[d,ie,X,Ce,C]),Po=o.useCallback(()=>{ie&&(tt.current&&tt.current.state!=="inactive"&&tt.current.stop(),Et.current&&(clearInterval(Et.current),Et.current=null),tt.current=null,J(!1),de(0),console.log("‚èπÔ∏è [Recording] Stopped"))},[ie]),un=o.useCallback(()=>{if(ft.current.length===0){M.warning("Hen√ºz kayƒ±t yok!");return}const s=new Blob(ft.current,{type:"audio/webm"}),m=URL.createObjectURL(s),f=document.createElement("a");f.href=m,f.download=`pawscord-voice-${C||"recording"}-${Date.now()}.webm`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(m),console.log("üíæ [Recording] Downloaded manually")},[C]),ur=o.useCallback(async(s,m=50)=>{if(!X||!d){console.warn("[VoiceEffect] No stream or not in voice");return}try{if(zt.current&&(zt.current.forEach(g=>{try{g.disconnect()}catch{}}),zt.current=null),!s){me(null),console.log("üéµ [VoiceEffect] Cleared");return}const f=Ee.current||new AudioContext;Ee.current||(Ee.current=f);const E=f.createMediaStreamSource(X),k=f.createMediaStreamDestination(),b=[],h=m/100;switch(s){case"robot":{const g=f.createOscillator(),T=f.createGain(),D=f.createWaveShaper();g.type="sawtooth",g.frequency.value=50+h*100,T.gain.value=.3+h*.4;const H=new Float32Array(256);for(let le=0;le<256;le++){const pe=le/128-1;H[le]=Math.tanh(pe*(1+h*3))}D.curve=H,g.connect(T),E.connect(D),D.connect(k),g.start(),b.push(g,T,D);break}case"echo":{const g=f.createDelay(1),T=f.createGain(),D=f.createGain(),H=f.createGain();g.delayTime.value=.1+h*.4,T.gain.value=.2+h*.5,D.gain.value=.3+h*.4,H.gain.value=1-h*.3,E.connect(H),E.connect(g),g.connect(T),T.connect(g),g.connect(D),H.connect(k),D.connect(k),b.push(g,T,D,H);break}case"deep":{const g=f.createBiquadFilter(),T=f.createGain();g.type="lowshelf",g.frequency.value=500,g.gain.value=10+h*15,T.gain.value=1.2,E.connect(g),g.connect(T),T.connect(k),b.push(g,T);break}case"high":{const g=f.createBiquadFilter(),T=f.createGain();g.type="highshelf",g.frequency.value=1e3,g.gain.value=8+h*12,T.gain.value=.9,E.connect(g),g.connect(T),T.connect(k),b.push(g,T);break}case"radio":{const g=f.createBiquadFilter(),T=f.createBiquadFilter(),D=f.createWaveShaper();g.type="lowpass",g.frequency.value=3e3-h*1e3,T.type="highpass",T.frequency.value=300+h*200;const H=new Float32Array(256);for(let le=0;le<256;le++){const pe=le/128-1;H[le]=Math.sign(pe)*Math.pow(Math.abs(pe),.8)}D.curve=H,E.connect(T),T.connect(g),g.connect(D),D.connect(k),b.push(g,T,D);break}case"reverb":{const g=f.createConvolver(),T=f.createGain(),D=f.createGain(),H=f.sampleRate,le=H*(.5+h*2),pe=f.createBuffer(2,le,H);for(let Ne=0;Ne<2;Ne++){const kt=pe.getChannelData(Ne);for(let Je=0;Je<le;Je++)kt[Je]=(Math.random()*2-1)*Math.pow(1-Je/le,2)}g.buffer=pe,T.gain.value=.3+h*.5,D.gain.value=1-h*.2,E.connect(D),E.connect(g),g.connect(T),D.connect(k),T.connect(k),b.push(g,T,D);break}default:E.connect(k)}zt.current=b,xo.current=k.stream,me(s),ze(m),console.log(`üéµ [VoiceEffect] Applied: ${s} at ${m}%`)}catch(f){console.error("[VoiceEffect] Error:",f),M.error("Ses efekti uygulanamadƒ±")}},[X,d]),mn=o.useCallback(s=>{if(!N.current||N.current.readyState!==WebSocket.OPEN){console.warn("[Reaction] WebSocket not connected");return}N.current.send(JSON.stringify({type:"voice_reaction",emoji:s})),console.log(`üí¨ [Reaction] Sent: ${s}`)},[]),Xr=o.useCallback((s,m,f=null,E=null)=>{if(!N.current||N.current.readyState!==WebSocket.OPEN){console.warn("[Game] WebSocket not connected");return}N.current.send(JSON.stringify({type:"game_signal",game_type:s,action:m,move:f,target:E})),console.log(`üéÆ [Game] Sent: ${s} - ${m}`,f)},[]),mr=o.useCallback((s,m=0,f=null)=>{if(!N.current||N.current.readyState!==WebSocket.OPEN){console.warn("[Cinema] WebSocket not connected");return}N.current.send(JSON.stringify({type:"cinema_sync",action:s,time:m,url:f})),console.log(`üé¨ [Cinema] Sent: ${s}`,{time:m,url:f})},[]),fr=o.useCallback(()=>{_e.current||(_e.current=setInterval(async()=>{const s={};for(const[m,f]of Object.entries(re.current))try{const E=await f.getStats();let k=null,b=null;E.forEach(h=>{h.type==="inbound-rtp"&&h.kind==="audio"&&(k={packetsReceived:h.packetsReceived,packetsLost:h.packetsLost,jitter:h.jitter,bytesReceived:h.bytesReceived}),h.type==="inbound-rtp"&&h.kind==="video"&&(b={packetsReceived:h.packetsReceived,packetsLost:h.packetsLost,framesDecoded:h.framesDecoded,frameWidth:h.frameWidth,frameHeight:h.frameHeight}),h.type==="candidate-pair"&&h.state==="succeeded"&&(s[m]={...s[m],rtt:h.currentRoundTripTime*1e3,connectionType:h.localCandidateId?.includes("relay")?"TURN":"STUN/Direct"})}),s[m]={...s[m],audio:k,video:b,connectionState:f.connectionState,iceConnectionState:f.iceConnectionState}}catch(E){console.warn(`[Stats] Failed to get stats for ${m}:`,E)}Jo(s)},2e3),console.log("üìä [Stats] Monitoring started"))},[]),no=o.useCallback(()=>{_e.current&&(clearInterval(_e.current),_e.current=null,Jo({}),console.log("üìä [Stats] Monitoring stopped"))},[]),fn=o.useCallback(s=>{Zn(s),localStorage.setItem("pawscord_noise_gate_enabled",s.toString()),console.log(`üéöÔ∏è [Noise Gate] ${s?"ENABLED":"DISABLED"}`)},[]),Io=o.useCallback(s=>{const m=Math.max(-80,Math.min(-20,s));qn(m),localStorage.setItem("pawscord_noise_gate",m.toString()),console.log(`üéöÔ∏è [Noise Gate] Threshold: ${m}dB`)},[]),pr=o.useCallback(s=>{Xn(s),localStorage.setItem("pawscord_visualizer",s.toString()),console.log(`üìä [Visualizer] ${s?"ENABLED":"DISABLED"}`)},[]),_t=o.useRef(null),at=o.useRef(null),Ft=o.useCallback(()=>{if(!(!wt||!X)&&!_t.current)try{Ee.current||(Ee.current=new(window.AudioContext||window.webkitAudioContext));const s=Ee.current,m=s.createAnalyser();m.fftSize=256;const f=s.createMediaStreamSource(X);f.connect(m),at.current={local:m,localSource:f,remote:{}},Object.entries(Ce).forEach(([E,k])=>{if(!E.includes("_camera")&&!E.includes("_screen")){const b=s.createAnalyser();b.fftSize=256;const h=s.createMediaStreamSource(k);h.connect(b),at.current.remote[E]={analyser:b,source:h}}}),_t.current=setInterval(()=>{const E=new Uint8Array(128);at.current.local.getByteFrequencyData(E);const k={};Object.entries(at.current.remote).forEach(([b,{analyser:h}])=>{const g=new Uint8Array(128);h.getByteFrequencyData(g),k[b]=g}),Xo({local:E,remote:k})},33),console.log("üìä [Visualizer] Started")}catch(s){console.error("[Visualizer] Failed to start:",s)}},[wt,X,Ce]),ro=o.useCallback(()=>{if(_t.current&&(clearInterval(_t.current),_t.current=null),at.current){try{at.current.localSource?.disconnect(),Object.values(at.current.remote).forEach(({source:s})=>{s?.disconnect()})}catch{}at.current=null}Xo({local:new Uint8Array(128),remote:{}}),console.log("üìä [Visualizer] Stopped")},[]);return o.useEffect(()=>(d&&wt?Ft():ro(),()=>ro()),[d,wt,Ft,ro]),o.useEffect(()=>()=>{ie&&Po(),Ke.current&&(clearInterval(Ke.current),Ke.current=null),no()},[ie,Po,no]),e.createElement(Es.Provider,{value:{isInVoice:d,isConnecting:x,currentRoom:C,isMuted:K,isDeafened:V,isVideoEnabled:G,isScreenSharing:U,isTalking:q,isSpatialAudioEnabled:dt,vadSensitivity:Ot,isNoiseSuppressionEnabled:Dt,screenShareQuality:fe,screenShareFPS:Xt,isRecording:ie,recordingDuration:ne,isPTTMode:We,isPTTActive:nn,pttKey:Q,includeSystemAudio:Eo,localStream:X,localAudioStream:X,localCameraStream:Ve,localScreenStream:St,remoteStreams:Ce,connectedUsers:Ko,remoteVolumes:Zt,mutedUsers:Qo,joinVoiceRoom:rt,leaveVoiceRoom:nt,joinChannel:rt,leaveChannel:nt,setRemoteVolume:Co,setIsMuted:$,setIsDeafened:ee,setIsVideoEnabled:B,setIsScreenSharing:j,toggleMute:lr,toggleDeafened:dn,toggleVideo:Ro,toggleCamera:cr,toggleScreenShare:dr,toggleSpatialAudio:rr,updateVadSensitivity:sn,toggleNoiseSuppression:to,updateScreenQuality:qe,updateScreenFPS:ir,toggleSystemAudio:ar,togglePTTMode:cn,updatePTTKey:sr,startRecording:Ao,stopRecording:Po,downloadRecording:un,sendSignal:Pe,isPttActive:nn,sendReaction:mn,lastReaction:Hn,applyVoiceEffect:ur,activeVoiceEffect:Y,voiceEffectIntensity:be,setVoiceEffectIntensity:ze,cinemaState:Kn,setCinemaState:Yo,sendCinemaSync:mr,gameState:ce,setGameState:Ae,sendGameSignal:Xr,connectionStats:qo,startStatsMonitoring:fr,stopStatsMonitoring:no,noiseSuppressionLevel:tn,updateNoiseSuppressionLevel:ln,iceServers:Mt,isReconnecting:rn,adjustBandwidth:Vt,noiseGateThreshold:Yn,isNoiseGateEnabled:Jn,toggleNoiseGate:fn,updateNoiseGateThreshold:Io,audioVisualizerData:Zo,isVisualizerEnabled:wt,toggleVisualizer:pr,startVisualizer:Ft,stopVisualizer:ro}},i)},jc=()=>o.useContext(Es),vs=o.createContext(null),Gc=({children:i})=>{const[n,r]=o.useState(!1),[p,d]=o.useState(null),[w,x]=o.useState(0),R=o.useRef(null),C=o.useRef(null),O=o.useCallback(()=>{const K=localStorage.getItem("access_token");if(!K)return;let $="Anonymous";try{$=ho(K).username}catch(G){console.error("Token decode hatasƒ±",G)}const V=`${Wn}://${jn}/ws/status/?username=${encodeURIComponent($)}&token=${K}`;R.current&&R.current.close();const ee=new WebSocket(V);R.current=ee,ee.onopen=()=>{console.log("üåê [GlobalWS] Baƒülandƒ±"),r(!0)},ee.onmessage=G=>{const B=JSON.parse(G.data);d(B),B.type==="chat_message_handler"&&B.username==="‚ö° Signal Bot"&&(Notification.permission==="granted"&&document.hidden&&new Notification("üö® YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞!",{body:`${B.content.split(`
`)[2]}`,icon:"/logo192.png"}),x(U=>U+1))},ee.onclose=G=>{console.log("üåê [GlobalWS] Kapandƒ±",G.code),r(!1),clearTimeout(C.current),C.current=setTimeout(O,5e3)},ee.onerror=G=>{console.error("üåê [GlobalWS] Hata",G),ee.close()}},[jn,Wn]);return o.useEffect(()=>{const K=setTimeout(()=>{O()},2e3);return()=>{clearTimeout(K),R.current&&R.current.close(),clearTimeout(C.current)}},[O]),e.createElement(vs.Provider,{value:{isConnected:n,globalData:p,unreadGlobal:w,setUnreadGlobal:x}},i)},_s=()=>o.useContext(vs),Hc=({message:i,endTime:n,level:r="info",onDismiss:p})=>{const[d,w]=o.useState("");o.useEffect(()=>{if(!n)return;const C=()=>{const K=new Date,V=new Date(n)-K;if(V<=0){w("Ending soon..."),setTimeout(()=>window.location.reload(),5e3);return}const ee=Math.floor(V/(1e3*60*60)),G=Math.floor(V%(1e3*60*60)/(1e3*60));w(`${ee}h ${G}m remaining`)};C();const O=setInterval(C,6e4);return()=>clearInterval(O)},[n]);const x={info:{bg:"rgba(88, 101, 242, 0.1)",border:"#5865f2",text:"#5865f2"},warning:{bg:"rgba(250, 166, 26, 0.1)",border:"#faa61a",text:"#faa61a"},critical:{bg:"rgba(240, 71, 71, 0.1)",border:"#f04747",text:"#f04747"}},R=x[r]||x.info;return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:R.bg,borderBottom:`2px solid ${R.border}`,padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:9999,animation:"slideDown 0.3s ease"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement(kl,{style:{color:R.text,fontSize:"18px"}}),e.createElement("div",null,e.createElement("div",{style:{color:R.text,fontWeight:"bold"}},r==="critical"?"üö® Critical Maintenance":r==="warning"?"‚ö†Ô∏è Scheduled Maintenance":"‚ÑπÔ∏è Maintenance Notice"),e.createElement("div",{style:{color:"#dcddde",fontSize:"14px",marginTop:"2px"}},i,d&&e.createElement("span",{style:{marginLeft:"10px",opacity:.7}},"(",d,")")))),p&&e.createElement("button",{onClick:p,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:C=>C.target.style.background="rgba(255,255,255,0.1)",onMouseLeave:C=>C.target.style.background="none"},e.createElement(jo,null)))},Qe=({size:i="medium",text:n="Y√ºkleniyor...",fullscreen:r=!1})=>{const p={small:{spinner:24,text:"12px"},medium:{spinner:40,text:"14px"},large:{spinner:60,text:"16px"}},d=p[i]||p.medium,w=r?po.fullscreenContainer:po.inlineContainer;return e.createElement("div",{style:w},e.createElement("div",{style:{...po.spinnerWrapper,width:d.spinner,height:d.spinner}},e.createElement("div",{style:po.spinnerOuter}),e.createElement("div",{style:po.spinnerInner})),n&&e.createElement("div",{style:{...po.loadingText,fontSize:d.text}},n))},po={fullscreenContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#36393f",zIndex:9999,gap:"16px"},inlineContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px",minHeight:"100px"},spinnerWrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},spinnerOuter:{position:"absolute",width:"100%",height:"100%",border:"3px solid rgba(88, 101, 242, 0.2)",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite"},spinnerInner:{position:"absolute",width:"70%",height:"70%",border:"3px solid rgba(88, 101, 242, 0.1)",borderBottom:"3px solid #7289da",borderRadius:"50%",animation:"spin 0.7s linear infinite reverse"},loadingText:{color:"#b5bac1",fontWeight:500,textAlign:"center",animation:"pulse 1.5s ease-in-out infinite"}};if(typeof document<"u"){const i=document.createElement("style");i.innerText=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
    `,document.head.querySelector("[data-loading-spinner-styles]")||(i.setAttribute("data-loading-spinner-styles","true"),document.head.appendChild(i))}const Jr=()=>{const i=window.navigator?.userAgent?.toLowerCase().includes("electron"),n=window.location.hostname.includes("pawscord.com"),r=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";return i||n?"https://api.pawscord.com":r?"http://localhost:8888":"https://api.pawscord.com"};Jr();const Kc=()=>Jr().replace("/api","/media"),Yc=Jr,bf=Kc,qc="https://media.pawscord.com",Jc=`${qc}/assets`,Zc=`${Jc}/logo.png`;Yc().replace("/api","");const Xc=Zc,Qc=()=>e.createElement("svg",{className:"splash-logo",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("ellipse",{cx:"50",cy:"62",rx:"22",ry:"18",fill:"white"}),e.createElement("ellipse",{cx:"28",cy:"38",rx:"10",ry:"12",fill:"white"}),e.createElement("ellipse",{cx:"72",cy:"38",rx:"10",ry:"12",fill:"white"}),e.createElement("ellipse",{cx:"22",cy:"55",rx:"8",ry:"10",fill:"white"}),e.createElement("ellipse",{cx:"78",cy:"55",rx:"8",ry:"10",fill:"white"})),ed=()=>{const[i,n]=o.useState(!1);return i?e.createElement(Qc,null):e.createElement("img",{src:Xc,alt:"Pawscord",className:"splash-logo",onError:()=>n(!0)})},td=({animationState:i})=>e.createElement("div",{className:`splash-screen ${i}`},e.createElement("div",{className:"particles"},[...Array(15)].map((n,r)=>e.createElement("div",{key:r,className:"particle",style:{"--delay":`${Math.random()*2}s`,"--x":`${Math.random()*100}%`,"--size":`${4+Math.random()*8}px`,"--duration":`${2+Math.random()*3}s`}}))),e.createElement("div",{className:"rings-container"},e.createElement("div",{className:"ring ring-1"}),e.createElement("div",{className:"ring ring-2"}),e.createElement("div",{className:"ring ring-3"})),e.createElement("div",{className:"logo-container"},e.createElement("div",{className:"logo-glow"}),e.createElement(ed,null)),e.createElement("div",{className:"brand-text"},e.createElement("span",{className:"letter",style:{"--i":0}},"P"),e.createElement("span",{className:"letter",style:{"--i":1}},"A"),e.createElement("span",{className:"letter",style:{"--i":2}},"W"),e.createElement("span",{className:"letter",style:{"--i":3}},"S"),e.createElement("span",{className:"letter",style:{"--i":4}},"C"),e.createElement("span",{className:"letter",style:{"--i":5}},"O"),e.createElement("span",{className:"letter",style:{"--i":6}},"R"),e.createElement("span",{className:"letter",style:{"--i":7}},"D")),e.createElement("div",{className:"loading-bar"},e.createElement("div",{className:"loading-progress"}))),ns=e.memo(td),rs=e.lazy(()=>y(()=>import("./Message-CjV_cGot.js"),__vite__mapDeps([23,1,2,3,6,24,25,26,27,9,4,5,7]))),od=e.lazy(()=>y(()=>import("./VirtualMessageList-B83NbI3e.js"),__vite__mapDeps([28,2,3,27,9]))),nd=e.lazy(()=>y(()=>import("./MessageInput-COMnIy2Y.js"),__vite__mapDeps([29,1,2,3,6,22,30,4,5,7,31]))),zn=e.lazy(()=>y(()=>import("./UserVideoContainer-BUAIG94Z.js"),__vite__mapDeps([32,2,3]))),rd=e.lazy(()=>y(()=>import("./VoiceAudioController-DwP-796S.js"),__vite__mapDeps([33,2,3,1,4,5,6,7])));e.lazy(()=>y(()=>import("./RichTextEditor-C8bgbXks.js"),__vite__mapDeps([34,2,3,6,35])));const ad=e.lazy(()=>y(()=>import("./StickyMessageBanner-BoEiMFpM.js"),__vite__mapDeps([36,2,3,6]))),sd=e.lazy(()=>y(()=>import("./LoginPage-CpsIHSi4.js"),__vite__mapDeps([37,2,3,6,38,5,1,4,7]))),id=e.lazy(()=>y(()=>import("./WelcomeScreen-BRpCebbG.js"),__vite__mapDeps([39,2,3,6,40,1,4,5,7]))),ld=e.lazy(()=>y(()=>import("./ImageModal-C99nj2Rh.js"),__vite__mapDeps([13,2,3]))),cd=e.lazy(()=>y(()=>import("./UserProfileModal-z5LIpH_L.js"),__vite__mapDeps([12,2,3,6,1,4,5,7]))),dd=e.lazy(()=>y(()=>import("./PollCreateModal-BLgQdCYy.js"),__vite__mapDeps([20,2,3,6]))),ud=e.lazy(()=>y(()=>import("./CodeSnippetModal-BgyE0mGP.js"),__vite__mapDeps([21,2,3,6])));e.lazy(()=>y(()=>import("./AvatarCropper-DKjxipOm.js"),__vite__mapDeps([41,2,3,42])));const md=e.lazy(()=>y(()=>import("./CryptoChartModal-yQ_P1yJ0.js"),__vite__mapDeps([43,2,3,6])));e.lazy(()=>y(()=>import("./CryptoStoreModal-3hW9PsS7.js"),__vite__mapDeps([44,2,3,6,1,4,5,7])));const fd=e.lazy(()=>y(()=>import("./PremiumStoreModal-BquDC-S6.js"),__vite__mapDeps([45,2,3,6,1,4,5,7]))),pd=e.lazy(()=>y(()=>import("./WhiteboardModal-DDRBrJKs.js"),__vite__mapDeps([19,2,3,6]))),gd=e.lazy(()=>y(()=>import("./SoundboardModal--hcW7TI2.js"),__vite__mapDeps([16,2,3,6]))),hd=e.lazy(()=>y(()=>import("./KanbanBoard-D60zVje3.js"),__vite__mapDeps([46,2,3,9,6]))),as=e.lazy(()=>y(()=>import("./SummaryModal-D2qEY_8K.js"),__vite__mapDeps([47,2,3,6]))),yd=e.lazy(()=>y(()=>import("./MessageTemplateModal-SDn1-KoA.js"),__vite__mapDeps([22,2,3,6]))),Sd=e.lazy(()=>y(()=>import("./CinemaModal-CNCTR4Ij.js"),__vite__mapDeps([18,1,2,3,6]))),wd=e.lazy(()=>y(()=>import("./StickerPicker-DZkr96jN.js"),__vite__mapDeps([15,2,3]))),bd=e.lazy(()=>y(()=>import("./GifPicker-BFh2Z4QW.js"),__vite__mapDeps([14,2,3]))),Ed=e.lazy(()=>y(()=>import("./DJModal-CFPtRpJq.js"),__vite__mapDeps([48,1,2,3,6]))),vd=e.lazy(()=>y(()=>import("./ThemeStoreModal-DdVlH2aT.js"),__vite__mapDeps([49,2,3,6,1,4,5,7]))),_d=e.lazy(()=>y(()=>import("./EncryptionKeyModal-DNfXH39V.js"),__vite__mapDeps([50,2,3,6]))),kd=e.lazy(()=>y(()=>import("./DownloadModal-5FrQ_BMa.js"),__vite__mapDeps([40,2,3,6,1,4,5,7]))),xd=e.lazy(()=>y(()=>import("./ServerSettingsModal-7QIDs-jH.js"),__vite__mapDeps([8,2,3,6,9,10,11,1,4,5,7]))),Cd=e.lazy(()=>y(()=>import("./CreateGroupModal-CMnZq7js.js"),__vite__mapDeps([51,2,3,6,1,4,5,7]))),Td=e.lazy(()=>y(()=>import("./AdminAnalyticsPanel-UWU5Yg4e.js"),__vite__mapDeps([52,2,3,6]))),Rd=e.lazy(()=>y(()=>import("./AdminPanelModal-BbiQXxfM.js"),__vite__mapDeps([53,2,3,6,1,4,5,7]))),Ad=e.lazy(()=>y(()=>import("./WebhooksPanel-ClPIKXp8.js"),__vite__mapDeps([54,2,3,9,1,4,5,6,7,55]))),Pd=e.lazy(()=>y(()=>import("./VanityURLManager-DfPTMMtW.js"),__vite__mapDeps([11,2,3,6,1,4,5,7]))),Id=e.lazy(()=>y(()=>import("./AutoModerationDashboard-DEH_N75J.js"),__vite__mapDeps([56,2,3,6]))),Ld=e.lazy(()=>y(()=>import("./AutoModerationPanel-DcR5Jc7z.js"),__vite__mapDeps([57,2,3,6,1,4,5,7,58]))),Od=e.lazy(()=>y(()=>import("./RaidProtectionPanel-DuK4zB4H.js"),__vite__mapDeps([59,2,3,6,1,4,5,7]))),Dd=e.lazy(()=>y(()=>import("./ReportSystemPanel-CYiCYLM_.js"),__vite__mapDeps([60,2,3,6,1,4,5,7]))),$d=e.lazy(()=>y(()=>import("./AuditLogPanel-BhrYkcUv.js"),__vite__mapDeps([61,2,3,6]))),Md=e.lazy(()=>y(()=>import("./UserWarningsPanel-BP5IlPxZ.js"),__vite__mapDeps([62,2,3,6,1,4,5,7]))),zd=e.lazy(()=>y(()=>import("./BookmarkPanel-CshuI77S.js"),__vite__mapDeps([63,2,3,6,1,4,5,7]))),Vd=e.lazy(()=>y(()=>import("./ReadLaterPanel-o2EoczRH.js"),__vite__mapDeps([64,2,3,6,65]))),Ud=e.lazy(()=>y(()=>import("./ChannelPermissionsPanel-DRBodxf4.js"),__vite__mapDeps([66,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MessageThreadsPanel-DSjkzica.js"),__vite__mapDeps([67,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./ModeratorNotesPanel-DlE0rKhZ.js"),__vite__mapDeps([68,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./ServerRolesPanel-aoxytP7T.js"),__vite__mapDeps([69,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./NotificationPreferencesPanel-BXYwHZBV.js"),__vite__mapDeps([70,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MessageOCRPanel-466GCNsp.js"),__vite__mapDeps([71,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MassActionsPanel-D_C474vY.js"),__vite__mapDeps([72,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./TimeoutMutePanel-CqB5VmD1.js"),__vite__mapDeps([73,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./ServerThemesPanel-BVQDjR6u.js"),__vite__mapDeps([74,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./KeywordMutesPanel-MxvS3rZM.js"),__vite__mapDeps([75,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./WelcomeTemplatesPanel-D3_ZyH8x.js"),__vite__mapDeps([76,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./StickyMessagesPanel-D4IqJTUk.js"),__vite__mapDeps([77,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MessageTemplatesPanel-BSxULKfO.js"),__vite__mapDeps([78,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MessageExportPanel-CzJorP0V.js"),__vite__mapDeps([79,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./ArchivedRoomsPanel-CsgTeZ-U.js"),__vite__mapDeps([80,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./SlowModePanel-Dh_iQSzj.js"),__vite__mapDeps([81,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./EmojiManagementPanel-Lfis2Q2D.js"),__vite__mapDeps([82,2,3,6,1,4,5,7])));const Bd=e.lazy(()=>y(()=>import("./ReactionAnalyticsPanel-BW-VT0nI.js"),__vite__mapDeps([83,2,3,6,1,4,5,7]))),Nd=e.lazy(()=>y(()=>import("./LinkClickTrackingPanel-DDptexmu.js"),__vite__mapDeps([84,2,3,6,1,4,5,7]))),Fd=e.lazy(()=>y(()=>import("./JoinLeaveLogsPanel-C3i5eUVW.js"),__vite__mapDeps([85,2,3,6,1,4,5,7]))),Wd=e.lazy(()=>y(()=>import("./UserActivityPanel-B7FywSKe.js"),__vite__mapDeps([86,2,3,6,1,4,5,7]))),jd=e.lazy(()=>y(()=>import("./NicknameHistoryPanel-BQfMv1Hu.js"),__vite__mapDeps([87,2,3,6,1,4,5,7]))),Gd=e.lazy(()=>y(()=>import("./FieldChangeTrackingPanel-_sHx0NzT.js"),__vite__mapDeps([88,2,3,6,1,4,5,7]))),Hd=e.lazy(()=>y(()=>import("./InviteAnalyticsPanel-BzYAFBvH.js"),__vite__mapDeps([89,2,3,6,1,4,5,7]))),Kd=e.lazy(()=>y(()=>import("./ContentScannerPanel-tIZJUxlt.js"),__vite__mapDeps([90,2,3,6,1,4,5,7]))),Yd=e.lazy(()=>y(()=>import("./EphemeralMessagesPanel-BGQGjVIj.js"),__vite__mapDeps([91,2,3,6,1,4,5,7]))),qd=e.lazy(()=>y(()=>import("./TopicHistoryPanel-CsdgTEaR.js"),__vite__mapDeps([92,2,3,6,1,4,5,7]))),Jd=e.lazy(()=>y(()=>import("./DraftsPanel-C1l_1Bb5.js"),__vite__mapDeps([93,2,3,6,1,4,5,7]))),Zd=e.lazy(()=>y(()=>import("./ServerNicknamesPanel-C1cIz_k4.js"),__vite__mapDeps([94,2,3,6,1,4,5,7]))),Xd=e.lazy(()=>y(()=>import("./ServerBoostPanel-zn40_PoG.js"),__vite__mapDeps([95,2,3,6,1,4,5,7]))),Qd=e.lazy(()=>y(()=>import("./RoomWebhooksPanel-DKvVve0a.js"),__vite__mapDeps([96,2,3,6,1,4,5,7]))),eu=e.lazy(()=>y(()=>import("./OAuthAppsPanel-BV7iJ7a2.js"),__vite__mapDeps([97,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./VanityURLPanel-BdrJcJGE.js"),__vite__mapDeps([98,2,3,6,1,4,5,7])));const ss=e.lazy(()=>y(()=>import("./AutoRespondersPanel-CTuhipow.js"),__vite__mapDeps([99,2,3,6,1,4,5,7]))),tu=e.lazy(()=>y(()=>import("./SessionManagementPanel-CLMrZciS.js"),__vite__mapDeps([100,2,3,6,1,4,5,7]))),ou=e.lazy(()=>y(()=>import("./GDPRExportPanel-DY5nFH4w.js"),__vite__mapDeps([101,2,3,6,1,4,5,7]))),nu=e.lazy(()=>y(()=>import("./DataRetentionPanel-7TXtAZVa.js"),__vite__mapDeps([102,2,3,6,1,4,5,7]))),ru=e.lazy(()=>y(()=>import("./TwoFactorSetupWizard-De9NRXpl.js"),__vite__mapDeps([103,2,3,6,1,4,5,7]))),au=e.lazy(()=>y(()=>import("./EnhancedPollsPanel-C0dVu3dz.js"),__vite__mapDeps([104,2,3,6,1,4,5,7]))),su=e.lazy(()=>y(()=>import("./VoiceTranscriptsPanel-CX83dTV-.js"),__vite__mapDeps([105,2,3,6,1,4,5,7]))),iu=e.lazy(()=>y(()=>import("./PaymentPanel-rP7L--Wm.js"),__vite__mapDeps([106,2,3,6,1,4,5,7]))),lu=e.lazy(()=>y(()=>import("./StoreModal-hR17QIdo.js"),__vite__mapDeps([107,2,3,6,1,4,5,7]))),cu=e.lazy(()=>y(()=>import("./DailyRewardsModal-DwNy4LHA.js"),__vite__mapDeps([108,2,3,6,1,4,5,7]))),du=e.lazy(()=>y(()=>import("./APIUsagePanel-CTsHOntN.js"),__vite__mapDeps([109,2,3,6,1,4,5,7]))),uu=e.lazy(()=>y(()=>import("./ExportJobsPanel-BXPi6xTd.js"),__vite__mapDeps([110,2,3,6,1,4,5,7]))),mu=e.lazy(()=>y(()=>import("./ScheduledAnnouncementsPanel-w3AM5dyF.js"),__vite__mapDeps([111,2,3,6,1,4,5,7]))),fu=e.lazy(()=>y(()=>import("./InviteExportPanel-CsFzWfn_.js"),__vite__mapDeps([112,2,3,6,1,4,5,7]))),pu=e.lazy(()=>y(()=>import("./AdvancedSearchPanel-BXexfVds.js"),__vite__mapDeps([113,2,3,6,1,4,5,7]))),gu=e.lazy(()=>y(()=>import("./GrowthMetricsPanel-Cek5oyhH.js"),__vite__mapDeps([114,2,3,6,1,4,5,7]))),hu=e.lazy(()=>y(()=>import("./LinkPreviewRenderer-C1xDxn-z.js"),__vite__mapDeps([115,2,3,6]))),yu=e.lazy(()=>y(()=>import("./InventoryPanel-6uix6XVX.js"),__vite__mapDeps([116,2,3,6,1,4,5,7]))),Su=e.lazy(()=>y(()=>import("./WaitlistPanel-CI6b0CSg.js"),__vite__mapDeps([117,2,3,6,1,4,5,7]))),wu=e.lazy(()=>y(()=>import("./ReferralRewardsPanel-CftLGCTk.js"),__vite__mapDeps([118,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./VerifyEmailPage-Cbi4zzDw.js"),__vite__mapDeps([119,2,3,6,4])));e.lazy(()=>y(()=>import("./ForgotPasswordPage-DBfB7USe.js"),__vite__mapDeps([120,2,3,6,38,4])));e.lazy(()=>y(()=>import("./ResetPasswordPage-wZ5RYW5i.js"),__vite__mapDeps([121,2,3,6,4])));e.lazy(()=>y(()=>import("./TwoFactorLoginPage-B-iuCr7a.js"),__vite__mapDeps([122,2,3,6,4])));e.lazy(()=>y(()=>import("./TwoFactorSetup-M1CIJefp.js"),__vite__mapDeps([123,2,3,1,4,5,6,7,124])));e.lazy(()=>y(()=>import("./TwoFactorLogin-NYOByexZ.js"),__vite__mapDeps([125,2,3,126])));const bu=e.lazy(()=>y(()=>import("./VanityInviteScreen-B4PHBlOh.js"),__vite__mapDeps([127,2,3,9])));e.lazy(()=>y(()=>import("./EmailVerification-DZLgJ2dq.js"),__vite__mapDeps([128,2,3,4,129])));e.lazy(()=>y(()=>import("./MobileNav--ZizGSGJ.js"),__vite__mapDeps([130,2,3,131])));e.lazy(()=>y(()=>import("./SwipeActions-CXI45k7R.js"),__vite__mapDeps([132,2,3,133])));e.lazy(()=>y(()=>import("./VoiceMessage-B0egG8MO.js"),__vite__mapDeps([134,2,3,1,4,5,6,7,135])));const Eu=e.lazy(()=>y(()=>import("./FriendsTab-Dnm5C-m0.js"),__vite__mapDeps([136,2,3,6,24,1,4,5,7]))),vu=e.lazy(()=>y(()=>import("./RoomList-B8FV_zDl.js"),__vite__mapDeps([137,2,3,6,5,138,30,11,1,4,7,10,24]))),_u=e.lazy(()=>y(()=>import("./UserProfilePanel-BwXb-Qhv.js"),__vite__mapDeps([139,2,3,140,1,41,42,4,5,6,7,141]))),is=e.lazy(()=>y(()=>import("./VoiceChatPanel-CR84NPF2.js"),__vite__mapDeps([142,2,3,143,9,144,6,5,1,4,7,145]))),ku=e.lazy(()=>y(()=>import("./ChatUserList-BTvFSvCn.js"),__vite__mapDeps([146,2,3,6,4]))),xu=e.lazy(()=>y(()=>import("./PinnedMessages-D12SAmXc.js"),__vite__mapDeps([147,2,3,23,1,6,24,25,26,27,9,4,5,7]))),Cu=e.lazy(()=>y(()=>import("./FloatingVoiceIsland-QkrgBdse.js"),__vite__mapDeps([148,2,3,143,9,149]))),Tu=e.lazy(()=>y(()=>import("./CinemaPlayer-C9irxhSO.js"),__vite__mapDeps([150,1,2,3,6,4,5,7]))),Ru=e.lazy(()=>y(()=>import("./ConnectionsPanel-C0w7oTof.js"),__vite__mapDeps([151,2,3,6,1,4,5,7,152]))),Au=e.lazy(()=>y(()=>import("./PasswordSetupModal-Ci806j9E.js"),__vite__mapDeps([153,2,3,6,1,4,5,7,154]))),Pu=e.lazy(()=>y(()=>import("./NotificationDropdown-BvvnXljc.js"),__vite__mapDeps([155,2,3,6])));e.lazy(()=>y(()=>import("./ReactionStatsPanel-CNxFa_y6.js"),__vite__mapDeps([156,2,3,6,1,4,5,7,157])));e.lazy(()=>y(()=>import("./ServerHealthPanel-CpVkqOsf.js"),__vite__mapDeps([158,2,3,6,1,4,5,7,159])));e.lazy(()=>y(()=>import("./ChannelAnalyticsPanel-DQgRWwKt.js"),__vite__mapDeps([160,2,3,6,1,4,5,7,161])));e.lazy(()=>y(()=>import("./SmartSuggestionsPanel-D6L0NFPJ.js"),__vite__mapDeps([162,2,3,6,1,4,5,7,163])));e.lazy(()=>y(()=>import("./UserPresenceInsightsPanel-DKWdbZm5.js"),__vite__mapDeps([164,2,3,6,1,4,5,7,165])));e.lazy(()=>y(()=>import("./UserFooter-B-GIwjM_.js").then(i=>i.a),__vite__mapDeps([138,2,3,6])));const Iu=e.lazy(()=>y(()=>import("./UserContextMenu-vGVjbVNg.js"),__vite__mapDeps([144,2,3,6]))),Lu=e.lazy(()=>y(()=>import("./MiniGamesPanel-CgJUCVvv.js"),__vite__mapDeps([166,2,3,6,1,4,5,7]))),Ou=e.lazy(()=>y(()=>import("./ProjectCollaborationPanel-CTQvqvvh.js"),__vite__mapDeps([167,2,3,6,1,4,5,7]))),Du=e.lazy(()=>y(()=>import("./AvatarStudioPanel-BEU7qAlE.js"),__vite__mapDeps([168,2,3,6,1,4,5,7]))),$u="8888",yo=typeof window<"u"&&typeof window.require=="function",Lt=window.Capacitor&&window.Capacitor.isNativePlatform(),Ho=(()=>{if(Lt||yo)return"https://api.pawscord.com";const i=window.location.protocol,n=window.location.hostname;return n.includes("pawscord.com")?"https://api.pawscord.com":`${i}//${n}:${$u}`})(),go=yo||Lt?"https://www.pawscord.com":Ho,W=`${Ho}/api`,P=Ho,Vn=Ho.startsWith("https")?"wss":"ws",Un=Ho.replace(/^https?:\/\//,""),ls=`${W}/auth/login/`,cs=`${W}/auth/register/`,Mu=`${W}/messages/history/room/`,zu=`${W}/messages/history/dm/`,zr=`${W}/rooms/list_with_categories/`,Vu=`${W}/conversations/`,Uu=`${W}/conversations/find_or_create/`,Bu=`${W}/users/update_profile/`,Nu=`${W}/users/default_avatars/`,Fu=`${W}/users/change_username/`,Wu=`${W}/gifs/list_local/`,ju="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",ds="chat_drafts_v1",Bn=()=>(Date.now()+Math.floor(Math.random()*1e3)).toString(),Gu=i=>new Promise((n,r)=>{const d=Math.ceil(i.size/2097152);let w=0;const x=new _l.ArrayBuffer,R=new FileReader;R.onload=O=>{x.append(O.target.result),w++,w<d?C():n(x.end())},R.onerror=O=>r(O);function C(){const O=w*2097152,K=Math.min(O+2097152,i.size);R.readAsArrayBuffer(i.slice(O,K))}C()}),Hu=()=>{const{user:i,isAuthenticated:n,token:r,login:p,logout:d,isLoading:w}=Go(),{isInVoice:x,isConnecting:R,currentRoom:C,joinChannel:O,leaveChannel:K,isMuted:$,isDeafened:V,toggleMute:ee,toggleDeafened:G,toggleVideo:B,toggleScreenShare:U,remoteVolumes:j,setRemoteVolume:q,localCameraStream:ue,remoteStreams:ie,isTalking:J,sendSignal:ne,isScreenSharing:de,isVideoEnabled:Y,isPttActive:me,localScreenStream:be,sendReaction:ze,lastReaction:X,applyVoiceEffect:ye,activeEffect:Ve,cinemaState:De,setCinemaState:St,gameState:He,sendGameSignal:Ce,mutedUsers:ct}=jc(),{globalData:Ko}=_s(),l=xe(t=>t.activeChat),Hn=xe(t=>t.messages),Jt=xe(t=>t.encryptionKeys),Kn=xe(t=>t.voiceUsers),Yo=xe(t=>t.unreadCounts),ce=xe(t=>t.setActiveChat);xe(t=>t.addMessage),xe(t=>t.updateMessage);const Ae=xe(t=>t.setMessages),qo=xe(t=>t.setTypingUser),Jo=xe(t=>t.setOnlineUsers),Yn=xe(t=>t.setVoiceUsers),qn=xe(t=>t.incrementUnread),Jn=xe(t=>t.setEncryptionKey),[Zn,Zo]=o.useState(!1),[Xo,wt]=o.useState(!1),[Xn,Zt]=o.useState(!1),[Qn,Qo]=o.useState(!1),[Zr,dt]=o.useState(!1),[en,Ot]=o.useState(null),[er,Dt]=o.useState(!1),[tr,tn]=o.useState(0),[or,fe]=o.useState(""),I=i?.username||"",[Xt,bo]=o.useState(!1),[Eo,nr]=o.useState(!1),[We,Qt]=o.useState(null),{isMobile:Q}=Ec(),[on,nn]=o.useState(""),$t=$c(on,300),[Mt,vo]=o.useState("0px"),rn=Lt?"max(20px, env(safe-area-inset-bottom))":"0px",[Ue,an]=o.useState({width:300,height:225,x:100,y:100}),[ut,_o]=o.useState(!0),[bt,et]=o.useState(!0),[eo,ko]=o.useState(!1),[N,re]=o.useState("start"),[mt,Ee]=o.useState([]),[z,ve]=o.useState([]),[oe,ft]=o.useState([]),[tt,Et]=o.useState([]),[Be,ot]=o.useState([]),[Ke,zt]=o.useState(!1),[xo,_e]=o.useState(!1),[Co,Ye]=o.useState(!1),[rr,sn]=o.useState(!1),[to,ln]=o.useState(!1),[ar,cn]=o.useState(!1),[sr,qe]=o.useState(""),[ir,To]=o.useState(!1),[Pe,Vt]=o.useState(!1),[Ut,Ie]=o.useState(new Set),[Bt,vt]=o.useState(null),[nt,rt]=o.useState(null),[lr,dn]=o.useState(null),[oo,Ro]=o.useState(!1),[cr,Nt]=o.useState(!1),[dr,Ao]=o.useState(!1),[Po,un]=o.useState(!1),[ur,mn]=o.useState(!1),[Xr,mr]=o.useState(!1),[fr,no]=o.useState(!1),[fn,Io]=o.useState(!1),[pr,_t]=o.useState(!1),[at,Ft]=o.useState(!1),[ro,s]=o.useState(!1),[m,f]=o.useState(!1),[E,k]=o.useState(!1),[b,h]=o.useState(!1),[g,T]=o.useState(!1),[D,H]=o.useState(!1),[le,pe]=o.useState(!1),[Ne,kt]=o.useState(!1),[Je,Wt]=o.useState(!1),[xt,Ct]=o.useState(!1),[pn,gn]=o.useState(!1),[Lo,Qr]=o.useState(!1),[gr,ea]=o.useState(!1),[hr,Oo]=o.useState(!1),[jt,st]=o.useState(!1),[Do,hn]=o.useState(!1),[yr,Sr]=o.useState(!1),[Rs,As]=o.useState(!1),[Ps,Is]=o.useState(!1),[Ls,Os]=o.useState(!1),[Ds,$s]=o.useState(!1),[Ms,zs]=o.useState(!1),[Vs,ta]=o.useState(!1),[Us,Bs]=o.useState(!1),[Ns,Fs]=o.useState(!1),[Ws,js]=o.useState(!1),[Gs,Hs]=o.useState(!1),[Ks,Ys]=o.useState(!1),[qs,Js]=o.useState(!1),[Zs,Xs]=o.useState(!1),[Qs,ei]=o.useState(!1),[ti,oa]=o.useState(!1),[oi,ni]=o.useState(!1),[ri,ai]=o.useState(!1),[si,ii]=o.useState(!1),[li,na]=o.useState(!1),[ci,di]=o.useState(!1),[ui,mi]=o.useState(!1),[fi,pi]=o.useState(!1),[gi,hi]=o.useState(!1),[yi,Si]=o.useState(!1),[wi,ra]=o.useState(!1),[bi,aa]=o.useState(!1),[Ei,sa]=o.useState(!1),[Rm,Am]=o.useState(!1),[Pm,Im]=o.useState(!1),[Lm,Om]=o.useState(!1),[Dm,$m]=o.useState(!1),[Mm,zm]=o.useState(!1),[Vm,Um]=o.useState(!1),[Bm,Nm]=o.useState(!1),[Fm,Wm]=o.useState(!1),[jm,Gm]=o.useState(!1),[Hm,Km]=o.useState(!1),[vi,ia]=o.useState("default"),[la,ao]=o.useState(null),[Ym,qm]=o.useState(!1),[_i,yn]=o.useState(!1),[Jm,Sn]=o.useState(!0),[Zm,wr]=o.useState(0),[so,ki]=o.useState(!1),[Gt,br]=o.useState([]),[xi,Ci]=o.useState(0),[Tt,ca]=o.useState([]),[Ht,Rt]=o.useState([]),[Xm,Ti]=o.useState(null),[it,wn]=o.useState(null),[da,ua]=o.useState(!1),[Ri,ma]=o.useState(!1),[fa,pa]=o.useState(null),[ga,Er]=o.useState(!1),[Ai,ha]=o.useState(!1),[Pi,bn]=o.useState(""),[$o,ya]=o.useState(()=>JSON.parse(localStorage.getItem("chat_sound_settings"))||{notifications:!0,mentions:!0,userJoinLeave:!0}),[En,vr]=o.useState(null),[Ii,Sa]=o.useState(!1),[wa,vn]=o.useState(!1),[ba,_r]=o.useState(!1),[kr,_n]=o.useState(0),[Qm,ef]=o.useState(!1),[tf,io]=o.useState(!1),[of,lo]=o.useState(""),[Li,kn]=o.useState(!1),[nf,co]=o.useState(null),[rf,Ea]=o.useState(null),[af,va]=o.useState(null),[_a,sf]=o.useState(!1),[xr,ka]=o.useState(!1),[Mo,Fe]=o.useState(!1),[xn,xa]=o.useState(null),[zo,Cn]=o.useState(null),[Oi,Ca]=o.useState(!1),[Di,Ta]=o.useState(!1),[$i,Ra]=o.useState(!1),[Mi,Aa]=o.useState(!1),[zi,Pa]=o.useState(!1),[Vi,Ia]=o.useState(!1),[La,Oa]=o.useState(null),[Ui,Da]=o.useState(!1),[Bi,$a]=o.useState(!1),Ma=xe(t=>t.typingUsers),za=o.useMemo(()=>Ma.filter(t=>t!==I),[Ma,I]);o.useRef(null),o.useRef([]);const ke=o.useRef(null),Tn=o.useRef(null),Cr=o.useRef(null);o.useRef(null);const Vo=o.useRef(null),Tr=o.useRef(null),Va=o.useRef(null),pt=o.useRef({}),Te=I==="Eastkhan"||I==="PawPaw"||it?.role==="admin",Ni=o.useMemo(()=>{const t=z?.find(S=>S.id===l?.serverId),a=t?.owner===I||t?.created_by===I,u=Ht?.find(S=>S.username===I)?.role==="moderator";return{isAdmin:Te,isServerOwner:a,isModerator:u,canKick:Te||a||u,canBan:Te||a,canMute:Te||a||u,canWarn:Te||a||u,canManageRoles:Te||a}},[Te,z,l?.serverId,I,Ht]),Fi=o.useMemo(()=>{if(!z||z.length===0)return[];if(!Tt||Tt.length===0)return z;const t=[],a=[];return Tt.forEach(u=>{const S=z.find(c=>c.id===u);S&&t.push(S)}),z.forEach(u=>{Tt.includes(u.id)||a.push(u)}),[...t,...a]},[z,Tt]),Rr=xe(t=>t.onlineUsers),Wi=xe(t=>t.messages),Ar=vc(Wi,$t);_c(oe),o.useEffect(()=>{if(N==="finished")return;re("start");const t=setTimeout(()=>re("pre-transition"),1500),a=setTimeout(()=>re("finished"),2200),u=setTimeout(()=>re("finished"),3e3);return()=>{clearTimeout(t),clearTimeout(a),clearTimeout(u)}},[]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search),a=t.get("verification"),u=t.get("username"),S=t.get("reason"),c=t.get("needs_password");if(a==="success")M.success(`‚úÖ Email doƒürulandƒ±! Ho≈ügeldin ${u||"kullanƒ±cƒ±"}!`),window.history.replaceState({},document.title,window.location.pathname);else if(a==="failed"){const v=S==="expired"?"‚è∞ Doƒürulama linki s√ºresi dolmu≈ü. Yeni bir link talep edin.":"‚ùå Ge√ßersiz doƒürulama linki.";M.error(v),window.history.replaceState({},document.title,window.location.pathname)}c==="true"&&(console.log("üîë [Auth] Google user needs to set password"),$a(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search),a=t.get("success"),u=t.get("coins"),S=t.get("session_id"),c=t.get("canceled");a==="true"&&u&&((async()=>{try{const A=localStorage.getItem("access_token"),Z="https://api.pawscord.com/api";if(S){const L=await(await fetch(`${Z}/payments/verify/`,{method:"POST",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"},body:JSON.stringify({session_id:S,coin_amount:parseInt(u)})})).json();L.success?L.already_processed?M.info(`?? ÔøΩdeme zaten islendi! Bakiye: ${L.balance} coin`):M.success(`?? ${u} coin hesabina eklendi! Yeni bakiye: ${L.balance} coin`):M.error(L.error||"ÔøΩdeme dogrulama hatasi")}else M.success(`?? ÔøΩdeme basarili! ${u} coin hesabina eklendi.`)}catch(A){console.error("Payment verification error:",A),M.success(`?? ${u} coin satin alma tamamlandi!`)}})(),window.history.replaceState({},document.title,window.location.pathname)),c==="true"&&(M.info("? ÔøΩdeme iptal edildi."),window.history.replaceState({},document.title,window.location.pathname))},[]),o.useEffect(()=>{const a=window.location.hash.match(/^#\/join\/([^/?]+)/);if(a){const u=a[1];console.log("üîó [Vanity] Detected vanity path:",u),Oa(u)}},[]),o.useEffect(()=>(window.showAutoModeration=()=>Io(!0),window.showRaidProtection=()=>_t(!0),window.showReportSystem=()=>Ft(!0),window.showAuditLog=()=>s(!0),window.showUserWarnings=()=>f(!0),()=>{delete window.showAutoModeration,delete window.showRaidProtection,delete window.showReportSystem,delete window.showAuditLog,delete window.showUserWarnings}),[]),o.useEffect(()=>{const t=a=>{Mo&&!a.target.closest(".toolbar-menu-container")&&Fe(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[Mo]),o.useEffect(()=>{const t=()=>{Da(!0)};return window.addEventListener("openConnectionsPanel",t),()=>window.removeEventListener("openConnectionsPanel",t)},[]),o.useEffect(()=>{sc(),lc(),cc(),yc(),setTimeout(()=>{Ss()},3e3),"requestIdleCallback"in window&&requestIdleCallback(()=>{Nr()}),n&&i&&y(async()=>{const{pushNotificationManager:t}=await import("./pushNotifications-DySc_Ipw.js");return{pushNotificationManager:t}},__vite__mapDeps([169,1,2,3])).then(({pushNotificationManager:t})=>{t.init(W,_)}),Lt&&y(async()=>{const{initializeDeepLinkHandler:t}=await import("./urlHandlers-CkIgbdK3.js");return{initializeDeepLinkHandler:t}},__vite__mapDeps([170,1,2,3,4,5,6,7])).then(({initializeDeepLinkHandler:t})=>{console.log("‚úÖ Deep link handler ready")}),console.log("‚úÖ PWA ve optimizasyonlar aktif!")},[n,i]);const Uo=o.useMemo(()=>{if(l.type==="room"){if(z){for(const t of z)if(t.categories)for(const a of t.categories){const u=a.rooms?.find(S=>S.slug===l.id);if(u)return String(u.name)}}return String(l.id)}else if(l.type==="dm")return`@ ${String(l.targetUser||"DM")}`;return""},[l,z]),uo=o.useMemo(()=>!l||!l.id?"":`${l.type}-${l.id}`,[l]),Rn=o.useCallback(()=>{try{const t=localStorage.getItem(ds);if(!t)return{};const a=JSON.parse(t);return a&&typeof a=="object"?a:{}}catch(t){return console.warn("Taslak okunamadƒ±",t),{}}},[]),ji=o.useCallback(t=>{if(!uo)return;const a=Rn();a[uo]=t,localStorage.setItem(ds,JSON.stringify(a))},[uo,Rn]);o.useEffect(()=>{if(!uo){lo(""),io(!1);return}const a=Rn()[uo]||"";lo(a),io(!!a.trim())},[uo,Rn]);const Gi=o.useMemo(()=>{if(l.type!=="room"||!z)return"text";for(const t of z)if(t.categories)for(const a of t.categories){const u=a.rooms?.find(S=>S.slug===l.id);if(u)return u.channel_type}return"text"},[l,z]),At=o.useCallback((t="auto")=>{Cr.current&&Cr.current.scrollIntoView({behavior:t})},[]),Pr=o.useCallback(()=>{const t=Tr.current;return t?t.scrollHeight-t.scrollTop-t.clientHeight<160:!0},[]),Ir=o.useCallback(()=>{const t=Tr.current;if(!t)return;const a=t.scrollHeight-t.scrollTop-t.clientHeight;kn(a>160)},[]),Hi=Mc(Ir,100),je=o.useCallback(t=>{if(t==="‚ö° Signal Bot")return`${go}/static/bot/signal.png`;if(t==="PawPaw AI")return`${go}/static/bot/ai.png`;if(!t||!Be||Be.length===0)return`${go}/avatars/cat_1.png`;let a=0;for(let v=0;v<t.length;v++)a=t.charCodeAt(v)+((a<<5)-a);const u=Math.abs(a%Be.length),S=Be[u];let c;return typeof S=="object"&&S!==null?c=S.original||S.thumbnail||S.url:typeof S=="string"&&(c=S),!c||typeof c!="string"?`${go}/avatars/cat_1.png`:c.startsWith("http")||c.startsWith("blob:")?c:(c.startsWith("/")||(c="/"+c),`${go}${c}`)},[Be]),Ze=o.useCallback(t=>{const a=oe.find(u=>u.username===t);if(a&&a.avatar&&typeof a.avatar=="string"){if(a.avatar.startsWith("http://")||a.avatar.startsWith("https://")||a.avatar.startsWith("blob:"))return a.avatar;let u=a.avatar;return u.startsWith("/")||(u="/"+u),`${go}${u}`}return je(t)},[oe,je]),_=o.useCallback(async(t,a={})=>{const u=a.headers||{};r&&(u.Authorization=`Bearer ${r}`),a.body instanceof FormData||(u["Content-Type"]="application/json");try{const c=t.includes("upload")||a.body instanceof FormData?3e5:3e4,v=new AbortController,A=setTimeout(()=>v.abort(),c),Z=await fetch(t,{...a,headers:u,signal:v.signal});if(clearTimeout(A),Z.status===401)throw t.includes("/auth/")||t.includes("/login")?(console.warn("‚ö†Ô∏è [Auth] 401 on auth endpoint, logging out"),d()):console.warn("‚ö†Ô∏è [Auth] 401 error on:",t,"- NOT logging out"),new Error("Unauthorized");return Z}catch(S){throw S.name==="AbortError"?(console.error("‚è±Ô∏è [Fetch] Request timed out:",t),new Error("ƒ∞stek zaman a≈üƒ±mƒ±na uƒüradƒ±")):(console.error("Fetch error:",S),S)}},[r,d]);Dc(),o.useEffect(()=>{const t=window.location.hash,a=t.includes("?")?t.split("?")[1]:"",S=new URLSearchParams(a).get("join_server");if(S&&n&&z&&z.length>0){console.log("üîó [Vanity URL] Found join_server parameter:",S);const c=z.find(v=>v.id===parseInt(S));if(c){if(console.log(`üîó Vanity URL: Redirecting to server ${c.name}`),c.categories&&c.categories.length>0){const v=c.categories[0];if(v.rooms&&v.rooms.length>0){const A=v.rooms[0];ce({type:"room",id:A.slug})}}window.history.replaceState({},document.title,"/#/")}else console.log(`üîó Vanity URL: Server ${S} not found, showing invite modal`),(async()=>{try{const A=await _(`${W}/servers/${S}/join/`,{method:"POST"});if(A.ok)M.success("Sunucuya katƒ±ldƒ±nƒ±z!"),window.location.reload();else{const Z=await A.json();M.error(Z.error||"Sunucuya katƒ±lƒ±namadƒ±")}}catch(A){console.error("Join server error:",A),M.error("Sunucuya katƒ±lƒ±rken hata olu≈ütu")}finally{window.history.replaceState({},document.title,"/#/")}})()}},[n,z,_]);const Ua=o.useCallback(async t=>{try{await _(`${W}/user/server-order/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_order:t})}),console.log("üíæ Server order saved:",t)}catch(a){console.error("Server order save error:",a)}},[_]),Ki=(t,a,u)=>{t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("serverId",a.toString()),t.dataTransfer.setData("sourceIndex",u.toString());const S=t.currentTarget.cloneNode(!0);S.style.position="absolute",S.style.top="-9999px",S.style.opacity="0.8",S.style.transform="rotate(5deg)",S.style.pointerEvents="none",document.body.appendChild(S),t.dataTransfer.setDragImage(S,24,24),setTimeout(()=>{document.body.contains(S)&&document.body.removeChild(S)},0),t.currentTarget.style.opacity="0.4"},Yi=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},qi=t=>{t.currentTarget.style.opacity="1"},Ji=o.useCallback((t,a)=>{t.preventDefault(),parseInt(t.dataTransfer.getData("serverId"));const u=parseInt(t.dataTransfer.getData("sourceIndex"));if(console.log("üìù DROP: sourceIndex:",u,"‚Üí targetIndex:",a),u===a){console.log("‚ùå Aynƒ± yere bƒ±rakƒ±lƒ±yor (sourceIndex === targetIndex), i≈ülem iptal");return}let S=Tt.length>0?[...Tt]:z.map(A=>A.id);console.log("üìù Mevcut sƒ±ralama:",S),console.log("üîÑ Kaynak index:",u,"‚Üí Hedef index:",a);const[c]=S.splice(u,1),v=u<a?a-1:a;console.log("üéØ Adjusted target index:",v),S.splice(v,0,c),console.log("‚úÖ Yeni sƒ±ralama:",S),ca(S),Ua(S)},[Tt,z,Ua]),Ba=t=>{const a=document.getElementById(`message-${t}`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})},Zi=async()=>{if(window.confirm("Bu odadaki t√ºm mesajlarƒ± silmek istediƒüine emin misin?"))try{(await _(`${W}/rooms/${l.id}/clear/`,{method:"POST"})).ok&&Ae([])}catch(t){console.error(t)}},Xi=async()=>{Er(!0),ha(!0),bn("");try{const t=await _(`${W}/rooms/${l.id}/summarize/`,{method:"POST"}),a=await t.json();t.ok?bn(a.summary):bn("Hata: "+a.error)}catch{bn("Baƒülantƒ± hatasƒ±.")}ha(!1)},Lr=t=>{if(console.log("üì§ [DEBUG] sendMessage called with:",t),console.log("üì§ [DEBUG] ws.current:",ke.current),console.log("üì§ [DEBUG] ws.current.readyState:",ke.current?.readyState),console.log("üì§ [DEBUG] activeChat:",l),!t)return;const a=t.trim();if(!a)return;if(a==="/tema"){Nt(!0),co(null),io(!1),lo(""),Vo.current?.clear?.();return}if(a==="/sablon"){dt(!0),co(null),io(!1),lo(""),Vo.current?.clear?.();return}if(a.startsWith("/duyuru ")){const L=a.slice(8).trim();if(L){const se={type:l.type==="room"?"chat_message":"dm_message",message:`[ANNOUNCE] ${L}`,username:I,temp_id:Bn(),...l.type==="room"?{room:l.id}:{conversation:l.id}};ke.current?.send(JSON.stringify(se)),ao({message:L,type:"info",author:I}),co(null),io(!1),lo(""),Vo.current?.clear?.();return}}co(null),io(!1),lo(""),ji("");const u=l.type==="room"?`room-${l.id}`:`dm-${l.id}`,S=Jt[u];let c=a;l.type==="dm"&&S&&(c=bc(a,S));const v={type:l.type==="room"?"chat_message":"dm_message",message:c,username:I,temp_id:Bn(),...l.type==="room"?{room:l.id}:{conversation:l.id}},A=JSON.stringify(v),Z=async()=>{let Se=0;for(;ke.current&&ke.current.readyState===WebSocket.CONNECTING&&Se<3e3;)await new Promise($e=>setTimeout($e,100)),Se+=100;if(ke.current&&ke.current.readyState===WebSocket.OPEN)try{return ke.current.send(A),!0}catch($e){return console.error("WebSocket send error:",$e),!1}return!1},ae=async()=>{try{const L=l.type==="dm"?`${W}/messages/send_dm/`:`${W}/messages/send/`,se=l.type==="dm"?{conversation_id:l.id,content:c}:{room:l.id,content:c};return(await _(L,{method:"POST",body:JSON.stringify(se)})).ok}catch(L){return console.error("HTTP fallback error:",L),!1}};(async()=>await Z()||await ae())(),Ae(L=>{const se={...v,content:c,timestamp:new Date().toISOString(),id:v.temp_id,avatar:it?.avatar||je(I)},Se=[...L,se],$e=l.type==="room"?`room-${l.id}`:`dm-${l.id}`;return pt.current[$e]&&(pt.current[$e].messages=Se),Se}),Vo.current?.clear?.(),At("smooth")},Qi=t=>{const a={type:l.type==="room"?"chat_message":"dm_message",message:"",username:I,temp_id:Bn(),snippet_data:t,...l.type==="room"?{room:l.id}:{conversation:l.id}};ke.current?.send(JSON.stringify(a)),Ae(u=>[...u,{...a,timestamp:new Date().toISOString(),id:a.temp_id,avatar:it?.avatar||je(I)}]),bo(!1)},Or=o.useCallback(()=>{if(!l.id||l.type==="welcome"||l.type==="friends"||!I)return;if(ke.current&&ke.current.readyState===WebSocket.OPEN){const S=ke.current.url,c=l.type==="room"?`/ws/chat/${l.id}/`:`/ws/dm/${l.id}/`;if(S.includes(c)){console.log("‚è≠Ô∏è [WebSocket] Already connected to this chat, skipping reconnect");return}}ke.current&&(console.log("üîå [WebSocket] Closing existing connection before new one"),ke.current.close(1e3,"change_room"));let t="";const a=`?username=${encodeURIComponent(I)}&token=${r}`;if(l.type==="room"?t=`${Vn}://${Un}/ws/chat/${l.id}/${a}`:l.type==="dm"&&(t=`${Vn}://${Un}/ws/dm/${l.id}/${a}`),!t){console.log("‚è≠Ô∏è [WebSocket] Skipping - activeChat.type is not room/dm:",l.type);return}console.log("üîå [WebSocket] Connecting to:",t.split("?")[0]);const u=new WebSocket(t);ke.current=u,u.onopen=()=>{console.log("‚úÖ [WebSocket] Connected successfully"),zt(!0)},u.onmessage=S=>{const c=JSON.parse(S.data);if(c.type==="chat"||c.type==="dm"||c.type==="chat_message_handler"){console.log("üì® [WebSocket] Message data:",{type:c.type,id:c.id,temp_id:c.temp_id,room:c.room,conversation:c.conversation});const v=A=>A.room?`room-${A.room}`:A.conversation?`dm-${A.conversation}`:(console.warn("‚ö†Ô∏è [WebSocket] No room/conversation in message, using activeChat fallback"),l.type==="room"?`room-${l.id}`:`dm-${l.id}`);Ae(A=>{if(c.temp_id){const L=A.findIndex(se=>se.temp_id===c.temp_id);if(L!==-1){console.log("üîÑ [WebSocket] Replacing temp message with real message:",c.temp_id,"‚Üí",c.id);const se=[...A];se[L]=c;const Se=v(c);return pt.current[Se]&&(pt.current[Se].messages=se),se}}if(c.id&&A.some(L=>L.id===c.id))return console.log("‚è≠Ô∏è [WebSocket] Duplicate message (by ID) skipped:",c.id),A;console.log("üì® [WebSocket] New message received:",c);const Z=[...A,c],ae=v(c);return pt.current[ae]&&(pt.current[ae].messages=Z),Z}),qo(c.username,!1),Pr()?At("smooth"):kn(!0)}else c.type==="typing_status_update"?c.username!==I&&qo(c.username,c.is_typing):c.type==="chat_cleared"&&Ae([]);if(c.message&&c.message.startsWith("[ANNOUNCE] ")){const v=c.message.replace("[ANNOUNCE] ","");ao({message:v,type:"info",author:c.username})}},u.onerror=S=>{console.error("‚ùå [WebSocket] Connection error:",S)},u.onclose=S=>{console.log("üîå [WebSocket] Connection closed:",S.code,S.reason),zt(!1)}},[l.id,l.type,I,r]);o.useEffect(()=>{wo.isNativePlatform()&&(nc.initialize({clientId:ju,scopes:["profile","email"],grantOfflineAccess:!0}),vo("max(35px, env(safe-area-inset-top))"))},[]),o.useEffect(()=>{n&&!so&&(async()=>{try{const[a,u,S,c,v]=await Promise.all([_(Nu).then(L=>L.json()),_(zr).then(L=>L.json()),_(`${Vu}?username=${encodeURIComponent(I)}`).then(L=>L.json()),_(`${W}/friends/list/`).then(L=>L.json()),_(`${W}/users/me/`).then(L=>L.json())]);ot(a);const A={username:v?.username||I,email:v?.email||"",avatar:v?.avatar||null,status_message:v?.status_message||"",friend_code:v?.friend_code||"0000",social_links:v?.social_links||{},coins:v?.coins||0,xp:v?.xp||0,level:v?.level||1,status:"online",role:v?.role||"member",is_whitelisted:v?.is_whitelisted||!1};wn(A),console.log("üî• [DEBUG] currentUserProfile with is_whitelisted:",A);const ae=(c.friends||[]).map(L=>{const se=L.sender_username===I,Se=se?L.receiver_username:L.sender_username,$e=se?L.receiver_avatar:L.sender_avatar,Pt=se?L.receiver_status:L.sender_status,Le=se?L.receiver_activity:L.sender_activity;return Se?{username:Se,avatar:$e,status:Pt||"offline",display_name:Se,current_activity:Le||{},status_message:"",last_seen:L.created_at,role:"friend",friend_code:""}:null}).filter(Boolean).filter(L=>L.username!==A.username);ft(ae),ve(u),Ee(S),br(ae),ki(!0),y(async()=>{const{prefetchUserAvatars:L}=await import("./imageCaching-B8rCcNnf.js");return{prefetchUserAvatars:L}},__vite__mapDeps([25,2,3])).then(({prefetchUserAvatars:L})=>{L(ae)})}catch(a){console.error("Init Data Error",a),qe("Veriler y√ºklenemedi.")}})()},[n,so,_,I]),o.useEffect(()=>{I&&(async()=>{try{const a=await _(`${W}/user/server-order/`);if(a.ok){const u=await a.json();ca(u.server_order||[]),console.log("üéØ Server order loaded:",u.server_order)}}catch(a){console.error("Server order fetch error:",a)}})()},[I,_]),o.useEffect(()=>{const t=async()=>{if(!l.id||l.type!=="room"){ao(null);return}try{const a=await _(`${W}/stickies/list/?room=${l.id}`);if(a.ok){const u=await a.json();u&&u.length>0?ao({message:u[0].content,type:"info",author:u[0].creator}):ao(null)}}catch(a){console.error("Sticky messages fetch error:",a)}};n&&l.id&&t()},[l.id,l.type,n,_]);const An=o.useCallback(async t=>{if(!t){Rt([]);return}try{console.log(`üîç [Server Members] Fetching members for server ${t}...`);const a=await _(`${W}/servers/${t}/members/`);if(a.ok){const u=await a.json();console.log(`üë• [Server Members] Fetched ${u.length} members for server ${t}:`,u),Rt(u)}else{const u=await a.text();console.error("‚ùå Server members fetch failed:",a.status,u),Rt([])}}catch(a){console.error("‚ùå Server members fetch error:",a),Rt([])}},[_]),el=o.useCallback(t=>{console.log("üñ±Ô∏è [Server Select] Server clicked:",t.name,t.id),Ti(t),An(t.id),ce("server",t.id,null)},[An,ce]);o.useEffect(()=>{const t=async()=>{if(!l.id||l.type!=="room"){l.type!=="server"&&Rt([]);return}try{let a=null;for(const u of z){if(!u.categories||!Array.isArray(u.categories)){console.warn("‚ö†Ô∏è Server has no categories array:",u);continue}for(const S of u.categories)if(!(!S.rooms||!Array.isArray(S.rooms))){for(const c of S.rooms)if(c.slug===l.id){a=u.id;break}if(a)break}if(a)break}if(!a){console.warn("üî¥ Server ID bulunamadƒ± for room:",l.id),Rt([]);return}An(a)}catch(a){console.error("‚ùå Server members fetch error:",a),Rt([])}};n&&l.id&&l.type==="room"?t():l.type!=="server"&&Rt([])},[l.id,l.type,n,An,z]),o.useEffect(()=>{const t=async()=>{try{const u=await fetch(`${W}/maintenance/status/`);if(u.ok){const S=await u.json();S.active?vr({message:S.message||"System maintenance in progress",endTime:S.end_time,level:S.level||"info"}):vr(null)}}catch(u){console.error("Maintenance check error:",u)}};t();const a=setInterval(t,300*1e3);return()=>clearInterval(a)},[]),o.useEffect(()=>{const t=(S,c)=>{try{const v=S.split(".").map(Number),A=c.split(".").map(Number);return v[0]>A[0]?!0:v[0]<A[0]?!1:v[1]>A[1]?!0:v[1]<A[1]?!1:v[2]>A[2]}catch(v){return console.error("‚ùå Version kar≈üƒ±la≈ütƒ±rma hatasƒ±:",v),!1}},a=async()=>{const S=window.location.hostname==="localhost"&&window.location.port==="3000";if(!yo&&!Lt&&!S){console.log("‚è≠Ô∏è Version check atlandƒ± (web browser)");return}try{console.log("üîç Version kontrol√º yapƒ±lƒ±yor...",{isElectron:yo,isNative:Lt,isDebugMode:S,hostname:window.location.hostname});const c="1.1.203";console.log("üì¶ Mevcut versiyon:",c);const v=await fetch("https://media.pawscord.com/builds/version.json");if(!v.ok){console.warn("‚ö†Ô∏è version.json alƒ±namadƒ±:",v.status);return}const A=await v.json(),Z=A.latest_version;console.log("üåê Son versiyon:",Z),console.log("üìä Kar≈üƒ±la≈ütƒ±rma:",{current:c,latest:Z});const ae=t(Z,c);if(console.log("üîç ƒ∞s newer?",ae),Z&&ae){if(console.log("‚úÖ YENƒ∞ G√úNCELLEME MEVCUT!",{current:c,latest:Z}),ua(!0),window.require){const{ipcRenderer:L}=window.require("electron");L.send("update-available",{currentVersion:c,latestVersion:Z,downloadUrl:A.download_url_windows})}}else console.log("‚ÑπÔ∏è Versiyon g√ºncel veya eski:",c,">=",Z),ua(!1)}catch(c){console.error("‚ùå Version check hatasƒ±:",c)}};a();const u=setInterval(a,1800*1e3);return()=>clearInterval(u)},[]),o.useEffect(()=>{if(!so||!l.id||l.type==="friends"||l.type==="welcome")return;console.log("üîÑ [DEBUG activeChat] Chat deƒüi≈üti:",l);let t=!1;const a=l.type==="room"?`room-${l.id}`:`dm-${l.id}`,u=pt.current[a];return u?.messages?.length>0?(console.log("üì¶ [Cache] Restoring cached messages:",u.messages.length,"(skipping API call)"),Ae(u.messages),Sn(!!u.hasMore),wr(u.offset||0),setTimeout(()=>{t||At("auto")},50),t||Or()):(console.log("üåê [Fetch] No cache, fetching from server..."),wr(0),Sn(!0),t||Or(),setTimeout(()=>{t||Fa(!0,0)},50)),()=>{t=!0,console.log("üßπ [Cleanup] activeChat useEffect cleanup triggered")}},[l.id,l.type,so,Or]),o.useEffect(()=>{Ko?.type==="server_structure_update"&&(console.log("üîÑ Real-time Update: Refetching Server List..."),(async()=>{try{const a=await _(zr);if(a.ok){const u=await a.json();ve(u)}}catch(a){console.error("Real-time Update Failed:",a)}})())},[Ko,_]),o.useEffect(()=>{if(!n||!I)return;const t={current:null},a=async()=>{try{const S=await _(`${W}/users/rich_presence/${I}/`);if(S.ok){const c=await S.json();let v={};const A=L=>{if(!L)return!0;const se=new Date(L);return(new Date-se)/1e3/60<2};c.spotify&&A(c.spotify.timestamp)&&(v.spotify={type:"listening",name:c.spotify.track,details:c.spotify.artist,album_art:c.spotify.album_art}),c.steam&&A(c.steam.timestamp)&&(v.steam={type:"playing",name:c.steam.game,state:c.steam.state}),Object.keys(v).length===0&&(v=null);const Z=JSON.stringify(t.current),ae=JSON.stringify(v);Z!==ae&&(t.current=v,Tn.current&&Tn.current.readyState===WebSocket.OPEN&&Tn.current.send(JSON.stringify({type:"update_activity",activity:v})))}}catch{}},u=setInterval(a,3e4);return a(),()=>clearInterval(u)},[n,I,_]),o.useEffect(()=>{Pr()&&(At("smooth"),kn(!1))},[Hn,Pr,At]),o.useEffect(()=>{Ir()},[l,Ir]),o.useEffect(()=>{const t=a=>{(a.ctrlKey||a.metaKey)&&a.key.toLowerCase()==="k"&&(a.preventDefault(),Va.current?.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),o.useEffect(()=>{if(!n||!so)return;const t=wc();ia(t);const a=`${Vn}://${Un}/ws/status/?username=${encodeURIComponent(I)}&token=${r}`,u=new WebSocket(a);return Tn.current=u,u.onmessage=S=>{const c=JSON.parse(S.data);if(c.type==="online_user_list_update"){const v=Array.isArray(c.users)?c.users.map(A=>typeof A=="string"?A:A.username||A):[];console.log("üë• [Online Users] Updated:",v),Jo(v)}if(c.type==="voice_users_update"&&(console.log("üîä [GlobalWS] Received voice_users_update:",c.voice_users),Yn(c.voice_users)),c.type==="user_activity_update"&&ft(v=>v.map(A=>A.username===c.username?{...A,current_activity:c.activity}:A)),c.type==="user_profile_update"&&c.user_data){const v=c.user_data;v.username===I&&(console.log("üë§ [Profile Update] Updating currentUserProfile:",v),wn(A=>({...A,avatar:v.avatar,status_message:v.status_message,social_links:v.social_links,coins:v.coins,xp:v.xp,level:v.level,status:v.status,role:v.role}))),ft(A=>A.map(Z=>Z.username===v.username?{...Z,...v}:Z))}if(c.type==="global_message_notification"&&c.username!==I){const v=c.room_slug?`room-${c.room_slug}`:`dm-${c.conversation_id}`,A=l.type==="room"?`room-${l.id}`:`dm-${l.id}`;v!==A&&qn(v)}c.type==="server_structure_update"&&(console.log("Server structure update received, refreshing..."),_(zr).then(v=>v.json()).then(v=>ve(v)).catch(console.error))},()=>u.close()},[n,so,I,r,l]),o.useEffect(()=>{x&&C&&(console.log(`üîä [Voice] Switched to voice chat panel: ${C}`),ce("voice",C))},[x,C]);const Na=t=>{ce("room",t),Q&&_e(!1)},Bo=t=>{_(Uu,{method:"POST",body:JSON.stringify({target_username:t})}).then(a=>a.json()).then(a=>{ce("dm",a.conversation_id,t),Q&&_e(!1)})},tl=o.useCallback(t=>{t&&(window.location.hash=t.startsWith("#/")?t:`#${t.startsWith("/")?t:`/${t}`}`,Q&&Ye(!1))},[Q]),ol=o.useCallback(()=>{ya(t=>{const a={...t,notifications:!t.notifications};return localStorage.setItem("chat_sound_settings",JSON.stringify(a)),a})},[]),nl=o.useCallback(async()=>{if(!l?.id)return;const t=`${window.location.origin}/#/${l.type==="dm"?`dm/${l.id}`:`room/${l.id}`}`;try{await navigator.clipboard.writeText(t),fe("Link kopyalandƒ±"),setTimeout(()=>fe(""),1500)}catch(a){console.error("Link kopyalanamadƒ±",a),M.error("Link kopyalanamadƒ±")}},[l]),Fa=async(t=!0,a=0)=>{if(!l.id)return;if(l.type==="voice"){console.log("[Voice] Skipping message history for voice chat"),Ae([]),Sn(!1);return}console.log("üîÑ [fetchMessageHistory] Starting fetch:",{isInitial:t,offset:a,activeChat:l}),yn(!0);const u=l.type==="room"?Mu:zu,S=l.type==="room"?`room-${l.id}`:`dm-${l.id}`;try{const c=await _(`${u}${l.id}/?limit=50&offset=${a}`);if(c.ok){const v=await c.json(),A=v.results||[],Z=A.filter(Le=>!Le||typeof Le!="object"?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Invalid message object:",Le),!1):!Le.id&&!Le.temp_id?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Message without ID:",Le),!1):!0);Z.length<A.length&&console.warn(`‚ö†Ô∏è [fetchMessageHistory] Filtered out ${A.length-Z.length} invalid messages`);const ae=Z.reverse();console.log("‚úÖ [fetchMessageHistory] Fetched messages:",ae.length);let L=ae;t?(console.log("üìù [fetchMessageHistory] Setting messages (INITIAL):",ae.length),Ae(ae),setTimeout(()=>At("auto"),100)):Ae(Le=>(console.log("üìù [fetchMessageHistory] Appending to existing:",Le.length,"+",ae.length),L=[...ae,...Le],L));const se=t?ae.length:a+ae.length,Se=!!v.next;Sn(Se),t||wr(se);const $e=pt.current[S]?.messages||[],Pt=t?ae:[...ae,...$e];pt.current[S]={messages:L||Pt,offset:se,hasMore:Se},console.log("üíæ [fetchMessageHistory] Cached:",S,"with",(L||Pt).length,"messages")}}catch(c){console.error("‚ùå [fetchMessageHistory] Error:",c)}yn(!1)},rl=async(t,a)=>{try{console.log("üîë [Auth] Login attempt:",{username:t,url:ls});const u=await fetch(ls,{method:"POST",body:JSON.stringify({username:t,password:a}),headers:{"Content-Type":"application/json"}});console.log("üîë [Auth] Response status:",u.status);const S=await u.json();u.ok?(console.log("‚úÖ [Auth] Login successful"),p(S.access,S.refresh)):(console.error("‚ùå [Auth] Login failed:",S),u.status===401?qe("Kullanƒ±cƒ± adƒ± veya ≈üifre hatalƒ±"):u.status===400?qe(S.detail||S.error||"Ge√ßersiz giri≈ü bilgileri"):u.status>=500?qe("Sunucu hatasƒ±. L√ºtfen daha sonra tekrar deneyin."):qe(S.detail||S.error||"Giri≈ü ba≈üarƒ±sƒ±z"))}catch(u){console.error("‚ùå [Auth] Network error:",u),qe("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin.")}},al=async(t,a,u)=>{try{console.log("üìù [Auth] Register attempt:",{username:t,email:a,url:cs});const S=await fetch(cs,{method:"POST",body:JSON.stringify({username:t,email:a,password:u}),headers:{"Content-Type":"application/json"}});if(console.log("üìù [Auth] Response status:",S.status),S.status===201)return console.log("‚úÖ [Auth] Registration successful"),!0;const c=await S.json();console.error("‚ùå [Auth] Registration failed:",c);let v="";return c.username?v=c.username.join(" "):c.email?v=c.email.join(" "):c.password?v=c.password.join(" "):c.detail?v=c.detail:v=Object.values(c).flat().join(" "),qe(v||"Kayƒ±t i≈ülemi ba≈üarƒ±sƒ±z"),!1}catch(S){return console.error("‚ùå [Auth] Network error:",S),qe("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin."),!1}},Pn=o.useCallback(async(t,a=!1,u=0,S=null)=>{_r(!0),_n(0);const c=S||l,v=Bn();try{const A=await Gu(t),Z=t.type||"application/octet-stream",ae=10*1024*1024,L=5,se=Math.ceil(t.size/ae);console.log("üöÄ [R2 Multipart] Starting upload:",{fileName:t.name,fileSize:(t.size/(1024*1024)).toFixed(2)+" MB",totalParts:se,parallelUploads:L});const $e=await(await _(`${W}/upload/multipart/init/`,{method:"POST",body:JSON.stringify({file_name:t.name,file_size:t.size,content_type:Z,file_hash:A})})).json();if($e.file_exists){console.log("‚úÖ [R2] File already exists, skipping upload"),M.success("Dosya zaten y√ºkl√º!"),_r(!1),_n(100);return}const{upload_id:Pt,key:Le}=$e;console.log(`üì¶ [R2] Upload ID: ${Pt.substring(0,20)}..., Key: ${Le}`);const On=[];let Ga=0;const pl=async ge=>{const Ge=(ge-1)*ae,It=Math.min(Ge+ae,t.size),mo=t.slice(Ge,It);console.log(`üì§ [R2] Part ${ge}/${se} uploading...`);const No=new FormData;No.append("upload_id",Pt),No.append("key",Le),No.append("part_number",ge.toString()),No.append("chunk",mo,`part_${ge}`);const Dn=await _(`${W}/upload/multipart/upload-part/`,{method:"POST",body:No,headers:{}});if(!Dn.ok){const hl=await Dn.text();throw new Error(`Part ${ge} upload failed: ${Dn.status} - ${hl}`)}const{etag:Ha,part_number:gl}=await Dn.json();Ga++;const Ka=Math.round(Ga/se*95);return _n(Ka),console.log(`‚úÖ [R2] Part ${ge}/${se} complete (${Ka}%), ETag: ${Ha}`),{ETag:Ha,PartNumber:gl}};for(let ge=0;ge<se;ge+=L){const Ge=[];for(let mo=0;mo<L&&ge+mo<se;mo++)Ge.push(pl(ge+mo+1));const It=await Promise.all(Ge);On.push(...It)}On.sort((ge,Ge)=>ge.PartNumber-Ge.PartNumber),console.log("üìã [R2] All parts uploaded, completing...",On);const $r=await _(`${W}/upload/multipart/complete/`,{method:"POST",body:JSON.stringify({upload_id:Pt,key:Le,parts:On,file_name:t.name,file_hash:A,room_slug:c.type==="room"?c.id:null,conversation_id:c.type==="dm"?c.id:null,temp_id:v,is_voice_message:a?"true":"false",duration:u.toString()})});if(!$r.ok){const ge=await $r.text();throw new Error(`Complete failed: ${ge}`)}const Kt=await $r.json();_n(100),console.log("‚úÖ [R2 Multipart] Upload complete!",Kt),c.id===l.id&&(Ae(ge=>{if(Kt.temp_id){const Ge=ge.findIndex(It=>It.temp_id===Kt.temp_id);if(Ge!==-1){const It=[...ge];return It[Ge]=Kt,It}}return Kt.id&&ge.some(Ge=>Ge.id===Kt.id)?ge:[...ge,Kt]}),At("smooth"))}catch(A){console.error("‚ùå [R2 Multipart] Error:",A),M.error(`Y√ºkleme hatasƒ±: ${A.message}`)}_r(!1)},[l,I,_]),sl=t=>{t.preventDefault(),t.stopPropagation(),vn(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&Pn(t.dataTransfer.files[0])},il=(t,a)=>{if(t.preventDefault(),t.stopPropagation(),dn(null),t.dataTransfer.files&&t.dataTransfer.files.length>0){const u=t.dataTransfer.files[0];if(a.type==="dm"){const S=mt.find(c=>c.id===a.id);if(S){const c=S.participants.find(v=>v.username!==I);c&&(Bo(c.username),setTimeout(()=>{Pn(u,!1,0,a)},300))}}else a.type==="room"&&roomsWithCategories.find(c=>c.room_slug===a.id)&&(handleRoomClick(a.id),setTimeout(()=>{Pn(u,!1,0,a)},300))}},ll=async t=>{if(t.preventDefault(),!l.id||!$t.trim()){$t.trim()||Fa(!0,0);return}yn(!0);try{let a=`${W}/messages/search/?q=${encodeURIComponent($t)}`;l.type==="room"?a+=`&room=${l.id}`:a+=`&dm=${l.id}`;const u=await _(a);if(u.ok){const S=await u.json();Ae(S.results||S)}}catch(a){console.error(a)}yn(!1)},Wa=async t=>{if(window.confirm("Bu mesajƒ± silmek istediƒüine emin misin?"))try{(await _(`${W}/messages/${t}/delete/`,{method:"DELETE"})).ok&&Ae(u=>u.filter(S=>S.id!==t))}catch(a){console.error(a)}},cl=async t=>{if(window.confirm("Bu sohbeti listenizden gizlemek istiyor musunuz?"))try{(await _(`${W}/conversations/${t}/hide/`,{method:"POST"})).ok&&(Ee(u=>u.filter(S=>S.id!==t)),l.type==="dm"&&l.id===t&&ce("welcome","welcome"))}catch(a){console.error(a)}},dl=async t=>{if(window.confirm(`‚ö†Ô∏è ADMƒ∞N: Bu konu≈ümayƒ± HER ƒ∞Kƒ∞ TARAFTAN KALICI OLARAK silmek istediƒüinize emin misiniz?

Bu i≈ülem GERƒ∞ ALINAMAZ!`))try{const a=await _(`${W}/conversations/${t}/admin-delete/`,{method:"DELETE"});if(a.ok){const u=await a.json();M.success(`‚úÖ ${u.deleted_messages} mesaj silindi. Katƒ±lƒ±mcƒ±lar: ${u.participants.join(", ")}`),Ee(S=>S.filter(c=>c.id!==t)),l.type==="dm"&&l.id===t&&ce("welcome","welcome")}else{const u=await a.json();M.error(`‚ùå Hata: ${u.error||"Silme i≈ülemi ba≈üarƒ±sƒ±z"}`)}}catch(a){console.error(a),M.error("‚ùå Sunucuyla baƒülantƒ± hatasƒ±")}},ul=o.useCallback(()=>{ce("welcome","welcome",null),Q&&_e(!1)},[Q]),ml=o.useCallback(async(t,a,u)=>{switch(t){case"profile":const S=oe.find(c=>c.username===a.username);S&&rt(S);break;case"message":Bo(a.username);break;case"volume":break;case"move":if(Te&&u&&C)try{(await _(`${W}/voice/move_user/`,{method:"POST",body:JSON.stringify({username:a.username,from_channel:C,to_channel:u})})).ok&&console.log(`‚úÖ ${a.username} moved to ${u}`)}catch(c){console.error("Move user error:",c)}break;case"kick":if(Te&&window.confirm(`${a.username} kullanƒ±cƒ±sƒ±nƒ± kanaldan atmak istediƒüine emin misin?`))try{(await _(`${W}/voice/kick_user/`,{method:"POST",body:JSON.stringify({username:a.username,room:C})})).ok&&console.log(`‚úÖ ${a.username} kicked from voice`)}catch(c){console.error("Kick user error:",c)}break;case"server_mute":if(Te)try{(await _(`${W}/voice/server_mute/`,{method:"POST",body:JSON.stringify({username:a.username,room:C})})).ok&&console.log(`‚úÖ ${a.username} server muted`)}catch(c){console.error("Server mute error:",c)}break;case"add_friend":try{const c=await _(`${W}/friends/send/`,{method:"POST",body:JSON.stringify({username:a.username})});if(c.ok)fe(`‚úÖ ${a.username} kullanƒ±cƒ±sƒ±na arkada≈ülƒ±k isteƒüi g√∂nderildi!`),setTimeout(()=>fe(""),3e3);else{const v=await c.json();fe(`‚ùå ${v.error||"ƒ∞stek g√∂nderilemedi"}`),setTimeout(()=>fe(""),3e3)}}catch(c){console.error("Add friend error:",c),fe("‚ùå Arkada≈ü ekleme hatasƒ±"),setTimeout(()=>fe(""),3e3)}break;case"remove_friend":if(window.confirm(`${a.username} ile arkada≈ülƒ±ƒüƒ± sonlandƒ±rmak istediƒüinize emin misiniz?`))try{const c=Gt.find(v=>v.sender_username===a.username||v.receiver_username===a.username);if(c&&(await _(`${W}/friends/remove/${c.id}/`,{method:"DELETE"})).ok){fe(`‚úÖ ${a.username} ile arkada≈ülƒ±k sonlandƒ±rƒ±ldƒ±`),setTimeout(()=>fe(""),3e3);const A=await _(`${W}/friends/list/`);if(A.ok){const Z=await A.json();br(Z.friends||[])}}}catch(c){console.error("Remove friend error:",c),fe("‚ùå Arkada≈ülƒ±k sonlandƒ±rma hatasƒ±"),setTimeout(()=>fe(""),3e3)}break;case"invite_to_server":Cn({username:a.username});break;case"mute_user":try{const c=await _(`${W}/users/${a.username}/mute/`,{method:"POST"});if(c.ok)M.success(`üîá ${a.username} sessize alƒ±ndƒ±`);else{const v=await c.json();M.error(`‚ùå ${v.error||"Sessize alma ba≈üarƒ±sƒ±z"}`)}}catch(c){console.error("Mute user error:",c),M.error("‚ùå Sessize alma hatasƒ±")}break;case"block_user":if(window.confirm(`${a.username} kullanƒ±cƒ±sƒ±nƒ± engellemek istediƒüinize emin misiniz?`))try{const c=await _(`${W}/users/${a.username}/block/`,{method:"POST"});if(c.ok){M.success(`üö´ ${a.username} engellendi`);const v=await _(`${W}/friends/list/`);if(v.ok){const A=await v.json();br(A.friends||[])}}else{const v=await c.json();M.error(`‚ùå ${v.error||"Engelleme ba≈üarƒ±sƒ±z"}`)}}catch(c){console.error("Block user error:",c),M.error("‚ùå Engelleme hatasƒ±")}break;default:console.log("Unknown action:",t)}},[oe,Te,C,_,W,Bo,Gt,fe]),fl=()=>{if(yo){Dt(!0),fe("ƒ∞ndiriliyor...");const{ipcRenderer:t}=window.require("electron"),a=`${P}/media/build/Pawscord-Setup.exe`;t.send("start-download",a)}else window.open(`${P}/media/build/Pawscord-Setup.exe`,"_blank")};o.useEffect(()=>{if(yo){const{ipcRenderer:t}=window.require("electron"),a=(c,v)=>tn(Math.round(v*100)),u=()=>{fe("Ba≈ülatƒ±lƒ±yor..."),tn(100),setTimeout(()=>fe("Kapanƒ±yor..."),1500)},S=(c,v)=>{Dt(!1),M.error(`ƒ∞ndirme hatasƒ±: ${v}`)};return t.on("download-progress",a),t.on("download-complete",u),t.on("download-error",S),()=>{t.removeAllListeners("download-progress"),t.removeAllListeners("download-complete"),t.removeAllListeners("download-error")}}},[]);const ja=N!=="finished";if(!n)return e.createElement(e.Fragment,null,ja&&e.createElement(ns,{animationState:N}),e.createElement(sd,{onLogin:rl,onRegister:al,error:sr,setAuthError:qe}));const In=Q&&!Lt?"20px":Mt,Dr=l.type==="room"?`room-${l.id}`:`dm-${l.id}`,Ln=!!Jt[Dr];return La?e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"large",text:"Davet y√ºkleniyor..."})},e.createElement(bu,{vanityPath:La,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>{Oa(null),window.location.hash="#/"}})):e.createElement("div",{style:{...F.mainContainer},className:"dark-theme"},ja&&e.createElement(ns,{animationState:N}),En&&e.createElement(Hc,{message:En.message,endTime:En.endTime,level:En.level,onDismiss:()=>vr(null)}),e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"medium",text:"Modal y√ºkleniyor..."})},rr&&e.createElement(_u,{user:it,onClose:()=>sn(!1),onProfileUpdate:t=>wn(t),onLogout:d,fetchWithAuth:_,getDeterministicAvatar:je,updateProfileUrl:Bu,changeUsernameUrl:Fu,soundSettings:$o,onUpdateSoundSettings:ya,onImageClick:vt,apiBaseUrl:P}),oo&&e.createElement(fd,{onClose:()=>Ro(!1)}),dr&&e.createElement(Td,{onClose:()=>Ao(!1),fetchWithAuth:_,apiBaseUrl:P}),Po&&e.createElement(Rd,{onClose:()=>un(!1),onOpenAnalytics:()=>Ao(!0),onOpenWebhooks:()=>mn(!0),onOpenModTools:()=>mr(!0),onOpenAuditLogs:()=>s(!0),onOpenReports:()=>Ft(!0),onOpenVanityURL:()=>no(!0),onOpenAutoResponder:()=>k(!0),fetchWithAuth:_,apiBaseUrl:P}),Oi&&e.createElement(iu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ca(!1),username:I}),Di&&e.createElement(lu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ta(!1),username:I}),$i&&e.createElement(cu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ra(!1),username:I}),Mi&&e.createElement(du,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Aa(!1),username:I}),zi&&e.createElement(uu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Pa(!1),username:I}),Vi&&e.createElement(mu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ia(!1),serverId:l?.type==="room"?l.server_id:null}),Ui&&e.createElement(Ru,{onClose:()=>Da(!1)}),Bi&&e.createElement(Au,{onClose:()=>$a(!1),apiBaseUrl:P}),fn&&e.createElement(Id,{serverId:l?.type==="room"?l.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Io(!1)}),pr&&e.createElement(Od,{serverId:l?.type==="room"?l.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>_t(!1)}),at&&e.createElement(Dd,{serverId:l?.type==="room"?l.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ft(!1)}),ro&&e.createElement($d,{serverId:l?.type==="room"?l.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>s(!1)}),m&&e.createElement(Md,{serverId:l?.type==="room"?l.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>f(!1)}),ur&&e.createElement(Ad,{serverId:l?.type==="room"?l.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>mn(!1)}),fr&&e.createElement(Pd,{serverId:l?.type==="room"?l.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>no(!1)}),E&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ss,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>k(!1)})),b&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(zd,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>h(!1),onMessageClick:t=>{t.room?ce({type:"room",slug:t.room}):t.conversation&&ce({type:"dm",slug:t.conversation}),h(!1)}})),g&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Vd,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>T(!1),onMessageClick:t=>{t.room?ce({type:"room",slug:t.room}):t.conversation&&ce({type:"dm",slug:t.conversation}),T(!1)}})),D&&l?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Ud,{fetchWithAuth:_,apiBaseUrl:P,channelSlug:l.slug,onClose:()=>H(!1)})),fn&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Ld,{fetchWithAuth:_,apiBaseUrl:P,serverId:l?.type==="room"?l.server_id:null,onClose:()=>Io(!1)})),en&&e.createElement(md,{symbol:en,onClose:()=>Ot(null)}),ir&&e.createElement(Sd,{onClose:()=>To(!1),ws:ke,username:I}),Xt&&e.createElement(ud,{onClose:()=>bo(!1),onSend:Qi}),fa&&e.createElement(xd,{onClose:()=>pa(null),server:fa,currentUsername:I,fetchWithAuth:_,apiBaseUrl:P,serverMembers:Ht}),Qn&&e.createElement(_d,{onClose:()=>Qo(!1),onSetKey:t=>Jn(Dr,t),existingKey:Jt[Dr]}),Ri&&e.createElement(kd,{onClose:()=>ma(!1),apiBaseUrl:P}),ga&&e.createElement(as,{isLoading:Ai,summaryText:Pi,onClose:()=>Er(!1)}),Zn&&e.createElement(Cd,{onClose:()=>Zo(!1),friendsList:Gt,fetchWithAuth:_,apiBaseUrl:P,onGroupCreated:t=>{Ee(a=>[t,...a]),ce("dm",t.id,"Grup Sohbeti")}}),Xn&&(l.type==="room"||l.type==="dm")&&e.createElement(pd,{roomSlug:l.type==="room"?l.id:`dm_${l.id}`,onClose:()=>Zt(!1),wsProtocol:Vn,apiHost:Un}),Xo&&e.createElement(gd,{onClose:()=>wt(!1),fetchWithAuth:_,apiBaseUrl:P,sendSignal:ne,absoluteHostUrl:P}),Ii&&e.createElement(Ed,{onClose:()=>Sa(!1),ws:ke,roomSlug:l.id}),ar&&e.createElement(bd,{onSelect:t=>{const a=t.startsWith("http")?t:P+t;Lr(a),cn(!1)},onClose:()=>cn(!1),localGifListUrl:Wu,absoluteHostUrl:P,fetchWithAuth:_}),Pe&&e.createElement(wd,{onClose:()=>Vt(!1),onSelect:t=>{Lr(t),Vt(!1)},fetchWithAuth:_,apiBaseUrl:P}),Eo&&e.createElement(dd,{onClose:()=>nr(!1),fetchWithAuth:_,apiBaseUrl:P,activeRoomSlug:l.id})),gr&&l?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Bd,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:l.slug,onClose:()=>ea(!1)})),hr&&l?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Nd,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:l.slug,onClose:()=>Oo(!1)})),jt&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Fd,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>st(!1)})),Do&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Wd,{fetchWithAuth:_,apiBaseUrl:P,username:I,onClose:()=>hn(!1)})),yr&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(jd,{fetchWithAuth:_,apiBaseUrl:P,username:I,onClose:()=>Sr(!1)})),Rs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Gd,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>As(!1)})),Ps&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Hd,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>Is(!1)})),Ls&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Kd,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Os(!1)})),Ds&&l?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Yd,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:l.slug,onClose:()=>$s(!1)})),Ms&&l?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(qd,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:l.slug,onClose:()=>zs(!1)})),Vs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Jd,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>ta(!1),onLoadDraft:t=>{t.room&&ce({type:"room",slug:t.room}),ta(!1)}})),Us&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Zd,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>Bs(!1)})),Ns&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Xd,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,currentUsername:I,onClose:()=>Fs(!1)})),Ws&&l?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Qd,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:l.slug,onClose:()=>js(!1)})),Gs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(eu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Hs(!1)})),Ks&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ss,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>Ys(!1)})),qs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(tu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Js(!1)})),Zs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ou,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Xs(!1)})),Qs&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(nu,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>ei(!1)})),ti&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ru,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>oa(!1),onSuccess:()=>{M.success("2FA ba≈üarƒ±yla etkinle≈ütirildi!"),oa(!1)}})),oi&&l?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(au,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:l.slug,onClose:()=>ni(!1)})),ri&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(su,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>ai(!1)})),si&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(fu,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>ii(!1)})),li&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(pu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>na(!1),onMessageClick:t=>{t.room&&ce({type:"room",slug:t.room}),na(!1)}})),ci&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(gu,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>di(!1)})),ui&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(hu,{fetchWithAuth:_,apiBaseUrl:P,url:null,onClose:()=>mi(!1)})),fi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(yu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>pi(!1)})),gi&&l?.type==="room"&&l.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Su,{fetchWithAuth:_,apiBaseUrl:P,serverId:l.server_id,onClose:()=>hi(!1)})),yi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(wu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Si(!1)})),wi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"üéÆ Oyunlar Y√ºkleniyor...")},e.createElement(Lu,{fetchWithAuth:_,apiBaseUrl:P,serverId:l?.server_id,currentUser:I,onClose:()=>ra(!1)})),bi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"üìÇ Projeler Y√ºkleniyor...")},e.createElement(Ou,{fetchWithAuth:_,apiBaseUrl:P,serverId:l?.server_id,currentUser:I,onClose:()=>aa(!1)})),Ei&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"üé® Avatar Studio Y√ºkleniyor...")},e.createElement(Du,{fetchWithAuth:_,apiBaseUrl:P,currentUser:I,onClose:()=>sa(!1),onAvatarChange:t=>{it&&wn({...it,avatar_url:t}),M.success("üé® Avatar g√ºncellendi!")}})),Bt&&e.createElement(ld,{imageUrl:Bt,onClose:()=>vt(null)}),to&&e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:"Sabitlenmi≈ü mesajlar y√ºkleniyor..."})},e.createElement(xu,{messages:tt,onClose:()=>ln(!1)})),nt&&e.createElement(cd,{user:nt,onClose:()=>rt(null),onStartDM:Bo,onImageClick:vt,getDeterministicAvatar:je,fetchWithAuth:_,apiBaseUrl:P,currentUser:I,friendsList:Gt}),Q&&xo&&e.createElement("div",{style:F.mobileOverlay,onClick:()=>_e(!1)}),Q&&Co&&e.createElement("div",{style:F.mobileOverlay,onClick:()=>Ye(!1)}),e.createElement("div",{style:F.chatLayout},(!Q||xo)&&e.createElement("div",{style:{...F.sidebarWrapper,...Q&&F.mobileSidebar,paddingTop:In,paddingBottom:rn,height:"100%",boxSizing:"border-box"}},Q&&e.createElement("div",{style:F.mobileSidebarHeader},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement("img",{src:"https://media.pawscord.com/assets/logo.png",alt:"",style:{width:"24px",height:"24px"},onError:t=>{t.target.style.display="none"}}),e.createElement("span",{style:{fontSize:"18px",fontWeight:"bold",color:"white"}},"Pawscord")),e.createElement("button",{onClick:()=>_e(!1),style:F.closeSidebarButton},e.createElement(jo,null))),e.createElement(vu,{onFriendsClick:()=>ce("friends","friends"),onRoomSelect:Na,onDMSelect:(t,a)=>ce("dm",t,a),onWelcomeClick:ul,setIsLeftSidebarVisible:_e,onProfileClick:()=>sn(!0),onViewUserProfile:t=>{const a=oe.find(u=>u.username===t);a&&rt(a)},onOpenStore:()=>Ro(!0),onOpenServerSettings:t=>pa(t),categories:Fi,onServerDragStart:Ki,onServerDragOver:Yi,onServerDragEnd:qi,onServerDrop:Ji,conversations:mt,allUsers:oe,onlineUsers:Rr,serverMembers:Ht,isAdmin:Te,friendsList:Gt,pendingFriendRequests:xi,currentUsername:I,currentUserProfile:it,getRealUserAvatar:Ze,getDeterministicAvatar:je,unreadCounts:Yo,joinVoiceChat:O,leaveVoiceChat:K,voiceUsers:Kn,isConnecting:R,currentVoiceRoom:C,currentRoom:C,currentConversationId:l.type==="dm"?l.id:null,remoteVolumes:j,setRemoteVolume:q,isPttActive:me,apiBaseUrl:P,fetchWithAuth:_,onHideConversation:cl,handleDrop:il,dropTarget:lr,setDropTarget:dn,isDragging:wa,onOpenCreateGroup:()=>Zo(!0),toggleMute:ee,toggleDeafened:G,isMuted:$,isDeafened:V,isInVoice:x,toggleVideo:B,toggleScreenShare:U,isVideoEnabled:Y,isScreenSharing:de,updateAvailable:da,onUpdateClick:()=>ma(!0),onOpenAnalytics:()=>Ao(!0),onOpenAdminPanel:()=>un(!0),onOpenPaymentPanel:()=>Ca(!0),onOpenStoreModal:()=>Ta(!0),onOpenDailyRewards:()=>Ra(!0),onOpenAPIUsage:()=>Aa(!0),onOpenExportJobs:()=>Pa(!0),onOpenScheduledAnnouncements:()=>Ia(!0),onOpenMiniGames:()=>ra(!0),onOpenProjectCollaboration:()=>aa(!0),onOpenAvatarStudio:()=>sa(!0),onServerSelect:el})),e.createElement("div",{style:F.mainContent},e.createElement("div",{style:{position:"absolute",top:60,left:0,right:0,zIndex:90}},e.createElement(ad,{message:la?.message,type:la?.type,onDismiss:()=>ao(null)})),l.type==="friends"?e.createElement("div",{style:{width:"100%",height:"100%",paddingTop:In}},e.createElement(Eu,{fetchWithAuth:_,apiBaseUrl:P,onStartDM:Bo,getDeterministicAvatar:je,onClose:()=>ce("welcome","welcome"),onPendingCountChange:Ci,onlineUsers:Rr})):l.type==="welcome"?e.createElement("div",{style:{width:"100%",height:"100%"}},e.createElement(id,{isMobile:Q,onOpenMenu:()=>_e(!0),onOpenRightMenu:()=>Ye(!0),updateAvailable:da,isDownloading:er,downloadProgress:tr,updateStatusText:or,onStartUpdate:fl,onSwitchToFriends:()=>{ce("friends","friends"),Q&&_e(!1)},onSwitchToAI:()=>{Na("ai")},onSwitchToCinema:()=>{To(!0),Q&&_e(!1)}})):Gi==="kanban"?e.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},e.createElement("div",{style:F.chatHeader},e.createElement("h2",null,"# ",Uo," (Pano)")),e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"medium",text:"Pano y√ºkleniyor..."})},e.createElement(hd,{roomSlug:l.id,apiBaseUrl:P,fetchWithAuth:_}))):l.type==="voice"&&x?e.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#2f3136"}},e.createElement("div",{style:{...F.chatHeader,justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},Q&&e.createElement("button",{onClick:()=>ce("welcome","welcome"),style:{...F.mobileMenuButton}},"‚Üê"),e.createElement("h2",{style:{margin:0,fontSize:"1.2em"}},"üîä ",C)),e.createElement("button",{onClick:()=>{K(),ce("welcome","welcome")},style:{background:"#ed4245",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold"}},"Baƒülantƒ±yƒ± Kes")),e.createElement(is,{roomName:C,onClose:()=>{K(),ce("welcome","welcome")},isMinimized:!1,onToggleMinimize:()=>{},getRealUserAvatar:Ze,allUsers:oe,currentUserProfile:it})):e.createElement("div",{style:{...F.chatArea,position:"relative",paddingTop:In,boxSizing:"border-box"},onDrop:sl,onDragOver:t=>{t.preventDefault(),vn(!0)},onDragEnter:t=>{t.preventDefault(),vn(!0)},onDragLeave:t=>{t.preventDefault(),t.target===t.currentTarget&&vn(!1)}},e.createElement("div",{style:{...F.chatHeader,justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",overflow:"hidden",gap:"8px"}},Q&&!xo&&e.createElement("button",{onClick:()=>_e(!0),style:{...F.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Men√ºy√º A√ß"},"‚ò∞"),Q&&(l.type==="dm"||l.type==="room")&&e.createElement("button",{onClick:()=>{ce("welcome","welcome"),_e(!1),Ye(!1)},style:{...F.mobileMenuButton,fontSize:"1.2em"},"aria-label":"Geri"},"‚Üê"),e.createElement("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0,fontSize:Q?"1em":"1.1em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},l.type==="dm"?`@ ${String(l.targetUser||"DM")}`:`# ${String(Uo)}`),e.createElement("div",{style:Ke?F.connectionPillOnline:F.connectionPillOffline},Ke?"Bagli":"Kopuk")),e.createElement("div",{style:{display:"flex",gap:Q?"5px":"10px",alignItems:"center",flexWrap:Q?"nowrap":"wrap",position:"relative"}},e.createElement("form",{onSubmit:ll,style:F.searchForm},e.createElement("input",{type:"text",placeholder:"Ara...",value:on,onChange:t=>nn(t.target.value),style:F.searchInput,ref:Va}),e.createElement(xl,{style:F.searchIcon})),!Q&&za.length>0&&e.createElement("span",{style:F.typingIndicator},za.join(", ")," yazƒ±yor..."),e.createElement("button",{onClick:()=>ka(!xr),style:{...F.iconButton,color:xr?"#5865f2":"#b9bbbe",position:"relative"},title:"Bildirimler"},e.createElement(Ya,null)),xr&&e.createElement("div",{style:{position:"absolute",top:"54px",right:"20px",zIndex:1e3}},e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:""})},e.createElement(Pu,{currentUser:I,onClose:()=>ka(!1),fetchWithAuth:_,apiBaseUrl:P}))),e.createElement("div",{className:"toolbar-menu-container",style:{position:"relative"}},e.createElement("button",{onClick:()=>Fe(!Mo),style:{...F.iconButton,color:Mo?"#5865f2":"#b9bbbe",fontSize:"1.2em",fontWeight:"bold"},title:"Daha Fazla"},"‚ãÆ"),Mo&&e.createElement("div",{style:{position:"absolute",top:"50px",right:"0",backgroundColor:"#2f3136",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.4)",minWidth:"220px",zIndex:1e3,overflow:"hidden",border:"1px solid #202225"}},l.type==="dm"&&e.createElement("button",{onClick:()=>{Qo(!0),Fe(!1)},style:{...F.menuItem,color:Ln?"#43b581":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=Ln?"#43b581":"#dcddde"}},Ln?e.createElement(qa,null):e.createElement(qa,{style:{opacity:.5}}),e.createElement("span",null,Ln?"≈ûifreli":"≈ûifrele")),e.createElement("button",{onClick:()=>{ln(!to),Fe(!1)},style:{...F.menuItem,color:to?"#f5a524":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=to?"#f5a524":"#dcddde"}},e.createElement(Cl,null),e.createElement("span",null,"Sabitli Mesajlar")),e.createElement("button",{onClick:()=>{nl(),Fe(!1)},style:F.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Tl,null),e.createElement("span",null,"Baƒülantƒ±yƒ± Kopyala")),e.createElement("button",{onClick:()=>{ol(),Fe(!1)},style:{...F.menuItem,color:$o.notifications?"#43b581":"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=$o.notifications?"#43b581":"#f04747"}},$o.notifications?e.createElement(Ya,null):e.createElement(Rl,null),e.createElement("span",null,$o.notifications?"Sessize Al":"Sesi A√ß")),e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{To(!0),Fe(!1)},style:F.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Al,null),e.createElement("span",null,"Sinema Modu")),e.createElement("button",{onClick:()=>{Sa(!0),Fe(!1)},style:F.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Pl,null),e.createElement("span",null,"DJ Modu")),e.createElement("button",{onClick:()=>{Zt(!0),Fe(!1)},style:F.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Il,null),e.createElement("span",null,"Beyaz Tahta")),x&&e.createElement("button",{onClick:()=>{wt(!0),Fe(!1)},style:F.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Ja,null),e.createElement("span",null,"Ses Efektleri")),l.type==="room"&&e.createElement(e.Fragment,null,e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{Xi(),Fe(!1)},style:F.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Ja,null),e.createElement("span",null,"Sohbeti √ñzetle")),e.createElement("button",{onClick:()=>{Zi(),Fe(!1)},style:{...F.menuItem,color:"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#f04747",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#f04747"}},e.createElement(Ll,null),e.createElement("span",null,"Sohbeti Temizle")),I==="admin"&&l.type==="dm"&&e.createElement(e.Fragment,null,e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{dl(l.id),Fe(!1)},style:{...F.menuItem,color:"#ed4245",fontWeight:"bold"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#ed4245",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#ed4245"},title:"Admin: Konu≈ümayƒ± kalƒ±cƒ± olarak sil (her iki taraftan)"},e.createElement(Ol,null),e.createElement("span",null,"‚ö†Ô∏è KALICI Sƒ∞L (ADMƒ∞N)")))))),Q&&!Co&&e.createElement("button",{onClick:()=>Ye(!0),style:{...F.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Kullanƒ±cƒ±larƒ± G√∂ster"},e.createElement(Br,null)))),e.createElement("div",{style:F.messageBox,ref:Tr,onScroll:Hi},_i?e.createElement("p",{style:F.systemMessage},"Y√ºkleniyor..."):Ar.length>50?e.createElement(od,{messages:Ar,scrollToBottom:!0,renderMessage:(t,a)=>e.createElement(rs,{key:t.id||t.temp_id||a,msg:t,currentUser:I,absoluteHostUrl:P,isAdmin:Te,onImageClick:vt,fetchWithAuth:_,allUsers:oe,getDeterministicAvatar:je,onShowChart:Ot,onDelete:Wa,onStartEdit:co,onSetReply:Ea,onToggleReaction:()=>{},onStartForward:va,isSelectionMode:_a,isSelected:Ut.has(t.id),onToggleSelection:u=>{const S=new Set(Ut);S.has(u)?S.delete(u):S.add(u),Ie(S)},onScrollToMessage:Ba,onViewProfile:u=>rt(oe.find(S=>S.username===u)),onTogglePin:u=>{}})}):e.createElement(e.Fragment,null,Ar.map((t,a)=>{const u=t.id||t.temp_id||a;return e.createElement(rs,{key:u,msg:t,currentUser:I,absoluteHostUrl:P,isAdmin:Te,onImageClick:vt,fetchWithAuth:_,allUsers:oe,getDeterministicAvatar:je,onShowChart:Ot,onDelete:Wa,onStartEdit:co,onSetReply:Ea,onToggleReaction:()=>{},onStartForward:va,isSelectionMode:_a,isSelected:Ut.has(t.id),onToggleSelection:S=>{const c=new Set(Ut);c.has(S)?c.delete(S):c.add(S),Ie(c)},onScrollToMessage:Ba,onViewProfile:S=>rt(oe.find(c=>c.username===S)),onTogglePin:S=>{}})}),e.createElement("div",{ref:Cr,style:{float:"left",clear:"both",height:1}}))),Li&&e.createElement("button",{type:"button",style:F.scrollToBottomButton,onClick:()=>{At("smooth"),kn(!1)},"aria-label":"En alta in"},"En alta in"),e.createElement("div",{style:{...F.inputContainer,paddingBottom:Lt?`calc(16px + ${rn})`:Q?"25px":"16px"}},wa&&e.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(88, 101, 242, 0.2)",border:"2px dashed #5865f2",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1e3}},e.createElement("div",{style:{color:"#5865f2",fontSize:"1.2em",fontWeight:"bold"}},"üìÅ Dosyayƒ± buraya bƒ±rakƒ±n")),ba&&kr>0&&e.createElement("div",{style:{position:"absolute",top:"-40px",left:"16px",right:"16px",backgroundColor:"#2b2d31",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",zIndex:1001}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement("span",{style:{color:"#b9bbbe",fontSize:"12px",whiteSpace:"nowrap"}},"üì§ Y√ºkleniyor: ",kr,"%"),e.createElement("div",{style:{flex:1,height:"6px",backgroundColor:"#40444b",borderRadius:"3px",overflow:"hidden"}},e.createElement("div",{style:{width:`${kr}%`,height:"100%",backgroundColor:"#5865f2",borderRadius:"3px",transition:"width 0.3s ease"}})))),e.createElement(nd,{onSendMessage:Lr,onFileUpload:Pn,onShowCodeSnippet:()=>bo(!0),placeholder:Uo?`${l.type==="dm"?Uo:`# ${Uo}`} kanalƒ±na mesaj g√∂nder`:"Mesaj yaz...",disabled:ba,fetchWithAuth:_,apiBaseUrl:P,activeChat:l}))),(!Q||Co)&&e.createElement("div",{style:{...F.chatUserListPanel,...Q?F.mobileRightSidebar:{},paddingTop:In}},Q&&e.createElement("div",{style:F.mobileSidebarHeader},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Br,{size:18,color:"#b9bbbe"}),e.createElement("span",{style:{fontSize:"16px",fontWeight:"bold",color:"white"}},l.type==="room"?"Sunucu √úyeleri":l.type==="friends"?"√áevrimi√ßi":"Arkada≈ülar")),e.createElement("button",{onClick:()=>Ye(!1),style:F.closeSidebarButton},e.createElement(jo,null))),e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:"Kullanƒ±cƒ±lar y√ºkleniyor..."})},e.createElement(ku,{chatUsers:[],allUsers:oe,onlineUsers:Rr,currentUser:I,currentUserProfile:it,getDeterministicAvatar:je,onUserClick:t=>{let a=oe.find(u=>u.username===t);if(!a&&Ht.length>0){const u=Ht.find(S=>S.username===t);u&&(a={username:u.username,display_name:u.username,avatar:je(u.username),role:u.role||"member"})}a&&rt(a)},onUserContextMenu:(t,a)=>{if(a===I)return;const u=oe.find(S=>S.username===a);u&&xa({x:t.clientX,y:t.clientY,user:u,permissions:Ni})},activeChat:l,serverMembers:Ht,friendsList:Gt,onNavigate:tl})))),x&&e.createElement(rd,{remoteStreams:ie,remoteVolumes:j,mutedUsers:ct}),x&&!ut&&l.type!=="voice"&&e.createElement("button",{onClick:()=>_o(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9998,background:"#5865f2",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"all 0.2s"},title:"Ses Panelini A√ß",onMouseEnter:t=>t.currentTarget.style.transform="scale(1.1)",onMouseLeave:t=>t.currentTarget.style.transform="scale(1)"},"üé§"),x&&ut&&l.type!=="voice"&&e.createElement(e.Fragment,null,bt?e.createElement(is,{roomName:C,onClose:()=>{_o(!1)},isMinimized:eo,onToggleMinimize:()=>ko(!eo),getRealUserAvatar:Ze,allUsers:oe,currentUserProfile:it}):e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:"Sesli sohbet y√ºkleniyor..."})},e.createElement(Cu,{islandState:Ue,onDrag:t=>an(a=>({...a,x:t.x,y:t.y})),onResize:t=>an(a=>({...a,width:t.width,height:t.height})),isMobile:Q,headerActions:e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"}},e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéõÔ∏è [VoiceIsland] Hiding panel"),_o(!1)},style:{background:"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:"Paneli Gizle"},e.createElement(jo,null)),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üé§ [VoiceIsland] Mute toggle clicked"),ee()},style:{background:$?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:$?"Mikrofonu A√ß":"Mikrofonu Kapat"},e.createElement(jr,{style:{opacity:$?.5:1}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéß [VoiceIsland] Deafen toggle clicked"),G()},style:{background:V?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:V?"Sesi A√ß":"Sesi Kapat"},e.createElement(Dl,{style:{opacity:V?.5:1}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üìπ [VoiceIsland] Video toggle clicked"),B()},style:{background:Y?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:Y?"Kamerayƒ± Kapat":"Kamerayƒ± A√ß"},e.createElement($l,{style:{opacity:Y?1:.5}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üñ•Ô∏è [VoiceIsland] Screen share toggle clicked"),U()},style:{background:de?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:de?"Ekran Payla≈üƒ±mƒ±nƒ± Durdur":"Ekranƒ± Payla≈ü"},e.createElement(Ml,{style:{opacity:de?1:.5}})),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:K,style:{background:"#ed4245",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},title:"Odadan Ayrƒ±l"},e.createElement(zl,null)),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:()=>St(t=>({...t,isActive:!t.isActive})),style:{background:De.isActive?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},De.isActive?"üé¨ Kapat":"üçø Sinema"),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("select",{onChange:t=>ye(t.target.value),value:Ve,style:{background:"rgba(0,0,0,0.3)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"4px",padding:"2px 4px",fontSize:"12px",cursor:"pointer",outline:"none"}},e.createElement("option",{value:"none"},"Normal"),e.createElement("option",{value:"robot"},"ü§ñ Robot"),e.createElement("option",{value:"child"},"üë∂ Bebek"),e.createElement("option",{value:"monster"},"üëπ Canavar")),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("div",{style:{display:"flex",gap:"5px"}},e.createElement("button",{onClick:()=>Ce("reset"),title:"Reset Game",style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px"}},"üîÑ"),["ü™®","üìÑ","‚úÇÔ∏è"].map((t,a)=>{const u=a===0?"rock":a===1?"paper":"scissors";return e.createElement("button",{key:t,onClick:()=>Ce("move",u),style:{background:He?.moves?.[I]===u?"rgba(88, 101, 242, 0.5)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"50%",cursor:"pointer",fontSize:"16px",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.1s"},title:`Play ${u}`},t)})),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("div",{style:{display:"flex",gap:"5px"}},["‚ù§Ô∏è","üòÇ","üòÆ","üëç","üéâ"].map(t=>e.createElement("button",{key:t,onClick:()=>ze(t),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px",padding:"0 4px",transition:"transform 0.1s"},onMouseEnter:a=>a.target.style.transform="scale(1.2)",onMouseLeave:a=>a.target.style.transform="scale(1)",title:`Send ${t}`},t))))},De.isActive?e.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},e.createElement("div",{style:{flex:1,minHeight:0,position:"relative"}},e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"large",text:"Cinema Player y√ºkleniyor...",fullscreen:!0})},e.createElement(Tu,null))),e.createElement("div",{style:{height:"140px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",background:"rgba(0,0,0,0.5)",flexShrink:0,alignItems:"center"}},(()=>{const t=[];return t.push({id:"local-cam",user:{username:I,is_talking:J,is_mic_off:$,is_deafened:V},track:ue?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:Ze(I)}),be&&t.push({id:"local-screen",user:{username:I},track:be.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:Ze(I)}),Object.entries(ie||{}).forEach(([a,u])=>{const S=u.getVideoTracks(),c=u.getAudioTracks();S.length>0?S.forEach(v=>t.push({id:`${a}-${v.id}`,user:{username:a},track:v,streamType:"camera",isLocal:!1,avatarUrl:Ze(a)})):c.length>0&&t.push({id:`${a}-audio`,user:{username:a},track:c[0],streamType:"camera",isLocal:!1,avatarUrl:Ze(a)})}),t.map(a=>e.createElement(zn,{key:a.id,...a,style:{height:"100%",aspectRatio:"16/9",minWidth:"160px"},lastReaction:X,gameMove:He?.moves?.[a.user.username]}))})())):e.createElement("div",{style:{...F.videoGrid,flexDirection:We?"column":"row",flexWrap:We?"nowrap":"wrap",overflowY:"auto",height:"100%"}},(()=>{const t=[];if(t.push({id:"local-cam",user:{username:I,is_talking:J,is_mic_off:$,is_deafened:V},track:ue?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:Ze(I)}),be?.getVideoTracks()[0]&&t.push({id:"local-screen",user:{username:I,is_talking:!1},track:be.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:Ze(I)}),Object.entries(ie||{}).forEach(([u,S])=>{if(u!==I){const c=S.getVideoTracks(),v=S.getAudioTracks();c.length>0?c.forEach(A=>{t.push({id:`${u}-${A.id}`,user:{username:u},track:A,streamType:A.label?.toLowerCase().includes("screen")?"screen":"camera",isLocal:!1,avatarUrl:Ze(u)})}):v.length>0&&t.push({id:`${u}-audio`,user:{username:u},track:v[0],streamType:"camera",isLocal:!1,avatarUrl:Ze(u)})}}),We){const u=t.find(c=>c.id===We);if(!u)return Qt(null),a(t);const S=t.filter(c=>c.id!==We);return e.createElement(e.Fragment,null,e.createElement("div",{style:{flex:1,width:"100%",minHeight:"300px",padding:"0",overflow:"hidden",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"}},e.createElement(zn,{...u,style:{width:"100%",height:"100%",maxWidth:"100%",borderRadius:"0",maxHeight:"100%",margin:"0 auto",aspectRatio:"unset"},onClick:()=>Qt(null),lastReaction:X,gameMove:He?.moves?.[u.user?.username]})),e.createElement("div",{style:{height:"120px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",flexShrink:0,justifyContent:"center"}},S.map(c=>e.createElement(zn,{key:c.id,...c,style:{width:"180px",height:"100%",flexShrink:0,aspectRatio:"16/9"},onClick:()=>Qt(c.id),lastReaction:X,gameMove:He?.moves?.[c.user.username]}))))}else return a(t);function a(u){return u.map(S=>e.createElement(zn,{key:S.id,...S,style:{width:"240px",maxWidth:"100%",flexGrow:1,height:"auto"},onClick:()=>Qt(S.id),lastReaction:X,gameMove:He?.moves?.[S.user.username]}))}})())))),cr&&e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"medium",text:"Temalar y√ºkleniyor..."})},e.createElement(vd,{onClose:()=>Nt(!1),currentTheme:vi,onThemeChange:ia})),ga&&e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"medium",text:"√ñzet hazƒ±rlanƒ±yor..."})},e.createElement(as,{roomSlug:l.id,onClose:()=>Er(!1),fetchWithAuth:_,apiBaseUrl:P})),Zr&&e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:"≈ûablonlar y√ºkleniyor..."})},e.createElement(yd,{onClose:()=>dt(!1),onSelect:t=>{Vo.current?.appendText?.(t),dt(!1)},fetchWithAuth:_,apiBaseUrl:P,isAdmin:Te}))),xn&&e.createElement(Iu,{x:xn.x,y:xn.y,user:xn.user,currentUser:I,onClose:()=>xa(null),onAction:ml,voiceChannels:z.flatMap(t=>(t.categories||[]).flatMap(a=>(a.rooms||[]).filter(u=>u.is_voice))),isAdmin:Te,isInVoiceRoom:x,friendsList:Gt}),zo&&wl.createPortal(e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999999},onClick:()=>Cn(null)},e.createElement("div",{onClick:t=>t.stopPropagation(),style:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"400px",maxHeight:"80vh",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"}},e.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #3f4147",textAlign:"center"}},e.createElement("h2",{style:{color:"#f2f3f5",margin:0,fontSize:"18px"}},"üé´ Sunucuya Davet Et"),e.createElement("p",{style:{color:"#b9bbbe",margin:"8px 0 0",fontSize:"14px"}},e.createElement("strong",null,zo.username)," kullanƒ±cƒ±sƒ±nƒ± hangi sunucuya davet etmek istiyorsunuz?")),e.createElement("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"12px"}},z.map(t=>e.createElement("div",{key:t.id,onClick:async()=>{try{const a=await _(`${W}/servers/${t.id}/invite/`,{method:"POST",body:JSON.stringify({target_username:zo.username})});if(a.ok)M.success(`üé´ ${zo.username} kullanƒ±cƒ±sƒ±na davetiye g√∂nderildi!`);else{const u=await a.json();u.error&&u.error.includes("zaten")?M.info(`‚ÑπÔ∏è ${zo.username} zaten bu sunucunun √ºyesi!`):M.error(`‚ùå ${u.error||"Davet g√∂nderilemedi"}`)}}catch(a){console.error("‚ùå Invite error:",a),M.error("‚ùå Baƒülantƒ± hatasƒ±")}Cn(null)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",backgroundColor:"rgba(255,255,255,0.02)",marginBottom:"8px"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="rgba(88, 101, 242, 0.2)"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"}},t.icon?e.createElement("img",{src:t.icon,alt:t.name,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover"}}):e.createElement("div",{style:{width:40,height:40,borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"white",fontSize:"16px"}},t.name?.substring(0,2).toUpperCase()),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{color:"#f2f3f5",fontWeight:"600"}},t.name),e.createElement("div",{style:{color:"#b9bbbe",fontSize:"12px"}},t.member_count||t.categories?.length||0," √ºye")),e.createElement("div",{style:{color:"#5865f2",fontSize:"20px"}},"‚Üí")))),e.createElement("div",{style:{padding:"16px 20px",borderTop:"1px solid #3f4147",textAlign:"center"}},e.createElement("button",{onClick:()=>Cn(null),style:{backgroundColor:"#4f545c",color:"#f2f3f5",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"600"}},"ƒ∞ptal")))),document.body))},F={mainContainer:{display:"flex",width:"100%",height:"100dvh",backgroundColor:"#1E1F22",backgroundImage:"radial-gradient(circle at 50% 10%, rgba(88, 101, 242, 0.05) 0%, transparent 40%)",color:"white",overflow:"hidden",fontFamily:"'Inter', sans-serif"},chatLayout:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},sidebarWrapper:{width:"312px",backgroundColor:"rgba(30, 31, 34, 0.6)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"row",flexShrink:0,height:"100%",borderRight:"1px solid rgba(255,255,255,0.05)"},mainContent:{flex:1,display:"flex",minWidth:0,position:"relative",height:"100%",overflow:"hidden"},chatArea:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"transparent",minWidth:0,height:"100%",overflow:"hidden",position:"relative"},chatHeader:{height:"54px",minHeight:"54px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",padding:"0 20px",flexShrink:0,backgroundColor:"rgba(20, 21, 24, 0.7)",backdropFilter:"blur(15px)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",zIndex:10},messageBox:{flex:1,overflowY:"auto",padding:"20px 0",display:"flex",flexDirection:"column",gap:"4px",scrollBehavior:"smooth",minHeight:0},inputContainer:{padding:"0 20px 24px 20px",backgroundColor:"transparent",position:"relative",flexShrink:0,minHeight:"auto",zIndex:20},chatUserListPanel:{width:"240px",backgroundColor:"rgba(30, 31, 34, 0.6)",borderLeft:"1px solid rgba(255,255,255,0.08)",flexShrink:0,height:"100%",backdropFilter:"blur(10px)"},mobileSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,left:0,width:"85vw",maxWidth:"350px",boxShadow:"5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileRightSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,right:0,width:"85vw",maxWidth:"300px",boxShadow:"-5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99,backdropFilter:"blur(3px)"},mobileMenuButton:{background:"none",border:"none",color:"white",fontSize:"1.5em",marginRight:"10px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",transition:"all 0.2s"},iconButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"1.3em",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",borderRadius:"50%",transition:"all 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff"}},videoGrid:{display:"flex",flexWrap:"wrap",gap:"5px",padding:"5px",alignContent:"center",justifyContent:"center",alignItems:"center"},systemMessage:{color:"#949ba4",textAlign:"center",fontSize:"0.85em",margin:"10px 0",fontStyle:"italic"},searchForm:{position:"relative",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"4px",padding:"0 8px",height:"32px",marginRight:"8px",border:"1px solid rgba(255,255,255,0.05)"},searchInput:{backgroundColor:"transparent",border:"none",color:"#dcddde",fontSize:"0.9em",width:"140px",outline:"none"},searchIcon:{color:"#949ba4",fontSize:"0.8em",cursor:"pointer"},typingIndicator:{color:"#dbdee1",fontSize:"0.85em",maxWidth:"180px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold"},connectionPillOnline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(59, 165, 93, 0.2)",border:"1px solid #3ba55d",color:"#3ba55d",fontSize:"0.75em",fontWeight:700},connectionPillOffline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(218, 55, 60, 0.2)",border:"1px solid #da373c",color:"#da373c",fontSize:"0.75em",fontWeight:700},scrollToBottomButton:{position:"absolute",right:"16px",bottom:"110px",backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.35)",cursor:"pointer",fontWeight:600},mobileSidebarHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",backgroundColor:"#202225",borderBottom:"1px solid #111214",minHeight:"54px",flexShrink:0},closeSidebarButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"22px",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background 0.2s, color 0.2s"},menuItem:{width:"100%",padding:"10px 16px",background:"transparent",border:"none",color:"#dcddde",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:"500",transition:"all 0.15s ease",borderRadius:"0"}};function Ku(){return e.createElement(rc,{fallbackMessage:"Pawscord encountered an error. Please try refreshing the page."},e.createElement(Wc,null,e.createElement(Hu,null)))}const Yu=`${Uc}/auth/verify-email/`,qu=()=>{const{token:i}=fs(),n=Gn(),[r,p]=o.useState("loading"),[d,w]=o.useState("Hesabƒ±nƒ±z doƒürulanƒ±yor, l√ºtfen bekleyin...");return o.useEffect(()=>{if(!i){p("error"),w("Ge√ßersiz veya eksik doƒürulama kodu.");return}const x=async()=>{try{const R=await fetch(`${Yu}${i}/`),C=await R.json();R.ok?(p("success"),w("√úyeliƒüiniz ba≈üarƒ±yla aktif edildi!")):(p("error"),w(C.message||"Doƒürulama ba≈üarƒ±sƒ±z oldu."))}catch{p("error"),w("Sunucuya baƒülanƒ±lamadƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.")}};setTimeout(()=>{x()},1e3)},[i]),e.createElement("div",{style:Me.container},e.createElement("div",{style:Me.card},r==="loading"&&e.createElement("div",{style:Me.content},e.createElement(gs,{className:"spin-animation",size:50,color:"#5865f2",style:{marginBottom:20}}),e.createElement("h2",{style:Me.title},"Doƒürulanƒ±yor..."),e.createElement("p",{style:Me.text},d)),r==="success"&&e.createElement("div",{style:Me.content},e.createElement(Gr,{size:60,color:"#43b581",style:{marginBottom:20}}),e.createElement("h2",{style:{...Me.title,color:"#43b581"}},"Tebrikler! üéâ"),e.createElement("p",{style:Me.text},d),e.createElement("p",{style:Me.subText},"Artƒ±k Pawscord'a tam eri≈üim saƒülayabilirsin."),e.createElement("button",{onClick:()=>n("/"),style:Me.primaryButton},"Gƒ∞Rƒ∞≈û YAP")),r==="error"&&e.createElement("div",{style:Me.content},e.createElement(Hr,{size:60,color:"#f04747",style:{marginBottom:20}}),e.createElement("h2",{style:{...Me.title,color:"#f04747"}},"Hata Olu≈ütu"),e.createElement("p",{style:Me.text},d),e.createElement("button",{onClick:()=>n("/"),style:Me.secondaryButton},"Ana Sayfaya D√∂n"))))},Me={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#1e1f22",fontFamily:"'Poppins', sans-serif",padding:"20px"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",maxWidth:"400px",width:"100%",textAlign:"center",border:"1px solid #1f2023"},content:{display:"flex",flexDirection:"column",alignItems:"center"},title:{margin:"0 0 10px 0",color:"#fff",fontSize:"1.8em"},text:{color:"#dbdee1",fontSize:"1.1em",margin:"0 0 20px 0",lineHeight:"1.5"},subText:{color:"#949ba4",fontSize:"0.9em",marginBottom:"30px"},primaryButton:{backgroundColor:"#5865f2",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",width:"100%"},secondaryButton:{backgroundColor:"#4f545c",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",width:"100%"}},ks=document.createElement("style");ks.innerText=`
  .spin-animation { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(ks);const Ju=e.memo(qu),Zu=()=>{const{code:i}=fs(),n=Gn(),{isAuthenticated:r,token:p}=Go(),[d,w]=o.useState(null),[x,R]=o.useState(!0),[C,O]=o.useState(""),[K,$]=o.useState(!1),[V,ee]=o.useState(!1),G="8888",B=window.Capacitor&&window.Capacitor.isNativePlatform(),U=typeof window<"u"&&typeof window.require=="function",q=`${(()=>{if(B)return"https://www.pawscord.com";if(U)return`http://127.0.0.1:${G}`;const J=window.location.protocol,ne=window.location.hostname;return ne.includes("pawscord.com")?"https://www.pawscord.com":`${J}//${ne}:${G}`})()}/api`;o.useEffect(()=>{console.log("üé´ [Invite Page] Loaded with code:",i),ue()},[i]);const ue=async()=>{console.log("üîç [Invite Page] Fetching invite info..."),R(!0),O("");try{const J=await fetch(`${q}/invites/${i}/`),ne=await J.json();console.log("üì¶ [Invite Page] Response:",{status:J.status,data:ne}),J.ok?(w(ne),console.log("‚úÖ [Invite Page] Invite info loaded")):(O(ne.error||"Davet bulunamadƒ±"),console.error("‚ùå [Invite Page] Error:",ne.error))}catch(J){console.error("‚ùå [Invite Page] Network error:",J),O("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}R(!1)},ie=async()=>{if(!r){console.log("‚ö†Ô∏è [Invite Page] User not authenticated, redirecting to login"),M.error("‚ùå L√ºtfen √∂nce giri≈ü yapƒ±n!"),sessionStorage.setItem("pending_invite",i),n("/");return}if(!p){console.error("‚ùå [Invite Page] No token found!"),M.error("‚ùå Giri≈ü token'ƒ± bulunamadƒ±. L√ºtfen tekrar giri≈ü yapƒ±n."),n("/");return}console.log("üé´ [Invite Page] Accepting invite...",{code:i,apiUrl:`${q}/invites/${i}/accept/`,hasToken:!!p}),$(!0),O("");try{const J=`${q}/invites/${i}/accept/`;console.log("üì° [Invite Page] POST to:",J);const ne=await fetch(J,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});console.log("üì¶ [Invite Page] Response status:",ne.status);const de=await ne.json();if(console.log("üì¶ [Invite Page] Response data:",de),ne.ok){console.log("‚úÖ [Invite Page] Successfully joined server!"),M.success(`‚úÖ Ba≈üarƒ±lƒ±! ${de.server_name||"Sunucu"}ya katƒ±ldƒ±nƒ±z!`),ee(!0);const Y=de.redirect||"/";console.log("üîó [Invite Page] Redirecting to:",Y),setTimeout(()=>{Y.startsWith("http")?window.location.href=Y:(n(Y),window.location.reload())},2e3)}else{const Y=de.error||de.message||"Sunucuya katƒ±lma hatasƒ±";console.error("‚ùå [Invite Page] Join failed:",Y,de),O(Y),M.error(`‚ùå Hata: ${Y}`)}}catch(J){console.error("‚ùå [Invite Page] Exception:",J);const ne=J.message||"Baƒülantƒ± hatasƒ±";O(ne),M.error(`‚ùå Hata: ${ne}`)}$(!1)};return x?e.createElement("div",{style:te.container},e.createElement("div",{style:te.backgroundGradient}),e.createElement("div",{style:te.card},e.createElement("div",{style:te.spinner}),e.createElement("p",{style:te.loadingText},"Davet y√ºkleniyor..."))):C?e.createElement("div",{style:te.container},e.createElement("div",{style:te.backgroundGradient}),e.createElement("div",{style:te.card},e.createElement(Hr,{size:64,color:"var(--error)"}),e.createElement("h2",{style:te.errorTitle},"Hata"),e.createElement("p",{style:te.errorText},C),e.createElement("button",{onClick:()=>n("/"),style:te.homeButton},"Ana Sayfaya D√∂n"))):V?e.createElement("div",{style:te.container},e.createElement("div",{style:te.backgroundGradient}),e.createElement("div",{style:te.card},e.createElement(Gr,{size:64,color:"var(--success)"}),e.createElement("h2",{style:te.successTitle},"Ba≈üarƒ±lƒ±!"),e.createElement("p",{style:te.successText},e.createElement("strong",null,d.server.name)," sunucusuna katƒ±ldƒ±nƒ±z!"),e.createElement("p",{style:te.redirectText},"Ana sayfaya y√∂nlendiriliyorsunuz..."))):e.createElement("div",{style:te.container},e.createElement("div",{style:te.backgroundGradient}),e.createElement("div",{style:te.card},d.server.icon&&e.createElement("img",{src:d.server.icon,alt:d.server.name,style:te.serverIcon}),e.createElement("h1",{style:te.serverName},e.createElement(Vl,{style:te.icon}),d.server.name),e.createElement("div",{style:te.infoRow},e.createElement(Br,{style:te.infoIcon}),e.createElement("span",null,d.server.member_count," √úye")),d.expires_at&&e.createElement("div",{style:te.infoRow},e.createElement(Ul,{style:te.infoIcon}),e.createElement("span",null,"S√ºre: ",new Date(d.expires_at).toLocaleString("tr-TR"))),d.max_uses>0&&e.createElement("div",{style:te.infoRow},e.createElement("span",null,"Kullanƒ±m: ",d.uses," / ",d.max_uses)),e.createElement("div",{style:te.inviterInfo},"Davet Eden: ",e.createElement("strong",null,d.inviter.username)),e.createElement("button",{onClick:ie,disabled:K,style:{...te.joinButton,...K?te.joinButtonDisabled:{}}},K?"Katƒ±lƒ±nƒ±yor...":r?"Sunucuya Katƒ±l":"Giri≈ü Yap ve Katƒ±l"),!r&&e.createElement("p",{style:te.loginHint},"* Sunucuya katƒ±lmak i√ßin giri≈ü yapmanƒ±z gerekiyor")))},te={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"var(--bg-app)",padding:"20px",position:"relative",overflow:"hidden"},backgroundGradient:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(ellipse at top, rgba(139, 92, 246, 0.15), transparent 50%), radial-gradient(ellipse at bottom, rgba(118, 75, 162, 0.15), transparent 50%)",pointerEvents:"none",zIndex:0},card:{background:"var(--glass-bg)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",padding:"48px",borderRadius:"var(--radius-2xl)",textAlign:"center",color:"var(--text-primary)",maxWidth:"560px",width:"100%",boxShadow:"var(--shadow-2xl)",border:"1px solid var(--glass-border)",position:"relative",zIndex:1,animation:"scaleIn 0.4s ease-out"},spinner:{width:"50px",height:"50px",border:"3px solid var(--glass-border)",borderTop:"3px solid var(--brand-primary)",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto"},loadingText:{marginTop:"24px",color:"var(--text-tertiary)",fontSize:"15px",fontWeight:500},serverIcon:{width:"120px",height:"120px",borderRadius:"50%",marginBottom:"24px",objectFit:"cover",border:"4px solid var(--glass-border)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.2)",transition:"var(--transition-normal)"},serverName:{fontSize:"32px",fontWeight:800,marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",background:"var(--gradient-primary)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},icon:{fontSize:"28px",color:"var(--brand-primary)"},infoRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"16px 0",color:"var(--text-secondary)",fontSize:"16px",fontWeight:500,padding:"12px 20px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},infoIcon:{fontSize:"20px",color:"var(--brand-primary)"},inviterInfo:{marginTop:"24px",marginBottom:"32px",color:"var(--text-tertiary)",fontSize:"14px",padding:"16px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},joinButton:{background:"var(--gradient-primary)",color:"white",border:"none",padding:"16px 32px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"16px",fontWeight:700,marginTop:"16px",width:"100%",transition:"var(--transition-normal)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)",position:"relative",overflow:"hidden"},joinButtonDisabled:{background:"var(--bg-tertiary)",cursor:"not-allowed",opacity:.6,boxShadow:"none"},loginHint:{marginTop:"20px",fontSize:"13px",color:"var(--warning)",fontStyle:"italic",fontWeight:500},errorTitle:{color:"var(--error)",marginTop:"24px",fontSize:"28px",fontWeight:700},errorText:{color:"var(--text-tertiary)",margin:"24px 0",fontSize:"15px",lineHeight:1.6},successTitle:{color:"var(--success)",marginTop:"24px",fontSize:"28px",fontWeight:700},successText:{color:"var(--text-primary)",margin:"24px 0",fontSize:"18px",fontWeight:600},redirectText:{color:"var(--text-tertiary)",fontSize:"14px",marginTop:"12px",fontStyle:"italic"},homeButton:{background:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--glass-border)",padding:"14px 28px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"15px",fontWeight:600,marginTop:"24px",transition:"var(--transition-normal)"}},xs=document.createElement("style");xs.textContent=`
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`;document.head.appendChild(xs);const Xu=({apiBaseUrl:i})=>{const[n,r]=o.useState(!1),[p,d]=o.useState([]),[w,x]=o.useState(!1),R=o.useRef(null),C=o.useRef([]),O=o.useRef(null),{token:K}=Go(),$=()=>{O.current?.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{$()},[p,w]);const V=async()=>{try{const B=await navigator.mediaDevices.getUserMedia({audio:!0});R.current=new MediaRecorder(B),C.current=[],R.current.ondataavailable=U=>{U.data.size>0&&C.current.push(U.data)},R.current.onstop=G,R.current.start(),r(!0)}catch{M.error("‚ùå Mikrofon izni gerekli!")}},ee=()=>{R.current&&n&&(R.current.stop(),r(!1))},G=async()=>{x(!0);const B=new Blob(C.current,{type:"audio/webm"}),U=new FormData;U.append("audio",B,"voice.webm");try{const j=await fetch(`${i}/eng-learn/voice-chat/`,{method:"POST",headers:{Authorization:`Bearer ${K}`},body:U});if(j.ok){const q=await j.json();d(ie=>[...ie,{sender:"user",text:q.user_text},{sender:"ai",text:q.ai_text}]),new Audio(`data:audio/mp3;base64,${q.audio_base64}`).play()}else console.error("Sunucu hatasƒ±:",j.status),M.error("‚ùå Anla≈üƒ±lamadƒ± veya hata olu≈ütu.")}catch(j){console.error(j),M.error("‚ùå Baƒülantƒ± hatasƒ±.")}finally{x(!1)}};return e.createElement("div",{style:gt.container},e.createElement("div",{style:gt.header},e.createElement(ps,{to:"/eng-learn",style:gt.backBtn},e.createElement(hs,null)," Geri"),e.createElement("h2",null,"AI ile Konu≈ü (Speaking)")),e.createElement("div",{style:gt.chatArea},p.length===0&&e.createElement("div",{style:gt.emptyState},e.createElement(Za,{size:60,color:"#5865f2",style:{marginBottom:20}}),e.createElement("h3",null,"ƒ∞ngilizce Pratik Yap"),e.createElement("p",null,"Mikrofona basƒ±lƒ± tut ve konu≈ümaya ba≈üla."),e.createElement("small",{style:{color:"#72767d"}},'"Hello, how are you?" diyebilirsin.')),p.map((B,U)=>e.createElement("div",{key:U,style:{...gt.messageBubble,alignSelf:B.sender==="user"?"flex-end":"flex-start",backgroundColor:B.sender==="user"?"#5865f2":"#2b2d31",color:"white",borderBottomRightRadius:B.sender==="user"?"0":"12px",borderBottomLeftRadius:B.sender==="ai"?"0":"12px"}},e.createElement("div",{style:gt.msgHeader},B.sender==="user"?e.createElement(Bl,{size:12}):e.createElement(Za,{size:12}),e.createElement("span",{style:{marginLeft:5,fontSize:"0.8em",fontWeight:"bold"}},B.sender==="user"?"Sen":"AI √ñƒüretmen")),B.text)),w&&e.createElement("div",{style:{alignSelf:"flex-start",color:"#949ba4",marginLeft:10,fontStyle:"italic"}},"Yazƒ±yor ve seslendiriyor..."),e.createElement("div",{ref:O})),e.createElement("div",{style:gt.controls},e.createElement("button",{onMouseDown:V,onMouseUp:ee,onTouchStart:V,onTouchEnd:ee,style:{...gt.micButton,backgroundColor:n?"#f04747":"#5865f2",transform:n?"scale(1.1)":"scale(1)"}},n?e.createElement(Nl,{size:24}):e.createElement(jr,{size:30})),e.createElement("p",{style:{marginTop:15,color:"#949ba4",fontSize:"0.9em"}},n?"Dinliyor... (Bƒ±rakƒ±nca G√∂nderir)":"Basƒ±lƒ± Tut ve Konu≈ü")))},gt={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#313338",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif"},header:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px",borderBottom:"1px solid #1f2023",paddingBottom:"15px"},backBtn:{color:"#b9bbbe",fontSize:"1em",textDecoration:"none",display:"flex",alignItems:"center",gap:"5px",fontWeight:"600"},chatArea:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px",paddingBottom:"20px",paddingRight:"5px"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#949ba4",opacity:.8,textAlign:"center"},messageBubble:{maxWidth:"85%",padding:"15px",borderRadius:"12px",fontSize:"1em",lineHeight:"1.5",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",position:"relative"},msgHeader:{display:"flex",alignItems:"center",marginBottom:"5px",opacity:.8},controls:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20px",borderTop:"1px solid #1f2023"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.1s ease",boxShadow:"0 5px 20px rgba(0,0,0,0.4)"}},us=[{text:"Hello",difficulty:"Kolay"},{text:"Water",difficulty:"Kolay"},{text:"Friend",difficulty:"Kolay"},{text:"Family",difficulty:"Kolay"},{text:"Music",difficulty:"Kolay"},{text:"School",difficulty:"Kolay"},{text:"Computer",difficulty:"Kolay"},{text:"Beautiful",difficulty:"Kolay"},{text:"Together",difficulty:"Kolay"},{text:"Morning",difficulty:"Kolay"},{text:"Happy",difficulty:"Kolay"},{text:"Garden",difficulty:"Kolay"},{text:"People",difficulty:"Kolay"},{text:"Coffee",difficulty:"Kolay"},{text:"Purple",difficulty:"Kolay"},{text:"Technology",difficulty:"Orta"},{text:"Development",difficulty:"Orta"},{text:"Environment",difficulty:"Orta"},{text:"Successfully",difficulty:"Orta"},{text:"Opportunity",difficulty:"Orta"},{text:"Government",difficulty:"Orta"},{text:"Communication",difficulty:"Orta"},{text:"Experience",difficulty:"Orta"},{text:"Available",difficulty:"Orta"},{text:"Management",difficulty:"Orta"},{text:"International",difficulty:"Orta"},{text:"Recommendation",difficulty:"Orta"},{text:"Responsibility",difficulty:"Orta"},{text:"Understand",difficulty:"Orta"},{text:"Literature",difficulty:"Orta"},{text:"Necessary",difficulty:"Orta"},{text:"Vocabulary",difficulty:"Orta"},{text:"Interesting",difficulty:"Orta"},{text:"Comfortable",difficulty:"Orta"},{text:"Vegetable",difficulty:"Orta"},{text:"Squirrel",difficulty:"Zor"},{text:"Schedule",difficulty:"Zor"},{text:"Queue",difficulty:"Zor"},{text:"Rural",difficulty:"Zor"},{text:"Brewery",difficulty:"Zor"},{text:"Phenomenon",difficulty:"Zor"},{text:"February",difficulty:"Zor"},{text:"Library",difficulty:"Zor"},{text:"Specific",difficulty:"Zor"},{text:"Regularly",difficulty:"Zor"},{text:"Probably",difficulty:"Zor"},{text:"Algorithm",difficulty:"Zor"},{text:"Hierarchical",difficulty:"Zor"},{text:"Maintenance",difficulty:"Zor"},{text:"Pronunciation",difficulty:"Zor"},{text:"Throughout",difficulty:"Zor"},{text:"Entrepreneur",difficulty:"Zor"},{text:"Simultaneously",difficulty:"Zor"},{text:"Mischievous",difficulty:"Zor"},{text:"Chaos",difficulty:"Zor"},{text:"Recipe",difficulty:"Zor"},{text:"Worcestershire",difficulty:"Efsane"},{text:"Colonel",difficulty:"Efsane"},{text:"Miscellaneous",difficulty:"Efsane"},{text:"Anesthetist",difficulty:"Efsane"},{text:"Otorhinolaryngologist",difficulty:"Efsane"},{text:"Isthmus",difficulty:"Efsane"},{text:"Anemone",difficulty:"Efsane"},{text:"Synecdoche",difficulty:"Efsane"},{text:"Onomatopoeia",difficulty:"Efsane"},{text:"Conscientious",difficulty:"Efsane"},{text:"Defibrillator",difficulty:"Efsane"},{text:"Antidisestablishmentarianism",difficulty:"Efsane"},{text:"How are you doing today?",difficulty:"C√ºmle"},{text:"I would like to order a coffee.",difficulty:"C√ºmle"},{text:"The quick brown fox jumps over the lazy dog.",difficulty:"C√ºmle"},{text:"Can you please repeat that?",difficulty:"C√ºmle"},{text:"I am learning to speak English fluently.",difficulty:"C√ºmle"},{text:"It is raining cats and dogs outside.",difficulty:"C√ºmle"},{text:"Actions speak louder than words.",difficulty:"C√ºmle"},{text:"I need to schedule a meeting for tomorrow.",difficulty:"C√ºmle"},{text:"What do you do for a living?",difficulty:"C√ºmle"},{text:"She sells seashells by the seashore.",difficulty:"Tekerleme"},{text:"Red lorry, yellow lorry.",difficulty:"Tekerleme"},{text:"Peter Piper picked a peck of pickled peppers.",difficulty:"Tekerleme"},{text:"How much wood would a woodchuck chuck?",difficulty:"Tekerleme"},{text:"Unique New York.",difficulty:"Tekerleme"},{text:"Fuzzy Wuzzy was a bear.",difficulty:"Tekerleme"},{text:"Which wristwatches are Swiss wristwatches?",difficulty:"Tekerleme"}],Qu=({apiBaseUrl:i})=>{const{token:n}=Go(),[r,p]=o.useState(null),[d,w]=o.useState(!1),[x,R]=o.useState(!1),[C,O]=o.useState("idle"),[K,$]=o.useState(""),[V,ee]=o.useState(0),G=o.useRef(null),B=o.useRef([]);o.useEffect(()=>{U()},[]);const U=()=>{const J=Math.floor(Math.random()*us.length);p(us[J]),O("idle"),$("")},j=async()=>{if(r)try{const J=await fetch(`${i}/eng-learn/speak-text/`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({text:r.text})});if(J.ok){const ne=await J.json();new Audio(`data:audio/mp3;base64,${ne.audio_base64}`).play()}}catch(J){console.error(J)}},q=async()=>{$(""),O("recording");try{const J=await navigator.mediaDevices.getUserMedia({audio:!0});G.current=new MediaRecorder(J),B.current=[],G.current.ondataavailable=ne=>{ne.data.size>0&&B.current.push(ne.data)},G.current.onstop=ie,G.current.start(),w(!0)}catch{M.error("‚ùå Mikrofon izni gerekli!"),O("idle")}},ue=()=>{G.current&&d&&(G.current.stop(),w(!1))},ie=async()=>{R(!0);const J=new Blob(B.current,{type:"audio/webm"}),ne=new FormData;ne.append("audio",J,"voice.webm"),ne.append("target_text",r.text);try{const Y=await(await fetch(`${i}/eng-learn/check-pronunciation/`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:ne})).json();Y.is_correct?(O("success"),$(`Harika! üéâ (${Y.spoken_text})`),ee(me=>me+1)):(O("error"),$(`Algƒ±lanan: "${Y.spoken_text||"???"}" - Tekrar dene!`))}catch(de){console.error(de),$("Sunucu hatasƒ±."),O("error")}finally{R(!1)}};return r?e.createElement("div",{style:Oe.container},e.createElement("div",{style:Oe.header},e.createElement(ps,{to:"/eng-learn",style:Oe.backBtn},e.createElement(hs,null)," √áƒ±kƒ±≈ü"),e.createElement("div",{style:Oe.scoreBadge},"Skor: ",V)),e.createElement("div",{style:Oe.mainContent},e.createElement("div",{style:{...Oe.card,borderColor:C==="success"?"#43b581":C==="error"?"#f04747":"transparent",boxShadow:C==="success"?"0 0 30px rgba(67, 181, 129, 0.3)":C==="error"?"0 0 30px rgba(240, 71, 71, 0.3)":"0 10px 30px rgba(0,0,0,0.3)"}},e.createElement("span",{style:{...Oe.difficulty,backgroundColor:r.difficulty==="Efsane"?"#eb459e":r.difficulty==="Zor"?"#f04747":"#202225",color:r.difficulty==="Efsane"||r.difficulty==="Zor"?"white":"#949ba4"}},r.difficulty),e.createElement("h1",{style:Oe.wordText},r.text),e.createElement("div",{style:{height:"30px",marginTop:"10px",color:C==="success"?"#43b581":"#f04747",fontWeight:"bold"}},x?"Analiz ediliyor...":K),e.createElement("div",{style:Oe.controls},e.createElement("button",{onClick:j,style:Oe.iconButton,title:"Doƒürusunu Dinle"},e.createElement(Fl,{size:24})),e.createElement("button",{onMouseDown:q,onMouseUp:ue,onTouchStart:q,onTouchEnd:ue,style:{...Oe.micButton,backgroundColor:d?"#f04747":C==="success"?"#43b581":"#5865f2",transform:d?"scale(1.1)":"scale(1)"}},e.createElement(jr,{size:32}))),e.createElement("p",{style:Oe.hint},d?"Dinliyor...":"Mikrofona basƒ±lƒ± tut ve oku")),e.createElement("div",{style:Oe.bottomNav},e.createElement("button",{onClick:U,style:Oe.skipButton},C==="success"?e.createElement(e.Fragment,null,"Sonraki Kelime ",e.createElement(Wl,null)):e.createElement(e.Fragment,null,"Bunu Ge√ß ",e.createElement(jl,null)))))):e.createElement("div",{style:Oe.container},"Y√ºkleniyor...")},Oe={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1e1f22",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif",alignItems:"center"},header:{width:"100%",maxWidth:"600px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},backBtn:{color:"#b9bbbe",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},scoreBadge:{backgroundColor:"#f0b232",color:"#000",padding:"5px 15px",borderRadius:"20px",fontWeight:"bold"},mainContent:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"24px",width:"100%",maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",border:"3px solid transparent",transition:"all 0.3s ease"},difficulty:{padding:"4px 12px",borderRadius:"12px",fontSize:"0.85em",marginBottom:"20px",fontWeight:"bold"},wordText:{fontSize:"2.2em",fontWeight:"800",margin:"0 0 10px 0",color:"#fff",letterSpacing:"1px",lineHeight:"1.3"},controls:{display:"flex",alignItems:"center",gap:"30px",marginTop:"30px"},iconButton:{width:"50px",height:"50px",borderRadius:"50%",border:"2px solid #40444b",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 5px 20px rgba(0,0,0,0.4)",transition:"all 0.1s ease"},hint:{marginTop:"20px",color:"#72767d",fontSize:"0.9em"},bottomNav:{marginTop:"50px"},skipButton:{background:"transparent",border:"none",color:"#b9bbbe",fontSize:"1.1em",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",padding:"10px 20px",borderRadius:"8px",transition:"background 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.05)"}}},em=e.memo(Qu),tm=({apiBaseUrl:i})=>{const[n,r]=o.useState("loading"),p=Gn(),d=ms();return o.useEffect(()=>{const w=new URLSearchParams(d.search),x=w.get("code");if(w.get("error")){r("error");return}if(x){const C=localStorage.getItem("access_token");fetch(`${i}/spotify/callback/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({code:x})}).then(O=>{O.ok?(r("success"),setTimeout(()=>{p("/",{replace:!0})},1500)):r("error")}).catch(O=>{console.error(O),r("error")})}},[d,i,p]),e.createElement("div",{style:Vr.container},e.createElement("div",{style:Vr.card},n==="loading"&&e.createElement(e.Fragment,null,e.createElement(gs,{className:"spin",size:50,color:"#1db954",style:{marginBottom:20}}),e.createElement("h2",null,"Spotify Baƒülanƒ±yor..."),e.createElement("p",null,"Token alƒ±nƒ±yor, l√ºtfen bekleyin.")),n==="success"&&e.createElement(e.Fragment,null,e.createElement(Gr,{size:60,color:"#1db954",style:{marginBottom:20}}),e.createElement("h2",{style:{color:"#1db954"}},"Ba≈üarƒ±lƒ±!"),e.createElement("p",null,"Hesabƒ±n baƒülandƒ±. Sohbet ekranƒ±na d√∂n√ºl√ºyor...")),n==="error"&&e.createElement(e.Fragment,null,e.createElement(Hr,{size:60,color:"#f04747",style:{marginBottom:20}}),e.createElement("h2",{style:{color:"#f04747"}},"Hata Olu≈ütu"),e.createElement("p",null,"Baƒülantƒ± kurulamadƒ±."),e.createElement("button",{onClick:()=>p("/"),style:Vr.button},"Geri D√∂n"))))},Vr={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#191414",color:"white",fontFamily:"Poppins, sans-serif"},card:{backgroundColor:"#282828",padding:"40px",borderRadius:"16px",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",maxWidth:"400px",width:"90%"},button:{marginTop:"20px",padding:"10px 20px",borderRadius:"20px",border:"none",backgroundColor:"#1db954",color:"white",fontWeight:"bold",cursor:"pointer"}},Cs=document.createElement("style");Cs.innerText=`
  .spin { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(Cs);const om=e.memo(tm),nm=()=>{const{globalData:i}=_s(),[n,r]=o.useState(null),[p,d]=o.useState(!1),w=Gn();if(o.useEffect(()=>{if(i&&i.type==="chat_message_handler"&&i.username==="‚ö° Signal Bot"){const R=i.content.split(`
`),C=R.find(V=>V.includes("ü™ô"))||"Bilinmiyor",O=R.find(V=>V.includes("üìà"))||"",K={title:"YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞! üö®",coin:C.replace("ü™ô","").replace(/\*/g,"").trim(),direction:O.includes("LONG")?"Y√úKSELƒ∞≈û (LONG)":"D√ú≈û√ú≈û (SHORT)",isLong:O.includes("LONG"),raw:i};r(K),d(!0);const $=setTimeout(()=>{d(!1)},8e3);return()=>clearTimeout($)}},[i]),!p||!n)return null;const x=()=>{d(!1),w("/")};return e.createElement("div",{style:ht.container,className:"slide-in-notification"},e.createElement("div",{style:ht.iconBox},e.createElement(Gl,{size:24,color:"#f0b232"})),e.createElement("div",{style:ht.content,onClick:x},e.createElement("h4",{style:ht.title},n.title),e.createElement("div",{style:ht.details},e.createElement("span",{style:ht.coinName},n.coin),e.createElement("span",{style:{...ht.directionBadge,backgroundColor:n.isLong?"rgba(35, 165, 89, 0.2)":"rgba(240, 71, 71, 0.2)",color:n.isLong?"#23a559":"#da373c"}},n.direction)),e.createElement("span",{style:ht.hint},"Detaylar i√ßin tƒ±kla ",e.createElement(Hl,{size:10}))),e.createElement("button",{onClick:R=>{R.stopPropagation(),d(!1)},style:ht.closeButton},e.createElement(jo,null)))},ht={container:{position:"fixed",top:"20px",right:"20px",width:"320px",backgroundColor:"#1e1f22",borderRadius:"8px",boxShadow:"0 8px 20px rgba(0,0,0,0.5)",borderLeft:"5px solid #f0b232",display:"flex",alignItems:"center",padding:"15px",zIndex:99999,cursor:"pointer",transition:"transform 0.3s ease-out"},iconBox:{marginRight:"15px",display:"flex",alignItems:"center"},content:{flex:1,display:"flex",flexDirection:"column"},title:{margin:0,color:"#fff",fontSize:"0.95em",fontWeight:"bold",marginBottom:"5px"},details:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"},coinName:{color:"#dcddde",fontWeight:"bold",fontSize:"1.1em"},directionBadge:{fontSize:"0.75em",padding:"2px 6px",borderRadius:"4px",fontWeight:"bold"},hint:{fontSize:"0.7em",color:"#949ba4",display:"flex",alignItems:"center",gap:"5px"},closeButton:{background:"none",border:"none",color:"#949ba4",cursor:"pointer",padding:"5px",marginLeft:"10px",fontSize:"1em"}},Ts=document.createElement("style");Ts.innerText=`
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  .slide-in-notification {
    animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
`;document.head.appendChild(Ts);function rm(i={}){const{nonce:n,onScriptLoadSuccess:r,onScriptLoadError:p}=i,[d,w]=o.useState(!1),x=o.useRef(r);x.current=r;const R=o.useRef(p);return R.current=p,o.useEffect(()=>{const C=document.createElement("script");return C.src="https://accounts.google.com/gsi/client",C.async=!0,C.defer=!0,C.nonce=n,C.onload=()=>{var O;w(!0),(O=x.current)===null||O===void 0||O.call(x)},C.onerror=()=>{var O;w(!1),(O=R.current)===null||O===void 0||O.call(R)},document.body.appendChild(C),()=>{document.body.removeChild(C)}},[n]),d}const am=o.createContext(null);function sm({clientId:i,nonce:n,onScriptLoadSuccess:r,onScriptLoadError:p,children:d}){const w=rm({nonce:n,onScriptLoadSuccess:r,onScriptLoadError:p}),x=o.useMemo(()=>({clientId:i,scriptLoadedSuccessfully:w}),[i,w]);return e.createElement(am.Provider,{value:x},d)}const we=({children:i})=>{const n=wo.isNativePlatform();return e.createElement("div",{style:{width:"100%",height:"100dvh",boxSizing:"border-box",paddingTop:n?"max(35px, env(safe-area-inset-top))":"0px",backgroundColor:"#1e1f22",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"}},i)};class im extends e.Component{constructor(r){super(r);$n(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,p){console.error("üî¥ App Crashed:",r),console.error("Error Info:",p),this.setState({error:r,errorInfo:p});try{fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:r?.toString(),stack:r?.stack,componentStack:p?.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{})}catch(d){console.warn("Could not report error:",d)}}render(){return this.state.hasError?e.createElement("div",{style:yt.container},e.createElement("div",{style:yt.content},e.createElement("div",{style:yt.icon},"üí•"),e.createElement("h1",{style:yt.title},"Oops! Bir ≈üeyler ters gitti"),e.createElement("p",{style:yt.message},"√úzg√ºn√ºz, uygulama beklenmedik bir hatayla kar≈üƒ±la≈ütƒ±."),e.createElement("div",{style:yt.actions},e.createElement("button",{onClick:this.handleReset,style:yt.button},"üîÑ Yeniden Ba≈ülat"),e.createElement("button",{onClick:()=>window.location.href="/",style:{...yt.button,...yt.buttonSecondary}},"üè† Ana Sayfaya D√∂n")),!1)):this.props.children}}const yt={container:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#1E1F22",color:"#FFFFFF",padding:"20px",fontFamily:"'Inter', sans-serif"},content:{textAlign:"center",maxWidth:"600px",padding:"40px",background:"linear-gradient(135deg, #2B2D31 0%, #1E1F22 100%)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},icon:{fontSize:"80px",marginBottom:"20px",animation:"shake 0.5s ease-in-out"},title:{fontSize:"32px",fontWeight:"bold",marginBottom:"16px",color:"#FFFFFF"},message:{fontSize:"16px",color:"#B9BBBE",marginBottom:"32px",lineHeight:"1.6"},actions:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},button:{padding:"12px 24px",fontSize:"16px",fontWeight:"600",border:"none",borderRadius:"8px",cursor:"pointer",backgroundColor:"#5865F2",color:"#FFFFFF",transition:"all 0.2s",":hover":{backgroundColor:"#4752C4"}},buttonSecondary:{backgroundColor:"#4E5058",":hover":{backgroundColor:"#6A6F78"}}},lm=e.lazy(()=>y(()=>import("./EnglishHub-CvHxTHnB.js"),__vite__mapDeps([171,2,3,4,6]))),cm=e.lazy(()=>y(()=>import("./GrammarQuizPage-B-eIuW3m.js"),__vite__mapDeps([172,2,3,4,6,173,1,5,7]))),dm=e.lazy(()=>y(()=>import("./EnglishLearningPage-CqVdDO17.js"),__vite__mapDeps([174,2,3,4,173,1,5,6,7]))),um=e.lazy(()=>y(()=>import("./CryptoDashboard-D56xiOB_.js"),__vite__mapDeps([175,2,3,4,6,1,5,7]))),mm=e.lazy(()=>y(()=>import("./CryptoSignals-BdqR-T_5.js"),__vite__mapDeps([176,2,3,6,4]))),fm=e.lazy(()=>y(()=>import("./ForgotPasswordPage-DBfB7USe.js"),__vite__mapDeps([120,2,3,6,38,4]))),pm=e.lazy(()=>y(()=>import("./ResetPasswordPage-wZ5RYW5i.js"),__vite__mapDeps([121,2,3,6,4]))),gm=e.lazy(()=>y(()=>import("./TwoFactorLoginPage-B-iuCr7a.js"),__vite__mapDeps([122,2,3,6,4]))),hm=e.lazy(()=>y(()=>import("./VerifyEmailPage-Cbi4zzDw.js"),__vite__mapDeps([119,2,3,6,4]))),ym=e.lazy(()=>y(()=>import("./LandingPage-CF0bijEq.js"),__vite__mapDeps([177,2,3,140,1,4,5,6,7,178]))),Sm=e.lazy(()=>y(()=>import("./ReferralProgram-DSzx_tqh.js"),__vite__mapDeps([179,2,3,140,1,4,5,6,7,180]))),wm=e.lazy(()=>y(()=>import("./GrowthDashboard-DGfOEJq0.js"),__vite__mapDeps([181,2,3,140,182]))),bm=e.lazy(()=>y(()=>import("./ToastDemo-CLfdMtal.js"),__vite__mapDeps([183,2,3,1,4,5,6,7,184]))),Em=window.location.hostname==="pawscord.com"||window.location.hostname==="www.pawscord.com",vm="192.168.68.53",_m="8888",km=Em?"https://www.pawscord.com":`http://${vm}:${_m}`,lt=`${km}/api`,xm="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",Cm=()=>(o.useEffect(()=>{const i=setTimeout(()=>{try{Ss()}catch(n){console.warn("preloadCriticalChunks error",n)}},3e3);if("requestIdleCallback"in window)window.requestIdleCallback(()=>{try{Nr()}catch(n){console.warn("prefetchNextChunks error",n)}},{timeout:2e3});else{const n=setTimeout(()=>{try{Nr()}catch(r){console.warn("prefetchNextChunks error",r)}},4e3);return()=>clearTimeout(n)}return()=>clearTimeout(i)},[]),e.createElement(sm,{clientId:xm},e.createElement(Nc,null,e.createElement(Gc,null,e.createElement(im,null,e.createElement(El,null,e.createElement(nm,null),e.createElement(vl,null,e.createElement(he,{path:"/verify/:token",element:e.createElement(we,null,e.createElement(Ju,null))}),e.createElement(he,{path:"/verify-email/:token",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(hm,{apiBaseUrl:lt})))}),e.createElement(he,{path:"/forgot-password",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(fm,{apiBaseUrl:lt})))}),e.createElement(he,{path:"/reset-password/:token",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(pm,{apiBaseUrl:lt})))}),e.createElement(he,{path:"/2fa-login",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(gm,{apiBaseUrl:lt})))}),e.createElement(he,{path:"/launch",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ym,{apiBaseUrl:lt})))}),e.createElement(he,{path:"/referral",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Sm,{apiBaseUrl:lt})))}),e.createElement(he,{path:"/growth-dashboard",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(wm,{apiBaseUrl:lt})))}),e.createElement(he,{path:"/toast-demo",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(bm,null)))}),e.createElement(he,{path:"/invite/:code",element:e.createElement(we,null,e.createElement(Zu,null))}),e.createElement(he,{path:"/spotify-callback",element:e.createElement(we,null,e.createElement(om,{apiBaseUrl:lt}))}),e.createElement(he,{path:"/eng-learn",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(lm,null)))}),e.createElement(he,{path:"/eng-learn/vocab",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(dm,null)))}),e.createElement(he,{path:"/eng-learn/grammar",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(cm,null)))}),e.createElement(he,{path:"/eng-learn/voice",element:e.createElement(we,null,e.createElement(Xu,{apiBaseUrl:lt}))}),e.createElement(he,{path:"/eng-learn/pronunciation",element:e.createElement(we,null,e.createElement(em,{apiBaseUrl:lt}))}),e.createElement(he,{path:"/crypto-analysis",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(mm,null)))}),e.createElement(he,{path:"/crypto-dashboard-old",element:e.createElement(we,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(um,null)))}),e.createElement(he,{path:"/*",element:e.createElement(Ku,null)})))))))),Tm=bl.createRoot(document.getElementById("root"));Tm.render(e.createElement(Cm,null));export{Uc as A,wo as C,nc as G,Fr as T,ys as W,Go as a,bf as b,wf as c,$c as d,xe as e,Sf as f,Yc as g,yf as h,qr as i,Sc as j,jc as k,Re as l,Ec as m,Kr as r,M as t,_s as u};
