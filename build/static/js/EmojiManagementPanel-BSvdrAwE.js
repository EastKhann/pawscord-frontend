import{r as n,j as o}from"./react-vendor-D8Fi5F9E.js";import{_ as b,a as B,ag as _,bn as I,m as R}from"./icons-vendor-BPCemF_6.js";import{t as r}from"./index-3z6rwLzK.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./state-vendor-De5qIGw3.js";const L=({fetchWithAuth:a,apiBaseUrl:l,serverId:d,onClose:x})=>{const[g,h]=n.useState([]),[v,k]=n.useState([]),[C,E]=n.useState([]),[u,j]=n.useState(null),[c,f]=n.useState(""),[S,y]=n.useState(!0),[s,p]=n.useState("custom");n.useEffect(()=>{m(),s==="trending"&&T(),s==="suggestions"&&w()},[s]);const m=async()=>{try{y(!0);const e=await a(`${l}/api/emoji/list/?server_id=${d}`);if(e.ok){const i=await e.json();h(i)}}catch(e){console.error("Emoji yükleme hatası:",e)}finally{y(!1)}},T=async()=>{try{const e=await a(`${l}/api/emoji/trending/?server_id=${d}`);if(e.ok){const i=await e.json();k(i)}}catch(e){console.error("Trending yükleme hatası:",e)}},w=async()=>{try{const e=await a(`${l}/api/emoji/suggestions/?server_id=${d}`);if(e.ok){const i=await e.json();E(i)}}catch(e){console.error("Öneriler yükleme hatası:",e)}},z=async()=>{if(!u||!c.trim()){r.error("Emoji dosyası ve ismi gerekli");return}const e=new FormData;e.append("file",u),e.append("name",c),e.append("server_id",d);try{(await a(`${l}/api/emoji/upload/`,{method:"POST",body:e})).ok?(r.success("Emoji yüklendi"),j(null),f(""),m()):r.error("Emoji yüklenemedi")}catch(i){console.error("Upload hatası:",i),r.error("Bir hata oluştu")}},F=async e=>{try{(await a(`${l}/api/emoji/${e}/delete/`,{method:"DELETE"})).ok?(r.success("Emoji silindi"),m()):r.error("Emoji silinemedi")}catch(i){console.error("Delete hatası:",i),r.error("Bir hata oluştu")}};return o.jsx("div",{style:t.overlay,onClick:x,children:o.jsxs("div",{style:t.modal,onClick:e=>e.stopPropagation(),children:[o.jsxs("div",{style:t.header,children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(b,{style:{color:"#faa61a"}}),o.jsx("h2",{style:{margin:0},children:"Emoji Yönetimi"})]}),o.jsx(B,{onClick:x,style:t.closeBtn})]}),o.jsxs("div",{style:t.tabs,children:[o.jsx("button",{onClick:()=>p("custom"),style:{...t.tab,...s==="custom"?t.activeTab:{}},children:"Özel Emojiler"}),o.jsxs("button",{onClick:()=>p("trending"),style:{...t.tab,...s==="trending"?t.activeTab:{}},children:[o.jsx(_,{})," Trend Olanlar"]}),o.jsx("button",{onClick:()=>p("suggestions"),style:{...t.tab,...s==="suggestions"?t.activeTab:{}},children:"Öneriler"})]}),s==="custom"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:t.uploadSection,children:[o.jsx("input",{type:"file",accept:"image/png,image/gif,image/jpeg",onChange:e=>j(e.target.files[0]),style:t.fileInput}),o.jsx("input",{type:"text",value:c,onChange:e=>f(e.target.value),placeholder:"Emoji ismi (örn: pog, kekw)",style:t.input}),o.jsxs("button",{onClick:z,style:t.uploadBtn,children:[o.jsx(I,{})," Yükle"]})]}),o.jsx("div",{style:t.content,children:S?o.jsx("div",{style:t.loading,children:"Yükleniyor..."}):g.length===0?o.jsxs("div",{style:t.empty,children:[o.jsx(b,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),o.jsx("p",{children:"Henüz özel emoji yok"})]}):o.jsx("div",{style:t.emojiGrid,children:g.map(e=>o.jsxs("div",{style:t.emojiCard,children:[o.jsx("img",{src:e.url,alt:e.name,style:t.emojiImage}),o.jsxs("div",{style:t.emojiName,children:[":",e.name,":"]}),o.jsx("button",{onClick:()=>F(e.id),style:t.deleteEmojiBtn,children:o.jsx(R,{})})]},e.id))})})]}),s==="trending"&&o.jsx("div",{style:t.content,children:o.jsx("div",{style:t.emojiGrid,children:v.map((e,i)=>o.jsxs("div",{style:t.emojiCard,children:[o.jsx("img",{src:e.url,alt:e.name,style:t.emojiImage}),o.jsxs("div",{style:t.emojiName,children:[":",e.name,":"]}),o.jsxs("div",{style:t.usageCount,children:[e.usage_count," kullanım"]})]},i))})}),s==="suggestions"&&o.jsx("div",{style:t.content,children:o.jsx("div",{style:t.emojiGrid,children:C.map((e,i)=>o.jsxs("div",{style:t.suggestionCard,children:[o.jsx("img",{src:e.emoji_url,alt:e.emoji_name,style:t.emojiImage}),o.jsxs("div",{style:t.emojiName,children:[":",e.emoji_name,":"]}),o.jsxs("div",{style:t.suggester,children:["Öneren: ",e.suggested_by]})]},i))})})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},tabs:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #333"},tab:{backgroundColor:"transparent",color:"#888",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},activeTab:{backgroundColor:"#5865f2",color:"#fff"},uploadSection:{display:"flex",gap:"10px",padding:"20px",borderBottom:"1px solid #333"},fileInput:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},input:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},uploadBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},emojiGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"15px"},emojiCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center",position:"relative"},emojiImage:{width:"64px",height:"64px",objectFit:"contain",marginBottom:"10px"},emojiName:{fontSize:"13px",fontWeight:"500",color:"#dcddde",marginBottom:"4px",fontFamily:"monospace"},usageCount:{fontSize:"11px",color:"#888"},deleteEmojiBtn:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#f04747",color:"#fff",border:"none",padding:"6px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},suggestionCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center"},suggester:{fontSize:"11px",color:"#888",marginTop:"6px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{L as default};
