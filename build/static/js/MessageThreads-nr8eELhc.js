import{r as i,n as e}from"./react-core-BMiyQWF6.js";import{aE as g,a as m,k as f,g as y}from"./icons-vendor-T72gfvdf.js";import{t as j}from"./index-D08LScfI.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BuSyE8vR.js";import"./router-vendor-B86Z1mIL.js";import"./state-vendor-CAyNnPM4.js";import"./crypto-vendor-1Q6e4ZD-.js";const R=({messageId:a,onClose:n,fetchWithAuth:d,apiBaseUrl:l})=>{const[s,c]=i.useState(""),[p,b]=i.useState(!1),[r,x]=i.useState(!1),u=async()=>{try{(await d(`${l}/threads/${r?"unsubscribe":"subscribe"}/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:a})})).ok&&x(!r)}catch{}},h=async()=>{if(s.trim()){b(!0);try{(await d(`${l}/threads/create/`,{method:"POST",body:JSON.stringify({parent_message_id:a,content:s})})).ok&&(j.success("âœ… Thread oluÅŸturuldu!"),c(""),n())}catch{}finally{b(!1)}}};return e.jsx("div",{style:t.overlay,onClick:n,children:e.jsxs("div",{style:t.modal,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:t.header,children:[e.jsxs("h3",{style:t.title,children:[e.jsx(g,{})," Thread BaÅŸlat"]}),e.jsx("button",{onClick:n,style:t.closeButton,children:e.jsx(m,{})})]}),e.jsxs("div",{style:t.content,children:[e.jsxs("div",{style:{padding:"12px",backgroundColor:"#2f3136",borderRadius:"6px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#dcddde",fontSize:"14px"},children:r?"ðŸ”” Subscribed to notifications":"ðŸ”• Not subscribed"}),e.jsx("button",{onClick:u,style:{padding:"6px 12px",backgroundColor:r?"#f04747":"#43b581",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",fontWeight:"bold"},children:r?e.jsxs(e.Fragment,{children:[e.jsx(f,{})," Unsubscribe"]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{})," Subscribe"]})})]}),e.jsx("textarea",{value:s,onChange:o=>c(o.target.value),placeholder:"Thread mesajÄ±nÄ± yazÄ±n...",style:t.textarea}),e.jsx("button",{onClick:h,disabled:p||!s.trim(),style:t.sendButton,children:p?"GÃ¶nderiliyor...":"ðŸ’¬ Thread GÃ¶nder"})]})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"500px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.3em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.3em"},content:{padding:"20px"},textarea:{width:"100%",minHeight:"100px",padding:"10px",backgroundColor:"#40444b",border:"1px solid #5865f2",borderRadius:"4px",color:"white",fontSize:"1em",resize:"vertical",marginBottom:"15px"},sendButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"}};export{R as default};
