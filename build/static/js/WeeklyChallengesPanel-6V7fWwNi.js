import{r as d,n as e}from"./react-core-DA61mcWm.js";import{bE as z,x as I,aU as R,cy as F,bA as T,ar as P,u as B,v as D,aC as _,U as p,cz as C,aw as L,au as w,j as G,as as E,T as b,E as M,V as $}from"./icons-vendor-DRtjID0N.js";import"./ui-vendor-BrUQ4r0A.js";import"./editor-vendor-D9c4a6XZ.js";const t={container:{backgroundColor:"#36393f",borderRadius:"8px",padding:"20px",color:"#dcddde"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"60px",color:"#b9bbbe"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},title:{margin:0,fontSize:"18px",fontWeight:"600",color:"#fff"},subtitle:{margin:"4px 0 0",fontSize:"13px",color:"#72767d"},timer:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",backgroundColor:"#2f3136",borderRadius:"4px",fontSize:"13px",color:"#b9bbbe"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",marginBottom:"20px"},statCard:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#2f3136",borderRadius:"8px"},statInfo:{display:"flex",flexDirection:"column"},statValue:{fontSize:"20px",fontWeight:"700",color:"#fff"},statLabel:{fontSize:"11px",color:"#72767d",textTransform:"uppercase"},tabs:{display:"flex",gap:"8px",marginBottom:"16px",borderBottom:"1px solid #40444b",paddingBottom:"12px"},tab:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"transparent",border:"none",borderRadius:"4px",color:"#72767d",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},tabActive:{backgroundColor:"#5865f2",color:"#fff"},challengesList:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px"},challengeCard:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",backgroundColor:"#2f3136",borderRadius:"8px",transition:"transform 0.2s"},challengeIcon:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#202225",borderRadius:"12px",fontSize:"20px"},challengeContent:{flex:1},challengeHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},challengeTitle:{margin:0,fontSize:"15px",fontWeight:"600",color:"#fff"},difficultyStars:{display:"flex",gap:"2px"},challengeDescription:{margin:"0 0 8px",fontSize:"13px",color:"#b9bbbe"},progressContainer:{display:"flex",alignItems:"center",gap:"8px"},progressBar:{flex:1,height:"6px",backgroundColor:"#202225",borderRadius:"3px",overflow:"hidden"},progressFill:{height:"100%",backgroundColor:"#5865f2",borderRadius:"3px",transition:"width 0.3s"},progressText:{fontSize:"12px",color:"#72767d",minWidth:"45px",textAlign:"right"},challengeReward:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px"},pointsBadge:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"rgba(250, 166, 26, 0.2)",borderRadius:"12px",fontSize:"12px",color:"#faa61a",fontWeight:"600"},rewardBadge:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"rgba(88, 101, 242, 0.2)",borderRadius:"12px",fontSize:"11px",color:"#dcddde"},rewardsSection:{marginBottom:"20px"},rewardsSectionTitle:{display:"flex",alignItems:"center",gap:"8px",margin:"0 0 12px",fontSize:"14px",fontWeight:"600",color:"#fff"},rewardsList:{display:"flex",flexWrap:"wrap",gap:"8px"},earnedReward:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",backgroundColor:"#2f3136",borderRadius:"16px",fontSize:"13px",color:"#dcddde"},summaryCard:{padding:"20px",background:"linear-gradient(135deg, rgba(88, 101, 242, 0.3) 0%, rgba(114, 137, 218, 0.3) 100%)",borderRadius:"12px",border:"1px solid rgba(88, 101, 242, 0.5)"},summaryHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",fontSize:"14px",fontWeight:"600",color:"#fff"},summaryStats:{display:"flex",justifyContent:"space-around",marginBottom:"16px"},summaryItem:{display:"flex",flexDirection:"column",alignItems:"center"},summaryValue:{fontSize:"24px",fontWeight:"700",color:"#fff"},summaryLabel:{fontSize:"11px",color:"#b9bbbe",textTransform:"uppercase"},totalProgressBar:{height:"8px",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",overflow:"hidden"},totalProgressFill:{height:"100%",backgroundColor:"#43b581",borderRadius:"4px",transition:"width 0.3s"}},A={weekly:[{id:1,title:"Sosyal Kelebek",description:"50 mesaj gÃ¶nder",icon:"comments",type:"messages",target:50,current:32,points:100,reward:{type:"badge",name:"KonuÅŸkan"},difficulty:"easy",status:"in_progress"},{id:2,title:"Ses UstasÄ±",description:"2 saat sesli sohbette kal",icon:"microphone",type:"voice_time",target:120,current:85,points:200,reward:{type:"coins",amount:500},difficulty:"medium",status:"in_progress"},{id:3,title:"Topluluk YÄ±ldÄ±zÄ±",description:"10 farklÄ± sunucuda aktif ol",icon:"users",type:"servers_active",target:10,current:10,points:300,reward:{type:"badge",name:"YÄ±ldÄ±z"},difficulty:"hard",status:"completed"},{id:4,title:"Oyun Maratonu",description:"5 oyun aktivitesi baÅŸlat",icon:"gamepad",type:"games_played",target:5,current:2,points:150,reward:{type:"xp",amount:1e3},difficulty:"medium",status:"in_progress"},{id:5,title:"Kalp DaÄŸÄ±tÄ±cÄ±",description:"25 mesaja tepki ver",icon:"heart",type:"reactions",target:25,current:0,points:75,reward:{type:"emoji",name:"â¤ï¸â€ðŸ”¥"},difficulty:"easy",status:"not_started"}],daily:[{id:101,title:"GÃ¼nlÃ¼k Selamlama",description:"Ä°lk mesajÄ±nÄ± gÃ¶nder",icon:"comments",target:1,current:1,points:25,status:"completed"},{id:102,title:"Sesli KatÄ±lÄ±m",description:"Bir sesli kanala katÄ±l",icon:"microphone",target:1,current:0,points:25,status:"not_started"},{id:103,title:"Tepki Ver",description:"5 mesaja emoji tepkisi ver",icon:"heart",target:5,current:3,points:25,status:"in_progress"}],special:[{id:201,title:"Yeni YÄ±l Ã–zel",description:"Yeni yÄ±l kutlamasÄ±na katÄ±l",icon:"gift",target:1,current:0,points:500,reward:{type:"special_badge",name:"2026 YÄ±ldÄ±zÄ±"},endsAt:"2026-01-31T23:59:59",status:"locked"}]},H={totalPoints:2450,weeklyPoints:625,streak:7,completedChallenges:23,rank:156,rewards:[{type:"badge",name:"KonuÅŸkan",earnedAt:"2026-01-20"},{type:"badge",name:"Yeni BaÅŸlayan",earnedAt:"2026-01-15"}]},W={comments:_,microphone:D,users:B,gamepad:P,heart:T,share:F,music:R,video:I,gift:z},V=a=>{const n=W[a]||p;return e.jsx(n,{})},S=a=>a==="easy"?"#43b581":a==="medium"?"#faa61a":a==="hard"?"#f04747":"#72767d",Y=a=>Array(a==="easy"?1:a==="medium"?2:3).fill(0).map((r,l)=>e.jsx(p,{size:10,color:S(a)},l)),K=a=>a?{badge:e.jsx(w,{color:"#faa61a"}),coins:e.jsx(L,{color:"#f1c40f"}),xp:e.jsx(p,{color:"#5865f2"}),emoji:e.jsx("span",{children:a.name}),special_badge:e.jsx(C,{color:"#e91e63"})}[a.type]||e.jsx(z,{color:"#43b581"}):null,O=a=>a?{badge:a.name,coins:`${a.amount} Coin`,xp:`${a.amount} XP`,emoji:"Ã–zel Emoji",special_badge:a.name}[a.type]||"Ã–dÃ¼l":"",U=(a,n)=>{const[r,l]=d.useState({weekly:[],daily:[],special:[]}),[i,c]=d.useState({totalPoints:0,weeklyPoints:0,streak:0,completedChallenges:0,rank:1,rewards:[]}),[x,u]=d.useState(!0),[g,f]=d.useState("weekly"),[m,y]=d.useState({days:0,hours:0,minutes:0}),s=d.useCallback(async()=>{u(!0);try{const o=await a(`${n}/challenges/`);if(o.ok){const h=await o.json();l(h.challenges),c(h.userProgress)}else l(A),c(H)}catch{}finally{u(!1)}},[a,n]);return d.useEffect(()=>{s()},[s]),d.useEffect(()=>{const o=()=>{const j=new Date,k=new Date;k.setDate(j.getDate()+(7-j.getDay())),k.setHours(23,59,59,999);const v=k-j;y({days:Math.floor(v/864e5),hours:Math.floor(v%864e5/36e5),minutes:Math.floor(v%36e5/6e4)})};o();const h=setInterval(o,6e4);return()=>clearInterval(h)},[]),{challenges:r,userProgress:i,loading:x,activeTab:g,setActiveTab:f,timeRemaining:m}},N=({challenge:a,isDaily:n,styles:r})=>{const l=a.current/a.target*100,i=a.status==="completed",c=a.status==="locked";return e.jsxs("div",{style:{...r.challengeCard,opacity:i?.7:1,backgroundColor:i?"#202225":"#2f3136"},children:[e.jsx("div",{style:r.challengeIcon,children:c?e.jsx(G,{size:20,color:"#72767d"}):i?e.jsx(E,{size:20,color:"#43b581"}):e.jsx("span",{style:{color:S(a.difficulty)},children:V(a.icon)})}),e.jsxs("div",{style:r.challengeContent,children:[e.jsxs("div",{style:r.challengeHeader,children:[e.jsx("h4",{style:r.challengeTitle,children:a.title}),!n&&a.difficulty&&e.jsx("div",{style:r.difficultyStars,children:Y(a.difficulty)})]}),e.jsx("p",{style:r.challengeDescription,children:a.description}),e.jsxs("div",{style:r.progressContainer,children:[e.jsx("div",{style:r.progressBar,children:e.jsx("div",{style:{...r.progressFill,width:`${Math.min(l,100)}%`,backgroundColor:i?"#43b581":"#5865f2"}})}),e.jsxs("span",{style:r.progressText,children:[a.current,"/",a.target]})]})]}),e.jsxs("div",{style:r.challengeReward,children:[e.jsxs("div",{style:r.pointsBadge,children:[e.jsx(p,{size:10,color:"#faa61a"}),e.jsx("span",{children:a.points})]}),a.reward&&e.jsxs("div",{style:r.rewardBadge,children:[K(a.reward),e.jsx("span",{children:O(a.reward)})]})]})]})},Z=({fetchWithAuth:a,apiBaseUrl:n,currentUser:r})=>{const{challenges:l,userProgress:i,loading:c,activeTab:x,setActiveTab:u,timeRemaining:g}=U(a,n);if(c)return e.jsx("div",{style:t.container,children:e.jsxs("div",{style:t.loading,children:[e.jsx(b,{className:"pulse",size:32,color:"#faa61a"}),e.jsx("span",{children:"GÃ¶revler yÃ¼kleniyor..."})]})});const f=l.weekly.filter(s=>s.status==="completed").length,m=l.weekly.length,y=m>0?Math.round(f/m*100):0;return e.jsxs("div",{style:t.container,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(b,{size:24,color:"#faa61a"}),e.jsxs("div",{children:[e.jsx("h2",{style:t.title,children:"HaftalÄ±k GÃ¶revler"}),e.jsx("p",{style:t.subtitle,children:"GÃ¶revleri tamamla, Ã¶dÃ¼ller kazan!"})]})]}),e.jsxs("div",{style:t.timer,children:[e.jsx(M,{size:14,color:"#72767d"}),e.jsxs("span",{children:[g.days,"g ",g.hours,"s ",g.minutes,"d kaldÄ±"]})]})]}),e.jsx("div",{style:t.statsGrid,children:[{icon:e.jsx($,{size:20,color:"#f04747"}),value:i.streak,label:"GÃ¼nlÃ¼k Seri"},{icon:e.jsx(p,{size:20,color:"#faa61a"}),value:i.weeklyPoints,label:"HaftalÄ±k Puan"},{icon:e.jsx(b,{size:20,color:"#5865f2"}),value:`#${i.rank}`,label:"SÄ±ralama"},{icon:e.jsx(w,{size:20,color:"#43b581"}),value:i.completedChallenges,label:"Tamamlanan"}].map(s=>e.jsxs("div",{style:t.statCard,children:[s.icon,e.jsxs("div",{style:t.statInfo,children:[e.jsx("span",{style:t.statValue,children:s.value}),e.jsx("span",{style:t.statLabel,children:s.label})]})]},s.label))}),e.jsx("div",{style:t.tabs,children:[{key:"weekly",icon:e.jsx(b,{size:14}),label:`HaftalÄ±k (${l.weekly.length})`},{key:"daily",icon:e.jsx(p,{size:14}),label:`GÃ¼nlÃ¼k (${l.daily.length})`},{key:"special",icon:e.jsx(C,{size:14}),label:`Ã–zel (${l.special.length})`}].map(s=>e.jsxs("button",{onClick:()=>u(s.key),style:{...t.tab,...x===s.key?t.tabActive:{}},children:[s.icon," ",s.label]},s.key))}),e.jsx("div",{style:t.challengesList,children:l[x].map(s=>e.jsx(N,{challenge:s,isDaily:x==="daily",styles:t},s.id))}),i.rewards.length>0&&e.jsxs("div",{style:t.rewardsSection,children:[e.jsxs("h3",{style:t.rewardsSectionTitle,children:[e.jsx(z,{size:14})," KazanÄ±lan Ã–dÃ¼ller"]}),e.jsx("div",{style:t.rewardsList,children:i.rewards.map((s,o)=>e.jsxs("div",{style:t.earnedReward,children:[e.jsx(w,{size:16,color:"#faa61a"}),e.jsx("span",{children:s.name})]},o))})]}),e.jsxs("div",{style:t.summaryCard,children:[e.jsxs("div",{style:t.summaryHeader,children:[e.jsx(C,{size:16,color:"#e91e63"}),e.jsx("span",{children:"Bu Hafta"})]}),e.jsx("div",{style:t.summaryStats,children:[{value:`${f}/${m}`,label:"GÃ¶rev"},{value:i.weeklyPoints,label:"Puan"},{value:`${y}%`,label:"Ä°lerleme"}].map(s=>e.jsxs("div",{style:t.summaryItem,children:[e.jsx("span",{style:t.summaryValue,children:s.value}),e.jsx("span",{style:t.summaryLabel,children:s.label})]},s.label))}),e.jsx("div",{style:t.totalProgressBar,children:e.jsx("div",{style:{...t.totalProgressFill,width:`${y}%`}})})]})]})};export{Z as default};
