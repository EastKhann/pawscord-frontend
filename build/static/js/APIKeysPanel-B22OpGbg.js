import{r as o,n as e}from"./react-core-Cj7FUMmY.js";import{t as r}from"./index-CC_Kftin.js";import{ad as j,a6 as c,a3 as k,a4 as w,aA as K,g as C}from"./icons-vendor-DnRG7SaF.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BsD1gqUZ.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-MN-5i-Jz.js";import"./crypto-vendor-DK-7ILyQ.js";const L=({fetchWithAuth:n,apiBaseUrl:a})=>{const[d,p]=o.useState([]),[x,y]=o.useState(!0),[l,b]=o.useState({});o.useEffect(()=>{i()},[]);const i=async()=>{try{const t=await n(`${a}/apikeys/list/`);if(t.ok){const s=await t.json();p(s)}}catch{}finally{y(!1)}},g=async()=>{const t=prompt("API Key name:");if(t)try{const s=await n(`${a}/apikeys/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(s.ok){const h=await s.json();r.success(`✅ Key created!

Key: ${h.key}

⚠️ Save this! It won't be shown again.`),i()}}catch{r.error("❌ Failed to create key")}},u=async t=>{if(confirm("Delete this API key?"))try{(await n(`${a}/apikeys/${t}/delete/`,{method:"DELETE"})).ok&&i()}catch{r.error("❌ Failed to delete key")}},f=t=>{navigator.clipboard.writeText(t),r.success("✅ Copied to clipboard!")},m=t=>t?t.substring(0,8)+"•".repeat(24):"";return x?e.jsx("div",{style:{padding:"20px",color:"#b9bbbe"},children:"Loading..."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,color:"#dcddde"},children:"API Keys"}),e.jsx("p",{style:{margin:"5px 0 0 0",color:"#72767d",fontSize:"13px"},children:"Create and manage API keys for external integrations"})]}),e.jsxs("button",{onClick:g,style:{padding:"8px 16px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"bold"},children:[e.jsx(j,{})," New Key"]})]}),d.length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#72767d",backgroundColor:"#2f3136",borderRadius:"8px"},children:[e.jsx(c,{style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),e.jsx("p",{children:"No API keys yet"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:d.map(t=>e.jsx("div",{style:{padding:"16px",backgroundColor:"#2f3136",borderRadius:"8px",border:"1px solid #40444b"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(c,{style:{color:"#5865f2"}}),e.jsx("span",{style:{color:"#dcddde",fontWeight:"bold"},children:t.name})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",backgroundColor:"#1e1f22",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#b9bbbe"},children:[e.jsx("span",{children:l[t.id]?t.key:m(t.key)}),e.jsx("button",{onClick:()=>b(s=>({...s,[t.id]:!s[t.id]})),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"},children:l[t.id]?e.jsx(k,{}):e.jsx(w,{})}),e.jsx("button",{onClick:()=>f(t.key),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"},children:e.jsx(K,{})})]}),e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#72767d"},children:["Created: ",new Date(t.created_at).toLocaleDateString(),t.last_used&&e.jsxs(e.Fragment,{children:[" • Last used: ",new Date(t.last_used).toLocaleDateString()]})]})]}),e.jsx("button",{onClick:()=>u(t.id),style:{background:"none",border:"none",color:"#f04747",cursor:"pointer",padding:"8px",borderRadius:"4px"},title:"Delete key",children:e.jsx(C,{})})]})},t.id))}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(250, 166, 26, 0.1)",borderLeft:"3px solid #faa61a",borderRadius:"4px",fontSize:"13px",color:"#dcddde"},children:["⚠️ ",e.jsx("strong",{children:"Security:"})," Keep your API keys secret! Anyone with your key can access your account."]})]})};export{L as default};
