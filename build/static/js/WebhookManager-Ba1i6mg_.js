import{r,l as w,aI as R,v as E}from"./react-core-B6hadH-M.js";import{t as p}from"./index-D_6pZib5.js";const W=({onClose:s,fetchWithAuth:a,apiBaseUrl:l,serverId:v})=>{const[d,u]=r.useState([]),[g,h]=r.useState(!0),[b,i]=r.useState(!1),[o,c]=r.useState({name:"",url:"",events:[]});r.useEffect(()=>{m()},[]);const m=async()=>{try{const e=await a(`${l}/webhooks/list/`);if(e.ok){const n=await e.json();u(n.webhooks||[])}}catch(e){console.error("Load webhooks error:",e)}finally{h(!1)}},x=async()=>{if(!o.name||!o.url){p.warning("Ä°sim ve URL gerekli");return}try{(await a(`${l}/webhooks/create/`,{method:"POST",body:JSON.stringify(o)})).ok&&(p.success("Webhook oluÅŸturuldu!"),i(!1),c({name:"",url:"",events:[]}),m())}catch(e){console.error("Create webhook error:",e)}},y=async e=>{if(confirm("Bu webhook'u silmek istediÄŸinizden emin misiniz?"))try{(await a(`${l}/webhooks/${e}/delete/`,{method:"DELETE"})).ok&&u(k=>k.filter(f=>f.id!==e))}catch(n){console.error("Delete webhook error:",n)}};return React.createElement("div",{style:t.overlay,onClick:s},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("h2",{style:t.title},"ðŸ”— Webhook YÃ¶netimi"),React.createElement("button",{onClick:s,style:t.closeButton},React.createElement(w,null))),React.createElement("div",{style:t.content},!b&&React.createElement("button",{onClick:()=>i(!0),style:t.createButton},React.createElement(R,null)," Yeni Webhook"),b&&React.createElement("div",{style:t.createForm},React.createElement("input",{type:"text",placeholder:"Webhook Ä°smi",value:o.name,onChange:e=>c({...o,name:e.target.value}),style:t.input}),React.createElement("input",{type:"url",placeholder:"Webhook URL",value:o.url,onChange:e=>c({...o,url:e.target.value}),style:t.input}),React.createElement("div",{style:{display:"flex",gap:"10px"}},React.createElement("button",{onClick:x,style:t.submitButton},"OluÅŸtur"),React.createElement("button",{onClick:()=>i(!1),style:t.cancelButton},"Ä°ptal"))),g?React.createElement("div",{style:t.loading},"YÃ¼kleniyor..."):d.length===0?React.createElement("div",{style:t.empty},"HenÃ¼z webhook oluÅŸturulmamÄ±ÅŸ"):React.createElement("div",{style:t.webhookList},d.map(e=>React.createElement("div",{key:e.id,style:t.webhookItem},React.createElement("div",null,React.createElement("div",{style:t.webhookName},e.name),React.createElement("div",{style:t.webhookUrl},e.url)),React.createElement("button",{onClick:()=>y(e.id),style:t.deleteButton},React.createElement(E,null))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.5em"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.5em"},content:{padding:"20px",overflowY:"auto",flex:1},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"15px"},createForm:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px",marginBottom:"15px"},input:{width:"100%",padding:"10px",marginBottom:"10px",backgroundColor:"#2b2d31",border:"1px solid #5865f2",borderRadius:"4px",color:"white"},submitButton:{flex:1,padding:"10px",backgroundColor:"#3ba55d",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},cancelButton:{flex:1,padding:"10px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px"},webhookList:{display:"flex",flexDirection:"column",gap:"10px"},webhookItem:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},webhookName:{color:"white",fontWeight:"bold",marginBottom:"5px"},webhookUrl:{color:"#b9bbbe",fontSize:"0.85em"},deleteButton:{backgroundColor:"#f04747",border:"none",padding:"8px 12px",borderRadius:"4px",color:"white",cursor:"pointer"}};export{W as default};
