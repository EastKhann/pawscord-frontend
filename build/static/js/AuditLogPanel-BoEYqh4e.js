import{r as s,n as e}from"./react-core-Cj7FUMmY.js";import{b5 as h,a as _,h as z,ao as R}from"./icons-vendor-8IeoBGEh.js";import"./editor-vendor-D9c4a6XZ.js";const A=({serverId:l,onClose:f,fetchWithAuth:p,apiBaseUrl:x})=>{const[b,m]=s.useState([]),[y,u]=s.useState(!0),[r,j]=s.useState("all"),[a,v]=s.useState(""),[i,S]=s.useState("7days");s.useEffect(()=>{w()},[l,r,i]);const w=async()=>{u(!0);try{const t=new URLSearchParams({filter:r,range:i}),n=await p(`${x}/servers/${l}/audit-logs/?${t}`);if(n.ok){const d=await n.json();m(d.logs||[])}}catch{}finally{u(!1)}},k=async()=>{try{const n=await(await p(`${x}/servers/${l}/audit-logs/export/`)).blob(),d=window.URL.createObjectURL(n),c=document.createElement("a");c.href=d,c.download=`audit-log-${l}-${Date.now()}.csv`,c.click()}catch{}},C=t=>({member_join:"ðŸ‘‹",member_leave:"ðŸ‘‹",member_kick:"ðŸ‘¢",member_ban:"ðŸ”¨",channel_create:"âž•",channel_delete:"ðŸ—‘ï¸",channel_update:"âœï¸",role_create:"ðŸŽ­",role_delete:"ðŸ—‘ï¸",role_update:"âœï¸",message_delete:"ðŸ—‘ï¸",message_bulk_delete:"ðŸ—‘ï¸",server_update:"âš™ï¸",invite_create:"ðŸ”—",webhook_create:"ðŸª",webhook_delete:"ðŸ—‘ï¸"})[t]||"ðŸ“",L=t=>t.includes("delete")||t.includes("kick")||t.includes("ban")?"#ed4245":t.includes("create")||t.includes("join")?"#3ba55d":"#faa61a",g=b.filter(t=>t.description?.toLowerCase().includes(a.toLowerCase())||t.user?.toLowerCase().includes(a.toLowerCase()));return e.jsx("div",{style:o.overlay,children:e.jsxs("div",{style:o.panel,children:[e.jsxs("div",{style:o.header,children:[e.jsxs("div",{style:o.headerLeft,children:[e.jsx(h,{size:20,color:"#5865f2"}),e.jsx("h2",{style:o.title,children:"Denetim GÃ¼nlÃ¼ÄŸÃ¼"})]}),e.jsx("button",{onClick:f,style:o.closeButton,children:e.jsx(_,{size:20})})]}),e.jsxs("div",{style:o.filters,children:[e.jsxs("div",{style:o.searchBox,children:[e.jsx(z,{size:14,color:"#b9bbbe"}),e.jsx("input",{type:"text",placeholder:"Ara...",value:a,onChange:t=>v(t.target.value),style:o.searchInput})]}),e.jsxs("select",{value:r,onChange:t=>j(t.target.value),style:o.select,children:[e.jsx("option",{value:"all",children:"TÃ¼m Eylemler"}),e.jsx("option",{value:"members",children:"Ãœye Ä°ÅŸlemleri"}),e.jsx("option",{value:"channels",children:"Kanal Ä°ÅŸlemleri"}),e.jsx("option",{value:"roles",children:"Rol Ä°ÅŸlemleri"}),e.jsx("option",{value:"messages",children:"Mesaj Ä°ÅŸlemleri"}),e.jsx("option",{value:"server",children:"Sunucu Ä°ÅŸlemleri"})]}),e.jsxs("select",{value:i,onChange:t=>S(t.target.value),style:o.select,children:[e.jsx("option",{value:"1day",children:"Son 24 Saat"}),e.jsx("option",{value:"7days",children:"Son 7 GÃ¼n"}),e.jsx("option",{value:"30days",children:"Son 30 GÃ¼n"}),e.jsx("option",{value:"90days",children:"Son 90 GÃ¼n"})]}),e.jsxs("button",{onClick:k,style:o.exportButton,children:[e.jsx(R,{size:14}),e.jsx("span",{children:"DÄ±ÅŸa Aktar"})]})]}),e.jsx("div",{style:o.logsList,children:y?e.jsx("div",{style:o.loading,children:"YÃ¼kleniyor..."}):g.length===0?e.jsxs("div",{style:o.empty,children:[e.jsx(h,{size:48,color:"#4e5058"}),e.jsx("p",{children:"HenÃ¼z log kaydÄ± yok"})]}):g.map((t,n)=>e.jsxs("div",{style:o.logItem,children:[e.jsx("div",{style:o.logIcon,children:C(t.action)}),e.jsxs("div",{style:o.logContent,children:[e.jsxs("div",{style:o.logDescription,children:[e.jsx("span",{style:{color:L(t.action),fontWeight:"bold"},children:t.user})," ",t.description]}),e.jsxs("div",{style:o.logMeta,children:[e.jsx("span",{children:new Date(t.timestamp).toLocaleString("tr-TR")}),t.target&&e.jsxs("span",{children:[" â€¢ Hedef: ",t.target]})]})]})]},n))})]})})},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"100%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.4)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},title:{margin:0,fontSize:"20px",fontWeight:"bold",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"all 0.2s"},filters:{display:"flex",gap:"12px",padding:"16px 20px",borderBottom:"1px solid #202225",flexWrap:"wrap"},searchBox:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#202225",padding:"8px 12px",borderRadius:"4px",flex:1,minWidth:"200px"},searchInput:{background:"none",border:"none",color:"#dcddde",fontSize:"14px",outline:"none",width:"100%"},select:{backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",fontSize:"14px",cursor:"pointer",outline:"none"},exportButton:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},logsList:{flex:1,overflowY:"auto",padding:"16px 20px"},loading:{textAlign:"center",padding:"40px",color:"#b9bbbe"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},logItem:{display:"flex",gap:"12px",padding:"12px",marginBottom:"8px",backgroundColor:"#36393f",borderRadius:"4px",borderLeft:"3px solid #5865f2",transition:"all 0.2s"},logIcon:{fontSize:"24px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},logContent:{flex:1},logDescription:{color:"#dcddde",fontSize:"14px",marginBottom:"4px"},logMeta:{fontSize:"12px",color:"#72767d"}};export{A as default};
