import{r as n,d as e,a6 as c,i as E,z as S,bK as d,c9 as C}from"./react-core-DMT_QkRe.js";import{t as w}from"./index-w8kftCDz.js";const L=({fetchWithAuth:m,apiBaseUrl:p,onClose:f,serverId:x})=>{const[a,g]=n.useState(null),[y,i]=n.useState(!1),[s,b]=n.useState("7d"),u=[{value:"24h",label:"Last 24 Hours"},{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"all",label:"All Time"}];n.useEffect(()=>{v()},[s]);const v=async()=>{i(!0);try{const l=await(await m(`${p}/api/servers/${x}/growth-metrics/?range=${s}`)).json();g(l)}catch{w.error("Failed to load growth metrics")}finally{i(!1)}},o=r=>r>=1e6?`${(r/1e6).toFixed(1)}M`:r>=1e3?`${(r/1e3).toFixed(1)}K`:r;return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(c,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Growth Metrics")),e.createElement("button",{onClick:f,style:t.closeButton},e.createElement(E,null))),e.createElement("div",{style:t.toolbar},e.createElement("select",{value:s,onChange:r=>b(r.target.value),style:t.select},u.map(r=>e.createElement("option",{key:r.value,value:r.value},r.label)))),e.createElement("div",{style:t.content},y?e.createElement("div",{style:t.loading},"Loading metrics..."):a?e.createElement("div",null,e.createElement("div",{style:t.statsGrid},e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(S,{style:{color:"#5865f2",fontSize:"24px"}})),e.createElement("div",{style:t.statInfo},e.createElement("div",{style:t.statLabel},"Total Members"),e.createElement("div",{style:t.statValue},o(a.total_members||0)),a.member_growth!==void 0&&e.createElement("div",{style:{...t.statChange,color:a.member_growth>=0?"#43b581":"#f04747"}},e.createElement(d,{style:{transform:a.member_growth<0?"rotate(180deg)":"none"}}),Math.abs(a.member_growth),"% this period"))),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(c,{style:{color:"#43b581",fontSize:"24px"}})),e.createElement("div",{style:t.statInfo},e.createElement("div",{style:t.statLabel},"Active Members"),e.createElement("div",{style:t.statValue},o(a.active_members||0)),e.createElement("div",{style:t.statSubtext},a.total_members?(a.active_members/a.total_members*100).toFixed(1):0,"% of total"))),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement("span",{style:{fontSize:"24px"}},"ðŸ’¬")),e.createElement("div",{style:t.statInfo},e.createElement("div",{style:t.statLabel},"Messages Sent"),e.createElement("div",{style:t.statValue},o(a.messages_sent||0)),a.message_growth!==void 0&&e.createElement("div",{style:{...t.statChange,color:a.message_growth>=0?"#43b581":"#f04747"}},e.createElement(d,{style:{transform:a.message_growth<0?"rotate(180deg)":"none"}}),Math.abs(a.message_growth),"% this period"))),e.createElement("div",{style:t.statCard},e.createElement("div",{style:t.statIcon},e.createElement(C,{style:{color:"#faa61a",fontSize:"24px"}})),e.createElement("div",{style:t.statInfo},e.createElement("div",{style:t.statLabel},"New Joins"),e.createElement("div",{style:t.statValue},o(a.new_joins||0)),e.createElement("div",{style:t.statSubtext},a.retention_rate?`${a.retention_rate}% retention`:"")))),a.daily_stats&&e.createElement("div",{style:t.chartSection},e.createElement("h3",{style:t.sectionTitle},"Daily Activity"),e.createElement("div",{style:t.chart},a.daily_stats.map((r,l)=>e.createElement("div",{key:l,style:t.chartBar},e.createElement("div",{style:{...t.chartBarFill,height:`${r.count/Math.max(...a.daily_stats.map(h=>h.count))*100}%`}}),e.createElement("div",{style:t.chartLabel},new Date(r.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})))))),a.top_contributors&&e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"Top Contributors"),e.createElement("div",{style:t.contributorsList},a.top_contributors.slice(0,10).map((r,l)=>e.createElement("div",{key:l,style:t.contributorCard},e.createElement("div",{style:t.contributorRank},"#",l+1),e.createElement("div",{style:t.contributorInfo},e.createElement("div",{style:t.contributorName},r.username),e.createElement("div",{style:t.contributorStat},o(r.message_count)," messages"))))))):e.createElement("div",{style:t.empty},"No metrics available"))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"1100px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},select:{padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px",width:"200px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",gap:"16px"},statIcon:{minWidth:"48px"},statInfo:{flex:1},statLabel:{fontSize:"13px",color:"#99aab5",marginBottom:"6px"},statValue:{fontSize:"28px",fontWeight:"700",color:"#ffffff",marginBottom:"6px"},statChange:{fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},statSubtext:{fontSize:"12px",color:"#99aab5"},chartSection:{marginBottom:"32px"},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},chart:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",height:"200px",padding:"20px",backgroundColor:"#2c2f33",borderRadius:"8px"},chartBar:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},chartBarFill:{width:"80%",backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",minHeight:"4px"},chartLabel:{fontSize:"10px",color:"#99aab5",textAlign:"center"},section:{marginBottom:"32px"},contributorsList:{display:"flex",flexDirection:"column",gap:"8px"},contributorCard:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"12px",display:"flex",gap:"16px",alignItems:"center"},contributorRank:{fontSize:"16px",fontWeight:"700",color:"#5865f2",minWidth:"40px"},contributorInfo:{flex:1},contributorName:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},contributorStat:{fontSize:"12px",color:"#99aab5"}};export{L as default};
