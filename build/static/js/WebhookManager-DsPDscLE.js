import{r as n,d as e,i as E,aC as C,E as v}from"./react-core-DrOm_csO.js";import{t as g}from"./index-DmEhdEtw.js";const S=({onClose:c,fetchWithAuth:a,apiBaseUrl:i,serverId:B})=>{const[u,b]=n.useState([]),[h,x]=n.useState(!0),[m,s]=n.useState(!1),[r,d]=n.useState({name:"",url:"",events:[]});n.useEffect(()=>{p()},[]);const p=async()=>{try{const t=await a(`${i}/webhooks/list/`);if(t.ok){const l=await t.json();b(l.webhooks||[])}}catch(t){console.error("Load webhooks error:",t)}finally{x(!1)}},y=async()=>{if(!r.name||!r.url){g.warning("Ä°sim ve URL gerekli");return}try{(await a(`${i}/webhooks/create/`,{method:"POST",body:JSON.stringify(r)})).ok&&(g.success("Webhook oluÅŸturuldu!"),s(!1),d({name:"",url:"",events:[]}),p())}catch(t){console.error("Create webhook error:",t)}},k=async t=>{if(confirm("Bu webhook'u silmek istediÄŸinizden emin misiniz?"))try{(await a(`${i}/webhooks/${t}/delete/`,{method:"DELETE"})).ok&&b(f=>f.filter(w=>w.id!==t))}catch(l){console.error("Delete webhook error:",l)}};return e.createElement("div",{style:o.overlay,onClick:c},e.createElement("div",{style:o.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:o.header},e.createElement("h2",{style:o.title},"ðŸ”— Webhook YÃ¶netimi"),e.createElement("button",{onClick:c,style:o.closeButton},e.createElement(E,null))),e.createElement("div",{style:o.content},!m&&e.createElement("button",{onClick:()=>s(!0),style:o.createButton},e.createElement(C,null)," Yeni Webhook"),m&&e.createElement("div",{style:o.createForm},e.createElement("input",{type:"text",placeholder:"Webhook Ä°smi",value:r.name,onChange:t=>d({...r,name:t.target.value}),style:o.input}),e.createElement("input",{type:"url",placeholder:"Webhook URL",value:r.url,onChange:t=>d({...r,url:t.target.value}),style:o.input}),e.createElement("div",{style:{display:"flex",gap:"10px"}},e.createElement("button",{onClick:y,style:o.submitButton},"OluÅŸtur"),e.createElement("button",{onClick:()=>s(!1),style:o.cancelButton},"Ä°ptal"))),h?e.createElement("div",{style:o.loading},"YÃ¼kleniyor..."):u.length===0?e.createElement("div",{style:o.empty},"HenÃ¼z webhook oluÅŸturulmamÄ±ÅŸ"):e.createElement("div",{style:o.webhookList},u.map(t=>e.createElement("div",{key:t.id,style:o.webhookItem},e.createElement("div",null,e.createElement("div",{style:o.webhookName},t.name),e.createElement("div",{style:o.webhookUrl},t.url)),e.createElement("button",{onClick:()=>k(t.id),style:o.deleteButton},e.createElement(v,null))))))))},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.5em"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.5em"},content:{padding:"20px",overflowY:"auto",flex:1},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"15px"},createForm:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px",marginBottom:"15px"},input:{width:"100%",padding:"10px",marginBottom:"10px",backgroundColor:"#2b2d31",border:"1px solid #5865f2",borderRadius:"4px",color:"white"},submitButton:{flex:1,padding:"10px",backgroundColor:"#3ba55d",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},cancelButton:{flex:1,padding:"10px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px"},webhookList:{display:"flex",flexDirection:"column",gap:"10px"},webhookItem:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},webhookName:{color:"white",fontWeight:"bold",marginBottom:"5px"},webhookUrl:{color:"#b9bbbe",fontSize:"0.85em"},deleteButton:{backgroundColor:"#f04747",border:"none",padding:"8px 12px",borderRadius:"4px",color:"white",cursor:"pointer"}};export{S as default};
