{"version":3,"mappings":"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","names":["lazy","useState","useRef","useEffect","jsx","jsxs","Suspense","Fragment"],"ignoreList":[],"sources":["../../../src/CinemaModal.js"],"sourcesContent":["import { useState, useEffect, useRef, lazy, Suspense } from 'react';\nconst ReactPlayer = lazy(() => import('react-player'));\nimport { FaTimes, FaLink, FaExclamationCircle, FaPlay, FaPause } from 'react-icons/fa';\n\nconst CinemaModal = ({ onClose, ws }) => {\n    const [url, setUrl] = useState('https://www.youtube.com/watch?v=jfKfPfyJRdk');\n    const [inputUrl, setInputUrl] = useState('');\n    const [playing, setPlaying] = useState(false);\n    const [volume, setVolume] = useState(0.8);\n    const [error, setError] = useState(null);\n    const [isReady, setIsReady] = useState(false);\n\n    const playerRef = useRef(null);\n    const isRemoteUpdate = useRef(false);\n\n    // --- G√úVENLƒ∞ ZAMAN ALMA FONKSƒ∞YONU (HATA √ñNLEYƒ∞Cƒ∞) ---\n    // Bu fonksiyon player hazƒ±r deƒüilse hata vermek yerine 0 d√∂nd√ºr√ºr.\n    const getCurrentTimeSafe = () => {\n        if (playerRef.current && typeof playerRef.current.getCurrentTime === 'function') {\n            try {\n                return playerRef.current.getCurrentTime();\n            } catch (e) {\n                return 0;\n            }\n        }\n        return 0;\n    };\n\n    useEffect(() => {\n        if (!ws.current) return;\n\n        const handleMessage = (event) => {\n            try {\n                const data = JSON.parse(event.data);\n                if (data.type === 'media_sync') {\n                    isRemoteUpdate.current = true;\n\n                    if (data.action === 'change_url') {\n                        setPlaying(false);\n                        setIsReady(false);\n                        setUrl(data.payload.url);\n                        setError(null);\n                    }\n                    else if (data.action === 'play') {\n                        const currentTime = getCurrentTimeSafe();\n                        // Zaman farkƒ± 2 saniyeden fazlaysa atla\n                        if (Math.abs(currentTime - data.payload.time) > 2) {\n                            if (playerRef.current && typeof playerRef.current.seekTo === 'function') {\n                                playerRef.current.seekTo(data.payload.time);\n                            }\n                        }\n                        setPlaying(true);\n                    }\n                    else if (data.action === 'pause') {\n                        setPlaying(false);\n                    }\n\n                    setTimeout(() => { isRemoteUpdate.current = false; }, 1000);\n                }\n            } catch (e) {\n                console.error(\"WS Hatasƒ±:\", e);\n            }\n        };\n\n        ws.current.addEventListener('message', handleMessage);\n        return () => ws.current?.removeEventListener('message', handleMessage);\n    }, [ws]);\n\n    const sendSignal = (action, payload = {}) => {\n        if (isRemoteUpdate.current) return;\n\n        if (ws.current?.readyState === WebSocket.OPEN) {\n            ws.current.send(JSON.stringify({ type: 'media_sync', action, payload }));\n        }\n    };\n\n    const handleLoadUrl = (e) => {\n        e.preventDefault();\n        if (!inputUrl.trim()) return;\n\n        isRemoteUpdate.current = false;\n        setPlaying(false);\n        setIsReady(false);\n        setUrl(inputUrl);\n        setError(null);\n\n        sendSignal('change_url', { url: inputUrl });\n        setInputUrl('');\n    };\n\n    return (\n        <div style={styles.overlay}>\n            <div style={styles.modal}>\n                <div style={styles.header}>\n                    <h3>üçø Sinema & M√ºzik</h3>\n                    <button onClick={onClose} style={styles.closeBtn}><FaTimes /></button>\n                </div>\n\n                <div style={styles.playerWrapper}>\n                    {error && (\n                        <div style={styles.statusOverlay}>\n                            <FaExclamationCircle size={40} color=\"#f04747\" />\n                            <p style={{ marginTop: 10 }}>{error}</p>\n                        </div>\n                    )}\n\n                    {!isReady && !error && (\n                        <div style={styles.statusOverlay}>\n                            <div className=\"spinner\"></div>\n                            <p style={{ marginTop: 10 }}>Y√ºkleniyor...</p>\n                        </div>\n                    )}\n\n                    <Suspense fallback={<div style={{ color: '#fff', padding: '50px', textAlign: 'center' }}>Loading player...</div>}>\n                        <ReactPlayer\n                            key={url}\n                            ref={playerRef}\n                            url={url}\n\n                            playing={playing}\n                            volume={volume}\n                            controls={true}\n\n                            width=\"100%\"\n                            height=\"100%\"\n\n                            // G√∂r√ºn√ºrl√ºk ayarƒ±\n                            style={{ position: 'absolute', top: 0, left: 0 }}\n\n                            onReady={() => {\n                                setIsReady(true);\n                            }}\n\n                            onError={(e) => {\n                                console.error(\"Video Oynatma Hatasƒ±:\", e);\n                                setError(\"Video oynatƒ±lamadƒ±. Link ge√ßersiz olabilir.\");\n                                setIsReady(true);\n                            }}\n\n                            // --- KRƒ∞Tƒ∞K D√úZELTME BURADA ---\n                            onPlay={() => {\n                                const t = getCurrentTimeSafe(); // G√ºvenli fonksiyonu kullan\n                                sendSignal('play', { time: t });\n                            }}\n\n                            onPause={() => {\n                                sendSignal('pause');\n                            }}\n\n                            // Gereksiz sinyalleri √∂nlemek i√ßin bo≈ü bƒ±raktƒ±k\n                            onProgress={() => { }}\n                        />\n                    </Suspense>\n                </div>\n\n                <div style={styles.controls}>\n                    <form onSubmit={handleLoadUrl} style={styles.urlForm}>\n                        <FaLink style={{ color: '#b9bbbe' }} />\n                        <input\n                            type=\"text\"\n                            value={inputUrl}\n                            onChange={(e) => setInputUrl(e.target.value)}\n                            placeholder=\"YouTube linki yapƒ±≈ütƒ±r...\"\n                            style={styles.input}\n                        />\n                        <button type=\"submit\" style={styles.loadBtn}>Y√ºkle</button>\n                    </form>\n\n                    {/* --- KRƒ∞Tƒ∞K D√úZELTME BURADA --- */}\n                    <button\n                        onClick={() => {\n                            isRemoteUpdate.current = false;\n                            if (playing) {\n                                setPlaying(false);\n                                sendSignal('pause');\n                            } else {\n                                setPlaying(true);\n                                const t = getCurrentTimeSafe(); // G√ºvenli fonksiyonu kullan\n                                sendSignal('play', { time: t });\n                            }\n                        }}\n                        style={{ ...styles.loadBtn, backgroundColor: playing ? '#da373c' : '#43b581', marginLeft: 10, width: 110, display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 5 }}\n                    >\n                        {playing ? <><FaPause /> Durdur</> : <><FaPlay /> Oynat</>}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    overlay: { position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', backgroundColor: 'rgba(0,0,0,0.9)', zIndex: 2000, display: 'flex', justifyContent: 'center', alignItems: 'center' },\n    modal: { width: '90%', maxWidth: '900px', backgroundColor: '#202225', borderRadius: '12px', overflow: 'hidden', boxShadow: '0 10px 30px rgba(0,0,0,0.5)' },\n    header: { padding: '15px', backgroundColor: '#2f3136', display: 'flex', justifyContent: 'space-between', color: 'white' },\n    playerWrapper: { position: 'relative', paddingTop: '56.25%', backgroundColor: 'black' },\n    closeBtn: { background: 'none', border: 'none', color: 'white', fontSize: '1.5em', cursor: 'pointer' },\n    controls: { padding: '20px', display: 'flex', alignItems: 'center' },\n    urlForm: { display: 'flex', gap: '10px', backgroundColor: '#40444b', padding: '10px', borderRadius: '8px', flex: 1 },\n    input: { flex: 1, background: 'transparent', border: 'none', color: 'white', outline: 'none' },\n    loadBtn: { padding: '8px 20px', backgroundColor: '#5865f2', border: 'none', borderRadius: '4px', color: 'white', fontWeight: 'bold', cursor: 'pointer' },\n    statusOverlay: { position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', backgroundColor: 'rgba(0,0,0,0.7)', color: 'white', zIndex: 10 }\n};\n\nconst styleSheet = document.createElement(\"style\");\nstyleSheet.innerText = `\n    .spinner {\n        border: 4px solid rgba(255, 255, 255, 0.3);\n        border-radius: 50%;\n        border-top: 4px solid #ffffff;\n        width: 40px;\n        height: 40px;\n        animation: spin 1s linear infinite;\n    }\n    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n`;\ndocument.head.appendChild(styleSheet);\n\nexport default CinemaModal;\n\n"],"file":"CinemaModal-BvqRSqV8.js"}