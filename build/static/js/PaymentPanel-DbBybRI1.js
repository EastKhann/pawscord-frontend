import{r as c,j as e}from"./react-core-D6cE4lil.js";import{aw as m,B as D,bJ as B,X as N,a as L,b5 as M}from"./icons-vendor-DT2gd7vx.js";import{t as s}from"./index-BvqjkDq7.js";import"./media-vendor-Du00QUHb.js";import"./router-vendor-wrB4dqw3.js";import"./state-vendor-DnurjGY_.js";import"./crypto-vendor-BYnay7oC.js";import"./ui-vendor-CZOhtEfS.js";const n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"80vh",display:"flex",flexDirection:"column",color:"#fff"},header:{padding:"20px",borderBottom:"1px solid #444",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},closeBtn:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px"},tabs:{display:"flex",borderBottom:"1px solid #444",padding:"0 20px"},tab:{background:"none",border:"none",color:"#99aab5",padding:"12px 20px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",borderBottom:"2px solid transparent",transition:"all 0.2s"},activeTab:{color:"#5865f2",borderBottomColor:"#5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",padding:"40px",color:"#99aab5"},balanceView:{display:"flex",flexDirection:"column",alignItems:"center",gap:"30px"},balanceCard:{backgroundColor:"#2c2f33",borderRadius:"12px",padding:"40px",textAlign:"center",width:"100%",maxWidth:"400px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},balanceAmount:{fontSize:"48px",fontWeight:"bold",color:"#faa61a"},balanceLabel:{fontSize:"14px",color:"#99aab5"},quickActions:{display:"flex",gap:"12px",width:"100%",maxWidth:"400px"},actionBtn:{flex:1,padding:"12px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.2s"},buyView:{display:"flex",flexDirection:"column",gap:"20px"},sectionTitle:{fontSize:"16px",fontWeight:"600",margin:0,marginBottom:"12px"},packages:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},package:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",textAlign:"center",cursor:"pointer",border:"2px solid transparent",transition:"all 0.2s",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},selectedPackage:{borderColor:"#5865f2",backgroundColor:"#2c3136"},pkgAmount:{fontSize:"24px",fontWeight:"bold",color:"#faa61a"},bonus:{fontSize:"10px",color:"#43b581",fontWeight:"bold",padding:"2px 8px",backgroundColor:"rgba(67, 181, 129, 0.1)",borderRadius:"4px"},pkgPrice:{fontSize:"18px",fontWeight:"600",color:"#fff"},purchaseSection:{marginTop:"24px"},paymentMethods:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},paymentMethodCard:{padding:"20px",background:"#2b2d31",border:"2px solid #40444b",borderRadius:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease"},selectedPaymentMethod:{background:"#5865f2",borderColor:"#5865f2",transform:"scale(1.05)",boxShadow:"0 4px 16px rgba(88, 101, 242, 0.3)"},pmIcon:{fontSize:"48px",marginBottom:"12px"},pmTitle:{fontSize:"16px",fontWeight:"600",color:"white",marginBottom:"6px"},pmDesc:{fontSize:"13px",color:"#b9bbbe",marginBottom:"8px"},pmBadge:{display:"inline-block",padding:"4px 12px",background:"#40444b",borderRadius:"12px",fontSize:"11px",color:"#43b581",fontWeight:"600"},paymentInfo:{background:"#2b2d31",borderRadius:"12px",padding:"16px",marginBottom:"16px"},paymentInfoRow:{display:"flex",justifyContent:"space-between",padding:"8px 0",fontSize:"14px",color:"#b9bbbe",borderBottom:"1px solid #40444b"},paymentNote:{textAlign:"center",fontSize:"12px",color:"#43b581",marginTop:"12px"},price:{fontSize:"18px",fontWeight:"600",color:"#fff"},paymentMethod:{marginTop:"12px"},label:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#dcddde"},select:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},purchaseBtn:{width:"100%",padding:"14px",backgroundColor:"#43b581",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"12px"},transferView:{maxWidth:"500px",margin:"0 auto"},form:{display:"flex",flexDirection:"column",gap:"16px"},formGroup:{display:"flex",flexDirection:"column",gap:"8px"},input:{padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},hint:{fontSize:"12px",color:"#99aab5"},transferBtn:{width:"100%",padding:"14px",backgroundColor:"#5865f2",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"12px"},historyView:{display:"flex",flexDirection:"column",gap:"16px"},transactions:{display:"flex",flexDirection:"column",gap:"8px"},transaction:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",alignItems:"center",gap:"12px"},txIcon:{fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"},txDetails:{flex:1},txTitle:{fontSize:"14px",fontWeight:"600"},txDate:{fontSize:"12px",color:"#99aab5",marginTop:"4px"},txAmount:{fontSize:"18px",fontWeight:"bold"},empty:{textAlign:"center",padding:"40px",color:"#99aab5"}},P=[{amount:100,price:.99,bonus:0},{amount:500,price:4.99,bonus:50},{amount:1e3,price:9.99,bonus:150},{amount:2500,price:19.99,bonus:500},{amount:5e3,price:39.99,bonus:1e3}],_=(t,a)=>{const[u,d]=c.useState("balance"),[p,x]=c.useState(0),[o,y]=c.useState([]),[g,f]=c.useState(!0),[h,A]=c.useState(100),[j,R]=c.useState("stripe"),[b,S]=c.useState(""),[C,T]=c.useState(""),[k,w]=c.useState(""),v=c.useCallback(async()=>{try{const l=await(await t(`${a}/users/balance/`)).json();x(l.balance||0)}catch{s.error("Failed to load balance")}finally{f(!1)}},[t,a]),r=c.useCallback(async()=>{try{const l=await(await t(`${a}/payments/history/`)).json();y(l.transactions||[])}catch{}},[t,a]);return c.useEffect(()=>{v(),r()},[v,r]),{activeTab:u,setActiveTab:d,balance:p,transactions:o,loading:g,amount:h,setAmount:A,paymentMethod:j,setPaymentMethod:R,transferRecipient:b,setTransferRecipient:S,transferAmount:C,setTransferAmount:T,transferNote:k,setTransferNote:w,handlePurchase:async()=>{if(h<100){s.error("Minimum purchase is 100 coins");return}if(!j){s.error("Please select a payment method");return}try{const i=await t(`${a}/payments/coins/purchase/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({coin_amount:parseInt(h),payment_method:j})});if(!i.ok){const z=await i.json();throw new Error(z.error||"Payment failed")}const l=await i.json();l.success?l.redirect_url?(s.info("Redirecting to payment page..."),window.location.href=l.redirect_url):l.payment_page_url?(s.info("Redirecting to payment page..."),window.location.href=l.payment_page_url):s.success("Payment initiated!"):s.error(l.error||"Payment failed")}catch(i){s.error(i.message||"Payment processing failed")}},handleTransfer:async()=>{if(!b||!C){s.error("Please fill in all fields");return}const i=parseInt(C);if(i<=0||i>p){s.error("Invalid transfer amount");return}try{const z=await(await t(`${a}/coins/transfer/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipient:b,amount:i,note:k})})).json();z.success?(s.success(`Transferred ${i} coins to ${b}`),v(),r(),S(""),T(""),w(""),d("balance")):s.error(z.error||"Transfer failed")}catch{s.error("Transfer failed")}}}},E=[{key:"crypto",icon:"ðŸª™",title:"Cryptocurrency",desc:"Bitcoin, Ethereum, USDC",badge:"Global â€¢ Fast"},{key:"stripe",icon:"ðŸ’³",title:"Credit/Debit Card",desc:"Stripe - Visa, Mastercard",badge:"Global â€¢ Secure"},{key:"iyzico",icon:"ðŸ‡¹ðŸ‡·",title:"Turkish Payment",desc:"Ä°yzico - TL payments",badge:"Turkey â€¢ TRY"}],W={crypto:"ðŸª™ Crypto",stripe:"ðŸ’³ Card (Stripe)",iyzico:"ðŸ‡¹ðŸ‡· Ä°yzico (TRY)"},V={crypto:"ðŸ”’ Secure cryptocurrency payment via Coinbase Commerce",stripe:"ðŸ”’ Secure card payment via Stripe",iyzico:"ðŸ”’ GÃ¼venli Ã¶deme - Ä°yzico ile korunur"},$={crypto:" Pay with Crypto",stripe:" Pay with Card",iyzico:" Ä°yzico ile Ã–de"},F=({styles:t,amount:a,setAmount:u,paymentMethod:d,setPaymentMethod:p,handlePurchase:x})=>e.jsxs("div",{style:t.buyView,children:[e.jsx("h3",{style:t.sectionTitle,children:"Choose Payment Method"}),e.jsx("div",{style:t.paymentMethods,children:E.map(o=>e.jsxs("div",{onClick:()=>p(o.key),style:{...t.paymentMethodCard,...d===o.key&&t.selectedPaymentMethod},children:[e.jsx("div",{style:t.pmIcon,children:o.icon}),e.jsx("div",{style:t.pmTitle,children:o.title}),e.jsx("div",{style:t.pmDesc,children:o.desc}),e.jsx("div",{style:t.pmBadge,children:o.badge})]},o.key))}),e.jsx("h3",{style:t.sectionTitle,children:"Select Coin Package"}),e.jsx("div",{style:t.packages,children:P.map((o,y)=>e.jsxs("div",{onClick:()=>u(o.amount),style:{...t.package,...a===o.amount&&t.selectedPackage},children:[e.jsx(m,{style:{fontSize:"32px",color:"#faa61a"}}),e.jsx("div",{style:t.pkgAmount,children:o.amount.toLocaleString()}),o.bonus>0&&e.jsxs("div",{style:t.bonus,children:["+",o.bonus," BONUS"]}),e.jsxs("div",{style:t.price,children:["$",o.price]}),a===o.amount&&e.jsx(D,{style:{position:"absolute",top:"10px",right:"10px",color:"#43b581"}})]},y))}),e.jsxs("div",{style:t.purchaseSection,children:[e.jsxs("div",{style:t.paymentInfo,children:[e.jsxs("div",{style:t.paymentInfoRow,children:[e.jsx("span",{children:"Selected Package:"}),e.jsxs("strong",{children:[a.toLocaleString()," coins"]})]}),e.jsxs("div",{style:t.paymentInfoRow,children:[e.jsx("span",{children:"Payment Method:"}),e.jsx("strong",{children:W[d]})]}),e.jsxs("div",{style:t.paymentInfoRow,children:[e.jsx("span",{children:"Total Price:"}),e.jsx("strong",{style:{color:"#faa61a",fontSize:"18px"},children:P.find(o=>o.amount===a)?.price&&(d==="iyzico"?`â‚º${(P.find(o=>o.amount===a).price*35).toFixed(0)}`:`$${P.find(o=>o.amount===a).price}`)})]})]}),e.jsxs("button",{onClick:x,style:t.purchaseBtn,children:[e.jsx(B,{}),$[d]]}),e.jsx("div",{style:t.paymentNote,children:V[d]})]})]}),O=({styles:t,balance:a,transferRecipient:u,setTransferRecipient:d,transferAmount:p,setTransferAmount:x,transferNote:o,setTransferNote:y,handleTransfer:g})=>e.jsxs("div",{style:t.transferView,children:[e.jsx("h3",{style:t.sectionTitle,children:"Transfer Coins"}),e.jsxs("div",{style:t.form,children:[e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Recipient Username"}),e.jsx("input",{type:"text",value:u,onChange:f=>d(f.target.value),placeholder:"@username",style:t.input})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Amount"}),e.jsx("input",{type:"number",value:p,onChange:f=>x(f.target.value),placeholder:"0",min:"1",max:a,style:t.input}),e.jsxs("div",{style:t.hint,children:["Available: ",a," coins"]})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Note (Optional)"}),e.jsx("input",{type:"text",value:o,onChange:f=>y(f.target.value),placeholder:"Add a message...",style:t.input})]}),e.jsxs("button",{onClick:g,style:t.transferBtn,children:[e.jsx(m,{})," Transfer Coins"]})]})]}),U=({fetchWithAuth:t,apiBaseUrl:a,onClose:u,username:d})=>{const{activeTab:p,setActiveTab:x,balance:o,transactions:y,loading:g,amount:f,setAmount:h,paymentMethod:A,setPaymentMethod:j,transferRecipient:R,setTransferRecipient:b,transferAmount:S,setTransferAmount:C,transferNote:T,setTransferNote:k,handlePurchase:w,handleTransfer:v}=_(t,a);return e.jsx("div",{style:n.overlay,onClick:u,children:e.jsxs("div",{style:n.modal,onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:n.header,children:[e.jsxs("div",{style:n.headerLeft,children:[e.jsx(N,{style:{fontSize:"24px",color:"#faa61a"}}),e.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Payment Center"})]}),e.jsx("button",{onClick:u,style:n.closeBtn,children:e.jsx(L,{})})]}),e.jsx("div",{style:n.tabs,children:[{key:"balance",icon:e.jsx(m,{}),label:"Balance"},{key:"buy",icon:e.jsx(B,{}),label:"Buy Coins"},{key:"transfer",icon:e.jsx(m,{}),label:"Transfer"},{key:"history",icon:e.jsx(M,{}),label:"History"}].map(r=>e.jsxs("button",{onClick:()=>x(r.key),style:{...n.tab,...p===r.key&&n.activeTab},children:[r.icon," ",r.label]},r.key))}),e.jsx("div",{style:n.content,children:g?e.jsx("div",{style:n.loading,children:"Loading..."}):p==="balance"?e.jsxs("div",{style:n.balanceView,children:[e.jsxs("div",{style:n.balanceCard,children:[e.jsx(m,{style:{fontSize:"48px",color:"#faa61a"}}),e.jsx("div",{style:n.balanceAmount,children:o.toLocaleString()}),e.jsx("div",{style:n.balanceLabel,children:"Current Balance"})]}),e.jsxs("div",{style:n.quickActions,children:[e.jsxs("button",{onClick:()=>x("buy"),style:n.actionBtn,children:[e.jsx(B,{})," Buy Coins"]}),e.jsxs("button",{onClick:()=>x("transfer"),style:n.actionBtn,children:[e.jsx(m,{})," Transfer Coins"]})]})]}):p==="buy"?e.jsx(F,{styles:n,amount:f,setAmount:h,paymentMethod:A,setPaymentMethod:j,handlePurchase:w}):p==="transfer"?e.jsx(O,{styles:n,balance:o,transferRecipient:R,setTransferRecipient:b,transferAmount:S,setTransferAmount:C,transferNote:T,setTransferNote:k,handleTransfer:v}):e.jsxs("div",{style:n.historyView,children:[e.jsx("h3",{style:n.sectionTitle,children:"Transaction History"}),y.length===0?e.jsx("div",{style:n.empty,children:"No transactions yet"}):e.jsx("div",{style:n.transactions,children:y.map((r,I)=>e.jsxs("div",{style:n.transaction,children:[e.jsx("div",{style:n.txIcon,children:r.type==="purchase"?e.jsx(B,{style:{color:"#5865f2"}}):e.jsx(m,{style:{color:r.type==="transfer_sent"?"#f04747":"#43b581"}})}),e.jsxs("div",{style:n.txDetails,children:[e.jsx("div",{style:n.txTitle,children:r.description}),e.jsx("div",{style:n.txDate,children:new Date(r.created_at).toLocaleString()})]}),e.jsxs("div",{style:{...n.txAmount,color:r.amount>0?"#43b581":"#f04747"},children:[r.amount>0?"+":"",r.amount]})]},I))})]})})]})})};export{U as default};
