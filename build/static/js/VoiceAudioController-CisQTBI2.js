import{b as r,r as l}from"./react-core-9vc7GIjk.js";import{l as n,t as f}from"./index-BmHz9cUO.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-qCr-Mpaw.js";import"./crypto-vendor-C1qXRpJv.js";import"./icons-vendor-BHKL7tCa.js";import"./state-vendor-0vlBuk0v.js";const p=({remoteStreams:e,remoteVolumes:o,mutedUsers:i})=>{const[d,c]=l.useState(()=>localStorage.getItem("pawscord_audio_enabled")==="true"),u=l.useCallback(()=>{try{const t=window.AudioContext||window.webkitAudioContext,a=new t;a.state==="suspended"&&a.resume().then(()=>{n.audio("AudioContext resumed successfully")}),c(!0),localStorage.setItem("pawscord_audio_enabled","true"),n.audio("Global audio enabled")}catch(t){n.error("Failed to enable AudioContext:",t),f.error("âŒ Ses sistemi baÅŸlatÄ±lamadÄ±: "+t.message)}},[]);return l.useEffect(()=>()=>n.audio("VoiceAudioController UNMOUNTED!"),[]),r.createElement(r.Fragment,null,!d&&Object.keys(e).length>0&&r.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999999,backgroundColor:"rgba(0,0,0,0.9)",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"}},r.createElement("button",{onClick:u,style:{padding:"12px 24px",backgroundColor:"#ff4757",color:"white",fontWeight:"bold",border:"none",cursor:"pointer",borderRadius:"6px",fontSize:"16px",transition:"all 0.2s",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},onMouseOver:t=>t.target.style.backgroundColor="#ee5a6f",onMouseOut:t=>t.target.style.backgroundColor="#ff4757"},"ðŸš¨ SES SÄ°STEMÄ°NÄ° BAÅžLAT ðŸš¨")),r.createElement("div",{style:{display:"none"}},Object.entries(e).map(([t,a])=>r.createElement(b,{key:`${t}-${a.id}-${a.getAudioTracks().length}`,username:t,stream:a,volume:o[t]!==void 0?o[t]:100,isMuted:i?i.has(t):!1,globalEnabled:d}))))},b=({username:e,stream:o,volume:i,isMuted:d,globalEnabled:c})=>{const u=l.useRef(null);return l.useEffect(()=>{if(o){const t=o.getAudioTracks();n.log(`[AudioPlayer] ${e} has ${t.length} audio tracks`)}},[o,e]),l.useEffect(()=>{const t=u.current;if(!t||!o)return;t.srcObject=o,t.muted=!1,(async()=>{if(c)try{if(o.getAudioTracks().length===0){n.warn(`[AudioPlayer] No audio tracks for ${e}`);return}await t.play(),n.log(`âœ… [AudioPlayer] Successfully playing ${e}`)}catch{}})()},[o,e,c]),l.useEffect(()=>{const t=u.current;if(!t)return;const a=d?0:i/100;t.volume=Math.max(0,Math.min(1,a))},[i,d,e]),r.createElement("audio",{ref:u,autoPlay:!0,playsInline:!0,style:{display:"none"}})},m=r.memo(p);export{m as default};
