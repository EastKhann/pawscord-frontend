import{r as o,bt as p,l as T,bq as C,z as h,B as v,x as S}from"./react-core-B6hadH-M.js";import{t as a}from"./index-D_6pZib5.js";const F=({fetchWithAuth:n,apiBaseUrl:l,messageId:c,onClose:m})=>{const[B,w]=o.useState(null),[u,g]=o.useState([]),[b,f]=o.useState(!0),[i,x]=o.useState(""),[y,d]=o.useState(!1);o.useEffect(()=>{c&&s()},[c]);const s=async()=>{try{f(!0);const e=await n(`${l}/threads/list/`);if(e.ok){const r=await e.json();g(r)}}catch(e){console.error("Thread yükleme hatası:",e),a.error("Thread'ler yüklenemedi")}finally{f(!1)}},R=async()=>{if(!i.trim()){a.error("Thread adı gerekli");return}try{(await n(`${l}/threads/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message_id:c,name:i})})).ok?(a.success("Thread oluşturuldu"),x(""),d(!1),s()):a.error("Thread oluşturulamadı")}catch(e){console.error("Thread oluşturma hatası:",e),a.error("Bir hata oluştu")}},E=async e=>{try{(await n(`${l}/threads/subscribe/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:e})})).ok&&(a.success("Thread'e abone oldunuz"),s())}catch(r){console.error("Abone olma hatası:",r),a.error("Bir hata oluştu")}},k=async e=>{try{(await n(`${l}/threads/${e}/pin/`,{method:"POST"})).ok&&(a.success("Thread sabitlendi"),s())}catch(r){console.error("Pinleme hatası:",r),a.error("Bir hata oluştu")}};return React.createElement("div",{style:t.overlay,onClick:m},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(p,{style:{color:"#5865f2"}}),React.createElement("h2",{style:{margin:0}},"Thread\\'ler")),React.createElement(T,{onClick:m,style:t.closeBtn})),React.createElement("div",{style:t.toolbar},React.createElement("button",{onClick:()=>d(!y),style:t.createBtn},React.createElement(C,null)," Yeni Thread")),y&&React.createElement("div",{style:t.createForm},React.createElement("input",{type:"text",placeholder:"Thread adı...",value:i,onChange:e=>x(e.target.value),style:t.input,autoFocus:!0}),React.createElement("div",{style:{display:"flex",gap:"10px"}},React.createElement("button",{onClick:R,style:t.saveBtn},"Oluştur"),React.createElement("button",{onClick:()=>d(!1),style:t.cancelBtn},"İptal"))),React.createElement("div",{style:t.threadsList},b?React.createElement("div",{style:t.loading},"Yükleniyor..."):u.length===0?React.createElement("div",{style:t.empty},React.createElement(p,{style:{fontSize:"48px",color:"#555"}}),React.createElement("p",null,"Henüz thread yok")):u.map(e=>React.createElement("div",{key:e.id,style:t.threadItem},React.createElement("div",{style:t.threadIcon},React.createElement(p,{style:{color:"#5865f2"}})),React.createElement("div",{style:t.threadContent},React.createElement("div",{style:t.threadName},e.name),React.createElement("div",{style:t.threadMeta},React.createElement("span",null,e.message_count||0," mesaj"),React.createElement("span",null,"•"),React.createElement("span",null,e.subscriber_count||0," abone"))),React.createElement("div",{style:t.threadActions},e.is_pinned&&React.createElement(h,{style:{color:"#faa61a"}}),React.createElement("button",{onClick:()=>E(e.id),style:t.actionBtn,title:e.is_subscribed?"Abonelikten Çık":"Abone Ol"},e.is_subscribed?React.createElement(v,null):React.createElement(S,null)),!e.is_pinned&&React.createElement("button",{onClick:()=>k(e.id),style:t.actionBtn,title:"Sabitle"},React.createElement(h,null))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #333"},createBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},createForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #333"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"10px"},saveBtn:{flex:1,backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelBtn:{flex:1,backgroundColor:"#4e5058",color:"#fff",border:"none",padding:"10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},threadsList:{flex:1,overflowY:"auto",padding:"20px"},threadItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px",alignItems:"center"},threadIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#5865f21a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},threadContent:{flex:1},threadName:{fontWeight:"600",marginBottom:"4px"},threadMeta:{fontSize:"12px",color:"#888",display:"flex",gap:"8px"},threadActions:{display:"flex",gap:"10px",alignItems:"center"},actionBtn:{backgroundColor:"transparent",border:"none",color:"#dcddde",cursor:"pointer",fontSize:"18px",padding:"8px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{F as default};
