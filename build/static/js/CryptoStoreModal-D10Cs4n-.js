import{r as i,b as e}from"./react-core-9vc7GIjk.js";import{t as p}from"./index-Ci34lwbp.js";import{am as q,a as F,an as K,G as O,ao as X,d as A,ae as D}from"./icons-vendor-BHKL7tCa.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const Z=({onClose:f,fetchWithAuth:s,apiBaseUrl:d})=>{const[b,E]=i.useState("store"),[u,w]=i.useState(0),[v,I]=i.useState([]),[C,B]=i.useState([]),[r,c]=i.useState(!1),[l,h]=i.useState(null),[S,k]=i.useState(""),[m,g]=i.useState(null),T=[{id:"p1",coins:1e3,price:"15 USDT",note:"BaÅŸlangÄ±Ã§ paketi"},{id:"p2",coins:2500,price:"35 USDT",note:"PopÃ¼ler seÃ§im"},{id:"p3",coins:6e3,price:"75 USDT",note:"En iyi deÄŸer"},{id:"p4",coins:15e3,price:"180 USDT",note:"Topluluk paketi"}],_=[{label:"USDT (TRC20)",value:"TGAny6VmDAWdVmTXCPrpsbLKKQQdvyvnWC"},{label:"USDT (ERC20)",value:"0xeaa14d4651a8ea7488289209b9294a1309dde37c"},{label:"SOL (Solana)",value:"Bk6ywhae86fp6BHmGtxabS6ncEGsFxhcnZEWJRZLVr9z"}],[x,R]=i.useState(T[0]),j=async()=>{c(!0);try{const t=await s(`${d}/api/store/daily-reward/`,{method:"POST"});let n=null;try{n=await t.json()}catch{n=null}if(console.log("[DailyReward] status",t.status,"data",n),t.ok&&n){const o={claimed:!!n.claimed,added_coins:typeof n.added_coins=="number"?n.added_coins:0,new_balance:typeof n.new_balance=="number"?n.new_balance:u,streak:typeof n.streak=="number"?n.streak:void 0,reason:n.reason,remaining_seconds:typeof n.remaining_seconds=="number"?n.remaining_seconds:void 0,error:n.error};h(o),o.claimed&&typeof o.new_balance=="number"&&w(o.new_balance),y()}else{const o=n&&(n.error||n.message||n.detail)||"Ä°stek baÅŸarÄ±sÄ±z";h({claimed:!1,error:o})}}catch(t){console.error("[DailyReward] exception",t),h({claimed:!1,error:"Beklenmeyen hata"})}c(!1)},y=()=>{s(`${d}/api/store/balance/`).then(t=>t.json()).then(t=>w(t.coins)),s(`${d}/api/store/items/`).then(t=>t.json()).then(t=>I(t)),s(`${d}/api/store/inventory/`).then(t=>t.json()).then(t=>B(t))};i.useEffect(()=>{y()},[d,s]),i.useEffect(()=>{const t=n=>{n.key==="Escape"&&f()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[f]);const P=async t=>{if(window.confirm("Bu Ã¼rÃ¼nÃ¼ satÄ±n almak istiyor musunuz?")){c(!0);try{const n=await s(`${d}/api/store/buy/`,{method:"POST",body:JSON.stringify({item_id:t})}),o=await n.json();n.ok?(p.success(o.message),y()):p.error(o.error)}catch{p.error("âŒ Hata oluÅŸtu.")}c(!1)}},H=async t=>{c(!0);try{(await s(`${d}/api/store/equip/${t}/`,{method:"POST"})).ok&&y()}catch(n){console.error("Equip error:",n),p.error("Item equip failed")}c(!1)},z=async()=>{const t=S.trim();if(!t){p.error("âŒ LÃ¼tfen iÅŸlem ID girin");return}if(t.length<6){g({success:!1,message:"Ä°ÅŸlem ID Ã§ok kÄ±sa gÃ¶rÃ¼nÃ¼yor"});return}c(!0),g(null);try{const n=await s(`${d}/api/store/verify-txid/`,{method:"POST",body:JSON.stringify({txid:t})}),o=await n.json();console.log("[VerifyTXID]",n.status,o),n.ok?(g({success:!0,message:o.message||"Ã–deme doÄŸrulandÄ±!",added_coins:o.added_coins}),y(),k("")):g({success:!1,message:o.error||o.detail||"DoÄŸrulama baÅŸarÄ±sÄ±z"})}catch(n){console.error("[VerifyTXID] exception",n),g({success:!1,message:"Beklenmeyen hata"})}c(!1)},L=async t=>{try{await navigator.clipboard.writeText(t),p.success("âœ… Adres kopyalandÄ±: "+t)}catch{p.error("âŒ Kopyalama baÅŸarÄ±sÄ±z oldu")}},$=async()=>{try{const t=await navigator.clipboard.readText();t&&k(t.trim())}catch(t){console.error("Clipboard read failed",t)}};return e.createElement("div",{style:a.overlay,onClick:f},e.createElement("div",{style:a.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:a.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(q,{color:"#f0b232",size:24}),e.createElement("h2",{style:{margin:0,color:"white"}},"Pawscord MaÄŸaza")),e.createElement("button",{onClick:f,style:a.closeBtn},e.createElement(F,null))),e.createElement("div",{style:a.balanceBar},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},e.createElement("span",null,"Mevcut Bakiye:"),e.createElement("strong",{style:{color:"#f0b232",fontSize:"1.2em"}},u," Coin"),e.createElement("button",{onClick:j,style:a.dailyBtn,disabled:r},"ğŸ +10"))),e.createElement("div",{style:a.tabs},e.createElement("button",{style:b==="store"?a.activeTab:a.tab,onClick:()=>E("store")},e.createElement(K,null)," MaÄŸaza"),e.createElement("button",{style:b==="deposit"?a.activeTab:a.tab,onClick:()=>E("deposit")},e.createElement(O,null)," PawsCoin SatÄ±n Al"),e.createElement("button",{style:b==="inventory"?a.activeTab:a.tab,onClick:()=>E("inventory")},e.createElement(X,null)," Envanterim")),e.createElement("div",{style:a.content},b==="store"&&e.createElement("div",{style:a.grid},v.map(t=>e.createElement("div",{key:t.id,style:a.itemCard},e.createElement("div",{style:a.iconPlace},t.preview_image?e.createElement("img",{src:t.preview_image,alt:t.name,style:{width:50,height:50}}):e.createElement("span",{style:{fontSize:"2em"}},"ğŸ")),e.createElement("h4",null,t.name),e.createElement("p",{style:{fontSize:"0.8em",color:"#999"}},t.description),t.rarity&&e.createElement("span",{style:{fontSize:"0.75em",color:"#b9bbbe",marginBottom:6}},"Nadirlik: ",t.rarity),t.is_owned?e.createElement("button",{style:a.ownedBtn,disabled:!0},"Sahipsin"):e.createElement("button",{onClick:()=>P(t.id),style:a.buyBtn,disabled:r||u<t.price},u<t.price?e.createElement(A,null):null," ",t.price," Coin"))),v.length===0&&e.createElement("p",{style:{color:"#ccc"}},"MaÄŸazada Ã¼rÃ¼n yok.")),b==="inventory"&&e.createElement("div",{style:a.grid},C.map(t=>e.createElement("div",{key:t.id,style:{...a.itemCard,border:t.is_equipped?"1px solid #23a559":"1px solid #1e1f22"}},e.createElement("div",{style:a.iconPlace},t.preview_image?e.createElement("img",{src:t.preview_image,alt:t.name,style:{width:50,height:50}}):e.createElement("span",{style:{fontSize:"2em"}},"ğŸ’")),e.createElement("h4",null,t.name),e.createElement("p",{style:{fontSize:"0.8em",color:"#999"}},t.item_type),t.is_equipped?e.createElement("button",{style:a.equippedBtn,disabled:!0},e.createElement(D,null)," KuÅŸanÄ±ldÄ±"):e.createElement("button",{onClick:()=>H(t.id),style:a.useBtn,disabled:r},"KuÅŸan"))),C.length===0&&e.createElement("p",{style:{color:"#ccc"}},"HenÃ¼z bir ÅŸey satÄ±n almadÄ±n.")),b==="deposit"&&e.createElement("div",{style:{padding:"10px",color:"white"}},e.createElement("h3",{style:{marginTop:0,color:"#f0b232"}},"ğŸ’° PawsCoin SatÄ±n Al"),e.createElement("p",{style:{color:"#b9bbbe",fontSize:"0.9em"}},"Kripto para ile PawsCoin satÄ±n alÄ±n. Ã–demenizi yaptÄ±ktan sonra iÅŸlem ID'sini (TXID) aÅŸaÄŸÄ±ya girin."),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12,margin:"16px 0"}},T.map(t=>{const n=x?.id===t.id;return e.createElement("div",{key:t.id,onClick:()=>R(t),style:{backgroundColor:n?"#3b3f47":"#202225",border:`1px solid ${n?"#5865f2":"#1e1f22"}`,borderRadius:10,padding:12,cursor:"pointer",display:"flex",flexDirection:"column",gap:6,transition:"border-color 0.2s, background-color 0.2s"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("span",{style:{fontWeight:700,color:"white"}},t.coins.toLocaleString()," Coin"),n&&e.createElement(D,{color:"#23a559"})),e.createElement("div",{style:{color:"#f0b232",fontWeight:600}},t.price),e.createElement("div",{style:{color:"#b9bbbe",fontSize:"0.8em"}},t.note))})),x&&e.createElement("div",{style:{marginBottom:14,padding:12,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22",color:"#b9bbbe",fontSize:"0.9em"}},"SeÃ§ilen paket: ",e.createElement("strong",{style:{color:"white"}},x.coins.toLocaleString()," Coin")," â€“",e.createElement("span",{style:{color:"#f0b232",fontWeight:600}}," ",x.price)),e.createElement("div",{style:{marginTop:20,marginBottom:20,padding:15,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22"}},e.createElement("h4",{style:{margin:"0 0 10px 0",color:"#5865f2"}},"ğŸ“‹ Ã–deme Bilgileri"),e.createElement("div",{style:{fontSize:"0.85em",color:"#b9bbbe",lineHeight:1.6,display:"flex",flexDirection:"column",gap:8}},_.map(t=>e.createElement("div",{key:t.label,style:{display:"flex",flexDirection:"column",gap:6}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8}},e.createElement("p",{style:{margin:0}},e.createElement("strong",null,t.label,":")),e.createElement("button",{onClick:()=>L(t.value),style:{backgroundColor:"#2f3136",color:"white",border:"1px solid #1e1f22",borderRadius:6,padding:"4px 10px",cursor:"pointer",fontSize:"0.8em"}},"Kopyala")),e.createElement("code",{style:{display:"block",padding:8,backgroundColor:"#2b2d31",borderRadius:4,wordBreak:"break-all"}},t.value)))),e.createElement("p",{style:{fontSize:"0.75em",color:"#999",marginTop:10}},"Ã–deme sonrasÄ± iÅŸlem ID'sini (TXID) aÅŸaÄŸÄ±ya girin. Not: Åu an seÃ§ilen paket bilgisi bilgilendirme amaÃ§lÄ±, TXID doÄŸrulamasÄ± iÅŸlem miktarÄ±nÄ± otomatik algÄ±lamaz.")),e.createElement("div",{style:{marginBottom:15}},e.createElement("label",{style:{display:"block",marginBottom:8,fontSize:"0.9em",color:"#b9bbbe"}},"Ä°ÅŸlem ID (TXID):"),e.createElement("div",{style:{display:"flex",gap:8}},e.createElement("input",{type:"text",value:S,onChange:t=>k(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),z())},placeholder:"Ä°ÅŸlem ID'sini buraya yapÄ±ÅŸtÄ±rÄ±n",style:{width:"100%",padding:"10px",backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"4px",color:"white",fontSize:"0.9em"},disabled:r}),e.createElement("button",{onClick:$,style:{padding:"0 12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:r?"not-allowed":"pointer",opacity:r?.6:1},disabled:r},"YapÄ±ÅŸtÄ±r"))),e.createElement("button",{onClick:z,style:{width:"100%",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:r?"not-allowed":"pointer",fontSize:"1em",fontWeight:"600",opacity:r?.6:1},disabled:r},r?"DoÄŸrulanÄ±yor...":"DoÄŸrula ve Coin Al"),m&&e.createElement("div",{style:{marginTop:15,padding:12,backgroundColor:m.success?"#23a55933":"#ff5d5d33",border:`1px solid ${m.success?"#23a559":"#ff5d5d"}`,borderRadius:6,color:m.success?"#23a559":"#ff5d5d"}},m.success?"âœ…":"âŒ"," ",m.message,m.added_coins&&e.createElement("strong",null," (+",m.added_coins," coin)")))),l&&e.createElement("div",{style:{padding:"10px 20px",borderTop:"1px solid #1e1f22",backgroundColor:"#202225"}},l.claimed?e.createElement("div",{style:{color:"#23a559"}},"ğŸ ",l.added_coins??0," coin aldÄ±n! Yeni bakiye: ",e.createElement("strong",null,l.new_balance??u),".",typeof l.streak<"u"&&e.createElement("span",{style:{marginLeft:8,color:"#b9bbbe"}},"Streak: ",l.streak)):l.reason==="cooldown"?e.createElement("div",{style:{color:"#b9bbbe"}},"â³ GÃ¼nlÃ¼k Ã¶dÃ¼l iÃ§in bekle: ",e.createElement("strong",null,Math.max(0,l.remaining_seconds??0))," sn"):e.createElement("div",{style:{color:"#ff5d5d"}},"âš ï¸ ",l.error||"Ã–dÃ¼l alÄ±namadÄ±."))))},a={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",boxSizing:"border-box"},modal:{backgroundColor:"#2b2d31",width:"100%",maxWidth:"600px",maxHeight:"90vh",borderRadius:"12px",overflow:"hidden",border:"1px solid #1e1f22",display:"flex",flexDirection:"column"},header:{padding:"20px",backgroundColor:"#202225",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},closeBtn:{background:"none",border:"none",color:"#bbb",cursor:"pointer",fontSize:"1.2em",padding:"10px",minWidth:"44px",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center"},balanceBar:{padding:"10px 12px",backgroundColor:"#2f3136",color:"white",borderBottom:"1px solid #1e1f22",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},tabs:{display:"flex",borderBottom:"1px solid #1e1f22",backgroundColor:"#202225",flexShrink:0},tab:{flex:1,padding:"15px",background:"none",border:"none",color:"#bbb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},activeTab:{flex:1,padding:"15px",background:"rgba(255,255,255,0.05)",border:"none",color:"white",cursor:"pointer",borderBottom:"2px solid #5865f2",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},content:{padding:"20px",overflowY:"auto",flex:1,WebkitOverflowScrolling:"touch",overflowX:"hidden"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"15px",paddingBottom:"20px"},itemCard:{backgroundColor:"#202225",padding:"15px",borderRadius:"8px",textAlign:"center",border:"1px solid #1e1f22",display:"flex",flexDirection:"column",alignItems:"center",color:"white",minHeight:"180px"},iconPlace:{width:60,height:60,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10,flexShrink:0},buyBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},ownedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#40444b",color:"#aaa",border:"none",borderRadius:"4px",width:"100%",fontSize:"0.9em",minHeight:"44px"},useBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#23a559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},equippedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"transparent",color:"#23a559",border:"1px solid #23a559",borderRadius:"4px",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px"},dailyBtn:{padding:"4px 8px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"0.75em",lineHeight:1,minHeight:"24px",marginLeft:"8px"}};export{Z as default};
