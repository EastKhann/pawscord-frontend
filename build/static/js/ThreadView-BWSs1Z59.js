import{r as o,d as e,i as g}from"./react-core-DrOm_csO.js";const E=({parentMessage:r,onClose:m,apiBaseUrl:l,token:i})=>{const[a,f]=o.useState([]),[n,d]=o.useState(""),[x,c]=o.useState(!0);o.useEffect(()=>{r?.id&&s()},[r?.id]);const s=async()=>{c(!0);try{const y=await(await fetch(`${l}/messages/${r.id}/thread/`,{headers:{Authorization:`Bearer ${i}`}})).json();f(y.replies||[])}catch(t){console.error("Thread fetch error:",t)}c(!1)},p=async()=>{if(n.trim())try{(await fetch(`${l}/messages/${r.id}/reply/`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({content:n})})).ok&&(d(""),s())}catch(t){console.error("Reply error:",t)}};return r?e.createElement("div",{style:{position:"fixed",right:0,top:0,bottom:0,width:"420px",background:"#36393f",boxShadow:"-2px 0 8px rgba(0,0,0,0.4)",zIndex:100,display:"flex",flexDirection:"column"}},e.createElement("div",{style:{padding:"16px",borderBottom:"1px solid #202225",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("h3",{style:{margin:0,color:"#fff"}},"ðŸ’¬ Thread"),e.createElement("button",{onClick:m,style:{background:"transparent",border:"none",color:"#fff",cursor:"pointer",fontSize:"18px"}},e.createElement(g,null))),e.createElement("div",{style:{padding:"16px",background:"#2f3136",borderBottom:"1px solid #202225"}},e.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"}},e.createElement("strong",{style:{color:"#fff"}},r.username||r.sender?.username),e.createElement("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#72767d"}},new Date(r.timestamp).toLocaleString("tr-TR"))),e.createElement("p",{style:{margin:0,color:"#dcddde"}},r.content),e.createElement("small",{style:{color:"#72767d",fontSize:"12px"}},a.length," yanÄ±t")),e.createElement("div",{style:{flex:1,overflowY:"auto",padding:"16px"}},x?e.createElement("div",{style:{textAlign:"center",color:"#aaa",padding:"20px"}},"YÃ¼kleniyor..."):a.length===0?e.createElement("div",{style:{textAlign:"center",color:"#aaa",padding:"20px"}},"HenÃ¼z yanÄ±t yok"):a.map(t=>e.createElement("div",{key:t.id,style:{marginBottom:"16px",padding:"12px",background:"#40444b",borderRadius:"8px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"}},e.createElement("strong",{style:{color:"#fff"}},t.username||t.sender?.username),e.createElement("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#72767d"}},new Date(t.timestamp).toLocaleString("tr-TR"))),e.createElement("p",{style:{margin:0,color:"#dcddde"}},t.content)))),e.createElement("div",{style:{padding:"16px",borderTop:"1px solid #202225"}},e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("input",{type:"text",placeholder:"YanÄ±t yaz...",value:n,onChange:t=>d(t.target.value),onKeyPress:t=>t.key==="Enter"&&p(),style:{flex:1,padding:"10px",background:"#40444b",border:"none",borderRadius:"6px",color:"#fff"}}),e.createElement("button",{onClick:p,disabled:!n.trim(),style:{padding:"10px 20px",background:n.trim()?"#5865f2":"#4f545c",border:"none",borderRadius:"6px",color:"#fff",cursor:n.trim()?"pointer":"not-allowed",fontWeight:600}},"GÃ¶nder")))):null};export{E as default};
