import{r as l,bQ as y,aI as v,Y as k,cz as S,K as C}from"./react-core-B6hadH-M.js";const D=({serverId:t,apiBaseUrl:i,fetchWithAuth:s})=>{const[o,c]=l.useState([]),[p,d]=l.useState(!0),[m,g]=l.useState(!1);l.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{const n=await s(`${i}/events/?server=${t}`);if(n.ok){const a=await n.json();c(a)}}catch(n){console.error("Failed to load events:",n)}finally{d(!1)}},x=async(n,a)=>{try{(await s(`${i}/events/${n}/rsvp/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})})).ok&&f()}catch(u){console.error("RSVP failed:",u)}},b=n=>{const a=new Date(n),E=a-new Date,r=Math.floor(E/(1e3*60*60*24));return r===0?"Bugün":r===1?"Yarın":r>0&&r<7?`${r} gün sonra`:a.toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})},R=n=>new Date(n).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});return p?React.createElement("div",{style:e.loading},"Etkinlikler yükleniyor..."):React.createElement("div",{style:e.container},React.createElement("div",{style:e.header},React.createElement("h2",{style:e.title},React.createElement(y,null)," Etkinlikler"),React.createElement("button",{onClick:()=>g(!0),style:e.createButton},React.createElement(v,null)," Etkinlik Oluştur")),o.length===0?React.createElement("div",{style:e.empty},React.createElement(y,{style:e.emptyIcon}),React.createElement("p",null,"Henüz etkinlik yok"),React.createElement("p",{style:e.emptySubtext},"İlk etkinliği sen oluştur!")):React.createElement("div",{style:e.eventsList},o.map(n=>React.createElement(B,{key:n.id,event:n,onRSVP:x,formatDate:b,formatTime:R}))))},B=({event:t,onRSVP:i,formatDate:s,formatTime:o})=>{const[c,p]=l.useState(null),d=m=>{p(m),i(t.id,m)};return React.createElement("div",{style:e.eventCard},React.createElement("div",{style:e.eventHeader},React.createElement("h3",{style:e.eventTitle},t.title),React.createElement("span",{style:e.eventDate},s(t.start_time))),t.description&&React.createElement("p",{style:e.eventDescription},t.description),React.createElement("div",{style:e.eventDetails},React.createElement("div",{style:e.detail},React.createElement(k,{style:e.detailIcon}),React.createElement("span",null,o(t.start_time)," - ",o(t.end_time))),React.createElement("div",{style:e.detail},React.createElement(S,{style:e.detailIcon}),React.createElement("span",null,t.location_type==="voice"?t.voice_channel_name||"Sesli Kanal":"Dış Link")),React.createElement("div",{style:e.detail},React.createElement(C,{style:e.detailIcon}),React.createElement("span",null,t.going_count," katılacak,",t.interested_count," ilgileniyor"))),React.createElement("div",{style:e.rsvpButtons},React.createElement("button",{onClick:()=>d("going"),style:{...e.rsvpButton,...c==="going"?e.rsvpButtonActive:{}}},"✓ Katılacağım"),React.createElement("button",{onClick:()=>d("interested"),style:{...e.rsvpButton,...c==="interested"?e.rsvpButtonInterested:{}}},"⭐ İlgileniyorum")))},e={container:{padding:"20px",backgroundColor:"#2b2d31",borderRadius:"8px",minHeight:"400px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #1e1f22",paddingBottom:"15px"},title:{color:"#fff",fontSize:"20px",margin:0,display:"flex",alignItems:"center",gap:"10px"},createButton:{backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},loading:{color:"#b9bbbe",textAlign:"center",padding:"40px"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},emptyIcon:{fontSize:"64px",opacity:.3,marginBottom:"20px"},emptySubtext:{fontSize:"14px",opacity:.7},eventsList:{display:"grid",gap:"15px"},eventCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"16px",border:"1px solid transparent",transition:"border-color 0.2s"},eventHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},eventTitle:{color:"#fff",fontSize:"18px",margin:0},eventDate:{color:"#5865f2",fontSize:"14px",fontWeight:"bold"},eventDescription:{color:"#b9bbbe",fontSize:"14px",marginBottom:"12px"},eventDetails:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},detail:{display:"flex",alignItems:"center",gap:"8px",color:"#b9bbbe",fontSize:"13px"},detailIcon:{color:"#72767d",fontSize:"12px"},rsvpButtons:{display:"flex",gap:"10px"},rsvpButton:{flex:1,padding:"10px",border:"1px solid #4e5058",borderRadius:"6px",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",fontSize:"14px",transition:"all 0.2s"},rsvpButtonActive:{backgroundColor:"#23a559",borderColor:"#23a559",color:"#fff"},rsvpButtonInterested:{backgroundColor:"#f0b132",borderColor:"#f0b132",color:"#1e1f22"}};export{D as default};
