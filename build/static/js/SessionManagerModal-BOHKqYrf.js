import{r,d as t,i as E,br as v,E as k,bs as h,bt as S,K as z}from"./react-core-DrOm_csO.js";import{t as i}from"./index-BYhWpPLp.js";const w=({onClose:a,fetchWithAuth:l,apiBaseUrl:s})=>{const[c,d]=r.useState([]),[m,u]=r.useState(!0);r.useEffect(()=>{p()},[]);const p=async()=>{try{const e=await l(`${s}/sessions/list/`);if(e.ok){const o=await e.json();d(o.sessions||[])}}catch(e){console.error("Load sessions error:",e)}finally{u(!1)}},b=async e=>{if(confirm("Bu oturumu sonlandÄ±rmak istediÄŸinizden emin misiniz?"))try{(await l(`${s}/sessions/revoke/`,{method:"POST",body:JSON.stringify({session_id:e})})).ok?(d(x=>x.filter(y=>y.id!==e)),i.success("âœ… Oturum sonlandÄ±rÄ±ldÄ±")):i.error("âŒ Oturum sonlandÄ±rÄ±lamadÄ±")}catch(o){console.error("Revoke session error:",o),i.error("âŒ Bir hata oluÅŸtu")}},f=e=>e?.includes("mobile")||e?.includes("android")||e?.includes("ios")?t.createElement(h,null):e?.includes("tablet")?t.createElement(S,null):t.createElement(z,null),g=e=>new Date(e).toLocaleString("tr-TR");return t.createElement("div",{style:n.overlay,onClick:a},t.createElement("div",{style:n.modal,onClick:e=>e.stopPropagation()},t.createElement("div",{style:n.header},t.createElement("h2",{style:n.title},"ðŸ” Aktif Oturumlar"),t.createElement("button",{onClick:a,style:n.closeButton},t.createElement(E,null))),t.createElement("div",{style:n.content},m?t.createElement("div",{style:n.loading},"YÃ¼kleniyor..."):c.length===0?t.createElement("div",{style:n.empty},"Aktif oturum bulunamadÄ±"):t.createElement("div",{style:n.sessionList},c.map(e=>t.createElement("div",{key:e.id,style:n.sessionItem},t.createElement("div",{style:n.sessionIcon},f(e.device_type)),t.createElement("div",{style:n.sessionInfo},t.createElement("div",{style:n.sessionDevice},e.device_name||e.device_type||"Bilinmeyen Cihaz",e.is_current&&t.createElement("span",{style:n.currentBadge},t.createElement(v,{style:{fontSize:"6px"}})," Bu Cihaz")),t.createElement("div",{style:n.sessionDetails},e.ip_address&&t.createElement("span",null,"IP: ",e.ip_address),e.location&&t.createElement("span",null," â€¢ ",e.location)),t.createElement("div",{style:n.sessionTime},"Son Aktivite: ",g(e.last_activity||e.created_at))),!e.is_current&&t.createElement("button",{onClick:()=>b(e.id),style:n.revokeButton,title:"Oturumu sonlandÄ±r"},t.createElement(k,null))))))))},n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.5em"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.5em",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px"},sessionList:{display:"flex",flexDirection:"column",gap:"12px"},sessionItem:{backgroundColor:"#40444b",borderRadius:"8px",padding:"15px",display:"flex",alignItems:"center",gap:"15px"},sessionIcon:{fontSize:"2em",color:"#5865f2",minWidth:"40px",textAlign:"center"},sessionInfo:{flex:1},sessionDevice:{color:"white",fontWeight:"bold",fontSize:"1em",marginBottom:"5px",display:"flex",alignItems:"center",gap:"10px"},currentBadge:{backgroundColor:"#3ba55d",color:"white",padding:"2px 8px",borderRadius:"10px",fontSize:"0.7em",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px"},sessionDetails:{color:"#b9bbbe",fontSize:"0.85em",marginBottom:"3px"},sessionTime:{color:"#72767d",fontSize:"0.75em"},revokeButton:{backgroundColor:"#f04747",border:"none",color:"white",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"1em"}};export{w as default};
