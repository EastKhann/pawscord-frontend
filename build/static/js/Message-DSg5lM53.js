const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ReactionPicker-DAnIuHtm.js","./react-vendor-D4QjtNWS.js","./vendor-Brv1On52.js","./state-vendor-T8XA44Ud.js","./perf-vendor-CmoV45_-.js","../css/vendor-Dj12pvTl.css","./LinkPreview-BZW4Rsuh.js","./CodeBlock-BH42fN5q.js","./icons-vendor-BZYtSAMW.js","./index-CGHvfKK4.js","./router-vendor-BDkI7eRJ.js","./crypto-vendor-BQNqsgOu.js","../css/index-Ciq-PU2O.css","./syntax-core-DW1vfDqK.js","./Spoiler-8peKpR8R.js","./VoiceMessagePlayer-CpD4wmPL.js","./TicTacToe-DyArJZA5.js","./BookmarkButton-CCw5M7US.js","./ReminderModal-D-t2PrzG.js","./MessageThreads-B4CQt3Bm.js","./GameMessage-D_9ssbjk.js"])))=>i.map(i=>d[i]);
import{aV as Le,aW as Ee,aM as f}from"./vendor-Brv1On52.js";import{r,j as t,R as Me}from"./react-vendor-D4QjtNWS.js";import{d as ee,e as V,_ as te,au as oe,av as De,ae as Oe,aw as ne,c as ie,ax as re,ay as ae,az as se,m as le,Y as $e,L as Pe,aa as Fe}from"./icons-vendor-BZYtSAMW.js";import{L as Ne}from"./LazyImage-BZ9-fHlM.js";import{useCachedImage as Ve}from"./imageCaching-DUoTn-WY.js";import{d as de,t as g,e as ce,f as We}from"./index-CGHvfKK4.js";import"./state-vendor-T8XA44Ud.js";import"./perf-vendor-CmoV45_-.js";import"./router-vendor-BDkI7eRJ.js";import"./crypto-vendor-BQNqsgOu.js";const Ae=r.lazy(()=>f(()=>import("./ReactionPicker-DAnIuHtm.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),qe=r.lazy(()=>f(()=>import("./LinkPreview-BZW4Rsuh.js"),__vite__mapDeps([6,1,2,3,4,5]),import.meta.url)),pe=r.lazy(()=>f(()=>import("./CodeBlock-BH42fN5q.js"),__vite__mapDeps([7,1,2,3,4,5,8,9,10,11,12,13]),import.meta.url)),Ke=r.lazy(()=>f(()=>import("./Spoiler-8peKpR8R.js"),__vite__mapDeps([14,1,2,3,4,5]),import.meta.url)),W=r.lazy(()=>f(()=>import("./VoiceMessagePlayer-CpD4wmPL.js"),__vite__mapDeps([15,1,2,3,4,5,8]),import.meta.url)),He=r.lazy(()=>f(()=>import("./TicTacToe-DyArJZA5.js"),__vite__mapDeps([16,1,2,3,4,5]),import.meta.url)),Ye=r.lazy(()=>f(()=>import("./BookmarkButton-CCw5M7US.js"),__vite__mapDeps([17,1,2,3,4,5,8]),import.meta.url).then(e=>({default:e.BookmarkButton}))),Je=r.lazy(()=>f(()=>import("./BookmarkButton-CCw5M7US.js"),__vite__mapDeps([17,1,2,3,4,5,8]),import.meta.url).then(e=>({default:e.StarButton}))),Ge=r.lazy(()=>f(()=>import("./BookmarkButton-CCw5M7US.js"),__vite__mapDeps([17,1,2,3,4,5,8]),import.meta.url).then(e=>({default:e.ReadLaterButton}))),Qe=r.lazy(()=>f(()=>import("./ReminderModal-D-t2PrzG.js"),__vite__mapDeps([18,1,2,3,4,5,9,10,8,11,12]),import.meta.url)),Xe=r.lazy(()=>f(()=>import("./MessageThreads-B4CQt3Bm.js"),__vite__mapDeps([19,1,2,3,4,5,8,9,10,11,12]),import.meta.url));r.lazy(()=>f(()=>import("./GameMessage-D_9ssbjk.js"),__vite__mapDeps([20,1,2,3,4,5,8]),import.meta.url));const Ze=r.memo(({src:e,style:l})=>{const d=r.useRef(null),[x,v]=r.useState(!1);return r.useEffect(()=>{const c=new IntersectionObserver(([h])=>{h.isIntersecting&&(v(!0),c.disconnect())},{threshold:.2});return d.current&&c.observe(d.current),()=>{d.current&&c.unobserve(d.current)}},[]),t.jsx("div",{ref:d,style:{minHeight:"200px",...l,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"},children:x?t.jsxs("video",{controls:!0,preload:"metadata",src:e,style:l,children:["TarayÄ±cÄ±nÄ±z video oynatmayÄ± desteklemiyor.",t.jsx("a",{href:e,download:!0,children:"Ä°ndir"})]}):t.jsx("span",{style:{color:"#aaa"},children:"Video YÃ¼kleniyor..."})})}),Ue=r.memo(({children:e,minHeight:l=60})=>{const d=r.useRef(null),[x,v]=r.useState(!1);return r.useEffect(()=>{const c=new IntersectionObserver(([h])=>{h.isIntersecting&&(v(!0),c.disconnect())},{threshold:.1});return d.current&&c.observe(d.current),()=>c.disconnect()},[]),t.jsx("div",{ref:d,style:{minHeight:l},children:x?e:null})}),et=({messageId:e,messageEditHistoryUrl:l,fetchWithAuth:d})=>{const[x,v]=r.useState([]),[c,h]=r.useState(!1),j=r.useRef(null);return r.useEffect(()=>{if(!c)return;(async()=>{try{const k=await d(`${l}${e}/edit_history/`);k.ok&&v(await k.json())}catch(k){console.error(k)}})();const s=k=>{j.current&&!j.current.contains(k.target)&&h(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[c,e,l,d]),t.jsxs("div",{style:{position:"relative",display:"inline-block",marginLeft:"5px"},ref:j,children:[t.jsx("span",{onClick:_=>{_.stopPropagation(),h(!c)},style:{fontSize:"0.7em",color:"#72767d",cursor:"pointer",textDecoration:"underline"},children:"(dÃ¼zenlendi)"}),c&&t.jsxs("div",{style:n.historyDropdown,children:[t.jsxs("h4",{style:n.historyHeader,children:["GeÃ§miÅŸ (",x.length,")"]}),t.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:x.map((_,s)=>t.jsxs("div",{style:n.historyItem,children:[t.jsx("small",{children:new Date(_.edited_at).toLocaleString()}),t.jsx("div",{children:t.jsx("del",{children:_.old_content})})]},s))})]})]})},tt=e=>{if(!e)return"";const l=new Date(e),d=new Date;return l.toDateString()===d.toDateString()?l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):l.toLocaleString([],{hour:"2-digit",minute:"2-digit"})},ot=({msg:e,currentUser:l,isAdmin:d,onDelete:x,onStartEdit:v,onToggleReaction:c,onTogglePin:h,onSetReply:j,onImageClick:_,absoluteHostUrl:s,onScrollToMessage:k,onVisible:L,messageEditHistoryUrl:ue,onViewProfile:A,onStartForward:q,fetchWithAuth:p,isSelectionMode:E,isSelected:me,onToggleSelection:K,allUsers:H,getDeterministicAvatar:M,onShowChart:fe,onContentLoad:he})=>{if(!e||typeof e!="object"||!e.id)return console.warn("âš ï¸ [Message] Invalid message data:",e),null;const Y=de(o=>o.encryptionKeys),be=de(o=>o.currentPermissions),[I,ye]=r.useState(e.transcription||null),[z,J]=r.useState(!1),[ge,D]=r.useState(!1),[ve,O]=r.useState(!1),[R,u]=r.useState(null),je=r.useCallback(async()=>{try{if((await p(`${s}/messages/${e.id}/quote/`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok){const i=e.content||"",a=`> ${e.username} said:
> ${i.split(`
`).join(`
> `)}

`;j({...e,quotedText:a}),g.success("Message quoted!")}else g.error("Failed to quote message")}catch(o){console.error("Quote error:",o),g.error("Failed to quote message")}},[e,s,p,j]),b=e.username===l,ke=["Pawscord AI","PawPaw AI","âš¡ Signal Bot"].includes(e.username),$=r.useRef(null),[G,Q]=r.useState(!1),[_e,T]=r.useState(!1),we=r.useCallback(o=>{o.preventDefault(),u({x:o.clientX,y:o.clientY})},[]);r.useEffect(()=>{const o=()=>u(null);if(R)return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[R]),r.useEffect(()=>{if(!L||b||e.read_by?.includes(l))return;const o=new IntersectionObserver(([i])=>{i.isIntersecting&&(L(e.id),o.disconnect())},{threshold:.8});return $.current&&o.observe($.current),()=>o.disconnect()},[e.id,b,e.read_by,L,l]);const w=r.useMemo(()=>{if(!e.content)return"";if(ce(e.content)){const o=e.room?`room-${e.room}`:e.conversation?`dm-${e.conversation}`:null,i=Y[o];return i?We(e.content,i):"ðŸ”’ Bu mesaj ÅŸifreli. Okumak iÃ§in anahtarÄ± girin."}return e.content},[e.content,e.room,e.conversation,Y]),Ce=ce(e.content),Se=r.useMemo(()=>{let o=e.avatar;return o||(o=H?.find(a=>a.username===e.username)?.avatar),o||(o=M(e.username)),o&&o.includes("ui-avatars.com")||o&&!o.startsWith("http")&&!o.startsWith("blob:")&&(o=`${s.replace(/\/$/,"")}/${o.replace(/^\//,"")}`),o},[e.avatar,e.username,H,M,s]),{url:Ie}=Ve(Se),X=o=>{if(!o)return null;if(o.startsWith("http")||o.startsWith("blob:"))return o;let i=`${s.replace(/\/$/,"")}/${o.replace(/^\//,"")}`;if(i.includes("/media/local/stream/")){const a=localStorage.getItem("access_token");a&&(i+=(i.includes("?")?"&":"?")+`token=${a}`)}return i},P=X(e.image_url||e.image),C=X(e.file_url||e.file),Z=r.useMemo(()=>{if(!C||P)return!1;const o=(e.file_name||"").toLowerCase();return["jpg","jpeg","png","gif","webp","bmp","svg","ico"].some(a=>o.endsWith(`.${a}`))},[C,P,e.file_name]),F=P||(Z?C:null),S=Z?null:C,N=r.useMemo(()=>{if(e.username==="âš¡ Signal Bot"&&w){const o=w.match(/\*\*(.*?)\*\*/);if(o&&o[1])return o[1]}return null},[e.username,w]),U=r.useMemo(()=>{if(!e.reactions)return[];const o={};return e.reactions.forEach(i=>{o[i.emoji]||(o[i.emoji]=[]),o[i.emoji].push(i.username)}),Object.entries(o||{}).map(([i,a])=>({emoji:i,users:a,count:a.length}))},[e.reactions]),Re=r.useCallback(o=>e.reactions?.some(i=>i.username===l&&i.emoji===o),[e.reactions,l]),ze=r.useCallback(async o=>{if(e.poll)try{await p(`${s}/api/polls/${e.poll.id}/vote/`,{method:"POST",body:JSON.stringify({option_id:o})})}catch(i){console.error("Oy hatasÄ±:",i)}},[e.poll,p,s]),Te=r.useCallback(async()=>{if(!(z||I)){J(!0);try{const o=await p(`${s}/api/messages/${e.id}/transcribe/`,{method:"POST"});if(o.ok){const i=await o.json();i.transcription?ye(i.transcription):g.error("âŒ Ã‡eviri boÅŸ dÃ¶ndÃ¼.")}else{const i=await o.json();g.error(`âŒ Ã‡eviri hatasÄ±: ${i.error||"Bilinmeyen hata"}`)}}catch(o){console.error("Transcription error:",o),g.error("âŒ Ses metne Ã§evrilemedi. LÃ¼tfen tekrar deneyin.")}finally{J(!1)}}},[z,I,p,s,e.id]);return t.jsxs("div",{ref:$,style:{...n.chatMessage,backgroundColor:me?"rgba(88, 101, 242, 0.3)":G?"rgba(4, 4, 5, 0.07)":"transparent",cursor:E?"pointer":"default"},onMouseEnter:()=>Q(!0),onMouseLeave:()=>{Q(!1),T(!1)},onContextMenu:we,id:`message-${e.id}`,onClick:()=>E&&K(e.id),children:[t.jsx("div",{style:n.avatarContainer,children:t.jsx(Ne,{src:Ie,alt:e.username,style:n.userAvatar,onClick:()=>A(e.username),placeholder:M(e.username)})}),t.jsxs("div",{style:n.contentWrapper,children:[e.reply_to&&t.jsxs("div",{style:n.replyContainer,onClick:()=>k(e.reply_to.id),children:[t.jsx("div",{style:n.replyLine}),t.jsxs("span",{style:{fontWeight:"bold",marginRight:5},children:["@",e.reply_to.username]}),t.jsx("span",{style:{opacity:.7,fontSize:"0.9em"},children:e.reply_to.content?e.reply_to.content.substring(0,50)+"...":"Bir dosya"})]}),t.jsxs("div",{style:n.messageHeader,children:[t.jsxs("strong",{style:{cursor:"pointer",color:e.username==="âš¡ Signal Bot"?"#5865f2":d?"#f0b232":"#fff"},onClick:()=>A(e.username),children:[ke&&"ðŸ¤– "," ",e.username]}),e.is_locked&&t.jsx(ee,{style:{marginLeft:8,color:"#f0b232",fontSize:"0.9em"},title:"Locked by moderator - Cannot be edited or deleted"}),t.jsxs("span",{style:n.timestamp,children:[tt(e.timestamp),e.is_edited&&t.jsx(et,{messageId:e.id,messageEditHistoryUrl:ue,fetchWithAuth:p}),e.is_pinned&&t.jsx(V,{style:{marginLeft:5,color:"#f0b232",fontSize:"0.8em"}})]})]}),G&&!e.temp_id&&!E&&t.jsxs("div",{style:n.messageActions,children:[_e&&t.jsx(Ae,{onEmojiSelect:o=>c(e.id,o),onClose:()=>T(!1)}),t.jsx("button",{onClick:()=>T(!0),style:n.actionButton,title:"Tepki",children:t.jsx(te,{})}),t.jsx("button",{onClick:()=>j(e),style:n.actionButton,title:"YanÄ±tla",children:t.jsx(oe,{})}),t.jsx("button",{onClick:je,style:n.actionButton,title:"AlÄ±ntÄ±la",children:t.jsx(De,{})}),t.jsx("button",{onClick:()=>K(e.id),style:n.actionButton,title:"SeÃ§",children:t.jsx(Oe,{})}),t.jsx("button",{onClick:()=>q(e),style:n.actionButton,title:"Ä°let",children:t.jsx(ne,{})}),t.jsx(Ye,{messageId:e.id,isBookmarked:e.is_bookmarked,fetchWithAuth:p,apiBaseUrl:s}),t.jsx(Je,{messageId:e.id,isStarred:e.is_starred,fetchWithAuth:p,apiBaseUrl:s}),t.jsx(Ge,{messageId:e.id,isReadLater:e.is_read_later,fetchWithAuth:p,apiBaseUrl:s}),t.jsx("button",{onClick:()=>D(!0),style:n.actionButton,title:"HatÄ±rlatÄ±cÄ± Kur",children:t.jsx(ie,{})}),t.jsx("button",{onClick:()=>O(!0),style:n.actionButton,title:"Thread BaÅŸlat",children:t.jsx(re,{})}),!b&&t.jsx("button",{onClick:async()=>{const o=prompt("Rapor sebebi:");o&&(await p(`${s}/api/messages/report/`,{method:"POST",body:JSON.stringify({message_id:e.id,reason:o})}),g.success("âœ… Rapor gÃ¶nderildi"))},style:n.actionButton,title:"Rapor Et",children:t.jsx(ae,{})}),b&&e.content&&t.jsx("button",{onClick:()=>v(e),style:n.actionButton,title:"DÃ¼zenle",children:t.jsx(se,{})}),(b||d||be.can_delete_messages)&&t.jsx("button",{onClick:()=>x(e.id),style:n.actionButton,title:"Sil",children:t.jsx(le,{})}),d&&e.room&&t.jsx("button",{onClick:()=>h(e.id),style:n.actionButton,title:"Sabitle",children:t.jsx(V,{})})]}),ge&&t.jsx(Qe,{messageId:e.id,messageContent:w,onClose:()=>D(!1),fetchWithAuth:p,apiBaseUrl:s}),ve&&t.jsx(Xe,{messageId:e.id,onClose:()=>O(!1),fetchWithAuth:p,apiBaseUrl:s}),R&&t.jsxs("div",{style:{...n.contextMenu,left:`${R.x}px`,top:`${R.y}px`},onClick:o=>o.stopPropagation(),children:[t.jsxs("div",{className:"context-menu-item",style:n.contextMenuItem,onClick:()=>{T(!0),u(null)},children:[t.jsx(te,{})," Tepki Ekle"]}),t.jsxs("div",{className:"context-menu-item",style:n.contextMenuItem,onClick:()=>{j(e),u(null)},children:[t.jsx(oe,{})," YanÄ±tla"]}),b&&e.content&&t.jsxs("div",{className:"context-menu-item",style:n.contextMenuItem,onClick:()=>{v(e),u(null)},children:[t.jsx(se,{})," DÃ¼zenle"]}),t.jsxs("div",{className:"context-menu-item",style:n.contextMenuItem,onClick:()=>{navigator.clipboard.writeText(w),g.success("âœ… Mesaj kopyalandÄ±"),u(null)},children:[t.jsx($e,{})," MesajÄ± Kopyala"]}),t.jsxs("div",{className:"context-menu-item",style:n.contextMenuItem,onClick:async()=>{await h(e.id),u(null)},children:[t.jsx(V,{})," ",e.is_pinned?"Sabitlemeyi KaldÄ±r":"Sabitle"]}),t.jsxs("div",{className:"context-menu-item",style:n.contextMenuItem,onClick:()=>{q(e),u(null)},children:[t.jsx(ne,{})," Ä°let"]}),t.jsxs("div",{className:"context-menu-item",style:n.contextMenuItem,onClick:()=>{O(!0),u(null)},children:[t.jsx(re,{})," Thread BaÅŸlat"]}),t.jsxs("div",{className:"context-menu-item",style:n.contextMenuItem,onClick:()=>{D(!0),u(null)},children:[t.jsx(ie,{})," HatÄ±rlatÄ±cÄ± Kur"]}),t.jsx("div",{style:n.contextMenuDivider}),b&&t.jsxs("div",{className:"context-menu-item danger",style:{...n.contextMenuItem,color:"#ed4245"},onClick:async()=>{window.confirm("Bu mesajÄ± silmek istediÄŸinize emin misiniz?")&&(await x(e.id),u(null))},children:[t.jsx(le,{})," Sil"]}),!b&&t.jsxs("div",{className:"context-menu-item danger",style:{...n.contextMenuItem,color:"#ed4245"},onClick:async()=>{const o=prompt("Rapor sebebi:");o&&(await p(`${s}/api/messages/report/`,{method:"POST",body:JSON.stringify({message_id:e.id,reason:o})}),g.success("âœ… Rapor gÃ¶nderildi"),u(null))},children:[t.jsx(ae,{})," Rapor Et"]})]}),e.snippet_data&&e.snippet_data.type==="game_xox"?t.jsx(r.Suspense,{fallback:t.jsx("div",{style:{padding:"12px",color:"#b9bbbe",fontSize:"0.9em"},children:"ðŸŽ® Oyun yÃ¼kleniyor..."}),children:t.jsx(He,{gameData:e.snippet_data,currentUser:l,onMove:(o,i)=>{p(`${s}/api/games/xox/move/`,{method:"POST",body:JSON.stringify({game_id:o,index:i})})}})}):e.snippet_data?t.jsxs("div",{style:n.snippetContainer,children:[t.jsxs("div",{style:n.snippetHeader,children:[t.jsxs("span",{children:["ðŸ’» ",e.snippet_data.title||"Kod ParÃ§asÄ±"]}),t.jsx("span",{style:n.langBadge,children:e.snippet_data.language})]}),t.jsx(pe,{language:e.snippet_data.language,children:e.snippet_data.code})]}):w&&t.jsxs("div",{style:n.messageContent,children:[Ce&&t.jsx("span",{style:{color:"#43b581",marginRight:5},title:"UÃ§tan Uca Åžifreli",children:t.jsx(ee,{})}),t.jsx(Le,{remarkPlugins:[Ee],components:{code({node:o,inline:i,className:a,children:y,...m}){return i?t.jsx("code",{className:a,style:n.inlineCode,...m,children:y}):t.jsx(pe,{language:a?.replace("language-",""),value:y})},p:({children:o})=>{const i=Me.Children.toArray(o);return t.jsx("p",{style:{margin:0},children:i.map((a,y)=>typeof a=="string"?a.split(/(\|\|.*?\|\|)/g).map((B,Be)=>B.startsWith("||")&&B.endsWith("||")?t.jsx(Ke,{children:B.slice(2,-2)},`${y}-${Be}`):B):a)})}},children:w})]}),N&&t.jsxs("button",{onClick:()=>fe(N),style:n.chartBtn,children:[t.jsx(Pe,{})," ",N," GrafiÄŸi"]}),e.link_preview_data&&t.jsx(Ue,{minHeight:80,children:t.jsx(qe,{data:e.link_preview_data})}),e.poll&&t.jsxs("div",{style:n.pollContainer,children:[t.jsx("h4",{style:{marginTop:0,marginBottom:10},children:e.poll.question}),t.jsxs("div",{style:{fontSize:"0.8em",color:"#b9bbbe",marginBottom:8},children:[e.poll.allow_multiple_votes?"Ã‡oklu SeÃ§im":"Tek SeÃ§im"," â€¢ ",e.poll.total_votes||0," Oy"]}),e.poll.options.map(o=>{const i=o.is_voted,a=e.poll.total_votes||0,y=a>0?Math.round(o.vote_count/a*100):0;return t.jsx("div",{style:{position:"relative",marginBottom:6},children:t.jsxs("button",{onClick:()=>ze(o.id),style:{...n.pollOption,backgroundColor:i?"#4752c4":"rgba(255,255,255,0.05)",border:i?"1px solid #5865f2":"1px solid transparent",justifyContent:"space-between",display:"flex",alignItems:"center",position:"relative",zIndex:2,width:"100%",overflow:"hidden",padding:"10px 12px"},children:[t.jsx("span",{style:{zIndex:3,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:o.text}),t.jsxs("span",{style:{zIndex:3,fontWeight:"bold"},children:[o.vote_count," (",y,"%)"]}),t.jsx("div",{style:{position:"absolute",top:0,left:0,bottom:0,width:`${y}%`,backgroundColor:i?"rgba(255,255,255,0.2)":"rgba(88, 101, 242, 0.3)",zIndex:1,transition:"width 0.3s ease"}})]})},o.id)}),e.poll.expires_at&&t.jsxs("div",{style:{fontSize:"0.75em",color:"#72767d",marginTop:5},children:["BitiÅŸ: ",new Date(e.poll.expires_at).toLocaleString()]})]}),F&&t.jsx("img",{src:F,alt:"attachment",style:n.messageImage,onClick:()=>_(F),loading:"lazy",onLoad:he}),e.is_voice_message&&C&&t.jsx(r.Suspense,{fallback:t.jsx("div",{style:{padding:"12px",color:"#72767d",fontSize:"13px"},children:"ðŸŽµ Ses yÃ¼kleniyor..."}),children:t.jsxs("div",{children:[t.jsx(W,{audioUrl:C,duration:e.voice_duration||0,onDownload:()=>{const o=document.createElement("a");o.href=C,o.download=e.file_name||`voice-${Date.now()}.webm`,o.click()}}),I&&t.jsxs("div",{style:n.voiceTranscription,children:[t.jsx("div",{style:n.transcriptionIcon,children:"ðŸ’¬"}),t.jsx("div",{style:n.transcriptionText,children:I})]}),!I&&!z&&t.jsx("button",{onClick:Te,style:n.transcribeButton,children:"ðŸ“ Metne Ã‡evir"}),z&&t.jsx("div",{style:n.transcribingLoader,children:"â³ Ã‡evriliyor..."})]})}),S&&!e.is_voice_message&&(()=>{const o=(e.file_name||"").split(".").pop().toLowerCase(),i=(e.file_name||"").toLowerCase();if((i.startsWith("voice_")||i.startsWith("voice-"))&&o==="webm")return t.jsx(W,{audioUrl:S,duration:e.voice_duration||0,onDownload:()=>{const m=document.createElement("a");m.href=S,m.download=e.file_name||`voice-${Date.now()}.webm`,m.click()}});if(["mp4","mov","mkv"].includes(o)||o==="webm"&&!i.startsWith("voice_")&&!i.startsWith("voice-"))return t.jsx(Ze,{src:S,style:n.messageVideo});if(["mp3","wav","ogg"].includes(o))return t.jsx(W,{audioUrl:S,duration:0,onDownload:()=>{const m=document.createElement("a");m.href=S,m.download=e.file_name||`audio-${Date.now()}.${o}`,m.click()}});const a=o.toUpperCase(),y=e.file_size?`(${(e.file_size/1024/1024).toFixed(2)} MB)`:"";return t.jsxs("div",{style:n.fileAttachment,className:"file-attachment-hover",children:[t.jsx("div",{style:n.fileIcon,children:["zip","rar","7z","tar","gz"].includes(o)?"ðŸ“¦":["pdf"].includes(o)?"ðŸ“„":["doc","docx"].includes(o)?"ðŸ“":["xls","xlsx"].includes(o)?"ðŸ“Š":["ppt","pptx"].includes(o)?"ðŸ“½ï¸":["txt"].includes(o)?"ðŸ“ƒ":"ðŸ“Ž"}),t.jsxs("div",{style:n.fileInfo,children:[t.jsx("div",{style:n.fileName,children:e.file_name||"Dosya"}),t.jsxs("div",{style:n.fileDetails,children:[a," ",y]})]}),t.jsxs("a",{href:S,download:e.file_name,style:n.downloadButton,className:"download-button-hover",onClick:m=>m.stopPropagation(),children:[t.jsx(Fe,{size:18}),t.jsx("span",{style:{marginLeft:"6px"},children:"Ä°ndir"})]})]})})(),t.jsxs("div",{style:n.footerRow,children:[U.length>0&&t.jsx("div",{style:n.reactionsRow,children:U.map(({emoji:o,count:i})=>t.jsxs("span",{onClick:()=>c(e.id,o),style:{...n.reactionTag,border:Re(o)?"1px solid #5865f2":"1px solid transparent"},children:[o," ",i]},o))}),b&&!e.temp_id&&t.jsx("span",{style:n.readReceipt,title:"Ä°letildi",children:"âœ“"})]})]})]})},n={chatMessage:{display:"flex",padding:"8px 20px",marginBottom:"2px",position:"relative",transition:"background-color 0.1s ease",width:"100%",boxSizing:"border-box",borderRadius:"0"},avatarContainer:{marginTop:"4px",marginRight:"16px",flexShrink:0},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},messageHeader:{display:"flex",alignItems:"baseline",marginBottom:"4px",gap:"8px"},timestamp:{fontSize:"0.75rem",color:"#949ba4",fontWeight:"400"},messageContent:{color:"#dbdee1",fontSize:"1rem",lineHeight:"1.4rem",whiteSpace:"pre-wrap",wordBreak:"break-word",fontWeight:"400"},contentWrapper:{flex:1,minWidth:0,maxWidth:"100%"},messageActions:{position:"absolute",top:"-10px",right:"10px",backgroundColor:"#313338",borderRadius:"8px",padding:"4px",display:"flex",gap:"4px",border:"1px solid rgba(255,255,255,0.08)",zIndex:50,boxShadow:"0 4px 10px rgba(0,0,0,0.3)"},actionButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em",padding:"6px",display:"flex",borderRadius:"4px",transition:"all 0.1s"},inlineCode:{backgroundColor:"#2b2d31",padding:"2px 4px",borderRadius:"3px",fontFamily:"'Consolas', monospace",fontSize:"0.85em",border:"1px solid rgba(255,255,255,0.05)"},messageImage:{maxWidth:"min(300px, 70%)",maxHeight:"250px",width:"auto",height:"auto",display:"block",objectFit:"cover",borderRadius:"8px",marginTop:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},messageVideo:{maxWidth:"min(400px, 80%)",maxHeight:"300px",width:"auto",height:"auto",borderRadius:"8px",marginTop:"8px",backgroundColor:"black"},fileAttachment:{display:"flex",alignItems:"center",padding:"14px 16px",backgroundColor:"#2b2d31",borderRadius:"8px",marginTop:"8px",border:"1px solid #3a3d44",maxWidth:"450px",transition:"all 0.2s ease",cursor:"default"},fileIcon:{fontSize:"32px",marginRight:"12px",flexShrink:0},fileInfo:{flex:1,minWidth:0,marginRight:"12px"},fileName:{color:"#f2f3f5",fontSize:"14px",fontWeight:"500",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},fileDetails:{color:"#b9bbbe",fontSize:"12px"},downloadButton:{display:"flex",alignItems:"center",padding:"8px 14px",backgroundColor:"#5865f2",color:"white",borderRadius:"6px",textDecoration:"none",fontSize:"13px",fontWeight:"600",transition:"all 0.2s ease",border:"none",cursor:"pointer",flexShrink:0},reactionsRow:{display:"flex",gap:"4px",marginTop:"6px",flexWrap:"wrap"},reactionTag:{backgroundColor:"#2b2d31",padding:"4px 8px",borderRadius:"8px",fontSize:"0.85em",cursor:"pointer",color:"#b9bbbe",border:"1px solid transparent",display:"flex",alignItems:"center",gap:"4px"},footerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"4px",minHeight:"20px"},readReceipt:{fontSize:"0.75em",color:"#b9bbbe",marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px"},replyContainer:{display:"flex",alignItems:"center",fontSize:"0.85em",color:"#b9bbbe",marginBottom:"4px",opacity:.8},replyLine:{width:"30px",borderTop:"2px solid #4f545c",borderLeft:"2px solid #4f545c",height:"10px",marginRight:"8px",borderTopLeftRadius:"6px",marginTop:"6px"},historyDropdown:{position:"absolute",top:"100%",left:0,width:"280px",backgroundColor:"#1e1f22",border:"1px solid #111214",borderRadius:"8px",padding:"12px",zIndex:100,boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},historyHeader:{margin:"0 0 10px 0",fontSize:"0.9em",color:"#fff",borderBottom:"1px solid #2f3136",paddingBottom:"8px"},historyItem:{marginBottom:"12px",fontSize:"0.85em",color:"#b9bbbe",paddingBottom:"8px",borderBottom:"1px solid #2b2d31"},langBadge:{textTransform:"uppercase",fontSize:"0.7em",fontWeight:"bold",padding:"2px 4px",borderRadius:"4px",backgroundColor:"rgba(255,255,255,0.1)",marginLeft:"8px"},chartBtn:{marginTop:"5px",backgroundColor:"rgba(240, 178, 50, 0.1)",border:"1px solid #f0b232",color:"#f0b232",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.85em",display:"inline-flex",alignItems:"center",gap:"6px"},pollContainer:{marginTop:"10px",padding:"12px",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"8px",backgroundColor:"rgba(0,0,0,0.2)"},pollOption:{display:"flex",justifyContent:"space-between",width:"100%",padding:"10px",margin:"6px 0",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",textAlign:"left",backgroundColor:"rgba(255,255,255,0.05)",transition:"background 0.2s"},contextMenu:{position:"fixed",backgroundColor:"#18191c",border:"1px solid #2b2d31",borderRadius:"6px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:1e4,minWidth:"220px",overflow:"hidden",padding:"6px 0"},contextMenuItem:{padding:"10px 14px",cursor:"pointer",color:"#b5bac1",fontSize:"0.9em",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.15s",backgroundColor:"transparent"},contextMenuDivider:{height:"1px",backgroundColor:"#2b2d31",margin:"6px 0"},voiceTranscription:{display:"flex",alignItems:"flex-start",gap:"8px",marginTop:"8px",padding:"10px 12px",backgroundColor:"rgba(114, 137, 218, 0.1)",border:"1px solid rgba(114, 137, 218, 0.3)",borderRadius:"8px",maxWidth:"400px"},transcriptionIcon:{fontSize:"16px",flexShrink:0,marginTop:"2px"},transcriptionText:{flex:1,fontSize:"13px",lineHeight:"1.5",color:"#dcddde",fontStyle:"italic"},transcribeButton:{marginTop:"8px",padding:"6px 12px",backgroundColor:"rgba(88, 101, 242, 0.15)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"6px",color:"#7289da",fontSize:"12px",cursor:"pointer",transition:"all 0.2s",display:"inline-flex",alignItems:"center",gap:"6px"},transcribingLoader:{marginTop:"8px",padding:"6px 12px",color:"#72767d",fontSize:"12px",fontStyle:"italic"}},xe=document.createElement("style");xe.innerText=`
    .message-hover-trigger:hover { background-color: rgba(255, 255, 255, 0.03) !important; }
    .action-button:hover { background-color: rgba(255, 255, 255, 0.1); color: white; }
    .poll-option:hover { background-color: rgba(255, 255, 255, 0.1) !important; }
    .context-menu-item:hover { background-color: #5865f2 !important; color: #fff !important; }
    .context-menu-item.danger:hover { background-color: #ed4245 !important; }
    
    /* ðŸ†• File Attachment Hover Effects */
    .file-attachment-hover:hover {
        background-color: #32353b !important;
        border-color: #4e5159 !important;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .download-button-hover:hover {
        background-color: #4752c4 !important;
        transform: scale(1.05);
        box-shadow: 0 2px 8px rgba(88, 101, 242, 0.4);
    }
    .download-button-hover:active {
        transform: scale(0.98);
    }
`;document.head.appendChild(xe);const nt=(e,l)=>{const d=["msg","currentUser","isAdmin","isSelectionMode","isSelected"];for(const x of d)if(e[x]!==l[x])return!1;return!0},mt=r.memo(ot,nt);export{mt as default};
