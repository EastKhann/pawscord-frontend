import{r as i,b as e}from"./react-core-9vc7GIjk.js";import{B as o,a as S,av as N,N as h,m as b,i as F,c0 as T,al as y,aj as w,a$ as A,bs as R,c1 as j,ar as P}from"./icons-vendor-NoxEirJf.js";import{g as $}from"./index-DK2jvQ9U.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const H=({serverId:I,channelId:m,onClose:l,onUseSuggestion:p,fetchWithAuth:d})=>{const[a,c]=i.useState(null),[k,u]=i.useState(!0),[s,r]=i.useState("replies"),[f,g]=i.useState(null),E=i.useCallback(async()=>{u(!0);try{const t=await d(`${$()}/channels/${m}/suggestions/`);if(t.ok){const n=await t.json();c(n)}else c({quick_replies:[{id:1,text:"That's a great idea! ðŸŽ‰",confidence:95,context:"Positive response"},{id:2,text:"I'll look into that and get back to you.",confidence:88,context:"Action commitment"},{id:3,text:"Thanks for sharing! Very helpful.",confidence:85,context:"Appreciation"},{id:4,text:"Could you elaborate on that?",confidence:82,context:"Clarification"},{id:5,text:"Let me check the documentation first.",confidence:78,context:"Investigation"}],trending_topics:[{topic:"Server Events",mentions:45,trend:"up"},{topic:"Gaming Night",mentions:38,trend:"up"},{topic:"Music Playlist",mentions:27,trend:"stable"},{topic:"New Members",mentions:23,trend:"down"}],suggested_emojis:["ðŸ‘","ðŸŽ‰","â¤ï¸","ðŸ”¥","ðŸ˜‚","ðŸ™","ðŸ’¯","âœ¨"],conversation_insights:{sentiment:"positive",activity_level:"high",response_rate:87,avg_response_time:"2.3 min"},smart_actions:[{id:1,action:"Create a poll about this topic",icon:"poll",type:"engagement"},{id:2,action:"Share relevant resources",icon:"share",type:"helpful"},{id:3,action:"Invite related experts",icon:"invite",type:"growth"},{id:4,action:"Pin important message",icon:"pin",type:"moderation"}]})}catch(t){console.error("Error loading suggestions:",t),c({quick_replies:[],trending_topics:[],suggested_emojis:[]})}u(!1)},[m,d]);i.useEffect(()=>{E()},[E]);const _=(t,n)=>{navigator.clipboard.writeText(t),g(n),setTimeout(()=>g(null),2e3)},v=t=>{p&&p(t),l()},C=t=>{switch(t){case"positive":return"#10b981";case"neutral":return"#6b7280";case"negative":return"#ef4444";default:return"#6b7280"}},x=t=>t==="up"?e.createElement("span",{className:"trend up"},"â†‘"):t==="down"?e.createElement("span",{className:"trend down"},"â†“"):e.createElement("span",{className:"trend stable"},"â†’");return k?e.createElement("div",{className:"smart-suggestions-overlay",onClick:l},e.createElement("div",{className:"smart-suggestions-panel",onClick:t=>t.stopPropagation()},e.createElement("div",{className:"loading-state"},e.createElement(o,{className:"pulse"}),e.createElement("span",null,"Analyzing conversation...")))):e.createElement("div",{className:"smart-suggestions-overlay",onClick:l},e.createElement("div",{className:"smart-suggestions-panel",onClick:t=>t.stopPropagation()},e.createElement("div",{className:"panel-header"},e.createElement("div",{className:"header-info"},e.createElement("h2",null,e.createElement(o,null)," Smart Suggestions"),e.createElement("span",{className:"powered-by"},"Powered by AI")),e.createElement("button",{className:"close-btn",onClick:l},e.createElement(S,null))),e.createElement("div",{className:"insights-bar"},e.createElement("div",{className:"insight"},e.createElement("span",{className:"insight-label"},"Sentiment"),e.createElement("span",{className:"insight-value sentiment",style:{color:C(a?.conversation_insights?.sentiment)}},a?.conversation_insights?.sentiment||"neutral")),e.createElement("div",{className:"insight"},e.createElement("span",{className:"insight-label"},"Activity"),e.createElement("span",{className:"insight-value"},a?.conversation_insights?.activity_level||"normal")),e.createElement("div",{className:"insight"},e.createElement("span",{className:"insight-label"},"Response Rate"),e.createElement("span",{className:"insight-value"},a?.conversation_insights?.response_rate||0,"%")),e.createElement("div",{className:"insight"},e.createElement("span",{className:"insight-label"},"Avg. Response"),e.createElement("span",{className:"insight-value"},a?.conversation_insights?.avg_response_time||"N/A"))),e.createElement("div",{className:"tabs"},e.createElement("button",{className:`tab ${s==="replies"?"active":""}`,onClick:()=>r("replies")},e.createElement(N,null)," Quick Replies"),e.createElement("button",{className:`tab ${s==="topics"?"active":""}`,onClick:()=>r("topics")},e.createElement(h,null)," Trending"),e.createElement("button",{className:`tab ${s==="actions"?"active":""}`,onClick:()=>r("actions")},e.createElement(b,null)," Smart Actions")),e.createElement("div",{className:"tab-content"},s==="replies"&&e.createElement("div",{className:"replies-tab"},e.createElement("div",{className:"emoji-bar"},e.createElement("span",{className:"emoji-label"},e.createElement(F,null)," Quick Reactions:"),e.createElement("div",{className:"emoji-list"},(a?.suggested_emojis||[]).map((t,n)=>e.createElement("button",{key:n,className:"emoji-btn",onClick:()=>v(t),title:"Click to use"},t)))),e.createElement("div",{className:"replies-list"},e.createElement("h4",null,e.createElement(T,null)," Suggested Replies"),(a?.quick_replies||[]).map(t=>e.createElement("div",{key:t.id,className:"reply-item"},e.createElement("div",{className:"reply-content"},e.createElement("span",{className:"reply-text"},t.text),e.createElement("div",{className:"reply-meta"},e.createElement("span",{className:"context"},t.context),e.createElement("span",{className:"confidence"},e.createElement(y,null)," ",t.confidence,"%"))),e.createElement("div",{className:"reply-actions"},e.createElement("button",{className:"action-btn copy",onClick:()=>_(t.text,t.id),title:"Copy to clipboard"},f===t.id?e.createElement(w,null):e.createElement(A,null)),e.createElement("button",{className:"action-btn use",onClick:()=>v(t.text),title:"Use this reply"},e.createElement(N,null))))))),s==="topics"&&e.createElement("div",{className:"topics-tab"},e.createElement("h4",null,e.createElement(R,null)," Trending Topics in This Channel"),e.createElement("div",{className:"topics-list"},(a?.trending_topics||[]).map((t,n)=>e.createElement("div",{key:n,className:"topic-item"},e.createElement("span",{className:"topic-rank"},"#",n+1),e.createElement("div",{className:"topic-info"},e.createElement("span",{className:"topic-name"},t.topic),e.createElement("span",{className:"topic-mentions"},t.mentions," mentions")),x(t.trend))),(!a?.trending_topics||a.trending_topics.length===0)&&e.createElement("div",{className:"empty-state"},"No trending topics yet"))),s==="actions"&&e.createElement("div",{className:"actions-tab"},e.createElement("h4",null,e.createElement(b,null)," Recommended Actions"),e.createElement("div",{className:"actions-list"},(a?.smart_actions||[]).map(t=>e.createElement("div",{key:t.id,className:`action-item ${t.type}`},e.createElement("div",{className:"action-icon"},t.icon==="poll"&&e.createElement(h,null),t.icon==="share"&&e.createElement(j,null),t.icon==="invite"&&e.createElement(P,null),t.icon==="pin"&&e.createElement(y,null)),e.createElement("span",{className:"action-text"},t.action),e.createElement("span",{className:`action-type ${t.type}`},t.type)))),e.createElement("div",{className:"ai-tip"},e.createElement(o,null),e.createElement("span",null,"These suggestions are based on conversation patterns and community engagement metrics."))))))};export{H as default};
