{"version":3,"file":"BlockListPanel-fyPAXRqO.js","sources":["../../../src/components/BlockListPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport './BlockListPanel.css';\r\nimport { toast } from 'react-toastify';\r\nimport { getApiBase } from '../utils/apiEndpoints';\r\n\r\nconst BlockListPanel = ({ onClose }) => {\r\n    const [blockedUsers, setBlockedUsers] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [userToBlock, setUserToBlock] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const apiBaseUrl = getApiBase();\r\n    const token = localStorage.getItem('access_token');\r\n\r\n    useEffect(() => {\r\n        fetchBlockedUsers();\r\n    }, []);\r\n\r\n    const fetchBlockedUsers = async () => {\r\n        try {\r\n            const response = await fetch(`${apiBaseUrl}/blocks/list/`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            const data = await response.json();\r\n            setBlockedUsers(data.blocked_users || []);\r\n        } catch (error) {\r\n            console.error('Error fetching blocked users:', error);\r\n            toast.error('‚ùå Engelli kullanƒ±cƒ±lar y√ºklenemedi');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const blockUser = async () => {\r\n        if (!userToBlock.trim()) {\r\n            toast.error('‚ùå Kullanƒ±cƒ± adƒ± gerekli');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${apiBaseUrl}/blocks/block/`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    username: userToBlock\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                toast.success('‚úÖ Kullanƒ±cƒ± engellendi');\r\n                setUserToBlock('');\r\n                fetchBlockedUsers();\r\n            } else {\r\n                toast.error(`‚ùå ${data.error || 'Kullanƒ±cƒ± engellenemedi'}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error blocking user:', error);\r\n            toast.error('‚ùå Engelleme hatasƒ±');\r\n        }\r\n    };\r\n\r\n    const unblockUser = async (userId) => {\r\n        try {\r\n            const response = await fetch(`${apiBaseUrl}/blocks/unblock/`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    user_id: userId\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                toast.success('‚úÖ Engel kaldƒ±rƒ±ldƒ±');\r\n                fetchBlockedUsers();\r\n            } else {\r\n                toast.error(`‚ùå ${data.error || 'Engel kaldƒ±rƒ±lamadƒ±'}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error unblocking user:', error);\r\n            toast.error('‚ùå Engel kaldƒ±rma hatasƒ±');\r\n        }\r\n    };\r\n\r\n    const filteredUsers = blockedUsers.filter(user => \r\n        user.username.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        user.email?.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    const getBlockDuration = (blockedAt) => {\r\n        const now = new Date();\r\n        const blocked = new Date(blockedAt);\r\n        const diffMs = now - blocked;\r\n        const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n        const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n        const diffMinutes = Math.floor(diffMs / (1000 * 60));\r\n\r\n        if (diffDays > 0) return `${diffDays} g√ºn √∂nce`;\r\n        if (diffHours > 0) return `${diffHours} saat √∂nce`;\r\n        if (diffMinutes > 0) return `${diffMinutes} dakika √∂nce`;\r\n        return 'Az √∂nce';\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"blocklist-overlay\">\r\n                <div className=\"blocklist-panel\">\r\n                    <div className=\"loading-state\">\r\n                        <div className=\"spinner\"></div>\r\n                        <span>Y√ºkleniyor...</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"blocklist-overlay\" onClick={onClose}>\r\n            <div className=\"blocklist-panel\" onClick={(e) => e.stopPropagation()}>\r\n                {/* Header */}\r\n                <div className=\"blocklist-header\">\r\n                    <h2>üö´ Engelli Kullanƒ±cƒ±lar</h2>\r\n                    <button className=\"close-btn\" onClick={onClose}>‚úï</button>\r\n                </div>\r\n\r\n                {/* Stats */}\r\n                <div className=\"blocklist-stats\">\r\n                    <div className=\"stat-card\">\r\n                        <span className=\"stat-icon\">üö´</span>\r\n                        <div className=\"stat-info\">\r\n                            <span className=\"stat-value\">{blockedUsers.length}</span>\r\n                            <span className=\"stat-label\">Engelli Kullanƒ±cƒ±</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Add User */}\r\n                <div className=\"add-user-section\">\r\n                    <h3>Kullanƒ±cƒ± Engelle</h3>\r\n                    <div className=\"add-user-form\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Kullanƒ±cƒ± adƒ±\"\r\n                            value={userToBlock}\r\n                            onChange={(e) => setUserToBlock(e.target.value)}\r\n                            onKeyPress={(e) => e.key === 'Enter' && blockUser()}\r\n                            className=\"user-input\"\r\n                        />\r\n                        <button className=\"block-btn\" onClick={blockUser}>\r\n                            üö´ Engelle\r\n                        </button>\r\n                    </div>\r\n                    <p className=\"info-text\">\r\n                        Engellenen kullanƒ±cƒ±lar size mesaj g√∂nderemez ve sizi g√∂remez\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Search */}\r\n                <div className=\"search-section\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"üîç Engelli kullanƒ±cƒ±larda ara...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        className=\"search-input\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Blocked Users List */}\r\n                <div className=\"blocklist-content\">\r\n                    {filteredUsers.length === 0 ? (\r\n                        <div className=\"empty-state\">\r\n                            <span className=\"empty-icon\">üéâ</span>\r\n                            <h3>Engelli kullanƒ±cƒ± yok</h3>\r\n                            <p>\r\n                                {searchQuery \r\n                                    ? 'Arama sonucu bulunamadƒ±' \r\n                                    : 'Hen√ºz kimseyi engellemediniz'}\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"blocked-users-list\">\r\n                            {filteredUsers.map((user) => (\r\n                                <div key={user.id} className=\"blocked-user-card\">\r\n                                    <div className=\"user-avatar\">\r\n                                        {user.avatar ? (\r\n                                            <img src={user.avatar} alt={user.username} />\r\n                                        ) : (\r\n                                            <div className=\"default-avatar\">\r\n                                                {user.username.charAt(0).toUpperCase()}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div className=\"user-info\">\r\n                                        <div className=\"user-name\">\r\n                                            <span className=\"username\">{user.username}</span>\r\n                                            <span className=\"user-tag\">#{user.discriminator || '0000'}</span>\r\n                                        </div>\r\n                                        {user.email && (\r\n                                            <span className=\"user-email\">{user.email}</span>\r\n                                        )}\r\n                                        <span className=\"blocked-time\">\r\n                                            Engellendi: {getBlockDuration(user.blocked_at)}\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    <div className=\"user-actions\">\r\n                                        <button\r\n                                            className=\"unblock-btn\"\r\n                                            onClick={() => unblockUser(user.id)}\r\n                                        >\r\n                                            ‚úì Engeli Kaldƒ±r\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Info Banner */}\r\n                <div className=\"info-banner\">\r\n                    <span className=\"info-icon\">‚ÑπÔ∏è</span>\r\n                    <p>\r\n                        Engellenen kullanƒ±cƒ±lar size DM g√∂nderemez, profilinizi g√∂remez ve \r\n                        payla≈üƒ±mlarƒ±nƒ±zla etkile≈üime ge√ßemez. Gruplanmƒ±≈ü serverlarda \r\n                        g√∂r√ºn√ºrl√ºk sƒ±nƒ±rlƒ±dƒ±r.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BlockListPanel;\r\n\r\n"],"names":["useState","useEffect","toast","jsx","jsxs"],"mappings":"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"}