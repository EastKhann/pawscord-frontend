import{r as t,n as e}from"./react-core-zXIKm1Jm.js";import{t as j}from"./index-DsM7Jk9S.js";import{a as f}from"./index-D5GkNzM3.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-PJALNo1v.js";import"./crypto-vendor-D_AcF0lD.js";import"./icons-vendor-DZdpmN99.js";import"./state-vendor-8NbFPBhQ.js";const F=()=>{const[l,o]=t.useState([]),[p,c]=t.useState(null),[s,d]=t.useState("yearly"),[n,i]=t.useState(null),[u,m]=t.useState(!0);t.useEffect(()=>{g()},[]);const g=async()=>{try{const a=await f.get("/api/premium/plans/");o(a.data.plans),i(a.data.promotion),m(!1)}catch(a){console.error("Failed to fetch plans:",a),m(!1)}},N=async a=>{c(a);try{const r=await f.post("/api/premium/purchase/",{plan_id:a.id,billing_cycle:s});if(r.data.checkout_url){window.location.href=r.data.checkout_url;return}j.info(`ðŸ“‹ Purchasing ${a.name} - ${s} plan`)}catch(r){console.error("Purchase failed:",r),j.error("âŒ Purchase failed. Please try again.")}},v=a=>{const r=a.monthly_price*12,y=a.yearly_price,h=r-y,x=Math.round(h/r*100);return{amount:h.toFixed(2),percentage:x}};return u?e.jsx("div",{className:"loading",children:"Loading premium plans..."}):e.jsxs("div",{className:"premium-marketplace",children:[n&&e.jsxs("div",{className:"promotion-banner",children:[e.jsx("h2",{children:n.name}),e.jsxs("p",{children:["ðŸ”¥ Save ",n.discount_percent,"% on all plans!"]}),e.jsxs("p",{className:"promotion-ends",children:["Ends: ",new Date(n.ends_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"billing-toggle",children:[e.jsx("button",{className:s==="monthly"?"active":"",onClick:()=>d("monthly"),children:"Monthly"}),e.jsxs("button",{className:s==="yearly"?"active":"",onClick:()=>d("yearly"),children:["Yearly ",e.jsx("span",{className:"save-badge",children:"Save 17%"})]})]}),e.jsx("div",{className:"plans-grid",children:l.map((a,r)=>{const y=v(a),h=s==="yearly"?a.yearly_price:a.monthly_price,x=a.original_yearly_price||a.original_monthly_price;return e.jsx(P,{plan:a,price:h,originalPrice:x,billingCycle:s,savings:y,promotion:n,onPurchase:()=>N(a),featured:r===1},a.id)})}),e.jsxs("div",{className:"premium-faq",children:[e.jsx("h3",{children:"Frequently Asked Questions"}),e.jsxs("div",{className:"faq-item",children:[e.jsx("h4",{children:"Can I cancel anytime?"}),e.jsx("p",{children:"Yes! Cancel anytime and keep your benefits until the end of the billing period."})]}),e.jsxs("div",{className:"faq-item",children:[e.jsx("h4",{children:"What payment methods do you accept?"}),e.jsx("p",{children:"We accept all major credit cards, PayPal, and cryptocurrencies."})]}),e.jsxs("div",{className:"faq-item",children:[e.jsx("h4",{children:"Is there a free trial?"}),e.jsx("p",{children:"Yes! 7-day free trial on all plans. No credit card required."})]})]})]})},P=({plan:l,price:o,originalPrice:p,billingCycle:c,savings:s,promotion:d,onPurchase:n,featured:i})=>e.jsxs("div",{className:`premium-plan-card ${i?"featured":""}`,children:[i&&e.jsx("div",{className:"featured-badge",children:"ðŸŒŸ Most Popular"}),e.jsxs("div",{className:"plan-header",children:[e.jsx("h3",{children:l.name}),e.jsxs("div",{className:"plan-price",children:[p&&d&&e.jsxs("span",{className:"original-price",children:["$",p]}),e.jsxs("span",{className:"current-price",children:["$",o,e.jsxs("span",{className:"billing-period",children:["/",c==="yearly"?"year":"month"]})]}),c==="yearly"&&e.jsxs("div",{className:"savings-badge",children:["ðŸ’° Save $",s.amount,"/year (",s.percentage,"% off)"]})]})]}),e.jsx("ul",{className:"plan-features",children:l.features.map((u,m)=>e.jsxs("li",{children:[e.jsx("span",{className:"check",children:"âœ“"})," ",u]},m))}),e.jsx("button",{className:"purchase-btn",onClick:n,children:i?"ðŸš€ Upgrade Now":"Get Started"}),c==="yearly"&&e.jsxs("p",{className:"monthly-equivalent",children:["Just $",(o/12).toFixed(2),"/month"]})]});export{F as default};
