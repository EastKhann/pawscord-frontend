import{r as s,n as e}from"./react-core-BMiyQWF6.js";import{bA as u,a as L,an as S,bB as w}from"./icons-vendor-T72gfvdf.js";import{t as c}from"./index-6woDk0p4.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BuSyE8vR.js";import"./router-vendor-B86Z1mIL.js";import"./state-vendor-CAyNnPM4.js";import"./crypto-vendor-1Q6e4ZD-.js";const D=({fetchWithAuth:f,apiBaseUrl:x,onClose:m,serverId:a})=>{const[r,y]=s.useState([]),[h,p]=s.useState(!1),[n,d]=s.useState("all");s.useEffect(()=>{b()},[a]);const b=async()=>{p(!0);try{const l=await(await f(`${x}/servers/${a}/logs/`)).json();y(l.logs||[])}catch{c.error("Failed to load join/leave logs")}finally{p(!1)}},j=async()=>{try{const l=await(await f(`${x}/servers/${a}/logs/export/`)).blob(),v=window.URL.createObjectURL(l),i=document.createElement("a");i.href=v,i.download=`join_leave_logs_${new Date().toISOString()}.csv`,document.body.appendChild(i),i.click(),i.remove(),c.success("Logs exported successfully")}catch{c.error("Failed to export logs")}},g=r.filter(o=>n==="all"?!0:o.action===n);return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(u,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Join/Leave Logs"})]}),e.jsx("button",{onClick:m,style:t.closeButton,children:e.jsx(L,{})})]}),e.jsxs("div",{style:t.filters,children:[e.jsxs("button",{onClick:()=>d("all"),style:{...t.filterButton,...n==="all"&&t.filterButtonActive},children:["All (",r.length,")"]}),e.jsxs("button",{onClick:()=>d("joined"),style:{...t.filterButton,...n==="joined"&&t.filterButtonActive},children:["ðŸŸ¢ Joins (",r.filter(o=>o.action==="joined").length,")"]}),e.jsxs("button",{onClick:()=>d("left"),style:{...t.filterButton,...n==="left"&&t.filterButtonActive},children:["ðŸ”´ Leaves (",r.filter(o=>o.action==="left").length,")"]}),e.jsxs("button",{onClick:j,style:t.exportButton,children:[e.jsx(S,{style:{marginRight:"5px"}}),"Export"]})]}),e.jsx("div",{style:t.content,children:h?e.jsx("div",{style:t.loading,children:"Loading logs..."}):g.length===0?e.jsx("div",{style:t.empty,children:"No logs found"}):e.jsx("div",{style:t.logsList,children:g.map((o,l)=>e.jsxs("div",{style:t.logItem,children:[e.jsx("div",{style:t.logIcon,children:o.action==="joined"?e.jsx(u,{style:{color:"#43b581"}}):e.jsx(w,{style:{color:"#f04747"}})}),e.jsxs("div",{style:t.logInfo,children:[e.jsx("div",{style:t.logUser,children:o.user?.username||"Unknown User"}),e.jsx("div",{style:t.logAction,children:o.action==="joined"?"Joined the server":"Left the server"}),o.invite_code&&e.jsxs("div",{style:t.logMeta,children:["via invite: ",o.invite_code]})]}),e.jsx("div",{style:t.logTime,children:new Date(o.timestamp).toLocaleString()})]},l))})})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},filters:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #2c2f33",flexWrap:"wrap"},filterButton:{padding:"8px 16px",backgroundColor:"#2c2f33",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},filterButtonActive:{backgroundColor:"#5865f2"},exportButton:{marginLeft:"auto",padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},logsList:{display:"flex",flexDirection:"column",gap:"12px"},logItem:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",alignItems:"center",gap:"16px"},logIcon:{fontSize:"20px"},logInfo:{flex:1},logUser:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},logAction:{fontSize:"14px",color:"#dcddde",marginBottom:"2px"},logMeta:{fontSize:"12px",color:"#99aab5"},logTime:{fontSize:"13px",color:"#99aab5"}};export{D as default};
