import{r as o}from"./react-core-B6hadH-M.js";import{t as l}from"./index-D_6pZib5.js";function w({inviteCode:i,fetchWithAuth:p,onClose:c,apiBaseUrl:d}){const[b,m]=o.useState(!0),[f,y]=o.useState(null),[a,v]=o.useState(null),[u,x]=o.useState(!1);o.useEffect(()=>{h()},[i]);const h=async()=>{try{m(!0),y(null);const t=await fetch(`${d}/invites/${i}/`);if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||"Davet bulunamadƒ± veya s√ºresi dolmu≈ü")}if(!(t.headers.get("content-type")||"").includes("application/json"))throw new Error("Davet bulunamadƒ±");const s=await t.json();v(s)}catch(t){y(t.message)}finally{m(!1)}},R=async()=>{if(a){if(!p){l.warning("üîê Sunucuya katƒ±lmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!"),sessionStorage.setItem("pending_invite",i),window.location.hash="#/";return}try{x(!0);const g=a?.type==="vanity"?`${d}/servers/${a.server.id}/join/`:`${d}/invites/${i}/accept/`,s=await p(g,{method:"POST"}),n=await s.json().catch(()=>({}));if(s.ok||n.success)l.success(`‚úÖ ${n.server_name||n.message||"Sunucuya katƒ±ldƒ±nƒ±z!"}`),c();else if(n.error&&n.error.includes("zaten"))l.info("‚ÑπÔ∏è Zaten bu sunucudasƒ±nƒ±z!"),c();else throw new Error(n.error||"Sunucuya katƒ±lƒ±namadƒ±")}catch(t){l.error("‚ùå "+t.message)}finally{x(!1)}}};if(b)return React.createElement("div",{style:e.container},React.createElement("div",{style:e.card},React.createElement("div",{style:e.loadingSpinner}),React.createElement("p",{style:e.loadingText},"Davet bilgileri y√ºkleniyor...")));if(f)return React.createElement("div",{style:e.container},React.createElement("div",{style:e.card},React.createElement("div",{style:e.errorIcon},"‚ùå"),React.createElement("h2",{style:e.errorTitle},"Davet Bulunamadƒ±"),React.createElement("p",{style:e.errorText},f),React.createElement("button",{onClick:c,style:e.closeButton},"Ana Sayfaya D√∂n")));const r=a?.server;return React.createElement("div",{style:e.container},React.createElement("div",{style:e.card},React.createElement("div",{style:e.serverIconContainer},r?.icon?React.createElement("img",{src:r.icon,alt:r?.name,style:e.serverIcon}):React.createElement("div",{style:e.serverIconPlaceholder},r?.name?.charAt(0)?.toUpperCase()||"?")),React.createElement("p",{style:e.invitedBy},a?.inviter?.username||"Birisi"," seni davet ediyor:"),React.createElement("h2",{style:e.serverName},r?.name||"Bilinmeyen Sunucu"),React.createElement("div",{style:e.memberInfo},React.createElement("span",{style:e.memberCount},"üë• ",r?.member_count||0," √ºye")),React.createElement("button",{onClick:R,disabled:u,style:{...e.joinButton,opacity:u?.7:1}},u?"‚è≥ Katƒ±lƒ±nƒ±yor...":"‚úÖ Sunucuya Katƒ±l"),React.createElement("button",{onClick:c,style:e.backButton},"‚Üê Geri D√∂n")))}const e={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",padding:"20px"},card:{background:"#2b2d31",borderRadius:"16px",padding:"40px",maxWidth:"440px",width:"100%",textAlign:"center",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},serverIconContainer:{display:"flex",justifyContent:"center",marginBottom:"20px"},serverIcon:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:"3px solid #5865f2"},serverIconPlaceholder:{width:"80px",height:"80px",borderRadius:"50%",background:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"36px",fontWeight:"bold",color:"#fff"},invitedBy:{color:"#b5bac1",fontSize:"14px",marginBottom:"8px"},serverName:{color:"#fff",fontSize:"24px",fontWeight:"bold",marginBottom:"12px"},memberInfo:{marginBottom:"24px"},memberCount:{color:"#b5bac1",fontSize:"14px"},joinButton:{width:"100%",padding:"14px",background:"#5865f2",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"background 0.2s",marginBottom:"12px"},backButton:{width:"100%",padding:"10px",background:"transparent",color:"#b5bac1",border:"1px solid #4e5058",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},loadingSpinner:{width:"40px",height:"40px",border:"3px solid #4e5058",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"},loadingText:{color:"#b5bac1",fontSize:"16px"},errorIcon:{fontSize:"48px",marginBottom:"16px"},errorTitle:{color:"#fff",fontSize:"20px",marginBottom:"8px"},errorText:{color:"#b5bac1",fontSize:"14px",marginBottom:"20px"},closeButton:{padding:"12px 24px",background:"#4e5058",color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer"}};export{w as default};
