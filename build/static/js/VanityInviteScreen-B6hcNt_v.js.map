{"version":3,"file":"VanityInviteScreen-B6hcNt_v.js","sources":["../../../src/components/VanityInviteScreen.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction VanityInviteScreen({ vanityPath, fetchWithAuth, onClose, apiBaseUrl }) {\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [serverInfo, setServerInfo] = useState(null);\r\n    const [joining, setJoining] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadServerInfo();\r\n    }, [vanityPath]);\r\n\r\n    const loadServerInfo = async () => {\r\n        try {\r\n            setLoading(true);\r\n            // Fast endpoint: /api/vanity/<path>/ (select_related, no Session scan)\r\n            const response = await fetch(`${apiBaseUrl}/vanity/${vanityPath}/`);\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Sunucu bulunamadƒ±');\r\n            }\r\n\r\n            const contentType = response.headers.get('content-type') || '';\r\n            if (!contentType.includes('application/json')) {\r\n                throw new Error('Sunucu bulunamadƒ±');\r\n            }\r\n\r\n            const data = await response.json();\r\n            setServerInfo(data);\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleJoin = async () => {\r\n        if (!serverInfo) return;\r\n\r\n        // Giri≈ü yapmamƒ±≈ü kullanƒ±cƒ±larƒ± login sayfasƒ±na y√∂nlendir\r\n        if (!fetchWithAuth) {\r\n            toast.warning('üîê Sunucuya katƒ±lmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!');\r\n            window.location.hash = '#/';\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setJoining(true);\r\n            const response = await fetchWithAuth(`${apiBaseUrl}/servers/${serverInfo.server_id}/join/`, {\r\n                method: 'POST',\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json().catch(() => ({}));\r\n                const errorMessage = errorData.error || errorData.message || 'Sunucuya katƒ±lƒ±namadƒ±';\r\n                throw new Error(errorMessage);\r\n            }\r\n\r\n            // Ba≈üarƒ±lƒ± katƒ±lƒ±m mesajƒ±\r\n            toast.success(`‚úÖ ${serverInfo.server_name} sunucusuna katƒ±ldƒ±nƒ±z!`);\r\n\r\n            // Sunucuya katƒ±ldƒ±ktan sonra ana sayfaya d√∂n\r\n            if (onClose) onClose();\r\n            else window.location.hash = '#/';\r\n        } catch (err) {\r\n            // Hata mesajƒ±nƒ± toast ile g√∂ster\r\n            if (err.message.includes('zaten')) {\r\n                toast.info('‚ÑπÔ∏è Zaten bu sunucudasƒ±nƒ±z!');\r\n            } else {\r\n                toast.error('‚ùå ' + err.message);\r\n            }\r\n        } finally {\r\n            setJoining(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={styles.container}>\r\n                <div style={styles.card}>\r\n                    <div style={styles.loadingSpinner}>üîÑ</div>\r\n                    <p style={styles.loadingText}>Sunucu bilgileri y√ºkleniyor...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div style={styles.container}>\r\n                <div style={styles.card}>\r\n                    <h1 style={styles.errorTitle}>‚ùå Sunucu Bulunamadƒ±</h1>\r\n                    <p style={styles.errorText}>{error}</p>\r\n                    <button\r\n                        style={styles.backButton}\r\n                        onClick={() => {\r\n                            if (onClose) onClose();\r\n                            else window.location.hash = '#/';\r\n                        }}\r\n                    >\r\n                        Ana Sayfaya D√∂n\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            <div style={styles.card}>\r\n                {/* Sunucu Avatar */}\r\n                <div style={styles.avatarContainer}>\r\n                    {serverInfo.server_avatar ? (\r\n                        <img\r\n                            src={serverInfo.server_avatar}\r\n                            alt={serverInfo.server_name}\r\n                            style={styles.avatar}\r\n                        />\r\n                    ) : (\r\n                        <div style={styles.defaultAvatar}>\r\n                            {serverInfo.server_name.charAt(0).toUpperCase()}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Sunucu Adƒ± */}\r\n                <h1 style={styles.serverName}>{serverInfo.server_name}</h1>\r\n\r\n                {/* Davet Eden */}\r\n                <p style={styles.inviteText}>\r\n                    seni <strong>{serverInfo.server_name}</strong> sunucusuna davet etti\r\n                </p>\r\n\r\n                {/* √úye Sayƒ±larƒ± */}\r\n                <div style={styles.statsContainer}>\r\n                    <div style={styles.stat}>\r\n                        <span style={styles.onlineDot}>‚óè</span>\r\n                        <span style={styles.statText}>\r\n                            <strong>{serverInfo.online_count}</strong> √áevrimi√ßi\r\n                        </span>\r\n                    </div>\r\n                    <div style={styles.stat}>\r\n                        <span style={styles.memberDot}>‚óè</span>\r\n                        <span style={styles.statText}>\r\n                            <strong>{serverInfo.member_count}</strong> √úye\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Katƒ±l Butonu */}\r\n                <button\r\n                    style={{\r\n                        ...styles.joinButton,\r\n                        ...(joining ? styles.joinButtonDisabled : {})\r\n                    }}\r\n                    onClick={handleJoin}\r\n                    disabled={joining}\r\n                >\r\n                    {joining ? 'Katƒ±lƒ±nƒ±yor...' : `${serverInfo.server_name} Sunucusuna Katƒ±l`}\r\n                </button>\r\n\r\n                {/* Vanity URL Bilgisi */}\r\n                <p style={styles.vanityInfo}>\r\n                    pawscord.com/join/{serverInfo.vanity_path}\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n        padding: '20px',\r\n        overflow: 'auto',\r\n    },\r\n    card: {\r\n        backgroundColor: '#36393f',\r\n        borderRadius: '12px',\r\n        padding: '40px',\r\n        maxWidth: '450px',\r\n        width: '100%',\r\n        textAlign: 'center',\r\n        boxShadow: '0 8px 16px rgba(0, 0, 0, 0.3)',\r\n    },\r\n    avatarContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        marginBottom: '20px',\r\n    },\r\n    avatar: {\r\n        width: '100px',\r\n        height: '100px',\r\n        borderRadius: '50%',\r\n        objectFit: 'cover',\r\n        border: '4px solid #5865f2',\r\n    },\r\n    defaultAvatar: {\r\n        width: '100px',\r\n        height: '100px',\r\n        borderRadius: '50%',\r\n        backgroundColor: '#5865f2',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        fontSize: '48px',\r\n        fontWeight: 'bold',\r\n        color: '#fff',\r\n        border: '4px solid #4752c4',\r\n    },\r\n    serverName: {\r\n        fontSize: '28px',\r\n        fontWeight: 'bold',\r\n        color: '#fff',\r\n        marginBottom: '10px',\r\n    },\r\n    inviteText: {\r\n        fontSize: '16px',\r\n        color: '#b9bbbe',\r\n        marginBottom: '25px',\r\n    },\r\n    statsContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        gap: '30px',\r\n        marginBottom: '30px',\r\n        padding: '15px',\r\n        backgroundColor: '#2f3136',\r\n        borderRadius: '8px',\r\n    },\r\n    stat: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '8px',\r\n    },\r\n    onlineDot: {\r\n        color: '#3ba55d',\r\n        fontSize: '12px',\r\n    },\r\n    memberDot: {\r\n        color: '#747f8d',\r\n        fontSize: '12px',\r\n    },\r\n    statText: {\r\n        color: '#b9bbbe',\r\n        fontSize: '14px',\r\n    },\r\n    joinButton: {\r\n        width: '100%',\r\n        padding: '15px',\r\n        backgroundColor: '#5865f2',\r\n        color: '#fff',\r\n        border: 'none',\r\n        borderRadius: '8px',\r\n        fontSize: '16px',\r\n        fontWeight: 'bold',\r\n        cursor: 'pointer',\r\n        transition: 'all 0.2s',\r\n        marginBottom: '15px',\r\n    },\r\n    joinButtonDisabled: {\r\n        backgroundColor: '#4752c4',\r\n        cursor: 'not-allowed',\r\n        opacity: 0.6,\r\n    },\r\n    vanityInfo: {\r\n        fontSize: '12px',\r\n        color: '#72767d',\r\n        marginTop: '10px',\r\n    },\r\n    loadingSpinner: {\r\n        fontSize: '48px',\r\n        marginBottom: '20px',\r\n        animation: 'spin 1s linear infinite',\r\n    },\r\n    loadingText: {\r\n        color: '#b9bbbe',\r\n        fontSize: '16px',\r\n    },\r\n    errorTitle: {\r\n        fontSize: '24px',\r\n        color: '#ed4245',\r\n        marginBottom: '15px',\r\n    },\r\n    errorText: {\r\n        color: '#b9bbbe',\r\n        marginBottom: '20px',\r\n    },\r\n    backButton: {\r\n        padding: '12px 24px',\r\n        backgroundColor: '#4f545c',\r\n        color: '#fff',\r\n        border: 'none',\r\n        borderRadius: '8px',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n    },\r\n};\r\n\r\nexport default VanityInviteScreen;\r\n"],"names":["useState","useEffect","toast","jsx","jsxs"],"mappings":"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"}