import{r as c,n as e}from"./react-core-zXIKm1Jm.js";import{t as h}from"./index-DsM7Jk9S.js";import{a as p}from"./index-D5GkNzM3.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-PJALNo1v.js";import"./crypto-vendor-D_AcF0lD.js";import"./icons-vendor-DZdpmN99.js";import"./state-vendor-8NbFPBhQ.js";const P=()=>{const[t,i]=c.useState([]),[l,d]=c.useState(""),[a,o]=c.useState("popular"),[m,n]=c.useState(!0);c.useEffect(()=>{u()},[a]);const u=async()=>{n(!0);try{const s=await p.get(`/api/themes/marketplace/?filter=${a}`);i(s.data.themes)}catch(s){console.error("Failed to fetch themes:",s)}finally{n(!1)}},x=async s=>{try{const r=await p.post("/api/themes/install/",{theme_id:s});r.data.success&&(h.success("âœ… Theme installed successfully!"),j(r.data.theme))}catch(r){console.error("Failed to install theme:",r),h.error("âŒ Installation failed")}},j=s=>{const r=document.documentElement;Object.entries(s.colors).forEach(([f,N])=>{r.style.setProperty(`--${f}`,N)}),localStorage.setItem("current_theme",JSON.stringify(s))},v=t.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.author.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"theme-marketplace",children:[e.jsxs("div",{className:"marketplace-header",children:[e.jsx("h1",{children:"ğŸ¨ Theme Marketplace"}),e.jsx("p",{children:"Discover and install community-created themes"})]}),e.jsxs("div",{className:"marketplace-controls",children:[e.jsx("input",{type:"text",placeholder:"Search themes...",value:l,onChange:s=>d(s.target.value),className:"theme-search"}),e.jsxs("div",{className:"theme-filters",children:[e.jsx("button",{className:a==="popular"?"active":"",onClick:()=>o("popular"),children:"ğŸ”¥ Popular"}),e.jsx("button",{className:a==="new"?"active":"",onClick:()=>o("new"),children:"âœ¨ New"}),e.jsx("button",{className:a==="top-rated"?"active":"",onClick:()=>o("top-rated"),children:"â­ Top Rated"})]})]}),m?e.jsx("div",{className:"loading",children:"Loading themes..."}):e.jsx("div",{className:"theme-grid",children:v.map(s=>e.jsx(y,{theme:s,onInstall:()=>x(s.id)},s.id))})]})},y=({theme:t,onInstall:i})=>{const[l,d]=c.useState(!1),a=()=>{d(!0);const o=document.documentElement;Object.entries(t.colors).forEach(([m,n])=>{o.style.setProperty(`--${m}-preview`,n)})};return e.jsxs("div",{className:"theme-card",children:[e.jsx("div",{className:"theme-preview",style:{background:`linear-gradient(135deg, ${t.colors.primary}, ${t.colors.secondary})`},children:t.screenshot&&e.jsx("img",{src:t.screenshot,alt:t.name})}),e.jsxs("div",{className:"theme-info",children:[e.jsx("h3",{children:t.name}),e.jsxs("p",{className:"theme-author",children:["by ",t.author]}),e.jsx("p",{className:"theme-description",children:t.description}),e.jsxs("div",{className:"theme-stats",children:[e.jsxs("span",{children:["â­ ",t.rating.toFixed(1)]}),e.jsxs("span",{children:["ğŸ“¥ ",t.downloads.toLocaleString()," installs"]})]}),e.jsxs("div",{className:"theme-actions",children:[e.jsx("button",{onClick:a,className:"btn-preview",children:"ğŸ‘ï¸ Preview"}),e.jsx("button",{onClick:i,className:"btn-install",children:"ğŸ“¥ Install"})]})]})]})};export{P as default};
