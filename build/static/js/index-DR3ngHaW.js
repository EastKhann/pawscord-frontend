const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/web-DS2ib2H2.js","static/js/media-vendor-B-uSUaIv.js","static/js/react-core-9vc7GIjk.js","static/js/editor-vendor-DiU449Dh.js","static/js/router-vendor-u6fxj6P4.js","static/js/crypto-vendor-C1qXRpJv.js","static/js/icons-vendor-NoxEirJf.js","static/js/state-vendor-0vlBuk0v.js","static/js/ServerSettingsModal-C_W6pZiv.js","static/js/ui-vendor-_iSLAufy.js","static/js/AutoResponderManager-DHRdJtR2.js","static/js/VanityURLManager-DMB0IoDv.js","static/js/UserProfileModal-F8m9j9im.js","static/js/ImageModal-C99nj2Rh.js","static/js/GifPicker-BFh2Z4QW.js","static/js/StickerPicker-DZkr96jN.js","static/js/SoundboardModal-CTXrgLIr.js","static/js/WatchPartyEnhanced-BJhTyLZi.js","static/js/CinemaModal-CpZ5QCt5.js","static/js/WhiteboardModal-CQEWHRXn.js","static/js/PollCreateModal-D2mk3rfB.js","static/js/CodeSnippetModal-kW_0z6F8.js","static/js/MessageTemplateModal-cDFcY6D6.js","static/js/Message-Ca1Wy4pk.js","static/js/LazyImage-BGwIjfgb.js","static/js/imageCaching-B8rCcNnf.js","static/js/syntax-core-BoGMOf4E.js","static/js/perf-vendor-DCe9hQ6U.js","static/js/VirtualMessageList-B83NbI3e.js","static/js/MessageInput-DFjgo9PU.js","static/js/ScheduledMessageModal-DNa_J1HK.js","static/css/MessageInput-Q2oINpgp.css","static/js/UserVideoContainer-BUAIG94Z.js","static/js/VoiceAudioController-SsLThpjQ.js","static/js/RichTextEditor-2gVa_wd9.js","static/css/RichTextEditor-D1KllEDh.css","static/js/StickyMessageBanner-h5KfzOBu.js","static/js/LoginPage-CZ51Eay2.js","static/js/recaptcha-DCjcE_52.js","static/js/WelcomeScreen-nGo1jkaN.js","static/js/DownloadModal-DkzeBcmF.js","static/js/AvatarCropper-DKjxipOm.js","static/css/AvatarCropper-D7v9iP7L.css","static/js/CryptoChartModal-D9wOZhF9.js","static/js/CryptoStoreModal-Cjia07pF.js","static/js/PremiumStoreModal-B4apMg9C.js","static/js/KanbanBoard-DTJ9ugkb.js","static/js/SummaryModal-BkRpgEuO.js","static/js/DJModal-DorX9fT2.js","static/js/ThemeStoreModal-59yvR93E.js","static/js/EncryptionKeyModal-i6zhLc3k.js","static/js/CreateGroupModal-Uu64DNaE.js","static/js/AdminAnalyticsPanel-CSuj7PTP.js","static/js/AdminPanelModal-DNjf5jmT.js","static/js/WebhooksPanel-Dg8_Orf3.js","static/css/WebhooksPanel-Cn13v79_.css","static/js/AutoModerationDashboard-BpSc3jME.js","static/js/AutoModerationPanel-DEp54GtD.js","static/css/AutoModerationPanel-iAw0CZQU.css","static/js/RaidProtectionPanel-BhOLLUTR.js","static/js/ReportSystemPanel-BWHl3oOe.js","static/js/AuditLogPanel-BKG923PM.js","static/js/UserWarningsPanel-ZLrgPVLY.js","static/js/BookmarkPanel-APPOfqYf.js","static/js/ReadLaterPanel-CR4R4y76.js","static/css/ReadLaterPanel-B_WZGTiX.css","static/js/ChannelPermissionsPanel-EmBWvUqB.js","static/js/MessageThreadsPanel-BXH4RhPx.js","static/js/ModeratorNotesPanel-BI-eXVOB.js","static/js/ServerRolesPanel-Cae4H6bZ.js","static/js/NotificationPreferencesPanel-t1Tj2ci4.js","static/js/MessageOCRPanel-B1KQYYAQ.js","static/js/MassActionsPanel-DcCemiae.js","static/js/TimeoutMutePanel-CX2VeYy9.js","static/js/ServerThemesPanel-CWKDxvkr.js","static/js/KeywordMutesPanel-kV83HxIv.js","static/js/WelcomeTemplatesPanel-CzHDFP2N.js","static/js/StickyMessagesPanel-BDO28O_4.js","static/js/MessageTemplatesPanel-CchLesTc.js","static/js/MessageExportPanel-ClUj3Ov3.js","static/js/ArchivedRoomsPanel-MCWik1W4.js","static/js/SlowModePanel-B11vl5HS.js","static/js/EmojiManagementPanel-BSx_A-Tq.js","static/js/MentionsInboxPanel-CHDJlqfj.js","static/js/CustomStatusModal-BzuuogTh.js","static/js/ReactionAnalyticsPanel-C9X_ciWa.js","static/js/LinkClickTrackingPanel-cQMOAoL6.js","static/js/JoinLeaveLogsPanel-CXEEHk4r.js","static/js/UserActivityPanel-BvWNrYpc.js","static/js/NicknameHistoryPanel-BxrgR-XE.js","static/js/FieldChangeTrackingPanel-ChIW8ZJJ.js","static/js/InviteAnalyticsPanel-DMlg9KdQ.js","static/js/ContentScannerPanel-CURTfDrM.js","static/js/EphemeralMessagesPanel-BuIBYalS.js","static/js/TopicHistoryPanel-Mx8FRM6t.js","static/js/DraftsPanel-GKrPtCUA.js","static/js/ServerNicknamesPanel-D8zKjwtl.js","static/js/ServerBoostPanel-mJ2i8spw.js","static/js/RoomWebhooksPanel-BoF66OWH.js","static/js/OAuthAppsPanel-lJh9G_9n.js","static/js/VanityURLPanel-iFjxuIeG.js","static/js/AutoRespondersPanel-BNlP1JfZ.js","static/js/SessionManagementPanel-BqcPW84e.js","static/js/GDPRExportPanel-C19yvtJD.js","static/js/DataRetentionPanel-CYqj6x9t.js","static/js/TwoFactorSetupWizard-2rMkOH0H.js","static/js/EnhancedPollsPanel-Cfq_DIhM.js","static/js/VoiceTranscriptsPanel-DYkLyo0y.js","static/js/PaymentPanel-DVY3KW-D.js","static/js/StoreModal-CojZgiGQ.js","static/js/DailyRewardsModal-DonACogc.js","static/js/APIUsagePanel-Y2IxnhKD.js","static/js/ExportJobsPanel-C8rr_QAm.js","static/js/ScheduledAnnouncementsPanel-BV47rbab.js","static/js/InviteExportPanel-Br1ZpWbf.js","static/js/AdvancedSearchPanel--COCky3F.js","static/js/GrowthMetricsPanel-2-h7_Pf6.js","static/js/LinkPreviewRenderer-CTUVcPJI.js","static/js/InventoryPanel-BgMO7tXx.js","static/js/WaitlistPanel-CEnCuoq7.js","static/js/ReferralRewardsPanel-z-jL_tf4.js","static/js/VerifyEmailPage-CfsNqQGu.js","static/js/ForgotPasswordPage-DwUTZjX-.js","static/js/ResetPasswordPage-DhhAPN71.js","static/js/TwoFactorLoginPage-BAo68qYy.js","static/js/TwoFactorSetup-CtxGJkh6.js","static/css/TwoFactorSetup-CtmcmlFU.css","static/js/TwoFactorLogin-NYOByexZ.js","static/css/TwoFactorLogin-DgREC4Q6.css","static/js/VanityInviteScreen-B4PHBlOh.js","static/js/EmailVerification-BE1xgEuK.js","static/css/EmailVerification-CE2S-15C.css","static/js/MobileNav--ZizGSGJ.js","static/css/MobileNav-BLwPGkd1.css","static/js/SwipeActions-CXI45k7R.js","static/css/SwipeActions-CCPpS4d3.css","static/js/VoiceMessage-EeXaqU66.js","static/css/VoiceMessage-Czmu0SFR.css","static/js/FriendsTab-CQCKDqmJ.js","static/js/RoomList-DZL1iqnc.js","static/js/UserFooter-CQZP0SSS.js","static/js/UserProfilePanel-HiXzxPu_.js","static/js/index-B9ygI19o.js","static/css/UserProfilePanel-DaqyzPyG.css","static/js/VoiceChatPanel-DVsV-Fut.js","static/js/cjs-B1PcxHQ9.js","static/js/UserContextMenu-C_K32ir-.js","static/css/VoiceChatPanel-D0hk1ENV.css","static/js/ChatUserList-CTtBos9O.js","static/js/PinnedMessages-B0G-oBlj.js","static/js/FloatingVoiceIsland-QkrgBdse.js","static/css/FloatingVoiceIsland-CMKNK2uU.css","static/js/CinemaPlayer-CardOi1Y.js","static/js/ConnectionsPanel-DhcnksSB.js","static/css/ConnectionsPanel-BHb_cRVQ.css","static/js/PasswordSetupModal-Dca7aeQ5.js","static/css/PasswordSetupModal-hiiUdoNl.css","static/js/NotificationDropdown-DJYYJdEt.js","static/js/ReactionStatsPanel-By48Szwh.js","static/css/ReactionStatsPanel-C-EVTLx8.css","static/js/ServerHealthPanel-CJWWy1EM.js","static/css/ServerHealthPanel-BMi05DZE.css","static/js/ChannelAnalyticsPanel-BxtYQseH.js","static/css/ChannelAnalyticsPanel-B6Q8OoDz.css","static/js/SmartSuggestionsPanel-S30wtCm6.js","static/css/SmartSuggestionsPanel-BFDBx7VC.css","static/js/UserPresenceInsightsPanel-BCbWuir2.js","static/css/UserPresenceInsightsPanel-WBZVzGk9.css","static/js/MiniGamesPanel-DtP8EF5t.js","static/js/ProjectCollaborationPanel-B_qhk4zO.js","static/js/AvatarStudioPanel-DY2hE1Gx.js","static/js/pushNotifications-B0mEtdmm.js","static/js/urlHandlers-DTgF3H8F.js","static/js/EnglishHub-Cg3c6jG7.js","static/js/GrammarQuizPage-Du8-qZd4.js","static/js/grammarQuestions-BDmFtbiy.js","static/js/EnglishLearningPage-D6tVvTbJ.js","static/js/CryptoDashboard-0M4Szyll.js","static/js/CryptoSignals-wLqG7d5w.js","static/js/PrivacyPolicyPage-sTRhxd8C.js","static/js/StorePage-DjYEWMz4.js","static/js/LandingPage-BlReKLYW.js","static/css/LandingPage-CHHpsw7G.css","static/js/ReferralProgram-B2xewVkW.js","static/css/ReferralProgram-CBBjqZR4.css","static/js/GrowthDashboard-DGfOEJq0.js","static/css/GrowthDashboard-xlqndw5F.css","static/js/ToastDemo-BWYLbRRg.js","static/css/ToastDemo-DxNVRuTl.css"])))=>i.map(i=>d[i]);
var Il=Object.defineProperty;var Ll=(s,n,r)=>n in s?Il(s,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[n]=r;var Vn=(s,n,r)=>Ll(s,typeof n!="symbol"?n+"":n,r);import{_ as y}from"./media-vendor-B-uSUaIv.js";import{b as e,r as o,f as Ol,n as Dl}from"./react-core-9vc7GIjk.js";import{u as Es,a as ws,b as Ko,L as vs,c as Ml,H as $l,R as zl,d as fe}from"./router-vendor-u6fxj6P4.js";import{C as Br,j as Zt,S as Vl}from"./crypto-vendor-C1qXRpJv.js";import{F as Ul,a as Ho,b as Bl,c as Qa,d as es,e as Nl,f as Fl,g as Wl,h as jl,i as Gl,j as Hl,k as Kl,l as ql,m as ts,n as Yl,o as Jl,p as Nr,q as Kr,r as Zl,s as Xl,t as Ql,u as ec,v as _s,w as qr,x as Yr,y as tc,z as oc,A as ks,B as os,C as nc,D as rc,E as ac,G as sc,H as ic,I as lc,J as cc}from"./icons-vendor-NoxEirJf.js";import{c as dc}from"./state-vendor-0vlBuk0v.js";import"./editor-vendor-DiU449Dh.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const p of l)if(p.type==="childList")for(const k of p.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&u(k)}).observe(document,{childList:!0,subtree:!0});function r(l){const p={};return l.integrity&&(p.integrity=l.integrity),l.referrerPolicy&&(p.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?p.credentials="include":l.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(l){if(l.ep)return;l.ep=!0;const p=r(l);fetch(l.href,p)}})();var bo;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(bo||(bo={}));class zr extends Error{constructor(n,r,u){super(n),this.message=n,this.code=r,this.data=u}}const uc=s=>{var n,r;return s?.androidBridge?"android":!((r=(n=s?.webkit)===null||n===void 0?void 0:n.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},mc=s=>{const n=s.CapacitorCustomPlatform||null,r=s.Capacitor||{},u=r.Plugins=r.Plugins||{},l=()=>n!==null?n.name:uc(s),p=()=>l()!=="web",k=O=>{const z=D.get(O);return!!(z?.platforms.has(l())||T(O))},T=O=>{var z;return(z=r.PluginHeaders)===null||z===void 0?void 0:z.find(J=>J.name===O)},C=O=>s.console.error(O),D=new Map,G=(O,z={})=>{const J=D.get(O);if(J)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),J.proxy;const H=l(),V=T(O);let U;const j=async()=>(!U&&H in z?U=typeof z[H]=="function"?U=await z[H]():U=z[H]:n!==null&&!U&&"web"in z&&(U=typeof z.web=="function"?U=await z.web():U=z.web),U),q=(Y,pe)=>{var Ee,Ue;if(V){const Q=V?.methods.find(Se=>pe===Se.name);if(Q)return Q.rtype==="promise"?Se=>r.nativePromise(O,pe.toString(),Se):(Se,Be)=>r.nativeCallback(O,pe.toString(),Se,Be);if(Y)return(Ee=Y[pe])===null||Ee===void 0?void 0:Ee.bind(Y)}else{if(Y)return(Ue=Y[pe])===null||Ue===void 0?void 0:Ue.bind(Y);throw new zr(`"${O}" plugin is not implemented on ${H}`,bo.Unimplemented)}},de=Y=>{let pe;const Ee=(...Ue)=>{const Q=j().then(Se=>{const Be=q(Se,Y);if(Be){const Me=Be(...Ue);return pe=Me?.remove,Me}else throw new zr(`"${O}.${Y}()" is not implemented on ${H}`,bo.Unimplemented)});return Y==="addListener"&&(Q.remove=async()=>pe()),Q};return Ee.toString=()=>`${Y.toString()}() { [capacitor code] }`,Object.defineProperty(Ee,"name",{value:Y,writable:!1,configurable:!1}),Ee},oe=de("addListener"),Z=de("removeListener"),ae=(Y,pe)=>{const Ee=oe({eventName:Y},pe),Ue=async()=>{const Se=await Ee;Z({eventName:Y,callbackId:Se},pe)},Q=new Promise(Se=>Ee.then(()=>Se({remove:Ue})));return Q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Ue()},Q},ue=new Proxy({},{get(Y,pe){switch(pe){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return V?ae:oe;case"removeListener":return Z;default:return de(pe)}}});return u[O]=ue,D.set(O,{name:O,proxy:ue,platforms:new Set([...Object.keys(z),...V?[H]:[]])}),ue};return r.convertFileSrc||(r.convertFileSrc=O=>O),r.getPlatform=l,r.handleError=C,r.isNativePlatform=p,r.isPluginAvailable=k,r.registerPlugin=G,r.Exception=zr,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},fc=s=>s.Capacitor=mc(s),Eo=fc(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Jr=Eo.registerPlugin;class xs{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(n,r){let u=!1;this.listeners[n]||(this.listeners[n]=[],u=!0),this.listeners[n].push(r);const p=this.windowListeners[n];p&&!p.registered&&this.addWindowListener(p),u&&this.sendRetainedArgumentsForEvent(n);const k=async()=>this.removeListener(n,r);return Promise.resolve({remove:k})}async removeAllListeners(){this.listeners={};for(const n in this.windowListeners)this.removeWindowListener(this.windowListeners[n]);this.windowListeners={}}notifyListeners(n,r,u){const l=this.listeners[n];if(!l){if(u){let p=this.retainedEventArguments[n];p||(p=[]),p.push(r),this.retainedEventArguments[n]=p}return}l.forEach(p=>p(r))}hasListeners(n){var r;return!!(!((r=this.listeners[n])===null||r===void 0)&&r.length)}registerWindowListener(n,r){this.windowListeners[r]={registered:!1,windowEventName:n,pluginEventName:r,handler:u=>{this.notifyListeners(r,u)}}}unimplemented(n="not implemented"){return new Eo.Exception(n,bo.Unimplemented)}unavailable(n="not available"){return new Eo.Exception(n,bo.Unavailable)}async removeListener(n,r){const u=this.listeners[n];if(!u)return;const l=u.indexOf(r);this.listeners[n].splice(l,1),this.listeners[n].length||this.removeWindowListener(this.windowListeners[n])}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}sendRetainedArgumentsForEvent(n){const r=this.retainedEventArguments[n];r&&(delete this.retainedEventArguments[n],r.forEach(u=>{this.notifyListeners(n,u)}))}}const ns=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),rs=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class pc extends xs{async getCookies(){const n=document.cookie,r={};return n.split(";").forEach(u=>{if(u.length<=0)return;let[l,p]=u.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=rs(l).trim(),p=rs(p).trim(),r[l]=p}),r}async setCookie(n){try{const r=ns(n.key),u=ns(n.value),l=`; expires=${(n.expires||"").replace("expires=","")}`,p=(n.path||"/").replace("path=",""),k=n.url!=null&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${r}=${u||""}${l}; path=${p}; ${k};`}catch(r){return Promise.reject(r)}}async deleteCookie(n){try{document.cookie=`${n.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const n=document.cookie.split(";")||[];for(const r of n)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(n){return Promise.reject(n)}}async clearAllCookies(){try{await this.clearCookies()}catch(n){return Promise.reject(n)}}}Jr("CapacitorCookies",{web:()=>new pc});const gc=async s=>new Promise((n,r)=>{const u=new FileReader;u.onload=()=>{const l=u.result;n(l.indexOf(",")>=0?l.split(",")[1]:l)},u.onerror=l=>r(l),u.readAsDataURL(s)}),hc=(s={})=>{const n=Object.keys(s);return Object.keys(s).map(l=>l.toLocaleLowerCase()).reduce((l,p,k)=>(l[p]=s[n[k]],l),{})},yc=(s,n=!0)=>s?Object.entries(s).reduce((u,l)=>{const[p,k]=l;let T,C;return Array.isArray(k)?(C="",k.forEach(D=>{T=n?encodeURIComponent(D):D,C+=`${p}=${T}&`}),C.slice(0,-1)):(T=n?encodeURIComponent(k):k,C=`${p}=${T}`),`${u}&${C}`},"").substr(1):null,Sc=(s,n={})=>{const r=Object.assign({method:s.method||"GET",headers:s.headers},n),l=hc(s.headers)["content-type"]||"";if(typeof s.data=="string")r.body=s.data;else if(l.includes("application/x-www-form-urlencoded")){const p=new URLSearchParams;for(const[k,T]of Object.entries(s.data||{}))p.set(k,T);r.body=p.toString()}else if(l.includes("multipart/form-data")||s.data instanceof FormData){const p=new FormData;if(s.data instanceof FormData)s.data.forEach((T,C)=>{p.append(C,T)});else for(const T of Object.keys(s.data))p.append(T,s.data[T]);r.body=p;const k=new Headers(r.headers);k.delete("content-type"),r.headers=k}else(l.includes("application/json")||typeof s.data=="object")&&(r.body=JSON.stringify(s.data));return r};class bc extends xs{async request(n){const r=Sc(n,n.webFetchExtra),u=yc(n.params,n.shouldEncodeUrlParams),l=u?`${n.url}?${u}`:n.url,p=await fetch(l,r),k=p.headers.get("content-type")||"";let{responseType:T="text"}=p.ok?n:{};k.includes("application/json")&&(T="json");let C,D;switch(T){case"arraybuffer":case"blob":D=await p.blob(),C=await gc(D);break;case"json":C=await p.json();break;default:C=await p.text()}const G={};return p.headers.forEach((O,z)=>{G[z]=O}),{data:C,headers:G,status:p.status,url:p.url}}async get(n){return this.request(Object.assign(Object.assign({},n),{method:"GET"}))}async post(n){return this.request(Object.assign(Object.assign({},n),{method:"POST"}))}async put(n){return this.request(Object.assign(Object.assign({},n),{method:"PUT"}))}async patch(n){return this.request(Object.assign(Object.assign({},n),{method:"PATCH"}))}async delete(n){return this.request(Object.assign(Object.assign({},n),{method:"DELETE"}))}}Jr("CapacitorHttp",{web:()=>new bc});const Ec=Jr("GoogleAuth",{web:()=>y(()=>import("./web-DS2ib2H2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(s=>new s.GoogleAuthWeb)});let wc=class extends e.Component{constructor(r){super(r);Vn(this,"reportError",async(r,u)=>{try{await fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:r.toString(),stack:u.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(l){console.error("Failed to report error:",l)}});Vn(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,u){console.error("Error Boundary caught error:",r,u),this.setState({error:r,errorInfo:u,errorCount:this.state.errorCount+1}),window.gtag&&window.gtag("event","exception",{description:r.toString(),fatal:!1}),this.reportError(r,u)}render(){return this.state.hasError?this.state.errorCount>3?e.createElement("div",{className:"error-boundary critical"},e.createElement("div",{className:"error-content"},e.createElement("h1",null,"‚ö†Ô∏è Critical Error"),e.createElement("p",null,"Multiple errors detected. Please refresh the page."),e.createElement("button",{onClick:()=>window.location.reload(),className:"btn-reload"},"Refresh Page"))):e.createElement("div",{className:"error-boundary"},e.createElement("div",{className:"error-content"},e.createElement("div",{className:"error-icon"},"üòï"),e.createElement("h1",null,"Oops! Something went wrong"),e.createElement("p",{className:"error-message"},this.props.fallbackMessage||"We're sorry for the inconvenience. The error has been reported."),!1,e.createElement("div",{className:"error-actions"},e.createElement("button",{onClick:this.handleReset,className:"btn-retry"},"Try Again"),e.createElement("button",{onClick:()=>window.location.href="/",className:"btn-home"},"Go Home")))):this.props.children}},go=null;function vc(){return go||(go=document.createElement("div"),go.id="toast-container",go.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        `,document.body.appendChild(go)),go}function Go(s,n="info",r=3e3){const u=vc(),l=document.createElement("div");l.className=`toast toast-${n}`;let p="‚ÑπÔ∏è",k="#3b82f6";switch(n){case"success":p="‚úÖ",k="#10b981";break;case"error":p="‚ùå",k="#ef4444";break;case"warning":p="‚ö†Ô∏è",k="#f59e0b";break;case"info":p="‚ÑπÔ∏è",k="#3b82f6";break}l.style.cssText=`
        background: ${k};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 300px;
        max-width: 500px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 14px;
        pointer-events: all;
        animation: slideIn 0.3s ease-out;
        transition: opacity 0.3s ease-out;
    `,l.innerHTML=`
        <span style="font-size: 20px;">${p}</span>
        <span style="flex: 1;">${s}</span>
        <button onclick="this.parentElement.remove()" style="
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
           onmouseout="this.style.background='rgba(255,255,255,0.2)'">√ó</button>
    `,u.appendChild(l);const T=document.createElement("style");T.textContent=`
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    `,document.getElementById("toast-styles")||(T.id="toast-styles",document.head.appendChild(T)),setTimeout(()=>{l.style.animation="slideOut 0.3s ease-out",setTimeout(()=>l.remove(),300)},r)}const $={success:(s,n)=>Go(s,"success",n),error:(s,n)=>Go(s,"error",n),warning:(s,n)=>Go(s,"warning",n),info:(s,n)=>Go(s,"info",n)};typeof window<"u"&&(window.toast=$,window.showToast=Go);const _c=async()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.toLowerCase().includes("electron")||window.location?.protocol==="file:"))return console.log("‚ö†Ô∏è [PWA] Service Worker disabled in Electron (file:// protocol)"),null;if("serviceWorker"in navigator)try{const n=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("‚úÖ Service Worker registered:",n.scope),n.addEventListener("updatefound",()=>{const r=n.installing;console.log("üîÑ New Service Worker installing..."),r.addEventListener("statechange",()=>{r.state==="installed"&&navigator.serviceWorker.controller&&kc()})}),setInterval(()=>{n.update()},3600*1e3),n}catch(n){return console.error("‚ùå Service Worker registration failed:",n),null}},kc=()=>{console.log("‚ÑπÔ∏è Yeni versiyon mevcut - UI g√ºncelleme butonu aktif")},xc=()=>{window.addEventListener("beforeinstallprompt",s=>{s.preventDefault();const n=document.getElementById("install-pwa-button");n&&(n.style.display="block"),console.log("üì± PWA install prompt ready")}),window.addEventListener("appinstalled",()=>{console.log("‚úÖ PWA installed successfully"),window.gtag&&window.gtag("event","pwa_installed",{event_category:"PWA",event_label:"App Installed"})})},Cc=(s,n)=>{const r=()=>{console.log("‚úÖ Network: Online"),s&&s(),as("üü¢ √áevrimi√ßi","success")},u=()=>{console.log("‚ùå Network: Offline"),n&&n(),as("üî¥ √áevrimdƒ±≈üƒ± - Baƒülantƒ± koptu","error")};return window.addEventListener("online",r),window.addEventListener("offline",u),navigator.onLine||u(),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",u)}},as=(s,n="info")=>{const r=document.getElementById("network-banner");r&&r.remove();const u=document.createElement("div");u.id="network-banner",u.textContent=s,u.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        padding: 12px;
        text-align: center;
        color: white;
        font-weight: 600;
        z-index: 9999;
        animation: slideDown 0.3s ease;
        background: ${n==="success"?"#43b581":"#ed4245"};
    `,document.body.appendChild(u),n==="success"&&setTimeout(()=>{u.style.animation="slideUp 0.3s ease",setTimeout(()=>u.remove(),300)},3e3)},Tc=()=>{const s=document.createElement("style");s.textContent=`
        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }
    `,document.head.appendChild(s)};Tc();const Ac=`
/* üé® PAWSCORD Critical CSS - Above the Fold */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #1e1f22;
    color: #dcddde;
    overflow: hidden;
}

/* Loading Screen */
#loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #1e1f22;
    display: flex;
    align-items: center;
    justify-center: center;
    z-index: 9999;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #40444b;
    border-top-color: #5865f2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Main Layout */
#root {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.app-container {
    display: flex;
    width: 100%;
    height: 100%;
}

/* Sidebar */
.sidebar {
    width: 240px;
    background: #2b2d31;
    flex-shrink: 0;
}

/* Chat Area */
.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #313338;
}

/* Message Input - Critical */
.message-input-container {
    padding: 16px;
    background: #383a40;
}

.message-input {
    width: 100%;
    padding: 12px;
    background: #40444b;
    border: none;
    border-radius: 8px;
    color: #dcddde;
    font-size: 15px;
    outline: none;
}

/* Button Base */
button {
    cursor: pointer;
    border: none;
    background: transparent;
    color: inherit;
    font-family: inherit;
}

.btn-primary {
    background: #5865f2;
    color: white;
    padding: 10px 16px;
    border-radius: 4px;
    font-weight: 500;
    transition: background 0.17s ease;
}

.btn-primary:hover {
    background: #4752c4;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #2b2d31;
}

::-webkit-scrollbar-thumb {
    background: #1a1b1e;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #141517;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
}

/* Utilities */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.gap-2 {
    gap: 8px;
}

.gap-4 {
    gap: 16px;
}

.hidden {
    display: none !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: absolute;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .sidebar.open {
        transform: translateX(0);
    }
}
`,Rc=()=>{const s=document.createElement("style");s.id="critical-css",s.textContent=Ac,document.head.insertBefore(s,document.head.firstChild),console.log("‚úÖ Critical CSS inlined")},Pc=s=>new Promise((n,r)=>{const u=document.createElement("link");u.rel="stylesheet",u.href=s,u.onload=()=>{console.log(`‚úÖ Lazy loaded CSS: ${s}`),n()},u.onerror=r,document.head.appendChild(u)}),Ic=()=>{const s=[],n=()=>{s.forEach(r=>{Pc(r)})};"requestIdleCallback"in window?requestIdleCallback(n):setTimeout(n,1)},Lc=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ö° [Performance] Electron'da font preload atlandƒ±");return}console.log("‚ö° [Performance] Font preload atlandƒ± - system fonts kullanƒ±lƒ±yor")},Oc=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ÑπÔ∏è Preload skipped: Electron detected");return}console.log("‚úÖ Key resources preloaded")},ss=()=>{const s=document.getElementById("critical-css");s&&setTimeout(()=>{s.remove(),console.log("üóëÔ∏è Critical CSS removed (full CSS loaded)")},1e3)},Dc=()=>{Rc(),Oc(),Lc(),Ic(),document.readyState==="complete"?ss():window.addEventListener("load",ss)},jn={serverSettings:()=>y(()=>import("./ServerSettingsModal-C_W6pZiv.js"),__vite__mapDeps([8,2,3,6,9,10,11,1,4,5,7])),userProfile:()=>y(()=>import("./UserProfileModal-F8m9j9im.js"),__vite__mapDeps([12,2,3,6,1,4,5,7])),imageModal:()=>y(()=>import("./ImageModal-C99nj2Rh.js"),__vite__mapDeps([13,2,3])),gifPicker:()=>y(()=>import("./GifPicker-BFh2Z4QW.js"),__vite__mapDeps([14,2,3])),stickerPicker:()=>y(()=>import("./StickerPicker-DZkr96jN.js"),__vite__mapDeps([15,2,3])),soundboard:()=>y(()=>import("./SoundboardModal-CTXrgLIr.js"),__vite__mapDeps([16,2,3,6])),watchParty:()=>y(()=>import("./WatchPartyEnhanced-BJhTyLZi.js"),__vite__mapDeps([17,2,3,6])),cinema:()=>y(()=>import("./CinemaModal-CpZ5QCt5.js"),__vite__mapDeps([18,1,2,3,6])),whiteboard:()=>y(()=>import("./WhiteboardModal-CQEWHRXn.js"),__vite__mapDeps([19,2,3,6])),poll:()=>y(()=>import("./PollCreateModal-D2mk3rfB.js"),__vite__mapDeps([20,2,3,6])),codeSnippet:()=>y(()=>import("./CodeSnippetModal-kW_0z6F8.js"),__vite__mapDeps([21,2,3,6])),messageTemplate:()=>y(()=>import("./MessageTemplateModal-cDFcY6D6.js"),__vite__mapDeps([22,2,3,6]))},Cs=()=>{const s=[jn.userProfile,jn.imageModal];setTimeout(()=>{s.forEach(n=>n())},3e3)},Fr=()=>{"requestIdleCallback"in window&&requestIdleCallback(()=>{jn.gifPicker(),jn.stickerPicker()})},Wr={default:{name:"Pawscord Dark",colors:{"--background-primary":"#313338","--background-secondary":"#2b2d31","--background-tertiary":"#1e1f22","--background-accent":"#404249","--text-primary":"#dbdee1","--text-secondary":"#949ba4","--text-muted":"#787f89","--text-link":"#00a8fc","--button-primary":"#5865f2","--button-secondary":"#4e5058","--border-primary":"#1f2023"}},midnight:{name:"Midnight AMOLED",colors:{"--background-primary":"#000000","--background-secondary":"#0a0a0a","--background-tertiary":"#111111","--background-accent":"#222222","--text-primary":"#ffffff","--text-secondary":"#b0b0b0","--text-muted":"#666666","--text-link":"#3ea6ff","--button-primary":"#3ea6ff","--button-secondary":"#333333","--border-primary":"#333333"}},dracula:{name:"Dracula",colors:{"--background-primary":"#282a36","--background-secondary":"#44475a","--background-tertiary":"#6272a4","--background-accent":"#44475a","--text-primary":"#f8f8f2","--text-secondary":"#bfbfbf","--text-muted":"#6272a4","--text-link":"#8be9fd","--button-primary":"#bd93f9","--button-secondary":"#44475a","--border-primary":"#44475a"}},ocean:{name:"Deep Ocean",colors:{"--background-primary":"#0f172a","--background-secondary":"#1e293b","--background-tertiary":"#334155","--background-accent":"#334155","--text-primary":"#e2e8f0","--text-secondary":"#94a3b8","--text-muted":"#64748b","--text-link":"#38bdf8","--button-primary":"#0ea5e9","--button-secondary":"#334155","--border-primary":"#1e293b"}},forest:{name:"Enchanted Forest",colors:{"--background-primary":"#1a2f1a","--background-secondary":"#243b24","--background-tertiary":"#2f4b2f","--background-accent":"#3a5a3a","--text-primary":"#e0ffe0","--text-secondary":"#a0cca0","--text-muted":"#608060","--text-link":"#4caf50","--button-primary":"#4caf50","--button-secondary":"#2f4b2f","--border-primary":"#2f4b2f"}},matrix:{name:"The Matrix",colors:{"--background-primary":"#0d0d0d","--background-secondary":"#121212","--background-tertiary":"#1a1a1a","--background-accent":"#003b00","--text-primary":"#00ff41","--text-secondary":"#008f11","--text-muted":"#003b00","--text-link":"#00ff41","--button-primary":"#008f11","--button-secondary":"#003b00","--border-primary":"#003b00"}},sunset:{name:"Sunset Vibes",colors:{"--background-primary":"#2d1b2e","--background-secondary":"#442740","--background-tertiary":"#5a3450","--background-accent":"#734361","--text-primary":"#ffccaa","--text-secondary":"#ff9e7d","--text-muted":"#b05963","--text-link":"#ffbd69","--button-primary":"#ff6b6b","--button-secondary":"#5a3450","--border-primary":"#5a3450"}}},Mc=s=>{const n=Wr[s]||Wr.default,r=document.documentElement;Object.entries(n.colors).forEach(([u,l])=>{r.style.setProperty(u,l)}),localStorage.setItem("pawscord_theme",s)},$c=()=>{const s=localStorage.getItem("pawscord_theme");return s&&Wr[s]?(Mc(s),s):"default"},Ce=dc((s,n)=>({messages:[],encryptionKeys:{},activeChat:{type:"welcome",id:"welcome",targetUser:null},unreadCounts:{},typingUsers:[],onlineUsers:[],voiceUsers:{},currentPermissions:{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1},setActiveChat:(r,u,l=null)=>{console.log("üîÑ [Store] setActiveChat called:",{type:r,id:u,targetUser:l}),console.log("üîÑ [Store] Current messages count:",n().messages.length),s({activeChat:{type:r,id:u,targetUser:l}});const p=r==="room"?`room-${u}`:`dm-${u}`;s(k=>{const T={...k.unreadCounts};return delete T[p],{unreadCounts:T}})},addMessage:r=>s(u=>!r||typeof r!="object"||!r.id?(console.warn("‚ö†Ô∏è [Store] Invalid message rejected:",r),u):r.temp_id&&u.messages.some(p=>p.temp_id===r.temp_id)?{messages:u.messages.map(p=>p.temp_id===r.temp_id?r:p)}:u.messages.some(l=>l.id===r.id)?u:{messages:[...u.messages,r]}),updateMessage:(r,u)=>s(l=>({messages:l.messages.map(p=>p.id===r?{...p,...u}:p)})),setMessages:r=>s(u=>{const l=typeof r=="function"?r(u.messages):r;return{messages:Array.isArray(l)?l.filter(k=>k&&typeof k=="object"&&k.id):[]}}),prependMessages:r=>s(u=>({messages:[...r,...u.messages]})),incrementUnread:r=>s(u=>({unreadCounts:{...u.unreadCounts,[r]:(u.unreadCounts[r]||0)+1}})),setOnlineUsers:r=>s({onlineUsers:r}),setTypingUser:(r,u)=>s(l=>u?{typingUsers:l.typingUsers.includes(r)?l.typingUsers:[...l.typingUsers,r]}:{typingUsers:l.typingUsers.filter(p=>p!==r)}),setVoiceUsers:r=>s({voiceUsers:r}),setEncryptionKey:(r,u)=>s(l=>({encryptionKeys:{...l.encryptionKeys,[r]:u}})),setPermissions:r=>s({currentPermissions:r||{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1}})})),Gn="ENC::",zc=(s,n)=>{if(!s||!n)return s;try{const r=Br.AES.encrypt(s,n).toString();return Gn+r}catch(r){return console.error("≈ûifreleme hatasƒ±:",r),s}},Af=(s,n)=>{if(!s||!s.startsWith(Gn)||!n)return s;try{const r=s.replace(Gn,""),l=Br.AES.decrypt(r,n).toString(Br.enc.Utf8);return l||"üîí ≈ûifreli Mesaj (Anahtar Yanlƒ±≈ü)"}catch(r){return console.error("≈ûifre √ß√∂zme hatasƒ±:",r),"üîí √á√∂z√ºlemedi"}},Rf=s=>s&&typeof s=="string"&&s.startsWith(Gn),Xe={mobile:768,tablet:1024,desktop:1920,ultrawide:2560},Vc=()=>{const[s,n]=o.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080});o.useEffect(()=>{if(typeof window>"u")return;let l;const p=()=>{clearTimeout(l),l=setTimeout(()=>{n({width:window.innerWidth,height:window.innerHeight})},150)};return p(),window.addEventListener("resize",p),window.addEventListener("orientationchange",p),()=>{clearTimeout(l),window.removeEventListener("resize",p),window.removeEventListener("orientationchange",p)}},[]);const{width:r,height:u}=s;return{isMobile:r<=Xe.mobile,isTablet:r>Xe.mobile&&r<=Xe.tablet,isDesktop:r>Xe.tablet&&r<=Xe.desktop,isUltrawide:r>Xe.desktop,width:r,height:u,orientation:u>r?"portrait":"landscape",isSmallScreen:r<=Xe.mobile,isMediumScreen:r>Xe.mobile&&r<=Xe.tablet,isLargeScreen:r>Xe.tablet,isTouchDevice:typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0),breakpoints:Xe}},Uc=(s,n,r)=>o.useMemo(()=>{if(!s||!Array.isArray(s))return[];let l=s;if(n&&typeof n=="string"&&n.trim()){const p=n.toLowerCase();l=l.filter(k=>k.content?.toLowerCase().includes(p)||k.user?.username?.toLowerCase().includes(p))}return l.sort((p,k)=>{const T=new Date(p.created_at||p.timestamp),C=new Date(k.created_at||k.timestamp);return T-C})},[s,n]),Bc=s=>o.useMemo(()=>!s||!Array.isArray(s)?[]:s.filter(n=>n.is_online||n.online),[s]),Zr=()=>{if(window.Capacitor?.isNativePlatform?.()||window.location.protocol==="capacitor:"||window.location.protocol==="ionic:")return console.log("üì± Capacitor detected - using production API"),"https://api.pawscord.com";const n=window.navigator?.userAgent?.toLowerCase().includes("electron"),r=window.location.hostname.includes("pawscord.com"),u=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";return n||r?"https://api.pawscord.com":u?"http://localhost:8888":"https://api.pawscord.com"},Nc=Zr(),Fc=()=>Zr().replace("/api","/media"),Wc=Zr,Pf=Fc,jc=`${Nc}/api`,Gc=()=>{let s=sessionStorage.getItem("analytics_session_id");return s||(s=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("analytics_session_id",s)),s},Hc=()=>{const s=Es();o.useEffect(()=>{(async()=>{try{const r=Gc();await fetch(`${jc}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:s.pathname,session_id:r,referrer:document.referrer,timestamp:new Date().toISOString()})}),console.log("üìä Page tracked:",s.pathname)}catch(r){console.error("Analytics tracking error:",r)}})()},[s.pathname])},Kc=(s,n)=>{const r=o.useRef(null);return o.useCallback((...u)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{s(...u)},n)},[s,n])},qc=(s,n)=>{const r=o.useRef(Date.now());return o.useCallback((...u)=>{const l=Date.now();l-r.current>=n&&(s(...u),r.current=l)},[s,n])},If=s=>{const n=o.useRef(0),r=o.useRef(0);o.useEffect(()=>{const u=performance.now();return n.current+=1,()=>{const p=performance.now()-u;r.current+=p,n.current%10===0&&console.log(`üéØ ${s} Performance Stats:`,`
  Total Renders: ${n.current}`,`
  Average Time: ${(r.current/n.current).toFixed(2)}ms`,`
  Last Render: ${p.toFixed(2)}ms`)}})},Yc="192.168.68.53",Jc="8888",Xr=typeof window>"u"?!1:!!(typeof window.require=="function"||typeof process<"u"&&process.versions&&process.versions.electron||navigator.userAgent.toLowerCase().includes("electron")||window.location.protocol==="file:"),Ts=Eo.isNativePlatform(),Et=Ts||Xr||!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("192.168.")?"https://api.pawscord.com":`http://${Yc}:${Jc}`,et=`${Et}/api`;Ts||Xr||window.location.hostname.includes("localhost");const Hn=Et.startsWith("https")?"wss":"ws",Kn=Et.replace(/^https?:\/\//,""),As="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",Rs=o.createContext(null),Zc=Et,Xc=({children:s})=>{const n=localStorage.getItem("access_token"),r=(()=>{if(!n)return!1;try{return Zt(n).exp>Date.now()/1e3-300}catch{return!1}})(),[u,l]=o.useState(r?{username:localStorage.getItem("chat_username")||""}:null),[p,k]=o.useState(n),[T,C]=o.useState(r),[D,G]=o.useState(!1),O=o.useRef(null),z=o.useCallback(async()=>{const U=localStorage.getItem("refresh_token");if(!U)return console.warn("‚ö†Ô∏è [Auth] No refresh token available"),V(),!1;try{console.log("üîÑ [Auth] Refreshing access token...");const j=await fetch(`${Zc}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:U})});if(j.ok){const q=await j.json();localStorage.setItem("access_token",q.access),q.refresh&&localStorage.setItem("refresh_token",q.refresh);const de=Zt(q.access);return k(q.access),l({username:de.username}),C(!0),console.log("‚úÖ [Auth] Token refreshed successfully"),J(q.access),!0}else return console.error("‚ùå [Auth] Token refresh failed:",j.status),V(),!1}catch(j){return console.error("‚ùå [Auth] Token refresh error:",j),V(),!1}},[]),J=o.useCallback(U=>{O.current&&clearTimeout(O.current);try{const j=Zt(U),q=Date.now()/1e3,de=j.exp-q,oe=Math.max((de-300)*1e3,6e4);console.log(`‚è∞ [Auth] Token will refresh in ${Math.round(oe/1e3/60)} minutes`),O.current=setTimeout(()=>{z()},oe)}catch(j){console.error("‚ùå [Auth] Failed to schedule token refresh:",j)}},[z]);o.useEffect(()=>{const U=localStorage.getItem("access_token");if(U)try{const j=Zt(U),q=Date.now()/1e3,de=300,oe=j.exp>q-de;console.log("üîê [Auth] Token check:",{exp:j.exp,currentTime:q,gracePeriod:de,isValid:oe,username:j.username}),oe?(k(U),l({username:j.username}),C(!0),localStorage.setItem("chat_username",j.username),J(U),console.log("‚úÖ [Auth] User authenticated:",j.username)):(console.warn("‚ö†Ô∏è [Auth] Token expired, attempting refresh..."),z())}catch(j){console.error("‚ùå [Auth] Invalid token:",j),V()}else console.log("‚ÑπÔ∏è [Auth] No token found");return()=>{O.current&&clearTimeout(O.current)}},[J,z]);const H=(U,j)=>{console.log("üîì [Auth] Login called");try{localStorage.setItem("access_token",U),localStorage.setItem("refresh_token",j);const q=Zt(U);localStorage.setItem("chat_username",q.username),console.log("‚úÖ [Auth] Login successful, user:",q.username),k(U),l({username:q.username}),C(!0),J(U)}catch(q){console.error("‚ùå [Auth] Login failed:",q),V()}},V=o.useCallback(()=>{O.current&&clearTimeout(O.current),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("chat_username"),k(null),l(null),C(!1)},[]);return e.createElement(Rs.Provider,{value:{user:u,token:p,isAuthenticated:T,login:H,logout:V,isLoading:D,refreshAccessToken:z}},s)},wo=()=>o.useContext(Rs),Re={log:(...s)=>{},warn:(...s)=>{},error:(...s)=>{console.error(...s)},debug:(...s)=>{},voice:(...s)=>{},webrtc:(...s)=>{},signal:(...s)=>{},audio:(...s)=>{}};class Qc{constructor(){this.audioContext=null,this.masterGain=null,this.spatialNodes={},this.listenerPosition={x:0,y:0,z:0},this.initialized=!1}async initialize(){if(!this.initialized)try{const n=window.AudioContext||window.webkitAudioContext;this.audioContext=new n,this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.audioContext.destination),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.setupListener(),this.initialized=!0,console.log("üéß Spatial Audio Engine initialized")}catch(n){throw console.error("Failed to initialize spatial audio:",n),n}}setupListener(){const n=this.audioContext.listener;n.positionX?(n.positionX.value=this.listenerPosition.x,n.positionY.value=this.listenerPosition.y,n.positionZ.value=this.listenerPosition.z):n.setPosition(this.listenerPosition.x,this.listenerPosition.y,this.listenerPosition.z),n.forwardX?(n.forwardX.value=0,n.forwardY.value=0,n.forwardZ.value=-1,n.upX.value=0,n.upY.value=1,n.upZ.value=0):n.setOrientation(0,0,-1,0,1,0)}addUser(n,r,u={x:0,y:0,z:-1}){if(!this.initialized)return console.warn("Spatial audio not initialized"),null;this.spatialNodes[n]&&this.removeUser(n);try{const l=this.audioContext.createMediaStreamSource(r),p=this.audioContext.createPanner();p.panningModel="HRTF",p.distanceModel="inverse",p.refDistance=1,p.maxDistance=1e4,p.rolloffFactor=1.5,p.coneInnerAngle=360,p.coneOuterAngle=360,p.coneOuterGain=0,this.setUserPosition(n,u,p);const k=this.audioContext.createGain();k.gain.value=1;const T=this.audioContext.createAnalyser();return T.fftSize=256,T.smoothingTimeConstant=.8,l.connect(T),T.connect(p),p.connect(k),k.connect(this.masterGain),this.spatialNodes[n]={source:l,panner:p,gain:k,analyser:T,position:u,audioElement:null},console.log(`üéß Added spatial audio for ${n} at position`,u),this.spatialNodes[n]}catch(l){return console.error(`Failed to add spatial audio for ${n}:`,l),null}}setUserPosition(n,r,u=null){const l=u||this.spatialNodes[n]?.panner;l&&(l.positionX?(l.positionX.setValueAtTime(r.x,this.audioContext.currentTime),l.positionY.setValueAtTime(r.y,this.audioContext.currentTime),l.positionZ.setValueAtTime(r.z,this.audioContext.currentTime)):l.setPosition(r.x,r.y,r.z),this.spatialNodes[n]&&(this.spatialNodes[n].position=r))}setUserVolume(n,r){const u=this.spatialNodes[n];if(!u)return;const l=Math.max(0,Math.min(1,r));u.gain.gain.setValueAtTime(l,this.audioContext.currentTime)}getVoiceActivity(n){const r=this.spatialNodes[n];if(!r)return 0;const u=r.analyser,l=new Uint8Array(u.frequencyBinCount);u.getByteFrequencyData(l);const k=l.reduce((T,C)=>T+C,0)/l.length;return Math.round(k/255*100)}removeUser(n){const r=this.spatialNodes[n];if(r)try{r.source.disconnect(),r.analyser.disconnect(),r.panner.disconnect(),r.gain.disconnect(),delete this.spatialNodes[n],console.log(`üéß Removed spatial audio for ${n}`)}catch(u){console.error(`Error removing spatial audio for ${n}:`,u)}}updateListenerPosition(n){this.listenerPosition=n,this.setupListener()}setMasterVolume(n){if(!this.masterGain)return;const r=Math.max(0,Math.min(1,n));this.masterGain.gain.setValueAtTime(r,this.audioContext.currentTime)}setUserMuted(n,r){this.setUserVolume(n,r?0:1)}destroy(){Object.keys(this.spatialNodes).forEach(n=>{this.removeUser(n)}),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.initialized=!1,console.log("üéß Spatial Audio Engine destroyed")}getUserDistance(n){const r=this.spatialNodes[n];if(!r)return 1/0;const u=r.position,l=this.listenerPosition;return Math.sqrt(Math.pow(u.x-l.x,2)+Math.pow(u.y-l.y,2)+Math.pow(u.z-l.z,2))}arrangeUsersInCircle(n,r=3){const u={},l=2*Math.PI/n.length;return n.forEach((p,k)=>{const T=l*k,C={x:Math.cos(T)*r,y:0,z:Math.sin(T)*r};u[p]=C,this.setUserPosition(p,C)}),u}}const jo=new Qc,ed=Et;let Yt=!1,jr=[];const is=s=>{jr.push(s)},ls=s=>{jr.forEach(n=>n(s)),jr=[]},td=s=>{if(!s)return!0;try{const n=Zt(s),r=Date.now()/1e3;return n.exp<r+30}catch{return!0}},cs=async()=>{const s=localStorage.getItem("refresh_token");if(!s)throw new Error("No refresh token available");const n=await fetch(`${ed}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:s})});if(!n.ok)throw new Error("Token refresh failed");const r=await n.json();return localStorage.setItem("access_token",r.access),r.refresh&&localStorage.setItem("refresh_token",r.refresh),console.log("‚úÖ [AuthFetch] Token refreshed successfully"),r.access},Gr=async(s,n={})=>{let r=localStorage.getItem("access_token");if(td(r))if(console.log("‚è∞ [AuthFetch] Token expired, refreshing before request..."),Yt)r=await new Promise(p=>{is(k=>p(k))});else{Yt=!0;try{r=await cs(),ls(r)}catch(p){throw console.error("‚ùå [AuthFetch] Token refresh failed:",p),Yt=!1,window.dispatchEvent(new CustomEvent("auth:logout")),p}finally{Yt=!1}}const u={...n.headers,Authorization:`Bearer ${r}`};let l=await fetch(s,{...n,headers:u});if(l.status===401)if(console.warn("‚ö†Ô∏è [AuthFetch] Got 401, attempting token refresh..."),Yt)r=await new Promise(p=>{is(k=>p(k))}),u.Authorization=`Bearer ${r}`,l=await fetch(s,{...n,headers:u});else{Yt=!0;try{r=await cs(),ls(r),u.Authorization=`Bearer ${r}`,l=await fetch(s,{...n,headers:u})}catch(p){throw console.error("‚ùå [AuthFetch] Retry refresh failed:",p),window.dispatchEvent(new CustomEvent("auth:logout")),p}finally{Yt=!1}}return l},Ps=o.createContext(null),Jt=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.services.mozilla.com:3478"},{urls:"stun:stun.stunprotocol.org:3478"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}];let Hr={iceServers:Jt,iceCandidatePoolSize:10,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};const Un=s=>{Hr={...Hr,iceServers:s}};console.log("[VoiceContext] üéØ isElectron:",Xr,"API_URL:",Et,"WS_PROTOCOL:",Hn,"API_HOST:",Kn);const od=({children:s})=>{const{user:n,token:r}=wo(),u=n?.username,[l,p]=o.useState(!1),[k,T]=o.useState(!1),[C,D]=o.useState(null),[G,O]=o.useState(!1),[z,J]=o.useState(!1),[H,V]=o.useState(!1),[U,j]=o.useState(!1),[q,de]=o.useState(!1),[oe,Z]=o.useState(!1),[ae,ue]=o.useState(0),[Y,pe]=o.useState(null),[Ee,Ue]=o.useState(50),[Q,Se]=o.useState(null),[Be,Me]=o.useState(null),[wt,He]=o.useState(null),[Te,dt]=o.useState({}),[Yo,d]=o.useState([]),[vo,Xt]=o.useState(null),[qn,Jo]=o.useState({isActive:!1,url:"https://www.youtube.com/watch?v=jfKfPfyJRdk",playing:!1,time:0,lastSyncAction:null,timestamp:0}),[ce,we]=o.useState({gameType:"rps",moves:{},result:null,players:[],currentTurn:null}),[Zo,Xo]=o.useState({}),[Yn,Jn]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_noise_gate"))||-50}catch{return-50}}),[Zn,Xn]=o.useState(()=>{try{return localStorage.getItem("pawscord_noise_gate_enabled")!=="false"}catch{return!0}}),[Qo,en]=o.useState({local:new Uint8Array(128),remote:{}}),[vt,Qn]=o.useState(()=>{try{return localStorage.getItem("pawscord_visualizer")==="true"}catch{return!1}}),[Qt,er]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("pawscord_user_volumes"))||{}}catch{return{}}}),[tn,Qr]=o.useState(new Set),[ut,on]=o.useState(()=>{try{return localStorage.getItem("pawscord_spatial_audio")==="true"}catch{return!1}}),[Dt,tr]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_vad_sensitivity"))||45}catch{return 45}}),[Mt,or]=o.useState(()=>{try{const i=localStorage.getItem("pawscord_noise_suppression");return i===null?!0:i==="true"}catch{return!0}}),[nn,nr]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"medium"}catch{return"medium"}}),[ge,I]=o.useState(()=>{try{return localStorage.getItem("pawscord_screen_quality")||"1080p"}catch{return"1080p"}}),[eo,_o]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_screen_fps"))||30}catch{return 30}}),[ko,rr]=o.useState(()=>{try{return localStorage.getItem("pawscord_system_audio")!=="false"}catch{return!1}}),[We,to]=o.useState(()=>{try{return localStorage.getItem("pawscord_ptt_mode")==="true"}catch{return!1}}),[ee,rn]=o.useState(()=>{try{return localStorage.getItem("pawscord_ptt_key")||"Space"}catch{return"Space"}}),[an,$t]=o.useState(!1),[zt,xo]=o.useState(Jt),[sn,Ne]=o.useState(!1),[ln,mt]=o.useState(0),[Co,_t]=o.useState(1e3),tt=o.useRef(null),oo=o.useRef(null);o.useRef(null);const To=o.useCallback(async()=>{if(!r){console.log("üßä [RTC] No token, using STUN only"),xo(Jt),Un(Jt);return}try{const i=await Gr(`${Et}/api/voice/turn-credentials/`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw i.status===401||i.status===403?console.warn("üßä [RTC] Auth failed, using STUN only"):console.warn(`üßä [RTC] TURN fetch failed (${i.status}), using STUN only`),new Error(`TURN fetch failed ${i.status}`);const f=await i.json(),g=[...Jt,...f?.iceServers||[]];xo(g),Un(g),console.log("üßä [RTC] ICE servers updated with TURN credentials:",g.length,"servers")}catch(i){console.warn("üßä [RTC] Using STUN-only mode:",i.message),xo(Jt),Un(Jt)}},[r]);o.useEffect(()=>{To()},[To]);const F=o.useRef(null),se=o.useRef({}),ft=o.useRef(null),ve=o.useRef(null),B=o.useRef(null),_e=o.useRef(null),ne=o.useRef(null),pt=o.useRef([]),ot=o.useRef(null),nt=o.useRef(null),Fe=o.useRef(!1),rt=o.useRef(!1),Ke=o.useRef(null),Vt=o.useRef(null),Ao=o.useRef(null),ke=o.useRef(null);o.useEffect(()=>{localStorage.setItem("pawscord_user_volumes",JSON.stringify(Qt))},[Qt]);const Ro=o.useCallback((i,f)=>{er(g=>({...g,[i]:Math.max(0,Math.min(100,f))}))},[]);o.useEffect(()=>{B.current=Q},[Q]),o.useEffect(()=>{_e.current=Be},[Be]),o.useEffect(()=>{ne.current=wt},[wt]),o.useEffect(()=>{if(!Q||!l||G){de(!1);return}if(!ve.current){const K=window.AudioContext||window.webkitAudioContext;ve.current=new K,console.log("üéµ [Performance] Global AudioContext created (reused for all users)")}const i=ve.current,f=i.createAnalyser();f.fftSize=2048,f.smoothingTimeConstant=.85;const g=f.frequencyBinCount,v=new Uint8Array(g),x=i.createMediaStreamSource(Q);x.connect(f);let E=null;const b=Dt,S=150;let A=null;const M=()=>{f.getByteFrequencyData(v);const K=v.slice(10,100);K.reduce((me,$e)=>me+$e,0)/K.length>b&&(de(!0),E&&clearTimeout(E),E=setTimeout(()=>de(!1),S)),l&&!G&&(A=requestAnimationFrame(M))};return M(),()=>{E&&clearTimeout(E),A&&cancelAnimationFrame(A),x.disconnect()}},[Q,l,G,Dt]);const qe=o.useCallback(()=>{if(!ft.current){const i=window.AudioContext||window.webkitAudioContext;ft.current=new i}ft.current.state==="suspended"&&ft.current.resume()},[]),ar=o.useCallback(async()=>{const i=!ut;if(i)try{await jo.initialize(),Object.keys(Te).forEach((f,g)=>{const v=Te[f],x=f.replace("_camera","").replace("_screen","");if(!f.includes("_camera")&&!f.includes("_screen")){const E=g/Object.keys(Te).length*2*Math.PI,b={x:Math.cos(E)*3,y:0,z:Math.sin(E)*3};jo.addUser(x,v,b),console.log(`üéß [Spatial] Added ${x} at angle ${(E*180/Math.PI).toFixed(0)}¬∞`)}}),console.log("üéß [Spatial Audio] ENABLED - 3D audio active!")}catch(f){console.error("Failed to enable spatial audio:",f),$.warning("Spatial Audio ba≈ülatƒ±lamadƒ±. Tarayƒ±cƒ±nƒ±z desteklemiyor olabilir.");return}else jo.destroy(),console.log("üéß [Spatial Audio] DISABLED - Normal stereo audio");on(i),localStorage.setItem("pawscord_spatial_audio",i.toString())},[ut,Te]),cn=o.useCallback(i=>{const f=Math.max(20,Math.min(80,i));tr(f),localStorage.setItem("pawscord_vad_sensitivity",f.toString()),console.log(`üéöÔ∏è [VAD] Sensitivity updated: ${f}`)},[]),no=o.useCallback(async()=>{const i=!Mt;if(or(i),localStorage.setItem("pawscord_noise_suppression",i.toString()),Q){const f=Q.getAudioTracks()[0];if(f&&f.applyConstraints)try{await f.applyConstraints({noiseSuppression:i,echoCancellation:!0,autoGainControl:!0}),console.log(`üéõÔ∏è [Noise Suppression] ${i?"ENABLED":"DISABLED"}`)}catch(g){console.warn("[Noise] Failed to apply, trying fallback getUserMedia:",g);try{const x=(await navigator.mediaDevices.getUserMedia({audio:{noiseSuppression:i,echoCancellation:!0,autoGainControl:!0,googHighpassFilter:!0,googNoiseSuppression:i,googNoiseSuppression2:i,googEchoCancellation:!0,googAutoGainControl:!0,googTypingNoiseDetection:!0,sampleRate:{ideal:48e3},latency:{ideal:.01},channelCount:{ideal:1}}})).getAudioTracks()[0],E=new MediaStream([x]);Se(E),B.current=E,console.log("[Noise] Enhanced fallback stream acquired")}catch(v){console.error("[Noise] Fallback failed:",v)}}}},[Mt,Q]),dn=o.useCallback(i=>{const g=["low","medium","high","aggressive"].includes(i)?i:"high";nr(g);try{const v=JSON.parse(localStorage.getItem("voice_settings")||"{}");v.audio={...v.audio,noiseSuppressionLevel:g},localStorage.setItem("voice_settings",JSON.stringify(v))}catch(v){console.error("[Noise Level] Storage error:",v)}console.log(`üéõÔ∏è [Noise Level] Updated to: ${g}`)},[]),sr=o.useCallback(i=>{rr(i),localStorage.setItem("pawscord_system_audio",i.toString()),console.log(`üîä [System Audio] ${i?"ENABLED":"DISABLED"}`)},[]),un=o.useCallback(()=>{const i=!We;to(i),localStorage.setItem("pawscord_ptt_mode",i.toString()),i?(console.log("üéôÔ∏è [PTT] Mode enabled, VAD disabled"),B.current&&B.current.getAudioTracks().forEach(f=>{f.enabled=!1}),O(!0)):(console.log("üéôÔ∏è [PTT] Mode disabled, VAD enabled"),B.current&&B.current.getAudioTracks().forEach(f=>{f.enabled=!0}),O(!1))},[We]),ir=o.useCallback(i=>{rn(i),localStorage.setItem("pawscord_ptt_key",i),console.log(`‚å®Ô∏è [PTT] Key updated to: ${i}`)},[]);o.useEffect(()=>{if(!We||!l)return;const i=g=>{const v=g.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||g.code===ee&&!g.repeat&&($t(!0),B.current&&B.current.getAudioTracks().forEach(x=>{x.enabled=!0}),console.log("üéôÔ∏è [PTT] Key pressed, mic ON"))},f=g=>{g.code===ee&&($t(!1),B.current&&B.current.getAudioTracks().forEach(v=>{v.enabled=!1}),console.log("üéôÔ∏è [PTT] Key released, mic OFF"))};return window.addEventListener("keydown",i),window.addEventListener("keyup",f),()=>{window.removeEventListener("keydown",i),window.removeEventListener("keyup",f)}},[We,l,ee]);const Ye=o.useCallback(i=>{I(i),localStorage.setItem("pawscord_screen_quality",i),console.log(`üì∫ [Screen Quality] Updated to: ${i}`)},[]),lr=o.useCallback(i=>{const f=parseInt(i);_o(f),localStorage.setItem("pawscord_screen_fps",f.toString()),console.log(`üé¨ [Screen FPS] Updated to: ${f}`)},[]);o.useEffect(()=>{ut&&Object.keys(Te).forEach((i,f)=>{const g=Te[i],v=i.replace("_camera","").replace("_screen","");if(!i.includes("_camera")&&!i.includes("_screen")&&!jo.spatialNodes[v]){const x=f/Object.keys(Te).length*2*Math.PI,E={x:Math.cos(x)*3,y:0,z:Math.sin(x)*3};jo.addUser(v,g,E),console.log(`üéß [Spatial] Auto-added ${v}`)}})},[Te,ut]),o.useCallback(async i=>{try{const f=i.getAudioTracks();if(f.length===0)return i;const g=f[0],v={echoCancellation:{exact:!0},noiseSuppression:{exact:!0},autoGainControl:{exact:!0},googEchoCancellation:{exact:!0},googAutoGainControl:{exact:!0},googNoiseSuppression:{exact:!0},googHighpassFilter:{exact:!0},googTypingNoiseDetection:{exact:!0},googAudioMirroring:!1,googAutoGainControl2:{exact:!0},echoCancellationType:"system"};if(g.applyConstraints)try{await g.applyConstraints(v),Re.audio("üéØ ADVANCED noise suppression enabled")}catch{await g.applyConstraints({echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),Re.audio("‚úÖ Basic noise suppression enabled (fallback)")}return i}catch{return i}},[]);const Po=o.useCallback(i=>{try{const g=JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"high",v={low:{gateThreshold:-70,compressorThreshold:-15,compressorRatio:2,highPassFreq:50,lowPassFreq:14e3,gateRelease:.3,speechThreshold:20},medium:{gateThreshold:-60,compressorThreshold:-20,compressorRatio:3,highPassFreq:80,lowPassFreq:12e3,gateRelease:.25,speechThreshold:25},high:{gateThreshold:-50,compressorThreshold:-25,compressorRatio:4,highPassFreq:100,lowPassFreq:1e4,gateRelease:.2,speechThreshold:30},aggressive:{gateThreshold:-45,compressorThreshold:-30,compressorRatio:6,highPassFreq:120,lowPassFreq:8e3,gateRelease:.15,speechThreshold:35}},x=v[g]||v.high;if(console.log(`üîä [Audio] Noise suppression level: ${g}`,x),!ve.current){const Gt=window.AudioContext||window.webkitAudioContext;ve.current=new Gt({sampleRate:48e3,latencyHint:"interactive"}),console.log("üéµ [Performance] Global AudioContext created (48kHz, interactive mode)")}const E=ve.current;E.state==="suspended"&&E.resume().then(()=>{console.log("üéµ [Audio] AudioContext resumed from suspended state")});const b=E.createMediaStreamSource(i),S=E.createGain();let A=!0;const M=x.gateThreshold,K=.005,re=x.gateRelease,me=E.createDynamicsCompressor();me.threshold.value=x.compressorThreshold,me.knee.value=30,me.ratio.value=Math.min(x.compressorRatio,4),me.attack.value=.003,me.release.value=.15;const $e=E.createBiquadFilter();$e.type="highpass",$e.frequency.value=x.highPassFreq,$e.Q.value=.707;const gt=E.createBiquadFilter();gt.type="lowpass",gt.frequency.value=x.lowPassFreq,gt.Q.value=.707;const Je=E.createBiquadFilter();Je.type="notch",Je.frequency.value=50,Je.Q.value=10;const jt=E.createBiquadFilter();jt.type="peaking",jt.frequency.value=6e3,jt.Q.value=1,jt.gain.value=-3;const Ct=E.createAnalyser();Ct.fftSize=2048,Ct.smoothingTimeConstant=.85;const Tt=new Uint8Array(Ct.frequencyBinCount);let hn=new Float32Array(Ct.frequencyBinCount),yn=!0,Mo=0;const ta=()=>{if(Ct.getByteFrequencyData(Tt),Tt.reduce((lt,$o)=>lt+$o)/Tt.length<20){if(Mo++,Mo>10)for(let lt=0;lt<Tt.length;lt++)hn[lt]=Math.max(hn[lt],Tt[lt])}else Mo=0;yn&&Mo>50&&(yn=!1,console.log("üéØ [Audio] Noise profile learned"))},oa=x.speechThreshold||25,na=setInterval(()=>{Ct.getByteFrequencyData(Tt);const Gt=Tt.slice(8,120),$o=Gt.reduce((hr,yr)=>hr+yr)/Gt.length-(hn[50]||0),bn=E.currentTime;$o>oa?A||(S.gain.setTargetAtTime(1,bn,K),A=!0):A&&(S.gain.setTargetAtTime(0,bn,re),A=!1),(yn||Math.random()<.01)&&ta()},30);b.connect($e),$e.connect(Je),Je.connect(gt),gt.connect(jt),jt.connect(me),me.connect(S),S.connect(Ct);const Sn=E.createMediaStreamDestination();return S.connect(Sn),Sn.stream.addEventListener("inactive",()=>{clearInterval(na),console.log("üéöÔ∏è [Audio] Filter chain cleaned up")}),console.log("üéöÔ∏è [Audio] Professional filters applied: Notch(50Hz) + De-Esser + Compressor + Noise Gate"),Sn.stream}catch(f){return console.error("‚ùå [Audio] Could not apply professional filters:",f),i}},[]),Pe=o.useCallback(i=>{F.current?.readyState===WebSocket.OPEN?(Re.signal(`Sending ${i.type} to ${i.receiver_username||"BROADCAST"}`),F.current.send(JSON.stringify({...i,sender_username:u}))):Re.warn("[Signal] WS not ready, cannot send:",i.type)},[u]),Ut=o.useCallback((i,f)=>{try{const v=i.getSenders().find(S=>S.track?.kind==="video");if(!v){console.log("[Bandwidth] No video sender found, skipping adjustment");return}const x=v.getParameters();(!x.encodings||x.encodings.length===0)&&(x.encodings=[{}]);const E={low:{maxBitrate:3e5,maxFramerate:15},medium:{maxBitrate:8e5,maxFramerate:24},high:{maxBitrate:25e5,maxFramerate:30}},b=E[f]||E.medium;x.encodings[0].maxBitrate=b.maxBitrate,x.encodings[0].maxFramerate=b.maxFramerate,v.setParameters(x).then(()=>{console.log(`‚úÖ [Bandwidth] Video quality set to ${f.toUpperCase()} (${b.maxBitrate/1e3}kbps, ${b.maxFramerate}fps)`)}).catch(S=>{console.warn("[Bandwidth] Failed to set parameters:",S)})}catch(g){console.warn("[Bandwidth] Error adjusting bandwidth:",g)}},[]),Bt=o.useCallback((i,f)=>{const{track:g}=f;Re.webrtc(`Track Received from ${i}:`,g.kind,g.id,"label:",g.label,"hint:",g.contentHint);const v=(g.label||"").toLowerCase(),x=v.includes("screen")||v.includes("window")||v.includes("monitor")||v.includes("display")||v.includes("tab")||g.contentHint==="detail",E=g.kind==="video"&&x?`${i}_screen`:g.kind==="video"?`${i}_camera`:i;if(console.log(`üìπ [WebRTC] Detected ${x?"SCREEN":"CAMERA"} track from ${i}, key: ${E}`),dt(b=>{const S=b[E];if(S){if(!S.getTracks().some(M=>M.id===g.id)){S.addTrack(g);const M=new MediaStream(S.getTracks());return console.log(`[WebRTC] Added track to existing stream: ${E}`),{...b,[E]:M}}return b}const A=new MediaStream([g]);return console.log(`[WebRTC] Created new stream: ${E}`),{...b,[E]:A}}),g.kind==="audio"){console.log(`[WebRTC] Audio track received from ${i}`),qe();try{const b=document.createElement("audio");b.id=`remote-audio-${i}`,b.srcObject=new MediaStream([g]),b.autoplay=!0,b.playsInline=!0;const S=document.getElementById(`remote-audio-${i}`);S&&S.remove(),b.style.display="none",document.body.appendChild(b),b.play().then(()=>{console.log(`üîä [Audio] Playing remote audio from ${i}`)}).catch(A=>{console.warn(`[Audio] Autoplay blocked for ${i}, waiting for interaction:`,A.message);const M=()=>{b.play().catch(()=>{}),document.removeEventListener("click",M)};document.addEventListener("click",M,{once:!0})}),console.log(`‚úÖ [Audio] Created audio element for ${i}`)}catch(b){console.error(`[Audio] Failed to create audio element for ${i}:`,b)}}else g.kind==="video"&&console.log(`[WebRTC] Video track (${x?"screen":"camera"}) received from ${i}`)},[qe]),Ie=o.useRef({}),Nt=o.useCallback((i,f=!1)=>{if(se.current[i])return se.current[i];const g=new RTCPeerConnection(Hr);se.current[i]=g;try{g.getTransceivers().forEach(x=>{if(x.sender&&x.sender.track?.kind==="audio"){const E=RTCRtpSender.getCapabilities("audio")?.codecs||[],b=E.filter(M=>M.mimeType.toLowerCase().includes("opus")),S=E.filter(M=>!M.mimeType.toLowerCase().includes("opus")),A=[...b,...S];x.setCodecPreferences&&A.length>0&&(x.setCodecPreferences(A),console.log("üéµ [Codec] Opus prioritized for audio"))}})}catch(v){console.warn("[Codec] setCodecPreferences not supported:",v.message)}return typeof window<"u"&&(window.__pawscord_peer_connections__=se.current),g.onicecandidate=v=>{v.candidate&&Pe({type:"candidate",candidate:v.candidate,receiver_username:i})},g.ontrack=v=>Bt(i,v),B.current&&B.current.getTracks().forEach(v=>{Re.webrtc(`Adding local audio track to PC for ${i}:`,v.kind),g.addTrack(v,B.current)}),g.oniceconnectionstatechange=()=>{console.log(`[WebRTC] ICE State (${i}):`,g.iceConnectionState),g.iceConnectionState==="failed"?(console.warn(`[WebRTC] ICE failed with ${i}, attempting restart...`),Ne(!0),To().finally(()=>{g.restartIce(),setTimeout(()=>Ne(!1),1500)})):g.iceConnectionState==="disconnected"?(console.warn(`[WebRTC] ICE disconnected from ${i}, waiting for reconnection...`),Ne(!0),setTimeout(()=>{(g.iceConnectionState==="disconnected"||g.iceConnectionState==="failed")&&(console.error(`[WebRTC] ICE reconnection timeout for ${i}, cleaning up...`),dt(v=>{const x={...v};return delete x[i],x}),se.current[i]&&(se.current[i].close(),delete se.current[i])),Ne(!1)},15e3)):g.iceConnectionState==="closed"?(console.log(`[WebRTC] ICE closed for ${i}, cleaning up...`),dt(v=>{const x={...v};return delete x[i],x}),se.current[i]&&delete se.current[i],Ne(!1)):g.iceConnectionState==="connected"?(console.log(`‚úÖ [WebRTC] ICE connected with ${i}`),Ne(!1),setTimeout(async()=>{try{(await g.getStats()).forEach(x=>{if(x.type==="candidate-pair"&&x.state==="succeeded"){const E=x.currentRoundTripTime*1e3;console.log(`üìä [Bandwidth] ${i} RTT: ${E.toFixed(0)}ms`),E>500?(console.warn(`‚ö†Ô∏è [Bandwidth] High latency detected (${E.toFixed(0)}ms), reducing video quality to LOW`),Ut(g,"low")):E>300?(console.warn(`‚ö†Ô∏è [Bandwidth] Medium latency detected (${E.toFixed(0)}ms), reducing video quality to MEDIUM`),Ut(g,"medium")):(console.log(`‚úÖ [Bandwidth] Good connection (${E.toFixed(0)}ms), using HIGH quality`),Ut(g,"high"))}})}catch(v){console.warn("[Bandwidth] Failed to get stats:",v)}},2e3)):g.iceConnectionState==="checking"&&console.log(`üîç [WebRTC] ICE checking with ${i}`)},g},[Pe,Bt]),kt=o.useCallback(async i=>{if(i.type==="kicked"){console.warn("üî¥ [Voice] Kicked from channel:",i.reason,i.message),$.warning(`Sesli Kanaldan √áƒ±karƒ±ldƒ±nƒ±z

Neden: ${i.message}`,5e3),at();return}if(i.type==="video_ended"){const b=i.from||i.username,S=i.streamType||"camera",A=`${b}_${S}`;console.log(`üìπ [Video] ${b} ended ${S} stream`),dt(M=>{const K={...M};return K[A]&&(K[A].getTracks().forEach(re=>re.stop()),delete K[A],console.log(`üìπ [Video] Cleaned up ${A} stream`)),K});return}if(i.type==="voice_reaction"){const b=i.from||i.username;console.log(`üí¨ [Reaction] ${b} sent: ${i.emoji}`),Xt({username:b,emoji:i.emoji,timestamp:Date.now()}),setTimeout(()=>{Xt(S=>S&&S.timestamp===Date.now()?null:S)},3e3);return}if(i.type==="game_signal"){const b=i.from||i.username;console.log(`üéÆ [Game] ${b}:`,i.action,i.move),we(S=>{const A={...S};if(i.action==="start")A.gameType=i.game_type,A.players=[b,i.target].filter(Boolean),A.moves={},A.result=null,A.currentTurn=b;else if(i.action==="move"){if(A.moves={...S.moves,[b]:i.move},i.game_type==="rps"&&Object.keys(A.moves).length===2){const[M,K]=Object.keys(A.moves),re=A.moves[M],me=A.moves[K];re===me?A.result={winner:null,type:"draw"}:{rock:"scissors",scissors:"paper",paper:"rock"}[re]===me?A.result={winner:M,loser:K}:A.result={winner:K,loser:M}}}else i.action==="end"&&(A.result=i.result||{type:"cancelled"});return A});return}if(i.type==="cinema_sync"){const b=i.from||i.username;console.log(`üé¨ [Cinema] ${b}:`,i.action),Jo(S=>({...S,isActive:i.action!=="stop",url:i.url||S.url,playing:i.action==="play",time:i.time||S.time,lastSyncAction:i.action,timestamp:Date.now(),syncedBy:b}));return}if(i.type==="current_users"){console.log("[Voice] Received current users from backend:",i.users),d(b=>{const S=i.users||[],A=S.some(re=>re.username===u),M=b.find(re=>re.username===u);let K=[...S];return!A&&M?(console.log("[Voice] Backend list missing me, adding from local state"),K=[M,...S]):!A&&u&&(console.log("[Voice] Backend list missing me, adding with defaults"),K=[{username:u,isMuted:G,isCameraOn:H,isScreenSharing:U,isTalking:q},...S]),console.log("‚úÖ [Voice] Final connected users:",K.map(re=>re.username)),K});return}const f=i.from||i.sender_username||i.username,{type:g,sdp:v,candidate:x}=i;if(!f){console.error("[Signal] No sender username found in message:",i);return}if(f===u){console.log(`[Signal] Ignoring ${g} from self (${f})`);return}console.log(`[Signal] Received ${g} from ${f}`,i);let E=se.current[f];if(!E)if(g==="offer")E=Nt(f,!1);else if(g==="user_joined"){if(d(b=>b.find(S=>S.username===f)?b:[...b,{username:f,isMuted:!1,isCameraOn:!1,isScreenSharing:!1}]),E=Nt(f,!0),console.log(`[user_joined] Checking streams for ${f}:`,{hasAudio:!!B.current,hasCamera:!!_e.current,hasScreen:!!ne.current,cameraEnabled:H,screenEnabled:U}),B.current){const b=E.getSenders();B.current.getTracks().forEach(S=>{b.some(M=>M.track===S)||(Re.webrtc(`Adding audio track to new peer ${f}:`,S.kind),E.addTrack(S,B.current))}),console.log(`‚úÖ [user_joined] Audio track added to ${f}`)}if(_e.current){const b=E.getSenders();_e.current.getTracks().forEach(S=>{b.some(M=>M.track===S)||(Re.webrtc(`Adding camera track to new peer ${f}:`,S.kind),E.addTrack(S,_e.current))}),console.log(`‚úÖ [user_joined] Camera track added to ${f}`)}if(ne.current){const b=E.getSenders();ne.current.getTracks().forEach(S=>{b.some(M=>M.track===S)||(Re.webrtc(`Adding screen track to new peer ${f}:`,S.kind),E.addTrack(S,ne.current))}),console.log(`‚úÖ [user_joined] Screen track added to ${f}`)}try{const b=await E.createOffer();await E.setLocalDescription(b),Pe({type:"offer",sdp:E.localDescription,target:f}),Re.signal(`Sent offer to ${f}`),console.log(`‚úÖ [user_joined] Offer successfully sent to ${f}`)}catch(b){Re.error("Offer creation failed",b),console.error(`‚ùå [user_joined] Failed to create/send offer to ${f}:`,b)}return}else if(g==="user_left"){console.log(`[Signal] ${f} left the channel`),d(S=>S.filter(A=>A.username!==f));const b=document.getElementById(`remote-audio-${f}`);b&&(b.pause(),b.srcObject=null,b.remove(),console.log(`üîä [Audio] Removed audio element for ${f}`)),dt(S=>{const A={...S};return delete A[f],delete A[`${f}_camera`],delete A[`${f}_screen`],A}),se.current[f]&&(se.current[f].close(),delete se.current[f]);return}else if(g==="stream_update"){if(console.log(`[Signal] ${f} stream update:`,i),d(b=>b.map(S=>S.username===f?{...S,isCameraOn:i.streamType==="camera"?i.enabled:S.isCameraOn,isScreenSharing:i.streamType==="screen"?i.enabled:S.isScreenSharing}:S)),i.enabled&&!se.current[f]){console.log(`[stream_update] Creating PC for ${f} due to ${i.streamType} stream`);const b=Nt(f,!0);B.current&&B.current.getTracks().forEach(S=>{Re.webrtc(`Adding audio track to ${f}:`,S.kind),b.addTrack(S,B.current)}),_e.current&&_e.current.getTracks().forEach(S=>{Re.webrtc(`Adding camera track to ${f}:`,S.kind),b.addTrack(S,_e.current)}),ne.current&&ne.current.getTracks().forEach(S=>{Re.webrtc(`Adding screen track to ${f}:`,S.kind),b.addTrack(S,ne.current)});try{const S=await b.createOffer();await b.setLocalDescription(S),Pe({type:"offer",sdp:b.localDescription,target:f}),Re.signal(`Sent offer to ${f} after stream_update`)}catch(S){Re.error(`Failed to create offer for ${f}:`,S)}}return}else{console.warn(`[Signal] Ignored ${g} from ${f} (No PC)`);return}try{if(g==="offer"){if(E.signalingState!=="stable"){console.warn(`[Signal] Ignoring offer from ${f}, already in state: ${E.signalingState}`);return}await E.setRemoteDescription(new RTCSessionDescription(v));const b=await E.createAnswer();if(await E.setLocalDescription(b),Pe({type:"answer",sdp:E.localDescription,target:f}),console.log(`[Signal] Sent answer to ${f}`),Ie.current[f]){console.log(`[Signal] Processing ${Ie.current[f].length} buffered candidates for ${f}`);for(const S of Ie.current[f])try{await E.addIceCandidate(S)}catch(A){console.warn("[Signal] Failed to add buffered candidate:",A)}delete Ie.current[f]}}else if(g==="answer"){if(E.signalingState!=="have-local-offer"){console.warn(`[WebRTC] Error handling answer from ${f}: InvalidStateError: Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': Failed to set remote answer sdp: Called in wrong state: ${E.signalingState}`);return}if(await E.setRemoteDescription(new RTCSessionDescription(v)),console.log(`[Signal] Set remote description from ${f}`),Ie.current[f]){console.log(`[Signal] Processing ${Ie.current[f].length} buffered candidates for ${f}`);for(const b of Ie.current[f])try{await E.addIceCandidate(b)}catch(S){console.warn("[Signal] Failed to add buffered candidate:",S)}delete Ie.current[f]}}else g==="candidate"&&(E.remoteDescription?(await E.addIceCandidate(new RTCIceCandidate(x)),console.log(`[Signal] Added ICE candidate from ${f}`)):(console.log(`[Signal] Buffering ICE candidate from ${f} (no remote description yet)`),Ie.current[f]||(Ie.current[f]=[]),Ie.current[f].push(new RTCIceCandidate(x))))}catch(b){console.error(`[WebRTC] Error handling ${g} from ${f}:`,b)}},[u,Nt,Pe]),at=o.useCallback(()=>{if(Fe.current){console.log("[Voice] Already leaving, skipping...");return}if(Fe.current=!0,console.log("[Voice] Leaving voice room..."),F.current&&F.current.readyState===WebSocket.OPEN)try{F.current.send(JSON.stringify({type:"user_leaving",sender_username:u}))}catch(i){console.warn("[Voice] Failed to send leave signal:",i)}B.current&&(B.current.getTracks().forEach(i=>{i.stop(),console.log(`[Voice] Stopped track: ${i.kind}`)}),Se(null),B.current=null),Be&&(Be.getTracks().forEach(i=>{i.stop(),console.log(`[Voice] Stopped camera track: ${i.kind}`)}),Me(null),V(!1)),wt&&(wt.getTracks().forEach(i=>{i.stop(),console.log(`[Voice] Stopped screen track: ${i.kind}`)}),He(null),j(!1)),Object.entries(se.current).forEach(([i,f])=>{console.log(`[Voice] Closing PC for ${i}`),f.close()}),se.current={},dt({}),Ie.current={},F.current&&(F.current.onclose=null,F.current.close(),F.current=null),p(!1),D(null),T(!1),O(!1),J(!1),oe&&(console.log("[Voice] Stopping recording on leave"),ot.current&&ot.current.state!=="inactive"&&ot.current.stop(),nt.current&&(clearInterval(nt.current),nt.current=null),Z(!1),ue(0)),Ke.current&&(clearInterval(Ke.current),Ke.current=null),tt.current&&(clearTimeout(tt.current),tt.current=null,console.log("[Voice] Cleared pending WebSocket reconnect")),oo.current&&(clearInterval(oo.current),oo.current=null),mt(0),_t(1e3),Ne(!1),setTimeout(()=>{Fe.current=!1},100)},[u,Be,wt,oe]),st=o.useCallback(async i=>{if(l&&C&&C!==i&&!rt.current&&(console.log(`[Voice] Switching from ${C} to ${i}`),rt.current=!0,await new Promise(g=>{if(F.current){const v=F.current,x=v.onclose;v.onclose=E=>{x&&x(E),console.log("[Voice] Old WebSocket fully closed"),g()},v.close(1e3,"Switching channel"),F.current=null,setTimeout(g,2e3)}else g()}),Object.values(se.current).forEach(g=>{g.close()}),se.current={},dt({}),await new Promise(g=>setTimeout(g,150)),rt.current=!1,console.log(`[Voice] Now joining ${i}`)),l&&C===i){console.log(`[Voice] Already in ${i}, skipping join`);return}if(rt.current){console.log("[Voice] Currently switching channels, skipping...");return}console.log(`[Voice] Joining room: ${i}`),T(!0),D(i);try{zt&&zt.length>0&&(Un(zt),console.log(`üîê [TURN] Using cached ICE servers (${zt.length})`));const f=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:48e3},sampleSize:{ideal:16},channelCount:{ideal:1},googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,googAudioMirroring:!1,latency:{ideal:.02}},video:!1});console.log("[Voice] üé§ Got microphone access with AGGRESSIVE noise suppression");let g=f;if(Mt)try{g=Po(f),console.log("üéöÔ∏è [Voice] Professional audio filters APPLIED")}catch(E){console.warn("‚ö†Ô∏è [Voice] Could not apply professional filters, using raw stream:",E),g=f}Se(g),B.current=g,console.log("üé§ [Voice] Stream ready with noise suppression"),console.log("üé§ [Voice] Stream tracks:",g.getAudioTracks().map(E=>({id:E.id,label:E.label,enabled:E.enabled,readyState:E.readyState,muted:E.muted}))),qe(),Ke.current||(Ke.current=setInterval(async()=>{const b=B.current?.getAudioTracks()?.[0];if(!(!l||Fe.current)&&(ft.current?.state==="suspended"&&await ft.current.resume().catch(()=>{}),!b||b.readyState==="ended"||!b.enabled&&!G&&!We))try{const S=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,googEchoCancellation:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,sampleRate:48e3,channelCount:1},video:!1});Se(S),B.current=S;const A=S.getAudioTracks()[0];Object.values(se.current).forEach(M=>{M.getSenders().filter(K=>K.track?.kind==="audio").forEach(K=>K.replaceTrack(A).catch(()=>{}))}),console.log("üîÑ [Mic Watchdog] Audio track yenilendi (basit stream)")}catch(S){console.warn("[Mic Watchdog] Mic refresh failed:",S)}},8e3));const v=`${Hn}://${Kn}/ws/voice/${i}/?token=${r}`;console.log(`[Voice] Connecting to ${v}`);const x=new WebSocket(v);F.current=x,x.onopen=()=>{console.log("üé§ [VoiceWS] Connected to room:",i),p(!0),T(!1),d(E=>E.some(S=>S.username===u)?E:(console.log("‚úÖ [Voice] Added self to connected users immediately"),[{username:u,isMuted:G,isCameraOn:H,isScreenSharing:U,isTalking:!1},...E]))},x.onmessage=E=>{try{const b=JSON.parse(E.data);console.log("[VoiceWS] Message received:",b.type||b),kt(b)}catch(b){console.error("[VoiceWS] Parse error:",b)}},x.onerror=E=>{console.error("üé§ [VoiceWS] Error:",E),T(!1),!Fe.current&&!rt.current&&console.warn("[VoiceWS] Error occurred, reconnect will be attempted on close")},x.onclose=E=>{if(console.log("üé§ [VoiceWS] Disconnected, code:",E.code,"reason:",E.reason),Fe.current||rt.current){console.log("[VoiceWS] User intentionally left or switching, not reconnecting"),Ne(!1),mt(0),_t(1e3),tt.current&&(clearTimeout(tt.current),tt.current=null);return}if(E.code===1e3){console.log("[VoiceWS] Normal closure (1000), cleaning up"),at();return}if(i&&l){const S=ln+1;if(S>10){console.error("[VoiceWS] ‚ùå Max retry limit reached (10), giving up"),$.error("Sesli sohbet baƒülantƒ±sƒ± 10 denemeden sonra kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.",5e3),at(),mt(0),_t(1e3);return}const A=Math.min(Co,3e4);console.warn(`[VoiceWS] üîÑ Unexpected disconnect (code: ${E.code})`),console.log(`[VoiceWS] üîÑ Reconnect attempt ${S}/10 in ${A}ms...`),Ne(!0),mt(S),tt.current&&clearTimeout(tt.current),tt.current=setTimeout(()=>{!Fe.current&&!rt.current&&i?(console.log(`[VoiceWS] ‚ö° Executing reconnect attempt ${S} to ${i}`),_t(M=>Math.min(M*2,3e4)),st(i).then(()=>{console.log("[VoiceWS] ‚úÖ Reconnection successful! Resetting retry counters."),mt(0),_t(1e3),Ne(!1)}).catch(M=>{console.error("[VoiceWS] Reconnection failed:",M)})):(console.log("[VoiceWS] Reconnect cancelled (user left or room changed)"),Ne(!1),mt(0),_t(1e3))},A)}else console.log("[VoiceWS] Not in voice or no room, cleaning up"),at()}}catch(f){console.error("Voice Join Error:",f),T(!1),rt.current=!1,f.name==="NotAllowedError"?$.warning("Mikrofon izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan izin verin.",5e3):f.name==="NotFoundError"?$.warning("Mikrofon bulunamadƒ±. L√ºtfen bir mikrofon baƒülayƒ±n."):$.error("Sesli sohbete baƒülanƒ±lamadƒ±: "+f.message)}},[l,C,r,kt,qe,at]),cr=o.useCallback(()=>{O(i=>{const f=!i;return B.current&&B.current.getAudioTracks().forEach(g=>{g.enabled=!f}),F.current?.readyState===WebSocket.OPEN&&F.current.send(JSON.stringify({type:"mic_off_state",is_mic_off:f})),console.log(`[Voice] Mute: ${f}`),f})},[]),mn=o.useCallback(()=>{J(i=>{const f=!i;return F.current?.readyState===WebSocket.OPEN&&F.current.send(JSON.stringify({type:"deaf_state",is_deafened:f})),console.log(`[Voice] Deafened: ${f}`),f})},[]),ro=o.useRef(!1),Io=o.useCallback(async()=>{if(ro.current){console.log("[Camera] Toggle already in progress, skipping...");return}ro.current=!0;try{const i=_e.current;if(i){console.log("[Camera] Stopping camera stream"),V(!1),Me(null),_e.current=null,i.getTracks().forEach(g=>{g.stop(),console.log(`[Camera] Stopped ${g.kind} track`)});const f=[];for(const[g,v]of Object.entries(se.current)){const x=v.getSenders();let E=!1;for(const b of x)if(b.track&&b.track.kind==="video"&&b.track.contentHint!=="detail")try{v.removeTrack(b),E=!0,console.log(`[Camera] Removed video track from peer: ${g}`)}catch(S){console.warn(`[Camera] Failed to remove track from ${g}:`,S)}if(E){const b=(async()=>{try{const S=await v.createOffer();await v.setLocalDescription(S),Pe({type:"offer",sdp:v.localDescription,target:g}),console.log(`[Camera] Sent renegotiation offer to ${g} after removal`)}catch(S){console.warn(`[Camera] Renegotiation failed with ${g}:`,S)}})();f.push(b)}}F.current?.readyState===WebSocket.OPEN&&(F.current.send(JSON.stringify({type:"camera_state",is_camera_on:!1})),F.current.send(JSON.stringify({type:"video_ended",streamType:"camera"})),console.log("[Camera] Sent video_ended signal")),Promise.all(f).catch(g=>console.warn("[Camera] Some renegotiations failed:",g))}else{console.log("[Camera] Starting camera stream");const f=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}});if(!ro.current){console.log("[Camera] Toggle was cancelled, stopping new stream"),f.getTracks().forEach(x=>x.stop());return}console.log("[Camera] Got camera stream:",f.id),_e.current=f,Me(f),V(!0);const g=f.getVideoTracks()[0];g.onended=()=>{console.log("[Camera] Track ended by browser/system"),Me(null),_e.current=null,V(!1),F.current?.readyState===WebSocket.OPEN&&F.current.send(JSON.stringify({type:"video_ended",streamType:"camera"}))};try{g.contentHint="motion"}catch(x){console.warn("[Camera] contentHint not supported:",x)}const v=[];for(const[x,E]of Object.entries(se.current)){const b=(async()=>{try{E.addTrack(g,f),console.log(`[Camera] Added video track to peer: ${x}`);const S=await E.createOffer();await E.setLocalDescription(S),Pe({type:"offer",sdp:E.localDescription,target:x}),console.log(`[Camera] Sent renegotiation offer to ${x}`)}catch(S){console.warn(`[Camera] Failed to add/renegotiate with ${x}:`,S)}})();v.push(b)}F.current?.readyState===WebSocket.OPEN&&(F.current.send(JSON.stringify({type:"camera_state",is_camera_on:!0})),console.log("[Camera] State sent to backend: is_camera_on=true")),Promise.all(v).catch(x=>console.warn("[Camera] Some track additions failed:",x))}}catch(i){console.error("[Camera] Error:",i),i.name==="NotAllowedError"?$.warning("Kamera izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan kamera iznini a√ßƒ±n.",5e3):i.name==="NotFoundError"?$.warning("Kamera bulunamadƒ±. L√ºtfen bir kamera baƒülayƒ±n."):$.error("Kamera ba≈ülatƒ±lamadƒ±: "+i.message),V(!1),_e.current=null,Me(null)}finally{setTimeout(()=>{ro.current=!1},300)}},[Pe]),dr=Io,Ft=o.useRef(!1),ur=o.useCallback(async()=>{if(Ft.current){console.log("[Screen] Toggle already in progress, skipping...");return}Ft.current=!0;try{const i=ne.current;if(i){console.log("[Screen] Stopping screen share"),j(!1),He(null),ne.current=null,i.getTracks().forEach(g=>{g.stop(),console.log(`[Screen] Stopped ${g.kind} track`)});const f=[];for(const[g,v]of Object.entries(se.current)){const x=v.getSenders();let E=!1;for(const b of x)if(b.track&&b.track.contentHint==="detail")try{v.removeTrack(b),E=!0,console.log(`[Screen] Removed screen track from peer: ${g}`)}catch(S){console.warn(`[Screen] Failed to remove track from ${g}:`,S)}if(E){const b=(async()=>{try{const S=await v.createOffer();await v.setLocalDescription(S),Pe({type:"offer",sdp:v.localDescription,target:g}),console.log(`[Screen] Sent renegotiation offer to ${g} after removal`)}catch(S){console.warn(`[Screen] Renegotiation failed with ${g}:`,S)}})();f.push(b)}}F.current?.readyState===WebSocket.OPEN&&(F.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),F.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})),console.log("[Screen] Sent video_ended signal")),Promise.all(f).catch(g=>console.warn("[Screen] Some renegotiations failed:",g))}else{console.log("[Screen] Starting screen share");const f={"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"4K":{width:3840,height:2160}},g=f[ge]||f["1080p"];console.log(`üé¨ [Screen] Quality: ${ge}, FPS: ${eo}`);const v=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",displaySurface:"monitor",width:{ideal:g.width},height:{ideal:g.height},frameRate:{ideal:eo}},audio:ko});if(!Ft.current){console.log("[Screen] Toggle was cancelled, stopping new stream"),v.getTracks().forEach(b=>b.stop());return}console.log("[Screen] Got screen stream:",v.id),v.getVideoTracks()[0].onended=()=>{console.log("[Screen] User stopped sharing via browser"),He(null),ne.current=null,j(!1),F.current?.readyState===WebSocket.OPEN&&(F.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),F.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})))},ne.current=v,He(v),j(!0);const x=v.getVideoTracks()[0];try{x.contentHint="detail"}catch(b){console.warn("[Screen] contentHint not supported:",b)}const E=[];for(const[b,S]of Object.entries(se.current)){const A=(async()=>{try{S.addTrack(x,v),console.log(`[Screen] Added screen track to peer: ${b}`);const M=await S.createOffer();await S.setLocalDescription(M),Pe({type:"offer",sdp:S.localDescription,target:b}),console.log(`[Screen] Sent renegotiation offer to ${b}`)}catch(M){console.error(`[Screen] Failed to add track to ${b}:`,M.message)}})();E.push(A)}F.current?.readyState===WebSocket.OPEN&&F.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!0})),Promise.all(E).catch(b=>console.warn("[Screen] Some track additions failed:",b))}}catch(i){console.error("[Screen] Error:",i),i.name==="NotAllowedError"?console.log("[Screen] User cancelled screen share"):i.name==="NotFoundError"?$.warning("Ekran payla≈üƒ±mƒ± desteklenmiyor."):$.error("Ekran payla≈üƒ±mƒ± ba≈ülatƒ±lamadƒ±: "+i.message),j(!1),ne.current=null,He(null)}finally{setTimeout(()=>{Ft.current=!1},300)}},[Pe,ge,eo,ko]),Lo=o.useCallback(()=>{if(!l||oe){console.warn("[Recording] Cannot start - not in voice or already recording");return}try{const i=new(window.AudioContext||window.webkitAudioContext),f=i.createMediaStreamDestination();Q&&i.createMediaStreamSource(Q).connect(f),Object.entries(Te).forEach(([v,x])=>{!v.includes("_camera")&&!v.includes("_screen")&&x.getAudioTracks().length>0&&i.createMediaStreamSource(x).connect(f)});const g=new MediaRecorder(f.stream,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});pt.current=[],g.ondataavailable=v=>{v.data.size>0&&pt.current.push(v.data)},g.onstop=()=>{const v=new Blob(pt.current,{type:"audio/webm"}),x=URL.createObjectURL(v),E=document.createElement("a");E.href=x,E.download=`pawscord-voice-${C}-${Date.now()}.webm`,E.click(),URL.revokeObjectURL(x),console.log("‚úÖ [Recording] Saved recording")},g.start(1e3),ot.current=g,Z(!0),ue(0),nt.current=setInterval(()=>{ue(v=>v+1)},1e3),console.log("üî¥ [Recording] Started")}catch(i){console.error("[Recording] Start error:",i),$.error("Kayƒ±t ba≈ülatƒ±lamadƒ±: "+i.message)}},[l,oe,Q,Te,C]),Oo=o.useCallback(()=>{oe&&(ot.current&&ot.current.state!=="inactive"&&ot.current.stop(),nt.current&&(clearInterval(nt.current),nt.current=null),ot.current=null,Z(!1),ue(0),console.log("‚èπÔ∏è [Recording] Stopped"))},[oe]),fn=o.useCallback(()=>{if(pt.current.length===0){$.warning("Hen√ºz kayƒ±t yok!");return}const i=new Blob(pt.current,{type:"audio/webm"}),f=URL.createObjectURL(i),g=document.createElement("a");g.href=f,g.download=`pawscord-voice-${C||"recording"}-${Date.now()}.webm`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(f),console.log("üíæ [Recording] Downloaded manually")},[C]),mr=o.useCallback(async(i,f=50)=>{if(!Q||!l){console.warn("[VoiceEffect] No stream or not in voice");return}try{if(Vt.current&&(Vt.current.forEach(S=>{try{S.disconnect()}catch{}}),Vt.current=null),!i){pe(null),console.log("üéµ [VoiceEffect] Cleared");return}const g=ve.current||new AudioContext;ve.current||(ve.current=g);const v=g.createMediaStreamSource(Q),x=g.createMediaStreamDestination(),E=[],b=f/100;switch(i){case"robot":{const S=g.createOscillator(),A=g.createGain(),M=g.createWaveShaper();S.type="sawtooth",S.frequency.value=50+b*100,A.gain.value=.3+b*.4;const K=new Float32Array(256);for(let re=0;re<256;re++){const me=re/128-1;K[re]=Math.tanh(me*(1+b*3))}M.curve=K,S.connect(A),v.connect(M),M.connect(x),S.start(),E.push(S,A,M);break}case"echo":{const S=g.createDelay(1),A=g.createGain(),M=g.createGain(),K=g.createGain();S.delayTime.value=.1+b*.4,A.gain.value=.2+b*.5,M.gain.value=.3+b*.4,K.gain.value=1-b*.3,v.connect(K),v.connect(S),S.connect(A),A.connect(S),S.connect(M),K.connect(x),M.connect(x),E.push(S,A,M,K);break}case"deep":{const S=g.createBiquadFilter(),A=g.createGain();S.type="lowshelf",S.frequency.value=500,S.gain.value=10+b*15,A.gain.value=1.2,v.connect(S),S.connect(A),A.connect(x),E.push(S,A);break}case"high":{const S=g.createBiquadFilter(),A=g.createGain();S.type="highshelf",S.frequency.value=1e3,S.gain.value=8+b*12,A.gain.value=.9,v.connect(S),S.connect(A),A.connect(x),E.push(S,A);break}case"radio":{const S=g.createBiquadFilter(),A=g.createBiquadFilter(),M=g.createWaveShaper();S.type="lowpass",S.frequency.value=3e3-b*1e3,A.type="highpass",A.frequency.value=300+b*200;const K=new Float32Array(256);for(let re=0;re<256;re++){const me=re/128-1;K[re]=Math.sign(me)*Math.pow(Math.abs(me),.8)}M.curve=K,v.connect(A),A.connect(S),S.connect(M),M.connect(x),E.push(S,A,M);break}case"reverb":{const S=g.createConvolver(),A=g.createGain(),M=g.createGain(),K=g.sampleRate,re=K*(.5+b*2),me=g.createBuffer(2,re,K);for(let $e=0;$e<2;$e++){const gt=me.getChannelData($e);for(let Je=0;Je<re;Je++)gt[Je]=(Math.random()*2-1)*Math.pow(1-Je/re,2)}S.buffer=me,A.gain.value=.3+b*.5,M.gain.value=1-b*.2,v.connect(M),v.connect(S),S.connect(A),M.connect(x),A.connect(x),E.push(S,A,M);break}default:v.connect(x)}Vt.current=E,Ao.current=x.stream,pe(i),Ue(f),console.log(`üéµ [VoiceEffect] Applied: ${i} at ${f}%`)}catch(g){console.error("[VoiceEffect] Error:",g),$.error("Ses efekti uygulanamadƒ±")}},[Q,l]),pn=o.useCallback(i=>{if(!F.current||F.current.readyState!==WebSocket.OPEN){console.warn("[Reaction] WebSocket not connected");return}F.current.send(JSON.stringify({type:"voice_reaction",emoji:i})),console.log(`üí¨ [Reaction] Sent: ${i}`)},[]),ea=o.useCallback((i,f,g=null,v=null)=>{if(!F.current||F.current.readyState!==WebSocket.OPEN){console.warn("[Game] WebSocket not connected");return}F.current.send(JSON.stringify({type:"game_signal",game_type:i,action:f,move:g,target:v})),console.log(`üéÆ [Game] Sent: ${i} - ${f}`,g)},[]),fr=o.useCallback((i,f=0,g=null)=>{if(!F.current||F.current.readyState!==WebSocket.OPEN){console.warn("[Cinema] WebSocket not connected");return}F.current.send(JSON.stringify({type:"cinema_sync",action:i,time:f,url:g})),console.log(`üé¨ [Cinema] Sent: ${i}`,{time:f,url:g})},[]),pr=o.useCallback(()=>{ke.current||(ke.current=setInterval(async()=>{const i={};for(const[f,g]of Object.entries(se.current))try{const v=await g.getStats();let x=null,E=null;v.forEach(b=>{b.type==="inbound-rtp"&&b.kind==="audio"&&(x={packetsReceived:b.packetsReceived,packetsLost:b.packetsLost,jitter:b.jitter,bytesReceived:b.bytesReceived}),b.type==="inbound-rtp"&&b.kind==="video"&&(E={packetsReceived:b.packetsReceived,packetsLost:b.packetsLost,framesDecoded:b.framesDecoded,frameWidth:b.frameWidth,frameHeight:b.frameHeight}),b.type==="candidate-pair"&&b.state==="succeeded"&&(i[f]={...i[f],rtt:b.currentRoundTripTime*1e3,connectionType:b.localCandidateId?.includes("relay")?"TURN":"STUN/Direct"})}),i[f]={...i[f],audio:x,video:E,connectionState:g.connectionState,iceConnectionState:g.iceConnectionState}}catch(v){console.warn(`[Stats] Failed to get stats for ${f}:`,v)}Xo(i)},2e3),console.log("üìä [Stats] Monitoring started"))},[]),ao=o.useCallback(()=>{ke.current&&(clearInterval(ke.current),ke.current=null,Xo({}),console.log("üìä [Stats] Monitoring stopped"))},[]),gn=o.useCallback(i=>{Xn(i),localStorage.setItem("pawscord_noise_gate_enabled",i.toString()),console.log(`üéöÔ∏è [Noise Gate] ${i?"ENABLED":"DISABLED"}`)},[]),Do=o.useCallback(i=>{const f=Math.max(-80,Math.min(-20,i));Jn(f),localStorage.setItem("pawscord_noise_gate",f.toString()),console.log(`üéöÔ∏è [Noise Gate] Threshold: ${f}dB`)},[]),gr=o.useCallback(i=>{Qn(i),localStorage.setItem("pawscord_visualizer",i.toString()),console.log(`üìä [Visualizer] ${i?"ENABLED":"DISABLED"}`)},[]),xt=o.useRef(null),it=o.useRef(null),Wt=o.useCallback(()=>{if(!(!vt||!Q)&&!xt.current)try{ve.current||(ve.current=new(window.AudioContext||window.webkitAudioContext));const i=ve.current,f=i.createAnalyser();f.fftSize=256;const g=i.createMediaStreamSource(Q);g.connect(f),it.current={local:f,localSource:g,remote:{}},Object.entries(Te).forEach(([v,x])=>{if(!v.includes("_camera")&&!v.includes("_screen")){const E=i.createAnalyser();E.fftSize=256;const b=i.createMediaStreamSource(x);b.connect(E),it.current.remote[v]={analyser:E,source:b}}}),xt.current=setInterval(()=>{const v=new Uint8Array(128);it.current.local.getByteFrequencyData(v);const x={};Object.entries(it.current.remote).forEach(([E,{analyser:b}])=>{const S=new Uint8Array(128);b.getByteFrequencyData(S),x[E]=S}),en({local:v,remote:x})},33),console.log("üìä [Visualizer] Started")}catch(i){console.error("[Visualizer] Failed to start:",i)}},[vt,Q,Te]),so=o.useCallback(()=>{if(xt.current&&(clearInterval(xt.current),xt.current=null),it.current){try{it.current.localSource?.disconnect(),Object.values(it.current.remote).forEach(({source:i})=>{i?.disconnect()})}catch{}it.current=null}en({local:new Uint8Array(128),remote:{}}),console.log("üìä [Visualizer] Stopped")},[]);return o.useEffect(()=>(l&&vt?Wt():so(),()=>so()),[l,vt,Wt,so]),o.useEffect(()=>()=>{oe&&Oo(),Ke.current&&(clearInterval(Ke.current),Ke.current=null),ao()},[oe,Oo,ao]),e.createElement(Ps.Provider,{value:{isInVoice:l,isConnecting:k,currentRoom:C,isMuted:G,isDeafened:z,isVideoEnabled:H,isScreenSharing:U,isTalking:q,isSpatialAudioEnabled:ut,vadSensitivity:Dt,isNoiseSuppressionEnabled:Mt,screenShareQuality:ge,screenShareFPS:eo,isRecording:oe,recordingDuration:ae,isPTTMode:We,isPTTActive:an,pttKey:ee,includeSystemAudio:ko,localStream:Q,localAudioStream:Q,localCameraStream:Be,localScreenStream:wt,remoteStreams:Te,connectedUsers:Yo,remoteVolumes:Qt,mutedUsers:tn,joinVoiceRoom:st,leaveVoiceRoom:at,joinChannel:st,leaveChannel:at,setRemoteVolume:Ro,setIsMuted:O,setIsDeafened:J,setIsVideoEnabled:V,setIsScreenSharing:j,toggleMute:cr,toggleDeafened:mn,toggleVideo:Io,toggleCamera:dr,toggleScreenShare:ur,toggleSpatialAudio:ar,updateVadSensitivity:cn,toggleNoiseSuppression:no,updateScreenQuality:Ye,updateScreenFPS:lr,toggleSystemAudio:sr,togglePTTMode:un,updatePTTKey:ir,startRecording:Lo,stopRecording:Oo,downloadRecording:fn,sendSignal:Pe,isPttActive:an,sendReaction:pn,lastReaction:vo,applyVoiceEffect:mr,activeVoiceEffect:Y,voiceEffectIntensity:Ee,setVoiceEffectIntensity:Ue,cinemaState:qn,setCinemaState:Jo,sendCinemaSync:fr,gameState:ce,setGameState:we,sendGameSignal:ea,connectionStats:Zo,startStatsMonitoring:pr,stopStatsMonitoring:ao,noiseSuppressionLevel:nn,updateNoiseSuppressionLevel:dn,iceServers:zt,isReconnecting:sn,adjustBandwidth:Ut,noiseGateThreshold:Yn,isNoiseGateEnabled:Zn,toggleNoiseGate:gn,updateNoiseGateThreshold:Do,audioVisualizerData:Qo,isVisualizerEnabled:vt,toggleVisualizer:gr,startVisualizer:Wt,stopVisualizer:so}},s)},nd=()=>o.useContext(Ps),Is=o.createContext(null),rd=({children:s})=>{const[n,r]=o.useState(!1),[u,l]=o.useState(null),[p,k]=o.useState(0),T=o.useRef(null),C=o.useRef(null),D=o.useCallback(()=>{const G=localStorage.getItem("access_token");if(!G)return;let O="Anonymous";try{O=Zt(G).username}catch(H){console.error("Token decode hatasƒ±",H)}const z=`${Hn}://${Kn}/ws/status/?username=${encodeURIComponent(O)}&token=${G}`;T.current&&T.current.close();const J=new WebSocket(z);T.current=J,J.onopen=()=>{console.log("üåê [GlobalWS] Baƒülandƒ±"),r(!0)},J.onmessage=H=>{const V=JSON.parse(H.data);l(V),V.type==="chat_message_handler"&&V.username==="‚ö° Signal Bot"&&(Notification.permission==="granted"&&document.hidden&&new Notification("üö® YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞!",{body:`${V.content.split(`
`)[2]}`,icon:"/logo192.png"}),k(U=>U+1))},J.onclose=H=>{console.log("üåê [GlobalWS] Kapandƒ±",H.code),r(!1),clearTimeout(C.current),C.current=setTimeout(D,5e3)},J.onerror=H=>{console.error("üåê [GlobalWS] Hata",H),J.close()}},[Kn,Hn]);return o.useEffect(()=>{const G=setTimeout(()=>{D()},2e3);return()=>{clearTimeout(G),T.current&&T.current.close(),clearTimeout(C.current)}},[D]),e.createElement(Is.Provider,{value:{isConnected:n,globalData:u,unreadGlobal:p,setUnreadGlobal:k}},s)},Ls=()=>o.useContext(Is),ad=({message:s,endTime:n,level:r="info",onDismiss:u})=>{const[l,p]=o.useState("");o.useEffect(()=>{if(!n)return;const C=()=>{const G=new Date,z=new Date(n)-G;if(z<=0){p("Ending soon..."),setTimeout(()=>window.location.reload(),5e3);return}const J=Math.floor(z/(1e3*60*60)),H=Math.floor(z%(1e3*60*60)/(1e3*60));p(`${J}h ${H}m remaining`)};C();const D=setInterval(C,6e4);return()=>clearInterval(D)},[n]);const k={info:{bg:"rgba(88, 101, 242, 0.1)",border:"#5865f2",text:"#5865f2"},warning:{bg:"rgba(250, 166, 26, 0.1)",border:"#faa61a",text:"#faa61a"},critical:{bg:"rgba(240, 71, 71, 0.1)",border:"#f04747",text:"#f04747"}},T=k[r]||k.info;return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:T.bg,borderBottom:`2px solid ${T.border}`,padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:9999,animation:"slideDown 0.3s ease"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement(Ul,{style:{color:T.text,fontSize:"18px"}}),e.createElement("div",null,e.createElement("div",{style:{color:T.text,fontWeight:"bold"}},r==="critical"?"üö® Critical Maintenance":r==="warning"?"‚ö†Ô∏è Scheduled Maintenance":"‚ÑπÔ∏è Maintenance Notice"),e.createElement("div",{style:{color:"#dcddde",fontSize:"14px",marginTop:"2px"}},s,l&&e.createElement("span",{style:{marginLeft:"10px",opacity:.7}},"(",l,")")))),u&&e.createElement("button",{onClick:u,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:C=>C.target.style.background="rgba(255,255,255,0.1)",onMouseLeave:C=>C.target.style.background="none"},e.createElement(Ho,null)))},Qe=({size:s="medium",text:n="Y√ºkleniyor...",fullscreen:r=!1})=>{const u={small:{spinner:24,text:"12px"},medium:{spinner:40,text:"14px"},large:{spinner:60,text:"16px"}},l=u[s]||u.medium,p=r?ho.fullscreenContainer:ho.inlineContainer;return e.createElement("div",{style:p},e.createElement("div",{style:{...ho.spinnerWrapper,width:l.spinner,height:l.spinner}},e.createElement("div",{style:ho.spinnerOuter}),e.createElement("div",{style:ho.spinnerInner})),n&&e.createElement("div",{style:{...ho.loadingText,fontSize:l.text}},n))},ho={fullscreenContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#36393f",zIndex:9999,gap:"16px"},inlineContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px",minHeight:"100px"},spinnerWrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},spinnerOuter:{position:"absolute",width:"100%",height:"100%",border:"3px solid rgba(88, 101, 242, 0.2)",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite"},spinnerInner:{position:"absolute",width:"70%",height:"70%",border:"3px solid rgba(88, 101, 242, 0.1)",borderBottom:"3px solid #7289da",borderRadius:"50%",animation:"spin 0.7s linear infinite reverse"},loadingText:{color:"#b5bac1",fontWeight:500,textAlign:"center",animation:"pulse 1.5s ease-in-out infinite"}};if(typeof document<"u"){const s=document.createElement("style");s.innerText=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
    `,document.head.querySelector("[data-loading-spinner-styles]")||(s.setAttribute("data-loading-spinner-styles","true"),document.head.appendChild(s))}const sd="https://media.pawscord.com",id=`${sd}/assets`,ld=`${id}/logo.png`;Wc().replace("/api","");const cd=ld,dd=()=>e.createElement("svg",{className:"splash-logo",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("ellipse",{cx:"50",cy:"62",rx:"22",ry:"18",fill:"white"}),e.createElement("ellipse",{cx:"28",cy:"38",rx:"10",ry:"12",fill:"white"}),e.createElement("ellipse",{cx:"72",cy:"38",rx:"10",ry:"12",fill:"white"}),e.createElement("ellipse",{cx:"22",cy:"55",rx:"8",ry:"10",fill:"white"}),e.createElement("ellipse",{cx:"78",cy:"55",rx:"8",ry:"10",fill:"white"})),ud=()=>{const[s,n]=o.useState(!1);return s?e.createElement(dd,null):e.createElement("img",{src:cd,alt:"Pawscord",className:"splash-logo",onError:()=>n(!0)})},md=({animationState:s})=>e.createElement("div",{className:`splash-screen ${s}`},e.createElement("div",{className:"particles"},[...Array(15)].map((n,r)=>e.createElement("div",{key:r,className:"particle",style:{"--delay":`${Math.random()*2}s`,"--x":`${Math.random()*100}%`,"--size":`${4+Math.random()*8}px`,"--duration":`${2+Math.random()*3}s`}}))),e.createElement("div",{className:"rings-container"},e.createElement("div",{className:"ring ring-1"}),e.createElement("div",{className:"ring ring-2"}),e.createElement("div",{className:"ring ring-3"})),e.createElement("div",{className:"logo-container"},e.createElement("div",{className:"logo-glow"}),e.createElement(ud,null)),e.createElement("div",{className:"brand-text"},e.createElement("span",{className:"letter",style:{"--i":0}},"P"),e.createElement("span",{className:"letter",style:{"--i":1}},"A"),e.createElement("span",{className:"letter",style:{"--i":2}},"W"),e.createElement("span",{className:"letter",style:{"--i":3}},"S"),e.createElement("span",{className:"letter",style:{"--i":4}},"C"),e.createElement("span",{className:"letter",style:{"--i":5}},"O"),e.createElement("span",{className:"letter",style:{"--i":6}},"R"),e.createElement("span",{className:"letter",style:{"--i":7}},"D")),e.createElement("div",{className:"loading-bar"},e.createElement("div",{className:"loading-progress"}))),ds=e.memo(md),us=e.lazy(()=>y(()=>import("./Message-Ca1Wy4pk.js"),__vite__mapDeps([23,1,2,3,6,24,25,26,27,9,4,5,7]))),fd=e.lazy(()=>y(()=>import("./VirtualMessageList-B83NbI3e.js"),__vite__mapDeps([28,2,3,27,9]))),pd=e.lazy(()=>y(()=>import("./MessageInput-DFjgo9PU.js"),__vite__mapDeps([29,1,2,3,6,22,30,4,5,7,31]))),Bn=e.lazy(()=>y(()=>import("./UserVideoContainer-BUAIG94Z.js"),__vite__mapDeps([32,2,3]))),gd=e.lazy(()=>y(()=>import("./VoiceAudioController-SsLThpjQ.js"),__vite__mapDeps([33,2,3,1,4,5,6,7])));e.lazy(()=>y(()=>import("./RichTextEditor-2gVa_wd9.js"),__vite__mapDeps([34,2,3,6,35])));const hd=e.lazy(()=>y(()=>import("./StickyMessageBanner-h5KfzOBu.js"),__vite__mapDeps([36,2,3,6]))),yd=e.lazy(()=>y(()=>import("./LoginPage-CZ51Eay2.js"),__vite__mapDeps([37,2,3,6,38,5,1,4,7]))),Sd=e.lazy(()=>y(()=>import("./WelcomeScreen-nGo1jkaN.js"),__vite__mapDeps([39,2,3,6,40,1,4,5,7]))),bd=e.lazy(()=>y(()=>import("./ImageModal-C99nj2Rh.js"),__vite__mapDeps([13,2,3]))),Ed=e.lazy(()=>y(()=>import("./UserProfileModal-F8m9j9im.js"),__vite__mapDeps([12,2,3,6,1,4,5,7]))),wd=e.lazy(()=>y(()=>import("./PollCreateModal-D2mk3rfB.js"),__vite__mapDeps([20,2,3,6]))),vd=e.lazy(()=>y(()=>import("./CodeSnippetModal-kW_0z6F8.js"),__vite__mapDeps([21,2,3,6])));e.lazy(()=>y(()=>import("./AvatarCropper-DKjxipOm.js"),__vite__mapDeps([41,2,3,42])));const _d=e.lazy(()=>y(()=>import("./CryptoChartModal-D9wOZhF9.js"),__vite__mapDeps([43,2,3,6])));e.lazy(()=>y(()=>import("./CryptoStoreModal-Cjia07pF.js"),__vite__mapDeps([44,2,3,6,1,4,5,7])));const kd=e.lazy(()=>y(()=>import("./PremiumStoreModal-B4apMg9C.js"),__vite__mapDeps([45,2,3,6,1,4,5,7]))),xd=e.lazy(()=>y(()=>import("./WhiteboardModal-CQEWHRXn.js"),__vite__mapDeps([19,2,3,6]))),Cd=e.lazy(()=>y(()=>import("./SoundboardModal-CTXrgLIr.js"),__vite__mapDeps([16,2,3,6]))),Td=e.lazy(()=>y(()=>import("./KanbanBoard-DTJ9ugkb.js"),__vite__mapDeps([46,2,3,9,6]))),ms=e.lazy(()=>y(()=>import("./SummaryModal-BkRpgEuO.js"),__vite__mapDeps([47,2,3,6]))),Ad=e.lazy(()=>y(()=>import("./MessageTemplateModal-cDFcY6D6.js"),__vite__mapDeps([22,2,3,6]))),Rd=e.lazy(()=>y(()=>import("./CinemaModal-CpZ5QCt5.js"),__vite__mapDeps([18,1,2,3,6]))),Pd=e.lazy(()=>y(()=>import("./StickerPicker-DZkr96jN.js"),__vite__mapDeps([15,2,3]))),Id=e.lazy(()=>y(()=>import("./GifPicker-BFh2Z4QW.js"),__vite__mapDeps([14,2,3]))),Ld=e.lazy(()=>y(()=>import("./DJModal-DorX9fT2.js"),__vite__mapDeps([48,1,2,3,6]))),Od=e.lazy(()=>y(()=>import("./ThemeStoreModal-59yvR93E.js"),__vite__mapDeps([49,2,3,6,1,4,5,7]))),Dd=e.lazy(()=>y(()=>import("./EncryptionKeyModal-i6zhLc3k.js"),__vite__mapDeps([50,2,3,6]))),Md=e.lazy(()=>y(()=>import("./DownloadModal-DkzeBcmF.js"),__vite__mapDeps([40,2,3,6,1,4,5,7]))),$d=e.lazy(()=>y(()=>import("./ServerSettingsModal-C_W6pZiv.js"),__vite__mapDeps([8,2,3,6,9,10,11,1,4,5,7]))),zd=e.lazy(()=>y(()=>import("./CreateGroupModal-Uu64DNaE.js"),__vite__mapDeps([51,2,3,6,1,4,5,7]))),Vd=e.lazy(()=>y(()=>import("./AdminAnalyticsPanel-CSuj7PTP.js"),__vite__mapDeps([52,2,3,6]))),Ud=e.lazy(()=>y(()=>import("./AdminPanelModal-DNjf5jmT.js"),__vite__mapDeps([53,2,3,6,1,4,5,7]))),Bd=e.lazy(()=>y(()=>import("./WebhooksPanel-Dg8_Orf3.js"),__vite__mapDeps([54,2,3,9,1,4,5,6,7,55]))),Nd=e.lazy(()=>y(()=>import("./VanityURLManager-DMB0IoDv.js"),__vite__mapDeps([11,2,3,6,1,4,5,7]))),Fd=e.lazy(()=>y(()=>import("./AutoModerationDashboard-BpSc3jME.js"),__vite__mapDeps([56,2,3,6]))),Wd=e.lazy(()=>y(()=>import("./AutoModerationPanel-DEp54GtD.js"),__vite__mapDeps([57,2,3,6,1,4,5,7,58]))),jd=e.lazy(()=>y(()=>import("./RaidProtectionPanel-BhOLLUTR.js"),__vite__mapDeps([59,2,3,6,1,4,5,7]))),Gd=e.lazy(()=>y(()=>import("./ReportSystemPanel-BWHl3oOe.js"),__vite__mapDeps([60,2,3,6,1,4,5,7]))),Hd=e.lazy(()=>y(()=>import("./AuditLogPanel-BKG923PM.js"),__vite__mapDeps([61,2,3,6]))),Kd=e.lazy(()=>y(()=>import("./UserWarningsPanel-ZLrgPVLY.js"),__vite__mapDeps([62,2,3,6,1,4,5,7]))),qd=e.lazy(()=>y(()=>import("./BookmarkPanel-APPOfqYf.js"),__vite__mapDeps([63,2,3,6,1,4,5,7]))),Yd=e.lazy(()=>y(()=>import("./ReadLaterPanel-CR4R4y76.js"),__vite__mapDeps([64,2,3,6,65]))),Jd=e.lazy(()=>y(()=>import("./ChannelPermissionsPanel-EmBWvUqB.js"),__vite__mapDeps([66,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MessageThreadsPanel-BXH4RhPx.js"),__vite__mapDeps([67,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./ModeratorNotesPanel-BI-eXVOB.js"),__vite__mapDeps([68,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./ServerRolesPanel-Cae4H6bZ.js"),__vite__mapDeps([69,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./NotificationPreferencesPanel-t1Tj2ci4.js"),__vite__mapDeps([70,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MessageOCRPanel-B1KQYYAQ.js"),__vite__mapDeps([71,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MassActionsPanel-DcCemiae.js"),__vite__mapDeps([72,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./TimeoutMutePanel-CX2VeYy9.js"),__vite__mapDeps([73,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./ServerThemesPanel-CWKDxvkr.js"),__vite__mapDeps([74,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./KeywordMutesPanel-kV83HxIv.js"),__vite__mapDeps([75,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./WelcomeTemplatesPanel-CzHDFP2N.js"),__vite__mapDeps([76,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./StickyMessagesPanel-BDO28O_4.js"),__vite__mapDeps([77,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MessageTemplatesPanel-CchLesTc.js"),__vite__mapDeps([78,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./MessageExportPanel-ClUj3Ov3.js"),__vite__mapDeps([79,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./ArchivedRoomsPanel-MCWik1W4.js"),__vite__mapDeps([80,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./SlowModePanel-B11vl5HS.js"),__vite__mapDeps([81,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./EmojiManagementPanel-BSx_A-Tq.js"),__vite__mapDeps([82,2,3,6,1,4,5,7])));const Zd=e.lazy(()=>y(()=>import("./MentionsInboxPanel-CHDJlqfj.js"),__vite__mapDeps([83,2,3,6,1,4,5,7]))),Xd=e.lazy(()=>y(()=>import("./CustomStatusModal-BzuuogTh.js"),__vite__mapDeps([84,2,3,6,1,4,5,7]))),Qd=e.lazy(()=>y(()=>import("./ReactionAnalyticsPanel-C9X_ciWa.js"),__vite__mapDeps([85,2,3,6,1,4,5,7]))),eu=e.lazy(()=>y(()=>import("./LinkClickTrackingPanel-cQMOAoL6.js"),__vite__mapDeps([86,2,3,6,1,4,5,7]))),tu=e.lazy(()=>y(()=>import("./JoinLeaveLogsPanel-CXEEHk4r.js"),__vite__mapDeps([87,2,3,6,1,4,5,7]))),ou=e.lazy(()=>y(()=>import("./UserActivityPanel-BvWNrYpc.js"),__vite__mapDeps([88,2,3,6,1,4,5,7]))),nu=e.lazy(()=>y(()=>import("./NicknameHistoryPanel-BxrgR-XE.js"),__vite__mapDeps([89,2,3,6,1,4,5,7]))),ru=e.lazy(()=>y(()=>import("./FieldChangeTrackingPanel-ChIW8ZJJ.js"),__vite__mapDeps([90,2,3,6,1,4,5,7]))),au=e.lazy(()=>y(()=>import("./InviteAnalyticsPanel-DMlg9KdQ.js"),__vite__mapDeps([91,2,3,6,1,4,5,7]))),su=e.lazy(()=>y(()=>import("./ContentScannerPanel-CURTfDrM.js"),__vite__mapDeps([92,2,3,6,1,4,5,7]))),iu=e.lazy(()=>y(()=>import("./EphemeralMessagesPanel-BuIBYalS.js"),__vite__mapDeps([93,2,3,6,1,4,5,7]))),lu=e.lazy(()=>y(()=>import("./TopicHistoryPanel-Mx8FRM6t.js"),__vite__mapDeps([94,2,3,6,1,4,5,7]))),cu=e.lazy(()=>y(()=>import("./DraftsPanel-GKrPtCUA.js"),__vite__mapDeps([95,2,3,6,1,4,5,7]))),du=e.lazy(()=>y(()=>import("./ServerNicknamesPanel-D8zKjwtl.js"),__vite__mapDeps([96,2,3,6,1,4,5,7]))),uu=e.lazy(()=>y(()=>import("./ServerBoostPanel-mJ2i8spw.js"),__vite__mapDeps([97,2,3,6,1,4,5,7]))),mu=e.lazy(()=>y(()=>import("./RoomWebhooksPanel-BoF66OWH.js"),__vite__mapDeps([98,2,3,6,1,4,5,7]))),fu=e.lazy(()=>y(()=>import("./OAuthAppsPanel-lJh9G_9n.js"),__vite__mapDeps([99,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./VanityURLPanel-iFjxuIeG.js"),__vite__mapDeps([100,2,3,6,1,4,5,7])));const fs=e.lazy(()=>y(()=>import("./AutoRespondersPanel-BNlP1JfZ.js"),__vite__mapDeps([101,2,3,6,1,4,5,7]))),pu=e.lazy(()=>y(()=>import("./SessionManagementPanel-BqcPW84e.js"),__vite__mapDeps([102,2,3,6,1,4,5,7]))),gu=e.lazy(()=>y(()=>import("./GDPRExportPanel-C19yvtJD.js"),__vite__mapDeps([103,2,3,6,1,4,5,7]))),hu=e.lazy(()=>y(()=>import("./DataRetentionPanel-CYqj6x9t.js"),__vite__mapDeps([104,2,3,6,1,4,5,7]))),yu=e.lazy(()=>y(()=>import("./TwoFactorSetupWizard-2rMkOH0H.js"),__vite__mapDeps([105,2,3,6,1,4,5,7]))),Su=e.lazy(()=>y(()=>import("./EnhancedPollsPanel-Cfq_DIhM.js"),__vite__mapDeps([106,2,3,6,1,4,5,7]))),bu=e.lazy(()=>y(()=>import("./VoiceTranscriptsPanel-DYkLyo0y.js"),__vite__mapDeps([107,2,3,6,1,4,5,7]))),Eu=e.lazy(()=>y(()=>import("./PaymentPanel-DVY3KW-D.js"),__vite__mapDeps([108,2,3,6,1,4,5,7]))),wu=e.lazy(()=>y(()=>import("./StoreModal-CojZgiGQ.js"),__vite__mapDeps([109,2,3,6,1,4,5,7]))),vu=e.lazy(()=>y(()=>import("./DailyRewardsModal-DonACogc.js"),__vite__mapDeps([110,2,3,6,1,4,5,7]))),_u=e.lazy(()=>y(()=>import("./APIUsagePanel-Y2IxnhKD.js"),__vite__mapDeps([111,2,3,6,1,4,5,7]))),ku=e.lazy(()=>y(()=>import("./ExportJobsPanel-C8rr_QAm.js"),__vite__mapDeps([112,2,3,6,1,4,5,7]))),xu=e.lazy(()=>y(()=>import("./ScheduledAnnouncementsPanel-BV47rbab.js"),__vite__mapDeps([113,2,3,6,1,4,5,7]))),Cu=e.lazy(()=>y(()=>import("./InviteExportPanel-Br1ZpWbf.js"),__vite__mapDeps([114,2,3,6,1,4,5,7]))),Tu=e.lazy(()=>y(()=>import("./AdvancedSearchPanel--COCky3F.js"),__vite__mapDeps([115,2,3,6,1,4,5,7]))),Au=e.lazy(()=>y(()=>import("./GrowthMetricsPanel-2-h7_Pf6.js"),__vite__mapDeps([116,2,3,6,1,4,5,7]))),Ru=e.lazy(()=>y(()=>import("./LinkPreviewRenderer-CTUVcPJI.js"),__vite__mapDeps([117,2,3,6]))),Pu=e.lazy(()=>y(()=>import("./InventoryPanel-BgMO7tXx.js"),__vite__mapDeps([118,2,3,6,1,4,5,7]))),Iu=e.lazy(()=>y(()=>import("./WaitlistPanel-CEnCuoq7.js"),__vite__mapDeps([119,2,3,6,1,4,5,7]))),Lu=e.lazy(()=>y(()=>import("./ReferralRewardsPanel-z-jL_tf4.js"),__vite__mapDeps([120,2,3,6,1,4,5,7])));e.lazy(()=>y(()=>import("./VerifyEmailPage-CfsNqQGu.js"),__vite__mapDeps([121,2,3,6,4])));e.lazy(()=>y(()=>import("./ForgotPasswordPage-DwUTZjX-.js"),__vite__mapDeps([122,2,3,6,38,4])));e.lazy(()=>y(()=>import("./ResetPasswordPage-DhhAPN71.js"),__vite__mapDeps([123,2,3,6,4])));e.lazy(()=>y(()=>import("./TwoFactorLoginPage-BAo68qYy.js"),__vite__mapDeps([124,2,3,4,6,1,5,7])));e.lazy(()=>y(()=>import("./TwoFactorSetup-CtxGJkh6.js"),__vite__mapDeps([125,2,3,1,4,5,6,7,126])));e.lazy(()=>y(()=>import("./TwoFactorLogin-NYOByexZ.js"),__vite__mapDeps([127,2,3,128])));const Ou=e.lazy(()=>y(()=>import("./VanityInviteScreen-B4PHBlOh.js"),__vite__mapDeps([129,2,3,9])));e.lazy(()=>y(()=>import("./EmailVerification-BE1xgEuK.js"),__vite__mapDeps([130,2,3,4,131])));e.lazy(()=>y(()=>import("./MobileNav--ZizGSGJ.js"),__vite__mapDeps([132,2,3,133])));e.lazy(()=>y(()=>import("./SwipeActions-CXI45k7R.js"),__vite__mapDeps([134,2,3,135])));e.lazy(()=>y(()=>import("./VoiceMessage-EeXaqU66.js"),__vite__mapDeps([136,2,3,1,4,5,6,7,137])));const Du=e.lazy(()=>y(()=>import("./FriendsTab-CQCKDqmJ.js"),__vite__mapDeps([138,2,3,6,24,1,4,5,7]))),Mu=e.lazy(()=>y(()=>import("./RoomList-DZL1iqnc.js"),__vite__mapDeps([139,2,3,6,5,140,30,11,1,4,7,10,24]))),$u=e.lazy(()=>y(()=>import("./UserProfilePanel-HiXzxPu_.js"),__vite__mapDeps([141,2,3,142,1,41,42,4,5,6,7,143]))),ps=e.lazy(()=>y(()=>import("./VoiceChatPanel-DVsV-Fut.js"),__vite__mapDeps([144,2,3,145,9,146,6,5,1,4,7,147]))),zu=e.lazy(()=>y(()=>import("./ChatUserList-CTtBos9O.js"),__vite__mapDeps([148,2,3,6,4]))),Vu=e.lazy(()=>y(()=>import("./PinnedMessages-B0G-oBlj.js"),__vite__mapDeps([149,2,3,23,1,6,24,25,26,27,9,4,5,7]))),Uu=e.lazy(()=>y(()=>import("./FloatingVoiceIsland-QkrgBdse.js"),__vite__mapDeps([150,2,3,145,9,151]))),Bu=e.lazy(()=>y(()=>import("./CinemaPlayer-CardOi1Y.js"),__vite__mapDeps([152,1,2,3,6,4,5,7]))),Nu=e.lazy(()=>y(()=>import("./ConnectionsPanel-DhcnksSB.js"),__vite__mapDeps([153,2,3,6,1,4,5,7,154]))),Fu=e.lazy(()=>y(()=>import("./PasswordSetupModal-Dca7aeQ5.js"),__vite__mapDeps([155,2,3,6,1,4,5,7,156]))),Wu=e.lazy(()=>y(()=>import("./NotificationDropdown-DJYYJdEt.js"),__vite__mapDeps([157,2,3,6])));e.lazy(()=>y(()=>import("./ReactionStatsPanel-By48Szwh.js"),__vite__mapDeps([158,2,3,6,1,4,5,7,159])));e.lazy(()=>y(()=>import("./ServerHealthPanel-CJWWy1EM.js"),__vite__mapDeps([160,2,3,6,1,4,5,7,161])));e.lazy(()=>y(()=>import("./ChannelAnalyticsPanel-BxtYQseH.js"),__vite__mapDeps([162,2,3,6,1,4,5,7,163])));e.lazy(()=>y(()=>import("./SmartSuggestionsPanel-S30wtCm6.js"),__vite__mapDeps([164,2,3,6,1,4,5,7,165])));e.lazy(()=>y(()=>import("./UserPresenceInsightsPanel-BCbWuir2.js"),__vite__mapDeps([166,2,3,6,1,4,5,7,167])));e.lazy(()=>y(()=>import("./UserFooter-CQZP0SSS.js").then(s=>s.a),__vite__mapDeps([140,2,3,6])));const ju=e.lazy(()=>y(()=>import("./UserContextMenu-C_K32ir-.js"),__vite__mapDeps([146,2,3,6]))),Gu=e.lazy(()=>y(()=>import("./MiniGamesPanel-DtP8EF5t.js"),__vite__mapDeps([168,2,3,6,1,4,5,7]))),Hu=e.lazy(()=>y(()=>import("./ProjectCollaborationPanel-B_qhk4zO.js"),__vite__mapDeps([169,2,3,6,1,4,5,7]))),Ku=e.lazy(()=>y(()=>import("./AvatarStudioPanel-DY2hE1Gx.js"),__vite__mapDeps([170,2,3,6,1,4,5,7]))),qu="8888",So=typeof window<"u"&&typeof window.require=="function",Ot=window.Capacitor&&window.Capacitor.isNativePlatform(),qo=(()=>{if(Ot||So)return"https://api.pawscord.com";const s=window.location.protocol,n=window.location.hostname;return n.includes("pawscord.com")?"https://api.pawscord.com":`${s}//${n}:${qu}`})(),yo=So||Ot?"https://www.pawscord.com":qo,W=`${qo}/api`,P=qo,Nn=qo.startsWith("https")?"wss":"ws",Fn=qo.replace(/^https?:\/\//,""),gs=`${W}/auth/login/`,hs=`${W}/auth/register/`,Yu=`${W}/messages/history/room/`,Ju=`${W}/messages/history/dm/`,Vr=`${W}/rooms/list_with_categories/`,Zu=`${W}/conversations/`,Xu=`${W}/conversations/find_or_create/`,Qu=`${W}/users/update_profile/`,em=`${W}/users/default_avatars/`,tm=`${W}/users/change_username/`,om=`${W}/gifs/list_local/`,ys="chat_drafts_v1",Wn=()=>(Date.now()+Math.floor(Math.random()*1e3)).toString(),nm=s=>new Promise((n,r)=>{const l=Math.ceil(s.size/2097152);let p=0;const k=new Vl.ArrayBuffer,T=new FileReader;T.onload=D=>{k.append(D.target.result),p++,p<l?C():n(k.end())},T.onerror=D=>r(D);function C(){const D=p*2097152,G=Math.min(D+2097152,s.size);T.readAsArrayBuffer(s.slice(D,G))}C()}),rm=()=>{const{user:s,isAuthenticated:n,token:r,login:u,logout:l,isLoading:p}=wo(),{isInVoice:k,isConnecting:T,currentRoom:C,joinChannel:D,leaveChannel:G,isMuted:O,isDeafened:z,toggleMute:J,toggleDeafened:H,toggleVideo:V,toggleScreenShare:U,remoteVolumes:j,setRemoteVolume:q,localCameraStream:de,remoteStreams:oe,isTalking:Z,sendSignal:ae,isScreenSharing:ue,isVideoEnabled:Y,isPttActive:pe,localScreenStream:Ee,sendReaction:Ue,lastReaction:Q,applyVoiceEffect:Se,activeEffect:Be,cinemaState:Me,setCinemaState:wt,gameState:He,sendGameSignal:Te,mutedUsers:dt}=nd(),{globalData:Yo}=Ls(),d=Ce(t=>t.activeChat),vo=Ce(t=>t.messages),Xt=Ce(t=>t.encryptionKeys),qn=Ce(t=>t.voiceUsers),Jo=Ce(t=>t.unreadCounts),ce=Ce(t=>t.setActiveChat);Ce(t=>t.addMessage),Ce(t=>t.updateMessage);const we=Ce(t=>t.setMessages),Zo=Ce(t=>t.setTypingUser),Xo=Ce(t=>t.setOnlineUsers),Yn=Ce(t=>t.setVoiceUsers),Jn=Ce(t=>t.incrementUnread),Zn=Ce(t=>t.setEncryptionKey),[Xn,Qo]=o.useState(!1),[en,vt]=o.useState(!1),[Qn,Qt]=o.useState(!1),[er,tn]=o.useState(!1),[Qr,ut]=o.useState(!1),[on,Dt]=o.useState(null),[tr,Mt]=o.useState(!1),[or,nn]=o.useState(0),[nr,ge]=o.useState(""),I=s?.username||"",[eo,_o]=o.useState(!1),[ko,rr]=o.useState(!1),[We,to]=o.useState(null),{isMobile:ee}=Vc(),[rn,an]=o.useState(""),$t=Kc(rn,300),[zt,xo]=o.useState("0px"),sn=Ot?"max(20px, env(safe-area-inset-bottom))":"0px",[Ne,ln]=o.useState({width:300,height:225,x:100,y:100}),[mt,Co]=o.useState(!0),[_t,tt]=o.useState(!0),[oo,To]=o.useState(!1),[F,se]=o.useState("start"),[ft,ve]=o.useState([]),[B,_e]=o.useState([]),[ne,pt]=o.useState([]),[ot,nt]=o.useState([]),[Fe,rt]=o.useState([]),[Ke,Vt]=o.useState(!1),[Ao,ke]=o.useState(!1),[Ro,qe]=o.useState(!1),[ar,cn]=o.useState(!1),[no,dn]=o.useState(!1),[sr,un]=o.useState(!1),[ir,Ye]=o.useState(""),[lr,Po]=o.useState(!1),[Pe,Ut]=o.useState(!1),[Bt,Ie]=o.useState(new Set),[Nt,kt]=o.useState(null),[at,st]=o.useState(null),[cr,mn]=o.useState(null),[ro,Io]=o.useState(!1),[dr,Ft]=o.useState(!1),[ur,Lo]=o.useState(!1),[Oo,fn]=o.useState(!1),[mr,pn]=o.useState(!1),[ea,fr]=o.useState(!1),[pr,ao]=o.useState(!1),[gn,Do]=o.useState(!1),[gr,xt]=o.useState(!1),[it,Wt]=o.useState(!1),[so,i]=o.useState(!1),[f,g]=o.useState(!1),[v,x]=o.useState(!1),[E,b]=o.useState(!1),[S,A]=o.useState(!1),[M,K]=o.useState(!1),[re,me]=o.useState(!1),[$e,gt]=o.useState(!1),[Je,jt]=o.useState(!1),[Ct,Tt]=o.useState(!1),[hn,yn]=o.useState(!1),[Mo,ta]=o.useState(!1),[oa,zs]=o.useState(!1),[na,Sn]=o.useState(!1),[Gt,lt]=o.useState(!1),[$o,bn]=o.useState(!1),[hr,yr]=o.useState(!1),[Vs,Us]=o.useState(!1),[Bs,Ns]=o.useState(!1),[Fs,Ws]=o.useState(!1),[js,Gs]=o.useState(!1),[Hs,Ks]=o.useState(!1),[qs,Ys]=o.useState(!1),[Js,Zs]=o.useState(!1),[Xs,ra]=o.useState(!1),[Qs,ei]=o.useState(!1),[ti,oi]=o.useState(!1),[ni,ri]=o.useState(!1),[ai,si]=o.useState(!1),[ii,li]=o.useState(!1),[ci,di]=o.useState(!1),[ui,mi]=o.useState(!1),[fi,pi]=o.useState(!1),[gi,aa]=o.useState(!1),[hi,yi]=o.useState(!1),[Si,bi]=o.useState(!1),[Ei,wi]=o.useState(!1),[vi,sa]=o.useState(!1),[_i,ki]=o.useState(!1),[xi,Ci]=o.useState(!1),[Ti,Ai]=o.useState(!1),[Ri,Pi]=o.useState(!1),[Ii,Li]=o.useState(!1),[Oi,ia]=o.useState(!1),[Di,la]=o.useState(!1),[Mi,ca]=o.useState(!1),[Um,Bm]=o.useState(!1),[Nm,Fm]=o.useState(!1),[Wm,jm]=o.useState(!1),[Gm,Hm]=o.useState(!1),[Km,qm]=o.useState(!1),[Ym,Jm]=o.useState(!1),[Zm,Xm]=o.useState(!1),[Qm,ef]=o.useState(!1),[tf,of]=o.useState(!1),[nf,rf]=o.useState(!1),[$i,da]=o.useState("default"),[ua,io]=o.useState(null),[af,sf]=o.useState(!1),[zi,En]=o.useState(!1),[lf,wn]=o.useState(!0),[cf,Sr]=o.useState(0),[lo,Vi]=o.useState(!1),[Ht,br]=o.useState([]),[Ui,Bi]=o.useState(0),[At,ma]=o.useState([]),[Kt,Rt]=o.useState([]),[df,Ni]=o.useState(null),[ct,vn]=o.useState(null),[fa,pa]=o.useState(!1),[Fi,ga]=o.useState(!1),[ha,ya]=o.useState(null),[Sa,Er]=o.useState(!1),[Wi,ba]=o.useState(!1),[ji,_n]=o.useState(""),[zo,Ea]=o.useState(()=>JSON.parse(localStorage.getItem("chat_sound_settings"))||{notifications:!0,mentions:!0,userJoinLeave:!0}),[kn,wr]=o.useState(null),[Gi,wa]=o.useState(!1),[va,xn]=o.useState(!1),[_a,vr]=o.useState(!1),[_r,Cn]=o.useState(0),[uf,mf]=o.useState(!1),[ff,co]=o.useState(!1),[pf,uo]=o.useState(""),[Hi,Tn]=o.useState(!1),[gf,mo]=o.useState(null),[hf,ka]=o.useState(null),[yf,xa]=o.useState(null),[Ca,Sf]=o.useState(!1),[kr,Ta]=o.useState(!1),[Vo,Le]=o.useState(!1),[An,Aa]=o.useState(null),[Uo,Rn]=o.useState(null),[Ki,Ra]=o.useState(!1),[qi,Pa]=o.useState(!1),[Yi,Ia]=o.useState(!1),[Ji,La]=o.useState(!1),[Zi,Oa]=o.useState(!1),[Xi,Da]=o.useState(!1),[Ma,$a]=o.useState(null),[Qi,za]=o.useState(!1),[el,Va]=o.useState(!1),Ua=Ce(t=>t.typingUsers),Ba=o.useMemo(()=>Ua.filter(t=>t!==I),[Ua,I]);o.useRef(null),o.useRef([]);const xe=o.useRef(null),Pn=o.useRef(null),xr=o.useRef(null);o.useRef(null);const Bo=o.useRef(null),Cr=o.useRef(null),Na=o.useRef(null),ht=o.useRef({}),Ae=I==="Eastkhan"||I==="PawPaw"||ct?.role==="admin",tl=o.useMemo(()=>{const t=B?.find(h=>h.id===d?.serverId),a=t?.owner===I||t?.created_by===I,m=Kt?.find(h=>h.username===I)?.role==="moderator";return{isAdmin:Ae,isServerOwner:a,isModerator:m,canKick:Ae||a||m,canBan:Ae||a,canMute:Ae||a||m,canWarn:Ae||a||m,canManageRoles:Ae||a}},[Ae,B,d?.serverId,I,Kt]),ol=o.useMemo(()=>{if(!B||B.length===0)return[];if(!At||At.length===0)return B;const t=[],a=[];return At.forEach(m=>{const h=B.find(c=>c.id===m);h&&t.push(h)}),B.forEach(m=>{At.includes(m.id)||a.push(m)}),[...t,...a]},[B,At]),Tr=Ce(t=>t.onlineUsers),nl=Ce(t=>t.messages),Ar=Uc(nl,$t);Bc(ne),o.useEffect(()=>{if(F==="finished")return;se("start");const t=setTimeout(()=>se("pre-transition"),1500),a=setTimeout(()=>se("finished"),2200),m=setTimeout(()=>se("finished"),3e3);return()=>{clearTimeout(t),clearTimeout(a),clearTimeout(m)}},[]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search),a=t.get("verification"),m=t.get("username"),h=t.get("reason"),c=t.get("needs_password");if(a==="success")$.success(`‚úÖ Email doƒürulandƒ±! Ho≈ügeldin ${m||"kullanƒ±cƒ±"}!`),window.history.replaceState({},document.title,window.location.pathname);else if(a==="failed"){const w=h==="expired"?"‚è∞ Doƒürulama linki s√ºresi dolmu≈ü. Yeni bir link talep edin.":"‚ùå Ge√ßersiz doƒürulama linki.";$.error(w),window.history.replaceState({},document.title,window.location.pathname)}c==="true"&&(console.log("üîë [Auth] Google user needs to set password"),Va(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search),a=t.get("success"),m=t.get("coins"),h=t.get("session_id"),c=t.get("canceled");a==="true"&&m&&((async()=>{try{const R=localStorage.getItem("access_token"),X="https://api.pawscord.com/api";if(h){const L=await(await fetch(`${X}/payments/verify/`,{method:"POST",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"},body:JSON.stringify({session_id:h,coin_amount:parseInt(m)})})).json();L.success?L.already_processed?$.info(`?? ÔøΩdeme zaten islendi! Bakiye: ${L.balance} coin`):$.success(`?? ${m} coin hesabina eklendi! Yeni bakiye: ${L.balance} coin`):$.error(L.error||"ÔøΩdeme dogrulama hatasi")}else $.success(`?? ÔøΩdeme basarili! ${m} coin hesabina eklendi.`)}catch(R){console.error("Payment verification error:",R),$.success(`?? ${m} coin satin alma tamamlandi!`)}})(),window.history.replaceState({},document.title,window.location.pathname)),c==="true"&&($.info("? ÔøΩdeme iptal edildi."),window.history.replaceState({},document.title,window.location.pathname))},[]),o.useEffect(()=>{const a=window.location.hash.match(/^#\/join\/([^/?]+)/);if(a){const m=a[1];console.log("üîó [Vanity] Detected vanity path:",m),$a(m)}},[]),o.useEffect(()=>(window.showAutoModeration=()=>Do(!0),window.showRaidProtection=()=>xt(!0),window.showReportSystem=()=>Wt(!0),window.showAuditLog=()=>i(!0),window.showUserWarnings=()=>g(!0),()=>{delete window.showAutoModeration,delete window.showRaidProtection,delete window.showReportSystem,delete window.showAuditLog,delete window.showUserWarnings}),[]),o.useEffect(()=>{const t=a=>{Vo&&!a.target.closest(".toolbar-menu-container")&&Le(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[Vo]),o.useEffect(()=>{const t=()=>{za(!0)};return window.addEventListener("openConnectionsPanel",t),()=>window.removeEventListener("openConnectionsPanel",t)},[]),o.useEffect(()=>{_c(),xc(),Cc(),Dc(),setTimeout(()=>{Cs()},3e3),"requestIdleCallback"in window&&requestIdleCallback(()=>{Fr()}),n&&s&&y(async()=>{const{pushNotificationManager:t}=await import("./pushNotifications-B0mEtdmm.js");return{pushNotificationManager:t}},__vite__mapDeps([171,1,2,3])).then(({pushNotificationManager:t})=>{t.init(W,_)}),Ot&&y(async()=>{const{initializeDeepLinkHandler:t}=await import("./urlHandlers-DTgF3H8F.js");return{initializeDeepLinkHandler:t}},__vite__mapDeps([172,1,2,3,4,5,6,7])).then(({initializeDeepLinkHandler:t})=>{console.log("‚úÖ Deep link handler ready")}),console.log("‚úÖ PWA ve optimizasyonlar aktif!")},[n,s]);const No=o.useMemo(()=>{if(d.type==="room"){if(B){for(const t of B)if(t.categories)for(const a of t.categories){const m=a.rooms?.find(h=>h.slug===d.id);if(m)return String(m.name)}}return String(d.id)}else if(d.type==="dm")return`@ ${String(d.targetUser||"DM")}`;return""},[d,B]),fo=o.useMemo(()=>!d||!d.id?"":`${d.type}-${d.id}`,[d]),In=o.useCallback(()=>{try{const t=localStorage.getItem(ys);if(!t)return{};const a=JSON.parse(t);return a&&typeof a=="object"?a:{}}catch(t){return console.warn("Taslak okunamadƒ±",t),{}}},[]),rl=o.useCallback(t=>{if(!fo)return;const a=In();a[fo]=t,localStorage.setItem(ys,JSON.stringify(a))},[fo,In]);o.useEffect(()=>{if(!fo){uo(""),co(!1);return}const a=In()[fo]||"";uo(a),co(!!a.trim())},[fo,In]);const al=o.useMemo(()=>{if(d.type!=="room"||!B)return"text";for(const t of B)if(t.categories)for(const a of t.categories){const m=a.rooms?.find(h=>h.slug===d.id);if(m)return m.channel_type}return"text"},[d,B]),Pt=o.useCallback((t="auto")=>{xr.current&&xr.current.scrollIntoView({behavior:t})},[]),Rr=o.useCallback(()=>{const t=Cr.current;return t?t.scrollHeight-t.scrollTop-t.clientHeight<160:!0},[]),Pr=o.useCallback(()=>{const t=Cr.current;if(!t)return;const a=t.scrollHeight-t.scrollTop-t.clientHeight;Tn(a>160)},[]),sl=qc(Pr,100),je=o.useCallback(t=>{if(t==="‚ö° Signal Bot")return`${yo}/static/bot/signal.png`;if(t==="PawPaw AI")return`${yo}/static/bot/ai.png`;if(!t||!Fe||Fe.length===0)return`${yo}/avatars/cat_1.png`;let a=0;for(let w=0;w<t.length;w++)a=t.charCodeAt(w)+((a<<5)-a);const m=Math.abs(a%Fe.length),h=Fe[m];let c;return typeof h=="object"&&h!==null?c=h.original||h.thumbnail||h.url:typeof h=="string"&&(c=h),!c||typeof c!="string"?`${yo}/avatars/cat_1.png`:c.startsWith("http")||c.startsWith("blob:")?c:(c.startsWith("/")||(c="/"+c),`${yo}${c}`)},[Fe]),Ze=o.useCallback(t=>{const a=ne.find(m=>m.username===t);if(a&&a.avatar&&typeof a.avatar=="string"){if(a.avatar.startsWith("http://")||a.avatar.startsWith("https://")||a.avatar.startsWith("blob:"))return a.avatar;let m=a.avatar;return m.startsWith("/")||(m="/"+m),`${yo}${m}`}return je(t)},[ne,je]),_=o.useCallback(async(t,a={})=>{const m=a.headers||{};r&&(m.Authorization=`Bearer ${r}`),a.body instanceof FormData||(m["Content-Type"]="application/json");try{const c=t.includes("upload")||a.body instanceof FormData?3e5:3e4,w=new AbortController,R=setTimeout(()=>w.abort(),c),X=await fetch(t,{...a,headers:m,signal:w.signal});if(clearTimeout(R),X.status===401)throw t.includes("/auth/")||t.includes("/login")?(console.warn("‚ö†Ô∏è [Auth] 401 on auth endpoint, logging out"),l()):console.warn("‚ö†Ô∏è [Auth] 401 error on:",t,"- NOT logging out"),new Error("Unauthorized");return X}catch(h){throw h.name==="AbortError"?(console.error("‚è±Ô∏è [Fetch] Request timed out:",t),new Error("ƒ∞stek zaman a≈üƒ±mƒ±na uƒüradƒ±")):(console.error("Fetch error:",h),h)}},[r,l]);Hc(),o.useEffect(()=>{const t=window.location.hash,a=t.includes("?")?t.split("?")[1]:"",h=new URLSearchParams(a).get("join_server");if(h&&n&&B&&B.length>0){console.log("üîó [Vanity URL] Found join_server parameter:",h);const c=B.find(w=>w.id===parseInt(h));if(c){if(console.log(`üîó Vanity URL: Redirecting to server ${c.name}`),c.categories&&c.categories.length>0){const w=c.categories[0];if(w.rooms&&w.rooms.length>0){const R=w.rooms[0];ce({type:"room",id:R.slug})}}window.history.replaceState({},document.title,"/#/")}else console.log(`üîó Vanity URL: Server ${h} not found, showing invite modal`),(async()=>{try{const R=await _(`${W}/servers/${h}/join/`,{method:"POST"});if(R.ok)$.success("Sunucuya katƒ±ldƒ±nƒ±z!"),window.location.reload();else{const X=await R.json();$.error(X.error||"Sunucuya katƒ±lƒ±namadƒ±")}}catch(R){console.error("Join server error:",R),$.error("Sunucuya katƒ±lƒ±rken hata olu≈ütu")}finally{window.history.replaceState({},document.title,"/#/")}})()}},[n,B,_]);const Fa=o.useCallback(async t=>{try{await _(`${W}/user/server-order/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_order:t})}),console.log("üíæ Server order saved:",t)}catch(a){console.error("Server order save error:",a)}},[_]),il=(t,a,m)=>{t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("serverId",a.toString()),t.dataTransfer.setData("sourceIndex",m.toString());const h=t.currentTarget.cloneNode(!0);h.style.position="absolute",h.style.top="-9999px",h.style.opacity="0.8",h.style.transform="rotate(5deg)",h.style.pointerEvents="none",document.body.appendChild(h),t.dataTransfer.setDragImage(h,24,24),setTimeout(()=>{document.body.contains(h)&&document.body.removeChild(h)},0),t.currentTarget.style.opacity="0.4"},ll=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},cl=t=>{t.currentTarget.style.opacity="1"},dl=o.useCallback((t,a)=>{t.preventDefault(),parseInt(t.dataTransfer.getData("serverId"));const m=parseInt(t.dataTransfer.getData("sourceIndex"));if(console.log("üìù DROP: sourceIndex:",m,"‚Üí targetIndex:",a),m===a){console.log("‚ùå Aynƒ± yere bƒ±rakƒ±lƒ±yor (sourceIndex === targetIndex), i≈ülem iptal");return}let h=At.length>0?[...At]:B.map(R=>R.id);console.log("üìù Mevcut sƒ±ralama:",h),console.log("üîÑ Kaynak index:",m,"‚Üí Hedef index:",a);const[c]=h.splice(m,1),w=m<a?a-1:a;console.log("üéØ Adjusted target index:",w),h.splice(w,0,c),console.log("‚úÖ Yeni sƒ±ralama:",h),ma(h),Fa(h)},[At,B,Fa]),Wa=t=>{const a=document.getElementById(`message-${t}`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})},ul=async()=>{if(window.confirm("Bu odadaki t√ºm mesajlarƒ± silmek istediƒüine emin misin?"))try{(await _(`${W}/rooms/${d.id}/clear/`,{method:"POST"})).ok&&we([])}catch(t){console.error(t)}},ml=async()=>{Er(!0),ba(!0),_n("");try{const t=await _(`${W}/rooms/${d.id}/summarize/`,{method:"POST"}),a=await t.json();t.ok?_n(a.summary):_n("Hata: "+a.error)}catch{_n("Baƒülantƒ± hatasƒ±.")}ba(!1)},Ir=t=>{if(console.log("üì§ [DEBUG] sendMessage called with:",t),console.log("üì§ [DEBUG] ws.current:",xe.current),console.log("üì§ [DEBUG] ws.current.readyState:",xe.current?.readyState),console.log("üì§ [DEBUG] activeChat:",d),!t)return;const a=t.trim();if(!a)return;if(a==="/tema"){Ft(!0),mo(null),co(!1),uo(""),Bo.current?.clear?.();return}if(a==="/sablon"){ut(!0),mo(null),co(!1),uo(""),Bo.current?.clear?.();return}if(a.startsWith("/duyuru ")){const L=a.slice(8).trim();if(L){const le={type:d.type==="room"?"chat_message":"dm_message",message:`[ANNOUNCE] ${L}`,username:I,temp_id:Wn(),...d.type==="room"?{room:d.id}:{conversation:d.id}};xe.current?.send(JSON.stringify(le)),io({message:L,type:"info",author:I}),mo(null),co(!1),uo(""),Bo.current?.clear?.();return}}mo(null),co(!1),uo(""),rl("");const m=d.type==="room"?`room-${d.id}`:`dm-${d.id}`,h=Xt[m];let c=a;d.type==="dm"&&h&&(c=zc(a,h));const w={type:d.type==="room"?"chat_message":"dm_message",message:c,username:I,temp_id:Wn(),...d.type==="room"?{room:d.id}:{conversation:d.id}},R=JSON.stringify(w),X=async()=>{let be=0;for(;xe.current&&xe.current.readyState===WebSocket.CONNECTING&&be<3e3;)await new Promise(ze=>setTimeout(ze,100)),be+=100;if(xe.current&&xe.current.readyState===WebSocket.OPEN)try{return xe.current.send(R),!0}catch(ze){return console.error("WebSocket send error:",ze),!1}return!1},ie=async()=>{try{const L=d.type==="dm"?`${W}/messages/send_dm/`:`${W}/messages/send/`,le=d.type==="dm"?{conversation_id:d.id,content:c}:{room:d.id,content:c};return(await _(L,{method:"POST",body:JSON.stringify(le)})).ok}catch(L){return console.error("HTTP fallback error:",L),!1}};(async()=>await X()||await ie())(),we(L=>{const le={...w,content:c,timestamp:new Date().toISOString(),id:w.temp_id,avatar:ct?.avatar||je(I)},be=[...L,le],ze=d.type==="room"?`room-${d.id}`:`dm-${d.id}`;return ht.current[ze]&&(ht.current[ze].messages=be),be}),Bo.current?.clear?.(),Pt("smooth")},fl=t=>{const a={type:d.type==="room"?"chat_message":"dm_message",message:"",username:I,temp_id:Wn(),snippet_data:t,...d.type==="room"?{room:d.id}:{conversation:d.id}};xe.current?.send(JSON.stringify(a)),we(m=>[...m,{...a,timestamp:new Date().toISOString(),id:a.temp_id,avatar:ct?.avatar||je(I)}]),_o(!1)},Lr=o.useCallback(()=>{if(!d.id||d.type==="welcome"||d.type==="friends"||!I)return;if(xe.current&&xe.current.readyState===WebSocket.OPEN){const h=xe.current.url,c=d.type==="room"?`/ws/chat/${d.id}/`:`/ws/dm/${d.id}/`;if(h.includes(c)){console.log("‚è≠Ô∏è [WebSocket] Already connected to this chat, skipping reconnect");return}}xe.current&&(console.log("üîå [WebSocket] Closing existing connection before new one"),xe.current.close(1e3,"change_room"));let t="";const a=`?username=${encodeURIComponent(I)}&token=${r}`;if(d.type==="room"?t=`${Nn}://${Fn}/ws/chat/${d.id}/${a}`:d.type==="dm"&&(t=`${Nn}://${Fn}/ws/dm/${d.id}/${a}`),!t){console.log("‚è≠Ô∏è [WebSocket] Skipping - activeChat.type is not room/dm:",d.type);return}console.log("üîå [WebSocket] Connecting to:",t.split("?")[0]);const m=new WebSocket(t);xe.current=m,m.onopen=()=>{console.log("‚úÖ [WebSocket] Connected successfully"),Vt(!0)},m.onmessage=h=>{const c=JSON.parse(h.data);if(c.type==="chat"||c.type==="dm"||c.type==="chat_message_handler"){console.log("üì® [WebSocket] Message data:",{type:c.type,id:c.id,temp_id:c.temp_id,room:c.room,conversation:c.conversation});const w=R=>R.room?`room-${R.room}`:R.conversation?`dm-${R.conversation}`:(console.warn("‚ö†Ô∏è [WebSocket] No room/conversation in message, using activeChat fallback"),d.type==="room"?`room-${d.id}`:`dm-${d.id}`);we(R=>{if(c.temp_id){const L=R.findIndex(le=>le.temp_id===c.temp_id);if(L!==-1){console.log("üîÑ [WebSocket] Replacing temp message with real message:",c.temp_id,"‚Üí",c.id);const le=[...R];le[L]=c;const be=w(c);return ht.current[be]&&(ht.current[be].messages=le),le}}if(c.id&&R.some(L=>L.id===c.id))return console.log("‚è≠Ô∏è [WebSocket] Duplicate message (by ID) skipped:",c.id),R;console.log("üì® [WebSocket] New message received:",c);const X=[...R,c],ie=w(c);return ht.current[ie]&&(ht.current[ie].messages=X),X}),Zo(c.username,!1),Rr()?Pt("smooth"):Tn(!0)}else c.type==="typing_status_update"?c.username!==I&&Zo(c.username,c.is_typing):c.type==="chat_cleared"&&we([]);if(c.message&&c.message.startsWith("[ANNOUNCE] ")){const w=c.message.replace("[ANNOUNCE] ","");io({message:w,type:"info",author:c.username})}},m.onerror=h=>{console.error("‚ùå [WebSocket] Connection error:",h)},m.onclose=h=>{console.log("üîå [WebSocket] Connection closed:",h.code,h.reason),Vt(!1)}},[d.id,d.type,I,r]);o.useEffect(()=>{Eo.isNativePlatform()&&(Ec.initialize({clientId:As,scopes:["profile","email"],grantOfflineAccess:!0}),xo("max(35px, env(safe-area-inset-top))"))},[]),o.useEffect(()=>{n&&!lo&&(async()=>{try{const[a,m,h,c,w]=await Promise.all([_(em).then(L=>L.json()),_(Vr).then(L=>L.json()),_(`${Zu}?username=${encodeURIComponent(I)}`).then(L=>L.json()),_(`${W}/friends/list/`).then(L=>L.json()),_(`${W}/users/me/`).then(L=>L.json())]);rt(a);const R={username:w?.username||I,email:w?.email||"",avatar:w?.avatar||null,status_message:w?.status_message||"",friend_code:w?.friend_code||"0000",social_links:w?.social_links||{},coins:w?.coins||0,xp:w?.xp||0,level:w?.level||1,status:"online",role:w?.role||"member",is_whitelisted:w?.is_whitelisted||!1};vn(R),console.log("üî• [DEBUG] currentUserProfile with is_whitelisted:",R);const ie=(c.friends||[]).map(L=>{const le=L.sender_username===I,be=le?L.receiver_username:L.sender_username,ze=le?L.receiver_avatar:L.sender_avatar,It=le?L.receiver_status:L.sender_status,Oe=le?L.receiver_activity:L.sender_activity;return be?{username:be,avatar:ze,status:It||"offline",display_name:be,current_activity:Oe||{},status_message:"",last_seen:L.created_at,role:"friend",friend_code:""}:null}).filter(Boolean).filter(L=>L.username!==R.username);pt(ie),_e(m),ve(h),br(ie),Vi(!0),y(async()=>{const{prefetchUserAvatars:L}=await import("./imageCaching-B8rCcNnf.js");return{prefetchUserAvatars:L}},__vite__mapDeps([25,2,3])).then(({prefetchUserAvatars:L})=>{L(ie)})}catch(a){console.error("Init Data Error",a),Ye("Veriler y√ºklenemedi.")}})()},[n,lo,_,I]),o.useEffect(()=>{I&&(async()=>{try{const a=await _(`${W}/user/server-order/`);if(a.ok){const m=await a.json();ma(m.server_order||[]),console.log("üéØ Server order loaded:",m.server_order)}}catch(a){console.error("Server order fetch error:",a)}})()},[I,_]),o.useEffect(()=>{const t=async()=>{if(!d.id||d.type!=="room"){io(null);return}try{const a=await _(`${W}/stickies/list/?room=${d.id}`);if(a.ok){const m=await a.json();m&&m.length>0?io({message:m[0].content,type:"info",author:m[0].creator}):io(null)}}catch(a){console.error("Sticky messages fetch error:",a)}};n&&d.id&&t()},[d.id,d.type,n,_]);const Ln=o.useCallback(async t=>{if(!t){Rt([]);return}try{console.log(`üîç [Server Members] Fetching members for server ${t}...`);const a=await _(`${W}/servers/${t}/members/`);if(a.ok){const m=await a.json();console.log(`üë• [Server Members] Fetched ${m.length} members for server ${t}:`,m),Rt(m)}else{const m=await a.text();console.error("‚ùå Server members fetch failed:",a.status,m),Rt([])}}catch(a){console.error("‚ùå Server members fetch error:",a),Rt([])}},[_]),pl=o.useCallback(t=>{console.log("üñ±Ô∏è [Server Select] Server clicked:",t.name,t.id),Ni(t),Ln(t.id),ce("server",t.id,null)},[Ln,ce]);o.useEffect(()=>{const t=async()=>{if(!d.id||d.type!=="room"){d.type!=="server"&&Rt([]);return}try{let a=null;for(const m of B){if(!m.categories||!Array.isArray(m.categories)){console.warn("‚ö†Ô∏è Server has no categories array:",m);continue}for(const h of m.categories)if(!(!h.rooms||!Array.isArray(h.rooms))){for(const c of h.rooms)if(c.slug===d.id){a=m.id;break}if(a)break}if(a)break}if(!a){console.warn("üî¥ Server ID bulunamadƒ± for room:",d.id),Rt([]);return}Ln(a)}catch(a){console.error("‚ùå Server members fetch error:",a),Rt([])}};n&&d.id&&d.type==="room"?t():d.type!=="server"&&Rt([])},[d.id,d.type,n,Ln,B]),o.useEffect(()=>{const t=async()=>{try{const m=await fetch(`${W}/maintenance/status/`);if(m.ok){const h=await m.json();h.active?wr({message:h.message||"System maintenance in progress",endTime:h.end_time,level:h.level||"info"}):wr(null)}}catch(m){console.error("Maintenance check error:",m)}};t();const a=setInterval(t,300*1e3);return()=>clearInterval(a)},[]),o.useEffect(()=>{const t=(h,c)=>{try{const w=h.split(".").map(Number),R=c.split(".").map(Number);return w[0]>R[0]?!0:w[0]<R[0]?!1:w[1]>R[1]?!0:w[1]<R[1]?!1:w[2]>R[2]}catch(w){return console.error("‚ùå Version kar≈üƒ±la≈ütƒ±rma hatasƒ±:",w),!1}},a=async()=>{const h=window.location.hostname==="localhost"&&window.location.port==="3000";if(!So&&!Ot&&!h){console.log("‚è≠Ô∏è Version check atlandƒ± (web browser)");return}try{console.log("üîç Version kontrol√º yapƒ±lƒ±yor...",{isElectron:So,isNative:Ot,isDebugMode:h,hostname:window.location.hostname});let c="1.1.205";if(window.electron?.getAppVersion)try{c=await window.electron.getAppVersion(),console.log("üñ•Ô∏è Electron version:",c)}catch(L){console.warn("‚ö†Ô∏è Electron version alƒ±namadƒ±:",L)}console.log("üì¶ Mevcut versiyon:",c);const w=await fetch("https://media.pawscord.com/builds/version.json");if(!w.ok){console.warn("‚ö†Ô∏è version.json alƒ±namadƒ±:",w.status);return}const R=await w.json(),X=R.latest_version;console.log("üåê Son versiyon:",X),console.log("üìä Kar≈üƒ±la≈ütƒ±rma:",{current:c,latest:X});const ie=t(X,c);if(console.log("üîç ƒ∞s newer?",ie),X&&ie){if(console.log("‚úÖ YENƒ∞ G√úNCELLEME MEVCUT!",{current:c,latest:X}),pa(!0),window.require){const{ipcRenderer:L}=window.require("electron");L.send("update-available",{currentVersion:c,latestVersion:X,downloadUrl:R.download_url_windows})}}else console.log("‚ÑπÔ∏è Versiyon g√ºncel veya eski:",c,">=",X),pa(!1)}catch(c){console.error("‚ùå Version check hatasƒ±:",c)}};a();const m=setInterval(a,1800*1e3);return()=>clearInterval(m)},[]),o.useEffect(()=>{if(!lo||!d.id||d.type==="friends"||d.type==="welcome")return;console.log("üîÑ [DEBUG activeChat] Chat deƒüi≈üti:",d);let t=!1;const a=d.type==="room"?`room-${d.id}`:`dm-${d.id}`,m=ht.current[a];return m?.messages?.length>0?(console.log("üì¶ [Cache] Restoring cached messages:",m.messages.length,"(skipping API call)"),we(m.messages),wn(!!m.hasMore),Sr(m.offset||0),setTimeout(()=>{t||Pt("auto")},50),t||Lr()):(console.log("üåê [Fetch] No cache, fetching from server..."),Sr(0),wn(!0),t||Lr(),setTimeout(()=>{t||Ga(!0,0)},50)),()=>{t=!0,console.log("üßπ [Cleanup] activeChat useEffect cleanup triggered")}},[d.id,d.type,lo,Lr]),o.useEffect(()=>{Yo?.type==="server_structure_update"&&(console.log("üîÑ Real-time Update: Refetching Server List..."),(async()=>{try{const a=await _(Vr);if(a.ok){const m=await a.json();_e(m)}}catch(a){console.error("Real-time Update Failed:",a)}})())},[Yo,_]),o.useEffect(()=>{if(!n||!I)return;const t={current:null},a=async()=>{try{const h=await _(`${W}/users/rich_presence/${I}/`);if(h.ok){const c=await h.json();let w={};const R=L=>{if(!L)return!0;const le=new Date(L);return(new Date-le)/1e3/60<2};c.spotify&&R(c.spotify.timestamp)&&(w.spotify={type:"listening",name:c.spotify.track,details:c.spotify.artist,album_art:c.spotify.album_art}),c.steam&&R(c.steam.timestamp)&&(w.steam={type:"playing",name:c.steam.game,state:c.steam.state}),Object.keys(w).length===0&&(w=null);const X=JSON.stringify(t.current),ie=JSON.stringify(w);X!==ie&&(t.current=w,Pn.current&&Pn.current.readyState===WebSocket.OPEN&&Pn.current.send(JSON.stringify({type:"update_activity",activity:w})))}}catch{}},m=setInterval(a,3e4);return a(),()=>clearInterval(m)},[n,I,_]),o.useEffect(()=>{Rr()&&(Pt("smooth"),Tn(!1))},[vo,Rr,Pt]),o.useEffect(()=>{Pr()},[d,Pr]),o.useEffect(()=>{const t=a=>{(a.ctrlKey||a.metaKey)&&a.key.toLowerCase()==="k"&&(a.preventDefault(),Na.current?.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),o.useEffect(()=>{if(!n||!lo)return;const t=$c();if(da(t),!r){console.warn("‚ö†Ô∏è [StatusWS] No token available, skipping WebSocket connection");return}const a=`${Nn}://${Fn}/ws/status/?username=${encodeURIComponent(I)}&token=${r}`;console.log("üåê [StatusWS] Connecting to:",a.replace(r,"TOKEN_HIDDEN"));let m;try{m=new WebSocket(a)}catch(h){console.error("‚ùå [StatusWS] WebSocket creation failed:",h);return}return Pn.current=m,m.onopen=()=>{console.log("‚úÖ [StatusWS] Connected successfully")},m.onerror=h=>{console.error("‚ùå [StatusWS] WebSocket error:",h)},m.onclose=h=>{console.log(`üîå [StatusWS] Connection closed: code=${h.code}, reason=${h.reason||"none"}`),h.code!==1e3&&h.code!==1001&&console.log("üîÑ [StatusWS] Will attempt reconnect in 5s...")},m.onmessage=h=>{try{const c=JSON.parse(h.data);if(c.type==="online_user_list_update"){const w=Array.isArray(c.users)?c.users.map(R=>typeof R=="string"?R:R.username||R):[];console.log("üë• [Online Users] Updated:",w),Xo(w)}if(c.type==="voice_users_update"&&(console.log("üîä [GlobalWS] Received voice_users_update:",c.voice_users),Yn(c.voice_users)),c.type==="user_activity_update"&&pt(w=>w.map(R=>R.username===c.username?{...R,current_activity:c.activity}:R)),c.type==="user_profile_update"&&c.user_data){const w=c.user_data;w.username===I&&(console.log("üë§ [Profile Update] Updating currentUserProfile:",w),vn(R=>({...R,avatar:w.avatar,status_message:w.status_message,social_links:w.social_links,coins:w.coins,xp:w.xp,level:w.level,status:w.status,role:w.role}))),pt(R=>R.map(X=>X.username===w.username?{...X,...w}:X))}if(c.type==="global_message_notification"&&c.username!==I){const w=c.room_slug?`room-${c.room_slug}`:`dm-${c.conversation_id}`,R=d.type==="room"?`room-${d.id}`:`dm-${d.id}`;w!==R&&Jn(w)}c.type==="server_structure_update"&&(console.log("Server structure update received, refreshing..."),_(Vr).then(w=>w.json()).then(w=>_e(w)).catch(console.error))}catch(c){console.error("‚ùå [StatusWS] Failed to parse message:",c)}},()=>{try{m.close(1e3,"Component unmount")}catch{}}},[n,lo,I,r,d]),o.useEffect(()=>{k&&C&&(console.log(`üîä [Voice] Switched to voice chat panel: ${C}`),ce("voice",C))},[k,C]);const ja=t=>{ce("room",t),ee&&ke(!1)},Fo=t=>{_(Xu,{method:"POST",body:JSON.stringify({target_username:t})}).then(a=>a.json()).then(a=>{ce("dm",a.conversation_id,t),ee&&ke(!1)})},gl=o.useCallback(t=>{t&&(window.location.hash=t.startsWith("#/")?t:`#${t.startsWith("/")?t:`/${t}`}`,ee&&qe(!1))},[ee]),hl=o.useCallback(()=>{Ea(t=>{const a={...t,notifications:!t.notifications};return localStorage.setItem("chat_sound_settings",JSON.stringify(a)),a})},[]),yl=o.useCallback(async()=>{if(!d?.id)return;const t=`${window.location.origin}/#/${d.type==="dm"?`dm/${d.id}`:`room/${d.id}`}`;try{await navigator.clipboard.writeText(t),ge("Link kopyalandƒ±"),setTimeout(()=>ge(""),1500)}catch(a){console.error("Link kopyalanamadƒ±",a),$.error("Link kopyalanamadƒ±")}},[d]),Ga=async(t=!0,a=0)=>{if(!d.id)return;if(d.type==="voice"){console.log("[Voice] Skipping message history for voice chat"),we([]),wn(!1);return}console.log("üîÑ [fetchMessageHistory] Starting fetch:",{isInitial:t,offset:a,activeChat:d}),En(!0);const m=d.type==="room"?Yu:Ju,h=d.type==="room"?`room-${d.id}`:`dm-${d.id}`;try{const c=await _(`${m}${d.id}/?limit=50&offset=${a}`);if(c.ok){const w=await c.json(),R=w.results||[],X=R.filter(Oe=>!Oe||typeof Oe!="object"?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Invalid message object:",Oe),!1):!Oe.id&&!Oe.temp_id?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Message without ID:",Oe),!1):!0);X.length<R.length&&console.warn(`‚ö†Ô∏è [fetchMessageHistory] Filtered out ${R.length-X.length} invalid messages`);const ie=X.reverse();console.log("‚úÖ [fetchMessageHistory] Fetched messages:",ie.length);let L=ie;t?(console.log("üìù [fetchMessageHistory] Setting messages (INITIAL):",ie.length),we(ie),setTimeout(()=>Pt("auto"),100)):we(Oe=>(console.log("üìù [fetchMessageHistory] Appending to existing:",Oe.length,"+",ie.length),L=[...ie,...Oe],L));const le=t?ie.length:a+ie.length,be=!!w.next;wn(be),t||Sr(le);const ze=ht.current[h]?.messages||[],It=t?ie:[...ie,...ze];ht.current[h]={messages:L||It,offset:le,hasMore:be},console.log("üíæ [fetchMessageHistory] Cached:",h,"with",(L||It).length,"messages")}}catch(c){console.error("‚ùå [fetchMessageHistory] Error:",c)}En(!1)},Sl=async(t,a)=>{try{console.log("üîë [Auth] Login attempt:",{username:t,url:gs});const m=await fetch(gs,{method:"POST",body:JSON.stringify({username:t,password:a}),headers:{"Content-Type":"application/json"}});console.log("üîë [Auth] Response status:",m.status);const h=await m.json();if(m.ok)console.log("‚úÖ [Auth] Login successful"),u(h.access,h.refresh);else{if(console.error("‚ùå [Auth] Login failed:",h),m.status===401&&h.requires_2fa&&h.temp_token){console.log("üîê [Auth] 2FA required, redirecting..."),window.location.href=`/#/2fa-login?temp_token=${encodeURIComponent(h.temp_token)}`;return}m.status===401?Ye("Kullanƒ±cƒ± adƒ± veya ≈üifre hatalƒ±"):m.status===400?Ye(h.detail||h.error||"Ge√ßersiz giri≈ü bilgileri"):m.status>=500?Ye("Sunucu hatasƒ±. L√ºtfen daha sonra tekrar deneyin."):Ye(h.detail||h.error||"Giri≈ü ba≈üarƒ±sƒ±z")}}catch(m){console.error("‚ùå [Auth] Network error:",m),Ye("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin.")}},bl=async(t,a,m)=>{try{console.log("üìù [Auth] Register attempt:",{username:t,email:a,url:hs});const h=await fetch(hs,{method:"POST",body:JSON.stringify({username:t,email:a,password:m}),headers:{"Content-Type":"application/json"}});if(console.log("üìù [Auth] Response status:",h.status),h.status===201)return console.log("‚úÖ [Auth] Registration successful"),!0;const c=await h.json();console.error("‚ùå [Auth] Registration failed:",c);let w="";return c.username?w=c.username.join(" "):c.email?w=c.email.join(" "):c.password?w=c.password.join(" "):c.detail?w=c.detail:w=Object.values(c).flat().join(" "),Ye(w||"Kayƒ±t i≈ülemi ba≈üarƒ±sƒ±z"),!1}catch(h){return console.error("‚ùå [Auth] Network error:",h),Ye("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin."),!1}},On=o.useCallback(async(t,a=!1,m=0,h=null)=>{vr(!0),Cn(0);const c=h||d,w=Wn();try{const R=await nm(t),X=t.type||"application/octet-stream",ie=10*1024*1024,L=5,le=Math.ceil(t.size/ie);console.log("üöÄ [R2 Multipart] Starting upload:",{fileName:t.name,fileSize:(t.size/(1024*1024)).toFixed(2)+" MB",totalParts:le,parallelUploads:L});const ze=await(await _(`${W}/upload/multipart/init/`,{method:"POST",body:JSON.stringify({file_name:t.name,file_size:t.size,content_type:X,file_hash:R})})).json();if(ze.file_exists){console.log("‚úÖ [R2] File already exists, skipping upload"),$.success("Dosya zaten y√ºkl√º!"),vr(!1),Cn(100);return}const{upload_id:It,key:Oe}=ze;console.log(`üì¶ [R2] Upload ID: ${It.substring(0,20)}..., Key: ${Oe}`);const $n=[];let Ja=0;const Al=async he=>{const Ge=(he-1)*ie,Lt=Math.min(Ge+ie,t.size),po=t.slice(Ge,Lt);console.log(`üì§ [R2] Part ${he}/${le} uploading...`);const Wo=new FormData;Wo.append("upload_id",It),Wo.append("key",Oe),Wo.append("part_number",he.toString()),Wo.append("chunk",po,`part_${he}`);const zn=await _(`${W}/upload/multipart/upload-part/`,{method:"POST",body:Wo,headers:{}});if(!zn.ok){const Pl=await zn.text();throw new Error(`Part ${he} upload failed: ${zn.status} - ${Pl}`)}const{etag:Za,part_number:Rl}=await zn.json();Ja++;const Xa=Math.round(Ja/le*95);return Cn(Xa),console.log(`‚úÖ [R2] Part ${he}/${le} complete (${Xa}%), ETag: ${Za}`),{ETag:Za,PartNumber:Rl}};for(let he=0;he<le;he+=L){const Ge=[];for(let po=0;po<L&&he+po<le;po++)Ge.push(Al(he+po+1));const Lt=await Promise.all(Ge);$n.push(...Lt)}$n.sort((he,Ge)=>he.PartNumber-Ge.PartNumber),console.log("üìã [R2] All parts uploaded, completing...",$n);const $r=await _(`${W}/upload/multipart/complete/`,{method:"POST",body:JSON.stringify({upload_id:It,key:Oe,parts:$n,file_name:t.name,file_hash:R,room_slug:c.type==="room"?c.id:null,conversation_id:c.type==="dm"?c.id:null,temp_id:w,is_voice_message:a?"true":"false",duration:m.toString()})});if(!$r.ok){const he=await $r.text();throw new Error(`Complete failed: ${he}`)}const qt=await $r.json();Cn(100),console.log("‚úÖ [R2 Multipart] Upload complete!",qt),c.id===d.id&&(we(he=>{if(qt.temp_id){const Ge=he.findIndex(Lt=>Lt.temp_id===qt.temp_id);if(Ge!==-1){const Lt=[...he];return Lt[Ge]=qt,Lt}}return qt.id&&he.some(Ge=>Ge.id===qt.id)?he:[...he,qt]}),Pt("smooth"))}catch(R){console.error("‚ùå [R2 Multipart] Error:",R),$.error(`Y√ºkleme hatasƒ±: ${R.message}`)}vr(!1)},[d,I,_]),El=t=>{t.preventDefault(),t.stopPropagation(),xn(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&On(t.dataTransfer.files[0])},wl=(t,a)=>{if(t.preventDefault(),t.stopPropagation(),mn(null),t.dataTransfer.files&&t.dataTransfer.files.length>0){const m=t.dataTransfer.files[0];if(a.type==="dm"){const h=ft.find(c=>c.id===a.id);if(h){const c=h.participants.find(w=>w.username!==I);c&&(Fo(c.username),setTimeout(()=>{On(m,!1,0,a)},300))}}else a.type==="room"&&roomsWithCategories.find(c=>c.room_slug===a.id)&&(handleRoomClick(a.id),setTimeout(()=>{On(m,!1,0,a)},300))}},vl=async t=>{if(t.preventDefault(),!d.id||!$t.trim()){$t.trim()||Ga(!0,0);return}En(!0);try{let a=`${W}/messages/search/?q=${encodeURIComponent($t)}`;d.type==="room"?a+=`&room=${d.id}`:a+=`&dm=${d.id}`;const m=await _(a);if(m.ok){const h=await m.json();we(h.results||h)}}catch(a){console.error(a)}En(!1)},Or=o.useRef([]),Dr=o.useRef(null),Ha=o.useCallback(t=>{Or.current.push(t),!Dr.current&&(Dr.current=setTimeout(async()=>{const a=[...new Set(Or.current)];if(Or.current=[],Dr.current=null,a.length!==0)try{(await _(`${W}/messages/mark_read/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message_ids:a})})).ok&&we(h=>h.map(c=>a.includes(c.id)?{...c,read_by:[...c.read_by||[],I]}:c))}catch{}},1500))},[_,I]),Ka=async t=>{if(window.confirm("Bu mesajƒ± silmek istediƒüine emin misin?"))try{(await _(`${W}/messages/${t}/delete/`,{method:"DELETE"})).ok&&we(m=>m.filter(h=>h.id!==t))}catch(a){console.error(a)}},qa=async t=>{try{const a=await _(`${W}/messages/${t}/pin/`,{method:"POST"});if(a.ok){const m=await a.json(),h=m.is_pinned??m.pinned??!vo.find(c=>c.id===t)?.is_pinned;we(c=>c.map(w=>w.id===t?{...w,is_pinned:h}:w)),h?(nt(c=>{const w=vo.find(R=>R.id===t);return w&&!c.some(R=>R.id===t)?[...c,{...w,is_pinned:!0}]:c}),$.success("üìå Mesaj sabitlendi")):(nt(c=>c.filter(w=>w.id!==t)),$.success("üìå Sabitleme kaldƒ±rƒ±ldƒ±"))}}catch(a){console.error("Pin toggle error:",a),$.error("‚ùå Sabitleme hatasƒ±")}},_l=async t=>{if(window.confirm("Bu sohbeti listenizden gizlemek istiyor musunuz?"))try{(await _(`${W}/conversations/${t}/hide/`,{method:"POST"})).ok&&(ve(m=>m.filter(h=>h.id!==t)),d.type==="dm"&&d.id===t&&ce("welcome","welcome"))}catch(a){console.error(a)}},kl=async t=>{if(window.confirm(`‚ö†Ô∏è ADMƒ∞N: Bu konu≈ümayƒ± HER ƒ∞Kƒ∞ TARAFTAN KALICI OLARAK silmek istediƒüinize emin misiniz?

Bu i≈ülem GERƒ∞ ALINAMAZ!`))try{const a=await _(`${W}/conversations/${t}/admin-delete/`,{method:"DELETE"});if(a.ok){const m=await a.json();$.success(`‚úÖ ${m.deleted_messages} mesaj silindi. Katƒ±lƒ±mcƒ±lar: ${m.participants.join(", ")}`),ve(h=>h.filter(c=>c.id!==t)),d.type==="dm"&&d.id===t&&ce("welcome","welcome")}else{const m=await a.json();$.error(`‚ùå Hata: ${m.error||"Silme i≈ülemi ba≈üarƒ±sƒ±z"}`)}}catch(a){console.error(a),$.error("‚ùå Sunucuyla baƒülantƒ± hatasƒ±")}},xl=o.useCallback(()=>{ce("welcome","welcome",null),ee&&ke(!1)},[ee]),Cl=o.useCallback(async(t,a,m)=>{switch(t){case"profile":const h=ne.find(c=>c.username===a.username);h&&st(h);break;case"message":Fo(a.username);break;case"volume":break;case"move":if(Ae&&m&&C)try{(await _(`${W}/voice/move_user/`,{method:"POST",body:JSON.stringify({username:a.username,from_channel:C,to_channel:m})})).ok&&console.log(`‚úÖ ${a.username} moved to ${m}`)}catch(c){console.error("Move user error:",c)}break;case"kick":if(Ae&&window.confirm(`${a.username} kullanƒ±cƒ±sƒ±nƒ± kanaldan atmak istediƒüine emin misin?`))try{(await _(`${W}/voice/kick_user/`,{method:"POST",body:JSON.stringify({username:a.username,room:C})})).ok&&console.log(`‚úÖ ${a.username} kicked from voice`)}catch(c){console.error("Kick user error:",c)}break;case"server_mute":if(Ae)try{(await _(`${W}/voice/server_mute/`,{method:"POST",body:JSON.stringify({username:a.username,room:C})})).ok&&console.log(`‚úÖ ${a.username} server muted`)}catch(c){console.error("Server mute error:",c)}break;case"add_friend":try{const c=await _(`${W}/friends/send/`,{method:"POST",body:JSON.stringify({username:a.username})});if(c.ok)ge(`‚úÖ ${a.username} kullanƒ±cƒ±sƒ±na arkada≈ülƒ±k isteƒüi g√∂nderildi!`),setTimeout(()=>ge(""),3e3);else{const w=await c.json();ge(`‚ùå ${w.error||"ƒ∞stek g√∂nderilemedi"}`),setTimeout(()=>ge(""),3e3)}}catch(c){console.error("Add friend error:",c),ge("‚ùå Arkada≈ü ekleme hatasƒ±"),setTimeout(()=>ge(""),3e3)}break;case"remove_friend":if(window.confirm(`${a.username} ile arkada≈ülƒ±ƒüƒ± sonlandƒ±rmak istediƒüinize emin misiniz?`))try{const c=Ht.find(w=>w.sender_username===a.username||w.receiver_username===a.username);if(c&&(await _(`${W}/friends/remove/${c.id}/`,{method:"DELETE"})).ok){ge(`‚úÖ ${a.username} ile arkada≈ülƒ±k sonlandƒ±rƒ±ldƒ±`),setTimeout(()=>ge(""),3e3);const R=await _(`${W}/friends/list/`);if(R.ok){const X=await R.json();br(X.friends||[])}}}catch(c){console.error("Remove friend error:",c),ge("‚ùå Arkada≈ülƒ±k sonlandƒ±rma hatasƒ±"),setTimeout(()=>ge(""),3e3)}break;case"invite_to_server":Rn({username:a.username});break;case"mute_user":try{const c=await _(`${W}/users/${a.username}/mute/`,{method:"POST"});if(c.ok)$.success(`üîá ${a.username} sessize alƒ±ndƒ±`);else{const w=await c.json();$.error(`‚ùå ${w.error||"Sessize alma ba≈üarƒ±sƒ±z"}`)}}catch(c){console.error("Mute user error:",c),$.error("‚ùå Sessize alma hatasƒ±")}break;case"block_user":if(window.confirm(`${a.username} kullanƒ±cƒ±sƒ±nƒ± engellemek istediƒüinize emin misiniz?`))try{const c=await _(`${W}/users/${a.username}/block/`,{method:"POST"});if(c.ok){$.success(`üö´ ${a.username} engellendi`);const w=await _(`${W}/friends/list/`);if(w.ok){const R=await w.json();br(R.friends||[])}}else{const w=await c.json();$.error(`‚ùå ${w.error||"Engelleme ba≈üarƒ±sƒ±z"}`)}}catch(c){console.error("Block user error:",c),$.error("‚ùå Engelleme hatasƒ±")}break;default:console.log("Unknown action:",t)}},[ne,Ae,C,_,W,Fo,Ht,ge]),Tl=()=>{if(So){Mt(!0),ge("ƒ∞ndiriliyor...");const{ipcRenderer:t}=window.require("electron"),a=`${P}/media/build/Pawscord-Setup.exe`;t.send("start-download",a)}else window.open(`${P}/media/build/Pawscord-Setup.exe`,"_blank")};o.useEffect(()=>{if(So){const{ipcRenderer:t}=window.require("electron"),a=(c,w)=>nn(Math.round(w*100)),m=()=>{ge("Ba≈ülatƒ±lƒ±yor..."),nn(100),setTimeout(()=>ge("Kapanƒ±yor..."),1500)},h=(c,w)=>{Mt(!1),$.error(`ƒ∞ndirme hatasƒ±: ${w}`)};return t.on("download-progress",a),t.on("download-complete",m),t.on("download-error",h),()=>{t.removeAllListeners("download-progress"),t.removeAllListeners("download-complete"),t.removeAllListeners("download-error")}}},[]);const Ya=F!=="finished";if(!n)return e.createElement(e.Fragment,null,Ya&&e.createElement(ds,{animationState:F}),e.createElement(yd,{onLogin:Sl,onRegister:bl,error:ir,setAuthError:Ye}));const Dn=ee&&!Ot?"20px":zt,Mr=d.type==="room"?`room-${d.id}`:`dm-${d.id}`,Mn=!!Xt[Mr];return Ma?e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"large",text:"Davet y√ºkleniyor..."})},e.createElement(Ou,{vanityPath:Ma,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>{$a(null),window.location.hash="#/"}})):e.createElement("div",{style:{...N.mainContainer},className:"dark-theme"},Ya&&e.createElement(ds,{animationState:F}),kn&&e.createElement(ad,{message:kn.message,endTime:kn.endTime,level:kn.level,onDismiss:()=>wr(null)}),e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"medium",text:"Modal y√ºkleniyor..."})},ar&&e.createElement($u,{user:ct,onClose:()=>cn(!1),onProfileUpdate:t=>vn(t),onLogout:l,fetchWithAuth:_,getDeterministicAvatar:je,updateProfileUrl:Qu,changeUsernameUrl:tm,soundSettings:zo,onUpdateSoundSettings:Ea,onImageClick:kt,apiBaseUrl:P}),ro&&e.createElement(kd,{onClose:()=>Io(!1)}),ur&&e.createElement(Vd,{onClose:()=>Lo(!1),fetchWithAuth:_,apiBaseUrl:P}),Oo&&e.createElement(Ud,{onClose:()=>fn(!1),onOpenAnalytics:()=>Lo(!0),onOpenWebhooks:()=>pn(!0),onOpenModTools:()=>fr(!0),onOpenAuditLogs:()=>i(!0),onOpenReports:()=>Wt(!0),onOpenVanityURL:()=>ao(!0),onOpenAutoResponder:()=>x(!0),fetchWithAuth:_,apiBaseUrl:P}),Ki&&e.createElement(Eu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ra(!1),username:I}),qi&&e.createElement(wu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Pa(!1),username:I}),Yi&&e.createElement(vu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ia(!1),username:I}),Ji&&e.createElement(_u,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>La(!1),username:I}),Zi&&e.createElement(ku,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Oa(!1),username:I}),Xi&&e.createElement(xu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Da(!1),serverId:d?.type==="room"?d.server_id:null}),Qi&&e.createElement(Nu,{onClose:()=>za(!1)}),el&&e.createElement(Fu,{onClose:()=>Va(!1),apiBaseUrl:P}),gn&&e.createElement(Fd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Do(!1)}),gr&&e.createElement(jd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>xt(!1)}),it&&e.createElement(Gd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Wt(!1)}),so&&e.createElement(Hd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>i(!1)}),f&&e.createElement(Kd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>g(!1)}),mr&&e.createElement(Bd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>pn(!1)}),pr&&e.createElement(Nd,{serverId:d?.type==="room"?d.server_id:null,fetchWithAuth:_,apiBaseUrl:P,onClose:()=>ao(!1)}),v&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(fs,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>x(!1)})),E&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(qd,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>b(!1),onMessageClick:t=>{t.room?ce({type:"room",slug:t.room}):t.conversation&&ce({type:"dm",slug:t.conversation}),b(!1)}})),S&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Yd,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>A(!1),onMessageClick:t=>{t.room?ce({type:"room",slug:t.room}):t.conversation&&ce({type:"dm",slug:t.conversation}),A(!1)}})),M&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Zd,{isOpen:M,onClose:()=>K(!1),currentUsername:currentUser?.username,onNavigateToMessage:t=>{t.room_id&&ce({type:"room",id:t.room_id}),K(!1)}})),re&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Xd,{isOpen:re,onClose:()=>me(!1),onStatusChange:t=>{currentUser&&setCurrentUser(a=>({...a,customStatus:t}))}})),$e&&d?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Jd,{fetchWithAuth:_,apiBaseUrl:P,channelSlug:d.slug,onClose:()=>gt(!1)})),gn&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Wd,{fetchWithAuth:_,apiBaseUrl:P,serverId:d?.type==="room"?d.server_id:null,onClose:()=>Do(!1)})),on&&e.createElement(_d,{symbol:on,onClose:()=>Dt(null)}),lr&&e.createElement(Rd,{onClose:()=>Po(!1),ws:xe,username:I}),eo&&e.createElement(vd,{onClose:()=>_o(!1),onSend:fl}),ha&&e.createElement($d,{onClose:()=>ya(null),server:ha,currentUsername:I,fetchWithAuth:_,apiBaseUrl:P,serverMembers:Kt}),er&&e.createElement(Dd,{onClose:()=>tn(!1),onSetKey:t=>Zn(Mr,t),existingKey:Xt[Mr]}),Fi&&e.createElement(Md,{onClose:()=>ga(!1),apiBaseUrl:P}),Sa&&e.createElement(ms,{isLoading:Wi,summaryText:ji,onClose:()=>Er(!1)}),Xn&&e.createElement(zd,{onClose:()=>Qo(!1),friendsList:Ht,fetchWithAuth:_,apiBaseUrl:P,onGroupCreated:t=>{ve(a=>[t,...a]),ce("dm",t.id,"Grup Sohbeti")}}),Qn&&(d.type==="room"||d.type==="dm")&&e.createElement(xd,{roomSlug:d.type==="room"?d.id:`dm_${d.id}`,onClose:()=>Qt(!1),wsProtocol:Nn,apiHost:Fn}),en&&e.createElement(Cd,{onClose:()=>vt(!1),fetchWithAuth:_,apiBaseUrl:P,sendSignal:ae,absoluteHostUrl:P}),Gi&&e.createElement(Ld,{onClose:()=>wa(!1),ws:xe,roomSlug:d.id}),sr&&e.createElement(Id,{onSelect:t=>{const a=t.startsWith("http")?t:P+t;Ir(a),un(!1)},onClose:()=>un(!1),localGifListUrl:om,absoluteHostUrl:P,fetchWithAuth:_}),Pe&&e.createElement(Pd,{onClose:()=>Ut(!1),onSelect:t=>{Ir(t),Ut(!1)},fetchWithAuth:_,apiBaseUrl:P}),ko&&e.createElement(wd,{onClose:()=>rr(!1),fetchWithAuth:_,apiBaseUrl:P,activeRoomSlug:d.id})),Gt&&d?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Qd,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>lt(!1)})),$o&&d?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(eu,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>bn(!1)})),hr&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(tu,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>yr(!1)})),Vs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ou,{fetchWithAuth:_,apiBaseUrl:P,username:I,onClose:()=>Us(!1)})),Bs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(nu,{fetchWithAuth:_,apiBaseUrl:P,username:I,onClose:()=>Ns(!1)})),Fs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ru,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ws(!1)})),js&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(au,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>Gs(!1)})),Hs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(su,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ks(!1)})),qs&&d?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(iu,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>Ys(!1)})),Js&&d?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(lu,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>Zs(!1)})),Xs&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(cu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>ra(!1),onLoadDraft:t=>{t.room&&ce({type:"room",slug:t.room}),ra(!1)}})),Qs&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(du,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>ei(!1)})),ti&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(uu,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,currentUsername:I,onClose:()=>oi(!1)})),ni&&d?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(mu,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>ri(!1)})),ai&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(fu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>si(!1)})),ii&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(fs,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>li(!1)})),ci&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(pu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>di(!1)})),ui&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(gu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>mi(!1)})),fi&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(hu,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>pi(!1)})),gi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(yu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>aa(!1),onSuccess:()=>{$.success("2FA ba≈üarƒ±yla etkinle≈ütirildi!"),aa(!1)}})),hi&&d?.type==="room"&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Su,{fetchWithAuth:_,apiBaseUrl:P,roomSlug:d.slug,onClose:()=>yi(!1)})),Si&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(bu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>bi(!1)})),Ei&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Cu,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>wi(!1)})),vi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Tu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>sa(!1),onMessageClick:t=>{t.room&&ce({type:"room",slug:t.room}),sa(!1)}})),_i&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Au,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>ki(!1)})),xi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Ru,{fetchWithAuth:_,apiBaseUrl:P,url:null,onClose:()=>Ci(!1)})),Ti&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Pu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Ai(!1)})),Ri&&d?.type==="room"&&d.server_id&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Iu,{fetchWithAuth:_,apiBaseUrl:P,serverId:d.server_id,onClose:()=>Pi(!1)})),Ii&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Lu,{fetchWithAuth:_,apiBaseUrl:P,onClose:()=>Li(!1)})),Oi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"üéÆ Oyunlar Y√ºkleniyor...")},e.createElement(Gu,{fetchWithAuth:_,apiBaseUrl:P,serverId:d?.server_id,currentUser:I,onClose:()=>ia(!1)})),Di&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"üìÇ Projeler Y√ºkleniyor...")},e.createElement(Hu,{fetchWithAuth:_,apiBaseUrl:P,serverId:d?.server_id,currentUser:I,onClose:()=>la(!1)})),Mi&&e.createElement(o.Suspense,{fallback:e.createElement("div",null,"üé® Avatar Studio Y√ºkleniyor...")},e.createElement(Ku,{fetchWithAuth:_,apiBaseUrl:P,currentUser:I,onClose:()=>ca(!1),onAvatarChange:t=>{ct&&vn({...ct,avatar_url:t}),$.success("üé® Avatar g√ºncellendi!")}})),Nt&&e.createElement(bd,{imageUrl:Nt,onClose:()=>kt(null)}),no&&e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:"Sabitlenmi≈ü mesajlar y√ºkleniyor..."})},e.createElement(Vu,{messages:ot,onClose:()=>dn(!1)})),at&&e.createElement(Ed,{user:at,onClose:()=>st(null),onStartDM:Fo,onImageClick:kt,getDeterministicAvatar:je,fetchWithAuth:_,apiBaseUrl:P,currentUser:I,friendsList:Ht}),ee&&Ao&&e.createElement("div",{style:N.mobileOverlay,onClick:()=>ke(!1)}),ee&&Ro&&e.createElement("div",{style:N.mobileOverlay,onClick:()=>qe(!1)}),e.createElement("div",{style:N.chatLayout},(!ee||Ao)&&e.createElement("div",{style:{...N.sidebarWrapper,...ee&&N.mobileSidebar,paddingTop:Dn,paddingBottom:sn,height:"100%",boxSizing:"border-box"}},ee&&e.createElement("div",{style:N.mobileSidebarHeader},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement("img",{src:"https://media.pawscord.com/assets/logo.png",alt:"",style:{width:"24px",height:"24px"},onError:t=>{t.target.style.display="none"}}),e.createElement("span",{style:{fontSize:"18px",fontWeight:"bold",color:"white"}},"Pawscord")),e.createElement("button",{onClick:()=>ke(!1),style:N.closeSidebarButton},e.createElement(Ho,null))),e.createElement(Mu,{onFriendsClick:()=>ce("friends","friends"),onRoomSelect:ja,onDMSelect:(t,a)=>ce("dm",t,a),onWelcomeClick:xl,setIsLeftSidebarVisible:ke,onProfileClick:()=>cn(!0),onViewUserProfile:t=>{const a=ne.find(m=>m.username===t);a&&st(a)},onOpenStore:()=>Io(!0),onOpenServerSettings:t=>ya(t),categories:ol,onServerDragStart:il,onServerDragOver:ll,onServerDragEnd:cl,onServerDrop:dl,conversations:ft,allUsers:ne,onlineUsers:Tr,serverMembers:Kt,isAdmin:Ae,friendsList:Ht,pendingFriendRequests:Ui,currentUsername:I,currentUserProfile:ct,getRealUserAvatar:Ze,getDeterministicAvatar:je,unreadCounts:Jo,joinVoiceChat:D,leaveVoiceChat:G,voiceUsers:qn,isConnecting:T,currentVoiceRoom:C,currentRoom:C,currentConversationId:d.type==="dm"?d.id:null,remoteVolumes:j,setRemoteVolume:q,isPttActive:pe,apiBaseUrl:P,fetchWithAuth:_,onHideConversation:_l,handleDrop:wl,dropTarget:cr,setDropTarget:mn,isDragging:va,onOpenCreateGroup:()=>Qo(!0),toggleMute:J,toggleDeafened:H,isMuted:O,isDeafened:z,isInVoice:k,toggleVideo:V,toggleScreenShare:U,isVideoEnabled:Y,isScreenSharing:ue,updateAvailable:fa,onUpdateClick:()=>ga(!0),onOpenAnalytics:()=>Lo(!0),onOpenAdminPanel:()=>fn(!0),onOpenPaymentPanel:()=>Ra(!0),onOpenStoreModal:()=>Pa(!0),onOpenDailyRewards:()=>Ia(!0),onOpenAPIUsage:()=>La(!0),onOpenExportJobs:()=>Oa(!0),onOpenScheduledAnnouncements:()=>Da(!0),onOpenMiniGames:()=>ia(!0),onOpenProjectCollaboration:()=>la(!0),onOpenAvatarStudio:()=>ca(!0),onServerSelect:pl})),e.createElement("div",{style:N.mainContent},e.createElement("div",{style:{position:"absolute",top:60,left:0,right:0,zIndex:90}},e.createElement(hd,{message:ua?.message,type:ua?.type,onDismiss:()=>io(null)})),d.type==="friends"?e.createElement("div",{style:{width:"100%",height:"100%",paddingTop:Dn}},e.createElement(Du,{fetchWithAuth:_,apiBaseUrl:P,onStartDM:Fo,getDeterministicAvatar:je,onClose:()=>ce("welcome","welcome"),onPendingCountChange:Bi,onlineUsers:Tr})):d.type==="welcome"?e.createElement("div",{style:{width:"100%",height:"100%"}},e.createElement(Sd,{isMobile:ee,onOpenMenu:()=>ke(!0),onOpenRightMenu:()=>qe(!0),updateAvailable:fa,isDownloading:tr,downloadProgress:or,updateStatusText:nr,onStartUpdate:Tl,onSwitchToFriends:()=>{ce("friends","friends"),ee&&ke(!1)},onSwitchToAI:()=>{ja("ai")},onSwitchToCinema:()=>{Po(!0),ee&&ke(!1)}})):al==="kanban"?e.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},e.createElement("div",{style:N.chatHeader},e.createElement("h2",null,"# ",No," (Pano)")),e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"medium",text:"Pano y√ºkleniyor..."})},e.createElement(Td,{roomSlug:d.id,apiBaseUrl:P,fetchWithAuth:_}))):d.type==="voice"&&k?e.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#2f3136"}},e.createElement("div",{style:{...N.chatHeader,justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},ee&&e.createElement("button",{onClick:()=>ce("welcome","welcome"),style:{...N.mobileMenuButton}},"‚Üê"),e.createElement("h2",{style:{margin:0,fontSize:"1.2em"}},"üîä ",C)),e.createElement("button",{onClick:()=>{G(),ce("welcome","welcome")},style:{background:"#ed4245",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold"}},"Baƒülantƒ±yƒ± Kes")),e.createElement(ps,{roomName:C,onClose:()=>{G(),ce("welcome","welcome")},isMinimized:!1,onToggleMinimize:()=>{},getRealUserAvatar:Ze,allUsers:ne,currentUserProfile:ct})):e.createElement("div",{style:{...N.chatArea,position:"relative",paddingTop:Dn,boxSizing:"border-box"},onDrop:El,onDragOver:t=>{t.preventDefault(),xn(!0)},onDragEnter:t=>{t.preventDefault(),xn(!0)},onDragLeave:t=>{t.preventDefault(),t.target===t.currentTarget&&xn(!1)}},e.createElement("div",{style:{...N.chatHeader,justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",overflow:"hidden",gap:"8px"}},ee&&!Ao&&e.createElement("button",{onClick:()=>ke(!0),style:{...N.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Men√ºy√º A√ß"},"‚ò∞"),ee&&(d.type==="dm"||d.type==="room")&&e.createElement("button",{onClick:()=>{ce("welcome","welcome"),ke(!1),qe(!1)},style:{...N.mobileMenuButton,fontSize:"1.2em"},"aria-label":"Geri"},"‚Üê"),e.createElement("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0,fontSize:ee?"1em":"1.1em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},d.type==="dm"?`@ ${String(d.targetUser||"DM")}`:`# ${String(No)}`),e.createElement("div",{style:Ke?N.connectionPillOnline:N.connectionPillOffline},Ke?"Bagli":"Kopuk")),e.createElement("div",{style:{display:"flex",gap:ee?"5px":"10px",alignItems:"center",flexWrap:ee?"nowrap":"wrap",position:"relative"}},e.createElement("form",{onSubmit:vl,style:N.searchForm},e.createElement("input",{type:"text",placeholder:"Ara...",value:rn,onChange:t=>an(t.target.value),style:N.searchInput,ref:Na}),e.createElement(Bl,{style:N.searchIcon})),!ee&&Ba.length>0&&e.createElement("span",{style:N.typingIndicator},Ba.join(", ")," yazƒ±yor..."),e.createElement("button",{onClick:()=>Ta(!kr),style:{...N.iconButton,color:kr?"#5865f2":"#b9bbbe",position:"relative"},title:"Bildirimler"},e.createElement(Qa,null)),kr&&e.createElement("div",{style:{position:"absolute",top:"54px",right:"20px",zIndex:1e3}},e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:""})},e.createElement(Wu,{currentUser:I,onClose:()=>Ta(!1),fetchWithAuth:_,apiBaseUrl:P}))),e.createElement("div",{className:"toolbar-menu-container",style:{position:"relative"}},e.createElement("button",{onClick:()=>Le(!Vo),style:{...N.iconButton,color:Vo?"#5865f2":"#b9bbbe",fontSize:"1.2em",fontWeight:"bold"},title:"Daha Fazla"},"‚ãÆ"),Vo&&e.createElement("div",{style:{position:"absolute",top:"50px",right:"0",backgroundColor:"#2f3136",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.4)",minWidth:"220px",zIndex:1e3,overflow:"hidden",border:"1px solid #202225"}},d.type==="dm"&&e.createElement("button",{onClick:()=>{tn(!0),Le(!1)},style:{...N.menuItem,color:Mn?"#43b581":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=Mn?"#43b581":"#dcddde"}},Mn?e.createElement(es,null):e.createElement(es,{style:{opacity:.5}}),e.createElement("span",null,Mn?"≈ûifreli":"≈ûifrele")),e.createElement("button",{onClick:()=>{dn(!no),Le(!1)},style:{...N.menuItem,color:no?"#f5a524":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=no?"#f5a524":"#dcddde"}},e.createElement(Nl,null),e.createElement("span",null,"Sabitli Mesajlar")),e.createElement("button",{onClick:()=>{yl(),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Fl,null),e.createElement("span",null,"Baƒülantƒ±yƒ± Kopyala")),e.createElement("button",{onClick:()=>{hl(),Le(!1)},style:{...N.menuItem,color:zo.notifications?"#43b581":"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=zo.notifications?"#43b581":"#f04747"}},zo.notifications?e.createElement(Qa,null):e.createElement(Wl,null),e.createElement("span",null,zo.notifications?"Sessize Al":"Sesi A√ß")),e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{K(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(jl,null),e.createElement("span",null,"Bahsedilmeler")),e.createElement("button",{onClick:()=>{me(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Gl,null),e.createElement("span",null,"Durumunu Ayarla")),e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{Po(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Hl,null),e.createElement("span",null,"Sinema Modu")),e.createElement("button",{onClick:()=>{wa(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Kl,null),e.createElement("span",null,"DJ Modu")),e.createElement("button",{onClick:()=>{Qt(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(ql,null),e.createElement("span",null,"Beyaz Tahta")),k&&e.createElement("button",{onClick:()=>{vt(!0),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(ts,null),e.createElement("span",null,"Ses Efektleri")),d.type==="room"&&e.createElement(e.Fragment,null,e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{ml(),Le(!1)},style:N.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(ts,null),e.createElement("span",null,"Sohbeti √ñzetle")),e.createElement("button",{onClick:()=>{ul(),Le(!1)},style:{...N.menuItem,color:"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#f04747",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#f04747"}},e.createElement(Yl,null),e.createElement("span",null,"Sohbeti Temizle")),I==="admin"&&d.type==="dm"&&e.createElement(e.Fragment,null,e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{kl(d.id),Le(!1)},style:{...N.menuItem,color:"#ed4245",fontWeight:"bold"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#ed4245",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#ed4245"},title:"Admin: Konu≈ümayƒ± kalƒ±cƒ± olarak sil (her iki taraftan)"},e.createElement(Jl,null),e.createElement("span",null,"‚ö†Ô∏è KALICI Sƒ∞L (ADMƒ∞N)")))))),ee&&!Ro&&e.createElement("button",{onClick:()=>qe(!0),style:{...N.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Kullanƒ±cƒ±larƒ± G√∂ster"},e.createElement(Nr,null)))),e.createElement("div",{style:N.messageBox,ref:Cr,onScroll:sl},zi?e.createElement("p",{style:N.systemMessage},"Y√ºkleniyor..."):Ar.length>50?e.createElement(fd,{messages:Ar,scrollToBottom:!0,renderMessage:(t,a)=>e.createElement(us,{key:t.id||t.temp_id||a,msg:t,currentUser:I,absoluteHostUrl:P,isAdmin:Ae,onImageClick:kt,fetchWithAuth:_,allUsers:ne,getDeterministicAvatar:je,onShowChart:Dt,onDelete:Ka,onStartEdit:mo,onSetReply:ka,onToggleReaction:()=>{},onStartForward:xa,isSelectionMode:Ca,isSelected:Bt.has(t.id),onToggleSelection:m=>{const h=new Set(Bt);h.has(m)?h.delete(m):h.add(m),Ie(h)},onScrollToMessage:Wa,onViewProfile:m=>st(ne.find(h=>h.username===m)),onTogglePin:qa,onVisible:Ha})}):e.createElement(e.Fragment,null,Ar.map((t,a)=>{const m=t.id||t.temp_id||a;return e.createElement(us,{key:m,msg:t,currentUser:I,absoluteHostUrl:P,isAdmin:Ae,onImageClick:kt,fetchWithAuth:_,allUsers:ne,getDeterministicAvatar:je,onShowChart:Dt,onDelete:Ka,onStartEdit:mo,onSetReply:ka,onToggleReaction:()=>{},onStartForward:xa,isSelectionMode:Ca,isSelected:Bt.has(t.id),onToggleSelection:h=>{const c=new Set(Bt);c.has(h)?c.delete(h):c.add(h),Ie(c)},onScrollToMessage:Wa,onViewProfile:h=>st(ne.find(c=>c.username===h)),onTogglePin:qa,onVisible:Ha})}),e.createElement("div",{ref:xr,style:{float:"left",clear:"both",height:1}}))),Hi&&e.createElement("button",{type:"button",style:N.scrollToBottomButton,onClick:()=>{Pt("smooth"),Tn(!1)},"aria-label":"En alta in"},"En alta in"),e.createElement("div",{style:{...N.inputContainer,paddingBottom:Ot?`calc(16px + ${sn})`:ee?"25px":"16px"}},va&&e.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(88, 101, 242, 0.2)",border:"2px dashed #5865f2",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1e3}},e.createElement("div",{style:{color:"#5865f2",fontSize:"1.2em",fontWeight:"bold"}},"üìÅ Dosyayƒ± buraya bƒ±rakƒ±n")),_a&&_r>0&&e.createElement("div",{style:{position:"absolute",top:"-40px",left:"16px",right:"16px",backgroundColor:"#2b2d31",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",zIndex:1001}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement("span",{style:{color:"#b9bbbe",fontSize:"12px",whiteSpace:"nowrap"}},"üì§ Y√ºkleniyor: ",_r,"%"),e.createElement("div",{style:{flex:1,height:"6px",backgroundColor:"#40444b",borderRadius:"3px",overflow:"hidden"}},e.createElement("div",{style:{width:`${_r}%`,height:"100%",backgroundColor:"#5865f2",borderRadius:"3px",transition:"width 0.3s ease"}})))),e.createElement(pd,{onSendMessage:Ir,onFileUpload:On,onShowCodeSnippet:()=>_o(!0),placeholder:No?`${d.type==="dm"?No:`# ${No}`} kanalƒ±na mesaj g√∂nder`:"Mesaj yaz...",disabled:_a,fetchWithAuth:_,apiBaseUrl:P,activeChat:d}))),(!ee||Ro)&&e.createElement("div",{style:{...N.chatUserListPanel,...ee?N.mobileRightSidebar:{},paddingTop:Dn}},ee&&e.createElement("div",{style:N.mobileSidebarHeader},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Nr,{size:18,color:"#b9bbbe"}),e.createElement("span",{style:{fontSize:"16px",fontWeight:"bold",color:"white"}},d.type==="room"?"Sunucu √úyeleri":d.type==="friends"?"√áevrimi√ßi":"Arkada≈ülar")),e.createElement("button",{onClick:()=>qe(!1),style:N.closeSidebarButton},e.createElement(Ho,null))),e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:"Kullanƒ±cƒ±lar y√ºkleniyor..."})},e.createElement(zu,{chatUsers:[],allUsers:ne,onlineUsers:Tr,currentUser:I,currentUserProfile:ct,getDeterministicAvatar:je,onUserClick:t=>{let a=ne.find(m=>m.username===t);if(!a&&Kt.length>0){const m=Kt.find(h=>h.username===t);m&&(a={username:m.username,display_name:m.username,avatar:je(m.username),role:m.role||"member"})}a&&st(a)},onUserContextMenu:(t,a)=>{if(a===I)return;const m=ne.find(h=>h.username===a);m&&Aa({x:t.clientX,y:t.clientY,user:m,permissions:tl})},activeChat:d,serverMembers:Kt,friendsList:Ht,onNavigate:gl})))),k&&e.createElement(gd,{remoteStreams:oe,remoteVolumes:j,mutedUsers:dt}),k&&!mt&&d.type!=="voice"&&e.createElement("button",{onClick:()=>Co(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9998,background:"#5865f2",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"all 0.2s"},title:"Ses Panelini A√ß",onMouseEnter:t=>t.currentTarget.style.transform="scale(1.1)",onMouseLeave:t=>t.currentTarget.style.transform="scale(1)"},"üé§"),k&&mt&&d.type!=="voice"&&e.createElement(e.Fragment,null,_t?e.createElement(ps,{roomName:C,onClose:()=>{Co(!1)},isMinimized:oo,onToggleMinimize:()=>To(!oo),getRealUserAvatar:Ze,allUsers:ne,currentUserProfile:ct}):e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:"Sesli sohbet y√ºkleniyor..."})},e.createElement(Uu,{islandState:Ne,onDrag:t=>ln(a=>({...a,x:t.x,y:t.y})),onResize:t=>ln(a=>({...a,width:t.width,height:t.height})),isMobile:ee,headerActions:e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"}},e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéõÔ∏è [VoiceIsland] Hiding panel"),Co(!1)},style:{background:"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:"Paneli Gizle"},e.createElement(Ho,null)),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üé§ [VoiceIsland] Mute toggle clicked"),J()},style:{background:O?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:O?"Mikrofonu A√ß":"Mikrofonu Kapat"},e.createElement(Kr,{style:{opacity:O?.5:1}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéß [VoiceIsland] Deafen toggle clicked"),H()},style:{background:z?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:z?"Sesi A√ß":"Sesi Kapat"},e.createElement(Zl,{style:{opacity:z?.5:1}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üìπ [VoiceIsland] Video toggle clicked"),V()},style:{background:Y?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:Y?"Kamerayƒ± Kapat":"Kamerayƒ± A√ß"},e.createElement(Xl,{style:{opacity:Y?1:.5}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üñ•Ô∏è [VoiceIsland] Screen share toggle clicked"),U()},style:{background:ue?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:ue?"Ekran Payla≈üƒ±mƒ±nƒ± Durdur":"Ekranƒ± Payla≈ü"},e.createElement(Ql,{style:{opacity:ue?1:.5}})),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:G,style:{background:"#ed4245",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},title:"Odadan Ayrƒ±l"},e.createElement(ec,null)),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:()=>wt(t=>({...t,isActive:!t.isActive})),style:{background:Me.isActive?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},Me.isActive?"üé¨ Kapat":"üçø Sinema"),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("select",{onChange:t=>Se(t.target.value),value:Be,style:{background:"rgba(0,0,0,0.3)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"4px",padding:"2px 4px",fontSize:"12px",cursor:"pointer",outline:"none"}},e.createElement("option",{value:"none"},"Normal"),e.createElement("option",{value:"robot"},"ü§ñ Robot"),e.createElement("option",{value:"child"},"üë∂ Bebek"),e.createElement("option",{value:"monster"},"üëπ Canavar")),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("div",{style:{display:"flex",gap:"5px"}},e.createElement("button",{onClick:()=>Te("reset"),title:"Reset Game",style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px"}},"üîÑ"),["ü™®","üìÑ","‚úÇÔ∏è"].map((t,a)=>{const m=a===0?"rock":a===1?"paper":"scissors";return e.createElement("button",{key:t,onClick:()=>Te("move",m),style:{background:He?.moves?.[I]===m?"rgba(88, 101, 242, 0.5)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"50%",cursor:"pointer",fontSize:"16px",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.1s"},title:`Play ${m}`},t)})),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("div",{style:{display:"flex",gap:"5px"}},["‚ù§Ô∏è","üòÇ","üòÆ","üëç","üéâ"].map(t=>e.createElement("button",{key:t,onClick:()=>Ue(t),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px",padding:"0 4px",transition:"transform 0.1s"},onMouseEnter:a=>a.target.style.transform="scale(1.2)",onMouseLeave:a=>a.target.style.transform="scale(1)",title:`Send ${t}`},t))))},Me.isActive?e.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},e.createElement("div",{style:{flex:1,minHeight:0,position:"relative"}},e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"large",text:"Cinema Player y√ºkleniyor...",fullscreen:!0})},e.createElement(Bu,null))),e.createElement("div",{style:{height:"140px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",background:"rgba(0,0,0,0.5)",flexShrink:0,alignItems:"center"}},(()=>{const t=[];return t.push({id:"local-cam",user:{username:I,is_talking:Z,is_mic_off:O,is_deafened:z},track:de?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:Ze(I)}),Ee&&t.push({id:"local-screen",user:{username:I},track:Ee.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:Ze(I)}),Object.entries(oe||{}).forEach(([a,m])=>{const h=m.getVideoTracks(),c=m.getAudioTracks();h.length>0?h.forEach(w=>t.push({id:`${a}-${w.id}`,user:{username:a},track:w,streamType:"camera",isLocal:!1,avatarUrl:Ze(a)})):c.length>0&&t.push({id:`${a}-audio`,user:{username:a},track:c[0],streamType:"camera",isLocal:!1,avatarUrl:Ze(a)})}),t.map(a=>e.createElement(Bn,{key:a.id,...a,style:{height:"100%",aspectRatio:"16/9",minWidth:"160px"},lastReaction:Q,gameMove:He?.moves?.[a.user.username]}))})())):e.createElement("div",{style:{...N.videoGrid,flexDirection:We?"column":"row",flexWrap:We?"nowrap":"wrap",overflowY:"auto",height:"100%"}},(()=>{const t=[];if(t.push({id:"local-cam",user:{username:I,is_talking:Z,is_mic_off:O,is_deafened:z},track:de?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:Ze(I)}),Ee?.getVideoTracks()[0]&&t.push({id:"local-screen",user:{username:I,is_talking:!1},track:Ee.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:Ze(I)}),Object.entries(oe||{}).forEach(([m,h])=>{if(m!==I){const c=h.getVideoTracks(),w=h.getAudioTracks();c.length>0?c.forEach(R=>{t.push({id:`${m}-${R.id}`,user:{username:m},track:R,streamType:R.label?.toLowerCase().includes("screen")?"screen":"camera",isLocal:!1,avatarUrl:Ze(m)})}):w.length>0&&t.push({id:`${m}-audio`,user:{username:m},track:w[0],streamType:"camera",isLocal:!1,avatarUrl:Ze(m)})}}),We){const m=t.find(c=>c.id===We);if(!m)return to(null),a(t);const h=t.filter(c=>c.id!==We);return e.createElement(e.Fragment,null,e.createElement("div",{style:{flex:1,width:"100%",minHeight:"300px",padding:"0",overflow:"hidden",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"}},e.createElement(Bn,{...m,style:{width:"100%",height:"100%",maxWidth:"100%",borderRadius:"0",maxHeight:"100%",margin:"0 auto",aspectRatio:"unset"},onClick:()=>to(null),lastReaction:Q,gameMove:He?.moves?.[m.user?.username]})),e.createElement("div",{style:{height:"120px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",flexShrink:0,justifyContent:"center"}},h.map(c=>e.createElement(Bn,{key:c.id,...c,style:{width:"180px",height:"100%",flexShrink:0,aspectRatio:"16/9"},onClick:()=>to(c.id),lastReaction:Q,gameMove:He?.moves?.[c.user.username]}))))}else return a(t);function a(m){return m.map(h=>e.createElement(Bn,{key:h.id,...h,style:{width:"240px",maxWidth:"100%",flexGrow:1,height:"auto"},onClick:()=>to(h.id),lastReaction:Q,gameMove:He?.moves?.[h.user.username]}))}})())))),dr&&e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"medium",text:"Temalar y√ºkleniyor..."})},e.createElement(Od,{onClose:()=>Ft(!1),currentTheme:$i,onThemeChange:da})),Sa&&e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"medium",text:"√ñzet hazƒ±rlanƒ±yor..."})},e.createElement(ms,{roomSlug:d.id,onClose:()=>Er(!1),fetchWithAuth:_,apiBaseUrl:P})),Qr&&e.createElement(o.Suspense,{fallback:e.createElement(Qe,{size:"small",text:"≈ûablonlar y√ºkleniyor..."})},e.createElement(Ad,{onClose:()=>ut(!1),onSelect:t=>{Bo.current?.appendText?.(t),ut(!1)},fetchWithAuth:_,apiBaseUrl:P,isAdmin:Ae}))),An&&e.createElement(ju,{x:An.x,y:An.y,user:An.user,currentUser:I,onClose:()=>Aa(null),onAction:Cl,voiceChannels:B.flatMap(t=>(t.categories||[]).flatMap(a=>(a.rooms||[]).filter(m=>m.is_voice))),isAdmin:Ae,isInVoiceRoom:k,friendsList:Ht}),Uo&&Ol.createPortal(e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999999},onClick:()=>Rn(null)},e.createElement("div",{onClick:t=>t.stopPropagation(),style:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"400px",maxHeight:"80vh",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"}},e.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #3f4147",textAlign:"center"}},e.createElement("h2",{style:{color:"#f2f3f5",margin:0,fontSize:"18px"}},"üé´ Sunucuya Davet Et"),e.createElement("p",{style:{color:"#b9bbbe",margin:"8px 0 0",fontSize:"14px"}},e.createElement("strong",null,Uo.username)," kullanƒ±cƒ±sƒ±nƒ± hangi sunucuya davet etmek istiyorsunuz?")),e.createElement("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"12px"}},B.map(t=>e.createElement("div",{key:t.id,onClick:async()=>{try{const a=await _(`${W}/servers/${t.id}/invite/`,{method:"POST",body:JSON.stringify({target_username:Uo.username})});if(a.ok)$.success(`üé´ ${Uo.username} kullanƒ±cƒ±sƒ±na davetiye g√∂nderildi!`);else{const m=await a.json();m.error&&m.error.includes("zaten")?$.info(`‚ÑπÔ∏è ${Uo.username} zaten bu sunucunun √ºyesi!`):$.error(`‚ùå ${m.error||"Davet g√∂nderilemedi"}`)}}catch(a){console.error("‚ùå Invite error:",a),$.error("‚ùå Baƒülantƒ± hatasƒ±")}Rn(null)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",backgroundColor:"rgba(255,255,255,0.02)",marginBottom:"8px"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="rgba(88, 101, 242, 0.2)"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"}},t.icon?e.createElement("img",{src:t.icon,alt:t.name,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover"}}):e.createElement("div",{style:{width:40,height:40,borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"white",fontSize:"16px"}},t.name?.substring(0,2).toUpperCase()),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{color:"#f2f3f5",fontWeight:"600"}},t.name),e.createElement("div",{style:{color:"#b9bbbe",fontSize:"12px"}},t.member_count||t.categories?.length||0," √ºye")),e.createElement("div",{style:{color:"#5865f2",fontSize:"20px"}},"‚Üí")))),e.createElement("div",{style:{padding:"16px 20px",borderTop:"1px solid #3f4147",textAlign:"center"}},e.createElement("button",{onClick:()=>Rn(null),style:{backgroundColor:"#4f545c",color:"#f2f3f5",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"600"}},"ƒ∞ptal")))),document.body))},N={mainContainer:{display:"flex",width:"100%",height:"100dvh",backgroundColor:"#1E1F22",backgroundImage:"radial-gradient(circle at 50% 10%, rgba(88, 101, 242, 0.05) 0%, transparent 40%)",color:"white",overflow:"hidden",fontFamily:"'Inter', sans-serif"},chatLayout:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},sidebarWrapper:{width:"312px",backgroundColor:"rgba(30, 31, 34, 0.6)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"row",flexShrink:0,height:"100%",borderRight:"1px solid rgba(255,255,255,0.05)"},mainContent:{flex:1,display:"flex",minWidth:0,position:"relative",height:"100%",overflow:"hidden"},chatArea:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"transparent",minWidth:0,height:"100%",overflow:"hidden",position:"relative"},chatHeader:{height:"54px",minHeight:"54px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",padding:"0 20px",flexShrink:0,backgroundColor:"rgba(20, 21, 24, 0.7)",backdropFilter:"blur(15px)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",zIndex:10},messageBox:{flex:1,overflowY:"auto",padding:"20px 0",display:"flex",flexDirection:"column",gap:"4px",scrollBehavior:"smooth",minHeight:0},inputContainer:{padding:"0 20px 24px 20px",backgroundColor:"transparent",position:"relative",flexShrink:0,minHeight:"auto",zIndex:20},chatUserListPanel:{width:"240px",backgroundColor:"rgba(30, 31, 34, 0.6)",borderLeft:"1px solid rgba(255,255,255,0.08)",flexShrink:0,height:"100%",backdropFilter:"blur(10px)"},mobileSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,left:0,width:"85vw",maxWidth:"350px",boxShadow:"5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileRightSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,right:0,width:"85vw",maxWidth:"300px",boxShadow:"-5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99,backdropFilter:"blur(3px)"},mobileMenuButton:{background:"none",border:"none",color:"white",fontSize:"1.5em",marginRight:"10px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",transition:"all 0.2s"},iconButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"1.3em",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",borderRadius:"50%",transition:"all 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff"}},videoGrid:{display:"flex",flexWrap:"wrap",gap:"5px",padding:"5px",alignContent:"center",justifyContent:"center",alignItems:"center"},systemMessage:{color:"#949ba4",textAlign:"center",fontSize:"0.85em",margin:"10px 0",fontStyle:"italic"},searchForm:{position:"relative",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"4px",padding:"0 8px",height:"32px",marginRight:"8px",border:"1px solid rgba(255,255,255,0.05)"},searchInput:{backgroundColor:"transparent",border:"none",color:"#dcddde",fontSize:"0.9em",width:"140px",outline:"none"},searchIcon:{color:"#949ba4",fontSize:"0.8em",cursor:"pointer"},typingIndicator:{color:"#dbdee1",fontSize:"0.85em",maxWidth:"180px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold"},connectionPillOnline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(59, 165, 93, 0.2)",border:"1px solid #3ba55d",color:"#3ba55d",fontSize:"0.75em",fontWeight:700},connectionPillOffline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(218, 55, 60, 0.2)",border:"1px solid #da373c",color:"#da373c",fontSize:"0.75em",fontWeight:700},scrollToBottomButton:{position:"absolute",right:"16px",bottom:"110px",backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.35)",cursor:"pointer",fontWeight:600},mobileSidebarHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",backgroundColor:"#202225",borderBottom:"1px solid #111214",minHeight:"54px",flexShrink:0},closeSidebarButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"22px",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background 0.2s, color 0.2s"},menuItem:{width:"100%",padding:"10px 16px",background:"transparent",border:"none",color:"#dcddde",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:"500",transition:"all 0.15s ease",borderRadius:"0"}};function am(){return e.createElement(wc,{fallbackMessage:"Pawscord encountered an error. Please try refreshing the page."},e.createElement(od,null,e.createElement(rm,null)))}const sm=`${et}/auth/verify-email/`,im=()=>{const{token:s}=ws(),n=Ko(),[r,u]=o.useState("loading"),[l,p]=o.useState("Hesabƒ±nƒ±z doƒürulanƒ±yor, l√ºtfen bekleyin...");return o.useEffect(()=>{if(!s){u("error"),p("Ge√ßersiz veya eksik doƒürulama kodu.");return}const k=async()=>{try{const T=await fetch(`${sm}${s}/`),C=await T.json();T.ok?(u("success"),p("√úyeliƒüiniz ba≈üarƒ±yla aktif edildi!")):(u("error"),p(C.message||"Doƒürulama ba≈üarƒ±sƒ±z oldu."))}catch{u("error"),p("Sunucuya baƒülanƒ±lamadƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.")}};setTimeout(()=>{k()},1e3)},[s]),e.createElement("div",{style:Ve.container},e.createElement("div",{style:Ve.card},r==="loading"&&e.createElement("div",{style:Ve.content},e.createElement(_s,{className:"spin-animation",size:50,color:"#5865f2",style:{marginBottom:20}}),e.createElement("h2",{style:Ve.title},"Doƒürulanƒ±yor..."),e.createElement("p",{style:Ve.text},l)),r==="success"&&e.createElement("div",{style:Ve.content},e.createElement(qr,{size:60,color:"#43b581",style:{marginBottom:20}}),e.createElement("h2",{style:{...Ve.title,color:"#43b581"}},"Tebrikler! üéâ"),e.createElement("p",{style:Ve.text},l),e.createElement("p",{style:Ve.subText},"Artƒ±k Pawscord'a tam eri≈üim saƒülayabilirsin."),e.createElement("button",{onClick:()=>n("/"),style:Ve.primaryButton},"Gƒ∞Rƒ∞≈û YAP")),r==="error"&&e.createElement("div",{style:Ve.content},e.createElement(Yr,{size:60,color:"#f04747",style:{marginBottom:20}}),e.createElement("h2",{style:{...Ve.title,color:"#f04747"}},"Hata Olu≈ütu"),e.createElement("p",{style:Ve.text},l),e.createElement("button",{onClick:()=>n("/"),style:Ve.secondaryButton},"Ana Sayfaya D√∂n"))))},Ve={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#1e1f22",fontFamily:"'Poppins', sans-serif",padding:"20px"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",maxWidth:"400px",width:"100%",textAlign:"center",border:"1px solid #1f2023"},content:{display:"flex",flexDirection:"column",alignItems:"center"},title:{margin:"0 0 10px 0",color:"#fff",fontSize:"1.8em"},text:{color:"#dbdee1",fontSize:"1.1em",margin:"0 0 20px 0",lineHeight:"1.5"},subText:{color:"#949ba4",fontSize:"0.9em",marginBottom:"30px"},primaryButton:{backgroundColor:"#5865f2",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",width:"100%"},secondaryButton:{backgroundColor:"#4f545c",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",width:"100%"}},Os=document.createElement("style");Os.innerText=`
  .spin-animation { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(Os);const lm=e.memo(im),cm=()=>{const{code:s}=ws(),n=Ko(),{isAuthenticated:r,token:u}=wo(),[l,p]=o.useState(null),[k,T]=o.useState(!0),[C,D]=o.useState(""),[G,O]=o.useState(!1),[z,J]=o.useState(!1),H="8888",V=window.Capacitor&&window.Capacitor.isNativePlatform(),U=typeof window<"u"&&typeof window.require=="function",q=`${(()=>{if(V)return"https://www.pawscord.com";if(U)return`http://127.0.0.1:${H}`;const Z=window.location.protocol,ae=window.location.hostname;return ae.includes("pawscord.com")?"https://www.pawscord.com":`${Z}//${ae}:${H}`})()}/api`;o.useEffect(()=>{console.log("üé´ [Invite Page] Loaded with code:",s),de()},[s]);const de=async()=>{console.log("üîç [Invite Page] Fetching invite info..."),T(!0),D("");try{const Z=await fetch(`${q}/invites/${s}/`),ae=await Z.json();console.log("üì¶ [Invite Page] Response:",{status:Z.status,data:ae}),Z.ok?(p(ae),console.log("‚úÖ [Invite Page] Invite info loaded")):(D(ae.error||"Davet bulunamadƒ±"),console.error("‚ùå [Invite Page] Error:",ae.error))}catch(Z){console.error("‚ùå [Invite Page] Network error:",Z),D("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}T(!1)},oe=async()=>{if(!r){console.log("‚ö†Ô∏è [Invite Page] User not authenticated, redirecting to login"),$.error("‚ùå L√ºtfen √∂nce giri≈ü yapƒ±n!"),sessionStorage.setItem("pending_invite",s),n("/");return}if(!u){console.error("‚ùå [Invite Page] No token found!"),$.error("‚ùå Giri≈ü token'ƒ± bulunamadƒ±. L√ºtfen tekrar giri≈ü yapƒ±n."),n("/");return}console.log("üé´ [Invite Page] Accepting invite...",{code:s,apiUrl:`${q}/invites/${s}/accept/`,hasToken:!!u}),O(!0),D("");try{const Z=`${q}/invites/${s}/accept/`;console.log("üì° [Invite Page] POST to:",Z);const ae=await fetch(Z,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});console.log("üì¶ [Invite Page] Response status:",ae.status);const ue=await ae.json();if(console.log("üì¶ [Invite Page] Response data:",ue),ae.ok){console.log("‚úÖ [Invite Page] Successfully joined server!"),$.success(`‚úÖ Ba≈üarƒ±lƒ±! ${ue.server_name||"Sunucu"}ya katƒ±ldƒ±nƒ±z!`),J(!0);const Y=ue.redirect||"/";console.log("üîó [Invite Page] Redirecting to:",Y),setTimeout(()=>{Y.startsWith("http")?window.location.href=Y:(n(Y),window.location.reload())},2e3)}else{const Y=ue.error||ue.message||"Sunucuya katƒ±lma hatasƒ±";console.error("‚ùå [Invite Page] Join failed:",Y,ue),D(Y),$.error(`‚ùå Hata: ${Y}`)}}catch(Z){console.error("‚ùå [Invite Page] Exception:",Z);const ae=Z.message||"Baƒülantƒ± hatasƒ±";D(ae),$.error(`‚ùå Hata: ${ae}`)}O(!1)};return k?e.createElement("div",{style:te.container},e.createElement("div",{style:te.backgroundGradient}),e.createElement("div",{style:te.card},e.createElement("div",{style:te.spinner}),e.createElement("p",{style:te.loadingText},"Davet y√ºkleniyor..."))):C?e.createElement("div",{style:te.container},e.createElement("div",{style:te.backgroundGradient}),e.createElement("div",{style:te.card},e.createElement(Yr,{size:64,color:"var(--error)"}),e.createElement("h2",{style:te.errorTitle},"Hata"),e.createElement("p",{style:te.errorText},C),e.createElement("button",{onClick:()=>n("/"),style:te.homeButton},"Ana Sayfaya D√∂n"))):z?e.createElement("div",{style:te.container},e.createElement("div",{style:te.backgroundGradient}),e.createElement("div",{style:te.card},e.createElement(qr,{size:64,color:"var(--success)"}),e.createElement("h2",{style:te.successTitle},"Ba≈üarƒ±lƒ±!"),e.createElement("p",{style:te.successText},e.createElement("strong",null,l.server.name)," sunucusuna katƒ±ldƒ±nƒ±z!"),e.createElement("p",{style:te.redirectText},"Ana sayfaya y√∂nlendiriliyorsunuz..."))):e.createElement("div",{style:te.container},e.createElement("div",{style:te.backgroundGradient}),e.createElement("div",{style:te.card},l.server.icon&&e.createElement("img",{src:l.server.icon,alt:l.server.name,style:te.serverIcon}),e.createElement("h1",{style:te.serverName},e.createElement(tc,{style:te.icon}),l.server.name),e.createElement("div",{style:te.infoRow},e.createElement(Nr,{style:te.infoIcon}),e.createElement("span",null,l.server.member_count," √úye")),l.expires_at&&e.createElement("div",{style:te.infoRow},e.createElement(oc,{style:te.infoIcon}),e.createElement("span",null,"S√ºre: ",new Date(l.expires_at).toLocaleString("tr-TR"))),l.max_uses>0&&e.createElement("div",{style:te.infoRow},e.createElement("span",null,"Kullanƒ±m: ",l.uses," / ",l.max_uses)),e.createElement("div",{style:te.inviterInfo},"Davet Eden: ",e.createElement("strong",null,l.inviter.username)),e.createElement("button",{onClick:oe,disabled:G,style:{...te.joinButton,...G?te.joinButtonDisabled:{}}},G?"Katƒ±lƒ±nƒ±yor...":r?"Sunucuya Katƒ±l":"Giri≈ü Yap ve Katƒ±l"),!r&&e.createElement("p",{style:te.loginHint},"* Sunucuya katƒ±lmak i√ßin giri≈ü yapmanƒ±z gerekiyor")))},te={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"var(--bg-app)",padding:"20px",position:"relative",overflow:"hidden"},backgroundGradient:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(ellipse at top, rgba(139, 92, 246, 0.15), transparent 50%), radial-gradient(ellipse at bottom, rgba(118, 75, 162, 0.15), transparent 50%)",pointerEvents:"none",zIndex:0},card:{background:"var(--glass-bg)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",padding:"48px",borderRadius:"var(--radius-2xl)",textAlign:"center",color:"var(--text-primary)",maxWidth:"560px",width:"100%",boxShadow:"var(--shadow-2xl)",border:"1px solid var(--glass-border)",position:"relative",zIndex:1,animation:"scaleIn 0.4s ease-out"},spinner:{width:"50px",height:"50px",border:"3px solid var(--glass-border)",borderTop:"3px solid var(--brand-primary)",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto"},loadingText:{marginTop:"24px",color:"var(--text-tertiary)",fontSize:"15px",fontWeight:500},serverIcon:{width:"120px",height:"120px",borderRadius:"50%",marginBottom:"24px",objectFit:"cover",border:"4px solid var(--glass-border)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.2)",transition:"var(--transition-normal)"},serverName:{fontSize:"32px",fontWeight:800,marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",background:"var(--gradient-primary)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},icon:{fontSize:"28px",color:"var(--brand-primary)"},infoRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"16px 0",color:"var(--text-secondary)",fontSize:"16px",fontWeight:500,padding:"12px 20px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},infoIcon:{fontSize:"20px",color:"var(--brand-primary)"},inviterInfo:{marginTop:"24px",marginBottom:"32px",color:"var(--text-tertiary)",fontSize:"14px",padding:"16px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},joinButton:{background:"var(--gradient-primary)",color:"white",border:"none",padding:"16px 32px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"16px",fontWeight:700,marginTop:"16px",width:"100%",transition:"var(--transition-normal)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)",position:"relative",overflow:"hidden"},joinButtonDisabled:{background:"var(--bg-tertiary)",cursor:"not-allowed",opacity:.6,boxShadow:"none"},loginHint:{marginTop:"20px",fontSize:"13px",color:"var(--warning)",fontStyle:"italic",fontWeight:500},errorTitle:{color:"var(--error)",marginTop:"24px",fontSize:"28px",fontWeight:700},errorText:{color:"var(--text-tertiary)",margin:"24px 0",fontSize:"15px",lineHeight:1.6},successTitle:{color:"var(--success)",marginTop:"24px",fontSize:"28px",fontWeight:700},successText:{color:"var(--text-primary)",margin:"24px 0",fontSize:"18px",fontWeight:600},redirectText:{color:"var(--text-tertiary)",fontSize:"14px",marginTop:"12px",fontStyle:"italic"},homeButton:{background:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--glass-border)",padding:"14px 28px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"15px",fontWeight:600,marginTop:"24px",transition:"var(--transition-normal)"}},Ds=document.createElement("style");Ds.textContent=`
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`;document.head.appendChild(Ds);const dm=({apiBaseUrl:s})=>{const[n,r]=o.useState(!1),[u,l]=o.useState([]),[p,k]=o.useState(!1),T=o.useRef(null),C=o.useRef([]),D=o.useRef(null),{token:G}=wo(),O=()=>{D.current?.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{O()},[u,p]);const z=async()=>{try{const V=await navigator.mediaDevices.getUserMedia({audio:!0});T.current=new MediaRecorder(V),C.current=[],T.current.ondataavailable=U=>{U.data.size>0&&C.current.push(U.data)},T.current.onstop=H,T.current.start(),r(!0)}catch{$.error("‚ùå Mikrofon izni gerekli!")}},J=()=>{T.current&&n&&(T.current.stop(),r(!1))},H=async()=>{k(!0);const V=new Blob(C.current,{type:"audio/webm"}),U=new FormData;U.append("audio",V,"voice.webm");try{const j=await fetch(`${s}/eng-learn/voice-chat/`,{method:"POST",headers:{Authorization:`Bearer ${G}`},body:U});if(j.ok){const q=await j.json();l(oe=>[...oe,{sender:"user",text:q.user_text},{sender:"ai",text:q.ai_text}]),new Audio(`data:audio/mp3;base64,${q.audio_base64}`).play()}else console.error("Sunucu hatasƒ±:",j.status),$.error("‚ùå Anla≈üƒ±lamadƒ± veya hata olu≈ütu.")}catch(j){console.error(j),$.error("‚ùå Baƒülantƒ± hatasƒ±.")}finally{k(!1)}};return e.createElement("div",{style:yt.container},e.createElement("div",{style:yt.header},e.createElement(vs,{to:"/eng-learn",style:yt.backBtn},e.createElement(ks,null)," Geri"),e.createElement("h2",null,"AI ile Konu≈ü (Speaking)")),e.createElement("div",{style:yt.chatArea},u.length===0&&e.createElement("div",{style:yt.emptyState},e.createElement(os,{size:60,color:"#5865f2",style:{marginBottom:20}}),e.createElement("h3",null,"ƒ∞ngilizce Pratik Yap"),e.createElement("p",null,"Mikrofona basƒ±lƒ± tut ve konu≈ümaya ba≈üla."),e.createElement("small",{style:{color:"#72767d"}},'"Hello, how are you?" diyebilirsin.')),u.map((V,U)=>e.createElement("div",{key:U,style:{...yt.messageBubble,alignSelf:V.sender==="user"?"flex-end":"flex-start",backgroundColor:V.sender==="user"?"#5865f2":"#2b2d31",color:"white",borderBottomRightRadius:V.sender==="user"?"0":"12px",borderBottomLeftRadius:V.sender==="ai"?"0":"12px"}},e.createElement("div",{style:yt.msgHeader},V.sender==="user"?e.createElement(nc,{size:12}):e.createElement(os,{size:12}),e.createElement("span",{style:{marginLeft:5,fontSize:"0.8em",fontWeight:"bold"}},V.sender==="user"?"Sen":"AI √ñƒüretmen")),V.text)),p&&e.createElement("div",{style:{alignSelf:"flex-start",color:"#949ba4",marginLeft:10,fontStyle:"italic"}},"Yazƒ±yor ve seslendiriyor..."),e.createElement("div",{ref:D})),e.createElement("div",{style:yt.controls},e.createElement("button",{onMouseDown:z,onMouseUp:J,onTouchStart:z,onTouchEnd:J,style:{...yt.micButton,backgroundColor:n?"#f04747":"#5865f2",transform:n?"scale(1.1)":"scale(1)"}},n?e.createElement(rc,{size:24}):e.createElement(Kr,{size:30})),e.createElement("p",{style:{marginTop:15,color:"#949ba4",fontSize:"0.9em"}},n?"Dinliyor... (Bƒ±rakƒ±nca G√∂nderir)":"Basƒ±lƒ± Tut ve Konu≈ü")))},yt={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#313338",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif"},header:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px",borderBottom:"1px solid #1f2023",paddingBottom:"15px"},backBtn:{color:"#b9bbbe",fontSize:"1em",textDecoration:"none",display:"flex",alignItems:"center",gap:"5px",fontWeight:"600"},chatArea:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px",paddingBottom:"20px",paddingRight:"5px"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#949ba4",opacity:.8,textAlign:"center"},messageBubble:{maxWidth:"85%",padding:"15px",borderRadius:"12px",fontSize:"1em",lineHeight:"1.5",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",position:"relative"},msgHeader:{display:"flex",alignItems:"center",marginBottom:"5px",opacity:.8},controls:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20px",borderTop:"1px solid #1f2023"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.1s ease",boxShadow:"0 5px 20px rgba(0,0,0,0.4)"}},Ss=[{text:"Hello",difficulty:"Kolay"},{text:"Water",difficulty:"Kolay"},{text:"Friend",difficulty:"Kolay"},{text:"Family",difficulty:"Kolay"},{text:"Music",difficulty:"Kolay"},{text:"School",difficulty:"Kolay"},{text:"Computer",difficulty:"Kolay"},{text:"Beautiful",difficulty:"Kolay"},{text:"Together",difficulty:"Kolay"},{text:"Morning",difficulty:"Kolay"},{text:"Happy",difficulty:"Kolay"},{text:"Garden",difficulty:"Kolay"},{text:"People",difficulty:"Kolay"},{text:"Coffee",difficulty:"Kolay"},{text:"Purple",difficulty:"Kolay"},{text:"Technology",difficulty:"Orta"},{text:"Development",difficulty:"Orta"},{text:"Environment",difficulty:"Orta"},{text:"Successfully",difficulty:"Orta"},{text:"Opportunity",difficulty:"Orta"},{text:"Government",difficulty:"Orta"},{text:"Communication",difficulty:"Orta"},{text:"Experience",difficulty:"Orta"},{text:"Available",difficulty:"Orta"},{text:"Management",difficulty:"Orta"},{text:"International",difficulty:"Orta"},{text:"Recommendation",difficulty:"Orta"},{text:"Responsibility",difficulty:"Orta"},{text:"Understand",difficulty:"Orta"},{text:"Literature",difficulty:"Orta"},{text:"Necessary",difficulty:"Orta"},{text:"Vocabulary",difficulty:"Orta"},{text:"Interesting",difficulty:"Orta"},{text:"Comfortable",difficulty:"Orta"},{text:"Vegetable",difficulty:"Orta"},{text:"Squirrel",difficulty:"Zor"},{text:"Schedule",difficulty:"Zor"},{text:"Queue",difficulty:"Zor"},{text:"Rural",difficulty:"Zor"},{text:"Brewery",difficulty:"Zor"},{text:"Phenomenon",difficulty:"Zor"},{text:"February",difficulty:"Zor"},{text:"Library",difficulty:"Zor"},{text:"Specific",difficulty:"Zor"},{text:"Regularly",difficulty:"Zor"},{text:"Probably",difficulty:"Zor"},{text:"Algorithm",difficulty:"Zor"},{text:"Hierarchical",difficulty:"Zor"},{text:"Maintenance",difficulty:"Zor"},{text:"Pronunciation",difficulty:"Zor"},{text:"Throughout",difficulty:"Zor"},{text:"Entrepreneur",difficulty:"Zor"},{text:"Simultaneously",difficulty:"Zor"},{text:"Mischievous",difficulty:"Zor"},{text:"Chaos",difficulty:"Zor"},{text:"Recipe",difficulty:"Zor"},{text:"Worcestershire",difficulty:"Efsane"},{text:"Colonel",difficulty:"Efsane"},{text:"Miscellaneous",difficulty:"Efsane"},{text:"Anesthetist",difficulty:"Efsane"},{text:"Otorhinolaryngologist",difficulty:"Efsane"},{text:"Isthmus",difficulty:"Efsane"},{text:"Anemone",difficulty:"Efsane"},{text:"Synecdoche",difficulty:"Efsane"},{text:"Onomatopoeia",difficulty:"Efsane"},{text:"Conscientious",difficulty:"Efsane"},{text:"Defibrillator",difficulty:"Efsane"},{text:"Antidisestablishmentarianism",difficulty:"Efsane"},{text:"How are you doing today?",difficulty:"C√ºmle"},{text:"I would like to order a coffee.",difficulty:"C√ºmle"},{text:"The quick brown fox jumps over the lazy dog.",difficulty:"C√ºmle"},{text:"Can you please repeat that?",difficulty:"C√ºmle"},{text:"I am learning to speak English fluently.",difficulty:"C√ºmle"},{text:"It is raining cats and dogs outside.",difficulty:"C√ºmle"},{text:"Actions speak louder than words.",difficulty:"C√ºmle"},{text:"I need to schedule a meeting for tomorrow.",difficulty:"C√ºmle"},{text:"What do you do for a living?",difficulty:"C√ºmle"},{text:"She sells seashells by the seashore.",difficulty:"Tekerleme"},{text:"Red lorry, yellow lorry.",difficulty:"Tekerleme"},{text:"Peter Piper picked a peck of pickled peppers.",difficulty:"Tekerleme"},{text:"How much wood would a woodchuck chuck?",difficulty:"Tekerleme"},{text:"Unique New York.",difficulty:"Tekerleme"},{text:"Fuzzy Wuzzy was a bear.",difficulty:"Tekerleme"},{text:"Which wristwatches are Swiss wristwatches?",difficulty:"Tekerleme"}],um=({apiBaseUrl:s})=>{const{token:n}=wo(),[r,u]=o.useState(null),[l,p]=o.useState(!1),[k,T]=o.useState(!1),[C,D]=o.useState("idle"),[G,O]=o.useState(""),[z,J]=o.useState(0),H=o.useRef(null),V=o.useRef([]);o.useEffect(()=>{U()},[]);const U=()=>{const Z=Math.floor(Math.random()*Ss.length);u(Ss[Z]),D("idle"),O("")},j=async()=>{if(r)try{const Z=await fetch(`${s}/eng-learn/speak-text/`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({text:r.text})});if(Z.ok){const ae=await Z.json();new Audio(`data:audio/mp3;base64,${ae.audio_base64}`).play()}}catch(Z){console.error(Z)}},q=async()=>{O(""),D("recording");try{const Z=await navigator.mediaDevices.getUserMedia({audio:!0});H.current=new MediaRecorder(Z),V.current=[],H.current.ondataavailable=ae=>{ae.data.size>0&&V.current.push(ae.data)},H.current.onstop=oe,H.current.start(),p(!0)}catch{$.error("‚ùå Mikrofon izni gerekli!"),D("idle")}},de=()=>{H.current&&l&&(H.current.stop(),p(!1))},oe=async()=>{T(!0);const Z=new Blob(V.current,{type:"audio/webm"}),ae=new FormData;ae.append("audio",Z,"voice.webm"),ae.append("target_text",r.text);try{const Y=await(await fetch(`${s}/eng-learn/check-pronunciation/`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:ae})).json();Y.is_correct?(D("success"),O(`Harika! üéâ (${Y.spoken_text})`),J(pe=>pe+1)):(D("error"),O(`Algƒ±lanan: "${Y.spoken_text||"???"}" - Tekrar dene!`))}catch(ue){console.error(ue),O("Sunucu hatasƒ±."),D("error")}finally{T(!1)}};return r?e.createElement("div",{style:De.container},e.createElement("div",{style:De.header},e.createElement(vs,{to:"/eng-learn",style:De.backBtn},e.createElement(ks,null)," √áƒ±kƒ±≈ü"),e.createElement("div",{style:De.scoreBadge},"Skor: ",z)),e.createElement("div",{style:De.mainContent},e.createElement("div",{style:{...De.card,borderColor:C==="success"?"#43b581":C==="error"?"#f04747":"transparent",boxShadow:C==="success"?"0 0 30px rgba(67, 181, 129, 0.3)":C==="error"?"0 0 30px rgba(240, 71, 71, 0.3)":"0 10px 30px rgba(0,0,0,0.3)"}},e.createElement("span",{style:{...De.difficulty,backgroundColor:r.difficulty==="Efsane"?"#eb459e":r.difficulty==="Zor"?"#f04747":"#202225",color:r.difficulty==="Efsane"||r.difficulty==="Zor"?"white":"#949ba4"}},r.difficulty),e.createElement("h1",{style:De.wordText},r.text),e.createElement("div",{style:{height:"30px",marginTop:"10px",color:C==="success"?"#43b581":"#f04747",fontWeight:"bold"}},k?"Analiz ediliyor...":G),e.createElement("div",{style:De.controls},e.createElement("button",{onClick:j,style:De.iconButton,title:"Doƒürusunu Dinle"},e.createElement(ac,{size:24})),e.createElement("button",{onMouseDown:q,onMouseUp:de,onTouchStart:q,onTouchEnd:de,style:{...De.micButton,backgroundColor:l?"#f04747":C==="success"?"#43b581":"#5865f2",transform:l?"scale(1.1)":"scale(1)"}},e.createElement(Kr,{size:32}))),e.createElement("p",{style:De.hint},l?"Dinliyor...":"Mikrofona basƒ±lƒ± tut ve oku")),e.createElement("div",{style:De.bottomNav},e.createElement("button",{onClick:U,style:De.skipButton},C==="success"?e.createElement(e.Fragment,null,"Sonraki Kelime ",e.createElement(sc,null)):e.createElement(e.Fragment,null,"Bunu Ge√ß ",e.createElement(ic,null)))))):e.createElement("div",{style:De.container},"Y√ºkleniyor...")},De={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1e1f22",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif",alignItems:"center"},header:{width:"100%",maxWidth:"600px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},backBtn:{color:"#b9bbbe",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},scoreBadge:{backgroundColor:"#f0b232",color:"#000",padding:"5px 15px",borderRadius:"20px",fontWeight:"bold"},mainContent:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"24px",width:"100%",maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",border:"3px solid transparent",transition:"all 0.3s ease"},difficulty:{padding:"4px 12px",borderRadius:"12px",fontSize:"0.85em",marginBottom:"20px",fontWeight:"bold"},wordText:{fontSize:"2.2em",fontWeight:"800",margin:"0 0 10px 0",color:"#fff",letterSpacing:"1px",lineHeight:"1.3"},controls:{display:"flex",alignItems:"center",gap:"30px",marginTop:"30px"},iconButton:{width:"50px",height:"50px",borderRadius:"50%",border:"2px solid #40444b",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 5px 20px rgba(0,0,0,0.4)",transition:"all 0.1s ease"},hint:{marginTop:"20px",color:"#72767d",fontSize:"0.9em"},bottomNav:{marginTop:"50px"},skipButton:{background:"transparent",border:"none",color:"#b9bbbe",fontSize:"1.1em",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",padding:"10px 20px",borderRadius:"8px",transition:"background 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.05)"}}},mm=e.memo(um),fm=({apiBaseUrl:s})=>{const[n,r]=o.useState("loading"),u=Ko(),l=Es();return o.useEffect(()=>{const p=new URLSearchParams(l.search),k=p.get("code");if(p.get("error")){r("error");return}if(k){const C=localStorage.getItem("access_token");fetch(`${s}/spotify/callback/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({code:k})}).then(D=>{D.ok?(r("success"),setTimeout(()=>{u("/",{replace:!0})},1500)):r("error")}).catch(D=>{console.error(D),r("error")})}},[l,s,u]),e.createElement("div",{style:Ur.container},e.createElement("div",{style:Ur.card},n==="loading"&&e.createElement(e.Fragment,null,e.createElement(_s,{className:"spin",size:50,color:"#1db954",style:{marginBottom:20}}),e.createElement("h2",null,"Spotify Baƒülanƒ±yor..."),e.createElement("p",null,"Token alƒ±nƒ±yor, l√ºtfen bekleyin.")),n==="success"&&e.createElement(e.Fragment,null,e.createElement(qr,{size:60,color:"#1db954",style:{marginBottom:20}}),e.createElement("h2",{style:{color:"#1db954"}},"Ba≈üarƒ±lƒ±!"),e.createElement("p",null,"Hesabƒ±n baƒülandƒ±. Sohbet ekranƒ±na d√∂n√ºl√ºyor...")),n==="error"&&e.createElement(e.Fragment,null,e.createElement(Yr,{size:60,color:"#f04747",style:{marginBottom:20}}),e.createElement("h2",{style:{color:"#f04747"}},"Hata Olu≈ütu"),e.createElement("p",null,"Baƒülantƒ± kurulamadƒ±."),e.createElement("button",{onClick:()=>u("/"),style:Ur.button},"Geri D√∂n"))))},Ur={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#191414",color:"white",fontFamily:"Poppins, sans-serif"},card:{backgroundColor:"#282828",padding:"40px",borderRadius:"16px",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",maxWidth:"400px",width:"90%"},button:{marginTop:"20px",padding:"10px 20px",borderRadius:"20px",border:"none",backgroundColor:"#1db954",color:"white",fontWeight:"bold",cursor:"pointer"}},Ms=document.createElement("style");Ms.innerText=`
  .spin { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(Ms);const pm=e.memo(fm),gm=()=>{const{globalData:s}=Ls(),[n,r]=o.useState(null),[u,l]=o.useState(!1),p=Ko();if(o.useEffect(()=>{if(s&&s.type==="chat_message_handler"&&s.username==="‚ö° Signal Bot"){const T=s.content.split(`
`),C=T.find(z=>z.includes("ü™ô"))||"Bilinmiyor",D=T.find(z=>z.includes("üìà"))||"",G={title:"YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞! üö®",coin:C.replace("ü™ô","").replace(/\*/g,"").trim(),direction:D.includes("LONG")?"Y√úKSELƒ∞≈û (LONG)":"D√ú≈û√ú≈û (SHORT)",isLong:D.includes("LONG"),raw:s};r(G),l(!0);const O=setTimeout(()=>{l(!1)},8e3);return()=>clearTimeout(O)}},[s]),!u||!n)return null;const k=()=>{l(!1),p("/")};return e.createElement("div",{style:St.container,className:"slide-in-notification"},e.createElement("div",{style:St.iconBox},e.createElement(lc,{size:24,color:"#f0b232"})),e.createElement("div",{style:St.content,onClick:k},e.createElement("h4",{style:St.title},n.title),e.createElement("div",{style:St.details},e.createElement("span",{style:St.coinName},n.coin),e.createElement("span",{style:{...St.directionBadge,backgroundColor:n.isLong?"rgba(35, 165, 89, 0.2)":"rgba(240, 71, 71, 0.2)",color:n.isLong?"#23a559":"#da373c"}},n.direction)),e.createElement("span",{style:St.hint},"Detaylar i√ßin tƒ±kla ",e.createElement(cc,{size:10}))),e.createElement("button",{onClick:T=>{T.stopPropagation(),l(!1)},style:St.closeButton},e.createElement(Ho,null)))},St={container:{position:"fixed",top:"20px",right:"20px",width:"320px",backgroundColor:"#1e1f22",borderRadius:"8px",boxShadow:"0 8px 20px rgba(0,0,0,0.5)",borderLeft:"5px solid #f0b232",display:"flex",alignItems:"center",padding:"15px",zIndex:99999,cursor:"pointer",transition:"transform 0.3s ease-out"},iconBox:{marginRight:"15px",display:"flex",alignItems:"center"},content:{flex:1,display:"flex",flexDirection:"column"},title:{margin:0,color:"#fff",fontSize:"0.95em",fontWeight:"bold",marginBottom:"5px"},details:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"},coinName:{color:"#dcddde",fontWeight:"bold",fontSize:"1.1em"},directionBadge:{fontSize:"0.75em",padding:"2px 6px",borderRadius:"4px",fontWeight:"bold"},hint:{fontSize:"0.7em",color:"#949ba4",display:"flex",alignItems:"center",gap:"5px"},closeButton:{background:"none",border:"none",color:"#949ba4",cursor:"pointer",padding:"5px",marginLeft:"10px",fontSize:"1em"}},$s=document.createElement("style");$s.innerText=`
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  .slide-in-notification {
    animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
`;document.head.appendChild($s);function hm(s={}){const{nonce:n,onScriptLoadSuccess:r,onScriptLoadError:u}=s,[l,p]=o.useState(!1),k=o.useRef(r);k.current=r;const T=o.useRef(u);return T.current=u,o.useEffect(()=>{const C=document.createElement("script");return C.src="https://accounts.google.com/gsi/client",C.async=!0,C.defer=!0,C.nonce=n,C.onload=()=>{var D;p(!0),(D=k.current)===null||D===void 0||D.call(k)},C.onerror=()=>{var D;p(!1),(D=T.current)===null||D===void 0||D.call(T)},document.body.appendChild(C),()=>{document.body.removeChild(C)}},[n]),l}const ym=o.createContext(null);function Sm({clientId:s,nonce:n,onScriptLoadSuccess:r,onScriptLoadError:u,children:l}){const p=hm({nonce:n,onScriptLoadSuccess:r,onScriptLoadError:u}),k=o.useMemo(()=>({clientId:s,scriptLoadedSuccessfully:p}),[s,p]);return e.createElement(ym.Provider,{value:k},l)}const ye=({children:s})=>{const n=Eo.isNativePlatform();return e.createElement("div",{style:{width:"100%",height:"100dvh",boxSizing:"border-box",paddingTop:n?"max(35px, env(safe-area-inset-top))":"0px",backgroundColor:"#1e1f22",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"}},s)};class bm extends e.Component{constructor(r){super(r);Vn(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,u){console.error("üî¥ App Crashed:",r),console.error("Error Info:",u),this.setState({error:r,errorInfo:u});try{fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:r?.toString(),stack:r?.stack,componentStack:u?.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{})}catch(l){console.warn("Could not report error:",l)}}render(){return this.state.hasError?e.createElement("div",{style:bt.container},e.createElement("div",{style:bt.content},e.createElement("div",{style:bt.icon},"üí•"),e.createElement("h1",{style:bt.title},"Oops! Bir ≈üeyler ters gitti"),e.createElement("p",{style:bt.message},"√úzg√ºn√ºz, uygulama beklenmedik bir hatayla kar≈üƒ±la≈ütƒ±."),e.createElement("div",{style:bt.actions},e.createElement("button",{onClick:this.handleReset,style:bt.button},"üîÑ Yeniden Ba≈ülat"),e.createElement("button",{onClick:()=>window.location.href="/",style:{...bt.button,...bt.buttonSecondary}},"üè† Ana Sayfaya D√∂n")),!1)):this.props.children}}const bt={container:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#1E1F22",color:"#FFFFFF",padding:"20px",fontFamily:"'Inter', sans-serif"},content:{textAlign:"center",maxWidth:"600px",padding:"40px",background:"linear-gradient(135deg, #2B2D31 0%, #1E1F22 100%)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},icon:{fontSize:"80px",marginBottom:"20px",animation:"shake 0.5s ease-in-out"},title:{fontSize:"32px",fontWeight:"bold",marginBottom:"16px",color:"#FFFFFF"},message:{fontSize:"16px",color:"#B9BBBE",marginBottom:"32px",lineHeight:"1.6"},actions:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},button:{padding:"12px 24px",fontSize:"16px",fontWeight:"600",border:"none",borderRadius:"8px",cursor:"pointer",backgroundColor:"#5865F2",color:"#FFFFFF",transition:"all 0.2s",":hover":{backgroundColor:"#4752C4"}},buttonSecondary:{backgroundColor:"#4E5058",":hover":{backgroundColor:"#6A6F78"}}},Em={async post(s,n,r={}){const u={"Content-Type":"application/json",...r.headers};console.log("üì° [API] POST request:",s);try{const l=await Gr(s,{method:"POST",headers:u,body:JSON.stringify(n),credentials:"include"}),p=await l.json();if(!l.ok){const k=new Error(p.error||"Request failed");throw k.response={data:p,status:l.status},k}return{data:p,status:l.status}}catch(l){if(l.message==="No refresh token available"){const p=await fetch(s,{method:"POST",headers:u,body:JSON.stringify(n),credentials:"include"}),k=await p.json();if(!p.ok){const T=new Error(k.error||"Request failed");throw T.response={data:k,status:p.status},T}return{data:k,status:p.status}}throw l}},async get(s,n={}){const r={"Content-Type":"application/json",...n.headers};console.log("üì° [API] GET request:",s);try{const u=await Gr(s,{method:"GET",headers:r,credentials:"include"}),l=await u.json();if(!u.ok){const p=new Error(l.error||"Request failed");throw p.response={data:l,status:u.status},p}return{data:l,status:u.status}}catch(u){if(u.message==="No refresh token available"){const l=await fetch(s,{method:"GET",headers:r,credentials:"include"}),p=await l.json();if(!l.ok){const k=new Error(p.error||"Request failed");throw k.response={data:p,status:l.status},k}return{data:p,status:l.status}}throw u}}},wm=({apiBaseUrl:s})=>{const[n]=Ml(),r=Ko(),{login:u}=wo(),[l,p]=o.useState("processing"),[k,T]=o.useState(null),C=o.useRef(!1);return o.useEffect(()=>{(async()=>{if(C.current){console.log("üîê [AuthCallback] Exchange already attempted, skipping...");return}C.current=!0;const G=n.get("code"),O=n.get("access_token"),z=n.get("refresh_token"),J=n.get("error"),H=n.get("needs_password")==="true";if(console.log("üîê [AuthCallback] Starting...",{hasCode:!!G,hasAccessToken:!!O,apiBaseUrl:s}),J){console.error("üîê [AuthCallback] Error param:",J),p("error"),T("Google giri≈ü ba≈üarƒ±sƒ±z oldu. L√ºtfen tekrar deneyin."),setTimeout(()=>r("/"),3e3);return}if(O&&z){console.log("üîê [AuthCallback] Direct token mode");try{localStorage.setItem("access_token",O),localStorage.setItem("refreshToken",z),u&&await u(O,z),p("success"),setTimeout(()=>{r(H?"/settings?section=security&action=set-password":"/")},1500)}catch(V){console.error("üîê [AuthCallback] Direct token error:",V),p("error"),T("Token i≈üleme hatasƒ±."),setTimeout(()=>r("/"),3e3)}return}if(!G){console.error("üîê [AuthCallback] No code or tokens found"),p("error"),T("Yetkilendirme bilgisi bulunamadƒ±."),setTimeout(()=>r("/"),3e3);return}try{p("exchanging");const V=`${s}/auth/exchange-code/`;console.log("üîê [AuthCallback] Exchanging code at:",V);const U=await Em.post(V,{code:G});if(console.log("üîê [AuthCallback] Response:",U.data),U.data.success){const{access_token:j,refresh_token:q,user_id:de,needs_password:oe}=U.data;localStorage.setItem("access_token",j),localStorage.setItem("refreshToken",q),u&&await u(j,q),p("success"),setTimeout(oe?()=>{r("/settings?section=security&action=set-password")}:()=>{r("/")},1500)}else throw new Error(U.data.error||"Token exchange failed")}catch(V){console.error("Auth callback error:",V),p("error"),T(V.response?.data?.error||"Giri≈ü i≈ülemi ba≈üarƒ±sƒ±z oldu."),setTimeout(()=>r("/"),3e3)}})()},[n,r,u,s]),e.createElement("div",{className:"auth-callback-container"},e.createElement("div",{className:"auth-callback-card"},l==="processing"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-spinner"}),e.createElement("h2",null,"ƒ∞≈üleniyor..."),e.createElement("p",null,"Google hesabƒ±nƒ±z doƒürulanƒ±yor")),l==="exchanging"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-spinner"}),e.createElement("h2",null,"Giri≈ü Yapƒ±lƒ±yor..."),e.createElement("p",null,"G√ºvenli baƒülantƒ± kuruluyor")),l==="success"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-success-icon"},"‚úì"),e.createElement("h2",null,"Giri≈ü Ba≈üarƒ±lƒ±!"),e.createElement("p",null,"Y√∂nlendiriliyorsunuz...")),l==="error"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-error-icon"},"‚úï"),e.createElement("h2",null,"Hata"),e.createElement("p",null,k),e.createElement("p",{className:"auth-redirect-text"},"Ana sayfaya y√∂nlendiriliyorsunuz..."))))},vm=e.lazy(()=>y(()=>import("./EnglishHub-Cg3c6jG7.js"),__vite__mapDeps([173,2,3,4,6]))),_m=e.lazy(()=>y(()=>import("./GrammarQuizPage-Du8-qZd4.js"),__vite__mapDeps([174,2,3,4,6,175,1,5,7]))),km=e.lazy(()=>y(()=>import("./EnglishLearningPage-D6tVvTbJ.js"),__vite__mapDeps([176,2,3,4,175,1,5,6,7]))),xm=e.lazy(()=>y(()=>import("./CryptoDashboard-0M4Szyll.js"),__vite__mapDeps([177,2,3,4,6,1,5,7]))),Cm=e.lazy(()=>y(()=>import("./CryptoSignals-wLqG7d5w.js"),__vite__mapDeps([178,2,3,6,4,1,5,7]))),Tm=e.lazy(()=>y(()=>import("./ForgotPasswordPage-DwUTZjX-.js"),__vite__mapDeps([122,2,3,6,38,4]))),Am=e.lazy(()=>y(()=>import("./ResetPasswordPage-DhhAPN71.js"),__vite__mapDeps([123,2,3,6,4]))),Rm=e.lazy(()=>y(()=>import("./TwoFactorLoginPage-BAo68qYy.js"),__vite__mapDeps([124,2,3,4,6,1,5,7]))),Pm=e.lazy(()=>y(()=>import("./VerifyEmailPage-CfsNqQGu.js"),__vite__mapDeps([121,2,3,6,4]))),bs=e.lazy(()=>y(()=>import("./PrivacyPolicyPage-sTRhxd8C.js"),__vite__mapDeps([179,2,3]))),Im=e.lazy(()=>y(()=>import("./StorePage-DjYEWMz4.js"),__vite__mapDeps([180,2,3,1,4,5,6,7]))),Lm=e.lazy(()=>y(()=>import("./LandingPage-BlReKLYW.js"),__vite__mapDeps([181,2,3,142,1,4,5,6,7,182]))),Om=e.lazy(()=>y(()=>import("./ReferralProgram-B2xewVkW.js"),__vite__mapDeps([183,2,3,142,1,4,5,6,7,184]))),Dm=e.lazy(()=>y(()=>import("./GrowthDashboard-DGfOEJq0.js"),__vite__mapDeps([185,2,3,142,186]))),Mm=e.lazy(()=>y(()=>import("./ToastDemo-BWYLbRRg.js"),__vite__mapDeps([187,2,3,1,4,5,6,7,188]))),$m=As,zm=()=>(o.useEffect(()=>{const s=setTimeout(()=>{try{Cs()}catch(n){console.warn("preloadCriticalChunks error",n)}},3e3);if("requestIdleCallback"in window)window.requestIdleCallback(()=>{try{Fr()}catch(n){console.warn("prefetchNextChunks error",n)}},{timeout:2e3});else{const n=setTimeout(()=>{try{Fr()}catch(r){console.warn("prefetchNextChunks error",r)}},4e3);return()=>clearTimeout(n)}return()=>clearTimeout(s)},[]),e.createElement(Sm,{clientId:$m},e.createElement(Xc,null,e.createElement(rd,null,e.createElement(bm,null,e.createElement($l,null,e.createElement(gm,null),e.createElement(zl,null,e.createElement(fe,{path:"/verify/:token",element:e.createElement(ye,null,e.createElement(lm,null))}),e.createElement(fe,{path:"/verify-email/:token",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Pm,{apiBaseUrl:et})))}),e.createElement(fe,{path:"/forgot-password",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Tm,{apiBaseUrl:et})))}),e.createElement(fe,{path:"/reset-password/:token",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Am,{apiBaseUrl:et})))}),e.createElement(fe,{path:"/2fa-login",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Rm,{apiBaseUrl:et})))}),e.createElement(fe,{path:"/auth/callback",element:e.createElement(ye,null,e.createElement(wm,{apiBaseUrl:Et}))}),e.createElement(fe,{path:"/privacy-policy",element:e.createElement(e.Suspense,{fallback:e.createElement("div",{style:{padding:"40px",textAlign:"center",color:"#fff"}},"Loading...")},e.createElement(bs,null))}),e.createElement(fe,{path:"/terms-of-service",element:e.createElement(e.Suspense,{fallback:e.createElement("div",{style:{padding:"40px",textAlign:"center",color:"#fff"}},"Loading...")},e.createElement(bs,null))}),e.createElement(fe,{path:"/store",element:e.createElement(e.Suspense,{fallback:e.createElement("div",{style:{padding:"40px",textAlign:"center",color:"#fff"}},"Loading...")},e.createElement(Im,null))}),e.createElement(fe,{path:"/launch",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Lm,{apiBaseUrl:et})))}),e.createElement(fe,{path:"/referral",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Om,{apiBaseUrl:et})))}),e.createElement(fe,{path:"/growth-dashboard",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Dm,{apiBaseUrl:et})))}),e.createElement(fe,{path:"/toast-demo",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Mm,null)))}),e.createElement(fe,{path:"/invite/:code",element:e.createElement(ye,null,e.createElement(cm,null))}),e.createElement(fe,{path:"/spotify-callback",element:e.createElement(ye,null,e.createElement(pm,{apiBaseUrl:et}))}),e.createElement(fe,{path:"/eng-learn",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(vm,null)))}),e.createElement(fe,{path:"/eng-learn/vocab",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(km,null)))}),e.createElement(fe,{path:"/eng-learn/grammar",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(_m,null)))}),e.createElement(fe,{path:"/eng-learn/voice",element:e.createElement(ye,null,e.createElement(dm,{apiBaseUrl:et}))}),e.createElement(fe,{path:"/eng-learn/pronunciation",element:e.createElement(ye,null,e.createElement(mm,{apiBaseUrl:et}))}),e.createElement(fe,{path:"/crypto-analysis",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Cm,null)))}),e.createElement(fe,{path:"/crypto-dashboard-old",element:e.createElement(ye,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(xm,null)))}),e.createElement(fe,{path:"/*",element:e.createElement(am,null)})))))))),Vm=Dl.createRoot(document.getElementById("root"));Vm.render(e.createElement(zm,null));export{et as A,Eo as C,Ec as G,Wr as T,xs as W,wo as a,Pf as b,If as c,Kc as d,Ce as e,Rf as f,Wc as g,Af as h,Xr as i,Mc as j,nd as k,Re as l,Vc as m,Jr as r,$ as t,Ls as u};
