var k=Object.defineProperty;var i=(s,n)=>k(s,"name",{value:n,configurable:!0});import{r as p,j as r}from"./react-core-Djgtqrmb.js";import{a as v,a9 as w,ad as C}from"./icons-vendor-BW7dxHkX.js";import{u as B}from"./useModalA11y-VFHkzbFx.js";import{t as a}from"./index-m2zCEI_Z.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const M=i(({onClose:s,friendsList:n,fetchWithAuth:x,apiBaseUrl:b,onGroupCreated:h})=>{const[t,d]=p.useState([]),[c,u]=p.useState(!1),{overlayProps:y,dialogProps:g}=B({onClose:s,label:"Grup Oluştur"}),f=i(e=>{t.includes(e)?d(l=>l.filter(j=>j!==e)):d(l=>[...l,e])},"toggleFriend"),m=i(async()=>{if(t.length<2){a.error("❌ En az 2 kişi seçmelisin");return}u(!0);try{const e=await x(`${b}/conversations/create_group/`,{method:"POST",body:JSON.stringify({usernames:t})});if(e.ok){const l=await e.json();a.success("✅ Grup oluşturuldu!"),h(l),s()}else a.error("❌ Grup oluşturulamadı")}catch(e){a.error("❌ Hata oluştu: "+e.message)}finally{u(!1)}},"handleCreate");return r.jsx("div",{style:o.overlay,...y,children:r.jsxs("div",{style:o.modal,...g,children:[r.jsxs("div",{style:o.header,children:[r.jsx("h3",{children:"Grup Oluştur"}),r.jsx("button",{onClick:s,style:o.closeBtn,children:r.jsx(v,{})})]}),r.jsxs("div",{style:o.body,children:[r.jsxs("p",{style:{color:"#b9bbbe",marginBottom:15},children:["Gruba eklemek istediğin arkadaşlarını seç (",t.length,")"]}),r.jsxs("div",{style:o.friendList,children:[n.map(e=>r.jsxs("div",{onClick:i(()=>f(e),"onClick"),style:{...o.friendItem,backgroundColor:t.includes(e)?"rgba(88, 101, 242, 0.3)":"#2f3136",borderColor:t.includes(e)?"#5865f2":"transparent"},children:[r.jsx("span",{style:{color:"white"},children:e}),t.includes(e)?r.jsx(w,{color:"#5865f2"}):r.jsx(C,{color:"#b9bbbe"})]},e)),n.length===0&&r.jsx("p",{style:{color:"#72767d"},children:"Listenizde arkadaş yok."})]}),r.jsx("button",{onClick:m,style:o.createBtn,disabled:c||t.length<2,children:c?"Oluşturuluyor...":"Grup DM Oluştur"})]})]})})},"CreateGroupModal"),o={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden"},header:{padding:"15px 20px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",color:"white",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em"},body:{padding:"20px"},friendList:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},friendItem:{padding:"10px",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",border:"1px solid transparent"},createBtn:{width:"100%",padding:"10px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",opacity:.9}};export{M as default};
