var k=Object.defineProperty;var t=(n,r)=>k(n,"name",{value:r,configurable:!0});import{r as i,j as e}from"./react-core-Djgtqrmb.js";import{_ as C,a as w,a0 as S,aY as B}from"./icons-vendor-BMXAt4pj.js";import{t as c}from"./index-DjBRFZUD.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const I=t(({fetchWithAuth:n,apiBaseUrl:r,serverId:p,onClose:x})=>{const[s,o]=i.useState({enabled:!1,message:"",channel_id:"",dm_enabled:!1,dm_message:""}),[g,m]=i.useState([]),[z,u]=i.useState(!0),y=[{key:"{user}",desc:"Kullanƒ±cƒ± adƒ±"},{key:"{mention}",desc:"Kullanƒ±cƒ±yƒ± etiketle"},{key:"{server}",desc:"Sunucu adƒ±"},{key:"{membercount}",desc:"√úye sayƒ±sƒ±"},{key:"{date}",desc:"Tarih"}];i.useEffect(()=>{f(),h()},[]);const f=t(async()=>{try{const l=await n(`${r}/servers/${p}/welcome/`);if(l.ok){const d=await l.json();d&&o(d)}}catch{}finally{u(!1)}},"loadTemplate"),h=t(async()=>{try{const l=await n(`${r}/servers/${p}/channels/`);if(l.ok){const d=await l.json();m(d)}}catch{}},"loadChannels"),b=t(async()=>{try{(await n(`${r}/servers/welcome/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_id:p,...s})})).ok?c.success("Ho≈ügeldin ≈üablonu kaydedildi"):c.error("≈ûablon kaydedilemedi")}catch{c.error("Bir hata olu≈ütu")}},"saveTemplate"),j=t(l=>{o({...s,message:s.message+l})},"insertPlaceholder"),v=t(()=>{let l=s.message.replace("{user}","Kullanƒ±cƒ±Adƒ±").replace("{mention}","@Kullanƒ±cƒ±Adƒ±").replace("{server}","Sunucu Adƒ±").replace("{membercount}","1,234").replace("{date}",new Date().toLocaleDateString("tr-TR"));c.info(l)},"previewMessage");return e.jsx("div",{style:a.overlay,onClick:x,children:e.jsxs("div",{style:a.modal,onClick:t(l=>l.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:a.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(C,{style:{color:"#43b581"}}),e.jsx("h2",{style:{margin:0},children:"Ho≈ügeldin Mesajlarƒ±"})]}),e.jsx(w,{onClick:x,style:a.closeBtn})]}),e.jsxs("div",{style:a.content,children:[e.jsx("div",{style:a.toggle,children:e.jsxs("label",{style:a.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:t(l=>o({...s,enabled:l.target.checked}),"onChange")}),e.jsx("span",{children:"Ho≈ügeldin mesajlarƒ±nƒ± etkinle≈ütir"})]})}),s.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:a.field,children:[e.jsx("label",{style:a.label,children:"Ho≈ügeldin Kanalƒ±"}),e.jsxs("select",{value:s.channel_id,onChange:t(l=>o({...s,channel_id:l.target.value}),"onChange"),style:a.select,children:[e.jsx("option",{value:"",children:"Kanal Se√ßin"}),g.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsxs("div",{style:a.field,children:[e.jsx("label",{style:a.label,children:"Mesaj ≈ûablonu"}),e.jsx("div",{style:a.placeholders,children:y.map(l=>e.jsx("button",{onClick:t(()=>j(l.key),"onClick"),style:a.placeholderBtn,title:l.desc,children:l.key},l.key))}),e.jsx("textarea",{value:s.message,onChange:t(l=>o({...s,message:l.target.value}),"onChange"),placeholder:"Ho≈ü geldin {user}! {server} sunucusuna katƒ±ldƒ±n. ≈ûu anda {membercount} √ºyeyiz! üéâ",style:a.textarea,rows:5}),e.jsxs("button",{onClick:v,style:a.previewBtn,children:[e.jsx(S,{})," √ñnizleme"]})]}),e.jsx("div",{style:a.toggle,children:e.jsxs("label",{style:a.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:s.dm_enabled,onChange:t(l=>o({...s,dm_enabled:l.target.checked}),"onChange")}),e.jsx("span",{children:"DM ile ho≈ügeldin mesajƒ± g√∂nder"})]})}),s.dm_enabled&&e.jsxs("div",{style:a.field,children:[e.jsx("label",{style:a.label,children:"DM Mesajƒ±"}),e.jsx("textarea",{value:s.dm_message,onChange:t(l=>o({...s,dm_message:l.target.value}),"onChange"),placeholder:"Merhaba {user}! {server} sunucusuna ho≈ü geldin!",style:a.textarea,rows:3})]})]})]}),e.jsx("div",{style:a.footer,children:e.jsxs("button",{onClick:b,style:a.saveBtn,children:[e.jsx(B,{})," Kaydet"]})})]})})},"WelcomeTemplatesPanel"),a={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},toggle:{marginBottom:"20px"},toggleLabel:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",fontSize:"16px"},field:{marginBottom:"20px"},label:{display:"block",marginBottom:"8px",color:"#dcddde",fontSize:"14px",fontWeight:"600"},select:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},placeholders:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"10px"},placeholderBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontFamily:"monospace"},textarea:{width:"100%",padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",resize:"vertical",marginBottom:"10px"},previewBtn:{backgroundColor:"#2c2f33",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},footer:{padding:"20px",borderTop:"1px solid #333"},saveBtn:{width:"100%",backgroundColor:"#43b581",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}};export{I as default};
