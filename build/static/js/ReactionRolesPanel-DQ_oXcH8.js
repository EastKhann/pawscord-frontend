var C=Object.defineProperty;var a=(t,h)=>C(t,"name",{value:h,configurable:!0});import{r as c,j as e}from"./react-core-Djgtqrmb.js";import{y as l}from"./ui-vendor-IhB9Znpc.js";import{g as E,d as B}from"./index-DjBRFZUD.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";const H=a(({serverId:t,onClose:h})=>{const[m,j]=c.useState([]),[g,v]=c.useState([]),[N,f]=c.useState([]),[i,r]=c.useState({message_id:"",channel_id:"",emoji:"",role_id:"",description:""}),[k,y]=c.useState(!0),[p,u]=c.useState(!1),d=E();c.useEffect(()=>{t&&(x(),R(),_())},[t]);const x=a(async()=>{try{const s=localStorage.getItem("access_token"),n=await fetch(`${d}/reaction-roles/server/${t}/`,{headers:{Authorization:`Bearer ${s}`}});if(n.ok){const o=await n.json();j(o.reaction_roles||[])}}catch{}finally{y(!1)}},"fetchReactionRoles"),R=a(async()=>{try{const s=localStorage.getItem("access_token"),n=await fetch(`${d}/servers/${t}/roles/`,{headers:{Authorization:`Bearer ${s}`}});if(n.ok){const o=await n.json();v(o.roles||[])}}catch{}},"fetchRoles"),_=a(async()=>{try{const s=localStorage.getItem("access_token"),n=await fetch(`${d}/servers/${t}/channels/`,{headers:{Authorization:`Bearer ${s}`}});if(n.ok){const o=await n.json();f(o.channels||[])}}catch{}},"fetchChannels"),b=a(async()=>{if(!i.message_id||!i.emoji||!i.role_id){l.error("âŒ Mesaj ID, emoji ve rol zorunludur");return}try{const s=localStorage.getItem("access_token"),n=await fetch(`${d}/reaction-roles/create/`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:t,...i})});if(n.ok){const o=await n.json();j([...m,o.reaction_role]),r({message_id:"",channel_id:"",emoji:"",role_id:"",description:""}),l.success("âœ… Reaction role oluÅŸturuldu")}else{const o=await n.json();l.error(`âŒ ${o.error||"OluÅŸturma baÅŸarÄ±sÄ±z"}`)}}catch{l.error("âŒ OluÅŸturma baÅŸarÄ±sÄ±z")}},"createReactionRole"),$=a(async s=>{if(await B("Bu reaction role'Ã¼ silmek istediÄŸinizden emin misiniz?"))try{const n=localStorage.getItem("access_token");(await fetch(`${d}/reaction-roles/${s}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}})).ok&&(j(m.filter(z=>z.id!==s)),l.success("âœ… Reaction role silindi"))}catch{l.error("âŒ Silme baÅŸarÄ±sÄ±z")}},"deleteReactionRole"),w=a(async()=>{try{const s=localStorage.getItem("access_token");(await fetch(`${d}/reaction-roles/server/${t}/sync/`,{method:"POST",headers:{Authorization:`Bearer ${s}`}})).ok&&(l.success("âœ… Reaction roller senkronize edildi"),x())}catch{l.error("âŒ Senkronizasyon baÅŸarÄ±sÄ±z")}},"syncReactionRoles"),S=["â¤ï¸","ğŸ’™","ğŸ’š","ğŸ’›","ğŸ§¡","ğŸ’œ","ğŸ–¤","ğŸ¤","ğŸ”´","ğŸŸ ","ğŸŸ¡","ğŸŸ¢","ğŸ”µ","ğŸŸ£","âšª","âš«","âœ…","âŒ","â­","ğŸ‰","ğŸ®","ğŸµ","ğŸ“š","ğŸ†"];return k?e.jsx("div",{className:"reaction-roles-overlay",children:e.jsx("div",{className:"reaction-roles-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Reaction roller yÃ¼kleniyor..."})]})})}):e.jsx("div",{className:"reaction-roles-overlay",onClick:h,children:e.jsxs("div",{className:"reaction-roles-panel",onClick:a(s=>s.stopPropagation(),"onClick"),children:[e.jsxs("div",{className:"reaction-header",children:[e.jsx("h2",{children:"â­ Reaction Roles"}),e.jsx("button",{className:"close-btn",onClick:h,children:"Ã—"})]}),e.jsxs("div",{className:"create-section",children:[e.jsx("h3",{children:"ğŸ†• Yeni Reaction Role"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Kanal"}),e.jsxs("select",{value:i.channel_id,onChange:a(s=>r({...i,channel_id:s.target.value}),"onChange"),children:[e.jsx("option",{value:"",children:"Kanal seÃ§in (opsiyonel)"}),N.map(s=>e.jsxs("option",{value:s.id,children:["#",s.name]},s.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Mesaj ID *"}),e.jsx("input",{type:"text",placeholder:"Mesaj ID'sini girin",value:i.message_id,onChange:a(s=>r({...i,message_id:s.target.value}),"onChange")}),e.jsx("span",{className:"input-hint",children:"Mesaja saÄŸ tÄ±k â†’ Mesaj ID'sini Kopyala"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rol *"}),e.jsxs("select",{value:i.role_id,onChange:a(s=>r({...i,role_id:s.target.value}),"onChange"),children:[e.jsx("option",{value:"",children:"Rol seÃ§in"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Emoji *"}),e.jsxs("div",{className:"emoji-input-group",children:[e.jsx("input",{type:"text",placeholder:"Emoji seÃ§ veya gir",value:i.emoji,onChange:a(s=>r({...i,emoji:s.target.value}),"onChange"),readOnly:!0}),e.jsx("button",{className:"emoji-picker-btn",onClick:a(()=>u(!p),"onClick"),children:"ğŸ˜€"})]}),p&&e.jsx("div",{className:"emoji-picker",children:S.map(s=>e.jsx("button",{className:"emoji-option",onClick:a(()=>{r({...i,emoji:s}),u(!1)},"onClick"),children:s},s))})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"AÃ§Ä±klama"}),e.jsx("input",{type:"text",placeholder:"Bu rol iÃ§in aÃ§Ä±klama (opsiyonel)",value:i.description,onChange:a(s=>r({...i,description:s.target.value}),"onChange")})]})]}),e.jsx("button",{className:"create-btn",onClick:b,children:"â• Reaction Role OluÅŸtur"})]}),e.jsxs("div",{className:"actions-bar",children:[e.jsxs("div",{className:"info-text",children:[e.jsx("span",{className:"count-badge",children:m.length})," adet reaction role"]}),e.jsx("button",{className:"sync-btn",onClick:w,children:"ğŸ”„ Senkronize Et"})]}),e.jsx("div",{className:"reaction-roles-list",children:m.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("span",{className:"empty-icon",children:"â­"}),e.jsx("p",{children:"HenÃ¼z reaction role yok"}),e.jsx("span",{children:"KullanÄ±cÄ±larÄ±n emoji ile rol almasÄ±nÄ± saÄŸlayÄ±n"})]}):m.map(s=>e.jsxs("div",{className:"reaction-role-card",children:[e.jsxs("div",{className:"rr-header",children:[e.jsx("div",{className:"rr-emoji",children:s.emoji}),e.jsxs("div",{className:"rr-info",children:[e.jsx("h4",{children:s.role_name||`Role #${s.role_id}`}),s.description&&e.jsx("p",{className:"rr-description",children:s.description})]}),e.jsx("button",{className:"delete-btn",onClick:a(()=>$(s.id),"onClick"),children:"ğŸ—‘ï¸"})]}),e.jsxs("div",{className:"rr-meta",children:[e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"ğŸ“¢ Kanal:"}),e.jsx("span",{className:"meta-value",children:s.channel_name?`${s.channel_name}`:"Belirtilmedi"})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"ğŸ’¬ Mesaj ID:"}),e.jsx("span",{className:"meta-value mono",children:s.message_id})]}),e.jsxs("div",{className:"meta-item",children:[e.jsx("span",{className:"meta-label",children:"ğŸ‘¥ KullanÄ±mlar:"}),e.jsxs("span",{className:"meta-value",children:[s.usage_count||0," kez kullanÄ±ldÄ±"]})]})]})]},s.id))})]})})},"ReactionRolesPanel");export{H as default};
