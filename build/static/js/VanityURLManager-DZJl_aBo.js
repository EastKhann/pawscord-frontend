import{r as i,bo as v,v as S,A as L,l as z}from"./react-core-B6hadH-M.js";import{t as a,h as C}from"./index-D_6pZib5.js";const B=({onClose:b,fetchWithAuth:d,apiBaseUrl:p,serverId:o,embedded:R=!1})=>{const[r,u]=i.useState(""),[m,l]=i.useState(!1),[c,s]=i.useState(null),[h,y]=i.useState(!0);i.useEffect(()=>{f()},[o]);const f=async()=>{if(!o){y(!1);return}y(!0);try{const e=await d(`${p}/vanity/get/${o}/`);if(e.ok){const n=e.headers.get("content-type")||"";if(!n.includes("application/json")){console.warn("[Vanity] Non-JSON response:",n),s(null);return}const g=await e.json();g.exists?(s(g),u(g.path)):s(null)}}catch(e){console.error("Vanity URL y√ºkleme hatasƒ±:",e)}finally{y(!1)}},E=async()=>{if(!r.trim()){a.warning("L√ºtfen bir vanity path girin");return}if(r.length<3){a.warning("Path en az 3 karakter olmalƒ±");return}l(!0);try{const e=await d(`${p}/vanity/create/`,{method:"POST",body:JSON.stringify({path:r,server_id:o})});if(e.ok){const n=await e.json();a.success("Vanity URL olu≈üturuldu!"),f()}else{const n=await e.json();a.error("Hata: "+(n.error||"Bu path zaten kullanƒ±lƒ±yor"))}}catch(e){console.error("Vanity URL error:",e),a.error("Sunucu hatasƒ±")}finally{l(!1)}},k=async()=>{if(await C("Vanity URL'i silmek istediƒüinize emin misiniz?")){l(!0);try{const e=await d(`${p}/vanity/delete/${o}/`,{method:"DELETE"});if(e.ok)a.success("Vanity URL silindi!"),s(null),u("");else{const n=await e.json();a.error("Hata: "+(n.error||"Silme ba≈üarƒ±sƒ±z"))}}catch(e){console.error("Vanity URL silme hatasƒ±:",e),a.error("Sunucu hatasƒ±")}finally{l(!1)}}},w=()=>{const e=`https://www.pawscord.com/join/${c.path}`;navigator.clipboard.writeText(e),a.success("URL kopyalandƒ±!")},x=React.createElement(React.Fragment,null,h?React.createElement("div",{style:t.description},"Y√ºkleniyor..."):React.createElement(React.Fragment,null,React.createElement("div",{style:t.description},"Sunucunuz i√ßin √∂zel bir davet URL'i olu≈üturun.",React.createElement("br",null),React.createElement("span",{style:{fontSize:"0.9em",color:"#72767d"}},"Format: ",React.createElement("strong",{style:{color:"#5865f2"}},"pawscord.com/join/yourpath"))),c&&React.createElement("div",{style:t.existingSection},React.createElement("div",{style:t.existingLabel},"üìå Mevcut Vanity URL:"),React.createElement("div",{style:t.existingUrl},React.createElement("span",{style:t.urlText},"pawscord.com/join/",c.path),React.createElement("div",{style:{display:"flex",gap:"10px"}},React.createElement("button",{onClick:w,style:t.copyButton},React.createElement(v,null)," Kopyala"),React.createElement("button",{onClick:k,style:t.deleteButton,disabled:m},React.createElement(S,null)," Sil")))),React.createElement("div",{style:t.inputGroup},React.createElement("span",{style:t.prefix},"pawscord.com/join/"),React.createElement("input",{type:"text",value:r,onChange:e=>u(e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")),placeholder:"myserver",style:t.input,maxLength:32})),React.createElement("div",{style:{fontSize:"0.85em",color:"#72767d",marginTop:"8px",marginBottom:"15px"}},"‚Ä¢ En az 3, en fazla 32 karakter",React.createElement("br",null),"‚Ä¢ Sadece k√º√ß√ºk harf, rakam ve tire (-) kullanƒ±labilir",React.createElement("br",null),"‚Ä¢ Sistem kelimeleri (api, admin, vb.) kullanƒ±lamaz"),React.createElement("button",{onClick:E,disabled:m||!r.trim(),style:t.createButton},m?"ƒ∞≈üleniyor...":c?"üîó Vanity URL G√ºncelle":"üîó Vanity URL Olu≈ütur")));return R?React.createElement("div",{style:t.content},x):React.createElement("div",{style:t.overlay,onClick:b},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("h3",{style:t.title},React.createElement(L,null)," Vanity URL Olu≈ütur"),React.createElement("button",{onClick:b,style:t.closeButton},React.createElement(z,null))),React.createElement("div",{style:t.content},x)))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"500px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.3em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.3em"},content:{padding:"20px"},description:{color:"#b9bbbe",fontSize:"0.9em",marginBottom:"15px",padding:"10px",backgroundColor:"#40444b",borderRadius:"4px"},existingSection:{marginBottom:"20px",padding:"15px",backgroundColor:"#2f3136",borderRadius:"8px",border:"1px solid #5865f2"},existingLabel:{color:"#5865f2",fontWeight:"bold",marginBottom:"10px",fontSize:"0.9em"},existingUrl:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"},urlText:{color:"#fff",fontWeight:"bold",fontSize:"1em"},inputGroup:{display:"flex",alignItems:"center",backgroundColor:"#40444b",borderRadius:"4px",padding:"5px",marginBottom:"15px"},prefix:{color:"#b9bbbe",padding:"0 10px",fontWeight:"bold"},input:{flex:1,padding:"10px",backgroundColor:"transparent",border:"none",color:"white",fontSize:"1em",outline:"none"},copyButton:{padding:"8px 12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:"bold"},deleteButton:{padding:"8px 12px",backgroundColor:"#ed4245",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:"bold"},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"}};export{B as default};
