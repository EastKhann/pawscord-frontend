import{r,a$ as $,l as q,b0 as F,a6 as K,b1 as O,y as X,aX as T}from"./react-core-B6hadH-M.js";import{h as A,t as m}from"./index-D_6pZib5.js";const V=({onClose:y,fetchWithAuth:l,apiBaseUrl:c})=>{const[p,x]=r.useState("store"),[b,h]=r.useState(0),[k,z]=r.useState([]),[v,D]=r.useState([]),[o,s]=r.useState(!1),[i,R]=r.useState(null),[w,E]=r.useState(""),[d,u]=r.useState(null),C=[{id:"p1",coins:1e3,price:"15 USDT",note:"BaÅŸlangÄ±Ã§ paketi"},{id:"p2",coins:2500,price:"35 USDT",note:"PopÃ¼ler seÃ§im"},{id:"p3",coins:6e3,price:"75 USDT",note:"En iyi deÄŸer"},{id:"p4",coins:15e3,price:"180 USDT",note:"Topluluk paketi"}],I=[{label:"USDT (TRC20)",value:"TGAny6VmDAWdVmTXCPrpsbLKKQQdvyvnWC"},{label:"USDT (ERC20)",value:"0xeaa14d4651a8ea7488289209b9294a1309dde37c"},{label:"SOL (Solana)",value:"Bk6ywhae86fp6BHmGtxabS6ncEGsFxhcnZEWJRZLVr9z"}],[f,B]=r.useState(C[0]),_=async()=>{s(!0);try{const e=await l(`${c}/store/daily-reward/`,{method:"POST"});let t=null;try{t=await e.json()}catch{t=null}if(e.ok&&t){const n={claimed:!!t.claimed,added_coins:typeof t.added_coins=="number"?t.added_coins:0,new_balance:typeof t.new_balance=="number"?t.new_balance:b,streak:typeof t.streak=="number"?t.streak:void 0,reason:t.reason,remaining_seconds:typeof t.remaining_seconds=="number"?t.remaining_seconds:void 0,error:t.error};R(n),n.claimed&&typeof n.new_balance=="number"&&h(n.new_balance),g()}else{const n=t&&(t.error||t.message||t.detail)||"Ä°stek baÅŸarÄ±sÄ±z";R({claimed:!1,error:n})}}catch(e){console.error("[DailyReward] exception",e),R({claimed:!1,error:"Beklenmeyen hata"})}s(!1)},g=()=>{l(`${c}/store/balance/`).then(e=>e.json()).then(e=>h(e.coins)),l(`${c}/store/items/`).then(e=>e.json()).then(e=>z(e)),l(`${c}/store/inventory/`).then(e=>e.json()).then(e=>D(e))};r.useEffect(()=>{g()},[c,l]),r.useEffect(()=>{const e=t=>{t.key==="Escape"&&y()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y]);const j=async e=>{if(await A("Bu Ã¼rÃ¼nÃ¼ satÄ±n almak istiyor musunuz?")){s(!0);try{const t=await l(`${c}/store/buy/`,{method:"POST",body:JSON.stringify({item_id:e})}),n=await t.json();t.ok?(m.success(n.message),g()):m.error(n.error)}catch{m.error("âŒ Hata oluÅŸtu.")}s(!1)}},P=async e=>{s(!0);try{(await l(`${c}/store/equip/${e}/`,{method:"POST"})).ok&&g()}catch(t){console.error("Equip error:",t),m.error("Item equip failed")}s(!1)},S=async()=>{const e=w.trim();if(!e){m.error("âŒ LÃ¼tfen iÅŸlem ID girin");return}if(e.length<6){u({success:!1,message:"Ä°ÅŸlem ID Ã§ok kÄ±sa gÃ¶rÃ¼nÃ¼yor"});return}s(!0),u(null);try{const t=await l(`${c}/store/verify-txid/`,{method:"POST",body:JSON.stringify({txid:e})}),n=await t.json();t.ok?(u({success:!0,message:n.message||"Ã–deme doÄŸrulandÄ±!",added_coins:n.added_coins}),g(),E("")):u({success:!1,message:n.error||n.detail||"DoÄŸrulama baÅŸarÄ±sÄ±z"})}catch(t){console.error("[VerifyTXID] exception",t),u({success:!1,message:"Beklenmeyen hata"})}s(!1)},H=async e=>{try{await navigator.clipboard.writeText(e),m.success("âœ… Adres kopyalandÄ±: "+e)}catch{m.error("âŒ Kopyalama baÅŸarÄ±sÄ±z oldu")}},L=async()=>{try{const e=await navigator.clipboard.readText();e&&E(e.trim())}catch(e){console.error("Clipboard read failed",e)}};return React.createElement("div",{style:a.overlay,onClick:y},React.createElement("div",{style:a.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:a.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement($,{color:"#f0b232",size:24}),React.createElement("h2",{style:{margin:0,color:"white"}},"Pawscord MaÄŸaza")),React.createElement("button",{onClick:y,style:a.closeBtn},React.createElement(q,null))),React.createElement("div",{style:a.balanceBar},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},React.createElement("span",null,"Mevcut Bakiye:"),React.createElement("strong",{style:{color:"#f0b232",fontSize:"1.2em"}},b," Coin"),React.createElement("button",{onClick:_,style:a.dailyBtn,disabled:o},"ğŸ +10"))),React.createElement("div",{style:a.tabs},React.createElement("button",{style:p==="store"?a.activeTab:a.tab,onClick:()=>x("store")},React.createElement(F,null)," MaÄŸaza"),React.createElement("button",{style:p==="deposit"?a.activeTab:a.tab,onClick:()=>x("deposit")},React.createElement(K,null)," PawsCoin SatÄ±n Al"),React.createElement("button",{style:p==="inventory"?a.activeTab:a.tab,onClick:()=>x("inventory")},React.createElement(O,null)," Envanterim")),React.createElement("div",{style:a.content},p==="store"&&React.createElement("div",{style:a.grid},k.map(e=>React.createElement("div",{key:e.id,style:a.itemCard},React.createElement("div",{style:a.iconPlace},e.preview_image?React.createElement("img",{src:e.preview_image,alt:e.name,style:{width:50,height:50}}):React.createElement("span",{style:{fontSize:"2em"}},"ğŸ")),React.createElement("h4",null,e.name),React.createElement("p",{style:{fontSize:"0.8em",color:"#999"}},e.description),e.rarity&&React.createElement("span",{style:{fontSize:"0.75em",color:"#b9bbbe",marginBottom:6}},"Nadirlik: ",e.rarity),e.is_owned?React.createElement("button",{style:a.ownedBtn,disabled:!0},"Sahipsin"):React.createElement("button",{onClick:()=>j(e.id),style:a.buyBtn,disabled:o||b<e.price},b<e.price?React.createElement(X,null):null," ",e.price," Coin"))),k.length===0&&React.createElement("p",{style:{color:"#ccc"}},"MaÄŸazada Ã¼rÃ¼n yok.")),p==="inventory"&&React.createElement("div",{style:a.grid},v.map(e=>React.createElement("div",{key:e.id,style:{...a.itemCard,border:e.is_equipped?"1px solid #23a559":"1px solid #1e1f22"}},React.createElement("div",{style:a.iconPlace},e.preview_image?React.createElement("img",{src:e.preview_image,alt:e.name,style:{width:50,height:50}}):React.createElement("span",{style:{fontSize:"2em"}},"ğŸ’")),React.createElement("h4",null,e.name),React.createElement("p",{style:{fontSize:"0.8em",color:"#999"}},e.item_type),e.is_equipped?React.createElement("button",{style:a.equippedBtn,disabled:!0},React.createElement(T,null)," KuÅŸanÄ±ldÄ±"):React.createElement("button",{onClick:()=>P(e.id),style:a.useBtn,disabled:o},"KuÅŸan"))),v.length===0&&React.createElement("p",{style:{color:"#ccc"}},"HenÃ¼z bir ÅŸey satÄ±n almadÄ±n.")),p==="deposit"&&React.createElement("div",{style:{padding:"10px",color:"white"}},React.createElement("h3",{style:{marginTop:0,color:"#f0b232"}},"ğŸ’° PawsCoin SatÄ±n Al"),React.createElement("p",{style:{color:"#b9bbbe",fontSize:"0.9em"}},"Kripto para ile PawsCoin satÄ±n alÄ±n. Ã–demenizi yaptÄ±ktan sonra iÅŸlem ID'sini (TXID) aÅŸaÄŸÄ±ya girin."),React.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12,margin:"16px 0"}},C.map(e=>{const t=f?.id===e.id;return React.createElement("div",{key:e.id,onClick:()=>B(e),style:{backgroundColor:t?"#3b3f47":"#202225",border:`1px solid ${t?"#5865f2":"#1e1f22"}`,borderRadius:10,padding:12,cursor:"pointer",display:"flex",flexDirection:"column",gap:6,transition:"border-color 0.2s, background-color 0.2s"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("span",{style:{fontWeight:700,color:"white"}},e.coins.toLocaleString()," Coin"),t&&React.createElement(T,{color:"#23a559"})),React.createElement("div",{style:{color:"#f0b232",fontWeight:600}},e.price),React.createElement("div",{style:{color:"#b9bbbe",fontSize:"0.8em"}},e.note))})),f&&React.createElement("div",{style:{marginBottom:14,padding:12,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22",color:"#b9bbbe",fontSize:"0.9em"}},"SeÃ§ilen paket: ",React.createElement("strong",{style:{color:"white"}},f.coins.toLocaleString()," Coin")," â€“",React.createElement("span",{style:{color:"#f0b232",fontWeight:600}}," ",f.price)),React.createElement("div",{style:{marginTop:20,marginBottom:20,padding:15,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22"}},React.createElement("h4",{style:{margin:"0 0 10px 0",color:"#5865f2"}},"ğŸ“‹ Ã–deme Bilgileri"),React.createElement("div",{style:{fontSize:"0.85em",color:"#b9bbbe",lineHeight:1.6,display:"flex",flexDirection:"column",gap:8}},I.map(e=>React.createElement("div",{key:e.label,style:{display:"flex",flexDirection:"column",gap:6}},React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8}},React.createElement("p",{style:{margin:0}},React.createElement("strong",null,e.label,":")),React.createElement("button",{onClick:()=>H(e.value),style:{backgroundColor:"#2f3136",color:"white",border:"1px solid #1e1f22",borderRadius:6,padding:"4px 10px",cursor:"pointer",fontSize:"0.8em"}},"Kopyala")),React.createElement("code",{style:{display:"block",padding:8,backgroundColor:"#2b2d31",borderRadius:4,wordBreak:"break-all"}},e.value)))),React.createElement("p",{style:{fontSize:"0.75em",color:"#999",marginTop:10}},"Ã–deme sonrasÄ± iÅŸlem ID'sini (TXID) aÅŸaÄŸÄ±ya girin. Not: Åu an seÃ§ilen paket bilgisi bilgilendirme amaÃ§lÄ±, TXID doÄŸrulamasÄ± iÅŸlem miktarÄ±nÄ± otomatik algÄ±lamaz.")),React.createElement("div",{style:{marginBottom:15}},React.createElement("label",{style:{display:"block",marginBottom:8,fontSize:"0.9em",color:"#b9bbbe"}},"Ä°ÅŸlem ID (TXID):"),React.createElement("div",{style:{display:"flex",gap:8}},React.createElement("input",{type:"text",value:w,onChange:e=>E(e.target.value),onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),S())},placeholder:"Ä°ÅŸlem ID'sini buraya yapÄ±ÅŸtÄ±rÄ±n",style:{width:"100%",padding:"10px",backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"4px",color:"white",fontSize:"0.9em"},disabled:o}),React.createElement("button",{onClick:L,style:{padding:"0 12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:o?"not-allowed":"pointer",opacity:o?.6:1},disabled:o},"YapÄ±ÅŸtÄ±r"))),React.createElement("button",{onClick:S,style:{width:"100%",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:o?"not-allowed":"pointer",fontSize:"1em",fontWeight:"600",opacity:o?.6:1},disabled:o},o?"DoÄŸrulanÄ±yor...":"DoÄŸrula ve Coin Al"),d&&React.createElement("div",{style:{marginTop:15,padding:12,backgroundColor:d.success?"#23a55933":"#ff5d5d33",border:`1px solid ${d.success?"#23a559":"#ff5d5d"}`,borderRadius:6,color:d.success?"#23a559":"#ff5d5d"}},d.success?"âœ…":"âŒ"," ",d.message,d.added_coins&&React.createElement("strong",null," (+",d.added_coins," coin)")))),i&&React.createElement("div",{style:{padding:"10px 20px",borderTop:"1px solid #1e1f22",backgroundColor:"#202225"}},i.claimed?React.createElement("div",{style:{color:"#23a559"}},"ğŸ ",i.added_coins??0," coin aldÄ±n! Yeni bakiye: ",React.createElement("strong",null,i.new_balance??b),".",typeof i.streak<"u"&&React.createElement("span",{style:{marginLeft:8,color:"#b9bbbe"}},"Streak: ",i.streak)):i.reason==="cooldown"?React.createElement("div",{style:{color:"#b9bbbe"}},"â³ GÃ¼nlÃ¼k Ã¶dÃ¼l iÃ§in bekle: ",React.createElement("strong",null,Math.max(0,i.remaining_seconds??0))," sn"):React.createElement("div",{style:{color:"#ff5d5d"}},"âš ï¸ ",i.error||"Ã–dÃ¼l alÄ±namadÄ±."))))},a={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",boxSizing:"border-box"},modal:{backgroundColor:"#2b2d31",width:"100%",maxWidth:"600px",maxHeight:"90vh",borderRadius:"12px",overflow:"hidden",border:"1px solid #1e1f22",display:"flex",flexDirection:"column"},header:{padding:"20px",backgroundColor:"#202225",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},closeBtn:{background:"none",border:"none",color:"#bbb",cursor:"pointer",fontSize:"1.2em",padding:"10px",minWidth:"44px",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center"},balanceBar:{padding:"10px 12px",backgroundColor:"#2f3136",color:"white",borderBottom:"1px solid #1e1f22",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},tabs:{display:"flex",borderBottom:"1px solid #1e1f22",backgroundColor:"#202225",flexShrink:0},tab:{flex:1,padding:"15px",background:"none",border:"none",color:"#bbb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},activeTab:{flex:1,padding:"15px",background:"rgba(255,255,255,0.05)",border:"none",color:"white",cursor:"pointer",borderBottom:"2px solid #5865f2",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},content:{padding:"20px",overflowY:"auto",flex:1,WebkitOverflowScrolling:"touch",overflowX:"hidden"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"15px",paddingBottom:"20px"},itemCard:{backgroundColor:"#202225",padding:"15px",borderRadius:"8px",textAlign:"center",border:"1px solid #1e1f22",display:"flex",flexDirection:"column",alignItems:"center",color:"white",minHeight:"180px"},iconPlace:{width:60,height:60,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10,flexShrink:0},buyBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},ownedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#40444b",color:"#aaa",border:"none",borderRadius:"4px",width:"100%",fontSize:"0.9em",minHeight:"44px"},useBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#23a559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},equippedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"transparent",color:"#23a559",border:"1px solid #23a559",borderRadius:"4px",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px"},dailyBtn:{padding:"4px 8px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"0.75em",lineHeight:1,minHeight:"24px",marginLeft:"8px"}};export{V as default};
