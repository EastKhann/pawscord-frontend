import{r as p,d as e,M as f,i as E}from"./react-core-DMT_QkRe.js";import{t as l}from"./index-Bb71lKFt.js";const v=({room:m,conversation:b,onClose:d,fetchWithAuth:g,apiBaseUrl:y})=>{const[a,x]=p.useState(""),[n,s]=p.useState(""),[i,u]=p.useState(!1),h=async()=>{if(!a.trim()){l.error("❌ Mesaj boş olamaz");return}if(!n){l.error("❌ Lütfen bir tarih seçin");return}u(!0);try{const o=await g(`${y}/scheduled/create/`,{method:"POST",body:JSON.stringify({content:a,scheduled_time:n,room_slug:m,conversation_id:b})});if(o.ok)l.success("✅ Mesaj plandı!"),d();else{const r=await o.json();l.error("❌ Hata: "+(r.error||"Bilinmeyen hata"))}}catch(o){console.error("Schedule error:",o),l.error("❌ Mesaj planlanamadı")}finally{u(!1)}},c=o=>{const r=new Date;return r.setMinutes(r.getMinutes()+o),r.toISOString().slice(0,16)};return e.createElement("div",{style:t.overlay,onClick:d},e.createElement("div",{style:t.modal,onClick:o=>o.stopPropagation()},e.createElement("div",{style:t.header},e.createElement("h3",{style:t.title},e.createElement(f,null)," Mesaj Planla"),e.createElement("button",{onClick:d,style:t.closeButton},e.createElement(E,null))),e.createElement("div",{style:t.content},e.createElement("div",{style:t.presets},e.createElement("button",{onClick:()=>s(c(5)),style:t.presetButton},"5 dk sonra"),e.createElement("button",{onClick:()=>s(c(30)),style:t.presetButton},"30 dk sonra"),e.createElement("button",{onClick:()=>s(c(60)),style:t.presetButton},"1 saat sonra")),e.createElement("div",{style:t.inputGroup},e.createElement("label",{style:t.label},"Gönderilme Zamanı"),e.createElement("input",{type:"datetime-local",value:n,onChange:o=>s(o.target.value),style:t.input})),e.createElement("div",{style:t.inputGroup},e.createElement("label",{style:t.label},"Mesaj"),e.createElement("textarea",{value:a,onChange:o=>x(o.target.value),placeholder:"Planlanacak mesajı yazın...",style:{...t.input,minHeight:"100px",resize:"vertical"}})),e.createElement("button",{onClick:h,disabled:i||!a.trim()||!n,style:{...t.scheduleButton,opacity:i||!a.trim()||!n?.5:1,cursor:i||!a.trim()||!n?"not-allowed":"pointer"}},i?"Planlanıyor...":"⏰ Mesajı Planla"))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"500px",boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.3em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.3em",padding:"5px"},content:{padding:"20px"},presets:{display:"flex",gap:"8px",marginBottom:"15px"},presetButton:{flex:1,padding:"8px",backgroundColor:"#40444b",border:"1px solid #5865f2",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"0.85em"},inputGroup:{marginBottom:"15px"},label:{display:"block",color:"#b9bbbe",fontSize:"0.85em",marginBottom:"5px",fontWeight:"bold"},input:{width:"100%",padding:"10px",backgroundColor:"#40444b",border:"1px solid #5865f2",borderRadius:"4px",color:"white",fontSize:"1em"},scheduleButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",fontSize:"1em"}};export{v as S};
