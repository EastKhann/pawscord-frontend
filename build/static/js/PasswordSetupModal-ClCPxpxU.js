import{r as n,b as e}from"./react-core-9vc7GIjk.js";import{u as x,bU as L,d as c,T as b,U as h,t as B}from"./icons-vendor-BHKL7tCa.js";import{t as l}from"./index-atE_gidJ.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const D=({onClose:p,apiBaseUrl:g})=>{const[t,y]=n.useState(""),[s,w]=n.useState(""),[m,k]=n.useState(!1),[u,N]=n.useState(!1),[d,f]=n.useState(!1),[v,S]=n.useState(!1),C=()=>{if(t.length<8)return l.error("≈ûifre en az 8 karakter olmalƒ±dƒ±r"),!1;if(t!==s)return l.error("≈ûifreler e≈üle≈ümiyor"),!1;const a=/[A-Z]/.test(t),r=/[a-z]/.test(t),o=/[0-9]/.test(t);return!a||!r||!o?(l.error("≈ûifre en az bir b√ºy√ºk harf, bir k√º√ß√ºk harf ve bir rakam i√ßermelidir"),!1):!0},z=async a=>{if(a.preventDefault(),!!C()){f(!0);try{const r=localStorage.getItem("access_token"),o=await fetch(`${g}/users/change_password/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({new_password:t})});if(o.ok)S(!0),l.success("‚úÖ ≈ûifre ba≈üarƒ±yla belirlendi!"),setTimeout(()=>{p()},2e3);else{const Z=await o.json();l.error(Z.error||"≈ûifre belirlenemedi")}}catch(r){console.error("Password setup error:",r),l.error("Bir hata olu≈ütu. L√ºtfen tekrar deneyin.")}finally{f(!1)}}},P=()=>{l.info("≈ûifreyi daha sonra profil ayarlarƒ±ndan belirleyebilirsin"),p()},A=()=>{let a=0;return t.length>=8&&a++,t.length>=12&&a++,/[A-Z]/.test(t)&&a++,/[a-z]/.test(t)&&a++,/[0-9]/.test(t)&&a++,/[^A-Za-z0-9]/.test(t)&&a++,a},E=["#f04747","#faa61a","#faa61a","#43b581","#43b581","#43b581"],F=["√áok Zayƒ±f","Zayƒ±f","Orta","ƒ∞yi","G√º√ßl√º","√áok G√º√ßl√º"],i=A();return v?e.createElement("div",{className:"password-setup-overlay"},e.createElement("div",{className:"password-setup-modal success"},e.createElement("div",{className:"success-icon"},e.createElement(x,null)),e.createElement("h2",null,"≈ûifre Belirlendi!"),e.createElement("p",null,"Artƒ±k e-posta ve ≈üifrenle de giri≈ü yapabilirsin."))):e.createElement("div",{className:"password-setup-overlay"},e.createElement("div",{className:"password-setup-modal"},e.createElement("div",{className:"password-setup-header"},e.createElement("div",{className:"header-icon"},e.createElement(L,{className:"google-icon"}),e.createElement(c,{className:"lock-icon"})),e.createElement("h2",null,"≈ûifre Belirle"),e.createElement("p",null,"Google ile giri≈ü yaptƒ±n! Hesabƒ±nƒ± daha g√ºvenli hale getirmek i√ßin bir ≈üifre belirleyebilirsin.")),e.createElement("form",{onSubmit:z,className:"password-setup-form"},e.createElement("div",{className:"input-group"},e.createElement("label",null,"Yeni ≈ûifre"),e.createElement("div",{className:"password-input-wrapper"},e.createElement(c,{className:"input-icon"}),e.createElement("input",{type:m?"text":"password",value:t,onChange:a=>y(a.target.value),placeholder:"En az 8 karakter",required:!0,minLength:8}),e.createElement("button",{type:"button",className:"toggle-visibility",onClick:()=>k(!m)},m?e.createElement(b,null):e.createElement(h,null))),t&&e.createElement("div",{className:"password-strength"},e.createElement("div",{className:"strength-bars"},[...Array(6)].map((a,r)=>e.createElement("div",{key:r,className:`strength-bar ${r<i?"active":""}`,style:{backgroundColor:r<i?E[i-1]:void 0}}))),e.createElement("span",{style:{color:E[i-1]||"#72767d"}},F[i-1]||"≈ûifre girin"))),e.createElement("div",{className:"input-group"},e.createElement("label",null,"≈ûifre Tekrar"),e.createElement("div",{className:"password-input-wrapper"},e.createElement(c,{className:"input-icon"}),e.createElement("input",{type:u?"text":"password",value:s,onChange:a=>w(a.target.value),placeholder:"≈ûifreyi tekrar girin",required:!0}),e.createElement("button",{type:"button",className:"toggle-visibility",onClick:()=>N(!u)},u?e.createElement(b,null):e.createElement(h,null))),s&&t!==s&&e.createElement("span",{className:"error-text"},"≈ûifreler e≈üle≈ümiyor"),s&&t===s&&e.createElement("span",{className:"success-text"},"‚úì ≈ûifreler e≈üle≈üiyor")),e.createElement("div",{className:"password-requirements"},e.createElement("p",null,"≈ûifre gereksinimleri:"),e.createElement("ul",null,e.createElement("li",{className:t.length>=8?"met":""},"En az 8 karakter"),e.createElement("li",{className:/[A-Z]/.test(t)?"met":""},"En az bir b√ºy√ºk harf (A-Z)"),e.createElement("li",{className:/[a-z]/.test(t)?"met":""},"En az bir k√º√ß√ºk harf (a-z)"),e.createElement("li",{className:/[0-9]/.test(t)?"met":""},"En az bir rakam (0-9)"))),e.createElement("div",{className:"button-group"},e.createElement("button",{type:"submit",className:"submit-btn",disabled:d||t.length<8||t!==s},d?e.createElement(e.Fragment,null,e.createElement(B,{className:"spin"}),"Kaydediliyor..."):e.createElement(e.Fragment,null,e.createElement(c,null),"≈ûifreyi Belirle")),e.createElement("button",{type:"button",className:"skip-btn",onClick:P,disabled:d},"Daha Sonra"))),e.createElement("div",{className:"password-setup-footer"},e.createElement("p",null,"üí° ≈ûifreyi belirlersen hem Google hem de e-posta/≈üifre ile giri≈ü yapabilirsin."))))};export{D as default};
