var S=Object.defineProperty;var o=(n,a)=>S(n,"name",{value:a,configurable:!0});import{r as i,j as e}from"./react-core-Djgtqrmb.js";import{ac as h,a as B,a_ as w,i as b,l as z,k as I}from"./icons-vendor-BMXAt4pj.js";import{t as s}from"./index-D0nbcjO7.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const Y=o(({fetchWithAuth:n,apiBaseUrl:a,messageId:c,onClose:u})=>{const[F,R]=i.useState(null),[f,j]=i.useState([]),[k,y]=i.useState(!0),[p,g]=i.useState(""),[m,x]=i.useState(!1);i.useEffect(()=>{c&&l()},[c]);const l=o(async()=>{try{y(!0);const t=await n(`${a}/threads/list/`);if(t.ok){const d=await t.json();j(d)}}catch{s.error("Thread'ler yüklenemedi")}finally{y(!1)}},"loadThreads"),C=o(async()=>{if(!p.trim()){s.error("Thread adı gerekli");return}try{(await n(`${a}/threads/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message_id:c,name:p})})).ok?(s.success("Thread oluşturuldu"),g(""),x(!1),l()):s.error("Thread oluşturulamadı")}catch{s.error("Bir hata oluştu")}},"createThread"),T=o(async t=>{try{(await n(`${a}/threads/subscribe/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:t})})).ok&&(s.success("Thread'e abone oldunuz"),l())}catch{s.error("Bir hata oluştu")}},"subscribeToThread"),v=o(async t=>{try{(await n(`${a}/threads/${t}/pin/`,{method:"POST"})).ok&&(s.success("Thread sabitlendi"),l())}catch{s.error("Bir hata oluştu")}},"pinThread");return e.jsx("div",{style:r.overlay,onClick:u,children:e.jsxs("div",{style:r.modal,onClick:o(t=>t.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:r.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(h,{style:{color:"#5865f2"}}),e.jsx("h2",{style:{margin:0},children:"Thread\\'ler"})]}),e.jsx(B,{onClick:u,style:r.closeBtn})]}),e.jsx("div",{style:r.toolbar,children:e.jsxs("button",{onClick:o(()=>x(!m),"onClick"),style:r.createBtn,children:[e.jsx(w,{})," Yeni Thread"]})}),m&&e.jsxs("div",{style:r.createForm,children:[e.jsx("input",{type:"text",placeholder:"Thread adı...",value:p,onChange:o(t=>g(t.target.value),"onChange"),style:r.input,autoFocus:!0}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:C,style:r.saveBtn,children:"Oluştur"}),e.jsx("button",{onClick:o(()=>x(!1),"onClick"),style:r.cancelBtn,children:"İptal"})]})]}),e.jsx("div",{style:r.threadsList,children:k?e.jsx("div",{style:r.loading,children:"Yükleniyor..."}):f.length===0?e.jsxs("div",{style:r.empty,children:[e.jsx(h,{style:{fontSize:"48px",color:"#555"}}),e.jsx("p",{children:"Henüz thread yok"})]}):f.map(t=>e.jsxs("div",{style:r.threadItem,children:[e.jsx("div",{style:r.threadIcon,children:e.jsx(h,{style:{color:"#5865f2"}})}),e.jsxs("div",{style:r.threadContent,children:[e.jsx("div",{style:r.threadName,children:t.name}),e.jsxs("div",{style:r.threadMeta,children:[e.jsxs("span",{children:[t.message_count||0," mesaj"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t.subscriber_count||0," abone"]})]})]}),e.jsxs("div",{style:r.threadActions,children:[t.is_pinned&&e.jsx(b,{style:{color:"#faa61a"}}),e.jsx("button",{onClick:o(()=>T(t.id),"onClick"),style:r.actionBtn,title:t.is_subscribed?"Abonelikten Çık":"Abone Ol",children:t.is_subscribed?e.jsx(z,{}):e.jsx(I,{})}),!t.is_pinned&&e.jsx("button",{onClick:o(()=>v(t.id),"onClick"),style:r.actionBtn,title:"Sabitle",children:e.jsx(b,{})})]})]},t.id))})]})})},"MessageThreadsPanel"),r={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #333"},createBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},createForm:{padding:"20px",backgroundColor:"#2c2f33",borderBottom:"1px solid #333"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"10px"},saveBtn:{flex:1,backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelBtn:{flex:1,backgroundColor:"#4e5058",color:"#fff",border:"none",padding:"10px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},threadsList:{flex:1,overflowY:"auto",padding:"20px"},threadItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px",alignItems:"center"},threadIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#5865f21a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},threadContent:{flex:1},threadName:{fontWeight:"600",marginBottom:"4px"},threadMeta:{fontSize:"12px",color:"#888",display:"flex",gap:"8px"},threadActions:{display:"flex",gap:"10px",alignItems:"center"},actionBtn:{backgroundColor:"transparent",border:"none",color:"#dcddde",cursor:"pointer",fontSize:"18px",padding:"8px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{Y as default};
