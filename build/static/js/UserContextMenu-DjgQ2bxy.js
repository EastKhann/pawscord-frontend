import{r as l,e as U,d as e,Y as h,bk as A,a3 as M,bR as k,bQ as K,aJ as z}from"./react-core-DrOm_csO.js";const R=({x:i,y:w,user:c,currentUser:S,onClose:m,onAction:E,voiceChannels:f=[],isAdmin:x=!1,isInVoiceRoom:d=!1,friendsList:g=[],conversationId:T=null})=>{const p=l.useRef(null),[v,y]=l.useState(!1),[r,a]=l.useState(0),C=g&&g.length>0&&g.some(t=>{const u=t.username||t.sender_username||t.receiver_username||t.display_name||t.friend?.username,s=c.username||c.display_name;return u===s&&u!==S.username}),o=l.useCallback((t,u=null)=>{E(t,c,u),m()},[E,c,m]);l.useEffect(()=>{const t=s=>{p.current&&!p.current.contains(s.target)&&m()},u=s=>{s.key==="Escape"?m():s.key==="ArrowDown"?(s.preventDefault(),a(b=>Math.min(b+1,F()-1))):s.key==="ArrowUp"?(s.preventDefault(),a(b=>Math.max(b-1,0))):s.key==="Enter"&&(s.preventDefault(),N())};return document.addEventListener("mousedown",t),document.addEventListener("keydown",u),p.current&&p.current.focus(),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",u)}},[m]);const F=()=>{let t=2;return d&&(t+=1),x&&d&&(t+=3),t},N=()=>{const t=["profile","message"];d&&t.push("volume"),x&&d&&t.push("move","kick","server_mute"),t[r]&&o(t[r])},_=Math.min(i,window.innerWidth-220),D=Math.min(w,window.innerHeight-300),I=document.getElementById("portal-root");return I?U.createPortal(e.createElement(e.Fragment,null,e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483646,background:"transparent",pointerEvents:"auto"},onClick:m}),e.createElement("div",{ref:p,role:"menu","aria-label":`${c} için eylemler`,tabIndex:-1,style:{...n.menu,left:`${_}px`,top:`${D}px`,zIndex:2147483647,position:"fixed",pointerEvents:"auto"}},e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...n.menuItem,background:r===0?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>o("profile"),onMouseEnter:()=>a(0)},e.createElement(h,null)," Profili Görüntüle"),e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...n.menuItem,background:r===1?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>o("message"),onMouseEnter:()=>a(1)},e.createElement(A,null)," Mesaj Gönder"),e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...n.menuItem,background:r===2?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>o("invite_to_server"),onMouseEnter:()=>a(2)},e.createElement(M,null)," Sunucuya Davet Et"),C?e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...n.menuItemDanger,background:r===3?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>o("remove_friend"),onMouseEnter:()=>a(3)},e.createElement(k,null)," Arkadaşlıktan Çıkar"):e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...n.menuItem,background:r===3?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>o("add_friend"),onMouseEnter:()=>a(3)},e.createElement(h,null)," Arkadaş Ekle"),e.createElement("div",{role:"separator",style:n.separator}),e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...n.menuItem,background:r===4?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>o("mute_user"),onMouseEnter:()=>a(4)},e.createElement(K,null)," Sessize Al"),e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...n.menuItemDanger,background:r===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>o("block_user"),onMouseEnter:()=>a(5)},e.createElement(k,null)," Kullanıcıyı Engelle"),x&&d&&e.createElement(e.Fragment,null,e.createElement("div",{role:"separator",style:n.separator}),e.createElement("div",{style:n.sectionTitle,"aria-label":"Moderasyon seçenekleri"},"Moderasyon"),e.createElement("div",{role:"menuitem",tabIndex:0,"aria-haspopup":"true","aria-expanded":v,className:"user-context-menu-item",style:{...n.menuItem,background:r===4?"rgba(88, 101, 242, 0.2)":"transparent"},onMouseEnter:()=>{y(!0),a(4)},onMouseLeave:()=>y(!1)},e.createElement(M,null)," Kanala Taşı",v&&f.length>0&&e.createElement("div",{role:"menu","aria-label":"Hedef kanallar",style:n.submenu},f.map(t=>e.createElement("div",{key:t.slug,role:"menuitem",tabIndex:0,className:"user-context-submenu-item",style:n.submenuItem,onClick:u=>{u.stopPropagation(),o("move",t.slug)}},t.name)))),e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...n.menuItemDanger,background:r===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:()=>o("kick"),onMouseEnter:()=>a(5)},e.createElement(k,null)," Kanaldan At"),e.createElement("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...n.menuItem,background:r===6?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:()=>o("server_mute"),onMouseEnter:()=>a(6)},e.createElement(z,null)," Mikrofonu Kapat (Server)")))),I):null},n={menu:{background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"200px",padding:"6px 0",color:"#dbdee1",fontSize:"14px",border:"1px solid #1e1f22"},menuItem:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",position:"relative"},menuItemDanger:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",color:"#ed4245",position:"relative"},separator:{height:"1px",background:"#1e1f22",margin:"6px 0"},sectionTitle:{fontSize:"11px",textTransform:"uppercase",color:"#72767d",padding:"6px 12px 4px",fontWeight:"600"},submenu:{position:"absolute",left:"100%",top:0,background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"180px",padding:"6px 0",border:"1px solid #1e1f22",marginLeft:"4px"},submenuItem:{padding:"8px 12px",cursor:"pointer",transition:"background 0.1s"}};if(!document.getElementById("user-context-menu-styles")){const i=document.createElement("style");i.id="user-context-menu-styles",i.textContent=`
        .user-context-menu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        .user-context-menu-item-danger:hover {
            background: rgba(237, 66, 69, 0.2) !important;
        }
        .user-context-submenu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        
        /* ✨ Keyboard Navigation Focus Styles */
        .user-context-menu-item:focus,
        .user-context-menu-item-danger:focus,
        .user-context-submenu-item:focus {
            outline: 2px solid rgba(88, 101, 242, 0.8);
            outline-offset: -2px;
        }
        
        /* ✨ Menu Container Focus */
        [role="menu"]:focus {
            outline: none;
        }
        
        /* ✨ Smooth Transitions */
        .user-context-menu-item,
        .user-context-menu-item-danger,
        .user-context-submenu-item {
            transition: background 0.15s ease, outline 0.15s ease;
        }
    `,document.head.appendChild(i)}const W=l.memo(R);export{W as default};
