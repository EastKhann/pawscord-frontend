import{r as n,aj as I,l as D,am as z,cq as F,ak as B,ct as $}from"./react-core-B6hadH-M.js";import{t as m}from"./index-D_6pZib5.js";const H=({fetchWithAuth:c,apiBaseUrl:i,onClose:u,roomSlug:s})=>{const[o,R]=n.useState(null),[d,E]=n.useState([]),[y,v]=n.useState([]),[C,f]=n.useState(!1),[r,p]=n.useState("heatmap");n.useEffect(()=>{S(),k(),w()},[s]);const S=async()=>{f(!0);try{const a=await(await c(`${i}/rooms/${s}/reaction_heatmap/`)).json();R(a)}catch{m.error("Failed to load reaction heatmap")}finally{f(!1)}},k=async()=>{try{const a=await(await c(`${i}/rooms/${s}/reactions/daily/`)).json();E(a.stats||[])}catch{m.error("Failed to load daily stats")}},w=async()=>{try{const a=await(await c(`${i}/leaderboards/reactions/`)).json();v(a.leaderboard||[])}catch{m.error("Failed to load leaderboard")}},x=(t,a)=>{const l=t/a*100;return l>75?"#f04747":l>50?"#faa61a":l>25?"#5865f2":"#2c2f33"},g=Array.from({length:24},(t,a)=>a),b=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(I,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Reaction Analytics")),React.createElement("button",{onClick:u,style:e.closeButton},React.createElement(D,null))),React.createElement("div",{style:e.tabs},React.createElement("button",{onClick:()=>p("heatmap"),style:{...e.tab,...r==="heatmap"&&e.tabActive}},React.createElement(z,{style:{marginRight:"5px"}}),"Heatmap"),React.createElement("button",{onClick:()=>p("daily"),style:{...e.tab,...r==="daily"&&e.tabActive}},React.createElement(F,{style:{marginRight:"5px"}}),"Daily Stats"),React.createElement("button",{onClick:()=>p("leaderboard"),style:{...e.tab,...r==="leaderboard"&&e.tabActive}},React.createElement(B,{style:{marginRight:"5px"}}),"Leaderboard")),React.createElement("div",{style:e.content},C?React.createElement("div",{style:e.loading},"Loading analytics..."):r==="heatmap"?React.createElement("div",{style:e.heatmapContainer},React.createElement("div",{style:e.heatmapGrid},React.createElement("div",{style:e.heatmapYAxis},b.map(t=>React.createElement("div",{key:t,style:e.dayLabel},t))),React.createElement("div",{style:e.heatmapCells},o&&o.data&&b.map((t,a)=>React.createElement("div",{key:t,style:e.heatmapRow},g.map(l=>{const h=o.data[a]?.[l]||0,L=Math.max(...o.data.flat().filter(A=>A)||[1]);return React.createElement("div",{key:l,style:{...e.heatmapCell,backgroundColor:x(h,L)},title:`${t} ${l}:00 - ${h} reactions`})}))),React.createElement("div",{style:e.heatmapXAxis},g.filter(t=>t%3===0).map(t=>React.createElement("div",{key:t,style:e.hourLabel},t,"h"))))),React.createElement("div",{style:e.legend},React.createElement("span",{style:e.legendLabel},"Less"),[0,25,50,75,100].map(t=>React.createElement("div",{key:t,style:{...e.legendBox,backgroundColor:x(t,100)}})),React.createElement("span",{style:e.legendLabel},"More"))):r==="daily"?React.createElement("div",{style:e.dailyStats},d.length===0?React.createElement("div",{style:e.empty},"No daily stats available"):React.createElement("div",{style:e.chartContainer},d.map((t,a)=>React.createElement("div",{key:a,style:e.statBar},React.createElement("div",{style:e.statDate},new Date(t.date).toLocaleDateString()),React.createElement("div",{style:e.barContainer},React.createElement("div",{style:{...e.bar,width:`${t.count/Math.max(...d.map(l=>l.count))*100}%`}})),React.createElement("div",{style:e.statCount},t.count))))):React.createElement("div",{style:e.leaderboard},y.length===0?React.createElement("div",{style:e.empty},"No leaderboard data available"):y.map((t,a)=>React.createElement("div",{key:a,style:e.leaderboardItem},React.createElement("div",{style:e.rank},a===0?"ðŸ¥‡":a===1?"ðŸ¥ˆ":a===2?"ðŸ¥‰":`#${a+1}`),React.createElement("div",{style:e.userInfo},React.createElement("div",{style:e.username},t.username),React.createElement("div",{style:e.userReactions},React.createElement($,{style:{color:"#f04747",marginRight:"5px"}}),t.reaction_count," reactions"))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"1000px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},tabs:{display:"flex",borderBottom:"1px solid #2c2f33",padding:"0 20px"},tab:{padding:"12px 20px",backgroundColor:"transparent",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",borderBottom:"2px solid transparent"},tabActive:{color:"#5865f2",borderBottom:"2px solid #5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},heatmapContainer:{display:"flex",flexDirection:"column",gap:"20px"},heatmapGrid:{display:"flex",gap:"10px"},heatmapYAxis:{display:"flex",flexDirection:"column",justifyContent:"space-around"},dayLabel:{fontSize:"12px",color:"#99aab5",height:"20px",display:"flex",alignItems:"center"},heatmapCells:{flex:1},heatmapRow:{display:"flex",gap:"2px",marginBottom:"2px"},heatmapCell:{width:"20px",height:"20px",borderRadius:"2px",cursor:"pointer"},heatmapXAxis:{display:"flex",justifyContent:"space-around",marginTop:"5px"},hourLabel:{fontSize:"11px",color:"#99aab5"},legend:{display:"flex",alignItems:"center",gap:"5px",justifyContent:"center"},legendLabel:{fontSize:"12px",color:"#99aab5"},legendBox:{width:"15px",height:"15px",borderRadius:"2px"},dailyStats:{display:"flex",flexDirection:"column"},chartContainer:{display:"flex",flexDirection:"column",gap:"12px"},statBar:{display:"grid",gridTemplateColumns:"100px 1fr 60px",alignItems:"center",gap:"12px"},statDate:{fontSize:"13px",color:"#dcddde"},barContainer:{height:"24px",backgroundColor:"#2c2f33",borderRadius:"4px",overflow:"hidden"},bar:{height:"100%",backgroundColor:"#5865f2",transition:"width 0.3s"},statCount:{fontSize:"14px",fontWeight:"600",color:"#ffffff",textAlign:"right"},leaderboard:{display:"flex",flexDirection:"column",gap:"12px"},leaderboardItem:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",alignItems:"center",gap:"16px"},rank:{fontSize:"24px",fontWeight:"600",minWidth:"60px",textAlign:"center"},userInfo:{flex:1},username:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},userReactions:{fontSize:"14px",color:"#99aab5",display:"flex",alignItems:"center"}};export{H as default};
