import{r as p}from"./react-core-B6hadH-M.js";import{t as c,g as v}from"./index-D_6pZib5.js";import{a as B}from"./index-D5GkNzM3.js";const O=({roomSlug:b,token:m,onClose:n,onPollCreated:g,isMobile:i})=>{const[s,f]=p.useState(""),[o,d]=p.useState(["",""]),[u,y]=p.useState(24),[l,x]=p.useState(!1),h=()=>{o.length<10&&d([...o,""])},R=e=>{o.length>2&&d(o.filter((a,r)=>r!==e))},C=(e,a)=>{const r=[...o];r[e]=a,d(r)},E=async()=>{if(!s.trim()){c.error("âŒ Please enter a question");return}const e=o.filter(a=>a.trim());if(e.length<2){c.error("âŒ Please provide at least 2 options");return}x(!0);try{const a=await B.post(`${v()}/polls/create/`,{room_slug:b,question:s.trim(),options:e.map(r=>r.trim()),duration_hours:u},{headers:{Authorization:`Bearer ${m}`}});g&&g(a.data),n()}catch(a){console.error("Failed to create poll:",a),c.error("âŒ Failed to create poll. Please try again.")}finally{x(!1)}},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:i?"20px":"40px"},modal:{background:"linear-gradient(135deg, rgba(30, 31, 34, 0.98), rgba(35, 36, 40, 0.98))",borderRadius:"16px",padding:i?"20px":"30px",width:"100%",maxWidth:i?"100%":"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 50px rgba(0, 0, 0, 0.7), 0 0 30px rgba(88, 101, 242, 0.3)",border:"1px solid rgba(88, 101, 242, 0.4)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},title:{fontSize:i?"20px":"24px",fontWeight:"700",color:"rgba(255, 255, 255, 0.95)",margin:0,display:"flex",alignItems:"center",gap:"10px"},closeButton:{background:"rgba(88, 101, 242, 0.2)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"20px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease"},formGroup:{marginBottom:"20px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"rgba(255, 255, 255, 0.8)",marginBottom:"8px"},input:{width:"100%",padding:"12px 14px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.95)",fontSize:"15px",outline:"none",transition:"all 0.2s ease",boxSizing:"border-box"},optionContainer:{display:"flex",gap:"8px",marginBottom:"10px"},optionInput:{flex:1,padding:"12px 14px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.95)",fontSize:"14px",outline:"none"},removeButton:{background:"rgba(218, 55, 60, 0.2)",border:"1px solid rgba(218, 55, 60, 0.4)",borderRadius:"8px",padding:"0 16px",cursor:"pointer",fontSize:"18px",color:"#da373c",transition:"all 0.2s ease",minWidth:"44px"},addButton:{background:"rgba(88, 101, 242, 0.2)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"8px",padding:"10px 16px",cursor:"pointer",fontSize:"14px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",width:"100%",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",minHeight:"44px"},durationContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"10px"},durationButton:e=>({padding:"12px",background:e?"linear-gradient(135deg, rgba(88, 101, 242, 0.3), rgba(114, 137, 218, 0.3))":"rgba(0, 0, 0, 0.3)",border:`1px solid ${e?"rgba(88, 101, 242, 0.6)":"rgba(88, 101, 242, 0.3)"}`,borderRadius:"8px",cursor:"pointer",fontSize:"13px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",fontWeight:e?"600":"400",minHeight:"44px"}),buttonContainer:{display:"flex",gap:"12px",marginTop:"24px"},createButton:{flex:1,padding:"14px",background:"linear-gradient(135deg, #5865f2, #7289da)",border:"none",borderRadius:"8px",cursor:l?"not-allowed":"pointer",fontSize:"16px",fontWeight:"600",color:"white",transition:"all 0.2s ease",opacity:l?.6:1,minHeight:"44px"},cancelButton:{flex:1,padding:"14px",background:"rgba(78, 80, 88, 0.5)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",minHeight:"44px"}},k=[1,4,8,24,72,168];return React.createElement("div",{style:t.overlay,onClick:n},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("h2",{style:t.title},React.createElement("span",null,"ðŸ“Š"),"Create Poll"),React.createElement("button",{onClick:n,style:t.closeButton},"âœ•")),React.createElement("div",{style:t.formGroup},React.createElement("label",{style:t.label},"Question"),React.createElement("input",{type:"text",value:s,onChange:e=>f(e.target.value),placeholder:"What's your question?",style:t.input,maxLength:200})),React.createElement("div",{style:t.formGroup},React.createElement("label",{style:t.label},"Options (2-10)"),o.map((e,a)=>React.createElement("div",{key:a,style:t.optionContainer},React.createElement("input",{type:"text",value:e,onChange:r=>C(a,r.target.value),placeholder:`Option ${a+1}`,style:t.optionInput,maxLength:100}),o.length>2&&React.createElement("button",{onClick:()=>R(a),style:t.removeButton},"âœ•"))),o.length<10&&React.createElement("button",{onClick:h,style:t.addButton},React.createElement("span",null,"âž•"),"Add Option")),React.createElement("div",{style:t.formGroup},React.createElement("label",{style:t.label},"Poll Duration"),React.createElement("div",{style:t.durationContainer},k.map(e=>React.createElement("button",{key:e,onClick:()=>y(e),style:t.durationButton(u===e)},e<24?`${e}h`:`${e/24}d`)))),React.createElement("div",{style:t.buttonContainer},React.createElement("button",{onClick:n,style:t.cancelButton},"Cancel"),React.createElement("button",{onClick:E,disabled:l,style:t.createButton},l?"Creating...":"Create Poll"))))};export{O as default};
