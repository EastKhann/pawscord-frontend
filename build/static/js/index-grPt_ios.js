const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./web-CvuzKB46.js","./react-core-DMT_QkRe.js","../css/react-core-Dj12pvTl.css","./ServerSettingsModal-Dps1Dkhr.js","./AutoResponderManager-DfqtT0d3.js","./VanityURLManager-DkbRGg2l.js","./UserProfileModal-DS19IvL0.js","./ImageModal-D3SYcdf2.js","./GifPicker-gsWNwcjc.js","./StickerPicker-0zWuRBR9.js","./SoundboardModal-BeheTWGf.js","./WatchPartyEnhanced-B0aiLN2Q.js","./CinemaModal-o6LCVkTH.js","./WhiteboardModal-z3l5oI_3.js","./PollCreateModal-0S2RMmxJ.js","./CodeSnippetModal-CUmfv3IH.js","./MessageTemplateModal-CucOC7KI.js","./Message-Die5yW_F.js","./LazyImage-CcruulVo.js","./imageCaching-BEvvks0u.js","./VirtualMessageList-QcTHDQtR.js","./MessageInput-Dppcw-HK.js","./ScheduledMessageModal-lxbsUXpZ.js","../css/MessageInput-DSbUeC-P.css","./UserVideoContainer-CmWPKl13.js","./VoiceAudioController-BLMgFE4T.js","./RichTextEditor-CGhJeru-.js","./tiptap-EK0w_kra.js","./recharts-CgH4V39_.js","../css/RichTextEditor-D3gjYEEz.css","./StickyMessageBanner-DLHFn_Ok.js","./LoginPage-D69-z5QJ.js","./recaptcha-BRfr3xY1.js","./WelcomeScreen-WiHUltwr.js","./DownloadModal-BI8-7Hnn.js","./apiEndpoints-DTuZVK56.js","./AvatarCropper-D2WYvreM.js","../css/AvatarCropper-CvJ6GDdV.css","./CryptoChartModal-DG_30TpS.js","./CryptoStoreModal-CWuUvGEN.js","./PremiumStoreModal-DkNjvFia.js","./KanbanBoard-CDpHaNNv.js","./SummaryModal-B6TzuUUX.js","./DJModal-OlNMrwjO.js","./ThemeStoreModal-Cf2Ju2-Y.js","./EncryptionKeyModal-BuOUPhp1.js","./CreateGroupModal-DsOp5Y8A.js","./AdminAnalyticsPanel-eWP2nE4n.js","./AdminPanelModal-D36lQeKZ.js","./WebhooksPanel-B1CEL3gV.js","../css/WebhooksPanel-Cn13v79_.css","./AutoModerationDashboard-DUqWbXmJ.js","./AutoModerationPanel-CyURew_x.js","../css/AutoModerationPanel-iAw0CZQU.css","./RaidProtectionPanel-DJzGE_Fn.js","./ReportSystemPanel-B9BQp0fZ.js","./AuditLogPanel-q_HacnZv.js","./UserWarningsPanel-w_Xf0HVo.js","./BookmarkPanel-DjTEoxSM.js","./ReadLaterPanel-B4EyRqP-.js","../css/ReadLaterPanel-B_WZGTiX.css","./ChannelPermissionsPanel-1CnNE2wA.js","./MessageThreadsPanel-BkGBDzHE.js","./ModeratorNotesPanel-BW7RV6lN.js","./ServerRolesPanel-CHqWwsQ3.js","./NotificationPreferencesPanel-CqyFEFqN.js","./MessageOCRPanel-CCXv_Aik.js","./MassActionsPanel-It373m6R.js","./TimeoutMutePanel-BaeCaZ3n.js","./ServerThemesPanel-D-Rn2-ZA.js","./KeywordMutesPanel-ClrUaqtY.js","./WelcomeTemplatesPanel-JETI0rrl.js","./StickyMessagesPanel-cRheKmZ-.js","./MessageTemplatesPanel-C6M-RZKK.js","./MessageExportPanel-ZiG5myFP.js","./ArchivedRoomsPanel-C_FqBwEV.js","./SlowModePanel-Cy0xu9iH.js","./EmojiManagementPanel-B-e0QrVo.js","./ReactionAnalyticsPanel-D6TSF1_F.js","./LinkClickTrackingPanel-1eCLYfb4.js","./JoinLeaveLogsPanel-SX2pV1LP.js","./UserActivityPanel-Bk4jVale.js","./NicknameHistoryPanel-Qa5pyVvV.js","./FieldChangeTrackingPanel-B4DGGvAp.js","./InviteAnalyticsPanel-GuIp1SOt.js","./ContentScannerPanel-Ckx39X4T.js","./EphemeralMessagesPanel-BRE4mYcZ.js","./TopicHistoryPanel-y-9A0OHp.js","./DraftsPanel-BsnX6B9g.js","./ServerNicknamesPanel-DetqTDOU.js","./ServerBoostPanel-l3pH6bCb.js","./RoomWebhooksPanel-Dibl2dVK.js","./OAuthAppsPanel-9xdS9dhZ.js","./VanityURLPanel-B8ic0uGB.js","./AutoRespondersPanel-B1pAwHq5.js","./SessionManagementPanel-C22ZIibj.js","./GDPRExportPanel-D4yJThLl.js","./DataRetentionPanel-BFmOxnbP.js","./TwoFactorSetupWizard-BLofmsS4.js","./EnhancedPollsPanel-Bi-SR7Su.js","./VoiceTranscriptsPanel-BGz56P3N.js","./PaymentPanel-DgawCK2b.js","./StoreModal-Y-EfilqK.js","./DailyRewardsModal-CMF73xCU.js","./APIUsagePanel-C98DEnYL.js","./ExportJobsPanel-B9zwN8c6.js","./ScheduledAnnouncementsPanel-C28IEieN.js","./InviteExportPanel-Da8rNwlv.js","./AdvancedSearchPanel-B-O3RNOj.js","./GrowthMetricsPanel-CdFeNP-P.js","./LinkPreviewRenderer-DEoEakLA.js","./InventoryPanel-BiVrpD1E.js","./WaitlistPanel-DZTV9uDv.js","./ReferralRewardsPanel-WaRyzAeQ.js","./VerifyEmailPage-CkDR2K96.js","./ForgotPasswordPage-CWtbqmbj.js","./ResetPasswordPage-CwlzoiLw.js","./TwoFactorLoginPage-BPNuEqhs.js","./TwoFactorSetup-CR553wfI.js","../css/TwoFactorSetup-CtmcmlFU.css","./TwoFactorLogin-Coq_QcUN.js","../css/TwoFactorLogin-DgREC4Q6.css","./VanityInviteScreen-BCIjeoZF.js","./EmailVerification-CKJZJbLU.js","../css/EmailVerification-CE2S-15C.css","./MobileNav-DmJ3tSaa.js","../css/MobileNav-BLwPGkd1.css","./SwipeActions-BxNKP9dE.js","../css/SwipeActions-CCPpS4d3.css","./VoiceMessage-Du5_uW8a.js","../css/VoiceMessage-Czmu0SFR.css","./FriendsTab-BGrD4uWs.js","./RoomList-B-K4_i59.js","./UserFooter-BfzCGufA.js","./UserProfilePanel-WMS5b7vf.js","./index-B9ygI19o.js","../css/UserProfilePanel-DaqyzPyG.css","./VoiceChatPanel-BprwEB0n.js","./UserContextMenu-fEUG2QoA.js","../css/VoiceChatPanel-D0hk1ENV.css","./ChatUserList-CVi4TOeC.js","./PinnedMessages-D1D08gP9.js","./FloatingVoiceIsland-fxd8WthV.js","./CinemaPlayer-DverLaeq.js","./ConnectionsPanel-DQFEpB6_.js","../css/ConnectionsPanel-BHb_cRVQ.css","./PasswordSetupModal-Cbi97UyP.js","../css/PasswordSetupModal-hiiUdoNl.css","./NotificationDropdown-DM5TXSBj.js","./ReactionStatsPanel-CacGTKn9.js","../css/ReactionStatsPanel-D_puvjpP.css","./ServerHealthPanel-CFlfh1Yv.js","../css/ServerHealthPanel-DVezKW9Q.css","./ChannelAnalyticsPanel-DXHY6kaw.js","../css/ChannelAnalyticsPanel-B6Q8OoDz.css","./SmartSuggestionsPanel-DTtZasRu.js","../css/SmartSuggestionsPanel-BFDBx7VC.css","./UserPresenceInsightsPanel-EKk5D4Hs.js","../css/UserPresenceInsightsPanel-C69M9XNv.css","./MiniGamesPanel-CBn2M1H8.js","./ProjectCollaborationPanel-CRk8plmn.js","./AvatarStudioPanel-CNR59z91.js","./pushNotifications-BysZcil5.js","./urlHandlers-D9z3fMPG.js","./EnglishHub-DpIULeQ-.js","./GrammarQuizPage-CB5gAujT.js","./grammarQuestions-A4AYX2rb.js","./EnglishLearningPage-OXHFJ_ZJ.js","./CryptoDashboard-iNCCjmDT.js","./CryptoSignals-Wj5xAkT3.js","./LandingPage-DbWKhNg9.js","../css/LandingPage-CHHpsw7G.css","./ReferralProgram-B9rGhEj8.js","../css/ReferralProgram-CBBjqZR4.css","./GrowthDashboard-Rfv36dtj.js","../css/GrowthDashboard-xlqndw5F.css","./ToastDemo-Dvpqmq35.js","../css/ToastDemo-DxNVRuTl.css"])))=>i.map(i=>d[i]);
import{g as Vi,_ as M,d as e,f as Jc,h as Ca,r as a,u as Ni,F as Xc,i as So,k as Zc,l as Ms,m as Us,n as Qc,o as el,p as tl,q as rl,t as ol,v as nl,w as Vs,x as al,y as sl,z as Ta,A as La,B as il,C as cl,D as ll,E as dl,e as ul,G as Wi,H as wo,I as Hi,J as $a,K as Oa,L as fl,M as ml,N as ji,O as Gi,Q as Ns,S as pl,T as xl,U as hl,V as gl,W as yl,X as vl,Y as El,Z as bl,$ as _l,a0 as Sl,a1 as wl,a2 as Ie}from"./react-core-DMT_QkRe.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const x of d)if(x.type==="childList")for(const B of x.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&s(B)}).observe(document,{childList:!0,subtree:!0});function n(d){const x={};return d.integrity&&(x.integrity=d.integrity),d.referrerPolicy&&(x.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?x.credentials="include":d.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function s(d){if(d.ep)return;d.ep=!0;const x=n(d);fetch(d.href,x)}})();var ka={exports:{}},Ws;function Cl(){return Ws||(Ws=1,(function(f,i){(function(n){f.exports=n()})(function(n){var s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function d(h,c){var r=h[0],o=h[1],u=h[2],l=h[3];r+=(o&u|~o&l)+c[0]-680876936|0,r=(r<<7|r>>>25)+o|0,l+=(r&o|~r&u)+c[1]-389564586|0,l=(l<<12|l>>>20)+r|0,u+=(l&r|~l&o)+c[2]+606105819|0,u=(u<<17|u>>>15)+l|0,o+=(u&l|~u&r)+c[3]-1044525330|0,o=(o<<22|o>>>10)+u|0,r+=(o&u|~o&l)+c[4]-176418897|0,r=(r<<7|r>>>25)+o|0,l+=(r&o|~r&u)+c[5]+1200080426|0,l=(l<<12|l>>>20)+r|0,u+=(l&r|~l&o)+c[6]-1473231341|0,u=(u<<17|u>>>15)+l|0,o+=(u&l|~u&r)+c[7]-45705983|0,o=(o<<22|o>>>10)+u|0,r+=(o&u|~o&l)+c[8]+1770035416|0,r=(r<<7|r>>>25)+o|0,l+=(r&o|~r&u)+c[9]-1958414417|0,l=(l<<12|l>>>20)+r|0,u+=(l&r|~l&o)+c[10]-42063|0,u=(u<<17|u>>>15)+l|0,o+=(u&l|~u&r)+c[11]-1990404162|0,o=(o<<22|o>>>10)+u|0,r+=(o&u|~o&l)+c[12]+1804603682|0,r=(r<<7|r>>>25)+o|0,l+=(r&o|~r&u)+c[13]-40341101|0,l=(l<<12|l>>>20)+r|0,u+=(l&r|~l&o)+c[14]-1502002290|0,u=(u<<17|u>>>15)+l|0,o+=(u&l|~u&r)+c[15]+1236535329|0,o=(o<<22|o>>>10)+u|0,r+=(o&l|u&~l)+c[1]-165796510|0,r=(r<<5|r>>>27)+o|0,l+=(r&u|o&~u)+c[6]-1069501632|0,l=(l<<9|l>>>23)+r|0,u+=(l&o|r&~o)+c[11]+643717713|0,u=(u<<14|u>>>18)+l|0,o+=(u&r|l&~r)+c[0]-373897302|0,o=(o<<20|o>>>12)+u|0,r+=(o&l|u&~l)+c[5]-701558691|0,r=(r<<5|r>>>27)+o|0,l+=(r&u|o&~u)+c[10]+38016083|0,l=(l<<9|l>>>23)+r|0,u+=(l&o|r&~o)+c[15]-660478335|0,u=(u<<14|u>>>18)+l|0,o+=(u&r|l&~r)+c[4]-405537848|0,o=(o<<20|o>>>12)+u|0,r+=(o&l|u&~l)+c[9]+568446438|0,r=(r<<5|r>>>27)+o|0,l+=(r&u|o&~u)+c[14]-1019803690|0,l=(l<<9|l>>>23)+r|0,u+=(l&o|r&~o)+c[3]-187363961|0,u=(u<<14|u>>>18)+l|0,o+=(u&r|l&~r)+c[8]+1163531501|0,o=(o<<20|o>>>12)+u|0,r+=(o&l|u&~l)+c[13]-1444681467|0,r=(r<<5|r>>>27)+o|0,l+=(r&u|o&~u)+c[2]-51403784|0,l=(l<<9|l>>>23)+r|0,u+=(l&o|r&~o)+c[7]+1735328473|0,u=(u<<14|u>>>18)+l|0,o+=(u&r|l&~r)+c[12]-1926607734|0,o=(o<<20|o>>>12)+u|0,r+=(o^u^l)+c[5]-378558|0,r=(r<<4|r>>>28)+o|0,l+=(r^o^u)+c[8]-2022574463|0,l=(l<<11|l>>>21)+r|0,u+=(l^r^o)+c[11]+1839030562|0,u=(u<<16|u>>>16)+l|0,o+=(u^l^r)+c[14]-35309556|0,o=(o<<23|o>>>9)+u|0,r+=(o^u^l)+c[1]-1530992060|0,r=(r<<4|r>>>28)+o|0,l+=(r^o^u)+c[4]+1272893353|0,l=(l<<11|l>>>21)+r|0,u+=(l^r^o)+c[7]-155497632|0,u=(u<<16|u>>>16)+l|0,o+=(u^l^r)+c[10]-1094730640|0,o=(o<<23|o>>>9)+u|0,r+=(o^u^l)+c[13]+681279174|0,r=(r<<4|r>>>28)+o|0,l+=(r^o^u)+c[0]-358537222|0,l=(l<<11|l>>>21)+r|0,u+=(l^r^o)+c[3]-722521979|0,u=(u<<16|u>>>16)+l|0,o+=(u^l^r)+c[6]+76029189|0,o=(o<<23|o>>>9)+u|0,r+=(o^u^l)+c[9]-640364487|0,r=(r<<4|r>>>28)+o|0,l+=(r^o^u)+c[12]-421815835|0,l=(l<<11|l>>>21)+r|0,u+=(l^r^o)+c[15]+530742520|0,u=(u<<16|u>>>16)+l|0,o+=(u^l^r)+c[2]-995338651|0,o=(o<<23|o>>>9)+u|0,r+=(u^(o|~l))+c[0]-198630844|0,r=(r<<6|r>>>26)+o|0,l+=(o^(r|~u))+c[7]+1126891415|0,l=(l<<10|l>>>22)+r|0,u+=(r^(l|~o))+c[14]-1416354905|0,u=(u<<15|u>>>17)+l|0,o+=(l^(u|~r))+c[5]-57434055|0,o=(o<<21|o>>>11)+u|0,r+=(u^(o|~l))+c[12]+1700485571|0,r=(r<<6|r>>>26)+o|0,l+=(o^(r|~u))+c[3]-1894986606|0,l=(l<<10|l>>>22)+r|0,u+=(r^(l|~o))+c[10]-1051523|0,u=(u<<15|u>>>17)+l|0,o+=(l^(u|~r))+c[1]-2054922799|0,o=(o<<21|o>>>11)+u|0,r+=(u^(o|~l))+c[8]+1873313359|0,r=(r<<6|r>>>26)+o|0,l+=(o^(r|~u))+c[15]-30611744|0,l=(l<<10|l>>>22)+r|0,u+=(r^(l|~o))+c[6]-1560198380|0,u=(u<<15|u>>>17)+l|0,o+=(l^(u|~r))+c[13]+1309151649|0,o=(o<<21|o>>>11)+u|0,r+=(u^(o|~l))+c[4]-145523070|0,r=(r<<6|r>>>26)+o|0,l+=(o^(r|~u))+c[11]-1120210379|0,l=(l<<10|l>>>22)+r|0,u+=(r^(l|~o))+c[2]+718787259|0,u=(u<<15|u>>>17)+l|0,o+=(l^(u|~r))+c[9]-343485551|0,o=(o<<21|o>>>11)+u|0,h[0]=r+h[0]|0,h[1]=o+h[1]|0,h[2]=u+h[2]|0,h[3]=l+h[3]|0}function x(h){var c=[],r;for(r=0;r<64;r+=4)c[r>>2]=h.charCodeAt(r)+(h.charCodeAt(r+1)<<8)+(h.charCodeAt(r+2)<<16)+(h.charCodeAt(r+3)<<24);return c}function B(h){var c=[],r;for(r=0;r<64;r+=4)c[r>>2]=h[r]+(h[r+1]<<8)+(h[r+2]<<16)+(h[r+3]<<24);return c}function b(h){var c=h.length,r=[1732584193,-271733879,-1732584194,271733878],o,u,l,P,L,q;for(o=64;o<=c;o+=64)d(r,x(h.substring(o-64,o)));for(h=h.substring(o-64),u=h.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<u;o+=1)l[o>>2]|=h.charCodeAt(o)<<(o%4<<3);if(l[o>>2]|=128<<(o%4<<3),o>55)for(d(r,l),o=0;o<16;o+=1)l[o]=0;return P=c*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(P[2],16),q=parseInt(P[1],16)||0,l[14]=L,l[15]=q,d(r,l),r}function S(h){var c=h.length,r=[1732584193,-271733879,-1732584194,271733878],o,u,l,P,L,q;for(o=64;o<=c;o+=64)d(r,B(h.subarray(o-64,o)));for(h=o-64<c?h.subarray(o-64):new Uint8Array(0),u=h.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<u;o+=1)l[o>>2]|=h[o]<<(o%4<<3);if(l[o>>2]|=128<<(o%4<<3),o>55)for(d(r,l),o=0;o<16;o+=1)l[o]=0;return P=c*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(P[2],16),q=parseInt(P[1],16)||0,l[14]=L,l[15]=q,d(r,l),r}function m(h){var c="",r;for(r=0;r<4;r+=1)c+=s[h>>r*8+4&15]+s[h>>r*8&15];return c}function y(h){var c;for(c=0;c<h.length;c+=1)h[c]=m(h[c]);return h.join("")}y(b("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function h(c,r){return c=c|0||0,c<0?Math.max(c+r,0):Math.min(c,r)}ArrayBuffer.prototype.slice=function(c,r){var o=this.byteLength,u=h(c,o),l=o,P,L,q,F;return r!==n&&(l=h(r,o)),u>l?new ArrayBuffer(0):(P=l-u,L=new ArrayBuffer(P),q=new Uint8Array(L),F=new Uint8Array(this,u,P),q.set(F),L)}})();function A(h){return/[\u0080-\uFFFF]/.test(h)&&(h=unescape(encodeURIComponent(h))),h}function g(h,c){var r=h.length,o=new ArrayBuffer(r),u=new Uint8Array(o),l;for(l=0;l<r;l+=1)u[l]=h.charCodeAt(l);return c?u:o}function k(h){return String.fromCharCode.apply(null,new Uint8Array(h))}function w(h,c,r){var o=new Uint8Array(h.byteLength+c.byteLength);return o.set(new Uint8Array(h)),o.set(new Uint8Array(c),h.byteLength),o}function C(h){var c=[],r=h.length,o;for(o=0;o<r-1;o+=2)c.push(parseInt(h.substr(o,2),16));return String.fromCharCode.apply(String,c)}function v(){this.reset()}return v.prototype.append=function(h){return this.appendBinary(A(h)),this},v.prototype.appendBinary=function(h){this._buff+=h,this._length+=h.length;var c=this._buff.length,r;for(r=64;r<=c;r+=64)d(this._hash,x(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},v.prototype.end=function(h){var c=this._buff,r=c.length,o,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l;for(o=0;o<r;o+=1)u[o>>2]|=c.charCodeAt(o)<<(o%4<<3);return this._finish(u,r),l=y(this._hash),h&&(l=C(l)),this.reset(),l},v.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},v.prototype.setState=function(h){return this._buff=h.buff,this._length=h.length,this._hash=h.hash,this},v.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},v.prototype._finish=function(h,c){var r=c,o,u,l;if(h[r>>2]|=128<<(r%4<<3),r>55)for(d(this._hash,h),r=0;r<16;r+=1)h[r]=0;o=this._length*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(o[2],16),l=parseInt(o[1],16)||0,h[14]=u,h[15]=l,d(this._hash,h)},v.hash=function(h,c){return v.hashBinary(A(h),c)},v.hashBinary=function(h,c){var r=b(h),o=y(r);return c?C(o):o},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(h){var c=w(this._buff.buffer,h),r=c.length,o;for(this._length+=h.byteLength,o=64;o<=r;o+=64)d(this._hash,B(c.subarray(o-64,o)));return this._buff=o-64<r?new Uint8Array(c.buffer.slice(o-64)):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(h){var c=this._buff,r=c.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u,l;for(u=0;u<r;u+=1)o[u>>2]|=c[u]<<(u%4<<3);return this._finish(o,r),l=y(this._hash),h&&(l=C(l)),this.reset(),l},v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.getState=function(){var h=v.prototype.getState.call(this);return h.buff=k(h.buff),h},v.ArrayBuffer.prototype.setState=function(h){return h.buff=g(h.buff,!0),v.prototype.setState.call(this,h)},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.hash=function(h,c){var r=S(new Uint8Array(h)),o=y(r);return c?C(o):o},v})})(ka)),ka.exports}var kl=Cl();const Al=Vi(kl);var Qr;(function(f){f.Unimplemented="UNIMPLEMENTED",f.Unavailable="UNAVAILABLE"})(Qr||(Qr={}));class Aa extends Error{constructor(i,n,s){super(i),this.message=i,this.code=n,this.data=s}}const Bl=f=>{var i,n;return f?.androidBridge?"android":!((n=(i=f?.webkit)===null||i===void 0?void 0:i.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Dl=f=>{const i=f.CapacitorCustomPlatform||null,n=f.Capacitor||{},s=n.Plugins=n.Plugins||{},d=()=>i!==null?i.name:Bl(f),x=()=>d()!=="web",B=A=>{const g=m.get(A);return!!(g?.platforms.has(d())||b(A))},b=A=>{var g;return(g=n.PluginHeaders)===null||g===void 0?void 0:g.find(k=>k.name===A)},S=A=>f.console.error(A),m=new Map,y=(A,g={})=>{const k=m.get(A);if(k)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),k.proxy;const w=d(),C=b(A);let v;const h=async()=>(!v&&w in g?v=typeof g[w]=="function"?v=await g[w]():v=g[w]:i!==null&&!v&&"web"in g&&(v=typeof g.web=="function"?v=await g.web():v=g.web),v),c=(L,q)=>{var F,U;if(C){const V=C?.methods.find(j=>q===j.name);if(V)return V.rtype==="promise"?j=>n.nativePromise(A,q.toString(),j):(j,re)=>n.nativeCallback(A,q.toString(),j,re);if(L)return(F=L[q])===null||F===void 0?void 0:F.bind(L)}else{if(L)return(U=L[q])===null||U===void 0?void 0:U.bind(L);throw new Aa(`"${A}" plugin is not implemented on ${w}`,Qr.Unimplemented)}},r=L=>{let q;const F=(...U)=>{const V=h().then(j=>{const re=c(j,L);if(re){const ne=re(...U);return q=ne?.remove,ne}else throw new Aa(`"${A}.${L}()" is not implemented on ${w}`,Qr.Unimplemented)});return L==="addListener"&&(V.remove=async()=>q()),V};return F.toString=()=>`${L.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:L,writable:!1,configurable:!1}),F},o=r("addListener"),u=r("removeListener"),l=(L,q)=>{const F=o({eventName:L},q),U=async()=>{const j=await F;u({eventName:L,callbackId:j},q)},V=new Promise(j=>F.then(()=>j({remove:U})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await U()},V},P=new Proxy({},{get(L,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?l:o;case"removeListener":return u;default:return r(q)}}});return s[A]=P,m.set(A,{name:A,proxy:P,platforms:new Set([...Object.keys(g),...C?[w]:[]])}),P};return n.convertFileSrc||(n.convertFileSrc=A=>A),n.getPlatform=d,n.handleError=S,n.isNativePlatform=x,n.isPluginAvailable=B,n.registerPlugin=y,n.Exception=Aa,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Tl=f=>f.Capacitor=Dl(f),eo=Tl(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),za=eo.registerPlugin;class qi{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(i,n){let s=!1;this.listeners[i]||(this.listeners[i]=[],s=!0),this.listeners[i].push(n);const x=this.windowListeners[i];x&&!x.registered&&this.addWindowListener(x),s&&this.sendRetainedArgumentsForEvent(i);const B=async()=>this.removeListener(i,n);return Promise.resolve({remove:B})}async removeAllListeners(){this.listeners={};for(const i in this.windowListeners)this.removeWindowListener(this.windowListeners[i]);this.windowListeners={}}notifyListeners(i,n,s){const d=this.listeners[i];if(!d){if(s){let x=this.retainedEventArguments[i];x||(x=[]),x.push(n),this.retainedEventArguments[i]=x}return}d.forEach(x=>x(n))}hasListeners(i){var n;return!!(!((n=this.listeners[i])===null||n===void 0)&&n.length)}registerWindowListener(i,n){this.windowListeners[n]={registered:!1,windowEventName:i,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(i="not implemented"){return new eo.Exception(i,Qr.Unimplemented)}unavailable(i="not available"){return new eo.Exception(i,Qr.Unavailable)}async removeListener(i,n){const s=this.listeners[i];if(!s)return;const d=s.indexOf(n);this.listeners[i].splice(d,1),this.listeners[i].length||this.removeWindowListener(this.windowListeners[i])}addWindowListener(i){window.addEventListener(i.windowEventName,i.handler),i.registered=!0}removeWindowListener(i){i&&(window.removeEventListener(i.windowEventName,i.handler),i.registered=!1)}sendRetainedArgumentsForEvent(i){const n=this.retainedEventArguments[i];n&&(delete this.retainedEventArguments[i],n.forEach(s=>{this.notifyListeners(i,s)}))}}const Hs=f=>encodeURIComponent(f).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),js=f=>f.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Fl extends qi{async getCookies(){const i=document.cookie,n={};return i.split(";").forEach(s=>{if(s.length<=0)return;let[d,x]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");d=js(d).trim(),x=js(x).trim(),n[d]=x}),n}async setCookie(i){try{const n=Hs(i.key),s=Hs(i.value),d=`; expires=${(i.expires||"").replace("expires=","")}`,x=(i.path||"/").replace("path=",""),B=i.url!=null&&i.url.length>0?`domain=${i.url}`:"";document.cookie=`${n}=${s||""}${d}; path=${x}; ${B};`}catch(n){return Promise.reject(n)}}async deleteCookie(i){try{document.cookie=`${i.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const i=document.cookie.split(";")||[];for(const n of i)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(i){return Promise.reject(i)}}async clearAllCookies(){try{await this.clearCookies()}catch(i){return Promise.reject(i)}}}za("CapacitorCookies",{web:()=>new Fl});const Rl=async f=>new Promise((i,n)=>{const s=new FileReader;s.onload=()=>{const d=s.result;i(d.indexOf(",")>=0?d.split(",")[1]:d)},s.onerror=d=>n(d),s.readAsDataURL(f)}),Pl=(f={})=>{const i=Object.keys(f);return Object.keys(f).map(d=>d.toLocaleLowerCase()).reduce((d,x,B)=>(d[x]=f[i[B]],d),{})},Il=(f,i=!0)=>f?Object.entries(f).reduce((s,d)=>{const[x,B]=d;let b,S;return Array.isArray(B)?(S="",B.forEach(m=>{b=i?encodeURIComponent(m):m,S+=`${x}=${b}&`}),S.slice(0,-1)):(b=i?encodeURIComponent(B):B,S=`${x}=${b}`),`${s}&${S}`},"").substr(1):null,Ll=(f,i={})=>{const n=Object.assign({method:f.method||"GET",headers:f.headers},i),d=Pl(f.headers)["content-type"]||"";if(typeof f.data=="string")n.body=f.data;else if(d.includes("application/x-www-form-urlencoded")){const x=new URLSearchParams;for(const[B,b]of Object.entries(f.data||{}))x.set(B,b);n.body=x.toString()}else if(d.includes("multipart/form-data")||f.data instanceof FormData){const x=new FormData;if(f.data instanceof FormData)f.data.forEach((b,S)=>{x.append(S,b)});else for(const b of Object.keys(f.data))x.append(b,f.data[b]);n.body=x;const B=new Headers(n.headers);B.delete("content-type"),n.headers=B}else(d.includes("application/json")||typeof f.data=="object")&&(n.body=JSON.stringify(f.data));return n};class $l extends qi{async request(i){const n=Ll(i,i.webFetchExtra),s=Il(i.params,i.shouldEncodeUrlParams),d=s?`${i.url}?${s}`:i.url,x=await fetch(d,n),B=x.headers.get("content-type")||"";let{responseType:b="text"}=x.ok?i:{};B.includes("application/json")&&(b="json");let S,m;switch(b){case"arraybuffer":case"blob":m=await x.blob(),S=await Rl(m);break;case"json":S=await x.json();break;default:S=await x.text()}const y={};return x.headers.forEach((A,g)=>{y[g]=A}),{data:S,headers:y,status:x.status,url:x.url}}async get(i){return this.request(Object.assign(Object.assign({},i),{method:"GET"}))}async post(i){return this.request(Object.assign(Object.assign({},i),{method:"POST"}))}async put(i){return this.request(Object.assign(Object.assign({},i),{method:"PUT"}))}async patch(i){return this.request(Object.assign(Object.assign({},i),{method:"PATCH"}))}async delete(i){return this.request(Object.assign(Object.assign({},i),{method:"DELETE"}))}}za("CapacitorHttp",{web:()=>new $l});const Ol=za("GoogleAuth",{web:()=>M(()=>import("./web-CvuzKB46.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(f=>new f.GoogleAuthWeb)});let zl=class extends e.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(i){return{hasError:!0}}componentDidCatch(i,n){console.error("Error Boundary caught error:",i,n),this.setState({error:i,errorInfo:n,errorCount:this.state.errorCount+1}),window.gtag&&window.gtag("event","exception",{description:i.toString(),fatal:!1}),this.reportError(i,n)}reportError=async(i,n)=>{try{await fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:i.toString(),stack:n.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(s){console.error("Failed to report error:",s)}};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.state.errorCount>3?e.createElement("div",{className:"error-boundary critical"},e.createElement("div",{className:"error-content"},e.createElement("h1",null,"‚ö†Ô∏è Critical Error"),e.createElement("p",null,"Multiple errors detected. Please refresh the page."),e.createElement("button",{onClick:()=>window.location.reload(),className:"btn-reload"},"Refresh Page"))):e.createElement("div",{className:"error-boundary"},e.createElement("div",{className:"error-content"},e.createElement("div",{className:"error-icon"},"üòï"),e.createElement("h1",null,"Oops! Something went wrong"),e.createElement("p",{className:"error-message"},this.props.fallbackMessage||"We're sorry for the inconvenience. The error has been reported."),!1,e.createElement("div",{className:"error-actions"},e.createElement("button",{onClick:this.handleReset,className:"btn-retry"},"Try Again"),e.createElement("button",{onClick:()=>window.location.href="/",className:"btn-home"},"Go Home")))):this.props.children}},Kr=null;function Ml(){return Kr||(Kr=document.createElement("div"),Kr.id="toast-container",Kr.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        `,document.body.appendChild(Kr)),Kr}function bo(f,i="info",n=3e3){const s=Ml(),d=document.createElement("div");d.className=`toast toast-${i}`;let x="‚ÑπÔ∏è",B="#3b82f6";switch(i){case"success":x="‚úÖ",B="#10b981";break;case"error":x="‚ùå",B="#ef4444";break;case"warning":x="‚ö†Ô∏è",B="#f59e0b";break;case"info":x="‚ÑπÔ∏è",B="#3b82f6";break}d.style.cssText=`
        background: ${B};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 300px;
        max-width: 500px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 14px;
        pointer-events: all;
        animation: slideIn 0.3s ease-out;
        transition: opacity 0.3s ease-out;
    `,d.innerHTML=`
        <span style="font-size: 20px;">${x}</span>
        <span style="flex: 1;">${f}</span>
        <button onclick="this.parentElement.remove()" style="
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
           onmouseout="this.style.background='rgba(255,255,255,0.2)'">√ó</button>
    `,s.appendChild(d);const b=document.createElement("style");b.textContent=`
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    `,document.getElementById("toast-styles")||(b.id="toast-styles",document.head.appendChild(b)),setTimeout(()=>{d.style.animation="slideOut 0.3s ease-out",setTimeout(()=>d.remove(),300)},n)}const ie={success:(f,i)=>bo(f,"success",i),error:(f,i)=>bo(f,"error",i),warning:(f,i)=>bo(f,"warning",i),info:(f,i)=>bo(f,"info",i)};typeof window<"u"&&(window.toast=ie,window.showToast=bo);const Ul=async()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.toLowerCase().includes("electron")||window.location?.protocol==="file:"))return console.log("‚ö†Ô∏è [PWA] Service Worker disabled in Electron (file:// protocol)"),null;if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("‚úÖ Service Worker registered:",i.scope),i.addEventListener("updatefound",()=>{const n=i.installing;console.log("üîÑ New Service Worker installing..."),n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&Vl()})}),setInterval(()=>{i.update()},3600*1e3),i}catch(i){return console.error("‚ùå Service Worker registration failed:",i),null}},Vl=()=>{console.log("‚ÑπÔ∏è Yeni versiyon mevcut - UI g√ºncelleme butonu aktif")},Nl=()=>{window.addEventListener("beforeinstallprompt",f=>{f.preventDefault();const i=document.getElementById("install-pwa-button");i&&(i.style.display="block"),console.log("üì± PWA install prompt ready")}),window.addEventListener("appinstalled",()=>{console.log("‚úÖ PWA installed successfully"),window.gtag&&window.gtag("event","pwa_installed",{event_category:"PWA",event_label:"App Installed"})})},Wl=(f,i)=>{const n=()=>{console.log("‚úÖ Network: Online"),f&&f(),Gs("üü¢ √áevrimi√ßi","success")},s=()=>{console.log("‚ùå Network: Offline"),i&&i(),Gs("üî¥ √áevrimdƒ±≈üƒ± - Baƒülantƒ± koptu","error")};return window.addEventListener("online",n),window.addEventListener("offline",s),navigator.onLine||s(),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}},Gs=(f,i="info")=>{const n=document.getElementById("network-banner");n&&n.remove();const s=document.createElement("div");s.id="network-banner",s.textContent=f,s.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        padding: 12px;
        text-align: center;
        color: white;
        font-weight: 600;
        z-index: 9999;
        animation: slideDown 0.3s ease;
        background: ${i==="success"?"#43b581":"#ed4245"};
    `,document.body.appendChild(s),i==="success"&&setTimeout(()=>{s.style.animation="slideUp 0.3s ease",setTimeout(()=>s.remove(),300)},3e3)},Hl=()=>{const f=document.createElement("style");f.textContent=`
        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }
    `,document.head.appendChild(f)};Hl();const jl=`
/* üé® PAWSCORD Critical CSS - Above the Fold */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #1e1f22;
    color: #dcddde;
    overflow: hidden;
}

/* Loading Screen */
#loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #1e1f22;
    display: flex;
    align-items: center;
    justify-center: center;
    z-index: 9999;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #40444b;
    border-top-color: #5865f2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Main Layout */
#root {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.app-container {
    display: flex;
    width: 100%;
    height: 100%;
}

/* Sidebar */
.sidebar {
    width: 240px;
    background: #2b2d31;
    flex-shrink: 0;
}

/* Chat Area */
.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #313338;
}

/* Message Input - Critical */
.message-input-container {
    padding: 16px;
    background: #383a40;
}

.message-input {
    width: 100%;
    padding: 12px;
    background: #40444b;
    border: none;
    border-radius: 8px;
    color: #dcddde;
    font-size: 15px;
    outline: none;
}

/* Button Base */
button {
    cursor: pointer;
    border: none;
    background: transparent;
    color: inherit;
    font-family: inherit;
}

.btn-primary {
    background: #5865f2;
    color: white;
    padding: 10px 16px;
    border-radius: 4px;
    font-weight: 500;
    transition: background 0.17s ease;
}

.btn-primary:hover {
    background: #4752c4;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #2b2d31;
}

::-webkit-scrollbar-thumb {
    background: #1a1b1e;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #141517;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
}

/* Utilities */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.gap-2 {
    gap: 8px;
}

.gap-4 {
    gap: 16px;
}

.hidden {
    display: none !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: absolute;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .sidebar.open {
        transform: translateX(0);
    }
}
`,Gl=()=>{const f=document.createElement("style");f.id="critical-css",f.textContent=jl,document.head.insertBefore(f,document.head.firstChild),console.log("‚úÖ Critical CSS inlined")},ql=f=>new Promise((i,n)=>{const s=document.createElement("link");s.rel="stylesheet",s.href=f,s.onload=()=>{console.log(`‚úÖ Lazy loaded CSS: ${f}`),i()},s.onerror=n,document.head.appendChild(s)}),Kl=()=>{const f=[],i=()=>{f.forEach(n=>{ql(n)})};"requestIdleCallback"in window?requestIdleCallback(i):setTimeout(i,1)},Yl=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ö° [Performance] Electron'da font preload atlandƒ±");return}console.log("‚ö° [Performance] Font preload atlandƒ± - system fonts kullanƒ±lƒ±yor")},Jl=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ÑπÔ∏è Preload skipped: Electron detected");return}console.log("‚úÖ Key resources preloaded")},qs=()=>{const f=document.getElementById("critical-css");f&&setTimeout(()=>{f.remove(),console.log("üóëÔ∏è Critical CSS removed (full CSS loaded)")},1e3)},Xl=()=>{Gl(),Jl(),Yl(),Kl(),document.readyState==="complete"?qs():window.addEventListener("load",qs)},Nn={serverSettings:()=>M(()=>import("./ServerSettingsModal-Dps1Dkhr.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url),userProfile:()=>M(()=>import("./UserProfileModal-DS19IvL0.js"),__vite__mapDeps([6,1,2]),import.meta.url),imageModal:()=>M(()=>import("./ImageModal-D3SYcdf2.js"),__vite__mapDeps([7,1,2]),import.meta.url),gifPicker:()=>M(()=>import("./GifPicker-gsWNwcjc.js"),__vite__mapDeps([8,1,2]),import.meta.url),stickerPicker:()=>M(()=>import("./StickerPicker-0zWuRBR9.js"),__vite__mapDeps([9,1,2]),import.meta.url),soundboard:()=>M(()=>import("./SoundboardModal-BeheTWGf.js"),__vite__mapDeps([10,1,2]),import.meta.url),watchParty:()=>M(()=>import("./WatchPartyEnhanced-B0aiLN2Q.js"),__vite__mapDeps([11,1,2]),import.meta.url),cinema:()=>M(()=>import("./CinemaModal-o6LCVkTH.js"),__vite__mapDeps([12,1,2]),import.meta.url),whiteboard:()=>M(()=>import("./WhiteboardModal-z3l5oI_3.js"),__vite__mapDeps([13,1,2]),import.meta.url),poll:()=>M(()=>import("./PollCreateModal-0S2RMmxJ.js"),__vite__mapDeps([14,1,2]),import.meta.url),codeSnippet:()=>M(()=>import("./CodeSnippetModal-CUmfv3IH.js"),__vite__mapDeps([15,1,2]),import.meta.url),messageTemplate:()=>M(()=>import("./MessageTemplateModal-CucOC7KI.js"),__vite__mapDeps([16,1,2]),import.meta.url)},Ki=()=>{const f=[Nn.userProfile,Nn.imageModal];setTimeout(()=>{f.forEach(i=>i())},3e3)},Fa=()=>{"requestIdleCallback"in window&&requestIdleCallback(()=>{Nn.gifPicker(),Nn.stickerPicker()})},Ra={default:{name:"Pawscord Dark",colors:{"--background-primary":"#313338","--background-secondary":"#2b2d31","--background-tertiary":"#1e1f22","--background-accent":"#404249","--text-primary":"#dbdee1","--text-secondary":"#949ba4","--text-muted":"#787f89","--text-link":"#00a8fc","--button-primary":"#5865f2","--button-secondary":"#4e5058","--border-primary":"#1f2023"}},midnight:{name:"Midnight AMOLED",colors:{"--background-primary":"#000000","--background-secondary":"#0a0a0a","--background-tertiary":"#111111","--background-accent":"#222222","--text-primary":"#ffffff","--text-secondary":"#b0b0b0","--text-muted":"#666666","--text-link":"#3ea6ff","--button-primary":"#3ea6ff","--button-secondary":"#333333","--border-primary":"#333333"}},dracula:{name:"Dracula",colors:{"--background-primary":"#282a36","--background-secondary":"#44475a","--background-tertiary":"#6272a4","--background-accent":"#44475a","--text-primary":"#f8f8f2","--text-secondary":"#bfbfbf","--text-muted":"#6272a4","--text-link":"#8be9fd","--button-primary":"#bd93f9","--button-secondary":"#44475a","--border-primary":"#44475a"}},ocean:{name:"Deep Ocean",colors:{"--background-primary":"#0f172a","--background-secondary":"#1e293b","--background-tertiary":"#334155","--background-accent":"#334155","--text-primary":"#e2e8f0","--text-secondary":"#94a3b8","--text-muted":"#64748b","--text-link":"#38bdf8","--button-primary":"#0ea5e9","--button-secondary":"#334155","--border-primary":"#1e293b"}},forest:{name:"Enchanted Forest",colors:{"--background-primary":"#1a2f1a","--background-secondary":"#243b24","--background-tertiary":"#2f4b2f","--background-accent":"#3a5a3a","--text-primary":"#e0ffe0","--text-secondary":"#a0cca0","--text-muted":"#608060","--text-link":"#4caf50","--button-primary":"#4caf50","--button-secondary":"#2f4b2f","--border-primary":"#2f4b2f"}},matrix:{name:"The Matrix",colors:{"--background-primary":"#0d0d0d","--background-secondary":"#121212","--background-tertiary":"#1a1a1a","--background-accent":"#003b00","--text-primary":"#00ff41","--text-secondary":"#008f11","--text-muted":"#003b00","--text-link":"#00ff41","--button-primary":"#008f11","--button-secondary":"#003b00","--border-primary":"#003b00"}},sunset:{name:"Sunset Vibes",colors:{"--background-primary":"#2d1b2e","--background-secondary":"#442740","--background-tertiary":"#5a3450","--background-accent":"#734361","--text-primary":"#ffccaa","--text-secondary":"#ff9e7d","--text-muted":"#b05963","--text-link":"#ffbd69","--button-primary":"#ff6b6b","--button-secondary":"#5a3450","--border-primary":"#5a3450"}}},Zl=f=>{const i=Ra[f]||Ra.default,n=document.documentElement;Object.entries(i.colors).forEach(([s,d])=>{n.style.setProperty(s,d)}),localStorage.setItem("pawscord_theme",f)},Ql=()=>{const f=localStorage.getItem("pawscord_theme");return f&&Ra[f]?(Zl(f),f):"default"},Ks=f=>{let i;const n=new Set,s=(m,y)=>{const A=typeof m=="function"?m(i):m;if(!Object.is(A,i)){const g=i;i=y??(typeof A!="object"||A===null)?A:Object.assign({},i,A),n.forEach(k=>k(i,g))}},d=()=>i,b={setState:s,getState:d,getInitialState:()=>S,subscribe:m=>(n.add(m),()=>n.delete(m))},S=i=f(s,d,b);return b},ed=(f=>f?Ks(f):Ks),td=f=>f;function rd(f,i=td){const n=e.useSyncExternalStore(f.subscribe,e.useCallback(()=>i(f.getState()),[f,i]),e.useCallback(()=>i(f.getInitialState()),[f,i]));return e.useDebugValue(n),n}const Ys=f=>{const i=ed(f),n=s=>rd(i,s);return Object.assign(n,i),n},od=(f=>f?Ys(f):Ys),He=od((f,i)=>({messages:[],encryptionKeys:{},activeChat:{type:"welcome",id:"welcome",targetUser:null},unreadCounts:{},typingUsers:[],onlineUsers:[],voiceUsers:{},currentPermissions:{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1},setActiveChat:(n,s,d=null)=>{console.log("üîÑ [Store] setActiveChat called:",{type:n,id:s,targetUser:d}),console.log("üîÑ [Store] Current messages count:",i().messages.length),f({activeChat:{type:n,id:s,targetUser:d}});const x=n==="room"?`room-${s}`:`dm-${s}`;f(B=>{const b={...B.unreadCounts};return delete b[x],{unreadCounts:b}})},addMessage:n=>f(s=>!n||typeof n!="object"||!n.id?(console.warn("‚ö†Ô∏è [Store] Invalid message rejected:",n),s):n.temp_id&&s.messages.some(x=>x.temp_id===n.temp_id)?{messages:s.messages.map(x=>x.temp_id===n.temp_id?n:x)}:s.messages.some(d=>d.id===n.id)?s:{messages:[...s.messages,n]}),updateMessage:(n,s)=>f(d=>({messages:d.messages.map(x=>x.id===n?{...x,...s}:x)})),setMessages:n=>f(s=>{const d=typeof n=="function"?n(s.messages):n;return{messages:Array.isArray(d)?d.filter(B=>B&&typeof B=="object"&&B.id):[]}}),prependMessages:n=>f(s=>({messages:[...n,...s.messages]})),incrementUnread:n=>f(s=>({unreadCounts:{...s.unreadCounts,[n]:(s.unreadCounts[n]||0)+1}})),setOnlineUsers:n=>f({onlineUsers:n}),setTypingUser:(n,s)=>f(d=>s?{typingUsers:d.typingUsers.includes(n)?d.typingUsers:[...d.typingUsers,n]}:{typingUsers:d.typingUsers.filter(x=>x!==n)}),setVoiceUsers:n=>f({voiceUsers:n}),setEncryptionKey:(n,s)=>f(d=>({encryptionKeys:{...d.encryptionKeys,[n]:s}})),setPermissions:n=>f({currentPermissions:n||{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1}})}));var an={exports:{}};function nd(f){throw new Error('Could not dynamically require "'+f+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sn={exports:{}};const ad={},sd=Object.freeze(Object.defineProperty({__proto__:null,default:ad},Symbol.toStringTag,{value:"Module"})),id=Jc(sd);var cd=sn.exports,Js;function ve(){return Js||(Js=1,(function(f,i){(function(n,s){f.exports=s()})(cd,function(){var n=n||(function(s,d){var x;if(typeof window<"u"&&window.crypto&&(x=window.crypto),typeof self<"u"&&self.crypto&&(x=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(x=globalThis.crypto),!x&&typeof window<"u"&&window.msCrypto&&(x=window.msCrypto),!x&&typeof Ca<"u"&&Ca.crypto&&(x=Ca.crypto),!x&&typeof nd=="function")try{x=id}catch{}var B=function(){if(x){if(typeof x.getRandomValues=="function")try{return x.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof x.randomBytes=="function")try{return x.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},b=Object.create||(function(){function c(){}return function(r){var o;return c.prototype=r,o=new c,c.prototype=null,o}})(),S={},m=S.lib={},y=m.Base=(function(){return{extend:function(c){var r=b(this);return c&&r.mixIn(c),(!r.hasOwnProperty("init")||this.init===r.init)&&(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var r in c)c.hasOwnProperty(r)&&(this[r]=c[r]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),A=m.WordArray=y.extend({init:function(c,r){c=this.words=c||[],r!=d?this.sigBytes=r:this.sigBytes=c.length*4},toString:function(c){return(c||k).stringify(this)},concat:function(c){var r=this.words,o=c.words,u=this.sigBytes,l=c.sigBytes;if(this.clamp(),u%4)for(var P=0;P<l;P++){var L=o[P>>>2]>>>24-P%4*8&255;r[u+P>>>2]|=L<<24-(u+P)%4*8}else for(var q=0;q<l;q+=4)r[u+q>>>2]=o[q>>>2];return this.sigBytes+=l,this},clamp:function(){var c=this.words,r=this.sigBytes;c[r>>>2]&=4294967295<<32-r%4*8,c.length=s.ceil(r/4)},clone:function(){var c=y.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var r=[],o=0;o<c;o+=4)r.push(B());return new A.init(r,c)}}),g=S.enc={},k=g.Hex={stringify:function(c){for(var r=c.words,o=c.sigBytes,u=[],l=0;l<o;l++){var P=r[l>>>2]>>>24-l%4*8&255;u.push((P>>>4).toString(16)),u.push((P&15).toString(16))}return u.join("")},parse:function(c){for(var r=c.length,o=[],u=0;u<r;u+=2)o[u>>>3]|=parseInt(c.substr(u,2),16)<<24-u%8*4;return new A.init(o,r/2)}},w=g.Latin1={stringify:function(c){for(var r=c.words,o=c.sigBytes,u=[],l=0;l<o;l++){var P=r[l>>>2]>>>24-l%4*8&255;u.push(String.fromCharCode(P))}return u.join("")},parse:function(c){for(var r=c.length,o=[],u=0;u<r;u++)o[u>>>2]|=(c.charCodeAt(u)&255)<<24-u%4*8;return new A.init(o,r)}},C=g.Utf8={stringify:function(c){try{return decodeURIComponent(escape(w.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return w.parse(unescape(encodeURIComponent(c)))}},v=m.BufferedBlockAlgorithm=y.extend({reset:function(){this._data=new A.init,this._nDataBytes=0},_append:function(c){typeof c=="string"&&(c=C.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var r,o=this._data,u=o.words,l=o.sigBytes,P=this.blockSize,L=P*4,q=l/L;c?q=s.ceil(q):q=s.max((q|0)-this._minBufferSize,0);var F=q*P,U=s.min(F*4,l);if(F){for(var V=0;V<F;V+=P)this._doProcessBlock(u,V);r=u.splice(0,F),o.sigBytes-=U}return new A.init(r,U)},clone:function(){var c=y.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0});m.Hasher=v.extend({cfg:y.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){c&&this._append(c);var r=this._doFinalize();return r},blockSize:16,_createHelper:function(c){return function(r,o){return new c.init(o).finalize(r)}},_createHmacHelper:function(c){return function(r,o){return new h.HMAC.init(c,o).finalize(r)}}});var h=S.algo={};return S})(Math);return n})})(sn)),sn.exports}var cn={exports:{}},ld=cn.exports,Xs;function Gn(){return Xs||(Xs=1,(function(f,i){(function(n,s){f.exports=s(ve())})(ld,function(n){return(function(s){var d=n,x=d.lib,B=x.Base,b=x.WordArray,S=d.x64={};S.Word=B.extend({init:function(m,y){this.high=m,this.low=y}}),S.WordArray=B.extend({init:function(m,y){m=this.words=m||[],y!=s?this.sigBytes=y:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,y=m.length,A=[],g=0;g<y;g++){var k=m[g];A.push(k.high),A.push(k.low)}return b.create(A,this.sigBytes)},clone:function(){for(var m=B.clone.call(this),y=m.words=this.words.slice(0),A=y.length,g=0;g<A;g++)y[g]=y[g].clone();return m}})})(),n})})(cn)),cn.exports}var ln={exports:{}},dd=ln.exports,Zs;function ud(){return Zs||(Zs=1,(function(f,i){(function(n,s){f.exports=s(ve())})(dd,function(n){return(function(){if(typeof ArrayBuffer=="function"){var s=n,d=s.lib,x=d.WordArray,B=x.init,b=x.init=function(S){if(S instanceof ArrayBuffer&&(S=new Uint8Array(S)),(S instanceof Int8Array||typeof Uint8ClampedArray<"u"&&S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array)&&(S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength)),S instanceof Uint8Array){for(var m=S.byteLength,y=[],A=0;A<m;A++)y[A>>>2]|=S[A]<<24-A%4*8;B.call(this,y,m)}else B.apply(this,arguments)};b.prototype=x}})(),n.lib.WordArray})})(ln)),ln.exports}var dn={exports:{}},fd=dn.exports,Qs;function md(){return Qs||(Qs=1,(function(f,i){(function(n,s){f.exports=s(ve())})(fd,function(n){return(function(){var s=n,d=s.lib,x=d.WordArray,B=s.enc;B.Utf16=B.Utf16BE={stringify:function(S){for(var m=S.words,y=S.sigBytes,A=[],g=0;g<y;g+=2){var k=m[g>>>2]>>>16-g%4*8&65535;A.push(String.fromCharCode(k))}return A.join("")},parse:function(S){for(var m=S.length,y=[],A=0;A<m;A++)y[A>>>1]|=S.charCodeAt(A)<<16-A%2*16;return x.create(y,m*2)}},B.Utf16LE={stringify:function(S){for(var m=S.words,y=S.sigBytes,A=[],g=0;g<y;g+=2){var k=b(m[g>>>2]>>>16-g%4*8&65535);A.push(String.fromCharCode(k))}return A.join("")},parse:function(S){for(var m=S.length,y=[],A=0;A<m;A++)y[A>>>1]|=b(S.charCodeAt(A)<<16-A%2*16);return x.create(y,m*2)}};function b(S){return S<<8&4278255360|S>>>8&16711935}})(),n.enc.Utf16})})(dn)),dn.exports}var un={exports:{}},pd=un.exports,ei;function Br(){return ei||(ei=1,(function(f,i){(function(n,s){f.exports=s(ve())})(pd,function(n){return(function(){var s=n,d=s.lib,x=d.WordArray,B=s.enc;B.Base64={stringify:function(S){var m=S.words,y=S.sigBytes,A=this._map;S.clamp();for(var g=[],k=0;k<y;k+=3)for(var w=m[k>>>2]>>>24-k%4*8&255,C=m[k+1>>>2]>>>24-(k+1)%4*8&255,v=m[k+2>>>2]>>>24-(k+2)%4*8&255,h=w<<16|C<<8|v,c=0;c<4&&k+c*.75<y;c++)g.push(A.charAt(h>>>6*(3-c)&63));var r=A.charAt(64);if(r)for(;g.length%4;)g.push(r);return g.join("")},parse:function(S){var m=S.length,y=this._map,A=this._reverseMap;if(!A){A=this._reverseMap=[];for(var g=0;g<y.length;g++)A[y.charCodeAt(g)]=g}var k=y.charAt(64);if(k){var w=S.indexOf(k);w!==-1&&(m=w)}return b(S,m,A)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function b(S,m,y){for(var A=[],g=0,k=0;k<m;k++)if(k%4){var w=y[S.charCodeAt(k-1)]<<k%4*2,C=y[S.charCodeAt(k)]>>>6-k%4*2,v=w|C;A[g>>>2]|=v<<24-g%4*8,g++}return x.create(A,g)}})(),n.enc.Base64})})(un)),un.exports}var fn={exports:{}},xd=fn.exports,ti;function hd(){return ti||(ti=1,(function(f,i){(function(n,s){f.exports=s(ve())})(xd,function(n){return(function(){var s=n,d=s.lib,x=d.WordArray,B=s.enc;B.Base64url={stringify:function(S,m){m===void 0&&(m=!0);var y=S.words,A=S.sigBytes,g=m?this._safe_map:this._map;S.clamp();for(var k=[],w=0;w<A;w+=3)for(var C=y[w>>>2]>>>24-w%4*8&255,v=y[w+1>>>2]>>>24-(w+1)%4*8&255,h=y[w+2>>>2]>>>24-(w+2)%4*8&255,c=C<<16|v<<8|h,r=0;r<4&&w+r*.75<A;r++)k.push(g.charAt(c>>>6*(3-r)&63));var o=g.charAt(64);if(o)for(;k.length%4;)k.push(o);return k.join("")},parse:function(S,m){m===void 0&&(m=!0);var y=S.length,A=m?this._safe_map:this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var k=0;k<A.length;k++)g[A.charCodeAt(k)]=k}var w=A.charAt(64);if(w){var C=S.indexOf(w);C!==-1&&(y=C)}return b(S,y,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function b(S,m,y){for(var A=[],g=0,k=0;k<m;k++)if(k%4){var w=y[S.charCodeAt(k-1)]<<k%4*2,C=y[S.charCodeAt(k)]>>>6-k%4*2,v=w|C;A[g>>>2]|=v<<24-g%4*8,g++}return x.create(A,g)}})(),n.enc.Base64url})})(fn)),fn.exports}var mn={exports:{}},gd=mn.exports,ri;function Dr(){return ri||(ri=1,(function(f,i){(function(n,s){f.exports=s(ve())})(gd,function(n){return(function(s){var d=n,x=d.lib,B=x.WordArray,b=x.Hasher,S=d.algo,m=[];(function(){for(var C=0;C<64;C++)m[C]=s.abs(s.sin(C+1))*4294967296|0})();var y=S.MD5=b.extend({_doReset:function(){this._hash=new B.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(C,v){for(var h=0;h<16;h++){var c=v+h,r=C[c];C[c]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360}var o=this._hash.words,u=C[v+0],l=C[v+1],P=C[v+2],L=C[v+3],q=C[v+4],F=C[v+5],U=C[v+6],V=C[v+7],j=C[v+8],re=C[v+9],ne=C[v+10],de=C[v+11],he=C[v+12],ue=C[v+13],ge=C[v+14],be=C[v+15],p=o[0],J=o[1],X=o[2],Y=o[3];p=A(p,J,X,Y,u,7,m[0]),Y=A(Y,p,J,X,l,12,m[1]),X=A(X,Y,p,J,P,17,m[2]),J=A(J,X,Y,p,L,22,m[3]),p=A(p,J,X,Y,q,7,m[4]),Y=A(Y,p,J,X,F,12,m[5]),X=A(X,Y,p,J,U,17,m[6]),J=A(J,X,Y,p,V,22,m[7]),p=A(p,J,X,Y,j,7,m[8]),Y=A(Y,p,J,X,re,12,m[9]),X=A(X,Y,p,J,ne,17,m[10]),J=A(J,X,Y,p,de,22,m[11]),p=A(p,J,X,Y,he,7,m[12]),Y=A(Y,p,J,X,ue,12,m[13]),X=A(X,Y,p,J,ge,17,m[14]),J=A(J,X,Y,p,be,22,m[15]),p=g(p,J,X,Y,l,5,m[16]),Y=g(Y,p,J,X,U,9,m[17]),X=g(X,Y,p,J,de,14,m[18]),J=g(J,X,Y,p,u,20,m[19]),p=g(p,J,X,Y,F,5,m[20]),Y=g(Y,p,J,X,ne,9,m[21]),X=g(X,Y,p,J,be,14,m[22]),J=g(J,X,Y,p,q,20,m[23]),p=g(p,J,X,Y,re,5,m[24]),Y=g(Y,p,J,X,ge,9,m[25]),X=g(X,Y,p,J,L,14,m[26]),J=g(J,X,Y,p,j,20,m[27]),p=g(p,J,X,Y,ue,5,m[28]),Y=g(Y,p,J,X,P,9,m[29]),X=g(X,Y,p,J,V,14,m[30]),J=g(J,X,Y,p,he,20,m[31]),p=k(p,J,X,Y,F,4,m[32]),Y=k(Y,p,J,X,j,11,m[33]),X=k(X,Y,p,J,de,16,m[34]),J=k(J,X,Y,p,ge,23,m[35]),p=k(p,J,X,Y,l,4,m[36]),Y=k(Y,p,J,X,q,11,m[37]),X=k(X,Y,p,J,V,16,m[38]),J=k(J,X,Y,p,ne,23,m[39]),p=k(p,J,X,Y,ue,4,m[40]),Y=k(Y,p,J,X,u,11,m[41]),X=k(X,Y,p,J,L,16,m[42]),J=k(J,X,Y,p,U,23,m[43]),p=k(p,J,X,Y,re,4,m[44]),Y=k(Y,p,J,X,he,11,m[45]),X=k(X,Y,p,J,be,16,m[46]),J=k(J,X,Y,p,P,23,m[47]),p=w(p,J,X,Y,u,6,m[48]),Y=w(Y,p,J,X,V,10,m[49]),X=w(X,Y,p,J,ge,15,m[50]),J=w(J,X,Y,p,F,21,m[51]),p=w(p,J,X,Y,he,6,m[52]),Y=w(Y,p,J,X,L,10,m[53]),X=w(X,Y,p,J,ne,15,m[54]),J=w(J,X,Y,p,l,21,m[55]),p=w(p,J,X,Y,j,6,m[56]),Y=w(Y,p,J,X,be,10,m[57]),X=w(X,Y,p,J,U,15,m[58]),J=w(J,X,Y,p,ue,21,m[59]),p=w(p,J,X,Y,q,6,m[60]),Y=w(Y,p,J,X,de,10,m[61]),X=w(X,Y,p,J,P,15,m[62]),J=w(J,X,Y,p,re,21,m[63]),o[0]=o[0]+p|0,o[1]=o[1]+J|0,o[2]=o[2]+X|0,o[3]=o[3]+Y|0},_doFinalize:function(){var C=this._data,v=C.words,h=this._nDataBytes*8,c=C.sigBytes*8;v[c>>>5]|=128<<24-c%32;var r=s.floor(h/4294967296),o=h;v[(c+64>>>9<<4)+15]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,v[(c+64>>>9<<4)+14]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,C.sigBytes=(v.length+1)*4,this._process();for(var u=this._hash,l=u.words,P=0;P<4;P++){var L=l[P];l[P]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return u},clone:function(){var C=b.clone.call(this);return C._hash=this._hash.clone(),C}});function A(C,v,h,c,r,o,u){var l=C+(v&h|~v&c)+r+u;return(l<<o|l>>>32-o)+v}function g(C,v,h,c,r,o,u){var l=C+(v&c|h&~c)+r+u;return(l<<o|l>>>32-o)+v}function k(C,v,h,c,r,o,u){var l=C+(v^h^c)+r+u;return(l<<o|l>>>32-o)+v}function w(C,v,h,c,r,o,u){var l=C+(h^(v|~c))+r+u;return(l<<o|l>>>32-o)+v}d.MD5=b._createHelper(y),d.HmacMD5=b._createHmacHelper(y)})(Math),n.MD5})})(mn)),mn.exports}var pn={exports:{}},yd=pn.exports,oi;function Yi(){return oi||(oi=1,(function(f,i){(function(n,s){f.exports=s(ve())})(yd,function(n){return(function(){var s=n,d=s.lib,x=d.WordArray,B=d.Hasher,b=s.algo,S=[],m=b.SHA1=B.extend({_doReset:function(){this._hash=new x.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(y,A){for(var g=this._hash.words,k=g[0],w=g[1],C=g[2],v=g[3],h=g[4],c=0;c<80;c++){if(c<16)S[c]=y[A+c]|0;else{var r=S[c-3]^S[c-8]^S[c-14]^S[c-16];S[c]=r<<1|r>>>31}var o=(k<<5|k>>>27)+h+S[c];c<20?o+=(w&C|~w&v)+1518500249:c<40?o+=(w^C^v)+1859775393:c<60?o+=(w&C|w&v|C&v)-1894007588:o+=(w^C^v)-899497514,h=v,v=C,C=w<<30|w>>>2,w=k,k=o}g[0]=g[0]+k|0,g[1]=g[1]+w|0,g[2]=g[2]+C|0,g[3]=g[3]+v|0,g[4]=g[4]+h|0},_doFinalize:function(){var y=this._data,A=y.words,g=this._nDataBytes*8,k=y.sigBytes*8;return A[k>>>5]|=128<<24-k%32,A[(k+64>>>9<<4)+14]=Math.floor(g/4294967296),A[(k+64>>>9<<4)+15]=g,y.sigBytes=A.length*4,this._process(),this._hash},clone:function(){var y=B.clone.call(this);return y._hash=this._hash.clone(),y}});s.SHA1=B._createHelper(m),s.HmacSHA1=B._createHmacHelper(m)})(),n.SHA1})})(pn)),pn.exports}var xn={exports:{}},vd=xn.exports,ni;function Ma(){return ni||(ni=1,(function(f,i){(function(n,s){f.exports=s(ve())})(vd,function(n){return(function(s){var d=n,x=d.lib,B=x.WordArray,b=x.Hasher,S=d.algo,m=[],y=[];(function(){function k(h){for(var c=s.sqrt(h),r=2;r<=c;r++)if(!(h%r))return!1;return!0}function w(h){return(h-(h|0))*4294967296|0}for(var C=2,v=0;v<64;)k(C)&&(v<8&&(m[v]=w(s.pow(C,1/2))),y[v]=w(s.pow(C,1/3)),v++),C++})();var A=[],g=S.SHA256=b.extend({_doReset:function(){this._hash=new B.init(m.slice(0))},_doProcessBlock:function(k,w){for(var C=this._hash.words,v=C[0],h=C[1],c=C[2],r=C[3],o=C[4],u=C[5],l=C[6],P=C[7],L=0;L<64;L++){if(L<16)A[L]=k[w+L]|0;else{var q=A[L-15],F=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,U=A[L-2],V=(U<<15|U>>>17)^(U<<13|U>>>19)^U>>>10;A[L]=F+A[L-7]+V+A[L-16]}var j=o&u^~o&l,re=v&h^v&c^h&c,ne=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),de=(o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25),he=P+de+j+y[L]+A[L],ue=ne+re;P=l,l=u,u=o,o=r+he|0,r=c,c=h,h=v,v=he+ue|0}C[0]=C[0]+v|0,C[1]=C[1]+h|0,C[2]=C[2]+c|0,C[3]=C[3]+r|0,C[4]=C[4]+o|0,C[5]=C[5]+u|0,C[6]=C[6]+l|0,C[7]=C[7]+P|0},_doFinalize:function(){var k=this._data,w=k.words,C=this._nDataBytes*8,v=k.sigBytes*8;return w[v>>>5]|=128<<24-v%32,w[(v+64>>>9<<4)+14]=s.floor(C/4294967296),w[(v+64>>>9<<4)+15]=C,k.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var k=b.clone.call(this);return k._hash=this._hash.clone(),k}});d.SHA256=b._createHelper(g),d.HmacSHA256=b._createHmacHelper(g)})(Math),n.SHA256})})(xn)),xn.exports}var hn={exports:{}},Ed=hn.exports,ai;function bd(){return ai||(ai=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Ma())})(Ed,function(n){return(function(){var s=n,d=s.lib,x=d.WordArray,B=s.algo,b=B.SHA256,S=B.SHA224=b.extend({_doReset:function(){this._hash=new x.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=b._doFinalize.call(this);return m.sigBytes-=4,m}});s.SHA224=b._createHelper(S),s.HmacSHA224=b._createHmacHelper(S)})(),n.SHA224})})(hn)),hn.exports}var gn={exports:{}},_d=gn.exports,si;function Ji(){return si||(si=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Gn())})(_d,function(n){return(function(){var s=n,d=s.lib,x=d.Hasher,B=s.x64,b=B.Word,S=B.WordArray,m=s.algo;function y(){return b.create.apply(b,arguments)}var A=[y(1116352408,3609767458),y(1899447441,602891725),y(3049323471,3964484399),y(3921009573,2173295548),y(961987163,4081628472),y(1508970993,3053834265),y(2453635748,2937671579),y(2870763221,3664609560),y(3624381080,2734883394),y(310598401,1164996542),y(607225278,1323610764),y(1426881987,3590304994),y(1925078388,4068182383),y(2162078206,991336113),y(2614888103,633803317),y(3248222580,3479774868),y(3835390401,2666613458),y(4022224774,944711139),y(264347078,2341262773),y(604807628,2007800933),y(770255983,1495990901),y(1249150122,1856431235),y(1555081692,3175218132),y(1996064986,2198950837),y(2554220882,3999719339),y(2821834349,766784016),y(2952996808,2566594879),y(3210313671,3203337956),y(3336571891,1034457026),y(3584528711,2466948901),y(113926993,3758326383),y(338241895,168717936),y(666307205,1188179964),y(773529912,1546045734),y(1294757372,1522805485),y(1396182291,2643833823),y(1695183700,2343527390),y(1986661051,1014477480),y(2177026350,1206759142),y(2456956037,344077627),y(2730485921,1290863460),y(2820302411,3158454273),y(3259730800,3505952657),y(3345764771,106217008),y(3516065817,3606008344),y(3600352804,1432725776),y(4094571909,1467031594),y(275423344,851169720),y(430227734,3100823752),y(506948616,1363258195),y(659060556,3750685593),y(883997877,3785050280),y(958139571,3318307427),y(1322822218,3812723403),y(1537002063,2003034995),y(1747873779,3602036899),y(1955562222,1575990012),y(2024104815,1125592928),y(2227730452,2716904306),y(2361852424,442776044),y(2428436474,593698344),y(2756734187,3733110249),y(3204031479,2999351573),y(3329325298,3815920427),y(3391569614,3928383900),y(3515267271,566280711),y(3940187606,3454069534),y(4118630271,4000239992),y(116418474,1914138554),y(174292421,2731055270),y(289380356,3203993006),y(460393269,320620315),y(685471733,587496836),y(852142971,1086792851),y(1017036298,365543100),y(1126000580,2618297676),y(1288033470,3409855158),y(1501505948,4234509866),y(1607167915,987167468),y(1816402316,1246189591)],g=[];(function(){for(var w=0;w<80;w++)g[w]=y()})();var k=m.SHA512=x.extend({_doReset:function(){this._hash=new S.init([new b.init(1779033703,4089235720),new b.init(3144134277,2227873595),new b.init(1013904242,4271175723),new b.init(2773480762,1595750129),new b.init(1359893119,2917565137),new b.init(2600822924,725511199),new b.init(528734635,4215389547),new b.init(1541459225,327033209)])},_doProcessBlock:function(w,C){for(var v=this._hash.words,h=v[0],c=v[1],r=v[2],o=v[3],u=v[4],l=v[5],P=v[6],L=v[7],q=h.high,F=h.low,U=c.high,V=c.low,j=r.high,re=r.low,ne=o.high,de=o.low,he=u.high,ue=u.low,ge=l.high,be=l.low,p=P.high,J=P.low,X=L.high,Y=L.low,ke=q,ce=F,we=U,me=V,Ct=j,kt=re,lr=ne,Ot=de,qe=he,Oe=ue,zt=ge,Qe=be,qt=p,lt=J,dr=X,At=Y,et=0;et<80;et++){var Fe,at,dt=g[et];if(et<16)at=dt.high=w[C+et*2]|0,Fe=dt.low=w[C+et*2+1]|0;else{var Fr=g[et-15],tt=Fr.high,Mt=Fr.low,Rr=(tt>>>1|Mt<<31)^(tt>>>8|Mt<<24)^tt>>>7,Pr=(Mt>>>1|tt<<31)^(Mt>>>8|tt<<24)^(Mt>>>7|tt<<25),Te=g[et-2],te=Te.high,ut=Te.low,ur=(te>>>19|ut<<13)^(te<<3|ut>>>29)^te>>>6,Kt=(ut>>>19|te<<13)^(ut<<3|te>>>29)^(ut>>>6|te<<26),Ir=g[et-7],rt=Ir.high,Yt=Ir.low,ye=g[et-16],Lr=ye.high,fr=ye.low;Fe=Pr+Yt,at=Rr+rt+(Fe>>>0<Pr>>>0?1:0),Fe=Fe+Kt,at=at+ur+(Fe>>>0<Kt>>>0?1:0),Fe=Fe+fr,at=at+Lr+(Fe>>>0<fr>>>0?1:0),dt.high=at,dt.low=Fe}var Ut=qe&zt^~qe&qt,Bt=Oe&Qe^~Oe&lt,mr=ke&we^ke&Ct^we&Ct,$r=ce&me^ce&kt^me&kt,Ke=(ke>>>28|ce<<4)^(ke<<30|ce>>>2)^(ke<<25|ce>>>7),pr=(ce>>>28|ke<<4)^(ce<<30|ke>>>2)^(ce<<25|ke>>>7),xt=(qe>>>14|Oe<<18)^(qe>>>18|Oe<<14)^(qe<<23|Oe>>>9),xr=(Oe>>>14|qe<<18)^(Oe>>>18|qe<<14)^(Oe<<23|qe>>>9),ht=A[et],ft=ht.high,Vt=ht.low,Le=At+xr,se=dr+xt+(Le>>>0<At>>>0?1:0),Le=Le+Bt,se=se+Ut+(Le>>>0<Bt>>>0?1:0),Le=Le+Vt,se=se+ft+(Le>>>0<Vt>>>0?1:0),Le=Le+Fe,se=se+at+(Le>>>0<Fe>>>0?1:0),_e=pr+$r,gt=Ke+mr+(_e>>>0<pr>>>0?1:0);dr=qt,At=lt,qt=zt,lt=Qe,zt=qe,Qe=Oe,Oe=Ot+Le|0,qe=lr+se+(Oe>>>0<Ot>>>0?1:0)|0,lr=Ct,Ot=kt,Ct=we,kt=me,we=ke,me=ce,ce=Le+_e|0,ke=se+gt+(ce>>>0<Le>>>0?1:0)|0}F=h.low=F+ce,h.high=q+ke+(F>>>0<ce>>>0?1:0),V=c.low=V+me,c.high=U+we+(V>>>0<me>>>0?1:0),re=r.low=re+kt,r.high=j+Ct+(re>>>0<kt>>>0?1:0),de=o.low=de+Ot,o.high=ne+lr+(de>>>0<Ot>>>0?1:0),ue=u.low=ue+Oe,u.high=he+qe+(ue>>>0<Oe>>>0?1:0),be=l.low=be+Qe,l.high=ge+zt+(be>>>0<Qe>>>0?1:0),J=P.low=J+lt,P.high=p+qt+(J>>>0<lt>>>0?1:0),Y=L.low=Y+At,L.high=X+dr+(Y>>>0<At>>>0?1:0)},_doFinalize:function(){var w=this._data,C=w.words,v=this._nDataBytes*8,h=w.sigBytes*8;C[h>>>5]|=128<<24-h%32,C[(h+128>>>10<<5)+30]=Math.floor(v/4294967296),C[(h+128>>>10<<5)+31]=v,w.sigBytes=C.length*4,this._process();var c=this._hash.toX32();return c},clone:function(){var w=x.clone.call(this);return w._hash=this._hash.clone(),w},blockSize:1024/32});s.SHA512=x._createHelper(k),s.HmacSHA512=x._createHmacHelper(k)})(),n.SHA512})})(gn)),gn.exports}var yn={exports:{}},Sd=yn.exports,ii;function wd(){return ii||(ii=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Gn(),Ji())})(Sd,function(n){return(function(){var s=n,d=s.x64,x=d.Word,B=d.WordArray,b=s.algo,S=b.SHA512,m=b.SHA384=S.extend({_doReset:function(){this._hash=new B.init([new x.init(3418070365,3238371032),new x.init(1654270250,914150663),new x.init(2438529370,812702999),new x.init(355462360,4144912697),new x.init(1731405415,4290775857),new x.init(2394180231,1750603025),new x.init(3675008525,1694076839),new x.init(1203062813,3204075428)])},_doFinalize:function(){var y=S._doFinalize.call(this);return y.sigBytes-=16,y}});s.SHA384=S._createHelper(m),s.HmacSHA384=S._createHmacHelper(m)})(),n.SHA384})})(yn)),yn.exports}var vn={exports:{}},Cd=vn.exports,ci;function kd(){return ci||(ci=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Gn())})(Cd,function(n){return(function(s){var d=n,x=d.lib,B=x.WordArray,b=x.Hasher,S=d.x64,m=S.Word,y=d.algo,A=[],g=[],k=[];(function(){for(var v=1,h=0,c=0;c<24;c++){A[v+5*h]=(c+1)*(c+2)/2%64;var r=h%5,o=(2*v+3*h)%5;v=r,h=o}for(var v=0;v<5;v++)for(var h=0;h<5;h++)g[v+5*h]=h+(2*v+3*h)%5*5;for(var u=1,l=0;l<24;l++){for(var P=0,L=0,q=0;q<7;q++){if(u&1){var F=(1<<q)-1;F<32?L^=1<<F:P^=1<<F-32}u&128?u=u<<1^113:u<<=1}k[l]=m.create(P,L)}})();var w=[];(function(){for(var v=0;v<25;v++)w[v]=m.create()})();var C=y.SHA3=b.extend({cfg:b.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],h=0;h<25;h++)v[h]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,h){for(var c=this._state,r=this.blockSize/2,o=0;o<r;o++){var u=v[h+2*o],l=v[h+2*o+1];u=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360,l=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360;var P=c[o];P.high^=l,P.low^=u}for(var L=0;L<24;L++){for(var q=0;q<5;q++){for(var F=0,U=0,V=0;V<5;V++){var P=c[q+5*V];F^=P.high,U^=P.low}var j=w[q];j.high=F,j.low=U}for(var q=0;q<5;q++)for(var re=w[(q+4)%5],ne=w[(q+1)%5],de=ne.high,he=ne.low,F=re.high^(de<<1|he>>>31),U=re.low^(he<<1|de>>>31),V=0;V<5;V++){var P=c[q+5*V];P.high^=F,P.low^=U}for(var ue=1;ue<25;ue++){var F,U,P=c[ue],ge=P.high,be=P.low,p=A[ue];p<32?(F=ge<<p|be>>>32-p,U=be<<p|ge>>>32-p):(F=be<<p-32|ge>>>64-p,U=ge<<p-32|be>>>64-p);var J=w[g[ue]];J.high=F,J.low=U}var X=w[0],Y=c[0];X.high=Y.high,X.low=Y.low;for(var q=0;q<5;q++)for(var V=0;V<5;V++){var ue=q+5*V,P=c[ue],ke=w[ue],ce=w[(q+1)%5+5*V],we=w[(q+2)%5+5*V];P.high=ke.high^~ce.high&we.high,P.low=ke.low^~ce.low&we.low}var P=c[0],me=k[L];P.high^=me.high,P.low^=me.low}},_doFinalize:function(){var v=this._data,h=v.words;this._nDataBytes*8;var c=v.sigBytes*8,r=this.blockSize*32;h[c>>>5]|=1<<24-c%32,h[(s.ceil((c+1)/r)*r>>>5)-1]|=128,v.sigBytes=h.length*4,this._process();for(var o=this._state,u=this.cfg.outputLength/8,l=u/8,P=[],L=0;L<l;L++){var q=o[L],F=q.high,U=q.low;F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,P.push(U),P.push(F)}return new B.init(P,u)},clone:function(){for(var v=b.clone.call(this),h=v._state=this._state.slice(0),c=0;c<25;c++)h[c]=h[c].clone();return v}});d.SHA3=b._createHelper(C),d.HmacSHA3=b._createHmacHelper(C)})(Math),n.SHA3})})(vn)),vn.exports}var En={exports:{}},Ad=En.exports,li;function Bd(){return li||(li=1,(function(f,i){(function(n,s){f.exports=s(ve())})(Ad,function(n){return(function(s){var d=n,x=d.lib,B=x.WordArray,b=x.Hasher,S=d.algo,m=B.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),y=B.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),A=B.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=B.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),k=B.create([0,1518500249,1859775393,2400959708,2840853838]),w=B.create([1352829926,1548603684,1836072691,2053994217,0]),C=S.RIPEMD160=b.extend({_doReset:function(){this._hash=B.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,P){for(var L=0;L<16;L++){var q=P+L,F=l[q];l[q]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}var U=this._hash.words,V=k.words,j=w.words,re=m.words,ne=y.words,de=A.words,he=g.words,ue,ge,be,p,J,X,Y,ke,ce,we;X=ue=U[0],Y=ge=U[1],ke=be=U[2],ce=p=U[3],we=J=U[4];for(var me,L=0;L<80;L+=1)me=ue+l[P+re[L]]|0,L<16?me+=v(ge,be,p)+V[0]:L<32?me+=h(ge,be,p)+V[1]:L<48?me+=c(ge,be,p)+V[2]:L<64?me+=r(ge,be,p)+V[3]:me+=o(ge,be,p)+V[4],me=me|0,me=u(me,de[L]),me=me+J|0,ue=J,J=p,p=u(be,10),be=ge,ge=me,me=X+l[P+ne[L]]|0,L<16?me+=o(Y,ke,ce)+j[0]:L<32?me+=r(Y,ke,ce)+j[1]:L<48?me+=c(Y,ke,ce)+j[2]:L<64?me+=h(Y,ke,ce)+j[3]:me+=v(Y,ke,ce)+j[4],me=me|0,me=u(me,he[L]),me=me+we|0,X=we,we=ce,ce=u(ke,10),ke=Y,Y=me;me=U[1]+be+ce|0,U[1]=U[2]+p+we|0,U[2]=U[3]+J+X|0,U[3]=U[4]+ue+Y|0,U[4]=U[0]+ge+ke|0,U[0]=me},_doFinalize:function(){var l=this._data,P=l.words,L=this._nDataBytes*8,q=l.sigBytes*8;P[q>>>5]|=128<<24-q%32,P[(q+64>>>9<<4)+14]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,l.sigBytes=(P.length+1)*4,this._process();for(var F=this._hash,U=F.words,V=0;V<5;V++){var j=U[V];U[V]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return F},clone:function(){var l=b.clone.call(this);return l._hash=this._hash.clone(),l}});function v(l,P,L){return l^P^L}function h(l,P,L){return l&P|~l&L}function c(l,P,L){return(l|~P)^L}function r(l,P,L){return l&L|P&~L}function o(l,P,L){return l^(P|~L)}function u(l,P){return l<<P|l>>>32-P}d.RIPEMD160=b._createHelper(C),d.HmacRIPEMD160=b._createHmacHelper(C)})(),n.RIPEMD160})})(En)),En.exports}var bn={exports:{}},Dd=bn.exports,di;function Ua(){return di||(di=1,(function(f,i){(function(n,s){f.exports=s(ve())})(Dd,function(n){(function(){var s=n,d=s.lib,x=d.Base,B=s.enc,b=B.Utf8,S=s.algo;S.HMAC=x.extend({init:function(m,y){m=this._hasher=new m.init,typeof y=="string"&&(y=b.parse(y));var A=m.blockSize,g=A*4;y.sigBytes>g&&(y=m.finalize(y)),y.clamp();for(var k=this._oKey=y.clone(),w=this._iKey=y.clone(),C=k.words,v=w.words,h=0;h<A;h++)C[h]^=1549556828,v[h]^=909522486;k.sigBytes=w.sigBytes=g,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var y=this._hasher,A=y.finalize(m);y.reset();var g=y.finalize(this._oKey.clone().concat(A));return g}})})()})})(bn)),bn.exports}var _n={exports:{}},Td=_n.exports,ui;function Fd(){return ui||(ui=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Ma(),Ua())})(Td,function(n){return(function(){var s=n,d=s.lib,x=d.Base,B=d.WordArray,b=s.algo,S=b.SHA256,m=b.HMAC,y=b.PBKDF2=x.extend({cfg:x.extend({keySize:128/32,hasher:S,iterations:25e4}),init:function(A){this.cfg=this.cfg.extend(A)},compute:function(A,g){for(var k=this.cfg,w=m.create(k.hasher,A),C=B.create(),v=B.create([1]),h=C.words,c=v.words,r=k.keySize,o=k.iterations;h.length<r;){var u=w.update(g).finalize(v);w.reset();for(var l=u.words,P=l.length,L=u,q=1;q<o;q++){L=w.finalize(L),w.reset();for(var F=L.words,U=0;U<P;U++)l[U]^=F[U]}C.concat(u),c[0]++}return C.sigBytes=r*4,C}});s.PBKDF2=function(A,g,k){return y.create(k).compute(A,g)}})(),n.PBKDF2})})(_n)),_n.exports}var Sn={exports:{}},Rd=Sn.exports,fi;function cr(){return fi||(fi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Yi(),Ua())})(Rd,function(n){return(function(){var s=n,d=s.lib,x=d.Base,B=d.WordArray,b=s.algo,S=b.MD5,m=b.EvpKDF=x.extend({cfg:x.extend({keySize:128/32,hasher:S,iterations:1}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,A){for(var g,k=this.cfg,w=k.hasher.create(),C=B.create(),v=C.words,h=k.keySize,c=k.iterations;v.length<h;){g&&w.update(g),g=w.update(y).finalize(A),w.reset();for(var r=1;r<c;r++)g=w.finalize(g),w.reset();C.concat(g)}return C.sigBytes=h*4,C}});s.EvpKDF=function(y,A,g){return m.create(g).compute(y,A)}})(),n.EvpKDF})})(Sn)),Sn.exports}var wn={exports:{}},Pd=wn.exports,mi;function Me(){return mi||(mi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),cr())})(Pd,function(n){n.lib.Cipher||(function(s){var d=n,x=d.lib,B=x.Base,b=x.WordArray,S=x.BufferedBlockAlgorithm,m=d.enc;m.Utf8;var y=m.Base64,A=d.algo,g=A.EvpKDF,k=x.Cipher=S.extend({cfg:B.extend(),createEncryptor:function(F,U){return this.create(this._ENC_XFORM_MODE,F,U)},createDecryptor:function(F,U){return this.create(this._DEC_XFORM_MODE,F,U)},init:function(F,U,V){this.cfg=this.cfg.extend(V),this._xformMode=F,this._key=U,this.reset()},reset:function(){S.reset.call(this),this._doReset()},process:function(F){return this._append(F),this._process()},finalize:function(F){F&&this._append(F);var U=this._doFinalize();return U},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function F(U){return typeof U=="string"?q:l}return function(U){return{encrypt:function(V,j,re){return F(j).encrypt(U,V,j,re)},decrypt:function(V,j,re){return F(j).decrypt(U,V,j,re)}}}})()});x.StreamCipher=k.extend({_doFinalize:function(){var F=this._process(!0);return F},blockSize:1});var w=d.mode={},C=x.BlockCipherMode=B.extend({createEncryptor:function(F,U){return this.Encryptor.create(F,U)},createDecryptor:function(F,U){return this.Decryptor.create(F,U)},init:function(F,U){this._cipher=F,this._iv=U}}),v=w.CBC=(function(){var F=C.extend();F.Encryptor=F.extend({processBlock:function(V,j){var re=this._cipher,ne=re.blockSize;U.call(this,V,j,ne),re.encryptBlock(V,j),this._prevBlock=V.slice(j,j+ne)}}),F.Decryptor=F.extend({processBlock:function(V,j){var re=this._cipher,ne=re.blockSize,de=V.slice(j,j+ne);re.decryptBlock(V,j),U.call(this,V,j,ne),this._prevBlock=de}});function U(V,j,re){var ne,de=this._iv;de?(ne=de,this._iv=s):ne=this._prevBlock;for(var he=0;he<re;he++)V[j+he]^=ne[he]}return F})(),h=d.pad={},c=h.Pkcs7={pad:function(F,U){for(var V=U*4,j=V-F.sigBytes%V,re=j<<24|j<<16|j<<8|j,ne=[],de=0;de<j;de+=4)ne.push(re);var he=b.create(ne,j);F.concat(he)},unpad:function(F){var U=F.words[F.sigBytes-1>>>2]&255;F.sigBytes-=U}};x.BlockCipher=k.extend({cfg:k.cfg.extend({mode:v,padding:c}),reset:function(){var F;k.reset.call(this);var U=this.cfg,V=U.iv,j=U.mode;this._xformMode==this._ENC_XFORM_MODE?F=j.createEncryptor:(F=j.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==F?this._mode.init(this,V&&V.words):(this._mode=F.call(j,this,V&&V.words),this._mode.__creator=F)},_doProcessBlock:function(F,U){this._mode.processBlock(F,U)},_doFinalize:function(){var F,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),F=this._process(!0)):(F=this._process(!0),U.unpad(F)),F},blockSize:128/32});var r=x.CipherParams=B.extend({init:function(F){this.mixIn(F)},toString:function(F){return(F||this.formatter).stringify(this)}}),o=d.format={},u=o.OpenSSL={stringify:function(F){var U,V=F.ciphertext,j=F.salt;return j?U=b.create([1398893684,1701076831]).concat(j).concat(V):U=V,U.toString(y)},parse:function(F){var U,V=y.parse(F),j=V.words;return j[0]==1398893684&&j[1]==1701076831&&(U=b.create(j.slice(2,4)),j.splice(0,4),V.sigBytes-=16),r.create({ciphertext:V,salt:U})}},l=x.SerializableCipher=B.extend({cfg:B.extend({format:u}),encrypt:function(F,U,V,j){j=this.cfg.extend(j);var re=F.createEncryptor(V,j),ne=re.finalize(U),de=re.cfg;return r.create({ciphertext:ne,key:V,iv:de.iv,algorithm:F,mode:de.mode,padding:de.padding,blockSize:F.blockSize,formatter:j.format})},decrypt:function(F,U,V,j){j=this.cfg.extend(j),U=this._parse(U,j.format);var re=F.createDecryptor(V,j).finalize(U.ciphertext);return re},_parse:function(F,U){return typeof F=="string"?U.parse(F,this):F}}),P=d.kdf={},L=P.OpenSSL={execute:function(F,U,V,j,re){if(j||(j=b.random(64/8)),re)var ne=g.create({keySize:U+V,hasher:re}).compute(F,j);else var ne=g.create({keySize:U+V}).compute(F,j);var de=b.create(ne.words.slice(U),V*4);return ne.sigBytes=U*4,r.create({key:ne,iv:de,salt:j})}},q=x.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:L}),encrypt:function(F,U,V,j){j=this.cfg.extend(j);var re=j.kdf.execute(V,F.keySize,F.ivSize,j.salt,j.hasher);j.iv=re.iv;var ne=l.encrypt.call(this,F,U,re.key,j);return ne.mixIn(re),ne},decrypt:function(F,U,V,j){j=this.cfg.extend(j),U=this._parse(U,j.format);var re=j.kdf.execute(V,F.keySize,F.ivSize,U.salt,j.hasher);j.iv=re.iv;var ne=l.decrypt.call(this,F,U,re.key,j);return ne}})})()})})(wn)),wn.exports}var Cn={exports:{}},Id=Cn.exports,pi;function Ld(){return pi||(pi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(Id,function(n){return n.mode.CFB=(function(){var s=n.lib.BlockCipherMode.extend();s.Encryptor=s.extend({processBlock:function(x,B){var b=this._cipher,S=b.blockSize;d.call(this,x,B,S,b),this._prevBlock=x.slice(B,B+S)}}),s.Decryptor=s.extend({processBlock:function(x,B){var b=this._cipher,S=b.blockSize,m=x.slice(B,B+S);d.call(this,x,B,S,b),this._prevBlock=m}});function d(x,B,b,S){var m,y=this._iv;y?(m=y.slice(0),this._iv=void 0):m=this._prevBlock,S.encryptBlock(m,0);for(var A=0;A<b;A++)x[B+A]^=m[A]}return s})(),n.mode.CFB})})(Cn)),Cn.exports}var kn={exports:{}},$d=kn.exports,xi;function Od(){return xi||(xi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})($d,function(n){return n.mode.CTR=(function(){var s=n.lib.BlockCipherMode.extend(),d=s.Encryptor=s.extend({processBlock:function(x,B){var b=this._cipher,S=b.blockSize,m=this._iv,y=this._counter;m&&(y=this._counter=m.slice(0),this._iv=void 0);var A=y.slice(0);b.encryptBlock(A,0),y[S-1]=y[S-1]+1|0;for(var g=0;g<S;g++)x[B+g]^=A[g]}});return s.Decryptor=d,s})(),n.mode.CTR})})(kn)),kn.exports}var An={exports:{}},zd=An.exports,hi;function Md(){return hi||(hi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(zd,function(n){return n.mode.CTRGladman=(function(){var s=n.lib.BlockCipherMode.extend();function d(b){if((b>>24&255)===255){var S=b>>16&255,m=b>>8&255,y=b&255;S===255?(S=0,m===255?(m=0,y===255?y=0:++y):++m):++S,b=0,b+=S<<16,b+=m<<8,b+=y}else b+=1<<24;return b}function x(b){return(b[0]=d(b[0]))===0&&(b[1]=d(b[1])),b}var B=s.Encryptor=s.extend({processBlock:function(b,S){var m=this._cipher,y=m.blockSize,A=this._iv,g=this._counter;A&&(g=this._counter=A.slice(0),this._iv=void 0),x(g);var k=g.slice(0);m.encryptBlock(k,0);for(var w=0;w<y;w++)b[S+w]^=k[w]}});return s.Decryptor=B,s})(),n.mode.CTRGladman})})(An)),An.exports}var Bn={exports:{}},Ud=Bn.exports,gi;function Vd(){return gi||(gi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(Ud,function(n){return n.mode.OFB=(function(){var s=n.lib.BlockCipherMode.extend(),d=s.Encryptor=s.extend({processBlock:function(x,B){var b=this._cipher,S=b.blockSize,m=this._iv,y=this._keystream;m&&(y=this._keystream=m.slice(0),this._iv=void 0),b.encryptBlock(y,0);for(var A=0;A<S;A++)x[B+A]^=y[A]}});return s.Decryptor=d,s})(),n.mode.OFB})})(Bn)),Bn.exports}var Dn={exports:{}},Nd=Dn.exports,yi;function Wd(){return yi||(yi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(Nd,function(n){return n.mode.ECB=(function(){var s=n.lib.BlockCipherMode.extend();return s.Encryptor=s.extend({processBlock:function(d,x){this._cipher.encryptBlock(d,x)}}),s.Decryptor=s.extend({processBlock:function(d,x){this._cipher.decryptBlock(d,x)}}),s})(),n.mode.ECB})})(Dn)),Dn.exports}var Tn={exports:{}},Hd=Tn.exports,vi;function jd(){return vi||(vi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(Hd,function(n){return n.pad.AnsiX923={pad:function(s,d){var x=s.sigBytes,B=d*4,b=B-x%B,S=x+b-1;s.clamp(),s.words[S>>>2]|=b<<24-S%4*8,s.sigBytes+=b},unpad:function(s){var d=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=d}},n.pad.Ansix923})})(Tn)),Tn.exports}var Fn={exports:{}},Gd=Fn.exports,Ei;function qd(){return Ei||(Ei=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(Gd,function(n){return n.pad.Iso10126={pad:function(s,d){var x=d*4,B=x-s.sigBytes%x;s.concat(n.lib.WordArray.random(B-1)).concat(n.lib.WordArray.create([B<<24],1))},unpad:function(s){var d=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=d}},n.pad.Iso10126})})(Fn)),Fn.exports}var Rn={exports:{}},Kd=Rn.exports,bi;function Yd(){return bi||(bi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(Kd,function(n){return n.pad.Iso97971={pad:function(s,d){s.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(s,d)},unpad:function(s){n.pad.ZeroPadding.unpad(s),s.sigBytes--}},n.pad.Iso97971})})(Rn)),Rn.exports}var Pn={exports:{}},Jd=Pn.exports,_i;function Xd(){return _i||(_i=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(Jd,function(n){return n.pad.ZeroPadding={pad:function(s,d){var x=d*4;s.clamp(),s.sigBytes+=x-(s.sigBytes%x||x)},unpad:function(s){for(var d=s.words,x=s.sigBytes-1,x=s.sigBytes-1;x>=0;x--)if(d[x>>>2]>>>24-x%4*8&255){s.sigBytes=x+1;break}}},n.pad.ZeroPadding})})(Pn)),Pn.exports}var In={exports:{}},Zd=In.exports,Si;function Qd(){return Si||(Si=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(Zd,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})})(In)),In.exports}var Ln={exports:{}},eu=Ln.exports,wi;function tu(){return wi||(wi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Me())})(eu,function(n){return(function(s){var d=n,x=d.lib,B=x.CipherParams,b=d.enc,S=b.Hex,m=d.format;m.Hex={stringify:function(y){return y.ciphertext.toString(S)},parse:function(y){var A=S.parse(y);return B.create({ciphertext:A})}}})(),n.format.Hex})})(Ln)),Ln.exports}var $n={exports:{}},ru=$n.exports,Ci;function ou(){return Ci||(Ci=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Br(),Dr(),cr(),Me())})(ru,function(n){return(function(){var s=n,d=s.lib,x=d.BlockCipher,B=s.algo,b=[],S=[],m=[],y=[],A=[],g=[],k=[],w=[],C=[],v=[];(function(){for(var r=[],o=0;o<256;o++)o<128?r[o]=o<<1:r[o]=o<<1^283;for(var u=0,l=0,o=0;o<256;o++){var P=l^l<<1^l<<2^l<<3^l<<4;P=P>>>8^P&255^99,b[u]=P,S[P]=u;var L=r[u],q=r[L],F=r[q],U=r[P]*257^P*16843008;m[u]=U<<24|U>>>8,y[u]=U<<16|U>>>16,A[u]=U<<8|U>>>24,g[u]=U;var U=F*16843009^q*65537^L*257^u*16843008;k[P]=U<<24|U>>>8,w[P]=U<<16|U>>>16,C[P]=U<<8|U>>>24,v[P]=U,u?(u=L^r[r[r[F^L]]],l^=r[r[l]]):u=l=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],c=B.AES=x.extend({_doReset:function(){var r;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var o=this._keyPriorReset=this._key,u=o.words,l=o.sigBytes/4,P=this._nRounds=l+6,L=(P+1)*4,q=this._keySchedule=[],F=0;F<L;F++)F<l?q[F]=u[F]:(r=q[F-1],F%l?l>6&&F%l==4&&(r=b[r>>>24]<<24|b[r>>>16&255]<<16|b[r>>>8&255]<<8|b[r&255]):(r=r<<8|r>>>24,r=b[r>>>24]<<24|b[r>>>16&255]<<16|b[r>>>8&255]<<8|b[r&255],r^=h[F/l|0]<<24),q[F]=q[F-l]^r);for(var U=this._invKeySchedule=[],V=0;V<L;V++){var F=L-V;if(V%4)var r=q[F];else var r=q[F-4];V<4||F<=4?U[V]=r:U[V]=k[b[r>>>24]]^w[b[r>>>16&255]]^C[b[r>>>8&255]]^v[b[r&255]]}}},encryptBlock:function(r,o){this._doCryptBlock(r,o,this._keySchedule,m,y,A,g,b)},decryptBlock:function(r,o){var u=r[o+1];r[o+1]=r[o+3],r[o+3]=u,this._doCryptBlock(r,o,this._invKeySchedule,k,w,C,v,S);var u=r[o+1];r[o+1]=r[o+3],r[o+3]=u},_doCryptBlock:function(r,o,u,l,P,L,q,F){for(var U=this._nRounds,V=r[o]^u[0],j=r[o+1]^u[1],re=r[o+2]^u[2],ne=r[o+3]^u[3],de=4,he=1;he<U;he++){var ue=l[V>>>24]^P[j>>>16&255]^L[re>>>8&255]^q[ne&255]^u[de++],ge=l[j>>>24]^P[re>>>16&255]^L[ne>>>8&255]^q[V&255]^u[de++],be=l[re>>>24]^P[ne>>>16&255]^L[V>>>8&255]^q[j&255]^u[de++],p=l[ne>>>24]^P[V>>>16&255]^L[j>>>8&255]^q[re&255]^u[de++];V=ue,j=ge,re=be,ne=p}var ue=(F[V>>>24]<<24|F[j>>>16&255]<<16|F[re>>>8&255]<<8|F[ne&255])^u[de++],ge=(F[j>>>24]<<24|F[re>>>16&255]<<16|F[ne>>>8&255]<<8|F[V&255])^u[de++],be=(F[re>>>24]<<24|F[ne>>>16&255]<<16|F[V>>>8&255]<<8|F[j&255])^u[de++],p=(F[ne>>>24]<<24|F[V>>>16&255]<<16|F[j>>>8&255]<<8|F[re&255])^u[de++];r[o]=ue,r[o+1]=ge,r[o+2]=be,r[o+3]=p},keySize:256/32});s.AES=x._createHelper(c)})(),n.AES})})($n)),$n.exports}var On={exports:{}},nu=On.exports,ki;function au(){return ki||(ki=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Br(),Dr(),cr(),Me())})(nu,function(n){return(function(){var s=n,d=s.lib,x=d.WordArray,B=d.BlockCipher,b=s.algo,S=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],y=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],A=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],g=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],k=b.DES=B.extend({_doReset:function(){for(var h=this._key,c=h.words,r=[],o=0;o<56;o++){var u=S[o]-1;r[o]=c[u>>>5]>>>31-u%32&1}for(var l=this._subKeys=[],P=0;P<16;P++){for(var L=l[P]=[],q=y[P],o=0;o<24;o++)L[o/6|0]|=r[(m[o]-1+q)%28]<<31-o%6,L[4+(o/6|0)]|=r[28+(m[o+24]-1+q)%28]<<31-o%6;L[0]=L[0]<<1|L[0]>>>31;for(var o=1;o<7;o++)L[o]=L[o]>>>(o-1)*4+3;L[7]=L[7]<<5|L[7]>>>27}for(var F=this._invSubKeys=[],o=0;o<16;o++)F[o]=l[15-o]},encryptBlock:function(h,c){this._doCryptBlock(h,c,this._subKeys)},decryptBlock:function(h,c){this._doCryptBlock(h,c,this._invSubKeys)},_doCryptBlock:function(h,c,r){this._lBlock=h[c],this._rBlock=h[c+1],w.call(this,4,252645135),w.call(this,16,65535),C.call(this,2,858993459),C.call(this,8,16711935),w.call(this,1,1431655765);for(var o=0;o<16;o++){for(var u=r[o],l=this._lBlock,P=this._rBlock,L=0,q=0;q<8;q++)L|=A[q][((P^u[q])&g[q])>>>0];this._lBlock=P,this._rBlock=l^L}var F=this._lBlock;this._lBlock=this._rBlock,this._rBlock=F,w.call(this,1,1431655765),C.call(this,8,16711935),C.call(this,2,858993459),w.call(this,16,65535),w.call(this,4,252645135),h[c]=this._lBlock,h[c+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function w(h,c){var r=(this._lBlock>>>h^this._rBlock)&c;this._rBlock^=r,this._lBlock^=r<<h}function C(h,c){var r=(this._rBlock>>>h^this._lBlock)&c;this._lBlock^=r,this._rBlock^=r<<h}s.DES=B._createHelper(k);var v=b.TripleDES=B.extend({_doReset:function(){var h=this._key,c=h.words;if(c.length!==2&&c.length!==4&&c.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var r=c.slice(0,2),o=c.length<4?c.slice(0,2):c.slice(2,4),u=c.length<6?c.slice(0,2):c.slice(4,6);this._des1=k.createEncryptor(x.create(r)),this._des2=k.createEncryptor(x.create(o)),this._des3=k.createEncryptor(x.create(u))},encryptBlock:function(h,c){this._des1.encryptBlock(h,c),this._des2.decryptBlock(h,c),this._des3.encryptBlock(h,c)},decryptBlock:function(h,c){this._des3.decryptBlock(h,c),this._des2.encryptBlock(h,c),this._des1.decryptBlock(h,c)},keySize:192/32,ivSize:64/32,blockSize:64/32});s.TripleDES=B._createHelper(v)})(),n.TripleDES})})(On)),On.exports}var zn={exports:{}},su=zn.exports,Ai;function iu(){return Ai||(Ai=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Br(),Dr(),cr(),Me())})(su,function(n){return(function(){var s=n,d=s.lib,x=d.StreamCipher,B=s.algo,b=B.RC4=x.extend({_doReset:function(){for(var y=this._key,A=y.words,g=y.sigBytes,k=this._S=[],w=0;w<256;w++)k[w]=w;for(var w=0,C=0;w<256;w++){var v=w%g,h=A[v>>>2]>>>24-v%4*8&255;C=(C+k[w]+h)%256;var c=k[w];k[w]=k[C],k[C]=c}this._i=this._j=0},_doProcessBlock:function(y,A){y[A]^=S.call(this)},keySize:256/32,ivSize:0});function S(){for(var y=this._S,A=this._i,g=this._j,k=0,w=0;w<4;w++){A=(A+1)%256,g=(g+y[A])%256;var C=y[A];y[A]=y[g],y[g]=C,k|=y[(y[A]+y[g])%256]<<24-w*8}return this._i=A,this._j=g,k}s.RC4=x._createHelper(b);var m=B.RC4Drop=b.extend({cfg:b.cfg.extend({drop:192}),_doReset:function(){b._doReset.call(this);for(var y=this.cfg.drop;y>0;y--)S.call(this)}});s.RC4Drop=x._createHelper(m)})(),n.RC4})})(zn)),zn.exports}var Mn={exports:{}},cu=Mn.exports,Bi;function lu(){return Bi||(Bi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Br(),Dr(),cr(),Me())})(cu,function(n){return(function(){var s=n,d=s.lib,x=d.StreamCipher,B=s.algo,b=[],S=[],m=[],y=B.Rabbit=x.extend({_doReset:function(){for(var g=this._key.words,k=this.cfg.iv,w=0;w<4;w++)g[w]=(g[w]<<8|g[w]>>>24)&16711935|(g[w]<<24|g[w]>>>8)&4278255360;var C=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],v=this._C=[g[2]<<16|g[2]>>>16,g[0]&4294901760|g[1]&65535,g[3]<<16|g[3]>>>16,g[1]&4294901760|g[2]&65535,g[0]<<16|g[0]>>>16,g[2]&4294901760|g[3]&65535,g[1]<<16|g[1]>>>16,g[3]&4294901760|g[0]&65535];this._b=0;for(var w=0;w<4;w++)A.call(this);for(var w=0;w<8;w++)v[w]^=C[w+4&7];if(k){var h=k.words,c=h[0],r=h[1],o=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,u=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,l=o>>>16|u&4294901760,P=u<<16|o&65535;v[0]^=o,v[1]^=l,v[2]^=u,v[3]^=P,v[4]^=o,v[5]^=l,v[6]^=u,v[7]^=P;for(var w=0;w<4;w++)A.call(this)}},_doProcessBlock:function(g,k){var w=this._X;A.call(this),b[0]=w[0]^w[5]>>>16^w[3]<<16,b[1]=w[2]^w[7]>>>16^w[5]<<16,b[2]=w[4]^w[1]>>>16^w[7]<<16,b[3]=w[6]^w[3]>>>16^w[1]<<16;for(var C=0;C<4;C++)b[C]=(b[C]<<8|b[C]>>>24)&16711935|(b[C]<<24|b[C]>>>8)&4278255360,g[k+C]^=b[C]},blockSize:128/32,ivSize:64/32});function A(){for(var g=this._X,k=this._C,w=0;w<8;w++)S[w]=k[w];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<S[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<S[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<S[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<S[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<S[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<S[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<S[6]>>>0?1:0)|0,this._b=k[7]>>>0<S[7]>>>0?1:0;for(var w=0;w<8;w++){var C=g[w]+k[w],v=C&65535,h=C>>>16,c=((v*v>>>17)+v*h>>>15)+h*h,r=((C&4294901760)*C|0)+((C&65535)*C|0);m[w]=c^r}g[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,g[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,g[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,g[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,g[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,g[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,g[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,g[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}s.Rabbit=x._createHelper(y)})(),n.Rabbit})})(Mn)),Mn.exports}var Un={exports:{}},du=Un.exports,Di;function uu(){return Di||(Di=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Br(),Dr(),cr(),Me())})(du,function(n){return(function(){var s=n,d=s.lib,x=d.StreamCipher,B=s.algo,b=[],S=[],m=[],y=B.RabbitLegacy=x.extend({_doReset:function(){var g=this._key.words,k=this.cfg.iv,w=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],C=this._C=[g[2]<<16|g[2]>>>16,g[0]&4294901760|g[1]&65535,g[3]<<16|g[3]>>>16,g[1]&4294901760|g[2]&65535,g[0]<<16|g[0]>>>16,g[2]&4294901760|g[3]&65535,g[1]<<16|g[1]>>>16,g[3]&4294901760|g[0]&65535];this._b=0;for(var v=0;v<4;v++)A.call(this);for(var v=0;v<8;v++)C[v]^=w[v+4&7];if(k){var h=k.words,c=h[0],r=h[1],o=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,u=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,l=o>>>16|u&4294901760,P=u<<16|o&65535;C[0]^=o,C[1]^=l,C[2]^=u,C[3]^=P,C[4]^=o,C[5]^=l,C[6]^=u,C[7]^=P;for(var v=0;v<4;v++)A.call(this)}},_doProcessBlock:function(g,k){var w=this._X;A.call(this),b[0]=w[0]^w[5]>>>16^w[3]<<16,b[1]=w[2]^w[7]>>>16^w[5]<<16,b[2]=w[4]^w[1]>>>16^w[7]<<16,b[3]=w[6]^w[3]>>>16^w[1]<<16;for(var C=0;C<4;C++)b[C]=(b[C]<<8|b[C]>>>24)&16711935|(b[C]<<24|b[C]>>>8)&4278255360,g[k+C]^=b[C]},blockSize:128/32,ivSize:64/32});function A(){for(var g=this._X,k=this._C,w=0;w<8;w++)S[w]=k[w];k[0]=k[0]+1295307597+this._b|0,k[1]=k[1]+3545052371+(k[0]>>>0<S[0]>>>0?1:0)|0,k[2]=k[2]+886263092+(k[1]>>>0<S[1]>>>0?1:0)|0,k[3]=k[3]+1295307597+(k[2]>>>0<S[2]>>>0?1:0)|0,k[4]=k[4]+3545052371+(k[3]>>>0<S[3]>>>0?1:0)|0,k[5]=k[5]+886263092+(k[4]>>>0<S[4]>>>0?1:0)|0,k[6]=k[6]+1295307597+(k[5]>>>0<S[5]>>>0?1:0)|0,k[7]=k[7]+3545052371+(k[6]>>>0<S[6]>>>0?1:0)|0,this._b=k[7]>>>0<S[7]>>>0?1:0;for(var w=0;w<8;w++){var C=g[w]+k[w],v=C&65535,h=C>>>16,c=((v*v>>>17)+v*h>>>15)+h*h,r=((C&4294901760)*C|0)+((C&65535)*C|0);m[w]=c^r}g[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,g[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,g[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,g[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,g[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,g[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,g[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,g[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}s.RabbitLegacy=x._createHelper(y)})(),n.RabbitLegacy})})(Un)),Un.exports}var Vn={exports:{}},fu=Vn.exports,Ti;function mu(){return Ti||(Ti=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Br(),Dr(),cr(),Me())})(fu,function(n){return(function(){var s=n,d=s.lib,x=d.BlockCipher,B=s.algo;const b=16,S=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var y={pbox:[],sbox:[]};function A(v,h){let c=h>>24&255,r=h>>16&255,o=h>>8&255,u=h&255,l=v.sbox[0][c]+v.sbox[1][r];return l=l^v.sbox[2][o],l=l+v.sbox[3][u],l}function g(v,h,c){let r=h,o=c,u;for(let l=0;l<b;++l)r=r^v.pbox[l],o=A(v,r)^o,u=r,r=o,o=u;return u=r,r=o,o=u,o=o^v.pbox[b],r=r^v.pbox[b+1],{left:r,right:o}}function k(v,h,c){let r=h,o=c,u;for(let l=b+1;l>1;--l)r=r^v.pbox[l],o=A(v,r)^o,u=r,r=o,o=u;return u=r,r=o,o=u,o=o^v.pbox[1],r=r^v.pbox[0],{left:r,right:o}}function w(v,h,c){for(let P=0;P<4;P++){v.sbox[P]=[];for(let L=0;L<256;L++)v.sbox[P][L]=m[P][L]}let r=0;for(let P=0;P<b+2;P++)v.pbox[P]=S[P]^h[r],r++,r>=c&&(r=0);let o=0,u=0,l=0;for(let P=0;P<b+2;P+=2)l=g(v,o,u),o=l.left,u=l.right,v.pbox[P]=o,v.pbox[P+1]=u;for(let P=0;P<4;P++)for(let L=0;L<256;L+=2)l=g(v,o,u),o=l.left,u=l.right,v.sbox[P][L]=o,v.sbox[P][L+1]=u;return!0}var C=B.Blowfish=x.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,h=v.words,c=v.sigBytes/4;w(y,h,c)}},encryptBlock:function(v,h){var c=g(y,v[h],v[h+1]);v[h]=c.left,v[h+1]=c.right},decryptBlock:function(v,h){var c=k(y,v[h],v[h+1]);v[h]=c.left,v[h+1]=c.right},blockSize:64/32,keySize:128/32,ivSize:64/32});s.Blowfish=x._createHelper(C)})(),n.Blowfish})})(Vn)),Vn.exports}var pu=an.exports,Fi;function xu(){return Fi||(Fi=1,(function(f,i){(function(n,s,d){f.exports=s(ve(),Gn(),ud(),md(),Br(),hd(),Dr(),Yi(),Ma(),bd(),Ji(),wd(),kd(),Bd(),Ua(),Fd(),cr(),Me(),Ld(),Od(),Md(),Vd(),Wd(),jd(),qd(),Yd(),Xd(),Qd(),tu(),ou(),au(),iu(),lu(),uu(),mu())})(pu,function(n){return n})})(an)),an.exports}var hu=xu();const Pa=Vi(hu),Wn="ENC::",gu=(f,i)=>{if(!f||!i)return f;try{const n=Pa.AES.encrypt(f,i).toString();return Wn+n}catch(n){return console.error("≈ûifreleme hatasƒ±:",n),f}},nx=(f,i)=>{if(!f||!f.startsWith(Wn)||!i)return f;try{const n=f.replace(Wn,""),d=Pa.AES.decrypt(n,i).toString(Pa.enc.Utf8);return d||"üîí ≈ûifreli Mesaj (Anahtar Yanlƒ±≈ü)"}catch(n){return console.error("≈ûifre √ß√∂zme hatasƒ±:",n),"üîí √á√∂z√ºlemedi"}},ax=f=>f&&typeof f=="string"&&f.startsWith(Wn),St={mobile:768,tablet:1024,desktop:1920,ultrawide:2560},yu=()=>{const[f,i]=a.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080});a.useEffect(()=>{if(typeof window>"u")return;let d;const x=()=>{clearTimeout(d),d=setTimeout(()=>{i({width:window.innerWidth,height:window.innerHeight})},150)};return x(),window.addEventListener("resize",x),window.addEventListener("orientationchange",x),()=>{clearTimeout(d),window.removeEventListener("resize",x),window.removeEventListener("orientationchange",x)}},[]);const{width:n,height:s}=f;return{isMobile:n<=St.mobile,isTablet:n>St.mobile&&n<=St.tablet,isDesktop:n>St.tablet&&n<=St.desktop,isUltrawide:n>St.desktop,width:n,height:s,orientation:s>n?"portrait":"landscape",isSmallScreen:n<=St.mobile,isMediumScreen:n>St.mobile&&n<=St.tablet,isLargeScreen:n>St.tablet,isTouchDevice:typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0),breakpoints:St}},vu=(f,i,n)=>a.useMemo(()=>{if(!f||!Array.isArray(f))return[];let d=f;if(i&&typeof i=="string"&&i.trim()){const x=i.toLowerCase();d=d.filter(B=>B.content?.toLowerCase().includes(x)||B.user?.username?.toLowerCase().includes(x))}return d.sort((x,B)=>{const b=new Date(x.created_at||x.timestamp),S=new Date(B.created_at||B.timestamp);return b-S})},[f,i]),Eu=f=>a.useMemo(()=>!f||!Array.isArray(f)?[]:f.filter(i=>i.is_online||i.online),[f]);typeof window<"u"&&window.Capacitor?.isNativePlatform?.();typeof window<"u"&&window.location?.hostname?.includes("pawscord.com");const Va=()=>"https://api.pawscord.com".replace(/\/api\/?$/,""),bu=()=>`${Va()}/api`,_u=()=>Va().startsWith("https")?"wss":"ws",Su=()=>Va().replace(/^https?:\/\//,""),wu={API_BASE_URL:bu(),WS_PROTOCOL:_u(),API_HOSTNAME:Su()},Cu=wu.API_BASE_URL,ku=()=>{let f=sessionStorage.getItem("analytics_session_id");return f||(f=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("analytics_session_id",f)),f},Au=()=>{const f=Ni();a.useEffect(()=>{(async()=>{try{const n=ku();await fetch(`${Cu}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:f.pathname,session_id:n,referrer:document.referrer,timestamp:new Date().toISOString()})}),console.log("üìä Page tracked:",f.pathname)}catch(n){console.error("Analytics tracking error:",n)}})()},[f.pathname])},Bu=(f,i)=>{const n=a.useRef(null);return a.useCallback((...s)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{f(...s)},i)},[f,i])},Du=(f,i)=>{const n=a.useRef(Date.now());return a.useCallback((...s)=>{const d=Date.now();d-n.current>=i&&(f(...s),n.current=d)},[f,i])},sx=f=>{const i=a.useRef(0),n=a.useRef(0);a.useEffect(()=>{const s=performance.now();return i.current+=1,()=>{const x=performance.now()-s;n.current+=x,i.current%10===0&&console.log(`üéØ ${f} Performance Stats:`,`
  Total Renders: ${i.current}`,`
  Average Time: ${(n.current/i.current).toFixed(2)}ms`,`
  Last Render: ${x.toFixed(2)}ms`)}})};class _o extends Error{}_o.prototype.name="InvalidTokenError";function Tu(f){return decodeURIComponent(atob(f).replace(/(.)/g,(i,n)=>{let s=n.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function Fu(f){let i=f.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Tu(i)}catch{return atob(i)}}function Xr(f,i){if(typeof f!="string")throw new _o("Invalid token specified: must be a string");i||(i={});const n=i.header===!0?0:1,s=f.split(".")[n];if(typeof s!="string")throw new _o(`Invalid token specified: missing part #${n+1}`);let d;try{d=Fu(s)}catch(x){throw new _o(`Invalid token specified: invalid base64 for part #${n+1} (${x.message})`)}try{return JSON.parse(d)}catch(x){throw new _o(`Invalid token specified: invalid json for part #${n+1} (${x.message})`)}}const Ru="pawscord.com",Pu="443",Na=typeof window>"u"?!1:!!(typeof window.require=="function"||typeof process<"u"&&process.versions&&process.versions.electron||navigator.userAgent.toLowerCase().includes("electron")||window.location.protocol==="file:"),Xi=eo.isNativePlatform(),Tr=Xi||Na||!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("192.168.")?"https://api.pawscord.com":`http://${Ru}:${Pu}`,Iu=`${Tr}/api`;Xi||Na||window.location.hostname.includes("localhost");const Hn=Tr.startsWith("https")?"wss":"ws",jn=Tr.replace(/^https?:\/\//,""),Zi=a.createContext(null),Lu=Tr,$u=({children:f})=>{const i=localStorage.getItem("access_token"),n=(()=>{if(!i)return!1;try{return Xr(i).exp>Date.now()/1e3-300}catch{return!1}})(),[s,d]=a.useState(n?{username:localStorage.getItem("chat_username")||""}:null),[x,B]=a.useState(i),[b,S]=a.useState(n),[m,y]=a.useState(!1),A=a.useRef(null),g=a.useCallback(async()=>{const v=localStorage.getItem("refresh_token");if(!v)return console.warn("‚ö†Ô∏è [Auth] No refresh token available"),C(),!1;try{console.log("üîÑ [Auth] Refreshing access token...");const h=await fetch(`${Lu}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:v})});if(h.ok){const c=await h.json();localStorage.setItem("access_token",c.access),c.refresh&&localStorage.setItem("refresh_token",c.refresh);const r=Xr(c.access);return B(c.access),d({username:r.username}),S(!0),console.log("‚úÖ [Auth] Token refreshed successfully"),k(c.access),!0}else return console.error("‚ùå [Auth] Token refresh failed:",h.status),C(),!1}catch(h){return console.error("‚ùå [Auth] Token refresh error:",h),C(),!1}},[]),k=a.useCallback(v=>{A.current&&clearTimeout(A.current);try{const h=Xr(v),c=Date.now()/1e3,r=h.exp-c,o=Math.max((r-300)*1e3,6e4);console.log(`‚è∞ [Auth] Token will refresh in ${Math.round(o/1e3/60)} minutes`),A.current=setTimeout(()=>{g()},o)}catch(h){console.error("‚ùå [Auth] Failed to schedule token refresh:",h)}},[g]);a.useEffect(()=>{const v=localStorage.getItem("access_token");if(v)try{const h=Xr(v),c=Date.now()/1e3,r=300,o=h.exp>c-r;console.log("üîê [Auth] Token check:",{exp:h.exp,currentTime:c,gracePeriod:r,isValid:o,username:h.username}),o?(B(v),d({username:h.username}),S(!0),localStorage.setItem("chat_username",h.username),k(v),console.log("‚úÖ [Auth] User authenticated:",h.username)):(console.warn("‚ö†Ô∏è [Auth] Token expired, attempting refresh..."),g())}catch(h){console.error("‚ùå [Auth] Invalid token:",h),C()}else console.log("‚ÑπÔ∏è [Auth] No token found");return()=>{A.current&&clearTimeout(A.current)}},[k,g]);const w=(v,h)=>{console.log("üîì [Auth] Login called");try{localStorage.setItem("access_token",v),localStorage.setItem("refresh_token",h);const c=Xr(v);localStorage.setItem("chat_username",c.username),console.log("‚úÖ [Auth] Login successful, user:",c.username),B(v),d({username:c.username}),S(!0),k(v)}catch(c){console.error("‚ùå [Auth] Login failed:",c),C()}},C=a.useCallback(()=>{A.current&&clearTimeout(A.current),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("chat_username"),B(null),d(null),S(!1)},[]);return e.createElement(Zi.Provider,{value:{user:s,token:x,isAuthenticated:b,login:w,logout:C,isLoading:m,refreshAccessToken:g}},f)},to=()=>a.useContext(Zi),Ge={log:(...f)=>{},warn:(...f)=>{},error:(...f)=>{console.error(...f)},debug:(...f)=>{},voice:(...f)=>{},webrtc:(...f)=>{},signal:(...f)=>{},audio:(...f)=>{}};class Ou{constructor(){this.audioContext=null,this.masterGain=null,this.spatialNodes={},this.listenerPosition={x:0,y:0,z:0},this.initialized=!1}async initialize(){if(!this.initialized)try{const i=window.AudioContext||window.webkitAudioContext;this.audioContext=new i,this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.audioContext.destination),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.setupListener(),this.initialized=!0,console.log("üéß Spatial Audio Engine initialized")}catch(i){throw console.error("Failed to initialize spatial audio:",i),i}}setupListener(){const i=this.audioContext.listener;i.positionX?(i.positionX.value=this.listenerPosition.x,i.positionY.value=this.listenerPosition.y,i.positionZ.value=this.listenerPosition.z):i.setPosition(this.listenerPosition.x,this.listenerPosition.y,this.listenerPosition.z),i.forwardX?(i.forwardX.value=0,i.forwardY.value=0,i.forwardZ.value=-1,i.upX.value=0,i.upY.value=1,i.upZ.value=0):i.setOrientation(0,0,-1,0,1,0)}addUser(i,n,s={x:0,y:0,z:-1}){if(!this.initialized)return console.warn("Spatial audio not initialized"),null;this.spatialNodes[i]&&this.removeUser(i);try{const d=this.audioContext.createMediaStreamSource(n),x=this.audioContext.createPanner();x.panningModel="HRTF",x.distanceModel="inverse",x.refDistance=1,x.maxDistance=1e4,x.rolloffFactor=1.5,x.coneInnerAngle=360,x.coneOuterAngle=360,x.coneOuterGain=0,this.setUserPosition(i,s,x);const B=this.audioContext.createGain();B.gain.value=1;const b=this.audioContext.createAnalyser();return b.fftSize=256,b.smoothingTimeConstant=.8,d.connect(b),b.connect(x),x.connect(B),B.connect(this.masterGain),this.spatialNodes[i]={source:d,panner:x,gain:B,analyser:b,position:s,audioElement:null},console.log(`üéß Added spatial audio for ${i} at position`,s),this.spatialNodes[i]}catch(d){return console.error(`Failed to add spatial audio for ${i}:`,d),null}}setUserPosition(i,n,s=null){const d=s||this.spatialNodes[i]?.panner;d&&(d.positionX?(d.positionX.setValueAtTime(n.x,this.audioContext.currentTime),d.positionY.setValueAtTime(n.y,this.audioContext.currentTime),d.positionZ.setValueAtTime(n.z,this.audioContext.currentTime)):d.setPosition(n.x,n.y,n.z),this.spatialNodes[i]&&(this.spatialNodes[i].position=n))}setUserVolume(i,n){const s=this.spatialNodes[i];if(!s)return;const d=Math.max(0,Math.min(1,n));s.gain.gain.setValueAtTime(d,this.audioContext.currentTime)}getVoiceActivity(i){const n=this.spatialNodes[i];if(!n)return 0;const s=n.analyser,d=new Uint8Array(s.frequencyBinCount);s.getByteFrequencyData(d);const B=d.reduce((b,S)=>b+S,0)/d.length;return Math.round(B/255*100)}removeUser(i){const n=this.spatialNodes[i];if(n)try{n.source.disconnect(),n.analyser.disconnect(),n.panner.disconnect(),n.gain.disconnect(),delete this.spatialNodes[i],console.log(`üéß Removed spatial audio for ${i}`)}catch(s){console.error(`Error removing spatial audio for ${i}:`,s)}}updateListenerPosition(i){this.listenerPosition=i,this.setupListener()}setMasterVolume(i){if(!this.masterGain)return;const n=Math.max(0,Math.min(1,i));this.masterGain.gain.setValueAtTime(n,this.audioContext.currentTime)}setUserMuted(i,n){this.setUserVolume(i,n?0:1)}destroy(){Object.keys(this.spatialNodes).forEach(i=>{this.removeUser(i)}),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.initialized=!1,console.log("üéß Spatial Audio Engine destroyed")}getUserDistance(i){const n=this.spatialNodes[i];if(!n)return 1/0;const s=n.position,d=this.listenerPosition;return Math.sqrt(Math.pow(s.x-d.x,2)+Math.pow(s.y-d.y,2)+Math.pow(s.z-d.z,2))}arrangeUsersInCircle(i,n=3){const s={},d=2*Math.PI/i.length;return i.forEach((x,B)=>{const b=d*B,S={x:Math.cos(b)*n,y:0,z:Math.sin(b)*n};s[x]=S,this.setUserPosition(x,S)}),s}}const Eo=new Ou,Qi=a.createContext(null),Ar=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.services.mozilla.com:3478"},{urls:"stun:stun.stunprotocol.org:3478"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}];let Ia={iceServers:Ar,iceCandidatePoolSize:10,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};const en=f=>{Ia={...Ia,iceServers:f}};console.log("[VoiceContext] üéØ isElectron:",Na,"API_URL:",Tr,"WS_PROTOCOL:",Hn,"API_HOST:",jn);const zu=({children:f})=>{const{user:i,token:n}=to(),s=i?.username,[d,x]=a.useState(!1),[B,b]=a.useState(!1),[S,m]=a.useState(null),[y,A]=a.useState(!1),[g,k]=a.useState(!1),[w,C]=a.useState(!1),[v,h]=a.useState(!1),[c,r]=a.useState(!1),[o,u]=a.useState(!1),[l,P]=a.useState(0),[L,q]=a.useState(null),[F,U]=a.useState(50),[V,j]=a.useState(null),[re,ne]=a.useState(null),[de,he]=a.useState(null),[ue,ge]=a.useState({}),[be,p]=a.useState([]),[J,X]=a.useState(null),[Y,ke]=a.useState({isActive:!1,url:"https://www.youtube.com/watch?v=jfKfPfyJRdk",playing:!1,time:0,lastSyncAction:null,timestamp:0}),[ce,we]=a.useState({gameType:"rps",moves:{},result:null,players:[],currentTurn:null}),[me,Ct]=a.useState({}),[kt,lr]=a.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_noise_gate"))||-50}catch{return-50}}),[Ot,qe]=a.useState(()=>{try{return localStorage.getItem("pawscord_noise_gate_enabled")!=="false"}catch{return!0}}),[Oe,zt]=a.useState({local:new Uint8Array(128),remote:{}}),[Qe,qt]=a.useState(()=>{try{return localStorage.getItem("pawscord_visualizer")==="true"}catch{return!1}}),[lt,dr]=a.useState(()=>{try{return JSON.parse(localStorage.getItem("pawscord_user_volumes"))||{}}catch{return{}}}),[At,et]=a.useState(new Set),[Fe,at]=a.useState(()=>{try{return localStorage.getItem("pawscord_spatial_audio")==="true"}catch{return!1}}),[dt,Fr]=a.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_vad_sensitivity"))||45}catch{return 45}}),[tt,Mt]=a.useState(()=>{try{const _=localStorage.getItem("pawscord_noise_suppression");return _===null?!0:_==="true"}catch{return!0}}),[Rr,Pr]=a.useState(()=>{try{return JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"medium"}catch{return"medium"}}),[Te,te]=a.useState(()=>{try{return localStorage.getItem("pawscord_screen_quality")||"1080p"}catch{return"1080p"}}),[ut,ur]=a.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_screen_fps"))||30}catch{return 30}}),[Kt,Ir]=a.useState(()=>{try{return localStorage.getItem("pawscord_system_audio")!=="false"}catch{return!1}}),[rt,Yt]=a.useState(()=>{try{return localStorage.getItem("pawscord_ptt_mode")==="true"}catch{return!1}}),[ye,Lr]=a.useState(()=>{try{return localStorage.getItem("pawscord_ptt_key")||"Space"}catch{return"Space"}}),[fr,Ut]=a.useState(!1),[Bt,mr]=a.useState(Ar),[$r,Ke]=a.useState(!1),[pr,xt]=a.useState(0),[xr,ht]=a.useState(1e3),ft=a.useRef(null),Vt=a.useRef(null);a.useRef(null);const Le=a.useCallback(async()=>{if(!n){console.log("üßä [RTC] No token, using STUN only"),mr(Ar),en(Ar);return}try{const _=await fetch(`${Tr}/api/voice/turn-credentials/`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!_.ok)throw _.status===401||_.status===403?console.warn("üßä [RTC] Auth failed, using STUN only"):console.warn(`üßä [RTC] TURN fetch failed (${_.status}), using STUN only`),new Error(`TURN fetch failed ${_.status}`);const R=await _.json(),I=[...Ar,...R?.iceServers||[]];mr(I),en(I),console.log("üßä [RTC] ICE servers updated with TURN credentials:",I.length,"servers")}catch(_){console.warn("üßä [RTC] Using STUN-only mode:",_.message),mr(Ar),en(Ar)}},[n]);a.useEffect(()=>{Le()},[Le]);const se=a.useRef(null),_e=a.useRef({}),gt=a.useRef(null),Ue=a.useRef(null),le=a.useRef(null),Ve=a.useRef(null),Ce=a.useRef(null),Nt=a.useRef([]),Dt=a.useRef(null),Jt=a.useRef(null),st=a.useRef(!1),Tt=a.useRef(!1),yt=a.useRef(null),hr=a.useRef(null),ro=a.useRef(null),Ne=a.useRef(null);a.useEffect(()=>{localStorage.setItem("pawscord_user_volumes",JSON.stringify(lt))},[lt]);const oo=a.useCallback((_,R)=>{dr(I=>({...I,[_]:Math.max(0,Math.min(100,R))}))},[]);a.useEffect(()=>{le.current=V},[V]),a.useEffect(()=>{Ve.current=re},[re]),a.useEffect(()=>{Ce.current=de},[de]),a.useEffect(()=>{if(!V||!d||y){r(!1);return}if(!Ue.current){const xe=window.AudioContext||window.webkitAudioContext;Ue.current=new xe,console.log("üéµ [Performance] Global AudioContext created (reused for all users)")}const _=Ue.current,R=_.createAnalyser();R.fftSize=2048,R.smoothingTimeConstant=.85;const I=R.frequencyBinCount,W=new Uint8Array(I),K=_.createMediaStreamSource(V);K.connect(R);let N=null;const O=dt,$=150;let Z=null;const ae=()=>{R.getByteFrequencyData(W);const xe=W.slice(10,100);xe.reduce((Re,it)=>Re+it,0)/xe.length>O&&(r(!0),N&&clearTimeout(N),N=setTimeout(()=>r(!1),$)),d&&!y&&(Z=requestAnimationFrame(ae))};return ae(),()=>{N&&clearTimeout(N),Z&&cancelAnimationFrame(Z),K.disconnect()}},[V,d,y,dt]);const vt=a.useCallback(()=>{if(!gt.current){const _=window.AudioContext||window.webkitAudioContext;gt.current=new _}gt.current.state==="suspended"&&gt.current.resume()},[]),qn=a.useCallback(async()=>{const _=!Fe;if(_)try{await Eo.initialize(),Object.keys(ue).forEach((R,I)=>{const W=ue[R],K=R.replace("_camera","").replace("_screen","");if(!R.includes("_camera")&&!R.includes("_screen")){const N=I/Object.keys(ue).length*2*Math.PI,O={x:Math.cos(N)*3,y:0,z:Math.sin(N)*3};Eo.addUser(K,W,O),console.log(`üéß [Spatial] Added ${K} at angle ${(N*180/Math.PI).toFixed(0)}¬∞`)}}),console.log("üéß [Spatial Audio] ENABLED - 3D audio active!")}catch(R){console.error("Failed to enable spatial audio:",R),ie.warning("Spatial Audio ba≈ülatƒ±lamadƒ±. Tarayƒ±cƒ±nƒ±z desteklemiyor olabilir.");return}else Eo.destroy(),console.log("üéß [Spatial Audio] DISABLED - Normal stereo audio");at(_),localStorage.setItem("pawscord_spatial_audio",_.toString())},[Fe,ue]),ko=a.useCallback(_=>{const R=Math.max(20,Math.min(80,_));Fr(R),localStorage.setItem("pawscord_vad_sensitivity",R.toString()),console.log(`üéöÔ∏è [VAD] Sensitivity updated: ${R}`)},[]),Or=a.useCallback(async()=>{const _=!tt;if(Mt(_),localStorage.setItem("pawscord_noise_suppression",_.toString()),V){const R=V.getAudioTracks()[0];if(R&&R.applyConstraints)try{await R.applyConstraints({noiseSuppression:_,echoCancellation:!0,autoGainControl:!0}),console.log(`üéõÔ∏è [Noise Suppression] ${_?"ENABLED":"DISABLED"}`)}catch(I){console.warn("[Noise] Failed to apply, trying fallback getUserMedia:",I);try{const K=(await navigator.mediaDevices.getUserMedia({audio:{noiseSuppression:_,echoCancellation:!0,autoGainControl:!0,googHighpassFilter:!0,googNoiseSuppression:_,googNoiseSuppression2:_,googEchoCancellation:!0,googAutoGainControl:!0,googTypingNoiseDetection:!0,sampleRate:{ideal:48e3},latency:{ideal:.01},channelCount:{ideal:1}}})).getAudioTracks()[0],N=new MediaStream([K]);j(N),le.current=N,console.log("[Noise] Enhanced fallback stream acquired")}catch(W){console.error("[Noise] Fallback failed:",W)}}}},[tt,V]),Ao=a.useCallback(_=>{const I=["low","medium","high","aggressive"].includes(_)?_:"high";Pr(I);try{const W=JSON.parse(localStorage.getItem("voice_settings")||"{}");W.audio={...W.audio,noiseSuppressionLevel:I},localStorage.setItem("voice_settings",JSON.stringify(W))}catch(W){console.error("[Noise Level] Storage error:",W)}console.log(`üéõÔ∏è [Noise Level] Updated to: ${I}`)},[]),Kn=a.useCallback(_=>{Ir(_),localStorage.setItem("pawscord_system_audio",_.toString()),console.log(`üîä [System Audio] ${_?"ENABLED":"DISABLED"}`)},[]),Bo=a.useCallback(()=>{const _=!rt;Yt(_),localStorage.setItem("pawscord_ptt_mode",_.toString()),_?(console.log("üéôÔ∏è [PTT] Mode enabled, VAD disabled"),le.current&&le.current.getAudioTracks().forEach(R=>{R.enabled=!1}),A(!0)):(console.log("üéôÔ∏è [PTT] Mode disabled, VAD enabled"),le.current&&le.current.getAudioTracks().forEach(R=>{R.enabled=!0}),A(!1))},[rt]),Yn=a.useCallback(_=>{Lr(_),localStorage.setItem("pawscord_ptt_key",_),console.log(`‚å®Ô∏è [PTT] Key updated to: ${_}`)},[]);a.useEffect(()=>{if(!rt||!d)return;const _=I=>{const W=I.target;W.tagName==="INPUT"||W.tagName==="TEXTAREA"||I.code===ye&&!I.repeat&&(Ut(!0),le.current&&le.current.getAudioTracks().forEach(K=>{K.enabled=!0}),console.log("üéôÔ∏è [PTT] Key pressed, mic ON"))},R=I=>{I.code===ye&&(Ut(!1),le.current&&le.current.getAudioTracks().forEach(W=>{W.enabled=!1}),console.log("üéôÔ∏è [PTT] Key released, mic OFF"))};return window.addEventListener("keydown",_),window.addEventListener("keyup",R),()=>{window.removeEventListener("keydown",_),window.removeEventListener("keyup",R)}},[rt,d,ye]);const Et=a.useCallback(_=>{te(_),localStorage.setItem("pawscord_screen_quality",_),console.log(`üì∫ [Screen Quality] Updated to: ${_}`)},[]),Jn=a.useCallback(_=>{const R=parseInt(_);ur(R),localStorage.setItem("pawscord_screen_fps",R.toString()),console.log(`üé¨ [Screen FPS] Updated to: ${R}`)},[]);a.useEffect(()=>{Fe&&Object.keys(ue).forEach((_,R)=>{const I=ue[_],W=_.replace("_camera","").replace("_screen","");if(!_.includes("_camera")&&!_.includes("_screen")&&!Eo.spatialNodes[W]){const K=R/Object.keys(ue).length*2*Math.PI,N={x:Math.cos(K)*3,y:0,z:Math.sin(K)*3};Eo.addUser(W,I,N),console.log(`üéß [Spatial] Auto-added ${W}`)}})},[ue,Fe]),a.useCallback(async _=>{try{const R=_.getAudioTracks();if(R.length===0)return _;const I=R[0],W={echoCancellation:{exact:!0},noiseSuppression:{exact:!0},autoGainControl:{exact:!0},googEchoCancellation:{exact:!0},googAutoGainControl:{exact:!0},googNoiseSuppression:{exact:!0},googHighpassFilter:{exact:!0},googTypingNoiseDetection:{exact:!0},googAudioMirroring:!1,googAutoGainControl2:{exact:!0},echoCancellationType:"system"};if(I.applyConstraints)try{await I.applyConstraints(W),Ge.audio("üéØ ADVANCED noise suppression enabled")}catch{await I.applyConstraints({echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),Ge.audio("‚úÖ Basic noise suppression enabled (fallback)")}return _}catch{return _}},[]);const no=a.useCallback(_=>{try{const I=JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"high",W={low:{gateThreshold:-70,compressorThreshold:-15,compressorRatio:2,highPassFreq:50,lowPassFreq:14e3,gateRelease:.3,speechThreshold:20},medium:{gateThreshold:-60,compressorThreshold:-20,compressorRatio:3,highPassFreq:80,lowPassFreq:12e3,gateRelease:.25,speechThreshold:25},high:{gateThreshold:-50,compressorThreshold:-25,compressorRatio:4,highPassFreq:100,lowPassFreq:1e4,gateRelease:.2,speechThreshold:30},aggressive:{gateThreshold:-45,compressorThreshold:-30,compressorRatio:6,highPassFreq:120,lowPassFreq:8e3,gateRelease:.15,speechThreshold:35}},K=W[I]||W.high;if(console.log(`üîä [Audio] Noise suppression level: ${I}`,K),!Ue.current){const Sr=window.AudioContext||window.webkitAudioContext;Ue.current=new Sr({sampleRate:48e3,latencyHint:"interactive"}),console.log("üéµ [Performance] Global AudioContext created (48kHz, interactive mode)")}const N=Ue.current;N.state==="suspended"&&N.resume().then(()=>{console.log("üéµ [Audio] AudioContext resumed from suspended state")});const O=N.createMediaStreamSource(_),$=N.createGain();let Z=!0;const ae=K.gateThreshold,xe=.005,De=K.gateRelease,Re=N.createDynamicsCompressor();Re.threshold.value=K.compressorThreshold,Re.knee.value=30,Re.ratio.value=Math.min(K.compressorRatio,4),Re.attack.value=.003,Re.release.value=.15;const it=N.createBiquadFilter();it.type="highpass",it.frequency.value=K.highPassFreq,it.Q.value=.707;const Qt=N.createBiquadFilter();Qt.type="lowpass",Qt.frequency.value=K.lowPassFreq,Qt.Q.value=.707;const bt=N.createBiquadFilter();bt.type="notch",bt.frequency.value=50,bt.Q.value=10;const _r=N.createBiquadFilter();_r.type="peaking",_r.frequency.value=6e3,_r.Q.value=1,_r.gain.value=-3;const er=N.createAnalyser();er.fftSize=2048,er.smoothingTimeConstant=.85;const tr=new Uint8Array(er.frequencyBinCount);let Po=new Float32Array(er.frequencyBinCount),Io=!0,lo=0;const Ha=()=>{if(er.getByteFrequencyData(tr),tr.reduce((It,fo)=>It+fo)/tr.length<20){if(lo++,lo>10)for(let It=0;It<tr.length;It++)Po[It]=Math.max(Po[It],tr[It])}else lo=0;Io&&lo>50&&(Io=!1,console.log("üéØ [Audio] Noise profile learned"))},na=K.speechThreshold||25,aa=setInterval(()=>{er.getByteFrequencyData(tr);const Sr=tr.slice(8,120),fo=Sr.reduce((sa,ia)=>sa+ia)/Sr.length-(Po[50]||0),Lo=N.currentTime;fo>na?Z||($.gain.setTargetAtTime(1,Lo,xe),Z=!0):Z&&($.gain.setTargetAtTime(0,Lo,De),Z=!1),(Io||Math.random()<.01)&&Ha()},30);O.connect(it),it.connect(bt),bt.connect(Qt),Qt.connect(_r),_r.connect(Re),Re.connect($),$.connect(er);const uo=N.createMediaStreamDestination();return $.connect(uo),uo.stream.addEventListener("inactive",()=>{clearInterval(aa),console.log("üéöÔ∏è [Audio] Filter chain cleaned up")}),console.log("üéöÔ∏è [Audio] Professional filters applied: Notch(50Hz) + De-Esser + Compressor + Noise Gate"),uo.stream}catch(R){return console.error("‚ùå [Audio] Could not apply professional filters:",R),_}},[]),Ye=a.useCallback(_=>{se.current?.readyState===WebSocket.OPEN?(Ge.signal(`Sending ${_.type} to ${_.receiver_username||"BROADCAST"}`),se.current.send(JSON.stringify({..._,sender_username:s}))):Ge.warn("[Signal] WS not ready, cannot send:",_.type)},[s]),gr=a.useCallback((_,R)=>{try{const W=_.getSenders().find($=>$.track?.kind==="video");if(!W){console.log("[Bandwidth] No video sender found, skipping adjustment");return}const K=W.getParameters();(!K.encodings||K.encodings.length===0)&&(K.encodings=[{}]);const N={low:{maxBitrate:3e5,maxFramerate:15},medium:{maxBitrate:8e5,maxFramerate:24},high:{maxBitrate:25e5,maxFramerate:30}},O=N[R]||N.medium;K.encodings[0].maxBitrate=O.maxBitrate,K.encodings[0].maxFramerate=O.maxFramerate,W.setParameters(K).then(()=>{console.log(`‚úÖ [Bandwidth] Video quality set to ${R.toUpperCase()} (${O.maxBitrate/1e3}kbps, ${O.maxFramerate}fps)`)}).catch($=>{console.warn("[Bandwidth] Failed to set parameters:",$)})}catch(I){console.warn("[Bandwidth] Error adjusting bandwidth:",I)}},[]),yr=a.useCallback((_,R)=>{const{track:I}=R;Ge.webrtc(`Track Received from ${_}:`,I.kind,I.id,"label:",I.label,"hint:",I.contentHint);const W=(I.label||"").toLowerCase(),K=W.includes("screen")||W.includes("window")||W.includes("monitor")||W.includes("display")||W.includes("tab")||I.contentHint==="detail",N=I.kind==="video"&&K?`${_}_screen`:I.kind==="video"?`${_}_camera`:_;if(console.log(`üìπ [WebRTC] Detected ${K?"SCREEN":"CAMERA"} track from ${_}, key: ${N}`),ge(O=>{const $=O[N];if($){if(!$.getTracks().some(ae=>ae.id===I.id)){$.addTrack(I);const ae=new MediaStream($.getTracks());return console.log(`[WebRTC] Added track to existing stream: ${N}`),{...O,[N]:ae}}return O}const Z=new MediaStream([I]);return console.log(`[WebRTC] Created new stream: ${N}`),{...O,[N]:Z}}),I.kind==="audio"){console.log(`[WebRTC] Audio track received from ${_}`),vt();try{const O=document.createElement("audio");O.id=`remote-audio-${_}`,O.srcObject=new MediaStream([I]),O.autoplay=!0,O.playsInline=!0;const $=document.getElementById(`remote-audio-${_}`);$&&$.remove(),O.style.display="none",document.body.appendChild(O),O.play().then(()=>{console.log(`üîä [Audio] Playing remote audio from ${_}`)}).catch(Z=>{console.warn(`[Audio] Autoplay blocked for ${_}, waiting for interaction:`,Z.message);const ae=()=>{O.play().catch(()=>{}),document.removeEventListener("click",ae)};document.addEventListener("click",ae,{once:!0})}),console.log(`‚úÖ [Audio] Created audio element for ${_}`)}catch(O){console.error(`[Audio] Failed to create audio element for ${_}:`,O)}}else I.kind==="video"&&console.log(`[WebRTC] Video track (${K?"screen":"camera"}) received from ${_}`)},[vt]),Je=a.useRef({}),vr=a.useCallback((_,R=!1)=>{if(_e.current[_])return _e.current[_];const I=new RTCPeerConnection(Ia);_e.current[_]=I;try{I.getTransceivers().forEach(K=>{if(K.sender&&K.sender.track?.kind==="audio"){const N=RTCRtpSender.getCapabilities("audio")?.codecs||[],O=N.filter(ae=>ae.mimeType.toLowerCase().includes("opus")),$=N.filter(ae=>!ae.mimeType.toLowerCase().includes("opus")),Z=[...O,...$];K.setCodecPreferences&&Z.length>0&&(K.setCodecPreferences(Z),console.log("üéµ [Codec] Opus prioritized for audio"))}})}catch(W){console.warn("[Codec] setCodecPreferences not supported:",W.message)}return typeof window<"u"&&(window.__pawscord_peer_connections__=_e.current),I.onicecandidate=W=>{W.candidate&&Ye({type:"candidate",candidate:W.candidate,receiver_username:_})},I.ontrack=W=>yr(_,W),le.current&&le.current.getTracks().forEach(W=>{Ge.webrtc(`Adding local audio track to PC for ${_}:`,W.kind),I.addTrack(W,le.current)}),I.oniceconnectionstatechange=()=>{console.log(`[WebRTC] ICE State (${_}):`,I.iceConnectionState),I.iceConnectionState==="failed"?(console.warn(`[WebRTC] ICE failed with ${_}, attempting restart...`),Ke(!0),Le().finally(()=>{I.restartIce(),setTimeout(()=>Ke(!1),1500)})):I.iceConnectionState==="disconnected"?(console.warn(`[WebRTC] ICE disconnected from ${_}, waiting for reconnection...`),Ke(!0),setTimeout(()=>{(I.iceConnectionState==="disconnected"||I.iceConnectionState==="failed")&&(console.error(`[WebRTC] ICE reconnection timeout for ${_}, cleaning up...`),ge(W=>{const K={...W};return delete K[_],K}),_e.current[_]&&(_e.current[_].close(),delete _e.current[_])),Ke(!1)},15e3)):I.iceConnectionState==="closed"?(console.log(`[WebRTC] ICE closed for ${_}, cleaning up...`),ge(W=>{const K={...W};return delete K[_],K}),_e.current[_]&&delete _e.current[_],Ke(!1)):I.iceConnectionState==="connected"?(console.log(`‚úÖ [WebRTC] ICE connected with ${_}`),Ke(!1),setTimeout(async()=>{try{(await I.getStats()).forEach(K=>{if(K.type==="candidate-pair"&&K.state==="succeeded"){const N=K.currentRoundTripTime*1e3;console.log(`üìä [Bandwidth] ${_} RTT: ${N.toFixed(0)}ms`),N>500?(console.warn(`‚ö†Ô∏è [Bandwidth] High latency detected (${N.toFixed(0)}ms), reducing video quality to LOW`),gr(I,"low")):N>300?(console.warn(`‚ö†Ô∏è [Bandwidth] Medium latency detected (${N.toFixed(0)}ms), reducing video quality to MEDIUM`),gr(I,"medium")):(console.log(`‚úÖ [Bandwidth] Good connection (${N.toFixed(0)}ms), using HIGH quality`),gr(I,"high"))}})}catch(W){console.warn("[Bandwidth] Failed to get stats:",W)}},2e3)):I.iceConnectionState==="checking"&&console.log(`üîç [WebRTC] ICE checking with ${_}`)},I},[Ye,yr]),Xt=a.useCallback(async _=>{if(_.type==="kicked"){console.warn("üî¥ [Voice] Kicked from channel:",_.reason,_.message),ie.warning(`Sesli Kanaldan √áƒ±karƒ±ldƒ±nƒ±z

Neden: ${_.message}`,5e3),Ft();return}if(_.type==="video_ended"){const O=_.from||_.username,$=_.streamType||"camera",Z=`${O}_${$}`;console.log(`üìπ [Video] ${O} ended ${$} stream`),ge(ae=>{const xe={...ae};return xe[Z]&&(xe[Z].getTracks().forEach(De=>De.stop()),delete xe[Z],console.log(`üìπ [Video] Cleaned up ${Z} stream`)),xe});return}if(_.type==="voice_reaction"){const O=_.from||_.username;console.log(`üí¨ [Reaction] ${O} sent: ${_.emoji}`),X({username:O,emoji:_.emoji,timestamp:Date.now()}),setTimeout(()=>{X($=>$&&$.timestamp===Date.now()?null:$)},3e3);return}if(_.type==="game_signal"){const O=_.from||_.username;console.log(`üéÆ [Game] ${O}:`,_.action,_.move),we($=>{const Z={...$};if(_.action==="start")Z.gameType=_.game_type,Z.players=[O,_.target].filter(Boolean),Z.moves={},Z.result=null,Z.currentTurn=O;else if(_.action==="move"){if(Z.moves={...$.moves,[O]:_.move},_.game_type==="rps"&&Object.keys(Z.moves).length===2){const[ae,xe]=Object.keys(Z.moves),De=Z.moves[ae],Re=Z.moves[xe];De===Re?Z.result={winner:null,type:"draw"}:{rock:"scissors",scissors:"paper",paper:"rock"}[De]===Re?Z.result={winner:ae,loser:xe}:Z.result={winner:xe,loser:ae}}}else _.action==="end"&&(Z.result=_.result||{type:"cancelled"});return Z});return}if(_.type==="cinema_sync"){const O=_.from||_.username;console.log(`üé¨ [Cinema] ${O}:`,_.action),ke($=>({...$,isActive:_.action!=="stop",url:_.url||$.url,playing:_.action==="play",time:_.time||$.time,lastSyncAction:_.action,timestamp:Date.now(),syncedBy:O}));return}if(_.type==="current_users"){console.log("[Voice] Received current users from backend:",_.users),p(O=>{const $=_.users||[],Z=$.some(De=>De.username===s),ae=O.find(De=>De.username===s);let xe=[...$];return!Z&&ae?(console.log("[Voice] Backend list missing me, adding from local state"),xe=[ae,...$]):!Z&&s&&(console.log("[Voice] Backend list missing me, adding with defaults"),xe=[{username:s,isMuted:y,isCameraOn:w,isScreenSharing:v,isTalking:c},...$]),console.log("‚úÖ [Voice] Final connected users:",xe.map(De=>De.username)),xe});return}const R=_.from||_.sender_username||_.username,{type:I,sdp:W,candidate:K}=_;if(!R){console.error("[Signal] No sender username found in message:",_);return}if(R===s){console.log(`[Signal] Ignoring ${I} from self (${R})`);return}console.log(`[Signal] Received ${I} from ${R}`,_);let N=_e.current[R];if(!N)if(I==="offer")N=vr(R,!1);else if(I==="user_joined"){if(p(O=>O.find($=>$.username===R)?O:[...O,{username:R,isMuted:!1,isCameraOn:!1,isScreenSharing:!1}]),N=vr(R,!0),console.log(`[user_joined] Checking streams for ${R}:`,{hasAudio:!!le.current,hasCamera:!!Ve.current,hasScreen:!!Ce.current,cameraEnabled:w,screenEnabled:v}),le.current){const O=N.getSenders();le.current.getTracks().forEach($=>{O.some(ae=>ae.track===$)||(Ge.webrtc(`Adding audio track to new peer ${R}:`,$.kind),N.addTrack($,le.current))}),console.log(`‚úÖ [user_joined] Audio track added to ${R}`)}if(Ve.current){const O=N.getSenders();Ve.current.getTracks().forEach($=>{O.some(ae=>ae.track===$)||(Ge.webrtc(`Adding camera track to new peer ${R}:`,$.kind),N.addTrack($,Ve.current))}),console.log(`‚úÖ [user_joined] Camera track added to ${R}`)}if(Ce.current){const O=N.getSenders();Ce.current.getTracks().forEach($=>{O.some(ae=>ae.track===$)||(Ge.webrtc(`Adding screen track to new peer ${R}:`,$.kind),N.addTrack($,Ce.current))}),console.log(`‚úÖ [user_joined] Screen track added to ${R}`)}try{const O=await N.createOffer();await N.setLocalDescription(O),Ye({type:"offer",sdp:N.localDescription,target:R}),Ge.signal(`Sent offer to ${R}`),console.log(`‚úÖ [user_joined] Offer successfully sent to ${R}`)}catch(O){Ge.error("Offer creation failed",O),console.error(`‚ùå [user_joined] Failed to create/send offer to ${R}:`,O)}return}else if(I==="user_left"){console.log(`[Signal] ${R} left the channel`),p($=>$.filter(Z=>Z.username!==R));const O=document.getElementById(`remote-audio-${R}`);O&&(O.pause(),O.srcObject=null,O.remove(),console.log(`üîä [Audio] Removed audio element for ${R}`)),ge($=>{const Z={...$};return delete Z[R],delete Z[`${R}_camera`],delete Z[`${R}_screen`],Z}),_e.current[R]&&(_e.current[R].close(),delete _e.current[R]);return}else if(I==="stream_update"){if(console.log(`[Signal] ${R} stream update:`,_),p(O=>O.map($=>$.username===R?{...$,isCameraOn:_.streamType==="camera"?_.enabled:$.isCameraOn,isScreenSharing:_.streamType==="screen"?_.enabled:$.isScreenSharing}:$)),_.enabled&&!_e.current[R]){console.log(`[stream_update] Creating PC for ${R} due to ${_.streamType} stream`);const O=vr(R,!0);le.current&&le.current.getTracks().forEach($=>{Ge.webrtc(`Adding audio track to ${R}:`,$.kind),O.addTrack($,le.current)}),Ve.current&&Ve.current.getTracks().forEach($=>{Ge.webrtc(`Adding camera track to ${R}:`,$.kind),O.addTrack($,Ve.current)}),Ce.current&&Ce.current.getTracks().forEach($=>{Ge.webrtc(`Adding screen track to ${R}:`,$.kind),O.addTrack($,Ce.current)});try{const $=await O.createOffer();await O.setLocalDescription($),Ye({type:"offer",sdp:O.localDescription,target:R}),Ge.signal(`Sent offer to ${R} after stream_update`)}catch($){Ge.error(`Failed to create offer for ${R}:`,$)}}return}else{console.warn(`[Signal] Ignored ${I} from ${R} (No PC)`);return}try{if(I==="offer"){if(N.signalingState!=="stable"){console.warn(`[Signal] Ignoring offer from ${R}, already in state: ${N.signalingState}`);return}await N.setRemoteDescription(new RTCSessionDescription(W));const O=await N.createAnswer();if(await N.setLocalDescription(O),Ye({type:"answer",sdp:N.localDescription,target:R}),console.log(`[Signal] Sent answer to ${R}`),Je.current[R]){console.log(`[Signal] Processing ${Je.current[R].length} buffered candidates for ${R}`);for(const $ of Je.current[R])try{await N.addIceCandidate($)}catch(Z){console.warn("[Signal] Failed to add buffered candidate:",Z)}delete Je.current[R]}}else if(I==="answer"){if(N.signalingState!=="have-local-offer"){console.warn(`[WebRTC] Error handling answer from ${R}: InvalidStateError: Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': Failed to set remote answer sdp: Called in wrong state: ${N.signalingState}`);return}if(await N.setRemoteDescription(new RTCSessionDescription(W)),console.log(`[Signal] Set remote description from ${R}`),Je.current[R]){console.log(`[Signal] Processing ${Je.current[R].length} buffered candidates for ${R}`);for(const O of Je.current[R])try{await N.addIceCandidate(O)}catch($){console.warn("[Signal] Failed to add buffered candidate:",$)}delete Je.current[R]}}else I==="candidate"&&(N.remoteDescription?(await N.addIceCandidate(new RTCIceCandidate(K)),console.log(`[Signal] Added ICE candidate from ${R}`)):(console.log(`[Signal] Buffering ICE candidate from ${R} (no remote description yet)`),Je.current[R]||(Je.current[R]=[]),Je.current[R].push(new RTCIceCandidate(K))))}catch(O){console.error(`[WebRTC] Error handling ${I} from ${R}:`,O)}},[s,vr,Ye]),Ft=a.useCallback(()=>{if(st.current){console.log("[Voice] Already leaving, skipping...");return}if(st.current=!0,console.log("[Voice] Leaving voice room..."),se.current&&se.current.readyState===WebSocket.OPEN)try{se.current.send(JSON.stringify({type:"user_leaving",sender_username:s}))}catch(_){console.warn("[Voice] Failed to send leave signal:",_)}le.current&&(le.current.getTracks().forEach(_=>{_.stop(),console.log(`[Voice] Stopped track: ${_.kind}`)}),j(null),le.current=null),re&&(re.getTracks().forEach(_=>{_.stop(),console.log(`[Voice] Stopped camera track: ${_.kind}`)}),ne(null),C(!1)),de&&(de.getTracks().forEach(_=>{_.stop(),console.log(`[Voice] Stopped screen track: ${_.kind}`)}),he(null),h(!1)),Object.entries(_e.current).forEach(([_,R])=>{console.log(`[Voice] Closing PC for ${_}`),R.close()}),_e.current={},ge({}),Je.current={},se.current&&(se.current.onclose=null,se.current.close(),se.current=null),x(!1),m(null),b(!1),A(!1),k(!1),o&&(console.log("[Voice] Stopping recording on leave"),Dt.current&&Dt.current.state!=="inactive"&&Dt.current.stop(),Jt.current&&(clearInterval(Jt.current),Jt.current=null),u(!1),P(0)),yt.current&&(clearInterval(yt.current),yt.current=null),ft.current&&(clearTimeout(ft.current),ft.current=null,console.log("[Voice] Cleared pending WebSocket reconnect")),Vt.current&&(clearInterval(Vt.current),Vt.current=null),xt(0),ht(1e3),Ke(!1),setTimeout(()=>{st.current=!1},100)},[s,re,de,o]),Rt=a.useCallback(async _=>{if(d&&S&&S!==_&&!Tt.current&&(console.log(`[Voice] Switching from ${S} to ${_}`),Tt.current=!0,await new Promise(I=>{if(se.current){const W=se.current,K=W.onclose;W.onclose=N=>{K&&K(N),console.log("[Voice] Old WebSocket fully closed"),I()},W.close(1e3,"Switching channel"),se.current=null,setTimeout(I,2e3)}else I()}),Object.values(_e.current).forEach(I=>{I.close()}),_e.current={},ge({}),await new Promise(I=>setTimeout(I,150)),Tt.current=!1,console.log(`[Voice] Now joining ${_}`)),d&&S===_){console.log(`[Voice] Already in ${_}, skipping join`);return}if(Tt.current){console.log("[Voice] Currently switching channels, skipping...");return}console.log(`[Voice] Joining room: ${_}`),b(!0),m(_);try{Bt&&Bt.length>0&&(en(Bt),console.log(`üîê [TURN] Using cached ICE servers (${Bt.length})`));const R=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:48e3},sampleSize:{ideal:16},channelCount:{ideal:1},googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,googAudioMirroring:!1,latency:{ideal:.02}},video:!1});console.log("[Voice] üé§ Got microphone access with AGGRESSIVE noise suppression");let I=R;if(tt)try{I=no(R),console.log("üéöÔ∏è [Voice] Professional audio filters APPLIED")}catch(N){console.warn("‚ö†Ô∏è [Voice] Could not apply professional filters, using raw stream:",N),I=R}j(I),le.current=I,console.log("üé§ [Voice] Stream ready with noise suppression"),console.log("üé§ [Voice] Stream tracks:",I.getAudioTracks().map(N=>({id:N.id,label:N.label,enabled:N.enabled,readyState:N.readyState,muted:N.muted}))),vt(),yt.current||(yt.current=setInterval(async()=>{const O=le.current?.getAudioTracks()?.[0];if(!(!d||st.current)&&(gt.current?.state==="suspended"&&await gt.current.resume().catch(()=>{}),!O||O.readyState==="ended"||!O.enabled&&!y&&!rt))try{const $=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,googEchoCancellation:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,sampleRate:48e3,channelCount:1},video:!1});j($),le.current=$;const Z=$.getAudioTracks()[0];Object.values(_e.current).forEach(ae=>{ae.getSenders().filter(xe=>xe.track?.kind==="audio").forEach(xe=>xe.replaceTrack(Z).catch(()=>{}))}),console.log("üîÑ [Mic Watchdog] Audio track yenilendi (basit stream)")}catch($){console.warn("[Mic Watchdog] Mic refresh failed:",$)}},8e3));const W=`${Hn}://${jn}/ws/voice/${_}/?token=${n}`;console.log(`[Voice] Connecting to ${W}`);const K=new WebSocket(W);se.current=K,K.onopen=()=>{console.log("üé§ [VoiceWS] Connected to room:",_),x(!0),b(!1),p(N=>N.some($=>$.username===s)?N:(console.log("‚úÖ [Voice] Added self to connected users immediately"),[{username:s,isMuted:y,isCameraOn:w,isScreenSharing:v,isTalking:!1},...N]))},K.onmessage=N=>{try{const O=JSON.parse(N.data);console.log("[VoiceWS] Message received:",O.type||O),Xt(O)}catch(O){console.error("[VoiceWS] Parse error:",O)}},K.onerror=N=>{console.error("üé§ [VoiceWS] Error:",N),b(!1),!st.current&&!Tt.current&&console.warn("[VoiceWS] Error occurred, reconnect will be attempted on close")},K.onclose=N=>{if(console.log("üé§ [VoiceWS] Disconnected, code:",N.code,"reason:",N.reason),st.current||Tt.current){console.log("[VoiceWS] User intentionally left or switching, not reconnecting"),Ke(!1),xt(0),ht(1e3),ft.current&&(clearTimeout(ft.current),ft.current=null);return}if(N.code===1e3){console.log("[VoiceWS] Normal closure (1000), cleaning up"),Ft();return}if(_&&d){const $=pr+1;if($>10){console.error("[VoiceWS] ‚ùå Max retry limit reached (10), giving up"),ie.error("Sesli sohbet baƒülantƒ±sƒ± 10 denemeden sonra kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.",5e3),Ft(),xt(0),ht(1e3);return}const Z=Math.min(xr,3e4);console.warn(`[VoiceWS] üîÑ Unexpected disconnect (code: ${N.code})`),console.log(`[VoiceWS] üîÑ Reconnect attempt ${$}/10 in ${Z}ms...`),Ke(!0),xt($),ft.current&&clearTimeout(ft.current),ft.current=setTimeout(()=>{!st.current&&!Tt.current&&_?(console.log(`[VoiceWS] ‚ö° Executing reconnect attempt ${$} to ${_}`),ht(ae=>Math.min(ae*2,3e4)),Rt(_).then(()=>{console.log("[VoiceWS] ‚úÖ Reconnection successful! Resetting retry counters."),xt(0),ht(1e3),Ke(!1)}).catch(ae=>{console.error("[VoiceWS] Reconnection failed:",ae)})):(console.log("[VoiceWS] Reconnect cancelled (user left or room changed)"),Ke(!1),xt(0),ht(1e3))},Z)}else console.log("[VoiceWS] Not in voice or no room, cleaning up"),Ft()}}catch(R){console.error("Voice Join Error:",R),b(!1),Tt.current=!1,R.name==="NotAllowedError"?ie.warning("Mikrofon izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan izin verin.",5e3):R.name==="NotFoundError"?ie.warning("Mikrofon bulunamadƒ±. L√ºtfen bir mikrofon baƒülayƒ±n."):ie.error("Sesli sohbete baƒülanƒ±lamadƒ±: "+R.message)}},[d,S,n,Xt,vt,Ft]),Xn=a.useCallback(()=>{A(_=>{const R=!_;return le.current&&le.current.getAudioTracks().forEach(I=>{I.enabled=!R}),se.current?.readyState===WebSocket.OPEN&&se.current.send(JSON.stringify({type:"mic_off_state",is_mic_off:R})),console.log(`[Voice] Mute: ${R}`),R})},[]),Do=a.useCallback(()=>{k(_=>{const R=!_;return se.current?.readyState===WebSocket.OPEN&&se.current.send(JSON.stringify({type:"deaf_state",is_deafened:R})),console.log(`[Voice] Deafened: ${R}`),R})},[]),zr=a.useRef(!1),ao=a.useCallback(async()=>{if(zr.current){console.log("[Camera] Toggle already in progress, skipping...");return}zr.current=!0;try{const _=Ve.current;if(_){console.log("[Camera] Stopping camera stream"),C(!1),ne(null),Ve.current=null,_.getTracks().forEach(I=>{I.stop(),console.log(`[Camera] Stopped ${I.kind} track`)});const R=[];for(const[I,W]of Object.entries(_e.current)){const K=W.getSenders();let N=!1;for(const O of K)if(O.track&&O.track.kind==="video"&&O.track.contentHint!=="detail")try{W.removeTrack(O),N=!0,console.log(`[Camera] Removed video track from peer: ${I}`)}catch($){console.warn(`[Camera] Failed to remove track from ${I}:`,$)}if(N){const O=(async()=>{try{const $=await W.createOffer();await W.setLocalDescription($),Ye({type:"offer",sdp:W.localDescription,target:I}),console.log(`[Camera] Sent renegotiation offer to ${I} after removal`)}catch($){console.warn(`[Camera] Renegotiation failed with ${I}:`,$)}})();R.push(O)}}se.current?.readyState===WebSocket.OPEN&&(se.current.send(JSON.stringify({type:"camera_state",is_camera_on:!1})),se.current.send(JSON.stringify({type:"video_ended",streamType:"camera"})),console.log("[Camera] Sent video_ended signal")),Promise.all(R).catch(I=>console.warn("[Camera] Some renegotiations failed:",I))}else{console.log("[Camera] Starting camera stream");const R=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}});if(!zr.current){console.log("[Camera] Toggle was cancelled, stopping new stream"),R.getTracks().forEach(K=>K.stop());return}console.log("[Camera] Got camera stream:",R.id),Ve.current=R,ne(R),C(!0);const I=R.getVideoTracks()[0];I.onended=()=>{console.log("[Camera] Track ended by browser/system"),ne(null),Ve.current=null,C(!1),se.current?.readyState===WebSocket.OPEN&&se.current.send(JSON.stringify({type:"video_ended",streamType:"camera"}))};try{I.contentHint="motion"}catch(K){console.warn("[Camera] contentHint not supported:",K)}const W=[];for(const[K,N]of Object.entries(_e.current)){const O=(async()=>{try{N.addTrack(I,R),console.log(`[Camera] Added video track to peer: ${K}`);const $=await N.createOffer();await N.setLocalDescription($),Ye({type:"offer",sdp:N.localDescription,target:K}),console.log(`[Camera] Sent renegotiation offer to ${K}`)}catch($){console.warn(`[Camera] Failed to add/renegotiate with ${K}:`,$)}})();W.push(O)}se.current?.readyState===WebSocket.OPEN&&(se.current.send(JSON.stringify({type:"camera_state",is_camera_on:!0})),console.log("[Camera] State sent to backend: is_camera_on=true")),Promise.all(W).catch(K=>console.warn("[Camera] Some track additions failed:",K))}}catch(_){console.error("[Camera] Error:",_),_.name==="NotAllowedError"?ie.warning("Kamera izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan kamera iznini a√ßƒ±n.",5e3):_.name==="NotFoundError"?ie.warning("Kamera bulunamadƒ±. L√ºtfen bir kamera baƒülayƒ±n."):ie.error("Kamera ba≈ülatƒ±lamadƒ±: "+_.message),C(!1),Ve.current=null,ne(null)}finally{setTimeout(()=>{zr.current=!1},300)}},[Ye]),Zn=ao,Er=a.useRef(!1),Qn=a.useCallback(async()=>{if(Er.current){console.log("[Screen] Toggle already in progress, skipping...");return}Er.current=!0;try{const _=Ce.current;if(_){console.log("[Screen] Stopping screen share"),h(!1),he(null),Ce.current=null,_.getTracks().forEach(I=>{I.stop(),console.log(`[Screen] Stopped ${I.kind} track`)});const R=[];for(const[I,W]of Object.entries(_e.current)){const K=W.getSenders();let N=!1;for(const O of K)if(O.track&&O.track.contentHint==="detail")try{W.removeTrack(O),N=!0,console.log(`[Screen] Removed screen track from peer: ${I}`)}catch($){console.warn(`[Screen] Failed to remove track from ${I}:`,$)}if(N){const O=(async()=>{try{const $=await W.createOffer();await W.setLocalDescription($),Ye({type:"offer",sdp:W.localDescription,target:I}),console.log(`[Screen] Sent renegotiation offer to ${I} after removal`)}catch($){console.warn(`[Screen] Renegotiation failed with ${I}:`,$)}})();R.push(O)}}se.current?.readyState===WebSocket.OPEN&&(se.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),se.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})),console.log("[Screen] Sent video_ended signal")),Promise.all(R).catch(I=>console.warn("[Screen] Some renegotiations failed:",I))}else{console.log("[Screen] Starting screen share");const R={"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"4K":{width:3840,height:2160}},I=R[Te]||R["1080p"];console.log(`üé¨ [Screen] Quality: ${Te}, FPS: ${ut}`);const W=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",displaySurface:"monitor",width:{ideal:I.width},height:{ideal:I.height},frameRate:{ideal:ut}},audio:Kt});if(!Er.current){console.log("[Screen] Toggle was cancelled, stopping new stream"),W.getTracks().forEach(O=>O.stop());return}console.log("[Screen] Got screen stream:",W.id),W.getVideoTracks()[0].onended=()=>{console.log("[Screen] User stopped sharing via browser"),he(null),Ce.current=null,h(!1),se.current?.readyState===WebSocket.OPEN&&(se.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),se.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})))},Ce.current=W,he(W),h(!0);const K=W.getVideoTracks()[0];try{K.contentHint="detail"}catch(O){console.warn("[Screen] contentHint not supported:",O)}const N=[];for(const[O,$]of Object.entries(_e.current)){const Z=(async()=>{try{$.addTrack(K,W),console.log(`[Screen] Added screen track to peer: ${O}`);const ae=await $.createOffer();await $.setLocalDescription(ae),Ye({type:"offer",sdp:$.localDescription,target:O}),console.log(`[Screen] Sent renegotiation offer to ${O}`)}catch(ae){console.error(`[Screen] Failed to add track to ${O}:`,ae.message)}})();N.push(Z)}se.current?.readyState===WebSocket.OPEN&&se.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!0})),Promise.all(N).catch(O=>console.warn("[Screen] Some track additions failed:",O))}}catch(_){console.error("[Screen] Error:",_),_.name==="NotAllowedError"?console.log("[Screen] User cancelled screen share"):_.name==="NotFoundError"?ie.warning("Ekran payla≈üƒ±mƒ± desteklenmiyor."):ie.error("Ekran payla≈üƒ±mƒ± ba≈ülatƒ±lamadƒ±: "+_.message),h(!1),Ce.current=null,he(null)}finally{setTimeout(()=>{Er.current=!1},300)}},[Ye,Te,ut,Kt]),so=a.useCallback(()=>{if(!d||o){console.warn("[Recording] Cannot start - not in voice or already recording");return}try{const _=new(window.AudioContext||window.webkitAudioContext),R=_.createMediaStreamDestination();V&&_.createMediaStreamSource(V).connect(R),Object.entries(ue).forEach(([W,K])=>{!W.includes("_camera")&&!W.includes("_screen")&&K.getAudioTracks().length>0&&_.createMediaStreamSource(K).connect(R)});const I=new MediaRecorder(R.stream,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});Nt.current=[],I.ondataavailable=W=>{W.data.size>0&&Nt.current.push(W.data)},I.onstop=()=>{const W=new Blob(Nt.current,{type:"audio/webm"}),K=URL.createObjectURL(W),N=document.createElement("a");N.href=K,N.download=`pawscord-voice-${S}-${Date.now()}.webm`,N.click(),URL.revokeObjectURL(K),console.log("‚úÖ [Recording] Saved recording")},I.start(1e3),Dt.current=I,u(!0),P(0),Jt.current=setInterval(()=>{P(W=>W+1)},1e3),console.log("üî¥ [Recording] Started")}catch(_){console.error("[Recording] Start error:",_),ie.error("Kayƒ±t ba≈ülatƒ±lamadƒ±: "+_.message)}},[d,o,V,ue,S]),io=a.useCallback(()=>{o&&(Dt.current&&Dt.current.state!=="inactive"&&Dt.current.stop(),Jt.current&&(clearInterval(Jt.current),Jt.current=null),Dt.current=null,u(!1),P(0),console.log("‚èπÔ∏è [Recording] Stopped"))},[o]),To=a.useCallback(()=>{if(Nt.current.length===0){ie.warning("Hen√ºz kayƒ±t yok!");return}const _=new Blob(Nt.current,{type:"audio/webm"}),R=URL.createObjectURL(_),I=document.createElement("a");I.href=R,I.download=`pawscord-voice-${S||"recording"}-${Date.now()}.webm`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(R),console.log("üíæ [Recording] Downloaded manually")},[S]),ea=a.useCallback(async(_,R=50)=>{if(!V||!d){console.warn("[VoiceEffect] No stream or not in voice");return}try{if(hr.current&&(hr.current.forEach($=>{try{$.disconnect()}catch{}}),hr.current=null),!_){q(null),console.log("üéµ [VoiceEffect] Cleared");return}const I=Ue.current||new AudioContext;Ue.current||(Ue.current=I);const W=I.createMediaStreamSource(V),K=I.createMediaStreamDestination(),N=[],O=R/100;switch(_){case"robot":{const $=I.createOscillator(),Z=I.createGain(),ae=I.createWaveShaper();$.type="sawtooth",$.frequency.value=50+O*100,Z.gain.value=.3+O*.4;const xe=new Float32Array(256);for(let De=0;De<256;De++){const Re=De/128-1;xe[De]=Math.tanh(Re*(1+O*3))}ae.curve=xe,$.connect(Z),W.connect(ae),ae.connect(K),$.start(),N.push($,Z,ae);break}case"echo":{const $=I.createDelay(1),Z=I.createGain(),ae=I.createGain(),xe=I.createGain();$.delayTime.value=.1+O*.4,Z.gain.value=.2+O*.5,ae.gain.value=.3+O*.4,xe.gain.value=1-O*.3,W.connect(xe),W.connect($),$.connect(Z),Z.connect($),$.connect(ae),xe.connect(K),ae.connect(K),N.push($,Z,ae,xe);break}case"deep":{const $=I.createBiquadFilter(),Z=I.createGain();$.type="lowshelf",$.frequency.value=500,$.gain.value=10+O*15,Z.gain.value=1.2,W.connect($),$.connect(Z),Z.connect(K),N.push($,Z);break}case"high":{const $=I.createBiquadFilter(),Z=I.createGain();$.type="highshelf",$.frequency.value=1e3,$.gain.value=8+O*12,Z.gain.value=.9,W.connect($),$.connect(Z),Z.connect(K),N.push($,Z);break}case"radio":{const $=I.createBiquadFilter(),Z=I.createBiquadFilter(),ae=I.createWaveShaper();$.type="lowpass",$.frequency.value=3e3-O*1e3,Z.type="highpass",Z.frequency.value=300+O*200;const xe=new Float32Array(256);for(let De=0;De<256;De++){const Re=De/128-1;xe[De]=Math.sign(Re)*Math.pow(Math.abs(Re),.8)}ae.curve=xe,W.connect(Z),Z.connect($),$.connect(ae),ae.connect(K),N.push($,Z,ae);break}case"reverb":{const $=I.createConvolver(),Z=I.createGain(),ae=I.createGain(),xe=I.sampleRate,De=xe*(.5+O*2),Re=I.createBuffer(2,De,xe);for(let it=0;it<2;it++){const Qt=Re.getChannelData(it);for(let bt=0;bt<De;bt++)Qt[bt]=(Math.random()*2-1)*Math.pow(1-bt/De,2)}$.buffer=Re,Z.gain.value=.3+O*.5,ae.gain.value=1-O*.2,W.connect(ae),W.connect($),$.connect(Z),ae.connect(K),Z.connect(K),N.push($,Z,ae);break}default:W.connect(K)}hr.current=N,ro.current=K.stream,q(_),U(R),console.log(`üéµ [VoiceEffect] Applied: ${_} at ${R}%`)}catch(I){console.error("[VoiceEffect] Error:",I),ie.error("Ses efekti uygulanamadƒ±")}},[V,d]),Fo=a.useCallback(_=>{if(!se.current||se.current.readyState!==WebSocket.OPEN){console.warn("[Reaction] WebSocket not connected");return}se.current.send(JSON.stringify({type:"voice_reaction",emoji:_})),console.log(`üí¨ [Reaction] Sent: ${_}`)},[]),Wa=a.useCallback((_,R,I=null,W=null)=>{if(!se.current||se.current.readyState!==WebSocket.OPEN){console.warn("[Game] WebSocket not connected");return}se.current.send(JSON.stringify({type:"game_signal",game_type:_,action:R,move:I,target:W})),console.log(`üéÆ [Game] Sent: ${_} - ${R}`,I)},[]),ta=a.useCallback((_,R=0,I=null)=>{if(!se.current||se.current.readyState!==WebSocket.OPEN){console.warn("[Cinema] WebSocket not connected");return}se.current.send(JSON.stringify({type:"cinema_sync",action:_,time:R,url:I})),console.log(`üé¨ [Cinema] Sent: ${_}`,{time:R,url:I})},[]),ra=a.useCallback(()=>{Ne.current||(Ne.current=setInterval(async()=>{const _={};for(const[R,I]of Object.entries(_e.current))try{const W=await I.getStats();let K=null,N=null;W.forEach(O=>{O.type==="inbound-rtp"&&O.kind==="audio"&&(K={packetsReceived:O.packetsReceived,packetsLost:O.packetsLost,jitter:O.jitter,bytesReceived:O.bytesReceived}),O.type==="inbound-rtp"&&O.kind==="video"&&(N={packetsReceived:O.packetsReceived,packetsLost:O.packetsLost,framesDecoded:O.framesDecoded,frameWidth:O.frameWidth,frameHeight:O.frameHeight}),O.type==="candidate-pair"&&O.state==="succeeded"&&(_[R]={..._[R],rtt:O.currentRoundTripTime*1e3,connectionType:O.localCandidateId?.includes("relay")?"TURN":"STUN/Direct"})}),_[R]={..._[R],audio:K,video:N,connectionState:I.connectionState,iceConnectionState:I.iceConnectionState}}catch(W){console.warn(`[Stats] Failed to get stats for ${R}:`,W)}Ct(_)},2e3),console.log("üìä [Stats] Monitoring started"))},[]),Mr=a.useCallback(()=>{Ne.current&&(clearInterval(Ne.current),Ne.current=null,Ct({}),console.log("üìä [Stats] Monitoring stopped"))},[]),Ro=a.useCallback(_=>{qe(_),localStorage.setItem("pawscord_noise_gate_enabled",_.toString()),console.log(`üéöÔ∏è [Noise Gate] ${_?"ENABLED":"DISABLED"}`)},[]),co=a.useCallback(_=>{const R=Math.max(-80,Math.min(-20,_));lr(R),localStorage.setItem("pawscord_noise_gate",R.toString()),console.log(`üéöÔ∏è [Noise Gate] Threshold: ${R}dB`)},[]),oa=a.useCallback(_=>{qt(_),localStorage.setItem("pawscord_visualizer",_.toString()),console.log(`üìä [Visualizer] ${_?"ENABLED":"DISABLED"}`)},[]),Zt=a.useRef(null),Pt=a.useRef(null),br=a.useCallback(()=>{if(!(!Qe||!V)&&!Zt.current)try{Ue.current||(Ue.current=new(window.AudioContext||window.webkitAudioContext));const _=Ue.current,R=_.createAnalyser();R.fftSize=256;const I=_.createMediaStreamSource(V);I.connect(R),Pt.current={local:R,localSource:I,remote:{}},Object.entries(ue).forEach(([W,K])=>{if(!W.includes("_camera")&&!W.includes("_screen")){const N=_.createAnalyser();N.fftSize=256;const O=_.createMediaStreamSource(K);O.connect(N),Pt.current.remote[W]={analyser:N,source:O}}}),Zt.current=setInterval(()=>{const W=new Uint8Array(128);Pt.current.local.getByteFrequencyData(W);const K={};Object.entries(Pt.current.remote).forEach(([N,{analyser:O}])=>{const $=new Uint8Array(128);O.getByteFrequencyData($),K[N]=$}),zt({local:W,remote:K})},33),console.log("üìä [Visualizer] Started")}catch(_){console.error("[Visualizer] Failed to start:",_)}},[Qe,V,ue]),Ur=a.useCallback(()=>{if(Zt.current&&(clearInterval(Zt.current),Zt.current=null),Pt.current){try{Pt.current.localSource?.disconnect(),Object.values(Pt.current.remote).forEach(({source:_})=>{_?.disconnect()})}catch{}Pt.current=null}zt({local:new Uint8Array(128),remote:{}}),console.log("üìä [Visualizer] Stopped")},[]);return a.useEffect(()=>(d&&Qe?br():Ur(),()=>Ur()),[d,Qe,br,Ur]),a.useEffect(()=>()=>{o&&io(),yt.current&&(clearInterval(yt.current),yt.current=null),Mr()},[o,io,Mr]),e.createElement(Qi.Provider,{value:{isInVoice:d,isConnecting:B,currentRoom:S,isMuted:y,isDeafened:g,isVideoEnabled:w,isScreenSharing:v,isTalking:c,isSpatialAudioEnabled:Fe,vadSensitivity:dt,isNoiseSuppressionEnabled:tt,screenShareQuality:Te,screenShareFPS:ut,isRecording:o,recordingDuration:l,isPTTMode:rt,isPTTActive:fr,pttKey:ye,includeSystemAudio:Kt,localStream:V,localAudioStream:V,localCameraStream:re,localScreenStream:de,remoteStreams:ue,connectedUsers:be,remoteVolumes:lt,mutedUsers:At,joinVoiceRoom:Rt,leaveVoiceRoom:Ft,joinChannel:Rt,leaveChannel:Ft,setRemoteVolume:oo,setIsMuted:A,setIsDeafened:k,setIsVideoEnabled:C,setIsScreenSharing:h,toggleMute:Xn,toggleDeafened:Do,toggleVideo:ao,toggleCamera:Zn,toggleScreenShare:Qn,toggleSpatialAudio:qn,updateVadSensitivity:ko,toggleNoiseSuppression:Or,updateScreenQuality:Et,updateScreenFPS:Jn,toggleSystemAudio:Kn,togglePTTMode:Bo,updatePTTKey:Yn,startRecording:so,stopRecording:io,downloadRecording:To,sendSignal:Ye,isPttActive:fr,sendReaction:Fo,lastReaction:J,applyVoiceEffect:ea,activeVoiceEffect:L,voiceEffectIntensity:F,setVoiceEffectIntensity:U,cinemaState:Y,setCinemaState:ke,sendCinemaSync:ta,gameState:ce,setGameState:we,sendGameSignal:Wa,connectionStats:me,startStatsMonitoring:ra,stopStatsMonitoring:Mr,noiseSuppressionLevel:Rr,updateNoiseSuppressionLevel:Ao,iceServers:Bt,isReconnecting:$r,adjustBandwidth:gr,noiseGateThreshold:kt,isNoiseGateEnabled:Ot,toggleNoiseGate:Ro,updateNoiseGateThreshold:co,audioVisualizerData:Oe,isVisualizerEnabled:Qe,toggleVisualizer:oa,startVisualizer:br,stopVisualizer:Ur}},f)},Mu=()=>a.useContext(Qi),e0=a.createContext(null),Uu=({children:f})=>{const[i,n]=a.useState(!1),[s,d]=a.useState(null),[x,B]=a.useState(0),b=a.useRef(null),S=a.useRef(null),m=a.useCallback(()=>{const y=localStorage.getItem("access_token");if(!y)return;let A="Anonymous";try{A=Xr(y).username}catch(w){console.error("Token decode hatasƒ±",w)}const g=`${Hn}://${jn}/ws/status/?username=${encodeURIComponent(A)}&token=${y}`;b.current&&b.current.close();const k=new WebSocket(g);b.current=k,k.onopen=()=>{console.log("üåê [GlobalWS] Baƒülandƒ±"),n(!0)},k.onmessage=w=>{const C=JSON.parse(w.data);d(C),C.type==="chat_message_handler"&&C.username==="‚ö° Signal Bot"&&(Notification.permission==="granted"&&document.hidden&&new Notification("üö® YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞!",{body:`${C.content.split(`
`)[2]}`,icon:"/logo192.png"}),B(v=>v+1))},k.onclose=w=>{console.log("üåê [GlobalWS] Kapandƒ±",w.code),n(!1),clearTimeout(S.current),S.current=setTimeout(m,5e3)},k.onerror=w=>{console.error("üåê [GlobalWS] Hata",w),k.close()}},[jn,Hn]);return a.useEffect(()=>{const y=setTimeout(()=>{m()},2e3);return()=>{clearTimeout(y),b.current&&b.current.close(),clearTimeout(S.current)}},[m]),e.createElement(e0.Provider,{value:{isConnected:i,globalData:s,unreadGlobal:x,setUnreadGlobal:B}},f)},t0=()=>a.useContext(e0),Vu=({message:f,endTime:i,level:n="info",onDismiss:s})=>{const[d,x]=a.useState("");a.useEffect(()=>{if(!i)return;const S=()=>{const y=new Date,g=new Date(i)-y;if(g<=0){x("Ending soon..."),setTimeout(()=>window.location.reload(),5e3);return}const k=Math.floor(g/(1e3*60*60)),w=Math.floor(g%(1e3*60*60)/(1e3*60));x(`${k}h ${w}m remaining`)};S();const m=setInterval(S,6e4);return()=>clearInterval(m)},[i]);const B={info:{bg:"rgba(88, 101, 242, 0.1)",border:"#5865f2",text:"#5865f2"},warning:{bg:"rgba(250, 166, 26, 0.1)",border:"#faa61a",text:"#faa61a"},critical:{bg:"rgba(240, 71, 71, 0.1)",border:"#f04747",text:"#f04747"}},b=B[n]||B.info;return e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:b.bg,borderBottom:`2px solid ${b.border}`,padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:9999,animation:"slideDown 0.3s ease"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},e.createElement(Xc,{style:{color:b.text,fontSize:"18px"}}),e.createElement("div",null,e.createElement("div",{style:{color:b.text,fontWeight:"bold"}},n==="critical"?"üö® Critical Maintenance":n==="warning"?"‚ö†Ô∏è Scheduled Maintenance":"‚ÑπÔ∏è Maintenance Notice"),e.createElement("div",{style:{color:"#dcddde",fontSize:"14px",marginTop:"2px"}},f,d&&e.createElement("span",{style:{marginLeft:"10px",opacity:.7}},"(",d,")")))),s&&e.createElement("button",{onClick:s,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:S=>S.target.style.background="rgba(255,255,255,0.1)",onMouseLeave:S=>S.target.style.background="none"},e.createElement(So,null)))},wt=({size:f="medium",text:i="Y√ºkleniyor...",fullscreen:n=!1})=>{const s={small:{spinner:24,text:"12px"},medium:{spinner:40,text:"14px"},large:{spinner:60,text:"16px"}},d=s[f]||s.medium,x=n?Yr.fullscreenContainer:Yr.inlineContainer;return e.createElement("div",{style:x},e.createElement("div",{style:{...Yr.spinnerWrapper,width:d.spinner,height:d.spinner}},e.createElement("div",{style:Yr.spinnerOuter}),e.createElement("div",{style:Yr.spinnerInner})),i&&e.createElement("div",{style:{...Yr.loadingText,fontSize:d.text}},i))},Yr={fullscreenContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#36393f",zIndex:9999,gap:"16px"},inlineContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px",minHeight:"100px"},spinnerWrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},spinnerOuter:{position:"absolute",width:"100%",height:"100%",border:"3px solid rgba(88, 101, 242, 0.2)",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite"},spinnerInner:{position:"absolute",width:"70%",height:"70%",border:"3px solid rgba(88, 101, 242, 0.1)",borderBottom:"3px solid #7289da",borderRadius:"50%",animation:"spin 0.7s linear infinite reverse"},loadingText:{color:"#b5bac1",fontWeight:500,textAlign:"center",animation:"pulse 1.5s ease-in-out infinite"}};if(typeof document<"u"){const f=document.createElement("style");f.innerText=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
    `,document.head.querySelector("[data-loading-spinner-styles]")||(f.setAttribute("data-loading-spinner-styles","true"),document.head.appendChild(f))}const Nu="https://media.pawscord.com",Wu=`${Nu}/assets`,Hu=`${Wu}/logo.png`,ju=Hu,Gu=()=>e.createElement("svg",{className:"splash-logo",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("ellipse",{cx:"50",cy:"62",rx:"22",ry:"18",fill:"white"}),e.createElement("ellipse",{cx:"28",cy:"38",rx:"10",ry:"12",fill:"white"}),e.createElement("ellipse",{cx:"72",cy:"38",rx:"10",ry:"12",fill:"white"}),e.createElement("ellipse",{cx:"22",cy:"55",rx:"8",ry:"10",fill:"white"}),e.createElement("ellipse",{cx:"78",cy:"55",rx:"8",ry:"10",fill:"white"})),qu=()=>{const[f,i]=a.useState(!1);return f?e.createElement(Gu,null):e.createElement("img",{src:ju,alt:"Pawscord",className:"splash-logo",onError:()=>i(!0)})},Ku=({animationState:f})=>e.createElement("div",{className:`splash-screen ${f}`},e.createElement("div",{className:"particles"},[...Array(15)].map((i,n)=>e.createElement("div",{key:n,className:"particle",style:{"--delay":`${Math.random()*2}s`,"--x":`${Math.random()*100}%`,"--size":`${4+Math.random()*8}px`,"--duration":`${2+Math.random()*3}s`}}))),e.createElement("div",{className:"rings-container"},e.createElement("div",{className:"ring ring-1"}),e.createElement("div",{className:"ring ring-2"}),e.createElement("div",{className:"ring ring-3"})),e.createElement("div",{className:"logo-container"},e.createElement("div",{className:"logo-glow"}),e.createElement(qu,null)),e.createElement("div",{className:"brand-text"},e.createElement("span",{className:"letter",style:{"--i":0}},"P"),e.createElement("span",{className:"letter",style:{"--i":1}},"A"),e.createElement("span",{className:"letter",style:{"--i":2}},"W"),e.createElement("span",{className:"letter",style:{"--i":3}},"S"),e.createElement("span",{className:"letter",style:{"--i":4}},"C"),e.createElement("span",{className:"letter",style:{"--i":5}},"O"),e.createElement("span",{className:"letter",style:{"--i":6}},"R"),e.createElement("span",{className:"letter",style:{"--i":7}},"D")),e.createElement("div",{className:"loading-bar"},e.createElement("div",{className:"loading-progress"}))),Ri=e.memo(Ku),Pi=e.lazy(()=>M(()=>import("./Message-Die5yW_F.js"),__vite__mapDeps([17,1,2,18,19]),import.meta.url)),Yu=e.lazy(()=>M(()=>import("./VirtualMessageList-QcTHDQtR.js"),__vite__mapDeps([20,1,2]),import.meta.url)),Ju=e.lazy(()=>M(()=>import("./MessageInput-Dppcw-HK.js"),__vite__mapDeps([21,1,2,16,22,23]),import.meta.url)),tn=e.lazy(()=>M(()=>import("./UserVideoContainer-CmWPKl13.js"),__vite__mapDeps([24,1,2]),import.meta.url)),Xu=e.lazy(()=>M(()=>import("./VoiceAudioController-BLMgFE4T.js"),__vite__mapDeps([25,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./RichTextEditor-CGhJeru-.js"),__vite__mapDeps([26,1,2,27,28,29]),import.meta.url));const Zu=e.lazy(()=>M(()=>import("./StickyMessageBanner-DLHFn_Ok.js"),__vite__mapDeps([30,1,2]),import.meta.url)),Qu=e.lazy(()=>M(()=>import("./LoginPage-D69-z5QJ.js"),__vite__mapDeps([31,1,2,32]),import.meta.url)),ef=e.lazy(()=>M(()=>import("./WelcomeScreen-WiHUltwr.js"),__vite__mapDeps([33,1,2,34,35]),import.meta.url)),tf=e.lazy(()=>M(()=>import("./ImageModal-D3SYcdf2.js"),__vite__mapDeps([7,1,2]),import.meta.url)),rf=e.lazy(()=>M(()=>import("./UserProfileModal-DS19IvL0.js"),__vite__mapDeps([6,1,2]),import.meta.url)),of=e.lazy(()=>M(()=>import("./PollCreateModal-0S2RMmxJ.js"),__vite__mapDeps([14,1,2]),import.meta.url)),nf=e.lazy(()=>M(()=>import("./CodeSnippetModal-CUmfv3IH.js"),__vite__mapDeps([15,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./AvatarCropper-D2WYvreM.js"),__vite__mapDeps([36,1,2,37]),import.meta.url));const af=e.lazy(()=>M(()=>import("./CryptoChartModal-DG_30TpS.js"),__vite__mapDeps([38,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./CryptoStoreModal-CWuUvGEN.js"),__vite__mapDeps([39,1,2]),import.meta.url));const sf=e.lazy(()=>M(()=>import("./PremiumStoreModal-DkNjvFia.js"),__vite__mapDeps([40,1,2]),import.meta.url)),cf=e.lazy(()=>M(()=>import("./WhiteboardModal-z3l5oI_3.js"),__vite__mapDeps([13,1,2]),import.meta.url)),lf=e.lazy(()=>M(()=>import("./SoundboardModal-BeheTWGf.js"),__vite__mapDeps([10,1,2]),import.meta.url)),df=e.lazy(()=>M(()=>import("./KanbanBoard-CDpHaNNv.js"),__vite__mapDeps([41,1,2,28]),import.meta.url)),Ii=e.lazy(()=>M(()=>import("./SummaryModal-B6TzuUUX.js"),__vite__mapDeps([42,1,2]),import.meta.url)),uf=e.lazy(()=>M(()=>import("./MessageTemplateModal-CucOC7KI.js"),__vite__mapDeps([16,1,2]),import.meta.url)),ff=e.lazy(()=>M(()=>import("./CinemaModal-o6LCVkTH.js"),__vite__mapDeps([12,1,2]),import.meta.url)),mf=e.lazy(()=>M(()=>import("./StickerPicker-0zWuRBR9.js"),__vite__mapDeps([9,1,2]),import.meta.url)),pf=e.lazy(()=>M(()=>import("./GifPicker-gsWNwcjc.js"),__vite__mapDeps([8,1,2]),import.meta.url)),xf=e.lazy(()=>M(()=>import("./DJModal-OlNMrwjO.js"),__vite__mapDeps([43,1,2]),import.meta.url)),hf=e.lazy(()=>M(()=>import("./ThemeStoreModal-Cf2Ju2-Y.js"),__vite__mapDeps([44,1,2]),import.meta.url)),gf=e.lazy(()=>M(()=>import("./EncryptionKeyModal-BuOUPhp1.js"),__vite__mapDeps([45,1,2]),import.meta.url)),yf=e.lazy(()=>M(()=>import("./DownloadModal-BI8-7Hnn.js"),__vite__mapDeps([34,1,2]),import.meta.url)),vf=e.lazy(()=>M(()=>import("./ServerSettingsModal-Dps1Dkhr.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),Ef=e.lazy(()=>M(()=>import("./CreateGroupModal-DsOp5Y8A.js"),__vite__mapDeps([46,1,2]),import.meta.url)),bf=e.lazy(()=>M(()=>import("./AdminAnalyticsPanel-eWP2nE4n.js"),__vite__mapDeps([47,1,2,28]),import.meta.url)),_f=e.lazy(()=>M(()=>import("./AdminPanelModal-D36lQeKZ.js"),__vite__mapDeps([48,1,2]),import.meta.url)),Sf=e.lazy(()=>M(()=>import("./WebhooksPanel-B1CEL3gV.js"),__vite__mapDeps([49,1,2,35,50]),import.meta.url)),wf=e.lazy(()=>M(()=>import("./VanityURLManager-DkbRGg2l.js"),__vite__mapDeps([5,1,2]),import.meta.url)),Cf=e.lazy(()=>M(()=>import("./AutoModerationDashboard-DUqWbXmJ.js"),__vite__mapDeps([51,1,2]),import.meta.url)),kf=e.lazy(()=>M(()=>import("./AutoModerationPanel-CyURew_x.js"),__vite__mapDeps([52,1,2,53]),import.meta.url)),Af=e.lazy(()=>M(()=>import("./RaidProtectionPanel-DJzGE_Fn.js"),__vite__mapDeps([54,1,2]),import.meta.url)),Bf=e.lazy(()=>M(()=>import("./ReportSystemPanel-B9BQp0fZ.js"),__vite__mapDeps([55,1,2]),import.meta.url)),Df=e.lazy(()=>M(()=>import("./AuditLogPanel-q_HacnZv.js"),__vite__mapDeps([56,1,2]),import.meta.url)),Tf=e.lazy(()=>M(()=>import("./UserWarningsPanel-w_Xf0HVo.js"),__vite__mapDeps([57,1,2]),import.meta.url)),Ff=e.lazy(()=>M(()=>import("./BookmarkPanel-DjTEoxSM.js"),__vite__mapDeps([58,1,2]),import.meta.url)),Rf=e.lazy(()=>M(()=>import("./ReadLaterPanel-B4EyRqP-.js"),__vite__mapDeps([59,1,2,60]),import.meta.url)),Pf=e.lazy(()=>M(()=>import("./ChannelPermissionsPanel-1CnNE2wA.js"),__vite__mapDeps([61,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MessageThreadsPanel-BkGBDzHE.js"),__vite__mapDeps([62,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ModeratorNotesPanel-BW7RV6lN.js"),__vite__mapDeps([63,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ServerRolesPanel-CHqWwsQ3.js"),__vite__mapDeps([64,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./NotificationPreferencesPanel-CqyFEFqN.js"),__vite__mapDeps([65,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MessageOCRPanel-CCXv_Aik.js"),__vite__mapDeps([66,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MassActionsPanel-It373m6R.js"),__vite__mapDeps([67,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./TimeoutMutePanel-BaeCaZ3n.js"),__vite__mapDeps([68,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ServerThemesPanel-D-Rn2-ZA.js"),__vite__mapDeps([69,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./KeywordMutesPanel-ClrUaqtY.js"),__vite__mapDeps([70,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./WelcomeTemplatesPanel-JETI0rrl.js"),__vite__mapDeps([71,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./StickyMessagesPanel-cRheKmZ-.js"),__vite__mapDeps([72,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MessageTemplatesPanel-C6M-RZKK.js"),__vite__mapDeps([73,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./MessageExportPanel-ZiG5myFP.js"),__vite__mapDeps([74,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ArchivedRoomsPanel-C_FqBwEV.js"),__vite__mapDeps([75,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./SlowModePanel-Cy0xu9iH.js"),__vite__mapDeps([76,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./EmojiManagementPanel-B-e0QrVo.js"),__vite__mapDeps([77,1,2]),import.meta.url));const If=e.lazy(()=>M(()=>import("./ReactionAnalyticsPanel-D6TSF1_F.js"),__vite__mapDeps([78,1,2]),import.meta.url)),Lf=e.lazy(()=>M(()=>import("./LinkClickTrackingPanel-1eCLYfb4.js"),__vite__mapDeps([79,1,2]),import.meta.url)),$f=e.lazy(()=>M(()=>import("./JoinLeaveLogsPanel-SX2pV1LP.js"),__vite__mapDeps([80,1,2]),import.meta.url)),Of=e.lazy(()=>M(()=>import("./UserActivityPanel-Bk4jVale.js"),__vite__mapDeps([81,1,2]),import.meta.url)),zf=e.lazy(()=>M(()=>import("./NicknameHistoryPanel-Qa5pyVvV.js"),__vite__mapDeps([82,1,2]),import.meta.url)),Mf=e.lazy(()=>M(()=>import("./FieldChangeTrackingPanel-B4DGGvAp.js"),__vite__mapDeps([83,1,2]),import.meta.url)),Uf=e.lazy(()=>M(()=>import("./InviteAnalyticsPanel-GuIp1SOt.js"),__vite__mapDeps([84,1,2]),import.meta.url)),Vf=e.lazy(()=>M(()=>import("./ContentScannerPanel-Ckx39X4T.js"),__vite__mapDeps([85,1,2]),import.meta.url)),Nf=e.lazy(()=>M(()=>import("./EphemeralMessagesPanel-BRE4mYcZ.js"),__vite__mapDeps([86,1,2]),import.meta.url)),Wf=e.lazy(()=>M(()=>import("./TopicHistoryPanel-y-9A0OHp.js"),__vite__mapDeps([87,1,2]),import.meta.url)),Hf=e.lazy(()=>M(()=>import("./DraftsPanel-BsnX6B9g.js"),__vite__mapDeps([88,1,2]),import.meta.url)),jf=e.lazy(()=>M(()=>import("./ServerNicknamesPanel-DetqTDOU.js"),__vite__mapDeps([89,1,2]),import.meta.url)),Gf=e.lazy(()=>M(()=>import("./ServerBoostPanel-l3pH6bCb.js"),__vite__mapDeps([90,1,2]),import.meta.url)),qf=e.lazy(()=>M(()=>import("./RoomWebhooksPanel-Dibl2dVK.js"),__vite__mapDeps([91,1,2]),import.meta.url)),Kf=e.lazy(()=>M(()=>import("./OAuthAppsPanel-9xdS9dhZ.js"),__vite__mapDeps([92,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./VanityURLPanel-B8ic0uGB.js"),__vite__mapDeps([93,1,2]),import.meta.url));const Li=e.lazy(()=>M(()=>import("./AutoRespondersPanel-B1pAwHq5.js"),__vite__mapDeps([94,1,2]),import.meta.url)),Yf=e.lazy(()=>M(()=>import("./SessionManagementPanel-C22ZIibj.js"),__vite__mapDeps([95,1,2]),import.meta.url)),Jf=e.lazy(()=>M(()=>import("./GDPRExportPanel-D4yJThLl.js"),__vite__mapDeps([96,1,2]),import.meta.url)),Xf=e.lazy(()=>M(()=>import("./DataRetentionPanel-BFmOxnbP.js"),__vite__mapDeps([97,1,2]),import.meta.url)),Zf=e.lazy(()=>M(()=>import("./TwoFactorSetupWizard-BLofmsS4.js"),__vite__mapDeps([98,1,2]),import.meta.url)),Qf=e.lazy(()=>M(()=>import("./EnhancedPollsPanel-Bi-SR7Su.js"),__vite__mapDeps([99,1,2]),import.meta.url)),em=e.lazy(()=>M(()=>import("./VoiceTranscriptsPanel-BGz56P3N.js"),__vite__mapDeps([100,1,2]),import.meta.url)),tm=e.lazy(()=>M(()=>import("./PaymentPanel-DgawCK2b.js"),__vite__mapDeps([101,1,2]),import.meta.url)),rm=e.lazy(()=>M(()=>import("./StoreModal-Y-EfilqK.js"),__vite__mapDeps([102,1,2]),import.meta.url)),om=e.lazy(()=>M(()=>import("./DailyRewardsModal-CMF73xCU.js"),__vite__mapDeps([103,1,2]),import.meta.url)),nm=e.lazy(()=>M(()=>import("./APIUsagePanel-C98DEnYL.js"),__vite__mapDeps([104,1,2]),import.meta.url)),am=e.lazy(()=>M(()=>import("./ExportJobsPanel-B9zwN8c6.js"),__vite__mapDeps([105,1,2]),import.meta.url)),sm=e.lazy(()=>M(()=>import("./ScheduledAnnouncementsPanel-C28IEieN.js"),__vite__mapDeps([106,1,2]),import.meta.url)),im=e.lazy(()=>M(()=>import("./InviteExportPanel-Da8rNwlv.js"),__vite__mapDeps([107,1,2]),import.meta.url)),cm=e.lazy(()=>M(()=>import("./AdvancedSearchPanel-B-O3RNOj.js"),__vite__mapDeps([108,1,2]),import.meta.url)),lm=e.lazy(()=>M(()=>import("./GrowthMetricsPanel-CdFeNP-P.js"),__vite__mapDeps([109,1,2]),import.meta.url)),dm=e.lazy(()=>M(()=>import("./LinkPreviewRenderer-DEoEakLA.js"),__vite__mapDeps([110,1,2]),import.meta.url)),um=e.lazy(()=>M(()=>import("./InventoryPanel-BiVrpD1E.js"),__vite__mapDeps([111,1,2]),import.meta.url)),fm=e.lazy(()=>M(()=>import("./WaitlistPanel-DZTV9uDv.js"),__vite__mapDeps([112,1,2]),import.meta.url)),mm=e.lazy(()=>M(()=>import("./ReferralRewardsPanel-WaRyzAeQ.js"),__vite__mapDeps([113,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./VerifyEmailPage-CkDR2K96.js"),__vite__mapDeps([114,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ForgotPasswordPage-CWtbqmbj.js"),__vite__mapDeps([115,1,2,32]),import.meta.url));e.lazy(()=>M(()=>import("./ResetPasswordPage-CwlzoiLw.js"),__vite__mapDeps([116,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./TwoFactorLoginPage-BPNuEqhs.js"),__vite__mapDeps([117,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./TwoFactorSetup-CR553wfI.js"),__vite__mapDeps([118,1,2,119]),import.meta.url));e.lazy(()=>M(()=>import("./TwoFactorLogin-Coq_QcUN.js"),__vite__mapDeps([120,1,2,121]),import.meta.url));const pm=e.lazy(()=>M(()=>import("./VanityInviteScreen-BCIjeoZF.js"),__vite__mapDeps([122,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./EmailVerification-CKJZJbLU.js"),__vite__mapDeps([123,1,2,124]),import.meta.url));e.lazy(()=>M(()=>import("./MobileNav-DmJ3tSaa.js"),__vite__mapDeps([125,1,2,126]),import.meta.url));e.lazy(()=>M(()=>import("./SwipeActions-BxNKP9dE.js"),__vite__mapDeps([127,1,2,128]),import.meta.url));e.lazy(()=>M(()=>import("./VoiceMessage-Du5_uW8a.js"),__vite__mapDeps([129,1,2,130]),import.meta.url));const xm=e.lazy(()=>M(()=>import("./FriendsTab-BGrD4uWs.js"),__vite__mapDeps([131,1,2,18]),import.meta.url)),hm=e.lazy(()=>M(()=>import("./RoomList-B-K4_i59.js"),__vite__mapDeps([132,1,2,133,22,5,4,18]),import.meta.url)),gm=e.lazy(()=>M(()=>import("./UserProfilePanel-WMS5b7vf.js"),__vite__mapDeps([134,1,2,135,36,37,35,136]),import.meta.url)),$i=e.lazy(()=>M(()=>import("./VoiceChatPanel-BprwEB0n.js"),__vite__mapDeps([137,1,2,138,35,139]),import.meta.url)),ym=e.lazy(()=>M(()=>import("./ChatUserList-CVi4TOeC.js"),__vite__mapDeps([140,1,2]),import.meta.url)),vm=e.lazy(()=>M(()=>import("./PinnedMessages-D1D08gP9.js"),__vite__mapDeps([141,1,2,17,18,19]),import.meta.url)),Em=e.lazy(()=>M(()=>import("./FloatingVoiceIsland-fxd8WthV.js"),__vite__mapDeps([142,1,2]),import.meta.url)),bm=e.lazy(()=>M(()=>import("./CinemaPlayer-DverLaeq.js"),__vite__mapDeps([143,1,2]),import.meta.url)),_m=e.lazy(()=>M(()=>import("./ConnectionsPanel-DQFEpB6_.js"),__vite__mapDeps([144,1,2,35,145]),import.meta.url)),Sm=e.lazy(()=>M(()=>import("./PasswordSetupModal-Cbi97UyP.js"),__vite__mapDeps([146,1,2,147]),import.meta.url)),wm=e.lazy(()=>M(()=>import("./NotificationDropdown-DM5TXSBj.js"),__vite__mapDeps([148,1,2]),import.meta.url));e.lazy(()=>M(()=>import("./ReactionStatsPanel-CacGTKn9.js"),__vite__mapDeps([149,1,2,35,150]),import.meta.url));e.lazy(()=>M(()=>import("./ServerHealthPanel-CFlfh1Yv.js"),__vite__mapDeps([151,1,2,35,152]),import.meta.url));e.lazy(()=>M(()=>import("./ChannelAnalyticsPanel-DXHY6kaw.js"),__vite__mapDeps([153,1,2,35,154]),import.meta.url));e.lazy(()=>M(()=>import("./SmartSuggestionsPanel-DTtZasRu.js"),__vite__mapDeps([155,1,2,35,156]),import.meta.url));e.lazy(()=>M(()=>import("./UserPresenceInsightsPanel-EKk5D4Hs.js"),__vite__mapDeps([157,1,2,35,158]),import.meta.url));e.lazy(()=>M(()=>import("./UserFooter-BfzCGufA.js").then(f=>f.a),__vite__mapDeps([133,1,2]),import.meta.url));const Cm=e.lazy(()=>M(()=>import("./UserContextMenu-fEUG2QoA.js"),__vite__mapDeps([138,1,2]),import.meta.url)),km=e.lazy(()=>M(()=>import("./MiniGamesPanel-CBn2M1H8.js"),__vite__mapDeps([159,1,2]),import.meta.url)),Am=e.lazy(()=>M(()=>import("./ProjectCollaborationPanel-CRk8plmn.js"),__vite__mapDeps([160,1,2]),import.meta.url)),Bm=e.lazy(()=>M(()=>import("./AvatarStudioPanel-CNR59z91.js"),__vite__mapDeps([161,1,2]),import.meta.url)),Dm="8888",Zr=typeof window<"u"&&typeof window.require=="function",ir=window.Capacitor&&window.Capacitor.isNativePlatform(),Co=(()=>{if(ir||Zr)return"https://api.pawscord.com";const f=window.location.protocol,i=window.location.hostname;return i.includes("pawscord.com")?"https://api.pawscord.com":`${f}//${i}:${Dm}`})(),Jr=Zr||ir?"https://www.pawscord.com":Co,pe=`${Co}/api`,ee=Co,rn=Co.startsWith("https")?"wss":"ws",on=Co.replace(/^https?:\/\//,""),Oi=`${pe}/auth/login/`,zi=`${pe}/auth/register/`,Tm=`${pe}/messages/history/room/`,Fm=`${pe}/messages/history/dm/`,Ba=`${pe}/rooms/list_with_categories/`,Rm=`${pe}/conversations/`,Pm=`${pe}/conversations/find_or_create/`,Im=`${pe}/users/update_profile/`,Lm=`${pe}/users/default_avatars/`,$m=`${pe}/users/change_username/`,Om=`${pe}/gifs/list_local/`,zm="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",Mi="chat_drafts_v1",nn=()=>(Date.now()+Math.floor(Math.random()*1e3)).toString(),Mm=f=>new Promise((i,n)=>{const d=Math.ceil(f.size/2097152);let x=0;const B=new Al.ArrayBuffer,b=new FileReader;b.onload=m=>{B.append(m.target.result),x++,x<d?S():i(B.end())},b.onerror=m=>n(m);function S(){const m=x*2097152,y=Math.min(m+2097152,f.size);b.readAsArrayBuffer(f.slice(m,y))}S()}),Um=()=>{const{user:f,isAuthenticated:i,token:n,login:s,logout:d,isLoading:x}=to(),{isInVoice:B,isConnecting:b,currentRoom:S,joinChannel:m,leaveChannel:y,isMuted:A,isDeafened:g,toggleMute:k,toggleDeafened:w,toggleVideo:C,toggleScreenShare:v,remoteVolumes:h,setRemoteVolume:c,localCameraStream:r,remoteStreams:o,isTalking:u,sendSignal:l,isScreenSharing:P,isVideoEnabled:L,isPttActive:q,localScreenStream:F,sendReaction:U,lastReaction:V,applyVoiceEffect:j,activeEffect:re,cinemaState:ne,setCinemaState:de,gameState:he,sendGameSignal:ue,mutedUsers:ge}=Mu(),{globalData:be}=t0(),p=He(t=>t.activeChat),J=He(t=>t.messages),X=He(t=>t.encryptionKeys),Y=He(t=>t.voiceUsers),ke=He(t=>t.unreadCounts),ce=He(t=>t.setActiveChat);He(t=>t.addMessage),He(t=>t.updateMessage);const we=He(t=>t.setMessages),me=He(t=>t.setTypingUser),Ct=He(t=>t.setOnlineUsers),kt=He(t=>t.setVoiceUsers),lr=He(t=>t.incrementUnread),Ot=He(t=>t.setEncryptionKey),[qe,Oe]=a.useState(!1),[zt,Qe]=a.useState(!1),[qt,lt]=a.useState(!1),[dr,At]=a.useState(!1),[et,Fe]=a.useState(!1),[at,dt]=a.useState(null),[Fr,tt]=a.useState(!1),[Mt,Rr]=a.useState(0),[Pr,Te]=a.useState(""),te=f?.username||"",[ut,ur]=a.useState(!1),[Kt,Ir]=a.useState(!1),[rt,Yt]=a.useState(null),{isMobile:ye}=yu(),[Lr,fr]=a.useState(""),Ut=Bu(Lr,300),[Bt,mr]=a.useState("0px"),$r=ir?"max(20px, env(safe-area-inset-bottom))":"0px",[Ke,pr]=a.useState({width:300,height:225,x:100,y:100}),[xt,xr]=a.useState(!0),[ht,ft]=a.useState(!0),[Vt,Le]=a.useState(!1),[se,_e]=a.useState("start"),[gt,Ue]=a.useState([]),[le,Ve]=a.useState([]),[Ce,Nt]=a.useState([]),[Dt,Jt]=a.useState([]),[st,Tt]=a.useState([]),[yt,hr]=a.useState(!1),[ro,Ne]=a.useState(!1),[oo,vt]=a.useState(!1),[qn,ko]=a.useState(!1),[Or,Ao]=a.useState(!1),[Kn,Bo]=a.useState(!1),[Yn,Et]=a.useState(""),[Jn,no]=a.useState(!1),[Ye,gr]=a.useState(!1),[yr,Je]=a.useState(new Set),[vr,Xt]=a.useState(null),[Ft,Rt]=a.useState(null),[Xn,Do]=a.useState(null),[zr,ao]=a.useState(!1),[Zn,Er]=a.useState(!1),[Qn,so]=a.useState(!1),[io,To]=a.useState(!1),[ea,Fo]=a.useState(!1),[Wa,ta]=a.useState(!1),[ra,Mr]=a.useState(!1),[Ro,co]=a.useState(!1),[oa,Zt]=a.useState(!1),[Pt,br]=a.useState(!1),[Ur,_]=a.useState(!1),[R,I]=a.useState(!1),[W,K]=a.useState(!1),[N,O]=a.useState(!1),[$,Z]=a.useState(!1),[ae,xe]=a.useState(!1),[De,Re]=a.useState(!1),[it,Qt]=a.useState(!1),[bt,_r]=a.useState(!1),[er,tr]=a.useState(!1),[Po,Io]=a.useState(!1),[lo,Ha]=a.useState(!1),[na,ja]=a.useState(!1),[aa,uo]=a.useState(!1),[Sr,It]=a.useState(!1),[fo,Lo]=a.useState(!1),[sa,ia]=a.useState(!1),[i0,c0]=a.useState(!1),[l0,d0]=a.useState(!1),[u0,f0]=a.useState(!1),[m0,p0]=a.useState(!1),[x0,h0]=a.useState(!1),[g0,Ga]=a.useState(!1),[y0,v0]=a.useState(!1),[E0,b0]=a.useState(!1),[_0,S0]=a.useState(!1),[w0,C0]=a.useState(!1),[k0,A0]=a.useState(!1),[B0,D0]=a.useState(!1),[T0,F0]=a.useState(!1),[R0,P0]=a.useState(!1),[I0,qa]=a.useState(!1),[L0,$0]=a.useState(!1),[O0,z0]=a.useState(!1),[M0,U0]=a.useState(!1),[V0,Ka]=a.useState(!1),[N0,W0]=a.useState(!1),[H0,j0]=a.useState(!1),[G0,q0]=a.useState(!1),[K0,Y0]=a.useState(!1),[J0,X0]=a.useState(!1),[Z0,Ya]=a.useState(!1),[Q0,Ja]=a.useState(!1),[ec,Xa]=a.useState(!1),[Sp,wp]=a.useState(!1),[Cp,kp]=a.useState(!1),[Ap,Bp]=a.useState(!1),[Dp,Tp]=a.useState(!1),[Fp,Rp]=a.useState(!1),[Pp,Ip]=a.useState(!1),[Lp,$p]=a.useState(!1),[Op,zp]=a.useState(!1),[Mp,Up]=a.useState(!1),[Vp,Np]=a.useState(!1),[tc,Za]=a.useState("default"),[Qa,Vr]=a.useState(null),[Wp,Hp]=a.useState(!1),[rc,$o]=a.useState(!1),[jp,Oo]=a.useState(!0),[Gp,ca]=a.useState(0),[Nr,oc]=a.useState(!1),[wr,la]=a.useState([]),[nc,ac]=a.useState(0),[rr,es]=a.useState([]),[Cr,or]=a.useState([]),[qp,sc]=a.useState(null),[Lt,zo]=a.useState(null),[ts,rs]=a.useState(!1),[ic,os]=a.useState(!1),[ns,as]=a.useState(null),[ss,da]=a.useState(!1),[cc,is]=a.useState(!1),[lc,Mo]=a.useState(""),[mo,cs]=a.useState(()=>JSON.parse(localStorage.getItem("chat_sound_settings"))||{notifications:!0,mentions:!0,userJoinLeave:!0}),[Uo,ua]=a.useState(null),[dc,ls]=a.useState(!1),[ds,Vo]=a.useState(!1),[us,fa]=a.useState(!1),[ma,No]=a.useState(0),[Kp,Yp]=a.useState(!1),[Jp,Wr]=a.useState(!1),[Xp,Hr]=a.useState(""),[uc,Wo]=a.useState(!1),[Zp,jr]=a.useState(null),[Qp,fs]=a.useState(null),[ex,ms]=a.useState(null),[ps,tx]=a.useState(!1),[pa,xs]=a.useState(!1),[po,ct]=a.useState(!1),[Ho,hs]=a.useState(null),[xo,jo]=a.useState(null),[fc,gs]=a.useState(!1),[mc,ys]=a.useState(!1),[pc,vs]=a.useState(!1),[xc,Es]=a.useState(!1),[hc,bs]=a.useState(!1),[gc,_s]=a.useState(!1),[Ss,ws]=a.useState(null),[yc,Cs]=a.useState(!1),[vc,ks]=a.useState(!1),As=He(t=>t.typingUsers),Bs=a.useMemo(()=>As.filter(t=>t!==te),[As,te]);a.useRef(null),a.useRef([]);const We=a.useRef(null),Go=a.useRef(null),xa=a.useRef(null);a.useRef(null);const ho=a.useRef(null),ha=a.useRef(null),Ds=a.useRef(null),Wt=a.useRef({}),je=te==="Eastkhan"||te==="PawPaw"||Lt?.role==="admin",Ec=a.useMemo(()=>{const t=le?.find(z=>z.id===p?.serverId),E=t?.owner===te||t?.created_by===te,T=Cr?.find(z=>z.username===te)?.role==="moderator";return{isAdmin:je,isServerOwner:E,isModerator:T,canKick:je||E||T,canBan:je||E,canMute:je||E||T,canWarn:je||E||T,canManageRoles:je||E}},[je,le,p?.serverId,te,Cr]),bc=a.useMemo(()=>{if(!le||le.length===0)return[];if(!rr||rr.length===0)return le;const t=[],E=[];return rr.forEach(T=>{const z=le.find(D=>D.id===T);z&&t.push(z)}),le.forEach(T=>{rr.includes(T.id)||E.push(T)}),[...t,...E]},[le,rr]),ga=He(t=>t.onlineUsers),_c=He(t=>t.messages),ya=vu(_c,Ut);Eu(Ce),a.useEffect(()=>{if(se==="finished")return;_e("start");const t=setTimeout(()=>_e("pre-transition"),1500),E=setTimeout(()=>_e("finished"),2200),T=setTimeout(()=>_e("finished"),3e3);return()=>{clearTimeout(t),clearTimeout(E),clearTimeout(T)}},[]),a.useEffect(()=>{const t=new URLSearchParams(window.location.search),E=t.get("verification"),T=t.get("username"),z=t.get("reason"),D=t.get("needs_password");if(E==="success")ie.success(`‚úÖ Email doƒürulandƒ±! Ho≈ügeldin ${T||"kullanƒ±cƒ±"}!`),window.history.replaceState({},document.title,window.location.pathname);else if(E==="failed"){const H=z==="expired"?"‚è∞ Doƒürulama linki s√ºresi dolmu≈ü. Yeni bir link talep edin.":"‚ùå Ge√ßersiz doƒürulama linki.";ie.error(H),window.history.replaceState({},document.title,window.location.pathname)}D==="true"&&(console.log("üîë [Auth] Google user needs to set password"),ks(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),a.useEffect(()=>{const t=new URLSearchParams(window.location.search),E=t.get("success"),T=t.get("coins"),z=t.get("session_id"),D=t.get("canceled");E==="true"&&T&&((async()=>{try{const Q=localStorage.getItem("access_token"),Ee="https://api.pawscord.com/api";if(z){const oe=await(await fetch(`${Ee}/payments/verify/`,{method:"POST",headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"},body:JSON.stringify({session_id:z,coin_amount:parseInt(T)})})).json();oe.success?oe.already_processed?ie.info(`?? ÔøΩdeme zaten islendi! Bakiye: ${oe.balance} coin`):ie.success(`?? ${T} coin hesabina eklendi! Yeni bakiye: ${oe.balance} coin`):ie.error(oe.error||"ÔøΩdeme dogrulama hatasi")}else ie.success(`?? ÔøΩdeme basarili! ${T} coin hesabina eklendi.`)}catch(Q){console.error("Payment verification error:",Q),ie.success(`?? ${T} coin satin alma tamamlandi!`)}})(),window.history.replaceState({},document.title,window.location.pathname)),D==="true"&&(ie.info("? ÔøΩdeme iptal edildi."),window.history.replaceState({},document.title,window.location.pathname))},[]),a.useEffect(()=>{const E=window.location.hash.match(/^#\/join\/([^/?]+)/);if(E){const T=E[1];console.log("üîó [Vanity] Detected vanity path:",T),ws(T)}},[]),a.useEffect(()=>(window.showAutoModeration=()=>co(!0),window.showRaidProtection=()=>Zt(!0),window.showReportSystem=()=>br(!0),window.showAuditLog=()=>_(!0),window.showUserWarnings=()=>I(!0),()=>{delete window.showAutoModeration,delete window.showRaidProtection,delete window.showReportSystem,delete window.showAuditLog,delete window.showUserWarnings}),[]),a.useEffect(()=>{const t=E=>{po&&!E.target.closest(".toolbar-menu-container")&&ct(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[po]),a.useEffect(()=>{const t=()=>{Cs(!0)};return window.addEventListener("openConnectionsPanel",t),()=>window.removeEventListener("openConnectionsPanel",t)},[]),a.useEffect(()=>{Ul(),Nl(),Wl(),Xl(),setTimeout(()=>{Ki()},3e3),"requestIdleCallback"in window&&requestIdleCallback(()=>{Fa()}),i&&f&&M(async()=>{const{pushNotificationManager:t}=await import("./pushNotifications-BysZcil5.js");return{pushNotificationManager:t}},__vite__mapDeps([162,1,2]),import.meta.url).then(({pushNotificationManager:t})=>{t.init(pe,G)}),ir&&M(async()=>{const{initializeDeepLinkHandler:t}=await import("./urlHandlers-D9z3fMPG.js");return{initializeDeepLinkHandler:t}},__vite__mapDeps([163,1,2]),import.meta.url).then(({initializeDeepLinkHandler:t})=>{console.log("‚úÖ Deep link handler ready")}),console.log("‚úÖ PWA ve optimizasyonlar aktif!")},[i,f]);const go=a.useMemo(()=>{if(p.type==="room"){if(le){for(const t of le)if(t.categories)for(const E of t.categories){const T=E.rooms?.find(z=>z.slug===p.id);if(T)return String(T.name)}}return String(p.id)}else if(p.type==="dm")return`@ ${String(p.targetUser||"DM")}`;return""},[p,le]),Gr=a.useMemo(()=>!p||!p.id?"":`${p.type}-${p.id}`,[p]),qo=a.useCallback(()=>{try{const t=localStorage.getItem(Mi);if(!t)return{};const E=JSON.parse(t);return E&&typeof E=="object"?E:{}}catch(t){return console.warn("Taslak okunamadƒ±",t),{}}},[]),Sc=a.useCallback(t=>{if(!Gr)return;const E=qo();E[Gr]=t,localStorage.setItem(Mi,JSON.stringify(E))},[Gr,qo]);a.useEffect(()=>{if(!Gr){Hr(""),Wr(!1);return}const E=qo()[Gr]||"";Hr(E),Wr(!!E.trim())},[Gr,qo]);const wc=a.useMemo(()=>{if(p.type!=="room"||!le)return"text";for(const t of le)if(t.categories)for(const E of t.categories){const T=E.rooms?.find(z=>z.slug===p.id);if(T)return T.channel_type}return"text"},[p,le]),nr=a.useCallback((t="auto")=>{xa.current&&xa.current.scrollIntoView({behavior:t})},[]),va=a.useCallback(()=>{const t=ha.current;return t?t.scrollHeight-t.scrollTop-t.clientHeight<160:!0},[]),Ea=a.useCallback(()=>{const t=ha.current;if(!t)return;const E=t.scrollHeight-t.scrollTop-t.clientHeight;Wo(E>160)},[]),Cc=Du(Ea,100),mt=a.useCallback(t=>{if(t==="‚ö° Signal Bot")return`${Jr}/static/bot/signal.png`;if(t==="PawPaw AI")return`${Jr}/static/bot/ai.png`;if(!t||!st||st.length===0)return`${Jr}/avatars/cat_1.png`;let E=0;for(let H=0;H<t.length;H++)E=t.charCodeAt(H)+((E<<5)-E);const T=Math.abs(E%st.length),z=st[T];let D;return typeof z=="object"&&z!==null?D=z.original||z.thumbnail||z.url:typeof z=="string"&&(D=z),!D||typeof D!="string"?`${Jr}/avatars/cat_1.png`:D.startsWith("http")||D.startsWith("blob:")?D:(D.startsWith("/")||(D="/"+D),`${Jr}${D}`)},[st]),_t=a.useCallback(t=>{const E=Ce.find(T=>T.username===t);if(E&&E.avatar&&typeof E.avatar=="string"){if(E.avatar.startsWith("http://")||E.avatar.startsWith("https://")||E.avatar.startsWith("blob:"))return E.avatar;let T=E.avatar;return T.startsWith("/")||(T="/"+T),`${Jr}${T}`}return mt(t)},[Ce,mt]),G=a.useCallback(async(t,E={})=>{const T=E.headers||{};n&&(T.Authorization=`Bearer ${n}`),E.body instanceof FormData||(T["Content-Type"]="application/json");try{const D=t.includes("upload")||E.body instanceof FormData?3e5:3e4,H=new AbortController,Q=setTimeout(()=>H.abort(),D),Ee=await fetch(t,{...E,headers:T,signal:H.signal});if(clearTimeout(Q),Ee.status===401)throw t.includes("/auth/")||t.includes("/login")?(console.warn("‚ö†Ô∏è [Auth] 401 on auth endpoint, logging out"),d()):console.warn("‚ö†Ô∏è [Auth] 401 error on:",t,"- NOT logging out"),new Error("Unauthorized");return Ee}catch(z){throw z.name==="AbortError"?(console.error("‚è±Ô∏è [Fetch] Request timed out:",t),new Error("ƒ∞stek zaman a≈üƒ±mƒ±na uƒüradƒ±")):(console.error("Fetch error:",z),z)}},[n,d]);Au(),a.useEffect(()=>{const t=window.location.hash,E=t.includes("?")?t.split("?")[1]:"",z=new URLSearchParams(E).get("join_server");if(z&&i&&le&&le.length>0){console.log("üîó [Vanity URL] Found join_server parameter:",z);const D=le.find(H=>H.id===parseInt(z));if(D){if(console.log(`üîó Vanity URL: Redirecting to server ${D.name}`),D.categories&&D.categories.length>0){const H=D.categories[0];if(H.rooms&&H.rooms.length>0){const Q=H.rooms[0];ce({type:"room",id:Q.slug})}}window.history.replaceState({},document.title,"/#/")}else console.log(`üîó Vanity URL: Server ${z} not found, showing invite modal`),(async()=>{try{const Q=await G(`${pe}/servers/${z}/join/`,{method:"POST"});if(Q.ok)ie.success("Sunucuya katƒ±ldƒ±nƒ±z!"),window.location.reload();else{const Ee=await Q.json();ie.error(Ee.error||"Sunucuya katƒ±lƒ±namadƒ±")}}catch(Q){console.error("Join server error:",Q),ie.error("Sunucuya katƒ±lƒ±rken hata olu≈ütu")}finally{window.history.replaceState({},document.title,"/#/")}})()}},[i,le,G]);const Ts=a.useCallback(async t=>{try{await G(`${pe}/user/server-order/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_order:t})}),console.log("üíæ Server order saved:",t)}catch(E){console.error("Server order save error:",E)}},[G]),kc=(t,E,T)=>{t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("serverId",E.toString()),t.dataTransfer.setData("sourceIndex",T.toString());const z=t.currentTarget.cloneNode(!0);z.style.position="absolute",z.style.top="-9999px",z.style.opacity="0.8",z.style.transform="rotate(5deg)",z.style.pointerEvents="none",document.body.appendChild(z),t.dataTransfer.setDragImage(z,24,24),setTimeout(()=>{document.body.contains(z)&&document.body.removeChild(z)},0),t.currentTarget.style.opacity="0.4"},Ac=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},Bc=t=>{t.currentTarget.style.opacity="1"},Dc=a.useCallback((t,E)=>{t.preventDefault(),parseInt(t.dataTransfer.getData("serverId"));const T=parseInt(t.dataTransfer.getData("sourceIndex"));if(console.log("üìù DROP: sourceIndex:",T,"‚Üí targetIndex:",E),T===E){console.log("‚ùå Aynƒ± yere bƒ±rakƒ±lƒ±yor (sourceIndex === targetIndex), i≈ülem iptal");return}let z=rr.length>0?[...rr]:le.map(Q=>Q.id);console.log("üìù Mevcut sƒ±ralama:",z),console.log("üîÑ Kaynak index:",T,"‚Üí Hedef index:",E);const[D]=z.splice(T,1),H=T<E?E-1:E;console.log("üéØ Adjusted target index:",H),z.splice(H,0,D),console.log("‚úÖ Yeni sƒ±ralama:",z),es(z),Ts(z)},[rr,le,Ts]),Fs=t=>{const E=document.getElementById(`message-${t}`);E&&E.scrollIntoView({behavior:"smooth",block:"center"})},Tc=async()=>{if(window.confirm("Bu odadaki t√ºm mesajlarƒ± silmek istediƒüine emin misin?"))try{(await G(`${pe}/rooms/${p.id}/clear/`,{method:"POST"})).ok&&we([])}catch(t){console.error(t)}},Fc=async()=>{da(!0),is(!0),Mo("");try{const t=await G(`${pe}/rooms/${p.id}/summarize/`,{method:"POST"}),E=await t.json();t.ok?Mo(E.summary):Mo("Hata: "+E.error)}catch{Mo("Baƒülantƒ± hatasƒ±.")}is(!1)},ba=t=>{if(console.log("üì§ [DEBUG] sendMessage called with:",t),console.log("üì§ [DEBUG] ws.current:",We.current),console.log("üì§ [DEBUG] ws.current.readyState:",We.current?.readyState),console.log("üì§ [DEBUG] activeChat:",p),!t)return;const E=t.trim();if(!E)return;if(E==="/tema"){Er(!0),jr(null),Wr(!1),Hr(""),ho.current?.clear?.();return}if(E==="/sablon"){Fe(!0),jr(null),Wr(!1),Hr(""),ho.current?.clear?.();return}if(E.startsWith("/duyuru ")){const oe=E.slice(8).trim();if(oe){const Be={type:p.type==="room"?"chat_message":"dm_message",message:`[ANNOUNCE] ${oe}`,username:te,temp_id:nn(),...p.type==="room"?{room:p.id}:{conversation:p.id}};We.current?.send(JSON.stringify(Be)),Vr({message:oe,type:"info",author:te}),jr(null),Wr(!1),Hr(""),ho.current?.clear?.();return}}jr(null),Wr(!1),Hr(""),Sc("");const T=p.type==="room"?`room-${p.id}`:`dm-${p.id}`,z=X[T];let D=E;p.type==="dm"&&z&&(D=gu(E,z));const H={type:p.type==="room"?"chat_message":"dm_message",message:D,username:te,temp_id:nn(),...p.type==="room"?{room:p.id}:{conversation:p.id}},Q=JSON.stringify(H),Ee=async()=>{let ze=0;for(;We.current&&We.current.readyState===WebSocket.CONNECTING&&ze<3e3;)await new Promise(ot=>setTimeout(ot,100)),ze+=100;if(We.current&&We.current.readyState===WebSocket.OPEN)try{return We.current.send(Q),!0}catch(ot){return console.error("WebSocket send error:",ot),!1}return!1},Ae=async()=>{try{const oe=p.type==="dm"?`${pe}/messages/send_dm/`:`${pe}/messages/send/`,Be=p.type==="dm"?{conversation_id:p.id,content:D}:{room:p.id,content:D};return(await G(oe,{method:"POST",body:JSON.stringify(Be)})).ok}catch(oe){return console.error("HTTP fallback error:",oe),!1}};(async()=>await Ee()||await Ae())(),we(oe=>{const Be={...H,content:D,timestamp:new Date().toISOString(),id:H.temp_id,avatar:Lt?.avatar||mt(te)},ze=[...oe,Be],ot=p.type==="room"?`room-${p.id}`:`dm-${p.id}`;return Wt.current[ot]&&(Wt.current[ot].messages=ze),ze}),ho.current?.clear?.(),nr("smooth")},Rc=t=>{const E={type:p.type==="room"?"chat_message":"dm_message",message:"",username:te,temp_id:nn(),snippet_data:t,...p.type==="room"?{room:p.id}:{conversation:p.id}};We.current?.send(JSON.stringify(E)),we(T=>[...T,{...E,timestamp:new Date().toISOString(),id:E.temp_id,avatar:Lt?.avatar||mt(te)}]),ur(!1)},_a=a.useCallback(()=>{if(!p.id||p.type==="welcome"||p.type==="friends"||!te)return;if(We.current&&We.current.readyState===WebSocket.OPEN){const z=We.current.url,D=p.type==="room"?`/ws/chat/${p.id}/`:`/ws/dm/${p.id}/`;if(z.includes(D)){console.log("‚è≠Ô∏è [WebSocket] Already connected to this chat, skipping reconnect");return}}We.current&&(console.log("üîå [WebSocket] Closing existing connection before new one"),We.current.close(1e3,"change_room"));let t="";const E=`?username=${encodeURIComponent(te)}&token=${n}`;if(p.type==="room"?t=`${rn}://${on}/ws/chat/${p.id}/${E}`:p.type==="dm"&&(t=`${rn}://${on}/ws/dm/${p.id}/${E}`),!t){console.log("‚è≠Ô∏è [WebSocket] Skipping - activeChat.type is not room/dm:",p.type);return}console.log("üîå [WebSocket] Connecting to:",t.split("?")[0]);const T=new WebSocket(t);We.current=T,T.onopen=()=>{console.log("‚úÖ [WebSocket] Connected successfully"),hr(!0)},T.onmessage=z=>{const D=JSON.parse(z.data);if(D.type==="chat"||D.type==="dm"||D.type==="chat_message_handler"){console.log("üì® [WebSocket] Message data:",{type:D.type,id:D.id,temp_id:D.temp_id,room:D.room,conversation:D.conversation});const H=Q=>Q.room?`room-${Q.room}`:Q.conversation?`dm-${Q.conversation}`:(console.warn("‚ö†Ô∏è [WebSocket] No room/conversation in message, using activeChat fallback"),p.type==="room"?`room-${p.id}`:`dm-${p.id}`);we(Q=>{if(D.temp_id){const oe=Q.findIndex(Be=>Be.temp_id===D.temp_id);if(oe!==-1){console.log("üîÑ [WebSocket] Replacing temp message with real message:",D.temp_id,"‚Üí",D.id);const Be=[...Q];Be[oe]=D;const ze=H(D);return Wt.current[ze]&&(Wt.current[ze].messages=Be),Be}}if(D.id&&Q.some(oe=>oe.id===D.id))return console.log("‚è≠Ô∏è [WebSocket] Duplicate message (by ID) skipped:",D.id),Q;console.log("üì® [WebSocket] New message received:",D);const Ee=[...Q,D],Ae=H(D);return Wt.current[Ae]&&(Wt.current[Ae].messages=Ee),Ee}),me(D.username,!1),va()?nr("smooth"):Wo(!0)}else D.type==="typing_status_update"?D.username!==te&&me(D.username,D.is_typing):D.type==="chat_cleared"&&we([]);if(D.message&&D.message.startsWith("[ANNOUNCE] ")){const H=D.message.replace("[ANNOUNCE] ","");Vr({message:H,type:"info",author:D.username})}},T.onerror=z=>{console.error("‚ùå [WebSocket] Connection error:",z)},T.onclose=z=>{console.log("üîå [WebSocket] Connection closed:",z.code,z.reason),hr(!1)}},[p.id,p.type,te,n]);a.useEffect(()=>{eo.isNativePlatform()&&(Ol.initialize({clientId:zm,scopes:["profile","email"],grantOfflineAccess:!0}),mr("max(35px, env(safe-area-inset-top))"))},[]),a.useEffect(()=>{i&&!Nr&&(async()=>{try{const[E,T,z,D,H]=await Promise.all([G(Lm).then(oe=>oe.json()),G(Ba).then(oe=>oe.json()),G(`${Rm}?username=${encodeURIComponent(te)}`).then(oe=>oe.json()),G(`${pe}/friends/list/`).then(oe=>oe.json()),G(`${pe}/users/me/`).then(oe=>oe.json())]);Tt(E);const Q={username:H?.username||te,email:H?.email||"",avatar:H?.avatar||null,status_message:H?.status_message||"",friend_code:H?.friend_code||"0000",social_links:H?.social_links||{},coins:H?.coins||0,xp:H?.xp||0,level:H?.level||1,status:"online",role:H?.role||"member",is_whitelisted:H?.is_whitelisted||!1};zo(Q),console.log("üî• [DEBUG] currentUserProfile with is_whitelisted:",Q);const Ae=(D.friends||[]).map(oe=>{const Be=oe.sender_username===te,ze=Be?oe.receiver_username:oe.sender_username,ot=Be?oe.receiver_avatar:oe.sender_avatar,ar=Be?oe.receiver_status:oe.sender_status,Xe=Be?oe.receiver_activity:oe.sender_activity;return ze?{username:ze,avatar:ot,status:ar||"offline",display_name:ze,current_activity:Xe||{},status_message:"",last_seen:oe.created_at,role:"friend",friend_code:""}:null}).filter(Boolean).filter(oe=>oe.username!==Q.username);Nt(Ae),Ve(T),Ue(z),la(Ae),oc(!0),M(async()=>{const{prefetchUserAvatars:oe}=await import("./imageCaching-BEvvks0u.js");return{prefetchUserAvatars:oe}},__vite__mapDeps([19,1,2]),import.meta.url).then(({prefetchUserAvatars:oe})=>{oe(Ae)})}catch(E){console.error("Init Data Error",E),Et("Veriler y√ºklenemedi.")}})()},[i,Nr,G,te]),a.useEffect(()=>{te&&(async()=>{try{const E=await G(`${pe}/user/server-order/`);if(E.ok){const T=await E.json();es(T.server_order||[]),console.log("üéØ Server order loaded:",T.server_order)}}catch(E){console.error("Server order fetch error:",E)}})()},[te,G]),a.useEffect(()=>{const t=async()=>{if(!p.id||p.type!=="room"){Vr(null);return}try{const E=await G(`${pe}/stickies/list/?room=${p.id}`);if(E.ok){const T=await E.json();T&&T.length>0?Vr({message:T[0].content,type:"info",author:T[0].creator}):Vr(null)}}catch(E){console.error("Sticky messages fetch error:",E)}};i&&p.id&&t()},[p.id,p.type,i,G]);const Ko=a.useCallback(async t=>{if(!t){or([]);return}try{console.log(`üîç [Server Members] Fetching members for server ${t}...`);const E=await G(`${pe}/servers/${t}/members/`);if(E.ok){const T=await E.json();console.log(`üë• [Server Members] Fetched ${T.length} members for server ${t}:`,T),or(T)}else{const T=await E.text();console.error("‚ùå Server members fetch failed:",E.status,T),or([])}}catch(E){console.error("‚ùå Server members fetch error:",E),or([])}},[G]),Pc=a.useCallback(t=>{console.log("üñ±Ô∏è [Server Select] Server clicked:",t.name,t.id),sc(t),Ko(t.id),ce("server",t.id,null)},[Ko,ce]);a.useEffect(()=>{const t=async()=>{if(!p.id||p.type!=="room"){p.type!=="server"&&or([]);return}try{let E=null;for(const T of le){if(!T.categories||!Array.isArray(T.categories)){console.warn("‚ö†Ô∏è Server has no categories array:",T);continue}for(const z of T.categories)if(!(!z.rooms||!Array.isArray(z.rooms))){for(const D of z.rooms)if(D.slug===p.id){E=T.id;break}if(E)break}if(E)break}if(!E){console.warn("üî¥ Server ID bulunamadƒ± for room:",p.id),or([]);return}Ko(E)}catch(E){console.error("‚ùå Server members fetch error:",E),or([])}};i&&p.id&&p.type==="room"?t():p.type!=="server"&&or([])},[p.id,p.type,i,Ko,le]),a.useEffect(()=>{const t=async()=>{try{const T=await fetch(`${pe}/maintenance/status/`);if(T.ok){const z=await T.json();z.active?ua({message:z.message||"System maintenance in progress",endTime:z.end_time,level:z.level||"info"}):ua(null)}}catch(T){console.error("Maintenance check error:",T)}};t();const E=setInterval(t,300*1e3);return()=>clearInterval(E)},[]),a.useEffect(()=>{const t=(z,D)=>{try{const H=z.split(".").map(Number),Q=D.split(".").map(Number);return H[0]>Q[0]?!0:H[0]<Q[0]?!1:H[1]>Q[1]?!0:H[1]<Q[1]?!1:H[2]>Q[2]}catch(H){return console.error("‚ùå Version kar≈üƒ±la≈ütƒ±rma hatasƒ±:",H),!1}},E=async()=>{const z=window.location.hostname==="localhost"&&window.location.port==="3000";if(!Zr&&!ir&&!z){console.log("‚è≠Ô∏è Version check atlandƒ± (web browser)");return}try{console.log("üîç Version kontrol√º yapƒ±lƒ±yor...",{isElectron:Zr,isNative:ir,isDebugMode:z,hostname:window.location.hostname});let D="1.1.203";if(window.electron?.getAppVersion)try{D=await window.electron.getAppVersion(),console.log("üñ•Ô∏è Electron version:",D)}catch(oe){console.warn("‚ö†Ô∏è Electron version alƒ±namadƒ±:",oe)}console.log("üì¶ Mevcut versiyon:",D);const H=await fetch("https://media.pawscord.com/builds/version.json");if(!H.ok){console.warn("‚ö†Ô∏è version.json alƒ±namadƒ±:",H.status);return}const Q=await H.json(),Ee=Q.latest_version;console.log("üåê Son versiyon:",Ee),console.log("üìä Kar≈üƒ±la≈ütƒ±rma:",{current:D,latest:Ee});const Ae=t(Ee,D);if(console.log("üîç ƒ∞s newer?",Ae),Ee&&Ae){if(console.log("‚úÖ YENƒ∞ G√úNCELLEME MEVCUT!",{current:D,latest:Ee}),rs(!0),window.require){const{ipcRenderer:oe}=window.require("electron");oe.send("update-available",{currentVersion:D,latestVersion:Ee,downloadUrl:Q.download_url_windows})}}else console.log("‚ÑπÔ∏è Versiyon g√ºncel veya eski:",D,">=",Ee),rs(!1)}catch(D){console.error("‚ùå Version check hatasƒ±:",D)}};E();const T=setInterval(E,1800*1e3);return()=>clearInterval(T)},[]),a.useEffect(()=>{if(!Nr||!p.id||p.type==="friends"||p.type==="welcome")return;console.log("üîÑ [DEBUG activeChat] Chat deƒüi≈üti:",p);let t=!1;const E=p.type==="room"?`room-${p.id}`:`dm-${p.id}`,T=Wt.current[E];return T?.messages?.length>0?(console.log("üì¶ [Cache] Restoring cached messages:",T.messages.length,"(skipping API call)"),we(T.messages),Oo(!!T.hasMore),ca(T.offset||0),setTimeout(()=>{t||nr("auto")},50),t||_a()):(console.log("üåê [Fetch] No cache, fetching from server..."),ca(0),Oo(!0),t||_a(),setTimeout(()=>{t||Ps(!0,0)},50)),()=>{t=!0,console.log("üßπ [Cleanup] activeChat useEffect cleanup triggered")}},[p.id,p.type,Nr,_a]),a.useEffect(()=>{be?.type==="server_structure_update"&&(console.log("üîÑ Real-time Update: Refetching Server List..."),(async()=>{try{const E=await G(Ba);if(E.ok){const T=await E.json();Ve(T)}}catch(E){console.error("Real-time Update Failed:",E)}})())},[be,G]),a.useEffect(()=>{if(!i||!te)return;const t={current:null},E=async()=>{try{const z=await G(`${pe}/users/rich_presence/${te}/`);if(z.ok){const D=await z.json();let H={};const Q=oe=>{if(!oe)return!0;const Be=new Date(oe);return(new Date-Be)/1e3/60<2};D.spotify&&Q(D.spotify.timestamp)&&(H.spotify={type:"listening",name:D.spotify.track,details:D.spotify.artist,album_art:D.spotify.album_art}),D.steam&&Q(D.steam.timestamp)&&(H.steam={type:"playing",name:D.steam.game,state:D.steam.state}),Object.keys(H).length===0&&(H=null);const Ee=JSON.stringify(t.current),Ae=JSON.stringify(H);Ee!==Ae&&(t.current=H,Go.current&&Go.current.readyState===WebSocket.OPEN&&Go.current.send(JSON.stringify({type:"update_activity",activity:H})))}}catch{}},T=setInterval(E,3e4);return E(),()=>clearInterval(T)},[i,te,G]),a.useEffect(()=>{va()&&(nr("smooth"),Wo(!1))},[J,va,nr]),a.useEffect(()=>{Ea()},[p,Ea]),a.useEffect(()=>{const t=E=>{(E.ctrlKey||E.metaKey)&&E.key.toLowerCase()==="k"&&(E.preventDefault(),Ds.current?.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),a.useEffect(()=>{if(!i||!Nr)return;const t=Ql();Za(t);const E=`${rn}://${on}/ws/status/?username=${encodeURIComponent(te)}&token=${n}`,T=new WebSocket(E);return Go.current=T,T.onmessage=z=>{const D=JSON.parse(z.data);if(D.type==="online_user_list_update"){const H=Array.isArray(D.users)?D.users.map(Q=>typeof Q=="string"?Q:Q.username||Q):[];console.log("üë• [Online Users] Updated:",H),Ct(H)}if(D.type==="voice_users_update"&&(console.log("üîä [GlobalWS] Received voice_users_update:",D.voice_users),kt(D.voice_users)),D.type==="user_activity_update"&&Nt(H=>H.map(Q=>Q.username===D.username?{...Q,current_activity:D.activity}:Q)),D.type==="user_profile_update"&&D.user_data){const H=D.user_data;H.username===te&&(console.log("üë§ [Profile Update] Updating currentUserProfile:",H),zo(Q=>({...Q,avatar:H.avatar,status_message:H.status_message,social_links:H.social_links,coins:H.coins,xp:H.xp,level:H.level,status:H.status,role:H.role}))),Nt(Q=>Q.map(Ee=>Ee.username===H.username?{...Ee,...H}:Ee))}if(D.type==="global_message_notification"&&D.username!==te){const H=D.room_slug?`room-${D.room_slug}`:`dm-${D.conversation_id}`,Q=p.type==="room"?`room-${p.id}`:`dm-${p.id}`;H!==Q&&lr(H)}D.type==="server_structure_update"&&(console.log("Server structure update received, refreshing..."),G(Ba).then(H=>H.json()).then(H=>Ve(H)).catch(console.error))},()=>T.close()},[i,Nr,te,n,p]),a.useEffect(()=>{B&&S&&(console.log(`üîä [Voice] Switched to voice chat panel: ${S}`),ce("voice",S))},[B,S]);const Rs=t=>{ce("room",t),ye&&Ne(!1)},yo=t=>{G(Pm,{method:"POST",body:JSON.stringify({target_username:t})}).then(E=>E.json()).then(E=>{ce("dm",E.conversation_id,t),ye&&Ne(!1)})},Ic=a.useCallback(t=>{t&&(window.location.hash=t.startsWith("#/")?t:`#${t.startsWith("/")?t:`/${t}`}`,ye&&vt(!1))},[ye]),Lc=a.useCallback(()=>{cs(t=>{const E={...t,notifications:!t.notifications};return localStorage.setItem("chat_sound_settings",JSON.stringify(E)),E})},[]),$c=a.useCallback(async()=>{if(!p?.id)return;const t=`${window.location.origin}/#/${p.type==="dm"?`dm/${p.id}`:`room/${p.id}`}`;try{await navigator.clipboard.writeText(t),Te("Link kopyalandƒ±"),setTimeout(()=>Te(""),1500)}catch(E){console.error("Link kopyalanamadƒ±",E),ie.error("Link kopyalanamadƒ±")}},[p]),Ps=async(t=!0,E=0)=>{if(!p.id)return;if(p.type==="voice"){console.log("[Voice] Skipping message history for voice chat"),we([]),Oo(!1);return}console.log("üîÑ [fetchMessageHistory] Starting fetch:",{isInitial:t,offset:E,activeChat:p}),$o(!0);const T=p.type==="room"?Tm:Fm,z=p.type==="room"?`room-${p.id}`:`dm-${p.id}`;try{const D=await G(`${T}${p.id}/?limit=50&offset=${E}`);if(D.ok){const H=await D.json(),Q=H.results||[],Ee=Q.filter(Xe=>!Xe||typeof Xe!="object"?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Invalid message object:",Xe),!1):!Xe.id&&!Xe.temp_id?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Message without ID:",Xe),!1):!0);Ee.length<Q.length&&console.warn(`‚ö†Ô∏è [fetchMessageHistory] Filtered out ${Q.length-Ee.length} invalid messages`);const Ae=Ee.reverse();console.log("‚úÖ [fetchMessageHistory] Fetched messages:",Ae.length);let oe=Ae;t?(console.log("üìù [fetchMessageHistory] Setting messages (INITIAL):",Ae.length),we(Ae),setTimeout(()=>nr("auto"),100)):we(Xe=>(console.log("üìù [fetchMessageHistory] Appending to existing:",Xe.length,"+",Ae.length),oe=[...Ae,...Xe],oe));const Be=t?Ae.length:E+Ae.length,ze=!!H.next;Oo(ze),t||ca(Be);const ot=Wt.current[z]?.messages||[],ar=t?Ae:[...Ae,...ot];Wt.current[z]={messages:oe||ar,offset:Be,hasMore:ze},console.log("üíæ [fetchMessageHistory] Cached:",z,"with",(oe||ar).length,"messages")}}catch(D){console.error("‚ùå [fetchMessageHistory] Error:",D)}$o(!1)},Oc=async(t,E)=>{try{console.log("üîë [Auth] Login attempt:",{username:t,url:Oi});const T=await fetch(Oi,{method:"POST",body:JSON.stringify({username:t,password:E}),headers:{"Content-Type":"application/json"}});console.log("üîë [Auth] Response status:",T.status);const z=await T.json();if(T.ok)console.log("‚úÖ [Auth] Login successful"),s(z.access,z.refresh);else{if(console.error("‚ùå [Auth] Login failed:",z),T.status===401&&z.requires_2fa&&z.temp_token){console.log("üîê [Auth] 2FA required, redirecting..."),window.location.href=`/#/2fa-login?temp_token=${encodeURIComponent(z.temp_token)}`;return}T.status===401?Et("Kullanƒ±cƒ± adƒ± veya ≈üifre hatalƒ±"):T.status===400?Et(z.detail||z.error||"Ge√ßersiz giri≈ü bilgileri"):T.status>=500?Et("Sunucu hatasƒ±. L√ºtfen daha sonra tekrar deneyin."):Et(z.detail||z.error||"Giri≈ü ba≈üarƒ±sƒ±z")}}catch(T){console.error("‚ùå [Auth] Network error:",T),Et("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin.")}},zc=async(t,E,T)=>{try{console.log("üìù [Auth] Register attempt:",{username:t,email:E,url:zi});const z=await fetch(zi,{method:"POST",body:JSON.stringify({username:t,email:E,password:T}),headers:{"Content-Type":"application/json"}});if(console.log("üìù [Auth] Response status:",z.status),z.status===201)return console.log("‚úÖ [Auth] Registration successful"),!0;const D=await z.json();console.error("‚ùå [Auth] Registration failed:",D);let H="";return D.username?H=D.username.join(" "):D.email?H=D.email.join(" "):D.password?H=D.password.join(" "):D.detail?H=D.detail:H=Object.values(D).flat().join(" "),Et(H||"Kayƒ±t i≈ülemi ba≈üarƒ±sƒ±z"),!1}catch(z){return console.error("‚ùå [Auth] Network error:",z),Et("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin."),!1}},Yo=a.useCallback(async(t,E=!1,T=0,z=null)=>{fa(!0),No(0);const D=z||p,H=nn();try{const Q=await Mm(t),Ee=t.type||"application/octet-stream",Ae=10*1024*1024,oe=5,Be=Math.ceil(t.size/Ae);console.log("üöÄ [R2 Multipart] Starting upload:",{fileName:t.name,fileSize:(t.size/(1024*1024)).toFixed(2)+" MB",totalParts:Be,parallelUploads:oe});const ot=await(await G(`${pe}/upload/multipart/init/`,{method:"POST",body:JSON.stringify({file_name:t.name,file_size:t.size,content_type:Ee,file_hash:Q})})).json();if(ot.file_exists){console.log("‚úÖ [R2] File already exists, skipping upload"),ie.success("Dosya zaten y√ºkl√º!"),fa(!1),No(100);return}const{upload_id:ar,key:Xe}=ot;console.log(`üì¶ [R2] Upload ID: ${ar.substring(0,20)}..., Key: ${Xe}`);const Zo=[];let $s=0;const qc=async Pe=>{const pt=(Pe-1)*Ae,sr=Math.min(pt+Ae,t.size),qr=t.slice(pt,sr);console.log(`üì§ [R2] Part ${Pe}/${Be} uploading...`);const vo=new FormData;vo.append("upload_id",ar),vo.append("key",Xe),vo.append("part_number",Pe.toString()),vo.append("chunk",qr,`part_${Pe}`);const Qo=await G(`${pe}/upload/multipart/upload-part/`,{method:"POST",body:vo,headers:{}});if(!Qo.ok){const Yc=await Qo.text();throw new Error(`Part ${Pe} upload failed: ${Qo.status} - ${Yc}`)}const{etag:Os,part_number:Kc}=await Qo.json();$s++;const zs=Math.round($s/Be*95);return No(zs),console.log(`‚úÖ [R2] Part ${Pe}/${Be} complete (${zs}%), ETag: ${Os}`),{ETag:Os,PartNumber:Kc}};for(let Pe=0;Pe<Be;Pe+=oe){const pt=[];for(let qr=0;qr<oe&&Pe+qr<Be;qr++)pt.push(qc(Pe+qr+1));const sr=await Promise.all(pt);Zo.push(...sr)}Zo.sort((Pe,pt)=>Pe.PartNumber-pt.PartNumber),console.log("üìã [R2] All parts uploaded, completing...",Zo);const wa=await G(`${pe}/upload/multipart/complete/`,{method:"POST",body:JSON.stringify({upload_id:ar,key:Xe,parts:Zo,file_name:t.name,file_hash:Q,room_slug:D.type==="room"?D.id:null,conversation_id:D.type==="dm"?D.id:null,temp_id:H,is_voice_message:E?"true":"false",duration:T.toString()})});if(!wa.ok){const Pe=await wa.text();throw new Error(`Complete failed: ${Pe}`)}const kr=await wa.json();No(100),console.log("‚úÖ [R2 Multipart] Upload complete!",kr),D.id===p.id&&(we(Pe=>{if(kr.temp_id){const pt=Pe.findIndex(sr=>sr.temp_id===kr.temp_id);if(pt!==-1){const sr=[...Pe];return sr[pt]=kr,sr}}return kr.id&&Pe.some(pt=>pt.id===kr.id)?Pe:[...Pe,kr]}),nr("smooth"))}catch(Q){console.error("‚ùå [R2 Multipart] Error:",Q),ie.error(`Y√ºkleme hatasƒ±: ${Q.message}`)}fa(!1)},[p,te,G]),Mc=t=>{t.preventDefault(),t.stopPropagation(),Vo(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&Yo(t.dataTransfer.files[0])},Uc=(t,E)=>{if(t.preventDefault(),t.stopPropagation(),Do(null),t.dataTransfer.files&&t.dataTransfer.files.length>0){const T=t.dataTransfer.files[0];if(E.type==="dm"){const z=gt.find(D=>D.id===E.id);if(z){const D=z.participants.find(H=>H.username!==te);D&&(yo(D.username),setTimeout(()=>{Yo(T,!1,0,E)},300))}}else E.type==="room"&&roomsWithCategories.find(D=>D.room_slug===E.id)&&(handleRoomClick(E.id),setTimeout(()=>{Yo(T,!1,0,E)},300))}},Vc=async t=>{if(t.preventDefault(),!p.id||!Ut.trim()){Ut.trim()||Ps(!0,0);return}$o(!0);try{let E=`${pe}/messages/search/?q=${encodeURIComponent(Ut)}`;p.type==="room"?E+=`&room=${p.id}`:E+=`&dm=${p.id}`;const T=await G(E);if(T.ok){const z=await T.json();we(z.results||z)}}catch(E){console.error(E)}$o(!1)},Is=async t=>{if(window.confirm("Bu mesajƒ± silmek istediƒüine emin misin?"))try{(await G(`${pe}/messages/${t}/delete/`,{method:"DELETE"})).ok&&we(T=>T.filter(z=>z.id!==t))}catch(E){console.error(E)}},Nc=async t=>{if(window.confirm("Bu sohbeti listenizden gizlemek istiyor musunuz?"))try{(await G(`${pe}/conversations/${t}/hide/`,{method:"POST"})).ok&&(Ue(T=>T.filter(z=>z.id!==t)),p.type==="dm"&&p.id===t&&ce("welcome","welcome"))}catch(E){console.error(E)}},Wc=async t=>{if(window.confirm(`‚ö†Ô∏è ADMƒ∞N: Bu konu≈ümayƒ± HER ƒ∞Kƒ∞ TARAFTAN KALICI OLARAK silmek istediƒüinize emin misiniz?

Bu i≈ülem GERƒ∞ ALINAMAZ!`))try{const E=await G(`${pe}/conversations/${t}/admin-delete/`,{method:"DELETE"});if(E.ok){const T=await E.json();ie.success(`‚úÖ ${T.deleted_messages} mesaj silindi. Katƒ±lƒ±mcƒ±lar: ${T.participants.join(", ")}`),Ue(z=>z.filter(D=>D.id!==t)),p.type==="dm"&&p.id===t&&ce("welcome","welcome")}else{const T=await E.json();ie.error(`‚ùå Hata: ${T.error||"Silme i≈ülemi ba≈üarƒ±sƒ±z"}`)}}catch(E){console.error(E),ie.error("‚ùå Sunucuyla baƒülantƒ± hatasƒ±")}},Hc=a.useCallback(()=>{ce("welcome","welcome",null),ye&&Ne(!1)},[ye]),jc=a.useCallback(async(t,E,T)=>{switch(t){case"profile":const z=Ce.find(D=>D.username===E.username);z&&Rt(z);break;case"message":yo(E.username);break;case"volume":break;case"move":if(je&&T&&S)try{(await G(`${pe}/voice/move_user/`,{method:"POST",body:JSON.stringify({username:E.username,from_channel:S,to_channel:T})})).ok&&console.log(`‚úÖ ${E.username} moved to ${T}`)}catch(D){console.error("Move user error:",D)}break;case"kick":if(je&&window.confirm(`${E.username} kullanƒ±cƒ±sƒ±nƒ± kanaldan atmak istediƒüine emin misin?`))try{(await G(`${pe}/voice/kick_user/`,{method:"POST",body:JSON.stringify({username:E.username,room:S})})).ok&&console.log(`‚úÖ ${E.username} kicked from voice`)}catch(D){console.error("Kick user error:",D)}break;case"server_mute":if(je)try{(await G(`${pe}/voice/server_mute/`,{method:"POST",body:JSON.stringify({username:E.username,room:S})})).ok&&console.log(`‚úÖ ${E.username} server muted`)}catch(D){console.error("Server mute error:",D)}break;case"add_friend":try{const D=await G(`${pe}/friends/send/`,{method:"POST",body:JSON.stringify({username:E.username})});if(D.ok)Te(`‚úÖ ${E.username} kullanƒ±cƒ±sƒ±na arkada≈ülƒ±k isteƒüi g√∂nderildi!`),setTimeout(()=>Te(""),3e3);else{const H=await D.json();Te(`‚ùå ${H.error||"ƒ∞stek g√∂nderilemedi"}`),setTimeout(()=>Te(""),3e3)}}catch(D){console.error("Add friend error:",D),Te("‚ùå Arkada≈ü ekleme hatasƒ±"),setTimeout(()=>Te(""),3e3)}break;case"remove_friend":if(window.confirm(`${E.username} ile arkada≈ülƒ±ƒüƒ± sonlandƒ±rmak istediƒüinize emin misiniz?`))try{const D=wr.find(H=>H.sender_username===E.username||H.receiver_username===E.username);if(D&&(await G(`${pe}/friends/remove/${D.id}/`,{method:"DELETE"})).ok){Te(`‚úÖ ${E.username} ile arkada≈ülƒ±k sonlandƒ±rƒ±ldƒ±`),setTimeout(()=>Te(""),3e3);const Q=await G(`${pe}/friends/list/`);if(Q.ok){const Ee=await Q.json();la(Ee.friends||[])}}}catch(D){console.error("Remove friend error:",D),Te("‚ùå Arkada≈ülƒ±k sonlandƒ±rma hatasƒ±"),setTimeout(()=>Te(""),3e3)}break;case"invite_to_server":jo({username:E.username});break;case"mute_user":try{const D=await G(`${pe}/users/${E.username}/mute/`,{method:"POST"});if(D.ok)ie.success(`üîá ${E.username} sessize alƒ±ndƒ±`);else{const H=await D.json();ie.error(`‚ùå ${H.error||"Sessize alma ba≈üarƒ±sƒ±z"}`)}}catch(D){console.error("Mute user error:",D),ie.error("‚ùå Sessize alma hatasƒ±")}break;case"block_user":if(window.confirm(`${E.username} kullanƒ±cƒ±sƒ±nƒ± engellemek istediƒüinize emin misiniz?`))try{const D=await G(`${pe}/users/${E.username}/block/`,{method:"POST"});if(D.ok){ie.success(`üö´ ${E.username} engellendi`);const H=await G(`${pe}/friends/list/`);if(H.ok){const Q=await H.json();la(Q.friends||[])}}else{const H=await D.json();ie.error(`‚ùå ${H.error||"Engelleme ba≈üarƒ±sƒ±z"}`)}}catch(D){console.error("Block user error:",D),ie.error("‚ùå Engelleme hatasƒ±")}break;default:console.log("Unknown action:",t)}},[Ce,je,S,G,pe,yo,wr,Te]),Gc=()=>{if(Zr){tt(!0),Te("ƒ∞ndiriliyor...");const{ipcRenderer:t}=window.require("electron"),E=`${ee}/media/build/Pawscord-Setup.exe`;t.send("start-download",E)}else window.open(`${ee}/media/build/Pawscord-Setup.exe`,"_blank")};a.useEffect(()=>{if(Zr){const{ipcRenderer:t}=window.require("electron"),E=(D,H)=>Rr(Math.round(H*100)),T=()=>{Te("Ba≈ülatƒ±lƒ±yor..."),Rr(100),setTimeout(()=>Te("Kapanƒ±yor..."),1500)},z=(D,H)=>{tt(!1),ie.error(`ƒ∞ndirme hatasƒ±: ${H}`)};return t.on("download-progress",E),t.on("download-complete",T),t.on("download-error",z),()=>{t.removeAllListeners("download-progress"),t.removeAllListeners("download-complete"),t.removeAllListeners("download-error")}}},[]);const Ls=se!=="finished";if(!i)return e.createElement(e.Fragment,null,Ls&&e.createElement(Ri,{animationState:se}),e.createElement(Qu,{onLogin:Oc,onRegister:zc,error:Yn,setAuthError:Et}));const Jo=ye&&!ir?"20px":Bt,Sa=p.type==="room"?`room-${p.id}`:`dm-${p.id}`,Xo=!!X[Sa];return Ss?e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"large",text:"Davet y√ºkleniyor..."})},e.createElement(pm,{vanityPath:Ss,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>{ws(null),window.location.hash="#/"}})):e.createElement("div",{style:{...fe.mainContainer},className:"dark-theme"},Ls&&e.createElement(Ri,{animationState:se}),Uo&&e.createElement(Vu,{message:Uo.message,endTime:Uo.endTime,level:Uo.level,onDismiss:()=>ua(null)}),e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"medium",text:"Modal y√ºkleniyor..."})},qn&&e.createElement(gm,{user:Lt,onClose:()=>ko(!1),onProfileUpdate:t=>zo(t),onLogout:d,fetchWithAuth:G,getDeterministicAvatar:mt,updateProfileUrl:Im,changeUsernameUrl:$m,soundSettings:mo,onUpdateSoundSettings:cs,onImageClick:Xt,apiBaseUrl:ee}),zr&&e.createElement(sf,{onClose:()=>ao(!1)}),Qn&&e.createElement(bf,{onClose:()=>so(!1),fetchWithAuth:G,apiBaseUrl:ee}),io&&e.createElement(_f,{onClose:()=>To(!1),onOpenAnalytics:()=>so(!0),onOpenWebhooks:()=>Fo(!0),onOpenModTools:()=>ta(!0),onOpenAuditLogs:()=>_(!0),onOpenReports:()=>br(!0),onOpenVanityURL:()=>Mr(!0),onOpenAutoResponder:()=>K(!0),fetchWithAuth:G,apiBaseUrl:ee}),fc&&e.createElement(tm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>gs(!1),username:te}),mc&&e.createElement(rm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>ys(!1),username:te}),pc&&e.createElement(om,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>vs(!1),username:te}),xc&&e.createElement(nm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Es(!1),username:te}),hc&&e.createElement(am,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>bs(!1),username:te}),gc&&e.createElement(sm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>_s(!1),serverId:p?.type==="room"?p.server_id:null}),yc&&e.createElement(_m,{onClose:()=>Cs(!1)}),vc&&e.createElement(Sm,{onClose:()=>ks(!1),apiBaseUrl:ee}),Ro&&e.createElement(Cf,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>co(!1)}),oa&&e.createElement(Af,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Zt(!1)}),Pt&&e.createElement(Bf,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>br(!1)}),Ur&&e.createElement(Df,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>_(!1)}),R&&e.createElement(Tf,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>I(!1)}),ea&&e.createElement(Sf,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Fo(!1)}),ra&&e.createElement(wf,{serverId:p?.type==="room"?p.server_id:null,fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Mr(!1)}),W&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Li,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>K(!1)})),N&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Ff,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>O(!1),onMessageClick:t=>{t.room?ce({type:"room",slug:t.room}):t.conversation&&ce({type:"dm",slug:t.conversation}),O(!1)}})),$&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Rf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Z(!1),onMessageClick:t=>{t.room?ce({type:"room",slug:t.room}):t.conversation&&ce({type:"dm",slug:t.conversation}),Z(!1)}})),ae&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Pf,{fetchWithAuth:G,apiBaseUrl:ee,channelSlug:p.slug,onClose:()=>xe(!1)})),Ro&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(kf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p?.type==="room"?p.server_id:null,onClose:()=>co(!1)})),at&&e.createElement(af,{symbol:at,onClose:()=>dt(null)}),Jn&&e.createElement(ff,{onClose:()=>no(!1),ws:We,username:te}),ut&&e.createElement(nf,{onClose:()=>ur(!1),onSend:Rc}),ns&&e.createElement(vf,{onClose:()=>as(null),server:ns,currentUsername:te,fetchWithAuth:G,apiBaseUrl:ee,serverMembers:Cr}),dr&&e.createElement(gf,{onClose:()=>At(!1),onSetKey:t=>Ot(Sa,t),existingKey:X[Sa]}),ic&&e.createElement(yf,{onClose:()=>os(!1),apiBaseUrl:ee}),ss&&e.createElement(Ii,{isLoading:cc,summaryText:lc,onClose:()=>da(!1)}),qe&&e.createElement(Ef,{onClose:()=>Oe(!1),friendsList:wr,fetchWithAuth:G,apiBaseUrl:ee,onGroupCreated:t=>{Ue(E=>[t,...E]),ce("dm",t.id,"Grup Sohbeti")}}),qt&&(p.type==="room"||p.type==="dm")&&e.createElement(cf,{roomSlug:p.type==="room"?p.id:`dm_${p.id}`,onClose:()=>lt(!1),wsProtocol:rn,apiHost:on}),zt&&e.createElement(lf,{onClose:()=>Qe(!1),fetchWithAuth:G,apiBaseUrl:ee,sendSignal:l,absoluteHostUrl:ee}),dc&&e.createElement(xf,{onClose:()=>ls(!1),ws:We,roomSlug:p.id}),Kn&&e.createElement(pf,{onSelect:t=>{const E=t.startsWith("http")?t:ee+t;ba(E),Bo(!1)},onClose:()=>Bo(!1),localGifListUrl:Om,absoluteHostUrl:ee,fetchWithAuth:G}),Ye&&e.createElement(mf,{onClose:()=>gr(!1),onSelect:t=>{ba(t),gr(!1)},fetchWithAuth:G,apiBaseUrl:ee}),Kt&&e.createElement(of,{onClose:()=>Ir(!1),fetchWithAuth:G,apiBaseUrl:ee,activeRoomSlug:p.id})),na&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(If,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>ja(!1)})),aa&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Lf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>uo(!1)})),Sr&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement($f,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>It(!1)})),fo&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Of,{fetchWithAuth:G,apiBaseUrl:ee,username:te,onClose:()=>Lo(!1)})),sa&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(zf,{fetchWithAuth:G,apiBaseUrl:ee,username:te,onClose:()=>ia(!1)})),i0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Mf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>c0(!1)})),l0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Uf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>d0(!1)})),u0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Vf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>f0(!1)})),m0&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Nf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>p0(!1)})),x0&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Wf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>h0(!1)})),g0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Hf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Ga(!1),onLoadDraft:t=>{t.room&&ce({type:"room",slug:t.room}),Ga(!1)}})),y0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(jf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>v0(!1)})),E0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Gf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,currentUsername:te,onClose:()=>b0(!1)})),_0&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(qf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>S0(!1)})),w0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Kf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>C0(!1)})),k0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Li,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>A0(!1)})),B0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Yf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>D0(!1)})),T0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Jf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>F0(!1)})),R0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Xf,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>P0(!1)})),I0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Zf,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>qa(!1),onSuccess:()=>{ie.success("2FA ba≈üarƒ±yla etkinle≈ütirildi!"),qa(!1)}})),L0&&p?.type==="room"&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(Qf,{fetchWithAuth:G,apiBaseUrl:ee,roomSlug:p.slug,onClose:()=>$0(!1)})),O0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(em,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>z0(!1)})),M0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(im,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>U0(!1)})),V0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(cm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>Ka(!1),onMessageClick:t=>{t.room&&ce({type:"room",slug:t.room}),Ka(!1)}})),N0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(lm,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>W0(!1)})),H0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(dm,{fetchWithAuth:G,apiBaseUrl:ee,url:null,onClose:()=>j0(!1)})),G0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(um,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>q0(!1)})),K0&&p?.type==="room"&&p.server_id&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(fm,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p.server_id,onClose:()=>Y0(!1)})),J0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(mm,{fetchWithAuth:G,apiBaseUrl:ee,onClose:()=>X0(!1)})),Z0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"üéÆ Oyunlar Y√ºkleniyor...")},e.createElement(km,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p?.server_id,currentUser:te,onClose:()=>Ya(!1)})),Q0&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"üìÇ Projeler Y√ºkleniyor...")},e.createElement(Am,{fetchWithAuth:G,apiBaseUrl:ee,serverId:p?.server_id,currentUser:te,onClose:()=>Ja(!1)})),ec&&e.createElement(a.Suspense,{fallback:e.createElement("div",null,"üé® Avatar Studio Y√ºkleniyor...")},e.createElement(Bm,{fetchWithAuth:G,apiBaseUrl:ee,currentUser:te,onClose:()=>Xa(!1),onAvatarChange:t=>{Lt&&zo({...Lt,avatar_url:t}),ie.success("üé® Avatar g√ºncellendi!")}})),vr&&e.createElement(tf,{imageUrl:vr,onClose:()=>Xt(null)}),Or&&e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:"Sabitlenmi≈ü mesajlar y√ºkleniyor..."})},e.createElement(vm,{messages:Dt,onClose:()=>Ao(!1)})),Ft&&e.createElement(rf,{user:Ft,onClose:()=>Rt(null),onStartDM:yo,onImageClick:Xt,getDeterministicAvatar:mt,fetchWithAuth:G,apiBaseUrl:ee,currentUser:te,friendsList:wr}),ye&&ro&&e.createElement("div",{style:fe.mobileOverlay,onClick:()=>Ne(!1)}),ye&&oo&&e.createElement("div",{style:fe.mobileOverlay,onClick:()=>vt(!1)}),e.createElement("div",{style:fe.chatLayout},(!ye||ro)&&e.createElement("div",{style:{...fe.sidebarWrapper,...ye&&fe.mobileSidebar,paddingTop:Jo,paddingBottom:$r,height:"100%",boxSizing:"border-box"}},ye&&e.createElement("div",{style:fe.mobileSidebarHeader},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement("img",{src:"https://media.pawscord.com/assets/logo.png",alt:"",style:{width:"24px",height:"24px"},onError:t=>{t.target.style.display="none"}}),e.createElement("span",{style:{fontSize:"18px",fontWeight:"bold",color:"white"}},"Pawscord")),e.createElement("button",{onClick:()=>Ne(!1),style:fe.closeSidebarButton},e.createElement(So,null))),e.createElement(hm,{onFriendsClick:()=>ce("friends","friends"),onRoomSelect:Rs,onDMSelect:(t,E)=>ce("dm",t,E),onWelcomeClick:Hc,setIsLeftSidebarVisible:Ne,onProfileClick:()=>ko(!0),onViewUserProfile:t=>{const E=Ce.find(T=>T.username===t);E&&Rt(E)},onOpenStore:()=>ao(!0),onOpenServerSettings:t=>as(t),categories:bc,onServerDragStart:kc,onServerDragOver:Ac,onServerDragEnd:Bc,onServerDrop:Dc,conversations:gt,allUsers:Ce,onlineUsers:ga,serverMembers:Cr,isAdmin:je,friendsList:wr,pendingFriendRequests:nc,currentUsername:te,currentUserProfile:Lt,getRealUserAvatar:_t,getDeterministicAvatar:mt,unreadCounts:ke,joinVoiceChat:m,leaveVoiceChat:y,voiceUsers:Y,isConnecting:b,currentVoiceRoom:S,currentRoom:S,currentConversationId:p.type==="dm"?p.id:null,remoteVolumes:h,setRemoteVolume:c,isPttActive:q,apiBaseUrl:ee,fetchWithAuth:G,onHideConversation:Nc,handleDrop:Uc,dropTarget:Xn,setDropTarget:Do,isDragging:ds,onOpenCreateGroup:()=>Oe(!0),toggleMute:k,toggleDeafened:w,isMuted:A,isDeafened:g,isInVoice:B,toggleVideo:C,toggleScreenShare:v,isVideoEnabled:L,isScreenSharing:P,updateAvailable:ts,onUpdateClick:()=>os(!0),onOpenAnalytics:()=>so(!0),onOpenAdminPanel:()=>To(!0),onOpenPaymentPanel:()=>gs(!0),onOpenStoreModal:()=>ys(!0),onOpenDailyRewards:()=>vs(!0),onOpenAPIUsage:()=>Es(!0),onOpenExportJobs:()=>bs(!0),onOpenScheduledAnnouncements:()=>_s(!0),onOpenMiniGames:()=>Ya(!0),onOpenProjectCollaboration:()=>Ja(!0),onOpenAvatarStudio:()=>Xa(!0),onServerSelect:Pc})),e.createElement("div",{style:fe.mainContent},e.createElement("div",{style:{position:"absolute",top:60,left:0,right:0,zIndex:90}},e.createElement(Zu,{message:Qa?.message,type:Qa?.type,onDismiss:()=>Vr(null)})),p.type==="friends"?e.createElement("div",{style:{width:"100%",height:"100%",paddingTop:Jo}},e.createElement(xm,{fetchWithAuth:G,apiBaseUrl:ee,onStartDM:yo,getDeterministicAvatar:mt,onClose:()=>ce("welcome","welcome"),onPendingCountChange:ac,onlineUsers:ga})):p.type==="welcome"?e.createElement("div",{style:{width:"100%",height:"100%"}},e.createElement(ef,{isMobile:ye,onOpenMenu:()=>Ne(!0),onOpenRightMenu:()=>vt(!0),updateAvailable:ts,isDownloading:Fr,downloadProgress:Mt,updateStatusText:Pr,onStartUpdate:Gc,onSwitchToFriends:()=>{ce("friends","friends"),ye&&Ne(!1)},onSwitchToAI:()=>{Rs("ai")},onSwitchToCinema:()=>{no(!0),ye&&Ne(!1)}})):wc==="kanban"?e.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},e.createElement("div",{style:fe.chatHeader},e.createElement("h2",null,"# ",go," (Pano)")),e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"medium",text:"Pano y√ºkleniyor..."})},e.createElement(df,{roomSlug:p.id,apiBaseUrl:ee,fetchWithAuth:G}))):p.type==="voice"&&B?e.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#2f3136"}},e.createElement("div",{style:{...fe.chatHeader,justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},ye&&e.createElement("button",{onClick:()=>ce("welcome","welcome"),style:{...fe.mobileMenuButton}},"‚Üê"),e.createElement("h2",{style:{margin:0,fontSize:"1.2em"}},"üîä ",S)),e.createElement("button",{onClick:()=>{y(),ce("welcome","welcome")},style:{background:"#ed4245",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold"}},"Baƒülantƒ±yƒ± Kes")),e.createElement($i,{roomName:S,onClose:()=>{y(),ce("welcome","welcome")},isMinimized:!1,onToggleMinimize:()=>{},getRealUserAvatar:_t,allUsers:Ce,currentUserProfile:Lt})):e.createElement("div",{style:{...fe.chatArea,position:"relative",paddingTop:Jo,boxSizing:"border-box"},onDrop:Mc,onDragOver:t=>{t.preventDefault(),Vo(!0)},onDragEnter:t=>{t.preventDefault(),Vo(!0)},onDragLeave:t=>{t.preventDefault(),t.target===t.currentTarget&&Vo(!1)}},e.createElement("div",{style:{...fe.chatHeader,justifyContent:"space-between"}},e.createElement("div",{style:{display:"flex",alignItems:"center",overflow:"hidden",gap:"8px"}},ye&&!ro&&e.createElement("button",{onClick:()=>Ne(!0),style:{...fe.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Men√ºy√º A√ß"},"‚ò∞"),ye&&(p.type==="dm"||p.type==="room")&&e.createElement("button",{onClick:()=>{ce("welcome","welcome"),Ne(!1),vt(!1)},style:{...fe.mobileMenuButton,fontSize:"1.2em"},"aria-label":"Geri"},"‚Üê"),e.createElement("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0,fontSize:ye?"1em":"1.1em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},p.type==="dm"?`@ ${String(p.targetUser||"DM")}`:`# ${String(go)}`),e.createElement("div",{style:yt?fe.connectionPillOnline:fe.connectionPillOffline},yt?"Bagli":"Kopuk")),e.createElement("div",{style:{display:"flex",gap:ye?"5px":"10px",alignItems:"center",flexWrap:ye?"nowrap":"wrap",position:"relative"}},e.createElement("form",{onSubmit:Vc,style:fe.searchForm},e.createElement("input",{type:"text",placeholder:"Ara...",value:Lr,onChange:t=>fr(t.target.value),style:fe.searchInput,ref:Ds}),e.createElement(Zc,{style:fe.searchIcon})),!ye&&Bs.length>0&&e.createElement("span",{style:fe.typingIndicator},Bs.join(", ")," yazƒ±yor..."),e.createElement("button",{onClick:()=>xs(!pa),style:{...fe.iconButton,color:pa?"#5865f2":"#b9bbbe",position:"relative"},title:"Bildirimler"},e.createElement(Ms,null)),pa&&e.createElement("div",{style:{position:"absolute",top:"54px",right:"20px",zIndex:1e3}},e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:""})},e.createElement(wm,{currentUser:te,onClose:()=>xs(!1),fetchWithAuth:G,apiBaseUrl:ee}))),e.createElement("div",{className:"toolbar-menu-container",style:{position:"relative"}},e.createElement("button",{onClick:()=>ct(!po),style:{...fe.iconButton,color:po?"#5865f2":"#b9bbbe",fontSize:"1.2em",fontWeight:"bold"},title:"Daha Fazla"},"‚ãÆ"),po&&e.createElement("div",{style:{position:"absolute",top:"50px",right:"0",backgroundColor:"#2f3136",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.4)",minWidth:"220px",zIndex:1e3,overflow:"hidden",border:"1px solid #202225"}},p.type==="dm"&&e.createElement("button",{onClick:()=>{At(!0),ct(!1)},style:{...fe.menuItem,color:Xo?"#43b581":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=Xo?"#43b581":"#dcddde"}},Xo?e.createElement(Us,null):e.createElement(Us,{style:{opacity:.5}}),e.createElement("span",null,Xo?"≈ûifreli":"≈ûifrele")),e.createElement("button",{onClick:()=>{Ao(!Or),ct(!1)},style:{...fe.menuItem,color:Or?"#f5a524":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=Or?"#f5a524":"#dcddde"}},e.createElement(Qc,null),e.createElement("span",null,"Sabitli Mesajlar")),e.createElement("button",{onClick:()=>{$c(),ct(!1)},style:fe.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(el,null),e.createElement("span",null,"Baƒülantƒ±yƒ± Kopyala")),e.createElement("button",{onClick:()=>{Lc(),ct(!1)},style:{...fe.menuItem,color:mo.notifications?"#43b581":"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=mo.notifications?"#43b581":"#f04747"}},mo.notifications?e.createElement(Ms,null):e.createElement(tl,null),e.createElement("span",null,mo.notifications?"Sessize Al":"Sesi A√ß")),e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{no(!0),ct(!1)},style:fe.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(rl,null),e.createElement("span",null,"Sinema Modu")),e.createElement("button",{onClick:()=>{ls(!0),ct(!1)},style:fe.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(ol,null),e.createElement("span",null,"DJ Modu")),e.createElement("button",{onClick:()=>{lt(!0),ct(!1)},style:fe.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(nl,null),e.createElement("span",null,"Beyaz Tahta")),B&&e.createElement("button",{onClick:()=>{Qe(!0),ct(!1)},style:fe.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Vs,null),e.createElement("span",null,"Ses Efektleri")),p.type==="room"&&e.createElement(e.Fragment,null,e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{Fc(),ct(!1)},style:fe.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"}},e.createElement(Vs,null),e.createElement("span",null,"Sohbeti √ñzetle")),e.createElement("button",{onClick:()=>{Tc(),ct(!1)},style:{...fe.menuItem,color:"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#f04747",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#f04747"}},e.createElement(al,null),e.createElement("span",null,"Sohbeti Temizle")),te==="admin"&&p.type==="dm"&&e.createElement(e.Fragment,null,e.createElement("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.createElement("button",{onClick:()=>{Wc(p.id),ct(!1)},style:{...fe.menuItem,color:"#ed4245",fontWeight:"bold"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#ed4245",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#ed4245"},title:"Admin: Konu≈ümayƒ± kalƒ±cƒ± olarak sil (her iki taraftan)"},e.createElement(sl,null),e.createElement("span",null,"‚ö†Ô∏è KALICI Sƒ∞L (ADMƒ∞N)")))))),ye&&!oo&&e.createElement("button",{onClick:()=>vt(!0),style:{...fe.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Kullanƒ±cƒ±larƒ± G√∂ster"},e.createElement(Ta,null)))),e.createElement("div",{style:fe.messageBox,ref:ha,onScroll:Cc},rc?e.createElement("p",{style:fe.systemMessage},"Y√ºkleniyor..."):ya.length>50?e.createElement(Yu,{messages:ya,scrollToBottom:!0,renderMessage:(t,E)=>e.createElement(Pi,{key:t.id||t.temp_id||E,msg:t,currentUser:te,absoluteHostUrl:ee,isAdmin:je,onImageClick:Xt,fetchWithAuth:G,allUsers:Ce,getDeterministicAvatar:mt,onShowChart:dt,onDelete:Is,onStartEdit:jr,onSetReply:fs,onToggleReaction:()=>{},onStartForward:ms,isSelectionMode:ps,isSelected:yr.has(t.id),onToggleSelection:T=>{const z=new Set(yr);z.has(T)?z.delete(T):z.add(T),Je(z)},onScrollToMessage:Fs,onViewProfile:T=>Rt(Ce.find(z=>z.username===T)),onTogglePin:T=>{}})}):e.createElement(e.Fragment,null,ya.map((t,E)=>{const T=t.id||t.temp_id||E;return e.createElement(Pi,{key:T,msg:t,currentUser:te,absoluteHostUrl:ee,isAdmin:je,onImageClick:Xt,fetchWithAuth:G,allUsers:Ce,getDeterministicAvatar:mt,onShowChart:dt,onDelete:Is,onStartEdit:jr,onSetReply:fs,onToggleReaction:()=>{},onStartForward:ms,isSelectionMode:ps,isSelected:yr.has(t.id),onToggleSelection:z=>{const D=new Set(yr);D.has(z)?D.delete(z):D.add(z),Je(D)},onScrollToMessage:Fs,onViewProfile:z=>Rt(Ce.find(D=>D.username===z)),onTogglePin:z=>{}})}),e.createElement("div",{ref:xa,style:{float:"left",clear:"both",height:1}}))),uc&&e.createElement("button",{type:"button",style:fe.scrollToBottomButton,onClick:()=>{nr("smooth"),Wo(!1)},"aria-label":"En alta in"},"En alta in"),e.createElement("div",{style:{...fe.inputContainer,paddingBottom:ir?`calc(16px + ${$r})`:ye?"25px":"16px"}},ds&&e.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(88, 101, 242, 0.2)",border:"2px dashed #5865f2",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1e3}},e.createElement("div",{style:{color:"#5865f2",fontSize:"1.2em",fontWeight:"bold"}},"üìÅ Dosyayƒ± buraya bƒ±rakƒ±n")),us&&ma>0&&e.createElement("div",{style:{position:"absolute",top:"-40px",left:"16px",right:"16px",backgroundColor:"#2b2d31",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",zIndex:1001}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement("span",{style:{color:"#b9bbbe",fontSize:"12px",whiteSpace:"nowrap"}},"üì§ Y√ºkleniyor: ",ma,"%"),e.createElement("div",{style:{flex:1,height:"6px",backgroundColor:"#40444b",borderRadius:"3px",overflow:"hidden"}},e.createElement("div",{style:{width:`${ma}%`,height:"100%",backgroundColor:"#5865f2",borderRadius:"3px",transition:"width 0.3s ease"}})))),e.createElement(Ju,{onSendMessage:ba,onFileUpload:Yo,onShowCodeSnippet:()=>ur(!0),placeholder:go?`${p.type==="dm"?go:`# ${go}`} kanalƒ±na mesaj g√∂nder`:"Mesaj yaz...",disabled:us,fetchWithAuth:G,apiBaseUrl:ee,activeChat:p}))),(!ye||oo)&&e.createElement("div",{style:{...fe.chatUserListPanel,...ye?fe.mobileRightSidebar:{},paddingTop:Jo}},ye&&e.createElement("div",{style:fe.mobileSidebarHeader},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},e.createElement(Ta,{size:18,color:"#b9bbbe"}),e.createElement("span",{style:{fontSize:"16px",fontWeight:"bold",color:"white"}},p.type==="room"?"Sunucu √úyeleri":p.type==="friends"?"√áevrimi√ßi":"Arkada≈ülar")),e.createElement("button",{onClick:()=>vt(!1),style:fe.closeSidebarButton},e.createElement(So,null))),e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:"Kullanƒ±cƒ±lar y√ºkleniyor..."})},e.createElement(ym,{chatUsers:[],allUsers:Ce,onlineUsers:ga,currentUser:te,currentUserProfile:Lt,getDeterministicAvatar:mt,onUserClick:t=>{let E=Ce.find(T=>T.username===t);if(!E&&Cr.length>0){const T=Cr.find(z=>z.username===t);T&&(E={username:T.username,display_name:T.username,avatar:mt(T.username),role:T.role||"member"})}E&&Rt(E)},onUserContextMenu:(t,E)=>{if(E===te)return;const T=Ce.find(z=>z.username===E);T&&hs({x:t.clientX,y:t.clientY,user:T,permissions:Ec})},activeChat:p,serverMembers:Cr,friendsList:wr,onNavigate:Ic})))),B&&e.createElement(Xu,{remoteStreams:o,remoteVolumes:h,mutedUsers:ge}),B&&!xt&&p.type!=="voice"&&e.createElement("button",{onClick:()=>xr(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9998,background:"#5865f2",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"all 0.2s"},title:"Ses Panelini A√ß",onMouseEnter:t=>t.currentTarget.style.transform="scale(1.1)",onMouseLeave:t=>t.currentTarget.style.transform="scale(1)"},"üé§"),B&&xt&&p.type!=="voice"&&e.createElement(e.Fragment,null,ht?e.createElement($i,{roomName:S,onClose:()=>{xr(!1)},isMinimized:Vt,onToggleMinimize:()=>Le(!Vt),getRealUserAvatar:_t,allUsers:Ce,currentUserProfile:Lt}):e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:"Sesli sohbet y√ºkleniyor..."})},e.createElement(Em,{islandState:Ke,onDrag:t=>pr(E=>({...E,x:t.x,y:t.y})),onResize:t=>pr(E=>({...E,width:t.width,height:t.height})),isMobile:ye,headerActions:e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"}},e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéõÔ∏è [VoiceIsland] Hiding panel"),xr(!1)},style:{background:"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:"Paneli Gizle"},e.createElement(So,null)),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üé§ [VoiceIsland] Mute toggle clicked"),k()},style:{background:A?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:A?"Mikrofonu A√ß":"Mikrofonu Kapat"},e.createElement(La,{style:{opacity:A?.5:1}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéß [VoiceIsland] Deafen toggle clicked"),w()},style:{background:g?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:g?"Sesi A√ß":"Sesi Kapat"},e.createElement(il,{style:{opacity:g?.5:1}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üìπ [VoiceIsland] Video toggle clicked"),C()},style:{background:L?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:L?"Kamerayƒ± Kapat":"Kamerayƒ± A√ß"},e.createElement(cl,{style:{opacity:L?1:.5}})),e.createElement("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üñ•Ô∏è [VoiceIsland] Screen share toggle clicked"),v()},style:{background:P?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:P?"Ekran Payla≈üƒ±mƒ±nƒ± Durdur":"Ekranƒ± Payla≈ü"},e.createElement(ll,{style:{opacity:P?1:.5}})),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:y,style:{background:"#ed4245",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},title:"Odadan Ayrƒ±l"},e.createElement(dl,null)),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("button",{onClick:()=>de(t=>({...t,isActive:!t.isActive})),style:{background:ne.isActive?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"}},ne.isActive?"üé¨ Kapat":"üçø Sinema"),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("select",{onChange:t=>j(t.target.value),value:re,style:{background:"rgba(0,0,0,0.3)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"4px",padding:"2px 4px",fontSize:"12px",cursor:"pointer",outline:"none"}},e.createElement("option",{value:"none"},"Normal"),e.createElement("option",{value:"robot"},"ü§ñ Robot"),e.createElement("option",{value:"child"},"üë∂ Bebek"),e.createElement("option",{value:"monster"},"üëπ Canavar")),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("div",{style:{display:"flex",gap:"5px"}},e.createElement("button",{onClick:()=>ue("reset"),title:"Reset Game",style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px"}},"üîÑ"),["ü™®","üìÑ","‚úÇÔ∏è"].map((t,E)=>{const T=E===0?"rock":E===1?"paper":"scissors";return e.createElement("button",{key:t,onClick:()=>ue("move",T),style:{background:he?.moves?.[te]===T?"rgba(88, 101, 242, 0.5)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"50%",cursor:"pointer",fontSize:"16px",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.1s"},title:`Play ${T}`},t)})),e.createElement("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.createElement("div",{style:{display:"flex",gap:"5px"}},["‚ù§Ô∏è","üòÇ","üòÆ","üëç","üéâ"].map(t=>e.createElement("button",{key:t,onClick:()=>U(t),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px",padding:"0 4px",transition:"transform 0.1s"},onMouseEnter:E=>E.target.style.transform="scale(1.2)",onMouseLeave:E=>E.target.style.transform="scale(1)",title:`Send ${t}`},t))))},ne.isActive?e.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},e.createElement("div",{style:{flex:1,minHeight:0,position:"relative"}},e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"large",text:"Cinema Player y√ºkleniyor...",fullscreen:!0})},e.createElement(bm,null))),e.createElement("div",{style:{height:"140px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",background:"rgba(0,0,0,0.5)",flexShrink:0,alignItems:"center"}},(()=>{const t=[];return t.push({id:"local-cam",user:{username:te,is_talking:u,is_mic_off:A,is_deafened:g},track:r?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:_t(te)}),F&&t.push({id:"local-screen",user:{username:te},track:F.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:_t(te)}),Object.entries(o||{}).forEach(([E,T])=>{const z=T.getVideoTracks(),D=T.getAudioTracks();z.length>0?z.forEach(H=>t.push({id:`${E}-${H.id}`,user:{username:E},track:H,streamType:"camera",isLocal:!1,avatarUrl:_t(E)})):D.length>0&&t.push({id:`${E}-audio`,user:{username:E},track:D[0],streamType:"camera",isLocal:!1,avatarUrl:_t(E)})}),t.map(E=>e.createElement(tn,{key:E.id,...E,style:{height:"100%",aspectRatio:"16/9",minWidth:"160px"},lastReaction:V,gameMove:he?.moves?.[E.user.username]}))})())):e.createElement("div",{style:{...fe.videoGrid,flexDirection:rt?"column":"row",flexWrap:rt?"nowrap":"wrap",overflowY:"auto",height:"100%"}},(()=>{const t=[];if(t.push({id:"local-cam",user:{username:te,is_talking:u,is_mic_off:A,is_deafened:g},track:r?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:_t(te)}),F?.getVideoTracks()[0]&&t.push({id:"local-screen",user:{username:te,is_talking:!1},track:F.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:_t(te)}),Object.entries(o||{}).forEach(([T,z])=>{if(T!==te){const D=z.getVideoTracks(),H=z.getAudioTracks();D.length>0?D.forEach(Q=>{t.push({id:`${T}-${Q.id}`,user:{username:T},track:Q,streamType:Q.label?.toLowerCase().includes("screen")?"screen":"camera",isLocal:!1,avatarUrl:_t(T)})}):H.length>0&&t.push({id:`${T}-audio`,user:{username:T},track:H[0],streamType:"camera",isLocal:!1,avatarUrl:_t(T)})}}),rt){const T=t.find(D=>D.id===rt);if(!T)return Yt(null),E(t);const z=t.filter(D=>D.id!==rt);return e.createElement(e.Fragment,null,e.createElement("div",{style:{flex:1,width:"100%",minHeight:"300px",padding:"0",overflow:"hidden",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"}},e.createElement(tn,{...T,style:{width:"100%",height:"100%",maxWidth:"100%",borderRadius:"0",maxHeight:"100%",margin:"0 auto",aspectRatio:"unset"},onClick:()=>Yt(null),lastReaction:V,gameMove:he?.moves?.[T.user?.username]})),e.createElement("div",{style:{height:"120px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",flexShrink:0,justifyContent:"center"}},z.map(D=>e.createElement(tn,{key:D.id,...D,style:{width:"180px",height:"100%",flexShrink:0,aspectRatio:"16/9"},onClick:()=>Yt(D.id),lastReaction:V,gameMove:he?.moves?.[D.user.username]}))))}else return E(t);function E(T){return T.map(z=>e.createElement(tn,{key:z.id,...z,style:{width:"240px",maxWidth:"100%",flexGrow:1,height:"auto"},onClick:()=>Yt(z.id),lastReaction:V,gameMove:he?.moves?.[z.user.username]}))}})())))),Zn&&e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"medium",text:"Temalar y√ºkleniyor..."})},e.createElement(hf,{onClose:()=>Er(!1),currentTheme:tc,onThemeChange:Za})),ss&&e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"medium",text:"√ñzet hazƒ±rlanƒ±yor..."})},e.createElement(Ii,{roomSlug:p.id,onClose:()=>da(!1),fetchWithAuth:G,apiBaseUrl:ee})),et&&e.createElement(a.Suspense,{fallback:e.createElement(wt,{size:"small",text:"≈ûablonlar y√ºkleniyor..."})},e.createElement(uf,{onClose:()=>Fe(!1),onSelect:t=>{ho.current?.appendText?.(t),Fe(!1)},fetchWithAuth:G,apiBaseUrl:ee,isAdmin:je}))),Ho&&e.createElement(Cm,{x:Ho.x,y:Ho.y,user:Ho.user,currentUser:te,onClose:()=>hs(null),onAction:jc,voiceChannels:le.flatMap(t=>(t.categories||[]).flatMap(E=>(E.rooms||[]).filter(T=>T.is_voice))),isAdmin:je,isInVoiceRoom:B,friendsList:wr}),xo&&ul.createPortal(e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999999},onClick:()=>jo(null)},e.createElement("div",{onClick:t=>t.stopPropagation(),style:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"400px",maxHeight:"80vh",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"}},e.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #3f4147",textAlign:"center"}},e.createElement("h2",{style:{color:"#f2f3f5",margin:0,fontSize:"18px"}},"üé´ Sunucuya Davet Et"),e.createElement("p",{style:{color:"#b9bbbe",margin:"8px 0 0",fontSize:"14px"}},e.createElement("strong",null,xo.username)," kullanƒ±cƒ±sƒ±nƒ± hangi sunucuya davet etmek istiyorsunuz?")),e.createElement("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"12px"}},le.map(t=>e.createElement("div",{key:t.id,onClick:async()=>{try{const E=await G(`${pe}/servers/${t.id}/invite/`,{method:"POST",body:JSON.stringify({target_username:xo.username})});if(E.ok)ie.success(`üé´ ${xo.username} kullanƒ±cƒ±sƒ±na davetiye g√∂nderildi!`);else{const T=await E.json();T.error&&T.error.includes("zaten")?ie.info(`‚ÑπÔ∏è ${xo.username} zaten bu sunucunun √ºyesi!`):ie.error(`‚ùå ${T.error||"Davet g√∂nderilemedi"}`)}}catch(E){console.error("‚ùå Invite error:",E),ie.error("‚ùå Baƒülantƒ± hatasƒ±")}jo(null)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",backgroundColor:"rgba(255,255,255,0.02)",marginBottom:"8px"},onMouseEnter:E=>{E.currentTarget.style.backgroundColor="rgba(88, 101, 242, 0.2)"},onMouseLeave:E=>{E.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"}},t.icon?e.createElement("img",{src:t.icon,alt:t.name,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover"}}):e.createElement("div",{style:{width:40,height:40,borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"white",fontSize:"16px"}},t.name?.substring(0,2).toUpperCase()),e.createElement("div",{style:{flex:1}},e.createElement("div",{style:{color:"#f2f3f5",fontWeight:"600"}},t.name),e.createElement("div",{style:{color:"#b9bbbe",fontSize:"12px"}},t.member_count||t.categories?.length||0," √ºye")),e.createElement("div",{style:{color:"#5865f2",fontSize:"20px"}},"‚Üí")))),e.createElement("div",{style:{padding:"16px 20px",borderTop:"1px solid #3f4147",textAlign:"center"}},e.createElement("button",{onClick:()=>jo(null),style:{backgroundColor:"#4f545c",color:"#f2f3f5",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"600"}},"ƒ∞ptal")))),document.body))},fe={mainContainer:{display:"flex",width:"100%",height:"100dvh",backgroundColor:"#1E1F22",backgroundImage:"radial-gradient(circle at 50% 10%, rgba(88, 101, 242, 0.05) 0%, transparent 40%)",color:"white",overflow:"hidden",fontFamily:"'Inter', sans-serif"},chatLayout:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},sidebarWrapper:{width:"312px",backgroundColor:"rgba(30, 31, 34, 0.6)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"row",flexShrink:0,height:"100%",borderRight:"1px solid rgba(255,255,255,0.05)"},mainContent:{flex:1,display:"flex",minWidth:0,position:"relative",height:"100%",overflow:"hidden"},chatArea:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"transparent",minWidth:0,height:"100%",overflow:"hidden",position:"relative"},chatHeader:{height:"54px",minHeight:"54px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",padding:"0 20px",flexShrink:0,backgroundColor:"rgba(20, 21, 24, 0.7)",backdropFilter:"blur(15px)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",zIndex:10},messageBox:{flex:1,overflowY:"auto",padding:"20px 0",display:"flex",flexDirection:"column",gap:"4px",scrollBehavior:"smooth",minHeight:0},inputContainer:{padding:"0 20px 24px 20px",backgroundColor:"transparent",position:"relative",flexShrink:0,minHeight:"auto",zIndex:20},chatUserListPanel:{width:"240px",backgroundColor:"rgba(30, 31, 34, 0.6)",borderLeft:"1px solid rgba(255,255,255,0.08)",flexShrink:0,height:"100%",backdropFilter:"blur(10px)"},mobileSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,left:0,width:"85vw",maxWidth:"350px",boxShadow:"5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileRightSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,right:0,width:"85vw",maxWidth:"300px",boxShadow:"-5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99,backdropFilter:"blur(3px)"},mobileMenuButton:{background:"none",border:"none",color:"white",fontSize:"1.5em",marginRight:"10px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",transition:"all 0.2s"},iconButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"1.3em",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",borderRadius:"50%",transition:"all 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff"}},videoGrid:{display:"flex",flexWrap:"wrap",gap:"5px",padding:"5px",alignContent:"center",justifyContent:"center",alignItems:"center"},systemMessage:{color:"#949ba4",textAlign:"center",fontSize:"0.85em",margin:"10px 0",fontStyle:"italic"},searchForm:{position:"relative",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"4px",padding:"0 8px",height:"32px",marginRight:"8px",border:"1px solid rgba(255,255,255,0.05)"},searchInput:{backgroundColor:"transparent",border:"none",color:"#dcddde",fontSize:"0.9em",width:"140px",outline:"none"},searchIcon:{color:"#949ba4",fontSize:"0.8em",cursor:"pointer"},typingIndicator:{color:"#dbdee1",fontSize:"0.85em",maxWidth:"180px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold"},connectionPillOnline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(59, 165, 93, 0.2)",border:"1px solid #3ba55d",color:"#3ba55d",fontSize:"0.75em",fontWeight:700},connectionPillOffline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(218, 55, 60, 0.2)",border:"1px solid #da373c",color:"#da373c",fontSize:"0.75em",fontWeight:700},scrollToBottomButton:{position:"absolute",right:"16px",bottom:"110px",backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.35)",cursor:"pointer",fontWeight:600},mobileSidebarHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",backgroundColor:"#202225",borderBottom:"1px solid #111214",minHeight:"54px",flexShrink:0},closeSidebarButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"22px",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background 0.2s, color 0.2s"},menuItem:{width:"100%",padding:"10px 16px",background:"transparent",border:"none",color:"#dcddde",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:"500",transition:"all 0.15s ease",borderRadius:"0"}};function Vm(){return e.createElement(zl,{fallbackMessage:"Pawscord encountered an error. Please try refreshing the page."},e.createElement(zu,null,e.createElement(Um,null)))}const Nm=`${Iu}/auth/verify-email/`,Wm=()=>{const{token:f}=Wi(),i=wo(),[n,s]=a.useState("loading"),[d,x]=a.useState("Hesabƒ±nƒ±z doƒürulanƒ±yor, l√ºtfen bekleyin...");return a.useEffect(()=>{if(!f){s("error"),x("Ge√ßersiz veya eksik doƒürulama kodu.");return}const B=async()=>{try{const b=await fetch(`${Nm}${f}/`),S=await b.json();b.ok?(s("success"),x("√úyeliƒüiniz ba≈üarƒ±yla aktif edildi!")):(s("error"),x(S.message||"Doƒürulama ba≈üarƒ±sƒ±z oldu."))}catch{s("error"),x("Sunucuya baƒülanƒ±lamadƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.")}};setTimeout(()=>{B()},1e3)},[f]),e.createElement("div",{style:nt.container},e.createElement("div",{style:nt.card},n==="loading"&&e.createElement("div",{style:nt.content},e.createElement(Hi,{className:"spin-animation",size:50,color:"#5865f2",style:{marginBottom:20}}),e.createElement("h2",{style:nt.title},"Doƒürulanƒ±yor..."),e.createElement("p",{style:nt.text},d)),n==="success"&&e.createElement("div",{style:nt.content},e.createElement($a,{size:60,color:"#43b581",style:{marginBottom:20}}),e.createElement("h2",{style:{...nt.title,color:"#43b581"}},"Tebrikler! üéâ"),e.createElement("p",{style:nt.text},d),e.createElement("p",{style:nt.subText},"Artƒ±k Pawscord'a tam eri≈üim saƒülayabilirsin."),e.createElement("button",{onClick:()=>i("/"),style:nt.primaryButton},"Gƒ∞Rƒ∞≈û YAP")),n==="error"&&e.createElement("div",{style:nt.content},e.createElement(Oa,{size:60,color:"#f04747",style:{marginBottom:20}}),e.createElement("h2",{style:{...nt.title,color:"#f04747"}},"Hata Olu≈ütu"),e.createElement("p",{style:nt.text},d),e.createElement("button",{onClick:()=>i("/"),style:nt.secondaryButton},"Ana Sayfaya D√∂n"))))},nt={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#1e1f22",fontFamily:"'Poppins', sans-serif",padding:"20px"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",maxWidth:"400px",width:"100%",textAlign:"center",border:"1px solid #1f2023"},content:{display:"flex",flexDirection:"column",alignItems:"center"},title:{margin:"0 0 10px 0",color:"#fff",fontSize:"1.8em"},text:{color:"#dbdee1",fontSize:"1.1em",margin:"0 0 20px 0",lineHeight:"1.5"},subText:{color:"#949ba4",fontSize:"0.9em",marginBottom:"30px"},primaryButton:{backgroundColor:"#5865f2",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",width:"100%"},secondaryButton:{backgroundColor:"#4f545c",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",width:"100%"}},r0=document.createElement("style");r0.innerText=`
  .spin-animation { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(r0);const Hm=e.memo(Wm),jm=()=>{const{code:f}=Wi(),i=wo(),{isAuthenticated:n,token:s}=to(),[d,x]=a.useState(null),[B,b]=a.useState(!0),[S,m]=a.useState(""),[y,A]=a.useState(!1),[g,k]=a.useState(!1),w="8888",C=window.Capacitor&&window.Capacitor.isNativePlatform(),v=typeof window<"u"&&typeof window.require=="function",c=`${(()=>{if(C)return"https://www.pawscord.com";if(v)return`http://127.0.0.1:${w}`;const u=window.location.protocol,l=window.location.hostname;return l.includes("pawscord.com")?"https://www.pawscord.com":`${u}//${l}:${w}`})()}/api`;a.useEffect(()=>{console.log("üé´ [Invite Page] Loaded with code:",f),r()},[f]);const r=async()=>{console.log("üîç [Invite Page] Fetching invite info..."),b(!0),m("");try{const u=await fetch(`${c}/invites/${f}/`),l=await u.json();console.log("üì¶ [Invite Page] Response:",{status:u.status,data:l}),u.ok?(x(l),console.log("‚úÖ [Invite Page] Invite info loaded")):(m(l.error||"Davet bulunamadƒ±"),console.error("‚ùå [Invite Page] Error:",l.error))}catch(u){console.error("‚ùå [Invite Page] Network error:",u),m("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}b(!1)},o=async()=>{if(!n){console.log("‚ö†Ô∏è [Invite Page] User not authenticated, redirecting to login"),ie.error("‚ùå L√ºtfen √∂nce giri≈ü yapƒ±n!"),sessionStorage.setItem("pending_invite",f),i("/");return}if(!s){console.error("‚ùå [Invite Page] No token found!"),ie.error("‚ùå Giri≈ü token'ƒ± bulunamadƒ±. L√ºtfen tekrar giri≈ü yapƒ±n."),i("/");return}console.log("üé´ [Invite Page] Accepting invite...",{code:f,apiUrl:`${c}/invites/${f}/accept/`,hasToken:!!s}),A(!0),m("");try{const u=`${c}/invites/${f}/accept/`;console.log("üì° [Invite Page] POST to:",u);const l=await fetch(u,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});console.log("üì¶ [Invite Page] Response status:",l.status);const P=await l.json();if(console.log("üì¶ [Invite Page] Response data:",P),l.ok){console.log("‚úÖ [Invite Page] Successfully joined server!"),ie.success(`‚úÖ Ba≈üarƒ±lƒ±! ${P.server_name||"Sunucu"}ya katƒ±ldƒ±nƒ±z!`),k(!0);const L=P.redirect||"/";console.log("üîó [Invite Page] Redirecting to:",L),setTimeout(()=>{L.startsWith("http")?window.location.href=L:(i(L),window.location.reload())},2e3)}else{const L=P.error||P.message||"Sunucuya katƒ±lma hatasƒ±";console.error("‚ùå [Invite Page] Join failed:",L,P),m(L),ie.error(`‚ùå Hata: ${L}`)}}catch(u){console.error("‚ùå [Invite Page] Exception:",u);const l=u.message||"Baƒülantƒ± hatasƒ±";m(l),ie.error(`‚ùå Hata: ${l}`)}A(!1)};return B?e.createElement("div",{style:Se.container},e.createElement("div",{style:Se.backgroundGradient}),e.createElement("div",{style:Se.card},e.createElement("div",{style:Se.spinner}),e.createElement("p",{style:Se.loadingText},"Davet y√ºkleniyor..."))):S?e.createElement("div",{style:Se.container},e.createElement("div",{style:Se.backgroundGradient}),e.createElement("div",{style:Se.card},e.createElement(Oa,{size:64,color:"var(--error)"}),e.createElement("h2",{style:Se.errorTitle},"Hata"),e.createElement("p",{style:Se.errorText},S),e.createElement("button",{onClick:()=>i("/"),style:Se.homeButton},"Ana Sayfaya D√∂n"))):g?e.createElement("div",{style:Se.container},e.createElement("div",{style:Se.backgroundGradient}),e.createElement("div",{style:Se.card},e.createElement($a,{size:64,color:"var(--success)"}),e.createElement("h2",{style:Se.successTitle},"Ba≈üarƒ±lƒ±!"),e.createElement("p",{style:Se.successText},e.createElement("strong",null,d.server.name)," sunucusuna katƒ±ldƒ±nƒ±z!"),e.createElement("p",{style:Se.redirectText},"Ana sayfaya y√∂nlendiriliyorsunuz..."))):e.createElement("div",{style:Se.container},e.createElement("div",{style:Se.backgroundGradient}),e.createElement("div",{style:Se.card},d.server.icon&&e.createElement("img",{src:d.server.icon,alt:d.server.name,style:Se.serverIcon}),e.createElement("h1",{style:Se.serverName},e.createElement(fl,{style:Se.icon}),d.server.name),e.createElement("div",{style:Se.infoRow},e.createElement(Ta,{style:Se.infoIcon}),e.createElement("span",null,d.server.member_count," √úye")),d.expires_at&&e.createElement("div",{style:Se.infoRow},e.createElement(ml,{style:Se.infoIcon}),e.createElement("span",null,"S√ºre: ",new Date(d.expires_at).toLocaleString("tr-TR"))),d.max_uses>0&&e.createElement("div",{style:Se.infoRow},e.createElement("span",null,"Kullanƒ±m: ",d.uses," / ",d.max_uses)),e.createElement("div",{style:Se.inviterInfo},"Davet Eden: ",e.createElement("strong",null,d.inviter.username)),e.createElement("button",{onClick:o,disabled:y,style:{...Se.joinButton,...y?Se.joinButtonDisabled:{}}},y?"Katƒ±lƒ±nƒ±yor...":n?"Sunucuya Katƒ±l":"Giri≈ü Yap ve Katƒ±l"),!n&&e.createElement("p",{style:Se.loginHint},"* Sunucuya katƒ±lmak i√ßin giri≈ü yapmanƒ±z gerekiyor")))},Se={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"var(--bg-app)",padding:"20px",position:"relative",overflow:"hidden"},backgroundGradient:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(ellipse at top, rgba(139, 92, 246, 0.15), transparent 50%), radial-gradient(ellipse at bottom, rgba(118, 75, 162, 0.15), transparent 50%)",pointerEvents:"none",zIndex:0},card:{background:"var(--glass-bg)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",padding:"48px",borderRadius:"var(--radius-2xl)",textAlign:"center",color:"var(--text-primary)",maxWidth:"560px",width:"100%",boxShadow:"var(--shadow-2xl)",border:"1px solid var(--glass-border)",position:"relative",zIndex:1,animation:"scaleIn 0.4s ease-out"},spinner:{width:"50px",height:"50px",border:"3px solid var(--glass-border)",borderTop:"3px solid var(--brand-primary)",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto"},loadingText:{marginTop:"24px",color:"var(--text-tertiary)",fontSize:"15px",fontWeight:500},serverIcon:{width:"120px",height:"120px",borderRadius:"50%",marginBottom:"24px",objectFit:"cover",border:"4px solid var(--glass-border)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.2)",transition:"var(--transition-normal)"},serverName:{fontSize:"32px",fontWeight:800,marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",background:"var(--gradient-primary)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},icon:{fontSize:"28px",color:"var(--brand-primary)"},infoRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"16px 0",color:"var(--text-secondary)",fontSize:"16px",fontWeight:500,padding:"12px 20px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},infoIcon:{fontSize:"20px",color:"var(--brand-primary)"},inviterInfo:{marginTop:"24px",marginBottom:"32px",color:"var(--text-tertiary)",fontSize:"14px",padding:"16px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},joinButton:{background:"var(--gradient-primary)",color:"white",border:"none",padding:"16px 32px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"16px",fontWeight:700,marginTop:"16px",width:"100%",transition:"var(--transition-normal)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)",position:"relative",overflow:"hidden"},joinButtonDisabled:{background:"var(--bg-tertiary)",cursor:"not-allowed",opacity:.6,boxShadow:"none"},loginHint:{marginTop:"20px",fontSize:"13px",color:"var(--warning)",fontStyle:"italic",fontWeight:500},errorTitle:{color:"var(--error)",marginTop:"24px",fontSize:"28px",fontWeight:700},errorText:{color:"var(--text-tertiary)",margin:"24px 0",fontSize:"15px",lineHeight:1.6},successTitle:{color:"var(--success)",marginTop:"24px",fontSize:"28px",fontWeight:700},successText:{color:"var(--text-primary)",margin:"24px 0",fontSize:"18px",fontWeight:600},redirectText:{color:"var(--text-tertiary)",fontSize:"14px",marginTop:"12px",fontStyle:"italic"},homeButton:{background:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--glass-border)",padding:"14px 28px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"15px",fontWeight:600,marginTop:"24px",transition:"var(--transition-normal)"}},o0=document.createElement("style");o0.textContent=`
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`;document.head.appendChild(o0);const Gm=({apiBaseUrl:f})=>{const[i,n]=a.useState(!1),[s,d]=a.useState([]),[x,B]=a.useState(!1),b=a.useRef(null),S=a.useRef([]),m=a.useRef(null),{token:y}=to(),A=()=>{m.current?.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{A()},[s,x]);const g=async()=>{try{const C=await navigator.mediaDevices.getUserMedia({audio:!0});b.current=new MediaRecorder(C),S.current=[],b.current.ondataavailable=v=>{v.data.size>0&&S.current.push(v.data)},b.current.onstop=w,b.current.start(),n(!0)}catch{ie.error("‚ùå Mikrofon izni gerekli!")}},k=()=>{b.current&&i&&(b.current.stop(),n(!1))},w=async()=>{B(!0);const C=new Blob(S.current,{type:"audio/webm"}),v=new FormData;v.append("audio",C,"voice.webm");try{const h=await fetch(`${f}/eng-learn/voice-chat/`,{method:"POST",headers:{Authorization:`Bearer ${y}`},body:v});if(h.ok){const c=await h.json();d(o=>[...o,{sender:"user",text:c.user_text},{sender:"ai",text:c.ai_text}]),new Audio(`data:audio/mp3;base64,${c.audio_base64}`).play()}else console.error("Sunucu hatasƒ±:",h.status),ie.error("‚ùå Anla≈üƒ±lamadƒ± veya hata olu≈ütu.")}catch(h){console.error(h),ie.error("‚ùå Baƒülantƒ± hatasƒ±.")}finally{B(!1)}};return e.createElement("div",{style:Ht.container},e.createElement("div",{style:Ht.header},e.createElement(ji,{to:"/eng-learn",style:Ht.backBtn},e.createElement(Gi,null)," Geri"),e.createElement("h2",null,"AI ile Konu≈ü (Speaking)")),e.createElement("div",{style:Ht.chatArea},s.length===0&&e.createElement("div",{style:Ht.emptyState},e.createElement(Ns,{size:60,color:"#5865f2",style:{marginBottom:20}}),e.createElement("h3",null,"ƒ∞ngilizce Pratik Yap"),e.createElement("p",null,"Mikrofona basƒ±lƒ± tut ve konu≈ümaya ba≈üla."),e.createElement("small",{style:{color:"#72767d"}},'"Hello, how are you?" diyebilirsin.')),s.map((C,v)=>e.createElement("div",{key:v,style:{...Ht.messageBubble,alignSelf:C.sender==="user"?"flex-end":"flex-start",backgroundColor:C.sender==="user"?"#5865f2":"#2b2d31",color:"white",borderBottomRightRadius:C.sender==="user"?"0":"12px",borderBottomLeftRadius:C.sender==="ai"?"0":"12px"}},e.createElement("div",{style:Ht.msgHeader},C.sender==="user"?e.createElement(pl,{size:12}):e.createElement(Ns,{size:12}),e.createElement("span",{style:{marginLeft:5,fontSize:"0.8em",fontWeight:"bold"}},C.sender==="user"?"Sen":"AI √ñƒüretmen")),C.text)),x&&e.createElement("div",{style:{alignSelf:"flex-start",color:"#949ba4",marginLeft:10,fontStyle:"italic"}},"Yazƒ±yor ve seslendiriyor..."),e.createElement("div",{ref:m})),e.createElement("div",{style:Ht.controls},e.createElement("button",{onMouseDown:g,onMouseUp:k,onTouchStart:g,onTouchEnd:k,style:{...Ht.micButton,backgroundColor:i?"#f04747":"#5865f2",transform:i?"scale(1.1)":"scale(1)"}},i?e.createElement(xl,{size:24}):e.createElement(La,{size:30})),e.createElement("p",{style:{marginTop:15,color:"#949ba4",fontSize:"0.9em"}},i?"Dinliyor... (Bƒ±rakƒ±nca G√∂nderir)":"Basƒ±lƒ± Tut ve Konu≈ü")))},Ht={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#313338",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif"},header:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px",borderBottom:"1px solid #1f2023",paddingBottom:"15px"},backBtn:{color:"#b9bbbe",fontSize:"1em",textDecoration:"none",display:"flex",alignItems:"center",gap:"5px",fontWeight:"600"},chatArea:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px",paddingBottom:"20px",paddingRight:"5px"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#949ba4",opacity:.8,textAlign:"center"},messageBubble:{maxWidth:"85%",padding:"15px",borderRadius:"12px",fontSize:"1em",lineHeight:"1.5",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",position:"relative"},msgHeader:{display:"flex",alignItems:"center",marginBottom:"5px",opacity:.8},controls:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20px",borderTop:"1px solid #1f2023"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.1s ease",boxShadow:"0 5px 20px rgba(0,0,0,0.4)"}},Ui=[{text:"Hello",difficulty:"Kolay"},{text:"Water",difficulty:"Kolay"},{text:"Friend",difficulty:"Kolay"},{text:"Family",difficulty:"Kolay"},{text:"Music",difficulty:"Kolay"},{text:"School",difficulty:"Kolay"},{text:"Computer",difficulty:"Kolay"},{text:"Beautiful",difficulty:"Kolay"},{text:"Together",difficulty:"Kolay"},{text:"Morning",difficulty:"Kolay"},{text:"Happy",difficulty:"Kolay"},{text:"Garden",difficulty:"Kolay"},{text:"People",difficulty:"Kolay"},{text:"Coffee",difficulty:"Kolay"},{text:"Purple",difficulty:"Kolay"},{text:"Technology",difficulty:"Orta"},{text:"Development",difficulty:"Orta"},{text:"Environment",difficulty:"Orta"},{text:"Successfully",difficulty:"Orta"},{text:"Opportunity",difficulty:"Orta"},{text:"Government",difficulty:"Orta"},{text:"Communication",difficulty:"Orta"},{text:"Experience",difficulty:"Orta"},{text:"Available",difficulty:"Orta"},{text:"Management",difficulty:"Orta"},{text:"International",difficulty:"Orta"},{text:"Recommendation",difficulty:"Orta"},{text:"Responsibility",difficulty:"Orta"},{text:"Understand",difficulty:"Orta"},{text:"Literature",difficulty:"Orta"},{text:"Necessary",difficulty:"Orta"},{text:"Vocabulary",difficulty:"Orta"},{text:"Interesting",difficulty:"Orta"},{text:"Comfortable",difficulty:"Orta"},{text:"Vegetable",difficulty:"Orta"},{text:"Squirrel",difficulty:"Zor"},{text:"Schedule",difficulty:"Zor"},{text:"Queue",difficulty:"Zor"},{text:"Rural",difficulty:"Zor"},{text:"Brewery",difficulty:"Zor"},{text:"Phenomenon",difficulty:"Zor"},{text:"February",difficulty:"Zor"},{text:"Library",difficulty:"Zor"},{text:"Specific",difficulty:"Zor"},{text:"Regularly",difficulty:"Zor"},{text:"Probably",difficulty:"Zor"},{text:"Algorithm",difficulty:"Zor"},{text:"Hierarchical",difficulty:"Zor"},{text:"Maintenance",difficulty:"Zor"},{text:"Pronunciation",difficulty:"Zor"},{text:"Throughout",difficulty:"Zor"},{text:"Entrepreneur",difficulty:"Zor"},{text:"Simultaneously",difficulty:"Zor"},{text:"Mischievous",difficulty:"Zor"},{text:"Chaos",difficulty:"Zor"},{text:"Recipe",difficulty:"Zor"},{text:"Worcestershire",difficulty:"Efsane"},{text:"Colonel",difficulty:"Efsane"},{text:"Miscellaneous",difficulty:"Efsane"},{text:"Anesthetist",difficulty:"Efsane"},{text:"Otorhinolaryngologist",difficulty:"Efsane"},{text:"Isthmus",difficulty:"Efsane"},{text:"Anemone",difficulty:"Efsane"},{text:"Synecdoche",difficulty:"Efsane"},{text:"Onomatopoeia",difficulty:"Efsane"},{text:"Conscientious",difficulty:"Efsane"},{text:"Defibrillator",difficulty:"Efsane"},{text:"Antidisestablishmentarianism",difficulty:"Efsane"},{text:"How are you doing today?",difficulty:"C√ºmle"},{text:"I would like to order a coffee.",difficulty:"C√ºmle"},{text:"The quick brown fox jumps over the lazy dog.",difficulty:"C√ºmle"},{text:"Can you please repeat that?",difficulty:"C√ºmle"},{text:"I am learning to speak English fluently.",difficulty:"C√ºmle"},{text:"It is raining cats and dogs outside.",difficulty:"C√ºmle"},{text:"Actions speak louder than words.",difficulty:"C√ºmle"},{text:"I need to schedule a meeting for tomorrow.",difficulty:"C√ºmle"},{text:"What do you do for a living?",difficulty:"C√ºmle"},{text:"She sells seashells by the seashore.",difficulty:"Tekerleme"},{text:"Red lorry, yellow lorry.",difficulty:"Tekerleme"},{text:"Peter Piper picked a peck of pickled peppers.",difficulty:"Tekerleme"},{text:"How much wood would a woodchuck chuck?",difficulty:"Tekerleme"},{text:"Unique New York.",difficulty:"Tekerleme"},{text:"Fuzzy Wuzzy was a bear.",difficulty:"Tekerleme"},{text:"Which wristwatches are Swiss wristwatches?",difficulty:"Tekerleme"}],qm=({apiBaseUrl:f})=>{const{token:i}=to(),[n,s]=a.useState(null),[d,x]=a.useState(!1),[B,b]=a.useState(!1),[S,m]=a.useState("idle"),[y,A]=a.useState(""),[g,k]=a.useState(0),w=a.useRef(null),C=a.useRef([]);a.useEffect(()=>{v()},[]);const v=()=>{const u=Math.floor(Math.random()*Ui.length);s(Ui[u]),m("idle"),A("")},h=async()=>{if(n)try{const u=await fetch(`${f}/eng-learn/speak-text/`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({text:n.text})});if(u.ok){const l=await u.json();new Audio(`data:audio/mp3;base64,${l.audio_base64}`).play()}}catch(u){console.error(u)}},c=async()=>{A(""),m("recording");try{const u=await navigator.mediaDevices.getUserMedia({audio:!0});w.current=new MediaRecorder(u),C.current=[],w.current.ondataavailable=l=>{l.data.size>0&&C.current.push(l.data)},w.current.onstop=o,w.current.start(),x(!0)}catch{ie.error("‚ùå Mikrofon izni gerekli!"),m("idle")}},r=()=>{w.current&&d&&(w.current.stop(),x(!1))},o=async()=>{b(!0);const u=new Blob(C.current,{type:"audio/webm"}),l=new FormData;l.append("audio",u,"voice.webm"),l.append("target_text",n.text);try{const L=await(await fetch(`${f}/eng-learn/check-pronunciation/`,{method:"POST",headers:{Authorization:`Bearer ${i}`},body:l})).json();L.is_correct?(m("success"),A(`Harika! üéâ (${L.spoken_text})`),k(q=>q+1)):(m("error"),A(`Algƒ±lanan: "${L.spoken_text||"???"}" - Tekrar dene!`))}catch(P){console.error(P),A("Sunucu hatasƒ±."),m("error")}finally{b(!1)}};return n?e.createElement("div",{style:Ze.container},e.createElement("div",{style:Ze.header},e.createElement(ji,{to:"/eng-learn",style:Ze.backBtn},e.createElement(Gi,null)," √áƒ±kƒ±≈ü"),e.createElement("div",{style:Ze.scoreBadge},"Skor: ",g)),e.createElement("div",{style:Ze.mainContent},e.createElement("div",{style:{...Ze.card,borderColor:S==="success"?"#43b581":S==="error"?"#f04747":"transparent",boxShadow:S==="success"?"0 0 30px rgba(67, 181, 129, 0.3)":S==="error"?"0 0 30px rgba(240, 71, 71, 0.3)":"0 10px 30px rgba(0,0,0,0.3)"}},e.createElement("span",{style:{...Ze.difficulty,backgroundColor:n.difficulty==="Efsane"?"#eb459e":n.difficulty==="Zor"?"#f04747":"#202225",color:n.difficulty==="Efsane"||n.difficulty==="Zor"?"white":"#949ba4"}},n.difficulty),e.createElement("h1",{style:Ze.wordText},n.text),e.createElement("div",{style:{height:"30px",marginTop:"10px",color:S==="success"?"#43b581":"#f04747",fontWeight:"bold"}},B?"Analiz ediliyor...":y),e.createElement("div",{style:Ze.controls},e.createElement("button",{onClick:h,style:Ze.iconButton,title:"Doƒürusunu Dinle"},e.createElement(hl,{size:24})),e.createElement("button",{onMouseDown:c,onMouseUp:r,onTouchStart:c,onTouchEnd:r,style:{...Ze.micButton,backgroundColor:d?"#f04747":S==="success"?"#43b581":"#5865f2",transform:d?"scale(1.1)":"scale(1)"}},e.createElement(La,{size:32}))),e.createElement("p",{style:Ze.hint},d?"Dinliyor...":"Mikrofona basƒ±lƒ± tut ve oku")),e.createElement("div",{style:Ze.bottomNav},e.createElement("button",{onClick:v,style:Ze.skipButton},S==="success"?e.createElement(e.Fragment,null,"Sonraki Kelime ",e.createElement(gl,null)):e.createElement(e.Fragment,null,"Bunu Ge√ß ",e.createElement(yl,null)))))):e.createElement("div",{style:Ze.container},"Y√ºkleniyor...")},Ze={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1e1f22",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif",alignItems:"center"},header:{width:"100%",maxWidth:"600px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},backBtn:{color:"#b9bbbe",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},scoreBadge:{backgroundColor:"#f0b232",color:"#000",padding:"5px 15px",borderRadius:"20px",fontWeight:"bold"},mainContent:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"24px",width:"100%",maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",border:"3px solid transparent",transition:"all 0.3s ease"},difficulty:{padding:"4px 12px",borderRadius:"12px",fontSize:"0.85em",marginBottom:"20px",fontWeight:"bold"},wordText:{fontSize:"2.2em",fontWeight:"800",margin:"0 0 10px 0",color:"#fff",letterSpacing:"1px",lineHeight:"1.3"},controls:{display:"flex",alignItems:"center",gap:"30px",marginTop:"30px"},iconButton:{width:"50px",height:"50px",borderRadius:"50%",border:"2px solid #40444b",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 5px 20px rgba(0,0,0,0.4)",transition:"all 0.1s ease"},hint:{marginTop:"20px",color:"#72767d",fontSize:"0.9em"},bottomNav:{marginTop:"50px"},skipButton:{background:"transparent",border:"none",color:"#b9bbbe",fontSize:"1.1em",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",padding:"10px 20px",borderRadius:"8px",transition:"background 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.05)"}}},Km=e.memo(qm),Ym=({apiBaseUrl:f})=>{const[i,n]=a.useState("loading"),s=wo(),d=Ni();return a.useEffect(()=>{const x=new URLSearchParams(d.search),B=x.get("code");if(x.get("error")){n("error");return}if(B){const S=localStorage.getItem("access_token");fetch(`${f}/spotify/callback/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({code:B})}).then(m=>{m.ok?(n("success"),setTimeout(()=>{s("/",{replace:!0})},1500)):n("error")}).catch(m=>{console.error(m),n("error")})}},[d,f,s]),e.createElement("div",{style:Da.container},e.createElement("div",{style:Da.card},i==="loading"&&e.createElement(e.Fragment,null,e.createElement(Hi,{className:"spin",size:50,color:"#1db954",style:{marginBottom:20}}),e.createElement("h2",null,"Spotify Baƒülanƒ±yor..."),e.createElement("p",null,"Token alƒ±nƒ±yor, l√ºtfen bekleyin.")),i==="success"&&e.createElement(e.Fragment,null,e.createElement($a,{size:60,color:"#1db954",style:{marginBottom:20}}),e.createElement("h2",{style:{color:"#1db954"}},"Ba≈üarƒ±lƒ±!"),e.createElement("p",null,"Hesabƒ±n baƒülandƒ±. Sohbet ekranƒ±na d√∂n√ºl√ºyor...")),i==="error"&&e.createElement(e.Fragment,null,e.createElement(Oa,{size:60,color:"#f04747",style:{marginBottom:20}}),e.createElement("h2",{style:{color:"#f04747"}},"Hata Olu≈ütu"),e.createElement("p",null,"Baƒülantƒ± kurulamadƒ±."),e.createElement("button",{onClick:()=>s("/"),style:Da.button},"Geri D√∂n"))))},Da={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#191414",color:"white",fontFamily:"Poppins, sans-serif"},card:{backgroundColor:"#282828",padding:"40px",borderRadius:"16px",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",maxWidth:"400px",width:"90%"},button:{marginTop:"20px",padding:"10px 20px",borderRadius:"20px",border:"none",backgroundColor:"#1db954",color:"white",fontWeight:"bold",cursor:"pointer"}},n0=document.createElement("style");n0.innerText=`
  .spin { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(n0);const Jm=e.memo(Ym),Xm=()=>{const{globalData:f}=t0(),[i,n]=a.useState(null),[s,d]=a.useState(!1),x=wo();if(a.useEffect(()=>{if(f&&f.type==="chat_message_handler"&&f.username==="‚ö° Signal Bot"){const b=f.content.split(`
`),S=b.find(g=>g.includes("ü™ô"))||"Bilinmiyor",m=b.find(g=>g.includes("üìà"))||"",y={title:"YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞! üö®",coin:S.replace("ü™ô","").replace(/\*/g,"").trim(),direction:m.includes("LONG")?"Y√úKSELƒ∞≈û (LONG)":"D√ú≈û√ú≈û (SHORT)",isLong:m.includes("LONG"),raw:f};n(y),d(!0);const A=setTimeout(()=>{d(!1)},8e3);return()=>clearTimeout(A)}},[f]),!s||!i)return null;const B=()=>{d(!1),x("/")};return e.createElement("div",{style:jt.container,className:"slide-in-notification"},e.createElement("div",{style:jt.iconBox},e.createElement(vl,{size:24,color:"#f0b232"})),e.createElement("div",{style:jt.content,onClick:B},e.createElement("h4",{style:jt.title},i.title),e.createElement("div",{style:jt.details},e.createElement("span",{style:jt.coinName},i.coin),e.createElement("span",{style:{...jt.directionBadge,backgroundColor:i.isLong?"rgba(35, 165, 89, 0.2)":"rgba(240, 71, 71, 0.2)",color:i.isLong?"#23a559":"#da373c"}},i.direction)),e.createElement("span",{style:jt.hint},"Detaylar i√ßin tƒ±kla ",e.createElement(El,{size:10}))),e.createElement("button",{onClick:b=>{b.stopPropagation(),d(!1)},style:jt.closeButton},e.createElement(So,null)))},jt={container:{position:"fixed",top:"20px",right:"20px",width:"320px",backgroundColor:"#1e1f22",borderRadius:"8px",boxShadow:"0 8px 20px rgba(0,0,0,0.5)",borderLeft:"5px solid #f0b232",display:"flex",alignItems:"center",padding:"15px",zIndex:99999,cursor:"pointer",transition:"transform 0.3s ease-out"},iconBox:{marginRight:"15px",display:"flex",alignItems:"center"},content:{flex:1,display:"flex",flexDirection:"column"},title:{margin:0,color:"#fff",fontSize:"0.95em",fontWeight:"bold",marginBottom:"5px"},details:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"},coinName:{color:"#dcddde",fontWeight:"bold",fontSize:"1.1em"},directionBadge:{fontSize:"0.75em",padding:"2px 6px",borderRadius:"4px",fontWeight:"bold"},hint:{fontSize:"0.7em",color:"#949ba4",display:"flex",alignItems:"center",gap:"5px"},closeButton:{background:"none",border:"none",color:"#949ba4",cursor:"pointer",padding:"5px",marginLeft:"10px",fontSize:"1em"}},a0=document.createElement("style");a0.innerText=`
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  .slide-in-notification {
    animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
`;document.head.appendChild(a0);function Zm(f={}){const{nonce:i,onScriptLoadSuccess:n,onScriptLoadError:s}=f,[d,x]=a.useState(!1),B=a.useRef(n);B.current=n;const b=a.useRef(s);return b.current=s,a.useEffect(()=>{const S=document.createElement("script");return S.src="https://accounts.google.com/gsi/client",S.async=!0,S.defer=!0,S.nonce=i,S.onload=()=>{var m;x(!0),(m=B.current)===null||m===void 0||m.call(B)},S.onerror=()=>{var m;x(!1),(m=b.current)===null||m===void 0||m.call(b)},document.body.appendChild(S),()=>{document.body.removeChild(S)}},[i]),d}const Qm=a.createContext(null);function ep({clientId:f,nonce:i,onScriptLoadSuccess:n,onScriptLoadError:s,children:d}){const x=Zm({nonce:i,onScriptLoadSuccess:n,onScriptLoadError:s}),B=a.useMemo(()=>({clientId:f,scriptLoadedSuccessfully:x}),[f,x]);return e.createElement(Qm.Provider,{value:B},d)}const $e=({children:f})=>{const i=eo.isNativePlatform();return e.createElement("div",{style:{width:"100%",height:"100dvh",boxSizing:"border-box",paddingTop:i?"max(35px, env(safe-area-inset-top))":"0px",backgroundColor:"#1e1f22",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"}},f)};class tp extends e.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(i){return{hasError:!0}}componentDidCatch(i,n){console.error("üî¥ App Crashed:",i),console.error("Error Info:",n),this.setState({error:i,errorInfo:n});try{fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:i?.toString(),stack:i?.stack,componentStack:n?.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{})}catch(s){console.warn("Could not report error:",s)}}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()};render(){return this.state.hasError?e.createElement("div",{style:Gt.container},e.createElement("div",{style:Gt.content},e.createElement("div",{style:Gt.icon},"üí•"),e.createElement("h1",{style:Gt.title},"Oops! Bir ≈üeyler ters gitti"),e.createElement("p",{style:Gt.message},"√úzg√ºn√ºz, uygulama beklenmedik bir hatayla kar≈üƒ±la≈ütƒ±."),e.createElement("div",{style:Gt.actions},e.createElement("button",{onClick:this.handleReset,style:Gt.button},"üîÑ Yeniden Ba≈ülat"),e.createElement("button",{onClick:()=>window.location.href="/",style:{...Gt.button,...Gt.buttonSecondary}},"üè† Ana Sayfaya D√∂n")),!1)):this.props.children}}const Gt={container:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#1E1F22",color:"#FFFFFF",padding:"20px",fontFamily:"'Inter', sans-serif"},content:{textAlign:"center",maxWidth:"600px",padding:"40px",background:"linear-gradient(135deg, #2B2D31 0%, #1E1F22 100%)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},icon:{fontSize:"80px",marginBottom:"20px",animation:"shake 0.5s ease-in-out"},title:{fontSize:"32px",fontWeight:"bold",marginBottom:"16px",color:"#FFFFFF"},message:{fontSize:"16px",color:"#B9BBBE",marginBottom:"32px",lineHeight:"1.6"},actions:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},button:{padding:"12px 24px",fontSize:"16px",fontWeight:"600",border:"none",borderRadius:"8px",cursor:"pointer",backgroundColor:"#5865F2",color:"#FFFFFF",transition:"all 0.2s",":hover":{backgroundColor:"#4752C4"}},buttonSecondary:{backgroundColor:"#4E5058",":hover":{backgroundColor:"#6A6F78"}}},rp={async post(f,i,n={}){const s={"Content-Type":"application/json",...n.headers},d=localStorage.getItem("accessToken");d&&(s.Authorization=`Bearer ${d}`),console.log("üì° [API] POST request:",f);const x=await fetch(f,{method:"POST",headers:s,body:JSON.stringify(i),credentials:"include"}),B=await x.json();if(!x.ok){const b=new Error(B.error||"Request failed");throw b.response={data:B,status:x.status},b}return{data:B,status:x.status}},async get(f,i={}){const n={"Content-Type":"application/json",...i.headers},s=localStorage.getItem("accessToken");s&&(n.Authorization=`Bearer ${s}`),console.log("üì° [API] GET request:",f);const d=await fetch(f,{method:"GET",headers:n,credentials:"include"}),x=await d.json();if(!d.ok){const B=new Error(x.error||"Request failed");throw B.response={data:x,status:d.status},B}return{data:x,status:d.status}}},op=({apiBaseUrl:f})=>{const[i]=bl(),n=wo(),{login:s}=to(),[d,x]=a.useState("processing"),[B,b]=a.useState(null),S=a.useRef(!1);return a.useEffect(()=>{(async()=>{if(S.current){console.log("üîê [AuthCallback] Exchange already attempted, skipping...");return}S.current=!0;const y=i.get("code"),A=i.get("access_token"),g=i.get("refresh_token"),k=i.get("error"),w=i.get("needs_password")==="true";if(console.log("üîê [AuthCallback] Starting...",{hasCode:!!y,hasAccessToken:!!A,apiBaseUrl:f}),k){console.error("üîê [AuthCallback] Error param:",k),x("error"),b("Google giri≈ü ba≈üarƒ±sƒ±z oldu. L√ºtfen tekrar deneyin."),setTimeout(()=>n("/"),3e3);return}if(A&&g){console.log("üîê [AuthCallback] Direct token mode");try{localStorage.setItem("accessToken",A),localStorage.setItem("refreshToken",g),s&&await s(A,g),x("success"),setTimeout(()=>{n(w?"/settings?section=security&action=set-password":"/")},1500)}catch(C){console.error("üîê [AuthCallback] Direct token error:",C),x("error"),b("Token i≈üleme hatasƒ±."),setTimeout(()=>n("/"),3e3)}return}if(!y){console.error("üîê [AuthCallback] No code or tokens found"),x("error"),b("Yetkilendirme bilgisi bulunamadƒ±."),setTimeout(()=>n("/"),3e3);return}try{x("exchanging");const C=`${f}/api/auth/exchange-code/`;console.log("üîê [AuthCallback] Exchanging code at:",C);const v=await rp.post(C,{code:y});if(console.log("üîê [AuthCallback] Response:",v.data),v.data.success){const{access_token:h,refresh_token:c,user_id:r,needs_password:o}=v.data;localStorage.setItem("accessToken",h),localStorage.setItem("refreshToken",c),s&&await s(h,c),x("success"),setTimeout(o?()=>{n("/settings?section=security&action=set-password")}:()=>{n("/")},1500)}else throw new Error(v.data.error||"Token exchange failed")}catch(C){console.error("Auth callback error:",C),x("error"),b(C.response?.data?.error||"Giri≈ü i≈ülemi ba≈üarƒ±sƒ±z oldu."),setTimeout(()=>n("/"),3e3)}})()},[i,n,s,f]),e.createElement("div",{className:"auth-callback-container"},e.createElement("div",{className:"auth-callback-card"},d==="processing"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-spinner"}),e.createElement("h2",null,"ƒ∞≈üleniyor..."),e.createElement("p",null,"Google hesabƒ±nƒ±z doƒürulanƒ±yor")),d==="exchanging"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-spinner"}),e.createElement("h2",null,"Giri≈ü Yapƒ±lƒ±yor..."),e.createElement("p",null,"G√ºvenli baƒülantƒ± kuruluyor")),d==="success"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-success-icon"},"‚úì"),e.createElement("h2",null,"Giri≈ü Ba≈üarƒ±lƒ±!"),e.createElement("p",null,"Y√∂nlendiriliyorsunuz...")),d==="error"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-error-icon"},"‚úï"),e.createElement("h2",null,"Hata"),e.createElement("p",null,B),e.createElement("p",{className:"auth-redirect-text"},"Ana sayfaya y√∂nlendiriliyorsunuz..."))))},np=e.lazy(()=>M(()=>import("./EnglishHub-DpIULeQ-.js"),__vite__mapDeps([164,1,2]),import.meta.url)),ap=e.lazy(()=>M(()=>import("./GrammarQuizPage-CB5gAujT.js"),__vite__mapDeps([165,1,2,166]),import.meta.url)),sp=e.lazy(()=>M(()=>import("./EnglishLearningPage-OXHFJ_ZJ.js"),__vite__mapDeps([167,1,2,166]),import.meta.url)),ip=e.lazy(()=>M(()=>import("./CryptoDashboard-iNCCjmDT.js"),__vite__mapDeps([168,1,2,35]),import.meta.url)),cp=e.lazy(()=>M(()=>import("./CryptoSignals-Wj5xAkT3.js"),__vite__mapDeps([169,1,2]),import.meta.url)),lp=e.lazy(()=>M(()=>import("./ForgotPasswordPage-CWtbqmbj.js"),__vite__mapDeps([115,1,2,32]),import.meta.url)),dp=e.lazy(()=>M(()=>import("./ResetPasswordPage-CwlzoiLw.js"),__vite__mapDeps([116,1,2]),import.meta.url)),up=e.lazy(()=>M(()=>import("./TwoFactorLoginPage-BPNuEqhs.js"),__vite__mapDeps([117,1,2]),import.meta.url)),fp=e.lazy(()=>M(()=>import("./VerifyEmailPage-CkDR2K96.js"),__vite__mapDeps([114,1,2]),import.meta.url)),mp=e.lazy(()=>M(()=>import("./LandingPage-DbWKhNg9.js"),__vite__mapDeps([170,1,2,135,171]),import.meta.url)),pp=e.lazy(()=>M(()=>import("./ReferralProgram-B9rGhEj8.js"),__vite__mapDeps([172,1,2,135,173]),import.meta.url)),xp=e.lazy(()=>M(()=>import("./GrowthDashboard-Rfv36dtj.js"),__vite__mapDeps([174,1,2,135,28,175]),import.meta.url)),hp=e.lazy(()=>M(()=>import("./ToastDemo-Dvpqmq35.js"),__vite__mapDeps([176,1,2,177]),import.meta.url)),gp=window.location.hostname==="pawscord.com"||window.location.hostname==="www.pawscord.com",yp="192.168.68.53",vp="8888",s0=gp?"https://api.pawscord.com":`http://${yp}:${vp}`,$t=`${s0}/api`,Ep="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",bp=()=>(a.useEffect(()=>{const f=setTimeout(()=>{try{Ki()}catch(i){console.warn("preloadCriticalChunks error",i)}},3e3);if("requestIdleCallback"in window)window.requestIdleCallback(()=>{try{Fa()}catch(i){console.warn("prefetchNextChunks error",i)}},{timeout:2e3});else{const i=setTimeout(()=>{try{Fa()}catch(n){console.warn("prefetchNextChunks error",n)}},4e3);return()=>clearTimeout(i)}return()=>clearTimeout(f)},[]),e.createElement(ep,{clientId:Ep},e.createElement($u,null,e.createElement(Uu,null,e.createElement(tp,null,e.createElement(Sl,null,e.createElement(Xm,null),e.createElement(wl,null,e.createElement(Ie,{path:"/verify/:token",element:e.createElement($e,null,e.createElement(Hm,null))}),e.createElement(Ie,{path:"/verify-email/:token",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(fp,{apiBaseUrl:$t})))}),e.createElement(Ie,{path:"/forgot-password",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(lp,{apiBaseUrl:$t})))}),e.createElement(Ie,{path:"/reset-password/:token",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(dp,{apiBaseUrl:$t})))}),e.createElement(Ie,{path:"/2fa-login",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(up,{apiBaseUrl:$t})))}),e.createElement(Ie,{path:"/auth/callback",element:e.createElement($e,null,e.createElement(op,{apiBaseUrl:s0}))}),e.createElement(Ie,{path:"/launch",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(mp,{apiBaseUrl:$t})))}),e.createElement(Ie,{path:"/referral",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(pp,{apiBaseUrl:$t})))}),e.createElement(Ie,{path:"/growth-dashboard",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(xp,{apiBaseUrl:$t})))}),e.createElement(Ie,{path:"/toast-demo",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(hp,null)))}),e.createElement(Ie,{path:"/invite/:code",element:e.createElement($e,null,e.createElement(jm,null))}),e.createElement(Ie,{path:"/spotify-callback",element:e.createElement($e,null,e.createElement(Jm,{apiBaseUrl:$t}))}),e.createElement(Ie,{path:"/eng-learn",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(np,null)))}),e.createElement(Ie,{path:"/eng-learn/vocab",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(sp,null)))}),e.createElement(Ie,{path:"/eng-learn/grammar",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ap,null)))}),e.createElement(Ie,{path:"/eng-learn/voice",element:e.createElement($e,null,e.createElement(Gm,{apiBaseUrl:$t}))}),e.createElement(Ie,{path:"/eng-learn/pronunciation",element:e.createElement($e,null,e.createElement(Km,{apiBaseUrl:$t}))}),e.createElement(Ie,{path:"/crypto-analysis",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(cp,null)))}),e.createElement(Ie,{path:"/crypto-dashboard-old",element:e.createElement($e,null,e.createElement(e.Suspense,{fallback:e.createElement("div",null,"Y√ºkleniyor...")},e.createElement(ip,null)))}),e.createElement(Ie,{path:"/*",element:e.createElement(Vm,null)})))))))),_p=_l.createRoot(document.getElementById("root"));_p.render(e.createElement(bp,null));export{Iu as A,eo as C,Ol as G,Al as S,Ra as T,qi as W,to as a,sx as b,Bu as c,He as d,ax as e,nx as f,Zl as g,Mu as h,Na as i,Xr as j,yu as k,Ge as l,za as r,ie as t,t0 as u};
