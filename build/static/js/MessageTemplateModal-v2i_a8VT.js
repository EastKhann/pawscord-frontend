var v=Object.defineProperty;var o=(r,i)=>v(r,"name",{value:i,configurable:!0});import{r as s,j as e}from"./react-core-Djgtqrmb.js";import{aJ as w,a as F,a9 as T,an as B,f as D}from"./icons-vendor-BW7dxHkX.js";import{d as R}from"./index-m2zCEI_Z.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const te=o(({onClose:r,onSelect:i,fetchWithAuth:d,apiBaseUrl:c,isAdmin:b})=>{const[x,y]=s.useState([]),[h,u]=s.useState(!0),[m,p]=s.useState(!1),[n,a]=s.useState({name:"",content:"",is_global:!1});s.useEffect(()=>{g()},[]);const g=o(async()=>{u(!0);try{const t=await d(`${c}/templates/`);if(t.ok){const l=await t.json();y(l||[])}}catch{}u(!1)},"loadTemplates"),f=o(async()=>{if(!(!n.name||!n.content))try{(await d(`${c}/templates/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok&&(a({name:"",content:"",is_global:!1}),p(!1),g())}catch{}},"handleCreate"),j=o(async(t,l)=>{if(l.stopPropagation(),!!await R("Bu şablonu silmek istediğine emin misin?"))try{(await d(`${c}/templates/${t}/`,{method:"DELETE"})).ok&&y(C=>C.filter(S=>S.id!==t))}catch{}},"handleDelete");return e.jsx("div",{style:z,children:e.jsxs("div",{style:E,children:[e.jsxs("div",{style:A,children:[e.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(w,{})," Hazır Şablonlar"]}),e.jsx("button",{onClick:r,style:I,children:e.jsx(F,{})})]}),e.jsx("div",{style:H,children:m?e.jsxs("div",{style:Y,children:[e.jsx("input",{placeholder:"Şablon Adı",value:n.name,onChange:o(t=>a({...n,name:t.target.value}),"onChange"),style:G}),e.jsx("textarea",{placeholder:"Şablon İçeriği...",value:n.content,onChange:o(t=>a({...n,content:t.target.value}),"onChange"),style:J}),b&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"12px"},children:[e.jsx("input",{type:"checkbox",checked:n.is_global,onChange:o(t=>a({...n,is_global:t.target.checked}),"onChange")}),"Herkese Açık (Global)"]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsxs("button",{onClick:f,style:L,children:[e.jsx(T,{})," Kaydet"]}),e.jsx("button",{onClick:o(()=>p(!1),"onClick"),style:M,children:"İptal"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o(()=>p(!0),"onClick"),style:_,children:[e.jsx(B,{})," Yeni Şablon Oluştur"]}),e.jsx("div",{style:O,children:h?e.jsx("p",{children:"Yükleniyor..."}):x.length===0?e.jsx("p",{style:{opacity:.5},children:"Henüz şablon yok."}):x.map(t=>e.jsxs("div",{style:$,onClick:o(()=>i(t.content),"onClick"),children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t.name}),e.jsx("div",{style:{fontSize:"12px",opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"},children:t.content})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.is_global&&e.jsx("span",{style:N,children:"Global"}),e.jsx("button",{onClick:o(l=>j(t.id,l),"onClick"),style:P,children:e.jsx(D,{})})]})]},t.id))})]})})]})})},"MessageTemplateModal"),z={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(5px)"},E={backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 15px rgba(0,0,0,0.5)",color:"white",display:"flex",flexDirection:"column",maxHeight:"80vh"},A={padding:"16px",backgroundColor:"#2B2D31",borderBottom:"1px solid #1F2023",display:"flex",justifyContent:"space-between",alignItems:"center"},I={background:"none",border:"none",color:"#B5BAC1",cursor:"pointer",fontSize:"16px"},H={padding:"16px",overflowY:"auto"},_={width:"100%",padding:"10px",backgroundColor:"#5865F2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px",marginBottom:"15px"},O={display:"flex",flexDirection:"column",gap:"8px"},$={backgroundColor:"#2B2D31",padding:"10px",borderRadius:"4px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"0.2s"},N={fontSize:"10px",backgroundColor:"#FAA61A",color:"black",padding:"2px 6px",borderRadius:"10px",fontWeight:"bold"},P={background:"none",border:"none",color:"#DA373C",cursor:"pointer"},Y={display:"flex",flexDirection:"column",gap:"10px"},G={padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#1E1F22",color:"white"},J={padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#1E1F22",color:"white",minHeight:"100px",resize:"vertical"},L={flex:1,padding:"8px",backgroundColor:"#23A559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},M={flex:1,padding:"8px",backgroundColor:"#DA373C",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"};export{te as default};
