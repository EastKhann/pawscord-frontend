import{r as s,d as e,af as F,aR as h,G as v,bx as T,B,bB as $,dw as _,aQ as z}from"./react-core-DrOm_csO.js";import{t as n}from"./index-BYhWpPLp.js";const x=({onSelectTemplate:i,onClose:o})=>{const[u,N]=s.useState([]),[k,y]=s.useState([]),[c,d]=s.useState("all"),[f,p]=s.useState(!0),[l,r]=s.useState(null);s.useEffect(()=>{b(),w()},[]);const b=async()=>{p(!0);try{const t=await fetch("/api/templates/list/",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(t.ok){const a=await t.json();N(a.templates||[])}}catch{n.error("âŒ Åžablonlar yÃ¼klenemedi")}finally{p(!1)}},w=async()=>{try{const t=await fetch("/api/templates/categories/",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(t.ok){const a=await t.json();y(a.categories||[])}}catch(t){console.error("Failed to fetch categories:",t)}},C=async t=>{try{const a=await fetch(`/api/templates/${t}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(a.ok){const m=await a.json();r(m.template)}}catch{n.error("âŒ Åžablon detaylarÄ± yÃ¼klenemedi")}},E=async t=>{try{const a=await fetch(`/api/templates/${t}/use/`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(a.ok){const m=await a.json();n.success("âœ… Sunucu oluÅŸturuldu!"),i&&i(m.server),o()}else n.error("âŒ Sunucu oluÅŸturulamadÄ±")}catch{n.error("âŒ BaÄŸlantÄ± hatasÄ±")}},g=t=>({gaming:e.createElement(z,null),education:e.createElement(_,null),community:e.createElement(v,null),music:e.createElement($,null),tech:e.createElement(B,null),other:e.createElement(T,null)})[t]||e.createElement(v,null),S=c==="all"?u:u.filter(t=>t.category===c);return e.createElement("div",{className:"templates-overlay",onClick:o},e.createElement("div",{className:"templates-panel",onClick:t=>t.stopPropagation()},e.createElement("div",{className:"templates-header"},e.createElement("h2",null,"Sunucu ÅžablonlarÄ±"),e.createElement("button",{className:"close-btn",onClick:o},"Ã—")),e.createElement("div",{className:"category-filters"},e.createElement("button",{className:`category-btn ${c==="all"?"active":""}`,onClick:()=>d("all")},"TÃ¼mÃ¼"),k.map(t=>e.createElement("button",{key:t.id,className:`category-btn ${c===t.slug?"active":""}`,onClick:()=>d(t.slug)},g(t.slug),e.createElement("span",null,t.name)))),f?e.createElement("div",{className:"loading-state"},e.createElement("div",{className:"spinner"}),e.createElement("p",null,"YÃ¼kleniyor...")):e.createElement("div",{className:"templates-grid"},S.map(t=>e.createElement("div",{key:t.id,className:"template-card"},e.createElement("div",{className:"template-icon"},g(t.category)),e.createElement("div",{className:"template-info"},e.createElement("h3",null,t.name),e.createElement("p",null,t.description),e.createElement("div",{className:"template-stats"},e.createElement("span",{className:"stat"},"ðŸ“ ",t.channels_count||0," kanal"),e.createElement("span",{className:"stat"},"ðŸ‘¥ ",t.roles_count||0," rol"),t.is_featured&&e.createElement("span",{className:"featured-badge"},e.createElement(F,null)," Ã–ne Ã‡Ä±kan"))),e.createElement("div",{className:"template-actions"},e.createElement("button",{className:"btn-preview",onClick:()=>C(t.id)},"Ã–nizle"),e.createElement("button",{className:"btn-use",onClick:()=>E(t.id)},e.createElement(h,null)," Kullan"))))),l&&e.createElement("div",{className:"preview-modal",onClick:()=>r(null)},e.createElement("div",{className:"preview-content",onClick:t=>t.stopPropagation()},e.createElement("div",{className:"preview-header"},e.createElement("h3",null,l.name),e.createElement("button",{onClick:()=>r(null)},"Ã—")),e.createElement("div",{className:"preview-body"},e.createElement("p",null,l.description),l.channels&&e.createElement("div",{className:"preview-section"},e.createElement("h4",null,"Kanallar (",l.channels.length,")"),e.createElement("div",{className:"channel-list"},l.channels.map((t,a)=>e.createElement("div",{key:a,className:"channel-item"},t.type==="text"?"ðŸ’¬":"ðŸ”Š"," ",t.name)))),l.roles&&e.createElement("div",{className:"preview-section"},e.createElement("h4",null,"Roller (",l.roles.length,")"),e.createElement("div",{className:"role-list"},l.roles.map((t,a)=>e.createElement("div",{key:a,className:"role-item",style:{borderLeftColor:t.color}},t.name))))),e.createElement("div",{className:"preview-actions"},e.createElement("button",{className:"btn-use-large",onClick:()=>{E(l.id),r(null)}},e.createElement(h,null)," Bu Åžablonu Kullan"))))))};export{x as default};
