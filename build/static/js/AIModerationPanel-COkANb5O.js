import{r as l,n as e}from"./react-core-DA61mcWm.js";import{d as b,b2 as y,a4 as j,a5 as v,B as S}from"./icons-vendor-l2qVv93x.js";import{a as h}from"./index-BV9jtLkh.js";import{g as f,t as m}from"./index-wBOWb2zj.js";import"./ui-vendor-BrUQ4r0A.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-tDmQW26m.js";import"./router-vendor-2etVlp2q.js";import"./state-vendor-CjqIs3K2.js";import"./crypto-vendor-DiGIAuUm.js";const k=s=>({container:{padding:s?"16px":"24px",maxWidth:"1200px",margin:"0 auto"},header:{marginBottom:"32px"},title:{fontSize:s?"24px":"32px",fontWeight:"700",color:"rgba(255,255,255,0.95)",display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},subtitle:{fontSize:s?"14px":"16px",color:"rgba(255,255,255,0.6)"},statsGrid:{display:"grid",gridTemplateColumns:s?"1fr 1fr":"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},statCard:{background:"linear-gradient(135deg, rgba(88,101,242,0.1), rgba(114,137,218,0.1))",border:"1px solid rgba(88,101,242,0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},statValue:{fontSize:s?"24px":"32px",fontWeight:"700",color:"#5865f2",marginBottom:"8px"},statLabel:{fontSize:"14px",color:"rgba(255,255,255,0.7)"},section:{background:"rgba(30,31,34,0.6)",border:"1px solid rgba(88,101,242,0.2)",borderRadius:"16px",padding:s?"20px":"24px",marginBottom:"24px"},sectionTitle:{fontSize:"20px",fontWeight:"600",color:"rgba(255,255,255,0.9)",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},setting:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",borderBottom:"1px solid rgba(88,101,242,0.1)"},settingInfo:{flex:1},settingLabel:{fontSize:"16px",fontWeight:"500",color:"rgba(255,255,255,0.9)",marginBottom:"4px"},settingDesc:{fontSize:"13px",color:"rgba(255,255,255,0.6)"},switch:t=>({width:"56px",height:"32px",background:t?"linear-gradient(135deg, #43b581, #4caf50)":"rgba(255,255,255,0.2)",borderRadius:"16px",position:"relative",cursor:"pointer",transition:"all 0.3s ease",border:"2px solid rgba(88,101,242,0.3)"}),switchKnob:t=>({width:"26px",height:"26px",background:"white",borderRadius:"50%",position:"absolute",top:"1px",left:t?"26px":"1px",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}),slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.2)",outline:"none",marginTop:"8px"},flagsList:{display:"flex",flexDirection:"column",gap:"12px"},flagCard:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(218,55,60,0.4)",borderRadius:"12px",padding:"16px"},flagHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},flagType:t=>({display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",background:t==="spam"?"rgba(218,55,60,0.2)":t==="nsfw"?"rgba(240,183,50,0.2)":"rgba(88,101,242,0.2)",color:t==="spam"?"#da373c":t==="nsfw"?"#f0b732":"#5865f2"}),flagMessage:{background:"rgba(0,0,0,0.4)",padding:"12px",borderRadius:"8px",color:"rgba(255,255,255,0.8)",fontSize:"14px",marginBottom:"12px",fontFamily:"monospace"},flagActions:{display:"flex",gap:"8px",flexWrap:"wrap"},actionBtn:t=>({padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",minHeight:"36px",background:t==="delete"?"rgba(218,55,60,0.2)":t==="timeout"?"rgba(240,183,50,0.2)":"rgba(67,181,129,0.2)",color:t==="delete"?"#da373c":t==="timeout"?"#f0b732":"#43b581",border:`1px solid ${t==="delete"?"rgba(218,55,60,0.4)":t==="timeout"?"rgba(240,183,50,0.4)":"rgba(67,181,129,0.4)"}`}),saveBtn:{width:"100%",padding:"16px",background:"linear-gradient(135deg, #5865f2, #7289da)",border:"none",borderRadius:"12px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginTop:"24px",transition:"all 0.2s ease",minHeight:"48px"}}),T={spamDetection:!0,profanityFilter:!0,nsfwDetection:!0,toxicityThreshold:70,autoTimeout:!1,autoDelete:!1,warningCount:3},w=(s,t)=>{const[o,n]=l.useState(T),[c,d]=l.useState([]),[g,p]=l.useState({messagesScanned:0,flaggedToday:0,autoModActions:0,accuracy:0}),[x,i]=l.useState(!1),a=async()=>{i(!0);try{const r=await h.get(`${f()}/moderation/${s}/`,{headers:{Authorization:`Bearer ${t}`}});r.data.settings&&n(r.data.settings),r.data.recent_flags&&d(r.data.recent_flags),r.data.stats&&p(r.data.stats)}catch{}finally{i(!1)}};return l.useEffect(()=>{a()},[]),{settings:o,setSettings:n,recentFlags:c,stats:g,isLoading:x,saveSettings:async()=>{try{await h.post(`${f()}/moderation/${s}/update/`,{settings:o},{headers:{Authorization:`Bearer ${t}`}}),m.success("âœ… Moderation settings saved!")}catch{m.error("âŒ Failed to save settings")}},handleAction:async(r,u)=>{try{await h.post(`${f()}/moderation/flag/${r}/action/`,{action:u},{headers:{Authorization:`Bearer ${t}`}}),a()}catch{}}}},B=({flag:s,styles:t,onAction:o})=>e.jsxs("div",{style:t.flagCard,children:[e.jsxs("div",{style:t.flagHeader,children:[e.jsxs("div",{children:[e.jsxs("span",{style:t.flagType(s.type),children:[e.jsx(b,{})," ",s.type.toUpperCase()]}),e.jsxs("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.5)",marginTop:"8px"},children:[s.user," ","â€¢"," ",s.timestamp]})]}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"700",color:s.confidence>80?"#da373c":"#f0b732"},children:[s.confidence,"%"]})]}),e.jsx("div",{style:t.flagMessage,children:s.message}),e.jsxs("div",{style:t.flagActions,children:[e.jsxs("button",{onClick:()=>o(s.id,"delete"),style:t.actionBtn("delete"),children:[e.jsx(y,{})," Delete"]}),e.jsx("button",{onClick:()=>o(s.id,"timeout"),style:t.actionBtn("timeout"),children:"Timeout User"}),e.jsxs("button",{onClick:()=>o(s.id,"dismiss"),style:t.actionBtn("dismiss"),children:[e.jsx(j,{})," Dismiss"]})]})]}),A=[{key:"spamDetection",label:"Spam Detection",desc:"Detect repeated or mass messages"},{key:"profanityFilter",label:"Profanity Filter",desc:"Block offensive language"},{key:"nsfwDetection",label:"NSFW Detection",desc:"Detect inappropriate images"}],z=[{key:"messagesScanned",label:"Messages Scanned",fmt:s=>s.toLocaleString()},{key:"flaggedToday",label:"Flagged Today"},{key:"autoModActions",label:"Auto Actions"},{key:"accuracy",label:"Accuracy",suffix:"%"}],N=({serverSlug:s,token:t,isMobile:o})=>{const{settings:n,setSettings:c,recentFlags:d,stats:g,saveSettings:p,handleAction:x}=w(s,t),i=k(o);return e.jsxs("div",{style:i.container,children:[e.jsxs("div",{style:i.header,children:[e.jsxs("h1",{style:i.title,children:[e.jsx(v,{})," AI Moderation"]}),e.jsx("p",{style:i.subtitle,children:"Automated content filtering powered by machine learning"})]}),e.jsx("div",{style:i.statsGrid,children:z.map(a=>e.jsxs("div",{style:i.statCard,children:[e.jsxs("div",{style:i.statValue,children:[a.fmt?a.fmt(g[a.key]):g[a.key],a.suffix||""]}),e.jsx("div",{style:i.statLabel,children:a.label})]},a.key))}),e.jsxs("div",{style:i.section,children:[e.jsxs("h2",{style:i.sectionTitle,children:["âš™ï¸"," Detection Settings"]}),A.map(a=>e.jsxs("div",{style:i.setting,children:[e.jsxs("div",{style:i.settingInfo,children:[e.jsx("div",{style:i.settingLabel,children:a.label}),e.jsx("div",{style:i.settingDesc,children:a.desc})]}),e.jsx("div",{style:i.switch(n[a.key]),onClick:()=>c({...n,[a.key]:!n[a.key]}),children:e.jsx("div",{style:i.switchKnob(n[a.key])})})]},a.key)),e.jsxs("div",{style:i.setting,children:[e.jsxs("div",{style:i.settingInfo,children:[e.jsxs("div",{style:i.settingLabel,children:["Toxicity Threshold: ",n.toxicityThreshold,"%"]}),e.jsx("div",{style:i.settingDesc,children:"Sensitivity level for toxic content"})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:n.toxicityThreshold,onChange:a=>c({...n,toxicityThreshold:parseInt(a.target.value)}),style:i.slider})]})]}),e.jsxs("div",{style:i.section,children:[e.jsxs("h2",{style:i.sectionTitle,children:[e.jsx(b,{})," Recent Flags (",d.length,")"]}),d.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"rgba(255,255,255,0.5)"},children:[e.jsx(S,{size:48}),e.jsx("p",{style:{marginTop:"16px"},children:"No recent violations detected"})]}):e.jsx("div",{style:i.flagsList,children:d.map(a=>e.jsx(B,{flag:a,styles:i,onAction:x},a.id))})]}),e.jsxs("button",{onClick:p,style:i.saveBtn,children:["ðŸ’¾"," Save Settings"]})]})};export{N as default};
