import{r as l,j as e}from"./react-vendor-D4QjtNWS.js";import{a6 as S,a as w,ae as v,Z as F,m as T}from"./icons-vendor-BZYtSAMW.js";import"./vendor-Brv1On52.js";import"./state-vendor-T8XA44Ud.js";import"./perf-vendor-CmoV45_-.js";const Z=({onClose:u,onSelect:g,fetchWithAuth:r,apiBaseUrl:a,isAdmin:b})=>{const[d,c]=l.useState([]),[h,p]=l.useState(!0),[m,i]=l.useState(!1),[o,s]=l.useState({name:"",content:"",is_global:!1});l.useEffect(()=>{x()},[]);const x=async()=>{p(!0);try{const t=await r(`${a}/templates/`);if(t.ok){const n=await t.json();c(n||[])}}catch(t){console.error(t)}p(!1)},f=async()=>{if(!(!o.name||!o.content))try{(await r(`${a}/templates/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok&&(s({name:"",content:"",is_global:!1}),i(!1),x())}catch(t){console.error(t)}},j=async(t,n)=>{if(n.stopPropagation(),!!window.confirm("Bu şablonu silmek istediğine emin misin?"))try{(await r(`${a}/templates/${t}/`,{method:"DELETE"})).ok&&c(k=>k.filter(C=>C.id!==t))}catch(y){console.error(y)}};return e.jsx("div",{style:B,children:e.jsxs("div",{style:D,children:[e.jsxs("div",{style:R,children:[e.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(S,{})," Hazır Şablonlar"]}),e.jsx("button",{onClick:u,style:z,children:e.jsx(w,{})})]}),e.jsx("div",{style:E,children:m?e.jsxs("div",{style:$,children:[e.jsx("input",{placeholder:"Şablon Adı",value:o.name,onChange:t=>s({...o,name:t.target.value}),style:N}),e.jsx("textarea",{placeholder:"Şablon İçeriği...",value:o.content,onChange:t=>s({...o,content:t.target.value}),style:P}),b&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"12px"},children:[e.jsx("input",{type:"checkbox",checked:o.is_global,onChange:t=>s({...o,is_global:t.target.checked})}),"Herkese Açık (Global)"]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsxs("button",{onClick:f,style:Y,children:[e.jsx(v,{})," Kaydet"]}),e.jsx("button",{onClick:()=>i(!1),style:G,children:"İptal"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>i(!0),style:A,children:[e.jsx(F,{})," Yeni Şablon Oluştur"]}),e.jsx("div",{style:I,children:h?e.jsx("p",{children:"Yükleniyor..."}):d.length===0?e.jsx("p",{style:{opacity:.5},children:"Henüz şablon yok."}):d.map(t=>e.jsxs("div",{style:H,onClick:()=>g(t.content),children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t.name}),e.jsx("div",{style:{fontSize:"12px",opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"},children:t.content})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.is_global&&e.jsx("span",{style:_,children:"Global"}),e.jsx("button",{onClick:n=>j(t.id,n),style:O,children:e.jsx(T,{})})]})]},t.id))})]})})]})})},B={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(5px)"},D={backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 15px rgba(0,0,0,0.5)",color:"white",display:"flex",flexDirection:"column",maxHeight:"80vh"},R={padding:"16px",backgroundColor:"#2B2D31",borderBottom:"1px solid #1F2023",display:"flex",justifyContent:"space-between",alignItems:"center"},z={background:"none",border:"none",color:"#B5BAC1",cursor:"pointer",fontSize:"16px"},E={padding:"16px",overflowY:"auto"},A={width:"100%",padding:"10px",backgroundColor:"#5865F2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px",marginBottom:"15px"},I={display:"flex",flexDirection:"column",gap:"8px"},H={backgroundColor:"#2B2D31",padding:"10px",borderRadius:"4px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"0.2s"},_={fontSize:"10px",backgroundColor:"#FAA61A",color:"black",padding:"2px 6px",borderRadius:"10px",fontWeight:"bold"},O={background:"none",border:"none",color:"#DA373C",cursor:"pointer"},$={display:"flex",flexDirection:"column",gap:"10px"},N={padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#1E1F22",color:"white"},P={padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#1E1F22",color:"white",minHeight:"100px",resize:"vertical"},Y={flex:1,padding:"8px",backgroundColor:"#23A559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},G={flex:1,padding:"8px",backgroundColor:"#DA373C",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"};export{Z as default};
