import{a as p,r as i,n as r}from"./react-core-BMiyQWF6.js";import{l as n,t as f}from"./index-5Qs4G3EW.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BuSyE8vR.js";import"./router-vendor-B86Z1mIL.js";import"./icons-vendor-GUGjkvMm.js";import"./state-vendor-CAyNnPM4.js";import"./crypto-vendor-1Q6e4ZD-.js";const g=({remoteStreams:e,remoteVolumes:t,mutedUsers:l})=>{const[d,u]=i.useState(()=>localStorage.getItem("pawscord_audio_enabled")==="true"),s=i.useCallback(()=>{try{const o=window.AudioContext||window.webkitAudioContext,a=new o;a.state==="suspended"&&a.resume().then(()=>{n.audio("AudioContext resumed successfully")}),u(!0),localStorage.setItem("pawscord_audio_enabled","true"),n.audio("Global audio enabled")}catch(o){f.error("âŒ Ses sistemi baÅŸlatÄ±lamadÄ±: "+o.message)}},[]);return i.useEffect(()=>()=>n.audio("VoiceAudioController UNMOUNTED!"),[]),r.jsxs(r.Fragment,{children:[!d&&Object.keys(e).length>0&&r.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999999,backgroundColor:"rgba(0,0,0,0.9)",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},children:r.jsx("button",{onClick:s,style:{padding:"12px 24px",backgroundColor:"#ff4757",color:"white",fontWeight:"bold",border:"none",cursor:"pointer",borderRadius:"6px",fontSize:"16px",transition:"all 0.2s",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},onMouseOver:o=>o.target.style.backgroundColor="#ee5a6f",onMouseOut:o=>o.target.style.backgroundColor="#ff4757",children:"ðŸš¨ SES SÄ°STEMÄ°NÄ° BAÅžLAT ðŸš¨"})}),r.jsx("div",{style:{display:"none"},children:Object.entries(e).map(([o,a])=>r.jsx(x,{username:o,stream:a,volume:t[o]!==void 0?t[o]:100,isMuted:l?l.has(o):!1,globalEnabled:d},`${o}-${a.id}-${a.getAudioTracks().length}`))})]})},x=({username:e,stream:t,volume:l,isMuted:d,globalEnabled:u})=>{const s=i.useRef(null);return i.useEffect(()=>{if(t){const o=t.getAudioTracks();n.log(`[AudioPlayer] ${e} has ${o.length} audio tracks`)}},[t,e]),i.useEffect(()=>{const o=s.current;if(!o||!t)return;o.srcObject=t,o.muted=!1,(async()=>{if(u)try{if(t.getAudioTracks().length===0){n.warn(`[AudioPlayer] No audio tracks for ${e}`);return}await o.play(),n.log(`âœ… [AudioPlayer] Successfully playing ${e}`)}catch{}})()},[t,e,u]),i.useEffect(()=>{const o=s.current;if(!o)return;const a=d?0:l/100;o.volume=Math.max(0,Math.min(1,a))},[l,d,e]),r.jsx("audio",{ref:s,autoPlay:!0,playsInline:!0,style:{display:"none"}})},S=p.memo(g);export{S as default};
