import{r as c,b as e}from"./react-core-9vc7GIjk.js";import{C as E,a as C}from"./icons-vendor-NoxEirJf.js";import{t as r}from"./index-C8QEFqrd.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const R=({fetchWithAuth:s,apiBaseUrl:l,onClose:u,serverId:d})=>{const[x,y]=c.useState([]),[g,p]=c.useState(!1),[o,k]=c.useState("");c.useEffect(()=>{m()},[]);const m=async()=>{p(!0);try{const a=await(await s(`${l}/servers/${d}/nicknames/`)).json();y(a.nicknames||[])}catch{r.error("Failed to load nicknames")}finally{p(!1)}},b=async(n,a)=>{try{await s(`${l}/servers/${d}/nicknames/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,nickname:a})}),r.success("Nickname updated"),m()}catch{r.error("Failed to update nickname")}},h=async n=>{try{await s(`${l}/servers/${d}/nicknames/clear/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n})}),r.success("Nickname cleared"),m()}catch{r.error("Failed to clear nickname")}},f=x.filter(n=>n.username.toLowerCase().includes(o.toLowerCase())||n.nickname&&n.nickname.toLowerCase().includes(o.toLowerCase()));return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(E,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Server Nicknames")),e.createElement("button",{onClick:u,style:t.closeButton},e.createElement(C,null))),e.createElement("div",{style:t.toolbar},e.createElement("input",{type:"text",value:o,onChange:n=>k(n.target.value),placeholder:"Search members...",style:t.searchInput})),e.createElement("div",{style:t.content},g?e.createElement("div",{style:t.loading},"Loading nicknames..."):f.length===0?e.createElement("div",{style:t.empty},o?"No members match your search":"No members found"):e.createElement("div",{style:t.nicknamesList},f.map((n,a)=>e.createElement("div",{key:a,style:t.nicknameCard},e.createElement("div",{style:t.userInfo},e.createElement("div",{style:t.username},n.username),n.nickname&&e.createElement("div",{style:t.currentNickname},"Current nickname: ",e.createElement("span",{style:t.nicknameValue},n.nickname))),e.createElement("div",{style:t.actions},e.createElement("button",{onClick:()=>{const i=prompt("Enter new nickname:",n.nickname||"");i!==null&&i.trim()&&b(n.user_id,i.trim())},style:t.editButton},"Edit"),n.nickname&&e.createElement("button",{onClick:()=>h(n.user_id),style:t.clearButton},"Clear"))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33"},searchInput:{width:"100%",padding:"10px 12px",backgroundColor:"#2c2f33",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},nicknamesList:{display:"flex",flexDirection:"column",gap:"10px"},nicknameCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},userInfo:{flex:1},username:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},currentNickname:{fontSize:"13px",color:"#99aab5"},nicknameValue:{color:"#5865f2",fontWeight:"500"},actions:{display:"flex",gap:"8px"},editButton:{padding:"6px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500"},clearButton:{padding:"6px 12px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500"}};export{R as default};
