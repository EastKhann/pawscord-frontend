var v=Object.defineProperty;var o=(s,a)=>v(s,"name",{value:a,configurable:!0});import{r as l,j as e}from"./react-core-Djgtqrmb.js";import{u as C,a as S,j as w,w as k}from"./icons-vendor-BW7dxHkX.js";import{t as n}from"./index-B9TNnJpS.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const H=o(({fetchWithAuth:s,apiBaseUrl:a,onClose:x,serverId:g})=>{const[p,y]=l.useState([]),[u,f]=l.useState(!1),[d,h]=l.useState("");l.useEffect(()=>{c()},[]);const c=o(async()=>{f(!0);try{const i=await(await s(`${a}/servers/${g}/waitlist/`)).json();y(i.entries||[]),h(i.referral_code||"")}catch{n.error("Failed to load waitlist")}finally{f(!1)}},"fetchWaitlist"),j=o(async r=>{try{await s(`${a}/waitlist/${r}/approve/`,{method:"POST"}),n.success("Waitlist entry approved"),c()}catch{n.error("Failed to approve entry")}},"approveEntry"),m=o(async r=>{try{await s(`${a}/waitlist/${r}/reject/`,{method:"POST"}),n.success("Waitlist entry rejected"),c()}catch{n.error("Failed to reject entry")}},"rejectEntry"),b=o(()=>{navigator.clipboard.writeText(d),n.success("Referral code copied to clipboard")},"copyReferralCode");return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(C,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Server Waitlist"})]}),e.jsx("button",{onClick:x,style:t.closeButton,children:e.jsx(S,{})})]}),d&&e.jsxs("div",{style:t.referralSection,children:[e.jsx("div",{style:t.referralLabel,children:"Your Referral Code"}),e.jsxs("div",{style:t.referralCode,children:[e.jsx("code",{children:d}),e.jsx("button",{onClick:b,style:t.copyButton,children:e.jsx(w,{})})]}),e.jsx("div",{style:t.referralHint,children:"Share this code with others to move up in the waitlist"})]}),e.jsx("div",{style:t.content,children:u?e.jsx("div",{style:t.loading,children:"Loading waitlist..."}):p.length===0?e.jsx("div",{style:t.empty,children:"No waitlist entries"}):e.jsx("div",{style:t.entriesList,children:p.map((r,i)=>e.jsxs("div",{style:t.entryCard,children:[e.jsxs("div",{style:t.entryInfo,children:[e.jsxs("div",{style:t.entryHeader,children:[e.jsx("span",{style:t.entryPosition,children:r.position}),e.jsx("span",{style:t.entryEmail,children:r.email})]}),e.jsxs("div",{style:t.entryMeta,children:[e.jsxs("span",{children:["Joined: ",new Date(r.created_at).toLocaleDateString()]}),r.referrals_count>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:" â€¢ "}),e.jsxs("span",{style:t.referralsCount,children:[r.referrals_count," referral",r.referrals_count!==1?"s":""]})]})]}),r.status==="approved"&&e.jsxs("div",{style:t.approvedBadge,children:[e.jsx(k,{})," Approved"]}),r.status==="rejected"&&e.jsx("div",{style:t.rejectedBadge,children:"Rejected"})]}),r.status==="pending"&&e.jsxs("div",{style:t.entryActions,children:[e.jsx("button",{onClick:o(()=>j(r.id),"onClick"),style:t.approveButton,children:"Approve"}),e.jsx("button",{onClick:o(()=>m(r.id),"onClick"),style:t.rejectButton,children:"Reject"})]})]},i))})})]})})},"WaitlistPanel"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},referralSection:{padding:"20px",borderBottom:"1px solid #2c2f33",backgroundColor:"#2c2f33"},referralLabel:{fontSize:"13px",color:"#dcddde",marginBottom:"8px"},referralCode:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},copyButton:{padding:"8px 12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},referralHint:{fontSize:"12px",color:"#99aab5",fontStyle:"italic"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},entriesList:{display:"flex",flexDirection:"column",gap:"12px"},entryCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},entryInfo:{flex:1},entryHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},entryPosition:{fontSize:"16px",fontWeight:"700",color:"#5865f2"},entryEmail:{fontSize:"14px",color:"#ffffff"},entryMeta:{fontSize:"12px",color:"#99aab5",marginBottom:"8px"},referralsCount:{color:"#43b581",fontWeight:"600"},approvedBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",backgroundColor:"#43b581",borderRadius:"4px",fontSize:"12px",color:"#ffffff",fontWeight:"600"},rejectedBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",backgroundColor:"#f04747",borderRadius:"4px",fontSize:"12px",color:"#ffffff",fontWeight:"600"},entryActions:{display:"flex",gap:"8px"},approveButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"600"},rejectButton:{padding:"8px 16px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"600"}};export{H as default};
