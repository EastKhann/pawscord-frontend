import{r as n,cA as m,l as v,aT as S,Y as C,bR as z,V as k}from"./react-core-B6hadH-M.js";import{t as r}from"./index-D_6pZib5.js";const L=({fetchWithAuth:l,apiBaseUrl:c,onClose:u})=>{const[s,y]=n.useState([]),[g,i]=n.useState(!1),[d,p]=n.useState(!1);n.useEffect(()=>{x()},[]);const x=async()=>{i(!0);try{const o=await(await l(`${c}/gdpr/exports/`)).json();y(o.exports||[])}catch{r.error("Failed to load exports")}finally{i(!1)}},R=async()=>{p(!0);try{await l(`${c}/gdpr/request-export/`,{method:"POST"}),r.success("Export requested. You will be notified when it's ready (usually within 24 hours)"),x()}catch{r.error("Failed to request export")}finally{p(!1)}},E=async t=>{try{const h=await(await l(`${c}/gdpr/exports/${t}/download/`)).blob(),f=window.URL.createObjectURL(h),a=document.createElement("a");a.href=f,a.download=`pawscord_data_export_${t}.zip`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(f),document.body.removeChild(a),r.success("Export downloaded")}catch{r.error("Failed to download export")}},b=t=>{switch(t){case"completed":return React.createElement(k,{style:{color:"#43b581"}});case"failed":return React.createElement(z,{style:{color:"#f04747"}});default:return React.createElement(C,{style:{color:"#faa61a"}})}},w=t=>{switch(t){case"pending":return"Processing...";case"completed":return"Ready to Download";case"failed":return"Failed";default:return t}};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(m,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"GDPR Data Export")),React.createElement("button",{onClick:u,style:e.closeButton},React.createElement(v,null))),React.createElement("div",{style:e.info},React.createElement("p",{style:e.infoText},"Request a complete archive of your data. This includes messages, media, profile information, and activity logs. Exports are usually ready within 24 hours."),React.createElement("button",{onClick:R,disabled:d,style:e.requestButton},d?"Requesting...":"Request New Export")),React.createElement("div",{style:e.content},g?React.createElement("div",{style:e.loading},"Loading exports..."):s.length===0?React.createElement("div",{style:e.empty},React.createElement(m,{style:{fontSize:"48px",color:"#2c2f33",marginBottom:"16px"}}),React.createElement("div",null,"No exports yet"),React.createElement("div",{style:e.emptySubtext},"Request your first data export above")):React.createElement("div",{style:e.exportsList},s.map((t,o)=>React.createElement("div",{key:o,style:e.exportCard},React.createElement("div",{style:e.exportIcon},b(t.status)),React.createElement("div",{style:e.exportInfo},React.createElement("div",{style:e.exportStatus},w(t.status)),React.createElement("div",{style:e.exportMeta},"Requested: ",new Date(t.created_at).toLocaleString()),t.completed_at&&React.createElement("div",{style:e.exportMeta},"Completed: ",new Date(t.completed_at).toLocaleString()),t.file_size&&React.createElement("div",{style:e.exportMeta},"Size: ",(t.file_size/1024/1024).toFixed(2)," MB"),t.expires_at&&React.createElement("div",{style:e.exportMeta},"Expires: ",new Date(t.expires_at).toLocaleDateString())),t.status==="completed"&&React.createElement("button",{onClick:()=>E(t.id),style:e.downloadButton,title:"Download"},React.createElement(S,{style:{marginRight:"6px"}}),"Download")))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},info:{padding:"20px",borderBottom:"1px solid #2c2f33"},infoText:{fontSize:"14px",color:"#dcddde",lineHeight:"1.6",margin:"0 0 16px 0"},requestButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600",width:"100%"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"60px 20px",display:"flex",flexDirection:"column",alignItems:"center"},emptySubtext:{fontSize:"13px",marginTop:"8px"},exportsList:{display:"flex",flexDirection:"column",gap:"12px"},exportCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"flex-start"},exportIcon:{fontSize:"24px",minWidth:"30px",display:"flex",alignItems:"center",justifyContent:"center"},exportInfo:{flex:1},exportStatus:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"6px"},exportMeta:{fontSize:"13px",color:"#99aab5",marginTop:"4px"},downloadButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center"}};export{L as default};
