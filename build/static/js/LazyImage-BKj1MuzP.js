import{d as a,r as t}from"./react-core-GQV1VuAT.js";const z=(()=>{if(typeof window>"u")return!1;const e=document.createElement("canvas");return e.getContext&&e.getContext("2d")?e.toDataURL("image/webp").indexOf("data:image/webp")===0:!1})(),I=(e,l="medium",s=85)=>{if(!e||e.startsWith("blob:")||e.startsWith("data:")||e.includes("?"))return e;const r={small:32,medium:64,large:128,xlarge:256},i=r[l]||r.medium,c=new URLSearchParams({w:i,h:i,q:s,f:z?"webp":"auto"});return`${e}?${c.toString()}`},R=({src:e,alt:l="",size:s="medium",quality:r=85,style:i={},className:c="",onLoad:p=()=>{},showBlurPlaceholder:h=!0,...v})=>{const[d,w]=t.useState(!1),[u,E]=t.useState(!1),[m,f]=t.useState(null),[x,g]=t.useState(!1),n=t.useRef(null);t.useEffect(()=>{const o=new IntersectionObserver(L=>{L.forEach(C=>{C.isIntersecting&&(w(!0),o.disconnect())})},{rootMargin:"100px",threshold:.01});return n.current&&o.observe(n.current),()=>{o&&n.current&&o.unobserve(n.current)}},[]),t.useEffect(()=>{if(d&&e){const o=I(e,s,r);f(o)}},[d,e,s,r]);const y=()=>{E(!0),g(!1),p()},S=()=>{g(!0),m!==e&&f(e)},b='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect fill="%232b2d31" width="100" height="100"/%3E%3C/svg%3E';return a.createElement("div",{ref:n,style:{position:"relative",overflow:"hidden",...i},className:c},h&&!u&&a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#2b2d31",backgroundImage:`url("${b}")`,backgroundSize:"cover",filter:"blur(10px)",transform:"scale(1.1)",transition:"opacity 0.3s ease-in-out",opacity:u?0:1}}),a.createElement("img",{src:m||b,alt:l,style:{width:"100%",height:"100%",objectFit:"cover",transition:"opacity 0.3s ease-in-out",opacity:u?1:0},onLoad:y,onError:S,loading:"lazy",...v}),x&&a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#2b2d31",color:"#b9bbbe",fontSize:"12px"}},"‚ùå"))},$=a.memo(R);export{$ as L};
