import{r as m,ch as n}from"./react-core-B6hadH-M.js";import{g as S,h as x}from"./index-D_6pZib5.js";const B=({serverId:o,onClose:R})=>{const[i,u]=m.useState([]),[h,E]=m.useState(!1),[z,b]=m.useState(null),[a,r]=m.useState({name:"",description:"",response:"",trigger_type:"exact",enabled:!0,cooldown:0,permissions:"everyone",delete_trigger:!1,embed:!1,embed_color:"#5865f2"}),[v,f]=m.useState(!0),[p,N]=m.useState(null),s=S();m.useEffect(()=>{o&&(k(),g())},[o]);const k=async()=>{try{const e=localStorage.getItem("access_token"),t=await fetch(`${s}/commands/server/${o}/`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const c=await t.json();u(c.commands||[])}}catch(e){console.error("Error fetching commands:",e)}finally{f(!1)}},g=async()=>{try{const e=localStorage.getItem("access_token"),t=await fetch(`${s}/commands/server/${o}/stats/`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const c=await t.json();N(c)}}catch(e){console.error("Error fetching stats:",e)}},y=async()=>{if(!a.name||!a.response){n.error("âŒ Komut adÄ± ve yanÄ±t zorunludur");return}try{const e=localStorage.getItem("access_token"),t=await fetch(`${s}/commands/create/`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:o,...a})});if(t.ok){const c=await t.json();u([...i,c.command]),r({name:"",description:"",response:"",trigger_type:"exact",enabled:!0,cooldown:0,permissions:"everyone",delete_trigger:!1,embed:!1,embed_color:"#5865f2"}),E(!1),n.success("âœ… Komut oluÅŸturuldu"),g()}else n.error("âŒ Komut oluÅŸturulamadÄ±")}catch(e){console.error("Error creating command:",e),n.error("âŒ BaÄŸlantÄ± hatasÄ±")}},C=async e=>{if(await x("Bu komutu silmek istediÄŸinizden emin misiniz?"))try{const t=localStorage.getItem("access_token");(await fetch(`${s}/commands/${e}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(u(i.filter(d=>d.id!==e)),n.success("âœ… Komut silindi"),g()):n.error("âŒ Komut silinemedi")}catch(t){console.error("Error deleting command:",t),n.error("âŒ BaÄŸlantÄ± hatasÄ±")}},w=async(e,t)=>{try{const c=localStorage.getItem("access_token");(await fetch(`${s}/commands/${e}/toggle/`,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:t})})).ok&&(u(i.map(l=>l.id===e?{...l,enabled:t}:l)),n.success(`âœ… Komut ${t?"etkinleÅŸtirildi":"devre dÄ±ÅŸÄ± bÄ±rakÄ±ldÄ±"}`))}catch(c){console.error("Error toggling command:",c),n.error("âŒ Ä°ÅŸlem baÅŸarÄ±sÄ±z")}},_=async()=>{try{const e=localStorage.getItem("access_token"),t=await fetch(`${s}/commands/server/${o}/export/`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const c=await t.blob(),d=window.URL.createObjectURL(c),l=document.createElement("a");l.href=d,l.download=`commands_${o}.json`,l.click(),n.success("âœ… Komutlar dÄ±ÅŸa aktarÄ±ldÄ±")}}catch(e){console.error("Error exporting commands:",e),n.error("âŒ DÄ±ÅŸa aktarma baÅŸarÄ±sÄ±z")}},$=async e=>{const t=new FormData;t.append("file",e),t.append("server_id",o);try{const c=localStorage.getItem("access_token");(await fetch(`${s}/commands/import/`,{method:"POST",headers:{Authorization:`Bearer ${c}`},body:t})).ok?(k(),n.success("âœ… Komutlar iÃ§e aktarÄ±ldÄ±")):n.error("âŒ Ä°Ã§e aktarma baÅŸarÄ±sÄ±z")}catch(c){console.error("Error importing commands:",c),n.error("âŒ BaÄŸlantÄ± hatasÄ±")}};return v?React.createElement("div",{className:"custom-commands-overlay"},React.createElement("div",{className:"custom-commands-panel"},React.createElement("div",{className:"loading-state"},React.createElement("div",{className:"spinner"}),React.createElement("p",null,"Komutlar yÃ¼kleniyor...")))):React.createElement("div",{className:"custom-commands-overlay",onClick:R},React.createElement("div",{className:"custom-commands-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"commands-header"},React.createElement("h2",null,"âš¡ Ã–zel Komutlar"),React.createElement("button",{className:"close-btn",onClick:R},"Ã—")),React.createElement("div",{className:"commands-content"},p&&React.createElement("div",{className:"stats-overview"},React.createElement("div",{className:"stat-card"},React.createElement("span",{className:"stat-value"},p.total_commands||0),React.createElement("span",{className:"stat-label"},"Toplam Komut")),React.createElement("div",{className:"stat-card"},React.createElement("span",{className:"stat-value"},p.enabled_commands||0),React.createElement("span",{className:"stat-label"},"Aktif")),React.createElement("div",{className:"stat-card"},React.createElement("span",{className:"stat-value"},p.total_uses||0),React.createElement("span",{className:"stat-label"},"KullanÄ±m"))),React.createElement("div",{className:"action-buttons"},React.createElement("button",{className:"create-btn",onClick:()=>E(!0)},"â• Yeni Komut"),React.createElement("button",{className:"export-btn",onClick:_},"ğŸ“¤ DÄ±ÅŸa Aktar"),React.createElement("label",{className:"import-btn"},"ğŸ“¥ Ä°Ã§e Aktar",React.createElement("input",{type:"file",accept:".json",onChange:e=>e.target.files[0]&&$(e.target.files[0]),style:{display:"none"}}))),h&&React.createElement("div",{className:"command-form"},React.createElement("h3",null,"Yeni Komut OluÅŸtur"),React.createElement("div",{className:"form-grid"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Komut AdÄ± *"),React.createElement("input",{type:"text",placeholder:"!komut",value:a.name,onChange:e=>r({...a,name:e.target.value})})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"AÃ§Ä±klama"),React.createElement("input",{type:"text",placeholder:"Komut aÃ§Ä±klamasÄ±",value:a.description,onChange:e=>r({...a,description:e.target.value})})),React.createElement("div",{className:"form-group full-width"},React.createElement("label",null,"YanÄ±t *"),React.createElement("textarea",{placeholder:"Komut yanÄ±tÄ± (deÄŸiÅŸkenler: {user}, {server}, {channel})",value:a.response,onChange:e=>r({...a,response:e.target.value}),rows:3})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Tetikleme Tipi"),React.createElement("select",{value:a.trigger_type,onChange:e=>r({...a,trigger_type:e.target.value})},React.createElement("option",{value:"exact"},"Tam EÅŸleÅŸme"),React.createElement("option",{value:"contains"},"Ä°Ã§erir"),React.createElement("option",{value:"starts_with"},"Ä°le BaÅŸlar"),React.createElement("option",{value:"regex"},"Regex"))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Ä°zinler"),React.createElement("select",{value:a.permissions,onChange:e=>r({...a,permissions:e.target.value})},React.createElement("option",{value:"everyone"},"Herkes"),React.createElement("option",{value:"mods"},"ModeratÃ¶rler"),React.createElement("option",{value:"admins"},"Adminler"))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Cooldown (saniye)"),React.createElement("input",{type:"number",min:"0",max:"300",value:a.cooldown,onChange:e=>r({...a,cooldown:parseInt(e.target.value)})})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"checkbox-label"},React.createElement("input",{type:"checkbox",checked:a.delete_trigger,onChange:e=>r({...a,delete_trigger:e.target.checked})}),"Tetikleyici mesajÄ± sil")),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"checkbox-label"},React.createElement("input",{type:"checkbox",checked:a.embed,onChange:e=>r({...a,embed:e.target.checked})}),"Embed olarak gÃ¶nder")),a.embed&&React.createElement("div",{className:"form-group"},React.createElement("label",null,"Embed Rengi"),React.createElement("input",{type:"color",value:a.embed_color,onChange:e=>r({...a,embed_color:e.target.value})}))),React.createElement("div",{className:"form-actions"},React.createElement("button",{className:"cancel-btn",onClick:()=>E(!1)},"Ä°ptal"),React.createElement("button",{className:"submit-btn",onClick:y},"OluÅŸtur"))),React.createElement("div",{className:"commands-list"},i.length>0?i.map(e=>React.createElement("div",{key:e.id,className:`command-card ${e.enabled?"":"disabled"}`},React.createElement("div",{className:"command-header"},React.createElement("div",{className:"command-info"},React.createElement("h4",null,e.name),e.description&&React.createElement("p",null,e.description)),React.createElement("label",{className:"toggle-switch"},React.createElement("input",{type:"checkbox",checked:e.enabled,onChange:t=>w(e.id,t.target.checked)}),React.createElement("span",{className:"slider"}))),React.createElement("div",{className:"command-response"},React.createElement("strong",null,"YanÄ±t:")," ",e.response),React.createElement("div",{className:"command-meta"},React.createElement("span",{className:"meta-item"},"ğŸ¯ ",e.trigger_type),React.createElement("span",{className:"meta-item"},"ğŸ‘¥ ",e.permissions),e.cooldown>0&&React.createElement("span",{className:"meta-item"},"â±ï¸ ",e.cooldown,"s"),React.createElement("span",{className:"meta-item"},"ğŸ“Š ",e.use_count||0," kullanÄ±m")),React.createElement("div",{className:"command-actions"},React.createElement("button",{className:"edit-btn",onClick:()=>b(e.id)},"âœï¸"),React.createElement("button",{className:"delete-btn",onClick:()=>C(e.id)},"ğŸ—‘ï¸")))):!h&&React.createElement("div",{className:"empty-state"},React.createElement("div",{className:"empty-icon"},"âš¡"),React.createElement("h3",null,"HenÃ¼z Ã¶zel komut yok"),React.createElement("p",null,"Sunucunuz iÃ§in Ã¶zel komutlar oluÅŸturun"))))))};export{B as default};
