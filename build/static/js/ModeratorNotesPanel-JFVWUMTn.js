import{r as l,b as e}from"./react-core-9vc7GIjk.js";import{a6 as f,a as k,Z as h,m as N}from"./icons-vendor-BHKL7tCa.js";import{t as r}from"./index-BeAegwkv.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const R=({fetchWithAuth:i,apiBaseUrl:s,username:a,onClose:p})=>{const[m,g]=l.useState([]),[u,x]=l.useState(!0),[d,y]=l.useState("");l.useEffect(()=>{c()},[a]);const c=async()=>{try{x(!0);const t=await i(`${s}/api/moderation/notes/list/?username=${a}`);if(t.ok){const n=await t.json();g(n)}}catch(t){console.error("Not yükleme hatası:",t),r.error("Notlar yüklenemedi")}finally{x(!1)}},E=async()=>{if(!d.trim()){r.error("Not içeriği boş olamaz");return}try{(await i(`${s}/api/moderation/notes/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,note:d})})).ok?(r.success("Not eklendi"),y(""),c()):r.error("Not eklenemedi")}catch(t){console.error("Not ekleme hatası:",t),r.error("Bir hata oluştu")}},b=async t=>{try{(await i(`${s}/api/moderation/notes/${t}/delete/`,{method:"DELETE"})).ok&&(r.success("Not silindi"),c())}catch(n){console.error("Not silme hatası:",n),r.error("Bir hata oluştu")}};return e.createElement("div",{style:o.overlay,onClick:p},e.createElement("div",{style:o.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:o.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(f,{style:{color:"#faa61a"}}),e.createElement("h2",{style:{margin:0}},"Moderatör Notları - ",a)),e.createElement(k,{onClick:p,style:o.closeBtn})),e.createElement("div",{style:o.addNote},e.createElement("textarea",{placeholder:"Yeni not ekle...",value:d,onChange:t=>y(t.target.value),style:o.textarea,rows:3}),e.createElement("button",{onClick:E,style:o.addBtn},e.createElement(h,null)," Not Ekle")),e.createElement("div",{style:o.notesList},u?e.createElement("div",{style:o.loading},"Yükleniyor..."):m.length===0?e.createElement("div",{style:o.empty},e.createElement(f,{style:{fontSize:"48px",color:"#555"}}),e.createElement("p",null,"Henüz not yok")):m.map(t=>e.createElement("div",{key:t.id,style:o.noteItem},e.createElement("div",{style:o.noteContent},e.createElement("div",{style:o.noteMeta},e.createElement("strong",null,t.moderator_username),e.createElement("span",{style:{color:"#888",fontSize:"12px"}},new Date(t.created_at).toLocaleString("tr-TR"))),e.createElement("div",{style:o.noteText},t.note)),e.createElement("button",{onClick:()=>b(t.id),style:o.deleteBtn,title:"Sil"},e.createElement(N,null)))))))},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},addNote:{padding:"20px",borderBottom:"1px solid #333"},textarea:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"10px",resize:"vertical",fontFamily:"inherit"},addBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},notesList:{flex:1,overflowY:"auto",padding:"20px"},noteItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},noteContent:{flex:1},noteMeta:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},noteText:{color:"#dcddde",lineHeight:"1.5",whiteSpace:"pre-wrap"},deleteBtn:{backgroundColor:"transparent",border:"none",color:"#ed4245",cursor:"pointer",fontSize:"18px",padding:"10px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{R as default};
