var I=Object.defineProperty;var r=(i,d)=>I(i,"name",{value:d,configurable:!0});import{r as s,j as e}from"./react-core-Djgtqrmb.js";import{a as z,g as R,an as E}from"./icons-vendor-BMXAt4pj.js";const A=r(({onClose:i,fetchWithAuth:d,apiBaseUrl:y,activeRoomSlug:j})=>{const[p,m]=s.useState(""),[l,c]=s.useState(["",""]),[h,k]=s.useState(!1),[u,v]=s.useState("3600"),[x,b]=s.useState(!1),[f,a]=s.useState(null),C=r((t,o)=>{const n=[...l];n[t]=o,c(n)},"handleOptionChange"),S=r(()=>{l.length<10&&c([...l,""])},"addOption"),w=r(t=>{if(l.length>2){const o=l.filter((n,g)=>g!==t);c(o)}},"removeOption"),O=r(async t=>{if(t.preventDefault(),a(null),!p.trim()){a("Soru boş olamaz.");return}const o=l.filter(n=>n.trim()!=="");if(o.length<2){a("En az 2 seçenek girmelisiniz.");return}b(!0);try{const n=await d(`${y}/polls/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_slug:j,question:p,options:o,allow_multiple:h,expires_in:u?parseInt(u):null})});if(n.ok)i();else{const g=await n.json();a(g.error||"Anket oluşturulamadı.")}}catch(n){a("Bir hata oluştu: "+n.message)}finally{b(!1)}},"handleSubmit");return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:e.jsxs("div",{style:{backgroundColor:"#36393f",padding:"20px",borderRadius:"8px",width:"400px",maxWidth:"90%",color:"white",display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0},children:"Anket Oluştur"}),e.jsx("button",{onClick:i,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer"},children:e.jsx(z,{})})]}),f&&e.jsx("div",{style:{color:"#ed4245",fontSize:"14px"},children:f}),e.jsx("input",{type:"text",placeholder:"Soru ne?",value:p,onChange:r(t=>m(t.target.value),"onChange"),style:{padding:"10px",borderRadius:"4px",border:"none",backgroundColor:"#202225",color:"white"}}),e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"},children:l.map((t,o)=>e.jsxs("div",{style:{display:"flex",gap:"5px"},children:[e.jsx("input",{type:"text",placeholder:`Seçenek ${o+1}`,value:t,onChange:r(n=>C(o,n.target.value),"onChange"),style:{flex:1,padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#202225",color:"white"}}),l.length>2&&e.jsx("button",{onClick:r(()=>w(o),"onClick"),style:{background:"none",border:"none",color:"#ed4245",cursor:"pointer"},children:e.jsx(R,{})})]},o))}),l.length<10&&e.jsxs("button",{onClick:S,style:{display:"flex",alignItems:"center",gap:"5px",background:"none",border:"none",color:"#3ba55d",cursor:"pointer",alignSelf:"flex-start"},children:[e.jsx(E,{})," Seçenek Ekle"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:h,onChange:r(t=>k(t.target.checked),"onChange")}),"Birden çok seçime izin ver"]}),e.jsxs("select",{value:u,onChange:r(t=>v(t.target.value),"onChange"),style:{padding:"8px",borderRadius:"4px",backgroundColor:"#202225",color:"white",border:"none"},children:[e.jsx("option",{value:"3600",children:"1 Saat"}),e.jsx("option",{value:"86400",children:"24 Saat"}),e.jsx("option",{value:"604800",children:"1 Hafta"}),e.jsx("option",{value:"",children:"Süresiz"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{onClick:i,style:{padding:"10px 20px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:"white",cursor:"pointer"},children:"İptal"}),e.jsx("button",{onClick:O,disabled:x,style:{padding:"10px 20px",borderRadius:"4px",border:"none",backgroundColor:"#5865f2",color:"white",cursor:"pointer",opacity:x?.7:1},children:x?"Oluşturuluyor...":"Oluştur"})]})]})})},"PollCreateModal");export{A as default};
