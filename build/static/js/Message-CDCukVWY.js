const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ReactionPicker-D0NHkixC.js","./react-core-B6hadH-M.js","../css/react-core-Dj12pvTl.css","./LinkPreview-DTU41Ep9.js","./CodeBlock-CbwQlZFo.js","./index-D_6pZib5.js","../css/index-CMOBsU3t.css","./Spoiler-Fdbrpyos.js","./VoiceMessagePlayer-Dw8velQk.js","./BookmarkButton-VY9YtyFJ.js","./ReminderModal-CueKM1P_.js","./MessageThreads-HvYtF7hU.js","./GameMessage-DQjbhUto.js"])))=>i.map(i=>d[i]);
import{b2 as nt,b3 as qt,b4 as Z,b5 as U,b6 as _e,b7 as oe,b8 as ue,b9 as Vt,ba as rt,bb as Kt,bc as Re,bd as re,be as D,bf as Gt,bg as Qt,bh as V,bi as be,bj as Xt,bk as ne,bl as J,bm as Jt,r as x,bn as Yt,aX as it,bo as Ut,bp as Zt,aT as ot,f,y as Pe,z as xe,D as Be,bq as Oe,br as en,bs as je,x as $e,bt as Ne,o as He,bu as We,v as qe,aH as tn,bv as nn,aj as rn,_ as F}from"./react-core-B6hadH-M.js";import{L as on}from"./LazyImage-CEwfNo-e.js";import{useCachedImage as an}from"./imageCaching-y2Rrfb86.js";import{d as Ve,t as H,k as Ke,m as ln,h as sn}from"./index-D_6pZib5.js";import"./purify.es-HRjpPm7y.js";function Ge(e,n){const t=String(e);if(typeof n!="string")throw new TypeError("Expected character");let i=0,o=t.indexOf(n);for(;o!==-1;)i++,o=t.indexOf(n,o+n.length);return i}function cn(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function un(e,n,t){const o=nt((t||{}).ignore||[]),s=fn(n);let r=-1;for(;++r<s.length;)qt(e,"text",c);function c(l,p){let u=-1,g;for(;++u<p.length;){const k=p[u],h=g?g.children:void 0;if(o(k,h?h.indexOf(k):void 0,g))return;g=k}if(g)return a(l,p)}function a(l,p){const u=p[p.length-1],g=s[r][0],k=s[r][1];let h=0;const E=u.children.indexOf(l);let w=!1,C=[];g.lastIndex=0;let S=g.exec(l.value);for(;S;){const I=S.index,T={index:S.index,input:S.input,stack:[...p,l]};let L=k(...S,T);if(typeof L=="string"&&(L=L.length>0?{type:"text",value:L}:void 0),L===!1?g.lastIndex=I+1:(h!==I&&C.push({type:"text",value:l.value.slice(h,I)}),Array.isArray(L)?C.push(...L):L&&C.push(L),h=I+S[0].length,w=!0),!g.global)break;S=g.exec(l.value)}return w?(h<l.value.length&&C.push({type:"text",value:l.value.slice(h)}),u.children.splice(E,1,...C)):C=[l],E+C.length}}function fn(e){const n=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<t.length;){const o=t[i];n.push([pn(o[0]),dn(o[1])])}return n}function pn(e){return typeof e=="string"?new RegExp(cn(e),"g"):e}function dn(e){return typeof e=="function"?e:function(){return e}}const ke="phrasing",ye=["autolink","link","image","label"];function mn(){return{transforms:[wn],enter:{literalAutolink:gn,literalAutolinkEmail:we,literalAutolinkHttp:we,literalAutolinkWww:we},exit:{literalAutolink:yn,literalAutolinkEmail:kn,literalAutolinkHttp:bn,literalAutolinkWww:xn}}}function hn(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ke,notInConstruct:ye},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ke,notInConstruct:ye},{character:":",before:"[ps]",after:"\\/",inConstruct:ke,notInConstruct:ye}]}}function gn(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function we(e){this.config.enter.autolinkProtocol.call(this,e)}function bn(e){this.config.exit.autolinkProtocol.call(this,e)}function xn(e){this.config.exit.data.call(this,e);const n=this.stack[this.stack.length-1];Z(n.type==="link"),n.url="http://"+this.sliceSerialize(e)}function kn(e){this.config.exit.autolinkEmail.call(this,e)}function yn(e){this.exit(e)}function wn(e){un(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,vn],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,En]],{ignore:["link","linkReference"]})}function vn(e,n,t,i,o){let s="";if(!at(o)||(/^w/i.test(n)&&(t=n+t,n="",s="http://"),!Cn(t)))return!1;const r=Sn(t+i);if(!r[0])return!1;const c={type:"link",title:null,url:s+n+r[0],children:[{type:"text",value:n+r[0]}]};return r[1]?[c,{type:"text",value:r[1]}]:c}function En(e,n,t,i){return!at(i,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+t,children:[{type:"text",value:n+"@"+t}]}}function Cn(e){const n=e.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function Sn(e){const n=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!n)return[e,void 0];e=e.slice(0,n.index);let t=n[0],i=t.indexOf(")");const o=Ge(e,"(");let s=Ge(e,")");for(;i!==-1&&o>s;)e+=t.slice(0,i+1),t=t.slice(i+1),i=t.indexOf(")"),s++;return[e,t]}function at(e,n){const t=e.input.charCodeAt(e.index-1);return(e.index===0||U(t)||_e(t))&&(!n||t!==47)}lt.peek=An;function _n(){this.buffer()}function Rn(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Tn(){this.buffer()}function Ln(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function In(e){const n=this.resume(),t=this.stack[this.stack.length-1];Z(t.type==="footnoteReference"),t.identifier=oe(this.sliceSerialize(e)).toLowerCase(),t.label=n}function zn(e){this.exit(e)}function Dn(e){const n=this.resume(),t=this.stack[this.stack.length-1];Z(t.type==="footnoteDefinition"),t.identifier=oe(this.sliceSerialize(e)).toLowerCase(),t.label=n}function Fn(e){this.exit(e)}function An(){return"["}function lt(e,n,t,i){const o=t.createTracker(i);let s=o.move("[^");const r=t.enter("footnoteReference"),c=t.enter("reference");return s+=o.move(t.safe(t.associationId(e),{after:"]",before:s})),c(),r(),s+=o.move("]"),s}function Mn(){return{enter:{gfmFootnoteCallString:_n,gfmFootnoteCall:Rn,gfmFootnoteDefinitionLabelString:Tn,gfmFootnoteDefinition:Ln},exit:{gfmFootnoteCallString:In,gfmFootnoteCall:zn,gfmFootnoteDefinitionLabelString:Dn,gfmFootnoteDefinition:Fn}}}function Pn(e){let n=!1;return e&&e.firstLineBlank&&(n=!0),{handlers:{footnoteDefinition:t,footnoteReference:lt},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(i,o,s,r){const c=s.createTracker(r);let a=c.move("[^");const l=s.enter("footnoteDefinition"),p=s.enter("label");return a+=c.move(s.safe(s.associationId(i),{before:a,after:"]"})),p(),a+=c.move("]:"),i.children&&i.children.length>0&&(c.shift(4),a+=c.move((n?`
`:" ")+s.indentLines(s.containerFlow(i,c.current()),n?st:Bn))),l(),a}}function Bn(e,n,t){return n===0?e:st(e,n,t)}function st(e,n,t){return(t?"":"    ")+e}const On=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ct.peek=Wn;function jn(){return{canContainEols:["delete"],enter:{strikethrough:Nn},exit:{strikethrough:Hn}}}function $n(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:On}],handlers:{delete:ct}}}function Nn(e){this.enter({type:"delete",children:[]},e)}function Hn(e){this.exit(e)}function ct(e,n,t,i){const o=t.createTracker(i),s=t.enter("strikethrough");let r=o.move("~~");return r+=t.containerPhrasing(e,{...o.current(),before:r,after:"~"}),r+=o.move("~~"),s(),r}function Wn(){return"~"}function qn(e){return e.length}function Vn(e,n){const t=n||{},i=(t.align||[]).concat(),o=t.stringLength||qn,s=[],r=[],c=[],a=[];let l=0,p=-1;for(;++p<e.length;){const y=[],E=[];let w=-1;for(e[p].length>l&&(l=e[p].length);++w<e[p].length;){const C=Kn(e[p][w]);if(t.alignDelimiters!==!1){const S=o(C);E[w]=S,(a[w]===void 0||S>a[w])&&(a[w]=S)}y.push(C)}r[p]=y,c[p]=E}let u=-1;if(typeof i=="object"&&"length"in i)for(;++u<l;)s[u]=Qe(i[u]);else{const y=Qe(i);for(;++u<l;)s[u]=y}u=-1;const g=[],k=[];for(;++u<l;){const y=s[u];let E="",w="";y===99?(E=":",w=":"):y===108?E=":":y===114&&(w=":");let C=t.alignDelimiters===!1?1:Math.max(1,a[u]-E.length-w.length);const S=E+"-".repeat(C)+w;t.alignDelimiters!==!1&&(C=E.length+C+w.length,C>a[u]&&(a[u]=C),k[u]=C),g[u]=S}r.splice(1,0,g),c.splice(1,0,k),p=-1;const h=[];for(;++p<r.length;){const y=r[p],E=c[p];u=-1;const w=[];for(;++u<l;){const C=y[u]||"";let S="",I="";if(t.alignDelimiters!==!1){const T=a[u]-(E[u]||0),L=s[u];L===114?S=" ".repeat(T):L===99?T%2?(S=" ".repeat(T/2+.5),I=" ".repeat(T/2-.5)):(S=" ".repeat(T/2),I=S):I=" ".repeat(T)}t.delimiterStart!==!1&&!u&&w.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&C==="")&&(t.delimiterStart!==!1||u)&&w.push(" "),t.alignDelimiters!==!1&&w.push(S),w.push(C),t.alignDelimiters!==!1&&w.push(I),t.padding!==!1&&w.push(" "),(t.delimiterEnd!==!1||u!==l-1)&&w.push("|")}h.push(t.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return h.join(`
`)}function Kn(e){return e==null?"":String(e)}function Qe(e){const n=typeof e=="string"?e.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}function Gn(e,n,t,i){const o=t.enter("blockquote"),s=t.createTracker(i);s.move("> "),s.shift(2);const r=t.indentLines(t.containerFlow(e,s.current()),Qn);return o(),r}function Qn(e,n,t){return">"+(t?"":" ")+e}function Xn(e,n){return Xe(e,n.inConstruct,!0)&&!Xe(e,n.notInConstruct,!1)}function Xe(e,n,t){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return t;let i=-1;for(;++i<n.length;)if(e.includes(n[i]))return!0;return!1}function Je(e,n,t,i){let o=-1;for(;++o<t.unsafe.length;)if(t.unsafe[o].character===`
`&&Xn(t.stack,t.unsafe[o]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function Jn(e,n){const t=String(e);let i=t.indexOf(n),o=i,s=0,r=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===o?++s>r&&(r=s):s=1,o=i+n.length,i=t.indexOf(n,o);return r}function Yn(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Un(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function Zn(e,n,t,i){const o=Un(t),s=e.value||"",r=o==="`"?"GraveAccent":"Tilde";if(Yn(e,t)){const u=t.enter("codeIndented"),g=t.indentLines(s,er);return u(),g}const c=t.createTracker(i),a=o.repeat(Math.max(Jn(s,o)+1,3)),l=t.enter("codeFenced");let p=c.move(a);if(e.lang){const u=t.enter(`codeFencedLang${r}`);p+=c.move(t.safe(e.lang,{before:p,after:" ",encode:["`"],...c.current()})),u()}if(e.lang&&e.meta){const u=t.enter(`codeFencedMeta${r}`);p+=c.move(" "),p+=c.move(t.safe(e.meta,{before:p,after:`
`,encode:["`"],...c.current()})),u()}return p+=c.move(`
`),s&&(p+=c.move(s+`
`)),p+=c.move(a),l(),p}function er(e,n,t){return(t?"":"    ")+e}function Te(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function tr(e,n,t,i){const o=Te(t),s=o==='"'?"Quote":"Apostrophe",r=t.enter("definition");let c=t.enter("label");const a=t.createTracker(i);let l=a.move("[");return l+=a.move(t.safe(t.associationId(e),{before:l,after:"]",...a.current()})),l+=a.move("]: "),c(),!e.url||/[\0- \u007F]/.test(e.url)?(c=t.enter("destinationLiteral"),l+=a.move("<"),l+=a.move(t.safe(e.url,{before:l,after:">",...a.current()})),l+=a.move(">")):(c=t.enter("destinationRaw"),l+=a.move(t.safe(e.url,{before:l,after:e.title?" ":`
`,...a.current()}))),c(),e.title&&(c=t.enter(`title${s}`),l+=a.move(" "+o),l+=a.move(t.safe(e.title,{before:l,after:o,...a.current()})),l+=a.move(o),c()),r(),l}function nr(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function ie(e){return"&#x"+e.toString(16).toUpperCase()+";"}function fe(e,n,t){const i=ue(e),o=ue(n);return i===void 0?o===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}ut.peek=rr;function ut(e,n,t,i){const o=nr(t),s=t.enter("emphasis"),r=t.createTracker(i),c=r.move(o);let a=r.move(t.containerPhrasing(e,{after:o,before:c,...r.current()}));const l=a.charCodeAt(0),p=fe(i.before.charCodeAt(i.before.length-1),l,o);p.inside&&(a=ie(l)+a.slice(1));const u=a.charCodeAt(a.length-1),g=fe(i.after.charCodeAt(0),u,o);g.inside&&(a=a.slice(0,-1)+ie(u));const k=r.move(o);return s(),t.attentionEncodeSurroundingInfo={after:g.outside,before:p.outside},c+a+k}function rr(e,n,t){return t.options.emphasis||"*"}function ir(e,n){let t=!1;return Vt(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return t=!0,Kt}),!!((!e.depth||e.depth<3)&&rt(e)&&(n.options.setext||t))}function or(e,n,t,i){const o=Math.max(Math.min(6,e.depth||1),1),s=t.createTracker(i);if(ir(e,t)){const p=t.enter("headingSetext"),u=t.enter("phrasing"),g=t.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return u(),p(),g+`
`+(o===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const r="#".repeat(o),c=t.enter("headingAtx"),a=t.enter("phrasing");s.move(r+" ");let l=t.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(l)&&(l=ie(l.charCodeAt(0))+l.slice(1)),l=l?r+" "+l:r,t.options.closeAtx&&(l+=" "+r),a(),c(),l}ft.peek=ar;function ft(e){return e.value||""}function ar(){return"<"}pt.peek=lr;function pt(e,n,t,i){const o=Te(t),s=o==='"'?"Quote":"Apostrophe",r=t.enter("image");let c=t.enter("label");const a=t.createTracker(i);let l=a.move("![");return l+=a.move(t.safe(e.alt,{before:l,after:"]",...a.current()})),l+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=t.enter("destinationLiteral"),l+=a.move("<"),l+=a.move(t.safe(e.url,{before:l,after:">",...a.current()})),l+=a.move(">")):(c=t.enter("destinationRaw"),l+=a.move(t.safe(e.url,{before:l,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=t.enter(`title${s}`),l+=a.move(" "+o),l+=a.move(t.safe(e.title,{before:l,after:o,...a.current()})),l+=a.move(o),c()),l+=a.move(")"),r(),l}function lr(){return"!"}dt.peek=sr;function dt(e,n,t,i){const o=e.referenceType,s=t.enter("imageReference");let r=t.enter("label");const c=t.createTracker(i);let a=c.move("![");const l=t.safe(e.alt,{before:a,after:"]",...c.current()});a+=c.move(l+"]["),r();const p=t.stack;t.stack=[],r=t.enter("reference");const u=t.safe(t.associationId(e),{before:a,after:"]",...c.current()});return r(),t.stack=p,s(),o==="full"||!l||l!==u?a+=c.move(u+"]"):o==="shortcut"?a=a.slice(0,-1):a+=c.move("]"),a}function sr(){return"!"}mt.peek=cr;function mt(e,n,t){let i=e.value||"",o="`",s=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(i);)o+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<t.unsafe.length;){const r=t.unsafe[s],c=t.compilePattern(r);let a;if(r.atBreak)for(;a=c.exec(i);){let l=a.index;i.charCodeAt(l)===10&&i.charCodeAt(l-1)===13&&l--,i=i.slice(0,l)+" "+i.slice(a.index+1)}}return o+i+o}function cr(){return"`"}function ht(e,n){const t=rt(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(t===e.url||"mailto:"+t===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}gt.peek=ur;function gt(e,n,t,i){const o=Te(t),s=o==='"'?"Quote":"Apostrophe",r=t.createTracker(i);let c,a;if(ht(e,t)){const p=t.stack;t.stack=[],c=t.enter("autolink");let u=r.move("<");return u+=r.move(t.containerPhrasing(e,{before:u,after:">",...r.current()})),u+=r.move(">"),c(),t.stack=p,u}c=t.enter("link"),a=t.enter("label");let l=r.move("[");return l+=r.move(t.containerPhrasing(e,{before:l,after:"](",...r.current()})),l+=r.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=t.enter("destinationLiteral"),l+=r.move("<"),l+=r.move(t.safe(e.url,{before:l,after:">",...r.current()})),l+=r.move(">")):(a=t.enter("destinationRaw"),l+=r.move(t.safe(e.url,{before:l,after:e.title?" ":")",...r.current()}))),a(),e.title&&(a=t.enter(`title${s}`),l+=r.move(" "+o),l+=r.move(t.safe(e.title,{before:l,after:o,...r.current()})),l+=r.move(o),a()),l+=r.move(")"),c(),l}function ur(e,n,t){return ht(e,t)?"<":"["}bt.peek=fr;function bt(e,n,t,i){const o=e.referenceType,s=t.enter("linkReference");let r=t.enter("label");const c=t.createTracker(i);let a=c.move("[");const l=t.containerPhrasing(e,{before:a,after:"]",...c.current()});a+=c.move(l+"]["),r();const p=t.stack;t.stack=[],r=t.enter("reference");const u=t.safe(t.associationId(e),{before:a,after:"]",...c.current()});return r(),t.stack=p,s(),o==="full"||!l||l!==u?a+=c.move(u+"]"):o==="shortcut"?a=a.slice(0,-1):a+=c.move("]"),a}function fr(){return"["}function Le(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function pr(e){const n=Le(e),t=e.options.bulletOther;if(!t)return n==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+t+"`) to be different");return t}function dr(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function xt(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function mr(e,n,t,i){const o=t.enter("list"),s=t.bulletCurrent;let r=e.ordered?dr(t):Le(t);const c=e.ordered?r==="."?")":".":pr(t);let a=n&&t.bulletLastUsed?r===t.bulletLastUsed:!1;if(!e.ordered){const p=e.children?e.children[0]:void 0;if((r==="*"||r==="-")&&p&&(!p.children||!p.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(a=!0),xt(t)===r&&p){let u=-1;for(;++u<e.children.length;){const g=e.children[u];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(r=c),t.bulletCurrent=r;const l=t.containerFlow(e,i);return t.bulletLastUsed=r,t.bulletCurrent=s,o(),l}function hr(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function gr(e,n,t,i){const o=hr(t);let s=t.bulletCurrent||Le(t);n&&n.type==="list"&&n.ordered&&(s=(typeof n.start=="number"&&n.start>-1?n.start:1)+(t.options.incrementListMarker===!1?0:n.children.indexOf(e))+s);let r=s.length+1;(o==="tab"||o==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(r=Math.ceil(r/4)*4);const c=t.createTracker(i);c.move(s+" ".repeat(r-s.length)),c.shift(r);const a=t.enter("listItem"),l=t.indentLines(t.containerFlow(e,c.current()),p);return a(),l;function p(u,g,k){return g?(k?"":" ".repeat(r))+u:(k?s:s+" ".repeat(r-s.length))+u}}function br(e,n,t,i){const o=t.enter("paragraph"),s=t.enter("phrasing"),r=t.containerPhrasing(e,i);return s(),o(),r}const xr=nt(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function kr(e,n,t,i){return(e.children.some(function(r){return xr(r)})?t.containerPhrasing:t.containerFlow).call(t,e,i)}function yr(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}kt.peek=wr;function kt(e,n,t,i){const o=yr(t),s=t.enter("strong"),r=t.createTracker(i),c=r.move(o+o);let a=r.move(t.containerPhrasing(e,{after:o,before:c,...r.current()}));const l=a.charCodeAt(0),p=fe(i.before.charCodeAt(i.before.length-1),l,o);p.inside&&(a=ie(l)+a.slice(1));const u=a.charCodeAt(a.length-1),g=fe(i.after.charCodeAt(0),u,o);g.inside&&(a=a.slice(0,-1)+ie(u));const k=r.move(o+o);return s(),t.attentionEncodeSurroundingInfo={after:g.outside,before:p.outside},c+a+k}function wr(e,n,t){return t.options.strong||"*"}function vr(e,n,t,i){return t.safe(e.value,i)}function Er(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function Cr(e,n,t){const i=(xt(t)+(t.options.ruleSpaces?" ":"")).repeat(Er(t));return t.options.ruleSpaces?i.slice(0,-1):i}const yt={blockquote:Gn,break:Je,code:Zn,definition:tr,emphasis:ut,hardBreak:Je,heading:or,html:ft,image:pt,imageReference:dt,inlineCode:mt,link:gt,linkReference:bt,list:mr,listItem:gr,paragraph:br,root:kr,strong:kt,text:vr,thematicBreak:Cr};function Sr(){return{enter:{table:_r,tableData:Ye,tableHeader:Ye,tableRow:Tr},exit:{codeText:Lr,table:Rr,tableData:ve,tableHeader:ve,tableRow:ve}}}function _r(e){const n=e._align;this.enter({type:"table",align:n.map(function(t){return t==="none"?null:t}),children:[]},e),this.data.inTable=!0}function Rr(e){this.exit(e),this.data.inTable=void 0}function Tr(e){this.enter({type:"tableRow",children:[]},e)}function ve(e){this.exit(e)}function Ye(e){this.enter({type:"tableCell",children:[]},e)}function Lr(e){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,Ir));const t=this.stack[this.stack.length-1];Z(t.type==="inlineCode"),t.value=n,this.exit(e)}function Ir(e,n){return n==="|"?n:e}function zr(e){const n=e||{},t=n.tableCellPadding,i=n.tablePipeAlign,o=n.stringLength,s=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:r,tableCell:a,tableRow:c}};function r(k,h,y,E){return l(p(k,y,E),k.align)}function c(k,h,y,E){const w=u(k,y,E),C=l([w]);return C.slice(0,C.indexOf(`
`))}function a(k,h,y,E){const w=y.enter("tableCell"),C=y.enter("phrasing"),S=y.containerPhrasing(k,{...E,before:s,after:s});return C(),w(),S}function l(k,h){return Vn(k,{align:h,alignDelimiters:i,padding:t,stringLength:o})}function p(k,h,y){const E=k.children;let w=-1;const C=[],S=h.enter("table");for(;++w<E.length;)C[w]=u(E[w],h,y);return S(),C}function u(k,h,y){const E=k.children;let w=-1;const C=[],S=h.enter("tableRow");for(;++w<E.length;)C[w]=a(E[w],k,h,y);return S(),C}function g(k,h,y){let E=yt.inlineCode(k,h,y);return y.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function Dr(){return{exit:{taskListCheckValueChecked:Ue,taskListCheckValueUnchecked:Ue,paragraph:Ar}}}function Fr(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Mr}}}function Ue(e){const n=this.stack[this.stack.length-2];Z(n.type==="listItem"),n.checked=e.type==="taskListCheckValueChecked"}function Ar(e){const n=this.stack[this.stack.length-2];if(n&&n.type==="listItem"&&typeof n.checked=="boolean"){const t=this.stack[this.stack.length-1];Z(t.type==="paragraph");const i=t.children[0];if(i&&i.type==="text"){const o=n.children;let s=-1,r;for(;++s<o.length;){const c=o[s];if(c.type==="paragraph"){r=c;break}}r===t&&(i.value=i.value.slice(1),i.value.length===0?t.children.shift():t.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,t.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function Mr(e,n,t,i){const o=e.children[0],s=typeof e.checked=="boolean"&&o&&o.type==="paragraph",r="["+(e.checked?"x":" ")+"] ",c=t.createTracker(i);s&&c.move(r);let a=yt.listItem(e,n,t,{...i,...c.current()});return s&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,l)),a;function l(p){return p+r}}function Pr(){return[mn(),Mn(),jn(),Sr(),Dr()]}function Br(e){return{extensions:[hn(),Pn(e),$n(),zr(e),Fr()]}}const Or={tokenize:qr,partial:!0},wt={tokenize:Vr,partial:!0},vt={tokenize:Kr,partial:!0},Et={tokenize:Gr,partial:!0},jr={tokenize:Qr,partial:!0},Ct={name:"wwwAutolink",tokenize:Hr,previous:_t},St={name:"protocolAutolink",tokenize:Wr,previous:Rt},W={name:"emailAutolink",tokenize:Nr,previous:Tt},j={};function $r(){return{text:j}}let Q=48;for(;Q<123;)j[Q]=W,Q++,Q===58?Q=65:Q===91&&(Q=97);j[43]=W;j[45]=W;j[46]=W;j[95]=W;j[72]=[W,St];j[104]=[W,St];j[87]=[W,Ct];j[119]=[W,Ct];function Nr(e,n,t){const i=this;let o,s;return r;function r(u){return!Se(u)||!Tt.call(i,i.previous)||Ie(i.events)?t(u):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),c(u))}function c(u){return Se(u)?(e.consume(u),c):u===64?(e.consume(u),a):t(u)}function a(u){return u===46?e.check(jr,p,l)(u):u===45||u===95||Re(u)?(s=!0,e.consume(u),a):p(u)}function l(u){return e.consume(u),o=!0,a}function p(u){return s&&o&&re(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),n(u)):t(u)}}function Hr(e,n,t){const i=this;return o;function o(r){return r!==87&&r!==119||!_t.call(i,i.previous)||Ie(i.events)?t(r):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Or,e.attempt(wt,e.attempt(vt,s),t),t)(r))}function s(r){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),n(r)}}function Wr(e,n,t){const i=this;let o="",s=!1;return r;function r(u){return(u===72||u===104)&&Rt.call(i,i.previous)&&!Ie(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(u),e.consume(u),c):t(u)}function c(u){if(re(u)&&o.length<5)return o+=String.fromCodePoint(u),e.consume(u),c;if(u===58){const g=o.toLowerCase();if(g==="http"||g==="https")return e.consume(u),a}return t(u)}function a(u){return u===47?(e.consume(u),s?l:(s=!0,a)):t(u)}function l(u){return u===null||Gt(u)||D(u)||U(u)||_e(u)?t(u):e.attempt(wt,e.attempt(vt,p),t)(u)}function p(u){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),n(u)}}function qr(e,n,t){let i=0;return o;function o(r){return(r===87||r===119)&&i<3?(i++,e.consume(r),o):r===46&&i===3?(e.consume(r),s):t(r)}function s(r){return r===null?t(r):n(r)}}function Vr(e,n,t){let i,o,s;return r;function r(l){return l===46||l===95?e.check(Et,a,c)(l):l===null||D(l)||U(l)||l!==45&&_e(l)?a(l):(s=!0,e.consume(l),r)}function c(l){return l===95?i=!0:(o=i,i=void 0),e.consume(l),r}function a(l){return o||i||!s?t(l):n(l)}}function Kr(e,n){let t=0,i=0;return o;function o(r){return r===40?(t++,e.consume(r),o):r===41&&i<t?s(r):r===33||r===34||r===38||r===39||r===41||r===42||r===44||r===46||r===58||r===59||r===60||r===63||r===93||r===95||r===126?e.check(Et,n,s)(r):r===null||D(r)||U(r)?n(r):(e.consume(r),o)}function s(r){return r===41&&i++,e.consume(r),o}}function Gr(e,n,t){return i;function i(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(e.consume(c),i):c===38?(e.consume(c),s):c===93?(e.consume(c),o):c===60||c===null||D(c)||U(c)?n(c):t(c)}function o(c){return c===null||c===40||c===91||D(c)||U(c)?n(c):i(c)}function s(c){return re(c)?r(c):t(c)}function r(c){return c===59?(e.consume(c),i):re(c)?(e.consume(c),r):t(c)}}function Qr(e,n,t){return i;function i(s){return e.consume(s),o}function o(s){return Re(s)?t(s):n(s)}}function _t(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||D(e)}function Rt(e){return!re(e)}function Tt(e){return!(e===47||Se(e))}function Se(e){return e===43||e===45||e===46||e===95||Re(e)}function Ie(e){let n=e.length,t=!1;for(;n--;){const i=e[n][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){t=!0;break}if(i._gfmAutolinkLiteralWalkedInto){t=!1;break}}return e.length>0&&!t&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const Xr={tokenize:ri,partial:!0};function Jr(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:ei,continuation:{tokenize:ti},exit:ni}},text:{91:{name:"gfmFootnoteCall",tokenize:Zr},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Yr,resolveTo:Ur}}}}function Yr(e,n,t){const i=this;let o=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r;for(;o--;){const a=i.events[o][1];if(a.type==="labelImage"){r=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return c;function c(a){if(!r||!r._balanced)return t(a);const l=oe(i.sliceSerialize({start:r.end,end:i.now()}));return l.codePointAt(0)!==94||!s.includes(l.slice(1))?t(a):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(a),e.exit("gfmFootnoteCallLabelMarker"),n(a))}}function Ur(e,n){let t=e.length;for(;t--;)if(e[t][1].type==="labelImage"&&e[t][0]==="enter"){e[t][1];break}e[t+1][1].type="data",e[t+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[t+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[t+3][1].end),end:Object.assign({},e[t+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},r={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},c=[e[t+1],e[t+2],["enter",i,n],e[t+3],e[t+4],["enter",o,n],["exit",o,n],["enter",s,n],["enter",r,n],["exit",r,n],["exit",s,n],e[e.length-2],e[e.length-1],["exit",i,n]];return e.splice(t,e.length-t+1,...c),e}function Zr(e,n,t){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,r;return c;function c(u){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),a}function a(u){return u!==94?t(u):(e.enter("gfmFootnoteCallMarker"),e.consume(u),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(u){if(s>999||u===93&&!r||u===null||u===91||D(u))return t(u);if(u===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return o.includes(oe(i.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),n):t(u)}return D(u)||(r=!0),s++,e.consume(u),u===92?p:l}function p(u){return u===91||u===92||u===93?(e.consume(u),s++,l):l(u)}}function ei(e,n,t){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,r=0,c;return a;function a(h){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionLabelMarker"),l}function l(h){return h===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",p):t(h)}function p(h){if(r>999||h===93&&!c||h===null||h===91||D(h))return t(h);if(h===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return s=oe(i.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return D(h)||(c=!0),r++,e.consume(h),h===92?u:p}function u(h){return h===91||h===92||h===93?(e.consume(h),r++,p):p(h)}function g(h){return h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),o.includes(s)||o.push(s),V(e,k,"gfmFootnoteDefinitionWhitespace")):t(h)}function k(h){return n(h)}}function ti(e,n,t){return e.check(Qt,n,e.attempt(Xr,n,t))}function ni(e){e.exit("gfmFootnoteDefinition")}function ri(e,n,t){const i=this;return V(e,o,"gfmFootnoteDefinitionIndent",5);function o(s){const r=i.events[i.events.length-1];return r&&r[1].type==="gfmFootnoteDefinitionIndent"&&r[2].sliceSerialize(r[1],!0).length===4?n(s):t(s)}}function ii(e){let t=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:o};return t==null&&(t=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function o(r,c){let a=-1;for(;++a<r.length;)if(r[a][0]==="enter"&&r[a][1].type==="strikethroughSequenceTemporary"&&r[a][1]._close){let l=a;for(;l--;)if(r[l][0]==="exit"&&r[l][1].type==="strikethroughSequenceTemporary"&&r[l][1]._open&&r[a][1].end.offset-r[a][1].start.offset===r[l][1].end.offset-r[l][1].start.offset){r[a][1].type="strikethroughSequence",r[l][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},r[l][1].start),end:Object.assign({},r[a][1].end)},u={type:"strikethroughText",start:Object.assign({},r[l][1].end),end:Object.assign({},r[a][1].start)},g=[["enter",p,c],["enter",r[l][1],c],["exit",r[l][1],c],["enter",u,c]],k=c.parser.constructs.insideSpan.null;k&&be(g,g.length,0,Xt(k,r.slice(l+1,a),c)),be(g,g.length,0,[["exit",u,c],["enter",r[a][1],c],["exit",r[a][1],c],["exit",p,c]]),be(r,l-1,a-l+3,g),a=l+g.length-2;break}}for(a=-1;++a<r.length;)r[a][1].type==="strikethroughSequenceTemporary"&&(r[a][1].type="data");return r}function s(r,c,a){const l=this.previous,p=this.events;let u=0;return g;function g(h){return l===126&&p[p.length-1][1].type!=="characterEscape"?a(h):(r.enter("strikethroughSequenceTemporary"),k(h))}function k(h){const y=ue(l);if(h===126)return u>1?a(h):(r.consume(h),u++,k);if(u<2&&!t)return a(h);const E=r.exit("strikethroughSequenceTemporary"),w=ue(h);return E._open=!w||w===2&&!!y,E._close=!y||y===2&&!!w,c(h)}}}class oi{constructor(){this.map=[]}add(n,t,i){ai(this,n,t,i)}consume(n){if(this.map.sort(function(s,r){return s[0]-r[0]}),this.map.length===0)return;let t=this.map.length;const i=[];for(;t>0;)t-=1,i.push(n.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),n.length=this.map[t][0];i.push(n.slice()),n.length=0;let o=i.pop();for(;o;){for(const s of o)n.push(s);o=i.pop()}this.map.length=0}}function ai(e,n,t,i){let o=0;if(!(t===0&&i.length===0)){for(;o<e.map.length;){if(e.map[o][0]===n){e.map[o][1]+=t,e.map[o][2].push(...i);return}o+=1}e.map.push([n,t,i])}}function li(e,n){let t=!1;const i=[];for(;n<e.length;){const o=e[n];if(t){if(o[0]==="enter")o[1].type==="tableContent"&&i.push(e[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[n-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(t=!0);n+=1}return i}function si(){return{flow:{null:{name:"table",tokenize:ci,resolveAll:ui}}}}function ci(e,n,t){const i=this;let o=0,s=0,r;return c;function c(d){let O=i.events.length-1;for(;O>-1;){const X=i.events[O][1].type;if(X==="lineEnding"||X==="linePrefix")O--;else break}const ee=O>-1?i.events[O][1].type:null,ae=ee==="tableHead"||ee==="tableRow"?L:a;return ae===L&&i.parser.lazy[i.now().line]?t(d):ae(d)}function a(d){return e.enter("tableHead"),e.enter("tableRow"),l(d)}function l(d){return d===124||(r=!0,s+=1),p(d)}function p(d){return d===null?t(d):ne(d)?s>1?(s=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),k):t(d):J(d)?V(e,p,"whitespace")(d):(s+=1,r&&(r=!1,o+=1),d===124?(e.enter("tableCellDivider"),e.consume(d),e.exit("tableCellDivider"),r=!0,p):(e.enter("data"),u(d)))}function u(d){return d===null||d===124||D(d)?(e.exit("data"),p(d)):(e.consume(d),d===92?g:u)}function g(d){return d===92||d===124?(e.consume(d),u):u(d)}function k(d){return i.interrupt=!1,i.parser.lazy[i.now().line]?t(d):(e.enter("tableDelimiterRow"),r=!1,J(d)?V(e,h,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):h(d))}function h(d){return d===45||d===58?E(d):d===124?(r=!0,e.enter("tableCellDivider"),e.consume(d),e.exit("tableCellDivider"),y):T(d)}function y(d){return J(d)?V(e,E,"whitespace")(d):E(d)}function E(d){return d===58?(s+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(d),e.exit("tableDelimiterMarker"),w):d===45?(s+=1,w(d)):d===null||ne(d)?I(d):T(d)}function w(d){return d===45?(e.enter("tableDelimiterFiller"),C(d)):T(d)}function C(d){return d===45?(e.consume(d),C):d===58?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(d),e.exit("tableDelimiterMarker"),S):(e.exit("tableDelimiterFiller"),S(d))}function S(d){return J(d)?V(e,I,"whitespace")(d):I(d)}function I(d){return d===124?h(d):d===null||ne(d)?!r||o!==s?T(d):(e.exit("tableDelimiterRow"),e.exit("tableHead"),n(d)):T(d)}function T(d){return t(d)}function L(d){return e.enter("tableRow"),z(d)}function z(d){return d===124?(e.enter("tableCellDivider"),e.consume(d),e.exit("tableCellDivider"),z):d===null||ne(d)?(e.exit("tableRow"),n(d)):J(d)?V(e,z,"whitespace")(d):(e.enter("data"),A(d))}function A(d){return d===null||d===124||D(d)?(e.exit("data"),z(d)):(e.consume(d),d===92?B:A)}function B(d){return d===92||d===124?(e.consume(d),A):A(d)}}function ui(e,n){let t=-1,i=!0,o=0,s=[0,0,0,0],r=[0,0,0,0],c=!1,a=0,l,p,u;const g=new oi;for(;++t<e.length;){const k=e[t],h=k[1];k[0]==="enter"?h.type==="tableHead"?(c=!1,a!==0&&(Ze(g,n,a,l,p),p=void 0,a=0),l={type:"table",start:Object.assign({},h.start),end:Object.assign({},h.end)},g.add(t,0,[["enter",l,n]])):h.type==="tableRow"||h.type==="tableDelimiterRow"?(i=!0,u=void 0,s=[0,0,0,0],r=[0,t+1,0,0],c&&(c=!1,p={type:"tableBody",start:Object.assign({},h.start),end:Object.assign({},h.end)},g.add(t,0,[["enter",p,n]])),o=h.type==="tableDelimiterRow"?2:p?3:1):o&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")?(i=!1,r[2]===0&&(s[1]!==0&&(r[0]=r[1],u=ce(g,n,s,o,void 0,u),s=[0,0,0,0]),r[2]=t)):h.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(r[0]=r[1],u=ce(g,n,s,o,void 0,u)),s=r,r=[s[1],t,0,0])):h.type==="tableHead"?(c=!0,a=t):h.type==="tableRow"||h.type==="tableDelimiterRow"?(a=t,s[1]!==0?(r[0]=r[1],u=ce(g,n,s,o,t,u)):r[1]!==0&&(u=ce(g,n,r,o,t,u)),o=0):o&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")&&(r[3]=t)}for(a!==0&&Ze(g,n,a,l,p),g.consume(n.events),t=-1;++t<n.events.length;){const k=n.events[t];k[0]==="enter"&&k[1].type==="table"&&(k[1]._align=li(n.events,t))}return e}function ce(e,n,t,i,o,s){const r=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",c="tableContent";t[0]!==0&&(s.end=Object.assign({},Y(n.events,t[0])),e.add(t[0],0,[["exit",s,n]]));const a=Y(n.events,t[1]);if(s={type:r,start:Object.assign({},a),end:Object.assign({},a)},e.add(t[1],0,[["enter",s,n]]),t[2]!==0){const l=Y(n.events,t[2]),p=Y(n.events,t[3]),u={type:c,start:Object.assign({},l),end:Object.assign({},p)};if(e.add(t[2],0,[["enter",u,n]]),i!==2){const g=n.events[t[2]],k=n.events[t[3]];if(g[1].end=Object.assign({},k[1].end),g[1].type="chunkText",g[1].contentType="text",t[3]>t[2]+1){const h=t[2]+1,y=t[3]-t[2]-1;e.add(h,y,[])}}e.add(t[3]+1,0,[["exit",u,n]])}return o!==void 0&&(s.end=Object.assign({},Y(n.events,o)),e.add(o,0,[["exit",s,n]]),s=void 0),s}function Ze(e,n,t,i,o){const s=[],r=Y(n.events,t);o&&(o.end=Object.assign({},r),s.push(["exit",o,n])),i.end=Object.assign({},r),s.push(["exit",i,n]),e.add(t+1,0,s)}function Y(e,n){const t=e[n],i=t[0]==="enter"?"start":"end";return t[1][i]}const fi={name:"tasklistCheck",tokenize:di};function pi(){return{text:{91:fi}}}function di(e,n,t){const i=this;return o;function o(a){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?t(a):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(a),e.exit("taskListCheckMarker"),s)}function s(a){return D(a)?(e.enter("taskListCheckValueUnchecked"),e.consume(a),e.exit("taskListCheckValueUnchecked"),r):a===88||a===120?(e.enter("taskListCheckValueChecked"),e.consume(a),e.exit("taskListCheckValueChecked"),r):t(a)}function r(a){return a===93?(e.enter("taskListCheckMarker"),e.consume(a),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),c):t(a)}function c(a){return ne(a)?n(a):J(a)?e.check({tokenize:mi},n,t)(a):t(a)}}function mi(e,n,t){return V(e,i,"whitespace");function i(o){return o===null?t(o):n(o)}}function hi(e){return Jt([$r(),Jr(),ii(e),si(),pi()])}const gi={};function bi(e){const n=this,t=e||gi,i=n.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),r=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push(hi(t)),s.push(Pr()),r.push(Br(t))}const Lt={js:"JavaScript",jsx:"JavaScript",ts:"TypeScript",tsx:"TypeScript",py:"Python",rb:"Ruby",go:"Go",rs:"Rust",java:"Java",c:"C",cpp:"C++",cs:"C#",swift:"Swift",kt:"Kotlin",php:"PHP",sh:"Shell",bash:"Shell",bat:"Batch",cmd:"Batch",ps1:"PowerShell",psm1:"PowerShell",html:"HTML",htm:"HTML",css:"CSS",scss:"SCSS",less:"LESS",json:"JSON",xml:"XML",yaml:"YAML",yml:"YAML",toml:"TOML",md:"Markdown",txt:"Text",log:"Log",ini:"INI",cfg:"Config",env:"Environment",sql:"SQL",graphql:"GraphQL",dockerfile:"Dockerfile",makefile:"Makefile",r:"R",dart:"Dart",lua:"Lua",perl:"Perl",pl:"Perl",vue:"Vue",svelte:"Svelte"},xi=new Set(Object.keys(Lt)),ki={js:"#f7df1e",jsx:"#61dafb",ts:"#3178c6",tsx:"#3178c6",py:"#3572A5",rb:"#CC342D",go:"#00ADD8",rs:"#dea584",java:"#b07219",c:"#555555",cpp:"#f34b7d",cs:"#178600",swift:"#F05138",kt:"#A97BFF",php:"#4F5D95",sh:"#89e051",bash:"#89e051",bat:"#C1F12E",cmd:"#C1F12E",ps1:"#012456",html:"#e34c26",htm:"#e34c26",css:"#563d7c",scss:"#c6538c",json:"#292929",xml:"#0060ac",yaml:"#cb171e",yml:"#cb171e",md:"#083fa1",txt:"#b5bac1",sql:"#e38c00",log:"#999",env:"#ecd53f"},Ee=7,et=120,It=e=>{if(!e)return!1;const n=e.split(".").pop()?.toLowerCase()||"";return xi.has(n)},yi=({fileUrl:e,fileName:n,fileSize:t,onDownload:i})=>{const[o,s]=x.useState(null),[r,c]=x.useState(!0),[a,l]=x.useState(!1),[p,u]=x.useState(!1),[g,k]=x.useState(!1),h=(n||"").split(".").pop()?.toLowerCase()||"",y=Lt[h]||h.toUpperCase(),E=ki[h]||"#5865f2";x.useEffect(()=>{if(!e)return;(async()=>{c(!0);try{const A=await fetch(e);if(!A.ok)throw new Error("Failed");const B=await A.text();B&&!B.includes("\0")?s(B):l(!0)}catch{l(!0)}finally{c(!1)}})()},[e]);const w=x.useCallback(()=>{o&&(navigator.clipboard.writeText(o),k(!0),setTimeout(()=>k(!1),2e3))},[o]),C=o?o.split(`
`):[],S=C.length,I=p?C:C.slice(0,Ee),T=S>Ee,L=t?wi(t):"";return a||!r&&!o?null:React.createElement("div",{style:_.container},React.createElement("div",{style:_.header},React.createElement("div",{style:_.headerLeft},React.createElement(Yt,{style:{color:E,fontSize:16,flexShrink:0}}),React.createElement("span",{style:_.fileName},n||"file"),React.createElement("span",{style:{..._.langBadge,color:E,borderColor:`${E}40`}},y),L&&React.createElement("span",{style:_.fileSize},L)),React.createElement("div",{style:_.headerActions},React.createElement("button",{onClick:w,style:_.headerBtn,title:g?"Kopyalandı!":"Kodu Kopyala"},g?React.createElement(it,{style:{color:"#57F287"}}):React.createElement(Ut,null)),T&&React.createElement("button",{onClick:()=>u(!p),style:_.headerBtn,title:p?"Daralt":"Tümünü Göster"},React.createElement(Zt,null)),React.createElement("a",{href:e,download:n,style:_.headerBtn,title:"İndir",onClick:z=>z.stopPropagation()},React.createElement(ot,null)))),React.createElement("div",{style:_.codeArea},r?React.createElement("div",{style:_.loadingArea},React.createElement("div",{style:_.loadingLine}),React.createElement("div",{style:{..._.loadingLine,width:"70%"}}),React.createElement("div",{style:{..._.loadingLine,width:"85%"}}),React.createElement("div",{style:{..._.loadingLine,width:"60%"}})):React.createElement("table",{style:_.codeTable},React.createElement("tbody",null,I.map((z,A)=>React.createElement("tr",{key:A,style:_.codeLine},React.createElement("td",{style:_.lineNumber},A+1),React.createElement("td",{style:_.lineContent},z.length>et&&!p?z.substring(0,et)+"…":z||" ")))))),T&&!p&&React.createElement("div",{style:_.footer,onClick:()=>u(!0)},React.createElement("span",{style:_.footerText},S-Ee," satır daha...")),p&&T&&React.createElement("div",{style:_.footer,onClick:()=>u(!1)},React.createElement("span",{style:_.footerText},"Daralt")))};function wi(e){return e?e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`:""}const _={container:{marginTop:8,maxWidth:490,borderRadius:8,overflow:"hidden",border:"1px solid #2a2d33",backgroundColor:"#2b2d31",transition:"border-color 0.2s"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",backgroundColor:"#2b2d31",borderBottom:"1px solid rgba(255,255,255,0.06)",gap:8},headerLeft:{display:"flex",alignItems:"center",gap:8,flex:1,minWidth:0},fileName:{color:"#00a8fc",fontSize:14,fontWeight:500,cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},langBadge:{fontSize:10,fontWeight:600,padding:"2px 6px",borderRadius:4,border:"1px solid",textTransform:"uppercase",letterSpacing:.5,flexShrink:0},fileSize:{fontSize:11,color:"#72767d",flexShrink:0},headerActions:{display:"flex",alignItems:"center",gap:2},headerBtn:{width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center",border:"none",background:"transparent",color:"#b5bac1",cursor:"pointer",borderRadius:4,fontSize:13,transition:"all 0.15s",textDecoration:"none"},codeArea:{backgroundColor:"#1e1f22",maxHeight:400,overflowY:"auto",overflowX:"auto"},codeTable:{borderCollapse:"collapse",width:"100%",fontFamily:"'Consolas', 'Monaco', 'Courier New', monospace",fontSize:13,lineHeight:"20px"},codeLine:{height:20},lineNumber:{color:"#5c6370",textAlign:"right",paddingRight:12,paddingLeft:12,userSelect:"none",width:1,whiteSpace:"nowrap",verticalAlign:"top",borderRight:"1px solid rgba(255,255,255,0.06)"},lineContent:{color:"#dcddde",paddingLeft:12,paddingRight:12,whiteSpace:"pre",tabSize:4},loadingArea:{padding:"12px 16px",display:"flex",flexDirection:"column",gap:8},loadingLine:{height:12,backgroundColor:"rgba(255,255,255,0.06)",borderRadius:4,animation:"pulse 1.5s ease-in-out infinite"},footer:{padding:"8px 12px",backgroundColor:"#2b2d31",borderTop:"1px solid rgba(255,255,255,0.06)",cursor:"pointer",textAlign:"center",transition:"background-color 0.15s"},footerText:{fontSize:12,color:"#00a8fc",fontWeight:500}},vi=x.memo(yi),Ei=Object.freeze(Object.defineProperty({__proto__:null,default:vi,isCodeFile:It},Symbol.toStringTag,{value:"Module"})),Ci=x.lazy(()=>F(()=>import("./ReactionPicker-D0NHkixC.js"),__vite__mapDeps([0,1,2]),import.meta.url)),Si=x.lazy(()=>F(()=>import("./LinkPreview-DTU41Ep9.js"),__vite__mapDeps([3,1,2]),import.meta.url)),tt=x.lazy(()=>F(()=>import("./CodeBlock-CbwQlZFo.js"),__vite__mapDeps([4,1,2,5,6]),import.meta.url)),_i=x.lazy(()=>F(()=>import("./Spoiler-Fdbrpyos.js"),__vite__mapDeps([7,1,2]),import.meta.url)),Ce=x.lazy(()=>F(()=>import("./VoiceMessagePlayer-Dw8velQk.js"),__vite__mapDeps([8,1,2]),import.meta.url)),Ri=x.lazy(()=>F(()=>import("./TicTacToe-DKFiXN3H.js"),[],import.meta.url)),Ti=x.lazy(()=>F(()=>Promise.resolve().then(()=>Ei),void 0,import.meta.url)),Li=x.lazy(()=>F(()=>import("./BookmarkButton-VY9YtyFJ.js"),__vite__mapDeps([9,1,2]),import.meta.url).then(e=>({default:e.BookmarkButton}))),Ii=x.lazy(()=>F(()=>import("./BookmarkButton-VY9YtyFJ.js"),__vite__mapDeps([9,1,2]),import.meta.url).then(e=>({default:e.StarButton}))),zi=x.lazy(()=>F(()=>import("./BookmarkButton-VY9YtyFJ.js"),__vite__mapDeps([9,1,2]),import.meta.url).then(e=>({default:e.ReadLaterButton}))),Di=x.lazy(()=>F(()=>import("./ReminderModal-CueKM1P_.js"),__vite__mapDeps([10,1,2,5,6]),import.meta.url)),Fi=x.lazy(()=>F(()=>import("./MessageThreads-HvYtF7hU.js"),__vite__mapDeps([11,1,2,5,6]),import.meta.url));x.lazy(()=>F(()=>import("./GameMessage-DQjbhUto.js"),__vite__mapDeps([12,1,2]),import.meta.url));const Ai=x.memo(({src:e,style:n})=>{const t=x.useRef(null),[i,o]=x.useState(!1);return x.useEffect(()=>{const s=new IntersectionObserver(([r])=>{r.isIntersecting&&(o(!0),s.disconnect())},{threshold:.2});return t.current&&s.observe(t.current),()=>{t.current&&s.unobserve(t.current)}},[]),f.createElement("div",{ref:t,style:{minHeight:"200px",...n,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"}},i?f.createElement("video",{controls:!0,preload:"metadata",src:e,style:n},"Tarayıcınız video oynatmayı desteklemiyor.",f.createElement("a",{href:e,download:!0},"İndir")):f.createElement("span",{style:{color:"#aaa"}},"Video Yükleniyor..."))}),Mi=x.memo(({children:e,minHeight:n=60})=>{const t=x.useRef(null),[i,o]=x.useState(!1);return x.useEffect(()=>{const s=new IntersectionObserver(([r])=>{r.isIntersecting&&(o(!0),s.disconnect())},{threshold:.1});return t.current&&s.observe(t.current),()=>s.disconnect()},[]),f.createElement("div",{ref:t,style:{minHeight:n}},i?e:null)}),Pi=({messageId:e,messageEditHistoryUrl:n,fetchWithAuth:t})=>{const[i,o]=x.useState([]),[s,r]=x.useState(!1),c=x.useRef(null);return x.useEffect(()=>{if(!s)return;(async()=>{try{const p=await t(`${n}${e}/edit_history/`);p.ok&&o(await p.json())}catch(p){console.error(p)}})();const l=p=>{c.current&&!c.current.contains(p.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[s,e,n,t]),f.createElement("div",{style:{position:"relative",display:"inline-block",marginLeft:"5px"},ref:c},f.createElement("span",{onClick:a=>{a.stopPropagation(),r(!s)},style:{fontSize:"0.7em",color:"#72767d",cursor:"pointer",textDecoration:"underline"}},"(düzenlendi)"),s&&f.createElement("div",{style:b.historyDropdown},f.createElement("h4",{style:b.historyHeader},"Geçmiş (",i.length,")"),f.createElement("div",{style:{maxHeight:"200px",overflowY:"auto"}},i.map((a,l)=>f.createElement("div",{key:l,style:b.historyItem},f.createElement("small",null,new Date(a.edited_at).toLocaleString()),f.createElement("div",null,f.createElement("del",null,a.old_content)))))))},Bi=e=>{if(!e)return"";const n=new Date(e),t=new Date;return n.toDateString()===t.toDateString()?n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):n.toLocaleString([],{hour:"2-digit",minute:"2-digit"})},Oi=({msg:e,currentUser:n,isAdmin:t,onDelete:i,onStartEdit:o,onToggleReaction:s,onTogglePin:r,onSetReply:c,onImageClick:a,absoluteHostUrl:l,onScrollToMessage:p,onVisible:u,messageEditHistoryUrl:g,onViewProfile:k,onStartForward:h,fetchWithAuth:y,isSelectionMode:E,isSelected:w,onToggleSelection:C,allUsers:S,getDeterministicAvatar:I,onShowChart:T,onContentLoad:L})=>{if(!e||typeof e!="object"||!e.id)return console.warn("⚠️ [Message] Invalid message data:",e),null;const z=Ve(m=>m.encryptionKeys),A=Ve(m=>m.currentPermissions),[B,d]=x.useState(e.transcription||null),[O,ee]=x.useState(!1),[ae,X]=x.useState(!1),[Dt,pe]=x.useState(!1),[te,M]=x.useState(null),Ft=x.useCallback(async()=>{try{if((await y(`${l}/messages/${e.id}/quote/`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok){const v=e.content||"",R=`> ${e.username} said:
> ${v.split(`
`).join(`
> `)}

`;c({...e,quotedText:R}),H.success("Message quoted!")}else H.error("Failed to quote message")}catch(m){console.error("Quote error:",m),H.error("Failed to quote message")}},[e,l,y,c]),$=e.username===n,At=["Pawscord AI","PawPaw AI","⚡ Signal Bot"].includes(e.username),de=x.useRef(null),[ze,De]=x.useState(!1),[Mt,le]=x.useState(!1),Pt=x.useCallback(m=>{m.preventDefault(),M({x:m.clientX,y:m.clientY})},[]);x.useEffect(()=>{const m=()=>M(null);if(te)return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[te]),x.useEffect(()=>{if(!u||$||e.read_by?.includes(n))return;const m=new IntersectionObserver(([v])=>{v.isIntersecting&&(u(e.id),m.disconnect())},{threshold:.8});return de.current&&m.observe(de.current),()=>m.disconnect()},[e.id,$,e.read_by,u,n]);const K=x.useMemo(()=>{if(!e.content)return"";if(Ke(e.content)){const m=e.room?`room-${e.room}`:e.conversation?`dm-${e.conversation}`:null,v=z[m];return v?ln(e.content,v):"🔒 Bu mesaj şifreli. Okumak için anahtarı girin."}return e.content},[e.content,e.room,e.conversation,z]),Bt=Ke(e.content),Ot=x.useMemo(()=>{let m=e.avatar;return m||(m=S?.find(R=>R.username===e.username)?.avatar),m||(m=I(e.username)),m&&m.includes("ui-avatars.com")||m&&!m.startsWith("http")&&!m.startsWith("blob:")&&(m=`${l.replace(/\/$/,"")}/${m.replace(/^\//,"")}`),m},[e.avatar,e.username,S,I,l]),{url:jt}=an(Ot),Fe=m=>{if(!m)return null;if(m.startsWith("http")||m.startsWith("blob:"))return m;let v=`${l.replace(/\/$/,"")}/${m.replace(/^\//,"")}`;if(v.includes("/media/local/stream/")){const R=localStorage.getItem("access_token");R&&(v+=(v.includes("?")?"&":"?")+`token=${R}`)}return v},me=Fe(e.image_url||e.image),G=Fe(e.file_url||e.file),Ae=x.useMemo(()=>{if(!G||me)return!1;const m=(e.file_name||"").toLowerCase();return["jpg","jpeg","png","gif","webp","bmp","svg","ico"].some(R=>m.endsWith(`.${R}`))},[G,me,e.file_name]),he=me||(Ae?G:null),q=Ae?null:G,ge=x.useMemo(()=>{if(e.username==="⚡ Signal Bot"&&K){const m=K.match(/\*\*(.*?)\*\*/);if(m&&m[1])return m[1]}return null},[e.username,K]),Me=x.useMemo(()=>{if(!e.reactions)return[];const m={};return e.reactions.forEach(v=>{m[v.emoji]||(m[v.emoji]=[]),m[v.emoji].push(v.username)}),Object.entries(m||{}).map(([v,R])=>({emoji:v,users:R,count:R.length}))},[e.reactions]),$t=x.useCallback(m=>e.reactions?.some(v=>v.username===n&&v.emoji===m),[e.reactions,n]),Nt=x.useCallback(async m=>{if(e.poll)try{await y(`${l}/api/polls/${e.poll.id}/vote/`,{method:"POST",body:JSON.stringify({option_id:m})})}catch(v){console.error("Oy hatası:",v)}},[e.poll,y,l]),Ht=x.useCallback(async()=>{if(!(O||B)){ee(!0);try{const m=await y(`${l}/api/messages/${e.id}/transcribe/`,{method:"POST"});if(m.ok){const v=await m.json();v.transcription?d(v.transcription):H.error("❌ Çeviri boş döndü.")}else{const v=await m.json();H.error(`❌ Çeviri hatası: ${v.error||"Bilinmeyen hata"}`)}}catch(m){console.error("Transcription error:",m),H.error("❌ Ses metne çevrilemedi. Lütfen tekrar deneyin.")}finally{ee(!1)}}},[O,B,y,l,e.id]);return f.createElement("div",{ref:de,style:{...b.chatMessage,backgroundColor:w?"rgba(88, 101, 242, 0.3)":ze?"rgba(4, 4, 5, 0.07)":"transparent",cursor:E?"pointer":"default"},onMouseEnter:()=>De(!0),onMouseLeave:()=>{De(!1),le(!1)},onContextMenu:Pt,id:`message-${e.id}`,onClick:()=>E&&C(e.id)},f.createElement("div",{style:b.avatarContainer},f.createElement(on,{src:jt,alt:e.username,style:b.userAvatar,onClick:()=>k(e.username),placeholder:I(e.username)})),f.createElement("div",{style:b.contentWrapper},e.reply_to&&f.createElement("div",{style:b.replyContainer,onClick:()=>p(e.reply_to.id)},f.createElement("div",{style:b.replyLine}),f.createElement("span",{style:{fontWeight:"bold",marginRight:5}},"@",e.reply_to.username),f.createElement("span",{style:{opacity:.7,fontSize:"0.9em"}},e.reply_to.content?e.reply_to.content.substring(0,50)+"...":"Bir dosya")),f.createElement("div",{style:b.messageHeader},f.createElement("strong",{style:{cursor:"pointer",color:e.username==="⚡ Signal Bot"?"#5865f2":t?"#f0b232":"#fff"},onClick:()=>k(e.username)},At&&"🤖 "," ",e.username),e.is_locked&&f.createElement(Pe,{style:{marginLeft:8,color:"#f0b232",fontSize:"0.9em"},title:"Locked by moderator - Cannot be edited or deleted"}),f.createElement("span",{style:b.timestamp},Bi(e.timestamp),e.is_edited&&f.createElement(Pi,{messageId:e.id,messageEditHistoryUrl:g,fetchWithAuth:y}),e.is_pinned&&f.createElement(xe,{style:{marginLeft:5,color:"#f0b232",fontSize:"0.8em"}}))),ze&&!e.temp_id&&!E&&f.createElement("div",{style:b.messageActions},Mt&&f.createElement(Ci,{onEmojiSelect:m=>s(e.id,m),onClose:()=>le(!1)}),f.createElement("button",{onClick:()=>le(!0),style:b.actionButton,title:"Tepki"},f.createElement(Be,null)),f.createElement("button",{onClick:()=>c(e),style:b.actionButton,title:"Yanıtla"},f.createElement(Oe,null)),f.createElement("button",{onClick:Ft,style:b.actionButton,title:"Alıntıla"},f.createElement(en,null)),f.createElement("button",{onClick:()=>C(e.id),style:b.actionButton,title:"Seç"},f.createElement(it,null)),f.createElement("button",{onClick:()=>h(e),style:b.actionButton,title:"İlet"},f.createElement(je,null)),f.createElement(Li,{messageId:e.id,isBookmarked:e.is_bookmarked,fetchWithAuth:y,apiBaseUrl:l}),f.createElement(Ii,{messageId:e.id,isStarred:e.is_starred,fetchWithAuth:y,apiBaseUrl:l}),f.createElement(zi,{messageId:e.id,isReadLater:e.is_read_later,fetchWithAuth:y,apiBaseUrl:l}),f.createElement("button",{onClick:()=>X(!0),style:b.actionButton,title:"Hatırlatıcı Kur"},f.createElement($e,null)),f.createElement("button",{onClick:()=>pe(!0),style:b.actionButton,title:"Thread Başlat"},f.createElement(Ne,null)),!$&&f.createElement("button",{onClick:async()=>{const m=prompt("Rapor sebebi:");m&&(await y(`${l}/api/messages/report/`,{method:"POST",body:JSON.stringify({message_id:e.id,reason:m})}),H.success("✅ Rapor gönderildi"))},style:b.actionButton,title:"Rapor Et"},f.createElement(He,null)),$&&e.content&&f.createElement("button",{onClick:()=>o(e),style:b.actionButton,title:"Düzenle"},f.createElement(We,null)),($||t||A.can_delete_messages)&&f.createElement("button",{onClick:()=>i(e.id),style:b.actionButton,title:"Sil"},f.createElement(qe,null)),t&&e.room&&f.createElement("button",{onClick:()=>r(e.id),style:b.actionButton,title:"Sabitle"},f.createElement(xe,null))),ae&&f.createElement(Di,{messageId:e.id,messageContent:K,onClose:()=>X(!1),fetchWithAuth:y,apiBaseUrl:l}),Dt&&f.createElement(Fi,{messageId:e.id,onClose:()=>pe(!1),fetchWithAuth:y,apiBaseUrl:l}),te&&f.createElement("div",{style:{...b.contextMenu,left:`${te.x}px`,top:`${te.y}px`},onClick:m=>m.stopPropagation()},f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{le(!0),M(null)}},f.createElement(Be,null)," Tepki Ekle"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{c(e),M(null)}},f.createElement(Oe,null)," Yanıtla"),$&&e.content&&f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{o(e),M(null)}},f.createElement(We,null)," Düzenle"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{navigator.clipboard.writeText(K),H.success("✅ Mesaj kopyalandı"),M(null)}},f.createElement(tn,null)," Mesajı Kopyala"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:async()=>{await r(e.id),M(null)}},f.createElement(xe,null)," ",e.is_pinned?"Sabitlemeyi Kaldır":"Sabitle"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{h(e),M(null)}},f.createElement(je,null)," İlet"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{pe(!0),M(null)}},f.createElement(Ne,null)," Thread Başlat"),f.createElement("div",{className:"context-menu-item",style:b.contextMenuItem,onClick:()=>{X(!0),M(null)}},f.createElement($e,null)," Hatırlatıcı Kur"),f.createElement("div",{style:b.contextMenuDivider}),$&&f.createElement("div",{className:"context-menu-item danger",style:{...b.contextMenuItem,color:"#ed4245"},onClick:async()=>{await sn("Bu mesajı silmek istediğinize emin misiniz?")&&(await i(e.id),M(null))}},f.createElement(qe,null)," Sil"),!$&&f.createElement("div",{className:"context-menu-item danger",style:{...b.contextMenuItem,color:"#ed4245"},onClick:async()=>{const m=prompt("Rapor sebebi:");m&&(await y(`${l}/api/messages/report/`,{method:"POST",body:JSON.stringify({message_id:e.id,reason:m})}),H.success("✅ Rapor gönderildi"),M(null))}},f.createElement(He,null)," Rapor Et")),e.snippet_data&&e.snippet_data.type==="game_xox"?f.createElement(x.Suspense,{fallback:f.createElement("div",{style:{padding:"12px",color:"#b9bbbe",fontSize:"0.9em"}},"🎮 Oyun yükleniyor...")},f.createElement(Ri,{gameData:e.snippet_data,currentUser:n,onMove:(m,v)=>{y(`${l}/api/games/xox/move/`,{method:"POST",body:JSON.stringify({game_id:m,index:v})})}})):e.snippet_data?f.createElement("div",{style:b.snippetContainer},f.createElement("div",{style:b.snippetHeader},f.createElement("span",null,"💻 ",e.snippet_data.title||"Kod Parçası"),f.createElement("span",{style:b.langBadge},e.snippet_data.language)),f.createElement(tt,{language:e.snippet_data.language},e.snippet_data.code)):K&&f.createElement("div",{style:b.messageContent},Bt&&f.createElement("span",{style:{color:"#43b581",marginRight:5},title:"Uçtan Uca Şifreli"},f.createElement(Pe,null)),f.createElement(nn,{remarkPlugins:[bi],components:{code({node:m,inline:v,className:R,children:N,...P}){return v?f.createElement("code",{className:R,style:b.inlineCode,...P},N):f.createElement(tt,{language:R?.replace("language-",""),value:N})},p:({children:m})=>{const v=f.Children.toArray(m);return f.createElement("p",{style:{margin:0}},v.map((R,N)=>typeof R=="string"?R.split(/(\|\|.*?\|\|)/g).map((se,Wt)=>se.startsWith("||")&&se.endsWith("||")?f.createElement(_i,{key:`${N}-${Wt}`},se.slice(2,-2)):se):R))}}},K)),ge&&f.createElement("button",{onClick:()=>T(ge),style:b.chartBtn},f.createElement(rn,null)," ",ge," Grafiği"),e.link_preview_data&&f.createElement(Mi,{minHeight:80},f.createElement(Si,{data:e.link_preview_data})),e.poll&&f.createElement("div",{style:b.pollContainer},f.createElement("h4",{style:{marginTop:0,marginBottom:10}},e.poll.question),f.createElement("div",{style:{fontSize:"0.8em",color:"#b9bbbe",marginBottom:8}},e.poll.allow_multiple_votes?"Çoklu Seçim":"Tek Seçim"," • ",e.poll.total_votes||0," Oy"),e.poll.options.map(m=>{const v=m.is_voted,R=e.poll.total_votes||0,N=R>0?Math.round(m.vote_count/R*100):0;return f.createElement("div",{key:m.id,style:{position:"relative",marginBottom:6}},f.createElement("button",{onClick:()=>Nt(m.id),style:{...b.pollOption,backgroundColor:v?"#4752c4":"rgba(255,255,255,0.05)",border:v?"1px solid #5865f2":"1px solid transparent",justifyContent:"space-between",display:"flex",alignItems:"center",position:"relative",zIndex:2,width:"100%",overflow:"hidden",padding:"10px 12px"}},f.createElement("span",{style:{zIndex:3,textShadow:"0 1px 2px rgba(0,0,0,0.5)"}},m.text),f.createElement("span",{style:{zIndex:3,fontWeight:"bold"}},m.vote_count," (",N,"%)"),f.createElement("div",{style:{position:"absolute",top:0,left:0,bottom:0,width:`${N}%`,backgroundColor:v?"rgba(255,255,255,0.2)":"rgba(88, 101, 242, 0.3)",zIndex:1,transition:"width 0.3s ease"}})))}),e.poll.expires_at&&f.createElement("div",{style:{fontSize:"0.75em",color:"#72767d",marginTop:5}},"Bitiş: ",new Date(e.poll.expires_at).toLocaleString())),he&&f.createElement("img",{src:he,alt:"attachment",style:b.messageImage,onClick:()=>a(he),loading:"lazy",onLoad:L}),e.is_voice_message&&G&&f.createElement(x.Suspense,{fallback:f.createElement("div",{style:{padding:"12px",color:"#72767d",fontSize:"13px"}},"🎵 Ses yükleniyor...")},f.createElement("div",null,f.createElement(Ce,{audioUrl:G,duration:e.voice_duration||0,onDownload:()=>{const m=document.createElement("a");m.href=G,m.download=e.file_name||`voice-${Date.now()}.webm`,m.click()}}),B&&f.createElement("div",{style:b.voiceTranscription},f.createElement("div",{style:b.transcriptionIcon},"💬"),f.createElement("div",{style:b.transcriptionText},B)),!B&&!O&&f.createElement("button",{onClick:Ht,style:b.transcribeButton},"📝 Metne Çevir"),O&&f.createElement("div",{style:b.transcribingLoader},"⏳ Çevriliyor..."))),q&&!e.is_voice_message&&(()=>{const m=(e.file_name||"").split(".").pop().toLowerCase(),v=(e.file_name||"").toLowerCase();if((v.startsWith("voice_")||v.startsWith("voice-"))&&m==="webm")return f.createElement(Ce,{audioUrl:q,duration:e.voice_duration||0,onDownload:()=>{const P=document.createElement("a");P.href=q,P.download=e.file_name||`voice-${Date.now()}.webm`,P.click()}});if(["mp4","mov","mkv"].includes(m)||m==="webm"&&!v.startsWith("voice_")&&!v.startsWith("voice-"))return f.createElement(Ai,{src:q,style:b.messageVideo});if(["mp3","wav","ogg"].includes(m))return f.createElement(Ce,{audioUrl:q,duration:0,onDownload:()=>{const P=document.createElement("a");P.href=q,P.download=e.file_name||`audio-${Date.now()}.${m}`,P.click()}});if(It(e.file_name))return f.createElement(x.Suspense,{fallback:f.createElement("div",{style:b.fileAttachment,className:"file-attachment-hover"},f.createElement("div",{style:b.fileIcon},"📄"),f.createElement("div",{style:b.fileInfo},f.createElement("div",{style:b.fileName},e.file_name),f.createElement("div",{style:b.fileDetails},"Yükleniyor...")))},f.createElement(Ti,{fileUrl:q,fileName:e.file_name,fileSize:e.file_size}));const R=m.toUpperCase(),N=e.file_size?`(${(e.file_size/1024/1024).toFixed(2)} MB)`:"";return f.createElement("div",{style:b.fileAttachment,className:"file-attachment-hover"},f.createElement("div",{style:b.fileIcon},["zip","rar","7z","tar","gz"].includes(m)?"📦":["pdf"].includes(m)?"📄":["doc","docx"].includes(m)?"📝":["xls","xlsx"].includes(m)?"📊":["ppt","pptx"].includes(m)?"📽️":["txt"].includes(m)?"📃":"📎"),f.createElement("div",{style:b.fileInfo},f.createElement("div",{style:b.fileName},e.file_name||"Dosya"),f.createElement("div",{style:b.fileDetails},R," ",N)),f.createElement("a",{href:q,download:e.file_name,style:b.downloadButton,className:"download-button-hover",onClick:P=>P.stopPropagation()},f.createElement(ot,{size:18}),f.createElement("span",{style:{marginLeft:"6px"}},"İndir")))})(),f.createElement("div",{style:b.footerRow},Me.length>0&&f.createElement("div",{style:b.reactionsRow},Me.map(({emoji:m,count:v})=>f.createElement("span",{key:m,onClick:()=>s(e.id,m),style:{...b.reactionTag,border:$t(m)?"1px solid #5865f2":"1px solid transparent"}},m," ",v))),$&&!e.temp_id&&f.createElement("span",{style:b.readReceipt,title:"İletildi"},"✓"))))},b={chatMessage:{display:"flex",padding:"8px 20px",marginBottom:"2px",position:"relative",transition:"background-color 0.1s ease",width:"100%",boxSizing:"border-box",borderRadius:"0"},avatarContainer:{marginTop:"4px",marginRight:"16px",flexShrink:0},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},messageHeader:{display:"flex",alignItems:"baseline",marginBottom:"4px",gap:"8px"},timestamp:{fontSize:"0.75rem",color:"#949ba4",fontWeight:"400",lineHeight:"1.375rem",marginLeft:"4px",fontFamily:"'gg sans', 'Noto Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"},messageContent:{color:"#dcddde",fontSize:"1rem",lineHeight:"1.375rem",whiteSpace:"pre-wrap",wordBreak:"break-word",fontWeight:"400",fontFamily:"'gg sans', 'Noto Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"},contentWrapper:{flex:1,minWidth:0,maxWidth:"100%"},messageActions:{position:"absolute",top:"-10px",right:"10px",backgroundColor:"#313338",borderRadius:"8px",padding:"4px",display:"flex",gap:"4px",border:"1px solid rgba(255,255,255,0.08)",zIndex:50,boxShadow:"0 4px 10px rgba(0,0,0,0.3)"},actionButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em",padding:"6px",display:"flex",borderRadius:"4px",transition:"all 0.1s"},inlineCode:{backgroundColor:"#2b2d31",padding:"2px 4px",borderRadius:"3px",fontFamily:"'Consolas', monospace",fontSize:"0.85em",border:"1px solid rgba(255,255,255,0.05)"},messageImage:{maxWidth:"min(300px, 70%)",maxHeight:"250px",width:"auto",height:"auto",display:"block",objectFit:"cover",borderRadius:"8px",marginTop:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},messageVideo:{maxWidth:"min(400px, 80%)",maxHeight:"300px",width:"auto",height:"auto",borderRadius:"8px",marginTop:"8px",backgroundColor:"black"},fileAttachment:{display:"flex",alignItems:"center",padding:"12px 16px",backgroundColor:"#2b2d31",borderRadius:8,marginTop:8,border:"1px solid rgba(255,255,255,0.06)",maxWidth:490,transition:"all 0.2s ease",cursor:"default"},fileIcon:{fontSize:28,marginRight:12,flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40},fileInfo:{flex:1,minWidth:0,marginRight:12},fileName:{color:"#00a8fc",fontSize:14,fontWeight:500,marginBottom:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"'gg sans', 'Noto Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"},fileDetails:{color:"#72767d",fontSize:12,fontFamily:"'gg sans', 'Noto Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"},downloadButton:{display:"flex",alignItems:"center",padding:"8px 14px",backgroundColor:"transparent",color:"#b5bac1",borderRadius:4,textDecoration:"none",fontSize:20,transition:"all 0.2s ease",border:"none",cursor:"pointer",flexShrink:0},reactionsRow:{display:"flex",gap:"4px",marginTop:"6px",flexWrap:"wrap"},reactionTag:{backgroundColor:"#2b2d31",padding:"4px 8px",borderRadius:"8px",fontSize:"0.85em",cursor:"pointer",color:"#b9bbbe",border:"1px solid transparent",display:"flex",alignItems:"center",gap:"4px"},footerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"4px",minHeight:"20px"},readReceipt:{fontSize:"0.75em",color:"#b9bbbe",marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px"},replyContainer:{display:"flex",alignItems:"center",fontSize:"0.85em",color:"#b9bbbe",marginBottom:"4px",opacity:.8},replyLine:{width:"30px",borderTop:"2px solid #4f545c",borderLeft:"2px solid #4f545c",height:"10px",marginRight:"8px",borderTopLeftRadius:"6px",marginTop:"6px"},historyDropdown:{position:"absolute",top:"100%",left:0,width:"280px",backgroundColor:"#1e1f22",border:"1px solid #111214",borderRadius:"8px",padding:"12px",zIndex:100,boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},historyHeader:{margin:"0 0 10px 0",fontSize:"0.9em",color:"#fff",borderBottom:"1px solid #2f3136",paddingBottom:"8px"},historyItem:{marginBottom:"12px",fontSize:"0.85em",color:"#b9bbbe",paddingBottom:"8px",borderBottom:"1px solid #2b2d31"},langBadge:{textTransform:"uppercase",fontSize:"0.7em",fontWeight:"bold",padding:"2px 4px",borderRadius:"4px",backgroundColor:"rgba(255,255,255,0.1)",marginLeft:"8px"},chartBtn:{marginTop:"5px",backgroundColor:"rgba(240, 178, 50, 0.1)",border:"1px solid #f0b232",color:"#f0b232",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.85em",display:"inline-flex",alignItems:"center",gap:"6px"},pollContainer:{marginTop:"10px",padding:"12px",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"8px",backgroundColor:"rgba(0,0,0,0.2)"},pollOption:{display:"flex",justifyContent:"space-between",width:"100%",padding:"10px",margin:"6px 0",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",textAlign:"left",backgroundColor:"rgba(255,255,255,0.05)",transition:"background 0.2s"},contextMenu:{position:"fixed",backgroundColor:"#18191c",border:"1px solid #2b2d31",borderRadius:"6px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:1e4,minWidth:"220px",overflow:"hidden",padding:"6px 0"},contextMenuItem:{padding:"10px 14px",cursor:"pointer",color:"#b5bac1",fontSize:"0.9em",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.15s",backgroundColor:"transparent"},contextMenuDivider:{height:"1px",backgroundColor:"#2b2d31",margin:"6px 0"},voiceTranscription:{display:"flex",alignItems:"flex-start",gap:"8px",marginTop:"8px",padding:"10px 12px",backgroundColor:"rgba(114, 137, 218, 0.1)",border:"1px solid rgba(114, 137, 218, 0.3)",borderRadius:"8px",maxWidth:"400px"},transcriptionIcon:{fontSize:"16px",flexShrink:0,marginTop:"2px"},transcriptionText:{flex:1,fontSize:"13px",lineHeight:"1.5",color:"#dcddde",fontStyle:"italic"},transcribeButton:{marginTop:"8px",padding:"6px 12px",backgroundColor:"rgba(88, 101, 242, 0.15)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"6px",color:"#7289da",fontSize:"12px",cursor:"pointer",transition:"all 0.2s",display:"inline-flex",alignItems:"center",gap:"6px"},transcribingLoader:{marginTop:"8px",padding:"6px 12px",color:"#72767d",fontSize:"12px",fontStyle:"italic"}},zt=document.createElement("style");zt.innerText=`
    .message-hover-trigger:hover { background-color: rgba(255, 255, 255, 0.03) !important; }
    .action-button:hover { background-color: rgba(255, 255, 255, 0.1); color: white; }
    .poll-option:hover { background-color: rgba(255, 255, 255, 0.1) !important; }
    .context-menu-item:hover { background-color: #5865f2 !important; color: #fff !important; }
    .context-menu-item.danger:hover { background-color: #ed4245 !important; }
    
    /* 🆕 File Attachment Hover Effects */
    .file-attachment-hover:hover {
        background-color: #32353b !important;
        border-color: rgba(255,255,255,0.1) !important;
    }
    .download-button-hover:hover {
        color: #dcddde !important;
        background-color: rgba(255,255,255,0.06) !important;
        border-radius: 4px;
    }
    .download-button-hover:active {
        transform: scale(0.95);
    }
    
    /* FileCodePreview hover */
    .file-code-preview-hover:hover {
        border-color: rgba(255,255,255,0.12) !important;
    }
    .file-code-header-btn:hover {
        background-color: rgba(255,255,255,0.1) !important;
        color: #dcddde !important;
    }
    .file-code-footer:hover {
        background-color: #32353b !important;
    }
`;document.head.appendChild(zt);const ji=(e,n)=>{const t=["msg","currentUser","isAdmin","isSelectionMode","isSelected"];for(const i of t)if(e[i]!==n[i])return!1;return!0},Vi=x.memo(Oi,ji);export{Vi as default};
