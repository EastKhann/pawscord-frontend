var S=Object.defineProperty;var a=(s,r)=>S(s,"name",{value:r,configurable:!0});import{a as z,r as i,j as t}from"./react-core-Djgtqrmb.js";const F=a(({stream:s,isMirrored:r,objectFit:l="cover",muted:u=!1})=>{const n=i.useRef(null);return i.useEffect(()=>(n.current&&s&&(n.current.srcObject=s,n.current.onloadedmetadata=()=>{n.current.play().catch(x=>{})}),()=>{n.current&&(n.current.srcObject=null)}),[s]),t.jsx("video",{ref:n,style:{...o.videoElement,transform:r?"scaleX(-1)":"none",objectFit:l},autoPlay:!0,playsInline:!0,muted:!0})},"VideoPlayer"),R=a(({id:s,user:r,track:l,streamType:u,avatarUrl:n,isLocal:x,onClick:h,style:y,lastReaction:d,gameMove:m})=>{const b=i.useRef(null),[c,g]=i.useState(!1),f=i.useMemo(()=>l&&l.kind==="video"?new MediaStream([l]):null,[l]),j=a(e=>{e.stopPropagation(),b.current&&(document.fullscreenElement?document.exitFullscreen().then(()=>{g(!1)}):b.current.requestFullscreen().then(()=>{g(!0)}).catch(p=>{}))},"toggleFullscreen");i.useEffect(()=>{const e=a(()=>{g(!!document.fullscreenElement)},"handleFullscreenChange");return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);const[w,v]=i.useState([]);i.useEffect(()=>{if(d&&d.username===r.username){const e=Date.now()+Math.random();v(p=>[...p,{id:e,emoji:d.emoji}]),setTimeout(()=>{v(p=>p.filter(I=>I.id!==e))},2e3)}},[d,r.username]);const k=x&&u==="camera",C=x?`${r.username} (Siz)`:r.username,E=r.is_talking?"talking-border talking-pulse":"";return t.jsxs("div",{ref:b,className:E,style:{...o.containerOuter,cursor:"pointer",border:r.is_talking?"none":"1px solid rgba(0,0,0,0.2)",...c&&{width:"100vw",height:"100vh",maxWidth:"none",paddingBottom:0},...y},onClick:a(()=>h&&h(s),"onClick"),children:[t.jsx("style",{children:`
                @keyframes floatUp {
                    0% { transform: translateY(0) scale(0.5); opacity: 0; }
                    20% { opacity: 1; transform: translateY(-20px) scale(1.2); }
                    100% { transform: translateY(-100px) scale(1); opacity: 0; }
                }
            `}),t.jsxs("div",{style:{...o.aspectRatioWrapper,height:c?"100%":o.aspectRatioWrapper.height},children:[f?t.jsxs("div",{style:o.videoFull,children:[t.jsx(F,{stream:f,isMirrored:k,objectFit:"cover"}),t.jsx("button",{onClick:j,style:{position:"absolute",top:"8px",right:"8px",backgroundColor:"rgba(0,0,0,0.7)",border:"1px solid rgba(255,255,255,0.2)",color:"white",borderRadius:"6px",padding:"6px 10px",cursor:"pointer",fontSize:"14px",zIndex:15,backdropFilter:"blur(4px)",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:a(e=>e.target.style.backgroundColor="rgba(88, 101, 242, 0.8)","onMouseEnter"),onMouseLeave:a(e=>e.target.style.backgroundColor="rgba(0,0,0,0.7)","onMouseLeave"),title:c?"Tam Ekrandan √áƒ±k (ESC)":"Tam Ekran",children:c?"üîô":"üî≥"}),t.jsx("div",{style:o.label,children:u==="screen"?"üñ•Ô∏è":"üì∑"})]}):t.jsxs("div",{style:o.avatarPlaceholder,children:[t.jsx("img",{src:n||"https://media.pawscord.com/assets/logo.png",style:{...o.avatarImage,border:r.is_talking?"3px solid #3ba55c":"2px solid #202225",transform:r.is_talking?"scale(1.1)":"scale(1)",transition:"all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},alt:r.username,onError:a(e=>{e.target.onerror=null,e.target.src="https://media.pawscord.com/assets/logo.png"},"onError")}),t.jsx("div",{style:o.micStatus,children:r.is_deafened?"üîï":r.is_mic_off?"üîá":r.is_talking?"üîä":"üé§"})]}),t.jsx("div",{style:{position:"absolute",bottom:"10px",right:"10px",pointerEvents:"none",zIndex:20},children:w.map(e=>t.jsx("div",{style:{position:"absolute",bottom:0,right:0+Math.random()*20,fontSize:"32px",animation:"floatUp 2s ease-out forwards"},children:e.emoji},e.id))}),m&&t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"64px",filter:"drop-shadow(0 0 10px rgba(0,0,0,0.8))",zIndex:30,animation:"popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},children:m==="rock"?"ü™®":m==="paper"?"üìÑ":"‚úÇÔ∏è"}),t.jsx("style",{children:`
                    @keyframes popIn {
                        from { transform: translate(-50%, -50%) scale(0); opacity: 0; }
                        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                    }
                `}),t.jsx("div",{style:o.usernameOverlay,children:t.jsx("span",{children:C})})]})]})},"UserVideoContainer"),o={containerOuter:{flexGrow:1,borderRadius:"12px",overflow:"hidden",backgroundColor:"#2b2d31",boxShadow:"0 4px 15px rgba(0,0,0,0.4)",transition:"all 0.2s ease-in-out",position:"relative",width:"100%",paddingBottom:"56.25%",minWidth:"200px"},aspectRatioWrapper:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 100%)",overflow:"hidden"},videoFull:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000",overflow:"hidden"},videoElement:{width:"100%",height:"100%",objectFit:"cover",position:"relative",zIndex:2,display:"block"},avatarPlaceholder:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#1e1f22"},avatarImage:{width:"65px",height:"65px",objectFit:"cover",borderRadius:"50%",boxShadow:"0 5px 15px rgba(0,0,0,0.5)"},usernameOverlay:{position:"absolute",bottom:"8px",left:"8px",backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"0.75em",zIndex:10,fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"85%",border:"1px solid rgba(255,255,255,0.1)"},label:{position:"absolute",top:"8px",right:"8px",backgroundColor:"rgba(0,0,0,0.6)",color:"white",padding:"4px",borderRadius:"4px",fontSize:"0.8em",zIndex:1},micStatus:{position:"absolute",bottom:"8px",right:"8px",fontSize:"1.1em",zIndex:10,backgroundColor:"rgba(0, 0, 0, 0.6)",padding:"4px",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.1)"}},W=z.memo(R);export{W as default};
