var I=Object.defineProperty;var r=(s,n)=>I(s,"name",{value:n,configurable:!0});import{a as E,r as a,j as e}from"./react-core-Djgtqrmb.js";import{a as A}from"./icons-vendor-BMXAt4pj.js";import{A as k}from"./index-DjBRFZUD.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const j=[{key:"custom",label:"Ã–zel",icon:"âœ¨",color:"#5865F2",placeholder:"Ã–zel durumunu yaz..."},{key:"gaming",label:"Oynuyor",icon:"ðŸŽ®",color:"#57F287",placeholder:"Hangi oyunu oynuyorsun?"},{key:"happy",label:"Dinliyor",icon:"ðŸŽ§",color:"#1DB954",placeholder:"Ne dinliyorsun?"},{key:"focused",label:"Ä°zliyor",icon:"ðŸ‘€",color:"#E91E63",placeholder:"Ne izliyorsun?"},{key:"creative",label:"YayÄ±nda",icon:"ðŸ“¡",color:"#9146FF",placeholder:"YayÄ±n baÅŸlÄ±ÄŸÄ±..."},{key:"excited",label:"YarÄ±ÅŸÄ±yor",icon:"ðŸ†",color:"#FAA61A",placeholder:"Hangi yarÄ±ÅŸma?"},{key:"working",label:"Ã‡alÄ±ÅŸÄ±yor",icon:"ðŸ’¼",color:"#747F8D",placeholder:"Ne Ã¼zerinde Ã§alÄ±ÅŸÄ±yorsun?"},{key:"studying",label:"Okuyor",icon:"ðŸ“š",color:"#5865F2",placeholder:"Ne okuyorsun?"}],D=[{label:"Temizleme",value:null},{label:"30 dakika",value:30},{label:"1 saat",value:60},{label:"4 saat",value:240},{label:"BugÃ¼n",value:"today"}],R=r(({isOpen:s,onClose:n,onStatusChange:v})=>{const[b,y]=a.useState("custom"),[f,p]=a.useState("âœ¨"),[i,h]=a.useState(""),[g,C]=a.useState(null),[m,x]=a.useState(!1),[z,S]=a.useState(null);a.useEffect(()=>{if(!s)return;r(async()=>{try{const u=localStorage.getItem("access_token"),d=await fetch(`${k}/api/status/custom/`,{headers:{Authorization:`Bearer ${u}`}});if(d.ok){const l=await d.json();l.type&&(S(l),y(l.type),p(l.emoji||"âœ¨"),h(l.text||l.activity||""))}}catch{}},"fetchStatus")()},[s]);const w=r(async()=>{x(!0);try{const t=localStorage.getItem("access_token");let u=g;if(g==="today"){const l=new Date,T=new Date(l.getFullYear(),l.getMonth(),l.getDate(),23,59,59);u=Math.floor((T-l)/6e4)}const d=await fetch(`${k}/api/status/custom/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({type:b,emoji:f,text:i,activity:i,expires_in:u})});if(d.ok){const l=await d.json();v?.(l),n()}}catch{}finally{x(!1)}},"handleSave"),B=r(async()=>{x(!0);try{const t=localStorage.getItem("access_token");await fetch(`${k}/api/status/custom/`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),S(null),y("custom"),p("âœ¨"),h(""),v?.(null),n()}catch{}finally{x(!1)}},"handleClear");if(!s)return null;const c=j.find(t=>t.key===b)||j[0];return e.jsx("div",{style:o.overlay,onClick:n,children:e.jsxs("div",{style:o.modal,onClick:r(t=>t.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:o.header,children:[e.jsx("h3",{style:o.title,children:"Durumunu Ayarla"}),e.jsx("button",{onClick:n,style:o.closeBtn,children:e.jsx(A,{})})]}),e.jsxs("div",{style:{...o.preview,borderColor:c.color},children:[e.jsx("span",{style:o.previewEmoji,children:f}),e.jsxs("div",{style:o.previewText,children:[e.jsx("span",{style:{color:c.color,fontWeight:600,fontSize:12},children:c.label}),e.jsx("span",{style:o.previewContent,children:i||c.placeholder})]})]}),e.jsxs("div",{style:o.section,children:[e.jsx("label",{style:o.label,children:"Durum Tipi"}),e.jsx("div",{style:o.typeGrid,children:j.map(t=>e.jsxs("button",{onClick:r(()=>{y(t.key),p(t.icon)},"onClick"),style:{...o.typeBtn,...b===t.key?{backgroundColor:`${t.color}20`,borderColor:t.color,color:t.color}:{}},children:[e.jsx("span",{children:t.icon}),e.jsx("span",{style:{fontSize:11},children:t.label})]},t.key))})]}),e.jsxs("div",{style:o.section,children:[e.jsx("label",{style:o.label,children:"Emoji"}),e.jsx("input",{type:"text",value:f,onChange:r(t=>p(t.target.value.slice(-2)),"onChange"),style:o.emojiInput,maxLength:4})]}),e.jsxs("div",{style:o.section,children:[e.jsx("label",{style:o.label,children:"Durum Metni"}),e.jsx("input",{type:"text",value:i,onChange:r(t=>h(t.target.value),"onChange"),placeholder:c.placeholder,style:o.textInput,maxLength:100}),e.jsxs("span",{style:o.charCount,children:[i.length,"/100"]})]}),e.jsxs("div",{style:o.section,children:[e.jsx("label",{style:o.label,children:"Otomatik Temizle"}),e.jsx("div",{style:o.expiryRow,children:D.map(t=>e.jsx("button",{onClick:r(()=>C(t.value),"onClick"),style:{...o.expiryBtn,...g===t.value?o.expiryBtnActive:{}},children:t.label},t.label))})]}),e.jsxs("div",{style:o.actions,children:[z&&e.jsx("button",{onClick:B,style:o.clearBtn,disabled:m,children:"Durumu Temizle"}),e.jsx("div",{style:{flex:1}}),e.jsx("button",{onClick:n,style:o.cancelBtn,children:"Ä°ptal"}),e.jsx("button",{onClick:w,style:o.saveBtn,disabled:m||!i.trim(),children:m?"...":"Kaydet"})]})]})})},"CustomStatusModal"),o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},modal:{width:"440px",maxWidth:"90vw",backgroundColor:"#36393f",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid #2f3136"},title:{margin:0,fontSize:"18px",fontWeight:700,color:"#fff"},closeBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"16px",padding:"4px"},preview:{display:"flex",alignItems:"center",gap:"12px",margin:"16px 20px",padding:"14px 16px",backgroundColor:"#2f3136",borderRadius:"8px",borderLeft:"4px solid #5865F2"},previewEmoji:{fontSize:"28px"},previewText:{display:"flex",flexDirection:"column",gap:"2px"},previewContent:{color:"#dcddde",fontSize:"14px"},section:{padding:"0 20px",marginBottom:"16px",position:"relative"},label:{display:"block",color:"#b9bbbe",fontSize:"12px",fontWeight:700,textTransform:"uppercase",marginBottom:"8px"},typeGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"6px"},typeBtn:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"10px 8px",backgroundColor:"#2f3136",border:"2px solid transparent",borderRadius:"8px",color:"#b9bbbe",cursor:"pointer",transition:"all 0.15s",fontSize:"16px"},emojiInput:{width:"60px",padding:"8px 12px",backgroundColor:"#202225",border:"1px solid #40444b",borderRadius:"6px",color:"#fff",fontSize:"24px",textAlign:"center",outline:"none"},textInput:{width:"100%",padding:"10px 14px",backgroundColor:"#202225",border:"1px solid #40444b",borderRadius:"6px",color:"#dcddde",fontSize:"14px",outline:"none",boxSizing:"border-box"},charCount:{position:"absolute",right:"28px",bottom:"-16px",fontSize:"11px",color:"#72767d"},expiryRow:{display:"flex",gap:"6px",flexWrap:"wrap"},expiryBtn:{padding:"6px 12px",backgroundColor:"#2f3136",border:"1px solid #40444b",borderRadius:"6px",color:"#b9bbbe",cursor:"pointer",fontSize:"12px",transition:"all 0.15s"},expiryBtnActive:{backgroundColor:"#5865F2",borderColor:"#5865F2",color:"#fff"},actions:{display:"flex",alignItems:"center",gap:"8px",padding:"16px 20px",borderTop:"1px solid #2f3136",backgroundColor:"#2f3136"},clearBtn:{padding:"8px 16px",backgroundColor:"transparent",border:"1px solid #ed4245",borderRadius:"6px",color:"#ed4245",cursor:"pointer",fontSize:"13px",fontWeight:500},cancelBtn:{padding:"8px 16px",backgroundColor:"transparent",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"13px",fontWeight:500},saveBtn:{padding:"8px 20px",backgroundColor:"#5865F2",border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"13px",fontWeight:600,transition:"background 0.15s"}},Y=E.memo(R);export{Y as default};
