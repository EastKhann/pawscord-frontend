var D=Object.defineProperty;var s=(t,i)=>D(t,"name",{value:i,configurable:!0});import{r as x,j as e}from"./react-core-Djgtqrmb.js";import{bC as v,a as z,R as T,w as C,ah as B,aq as I}from"./icons-vendor-BMXAt4pj.js";import{t as g}from"./index-Bohqi95c.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const a={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"85vh",display:"flex",flexDirection:"column",color:"#fff"},header:{padding:"20px",borderBottom:"1px solid #444",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},closeBtn:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",padding:"40px",color:"#99aab5"},streakCard:{backgroundColor:"#2c2f33",borderRadius:"12px",padding:"24px",display:"flex",alignItems:"center",gap:"20px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},streakInfo:{display:"flex",flexDirection:"column",gap:"4px"},streakNumber:{fontSize:"48px",fontWeight:"bold",color:"#f04747",lineHeight:1},streakLabel:{fontSize:"14px",color:"#99aab5",textTransform:"uppercase",letterSpacing:"1px"},claimSection:{marginBottom:"32px"},sectionTitle:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#dcddde"},currentRewardCard:{background:"linear-gradient(135deg, #5865f2 0%, #7289da 100%)",borderRadius:"12px",padding:"24px",display:"flex",alignItems:"center",gap:"20px",marginBottom:"16px",boxShadow:"0 8px 16px rgba(88,101,242,0.3)"},rewardIcon:{fontSize:"48px",display:"flex",alignItems:"center",justifyContent:"center"},rewardDetails:{flex:1},rewardAmount:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px"},rewardDescription:{fontSize:"14px",opacity:.9},claimBtn:{width:"100%",padding:"16px",backgroundColor:"#43b581",border:"none",borderRadius:"8px",color:"#fff",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(67,181,129,0.3)"},alreadyClaimed:{textAlign:"center",padding:"40px 20px",marginBottom:"32px"},nextRewardTime:{marginTop:"16px",padding:"12px",backgroundColor:"#2c2f33",borderRadius:"8px",fontSize:"16px",fontWeight:"600"},calendarSection:{marginBottom:"24px"},calendar:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(90px, 1fr))",gap:"12px"},calendarDay:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",textAlign:"center",border:"2px solid transparent",transition:"all 0.2s",position:"relative"},calendarDayActive:{borderColor:"#43b581",backgroundColor:"#2c3136",boxShadow:"0 0 20px rgba(67,181,129,0.3)"},calendarDayClaimed:{opacity:.5},dayNumber:{fontSize:"12px",color:"#99aab5",marginBottom:"8px",fontWeight:"600"},dayIcon:{fontSize:"32px",marginBottom:"8px",display:"flex",justifyContent:"center"},dayReward:{fontSize:"16px",fontWeight:"bold"},claimedBadge:{position:"absolute",top:"8px",right:"8px",color:"#43b581",fontSize:"16px"},info:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},infoText:{fontSize:"14px",color:"#dcddde",margin:"8px 0",lineHeight:"1.6"}},F=s(t=>{const i=new Date,d=new Date(t),n=new Date(d);n.setDate(n.getDate()+1),n.setHours(0,0,0,0);const r=n-i,p=Math.floor(r/(1e3*60*60)),m=Math.floor(r%(1e3*60*60)/(1e3*60));return`${p}h ${m}m`},"calculateTimeUntilNextReward");function A({fetchWithAuth:t,apiBaseUrl:i}){const[d,n]=x.useState([]),[r,p]=x.useState(0),[m,u]=x.useState(!1),[h,l]=x.useState(!0),[w,c]=x.useState(!1),[y,b]=x.useState(null);x.useEffect(()=>{f()},[]);const f=s(async()=>{try{const o=await(await t(`${i}/rewards/daily/`)).json();n(o.rewards||[]),p(o.streak||0),u(o.can_claim||!1),b(o.last_claimed)}catch{g.error("Failed to load rewards")}finally{l(!1)}},"loadDailyRewards"),k=s(async()=>{if(!m){g.error("Already claimed today!");return}c(!0);try{const o=await(await t(`${i}/rewards/claim/`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();o.success?(g.success(`Claimed ${o.reward.amount} ${o.reward.type}! ðŸŽ`),f()):g.error(o.error||"Failed to claim reward")}catch{g.error("Failed to claim reward")}finally{c(!1)}},"handleClaim"),R=d[r%7]||null;return{rewards:d,streak:r,canClaim:m,loading:h,claiming:w,lastClaimed:y,nextReward:R,handleClaim:k}}s(A,"useDailyRewards");const S=s(t=>{switch(t){case"coins":return e.jsx(I,{style:{color:"#faa61a"}});case"premium":return e.jsx(B,{style:{color:"#f04747"}});default:return e.jsx(v,{style:{color:"#5865f2"}})}},"getRewardIcon"),q=s(({fetchWithAuth:t,apiBaseUrl:i,onClose:d})=>{const{rewards:n,streak:r,canClaim:p,loading:m,claiming:u,lastClaimed:h,nextReward:l,handleClaim:w}=A({fetchWithAuth:t,apiBaseUrl:i});return e.jsx("div",{style:a.overlay,onClick:d,children:e.jsxs("div",{style:a.modal,onClick:s(c=>c.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:a.header,children:[e.jsxs("div",{style:a.headerLeft,children:[e.jsx(v,{style:{fontSize:"24px",color:"#43b581"}}),e.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Daily Rewards"})]}),e.jsx("button",{onClick:d,style:a.closeBtn,children:e.jsx(z,{})})]}),e.jsx("div",{style:a.content,children:m?e.jsx("div",{style:a.loading,children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:a.streakCard,children:[e.jsx(T,{style:{fontSize:"48px",color:"#f04747"}}),e.jsxs("div",{style:a.streakInfo,children:[e.jsx("div",{style:a.streakNumber,children:r}),e.jsx("div",{style:a.streakLabel,children:"Day Streak"})]})]}),p&&l&&e.jsxs("div",{style:a.claimSection,children:[e.jsx("h3",{style:a.sectionTitle,children:"Today's Reward"}),e.jsxs("div",{style:a.currentRewardCard,children:[e.jsx("div",{style:a.rewardIcon,children:S(l.type)}),e.jsxs("div",{style:a.rewardDetails,children:[e.jsxs("div",{style:a.rewardAmount,children:[l.amount," ",l.type]}),e.jsx("div",{style:a.rewardDescription,children:l.description})]})]}),e.jsx("button",{onClick:w,disabled:u,style:a.claimBtn,children:u?"Claiming...":"Claim Reward ðŸŽ"})]}),!p&&h&&e.jsxs("div",{style:a.alreadyClaimed,children:[e.jsx(C,{style:{color:"#43b581",fontSize:"48px"}}),e.jsx("h3",{children:"Already Claimed!"}),e.jsx("p",{children:"Come back tomorrow for your next reward"}),e.jsxs("div",{style:a.nextRewardTime,children:["Next reward in: ",F(h)]})]}),e.jsxs("div",{style:a.calendarSection,children:[e.jsx("h3",{style:a.sectionTitle,children:"7-Day Reward Cycle"}),e.jsx("div",{style:a.calendar,children:n.map((c,y)=>{const b=y===r%7,f=y<r%7;return e.jsxs("div",{style:{...a.calendarDay,...b&&a.calendarDayActive,...f&&a.calendarDayClaimed},children:[e.jsxs("div",{style:a.dayNumber,children:["Day ",y+1]}),e.jsx("div",{style:a.dayIcon,children:S(c.type)}),e.jsx("div",{style:a.dayReward,children:c.amount}),f&&e.jsx("div",{style:a.claimedBadge,children:e.jsx(C,{})})]},y)})})]}),e.jsxs("div",{style:a.info,children:[e.jsx("p",{style:a.infoText,children:"ðŸ“… Log in every day to maintain your streak and earn rewards!"}),e.jsx("p",{style:a.infoText,children:"ðŸ”¥ Missing a day will reset your streak to 0"})]})]})})]})})},"DailyRewardsModal");export{q as default};
