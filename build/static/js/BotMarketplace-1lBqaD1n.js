var R=Object.defineProperty;var n=(s,l)=>R(s,"name",{value:l,configurable:!0});import{j as e,r as t}from"./react-core-Djgtqrmb.js";import{c as T,v as D,t as z}from"./index-BRQzOq3v.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BW7dxHkX.js";import"./ui-vendor-IhB9Znpc.js";const $=n(({bot:s,onClick:l})=>e.jsxs("div",{className:"bot-card",onClick:n(()=>l(s),"onClick"),children:[e.jsxs("div",{className:"bot-avatar",children:[e.jsx("img",{src:s.avatar||"/default-bot.png",alt:s.name}),s.is_verified&&e.jsx("span",{className:"verified-badge",children:"âœ“"})]}),e.jsxs("div",{className:"bot-info",children:[e.jsxs("h3",{className:"bot-name",children:[s.name,s.is_featured&&e.jsxs("span",{className:"featured-tag",children:["â­"," ","Ã–","ne ","Ã‡Ä±","kan"]})]}),e.jsx("p",{className:"bot-description",children:s.short_description}),e.jsxs("div",{className:"bot-meta",children:[e.jsxs("span",{className:"bot-installs",children:[e.jsx("i",{children:"ðŸ“¥"})," ",s.install_count?.toLocaleString()||0]}),e.jsxs("span",{className:"bot-rating",children:[e.jsx("i",{children:"â­"})," ",s.avg_rating||0]}),s.category&&e.jsx("span",{className:"bot-category",children:s.category})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"bot-tags",children:s.tags.slice(0,3).map((x,v)=>e.jsx("span",{className:"tag",children:x},v))})]})]}),"BotCard"),L=n(({bot:s,onClose:l,onInstall:x})=>{const{overlayProps:v,dialogProps:b}=T({onClose:l,isOpen:!!s,label:"Bot Detay"}),[d,c]=t.useState("overview"),[w,i]=t.useState(!1),[k,p]=t.useState([]),[o,u]=t.useState(null),[B,m]=t.useState(!1),g=D,N=t.useCallback(async()=>{try{const a=localStorage.getItem("access_token"),r=await fetch(`${g}/bots/my-servers/`,{headers:{Authorization:`Bearer ${a}`}});if(r.ok){const C=await r.json();p(C.servers||[])}}catch{}},[g]),f=n(async()=>{if(o){m(!0);try{const a=localStorage.getItem("access_token"),r=await fetch(`${g}/bots/${s.id}/install/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:o.id})});if(r.ok)x?.(s,o),i(!1),z.success(`${s.name} baÅŸarÄ±yla ${o.name} sunucusuna eklendi!`);else{const C=await r.json();z.error(C.error||"YÃ¼kleme baÅŸarÄ±sÄ±z")}}catch{}m(!1)}},"handleInstall");return t.useEffect(()=>{N()},[N]),s?e.jsx("div",{className:"bot-modal-overlay",...v,children:e.jsxs("div",{className:"bot-modal",...b,children:[e.jsxs("div",{className:"bot-modal-header",style:{backgroundImage:s.banner?`url(${s.banner})`:void 0},children:[e.jsx("button",{className:"modal-close",onClick:l,children:"Ã—"}),e.jsxs("div",{className:"bot-header-content",children:[e.jsx("img",{src:s.avatar||"/default-bot.png",alt:s.name,className:"bot-large-avatar"}),e.jsxs("div",{className:"bot-header-info",children:[e.jsxs("h2",{children:[s.name,s.is_verified&&e.jsxs("span",{className:"verified",children:["âœ“"," DoÄŸrulanmÄ±ÅŸ"]})]}),e.jsx("p",{children:s.short_description}),e.jsxs("div",{className:"bot-stats",children:[e.jsxs("span",{children:["ðŸ“¥"," ",s.install_count?.toLocaleString()," sunucu"]}),e.jsxs("span",{children:["â­"," ",s.avg_rating," (",s.review_count," yorum)"]})]})]}),e.jsx("button",{className:"add-bot-btn",onClick:n(()=>i(!0),"onClick"),children:"Sunucuya Ekle"})]})]}),e.jsxs("div",{className:"bot-modal-tabs",children:[e.jsx("button",{className:d==="overview"?"active":"",onClick:n(()=>c("overview"),"onClick"),children:"Genel BakÄ±ÅŸ"}),e.jsx("button",{className:d==="commands"?"active":"",onClick:n(()=>c("commands"),"onClick"),children:"Komutlar"}),e.jsx("button",{className:d==="reviews"?"active":"",onClick:n(()=>c("reviews"),"onClick"),children:"Yorumlar"})]}),e.jsxs("div",{className:"bot-modal-content",children:[d==="overview"&&e.jsxs("div",{className:"overview-tab",children:[e.jsxs("div",{className:"description-section",children:[e.jsx("h3",{children:"AÃ§Ä±klama"}),e.jsx("div",{className:"description-content",children:s.description})]}),s.features&&s.features.length>0&&e.jsxs("div",{className:"features-section",children:[e.jsxs("h3",{children:["Ã–","zellikler"]}),e.jsx("div",{className:"features-list",children:s.features.map((a,r)=>e.jsxs("div",{className:"feature-item",children:["âœ…"," ",a]},r))})]}),e.jsxs("div",{className:"links-section",children:[e.jsx("h3",{children:"BaÄŸlantÄ±lar"}),e.jsxs("div",{className:"links-list",children:[s.website&&e.jsxs("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",children:["ðŸŒ"," Web Sitesi"]}),s.support_server&&e.jsxs("a",{href:`/invite/${s.support_server}`,children:["ðŸ’¬"," Destek Sunucusu"]}),s.privacy_policy&&e.jsxs("a",{href:s.privacy_policy,target:"_blank",rel:"noopener noreferrer",children:["ðŸ”’"," Gizlilik PolitikasÄ±"]})]})]}),s.developer&&e.jsxs("div",{className:"developer-section",children:[e.jsx("h3",{children:"GeliÅŸtirici"}),e.jsxs("div",{className:"developer-info",children:[e.jsx("img",{src:s.developer.avatar||"/default-avatar.png",alt:""}),e.jsx("span",{children:s.developer.username})]})]})]}),d==="commands"&&e.jsx("div",{className:"commands-tab",children:s.commands&&s.commands.length>0?e.jsx("div",{className:"commands-list",children:s.commands.map((a,r)=>e.jsxs("div",{className:"command-item",children:[e.jsxs("code",{className:"command-name",children:[s.prefix,a.name]}),e.jsx("p",{className:"command-desc",children:a.description}),a.usage&&e.jsx("code",{className:"command-usage",children:a.usage})]},r))}):e.jsx("p",{className:"no-data",children:"Komut listesi mevcut deÄŸil"})}),d==="reviews"&&e.jsx("div",{className:"reviews-tab",children:s.reviews&&s.reviews.length>0?e.jsx("div",{className:"reviews-list",children:s.reviews.map(a=>e.jsxs("div",{className:"review-item",children:[e.jsxs("div",{className:"review-header",children:[e.jsx("img",{src:a.avatar||"/default-avatar.png",alt:""}),e.jsx("span",{className:"reviewer-name",children:a.user}),e.jsx("span",{className:"review-rating",children:"â­".repeat(a.rating)})]}),e.jsx("p",{className:"review-content",children:a.content}),e.jsx("span",{className:"review-date",children:new Date(a.created_at).toLocaleDateString("tr-TR")})]},a.id))}):e.jsx("p",{className:"no-data",children:"HenÃ¼z yorum yok"})})]}),w&&e.jsx("div",{className:"server-select-overlay",children:e.jsxs("div",{className:"server-select-modal",children:[e.jsx("h3",{children:"Sunucu SeÃ§"}),e.jsxs("p",{children:[s.name," botunu hangi sunucuya eklemek istiyorsunuz?"]}),e.jsx("div",{className:"server-list",children:k.length===0?e.jsx("p",{className:"no-servers",children:"Admin olduÄŸunuz sunucu bulunamadÄ±"}):k.map(a=>e.jsxs("div",{className:`server-item ${o?.id===a.id?"selected":""}`,onClick:n(()=>u(a),"onClick"),children:[e.jsx("img",{src:a.icon||"/default-server.png",alt:""}),e.jsx("span",{children:a.name}),e.jsxs("span",{className:"member-count",children:[a.member_count," ","Ã¼","ye"]})]},a.id))}),e.jsxs("div",{className:"server-select-actions",children:[e.jsxs("button",{className:"cancel-btn",onClick:n(()=>i(!1),"onClick"),children:["Ä°","ptal"]}),e.jsx("button",{className:"install-btn",disabled:!o||B,onClick:f,children:B?"YÃ¼kleniyor...":"Ekle"})]})]})})]})}):null},"BotDetailModal"),M=n(()=>{const[s,l]=t.useState([]),[x,v]=t.useState([]),[b,d]=t.useState([]),[c,w]=t.useState([]),[i,k]=t.useState(!0),[p,o]=t.useState(null),[u,B]=t.useState(""),[m,g]=t.useState("popular"),[N,f]=t.useState(null),[a,r]=t.useState(1),[C,E]=t.useState(1),y=D,P=t.useCallback(async()=>{try{const h=new URLSearchParams({page:a,sort:m,limit:20});p&&h.append("category",p),u&&h.append("search",u);const j=await fetch(`${y}/bots/?${h}`);if(j.ok){const S=await j.json();l(S.bots||[]),E(S.pages||1)}}catch{}},[y,a,m,p,u]),A=t.useCallback(async()=>{k(!0);try{const[h,j,S]=await Promise.all([fetch(`${y}/bots/categories/`),fetch(`${y}/bots/featured/`),fetch(`${y}/bots/trending/`)]);if(h.ok){const _=await h.json();w(_.categories||[])}if(j.ok){const _=await j.json();v(_.bots||[])}if(S.ok){const _=await S.json();d(_.bots||[])}}catch{}k(!1)},[y]),I=n(async h=>{try{const j=await fetch(`${y}/bots/${h.id}/`);if(j.ok){const S=await j.json();f(S)}}catch{}},"loadBotDetail");return t.useEffect(()=>{A()},[A]),t.useEffect(()=>{P()},[P]),{bots:s,featuredBots:x,trendingBots:b,categories:c,loading:i,selectedCategory:p,setSelectedCategory:o,searchQuery:u,setSearchQuery:B,sortBy:m,setSortBy:g,selectedBot:N,setSelectedBot:f,page:a,setPage:r,totalPages:C,loadBotDetail:I}},"useBotMarketplace"),W=n(({onClose:s})=>{const{bots:l,featuredBots:x,trendingBots:v,categories:b,loading:d,selectedCategory:c,setSelectedCategory:w,searchQuery:i,setSearchQuery:k,sortBy:p,setSortBy:o,selectedBot:u,setSelectedBot:B,page:m,setPage:g,totalPages:N,loadBotDetail:f}=M();return d?e.jsx("div",{className:"bot-marketplace",children:e.jsxs("div",{className:"marketplace-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsxs("p",{children:["Bot Marketplace y","Ã¼","kleniyor..."]})]})}):e.jsxs("div",{className:"bot-marketplace",children:[e.jsxs("div",{className:"marketplace-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsxs("h1",{children:["ðŸ¤–"," Bot Marketplace"]}),e.jsxs("p",{children:["Sunucunuzu g","Ã¼Ã§","lendirecek binlerce bot ke","ÅŸ","fedin"]})]}),s&&e.jsx("button",{className:"close-btn",onClick:s,children:"Ã—"})]}),e.jsxs("div",{className:"marketplace-filters",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:"Bot ara...",value:i,onChange:n(a=>k(a.target.value),"onChange")}),e.jsx("span",{className:"search-icon",children:"ðŸ”"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsxs("select",{value:c||"",onChange:n(a=>w(a.target.value||null),"onChange"),children:[e.jsxs("option",{value:"",children:["T","Ã¼","m Kategoriler"]}),b.map(a=>e.jsxs("option",{value:a.slug,children:[a.icon," ",a.name," (",a.bot_count,")"]},a.id))]}),e.jsxs("select",{value:p,onChange:n(a=>o(a.target.value),"onChange"),children:[e.jsxs("option",{value:"popular",children:["Pop","Ã¼","ler"]}),e.jsx("option",{value:"new",children:"Yeni"}),e.jsxs("option",{value:"rated",children:["En ","Ä°","yi Puan"]})]})]})]}),e.jsxs("div",{className:"marketplace-content",children:[x.length>0&&!i&&!c&&e.jsxs("section",{className:"featured-section",children:[e.jsxs("h2",{children:["â­"," ","Ã–","ne ","Ã‡Ä±","kan Botlar"]}),e.jsx("div",{className:"featured-grid",children:x.map(a=>e.jsx($,{bot:a,onClick:f},a.id))})]}),v.length>0&&!i&&!c&&e.jsxs("section",{className:"trending-section",children:[e.jsxs("h2",{children:["ðŸ“ˆ"," Y","Ã¼","kselen Botlar"]}),e.jsx("div",{className:"trending-grid",children:v.map(a=>e.jsx($,{bot:a,onClick:f},a.id))})]}),e.jsxs("section",{className:"all-bots-section",children:[e.jsx("h2",{children:c?b.find(a=>a.slug===c)?.name||"Botlar":i?`"${i}" iÃ§in sonuÃ§lar`:"TÃ¼m Botlar"}),l.length===0?e.jsx("div",{className:"no-results",children:e.jsxs("p",{children:["Bot bulunamad","Ä±"]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bots-grid",children:l.map(a=>e.jsx($,{bot:a,onClick:f},a.id))}),N>1&&e.jsxs("div",{className:"pagination",children:[e.jsxs("button",{disabled:m<=1,onClick:n(()=>g(a=>a-1),"onClick"),children:["â†"," ","Ã–","nceki"]}),e.jsxs("span",{children:["Sayfa ",m," / ",N]}),e.jsxs("button",{disabled:m>=N,onClick:n(()=>g(a=>a+1),"onClick"),children:["Sonraki ","â†’"]})]})]})]})]}),u&&e.jsx(L,{bot:u,onClose:n(()=>B(null),"onClose")})]})},"BotMarketplace");export{W as default};
