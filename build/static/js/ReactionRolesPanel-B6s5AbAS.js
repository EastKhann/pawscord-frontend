import{r as c,d as e,c9 as l}from"./react-core-DrOm_csO.js";import{g as z}from"./index-BYhWpPLp.js";const A=({serverId:r,onClose:u})=>{const[m,d]=c.useState([]),[g,v]=c.useState([]),[N,f]=c.useState([]),[n,s]=c.useState({message_id:"",channel_id:"",emoji:"",role_id:"",description:""}),[k,y]=c.useState(!0),[E,p]=c.useState(!1),i=z();c.useEffect(()=>{r&&(h(),R(),_())},[r]);const h=async()=>{try{const a=localStorage.getItem("access_token"),t=await fetch(`${i}/reaction-roles/server/${r}/`,{headers:{Authorization:`Bearer ${a}`}});if(t.ok){const o=await t.json();d(o.reaction_roles||[])}}catch(a){console.error("Error fetching reaction roles:",a)}finally{y(!1)}},R=async()=>{try{const a=localStorage.getItem("access_token"),t=await fetch(`${i}/servers/${r}/roles/`,{headers:{Authorization:`Bearer ${a}`}});if(t.ok){const o=await t.json();v(o.roles||[])}}catch(a){console.error("Error fetching roles:",a)}},_=async()=>{try{const a=localStorage.getItem("access_token"),t=await fetch(`${i}/servers/${r}/channels/`,{headers:{Authorization:`Bearer ${a}`}});if(t.ok){const o=await t.json();f(o.channels||[])}}catch(a){console.error("Error fetching channels:",a)}},j=async()=>{if(!n.message_id||!n.emoji||!n.role_id){l.error("âŒ Mesaj ID, emoji ve rol zorunludur");return}try{const a=localStorage.getItem("access_token"),t=await fetch(`${i}/reaction-roles/create/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:r,...n})});if(t.ok){const o=await t.json();d([...m,o.reaction_role]),s({message_id:"",channel_id:"",emoji:"",role_id:"",description:""}),l.success("âœ… Reaction role oluÅŸturuldu")}else{const o=await t.json();l.error(`âŒ ${o.error||"OluÅŸturma baÅŸarÄ±sÄ±z"}`)}}catch(a){console.error("Error creating reaction role:",a),l.error("âŒ OluÅŸturma baÅŸarÄ±sÄ±z")}},b=async a=>{if(window.confirm("Bu reaction role'Ã¼ silmek istediÄŸinizden emin misiniz?"))try{const t=localStorage.getItem("access_token");(await fetch(`${i}/reaction-roles/${a}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(d(m.filter(S=>S.id!==a)),l.success("âœ… Reaction role silindi"))}catch(t){console.error("Error deleting reaction role:",t),l.error("âŒ Silme baÅŸarÄ±sÄ±z")}},w=async()=>{try{const a=localStorage.getItem("access_token");(await fetch(`${i}/reaction-roles/server/${r}/sync/`,{method:"POST",headers:{Authorization:`Bearer ${a}`}})).ok&&(l.success("âœ… Reaction roller senkronize edildi"),h())}catch(a){console.error("Error syncing reaction roles:",a),l.error("âŒ Senkronizasyon baÅŸarÄ±sÄ±z")}},$=["â¤ï¸","ğŸ’™","ğŸ’š","ğŸ’›","ğŸ§¡","ğŸ’œ","ğŸ–¤","ğŸ¤","ğŸ”´","ğŸŸ ","ğŸŸ¡","ğŸŸ¢","ğŸ”µ","ğŸŸ£","âšª","âš«","âœ…","âŒ","â­","ğŸ‰","ğŸ®","ğŸµ","ğŸ“š","ğŸ†"];return k?e.createElement("div",{className:"reaction-roles-overlay"},e.createElement("div",{className:"reaction-roles-panel"},e.createElement("div",{className:"loading-state"},e.createElement("div",{className:"spinner"}),e.createElement("p",null,"Reaction roller yÃ¼kleniyor...")))):e.createElement("div",{className:"reaction-roles-overlay",onClick:u},e.createElement("div",{className:"reaction-roles-panel",onClick:a=>a.stopPropagation()},e.createElement("div",{className:"reaction-header"},e.createElement("h2",null,"â­ Reaction Roles"),e.createElement("button",{className:"close-btn",onClick:u},"Ã—")),e.createElement("div",{className:"create-section"},e.createElement("h3",null,"ğŸ†• Yeni Reaction Role"),e.createElement("div",{className:"form-grid"},e.createElement("div",{className:"form-group full-width"},e.createElement("label",null,"Kanal"),e.createElement("select",{value:n.channel_id,onChange:a=>s({...n,channel_id:a.target.value})},e.createElement("option",{value:""},"Kanal seÃ§in (opsiyonel)"),N.map(a=>e.createElement("option",{key:a.id,value:a.id},"#",a.name)))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Mesaj ID *"),e.createElement("input",{type:"text",placeholder:"Mesaj ID'sini girin",value:n.message_id,onChange:a=>s({...n,message_id:a.target.value})}),e.createElement("span",{className:"input-hint"},"Mesaja saÄŸ tÄ±k â†’ Mesaj ID'sini Kopyala")),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Rol *"),e.createElement("select",{value:n.role_id,onChange:a=>s({...n,role_id:a.target.value})},e.createElement("option",{value:""},"Rol seÃ§in"),g.map(a=>e.createElement("option",{key:a.id,value:a.id},a.name)))),e.createElement("div",{className:"form-group full-width"},e.createElement("label",null,"Emoji *"),e.createElement("div",{className:"emoji-input-group"},e.createElement("input",{type:"text",placeholder:"Emoji seÃ§ veya gir",value:n.emoji,onChange:a=>s({...n,emoji:a.target.value}),readOnly:!0}),e.createElement("button",{className:"emoji-picker-btn",onClick:()=>p(!E)},"ğŸ˜€")),E&&e.createElement("div",{className:"emoji-picker"},$.map(a=>e.createElement("button",{key:a,className:"emoji-option",onClick:()=>{s({...n,emoji:a}),p(!1)}},a)))),e.createElement("div",{className:"form-group full-width"},e.createElement("label",null,"AÃ§Ä±klama"),e.createElement("input",{type:"text",placeholder:"Bu rol iÃ§in aÃ§Ä±klama (opsiyonel)",value:n.description,onChange:a=>s({...n,description:a.target.value})}))),e.createElement("button",{className:"create-btn",onClick:j},"â• Reaction Role OluÅŸtur")),e.createElement("div",{className:"actions-bar"},e.createElement("div",{className:"info-text"},e.createElement("span",{className:"count-badge"},m.length)," adet reaction role"),e.createElement("button",{className:"sync-btn",onClick:w},"ğŸ”„ Senkronize Et")),e.createElement("div",{className:"reaction-roles-list"},m.length===0?e.createElement("div",{className:"empty-state"},e.createElement("span",{className:"empty-icon"},"â­"),e.createElement("p",null,"HenÃ¼z reaction role yok"),e.createElement("span",null,"KullanÄ±cÄ±larÄ±n emoji ile rol almasÄ±nÄ± saÄŸlayÄ±n")):m.map(a=>e.createElement("div",{key:a.id,className:"reaction-role-card"},e.createElement("div",{className:"rr-header"},e.createElement("div",{className:"rr-emoji"},a.emoji),e.createElement("div",{className:"rr-info"},e.createElement("h4",null,a.role_name||`Role #${a.role_id}`),a.description&&e.createElement("p",{className:"rr-description"},a.description)),e.createElement("button",{className:"delete-btn",onClick:()=>b(a.id)},"ğŸ—‘ï¸")),e.createElement("div",{className:"rr-meta"},e.createElement("div",{className:"meta-item"},e.createElement("span",{className:"meta-label"},"ğŸ“¢ Kanal:"),e.createElement("span",{className:"meta-value"},a.channel_name?`#${a.channel_name}`:"Belirtilmedi")),e.createElement("div",{className:"meta-item"},e.createElement("span",{className:"meta-label"},"ğŸ’¬ Mesaj ID:"),e.createElement("span",{className:"meta-value mono"},a.message_id)),e.createElement("div",{className:"meta-item"},e.createElement("span",{className:"meta-label"},"ğŸ‘¥ KullanÄ±mlar:"),e.createElement("span",{className:"meta-value"},a.usage_count||0," kez kullanÄ±ldÄ±"))))))))};export{A as default};
