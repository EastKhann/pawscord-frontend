import{r}from"./react-core-B6hadH-M.js";import{t as N}from"./index-D_6pZib5.js";const S=({apiBaseUrl:d,username:p,onClose:R})=>{const[c,v]=r.useState([]),[m,k]=r.useState([]),[b,u]=r.useState(!0),[s,i]=r.useState("all"),[l,o]=r.useState("all");r.useEffect(()=>{h(),f()},[p]);const h=async()=>{try{u(!0);const e=localStorage.getItem("access_token"),t=await fetch(`${d}/api/user/achievements/`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const n=await t.json();v(n.achievements||[])}else N.error("âŒ BaÅŸarÄ±lar yÃ¼klenemedi")}catch(e){console.error("Fetch achievements error:",e),N.error("âŒ BaÄŸlantÄ± hatasÄ±")}finally{u(!1)}},f=async()=>{try{const e=localStorage.getItem("access_token"),t=await fetch(`${d}/api/user/badges/`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const n=await t.json();k(n.badges||[])}}catch(e){console.error("Fetch badges error:",e)}},E=c.filter(e=>{const t=s==="all"||s==="unlocked"&&e.unlocked||s==="locked"&&!e.unlocked,n=l==="all"||e.category===l;return t&&n}),a={total:c.length,unlocked:c.filter(e=>e.unlocked).length,locked:c.filter(e=>!e.unlocked).length,progress:c.length>0?Math.round(c.filter(e=>e.unlocked).length/c.length*100):0},g=e=>{const t={common:"#95a5a6",uncommon:"#3498db",rare:"#9b59b6",epic:"#e74c3c",legendary:"#f39c12"};return t[e]||t.common},y=e=>e==="legendary"?"0 0 20px rgba(243, 156, 18, 0.6)":e==="epic"?"0 0 15px rgba(231, 76, 60, 0.5)":e==="rare"?"0 0 10px rgba(155, 89, 182, 0.4)":"none";return React.createElement("div",{className:"achievements-overlay",onClick:R},React.createElement("div",{className:"achievements-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"achievements-header"},React.createElement("h2",null,"ğŸ† BaÅŸarÄ±lar & Rozetler"),React.createElement("button",{className:"close-btn",onClick:R},"âœ•")),React.createElement("div",{className:"achievements-stats"},React.createElement("div",{className:"stat-item"},React.createElement("span",{className:"stat-icon"},"ğŸ¯"),React.createElement("div",{className:"stat-info"},React.createElement("span",{className:"stat-value"},a.unlocked,"/",a.total),React.createElement("span",{className:"stat-label"},"BaÅŸarÄ±"))),React.createElement("div",{className:"stat-item"},React.createElement("span",{className:"stat-icon"},"ğŸ“Š"),React.createElement("div",{className:"stat-info"},React.createElement("span",{className:"stat-value"},a.progress,"%"),React.createElement("span",{className:"stat-label"},"Tamamlanma"))),React.createElement("div",{className:"stat-item"},React.createElement("span",{className:"stat-icon"},"ğŸ–ï¸"),React.createElement("div",{className:"stat-info"},React.createElement("span",{className:"stat-value"},m.length),React.createElement("span",{className:"stat-label"},"Rozet")))),React.createElement("div",{className:"progress-section"},React.createElement("div",{className:"progress-bar"},React.createElement("div",{className:"progress-fill",style:{width:`${a.progress}%`}})),React.createElement("span",{className:"progress-text"},a.progress,"% Complete")),React.createElement("div",{className:"achievements-filters"},React.createElement("div",{className:"filter-group"},React.createElement("button",{className:s==="all"?"active":"",onClick:()=>i("all")},"TÃ¼mÃ¼ (",a.total,")"),React.createElement("button",{className:s==="unlocked"?"active":"",onClick:()=>i("unlocked")},"âœ“ AÃ§Ä±k (",a.unlocked,")"),React.createElement("button",{className:s==="locked"?"active":"",onClick:()=>i("locked")},"ğŸ”’ Kilitli (",a.locked,")")),React.createElement("div",{className:"category-group"},React.createElement("button",{className:l==="all"?"active":"",onClick:()=>o("all")},"TÃ¼m Kategoriler"),React.createElement("button",{className:l==="social"?"active":"",onClick:()=>o("social")},"ğŸ‘¥ Sosyal"),React.createElement("button",{className:l==="activity"?"active":"",onClick:()=>o("activity")},"âš¡ Aktivite"),React.createElement("button",{className:l==="special"?"active":"",onClick:()=>o("special")},"â­ Ã–zel"))),React.createElement("div",{className:"achievements-content"},m.length>0&&React.createElement("div",{className:"badges-section"},React.createElement("h3",null,"ğŸ–ï¸ Rozetler"),React.createElement("div",{className:"badges-grid"},m.map(e=>React.createElement("div",{key:e.id,className:"badge-card",title:e.description},React.createElement("div",{className:"badge-icon"},e.icon),React.createElement("div",{className:"badge-name"},e.name))))),React.createElement("div",{className:"achievements-grid"},b?React.createElement("div",{className:"loading-state"},React.createElement("div",{className:"spinner"}),React.createElement("p",null,"YÃ¼kleniyor...")):E.length===0?React.createElement("div",{className:"empty-state"},React.createElement("p",null,"ğŸ¯ BaÅŸarÄ± bulunamadÄ±")):E.map(e=>React.createElement("div",{key:e.id,className:`achievement-card ${e.unlocked?"unlocked":"locked"} ${e.rarity}`,style:{boxShadow:e.unlocked?y(e.rarity):"none"}},React.createElement("div",{className:"achievement-icon-wrapper"},React.createElement("div",{className:"achievement-icon"},e.icon||"ğŸ†"),e.unlocked&&React.createElement("div",{className:"unlocked-badge"},"âœ“")),React.createElement("div",{className:"achievement-info"},React.createElement("div",{className:"achievement-name"},e.name),React.createElement("div",{className:"achievement-description"},e.description),e.progress!==void 0&&!e.unlocked&&React.createElement("div",{className:"achievement-progress"},React.createElement("div",{className:"mini-progress-bar"},React.createElement("div",{className:"mini-progress-fill",style:{width:`${e.current/e.target*100}%`,backgroundColor:g(e.rarity)}})),React.createElement("span",{className:"progress-label"},e.current,"/",e.target)),e.unlocked&&e.unlocked_at&&React.createElement("div",{className:"unlocked-date"},"AÃ§Ä±ldÄ±: ",new Date(e.unlocked_at).toLocaleDateString("tr-TR"))),React.createElement("div",{className:"rarity-badge",style:{backgroundColor:g(e.rarity),color:"white"}},e.rarity||"common")))))))};export{S as default};
