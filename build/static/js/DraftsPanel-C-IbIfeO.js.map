{"version":3,"file":"DraftsPanel-C-IbIfeO.js","sources":["../../../src/components/DraftsPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { FaTimes, FaEdit, FaTrash, FaClock } from 'react-icons/fa';\nimport { toast } from '../utils/toast';\n\nconst DraftsPanel = ({ fetchWithAuth, apiBaseUrl, onClose, roomSlug }) => {\n    const [drafts, setDrafts] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        fetchDrafts();\n    }, []);\n\n    const fetchDrafts = async () => {\n        setLoading(true);\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/api/drafts/?room_slug=${roomSlug}`);\n            const data = await response.json();\n            setDrafts(data.drafts || []);\n        } catch (error) {\n            toast.error('Failed to load drafts');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const loadDraft = (draft) => {\n        // Emit event to load draft into message input\n        window.dispatchEvent(new CustomEvent('loadDraft', { detail: draft }));\n        toast.success('Draft loaded into message box');\n        onClose();\n    };\n\n    const deleteDraft = async (draftId) => {\n        if (!confirm('Delete this draft?')) return;\n\n        try {\n            await fetchWithAuth(`${apiBaseUrl}/api/drafts/${draftId}/delete/`, {\n                method: 'DELETE'\n            });\n\n            toast.success('Draft deleted');\n            fetchDrafts();\n        } catch (error) {\n            toast.error('Failed to delete draft');\n        }\n    };\n\n    const deleteAllDrafts = async () => {\n        if (!confirm(`Delete all ${drafts.length} drafts?`)) return;\n\n        try {\n            await fetchWithAuth(`${apiBaseUrl}/api/drafts/delete-all/`, {\n                method: 'DELETE',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ room_slug: roomSlug })\n            });\n\n            toast.success('All drafts deleted');\n            fetchDrafts();\n        } catch (error) {\n            toast.error('Failed to delete drafts');\n        }\n    };\n\n    return (\n        <div style={styles.overlay}>\n            <div style={styles.modal}>\n                <div style={styles.header}>\n                    <div style={styles.headerLeft}>\n                        <FaEdit style={{ marginRight: '10px', color: '#5865f2' }} />\n                        <h2 style={styles.title}>Message Drafts</h2>\n                    </div>\n                    <button onClick={onClose} style={styles.closeButton}>\n                        <FaTimes />\n                    </button>\n                </div>\n\n                {drafts.length > 0 && (\n                    <div style={styles.toolbar}>\n                        <div style={styles.draftCount}>{drafts.length} {drafts.length === 1 ? 'draft' : 'drafts'}</div>\n                        <button onClick={deleteAllDrafts} style={styles.deleteAllButton}>\n                            Delete All\n                        </button>\n                    </div>\n                )}\n\n                <div style={styles.content}>\n                    {loading ? (\n                        <div style={styles.loading}>Loading drafts...</div>\n                    ) : drafts.length === 0 ? (\n                        <div style={styles.empty}>\n                            <FaEdit style={{ fontSize: '48px', color: '#2c2f33', marginBottom: '16px' }} />\n                            <div>No drafts saved</div>\n                            <div style={styles.emptySubtext}>\n                                Start typing a message and it will be automatically saved as a draft\n                            </div>\n                        </div>\n                    ) : (\n                        <div style={styles.draftsList}>\n                            {drafts.map((draft, idx) => (\n                                <div key={idx} style={styles.draftCard}>\n                                    <div style={styles.draftContent} onClick={() => loadDraft(draft)}>\n                                        <div style={styles.draftText}>\n                                            {draft.content.substring(0, 200)}\n                                            {draft.content.length > 200 && '...'}\n                                        </div>\n                                        <div style={styles.draftMeta}>\n                                            <FaClock style={{ marginRight: '6px', fontSize: '11px' }} />\n                                            {new Date(draft.updated_at).toLocaleString()}\n                                        </div>\n                                        {draft.room_name && (\n                                            <div style={styles.draftRoom}>\n                                                #{draft.room_name}\n                                            </div>\n                                        )}\n                                    </div>\n                                    <button\n                                        onClick={() => deleteDraft(draft.id)}\n                                        style={styles.deleteButton}\n                                        title=\"Delete Draft\"\n                                    >\n                                        <FaTrash />\n                                    </button>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 999999,\n    },\n    modal: {\n        backgroundColor: '#1e1e1e',\n        borderRadius: '8px',\n        width: '90%',\n        maxWidth: '700px',\n        maxHeight: '90vh',\n        display: 'flex',\n        flexDirection: 'column',\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4)',\n    },\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '20px',\n        borderBottom: '1px solid #2c2f33',\n    },\n    headerLeft: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    title: {\n        margin: 0,\n        fontSize: '20px',\n        color: '#ffffff',\n    },\n    closeButton: {\n        background: 'none',\n        border: 'none',\n        color: '#99aab5',\n        cursor: 'pointer',\n        fontSize: '20px',\n        padding: '5px',\n    },\n    toolbar: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 20px',\n        borderBottom: '1px solid #2c2f33',\n        backgroundColor: '#2c2f33',\n    },\n    draftCount: {\n        fontSize: '13px',\n        color: '#dcddde',\n    },\n    deleteAllButton: {\n        padding: '6px 12px',\n        backgroundColor: '#f04747',\n        border: 'none',\n        borderRadius: '4px',\n        color: '#ffffff',\n        cursor: 'pointer',\n        fontSize: '12px',\n        fontWeight: '500',\n    },\n    content: {\n        padding: '20px',\n        overflowY: 'auto',\n        flex: 1,\n    },\n    loading: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '40px',\n    },\n    empty: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '60px 20px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    emptySubtext: {\n        fontSize: '13px',\n        marginTop: '8px',\n        maxWidth: '300px',\n    },\n    draftsList: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '12px',\n    },\n    draftCard: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '8px',\n        padding: '16px',\n        display: 'flex',\n        gap: '12px',\n        alignItems: 'flex-start',\n    },\n    draftContent: {\n        flex: 1,\n        cursor: 'pointer',\n    },\n    draftText: {\n        fontSize: '14px',\n        color: '#dcddde',\n        lineHeight: '1.5',\n        marginBottom: '8px',\n        whiteSpace: 'pre-wrap',\n    },\n    draftMeta: {\n        fontSize: '12px',\n        color: '#99aab5',\n        display: 'flex',\n        alignItems: 'center',\n        marginBottom: '4px',\n    },\n    draftRoom: {\n        fontSize: '12px',\n        color: '#5865f2',\n        fontWeight: '500',\n    },\n    deleteButton: {\n        background: 'none',\n        border: 'none',\n        color: '#f04747',\n        cursor: 'pointer',\n        fontSize: '16px',\n        padding: '8px',\n    },\n};\n\nexport default DraftsPanel;\n"],"names":["useState","useEffect","jsx","jsxs"],"mappings":"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"}