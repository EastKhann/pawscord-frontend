var k=Object.defineProperty;var r=(s,i)=>k(s,"name",{value:i,configurable:!0});import{r as l,j as e}from"./react-core-Djgtqrmb.js";import{aJ as g,a as v,an as N,f as C}from"./icons-vendor-BW7dxHkX.js";import{t as n}from"./index-m2zCEI_Z.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const L=r(({fetchWithAuth:s,apiBaseUrl:i,username:a,onClose:x})=>{const[y,h]=l.useState([]),[u,f]=l.useState(!0),[d,m]=l.useState("");l.useEffect(()=>{c()},[a]);const c=r(async()=>{try{f(!0);const t=await s(`${i}/moderation/notes/list/?username=${a}`);if(t.ok){const p=await t.json();h(p)}}catch{n.error("Notlar yüklenemedi")}finally{f(!1)}},"loadNotes"),j=r(async()=>{if(!d.trim()){n.error("Not içeriği boş olamaz");return}try{(await s(`${i}/moderation/notes/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,note:d})})).ok?(n.success("Not eklendi"),m(""),c()):n.error("Not eklenemedi")}catch{n.error("Bir hata oluştu")}},"addNote"),b=r(async t=>{try{(await s(`${i}/moderation/notes/${t}/delete/`,{method:"DELETE"})).ok&&(n.success("Not silindi"),c())}catch{n.error("Bir hata oluştu")}},"deleteNote");return e.jsx("div",{style:o.overlay,onClick:x,children:e.jsxs("div",{style:o.modal,onClick:r(t=>t.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:o.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(g,{style:{color:"#faa61a"}}),e.jsxs("h2",{style:{margin:0},children:["Moderatör Notları - ",a]})]}),e.jsx(v,{onClick:x,style:o.closeBtn})]}),e.jsxs("div",{style:o.addNote,children:[e.jsx("textarea",{placeholder:"Yeni not ekle...",value:d,onChange:r(t=>m(t.target.value),"onChange"),style:o.textarea,rows:3}),e.jsxs("button",{onClick:j,style:o.addBtn,children:[e.jsx(N,{})," Not Ekle"]})]}),e.jsx("div",{style:o.notesList,children:u?e.jsx("div",{style:o.loading,children:"Yükleniyor..."}):y.length===0?e.jsxs("div",{style:o.empty,children:[e.jsx(g,{style:{fontSize:"48px",color:"#555"}}),e.jsx("p",{children:"Henüz not yok"})]}):y.map(t=>e.jsxs("div",{style:o.noteItem,children:[e.jsxs("div",{style:o.noteContent,children:[e.jsxs("div",{style:o.noteMeta,children:[e.jsx("strong",{children:t.moderator_username}),e.jsx("span",{style:{color:"#888",fontSize:"12px"},children:new Date(t.created_at).toLocaleString("tr-TR")})]}),e.jsx("div",{style:o.noteText,children:t.note})]}),e.jsx("button",{onClick:r(()=>b(t.id),"onClick"),style:o.deleteBtn,title:"Sil",children:e.jsx(C,{})})]},t.id))})]})})},"ModeratorNotesPanel"),o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},addNote:{padding:"20px",borderBottom:"1px solid #333"},textarea:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginBottom:"10px",resize:"vertical",fontFamily:"inherit"},addBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},notesList:{flex:1,overflowY:"auto",padding:"20px"},noteItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},noteContent:{flex:1},noteMeta:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},noteText:{color:"#dcddde",lineHeight:"1.5",whiteSpace:"pre-wrap"},deleteBtn:{backgroundColor:"transparent",border:"none",color:"#ed4245",cursor:"pointer",fontSize:"18px",padding:"10px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{L as default};
