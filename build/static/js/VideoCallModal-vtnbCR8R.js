import{r as n,d as e,bM as K,de as G,d0 as L,i as W,cy as $,H as T,J as U,cx as O,df as Q}from"./react-core-DrOm_csO.js";const H=({isOpen:d,onClose:h,targetUser:u,currentUser:w,localStream:a,remoteStream:i,onToggleVideo:B,onToggleMute:F,isVideoEnabled:s,isMuted:p,callDuration:R=0,callStatus:f="connecting"})=>{const[j,y]=n.useState(!1),[v,z]=n.useState(!1),[E,C]=n.useState(""),[k,S]=n.useState(""),[c,V]=n.useState({cameras:[],microphones:[]}),[A,D]=n.useState("720p"),m=n.useRef(null),g=n.useRef(null),I=n.useRef(null);n.useEffect(()=>{d&&(async()=>{try{const l=await navigator.mediaDevices.enumerateDevices(),r=l.filter(b=>b.kind==="videoinput"),x=l.filter(b=>b.kind==="audioinput");V({cameras:r,microphones:x}),r.length>0&&!E&&C(r[0].deviceId),x.length>0&&!k&&S(x[0].deviceId)}catch(l){console.error("Failed to enumerate devices:",l)}})()},[d]),n.useEffect(()=>{m.current&&a&&(m.current.srcObject=a)},[a]),n.useEffect(()=>{g.current&&i&&(g.current.srcObject=i)},[i]);const M=async()=>{if(document.fullscreenElement)await document.exitFullscreen(),y(!1);else try{await I.current?.requestFullscreen(),y(!0)}catch(o){console.error("Fullscreen failed:",o)}},P=o=>{const l=Math.floor(o/60),r=o%60;return`${l.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`};return d?e.createElement("div",{style:t.overlay},e.createElement("div",{ref:I,style:t.container},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerInfo},e.createElement("div",{style:t.avatar},u?.username?.[0]?.toUpperCase()||"U"),e.createElement("div",{style:t.userInfo},e.createElement("span",{style:t.username},u?.username||"Unknown"),e.createElement("span",{style:t.status},f==="connecting"&&"ðŸ”„ BaÄŸlanÄ±yor...",f==="active"&&`â±ï¸ ${P(R)}`,f==="ended"&&"ðŸ“ž Arama sona erdi"))),e.createElement("div",{style:t.headerActions},e.createElement("button",{onClick:()=>z(!v),style:t.headerButton,title:"Ayarlar"},e.createElement(K,null)),e.createElement("button",{onClick:M,style:t.headerButton,title:"Tam ekran"},j?e.createElement(G,null):e.createElement(L,null)),e.createElement("button",{onClick:h,style:t.closeButton,title:"Kapat"},e.createElement(W,null)))),v&&e.createElement("div",{style:t.settingsPanel},e.createElement("h4",{style:t.settingsTitle},"Video AyarlarÄ±"),e.createElement("div",{style:t.settingGroup},e.createElement("label",{style:t.settingLabel},"Kamera"),e.createElement("select",{value:E,onChange:o=>C(o.target.value),style:t.settingSelect},c.cameras.map(o=>e.createElement("option",{key:o.deviceId,value:o.deviceId},o.label||`Kamera ${c.cameras.indexOf(o)+1}`)))),e.createElement("div",{style:t.settingGroup},e.createElement("label",{style:t.settingLabel},"Mikrofon"),e.createElement("select",{value:k,onChange:o=>S(o.target.value),style:t.settingSelect},c.microphones.map(o=>e.createElement("option",{key:o.deviceId,value:o.deviceId},o.label||`Mikrofon ${c.microphones.indexOf(o)+1}`)))),e.createElement("div",{style:t.settingGroup},e.createElement("label",{style:t.settingLabel},"Kalite"),e.createElement("select",{value:A,onChange:o=>D(o.target.value),style:t.settingSelect},e.createElement("option",{value:"480p"},"480p (DÃ¼ÅŸÃ¼k)"),e.createElement("option",{value:"720p"},"720p (Orta)"),e.createElement("option",{value:"1080p"},"1080p (YÃ¼ksek)")))),e.createElement("div",{style:t.videoGrid},e.createElement("div",{style:t.remoteVideoContainer},i?e.createElement("video",{ref:g,autoPlay:!0,playsInline:!0,style:t.remoteVideo}):e.createElement("div",{style:t.videoPlaceholder},e.createElement("div",{style:t.placeholderAvatar},u?.username?.[0]?.toUpperCase()||"U"),e.createElement("p",null,"Kamera aÃ§Ä±lmadÄ±"))),e.createElement("div",{style:t.localVideoContainer},a&&s?e.createElement("video",{ref:m,autoPlay:!0,playsInline:!0,muted:!0,style:t.localVideo}):e.createElement("div",{style:t.localVideoPlaceholder},e.createElement("div",{style:t.placeholderAvatarSmall},w?.[0]?.toUpperCase()||"M")))),e.createElement("div",{style:t.controls},e.createElement("button",{onClick:F,style:{...t.controlButton,...p&&t.controlButtonActive},title:p?"Mikrofonu aÃ§":"Mikrofonu kapat"},p?e.createElement($,null):e.createElement(T,null)),e.createElement("button",{onClick:B,style:{...t.controlButton,...!s&&t.controlButtonActive},title:s?"KamerayÄ± kapat":"KamerayÄ± aÃ§"},s?e.createElement(U,null):e.createElement(O,null)),e.createElement("button",{onClick:h,style:t.hangupButton,title:"AramayÄ± sonlandÄ±r"},e.createElement(Q,{style:{transform:"rotate(135deg)"}}))))):null},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},container:{width:"100%",height:"100%",backgroundColor:"#1e1f22",display:"flex",flexDirection:"column",position:"relative"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",backgroundColor:"#2f3136",borderBottom:"1px solid #1e1f22"},headerInfo:{display:"flex",alignItems:"center",gap:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold",color:"#fff"},userInfo:{display:"flex",flexDirection:"column",gap:"4px"},username:{fontSize:"16px",fontWeight:"bold",color:"#fff"},status:{fontSize:"13px",color:"#b9bbbe"},headerActions:{display:"flex",gap:"8px"},headerButton:{backgroundColor:"transparent",border:"none",color:"#b9bbbe",fontSize:"18px",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background-color 0.2s"},closeButton:{backgroundColor:"#f04747",border:"none",color:"#fff",fontSize:"18px",cursor:"pointer",padding:"8px 12px",borderRadius:"4px"},settingsPanel:{position:"absolute",top:"70px",right:"24px",backgroundColor:"#2f3136",border:"1px solid #1e1f22",borderRadius:"8px",padding:"16px",width:"280px",zIndex:100,boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},settingsTitle:{fontSize:"14px",fontWeight:"bold",color:"#fff",marginBottom:"12px"},settingGroup:{marginBottom:"12px"},settingLabel:{display:"block",fontSize:"12px",color:"#b9bbbe",marginBottom:"6px"},settingSelect:{width:"100%",backgroundColor:"#40444b",border:"1px solid #1e1f22",borderRadius:"4px",padding:"8px",color:"#dcddde",fontSize:"13px"},videoGrid:{flex:1,position:"relative",backgroundColor:"#000"},remoteVideoContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},remoteVideo:{width:"100%",height:"100%",objectFit:"contain"},videoPlaceholder:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",color:"#b9bbbe"},placeholderAvatar:{width:"120px",height:"120px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:"bold",color:"#fff"},localVideoContainer:{position:"absolute",bottom:"100px",right:"24px",width:"240px",height:"180px",borderRadius:"8px",overflow:"hidden",border:"2px solid #5865f2",backgroundColor:"#000",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},localVideo:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"},localVideoPlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#2f3136"},placeholderAvatarSmall:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",color:"#fff"},controls:{display:"flex",justifyContent:"center",alignItems:"center",gap:"16px",padding:"24px",backgroundColor:"#2f3136"},controlButton:{width:"56px",height:"56px",borderRadius:"50%",border:"none",backgroundColor:"#40444b",color:"#fff",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},controlButtonActive:{backgroundColor:"#f04747"},hangupButton:{width:"56px",height:"56px",borderRadius:"50%",border:"none",backgroundColor:"#f04747",color:"#fff",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"}};export{H as default};
