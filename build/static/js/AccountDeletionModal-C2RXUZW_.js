var D=Object.defineProperty;var i=(o,r)=>D(o,"name",{value:r,configurable:!0});import{r as x,j as e}from"./react-core-Djgtqrmb.js";import{d as B,a as R,h as I,v as E,f as P}from"./icons-vendor-BW7dxHkX.js";import{t as H,c as F}from"./index-GGLPABCW.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.2s ease"},modal:{backgroundColor:"#36393f",borderRadius:"8px",width:"480px",maxWidth:"95vw",maxHeight:"90vh",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",animation:"slideUp 0.3s ease"},header:{display:"flex",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid #2f3136",gap:"12px"},headerIcon:{display:"flex",alignItems:"center",justifyContent:"center"},title:{flex:1,margin:0,fontSize:"18px",fontWeight:"600",color:"#fff"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"},content:{padding:"20px"},warningBox:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"20px",backgroundColor:"rgba(240,71,71,0.1)",borderRadius:"8px",marginBottom:"16px"},warningTitle:{color:"#f04747",margin:"12px 0 8px",fontSize:"18px"},warningText:{color:"#b9bbbe",margin:0,fontSize:"14px"},deleteList:{listStyle:"none",margin:"16px 0",backgroundColor:"#2f3136",borderRadius:"8px",padding:"16px 20px"},infoBox:{backgroundColor:"rgba(250,166,26,0.1)",border:"1px solid rgba(250,166,26,0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"20px"},confirmBox:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"16px",marginBottom:"16px"},confirmTitle:{color:"#fff",margin:"12px 0 8px",fontSize:"16px"},confirmText:{color:"#b9bbbe",margin:0,fontSize:"14px"},errorBox:{backgroundColor:"rgba(240,71,71,0.2)",border:"1px solid #f04747",borderRadius:"4px",padding:"10px 14px",marginBottom:"16px",color:"#f04747",fontSize:"14px"},inputGroup:{marginBottom:"16px"},label:{display:"block",color:"#b9bbbe",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",marginBottom:"8px"},code:{backgroundColor:"#2f3136",padding:"2px 6px",borderRadius:"3px",color:"#f04747",fontFamily:"monospace"},input:{width:"100%",padding:"10px 12px",backgroundColor:"#202225",border:"1px solid #40444b",borderRadius:"4px",color:"#dcddde",fontSize:"14px",outline:"none",transition:"border-color 0.15s",boxSizing:"border-box"},buttonGroup:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"20px"},cancelButton:{padding:"10px 20px",backgroundColor:"transparent",border:"none",borderRadius:"4px",color:"#fff",fontSize:"14px",cursor:"pointer",transition:"all 0.15s"},dangerButton:{padding:"10px 20px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"#fff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.15s"},deleteButton:{padding:"10px 20px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"#fff",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s"}},T=document.createElement("style");T.textContent=`
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  .spin { animation: spin 1s linear infinite; }
  @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
`;document.head.appendChild(T);function A({onClose:o,onConfirmDelete:r,username:y,fetchWithAuth:h,apiBaseUrl:j}){const[k,f]=x.useState(1),[d,u]=x.useState(""),[c,g]=x.useState(""),[b,p]=x.useState(!1),[z,t]=x.useState(""),a=`DELETE ${y}`,m=x.useCallback(()=>{f(1),u(""),g(""),t(""),p(!1),o()},[o]);return{step:k,setStep:f,password:d,setPassword:u,confirmText:c,setConfirmText:g,isDeleting:b,error:z,CONFIRM_PHRASE:a,handleClose:m,handleProceedToConfirm:i(()=>{f(2),t("")},"handleProceedToConfirm"),handleDelete:i(async()=>{if(c!==a){t(`LÃ¼tfen tam olarak "${a}" yazÄ±n`);return}if(!d){t("Åžifrenizi girmeniz gerekiyor");return}p(!0),t("");try{const l=await h(`${j}/user/delete-account/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:d,confirm_text:c})});if(l.ok)H.success("HesabÄ±nÄ±z baÅŸarÄ±yla silindi. HoÅŸÃ§a kalÄ±n! ðŸ‘‹"),r&&r(),localStorage.clear(),sessionStorage.clear(),window.location.href="/";else{const s=await l.json();t(s.error||"Hesap silinemedi. Åžifrenizi kontrol edin.")}}catch{t("Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.")}finally{p(!1)}},"handleDelete"),isDeleteDisabled:c!==a||!d||b}}i(A,"useAccountDeletion");const G=["âœ— TÃ¼m mesajlarÄ±nÄ±z","âœ— Profil bilgileriniz ve avatarÄ±nÄ±z","âœ— Sunucu sahiplikleriniz (sunucular silinecek)","âœ— ArkadaÅŸ listeniz","âœ— Premium aboneliÄŸiniz","âœ— XP, seviye ve rozetleriniz","âœ— BaÄŸlÄ± hesaplarÄ±nÄ±z (Spotify, Steam, vb.)"],Y=i(({isOpen:o,onClose:r,onConfirmDelete:y,username:h,fetchWithAuth:j,apiBaseUrl:k})=>{const{overlayProps:f,dialogProps:d}=F({isOpen:o,onClose:r,label:"Hesap Silme"}),{step:u,setStep:c,password:g,setPassword:b,confirmText:p,setConfirmText:z,isDeleting:t,error:a,CONFIRM_PHRASE:m,handleClose:S,handleProceedToConfirm:C,handleDelete:v,isDeleteDisabled:l}=A({onClose:r,onConfirmDelete:y,username:h,fetchWithAuth:j,apiBaseUrl:k});return o?e.jsx("div",{style:n.overlay,...f,children:e.jsxs("div",{style:n.modal,...d,children:[e.jsxs("div",{style:n.header,children:[e.jsx("div",{style:n.headerIcon,children:e.jsx(B,{size:24,color:"#f04747"})}),e.jsx("h2",{style:n.title,children:"HesabÄ± Sil"}),e.jsx("button",{style:n.closeButton,onClick:S,children:e.jsx(R,{size:18})})]}),u===1&&e.jsxs("div",{style:n.content,children:[e.jsxs("div",{style:n.warningBox,children:[e.jsx(B,{size:48,color:"#f04747"}),e.jsx("h3",{style:n.warningTitle,children:"Bu iÅŸlem geri alÄ±namaz!"}),e.jsx("p",{style:n.warningText,children:"HesabÄ±nÄ±zÄ± sildiÄŸinizde aÅŸaÄŸÄ±dakiler kalÄ±cÄ± olarak silinecektir:"})]}),e.jsx("ul",{style:n.deleteList,children:G.map((s,w)=>e.jsx("li",{children:s},w))}),e.jsx("div",{style:n.infoBox,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Not:"}),' Ãœye olduÄŸunuz sunuculardaki mesajlarÄ±nÄ±z gÃ¶rÃ¼nÃ¼r kalacak ancak kullanÄ±cÄ± adÄ±nÄ±z "SilinmiÅŸ KullanÄ±cÄ±" olarak gÃ¶sterilecektir.']})}),e.jsxs("div",{style:n.buttonGroup,children:[e.jsx("button",{style:n.cancelButton,onClick:S,children:"VazgeÃ§"}),e.jsx("button",{style:n.dangerButton,onClick:C,children:"Devam Et"})]})]}),u===2&&e.jsxs("div",{style:n.content,children:[e.jsxs("div",{style:n.confirmBox,children:[e.jsx(I,{size:32,color:"#faa61a"}),e.jsx("h3",{style:n.confirmTitle,children:"KimliÄŸinizi DoÄŸrulayÄ±n"}),e.jsx("p",{style:n.confirmText,children:"HesabÄ±nÄ±zÄ± silmek iÃ§in ÅŸifrenizi girin ve onay metnini yazÄ±n."})]}),a&&e.jsx("div",{style:n.errorBox,children:a}),e.jsxs("div",{style:n.inputGroup,children:[e.jsx("label",{style:n.label,children:"Åžifreniz"}),e.jsx("input",{type:"password",value:g,onChange:i(s=>b(s.target.value),"onChange"),placeholder:"Åžifrenizi girin",style:n.input,disabled:t})]}),e.jsxs("div",{style:n.inputGroup,children:[e.jsxs("label",{style:n.label,children:["Onaylamak iÃ§in ",e.jsx("code",{style:n.code,children:m})," yazÄ±n"]}),e.jsx("input",{type:"text",value:p,onChange:i(s=>z(s.target.value),"onChange"),placeholder:m,style:{...n.input,borderColor:p===m?"#43b581":"#40444b"},disabled:t})]}),e.jsxs("div",{style:n.buttonGroup,children:[e.jsx("button",{style:n.cancelButton,onClick:i(()=>c(1),"onClick"),disabled:t,children:"Geri"}),e.jsx("button",{style:{...n.deleteButton,opacity:l?.5:1,cursor:l?"not-allowed":"pointer"},onClick:v,disabled:l,children:t?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"spin",style:{marginRight:8}}),"Siliniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{style:{marginRight:8}}),"HesabÄ±mÄ± KalÄ±cÄ± Olarak Sil"]})})]})]})]})}):null},"AccountDeletionModal");export{Y as default};
