{"version":3,"file":"MutualsPanel-_u7esGII.js","sources":["../../../src/components/MutualsPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport {\r\n    FaUserFriends, FaTimes, FaSearch, FaUser, FaServer,\r\n    FaCircle, FaUserPlus, FaComment, FaHashtag, FaCrown,\r\n    FaShieldAlt, FaGlobe, FaLock, FaUsers\r\n} from 'react-icons/fa';\r\nimport { toast } from 'react-toastify';\r\nimport './MutualsPanel.css';\r\n\r\nconst MutualsPanel = ({ userId, username, onClose, onNavigateToUser, onNavigateToServer }) => {\r\n    const [activeTab, setActiveTab] = useState('friends');\r\n    const [mutualFriends, setMutualFriends] = useState([]);\r\n    const [mutualServers, setMutualServers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const token = localStorage.getItem('access_token');\r\n\r\n    useEffect(() => {\r\n        fetchMutuals();\r\n    }, [userId]);\r\n\r\n    const fetchMutuals = async () => {\r\n        setLoading(true);\r\n        try {\r\n            // Backend expects username, not userId\r\n            const response = await fetch(`/api/users/${username}/mutuals/`, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setMutualFriends(data.friends || []);\r\n                setMutualServers(data.servers || []);\r\n            } else {\r\n                setMutualFriends([]);\r\n                setMutualServers([]);\r\n            }\r\n        } catch (error) {\r\n            setMutualFriends([]);\r\n            setMutualServers([]);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const getFilteredFriends = () => {\r\n        if (!searchQuery) return mutualFriends;\r\n        return mutualFriends.filter(f =>\r\n            f.username.toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n    };\r\n\r\n    const getFilteredServers = () => {\r\n        if (!searchQuery) return mutualServers;\r\n        return mutualServers.filter(s =>\r\n            s.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n    };\r\n\r\n    const getStatusColor = (status) => {\r\n        const colors = {\r\n            online: '#4caf50',\r\n            idle: '#ffc107',\r\n            dnd: '#f44336',\r\n            offline: '#666'\r\n        };\r\n        return colors[status] || '#666';\r\n    };\r\n\r\n    const formatMemberCount = (count) => {\r\n        if (count >= 1000000) return (count / 1000000).toFixed(1) + 'M';\r\n        if (count >= 1000) return (count / 1000).toFixed(1) + 'K';\r\n        return count.toString();\r\n    };\r\n\r\n    const handleSendMessage = (friend) => {\r\n        toast.info(`${friend.username} ile sohbet başlatılıyor...`);\r\n    };\r\n\r\n    const handleAddFriend = (friend) => {\r\n        toast.success(`${friend.username} arkadaş olarak eklendi`);\r\n    };\r\n\r\n    const filteredFriends = getFilteredFriends();\r\n    const filteredServers = getFilteredServers();\r\n\r\n    return (\r\n        <div className=\"mutuals-overlay\" onClick={(e) => e.target.className === 'mutuals-overlay' && onClose()}>\r\n            <div className=\"mutuals-panel\">\r\n                <div className=\"panel-header\">\r\n                    <h2><FaUserFriends /> Ortak Bağlantılar</h2>\r\n                    <span className=\"target-user\">@{username}</span>\r\n                    <button className=\"close-btn\" onClick={onClose}><FaTimes /></button>\r\n                </div>\r\n\r\n                {/* Tabs */}\r\n                <div className=\"tabs\">\r\n                    <button\r\n                        className={`tab ${activeTab === 'friends' ? 'active' : ''}`}\r\n                        onClick={() => setActiveTab('friends')}\r\n                    >\r\n                        <FaUserFriends />\r\n                        <span>Ortak Arkadaşlar</span>\r\n                        <span className=\"count\">{mutualFriends.length}</span>\r\n                    </button>\r\n                    <button\r\n                        className={`tab ${activeTab === 'servers' ? 'active' : ''}`}\r\n                        onClick={() => setActiveTab('servers')}\r\n                    >\r\n                        <FaServer />\r\n                        <span>Ortak Sunucular</span>\r\n                        <span className=\"count\">{mutualServers.length}</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Search */}\r\n                <div className=\"search-bar\">\r\n                    <FaSearch />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder={activeTab === 'friends' ? 'Arkadaş ara...' : 'Sunucu ara...'}\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                    />\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"content\">\r\n                    {loading ? (\r\n                        <div className=\"loading\">Yükleniyor...</div>\r\n                    ) : activeTab === 'friends' ? (\r\n                        /* Friends List */\r\n                        <div className=\"friends-list\">\r\n                            {filteredFriends.length === 0 ? (\r\n                                <div className=\"empty-state\">\r\n                                    <FaUserFriends />\r\n                                    <p>Ortak arkadaş bulunamadı</p>\r\n                                </div>\r\n                            ) : (\r\n                                filteredFriends.map(friend => (\r\n                                    <div\r\n                                        key={friend.id}\r\n                                        className=\"friend-item\"\r\n                                        onClick={() => onNavigateToUser && onNavigateToUser(friend.id)}\r\n                                    >\r\n                                        <div className=\"friend-avatar\">\r\n                                            {friend.avatar ? (\r\n                                                <img src={friend.avatar} alt=\"\" />\r\n                                            ) : (\r\n                                                <FaUser />\r\n                                            )}\r\n                                            <span\r\n                                                className=\"status-dot\"\r\n                                                style={{ background: getStatusColor(friend.status) }}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"friend-info\">\r\n                                            <span className=\"friend-name\">{friend.username}</span>\r\n                                            {friend.activity && (\r\n                                                <span className=\"friend-activity\">{friend.activity}</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"friend-actions\">\r\n                                            <button\r\n                                                className=\"action-btn message\"\r\n                                                onClick={(e) => { e.stopPropagation(); handleSendMessage(friend); }}\r\n                                                title=\"Mesaj Gönder\"\r\n                                            >\r\n                                                <FaComment />\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        /* Servers List */\r\n                        <div className=\"servers-list\">\r\n                            {filteredServers.length === 0 ? (\r\n                                <div className=\"empty-state\">\r\n                                    <FaServer />\r\n                                    <p>Ortak sunucu bulunamadı</p>\r\n                                </div>\r\n                            ) : (\r\n                                filteredServers.map(server => (\r\n                                    <div\r\n                                        key={server.id}\r\n                                        className=\"server-item\"\r\n                                        onClick={() => onNavigateToServer && onNavigateToServer(server.id)}\r\n                                    >\r\n                                        <div className=\"server-icon\">\r\n                                            {server.icon ? (\r\n                                                <img src={server.icon} alt=\"\" />\r\n                                            ) : (\r\n                                                <span>{server.name.charAt(0)}</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"server-info\">\r\n                                            <div className=\"server-name-row\">\r\n                                                <span className=\"server-name\">{server.name}</span>\r\n                                                {server.is_owner && <FaCrown className=\"owner-badge\" />}\r\n                                            </div>\r\n                                            <div className=\"server-meta\">\r\n                                                <span className=\"member-count\">\r\n                                                    <FaUsers /> {formatMemberCount(server.member_count)}\r\n                                                </span>\r\n                                                {server.role && (\r\n                                                    <span className={`role-badge ${server.role.toLowerCase()}`}>\r\n                                                        {server.role === 'Owner' && <FaCrown />}\r\n                                                        {server.role === 'Moderator' && <FaShieldAlt />}\r\n                                                        {server.role}\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Summary */}\r\n                <div className=\"summary\">\r\n                    <span>\r\n                        <FaUserFriends /> {mutualFriends.length} ortak arkadaş\r\n                    </span>\r\n                    <span>\r\n                        <FaServer /> {mutualServers.length} ortak sunucu\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MutualsPanel;\r\n"],"names":["useState","useEffect","toast","jsxs","jsx"],"mappings":";;;;;AASA,MAAM,eAAe,wBAAC,EAAE,QAAQ,UAAU,SAAS,kBAAkB,yBAAyB;AAC1F,QAAM,CAAC,WAAW,YAAY,IAAIA,aAAAA,SAAS,SAAS;AACpD,QAAM,CAAC,eAAe,gBAAgB,IAAIA,aAAAA,SAAS,CAAA,CAAE;AACrD,QAAM,CAAC,eAAe,gBAAgB,IAAIA,aAAAA,SAAS,CAAA,CAAE;AACrD,QAAM,CAAC,SAAS,UAAU,IAAIA,aAAAA,SAAS,IAAI;AAC3C,QAAM,CAAC,aAAa,cAAc,IAAIA,aAAAA,SAAS,EAAE;AACjD,QAAM,QAAQ,aAAa,QAAQ,cAAc;AAEjDC,eAAAA,UAAU,MAAM;AACZ,iBAAA;AAAA,EACJ,GAAG,CAAC,MAAM,CAAC;AAEX,QAAM,eAAe,mCAAY;AAC7B,eAAW,IAAI;AACf,QAAI;AAEA,YAAM,WAAW,MAAM,MAAM,cAAc,QAAQ,aAAa;AAAA,QAC5D,SAAS,EAAE,iBAAiB,UAAU,KAAK,GAAA;AAAA,MAAG,CACjD;AAED,UAAI,SAAS,IAAI;AACb,cAAM,OAAO,MAAM,SAAS,KAAA;AAC5B,yBAAiB,KAAK,WAAW,EAAE;AACnC,yBAAiB,KAAK,WAAW,EAAE;AAAA,MACvC,OAAO;AACH,yBAAiB,CAAA,CAAE;AACnB,yBAAiB,CAAA,CAAE;AAAA,MACvB;AAAA,IACJ,SAAS,OAAO;AACZ,uBAAiB,CAAA,CAAE;AACnB,uBAAiB,CAAA,CAAE;AAAA,IACvB;AACA,eAAW,KAAK;AAAA,EACpB,GArBqB;AAuBrB,QAAM,qBAAqB,6BAAM;AAC7B,QAAI,CAAC,YAAa,QAAO;AACzB,WAAO,cAAc;AAAA,MAAO,CAAA,MACxB,EAAE,SAAS,YAAA,EAAc,SAAS,YAAY,aAAa;AAAA,IAAA;AAAA,EAEnE,GAL2B;AAO3B,QAAM,qBAAqB,6BAAM;AAC7B,QAAI,CAAC,YAAa,QAAO;AACzB,WAAO,cAAc;AAAA,MAAO,CAAA,MACxB,EAAE,KAAK,YAAA,EAAc,SAAS,YAAY,aAAa;AAAA,IAAA;AAAA,EAE/D,GAL2B;AAO3B,QAAM,iBAAiB,wBAAC,WAAW;AAC/B,UAAM,SAAS;AAAA,MACX,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA,IAAA;AAEb,WAAO,OAAO,MAAM,KAAK;AAAA,EAC7B,GARuB;AAUvB,QAAM,oBAAoB,wBAAC,UAAU;AACjC,QAAI,SAAS,IAAS,SAAQ,QAAQ,KAAS,QAAQ,CAAC,IAAI;AAC5D,QAAI,SAAS,IAAM,SAAQ,QAAQ,KAAM,QAAQ,CAAC,IAAI;AACtD,WAAO,MAAM,SAAA;AAAA,EACjB,GAJ0B;AAM1B,QAAM,oBAAoB,wBAAC,WAAW;AAClCC,MAAM,KAAK,GAAG,OAAO,QAAQ,6BAA6B;AAAA,EAC9D,GAF0B;AAQ1B,QAAM,kBAAkB,mBAAA;AACxB,QAAM,kBAAkB,mBAAA;AAExB,+CACK,OAAA,EAAI,WAAU,mBAAkB,SAAS,wBAAC,MAAM,EAAE,OAAO,cAAc,qBAAqB,QAAA,GAAnD,YACtC,UAAAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACX,UAAA;AAAA,IAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,gBACX,UAAA;AAAA,MAAAA,uCAAC,MAAA,EAAG,UAAA;AAAA,QAAAC,kCAAAA,IAAC,eAAA,EAAc;AAAA,QAAE;AAAA,MAAA,GAAkB;AAAA,MACvCD,kCAAAA,KAAC,QAAA,EAAK,WAAU,eAAc,UAAA;AAAA,QAAA;AAAA,QAAE;AAAA,MAAA,GAAS;AAAA,MACzCC,kCAAAA,IAAC,YAAO,WAAU,aAAY,SAAS,SAAS,UAAAA,kCAAAA,IAAC,WAAQ,EAAA,CAAE;AAAA,IAAA,GAC/D;AAAA,IAGAD,kCAAAA,KAAC,OAAA,EAAI,WAAU,QACX,UAAA;AAAA,MAAAA,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UACG,WAAW,OAAO,cAAc,YAAY,WAAW,EAAE;AAAA,UACzD,SAAS,6BAAM,aAAa,SAAS,GAA5B;AAAA,UAET,UAAA;AAAA,YAAAC,kCAAAA,IAAC,eAAA,EAAc;AAAA,YACfA,kCAAAA,IAAC,UAAK,UAAA,mBAAA,CAAgB;AAAA,YACtBA,kCAAAA,IAAC,QAAA,EAAK,WAAU,SAAS,wBAAc,OAAA,CAAO;AAAA,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,MAElDD,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UACG,WAAW,OAAO,cAAc,YAAY,WAAW,EAAE;AAAA,UACzD,SAAS,6BAAM,aAAa,SAAS,GAA5B;AAAA,UAET,UAAA;AAAA,YAAAC,kCAAAA,IAAC,UAAA,EAAS;AAAA,YACVA,kCAAAA,IAAC,UAAK,UAAA,kBAAA,CAAe;AAAA,YACrBA,kCAAAA,IAAC,QAAA,EAAK,WAAU,SAAS,wBAAc,OAAA,CAAO;AAAA,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,IAClD,GACJ;AAAA,IAGAD,kCAAAA,KAAC,OAAA,EAAI,WAAU,cACX,UAAA;AAAA,MAAAC,kCAAAA,IAAC,UAAA,EAAS;AAAA,MACVA,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UACG,MAAK;AAAA,UACL,aAAa,cAAc,YAAY,mBAAmB;AAAA,UAC1D,OAAO;AAAA,UACP,UAAU,wBAAC,MAAM,eAAe,EAAE,OAAO,KAAK,GAApC;AAAA,QAAoC;AAAA,MAAA;AAAA,IAClD,GACJ;AAAA,IAGAA,kCAAAA,IAAC,OAAA,EAAI,WAAU,WACV,UAAA,UACGA,kCAAAA,IAAC,OAAA,EAAI,WAAU,WAAU,UAAA,gBAAA,CAAa,IACtC,cAAc;AAAA;AAAA,MAEdA,kCAAAA,IAAC,OAAA,EAAI,WAAU,gBACV,UAAA,gBAAgB,WAAW,IACxBD,kCAAAA,KAAC,OAAA,EAAI,WAAU,eACX,UAAA;AAAA,QAAAC,kCAAAA,IAAC,eAAA,EAAc;AAAA,QACfA,kCAAAA,IAAC,OAAE,UAAA,2BAAA,CAAwB;AAAA,MAAA,EAAA,CAC/B,IAEA,gBAAgB,IAAI,CAAA,WAChBD,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UAEG,WAAU;AAAA,UACV,SAAS,6BAAM,oBAAoB,iBAAiB,OAAO,EAAE,GAApD;AAAA,UAET,UAAA;AAAA,YAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACV,UAAA;AAAA,cAAA,OAAO,SACJC,kCAAAA,IAAC,OAAA,EAAI,KAAK,OAAO,QAAQ,KAAI,GAAA,CAAG,IAEhCA,kCAAAA,IAAC,QAAA,CAAA,CAAO;AAAA,cAEZA,kCAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACG,WAAU;AAAA,kBACV,OAAO,EAAE,YAAY,eAAe,OAAO,MAAM,EAAA;AAAA,gBAAE;AAAA,cAAA;AAAA,YACvD,GACJ;AAAA,YACAD,kCAAAA,KAAC,OAAA,EAAI,WAAU,eACX,UAAA;AAAA,cAAAC,kCAAAA,IAAC,QAAA,EAAK,WAAU,eAAe,UAAA,OAAO,UAAS;AAAA,cAC9C,OAAO,YACJA,kCAAAA,IAAC,UAAK,WAAU,mBAAmB,iBAAO,SAAA,CAAS;AAAA,YAAA,GAE3D;AAAA,YACAA,kCAAAA,IAAC,OAAA,EAAI,WAAU,kBACX,UAAAA,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACG,WAAU;AAAA,gBACV,SAAS,wBAAC,MAAM;AAAE,oBAAE,gBAAA;AAAmB,oCAAkB,MAAM;AAAA,gBAAG,GAAzD;AAAA,gBACT,OAAM;AAAA,gBAEN,gDAAC,WAAA,CAAA,CAAU;AAAA,cAAA;AAAA,YAAA,EACf,CACJ;AAAA,UAAA;AAAA,QAAA;AAAA,QA7BK,OAAO;AAAA,MAAA,CA+BnB,EAAA,CAET;AAAA;AAAA;AAAA,MAGAA,kCAAAA,IAAC,OAAA,EAAI,WAAU,gBACV,UAAA,gBAAgB,WAAW,IACxBD,kCAAAA,KAAC,OAAA,EAAI,WAAU,eACX,UAAA;AAAA,QAAAC,kCAAAA,IAAC,UAAA,EAAS;AAAA,QACVA,kCAAAA,IAAC,OAAE,UAAA,0BAAA,CAAuB;AAAA,MAAA,EAAA,CAC9B,IAEA,gBAAgB,IAAI,CAAA,WAChBD,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UAEG,WAAU;AAAA,UACV,SAAS,6BAAM,sBAAsB,mBAAmB,OAAO,EAAE,GAAxD;AAAA,UAET,UAAA;AAAA,YAAAC,kCAAAA,IAAC,OAAA,EAAI,WAAU,eACV,UAAA,OAAO,OACJA,kCAAAA,IAAC,OAAA,EAAI,KAAK,OAAO,MAAM,KAAI,GAAA,CAAG,0CAE7B,QAAA,EAAM,UAAA,OAAO,KAAK,OAAO,CAAC,GAAE,EAAA,CAErC;AAAA,YACAD,kCAAAA,KAAC,OAAA,EAAI,WAAU,eACX,UAAA;AAAA,cAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,mBACX,UAAA;AAAA,gBAAAC,kCAAAA,IAAC,QAAA,EAAK,WAAU,eAAe,UAAA,OAAO,MAAK;AAAA,gBAC1C,OAAO,YAAYA,kCAAAA,IAAC,SAAA,EAAQ,WAAU,cAAA,CAAc;AAAA,cAAA,GACzD;AAAA,cACAD,kCAAAA,KAAC,OAAA,EAAI,WAAU,eACX,UAAA;AAAA,gBAAAA,kCAAAA,KAAC,QAAA,EAAK,WAAU,gBACZ,UAAA;AAAA,kBAAAC,kCAAAA,IAAC,SAAA,EAAQ;AAAA,kBAAE;AAAA,kBAAE,kBAAkB,OAAO,YAAY;AAAA,gBAAA,GACtD;AAAA,gBACC,OAAO,QACJD,kCAAAA,KAAC,QAAA,EAAK,WAAW,cAAc,OAAO,KAAK,aAAa,IACnD,UAAA;AAAA,kBAAA,OAAO,SAAS,WAAWC,kCAAAA,IAAC,SAAA,CAAA,CAAQ;AAAA,kBACpC,OAAO,SAAS,eAAeA,kCAAAA,IAAC,aAAA,CAAA,CAAY;AAAA,kBAC5C,OAAO;AAAA,gBAAA,EAAA,CACZ;AAAA,cAAA,EAAA,CAER;AAAA,YAAA,EAAA,CACJ;AAAA,UAAA;AAAA,QAAA;AAAA,QA5BK,OAAO;AAAA,MAAA,CA8BnB,EAAA,CAET;AAAA,OAER;AAAA,IAGAD,kCAAAA,KAAC,OAAA,EAAI,WAAU,WACX,UAAA;AAAA,MAAAA,uCAAC,QAAA,EACG,UAAA;AAAA,QAAAC,kCAAAA,IAAC,eAAA,EAAc;AAAA,QAAE;AAAA,QAAE,cAAc;AAAA,QAAO;AAAA,MAAA,GAC5C;AAAA,6CACC,QAAA,EACG,UAAA;AAAA,QAAAA,kCAAAA,IAAC,UAAA,EAAS;AAAA,QAAE;AAAA,QAAE,cAAc;AAAA,QAAO;AAAA,MAAA,EAAA,CACvC;AAAA,IAAA,EAAA,CACJ;AAAA,EAAA,EAAA,CACJ,EAAA,CACJ;AAER,GAhOqB;"}