{"version":3,"mappings":"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","names":["lazy","useState","useEffect","jsxs","jsx","Suspense"],"ignoreList":[],"sources":["../../../src/components/DJModal.js"],"sourcesContent":["// frontend/src/components/DJModal.js\r\n\r\nimport React, { useState, useEffect, useRef, lazy, Suspense } from 'react';\r\nconst ReactPlayer = lazy(() => import('react-player'));\r\nimport { FaPlay, FaPause, FaForward, FaPlus, FaTimes, FaMusic } from 'react-icons/fa';\r\n\r\nconst DJModal = ({ onClose, ws, roomSlug }) => {\r\n    const [queue, setQueue] = useState([]);\r\n    const [currentUrl, setCurrentUrl] = useState('');\r\n    const [inputUrl, setInputUrl] = useState('');\r\n    const [playing, setPlaying] = useState(false);\r\n\r\n    // KuyruÄŸa ekle\r\n    const addToQueue = () => {\r\n        if (!inputUrl) return;\r\n        const newQueue = [...queue, inputUrl];\r\n        setQueue(newQueue);\r\n        setInputUrl('');\r\n        // Socket ile herkese kuyruÄŸu gÃ¶nder\r\n        sendSignal('queue_update', { queue: newQueue });\r\n    };\r\n\r\n    const playNext = () => {\r\n        if (queue.length > 0) {\r\n            const next = queue[0];\r\n            const remaining = queue.slice(1);\r\n            setCurrentUrl(next);\r\n            setQueue(remaining);\r\n            setPlaying(true);\r\n\r\n            sendSignal('play_track', { url: next, queue: remaining });\r\n        }\r\n    };\r\n\r\n    // Socket Sinyalleri (CinemaModal ile benzer mantÄ±k)\r\n    const sendSignal = (action, payload) => {\r\n        if (ws.current?.readyState === WebSocket.OPEN) {\r\n            ws.current.send(JSON.stringify({ type: 'media_sync', action, payload }));\r\n        }\r\n    };\r\n\r\n    // Socket Dinleyici\r\n    useEffect(() => {\r\n        const handleMessage = (event) => {\r\n            const data = JSON.parse(event.data);\r\n            if (data.type === 'media_sync') {\r\n                if (data.action === 'queue_update') setQueue(data.payload.queue);\r\n                if (data.action === 'play_track') {\r\n                    setCurrentUrl(data.payload.url);\r\n                    setQueue(data.payload.queue);\r\n                    setPlaying(true);\r\n                }\r\n            }\r\n        };\r\n        ws.current?.addEventListener('message', handleMessage);\r\n        return () => ws.current?.removeEventListener('message', handleMessage);\r\n    }, [ws]);\r\n\r\n    useEffect(() => {\r\n        const handleEsc = (e) => { if (e.key === 'Escape') onClose(); };\r\n        window.addEventListener('keydown', handleEsc);\r\n        return () => window.removeEventListener('keydown', handleEsc);\r\n    }, [onClose]);\r\n\r\n    return (\r\n        <div style={styles.overlay} onClick={onClose}>\r\n            <div style={styles.modal} onClick={e => e.stopPropagation()}>\r\n                <div style={styles.header}>\r\n                    <h3>ðŸŽµ DJ OdasÄ±</h3>\r\n                    <button onClick={onClose} style={styles.closeBtn}><FaTimes /></button>\r\n                </div>\r\n\r\n                {/* Player (Gizli veya GÃ¶rÃ¼nÃ¼r) */}\r\n                <div style={styles.playerWrapper}>\r\n                    <Suspense fallback={<div style={{ color: '#fff', padding: '20px', textAlign: 'center' }}>Loading player...</div>}>\r\n                        <ReactPlayer url={currentUrl} playing={playing} controls width=\"100%\" height=\"200px\" />\r\n                    </Suspense>\r\n                </div>\r\n\r\n                <div style={styles.controls}>\r\n                    <input\r\n                        value={inputUrl}\r\n                        onChange={e => setInputUrl(e.target.value)}\r\n                        placeholder=\"YouTube ÅžarkÄ± Linki...\"\r\n                        style={styles.input}\r\n                    />\r\n                    <button onClick={addToQueue} style={styles.addBtn}><FaPlus /></button>\r\n                    <button onClick={playNext} style={styles.nextBtn}><FaForward /> SÄ±radaki</button>\r\n                </div>\r\n\r\n                <div style={styles.queueList}>\r\n                    <h4>SÄ±radakiler ({queue.length})</h4>\r\n                    {queue.map((link, i) => (\r\n                        <div key={i} style={styles.queueItem}>\r\n                            <FaMusic color=\"#ccc\" /> {link}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    overlay: { position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', background: 'rgba(0,0,0,0.8)', zIndex: 2000, display: 'flex', justifyContent: 'center', alignItems: 'center' },\r\n    modal: { background: '#2b2d31', width: '500px', borderRadius: '12px', padding: '20px' },\r\n    header: { display: 'flex', justifyContent: 'space-between', color: 'white', marginBottom: 20 },\r\n    closeBtn: { background: 'none', border: 'none', color: 'white', fontSize: '1.2em', cursor: 'pointer' },\r\n    playerWrapper: { marginBottom: 20, borderRadius: '8px', overflow: 'hidden' },\r\n    controls: { display: 'flex', gap: 10, marginBottom: 20 },\r\n    input: { flex: 1, padding: 8, borderRadius: 4, border: '1px solid #444', background: '#202225', color: 'white' },\r\n    addBtn: { padding: '8px 12px', background: '#5865f2', color: 'white', border: 'none', borderRadius: 4, cursor: 'pointer' },\r\n    nextBtn: { padding: '8px 12px', background: '#23a559', color: 'white', border: 'none', borderRadius: 4, cursor: 'pointer' },\r\n    queueList: { maxHeight: 200, overflowY: 'auto', color: '#ccc' },\r\n    queueItem: { padding: '8px', borderBottom: '1px solid #444', fontSize: '0.9em', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }\r\n};\r\n\r\nexport default React.memo(DJModal);\r\n\r\n"],"file":"DJModal-CAGaD54L.js"}