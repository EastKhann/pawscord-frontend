import{r as n,d as e}from"./react-core-DrOm_csO.js";import{t as v}from"./index-BYhWpPLp.js";const B=({apiBaseUrl:u,username:k,onClose:E})=>{const[l,b]=n.useState([]),[i,h]=n.useState([]),[f,g]=n.useState(!0),[c,d]=n.useState("all"),[r,m]=n.useState("all");n.useEffect(()=>{y(),C()},[k]);const y=async()=>{try{g(!0);const t=localStorage.getItem("access_token"),a=await fetch(`${u}/api/user/achievements/`,{headers:{Authorization:`Bearer ${t}`}});if(a.ok){const o=await a.json();b(o.achievements||[])}else v.error("âŒ BaÅŸarÄ±lar yÃ¼klenemedi")}catch(t){console.error("Fetch achievements error:",t),v.error("âŒ BaÄŸlantÄ± hatasÄ±")}finally{g(!1)}},C=async()=>{try{const t=localStorage.getItem("access_token"),a=await fetch(`${u}/api/user/badges/`,{headers:{Authorization:`Bearer ${t}`}});if(a.ok){const o=await a.json();h(o.badges||[])}}catch(t){console.error("Fetch badges error:",t)}},N=l.filter(t=>{const a=c==="all"||c==="unlocked"&&t.unlocked||c==="locked"&&!t.unlocked,o=r==="all"||t.category===r;return a&&o}),s={total:l.length,unlocked:l.filter(t=>t.unlocked).length,locked:l.filter(t=>!t.unlocked).length,progress:l.length>0?Math.round(l.filter(t=>t.unlocked).length/l.length*100):0},p=t=>{const a={common:"#95a5a6",uncommon:"#3498db",rare:"#9b59b6",epic:"#e74c3c",legendary:"#f39c12"};return a[t]||a.common},w=t=>t==="legendary"?"0 0 20px rgba(243, 156, 18, 0.6)":t==="epic"?"0 0 15px rgba(231, 76, 60, 0.5)":t==="rare"?"0 0 10px rgba(155, 89, 182, 0.4)":"none";return e.createElement("div",{className:"achievements-overlay",onClick:E},e.createElement("div",{className:"achievements-panel",onClick:t=>t.stopPropagation()},e.createElement("div",{className:"achievements-header"},e.createElement("h2",null,"ğŸ† BaÅŸarÄ±lar & Rozetler"),e.createElement("button",{className:"close-btn",onClick:E},"âœ•")),e.createElement("div",{className:"achievements-stats"},e.createElement("div",{className:"stat-item"},e.createElement("span",{className:"stat-icon"},"ğŸ¯"),e.createElement("div",{className:"stat-info"},e.createElement("span",{className:"stat-value"},s.unlocked,"/",s.total),e.createElement("span",{className:"stat-label"},"BaÅŸarÄ±"))),e.createElement("div",{className:"stat-item"},e.createElement("span",{className:"stat-icon"},"ğŸ“Š"),e.createElement("div",{className:"stat-info"},e.createElement("span",{className:"stat-value"},s.progress,"%"),e.createElement("span",{className:"stat-label"},"Tamamlanma"))),e.createElement("div",{className:"stat-item"},e.createElement("span",{className:"stat-icon"},"ğŸ–ï¸"),e.createElement("div",{className:"stat-info"},e.createElement("span",{className:"stat-value"},i.length),e.createElement("span",{className:"stat-label"},"Rozet")))),e.createElement("div",{className:"progress-section"},e.createElement("div",{className:"progress-bar"},e.createElement("div",{className:"progress-fill",style:{width:`${s.progress}%`}})),e.createElement("span",{className:"progress-text"},s.progress,"% Complete")),e.createElement("div",{className:"achievements-filters"},e.createElement("div",{className:"filter-group"},e.createElement("button",{className:c==="all"?"active":"",onClick:()=>d("all")},"TÃ¼mÃ¼ (",s.total,")"),e.createElement("button",{className:c==="unlocked"?"active":"",onClick:()=>d("unlocked")},"âœ“ AÃ§Ä±k (",s.unlocked,")"),e.createElement("button",{className:c==="locked"?"active":"",onClick:()=>d("locked")},"ğŸ”’ Kilitli (",s.locked,")")),e.createElement("div",{className:"category-group"},e.createElement("button",{className:r==="all"?"active":"",onClick:()=>m("all")},"TÃ¼m Kategoriler"),e.createElement("button",{className:r==="social"?"active":"",onClick:()=>m("social")},"ğŸ‘¥ Sosyal"),e.createElement("button",{className:r==="activity"?"active":"",onClick:()=>m("activity")},"âš¡ Aktivite"),e.createElement("button",{className:r==="special"?"active":"",onClick:()=>m("special")},"â­ Ã–zel"))),e.createElement("div",{className:"achievements-content"},i.length>0&&e.createElement("div",{className:"badges-section"},e.createElement("h3",null,"ğŸ–ï¸ Rozetler"),e.createElement("div",{className:"badges-grid"},i.map(t=>e.createElement("div",{key:t.id,className:"badge-card",title:t.description},e.createElement("div",{className:"badge-icon"},t.icon),e.createElement("div",{className:"badge-name"},t.name))))),e.createElement("div",{className:"achievements-grid"},f?e.createElement("div",{className:"loading-state"},e.createElement("div",{className:"spinner"}),e.createElement("p",null,"YÃ¼kleniyor...")):N.length===0?e.createElement("div",{className:"empty-state"},e.createElement("p",null,"ğŸ¯ BaÅŸarÄ± bulunamadÄ±")):N.map(t=>e.createElement("div",{key:t.id,className:`achievement-card ${t.unlocked?"unlocked":"locked"} ${t.rarity}`,style:{boxShadow:t.unlocked?w(t.rarity):"none"}},e.createElement("div",{className:"achievement-icon-wrapper"},e.createElement("div",{className:"achievement-icon"},t.icon||"ğŸ†"),t.unlocked&&e.createElement("div",{className:"unlocked-badge"},"âœ“")),e.createElement("div",{className:"achievement-info"},e.createElement("div",{className:"achievement-name"},t.name),e.createElement("div",{className:"achievement-description"},t.description),t.progress!==void 0&&!t.unlocked&&e.createElement("div",{className:"achievement-progress"},e.createElement("div",{className:"mini-progress-bar"},e.createElement("div",{className:"mini-progress-fill",style:{width:`${t.current/t.target*100}%`,backgroundColor:p(t.rarity)}})),e.createElement("span",{className:"progress-label"},t.current,"/",t.target)),t.unlocked&&t.unlocked_at&&e.createElement("div",{className:"unlocked-date"},"AÃ§Ä±ldÄ±: ",new Date(t.unlocked_at).toLocaleDateString("tr-TR"))),e.createElement("div",{className:"rarity-badge",style:{backgroundColor:p(t.rarity),color:"white"}},t.rarity||"common")))))))};export{B as default};
