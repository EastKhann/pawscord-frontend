import{r as n,n as e}from"./react-core-Cj7FUMmY.js";import{t as p}from"./index-CWvCRPrH.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-By68PLJG.js";import"./router-vendor-QeioVw-9.js";import"./icons-vendor-8IeoBGEh.js";import"./state-vendor-DGcbxrkI.js";import"./crypto-vendor-DK-7ILyQ.js";const A=({apiBaseUrl:r,token:g,onJoinServer:u})=>{const[t,y]=n.useState([]),[h,N]=n.useState([]),[f,m]=n.useState(!0),[s,i]=n.useState({category:"all",language:"all",size:"all",search:""}),[b]=n.useState([{value:"all",label:"ğŸŒ TÃ¼mÃ¼"},{value:"gaming",label:"ğŸ® Oyun"},{value:"music",label:"ğŸµ MÃ¼zik"},{value:"education",label:"ğŸ“š EÄŸitim"},{value:"technology",label:"ğŸ’» Teknoloji"},{value:"art",label:"ğŸ¨ Sanat"},{value:"anime",label:"ğŸ­ Anime"},{value:"memes",label:"ğŸ˜‚ Meme"},{value:"community",label:"ğŸ‘¥ Topluluk"}]);n.useEffect(()=>{k(),S()},[s]);const c=async(a,l={})=>{const d={Authorization:`Bearer ${g}`,"Content-Type":"application/json",...l.headers},o=await fetch(a,{...l,headers:d});if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.json()},k=async()=>{try{m(!0);const a=new URLSearchParams;s.category!=="all"&&a.append("category",s.category),s.language!=="all"&&a.append("language",s.language),s.size!=="all"&&a.append("size",s.size),s.search&&a.append("search",s.search);const l=await c(`${r}/discovery/servers/?${a}`);y(l.servers||[])}catch{}finally{m(!1)}},S=async()=>{try{const a=await c(`${r}/discovery/featured/`);N(a.servers||[])}catch{}},x=async a=>{try{await c(`${r}/servers/${a}/join/`,{method:"POST"}),p.success("âœ… Sunucuya katÄ±ldÄ±nÄ±z!"),u&&u(a)}catch{p.error("âŒ Sunucuya katÄ±lÄ±namadÄ±!")}},j=a=>a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a,v=a=>a>=1e3?`${(a/1e3).toFixed(1)}K`:a;return f&&t.length===0?e.jsx("div",{className:"discovery-page",children:e.jsx("div",{className:"loading",children:"ğŸ”„ Sunucular yÃ¼kleniyor..."})}):e.jsxs("div",{className:"discovery-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"ğŸ” Sunucu KeÅŸfet"}),e.jsx("p",{children:"Ä°lgi alanlarÄ±na uygun yeni topluluklar bul ve katÄ±l"})]}),e.jsxs("div",{className:"search-filters",children:[e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:"ğŸ” Sunucu ara...",value:s.search,onChange:a=>i({...s,search:a.target.value})})}),e.jsxs("div",{className:"filters-row",children:[e.jsx("select",{value:s.category,onChange:a=>i({...s,category:a.target.value}),children:b.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsxs("select",{value:s.size,onChange:a=>i({...s,size:a.target.value}),children:[e.jsx("option",{value:"all",children:"ğŸ‘¥ TÃ¼m Boyutlar"}),e.jsx("option",{value:"small",children:"KÃ¼Ã§Ã¼k (0-100)"}),e.jsx("option",{value:"medium",children:"Orta (100-1K)"}),e.jsx("option",{value:"large",children:"BÃ¼yÃ¼k (1K-10K)"}),e.jsx("option",{value:"huge",children:"Ã‡ok BÃ¼yÃ¼k (10K+)"})]}),e.jsxs("select",{value:s.language,onChange:a=>i({...s,language:a.target.value}),children:[e.jsx("option",{value:"all",children:"ğŸŒ TÃ¼m Diller"}),e.jsx("option",{value:"tr",children:"ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e"}),e.jsx("option",{value:"en",children:"ğŸ‡ºğŸ‡¸ English"}),e.jsx("option",{value:"de",children:"ğŸ‡©ğŸ‡ª Deutsch"}),e.jsx("option",{value:"fr",children:"ğŸ‡«ğŸ‡· FranÃ§ais"}),e.jsx("option",{value:"es",children:"ğŸ‡ªğŸ‡¸ EspaÃ±ol"})]})]})]}),h.length>0&&e.jsxs("div",{className:"featured-section",children:[e.jsx("h2",{children:"â­ Ã–ne Ã‡Ä±kanlar"}),e.jsx("div",{className:"featured-grid",children:h.map(a=>e.jsxs("div",{className:"featured-card",children:[e.jsx("div",{className:"featured-badge",children:"â­ Ã–ne Ã‡Ä±kan"}),e.jsx("img",{src:a.icon||"/default-server.png",alt:a.name,className:"server-icon-large"}),e.jsx("h3",{children:a.name}),e.jsx("p",{className:"server-description",children:a.description}),e.jsxs("div",{className:"server-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-icon",children:"ğŸ‘¥"}),e.jsxs("span",{children:[j(a.member_count)," Ã¼ye"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-icon",children:"ğŸŸ¢"}),e.jsxs("span",{children:[v(a.online_count)," Ã§evrimiÃ§i"]})]})]}),e.jsx("button",{className:"join-btn",onClick:()=>x(a.id),children:"ğŸš€ KatÄ±l"})]},a.id))})]}),e.jsxs("div",{className:"servers-section",children:[e.jsx("h2",{children:"ğŸŒ TÃ¼m Sunucular"}),t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"AramanÄ±za uygun sunucu bulunamadÄ±"})}):e.jsx("div",{className:"servers-grid",children:t.map(a=>e.jsxs("div",{className:"server-card",children:[e.jsxs("div",{className:"server-header",children:[e.jsx("img",{src:a.icon||"/default-server.png",alt:a.name,className:"server-icon"}),e.jsxs("div",{className:"server-info",children:[e.jsx("h3",{children:a.name}),e.jsxs("div",{className:"server-meta",children:[e.jsx("span",{className:"category-badge",children:a.category}),a.verified&&e.jsx("span",{className:"verified-badge",children:"âœ“ DoÄŸrulanmÄ±ÅŸ"})]})]})]}),e.jsx("p",{className:"server-description",children:a.description||"AÃ§Ä±klama yok"}),e.jsxs("div",{className:"server-stats-row",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-icon",children:"ğŸ‘¥"}),e.jsx("span",{children:j(a.member_count)})]}),e.jsxs("div",{className:"stat-item online",children:[e.jsx("span",{className:"stat-icon",children:"ğŸŸ¢"}),e.jsx("span",{children:v(a.online_count)})]})]}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"server-tags",children:a.tags.slice(0,3).map((l,d)=>e.jsx("span",{className:"tag",children:l},d))}),e.jsx("button",{className:"join-btn-small",onClick:()=>x(a.id),children:"KatÄ±l"})]},a.id))})]})]})};export{A as default};
