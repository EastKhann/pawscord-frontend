import{r as c}from"./react-core-B6hadH-M.js";import{r as w}from"./index-D_6pZib5.js";const L=({username:m,onEdit:f,compact:k=!1})=>{const[t,v]=c.useState(null),[N,h]=c.useState(!0),E=w;if(c.useEffect(()=>{(async()=>{try{const n=localStorage.getItem("access_token"),b=m?`${E}/profile/card/${m}/`:`${E}/profile/card/`,s=await fetch(b,{headers:{Authorization:`Bearer ${n}`}});s.ok&&v(await s.json())}catch(n){console.error("Failed to load profile:",n)}h(!1)})()},[m,E]),N)return React.createElement("div",{className:"profile-card loading"},React.createElement("div",{className:"loading-spinner"}));if(!t)return React.createElement("div",{className:"profile-card error"},"Profil yÃ¼klenemedi");const p=t.custom_colors||t.theme_colors;return React.createElement("div",{className:`profile-card ${k?"compact":""}`,style:{"--primary":p.primary,"--secondary":p.secondary,"--accent":p.accent,"--bg":p.background}},React.createElement("div",{className:"card-banner",style:{backgroundImage:t.banner?`url(${t.banner})`:void 0,backgroundColor:t.banner_color}},f&&React.createElement("button",{className:"edit-btn",onClick:f},"âœï¸")),React.createElement("div",{className:"card-avatar"},React.createElement("img",{src:t.avatar||"/default-avatar.png",alt:""}),t.status_text&&React.createElement("div",{className:"status-indicator",title:t.status_text},t.status_text.slice(0,1))),React.createElement("div",{className:"card-content"},t.badges&&t.badges.length>0&&React.createElement("div",{className:"card-badges"},t.badges.map(l=>{const n=T[l];return n?React.createElement("span",{key:l,className:"badge",style:{backgroundColor:n.color},title:n.name},n.icon):null})),React.createElement("h2",{className:"card-name"},t.display_name||t.username),React.createElement("p",{className:"card-username"},"@",t.username),t.bio&&React.createElement("p",{className:"card-bio"},t.bio),React.createElement("div",{className:"card-stats"},React.createElement("div",{className:"stat"},React.createElement("span",{className:"stat-value"},"Lv.",t.level),React.createElement("span",{className:"stat-label"},"Seviye")),React.createElement("div",{className:"stat"},React.createElement("span",{className:"stat-value"},t.xp?.toLocaleString()),React.createElement("span",{className:"stat-label"},"XP")),React.createElement("div",{className:"stat"},React.createElement("span",{className:"stat-value"},new Date(t.created_at).toLocaleDateString("tr-TR",{month:"short",year:"numeric"})),React.createElement("span",{className:"stat-label"},"KatÄ±lÄ±m"))),t.links&&t.links.length>0&&React.createElement("div",{className:"card-links"},t.links.map((l,n)=>React.createElement("a",{key:n,href:l.url,target:"_blank",rel:"noopener noreferrer",className:"link-item",title:l.name},l.icon))),t.spotify_connected&&React.createElement("div",{className:"spotify-badge"},"ðŸŽµ Spotify BaÄŸlÄ±"),t.is_premium&&React.createElement("div",{className:"premium-badge"},"ðŸ’Ž Premium")))},T={early_supporter:{name:"Early Supporter",icon:"ðŸŒŸ",color:"#FFD700"},premium:{name:"Premium",icon:"ðŸ’Ž",color:"#a855f7"},verified:{name:"Verified",icon:"âœ“",color:"#5865F2"},developer:{name:"Developer",icon:"ðŸ› ï¸",color:"#3b82f6"},bug_hunter:{name:"Bug Hunter",icon:"ðŸ›",color:"#22c55e"},top_contributor:{name:"Top Contributor",icon:"ðŸ†",color:"#f59e0b"},server_owner:{name:"Server Owner",icon:"ðŸ‘‘",color:"#ef4444"},moderator:{name:"Moderator",icon:"ðŸ›¡ï¸",color:"#10b981"},artist:{name:"Artist",icon:"ðŸŽ¨",color:"#ec4899"},streamer:{name:"Streamer",icon:"ðŸ“º",color:"#8b5cf6"}},x=({onClose:m,onSave:f})=>{const[k,t]=c.useState(null),[v,N]=c.useState([]),[h,E]=c.useState([]),[p,l]=c.useState(!0),[n,b]=c.useState(!1),[s,y]=c.useState("appearance"),[o,u]=c.useState({banner:"",banner_color:"#5865F2",theme:"default",bio:"",links:[]}),[_,$]=c.useState([]),[g,S]=c.useState({name:"",url:""}),d=w,C=c.useCallback(async()=>{try{const e=localStorage.getItem("access_token"),[a,i,R]=await Promise.all([fetch(`${d}/profile/card/`,{headers:{Authorization:`Bearer ${e}`}}),fetch(`${d}/profile/themes/`,{headers:{Authorization:`Bearer ${e}`}}),fetch(`${d}/profile/badges/`,{headers:{Authorization:`Bearer ${e}`}})]);if(a.ok){const r=await a.json();t(r),u({banner:r.banner||"",banner_color:r.banner_color||"#5865F2",theme:r.theme||"default",bio:r.bio||"",links:r.links||[]}),$(r.badges||[])}if(i.ok){const r=await i.json();N(r.themes||[])}if(R.ok){const r=await R.json();E(r.badges||[])}}catch(e){console.error("Failed to load data:",e)}l(!1)},[d]),B=async()=>{b(!0);try{const e=localStorage.getItem("access_token"),a=await fetch(`${d}/profile/card/update/`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(o)});await fetch(`${d}/profile/badges/set/`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({badges:_})}),a.ok&&(f?.(),m())}catch(e){console.error("Save failed:",e)}b(!1)},A=async()=>{if(g.url)try{const e=localStorage.getItem("access_token"),a=await fetch(`${d}/profile/links/add/`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(g)});if(a.ok){const i=await a.json();u(R=>({...R,links:i.links})),S({name:"",url:""})}}catch(e){console.error("Add link failed:",e)}},P=async e=>{try{const a=localStorage.getItem("access_token"),i=await fetch(`${d}/profile/links/${e}/remove/`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}});if(i.ok){const R=await i.json();u(r=>({...r,links:R.links}))}}catch(a){console.error("Remove link failed:",a)}},z=e=>{$(a=>a.includes(e)?a.filter(i=>i!==e):a.length>=3?a:[...a,e])};return c.useEffect(()=>{C()},[C]),p?React.createElement("div",{className:"profile-editor-modal"},React.createElement("div",{className:"editor-loading"},React.createElement("div",{className:"loading-spinner"}))):React.createElement("div",{className:"profile-editor-overlay",onClick:e=>e.target===e.currentTarget&&m()},React.createElement("div",{className:"profile-editor-modal"},React.createElement("div",{className:"editor-header"},React.createElement("h2",null,"ðŸŽ¨ Profil KartÄ± DÃ¼zenle"),React.createElement("button",{className:"close-btn",onClick:m},"Ã—")),React.createElement("div",{className:"editor-tabs"},React.createElement("button",{className:s==="appearance"?"active":"",onClick:()=>y("appearance")},"ðŸŽ¨ GÃ¶rÃ¼nÃ¼m"),React.createElement("button",{className:s==="badges"?"active":"",onClick:()=>y("badges")},"ðŸ… Rozetler"),React.createElement("button",{className:s==="links"?"active":"",onClick:()=>y("links")},"ðŸ”— BaÄŸlantÄ±lar")),React.createElement("div",{className:"editor-content"},s==="appearance"&&React.createElement("div",{className:"appearance-tab"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Banner URL"),React.createElement("input",{type:"url",placeholder:"https://...",value:o.banner,onChange:e=>u(a=>({...a,banner:e.target.value}))})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Banner Rengi (resim yoksa)"),React.createElement("div",{className:"color-picker"},React.createElement("input",{type:"color",value:o.banner_color,onChange:e=>u(a=>({...a,banner_color:e.target.value}))}),React.createElement("span",null,o.banner_color))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Tema"),React.createElement("div",{className:"theme-grid"},v.map(e=>React.createElement("div",{key:e.id,className:`theme-option ${o.theme===e.id?"selected":""}`,onClick:()=>u(a=>({...a,theme:e.id})),style:{background:`linear-gradient(135deg, ${e.primary}, ${e.secondary})`}},React.createElement("span",{className:"theme-name"},e.id),React.createElement("div",{className:"theme-colors"},React.createElement("span",{style:{backgroundColor:e.accent}})))))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Biyografi"),React.createElement("textarea",{placeholder:"Kendiniz hakkÄ±nda bir ÅŸeyler yazÄ±n...",value:o.bio,onChange:e=>u(a=>({...a,bio:e.target.value.slice(0,500)})),rows:4,maxLength:500}),React.createElement("span",{className:"char-count"},o.bio.length,"/500"))),s==="badges"&&React.createElement("div",{className:"badges-tab"},React.createElement("p",{className:"badges-hint"},"Profilinizde gÃ¶rÃ¼ntÃ¼lenecek en fazla 3 rozet seÃ§in"),React.createElement("div",{className:"badges-grid"},h.map(e=>React.createElement("div",{key:e.id,className:`badge-option ${e.owned?"":"locked"} ${_.includes(e.id)?"selected":""}`,onClick:()=>e.owned&&z(e.id)},React.createElement("span",{className:"badge-icon",style:{backgroundColor:e.color}},e.icon),React.createElement("span",{className:"badge-name"},e.name),!e.owned&&React.createElement("span",{className:"lock-icon"},"ðŸ”’"))))),s==="links"&&React.createElement("div",{className:"links-tab"},React.createElement("p",{className:"links-hint"},"En fazla 5 baÄŸlantÄ± ekleyebilirsiniz"),React.createElement("div",{className:"current-links"},o.links.map((e,a)=>React.createElement("div",{key:a,className:"link-row"},React.createElement("span",{className:"link-icon"},e.icon),React.createElement("span",{className:"link-name"},e.name),React.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"link-url"},e.url.slice(0,40),"..."),React.createElement("button",{className:"remove-link",onClick:()=>P(a)},"Ã—")))),o.links.length<5&&React.createElement("div",{className:"add-link-form"},React.createElement("input",{type:"text",placeholder:"Ä°sim (opsiyonel)",value:g.name,onChange:e=>S(a=>({...a,name:e.target.value}))}),React.createElement("input",{type:"url",placeholder:"URL",value:g.url,onChange:e=>S(a=>({...a,url:e.target.value}))}),React.createElement("button",{onClick:A},"Ekle")))),React.createElement("div",{className:"editor-preview"},React.createElement("h4",null,"Ã–nizleme"),React.createElement(L,{username:k?.username,compact:!0})),React.createElement("div",{className:"editor-footer"},React.createElement("button",{className:"cancel-btn",onClick:m},"Ä°ptal"),React.createElement("button",{className:"save-btn",onClick:B,disabled:n},n?"Kaydediliyor...":"Kaydet"))))};export{L as ProfileCard,x as ProfileCardEditor,L as default};
