import{r,y as z,l as S}from"./react-core-B6hadH-M.js";import{t as l}from"./index-D_6pZib5.js";const T=({fetchWithAuth:s,apiBaseUrl:c,channelSlug:d,onClose:m})=>{const[_,g]=r.useState([]),[p,f]=r.useState([]),[u,y]=r.useState(!0),[I,w]=r.useState(null),[R,x]=r.useState({}),k=[{key:"view_channel",name:"Kanalƒ± G√∂r√ºnt√ºle",icon:"üëÅÔ∏è"},{key:"send_messages",name:"Mesaj G√∂nder",icon:"üí¨"},{key:"attach_files",name:"Dosya Ekle",icon:"üìé"},{key:"embed_links",name:"Link G√∂mme",icon:"üîó"},{key:"add_reactions",name:"Tepki Ekle",icon:"üòÄ"},{key:"use_voice",name:"Sesli Kullan",icon:"üé§"},{key:"speak",name:"Konu≈ü",icon:"üó£Ô∏è"},{key:"mute_members",name:"Susturma",icon:"üîá"},{key:"manage_messages",name:"Mesaj Y√∂netimi",icon:"‚öôÔ∏è"},{key:"manage_channel",name:"Kanal Y√∂netimi",icon:"üõ†Ô∏è"}];r.useEffect(()=>{E(),b()},[d]);const E=async()=>{try{y(!0);const e=await s(`${c}/channels/${d}/permissions/`);if(e.ok){const n=await e.json();g(n);const o={};n.forEach(a=>{o[a.role_id]||(o[a.role_id]={}),o[a.role_id][a.permission]=a.value}),x(o)}}catch(e){console.error("ƒ∞zin y√ºkleme hatasƒ±:",e),l.error("ƒ∞zinler y√ºklenemedi")}finally{y(!1)}},b=async()=>{try{const e=await s(`${c}/servers/roles/list/`);if(e.ok){const n=await e.json();f(n)}}catch(e){console.error("Rol y√ºkleme hatasƒ±:",e)}},v=async(e,n,o)=>{try{(await s(`${c}/channels/permissions/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_slug:d,role_id:e,permission:n,value:o})})).ok?(l.success("ƒ∞zin g√ºncellendi"),x(i=>({...i,[e]:{...i[e],[n]:o}}))):l.error("ƒ∞zin g√ºncellenemedi")}catch(a){console.error("ƒ∞zin g√ºncelleme hatasƒ±:",a),l.error("Bir hata olu≈ütu")}},h=(e,n)=>R[e]?.[n],C=e=>e===!0?{icon:"‚úÖ",color:"#43b581",text:"ƒ∞zin Ver"}:e===!1?{icon:"‚ùå",color:"#ed4245",text:"Reddet"}:{icon:"‚ûñ",color:"#99aab5",text:"Varsayƒ±lan"};return React.createElement("div",{style:t.overlay,onClick:m},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(z,{style:{color:"#faa61a"}}),React.createElement("h2",{style:{margin:0}},"Kanal ƒ∞zinleri")),React.createElement(S,{onClick:m,style:t.closeBtn})),React.createElement("div",{style:t.content},u?React.createElement("div",{style:t.loading},"Y√ºkleniyor..."):React.createElement("div",{style:t.matrix},React.createElement("div",{style:t.matrixHeader},React.createElement("div",{style:t.headerCell},"ƒ∞zin"),p.map(e=>React.createElement("div",{key:e.id,style:t.headerCell},React.createElement("div",{style:{...t.roleTag,backgroundColor:e.color||"#5865f2"}},e.name)))),k.map(e=>React.createElement("div",{key:e.key,style:t.matrixRow},React.createElement("div",{style:t.permissionName},React.createElement("span",{style:{fontSize:"18px",marginRight:"8px"}},e.icon),e.name),p.map(n=>{const o=h(n.id,e.key),a=C(o);return React.createElement("div",{key:n.id,style:t.permissionCell},React.createElement("button",{onClick:()=>{const i=o===null?!0:o===!0?!1:null;v(n.id,e.key,i)},style:{...t.permissionBtn,color:a.color},title:a.text},React.createElement("span",{style:{fontSize:"20px"}},a.icon)))}))))),React.createElement("div",{style:t.footer},React.createElement("div",{style:t.legend},React.createElement("div",{style:t.legendItem},React.createElement("span",{style:{color:"#43b581",fontSize:"18px"}},"‚úÖ"),React.createElement("span",null,"ƒ∞zin Ver")),React.createElement("div",{style:t.legendItem},React.createElement("span",{style:{color:"#ed4245",fontSize:"18px"}},"‚ùå"),React.createElement("span",null,"Reddet")),React.createElement("div",{style:t.legendItem},React.createElement("span",{style:{color:"#99aab5",fontSize:"18px"}},"‚ûñ"),React.createElement("span",null,"Varsayƒ±lan"))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"95%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},matrix:{display:"flex",flexDirection:"column",gap:"2px"},matrixHeader:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(100px, 1fr))",gap:"2px",marginBottom:"10px",position:"sticky",top:0,backgroundColor:"#1e1e1e",zIndex:10,paddingBottom:"10px"},headerCell:{padding:"12px",fontWeight:"600",textAlign:"center",backgroundColor:"#2c2f33",borderRadius:"4px"},roleTag:{padding:"6px 12px",borderRadius:"12px",fontSize:"13px",fontWeight:"600",color:"#fff"},matrixRow:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(100px, 1fr))",gap:"2px",marginBottom:"2px"},permissionName:{padding:"12px",backgroundColor:"#2c2f33",borderRadius:"4px",display:"flex",alignItems:"center",fontWeight:"500"},permissionCell:{padding:"12px",backgroundColor:"#2c2f33",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},permissionBtn:{backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background-color 0.2s"},footer:{padding:"20px",borderTop:"1px solid #333"},legend:{display:"flex",gap:"30px",justifyContent:"center"},legendItem:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},loading:{textAlign:"center",padding:"40px",color:"#888"}};export{T as default};
