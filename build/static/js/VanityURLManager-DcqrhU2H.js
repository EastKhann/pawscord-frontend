import{r as i,b as e}from"./react-core-9vc7GIjk.js";import{aV as S,m as L,f as z,a as C}from"./icons-vendor-BHKL7tCa.js";import{t as a}from"./index-BgtTyGBp.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const $=({onClose:g,fetchWithAuth:d,apiBaseUrl:p,serverId:l,embedded:E=!1})=>{const[r,m]=i.useState(""),[u,s]=i.useState(!1),[c,y]=i.useState(null),[h,b]=i.useState(!0);i.useEffect(()=>{f()},[l]);const f=async()=>{b(!0);try{const t=await d(`${p}/vanity/get/${l}/`);if(t.ok){const o=await t.json();o.exists?(y(o),m(o.path)):y(null)}}catch(t){console.error("Vanity URL y√ºkleme hatasƒ±:",t)}finally{b(!1)}},k=async()=>{if(!r.trim()){a.warning("L√ºtfen bir vanity path girin");return}if(r.length<3){a.warning("Path en az 3 karakter olmalƒ±");return}s(!0);try{const t=await d(`${p}/vanity/create/`,{method:"POST",body:JSON.stringify({path:r,server_id:l})});if(t.ok){const o=await t.json();a.success("Vanity URL olu≈üturuldu!"),f()}else{const o=await t.json();a.error("Hata: "+(o.error||"Bu path zaten kullanƒ±lƒ±yor"))}}catch(t){console.error("Vanity URL error:",t),a.error("Sunucu hatasƒ±")}finally{s(!1)}},w=async()=>{if(window.confirm("Vanity URL'i silmek istediƒüinize emin misiniz?")){s(!0);try{const t=await d(`${p}/vanity/delete/${l}/`,{method:"DELETE"});if(t.ok)a.success("Vanity URL silindi!"),y(null),m("");else{const o=await t.json();a.error("Hata: "+(o.error||"Silme ba≈üarƒ±sƒ±z"))}}catch(t){console.error("Vanity URL silme hatasƒ±:",t),a.error("Sunucu hatasƒ±")}finally{s(!1)}}},v=()=>{const t=`https://www.pawscord.com/join/${c.path}`;navigator.clipboard.writeText(t),a.success("URL kopyalandƒ±!")},x=e.createElement(e.Fragment,null,h?e.createElement("div",{style:n.description},"Y√ºkleniyor..."):e.createElement(e.Fragment,null,e.createElement("div",{style:n.description},"Sunucunuz i√ßin √∂zel bir davet URL'i olu≈üturun.",e.createElement("br",null),e.createElement("span",{style:{fontSize:"0.9em",color:"#72767d"}},"Format: ",e.createElement("strong",{style:{color:"#5865f2"}},"pawscord.com/join/yourpath"))),c&&e.createElement("div",{style:n.existingSection},e.createElement("div",{style:n.existingLabel},"üìå Mevcut Vanity URL:"),e.createElement("div",{style:n.existingUrl},e.createElement("span",{style:n.urlText},"pawscord.com/join/",c.path),e.createElement("div",{style:{display:"flex",gap:"10px"}},e.createElement("button",{onClick:v,style:n.copyButton},e.createElement(S,null)," Kopyala"),e.createElement("button",{onClick:w,style:n.deleteButton,disabled:u},e.createElement(L,null)," Sil")))),e.createElement("div",{style:n.inputGroup},e.createElement("span",{style:n.prefix},"pawscord.com/join/"),e.createElement("input",{type:"text",value:r,onChange:t=>m(t.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")),placeholder:"myserver",style:n.input,maxLength:32})),e.createElement("div",{style:{fontSize:"0.85em",color:"#72767d",marginTop:"8px",marginBottom:"15px"}},"‚Ä¢ En az 3, en fazla 32 karakter",e.createElement("br",null),"‚Ä¢ Sadece k√º√ß√ºk harf, rakam ve tire (-) kullanƒ±labilir",e.createElement("br",null),"‚Ä¢ Sistem kelimeleri (api, admin, vb.) kullanƒ±lamaz"),e.createElement("button",{onClick:k,disabled:u||!r.trim(),style:n.createButton},u?"ƒ∞≈üleniyor...":c?"üîó Vanity URL G√ºncelle":"üîó Vanity URL Olu≈ütur")));return E?e.createElement("div",{style:n.content},x):e.createElement("div",{style:n.overlay,onClick:g},e.createElement("div",{style:n.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:n.header},e.createElement("h3",{style:n.title},e.createElement(z,null)," Vanity URL Olu≈ütur"),e.createElement("button",{onClick:g,style:n.closeButton},e.createElement(C,null))),e.createElement("div",{style:n.content},x)))},n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"500px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.3em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.3em"},content:{padding:"20px"},description:{color:"#b9bbbe",fontSize:"0.9em",marginBottom:"15px",padding:"10px",backgroundColor:"#40444b",borderRadius:"4px"},existingSection:{marginBottom:"20px",padding:"15px",backgroundColor:"#2f3136",borderRadius:"8px",border:"1px solid #5865f2"},existingLabel:{color:"#5865f2",fontWeight:"bold",marginBottom:"10px",fontSize:"0.9em"},existingUrl:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"},urlText:{color:"#fff",fontWeight:"bold",fontSize:"1em"},inputGroup:{display:"flex",alignItems:"center",backgroundColor:"#40444b",borderRadius:"4px",padding:"5px",marginBottom:"15px"},prefix:{color:"#b9bbbe",padding:"0 10px",fontWeight:"bold"},input:{flex:1,padding:"10px",backgroundColor:"transparent",border:"none",color:"white",fontSize:"1em",outline:"none"},copyButton:{padding:"8px 12px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:"bold"},deleteButton:{padding:"8px 12px",backgroundColor:"#ed4245",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontWeight:"bold"},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1em"}};export{$ as default};
