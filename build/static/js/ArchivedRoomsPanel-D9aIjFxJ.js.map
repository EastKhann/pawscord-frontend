{"version":3,"file":"ArchivedRoomsPanel-D9aIjFxJ.js","sources":["../../../src/components/ArchivedRoomsPanel.js"],"sourcesContent":["// frontend/src/components/ArchivedRoomsPanel.js\r\nimport { useState, useEffect } from 'react';\r\nimport { FaTimes, FaArchive, FaUndo, FaTrash, FaClock } from 'react-icons/fa';\r\nimport toast from '../utils/toast';\r\nimport confirmDialog from '../utils/confirmDialog';\r\n\r\n/**\r\n * üì¶ Archived Rooms Panel\r\n * Ar≈üivlenmi≈ü kanallarƒ± g√∂r√ºnt√ºleme ve geri y√ºkleme\r\n */\r\n\r\nconst ArchivedRoomsPanel = ({ fetchWithAuth, apiBaseUrl, serverId, onClose }) => {\r\n    const [archivedRooms, setArchivedRooms] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        loadArchivedRooms();\r\n    }, []);\r\n\r\n    const loadArchivedRooms = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await fetchWithAuth(`${apiBaseUrl}/rooms/archived/list/?server_id=${serverId}`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setArchivedRooms(data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ar≈üiv y√ºkleme hatasƒ±:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const unarchiveRoom = async (roomSlug) => {\r\n        try {\r\n            const response = await fetchWithAuth(`${apiBaseUrl}/rooms/${roomSlug}/unarchive/`, {\r\n                method: 'POST'\r\n            });\r\n\r\n            if (response.ok) {\r\n                toast.success('Kanal geri y√ºklendi');\r\n                loadArchivedRooms();\r\n            } else {\r\n                toast.error('Kanal geri y√ºklenemedi');\r\n            }\r\n        } catch (error) {\r\n            console.error('Unarchive hatasƒ±:', error);\r\n            toast.error('Bir hata olu≈ütu');\r\n        }\r\n    };\r\n\r\n    const permanentlyDelete = async (roomSlug) => {\r\n        if (!await confirmDialog('Bu kanalƒ± kalƒ±cƒ± olarak silmek istediƒüinizden emin misiniz? Bu i≈ülem geri alƒ±namaz!')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetchWithAuth(`${apiBaseUrl}/rooms/${roomSlug}/delete/`, {\r\n                method: 'DELETE'\r\n            });\r\n\r\n            if (response.ok) {\r\n                toast.success('Kanal kalƒ±cƒ± olarak silindi');\r\n                loadArchivedRooms();\r\n            } else {\r\n                toast.error('Kanal silinemedi');\r\n            }\r\n        } catch (error) {\r\n            console.error('Delete hatasƒ±:', error);\r\n            toast.error('Bir hata olu≈ütu');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={styles.overlay} onClick={onClose}>\r\n            <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n                <div style={styles.header}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                        <FaArchive style={{ color: '#888' }} />\r\n                        <h2 style={{ margin: 0 }}>Ar≈üivlenmi≈ü Kanallar</h2>\r\n                    </div>\r\n                    <FaTimes onClick={onClose} style={styles.closeBtn} />\r\n                </div>\r\n\r\n                <div style={styles.content}>\r\n                    {loading ? (\r\n                        <div style={styles.loading}>Y√ºkleniyor...</div>\r\n                    ) : archivedRooms.length === 0 ? (\r\n                        <div style={styles.empty}>\r\n                            <FaArchive style={{ fontSize: '48px', color: '#555', marginBottom: '10px' }} />\r\n                            <p>Ar≈üivlenmi≈ü kanal yok</p>\r\n                            <p style={{ fontSize: '12px', color: '#888' }}>\r\n                                Ar≈üivlenen kanallar burada g√∂r√ºn√ºr\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        archivedRooms.map((room) => (\r\n                            <div key={room.id} style={styles.roomCard}>\r\n                                <div style={styles.roomIcon}>\r\n                                    <FaArchive style={{ color: '#888' }} />\r\n                                </div>\r\n                                <div style={styles.roomContent}>\r\n                                    <div style={styles.roomName}>#{room.name}</div>\r\n                                    <div style={styles.roomMeta}>\r\n                                        <FaClock style={{ fontSize: '12px' }} />\r\n                                        <span>Ar≈üivlendi: {new Date(room.archived_at).toLocaleDateString('tr-TR')}</span>\r\n                                    </div>\r\n                                    {room.archived_reason && (\r\n                                        <div style={styles.roomReason}>\r\n                                            Sebep: {room.archived_reason}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div style={styles.roomActions}>\r\n                                    <button\r\n                                        onClick={() => unarchiveRoom(room.slug)}\r\n                                        style={styles.unarchiveBtn}\r\n                                        title=\"Geri y√ºkle\"\r\n                                    >\r\n                                        <FaUndo /> Geri Y√ºkle\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => permanentlyDelete(room.slug)}\r\n                                        style={styles.deleteBtn}\r\n                                        title=\"Kalƒ±cƒ± olarak sil\"\r\n                                    >\r\n                                        <FaTrash />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styles = {\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0,0,0,0.7)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 999999\r\n    },\r\n    modal: {\r\n        backgroundColor: '#1e1e1e',\r\n        borderRadius: '8px',\r\n        width: '90%',\r\n        maxWidth: '700px',\r\n        maxHeight: '90vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        color: '#fff'\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        padding: '20px',\r\n        borderBottom: '1px solid #333'\r\n    },\r\n    closeBtn: {\r\n        cursor: 'pointer',\r\n        fontSize: '24px',\r\n        color: '#888'\r\n    },\r\n    content: {\r\n        flex: 1,\r\n        overflowY: 'auto',\r\n        padding: '20px'\r\n    },\r\n    roomCard: {\r\n        display: 'flex',\r\n        gap: '15px',\r\n        padding: '15px',\r\n        backgroundColor: '#2c2f33',\r\n        borderRadius: '8px',\r\n        marginBottom: '10px'\r\n    },\r\n    roomIcon: {\r\n        width: '40px',\r\n        height: '40px',\r\n        borderRadius: '50%',\r\n        backgroundColor: '#1e1e1e',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        fontSize: '18px',\r\n        flexShrink: 0\r\n    },\r\n    roomContent: {\r\n        flex: 1\r\n    },\r\n    roomName: {\r\n        fontWeight: '600',\r\n        fontSize: '16px',\r\n        marginBottom: '6px',\r\n        color: '#dcddde'\r\n    },\r\n    roomMeta: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '6px',\r\n        fontSize: '12px',\r\n        color: '#888',\r\n        marginBottom: '4px'\r\n    },\r\n    roomReason: {\r\n        fontSize: '13px',\r\n        color: '#888',\r\n        fontStyle: 'italic'\r\n    },\r\n    roomActions: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '8px'\r\n    },\r\n    unarchiveBtn: {\r\n        backgroundColor: '#43b581',\r\n        color: '#fff',\r\n        border: 'none',\r\n        padding: '8px 12px',\r\n        borderRadius: '4px',\r\n        cursor: 'pointer',\r\n        fontSize: '13px',\r\n        fontWeight: '500',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '6px',\r\n        whiteSpace: 'nowrap'\r\n    },\r\n    deleteBtn: {\r\n        backgroundColor: '#f04747',\r\n        color: '#fff',\r\n        border: 'none',\r\n        padding: '8px 12px',\r\n        borderRadius: '4px',\r\n        cursor: 'pointer',\r\n        fontSize: '13px'\r\n    },\r\n    loading: {\r\n        textAlign: 'center',\r\n        padding: '40px',\r\n        color: '#888'\r\n    },\r\n    empty: {\r\n        textAlign: 'center',\r\n        padding: '60px 20px',\r\n        color: '#888'\r\n    }\r\n};\r\n\r\nexport default ArchivedRoomsPanel;\r\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":"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"}