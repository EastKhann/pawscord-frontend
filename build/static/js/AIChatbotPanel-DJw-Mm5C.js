var F=Object.defineProperty;var a=(v,d)=>F(v,"name",{value:d,configurable:!0});import{r as n,j as e}from"./react-core-Djgtqrmb.js";import{t as o}from"./index-DwVhiipM.js";import{B as g,c5 as S,r as z,b1 as C,aZ as P,aE as q}from"./icons-vendor-BMXAt4pj.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const Z=a(({username:v,apiBaseUrl:d,fetchWithAuth:j,currentRoomSlug:w})=>{const[l,p]=n.useState("chat"),[y,x]=n.useState([]),[m,u]=n.useState(""),[h,c]=n.useState(!1),[b,A]=n.useState({used:0,limit:100}),[N,I]=n.useState([]),f=n.useRef(null);n.useEffect(()=>{k()},[]),n.useEffect(()=>{$()},[y]);const $=a(()=>{f.current?.scrollIntoView({behavior:"smooth"})},"scrollToBottom"),k=a(async()=>{try{const t=await(await j(`${d}/ai/quota/`)).json();A(t)}catch{}},"fetchQuota"),R=a(async s=>{if(s.preventDefault(),!m.trim()||h)return;const t=m.trim();u(""),x(i=>[...i,{role:"user",content:t,timestamp:new Date}]),c(!0);try{const r=await(await j(`${d}/ai/chat/`,{method:"POST",body:JSON.stringify({message:t,context:w||"general"})})).json();x(M=>[...M,{role:"assistant",content:r.response,timestamp:new Date}]),k(),o.success("ðŸ¤– AI yanÄ±tladÄ±!")}catch{o.error("âŒ AI hatasÄ±!"),x(r=>[...r,{role:"assistant",content:"ÃœzgÃ¼nÃ¼m, bir hata oluÅŸtu.",timestamp:new Date,error:!0}])}finally{c(!1)}},"handleAIChat"),K=a(async s=>{c(!0);try{const i=await(await j(`${d}/ai/smart-reply/`,{method:"POST",body:JSON.stringify({message_id:s,count:3})})).json();I(i.suggestions||[]),o.success("ðŸ’¡ AkÄ±llÄ± cevaplar hazÄ±r!")}catch{o.error("âŒ AkÄ±llÄ± cevap hatasÄ±!")}finally{c(!1)}},"handleSmartReply"),O=a(async s=>{c(!0);try{const i=await(await j(`${d}/ai/summarize/`,{method:"POST",body:JSON.stringify({message_ids:s,max_length:200})})).json();x(r=>[...r,{role:"assistant",content:`ðŸ“ **Ã–zet:**

${i.summary}`,timestamp:new Date,type:"summary"}]),o.success("ðŸ“ Mesajlar Ã¶zetlendi!")}catch{o.error("âŒ Ã–zetleme hatasÄ±!")}finally{c(!1)}},"handleSummarize"),T=a(async s=>{c(!0);try{const i=await(await j(`${d}/ai/code/`,{method:"POST",body:JSON.stringify({prompt:s,language:"javascript"})})).json();x(r=>[...r,{role:"assistant",content:`\`\`\`${i.language}
${i.code}
\`\`\`

${i.explanation||""}`,timestamp:new Date,type:"code"}]),o.success("ðŸ’» Kod oluÅŸturuldu!")}catch{o.error("âŒ Kod Ã¼retme hatasÄ±!")}finally{c(!1)}},"handleCodeGeneration"),D=a(()=>{const s=b.used/b.limit*100,t=s>90?"#ed4245":s>70?"#faa61a":"#43b581";return e.jsxs("div",{className:"ai-quota-container",children:[e.jsxs("div",{className:"ai-quota-info",children:[e.jsx(q,{}),e.jsxs("span",{children:["AI KullanÄ±m: ",b.used," / ",b.limit]})]}),e.jsx("div",{className:"ai-quota-bar",children:e.jsx("div",{className:"ai-quota-fill",style:{width:`${s}%`,backgroundColor:t}})})]})},"renderQuotaBar");return e.jsxs("div",{className:"ai-chatbot-panel",children:[e.jsxs("div",{className:"ai-header",children:[e.jsxs("div",{className:"ai-header-left",children:[e.jsx(g,{size:28}),e.jsxs("div",{children:[e.jsx("h3",{className:"ai-title",children:"AI Assistant"}),e.jsx("p",{className:"ai-subtitle",children:"Discord'u geÃ§en AI Ã¶zellikleri"})]})]}),D()]}),e.jsxs("div",{className:"ai-tabs",children:[e.jsxs("button",{className:l==="chat"?"active":"",onClick:a(()=>p("chat"),"onClick"),children:[e.jsx(g,{})," Chat"]}),e.jsxs("button",{className:l==="smart-reply"?"active":"",onClick:a(()=>p("smart-reply"),"onClick"),children:[e.jsx(S,{})," Smart Reply"]}),e.jsxs("button",{className:l==="summarize"?"active":"",onClick:a(()=>p("summarize"),"onClick"),children:[e.jsx(z,{})," Ã–zetle"]}),e.jsxs("button",{className:l==="code"?"active":"",onClick:a(()=>p("code"),"onClick"),children:[e.jsx(C,{})," Kod OluÅŸtur"]})]}),l==="chat"&&e.jsxs("div",{className:"ai-chat-container",children:[e.jsxs("div",{className:"ai-messages",children:[y.length===0?e.jsxs("div",{className:"ai-empty-state",children:[e.jsx(g,{size:48}),e.jsx("h4",{children:"AI Assistant'a HoÅŸ Geldin!"}),e.jsx("p",{children:"Soru sor, kod yazdÄ±r, mesajlarÄ± Ã¶zetle veya aÃ§Ä±klama iste."}),e.jsxs("div",{className:"ai-suggestions",children:[e.jsx("button",{onClick:a(()=>u("JavaScript ile bir todo list nasÄ±l yapÄ±lÄ±r?"),"onClick"),children:"ðŸ’» Kod Ã¶rneÄŸi iste"}),e.jsx("button",{onClick:a(()=>u("React hooks nedir?"),"onClick"),children:"ðŸŽ“ Kavram aÃ§Ä±kla"}),e.jsx("button",{onClick:a(()=>u("BugÃ¼n hava nasÄ±l?"),"onClick"),children:"ðŸ’¬ Sohbet et"})]})]}):y.map((s,t)=>e.jsxs("div",{className:`ai-message ${s.role} ${s.error?"error":""}`,children:[e.jsx("div",{className:"ai-message-avatar",children:s.role==="user"?"ðŸ‘¤":"ðŸ¤–"}),e.jsxs("div",{className:"ai-message-content",children:[e.jsxs("div",{className:"ai-message-header",children:[e.jsx("strong",{children:s.role==="user"?v:"AI Assistant"}),e.jsx("span",{className:"ai-message-time",children:s.timestamp.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"ai-message-text",children:s.content.split("```").map((i,r)=>r%2===0?e.jsx("span",{children:i},r):e.jsx("pre",{className:"ai-code-block",children:e.jsx("code",{children:i})},r))})]})]},t)),e.jsx("div",{ref:f})]}),e.jsxs("form",{onSubmit:R,className:"ai-input-form",children:[e.jsx("input",{type:"text",value:m,onChange:a(s=>u(s.target.value),"onChange"),placeholder:"AI'ya bir ÅŸey sor...",disabled:h,className:"ai-input"}),e.jsx("button",{type:"submit",disabled:h||!m.trim(),className:"ai-send-btn",children:h?"â³":e.jsx(P,{})})]})]}),l==="smart-reply"&&e.jsxs("div",{className:"ai-feature-container",children:[e.jsxs("div",{className:"ai-feature-header",children:[e.jsx(S,{size:32}),e.jsx("h4",{children:"AkÄ±llÄ± Cevap Ã–nerileri"}),e.jsx("p",{children:"Mesajlara otomatik yanÄ±t Ã¶nerileri"})]}),e.jsx("button",{onClick:a(()=>K("last-message-id"),"onClick"),disabled:h,className:"ai-action-btn",children:"ðŸ’¡ Son Mesaja AkÄ±llÄ± Cevap Ã–ner"}),N.length>0&&e.jsxs("div",{className:"ai-smart-replies",children:[e.jsx("h5",{children:"Ã–nerilen Cevaplar:"}),N.map((s,t)=>e.jsxs("div",{className:"ai-smart-reply-item",children:[e.jsx("span",{children:s}),e.jsx("button",{onClick:a(()=>u(s),"onClick"),children:"Kullan"})]},t))]})]}),l==="summarize"&&e.jsxs("div",{className:"ai-feature-container",children:[e.jsxs("div",{className:"ai-feature-header",children:[e.jsx(z,{size:32}),e.jsx("h4",{children:"Mesaj Ã–zetleme"}),e.jsx("p",{children:"Uzun konuÅŸmalarÄ± tek paragrafta Ã¶zetle"})]}),e.jsx("button",{onClick:a(()=>O(["msg1","msg2","msg3"]),"onClick"),disabled:h,className:"ai-action-btn",children:"ðŸ“ Son 50 MesajÄ± Ã–zetle"})]}),l==="code"&&e.jsxs("div",{className:"ai-feature-container",children:[e.jsxs("div",{className:"ai-feature-header",children:[e.jsx(C,{size:32}),e.jsx("h4",{children:"Kod Ãœretimi"}),e.jsx("p",{children:"AI ile kod yaz, GitHub Copilot gibi"})]}),e.jsxs("form",{onSubmit:a(s=>{s.preventDefault(),T(m)},"onSubmit"),className:"ai-code-form",children:[e.jsx("textarea",{value:m,onChange:a(s=>u(s.target.value),"onChange"),placeholder:"Ne yapmak istiyorsun? Ã–rn: 'React'te bir sayaÃ§ komponenti yap'",rows:4,className:"ai-code-textarea"}),e.jsx("button",{type:"submit",disabled:h||!m.trim(),className:"ai-action-btn",children:"ðŸ’» Kod Ãœret"})]})]})]})},"AIChatbotPanel");export{Z as default};
