import{r as o,d as e,o as C,i as w,aC as R,bF as L}from"./react-core-CecKX_Gm.js";import{t as s}from"./index-DwScqZjU.js";const V=({fetchWithAuth:c,apiBaseUrl:d,onClose:b,serverId:p})=>{const[i,f]=o.useState(""),[m,h]=o.useState(null),[u,v]=o.useState([]),[y,x]=o.useState(!1),[r,l]=o.useState(null);o.useEffect(()=>{g()},[]);const g=async()=>{try{const a=await(await c(`${d}/api/vanity/get/${p}/`)).json();h(a.vanity_url),v(a.history||[])}catch{}},E=async n=>{if(!n||n.length<3){l(null);return}x(!0);try{const k=await(await c(`${d}/api/vanity/check/?url=${n}`)).json();l(k.available)}catch{l(!1)}finally{x(!1)}},S=async()=>{if(!i||i.length<3){s.error("Vanity URL must be at least 3 characters");return}if(!r){s.error("This vanity URL is not available");return}try{await c(`${d}/api/vanity/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_id:p,vanity_url:i})}),s.success("Vanity URL set successfully"),f(""),l(null),g()}catch{s.error("Failed to set vanity URL")}};return e.createElement("div",{style:t.overlay},e.createElement("div",{style:t.modal},e.createElement("div",{style:t.header},e.createElement("div",{style:t.headerLeft},e.createElement(C,{style:{marginRight:"10px",color:"#5865f2"}}),e.createElement("h2",{style:t.title},"Vanity URL")),e.createElement("button",{onClick:b,style:t.closeButton},e.createElement(w,null))),e.createElement("div",{style:t.content},m&&e.createElement("div",{style:t.currentSection},e.createElement("div",{style:t.label},"Current Vanity URL:"),e.createElement("div",{style:t.currentUrl},"pawscord.com/",m)),e.createElement("div",{style:t.section},e.createElement("div",{style:t.label},"Set New Vanity URL"),e.createElement("div",{style:t.inputRow},e.createElement("div",{style:t.prefix},"pawscord.com/"),e.createElement("input",{type:"text",value:i,onChange:n=>{const a=n.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"");f(a),E(a)},placeholder:"my-server",style:t.input,maxLength:32}),y&&e.createElement("div",{style:t.checking},"Checking..."),!y&&r===!0&&e.createElement(R,{style:{color:"#43b581",fontSize:"20px"}}),!y&&r===!1&&e.createElement("div",{style:t.unavailable},"Unavailable")),e.createElement("div",{style:t.hint},"3-32 characters, letters, numbers, and hyphens only"),e.createElement("button",{onClick:S,disabled:!r,style:{...t.setButton,...!r&&t.setButtonDisabled}},"Set Vanity URL")),u.length>0&&e.createElement("div",{style:t.section},e.createElement("div",{style:t.sectionTitle},e.createElement(L,{style:{marginRight:"8px"}}),"History"),e.createElement("div",{style:t.historyList},u.map((n,a)=>e.createElement("div",{key:a,style:t.historyItem},e.createElement("div",{style:t.historyUrl},n.vanity_url),e.createElement("div",{style:t.historyDate},new Date(n.created_at).toLocaleDateString()))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},currentSection:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",marginBottom:"24px"},currentUrl:{fontSize:"18px",fontWeight:"600",color:"#5865f2",fontFamily:"monospace"},section:{marginBottom:"24px"},label:{fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"8px"},inputRow:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#2c2f33",borderRadius:"4px",padding:"10px 12px"},prefix:{fontSize:"14px",color:"#99aab5"},input:{flex:1,background:"none",border:"none",color:"#ffffff",fontSize:"14px",outline:"none"},checking:{fontSize:"12px",color:"#faa61a"},unavailable:{fontSize:"12px",color:"#f04747"},hint:{fontSize:"12px",color:"#99aab5",marginTop:"8px",marginBottom:"16px"},setButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},setButtonDisabled:{backgroundColor:"#2c2f33",cursor:"not-allowed"},sectionTitle:{fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"12px",display:"flex",alignItems:"center"},historyList:{display:"flex",flexDirection:"column",gap:"8px"},historyItem:{backgroundColor:"#2c2f33",borderRadius:"4px",padding:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},historyUrl:{fontSize:"14px",color:"#dcddde",fontFamily:"monospace"},historyDate:{fontSize:"12px",color:"#99aab5"}};export{V as default};
