import{r as n,l as u,bT as b,as as s}from"./react-core-B6hadH-M.js";const y=({url:o,onRemove:a})=>{const[t,p]=n.useState(null),[f,l]=n.useState(!0),[m,d]=n.useState(!1);n.useEffect(()=>{g()},[o]);const g=async()=>{l(!0),d(!1);try{const i=await fetch(`/api/link-preview/?url=${encodeURIComponent(o)}`);if(!i.ok)throw new Error("Failed to fetch preview");const r=await i.json();p(r)}catch{d(!0)}finally{l(!1)}},x=i=>({youtube:"#FF0000",twitter:"#1DA1F2",github:"#333333",spotify:"#1DB954",twitch:"#9146FF"})[i?.toLowerCase()]||"#5865f2",v=i=>i.includes("youtube.com")||i.includes("youtu.be")||i.includes("vimeo.com")||t?.type==="video",c=i=>{if(i.includes("youtube.com")||i.includes("youtu.be")){const r=i.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/)?.[1];return r?`https://img.youtube.com/vi/${r}/maxresdefault.jpg`:null}return t?.image};return f?React.createElement("div",{style:e.loadingContainer},React.createElement("div",{style:e.loadingSpinner}),React.createElement("span",{style:e.loadingText},"Loading preview...")):m||!t?null:React.createElement("div",{style:e.container},a&&React.createElement("button",{onClick:a,style:e.removeButton},React.createElement(u,null)),v(o)?React.createElement("div",{style:e.videoPreview},c(o)&&React.createElement("div",{style:e.videoThumbnail},React.createElement("img",{src:c(o),alt:"Video thumbnail",style:e.videoImage}),React.createElement("div",{style:e.playOverlay},React.createElement(b,{style:e.playIcon}))),React.createElement("div",{style:e.videoInfo},React.createElement("div",{style:e.videoTitle},t.title||"Video"),t.description&&React.createElement("div",{style:e.videoDescription},t.description.substring(0,150),"..."),React.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",style:e.videoLink},React.createElement(s,{style:{marginRight:"6px"}}),"Watch on ",t.provider||"YouTube"))):React.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",style:e.linkPreview},t.image&&React.createElement("div",{style:e.imageContainer},React.createElement("img",{src:t.image,alt:t.title,style:e.image})),React.createElement("div",{style:e.contentContainer},t.provider&&React.createElement("div",{style:{...e.provider,borderLeftColor:x(t.provider)}},t.provider),React.createElement("div",{style:e.title},t.title),t.description&&React.createElement("div",{style:e.description},t.description),React.createElement("div",{style:e.url},React.createElement(s,{style:{marginRight:"6px",fontSize:"10px"}}),new URL(o).hostname))))},e={container:{position:"relative",marginTop:"12px",marginBottom:"8px"},loadingContainer:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#2c2f33",borderRadius:"8px",borderLeft:"4px solid #5865f2"},loadingSpinner:{width:"20px",height:"20px",border:"3px solid #2c2f33",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite"},loadingText:{fontSize:"13px",color:"#99aab5"},removeButton:{position:"absolute",top:"8px",right:"8px",background:"rgba(0, 0, 0, 0.7)",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",cursor:"pointer",zIndex:10,fontSize:"12px"},linkPreview:{display:"flex",backgroundColor:"#2c2f33",borderRadius:"8px",overflow:"hidden",textDecoration:"none",color:"inherit",transition:"transform 0.2s",borderLeft:"4px solid #5865f2",maxWidth:"500px"},imageContainer:{minWidth:"120px",maxWidth:"120px",height:"120px",overflow:"hidden",backgroundColor:"#1e1e1e"},image:{width:"100%",height:"100%",objectFit:"cover"},contentContainer:{padding:"12px",flex:1,display:"flex",flexDirection:"column",gap:"6px"},provider:{fontSize:"11px",fontWeight:"600",color:"#5865f2",textTransform:"uppercase",borderLeft:"3px solid #5865f2",paddingLeft:"8px"},title:{fontSize:"14px",fontWeight:"600",color:"#ffffff",lineHeight:"1.3",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},description:{fontSize:"12px",color:"#dcddde",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},url:{fontSize:"11px",color:"#99aab5",display:"flex",alignItems:"center",marginTop:"auto"},videoPreview:{backgroundColor:"#2c2f33",borderRadius:"8px",overflow:"hidden",borderLeft:"4px solid #FF0000",maxWidth:"500px"},videoThumbnail:{position:"relative",width:"100%",paddingBottom:"56.25%",backgroundColor:"#1e1e1e",overflow:"hidden"},videoImage:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"},playOverlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"60px",height:"60px",backgroundColor:"rgba(255, 0, 0, 0.9)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},playIcon:{color:"#ffffff",fontSize:"24px",marginLeft:"4px"},videoInfo:{padding:"12px"},videoTitle:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"6px",lineHeight:"1.3"},videoDescription:{fontSize:"12px",color:"#dcddde",marginBottom:"8px",lineHeight:"1.4"},videoLink:{fontSize:"12px",color:"#5865f2",textDecoration:"none",display:"flex",alignItems:"center",fontWeight:"600"}};export{y as default};
