import{r as n,A as S,l as k,aX as C,b$ as w}from"./react-core-B6hadH-M.js";import{t as i}from"./index-D_6pZib5.js";const U=({fetchWithAuth:c,apiBaseUrl:s,onClose:g,serverId:y})=>{const[r,p]=n.useState(""),[f,b]=n.useState(null),[m,h]=n.useState([]),[d,u]=n.useState(!1),[o,l]=n.useState(null);n.useEffect(()=>{x()},[]);const x=async()=>{try{const a=await(await c(`${s}/vanity/get/${y}/`)).json();b(a.vanity_url),h(a.history||[])}catch{}},R=async t=>{if(!t||t.length<3){l(null);return}u(!0);try{const E=await(await c(`${s}/vanity/check/?url=${t}`)).json();l(E.available)}catch{l(!1)}finally{u(!1)}},v=async()=>{if(!r||r.length<3){i.error("Vanity URL must be at least 3 characters");return}if(!o){i.error("This vanity URL is not available");return}try{await c(`${s}/vanity/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_id:y,vanity_url:r})}),i.success("Vanity URL set successfully"),p(""),l(null),x()}catch{i.error("Failed to set vanity URL")}};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(S,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Vanity URL")),React.createElement("button",{onClick:g,style:e.closeButton},React.createElement(k,null))),React.createElement("div",{style:e.content},f&&React.createElement("div",{style:e.currentSection},React.createElement("div",{style:e.label},"Current Vanity URL:"),React.createElement("div",{style:e.currentUrl},"pawscord.com/",f)),React.createElement("div",{style:e.section},React.createElement("div",{style:e.label},"Set New Vanity URL"),React.createElement("div",{style:e.inputRow},React.createElement("div",{style:e.prefix},"pawscord.com/"),React.createElement("input",{type:"text",value:r,onChange:t=>{const a=t.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"");p(a),R(a)},placeholder:"my-server",style:e.input,maxLength:32}),d&&React.createElement("div",{style:e.checking},"Checking..."),!d&&o===!0&&React.createElement(C,{style:{color:"#43b581",fontSize:"20px"}}),!d&&o===!1&&React.createElement("div",{style:e.unavailable},"Unavailable")),React.createElement("div",{style:e.hint},"3-32 characters, letters, numbers, and hyphens only"),React.createElement("button",{onClick:v,disabled:!o,style:{...e.setButton,...!o&&e.setButtonDisabled}},"Set Vanity URL")),m.length>0&&React.createElement("div",{style:e.section},React.createElement("div",{style:e.sectionTitle},React.createElement(w,{style:{marginRight:"8px"}}),"History"),React.createElement("div",{style:e.historyList},m.map((t,a)=>React.createElement("div",{key:a,style:e.historyItem},React.createElement("div",{style:e.historyUrl},t.vanity_url),React.createElement("div",{style:e.historyDate},new Date(t.created_at).toLocaleDateString()))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},currentSection:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",marginBottom:"24px"},currentUrl:{fontSize:"18px",fontWeight:"600",color:"#5865f2",fontFamily:"monospace"},section:{marginBottom:"24px"},label:{fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"8px"},inputRow:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#2c2f33",borderRadius:"4px",padding:"10px 12px"},prefix:{fontSize:"14px",color:"#99aab5"},input:{flex:1,background:"none",border:"none",color:"#ffffff",fontSize:"14px",outline:"none"},checking:{fontSize:"12px",color:"#faa61a"},unavailable:{fontSize:"12px",color:"#f04747"},hint:{fontSize:"12px",color:"#99aab5",marginTop:"8px",marginBottom:"16px"},setButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},setButtonDisabled:{backgroundColor:"#2c2f33",cursor:"not-allowed"},sectionTitle:{fontSize:"14px",fontWeight:"600",color:"#dcddde",marginBottom:"12px",display:"flex",alignItems:"center"},historyList:{display:"flex",flexDirection:"column",gap:"8px"},historyItem:{backgroundColor:"#2c2f33",borderRadius:"4px",padding:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},historyUrl:{fontSize:"14px",color:"#dcddde",fontFamily:"monospace"},historyDate:{fontSize:"12px",color:"#99aab5"}};export{U as default};
