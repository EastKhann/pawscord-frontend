import{r as n,j as a}from"./react-vendor-D8Fi5F9E.js";import{S as k,a as v,U as C,bk as w}from"./icons-vendor-CfNiWYc_.js";import{t as r}from"./index-BxkyDgli.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./state-vendor-De5qIGw3.js";const F=({fetchWithAuth:i,apiBaseUrl:d,serverId:c,onClose:p})=>{const[s,o]=n.useState({enabled:!1,message:"",channel_id:"",dm_enabled:!1,dm_message:""}),[x,g]=n.useState([]),[S,m]=n.useState(!0),y=[{key:"{user}",desc:"Kullanƒ±cƒ± adƒ±"},{key:"{mention}",desc:"Kullanƒ±cƒ±yƒ± etiketle"},{key:"{server}",desc:"Sunucu adƒ±"},{key:"{membercount}",desc:"√úye sayƒ±sƒ±"},{key:"{date}",desc:"Tarih"}];n.useEffect(()=>{u(),f()},[]);const u=async()=>{try{const e=await i(`${d}/api/servers/${c}/welcome/`);if(e.ok){const t=await e.json();t&&o(t)}}catch(e){console.error("≈ûablon y√ºkleme hatasƒ±:",e)}finally{m(!1)}},f=async()=>{try{const e=await i(`${d}/api/servers/${c}/channels/`);if(e.ok){const t=await e.json();g(t)}}catch(e){console.error("Kanal y√ºkleme hatasƒ±:",e)}},h=async()=>{try{(await i(`${d}/api/servers/welcome/set/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_id:c,...s})})).ok?r.success("Ho≈ügeldin ≈üablonu kaydedildi"):r.error("≈ûablon kaydedilemedi")}catch(e){console.error("≈ûablon kaydetme hatasƒ±:",e),r.error("Bir hata olu≈ütu")}},b=e=>{o({...s,message:s.message+e})},j=()=>{let e=s.message.replace("{user}","Kullanƒ±cƒ±Adƒ±").replace("{mention}","@Kullanƒ±cƒ±Adƒ±").replace("{server}","Sunucu Adƒ±").replace("{membercount}","1,234").replace("{date}",new Date().toLocaleDateString("tr-TR"));r.info(e)};return a.jsx("div",{style:l.overlay,onClick:p,children:a.jsxs("div",{style:l.modal,onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{style:l.header,children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx(k,{style:{color:"#43b581"}}),a.jsx("h2",{style:{margin:0},children:"Ho≈ügeldin Mesajlarƒ±"})]}),a.jsx(v,{onClick:p,style:l.closeBtn})]}),a.jsxs("div",{style:l.content,children:[a.jsx("div",{style:l.toggle,children:a.jsxs("label",{style:l.toggleLabel,children:[a.jsx("input",{type:"checkbox",checked:s.enabled,onChange:e=>o({...s,enabled:e.target.checked})}),a.jsx("span",{children:"Ho≈ügeldin mesajlarƒ±nƒ± etkinle≈ütir"})]})}),s.enabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:l.field,children:[a.jsx("label",{style:l.label,children:"Ho≈ügeldin Kanalƒ±"}),a.jsxs("select",{value:s.channel_id,onChange:e=>o({...s,channel_id:e.target.value}),style:l.select,children:[a.jsx("option",{value:"",children:"Kanal Se√ßin"}),x.map(e=>a.jsxs("option",{value:e.id,children:["#",e.name]},e.id))]})]}),a.jsxs("div",{style:l.field,children:[a.jsx("label",{style:l.label,children:"Mesaj ≈ûablonu"}),a.jsx("div",{style:l.placeholders,children:y.map(e=>a.jsx("button",{onClick:()=>b(e.key),style:l.placeholderBtn,title:e.desc,children:e.key},e.key))}),a.jsx("textarea",{value:s.message,onChange:e=>o({...s,message:e.target.value}),placeholder:"Ho≈ü geldin {user}! {server} sunucusuna katƒ±ldƒ±n. ≈ûu anda {membercount} √ºyeyiz! üéâ",style:l.textarea,rows:5}),a.jsxs("button",{onClick:j,style:l.previewBtn,children:[a.jsx(C,{})," √ñnizleme"]})]}),a.jsx("div",{style:l.toggle,children:a.jsxs("label",{style:l.toggleLabel,children:[a.jsx("input",{type:"checkbox",checked:s.dm_enabled,onChange:e=>o({...s,dm_enabled:e.target.checked})}),a.jsx("span",{children:"DM ile ho≈ügeldin mesajƒ± g√∂nder"})]})}),s.dm_enabled&&a.jsxs("div",{style:l.field,children:[a.jsx("label",{style:l.label,children:"DM Mesajƒ±"}),a.jsx("textarea",{value:s.dm_message,onChange:e=>o({...s,dm_message:e.target.value}),placeholder:"Merhaba {user}! {server} sunucusuna ho≈ü geldin!",style:l.textarea,rows:3})]})]})]}),a.jsx("div",{style:l.footer,children:a.jsxs("button",{onClick:h,style:l.saveBtn,children:[a.jsx(w,{})," Kaydet"]})})]})})},l={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},toggle:{marginBottom:"20px"},toggleLabel:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",fontSize:"16px"},field:{marginBottom:"20px"},label:{display:"block",marginBottom:"8px",color:"#dcddde",fontSize:"14px",fontWeight:"600"},select:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},placeholders:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"10px"},placeholderBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontFamily:"monospace"},textarea:{width:"100%",padding:"12px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",resize:"vertical",marginBottom:"10px"},previewBtn:{backgroundColor:"#2c2f33",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},footer:{padding:"20px",borderTop:"1px solid #333"},saveBtn:{width:"100%",backgroundColor:"#43b581",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}};export{F as default};
