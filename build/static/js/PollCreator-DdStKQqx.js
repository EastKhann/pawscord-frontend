var z=Object.defineProperty;var n=(x,g)=>z(x,"name",{value:g,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{t as b,g as w}from"./index-m2zCEI_Z.js";import{a as O}from"./index-BNjLOQm3.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BW7dxHkX.js";import"./ui-vendor-IhB9Znpc.js";const E=n(({roomSlug:x,token:g,onClose:l,onPollCreated:h,isMobile:s})=>{const[c,y]=d.useState(""),[a,u]=d.useState(["",""]),[m,j]=d.useState(24),[p,f]=d.useState(!1),C=n(()=>{a.length<10&&u([...a,""])},"addOption"),k=n(t=>{a.length>2&&u(a.filter((r,i)=>i!==t))},"removeOption"),v=n((t,r)=>{const i=[...a];i[t]=r,u(i)},"updateOption"),B=n(async()=>{if(!c.trim()){b.error("âŒ Please enter a question");return}const t=a.filter(r=>r.trim());if(t.length<2){b.error("âŒ Please provide at least 2 options");return}f(!0);try{const r=await O.post(`${w()}/polls/create/`,{room_slug:x,question:c.trim(),options:t.map(i=>i.trim()),duration_hours:m},{headers:{Authorization:`Bearer ${g}`}});h&&h(r.data),l()}catch{b.error("âŒ Failed to create poll. Please try again.")}finally{f(!1)}},"handleCreate"),o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:s?"20px":"40px"},modal:{background:"linear-gradient(135deg, rgba(30, 31, 34, 0.98), rgba(35, 36, 40, 0.98))",borderRadius:"16px",padding:s?"20px":"30px",width:"100%",maxWidth:s?"100%":"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 50px rgba(0, 0, 0, 0.7), 0 0 30px rgba(88, 101, 242, 0.3)",border:"1px solid rgba(88, 101, 242, 0.4)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},title:{fontSize:s?"20px":"24px",fontWeight:"700",color:"rgba(255, 255, 255, 0.95)",margin:0,display:"flex",alignItems:"center",gap:"10px"},closeButton:{background:"rgba(88, 101, 242, 0.2)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"20px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease"},formGroup:{marginBottom:"20px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"rgba(255, 255, 255, 0.8)",marginBottom:"8px"},input:{width:"100%",padding:"12px 14px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.95)",fontSize:"15px",outline:"none",transition:"all 0.2s ease",boxSizing:"border-box"},optionContainer:{display:"flex",gap:"8px",marginBottom:"10px"},optionInput:{flex:1,padding:"12px 14px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.95)",fontSize:"14px",outline:"none"},removeButton:{background:"rgba(218, 55, 60, 0.2)",border:"1px solid rgba(218, 55, 60, 0.4)",borderRadius:"8px",padding:"0 16px",cursor:"pointer",fontSize:"18px",color:"#da373c",transition:"all 0.2s ease",minWidth:"44px"},addButton:{background:"rgba(88, 101, 242, 0.2)",border:"1px solid rgba(88, 101, 242, 0.4)",borderRadius:"8px",padding:"10px 16px",cursor:"pointer",fontSize:"14px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",width:"100%",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",minHeight:"44px"},durationContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"10px"},durationButton:n(t=>({padding:"12px",background:t?"linear-gradient(135deg, rgba(88, 101, 242, 0.3), rgba(114, 137, 218, 0.3))":"rgba(0, 0, 0, 0.3)",border:`1px solid ${t?"rgba(88, 101, 242, 0.6)":"rgba(88, 101, 242, 0.3)"}`,borderRadius:"8px",cursor:"pointer",fontSize:"13px",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",fontWeight:t?"600":"400",minHeight:"44px"}),"durationButton"),buttonContainer:{display:"flex",gap:"12px",marginTop:"24px"},createButton:{flex:1,padding:"14px",background:"linear-gradient(135deg, #5865f2, #7289da)",border:"none",borderRadius:"8px",cursor:p?"not-allowed":"pointer",fontSize:"16px",fontWeight:"600",color:"white",transition:"all 0.2s ease",opacity:p?.6:1,minHeight:"44px"},cancelButton:{flex:1,padding:"14px",background:"rgba(78, 80, 88, 0.5)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",transition:"all 0.2s ease",minHeight:"44px"}},S=[1,4,8,24,72,168];return e.jsx("div",{style:o.overlay,onClick:l,children:e.jsxs("div",{style:o.modal,onClick:n(t=>t.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:o.header,children:[e.jsxs("h2",{style:o.title,children:[e.jsx("span",{children:"ðŸ“Š"}),"Create Poll"]}),e.jsx("button",{onClick:l,style:o.closeButton,children:"âœ•"})]}),e.jsxs("div",{style:o.formGroup,children:[e.jsx("label",{style:o.label,children:"Question"}),e.jsx("input",{type:"text",value:c,onChange:n(t=>y(t.target.value),"onChange"),placeholder:"What's your question?",style:o.input,maxLength:200})]}),e.jsxs("div",{style:o.formGroup,children:[e.jsx("label",{style:o.label,children:"Options (2-10)"}),a.map((t,r)=>e.jsxs("div",{style:o.optionContainer,children:[e.jsx("input",{type:"text",value:t,onChange:n(i=>v(r,i.target.value),"onChange"),placeholder:`Option ${r+1}`,style:o.optionInput,maxLength:100}),a.length>2&&e.jsx("button",{onClick:n(()=>k(r),"onClick"),style:o.removeButton,children:"âœ•"})]},r)),a.length<10&&e.jsxs("button",{onClick:C,style:o.addButton,children:[e.jsx("span",{children:"âž•"}),"Add Option"]})]}),e.jsxs("div",{style:o.formGroup,children:[e.jsx("label",{style:o.label,children:"Poll Duration"}),e.jsx("div",{style:o.durationContainer,children:S.map(t=>e.jsx("button",{onClick:n(()=>j(t),"onClick"),style:o.durationButton(m===t),children:t<24?`${t}h`:`${t/24}d`},t))})]}),e.jsxs("div",{style:o.buttonContainer,children:[e.jsx("button",{onClick:l,style:o.cancelButton,children:"Cancel"}),e.jsx("button",{onClick:B,disabled:p,style:o.createButton,children:p?"Creating...":"Create Poll"})]})]})})},"PollCreator");export{E as default};
