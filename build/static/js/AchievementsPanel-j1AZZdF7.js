import{r as n,n as s}from"./react-core-zXIKm1Jm.js";import{t as p}from"./index-BFxrV0cL.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-PJALNo1v.js";import"./crypto-vendor-D_AcF0lD.js";import"./icons-vendor-BBdoVeJd.js";import"./state-vendor-8NbFPBhQ.js";const T=({apiBaseUrl:h,username:N,onClose:x})=>{const[t,v]=n.useState([]),[d,k]=n.useState([]),[b,j]=n.useState(!0),[c,m]=n.useState("all"),[r,o]=n.useState("all");n.useEffect(()=>{f(),y()},[N]);const f=async()=>{try{j(!0);const e=localStorage.getItem("access_token"),a=await fetch(`${h}/api/user/achievements/`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const i=await a.json();v(i.achievements||[])}else p.error("‚ùå Ba≈üarƒ±lar y√ºklenemedi")}catch(e){console.error("Fetch achievements error:",e),p.error("‚ùå Baƒülantƒ± hatasƒ±")}finally{j(!1)}},y=async()=>{try{const e=localStorage.getItem("access_token"),a=await fetch(`${h}/api/user/badges/`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const i=await a.json();k(i.badges||[])}}catch(e){console.error("Fetch badges error:",e)}},u=t.filter(e=>{const a=c==="all"||c==="unlocked"&&e.unlocked||c==="locked"&&!e.unlocked,i=r==="all"||e.category===r;return a&&i}),l={total:t.length,unlocked:t.filter(e=>e.unlocked).length,locked:t.filter(e=>!e.unlocked).length,progress:t.length>0?Math.round(t.filter(e=>e.unlocked).length/t.length*100):0},g=e=>{const a={common:"#95a5a6",uncommon:"#3498db",rare:"#9b59b6",epic:"#e74c3c",legendary:"#f39c12"};return a[e]||a.common},C=e=>e==="legendary"?"0 0 20px rgba(243, 156, 18, 0.6)":e==="epic"?"0 0 15px rgba(231, 76, 60, 0.5)":e==="rare"?"0 0 10px rgba(155, 89, 182, 0.4)":"none";return s.jsx("div",{className:"achievements-overlay",onClick:x,children:s.jsxs("div",{className:"achievements-panel",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"achievements-header",children:[s.jsx("h2",{children:"üèÜ Ba≈üarƒ±lar & Rozetler"}),s.jsx("button",{className:"close-btn",onClick:x,children:"‚úï"})]}),s.jsxs("div",{className:"achievements-stats",children:[s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"üéØ"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[l.unlocked,"/",l.total]}),s.jsx("span",{className:"stat-label",children:"Ba≈üarƒ±"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"üìä"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[l.progress,"%"]}),s.jsx("span",{className:"stat-label",children:"Tamamlanma"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"üéñÔ∏è"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:d.length}),s.jsx("span",{className:"stat-label",children:"Rozet"})]})]})]}),s.jsxs("div",{className:"progress-section",children:[s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:`${l.progress}%`}})}),s.jsxs("span",{className:"progress-text",children:[l.progress,"% Complete"]})]}),s.jsxs("div",{className:"achievements-filters",children:[s.jsxs("div",{className:"filter-group",children:[s.jsxs("button",{className:c==="all"?"active":"",onClick:()=>m("all"),children:["T√ºm√º (",l.total,")"]}),s.jsxs("button",{className:c==="unlocked"?"active":"",onClick:()=>m("unlocked"),children:["‚úì A√ßƒ±k (",l.unlocked,")"]}),s.jsxs("button",{className:c==="locked"?"active":"",onClick:()=>m("locked"),children:["üîí Kilitli (",l.locked,")"]})]}),s.jsxs("div",{className:"category-group",children:[s.jsx("button",{className:r==="all"?"active":"",onClick:()=>o("all"),children:"T√ºm Kategoriler"}),s.jsx("button",{className:r==="social"?"active":"",onClick:()=>o("social"),children:"üë• Sosyal"}),s.jsx("button",{className:r==="activity"?"active":"",onClick:()=>o("activity"),children:"‚ö° Aktivite"}),s.jsx("button",{className:r==="special"?"active":"",onClick:()=>o("special"),children:"‚≠ê √ñzel"})]})]}),s.jsxs("div",{className:"achievements-content",children:[d.length>0&&s.jsxs("div",{className:"badges-section",children:[s.jsx("h3",{children:"üéñÔ∏è Rozetler"}),s.jsx("div",{className:"badges-grid",children:d.map(e=>s.jsxs("div",{className:"badge-card",title:e.description,children:[s.jsx("div",{className:"badge-icon",children:e.icon}),s.jsx("div",{className:"badge-name",children:e.name})]},e.id))})]}),s.jsx("div",{className:"achievements-grid",children:b?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"Y√ºkleniyor..."})]}):u.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"üéØ Ba≈üarƒ± bulunamadƒ±"})}):u.map(e=>s.jsxs("div",{className:`achievement-card ${e.unlocked?"unlocked":"locked"} ${e.rarity}`,style:{boxShadow:e.unlocked?C(e.rarity):"none"},children:[s.jsxs("div",{className:"achievement-icon-wrapper",children:[s.jsx("div",{className:"achievement-icon",children:e.icon||"üèÜ"}),e.unlocked&&s.jsx("div",{className:"unlocked-badge",children:"‚úì"})]}),s.jsxs("div",{className:"achievement-info",children:[s.jsx("div",{className:"achievement-name",children:e.name}),s.jsx("div",{className:"achievement-description",children:e.description}),e.progress!==void 0&&!e.unlocked&&s.jsxs("div",{className:"achievement-progress",children:[s.jsx("div",{className:"mini-progress-bar",children:s.jsx("div",{className:"mini-progress-fill",style:{width:`${e.current/e.target*100}%`,backgroundColor:g(e.rarity)}})}),s.jsxs("span",{className:"progress-label",children:[e.current,"/",e.target]})]}),e.unlocked&&e.unlocked_at&&s.jsxs("div",{className:"unlocked-date",children:["A√ßƒ±ldƒ±: ",new Date(e.unlocked_at).toLocaleDateString("tr-TR")]})]}),s.jsx("div",{className:"rarity-badge",style:{backgroundColor:g(e.rarity),color:"white"},children:e.rarity||"common"})]},e.id))})]})]})})};export{T as default};
