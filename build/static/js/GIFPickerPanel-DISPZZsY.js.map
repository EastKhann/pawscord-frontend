{"version":3,"file":"GIFPickerPanel-DISPZZsY.js","sources":["../../../src/components/GIFPickerPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport './GIFPickerPanel.css';\nimport { FaImage, FaSearch, FaTh, FaList, FaHeart } from 'react-icons/fa';\n\nfunction GIFPickerPanel({ apiBaseUrl, fetchWithAuth, onSelectGIF }) {\n  const [gifs, setGifs] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [viewMode, setViewMode] = useState('grid'); // grid or list\n  const [favorites, setFavorites] = useState(new Set());\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    loadGIFs();\n    loadCategories();\n    loadFavorites();\n  }, [selectedCategory, searchQuery]);\n\n  const loadGIFs = async () => {\n    setLoading(true);\n    try {\n      const params = new URLSearchParams();\n      if (selectedCategory !== 'all') params.append('category', selectedCategory);\n      if (searchQuery) params.append('search', searchQuery);\n\n      const response = await fetchWithAuth(`${apiBaseUrl}/gifs/list_local/?${params}`);\n      if (response.ok) {\n        const data = await response.json();\n        setGifs(data.gifs || []);\n      }\n    } catch (err) {\n      console.error('Error loading GIFs:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadCategories = async () => {\n    try {\n      const response = await fetchWithAuth(`${apiBaseUrl}/gifs/categories/`);\n      if (response.ok) {\n        const data = await response.json();\n        setCategories(data.categories || []);\n      }\n    } catch (err) {\n      console.error('Error loading categories:', err);\n    }\n  };\n\n  const loadFavorites = async () => {\n    try {\n      const response = await fetchWithAuth(`${apiBaseUrl}/gifs/favorites/`);\n      if (response.ok) {\n        const data = await response.json();\n        setFavorites(new Set(data.gif_ids || []));\n      }\n    } catch (err) {\n      console.error('Error loading favorites:', err);\n    }\n  };\n\n  const toggleFavorite = async (gifId) => {\n    try {\n      const isFav = favorites.has(gifId);\n      const url = isFav \n        ? `${apiBaseUrl}/gifs/favorites/remove/`\n        : `${apiBaseUrl}/gifs/favorites/add/`;\n\n      const response = await fetchWithAuth(url, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ gif_id: gifId })\n      });\n\n      if (response.ok) {\n        const newFavs = new Set(favorites);\n        if (isFav) {\n          newFavs.delete(gifId);\n        } else {\n          newFavs.add(gifId);\n        }\n        setFavorites(newFavs);\n      }\n    } catch (err) {\n      console.error('Error toggling favorite:', err);\n    }\n  };\n\n  return (\n    <div className=\"gif-picker-panel\">\n      <div className=\"gif-header\">\n        <h2><FaImage /> GIF Library</h2>\n        <div className=\"view-controls\">\n          <button \n            className={`view-btn ${viewMode === 'grid' ? 'active' : ''}`}\n            onClick={() => setViewMode('grid')}\n          >\n            <FaTh />\n          </button>\n          <button \n            className={`view-btn ${viewMode === 'list' ? 'active' : ''}`}\n            onClick={() => setViewMode('list')}\n          >\n            <FaList />\n          </button>\n        </div>\n      </div>\n\n      <div className=\"gif-search\">\n        <FaSearch className=\"search-icon\" />\n        <input\n          type=\"text\"\n          placeholder=\"Search GIFs...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          className=\"search-input\"\n        />\n      </div>\n\n      <div className=\"gif-categories\">\n        <button\n          className={`category-btn ${selectedCategory === 'all' ? 'active' : ''}`}\n          onClick={() => setSelectedCategory('all')}\n        >\n          All\n        </button>\n        {categories.map(cat => (\n          <button\n            key={cat.id}\n            className={`category-btn ${selectedCategory === cat.id ? 'active' : ''}`}\n            onClick={() => setSelectedCategory(cat.id)}\n          >\n            {cat.name}\n          </button>\n        ))}\n      </div>\n\n      <div className={`gif-grid ${viewMode}`}>\n        {loading ? (\n          <div className=\"gif-loading\">Loading GIFs...</div>\n        ) : gifs.length === 0 ? (\n          <div className=\"empty-gifs\">\n            <FaImage className=\"empty-icon\" />\n            <p>No GIFs found</p>\n          </div>\n        ) : (\n          gifs.map(gif => (\n            <div key={gif.id} className=\"gif-item\">\n              <img \n                src={gif.url} \n                alt={gif.name}\n                onClick={() => onSelectGIF && onSelectGIF(gif)}\n                className=\"gif-image\"\n              />\n              <div className=\"gif-overlay\">\n                <button\n                  className={`fav-btn ${favorites.has(gif.id) ? 'favorited' : ''}`}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    toggleFavorite(gif.id);\n                  }}\n                >\n                  <FaHeart />\n                </button>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default GIFPickerPanel;\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":"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"}