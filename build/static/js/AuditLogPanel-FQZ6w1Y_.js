import{r as a,b as e}from"./react-core-DFLfBPkm.js";import{aT as x,a as _,b as z,aa as R}from"./icons-vendor-BhMLc_xA.js";import"./chart-vendor-CPuFblPm.js";import"./editor-vendor-DiU449Dh.js";const A=({serverId:r,onClose:f,fetchWithAuth:p,apiBaseUrl:m})=>{const[b,y]=a.useState([]),[E,u]=a.useState(!0),[l,h]=a.useState("all"),[s,v]=a.useState(""),[i,S]=a.useState("7days");a.useEffect(()=>{k()},[r,l,i]);const k=async()=>{u(!0);try{const t=new URLSearchParams({filter:l,range:i}),n=await p(`${m}/api/servers/${r}/audit-logs/?${t}`);if(n.ok){const c=await n.json();y(c.logs||[])}}catch(t){console.error("Audit log fetch error:",t)}finally{u(!1)}},w=async()=>{try{const n=await(await p(`${m}/api/servers/${r}/audit-logs/export/`)).blob(),c=window.URL.createObjectURL(n),d=document.createElement("a");d.href=c,d.download=`audit-log-${r}-${Date.now()}.csv`,d.click()}catch(t){console.error("Export error:",t)}},C=t=>({member_join:"ðŸ‘‹",member_leave:"ðŸ‘‹",member_kick:"ðŸ‘¢",member_ban:"ðŸ”¨",channel_create:"âž•",channel_delete:"ðŸ—‘ï¸",channel_update:"âœï¸",role_create:"ðŸŽ­",role_delete:"ðŸ—‘ï¸",role_update:"âœï¸",message_delete:"ðŸ—‘ï¸",message_bulk_delete:"ðŸ—‘ï¸",server_update:"âš™ï¸",invite_create:"ðŸ”—",webhook_create:"ðŸª",webhook_delete:"ðŸ—‘ï¸"})[t]||"ðŸ“",L=t=>t.includes("delete")||t.includes("kick")||t.includes("ban")?"#ed4245":t.includes("create")||t.includes("join")?"#3ba55d":"#faa61a",g=b.filter(t=>t.description?.toLowerCase().includes(s.toLowerCase())||t.user?.toLowerCase().includes(s.toLowerCase()));return e.createElement("div",{style:o.overlay},e.createElement("div",{style:o.panel},e.createElement("div",{style:o.header},e.createElement("div",{style:o.headerLeft},e.createElement(x,{size:20,color:"#5865f2"}),e.createElement("h2",{style:o.title},"Denetim GÃ¼nlÃ¼ÄŸÃ¼")),e.createElement("button",{onClick:f,style:o.closeButton},e.createElement(_,{size:20}))),e.createElement("div",{style:o.filters},e.createElement("div",{style:o.searchBox},e.createElement(z,{size:14,color:"#b9bbbe"}),e.createElement("input",{type:"text",placeholder:"Ara...",value:s,onChange:t=>v(t.target.value),style:o.searchInput})),e.createElement("select",{value:l,onChange:t=>h(t.target.value),style:o.select},e.createElement("option",{value:"all"},"TÃ¼m Eylemler"),e.createElement("option",{value:"members"},"Ãœye Ä°ÅŸlemleri"),e.createElement("option",{value:"channels"},"Kanal Ä°ÅŸlemleri"),e.createElement("option",{value:"roles"},"Rol Ä°ÅŸlemleri"),e.createElement("option",{value:"messages"},"Mesaj Ä°ÅŸlemleri"),e.createElement("option",{value:"server"},"Sunucu Ä°ÅŸlemleri")),e.createElement("select",{value:i,onChange:t=>S(t.target.value),style:o.select},e.createElement("option",{value:"1day"},"Son 24 Saat"),e.createElement("option",{value:"7days"},"Son 7 GÃ¼n"),e.createElement("option",{value:"30days"},"Son 30 GÃ¼n"),e.createElement("option",{value:"90days"},"Son 90 GÃ¼n")),e.createElement("button",{onClick:w,style:o.exportButton},e.createElement(R,{size:14}),e.createElement("span",null,"DÄ±ÅŸa Aktar"))),e.createElement("div",{style:o.logsList},E?e.createElement("div",{style:o.loading},"YÃ¼kleniyor..."):g.length===0?e.createElement("div",{style:o.empty},e.createElement(x,{size:48,color:"#4e5058"}),e.createElement("p",null,"HenÃ¼z log kaydÄ± yok")):g.map((t,n)=>e.createElement("div",{key:n,style:o.logItem},e.createElement("div",{style:o.logIcon},C(t.action)),e.createElement("div",{style:o.logContent},e.createElement("div",{style:o.logDescription},e.createElement("span",{style:{color:L(t.action),fontWeight:"bold"}},t.user)," ",t.description),e.createElement("div",{style:o.logMeta},e.createElement("span",null,new Date(t.timestamp).toLocaleString("tr-TR")),t.target&&e.createElement("span",null," â€¢ Hedef: ",t.target))))))))},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},panel:{backgroundColor:"#2f3136",borderRadius:"8px",width:"100%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.4)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid #202225"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},title:{margin:0,fontSize:"20px",fontWeight:"bold",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"all 0.2s"},filters:{display:"flex",gap:"12px",padding:"16px 20px",borderBottom:"1px solid #202225",flexWrap:"wrap"},searchBox:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#202225",padding:"8px 12px",borderRadius:"4px",flex:1,minWidth:"200px"},searchInput:{background:"none",border:"none",color:"#dcddde",fontSize:"14px",outline:"none",width:"100%"},select:{backgroundColor:"#202225",border:"none",color:"#dcddde",padding:"8px 12px",borderRadius:"4px",fontSize:"14px",cursor:"pointer",outline:"none"},exportButton:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#5865f2",color:"#ffffff",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},logsList:{flex:1,overflowY:"auto",padding:"16px 20px"},loading:{textAlign:"center",padding:"40px",color:"#b9bbbe"},empty:{textAlign:"center",padding:"60px 20px",color:"#b9bbbe"},logItem:{display:"flex",gap:"12px",padding:"12px",marginBottom:"8px",backgroundColor:"#36393f",borderRadius:"4px",borderLeft:"3px solid #5865f2",transition:"all 0.2s"},logIcon:{fontSize:"24px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},logContent:{flex:1},logDescription:{color:"#dcddde",fontSize:"14px",marginBottom:"4px"},logMeta:{fontSize:"12px",color:"#72767d"}};export{A as default};
