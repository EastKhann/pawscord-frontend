import{r as i,cr as c,l as u,Y as R,aN as v,v as h}from"./react-core-B6hadH-M.js";import{t as o,h as k}from"./index-D_6pZib5.js";const C=({fetchWithAuth:r,apiBaseUrl:n,serverId:p,onClose:s})=>{const[d,x]=i.useState([]),[y,m]=i.useState(!0);i.useEffect(()=>{l()},[]);const l=async()=>{try{m(!0);const e=await r(`${n}/rooms/archived/list/?server_id=${p}`);if(e.ok){const a=await e.json();x(a)}}catch(e){console.error("Arşiv yükleme hatası:",e)}finally{m(!1)}},f=async e=>{try{(await r(`${n}/rooms/${e}/unarchive/`,{method:"POST"})).ok?(o.success("Kanal geri yüklendi"),l()):o.error("Kanal geri yüklenemedi")}catch(a){console.error("Unarchive hatası:",a),o.error("Bir hata oluştu")}},g=async e=>{if(await k("Bu kanalı kalıcı olarak silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!"))try{(await r(`${n}/rooms/${e}/delete/`,{method:"DELETE"})).ok?(o.success("Kanal kalıcı olarak silindi"),l()):o.error("Kanal silinemedi")}catch(a){console.error("Delete hatası:",a),o.error("Bir hata oluştu")}};return React.createElement("div",{style:t.overlay,onClick:s},React.createElement("div",{style:t.modal,onClick:e=>e.stopPropagation()},React.createElement("div",{style:t.header},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},React.createElement(c,{style:{color:"#888"}}),React.createElement("h2",{style:{margin:0}},"Arşivlenmiş Kanallar")),React.createElement(u,{onClick:s,style:t.closeBtn})),React.createElement("div",{style:t.content},y?React.createElement("div",{style:t.loading},"Yükleniyor..."):d.length===0?React.createElement("div",{style:t.empty},React.createElement(c,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),React.createElement("p",null,"Arşivlenmiş kanal yok"),React.createElement("p",{style:{fontSize:"12px",color:"#888"}},"Arşivlenen kanallar burada görünür")):d.map(e=>React.createElement("div",{key:e.id,style:t.roomCard},React.createElement("div",{style:t.roomIcon},React.createElement(c,{style:{color:"#888"}})),React.createElement("div",{style:t.roomContent},React.createElement("div",{style:t.roomName},"#",e.name),React.createElement("div",{style:t.roomMeta},React.createElement(R,{style:{fontSize:"12px"}}),React.createElement("span",null,"Arşivlendi: ",new Date(e.archived_at).toLocaleDateString("tr-TR"))),e.archived_reason&&React.createElement("div",{style:t.roomReason},"Sebep: ",e.archived_reason)),React.createElement("div",{style:t.roomActions},React.createElement("button",{onClick:()=>f(e.slug),style:t.unarchiveBtn,title:"Geri yükle"},React.createElement(v,null)," Geri Yükle"),React.createElement("button",{onClick:()=>g(e.slug),style:t.deleteBtn,title:"Kalıcı olarak sil"},React.createElement(h,null))))))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},roomCard:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},roomIcon:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#1e1e1e",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},roomContent:{flex:1},roomName:{fontWeight:"600",fontSize:"16px",marginBottom:"6px",color:"#dcddde"},roomMeta:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#888",marginBottom:"4px"},roomReason:{fontSize:"13px",color:"#888",fontStyle:"italic"},roomActions:{display:"flex",flexDirection:"column",gap:"8px"},unarchiveBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},deleteBtn:{backgroundColor:"#f04747",color:"#fff",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{C as default};
