var B=Object.defineProperty;var a=(o,p)=>B(o,"name",{value:p,configurable:!0});import{r as n,j as e}from"./react-core-Djgtqrmb.js";import{w as G,c0 as O,h,$ as y,a0 as w,v as T}from"./icons-vendor-BW7dxHkX.js";import{c as _,t as l}from"./index-CjRzheBN.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const U=a(({onClose:o,apiBaseUrl:p})=>{const[s,N]=n.useState(""),[t,k]=n.useState(""),[m,v]=n.useState(!1),[u,S]=n.useState(!1),[f,x]=n.useState(!1),[P,z]=n.useState(!1),{overlayProps:j,dialogProps:b}=_({onClose:o,isOpen:!0,label:"Password Setup"}),C=a(()=>{if(s.length<8)return l.error("≈ûifre en az 8 karakter olmalƒ±dƒ±r"),!1;if(s!==t)return l.error("≈ûifreler e≈üle≈ümiyor"),!1;const r=/[A-Z]/.test(s),i=/[a-z]/.test(s),d=/[0-9]/.test(s);return!r||!i||!d?(l.error("≈ûifre en az bir b√ºy√ºk harf, bir k√º√ß√ºk harf ve bir rakam i√ßermelidir"),!1):!0},"validatePassword"),A=a(async r=>{if(r.preventDefault(),!!C()){x(!0);try{const i=localStorage.getItem("access_token"),d=await fetch(`${p}/users/change_password/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({new_password:s})});if(d.ok)z(!0),l.success("‚úÖ ≈ûifre ba≈üarƒ±yla belirlendi!"),setTimeout(()=>{o()},2e3);else{const L=await d.json();l.error(L.error||"≈ûifre belirlenemedi")}}catch{l.error("Bir hata olu≈ütu. L√ºtfen tekrar deneyin.")}finally{x(!1)}}},"handleSubmit"),E=a(()=>{l.info("≈ûifreyi daha sonra profil ayarlarƒ±ndan belirleyebilirsin"),o()},"handleSkip"),F=a(()=>{let r=0;return s.length>=8&&r++,s.length>=12&&r++,/[A-Z]/.test(s)&&r++,/[a-z]/.test(s)&&r++,/[0-9]/.test(s)&&r++,/[^A-Za-z0-9]/.test(s)&&r++,r},"getPasswordStrength"),g=["#f04747","#faa61a","#faa61a","#43b581","#43b581","#43b581"],Z=["√áok Zayƒ±f","Zayƒ±f","Orta","ƒ∞yi","G√º√ßl√º","√áok G√º√ßl√º"],c=F();return P?e.jsx("div",{className:"password-setup-overlay",...j,children:e.jsxs("div",{className:"password-setup-modal success",...b,children:[e.jsx("div",{className:"success-icon",children:e.jsx(G,{})}),e.jsx("h2",{children:"≈ûifre Belirlendi!"}),e.jsx("p",{children:"Artƒ±k e-posta ve ≈üifrenle de giri≈ü yapabilirsin."})]})}):e.jsx("div",{className:"password-setup-overlay",...j,children:e.jsxs("div",{className:"password-setup-modal",...b,children:[e.jsxs("div",{className:"password-setup-header",children:[e.jsxs("div",{className:"header-icon",children:[e.jsx(O,{className:"google-icon"}),e.jsx(h,{className:"lock-icon"})]}),e.jsx("h2",{children:"≈ûifre Belirle"}),e.jsx("p",{children:"Google ile giri≈ü yaptƒ±n! Hesabƒ±nƒ± daha g√ºvenli hale getirmek i√ßin bir ≈üifre belirleyebilirsin."})]}),e.jsxs("form",{onSubmit:A,className:"password-setup-form",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Yeni ≈ûifre"}),e.jsxs("div",{className:"password-input-wrapper",children:[e.jsx(h,{className:"input-icon"}),e.jsx("input",{type:m?"text":"password",value:s,onChange:a(r=>N(r.target.value),"onChange"),placeholder:"En az 8 karakter",required:!0,minLength:8}),e.jsx("button",{type:"button",className:"toggle-visibility",onClick:a(()=>v(!m),"onClick"),children:m?e.jsx(y,{}):e.jsx(w,{})})]}),s&&e.jsxs("div",{className:"password-strength",children:[e.jsx("div",{className:"strength-bars",children:[...Array(6)].map((r,i)=>e.jsx("div",{className:`strength-bar ${i<c?"active":""}`,style:{backgroundColor:i<c?g[c-1]:void 0}},i))}),e.jsx("span",{style:{color:g[c-1]||"#72767d"},children:Z[c-1]||"≈ûifre girin"})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"≈ûifre Tekrar"}),e.jsxs("div",{className:"password-input-wrapper",children:[e.jsx(h,{className:"input-icon"}),e.jsx("input",{type:u?"text":"password",value:t,onChange:a(r=>k(r.target.value),"onChange"),placeholder:"≈ûifreyi tekrar girin",required:!0}),e.jsx("button",{type:"button",className:"toggle-visibility",onClick:a(()=>S(!u),"onClick"),children:u?e.jsx(y,{}):e.jsx(w,{})})]}),t&&s!==t&&e.jsx("span",{className:"error-text",children:"≈ûifreler e≈üle≈ümiyor"}),t&&s===t&&e.jsx("span",{className:"success-text",children:"‚úì ≈ûifreler e≈üle≈üiyor"})]}),e.jsxs("div",{className:"password-requirements",children:[e.jsx("p",{children:"≈ûifre gereksinimleri:"}),e.jsxs("ul",{children:[e.jsx("li",{className:s.length>=8?"met":"",children:"En az 8 karakter"}),e.jsx("li",{className:/[A-Z]/.test(s)?"met":"",children:"En az bir b√ºy√ºk harf (A-Z)"}),e.jsx("li",{className:/[a-z]/.test(s)?"met":"",children:"En az bir k√º√ß√ºk harf (a-z)"}),e.jsx("li",{className:/[0-9]/.test(s)?"met":"",children:"En az bir rakam (0-9)"})]})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"submit",className:"submit-btn",disabled:f||s.length<8||s!==t,children:f?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{}),"≈ûifreyi Belirle"]})}),e.jsx("button",{type:"button",className:"skip-btn",onClick:E,disabled:f,children:"Daha Sonra"})]})]}),e.jsx("div",{className:"password-setup-footer",children:e.jsx("p",{children:"üí° ≈ûifreyi belirlersen hem Google hem de e-posta/≈üifre ile giri≈ü yapabilirsin."})})]})})},"PasswordSetupModal");export{U as default};
