import{r as n,d as e,d6 as g,ci as S,d7 as _,aj as F,af as k}from"./react-core-DrOm_csO.js";function $({apiBaseUrl:c,fetchWithAuth:r}){const[m,p]=n.useState([]),[s,E]=n.useState("all"),[o,u]=n.useState("all"),[v,h]=n.useState([]),[N,i]=n.useState(!1),y={new:e.createElement(k,{className:"type-icon new"}),fix:e.createElement(F,{className:"type-icon fix"}),improvement:e.createElement(_,{className:"type-icon improvement"})};n.useEffect(()=>{f(),w()},[s]);const f=async()=>{i(!0);try{const a=s==="all"?`${c}/changelog/`:`${c}/changelog/${s}/`,l=await r(a);if(l.ok){const t=await l.json();p(t.changes||[])}}catch(a){console.error("Error loading changelog:",a)}finally{i(!1)}},w=async()=>{try{const a=await r(`${c}/changelog/models/`);if(a.ok){const l=await a.json();h(l.models||[])}}catch(a){console.error("Error loading models:",a)}},d=(o==="all"?m:m.filter(a=>a.change_type===o)).reduce((a,l)=>{const t=new Date(l.created_at).toLocaleDateString();return a[t]||(a[t]=[]),a[t].push(l),a},{});return e.createElement("div",{className:"changelog-panel"},e.createElement("div",{className:"changelog-header"},e.createElement("h2",null,e.createElement(g,null)," Changelog")),e.createElement("div",{className:"changelog-filters"},e.createElement("div",{className:"filter-group"},e.createElement("label",null,"Model:"),e.createElement("select",{value:s,onChange:a=>E(a.target.value),className:"filter-select"},e.createElement("option",{value:"all"},"All Models"),v.map(a=>e.createElement("option",{key:a,value:a},a)))),e.createElement("div",{className:"filter-group"},e.createElement("label",null,"Type:"),e.createElement("select",{value:o,onChange:a=>u(a.target.value),className:"filter-select"},e.createElement("option",{value:"all"},"All Types"),e.createElement("option",{value:"new"},"New Features"),e.createElement("option",{value:"fix"},"Bug Fixes"),e.createElement("option",{value:"improvement"},"Improvements")))),e.createElement("div",{className:"changelog-timeline"},N?e.createElement("div",{className:"loading"},"Loading changelog..."):Object.keys(d).length===0?e.createElement("div",{className:"empty-changelog"},e.createElement(g,{className:"empty-icon"}),e.createElement("p",null,"No changelog entries found")):Object.entries(d).map(([a,l])=>e.createElement("div",{key:a,className:"date-group"},e.createElement("div",{className:"date-header"},e.createElement(S,null),e.createElement("h3",null,a)),e.createElement("div",{className:"changes-list"},l.map((t,C)=>e.createElement("div",{key:C,className:`change-item ${t.change_type}`},e.createElement("div",{className:"change-icon"},y[t.change_type]),e.createElement("div",{className:"change-content"},e.createElement("div",{className:"change-header"},e.createElement("span",{className:`change-badge ${t.change_type}`},t.change_type.toUpperCase()),t.model_name&&e.createElement("span",{className:"change-model"},t.model_name),t.version&&e.createElement("span",{className:"change-version"},"v",t.version)),e.createElement("div",{className:"change-description"},t.description),t.details&&e.createElement("div",{className:"change-details"},t.details)))))))))}export{$ as default};
