import{r as c,x as z,l as x,an as T,v as _,aX as B}from"./react-core-B6hadH-M.js";import{h as I}from"./index-D_6pZib5.js";const L=({fetchWithAuth:a,apiBaseUrl:r,currentUser:$,onClose:s})=>{const[l,i]=c.useState([]),[h,k]=c.useState(!0),d=c.useRef(null);c.useEffect(()=>{E()},[]),c.useEffect(()=>{const e=o=>{d.current&&!d.current.contains(o.target)&&s()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s]);const E=async()=>{try{const e=await a(`${r}/notifications/`);if(e.ok){const o=await e.json();i(o.results||o)}}catch(e){console.error("Notification yÃ¼kleme hatasÄ±:",e)}finally{k(!1)}},u=async e=>{try{await a(`${r}/notifications/${e}/read/`,{method:"POST"}),i(o=>o.map(n=>n.id===e?{...n,is_read:!0}:n))}catch(o){console.error("Mark as read hatasÄ±:",o)}},R=async()=>{try{await a(`${r}/notifications/mark_all_read/`,{method:"POST"}),i(e=>e.map(o=>({...o,is_read:!0})))}catch(e){console.error("Mark all as read hatasÄ±:",e)}},v=async e=>{try{await a(`${r}/notifications/${e}/`,{method:"DELETE"}),i(o=>o.filter(n=>n.id!==e))}catch(o){console.error("Notification silme hatasÄ±:",o)}},w=async()=>{if(await I("TÃ¼m bildirimleri silmek istediÄŸinize emin misiniz?"))try{await a(`${r}/notifications/clear_all/`,{method:"POST"}),i([])}catch(e){console.error("Clear all hatasÄ±:",e)}},S=e=>{switch(e){case"message":return"ðŸ’¬";case"mention":return"@";case"friend_request":return"ðŸ‘¥";case"server_invite":return"ðŸ ";case"reaction":return"ðŸ‘";case"reply":return"â†©ï¸";default:return"ðŸ””"}},C=e=>{const o=new Date(e),f=new Date-o,p=Math.floor(f/6e4),b=Math.floor(f/36e5),g=Math.floor(f/864e5);return p<1?"Az Ã¶nce":p<60?`${p} dakika Ã¶nce`:b<24?`${b} saat Ã¶nce`:g<7?`${g} gÃ¼n Ã¶nce`:o.toLocaleDateString()},m=l.filter(e=>!e.is_read).length;return React.createElement("div",{ref:d,style:t.dropdown},React.createElement("div",{style:t.header},React.createElement("div",{style:t.headerLeft},React.createElement(z,null),React.createElement("span",{style:t.headerTitle},"Bildirimler"),m>0&&React.createElement("span",{style:t.badge},m)),React.createElement("button",{onClick:s,style:t.closeButton},React.createElement(x,null))),l.length>0&&React.createElement("div",{style:t.actions},m>0&&React.createElement("button",{onClick:R,style:t.actionButton},React.createElement(T,null)," TÃ¼mÃ¼nÃ¼ okundu iÅŸaretle"),React.createElement("button",{onClick:w,style:{...t.actionButton,color:"#ed4245"}},React.createElement(_,null)," TÃ¼mÃ¼nÃ¼ temizle")),React.createElement("div",{style:t.list},h?React.createElement("div",{style:t.loading},"YÃ¼kleniyor..."):l.length===0?React.createElement("div",{style:t.empty},React.createElement("div",{style:t.emptyIcon},"ðŸ””"),React.createElement("div",null,"Bildirim yok"),React.createElement("div",{style:t.emptySubtext},"Yeni bildirimler burada gÃ¶rÃ¼necek")):l.map(e=>React.createElement("div",{key:e.id,style:{...t.notificationItem,backgroundColor:e.is_read?"transparent":"rgba(88, 101, 242, 0.05)"},onClick:()=>!e.is_read&&u(e.id)},React.createElement("div",{style:t.notificationIcon},S(e.notification_type)),React.createElement("div",{style:t.notificationContent},React.createElement("div",{style:t.notificationMessage},e.message),React.createElement("div",{style:t.notificationTime},C(e.created_at))),React.createElement("div",{style:t.notificationActions},!e.is_read&&React.createElement("button",{onClick:o=>{o.stopPropagation(),u(e.id)},style:t.iconButton,title:"Okundu iÅŸaretle"},React.createElement(B,null)),React.createElement("button",{onClick:o=>{o.stopPropagation(),v(e.id)},style:t.iconButton,title:"Sil"},React.createElement(x,null)))))))},t={dropdown:{position:"absolute",top:"100%",right:0,marginTop:"8px",width:"420px",maxWidth:"90vw",maxHeight:"600px",backgroundColor:"#2b2d31",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:1e4,display:"flex",flexDirection:"column",overflow:"hidden"},header:{padding:"16px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#1e1f22"},headerLeft:{display:"flex",alignItems:"center",gap:"8px",color:"#fff",fontSize:"1em",fontWeight:"600"},headerTitle:{fontSize:"1em",fontWeight:"600"},badge:{backgroundColor:"#ed4245",color:"#fff",fontSize:"0.75em",fontWeight:"bold",padding:"2px 6px",borderRadius:"10px",minWidth:"18px",textAlign:"center"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em",padding:"4px",display:"flex",alignItems:"center",borderRadius:"4px",transition:"all 0.15s"},actions:{padding:"12px",display:"flex",gap:"8px",borderBottom:"1px solid #1e1f22",flexWrap:"wrap"},actionButton:{background:"none",border:"1px solid #40444b",color:"#b9bbbe",cursor:"pointer",fontSize:"0.85em",padding:"6px 12px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.15s"},list:{flex:1,overflowY:"auto",overflowX:"hidden"},loading:{padding:"40px",textAlign:"center",color:"#b9bbbe"},empty:{padding:"40px 20px",textAlign:"center",color:"#b9bbbe"},emptyIcon:{fontSize:"3em",marginBottom:"12px",opacity:.5},emptySubtext:{fontSize:"0.85em",color:"#72767d",marginTop:"8px"},notificationItem:{padding:"12px 16px",display:"flex",gap:"12px",borderBottom:"1px solid #1e1f22",cursor:"pointer",transition:"background-color 0.15s"},notificationIcon:{fontSize:"1.5em",flexShrink:0},notificationContent:{flex:1,minWidth:0},notificationMessage:{color:"#dbdee1",fontSize:"0.9em",lineHeight:"1.4",marginBottom:"4px"},notificationTime:{color:"#72767d",fontSize:"0.75em"},notificationActions:{display:"flex",gap:"4px",flexShrink:0},iconButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"0.9em",padding:"4px",display:"flex",alignItems:"center",borderRadius:"4px",transition:"all 0.15s"}},y=document.createElement("style");y.textContent=`
    .notification-item:hover {
        background-color: rgba(255, 255, 255, 0.05) !important;
    }
    .icon-button-notification:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff;
    }
    .close-button-notification:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff;
    }
    .action-button-notification:hover {
        background-color: rgba(88, 101, 242, 0.1);
        color: #fff;
        border-color: #5865f2;
    }
`;document.head.appendChild(y);export{L as default};
