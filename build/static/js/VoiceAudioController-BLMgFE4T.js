import{d as r,r as l}from"./react-core-DMT_QkRe.js";import{l as n,t as f}from"./index-grPt_ios.js";const g=({remoteStreams:o,remoteVolumes:t,mutedUsers:d})=>{const[i,c]=l.useState(()=>localStorage.getItem("pawscord_audio_enabled")==="true"),u=l.useCallback(()=>{try{const e=window.AudioContext||window.webkitAudioContext,a=new e;a.state==="suspended"&&a.resume().then(()=>{n.audio("AudioContext resumed successfully")}),c(!0),localStorage.setItem("pawscord_audio_enabled","true"),n.audio("Global audio enabled")}catch(e){n.error("Failed to enable AudioContext:",e),f.error("âŒ Ses sistemi baÅŸlatÄ±lamadÄ±: "+e.message)}},[]);return l.useEffect(()=>()=>n.audio("VoiceAudioController UNMOUNTED!"),[]),r.createElement(r.Fragment,null,!i&&Object.keys(o).length>0&&r.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999999,backgroundColor:"rgba(0,0,0,0.9)",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"}},r.createElement("button",{onClick:u,style:{padding:"12px 24px",backgroundColor:"#ff4757",color:"white",fontWeight:"bold",border:"none",cursor:"pointer",borderRadius:"6px",fontSize:"16px",transition:"all 0.2s",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},onMouseOver:e=>e.target.style.backgroundColor="#ee5a6f",onMouseOut:e=>e.target.style.backgroundColor="#ff4757"},"ðŸš¨ SES SÄ°STEMÄ°NÄ° BAÅžLAT ðŸš¨")),r.createElement("div",{style:{display:"none"}},Object.entries(o).map(([e,a])=>r.createElement(b,{key:`${e}-${a.id}-${a.getAudioTracks().length}`,username:e,stream:a,volume:t[e]!==void 0?t[e]:100,isMuted:d?d.has(e):!1,globalEnabled:i}))))},b=({username:o,stream:t,volume:d,isMuted:i,globalEnabled:c})=>{const u=l.useRef(null);return l.useEffect(()=>{if(t){const e=t.getAudioTracks();n.log(`[AudioPlayer] ${o} has ${e.length} audio tracks`)}},[t,o]),l.useEffect(()=>{const e=u.current;if(!e||!t)return;e.srcObject=t,e.muted=!1,(async()=>{if(c)try{if(t.getAudioTracks().length===0){n.warn(`[AudioPlayer] No audio tracks for ${o}`);return}await e.play(),n.log(`âœ… [AudioPlayer] Successfully playing ${o}`)}catch{}})()},[t,o,c]),l.useEffect(()=>{const e=u.current;if(!e)return;const a=i?0:d/100;e.volume=Math.max(0,Math.min(1,a))},[d,i,o]),r.createElement("audio",{ref:u,autoPlay:!0,playsInline:!0,style:{display:"none"}})},x=r.memo(g);export{x as default};
