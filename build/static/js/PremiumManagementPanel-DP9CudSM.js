var B=Object.defineProperty;var a=(u,h)=>B(u,"name",{value:h,configurable:!0});import{r as o,j as e}from"./react-core-Djgtqrmb.js";import{y as n}from"./ui-vendor-IhB9Znpc.js";import{g as O,d as Y}from"./index-Bohqi95c.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";const J=a(({onClose:u})=>{const[h,N]=o.useState([]),[r,y]=o.useState(null),[f,v]=o.useState(!0),[j,k]=o.useState("classic"),[d,x]=o.useState("monthly"),m=O(),p=localStorage.getItem("access_token");o.useEffect(()=>{_(),b()},[]);const _=a(async()=>{try{const i=await(await fetch(`${m}/nitro/pricing/`,{headers:{Authorization:`Bearer ${p}`}})).json();N(i.tiers||[])}catch{n.error("âŒ FiyatlandÄ±rma bilgileri yÃ¼klenemedi")}},"fetchPricingTiers"),b=a(async()=>{try{const i=await(await fetch(`${m}/nitro/my-subscription/`,{headers:{Authorization:`Bearer ${p}`}})).json();y(i.subscription||null)}catch{}finally{v(!1)}},"fetchCurrentSubscription"),$=a(async()=>{try{const s=await fetch(`${m}/nitro/subscribe/`,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({tier:j,billing_cycle:d,payment_method:"stripe"})}),i=await s.json();s.ok?(n.success("ğŸ‰ Abonelik baÅŸarÄ±yla baÅŸlatÄ±ldÄ±!"),b()):n.error(`âŒ ${i.error||"Abonelik baÅŸlatÄ±lamadÄ±"}`)}catch{n.error("âŒ Abonelik hatasÄ±")}},"subscribe"),C=a(async()=>{if(await Y("AboneliÄŸinizi iptal etmek istediÄŸinizden emin misiniz?"))try{const s=await fetch(`${m}/nitro/cancel/`,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}}),i=await s.json();s.ok?(n.info("â„¹ï¸ Abonelik iptal edildi"),b()):n.error(`âŒ ${i.error||"Ä°ptal edilemedi"}`)}catch{n.error("âŒ Ä°ptal hatasÄ±")}},"cancelSubscription"),S=a(async s=>{try{const i=await fetch(`${m}/nitro/upgrade/`,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({new_tier:s})}),l=await i.json();i.ok?(n.success("â¬†ï¸ Abonelik yÃ¼kseltildi!"),b()):n.error(`âŒ ${l.error||"YÃ¼kseltilemedi"}`)}catch{n.error("âŒ YÃ¼kseltme hatasÄ±")}},"upgradeSubscription"),c=a(s=>{const i={basic:"#3b82f6",classic:"#8b5cf6",elite:"#f59e0b"};return i[s]||i.classic},"getTierColor"),g=a(s=>{const i={basic:"ğŸŒŸ",classic:"ğŸ’",elite:"ğŸ‘‘"};return i[s]||i.classic},"getTierIcon"),w=a(s=>({upload_limit_mb:"ğŸ“¤",video_quality:"ğŸ¥",emoji_slots:"ğŸ˜€",custom_tag:"ğŸ·ï¸",animated_avatar:"ğŸ­",server_boosts:"ğŸš€",custom_profiles:"âœ¨",hd_video:"ğŸ“º",screen_share_quality:"ğŸ–¥ï¸",profile_banner:"ğŸ¨",custom_discriminator:"#ï¸âƒ£",badge:"ğŸ†",early_access:"ğŸ”“",priority_support:"ğŸ’¬"})[s]||"âœ“","getFeatureIcon"),A=a((s,i)=>typeof i=="boolean"?i?"Evet":"HayÄ±r":s==="upload_limit_mb"?`${i} MB`:(s.includes("quality"),i),"formatFeatureValue");return f?e.jsx("div",{className:"premium-overlay",children:e.jsx("div",{className:"premium-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]})})}):e.jsx("div",{className:"premium-overlay",onClick:u,children:e.jsxs("div",{className:"premium-panel",onClick:a(s=>s.stopPropagation(),"onClick"),children:[e.jsxs("div",{className:"premium-header",children:[e.jsx("h2",{children:"ğŸ’ Pawscord Premium"}),e.jsx("button",{className:"close-btn",onClick:u,children:"âœ•"})]}),r?e.jsxs("div",{className:"current-subscription",children:[e.jsxs("div",{className:"subscription-header",children:[e.jsx("span",{className:"subscription-icon",children:g(r.tier)}),e.jsxs("div",{className:"subscription-info",children:[e.jsx("h3",{children:r.tier_name||r.tier.toUpperCase()}),e.jsx("span",{className:"subscription-status",children:r.is_active?"âœ“ Aktif":"â¸ DurdurulmuÅŸ"})]}),e.jsx("div",{className:"subscription-actions",children:e.jsx("button",{className:"cancel-btn",onClick:C,children:"Ä°ptal Et"})})]}),e.jsxs("div",{className:"subscription-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"BaÅŸlangÄ±Ã§:"}),e.jsx("span",{className:"detail-value",children:new Date(r.start_date).toLocaleDateString("tr-TR")})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"BitiÅŸ:"}),e.jsx("span",{className:"detail-value",children:new Date(r.end_date).toLocaleDateString("tr-TR")})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Otomatik Yenileme:"}),e.jsx("span",{className:"detail-value",children:r.auto_renew?"AÃ§Ä±k":"KapalÄ±"})]})]})]}):e.jsxs("div",{className:"no-subscription",children:[e.jsx("div",{className:"no-subscription-icon",children:"ğŸ’"}),e.jsx("h3",{children:"Premium Ãœyelik Yok"}),e.jsx("p",{children:"Premium Ã¶zelliklerden yararlanmak iÃ§in aÅŸaÄŸÄ±daki planlardan birini seÃ§in"})]}),e.jsxs("div",{className:"billing-toggle",children:[e.jsx("button",{className:`billing-option ${d==="monthly"?"active":""}`,onClick:a(()=>x("monthly"),"onClick"),children:"AylÄ±k"}),e.jsxs("button",{className:`billing-option ${d==="yearly"?"active":""}`,onClick:a(()=>x("yearly"),"onClick"),children:["YÄ±llÄ±k ",e.jsx("span",{className:"save-badge",children:"%17 Ä°ndirim"})]})]}),e.jsx("div",{className:"pricing-tiers",children:Object.keys(h).map(s=>{const i=h[s],l=r?.tier===s,P=d==="yearly"?i.price_yearly:i.price_monthly;return e.jsxs("div",{className:`tier-card ${j===s?"selected":""} ${l?"current":""}`,style:{borderColor:c(s)},onClick:a(()=>!l&&k(s),"onClick"),children:[e.jsxs("div",{className:"tier-header",style:{background:`linear-gradient(135deg, ${c(s)}, ${c(s)}99)`},children:[e.jsx("span",{className:"tier-icon",children:g(s)}),e.jsx("h3",{children:i.name}),l&&e.jsx("span",{className:"current-badge",children:"Mevcut Plan"})]}),e.jsxs("div",{className:"tier-price",children:[e.jsxs("span",{className:"price-amount",children:["$",P]}),e.jsxs("span",{className:"price-period",children:["/",d==="yearly"?"yÄ±l":"ay"]})]}),e.jsx("div",{className:"tier-features",children:Object.entries(i.features).map(([t,T])=>e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:w(t)}),e.jsxs("span",{className:"feature-label",children:[t.replace(/_/g," ").replace(/\b\w/g,z=>z.toUpperCase()),":"]}),e.jsx("span",{className:"feature-value",children:A(t,T)})]},t))}),!l&&e.jsx("div",{className:"tier-actions",children:r?e.jsx("button",{className:"upgrade-btn",onClick:a(t=>{t.stopPropagation(),S(s)},"onClick"),style:{background:`linear-gradient(135deg, ${c(s)}, ${c(s)}dd)`},children:"YÃ¼kselt"}):e.jsx("button",{className:"subscribe-btn",onClick:a(t=>{t.stopPropagation(),$()},"onClick"),style:{background:`linear-gradient(135deg, ${c(s)}, ${c(s)}dd)`},children:"Abone Ol"})})]},s)})}),e.jsxs("div",{className:"info-banner",children:[e.jsx("span",{className:"info-icon",children:"â„¹ï¸"}),e.jsx("p",{children:"Premium abonelikler Stripe ile gÃ¼venli ÅŸekilde iÅŸlenir. Ä°stediÄŸiniz zaman iptal edebilirsiniz."})]})]})})},"PremiumManagementPanel");export{J as default};
