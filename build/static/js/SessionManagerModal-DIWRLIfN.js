var k=Object.defineProperty;var o=(s,n)=>k(s,"name",{value:n,configurable:!0});import{r as a,j as t}from"./react-core-Djgtqrmb.js";import{c as S,t as l}from"./index-D_luy7FO.js";import{a as z,aW as I,f as w,ae as B,aX as C,af as D}from"./icons-vendor-BW7dxHkX.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const W=o(({onClose:s,fetchWithAuth:n,apiBaseUrl:d})=>{const{overlayProps:p,dialogProps:u}=S({onClose:s,label:"Oturum YÃ¶neticisi"}),[c,x]=a.useState([]),[m,f]=a.useState(!0);a.useEffect(()=>{b()},[]);const b=o(async()=>{try{const e=await n(`${d}/sessions/list/`);if(e.ok){const r=await e.json();x(r.sessions||[])}}catch{}finally{f(!1)}},"loadSessions"),g=o(async e=>{if(confirm("Bu oturumu sonlandÄ±rmak istediÄŸinizden emin misiniz?"))try{(await n(`${d}/sessions/revoke/`,{method:"POST",body:JSON.stringify({session_id:e})})).ok?(x(j=>j.filter(v=>v.id!==e)),l.success("âœ… Oturum sonlandÄ±rÄ±ldÄ±")):l.error("âŒ Oturum sonlandÄ±rÄ±lamadÄ±")}catch{l.error("âŒ Bir hata oluÅŸtu")}},"handleRevoke"),y=o(e=>e?.includes("mobile")||e?.includes("android")||e?.includes("ios")?t.jsx(B,{}):e?.includes("tablet")?t.jsx(C,{}):t.jsx(D,{}),"getDeviceIcon"),h=o(e=>new Date(e).toLocaleString("tr-TR"),"formatDate");return t.jsx("div",{style:i.overlay,...p,children:t.jsxs("div",{style:i.modal,...u,children:[t.jsxs("div",{style:i.header,children:[t.jsx("h2",{style:i.title,children:"ðŸ” Aktif Oturumlar"}),t.jsx("button",{onClick:s,style:i.closeButton,children:t.jsx(z,{})})]}),t.jsx("div",{style:i.content,children:m?t.jsx("div",{style:i.loading,children:"YÃ¼kleniyor..."}):c.length===0?t.jsx("div",{style:i.empty,children:"Aktif oturum bulunamadÄ±"}):t.jsx("div",{style:i.sessionList,children:c.map(e=>t.jsxs("div",{style:i.sessionItem,children:[t.jsx("div",{style:i.sessionIcon,children:y(e.device_type)}),t.jsxs("div",{style:i.sessionInfo,children:[t.jsxs("div",{style:i.sessionDevice,children:[e.device_name||e.device_type||"Bilinmeyen Cihaz",e.is_current&&t.jsxs("span",{style:i.currentBadge,children:[t.jsx(I,{style:{fontSize:"6px"}})," Bu Cihaz"]})]}),t.jsxs("div",{style:i.sessionDetails,children:[e.ip_address&&t.jsxs("span",{children:["IP: ",e.ip_address]}),e.location&&t.jsxs("span",{children:[" â€¢ ",e.location]})]}),t.jsxs("div",{style:i.sessionTime,children:["Son Aktivite: ",h(e.last_activity||e.created_at)]})]}),!e.is_current&&t.jsx("button",{onClick:o(()=>g(e.id),"onClick"),style:i.revokeButton,title:"Oturumu sonlandÄ±r",children:t.jsx(w,{})})]},e.id))})})]})})},"SessionManagerModal"),i={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.5em"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.5em",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px"},sessionList:{display:"flex",flexDirection:"column",gap:"12px"},sessionItem:{backgroundColor:"#40444b",borderRadius:"8px",padding:"15px",display:"flex",alignItems:"center",gap:"15px"},sessionIcon:{fontSize:"2em",color:"#5865f2",minWidth:"40px",textAlign:"center"},sessionInfo:{flex:1},sessionDevice:{color:"white",fontWeight:"bold",fontSize:"1em",marginBottom:"5px",display:"flex",alignItems:"center",gap:"10px"},currentBadge:{backgroundColor:"#3ba55d",color:"white",padding:"2px 8px",borderRadius:"10px",fontSize:"0.7em",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px"},sessionDetails:{color:"#b9bbbe",fontSize:"0.85em",marginBottom:"3px"},sessionTime:{color:"#72767d",fontSize:"0.75em"},revokeButton:{backgroundColor:"#f04747",border:"none",color:"white",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"1em"}};export{W as default};
