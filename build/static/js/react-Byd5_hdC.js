var J=Object.defineProperty;var K=e=>{throw TypeError(e)};var ot=(e,n,t)=>n in e?J(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var r=(e,n)=>J(e,"name",{value:n,configurable:!0});var C=(e,n,t)=>ot(e,typeof n!="symbol"?n+"":n,t),V=(e,n,t)=>n.has(e)||K("Cannot "+t);var c=(e,n,t)=>(V(e,n,"read from private field"),t?t.call(e):n.get(e)),g=(e,n,t)=>n.has(e)?K("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),u=(e,n,t,i)=>(V(e,n,"write to private field"),i?i.call(e,t):n.set(e,t),t),Q=(e,n,t)=>(V(e,n,"access private method"),t);import{a as at}from"./react-core-Djgtqrmb.js";const lt="https://www.youtube.com/embed",ut="https://www.youtube-nocookie.com/embed",ct="https://www.youtube.com/iframe_api",dt="YT",ht="onYouTubeIframeAPIReady",X=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})/,ft=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/.*?[?&]list=)([\w_-]+)/;function Z(e,n={}){var t;const i={src:nt(e,n),frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"};return(t=n.config)!=null&&t.referrerpolicy&&(i.referrerpolicy=n.config.referrerpolicy),n.config&&(i["data-config"]=JSON.stringify(n.config)),`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
        position: relative;
        min-width: 300px;
        min-height: 150px;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
      }
    </style>
    <iframe${pt(i)}></iframe>
  `}r(Z,"getTemplateHTML");function nt(e,n){if(!e.src)return;const t=e.src.includes("-nocookie")?ut:lt,i={controls:e.controls===""?null:0,autoplay:e.autoplay,loop:e.loop,mute:e.muted,playsinline:e.playsinline,preload:e.preload??"metadata",enablejsapi:1,cc_load_policy:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1,...n.config};if(X.test(e.src)){const y=e.src.match(X),E=y&&y[1];return`${t}/${E}?${tt(i)}`}const s=e.src.match(ft),f={listType:"playlist",list:s&&s[1],...i};return`${t}?${tt(f)}`}r(nt,"serializeIframeUrl");var M,I,_,L,b,H,O,S,k,F,st;const R=class R extends(globalThis.HTMLElement??class{}){constructor(){super();g(this,F);C(this,"loadComplete",new B);g(this,M);g(this,I);g(this,_,0);g(this,L,!1);g(this,b);C(this,"isLoaded",!1);g(this,H,null);g(this,O,null);g(this,S,null);g(this,k,1);Q(this,F,st).call(this,"config")}get config(){return c(this,O)}set config(t){u(this,O,t)}async load(){if(c(this,M))return;this.shadowRoot||this.attachShadow({mode:"open"});const t=!c(this,I);c(this,I)&&(this.loadComplete=new B,this.isLoaded=!1),u(this,I,!0),await u(this,M,Promise.resolve()),u(this,M,null),u(this,_,0),this.dispatchEvent(new Event("emptied"));let i=this.api;if(this.api=null,!this.src){i?.destroy();return}u(this,S,document.createElement("video")),this.textTracks=c(this,S).textTracks,this.textTracks.addEventListener("change",()=>{var o;const p=Array.from(this.textTracks).find(v=>v.mode==="showing");(o=this.api)==null||o.setOption("captions","track",p?{languageCode:p.language}:{})}),this.dispatchEvent(new Event("loadstart"));let s=this.shadowRoot.querySelector("iframe"),d=mt(this.attributes);t&&s&&u(this,O,JSON.parse(s.getAttribute("data-config")||"{}")),(!s?.src||s.src!==nt(d,this))&&(this.shadowRoot.innerHTML=Z(d,this),s=this.shadowRoot.querySelector("iframe"));const f=await gt(ct,dt,ht);this.api=new f.Player(s,{events:{onReady:r(()=>{var o;u(this,_,1),this.dispatchEvent(new Event("loadedmetadata")),this.dispatchEvent(new Event("durationchange")),c(this,k)!==1&&((o=this.api)==null||o.setVolume(c(this,k)*100)),this.dispatchEvent(new Event("volumechange")),this.dispatchEvent(new Event("loadcomplete")),this.isLoaded=!0,this.loadComplete.resolve()},"onReady"),onError:r(o=>{u(this,H,{code:o.data,message:`YouTube iframe player error #${o.data}; visit https://developers.google.com/youtube/iframe_api_reference#onError for the full error message.`}),this.dispatchEvent(new Event("error"))},"onError")}});let y=!1;this.api.addEventListener("onStateChange",o=>{var p;const v=o.data;if((v===f.PlayerState.PLAYING||v===f.PlayerState.BUFFERING)&&(y||(y=!0,this.dispatchEvent(new Event("play"))),(this.api.getOption("captions","tracklist")||[]).forEach(A=>{[...this.textTracks].some(x=>x.language===A.languageCode)||c(this,S).addTextTrack("subtitles",A.displayName,A.languageCode),this.textTracks=c(this,S).textTracks}),this.dispatchEvent(new Event("loadstart"))),v===f.PlayerState.PLAYING)this.seeking&&(u(this,L,!1),(p=c(this,b))==null||p.resolve(),this.dispatchEvent(new Event("seeked"))),u(this,_,3),this.dispatchEvent(new Event("playing"));else if(v===f.PlayerState.PAUSED){const m=Math.abs(this.currentTime-E);!this.seeking&&m>.1&&(u(this,L,!0),this.dispatchEvent(new Event("seeking"))),y=!1,this.dispatchEvent(new Event("pause"))}v===f.PlayerState.ENDED&&(y=!1,this.dispatchEvent(new Event("pause")),this.dispatchEvent(new Event("ended")),this.loop&&this.play())}),this.api.addEventListener("onPlaybackRateChange",()=>{this.dispatchEvent(new Event("ratechange"))}),this.api.addEventListener("onVolumeChange",()=>{var o;const p=((o=this.api)==null?void 0:o.getVolume())/100;u(this,k,p),this.dispatchEvent(new Event("volumechange"))}),this.api.addEventListener("onVideoProgress",()=>{this.dispatchEvent(new Event("timeupdate"))}),await this.loadComplete;let E=0;setInterval(()=>{var o;const p=Math.abs(this.currentTime-E),v=this.buffered.end(this.buffered.length-1);this.seeking&&v>.1?(u(this,L,!1),(o=c(this,b))==null||o.resolve(),this.dispatchEvent(new Event("seeked"))):!this.seeking&&p>.1&&(u(this,L,!0),this.dispatchEvent(new Event("seeking"))),E=this.currentTime},50);let N;const $=setInterval(()=>{const o=this.buffered.end(this.buffered.length-1);o>=this.duration&&(clearInterval($),u(this,_,4)),N!=o&&(N=o,this.dispatchEvent(new Event("progress")))},100)}async attributeChangedCallback(t,i,s){if(i!==s)switch(t){case"src":case"autoplay":case"controls":case"loop":case"playsinline":this.load()}}async play(){var t;return u(this,b,null),await this.loadComplete,(t=this.api)==null||t.playVideo(),Et(this)}async pause(){var t;return await this.loadComplete,(t=this.api)==null?void 0:t.pauseVideo()}get seeking(){return c(this,L)}get readyState(){return c(this,_)}get src(){return this.getAttribute("src")}set src(t){this.src!=t&&this.setAttribute("src",t)}get error(){return c(this,H)}get paused(){var t,i;return this.isLoaded?[-1,0,2,5].includes((i=(t=this.api)==null?void 0:t.getPlayerState)==null?void 0:i.call(t)):!this.autoplay}get duration(){var t,i;return((i=(t=this.api)==null?void 0:t.getDuration)==null?void 0:i.call(t))??NaN}get autoplay(){return this.hasAttribute("autoplay")}set autoplay(t){this.autoplay!=t&&this.toggleAttribute("autoplay",!!t)}get buffered(){var t,i;if(!this.isLoaded)return W();const s=((t=this.api)==null?void 0:t.getVideoLoadedFraction())*((i=this.api)==null?void 0:i.getDuration());return s>0?W(0,s):W()}get controls(){return this.hasAttribute("controls")}set controls(t){this.controls!=t&&this.toggleAttribute("controls",!!t)}get currentTime(){var t,i;return((i=(t=this.api)==null?void 0:t.getCurrentTime)==null?void 0:i.call(t))??0}set currentTime(t){this.currentTime!=t&&(u(this,b,new B),this.loadComplete.then(()=>{var i,s;(i=this.api)==null||i.seekTo(t,!0),this.paused&&((s=c(this,b))==null||s.then(()=>{var d;c(this,b)&&((d=this.api)==null||d.pauseVideo())}))}))}set defaultMuted(t){this.defaultMuted!=t&&this.toggleAttribute("muted",!!t)}get defaultMuted(){return this.hasAttribute("muted")}get loop(){return this.hasAttribute("loop")}set loop(t){this.loop!=t&&this.toggleAttribute("loop",!!t)}set muted(t){this.muted!=t&&this.loadComplete.then(()=>{var i,s;t?(i=this.api)==null||i.mute():(s=this.api)==null||s.unMute()})}get muted(){var t,i;return this.isLoaded?(i=(t=this.api)==null?void 0:t.isMuted)==null?void 0:i.call(t):this.defaultMuted}get playbackRate(){var t,i;return((i=(t=this.api)==null?void 0:t.getPlaybackRate)==null?void 0:i.call(t))??1}set playbackRate(t){this.playbackRate!=t&&this.loadComplete.then(()=>{var i;(i=this.api)==null||i.setPlaybackRate(t)})}get playsInline(){return this.hasAttribute("playsinline")}set playsInline(t){this.playsInline!=t&&this.toggleAttribute("playsinline",!!t)}get poster(){return this.getAttribute("poster")}set poster(t){this.poster!=t&&this.setAttribute("poster",`${t}`)}set volume(t){this.volume!=t&&(u(this,k,t),this.loadComplete.then(()=>{var i;(i=this.api)==null||i.setVolume(t*100)}))}get volume(){var t;return this.isLoaded?((t=this.api)==null?void 0:t.getVolume())/100:c(this,k)}};M=new WeakMap,I=new WeakMap,_=new WeakMap,L=new WeakMap,b=new WeakMap,H=new WeakMap,O=new WeakMap,S=new WeakMap,k=new WeakMap,F=new WeakSet,st=r(function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const i=this[t];delete this[t],this[t]=i}},"#upgradeProperty"),r(R,"YoutubeVideoElement"),C(R,"getTemplateHTML",Z),C(R,"shadowRootOptions",{mode:"open"}),C(R,"observedAttributes",["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src"]);let j=R;function pt(e){let n="";for(const t in e){const i=e[t];i===""?n+=` ${G(t)}`:n+=` ${G(t)}="${G(`${i}`)}"`}return n}r(pt,"serializeAttributes");function G(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}r(G,"escapeHtml");function tt(e){return String(new URLSearchParams(vt(e)))}r(tt,"serialize");function vt(e){let n={};for(let t in e){let i=e[t];i===!0||i===""?n[t]=1:i===!1?n[t]=0:i!=null&&(n[t]=i)}return n}r(vt,"boolToBinary");function mt(e){let n={};for(let t of e)n[t.name]=t.value;return n}r(mt,"namedNodeMapToObject");const U={};async function gt(e,n,t){return U[e]?U[e]:self[n]?(await yt(0),self[n]):U[e]=new Promise(function(i,s){const d=document.createElement("script");d.src=e;const f=r(()=>i(self[n]),"ready");self[t]=f,d.onload=()=>!t,d.onerror=s,document.head.append(d)})}r(gt,"loadScript");const yt=r(e=>new Promise(n=>setTimeout(n,e)),"delay");function bt(e){return(...n)=>new Promise(t=>{e(...n,(...i)=>{i.length>1?t(i):t(i[0])})})}r(bt,"promisify");function Et(e){return bt((n,t)=>{let i;e.addEventListener(n,i=r(()=>{e.removeEventListener(n,i),t()},"fn"))})("playing")}r(Et,"createPlayPromise");const z=class z extends Promise{constructor(n=()=>{}){let t,i;super((s,d)=>{n(s,d),t=s,i=d}),this.resolve=t,this.reject=i}};r(z,"PublicPromise");let B=z;function W(e,n){return Array.isArray(e)?q(e):e==null||n==null||e===0&&n===0?q([[0,0]]):q([[e,n]])}r(W,"createTimeRanges");function q(e){return Object.defineProperties(e,{start:{value:r(n=>e[n][0],"value")},end:{value:r(n=>e[n][1],"value")}}),e}r(q,"createTimeRangesObj");globalThis.customElements&&!globalThis.customElements.get("youtube-video")&&globalThis.customElements.define("youtube-video",j);var wt=j,Tt=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),_t={className:"class",htmlFor:"for"};function rt(e){return e.toLowerCase()}r(rt,"defaultToAttributeName");function et(e){if(typeof e=="boolean")return e?"":void 0;if(typeof e!="function"&&!(typeof e=="object"&&e!==null))return e}r(et,"defaultToAttributeValue");function Lt({react:e,tagName:n,elementClass:t,events:i,displayName:s,defaultProps:d,toAttributeName:f=rt,toAttributeValue:y=et}){const E=Number.parseInt(e.version)>=19,N=e.forwardRef(($,o)=>{var p,v;const m=e.useRef(null),A=e.useRef(new Map),x={},Y={},w={},D={};for(const[a,l]of Object.entries($)){if(Tt.has(a)){w[a]=l;continue}const h=f(_t[a]??a);if(t.prototype&&a in t.prototype&&!(a in(((p=globalThis.HTMLElement)==null?void 0:p.prototype)??{}))&&!((v=t.observedAttributes)!=null&&v.some(P=>P===h))){D[a]=l;continue}if(a.startsWith("on")){x[a]=l;continue}const T=y(l);if(h&&T!=null&&(Y[h]=String(T),E||(w[h]=T)),h&&E){const P=et(l);T!==P?w[h]=T:w[h]=l}}if(typeof window<"u"){for(const a in x){const l=x[a],h=a.endsWith("Capture"),T=(i?.[a]??a.slice(2).toLowerCase()).slice(0,h?-7:void 0);e.useLayoutEffect(()=>{const P=m?.current;if(!(!P||typeof l!="function"))return P.addEventListener(T,l,h),()=>{P.removeEventListener(T,l,h)}},[m?.current,l])}e.useLayoutEffect(()=>{if(m.current===null)return;const a=new Map;for(const l in D)it(m.current,l,D[l]),A.current.delete(l),a.set(l,D[l]);for(const[l,h]of A.current)it(m.current,l,void 0);A.current=a})}if(typeof window>"u"&&t?.getTemplateHTML&&t?.shadowRootOptions){const{mode:a,delegatesFocus:l}=t.shadowRootOptions,h=e.createElement("template",{shadowrootmode:a,shadowrootdelegatesfocus:l,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(Y,$)},key:"ce-la-react-ssr-template-shadow-root"});w.children=[h,w.children]}return e.createElement(n,{...d,...w,ref:e.useCallback(a=>{m.current=a,typeof o=="function"?o(a):o!==null&&(o.current=a)},[o])},w.children)});return N.displayName=s??t.name,N}r(Lt,"createComponent");function it(e,n,t){var i;e[n]=t,t==null&&n in(((i=globalThis.HTMLElement)==null?void 0:i.prototype)??{})&&e.removeAttribute(n)}r(it,"setProperty");var Pt=Lt({react:at,tagName:"youtube-video",elementClass:wt,toAttributeName(e){return e==="muted"?"":e==="defaultMuted"?"muted":rt(e)}});export{Pt as default};
