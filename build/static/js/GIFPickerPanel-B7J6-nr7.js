import{r as t,aJ as y,dz as C,dA as $,w as G,ct as L}from"./react-core-B6hadH-M.js";function I({apiBaseUrl:s,fetchWithAuth:r,onSelectGIF:d}){const[g,R]=t.useState([]),[p,N]=t.useState([]),[c,v]=t.useState("all"),[n,w]=t.useState(""),[o,f]=t.useState("grid"),[l,E]=t.useState(new Set),[F,u]=t.useState(!1);t.useEffect(()=>{S(),h(),k()},[c,n]);const S=async()=>{u(!0);try{const e=new URLSearchParams;c!=="all"&&e.append("category",c),n&&e.append("search",n);const a=await r(`${s}/gifs/list_local/?${e}`);if(a.ok){const i=await a.json();R(i.gifs||[])}}catch(e){console.error("Error loading GIFs:",e)}finally{u(!1)}},h=async()=>{try{const e=await r(`${s}/gifs/categories/`);if(e.ok){const a=await e.json();N(a.categories||[])}}catch(e){console.error("Error loading categories:",e)}},k=async()=>{try{const e=await r(`${s}/gifs/favorites/`);if(e.ok){const a=await e.json();E(new Set(a.gif_ids||[]))}}catch(e){console.error("Error loading favorites:",e)}},b=async e=>{try{const a=l.has(e),i=a?`${s}/gifs/favorites/remove/`:`${s}/gifs/favorites/add/`;if((await r(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gif_id:e})})).ok){const m=new Set(l);a?m.delete(e):m.add(e),E(m)}}catch(a){console.error("Error toggling favorite:",a)}};return React.createElement("div",{className:"gif-picker-panel"},React.createElement("div",{className:"gif-header"},React.createElement("h2",null,React.createElement(y,null)," GIF Library"),React.createElement("div",{className:"view-controls"},React.createElement("button",{className:`view-btn ${o==="grid"?"active":""}`,onClick:()=>f("grid")},React.createElement(C,null)),React.createElement("button",{className:`view-btn ${o==="list"?"active":""}`,onClick:()=>f("list")},React.createElement($,null)))),React.createElement("div",{className:"gif-search"},React.createElement(G,{className:"search-icon"}),React.createElement("input",{type:"text",placeholder:"Search GIFs...",value:n,onChange:e=>w(e.target.value),className:"search-input"})),React.createElement("div",{className:"gif-categories"},React.createElement("button",{className:`category-btn ${c==="all"?"active":""}`,onClick:()=>v("all")},"All"),p.map(e=>React.createElement("button",{key:e.id,className:`category-btn ${c===e.id?"active":""}`,onClick:()=>v(e.id)},e.name))),React.createElement("div",{className:`gif-grid ${o}`},F?React.createElement("div",{className:"gif-loading"},"Loading GIFs..."):g.length===0?React.createElement("div",{className:"empty-gifs"},React.createElement(y,{className:"empty-icon"}),React.createElement("p",null,"No GIFs found")):g.map(e=>React.createElement("div",{key:e.id,className:"gif-item"},React.createElement("img",{src:e.url,alt:e.name,onClick:()=>d&&d(e),className:"gif-image"}),React.createElement("div",{className:"gif-overlay"},React.createElement("button",{className:`fav-btn ${l.has(e.id)?"favorited":""}`,onClick:a=>{a.stopPropagation(),b(e.id)}},React.createElement(L,null)))))))}export{I as default};
