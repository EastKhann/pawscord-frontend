import{r as o,a0 as y,aI as w,c4 as B,l as Y,bS as H,bT as J,bu as V,v as q,X,aj as T,az as Q,aw as Z,ax as ee,bo as O,n as te,A,bG as ae}from"./react-core-B6hadH-M.js";import{t as s,h as P}from"./index-D_6pZib5.js";const se=({apiBaseUrl:d,onClose:S,currentUser:ce})=>{const[n,r]=o.useState("list"),[u,E]=o.useState([]),[l,R]=o.useState(null),[z,$]=o.useState(!0),[h,v]=o.useState({}),[c,i]=o.useState({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),[F,k]=o.useState(!1),[g,C]=o.useState(""),[b,N]=o.useState([]);o.useEffect(()=>{D()},[]);const D=async()=>{try{const e=localStorage.getItem("access_token"),t=await fetch(`${d}/bots/my/`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const a=await t.json();E(a.bots||[])}}catch(e){console.error("Fetch bots error:",e)}finally{$(!1)}},j=async()=>{if(!c.name.trim()){s.error("âš ï¸ Bot adÄ± gerekli");return}try{const e=localStorage.getItem("access_token"),t=await fetch(`${d}/bots/create/`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(c)});if(t.ok){const a=await t.json();E([...u,a.bot]),i({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),r("list"),s.success("âœ… Bot oluÅŸturuldu!"),R(a.bot),v({[a.bot.id]:!0})}else{const a=await t.json();s.error(a.error||"âŒ Bot oluÅŸturulamadÄ±")}}catch(e){console.error("Create bot error:",e),s.error("âŒ Hata oluÅŸtu")}},W=async()=>{if(l)try{const e=localStorage.getItem("access_token"),t=await fetch(`${d}/bots/${l.id}/update/`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(c)});if(t.ok){const a=await t.json();E(u.map(m=>m.id===l.id?a.bot:m)),r("list"),s.success("âœ… Bot gÃ¼ncellendi!")}}catch(e){console.error("Update bot error:",e)}},M=async e=>{if(await P("Bu botu silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz."))try{const t=localStorage.getItem("access_token");(await fetch(`${d}/bots/${e}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(E(u.filter(m=>m.id!==e)),l?.id===e&&R(null),s.success("âœ… Bot silindi"))}catch(t){console.error("Delete bot error:",t)}},K=async e=>{if(await P("Token yenilenecek. Eski token geÃ§ersiz olacak. Devam?"))try{const t=localStorage.getItem("access_token"),a=await fetch(`${d}/bots/${e}/regenerate-token/`,{method:"POST",headers:{Authorization:`Bearer ${t}`}});if(a.ok){const m=await a.json();E(u.map(p=>p.id===e?{...p,token:m.token}:p)),v({...h,[e]:!0}),s.success("âœ… Token yenilendi!")}}catch(t){console.error("Regenerate token error:",t)}},I=async e=>{if(!g.trim()){s.error("âš ï¸ Webhook URL gerekli");return}try{const t=localStorage.getItem("access_token");(await fetch(`${d}/bots/${e}/webhook/`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({url:g,events:b})})).ok&&(s.success("âœ… Webhook oluÅŸturuldu!"),k(!1),C(""),N([]))}catch(t){console.error("Create webhook error:",t)}},L=async(e,t)=>{try{const a=localStorage.getItem("access_token");if((await fetch(`${d}/bots/${e}/${t==="online"?"pause":"start"}/`,{method:"POST",headers:{Authorization:`Bearer ${a}`}})).ok){const x=t==="online"?"offline":"online";E(u.map(f=>f.id===e?{...f,status:x}:f)),s.success(x==="online"?"âœ… Bot baÅŸlatÄ±ldÄ±!":"â¸ï¸ Bot durduruldu")}}catch(a){console.error("Toggle bot status error:",a)}},_=e=>{navigator.clipboard.writeText(e),s.success("ðŸ“‹ Panoya kopyalandÄ±!")},G=[{id:"message_create",label:"Mesaj GÃ¶nderildi"},{id:"message_edit",label:"Mesaj DÃ¼zenlendi"},{id:"message_delete",label:"Mesaj Silindi"},{id:"reaction_add",label:"Reaction Eklendi"},{id:"reaction_remove",label:"Reaction KaldÄ±rÄ±ldÄ±"},{id:"member_join",label:"Ãœye KatÄ±ldÄ±"},{id:"member_leave",label:"Ãœye AyrÄ±ldÄ±"},{id:"voice_join",label:"Ses KanalÄ±na KatÄ±ldÄ±"},{id:"voice_leave",label:"Ses KanalÄ±ndan AyrÄ±ldÄ±"}],U=e=>{i({name:e.name,description:e.description||"",avatar_url:e.avatar_url||"",prefix:e.prefix||"!",is_public:e.is_public||!1,intents:e.intents||{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}}),R(e),r("edit")};return React.createElement("div",{className:"bot-portal-overlay",onClick:S},React.createElement("div",{className:"bot-portal-panel",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"portal-header"},React.createElement("h2",null,React.createElement(y,null)," Bot GeliÅŸtirici PortalÄ±"),React.createElement("div",{className:"header-actions"},React.createElement("button",{className:`nav-btn ${n==="list"?"active":""}`,onClick:()=>r("list")},React.createElement(y,null)," BotlarÄ±m"),React.createElement("button",{className:`nav-btn ${n==="create"?"active":""}`,onClick:()=>{r("create"),R(null),i({name:"",description:"",avatar_url:"",prefix:"!",is_public:!1,intents:{messages:!0,reactions:!0,presence:!1,members:!1,voice:!1}})}},React.createElement(w,null)," Yeni Bot"),React.createElement("button",{className:`nav-btn ${n==="docs"?"active":""}`,onClick:()=>r("docs")},React.createElement(B,null)," DokÃ¼mantasyon")),React.createElement("button",{className:"close-btn",onClick:S},React.createElement(Y,null))),React.createElement("div",{className:"portal-content"},n==="list"&&React.createElement("div",{className:"bots-list-view"},z?React.createElement("div",{className:"loading"},"YÃ¼kleniyor..."):u.length>0?React.createElement("div",{className:"bots-grid"},u.map(e=>React.createElement("div",{key:e.id,className:"bot-card"},React.createElement("div",{className:"bot-header"},React.createElement("img",{src:e.avatar_url||"/default-bot.png",alt:e.name,className:"bot-avatar"}),React.createElement("div",{className:"bot-info"},React.createElement("h3",null,e.name),React.createElement("span",{className:`bot-status ${e.status||"offline"}`},e.status==="online"?"ðŸŸ¢ Online":"ðŸ”´ Offline")),React.createElement("div",{className:"bot-actions"},React.createElement("button",{className:"action-btn",onClick:()=>L(e.id,e.status),title:e.status==="online"?"Durdur":"BaÅŸlat"},e.status==="online"?React.createElement(H,null):React.createElement(J,null)),React.createElement("button",{className:"action-btn",onClick:()=>U(e),title:"DÃ¼zenle"},React.createElement(V,null)),React.createElement("button",{className:"action-btn delete",onClick:()=>M(e.id),title:"Sil"},React.createElement(q,null)))),React.createElement("p",{className:"bot-description"},e.description||"AÃ§Ä±klama yok"),React.createElement("div",{className:"bot-stats"},React.createElement("div",{className:"stat"},React.createElement(X,null),React.createElement("span",null,e.servers_count||0," sunucu")),React.createElement("div",{className:"stat"},React.createElement(T,null),React.createElement("span",null,e.commands_used||0," komut"))),React.createElement("div",{className:"bot-token-section"},React.createElement("div",{className:"token-header"},React.createElement(Q,null)," Token",React.createElement("button",{className:"toggle-token",onClick:()=>v({...h,[e.id]:!h[e.id]})},h[e.id]?React.createElement(Z,null):React.createElement(ee,null))),React.createElement("div",{className:"token-value"},React.createElement("code",null,h[e.id]?e.token:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),React.createElement("button",{className:"copy-btn",onClick:()=>_(e.token)},React.createElement(O,null))),React.createElement("button",{className:"regenerate-btn",onClick:()=>K(e.id)},React.createElement(te,null)," Token Yenile")),React.createElement("div",{className:"bot-footer"},React.createElement("button",{className:"webhook-btn",onClick:()=>{R(e),k(!0)}},React.createElement(A,null)," Webhook Ekle"),React.createElement("button",{className:"analytics-btn",onClick:()=>{R(e),r("analytics")}},React.createElement(T,null)," Analitik"))))):React.createElement("div",{className:"no-bots"},React.createElement(y,{className:"empty-icon"}),React.createElement("p",null,"HenÃ¼z bot oluÅŸturmadÄ±nÄ±z"),React.createElement("button",{onClick:()=>r("create")},React.createElement(w,null)," Ä°lk botunu oluÅŸtur"))),(n==="create"||n==="edit")&&React.createElement("div",{className:"bot-form-view"},React.createElement("h3",null,n==="create"?"ðŸ¤– Yeni Bot OluÅŸtur":"âœï¸ Bot DÃ¼zenle"),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Bot AdÄ± *"),React.createElement("input",{type:"text",placeholder:"Harika Bot",value:c.name,onChange:e=>i({...c,name:e.target.value}),maxLength:32})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"AÃ§Ä±klama"),React.createElement("textarea",{placeholder:"Bu bot ne yapar?",value:c.description,onChange:e=>i({...c,description:e.target.value}),rows:3})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Avatar URL"),React.createElement("input",{type:"text",placeholder:"https://...",value:c.avatar_url,onChange:e=>i({...c,avatar_url:e.target.value})})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Komut Prefix"),React.createElement("input",{type:"text",placeholder:"!",value:c.prefix,onChange:e=>i({...c,prefix:e.target.value}),maxLength:5})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Bot Ä°zinleri (Intents)"),React.createElement("div",{className:"intents-grid"},Object.entries(c.intents).map(([e,t])=>React.createElement("label",{key:e,className:"intent-checkbox"},React.createElement("input",{type:"checkbox",checked:t,onChange:a=>i({...c,intents:{...c.intents,[e]:a.target.checked}})}),React.createElement("span",null,e.charAt(0).toUpperCase()+e.slice(1)))))),React.createElement("div",{className:"form-group checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:c.is_public,onChange:e=>i({...c,is_public:e.target.checked})}),React.createElement("span",null,"Bot'u herkese aÃ§Ä±k yap (keÅŸfedilebilir)"))),React.createElement("div",{className:"form-actions"},React.createElement("button",{className:"submit-btn",onClick:n==="create"?j:W},React.createElement(ae,null)," ",n==="create"?"Bot OluÅŸtur":"Kaydet"),React.createElement("button",{className:"cancel-btn",onClick:()=>r("list")},"Ä°ptal"))),n==="analytics"&&l&&React.createElement("div",{className:"analytics-view"},React.createElement("button",{className:"back-btn",onClick:()=>r("list")},"â† Geri"),React.createElement("h3",null,"ðŸ“Š ",l.name," - Analitik"),React.createElement("div",{className:"analytics-grid"},React.createElement("div",{className:"analytics-card"},React.createElement("div",{className:"analytics-value"},l.servers_count||0),React.createElement("div",{className:"analytics-label"},"Toplam Sunucu")),React.createElement("div",{className:"analytics-card"},React.createElement("div",{className:"analytics-value"},l.users_count||0),React.createElement("div",{className:"analytics-label"},"Toplam KullanÄ±cÄ±")),React.createElement("div",{className:"analytics-card"},React.createElement("div",{className:"analytics-value"},l.commands_used||0),React.createElement("div",{className:"analytics-label"},"Komut KullanÄ±mÄ±")),React.createElement("div",{className:"analytics-card"},React.createElement("div",{className:"analytics-value"},l.messages_sent||0),React.createElement("div",{className:"analytics-label"},"Mesaj GÃ¶nderildi"))),React.createElement("div",{className:"analytics-chart-placeholder",style:{padding:"20px"}},React.createElement("h4",{style:{color:"#dbdee1",marginBottom:"16px"}},"ðŸ“ˆ HaftalÄ±k KullanÄ±m"),React.createElement("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px",height:"120px",padding:"0 10px"}},["Pzt","Sal","Ã‡ar","Per","Cum","Cmt","Paz"].map((e,t)=>{const a=Math.max(10,Math.floor((l.commands_used||50)*(.3+Math.sin(t*1.2)*.5+Math.random()*.2)/7)),m=(l.commands_used||50)/4,p=Math.min(100,a/Math.max(m,1)*100);return React.createElement("div",{key:e,style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"}},React.createElement("span",{style:{color:"#949ba4",fontSize:"0.7em"}},a),React.createElement("div",{style:{width:"100%",maxWidth:"40px",height:`${Math.max(p,8)}%`,backgroundColor:"#5865f2",borderRadius:"4px 4px 0 0",minHeight:"6px",transition:"height 0.3s ease"}}),React.createElement("span",{style:{color:"#949ba4",fontSize:"0.7em"}},e))})))),n==="docs"&&React.createElement("div",{className:"docs-view"},React.createElement("h3",null,React.createElement(B,null)," Bot API DokÃ¼mantasyonu"),React.createElement("div",{className:"docs-section"},React.createElement("h4",null,"ðŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§"),React.createElement("p",null,"PAWSCORD Bot API ile kendi botunuzu oluÅŸturabilirsiniz."),React.createElement("div",{className:"code-block"},React.createElement("div",{className:"code-header"},React.createElement("span",null,"JavaScript (Node.js)"),React.createElement("button",{onClick:()=>_(`const PAWSCORD = require('pawscord-bot');

const bot = new PAWSCORD.Client({
    token: 'YOUR_BOT_TOKEN'
});

bot.on('message', (message) => {
    if (message.content === '!ping') {
        message.reply('Pong! ðŸ“');
    }
});

bot.connect();`)},React.createElement(O,null))),React.createElement("pre",null,`const PAWSCORD = require('pawscord-bot');

const bot = new PAWSCORD.Client({
    token: 'YOUR_BOT_TOKEN'
});

bot.on('message', (message) => {
    if (message.content === '!ping') {
        message.reply('Pong! ðŸ“');
    }
});

bot.connect();`))),React.createElement("div",{className:"docs-section"},React.createElement("h4",null,"ðŸ“¡ API Endpoints"),React.createElement("div",{className:"endpoint-list"},React.createElement("div",{className:"endpoint"},React.createElement("span",{className:"method get"},"GET"),React.createElement("code",null,"/api/bots/@me"),React.createElement("span",null,"Bot bilgilerini al")),React.createElement("div",{className:"endpoint"},React.createElement("span",{className:"method post"},"POST"),React.createElement("code",null,"/api/messages/send"),React.createElement("span",null,"Mesaj gÃ¶nder")),React.createElement("div",{className:"endpoint"},React.createElement("span",{className:"method post"},"POST"),React.createElement("code",null,"/api/reactions/add"),React.createElement("span",null,"Reaction ekle")),React.createElement("div",{className:"endpoint"},React.createElement("span",{className:"method get"},"GET"),React.createElement("code",null,"/api/servers"),React.createElement("span",null,"Sunucu listesi")))),React.createElement("div",{className:"docs-section"},React.createElement("h4",null,"ðŸ”— WebSocket Events"),React.createElement("div",{className:"event-list"},React.createElement("div",{className:"event"},React.createElement("code",null,"MESSAGE_CREATE"),React.createElement("span",null,"Yeni mesaj gÃ¶nderildiÄŸinde")),React.createElement("div",{className:"event"},React.createElement("code",null,"REACTION_ADD"),React.createElement("span",null,"Reaction eklendiÄŸinde")),React.createElement("div",{className:"event"},React.createElement("code",null,"MEMBER_JOIN"),React.createElement("span",null,"Ãœye sunucuya katÄ±ldÄ±ÄŸÄ±nda")),React.createElement("div",{className:"event"},React.createElement("code",null,"VOICE_STATE_UPDATE"),React.createElement("span",null,"Ses durumu deÄŸiÅŸtiÄŸinde")))))),F&&React.createElement("div",{className:"webhook-modal-overlay"},React.createElement("div",{className:"webhook-modal"},React.createElement("h3",null,React.createElement(A,null)," Webhook OluÅŸtur"),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Webhook URL *"),React.createElement("input",{type:"text",placeholder:"https://your-server.com/webhook",value:g,onChange:e=>C(e.target.value)})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Olaylar"),React.createElement("div",{className:"webhook-events"},G.map(e=>React.createElement("label",{key:e.id,className:"event-checkbox"},React.createElement("input",{type:"checkbox",checked:b.includes(e.id),onChange:t=>{t.target.checked?N([...b,e.id]):N(b.filter(a=>a!==e.id))}}),React.createElement("span",null,e.label))))),React.createElement("div",{className:"modal-actions"},React.createElement("button",{className:"submit-btn",onClick:()=>I(l.id)},"Webhook OluÅŸtur"),React.createElement("button",{className:"cancel-btn",onClick:()=>k(!1)},"Ä°ptal"))))))};export{se as default};
