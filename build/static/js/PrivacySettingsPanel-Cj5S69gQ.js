var f=Object.defineProperty;var a=(t,s)=>f(t,"name",{value:s,configurable:!0});import{r as k,j as e}from"./react-core-Djgtqrmb.js";import{y as r}from"./ui-vendor-IhB9Znpc.js";import{g as b,d as x}from"./index-D0nbcjO7.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";const j={allow_dm_from_everyone:!0,allow_dm_from_friends_only:!1,allow_dm_from_server_members:!0,allow_friend_requests:!0,keep_dm_history_on_server_leave:!0,show_current_activity:!0,explicit_content_filter:"friends",blocked_words_filter_enabled:!1,show_online_status:!0,show_read_receipts:!0,show_typing_indicator:!0,allow_profile_views_from_non_friends:!1,allow_data_collection:!1,allow_personalized_ads:!1};function w(){const[t,s]=k.useState(j),[l,d]=k.useState([]),[n,g]=k.useState(""),[_,y]=k.useState(!0),c=b(),m=a((i=!1)=>{const o={Authorization:`Bearer ${localStorage.getItem("access_token")}`};return i&&(o["Content-Type"]="application/json"),o},"authHeaders");k.useEffect(()=>{Promise.all([fetch(`${c}/privacy/settings/`,{headers:m()}).then(i=>i.ok?i.json():null),fetch(`${c}/privacy/blocked-words/`,{headers:m()}).then(i=>i.ok?i.json():null)]).then(([i,o])=>{i&&s(i),o&&d(o.blocked_words||[])}).catch(i=>{}).finally(()=>y(!1))},[]);const u=a(async i=>{try{(await fetch(`${c}/privacy/settings/update/`,{method:"POST",headers:m(!0),body:JSON.stringify(i)})).ok?(s(i),r.success("‚úÖ Gizlilik ayarlarƒ± kaydedildi")):r.error("‚ùå Ayarlar kaydedilemedi")}catch{r.error("‚ùå Baƒülantƒ± hatasƒ±")}},"updateSettings");return{settings:t,loading:_,blockedWords:l,newWord:n,setNewWord:g,toggleSetting:a(i=>u({...t,[i]:!t[i]}),"toggleSetting"),updateExplicitFilter:a(i=>u({...t,explicit_content_filter:i}),"updateExplicitFilter"),addBlockedWord:a(async()=>{if(n.trim())try{(await fetch(`${c}/privacy/blocked-words/add/`,{method:"POST",headers:m(!0),body:JSON.stringify({word:n.trim()})})).ok?(d(o=>[...o,n.trim()]),r.success(`‚úÖ "${n.trim()}" engellenmi≈ü kelimeler listesine eklendi`),g("")):r.error("‚ùå Kelime eklenemedi")}catch{r.error("‚ùå Baƒülantƒ± hatasƒ±")}},"addBlockedWord"),removeBlockedWord:a(async i=>{try{(await fetch(`${c}/privacy/blocked-words/remove/`,{method:"POST",headers:m(!0),body:JSON.stringify({word:i})})).ok?(d(p=>p.filter(v=>v!==i)),r.success(`‚úÖ "${i}" engellenmi≈ü kelimeler listesinden kaldƒ±rƒ±ldƒ±`)):r.error("‚ùå Kelime kaldƒ±rƒ±lamadƒ±")}catch{r.error("‚ùå Baƒülantƒ± hatasƒ±")}},"removeBlockedWord"),requestDataExport:a(async()=>{if(await x("Verilerinizi dƒ±≈üa aktarmak istediƒüinizden emin misiniz? Bu i≈ülem biraz zaman alabilir."))try{(await fetch(`${c}/privacy/data-export/request/`,{method:"POST",headers:m()})).ok?r.success("‚úÖ Veri dƒ±≈üa aktarma i≈ülemi ba≈ülatƒ±ldƒ±. E-postanƒ±za link g√∂nderilecek."):r.error("‚ùå ƒ∞stek g√∂nderilemedi")}catch{r.error("‚ùå Baƒülantƒ± hatasƒ±")}},"requestDataExport")}}a(w,"usePrivacySettings");const N=[{title:"üí¨ Direkt Mesaj Gizliliƒüi",toggles:[{key:"allow_dm_from_everyone",label:"Herkesten DM alabilir",desc:"Sunucu √ºyesi olmasalar bile"},{key:"allow_dm_from_friends_only",label:"Sadece arkada≈ülardan DM",desc:"Yalnƒ±zca arkada≈ülarƒ±nƒ±zdan mesaj alabilirsiniz"},{key:"allow_dm_from_server_members",label:"Sunucu √ºyelerinden DM",desc:"Aynƒ± sunucudaki √ºyelerden mesaj alabilirsiniz"},{key:"allow_friend_requests",label:"Arkada≈ülƒ±k isteklerini kabul et",desc:"Diƒüer kullanƒ±cƒ±lar size istek g√∂nderebilir"}]},{title:"üè† Sunucu Gizliliƒüi",toggles:[{key:"keep_dm_history_on_server_leave",label:"Sunucudan ayrƒ±lƒ±rken DM ge√ßmi≈üini sakla",desc:"Sunucudan ayrƒ±ldƒ±ktan sonra DM'ler silinmez"},{key:"show_current_activity",label:"Mevcut aktiviteyi g√∂ster",desc:"Oynadƒ±ƒüƒ±nƒ±z oyun veya dinlediƒüiniz m√ºziƒüi g√∂sterin"}]},{title:"üëÅÔ∏è G√∂r√ºn√ºrl√ºk",toggles:[{key:"show_online_status",label:"√áevrimi√ßi durumu g√∂ster",desc:"Diƒüer kullanƒ±cƒ±lar √ßevrimi√ßi olduƒüunuzu g√∂rebilir"},{key:"show_read_receipts",label:"Okundu bilgisi g√∂nder",desc:"Mesajlarƒ± okudunuzda kar≈üƒ± tarafa bildirim g√∂sterilir"},{key:"show_typing_indicator",label:"Yazƒ±yor g√∂stergesini g√∂ster",desc:"Mesaj yazarken kar≈üƒ± tarafa bildirim g√∂sterilir"},{key:"allow_profile_views_from_non_friends",label:"Arkada≈ü olmayanlar profilimi g√∂rebilir",desc:"Herkes profilinizi g√∂r√ºnt√ºleyebilir"}]},{title:"üìä Veri Gizliliƒüi",toggles:[{key:"allow_data_collection",label:"Veri toplamaya izin ver",desc:"Uygulamayƒ± geli≈ütirmek i√ßin anonim kullanƒ±m verisi toplanƒ±r"},{key:"allow_personalized_ads",label:"Ki≈üiselle≈ütirilmi≈ü reklamlara izin ver",desc:"Size √∂zel reklamlar g√∂sterilir"}],hasExport:!0}],h=a(({label:t,desc:s,checked:l,onChange:d})=>e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-label",children:t}),e.jsx("div",{className:"setting-desc",children:s})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:d}),e.jsx("span",{className:"slider"})]})]}),"ToggleItem"),q=a(({onClose:t})=>{const s=w();return s.loading?e.jsx("div",{className:"privacy-settings-overlay",children:e.jsx("div",{className:"privacy-settings-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Gizlilik ayarlarƒ± y√ºkleniyor..."})]})})}):e.jsx("div",{className:"privacy-settings-overlay",onClick:t,children:e.jsxs("div",{className:"privacy-settings-panel",onClick:a(l=>l.stopPropagation(),"onClick"),children:[e.jsxs("div",{className:"privacy-settings-header",children:[e.jsxs("h2",{children:["üîí"," Gizlilik ve G√ºvenlik Ayarlarƒ±"]}),e.jsx("button",{className:"close-btn",onClick:t,children:"√ó"})]}),e.jsxs("div",{className:"privacy-settings-content",children:[N.map((l,d)=>e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:l.title}),e.jsx("div",{className:"settings-group",children:l.toggles.map(n=>e.jsx(h,{label:n.label,desc:n.desc,checked:s.settings[n.key],onChange:a(()=>s.toggleSetting(n.key),"onChange")},n.key))}),l.hasExport&&e.jsxs("button",{className:"export-data-btn",onClick:s.requestDataExport,children:["üì•"," Verilerimi Dƒ±≈üa Aktar"]})]},d)),e.jsxs("div",{className:"settings-section",children:[e.jsxs("h3",{children:["üõ°Ô∏è"," Mesaj Filtreleme"]}),e.jsxs("div",{className:"settings-group",children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-label",children:"A√ßƒ±k i√ßerik filtresi"}),e.jsx("div",{className:"setting-desc",children:"Mesajlardaki m√ºstehcen i√ßeriƒüi otomatik tara"})]}),e.jsxs("select",{className:"explicit-filter-select",value:s.settings.explicit_content_filter,onChange:a(l=>s.updateExplicitFilter(l.target.value),"onChange"),children:[e.jsx("option",{value:"none",children:"Kapalƒ±"}),e.jsx("option",{value:"friends",children:"Arkada≈ülar hari√ß"}),e.jsx("option",{value:"all",children:"Herkesten tara"})]})]}),e.jsx(h,{label:"Engellenmi≈ü kelime filtresi",desc:"Belirlediƒüiniz kelimeleri i√ßeren mesajlarƒ± gizleyin",checked:s.settings.blocked_words_filter_enabled,onChange:a(()=>s.toggleSetting("blocked_words_filter_enabled"),"onChange")})]}),s.settings.blocked_words_filter_enabled&&e.jsxs("div",{className:"blocked-words-section",children:[e.jsx("h4",{children:"Engellenmi≈ü Kelimeler"}),e.jsxs("div",{className:"add-word-form",children:[e.jsx("input",{type:"text",placeholder:"Engellenecek kelime...",value:s.newWord,onChange:a(l=>s.setNewWord(l.target.value),"onChange"),onKeyPress:a(l=>l.key==="Enter"&&s.addBlockedWord(),"onKeyPress")}),e.jsxs("button",{className:"add-word-btn",onClick:s.addBlockedWord,children:["‚ûï"," Ekle"]})]}),s.blockedWords.length>0?e.jsx("div",{className:"blocked-words-list",children:s.blockedWords.map((l,d)=>e.jsxs("div",{className:"blocked-word-item",children:[e.jsx("span",{children:l}),e.jsx("button",{className:"remove-word-btn",onClick:a(()=>s.removeBlockedWord(l),"onClick"),children:"‚úï"})]},d))}):e.jsx("p",{className:"empty-state",children:"Hen√ºz engellenmi≈ü kelime yok"})]})]})]})]})})},"PrivacySettingsPanel");export{q as default};
