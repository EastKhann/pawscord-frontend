import{r as i,al as w,l as P,ax as x,aI as N,c2 as L,c3 as V,as as B,bu as O,v as j,bD as M,ch as p,aW as G,ak as U,bU as H,bK as I,N as J,H as Y,A as K}from"./react-core-B6hadH-M.js";import{h as q}from"./index-D_6pZib5.js";const te=({userId:m,onClose:h,onUpdate:Q,fetchWithAuth:k,apiBaseUrl:g})=>{const[l,c]=i.useState([]),[C,y]=i.useState(!0),[F,u]=i.useState(!1),[d,f]=i.useState(null),[a,r]=i.useState({type:"game",title:"",description:"",image_url:"",link_url:""}),[W,X]=i.useState(null),R=[{key:"game",label:"Oyun",icon:React.createElement(G,null),color:"#9c27b0"},{key:"achievement",label:"Başarı",icon:React.createElement(U,null),color:"#ffc107"},{key:"art",label:"Sanat",icon:React.createElement(H,null),color:"#e91e63"},{key:"music",label:"Müzik",icon:React.createElement(I,null),color:"#00bcd4"},{key:"video",label:"Video",icon:React.createElement(J,null),color:"#f44336"},{key:"code",label:"Proje",icon:React.createElement(Y,null),color:"#4caf50"},{key:"link",label:"Link",icon:React.createElement(K,null),color:"#2196f3"}];i.useEffect(()=>{S()},[m]);const S=async()=>{y(!0);try{const e=await k(`${g}/users/${m}/showcase/`);if(e.ok){const t=await e.json();c(t.items||[])}else c([])}catch(e){console.error("Error fetching showcases:",e),c([])}y(!1)},_=async()=>{if(!a.title.trim()){p.error("Başlık gerekli");return}const e={id:Date.now(),...a,order:l.length};try{await k(`${g}/users/${m}/showcase/`,{method:"POST",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){console.error("Add showcase error:",t)}c([...l,e]),E(),p.success("Vitrin öğesi eklendi")},$=async()=>{if(!(!a.title.trim()||!d)){try{await fetch(`/api/users/${m}/showcase/${d.id}/`,{method:"PATCH",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(e){console.error("Edit showcase error:",e)}c(l.map(e=>e.id===d.id?{...e,...a}:e)),E(),p.success("Vitrin öğesi güncellendi")}},A=async e=>{if(await q("Bu öğeyi silmek istediğinizden emin misiniz?")){try{await fetch(`/api/users/${m}/showcase/${e}/`,{method:"DELETE",headers:{Authorization:`Bearer ${token}`}})}catch(t){console.error("Delete showcase error:",t)}c(l.filter(t=>t.id!==e)),p.success("Vitrin öğesi silindi")}},b=async(e,t)=>{const n=l.findIndex(o=>o.id===e);if(t==="up"&&n===0||t==="down"&&n===l.length-1)return;const s=[...l],v=t==="up"?n-1:n+1;[s[n],s[v]]=[s[v],s[n]],s.forEach((o,D)=>o.order=D),c(s);try{await fetch(`/api/users/${m}/showcase/reorder/`,{method:"POST",headers:{Authorization:`Bearer ${token}`,"Content-Type":"application/json"},body:JSON.stringify({order:s.map(o=>o.id)})})}catch(o){console.error("Reorder showcase error:",o)}},E=()=>{r({type:"game",title:"",description:"",image_url:"",link_url:""}),u(!1),f(null)},T=e=>{f(e),r({type:e.type,title:e.title,description:e.description||"",image_url:e.image_url||"",link_url:e.link_url||""}),u(!0)},z=e=>R.find(t=>t.key===e)||R[0];return React.createElement("div",{className:"showcase-overlay",onClick:e=>e.target.className==="showcase-overlay"&&h()},React.createElement("div",{className:"showcase-panel"},React.createElement("div",{className:"panel-header"},React.createElement("h2",null,React.createElement(w,null)," Profil Vitrini"),React.createElement("button",{className:"close-btn",onClick:h},React.createElement(P,null))),React.createElement("div",{className:"panel-info"},React.createElement(x,null),React.createElement("p",null,"Profilinizde gösterilecek en fazla 6 öğe seçebilirsiniz")),React.createElement("div",{className:"showcase-list"},C?React.createElement("div",{className:"loading"},"Yükleniyor..."):l.length===0?React.createElement("div",{className:"empty-state"},React.createElement(w,null),React.createElement("p",null,"Henüz vitrin öğesi yok"),React.createElement("button",{onClick:()=>u(!0)},React.createElement(N,null)," İlk Öğeyi Ekle")):l.map((e,t)=>{const n=z(e.type);return React.createElement("div",{key:e.id,className:"showcase-item"},React.createElement("div",{className:"item-drag"},React.createElement("button",{onClick:()=>b(e.id,"up"),disabled:t===0},React.createElement(L,null)),React.createElement("button",{onClick:()=>b(e.id,"down"),disabled:t===l.length-1},React.createElement(V,null))),React.createElement("div",{className:"item-icon",style:{background:n.color}},n.icon),e.image_url&&React.createElement("div",{className:"item-image"},React.createElement("img",{src:e.image_url,alt:e.title})),React.createElement("div",{className:"item-info"},React.createElement("span",{className:"item-type"},n.label),React.createElement("h4",null,e.title),e.description&&React.createElement("p",null,e.description),e.link_url&&React.createElement("a",{href:e.link_url,target:"_blank",rel:"noopener noreferrer"},React.createElement(B,null)," Linke Git")),React.createElement("div",{className:"item-actions"},React.createElement("button",{onClick:()=>T(e)},React.createElement(O,null)),React.createElement("button",{onClick:()=>A(e.id)},React.createElement(j,null))))})),l.length<6&&l.length>0&&React.createElement("div",{className:"add-section"},React.createElement("button",{className:"add-btn",onClick:()=>u(!0)},React.createElement(N,null)," Yeni Öğe Ekle"),React.createElement("span",{className:"remaining"},6-l.length," slot kaldı")),F&&React.createElement("div",{className:"modal-overlay",onClick:()=>E()},React.createElement("div",{className:"modal-content",onClick:e=>e.stopPropagation()},React.createElement("h3",null,d?"Öğeyi Düzenle":"Yeni Vitrin Öğesi"),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Tür"),React.createElement("div",{className:"type-selector"},R.map(e=>React.createElement("button",{key:e.key,className:`type-btn ${a.type===e.key?"selected":""}`,style:{"--color":e.color},onClick:()=>r({...a,type:e.key})},e.icon,React.createElement("span",null,e.label))))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Başlık *"),React.createElement("input",{type:"text",placeholder:"Örn: Valorant",value:a.title,onChange:e=>r({...a,title:e.target.value})})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Açıklama"),React.createElement("input",{type:"text",placeholder:"Örn: Diamond 3 Rank",value:a.description,onChange:e=>r({...a,description:e.target.value})})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Görsel URL"),React.createElement("input",{type:"text",placeholder:"https://...",value:a.image_url,onChange:e=>r({...a,image_url:e.target.value})})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Link URL"),React.createElement("input",{type:"text",placeholder:"https://...",value:a.link_url,onChange:e=>r({...a,link_url:e.target.value})})),React.createElement("div",{className:"modal-actions"},React.createElement("button",{className:"cancel-btn",onClick:E},"İptal"),React.createElement("button",{className:"save-btn",onClick:d?$:_},React.createElement(M,null)," ",d?"Güncelle":"Ekle"))))))};export{te as default};
