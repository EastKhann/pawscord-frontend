import{r as n,b as t}from"./react-core-9vc7GIjk.js";import{bg as v,a as N,b as O,Z as P,bh as $,bi as W,m as Y}from"./icons-vendor-BHKL7tCa.js";import{t as r}from"./index-BIYh9lA9.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-u6fxj6P4.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const q=({fetchWithAuth:l,apiBaseUrl:s,onClose:u,onMessageClick:w})=>{const[x,S]=n.useState([]),[f,B]=n.useState([]),[i,k]=n.useState(null),[p,z]=n.useState(""),[R,y]=n.useState(!0),[I,c]=n.useState(!1),[m,b]=n.useState(""),[h,E]=n.useState("#5865f2");n.useEffect(()=>{g(),T()},[]);const g=async()=>{try{y(!0);const e=await l(`${s}/api/bookmarks/list/`);if(e.ok){const a=await e.json();S(a)}}catch(e){console.error("Bookmark yükleme hatası:",e),r.error("Bookmark'lar yüklenemedi")}finally{y(!1)}},T=async()=>{try{const e=await l(`${s}/api/bookmarks/tags/list/`);if(e.ok){const a=await e.json();B(a)}}catch(e){console.error("Tag yükleme hatası:",e)}},j=async()=>{if(!m.trim()){r.error("Tag adı boş olamaz");return}try{(await l(`${s}/api/bookmarks/tags/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,color:h})})).ok?(r.success("Tag oluşturuldu"),b(""),E("#5865f2"),c(!1),T()):r.error("Tag oluşturulamadı")}catch(e){console.error("Tag oluşturma hatası:",e),r.error("Bir hata oluştu")}},F=async e=>{try{(await l(`${s}/api/bookmarks/${e}/delete/`,{method:"DELETE"})).ok?(r.success("Bookmark silindi"),g()):r.error("Bookmark silinemedi")}catch(a){console.error("Bookmark silme hatası:",a),r.error("Bir hata oluştu")}},L=async(e,a)=>{try{(await l(`${s}/api/bookmarks/tags/${a}/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookmark_id:e})})).ok?(r.success("Tag eklendi"),g()):r.error("Tag eklenemedi")}catch(d){console.error("Tag ekleme hatası:",d),r.error("Bir hata oluştu")}},C=x.filter(e=>{const a=!i||e.tags?.some(M=>M.id===i),d=!p||e.message?.content?.toLowerCase().includes(p.toLowerCase());return a&&d});return t.createElement("div",{style:o.overlay,onClick:u},t.createElement("div",{style:o.modal,onClick:e=>e.stopPropagation()},t.createElement("div",{style:o.header},t.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},t.createElement(v,{style:{color:"#faa61a"}}),t.createElement("h2",{style:{margin:0}},"Kaydedilenler")),t.createElement(N,{onClick:u,style:o.closeBtn})),t.createElement("div",{style:o.toolbar},t.createElement("div",{style:o.searchBox},t.createElement(O,{style:{color:"#888"}}),t.createElement("input",{type:"text",placeholder:"Mesajlarda ara...",value:p,onChange:e=>z(e.target.value),style:o.searchInput})),t.createElement("button",{onClick:()=>c(!0),style:o.newTagBtn},t.createElement(P,null)," Yeni Tag")),t.createElement("div",{style:o.tagsContainer},t.createElement("button",{onClick:()=>k(null),style:{...o.tagChip,backgroundColor:i?"#2c2f33":"#5865f2"}},t.createElement($,null)," Tümü (",x.length,")"),f.map(e=>t.createElement("button",{key:e.id,onClick:()=>k(e.id),style:{...o.tagChip,backgroundColor:i===e.id?e.color:"#2c2f33",borderLeft:`3px solid ${e.color}`}},t.createElement(W,null)," ",e.name," (",e.bookmark_count||0,")"))),t.createElement("div",{style:o.bookmarksList},R?t.createElement("div",{style:o.loading},"Yükleniyor..."):C.length===0?t.createElement("div",{style:o.empty},t.createElement(v,{style:{fontSize:"48px",color:"#555"}}),t.createElement("p",null,"Henüz bookmark yok")):C.map(e=>t.createElement("div",{key:e.id,style:o.bookmarkItem},t.createElement("div",{style:o.bookmarkContent},t.createElement("div",{style:o.bookmarkMeta},t.createElement("strong",null,e.message?.username),t.createElement("span",{style:{color:"#888",fontSize:"12px"}},new Date(e.created_at).toLocaleString("tr-TR"))),t.createElement("div",{style:o.bookmarkText,onClick:()=>w?.(e.message)},e.message?.content||"Mesaj içeriği yok"),t.createElement("div",{style:o.bookmarkTags},e.tags?.map(a=>t.createElement("span",{key:a.id,style:{...o.miniTag,backgroundColor:a.color}},a.name)),t.createElement("select",{onChange:a=>{a.target.value&&(L(e.id,a.target.value),a.target.value="")},style:o.tagSelect},t.createElement("option",{value:""},"+ Tag Ekle"),f.map(a=>t.createElement("option",{key:a.id,value:a.id},a.name))))),t.createElement("button",{onClick:()=>F(e.id),style:o.deleteBtn},t.createElement(Y,null))))),I&&t.createElement("div",{style:o.modalOverlay,onClick:()=>c(!1)},t.createElement("div",{style:o.newTagModal,onClick:e=>e.stopPropagation()},t.createElement("h3",null,"Yeni Tag Oluştur"),t.createElement("input",{type:"text",placeholder:"Tag adı...",value:m,onChange:e=>b(e.target.value),style:o.input,autoFocus:!0}),t.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},t.createElement("label",null,"Renk:"),t.createElement("input",{type:"color",value:h,onChange:e=>E(e.target.value),style:o.colorPicker})),t.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},t.createElement("button",{onClick:j,style:o.primaryBtn},"Oluştur"),t.createElement("button",{onClick:()=>c(!1),style:o.secondaryBtn},"İptal"))))))},o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888",transition:"color 0.2s"},toolbar:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #333"},searchBox:{flex:1,display:"flex",alignItems:"center",gap:"10px",backgroundColor:"#2c2f33",padding:"10px 15px",borderRadius:"8px"},searchInput:{flex:1,background:"none",border:"none",color:"#fff",outline:"none",fontSize:"14px"},newTagBtn:{backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},tagsContainer:{display:"flex",gap:"10px",padding:"15px 20px",overflowX:"auto",borderBottom:"1px solid #333"},tagChip:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"16px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#fff",whiteSpace:"nowrap",transition:"all 0.2s"},bookmarksList:{flex:1,overflowY:"auto",padding:"20px"},bookmarkItem:{display:"flex",gap:"15px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px",transition:"background-color 0.2s"},bookmarkContent:{flex:1},bookmarkMeta:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},bookmarkText:{color:"#dcddde",marginBottom:"10px",cursor:"pointer",lineHeight:"1.5"},bookmarkTags:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},miniTag:{padding:"4px 10px",borderRadius:"12px",fontSize:"12px",color:"#fff",fontWeight:"500"},tagSelect:{backgroundColor:"#1e1e1e",color:"#fff",border:"1px solid #444",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",cursor:"pointer"},deleteBtn:{backgroundColor:"transparent",border:"none",color:"#ed4245",cursor:"pointer",fontSize:"18px",padding:"10px",borderRadius:"4px",transition:"background-color 0.2s"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999999},newTagModal:{backgroundColor:"#2c2f33",padding:"30px",borderRadius:"8px",width:"90%",maxWidth:"400px",color:"#fff"},input:{width:"100%",padding:"12px",backgroundColor:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px",marginTop:"15px",outline:"none"},colorPicker:{width:"60px",height:"40px",border:"none",borderRadius:"4px",cursor:"pointer"},primaryBtn:{flex:1,backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},secondaryBtn:{flex:1,backgroundColor:"#4e5058",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600"}};export{q as default};
