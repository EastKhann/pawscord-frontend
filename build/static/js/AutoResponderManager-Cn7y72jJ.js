import{r as n,d as e,am as E,Q as v,i as C}from"./react-core-DMT_QkRe.js";import{t as u}from"./index-DuRbhGVU.js";const S=({onClose:s,fetchWithAuth:i,apiBaseUrl:d,serverId:w,embedded:b=!1})=>{const[c,x]=n.useState([]),[y,f]=n.useState(!0),[p,l]=n.useState(!1),[o,a]=n.useState({trigger:"",response:"",is_regex:!1});n.useEffect(()=>{g()},[]);const g=async()=>{try{const r=await i(`${d}/autoresponders/list/`);if(r.ok){const k=await r.json();x(k.responders||[])}}catch(r){console.error("Load responders error:",r)}finally{f(!1)}},h=async()=>{if(!o.trigger||!o.response){u.error("âŒ Tetikleyici ve yanÄ±t gerekli");return}try{(await i(`${d}/autoresponders/create/`,{method:"POST",body:JSON.stringify(o)})).ok&&(u.success("âœ… Auto-responder oluÅŸturuldu!"),l(!1),a({trigger:"",response:"",is_regex:!1}),g())}catch(r){console.error("Create responder error:",r)}},m=e.createElement(e.Fragment,null,!p&&e.createElement("button",{onClick:()=>l(!0),style:t.createButton},e.createElement(E,null)," Yeni Otomatik YanÄ±t"),p&&e.createElement("div",{style:t.createForm},e.createElement("input",{type:"text",placeholder:"Tetikleyici kelime (Ã¶rn: merhaba)",value:o.trigger,onChange:r=>a({...o,trigger:r.target.value}),style:t.input}),e.createElement("textarea",{placeholder:"Otomatik yanÄ±t mesajÄ±",value:o.response,onChange:r=>a({...o,response:r.target.value}),style:t.textarea}),e.createElement("label",{style:t.checkbox},e.createElement("input",{type:"checkbox",checked:o.is_regex,onChange:r=>a({...o,is_regex:r.target.checked})}),e.createElement("span",{style:{marginLeft:"8px",color:"#b9bbbe"}},"Regex kullan")),e.createElement("div",{style:{display:"flex",gap:"10px"}},e.createElement("button",{onClick:h,style:t.submitButton},"OluÅŸtur"),e.createElement("button",{onClick:()=>l(!1),style:t.cancelButton},"Ä°ptal"))),y?e.createElement("div",{style:t.loading},"YÃ¼kleniyor..."):c.length===0?e.createElement("div",{style:t.empty},"HenÃ¼z otomatik yanÄ±t oluÅŸturulmamÄ±ÅŸ"):e.createElement("div",{style:t.responderList},c.map(r=>e.createElement("div",{key:r.id,style:t.responderItem},e.createElement("div",null,e.createElement("div",{style:t.trigger},"ðŸ¤– ",r.trigger),e.createElement("div",{style:t.response},r.response))))));return b?e.createElement("div",{style:t.content},m):e.createElement("div",{style:t.overlay,onClick:s},e.createElement("div",{style:t.modal,onClick:r=>r.stopPropagation()},e.createElement("div",{style:t.header},e.createElement("h2",{style:t.title},e.createElement(v,null)," Otomatik YanÄ±tlar"),e.createElement("button",{onClick:s,style:t.closeButton},e.createElement(C,null))),e.createElement("div",{style:t.content},m)))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.5em",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.5em"},content:{padding:"20px",overflowY:"auto",flex:1},createButton:{width:"100%",padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"15px"},createForm:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px",marginBottom:"15px"},input:{width:"100%",padding:"10px",marginBottom:"10px",backgroundColor:"#2b2d31",border:"1px solid #5865f2",borderRadius:"4px",color:"white"},textarea:{width:"100%",padding:"10px",marginBottom:"10px",minHeight:"80px",backgroundColor:"#2b2d31",border:"1px solid #5865f2",borderRadius:"4px",color:"white",resize:"vertical"},checkbox:{display:"flex",alignItems:"center",marginBottom:"10px"},submitButton:{flex:1,padding:"10px",backgroundColor:"#3ba55d",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},cancelButton:{flex:1,padding:"10px",backgroundColor:"#f04747",border:"none",borderRadius:"4px",color:"white",fontWeight:"bold",cursor:"pointer"},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px"},responderList:{display:"flex",flexDirection:"column",gap:"10px"},responderItem:{backgroundColor:"#40444b",padding:"15px",borderRadius:"8px"},trigger:{color:"#5865f2",fontWeight:"bold",marginBottom:"8px"},response:{color:"#dcddde",fontSize:"0.9em"}};export{S as A};
