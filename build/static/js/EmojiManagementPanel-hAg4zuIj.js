import{r as n,n as e}from"./react-core-Cj7FUMmY.js";import{o as b,a as B,U as I,bz as R,g as _}from"./icons-vendor-DsJCxoAK.js";import{t as r}from"./index-BZo1bI5x.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-By68PLJG.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-DGcbxrkI.js";import"./crypto-vendor-DK-7ILyQ.js";const O=({fetchWithAuth:a,apiBaseUrl:l,serverId:d,onClose:x})=>{const[g,h]=n.useState([]),[v,k]=n.useState([]),[C,E]=n.useState([]),[u,j]=n.useState(null),[c,f]=n.useState(""),[S,y]=n.useState(!0),[s,p]=n.useState("custom");n.useEffect(()=>{m(),s==="trending"&&z(),s==="suggestions"&&T()},[s]);const m=async()=>{try{y(!0);const o=await a(`${l}/emoji/list/?server_id=${d}`);if(o.ok){const i=await o.json();h(i)}}catch{}finally{y(!1)}},z=async()=>{try{const o=await a(`${l}/emoji/trending/?server_id=${d}`);if(o.ok){const i=await o.json();k(i)}}catch{}},T=async()=>{try{const o=await a(`${l}/emoji/suggestions/?server_id=${d}`);if(o.ok){const i=await o.json();E(i)}}catch{}},w=async()=>{if(!u||!c.trim()){r.error("Emoji dosyası ve ismi gerekli");return}const o=new FormData;o.append("file",u),o.append("name",c),o.append("server_id",d);try{(await a(`${l}/emoji/upload/`,{method:"POST",body:o})).ok?(r.success("Emoji yüklendi"),j(null),f(""),m()):r.error("Emoji yüklenemedi")}catch{r.error("Bir hata oluştu")}},F=async o=>{try{(await a(`${l}/emoji/${o}/delete/`,{method:"DELETE"})).ok?(r.success("Emoji silindi"),m()):r.error("Emoji silinemedi")}catch{r.error("Bir hata oluştu")}};return e.jsx("div",{style:t.overlay,onClick:x,children:e.jsxs("div",{style:t.modal,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(b,{style:{color:"#faa61a"}}),e.jsx("h2",{style:{margin:0},children:"Emoji Yönetimi"})]}),e.jsx(B,{onClick:x,style:t.closeBtn})]}),e.jsxs("div",{style:t.tabs,children:[e.jsx("button",{onClick:()=>p("custom"),style:{...t.tab,...s==="custom"?t.activeTab:{}},children:"Özel Emojiler"}),e.jsxs("button",{onClick:()=>p("trending"),style:{...t.tab,...s==="trending"?t.activeTab:{}},children:[e.jsx(I,{})," Trend Olanlar"]}),e.jsx("button",{onClick:()=>p("suggestions"),style:{...t.tab,...s==="suggestions"?t.activeTab:{}},children:"Öneriler"})]}),s==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.uploadSection,children:[e.jsx("input",{type:"file",accept:"image/png,image/gif,image/jpeg",onChange:o=>j(o.target.files[0]),style:t.fileInput}),e.jsx("input",{type:"text",value:c,onChange:o=>f(o.target.value),placeholder:"Emoji ismi (örn: pog, kekw)",style:t.input}),e.jsxs("button",{onClick:w,style:t.uploadBtn,children:[e.jsx(R,{})," Yükle"]})]}),e.jsx("div",{style:t.content,children:S?e.jsx("div",{style:t.loading,children:"Yükleniyor..."}):g.length===0?e.jsxs("div",{style:t.empty,children:[e.jsx(b,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),e.jsx("p",{children:"Henüz özel emoji yok"})]}):e.jsx("div",{style:t.emojiGrid,children:g.map(o=>e.jsxs("div",{style:t.emojiCard,children:[e.jsx("img",{src:o.url,alt:o.name,style:t.emojiImage}),e.jsxs("div",{style:t.emojiName,children:[":",o.name,":"]}),e.jsx("button",{onClick:()=>F(o.id),style:t.deleteEmojiBtn,children:e.jsx(_,{})})]},o.id))})})]}),s==="trending"&&e.jsx("div",{style:t.content,children:e.jsx("div",{style:t.emojiGrid,children:v.map((o,i)=>e.jsxs("div",{style:t.emojiCard,children:[e.jsx("img",{src:o.url,alt:o.name,style:t.emojiImage}),e.jsxs("div",{style:t.emojiName,children:[":",o.name,":"]}),e.jsxs("div",{style:t.usageCount,children:[o.usage_count," kullanım"]})]},i))})}),s==="suggestions"&&e.jsx("div",{style:t.content,children:e.jsx("div",{style:t.emojiGrid,children:C.map((o,i)=>e.jsxs("div",{style:t.suggestionCard,children:[e.jsx("img",{src:o.emoji_url,alt:o.emoji_name,style:t.emojiImage}),e.jsxs("div",{style:t.emojiName,children:[":",o.emoji_name,":"]}),e.jsxs("div",{style:t.suggester,children:["Öneren: ",o.suggested_by]})]},i))})})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},tabs:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #333"},tab:{backgroundColor:"transparent",color:"#888",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},activeTab:{backgroundColor:"#5865f2",color:"#fff"},uploadSection:{display:"flex",gap:"10px",padding:"20px",borderBottom:"1px solid #333"},fileInput:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},input:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},uploadBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},emojiGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"15px"},emojiCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center",position:"relative"},emojiImage:{width:"64px",height:"64px",objectFit:"contain",marginBottom:"10px"},emojiName:{fontSize:"13px",fontWeight:"500",color:"#dcddde",marginBottom:"4px",fontFamily:"monospace"},usageCount:{fontSize:"11px",color:"#888"},deleteEmojiBtn:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#f04747",color:"#fff",border:"none",padding:"6px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},suggestionCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center"},suggester:{fontSize:"11px",color:"#888",marginTop:"6px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{O as default};
