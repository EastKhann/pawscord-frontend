import{r as E,aj as w,aT as O,l as P,K as R,aY as z,X as g,bt as _,a_ as C,ax as x,aE as M,bB as j,O as W,c1 as V,bF as $,c2 as U,c3 as Y}from"./react-core-B6hadH-M.js";import{R as d,A as I,C as b,X as p,Y as u,T as f,k as G,L,b as A,B as Z,c as N}from"./recharts-D4RWr7CS.js";const te=({onClose:t,fetchWithAuth:a,apiBaseUrl:l})=>{const[c,s]=E.useState(null),[K,B]=E.useState(!0),[o,y]=E.useState("overview");E.useEffect(()=>{T();const n=setInterval(T,3e4);return()=>clearInterval(n)},[]);const T=async()=>{try{const n=await a(`${l}/admin/analytics/`);if(n.ok){const h=await n.json();s(h)}}catch(n){console.error("Analytics fetch error:",n)}finally{B(!1)}},F=()=>{if(!c)return;const n=JSON.stringify(c,null,2),h=new Blob([n],{type:"application/json"}),D=URL.createObjectURL(h),k=document.createElement("a");k.href=D,k.download=`analytics_${new Date().toISOString().split("T")[0]}.json`,k.click()};return K?React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.loading},"YÃ¼kleniyor..."))):c?React.createElement("div",{style:e.overlay,onClick:t},React.createElement("div",{style:e.modal,onClick:n=>n.stopPropagation()},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(w,{size:24}),React.createElement("h2",{style:e.title},"Admin Analytics")),React.createElement("div",{style:e.headerRight},React.createElement("button",{onClick:F,style:e.exportButton,title:"Export JSON"},React.createElement(O,null)),React.createElement("button",{onClick:t,style:e.closeButton},React.createElement(P,null)))),React.createElement("div",{style:e.tabs},React.createElement("button",{onClick:()=>y("overview"),style:{...e.tab,...o==="overview"&&e.activeTab}},React.createElement(w,null)," Genel"),React.createElement("button",{onClick:()=>y("users"),style:{...e.tab,...o==="users"&&e.activeTab}},React.createElement(R,null)," KullanÄ±cÄ±lar"),React.createElement("button",{onClick:()=>y("premium"),style:{...e.tab,...o==="premium"&&e.activeTab}},React.createElement(z,null)," Premium"),React.createElement("button",{onClick:()=>y("servers"),style:{...e.tab,...o==="servers"&&e.activeTab}},React.createElement(g,null)," Sunucular")),React.createElement("div",{style:e.content},o==="overview"&&React.createElement(q,{stats:c}),o==="users"&&React.createElement(X,{stats:c}),o==="premium"&&React.createElement(J,{stats:c}),o==="servers"&&React.createElement(H,{stats:c})))):React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.error},"Analytics verisi yÃ¼klenemedi")))},q=({stats:t})=>(t.mobile_views,t.desktop_views,React.createElement("div",{style:e.tabContent},React.createElement("div",{style:e.growthSection},React.createElement(v,{label:"Mesaj ArtÄ±ÅŸÄ± (24h)",value:t.message_growth_24h||0,isPositive:(t.message_growth_24h||0)>=0}),React.createElement(v,{label:"KayÄ±t ArtÄ±ÅŸÄ± (24h)",value:t.signup_growth_24h||0,isPositive:(t.signup_growth_24h||0)>=0}),React.createElement(v,{label:"GÃ¼nlÃ¼k Ort. Mesaj",value:t.avg_messages_per_day||0,isPositive:!0,suffix:"",icon:React.createElement(_,null)}),React.createElement(v,{label:"GÃ¼nlÃ¼k Ort. KayÄ±t",value:t.avg_signups_per_day||0,isPositive:!0,suffix:"",icon:React.createElement(C,null)})),React.createElement("div",{style:e.statsGrid},React.createElement(r,{icon:React.createElement(R,null),label:"Toplam KullanÄ±cÄ±",value:t.total_users||0,color:"#5865f2",subtitle:`Online: ${t.online_users||0} | Aktif: ${t.active_users||0}`}),React.createElement(r,{icon:React.createElement(g,null),label:"Toplam Sunucu",value:t.total_servers||0,color:"#23a559",subtitle:`Son 24h: +${t.new_servers_24h||0}`}),React.createElement(r,{icon:React.createElement(_,null),label:"Toplam Mesaj",value:i(t.total_messages||0),color:"#f0b132",subtitle:`Son 24h: ${i(t.messages_24h||0)}`}),React.createElement(r,{icon:React.createElement(x,null),label:"Toplam Ziyaret",value:i(t.total_page_views||0),color:"#e91e63",subtitle:`Son 24h: ${i(t.page_views_24h||0)}`}),React.createElement(r,{icon:React.createElement(z,null),label:"Premium KullanÄ±cÄ±",value:t.premium_users||0,color:"#9b59b6",subtitle:`Gelir: ${t.monthly_revenue||0} TL/ay`}),React.createElement(r,{icon:React.createElement(M,null),label:"Benzersiz ZiyaretÃ§i",value:i(t.unique_visitors_30d||0),color:"#00bcd4",subtitle:`Son 24h: ${i(t.unique_visitors_24h||0)}`})),(t.mobile_views>0||t.desktop_views>0)&&React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"ðŸ“± Cihaz DaÄŸÄ±lÄ±mÄ± (Son 7 GÃ¼n)"),React.createElement("div",{style:e.deviceStats},React.createElement("div",{style:e.deviceCard},React.createElement(j,{size:32,color:"#5865f2"}),React.createElement("div",{style:e.deviceInfo},React.createElement("span",{style:e.deviceLabel},"Mobil"),React.createElement("span",{style:e.deviceValue},i(t.mobile_views||0)),React.createElement("span",{style:e.devicePercent},Math.round((t.mobile_views||0)/((t.mobile_views||0)+(t.desktop_views||1))*100),"%"))),React.createElement("div",{style:e.deviceCard},React.createElement(W,{size:32,color:"#23a559"}),React.createElement("div",{style:e.deviceInfo},React.createElement("span",{style:e.deviceLabel},"MasaÃ¼stÃ¼"),React.createElement("span",{style:e.deviceValue},i(t.desktop_views||0)),React.createElement("span",{style:e.devicePercent},Math.round((t.desktop_views||0)/((t.mobile_views||0)+(t.desktop_views||1))*100),"%"))))),t.daily_stats&&t.daily_stats.length>0&&React.createElement(React.Fragment,null,React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"ðŸ“¨ GÃ¼nlÃ¼k Mesaj SayÄ±sÄ± (Son 30 GÃ¼n)"),React.createElement(d,{width:"100%",height:250},React.createElement(I,{data:t.daily_stats},React.createElement("defs",null,React.createElement("linearGradient",{id:"colorMessages",x1:"0",y1:"0",x2:"0",y2:"1"},React.createElement("stop",{offset:"5%",stopColor:"#5865f2",stopOpacity:.8}),React.createElement("stop",{offset:"95%",stopColor:"#5865f2",stopOpacity:0}))),React.createElement(b,{strokeDasharray:"3 3",stroke:"#1e1f22"}),React.createElement(p,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),React.createElement(u,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),React.createElement(f,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #5865f2",borderRadius:"6px",color:"#fff"}}),React.createElement(G,{type:"monotone",dataKey:"messages",stroke:"#5865f2",strokeWidth:2,fillOpacity:1,fill:"url(#colorMessages)"})))),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"ðŸ‘¥ GÃ¼nlÃ¼k Aktif KullanÄ±cÄ± (Son 30 GÃ¼n)"),React.createElement(d,{width:"100%",height:250},React.createElement(L,{data:t.daily_stats},React.createElement(b,{strokeDasharray:"3 3",stroke:"#1e1f22"}),React.createElement(p,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),React.createElement(u,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),React.createElement(f,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #23a559",borderRadius:"6px",color:"#fff"}}),React.createElement(A,{type:"monotone",dataKey:"active_users",stroke:"#23a559",strokeWidth:3,dot:{fill:"#23a559",r:4},activeDot:{r:6}})))),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"ðŸ†• GÃ¼nlÃ¼k Yeni KayÄ±tlar (Son 30 GÃ¼n)"),React.createElement(d,{width:"100%",height:250},React.createElement(Z,{data:t.daily_stats},React.createElement(b,{strokeDasharray:"3 3",stroke:"#1e1f22"}),React.createElement(p,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),React.createElement(u,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),React.createElement(f,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #f0b132",borderRadius:"6px",color:"#fff"}}),React.createElement(N,{dataKey:"signups",fill:"#f0b132",radius:[8,8,0,0]})))),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"ðŸ‘ï¸ GÃ¼nlÃ¼k Ziyaret SayÄ±sÄ± (Son 30 GÃ¼n)"),React.createElement(d,{width:"100%",height:250},React.createElement(I,{data:t.daily_stats},React.createElement("defs",null,React.createElement("linearGradient",{id:"colorPageViews",x1:"0",y1:"0",x2:"0",y2:"1"},React.createElement("stop",{offset:"5%",stopColor:"#e91e63",stopOpacity:.8}),React.createElement("stop",{offset:"95%",stopColor:"#e91e63",stopOpacity:0}))),React.createElement(b,{strokeDasharray:"3 3",stroke:"#1e1f22"}),React.createElement(p,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),React.createElement(u,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),React.createElement(f,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #e91e63",borderRadius:"6px",color:"#fff"}}),React.createElement(G,{type:"monotone",dataKey:"page_views",stroke:"#e91e63",strokeWidth:2,fillOpacity:1,fill:"url(#colorPageViews)"})))),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"ðŸ‘¥ GÃ¼nlÃ¼k Benzersiz ZiyaretÃ§i (Son 30 GÃ¼n)"),React.createElement(d,{width:"100%",height:250},React.createElement(L,{data:t.daily_stats},React.createElement(b,{strokeDasharray:"3 3",stroke:"#1e1f22"}),React.createElement(p,{dataKey:"label",stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12},interval:4}),React.createElement(u,{stroke:"#b9bbbe",tick:{fill:"#b9bbbe",fontSize:12}}),React.createElement(f,{contentStyle:{backgroundColor:"#1e1f22",border:"1px solid #00bcd4",borderRadius:"6px",color:"#fff"}}),React.createElement(A,{type:"monotone",dataKey:"unique_visitors",stroke:"#00bcd4",strokeWidth:3,dot:{fill:"#00bcd4",r:4},activeDot:{r:6}}))))),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"Son Aktiviteler (24 Saat)"),React.createElement("div",{style:e.activityList},React.createElement(m,{icon:React.createElement(C,null),label:"Yeni KayÄ±tlar",value:t.new_signups_24h||0}),React.createElement(m,{icon:React.createElement(g,null),label:"Yeni Sunucular",value:t.new_servers_24h||0}),React.createElement(m,{icon:React.createElement(_,null),label:"Mesajlar",value:t.messages_24h||0}),React.createElement(m,{icon:React.createElement(x,null),label:"Aktif KullanÄ±cÄ±",value:t.active_users_24h||0}),React.createElement(m,{icon:React.createElement(x,null),label:"Sayfa Ziyareti",value:t.page_views_24h||0,color:"#e91e63"}),React.createElement(m,{icon:React.createElement(R,null),label:"Benzersiz ZiyaretÃ§i",value:t.unique_visitors_24h||0,color:"#00bcd4"}))),t.top_pages&&t.top_pages.length>0&&React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"ðŸ“Š En Ã‡ok Ziyaret Edilen Sayfalar (Son 30 GÃ¼n)"),React.createElement("div",{style:e.list},t.top_pages.slice(0,10).map((a,l)=>React.createElement("div",{key:l,style:e.listItem},React.createElement("span",null,"#",l+1," ",a?.path||"Unknown"),React.createElement("span",{style:{color:"#e91e63",fontWeight:"bold"}},(a?.views||0).toLocaleString()," ziyaret"))))))),i=t=>t==null?"0":t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toLocaleString(),v=({label:t,value:a,isPositive:l,suffix:c="%",icon:s})=>React.createElement("div",{style:{...e.growthCard,borderLeft:`4px solid ${l?"#23a559":"#ed4245"}`}},React.createElement("div",{style:e.growthLabel},t),React.createElement("div",{style:{...e.growthValue,color:l?"#23a559":"#ed4245"}},s||(l?React.createElement(U,null):React.createElement(Y,null)),React.createElement("span",null,typeof a=="number"?a.toFixed(1):a,c))),X=({stats:t})=>React.createElement("div",{style:e.tabContent},React.createElement("div",{style:e.statsGrid},React.createElement(r,{icon:React.createElement(R,null),label:"Toplam KullanÄ±cÄ±",value:t.total_users||0,color:"#5865f2"}),React.createElement(r,{icon:React.createElement(C,null),label:"Online",value:t.online_users||0,color:"#23a559"}),React.createElement(r,{icon:React.createElement(V,null),label:"Offline",value:t.total_users-t.online_users||0,color:"#747f8d"})),t.top_users&&t.top_users.length>0&&React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"En Aktif KullanÄ±cÄ±lar"),React.createElement("div",{style:e.list},t.top_users.map((a,l)=>React.createElement("div",{key:l,style:e.listItem},React.createElement("span",null,"#",l+1," ",a.username),React.createElement("span",null,a.message_count," mesaj")))))),J=({stats:t})=>React.createElement("div",{style:e.tabContent},React.createElement("div",{style:e.statsGrid},React.createElement(r,{icon:React.createElement(z,null),label:"Premium KullanÄ±cÄ±",value:t.premium_users||0,color:"#9b59b6"}),React.createElement(r,{icon:React.createElement($,null),label:"AylÄ±k Gelir",value:`${t.monthly_revenue||0} TL`,color:"#f0b132"}),React.createElement(r,{icon:React.createElement(w,null),label:"YÄ±llÄ±k Tahmin",value:`${(t.monthly_revenue||0)*12} TL`,color:"#23a559"})),React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"Premium DaÄŸÄ±lÄ±mÄ±"),React.createElement("div",{style:e.pieChart},React.createElement(S,{label:"Ãœcretsiz",value:t.free_users||0,color:"#747f8d"}),React.createElement(S,{label:"Nitro Basic",value:t.basic_users||0,color:"#5865f2"}),React.createElement(S,{label:"Nitro Premium",value:t.premium_tier_users||0,color:"#9b59b6"})))),H=({stats:t})=>React.createElement("div",{style:e.tabContent},React.createElement("div",{style:e.statsGrid},React.createElement(r,{icon:React.createElement(g,null),label:"Toplam Sunucu",value:t.total_servers||0,color:"#5865f2"}),React.createElement(r,{icon:React.createElement(x,null),label:"Genel Sunucu",value:t.public_servers||0,color:"#23a559"}),React.createElement(r,{icon:React.createElement(R,null),label:"Ortalama Ãœye",value:t.avg_server_members||0,color:"#f0b132"})),t.top_servers&&t.top_servers.length>0&&React.createElement("div",{style:e.section},React.createElement("h3",{style:e.sectionTitle},"En BÃ¼yÃ¼k Sunucular"),React.createElement("div",{style:e.list},t.top_servers.map((a,l)=>React.createElement("div",{key:l,style:e.listItem},React.createElement("span",null,"#",l+1," ",a.name),React.createElement("span",null,a.member_count," Ã¼ye")))))),r=({icon:t,label:a,value:l,color:c,subtitle:s})=>React.createElement("div",{style:{...e.statCard,borderTop:`3px solid ${c}`}},React.createElement("div",{style:{...e.statIcon,color:c}},t),React.createElement("div",{style:e.statContent},React.createElement("div",{style:e.statLabel},a),React.createElement("div",{style:e.statValue},l),s&&React.createElement("div",{style:e.statSubtitle},s))),m=({icon:t,label:a,value:l,color:c="#5865f2"})=>React.createElement("div",{style:e.activityItem},React.createElement("div",{style:{...e.activityIcon,color:c}},t),React.createElement("div",{style:e.activityLabel},a),React.createElement("div",{style:{...e.activityValue,color:c}},l)),S=({label:t,value:a,color:l})=>React.createElement("div",{style:e.pieItem},React.createElement("div",{style:{...e.pieColor,backgroundColor:l}}),React.createElement("div",{style:e.pieLabel},t),React.createElement("div",{style:e.pieValue},a)),e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,backdropFilter:"blur(5px)"},modal:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"90%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},header:{padding:"20px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px",color:"#fff"},headerRight:{display:"flex",gap:"10px"},title:{margin:0,fontSize:"24px",color:"#fff"},exportButton:{background:"#23a559",border:"none",color:"#fff",padding:"10px 15px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},closeButton:{background:"#da373c",border:"none",color:"#fff",padding:"10px 15px",borderRadius:"6px",cursor:"pointer",fontSize:"16px"},tabs:{display:"flex",padding:"0 20px",borderBottom:"1px solid #1e1f22",gap:"5px"},tab:{background:"none",border:"none",color:"#b9bbbe",padding:"12px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"500",borderBottom:"2px solid transparent",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},activeTab:{color:"#fff",borderBottomColor:"#5865f2"},content:{flex:1,overflow:"auto",padding:"20px"},tabContent:{display:"flex",flexDirection:"column",gap:"20px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},statCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"20px",display:"flex",alignItems:"center",gap:"15px"},statIcon:{fontSize:"32px"},statContent:{flex:1},statLabel:{color:"#b9bbbe",fontSize:"12px",marginBottom:"5px"},statValue:{color:"#fff",fontSize:"24px",fontWeight:"bold"},statSubtitle:{color:"#747f8d",fontSize:"11px",marginTop:"3px"},section:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"20px"},sectionTitle:{color:"#fff",fontSize:"16px",marginBottom:"15px",margin:"0 0 15px 0"},activityList:{display:"flex",flexDirection:"column",gap:"10px"},activityItem:{display:"flex",alignItems:"center",padding:"10px",backgroundColor:"#2b2d31",borderRadius:"6px"},activityIcon:{color:"#5865f2",marginRight:"12px",fontSize:"18px"},activityLabel:{flex:1,color:"#b9bbbe",fontSize:"14px"},activityValue:{color:"#fff",fontSize:"16px",fontWeight:"bold"},list:{display:"flex",flexDirection:"column",gap:"8px"},listItem:{display:"flex",justifyContent:"space-between",padding:"10px",backgroundColor:"#2b2d31",borderRadius:"6px",color:"#b9bbbe",fontSize:"14px"},pieChart:{display:"flex",flexDirection:"column",gap:"12px"},pieItem:{display:"flex",alignItems:"center",gap:"12px"},pieColor:{width:"20px",height:"20px",borderRadius:"4px"},pieLabel:{flex:1,color:"#b9bbbe",fontSize:"14px"},pieValue:{color:"#fff",fontSize:"16px",fontWeight:"bold"},loading:{color:"#fff",textAlign:"center",padding:"40px"},error:{color:"#da373c",textAlign:"center",padding:"40px"},growthSection:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px",marginBottom:"20px"},growthCard:{backgroundColor:"#1e1f22",borderRadius:"8px",padding:"15px",display:"flex",flexDirection:"column",gap:"8px"},growthLabel:{color:"#b9bbbe",fontSize:"12px"},growthValue:{display:"flex",alignItems:"center",gap:"8px",fontSize:"20px",fontWeight:"bold"},deviceStats:{display:"flex",gap:"20px",flexWrap:"wrap"},deviceCard:{flex:"1 1 200px",display:"flex",alignItems:"center",gap:"15px",backgroundColor:"#2b2d31",padding:"20px",borderRadius:"8px"},deviceInfo:{display:"flex",flexDirection:"column",gap:"4px"},deviceLabel:{color:"#b9bbbe",fontSize:"12px"},deviceValue:{color:"#fff",fontSize:"24px",fontWeight:"bold"},devicePercent:{color:"#5865f2",fontSize:"14px",fontWeight:"bold"}};export{te as default};
