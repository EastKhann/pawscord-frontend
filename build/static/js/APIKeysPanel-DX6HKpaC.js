import{r as a,aI as E,az as i,aw as R,ax as k,bo as w,v as K}from"./react-core-B6hadH-M.js";import{t as n}from"./index-D_6pZib5.js";const v=({fetchWithAuth:o,apiBaseUrl:r})=>{const[l,d]=a.useState([]),[p,y]=a.useState(!0),[s,m]=a.useState({});a.useEffect(()=>{c()},[]);const c=async()=>{try{const e=await o(`${r}/apikeys/list/`);if(e.ok){const t=await e.json();d(t)}}catch(e){console.error("API keys load error:",e)}finally{y(!1)}},u=async()=>{const e=prompt("API Key name:");if(e)try{const t=await o(`${r}/apikeys/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(t.ok){const f=await t.json();n.success(`✅ Key created!

Key: ${f.key}

⚠️ Save this! It won't be shown again.`),c()}}catch{n.error("❌ Failed to create key")}},b=async e=>{if(confirm("Delete this API key?"))try{(await o(`${r}/apikeys/${e}/delete/`,{method:"DELETE"})).ok&&c()}catch{n.error("❌ Failed to delete key")}},g=e=>{navigator.clipboard.writeText(e),n.success("✅ Copied to clipboard!")},x=e=>e?e.substring(0,8)+"•".repeat(24):"";return p?React.createElement("div",{style:{padding:"20px",color:"#b9bbbe"}},"Loading..."):React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"20px"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("div",null,React.createElement("h4",{style:{margin:0,color:"#dcddde"}},"API Keys"),React.createElement("p",{style:{margin:"5px 0 0 0",color:"#72767d",fontSize:"13px"}},"Create and manage API keys for external integrations")),React.createElement("button",{onClick:u,style:{padding:"8px 16px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontWeight:"bold"}},React.createElement(E,null)," New Key")),l.length===0?React.createElement("div",{style:{padding:"40px",textAlign:"center",color:"#72767d",backgroundColor:"#2f3136",borderRadius:"8px"}},React.createElement(i,{style:{fontSize:"48px",marginBottom:"16px",opacity:.5}}),React.createElement("p",null,"No API keys yet")):React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},l.map(e=>React.createElement("div",{key:e.id,style:{padding:"16px",backgroundColor:"#2f3136",borderRadius:"8px",border:"1px solid #40444b"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},React.createElement("div",{style:{flex:1}},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"}},React.createElement(i,{style:{color:"#5865f2"}}),React.createElement("span",{style:{color:"#dcddde",fontWeight:"bold"}},e.name)),React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",backgroundColor:"#1e1f22",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#b9bbbe"}},React.createElement("span",null,s[e.id]?e.key:x(e.key)),React.createElement("button",{onClick:()=>m(t=>({...t,[e.id]:!t[e.id]})),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"}},s[e.id]?React.createElement(R,null):React.createElement(k,null)),React.createElement("button",{onClick:()=>g(e.key),style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"4px"}},React.createElement(w,null))),React.createElement("div",{style:{marginTop:"8px",fontSize:"12px",color:"#72767d"}},"Created: ",new Date(e.created_at).toLocaleDateString(),e.last_used&&React.createElement(React.Fragment,null," • Last used: ",new Date(e.last_used).toLocaleDateString()))),React.createElement("button",{onClick:()=>b(e.id),style:{background:"none",border:"none",color:"#f04747",cursor:"pointer",padding:"8px",borderRadius:"4px"},title:"Delete key"},React.createElement(K,null)))))),React.createElement("div",{style:{padding:"12px",backgroundColor:"rgba(250, 166, 26, 0.1)",borderLeft:"3px solid #faa61a",borderRadius:"4px",fontSize:"13px",color:"#dcddde"}},"⚠️ ",React.createElement("strong",null,"Security:")," Keep your API keys secret! Anyone with your key can access your account."))};export{v as default};
