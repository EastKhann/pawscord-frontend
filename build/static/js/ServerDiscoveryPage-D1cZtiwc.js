import{r as l}from"./react-core-B6hadH-M.js";import{t as R}from"./index-D_6pZib5.js";const z=({apiBaseUrl:n,token:p,onJoinServer:o})=>{const[r,y]=l.useState([]),[u,h]=l.useState([]),[N,d]=l.useState(!0),[a,c]=l.useState({category:"all",language:"all",size:"all",search:""}),[f]=l.useState([{value:"all",label:"ğŸŒ TÃ¼mÃ¼"},{value:"gaming",label:"ğŸ® Oyun"},{value:"music",label:"ğŸµ MÃ¼zik"},{value:"education",label:"ğŸ“š EÄŸitim"},{value:"technology",label:"ğŸ’» Teknoloji"},{value:"art",label:"ğŸ¨ Sanat"},{value:"anime",label:"ğŸ­ Anime"},{value:"memes",label:"ğŸ˜‚ Meme"},{value:"community",label:"ğŸ‘¥ Topluluk"}]);l.useEffect(()=>{k(),b()},[a]);const s=async(e,t={})=>{const m={Authorization:`Bearer ${p}`,"Content-Type":"application/json",...t.headers},i=await fetch(e,{...t,headers:m});if(!i.ok)throw new Error(`HTTP ${i.status}`);return i.json()},k=async()=>{try{d(!0);const e=new URLSearchParams;a.category!=="all"&&e.append("category",a.category),a.language!=="all"&&e.append("language",a.language),a.size!=="all"&&e.append("size",a.size),a.search&&e.append("search",a.search);const t=await s(`${n}/discovery/servers/?${e}`);y(t.servers||[])}catch(e){console.error("âŒ Servers yÃ¼klenemedi:",e)}finally{d(!1)}},b=async()=>{try{const e=await s(`${n}/discovery/featured/`);h(e.servers||[])}catch(e){console.error("âŒ Featured servers yÃ¼klenemedi:",e)}},E=async e=>{try{await s(`${n}/servers/${e}/join/`,{method:"POST"}),R.success("âœ… Sunucuya katÄ±ldÄ±nÄ±z!"),o&&o(e)}catch(t){console.error("âŒ Sunucuya katÄ±lÄ±namadÄ±:",t),R.error("âŒ Sunucuya katÄ±lÄ±namadÄ±!")}},v=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e,g=e=>e>=1e3?`${(e/1e3).toFixed(1)}K`:e;return N&&r.length===0?React.createElement("div",{className:"discovery-page"},React.createElement("div",{className:"loading"},"ğŸ”„ Sunucular yÃ¼kleniyor...")):React.createElement("div",{className:"discovery-page"},React.createElement("div",{className:"page-header"},React.createElement("h1",null,"ğŸ” Sunucu KeÅŸfet"),React.createElement("p",null,"Ä°lgi alanlarÄ±na uygun yeni topluluklar bul ve katÄ±l")),React.createElement("div",{className:"search-filters"},React.createElement("div",{className:"search-bar"},React.createElement("input",{type:"text",placeholder:"ğŸ” Sunucu ara...",value:a.search,onChange:e=>c({...a,search:e.target.value})})),React.createElement("div",{className:"filters-row"},React.createElement("select",{value:a.category,onChange:e=>c({...a,category:e.target.value})},f.map(e=>React.createElement("option",{key:e.value,value:e.value},e.label))),React.createElement("select",{value:a.size,onChange:e=>c({...a,size:e.target.value})},React.createElement("option",{value:"all"},"ğŸ‘¥ TÃ¼m Boyutlar"),React.createElement("option",{value:"small"},"KÃ¼Ã§Ã¼k (0-100)"),React.createElement("option",{value:"medium"},"Orta (100-1K)"),React.createElement("option",{value:"large"},"BÃ¼yÃ¼k (1K-10K)"),React.createElement("option",{value:"huge"},"Ã‡ok BÃ¼yÃ¼k (10K+)")),React.createElement("select",{value:a.language,onChange:e=>c({...a,language:e.target.value})},React.createElement("option",{value:"all"},"ğŸŒ TÃ¼m Diller"),React.createElement("option",{value:"tr"},"ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e"),React.createElement("option",{value:"en"},"ğŸ‡ºğŸ‡¸ English"),React.createElement("option",{value:"de"},"ğŸ‡©ğŸ‡ª Deutsch"),React.createElement("option",{value:"fr"},"ğŸ‡«ğŸ‡· FranÃ§ais"),React.createElement("option",{value:"es"},"ğŸ‡ªğŸ‡¸ EspaÃ±ol")))),u.length>0&&React.createElement("div",{className:"featured-section"},React.createElement("h2",null,"â­ Ã–ne Ã‡Ä±kanlar"),React.createElement("div",{className:"featured-grid"},u.map(e=>React.createElement("div",{key:e.id,className:"featured-card"},React.createElement("div",{className:"featured-badge"},"â­ Ã–ne Ã‡Ä±kan"),React.createElement("img",{src:e.icon||"/default-server.png",alt:e.name,className:"server-icon-large"}),React.createElement("h3",null,e.name),React.createElement("p",{className:"server-description"},e.description),React.createElement("div",{className:"server-stats"},React.createElement("div",{className:"stat"},React.createElement("span",{className:"stat-icon"},"ğŸ‘¥"),React.createElement("span",null,v(e.member_count)," Ã¼ye")),React.createElement("div",{className:"stat"},React.createElement("span",{className:"stat-icon"},"ğŸŸ¢"),React.createElement("span",null,g(e.online_count)," Ã§evrimiÃ§i"))),React.createElement("button",{className:"join-btn",onClick:()=>E(e.id)},"ğŸš€ KatÄ±l"))))),React.createElement("div",{className:"servers-section"},React.createElement("h2",null,"ğŸŒ TÃ¼m Sunucular"),r.length===0?React.createElement("div",{className:"empty-state"},React.createElement("p",null,"AramanÄ±za uygun sunucu bulunamadÄ±")):React.createElement("div",{className:"servers-grid"},r.map(e=>React.createElement("div",{key:e.id,className:"server-card"},React.createElement("div",{className:"server-header"},React.createElement("img",{src:e.icon||"/default-server.png",alt:e.name,className:"server-icon"}),React.createElement("div",{className:"server-info"},React.createElement("h3",null,e.name),React.createElement("div",{className:"server-meta"},React.createElement("span",{className:"category-badge"},e.category),e.verified&&React.createElement("span",{className:"verified-badge"},"âœ“ DoÄŸrulanmÄ±ÅŸ")))),React.createElement("p",{className:"server-description"},e.description||"AÃ§Ä±klama yok"),React.createElement("div",{className:"server-stats-row"},React.createElement("div",{className:"stat-item"},React.createElement("span",{className:"stat-icon"},"ğŸ‘¥"),React.createElement("span",null,v(e.member_count))),React.createElement("div",{className:"stat-item online"},React.createElement("span",{className:"stat-icon"},"ğŸŸ¢"),React.createElement("span",null,g(e.online_count)))),e.tags&&e.tags.length>0&&React.createElement("div",{className:"server-tags"},e.tags.slice(0,3).map((t,m)=>React.createElement("span",{key:m,className:"tag"},t))),React.createElement("button",{className:"join-btn-small",onClick:()=>E(e.id)},"KatÄ±l"))))))};export{z as default};
