import{r,cv as m,l as E,aT as h,cw as L}from"./react-core-B6hadH-M.js";import{t as s}from"./index-D_6pZib5.js";const k=({fetchWithAuth:d,apiBaseUrl:f,onClose:x,serverId:i})=>{const[a,u]=r.useState([]),[y,p]=r.useState(!1),[o,c]=r.useState("all");r.useEffect(()=>{b()},[i]);const b=async()=>{p(!0);try{const l=await(await d(`${f}/servers/${i}/logs/`)).json();u(l.logs||[])}catch{s.error("Failed to load join/leave logs")}finally{p(!1)}},v=async()=>{try{const l=await(await d(`${f}/servers/${i}/logs/export/`)).blob(),R=window.URL.createObjectURL(l),n=document.createElement("a");n.href=R,n.download=`join_leave_logs_${new Date().toISOString()}.csv`,document.body.appendChild(n),n.click(),n.remove(),s.success("Logs exported successfully")}catch{s.error("Failed to export logs")}},g=a.filter(t=>o==="all"?!0:t.action===o);return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(m,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Join/Leave Logs")),React.createElement("button",{onClick:x,style:e.closeButton},React.createElement(E,null))),React.createElement("div",{style:e.filters},React.createElement("button",{onClick:()=>c("all"),style:{...e.filterButton,...o==="all"&&e.filterButtonActive}},"All (",a.length,")"),React.createElement("button",{onClick:()=>c("joined"),style:{...e.filterButton,...o==="joined"&&e.filterButtonActive}},"ðŸŸ¢ Joins (",a.filter(t=>t.action==="joined").length,")"),React.createElement("button",{onClick:()=>c("left"),style:{...e.filterButton,...o==="left"&&e.filterButtonActive}},"ðŸ”´ Leaves (",a.filter(t=>t.action==="left").length,")"),React.createElement("button",{onClick:v,style:e.exportButton},React.createElement(h,{style:{marginRight:"5px"}}),"Export")),React.createElement("div",{style:e.content},y?React.createElement("div",{style:e.loading},"Loading logs..."):g.length===0?React.createElement("div",{style:e.empty},"No logs found"):React.createElement("div",{style:e.logsList},g.map((t,l)=>React.createElement("div",{key:l,style:e.logItem},React.createElement("div",{style:e.logIcon},t.action==="joined"?React.createElement(m,{style:{color:"#43b581"}}):React.createElement(L,{style:{color:"#f04747"}})),React.createElement("div",{style:e.logInfo},React.createElement("div",{style:e.logUser},t.user?.username||"Unknown User"),React.createElement("div",{style:e.logAction},t.action==="joined"?"Joined the server":"Left the server"),t.invite_code&&React.createElement("div",{style:e.logMeta},"via invite: ",t.invite_code)),React.createElement("div",{style:e.logTime},new Date(t.timestamp).toLocaleString())))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},filters:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #2c2f33",flexWrap:"wrap"},filterButton:{padding:"8px 16px",backgroundColor:"#2c2f33",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},filterButtonActive:{backgroundColor:"#5865f2"},exportButton:{marginLeft:"auto",padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},logsList:{display:"flex",flexDirection:"column",gap:"12px"},logItem:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",alignItems:"center",gap:"16px"},logIcon:{fontSize:"20px"},logInfo:{flex:1},logUser:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},logAction:{fontSize:"14px",color:"#dcddde",marginBottom:"2px"},logMeta:{fontSize:"12px",color:"#99aab5"},logTime:{fontSize:"13px",color:"#99aab5"}};export{k as default};
