const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ServerSettingsModal-C0IIpl_b.js","./react-vendor-D4QjtNWS.js","./vendor-Brv1On52.js","./state-vendor-T8XA44Ud.js","./perf-vendor-CmoV45_-.js","../css/vendor-Dj12pvTl.css","./icons-vendor-BZYtSAMW.js","./AutoResponderManager-I10PMZpt.js","./VanityURLManager-CLwlMLmR.js","./router-vendor-BDkI7eRJ.js","./crypto-vendor-BQNqsgOu.js","./UserProfileModal-DRxFrVTj.js","./ImageModal-CVsPsz4n.js","./GifPicker-DtTP0DDo.js","./StickerPicker-DRqnCNqf.js","./SoundboardModal-BN0QYelb.js","./WatchPartyEnhanced-CnAZNXOc.js","./CinemaModal-DM38TilE.js","./WhiteboardModal-BZBHcLUw.js","./PollCreateModal-ohOyIatt.js","./CodeSnippetModal-DD4RODid.js","./MessageTemplateModal-1IcqHzsh.js","./Message-DSg5lM53.js","./LazyImage-BZ9-fHlM.js","./imageCaching-DUoTn-WY.js","./VirtualMessageList-BskB6pIg.js","./MessageInput-X8V7x2lB.js","./ScheduledMessageModal-B0Jm3nHB.js","../css/MessageInput-DSbUeC-P.css","./UserVideoContainer-DML6c8C9.js","./VoiceAudioController-skx20B5j.js","./RichTextEditor-BbzaEiSi.js","./editor-vendor-CtTiR3NS.js","../css/RichTextEditor-D3gjYEEz.css","./StickyMessageBanner-CgOjnT-e.js","./LoginPage-B3k8Iy66.js","./recaptcha-BhZmfeTz.js","./WelcomeScreen-BE8EpLtX.js","./DownloadModal-B4Y4bds1.js","./apiEndpoints-DTuZVK56.js","./AvatarCropper-DLpZUIT6.js","../css/AvatarCropper-CvJ6GDdV.css","./CryptoChartModal-Cd25hZaK.js","./CryptoStoreModal-Cw2rOyTI.js","./PremiumStoreModal-0kPaCwiZ.js","./KanbanBoard-B8b0mVzG.js","./SummaryModal-DMzldHmf.js","./DJModal-D9PAVXWJ.js","./ThemeStoreModal-ClcXk4KD.js","./EncryptionKeyModal-Bjzc8dw_.js","./CreateGroupModal-CSLApvfk.js","./AdminAnalyticsPanel-Aj1MpCNk.js","./chart-vendor-CuYawewL.js","./AdminPanelModal-Z-AQqu8r.js","./WebhooksPanel-CHlvFmKx.js","../css/WebhooksPanel-Cn13v79_.css","./AutoModerationDashboard-ClywElkI.js","./AutoModerationPanel-kdP1IQXo.js","../css/AutoModerationPanel-iAw0CZQU.css","./RaidProtectionPanel-DM1ZDKcc.js","./ReportSystemPanel-DvJBL8jF.js","./AuditLogPanel-DDG_aKsi.js","./UserWarningsPanel-B3kAslC6.js","./BookmarkPanel-YqJ2_Jeh.js","./ReadLaterPanel-BjyTZHIW.js","../css/ReadLaterPanel-B_WZGTiX.css","./ChannelPermissionsPanel-R8tNfGAg.js","./MessageThreadsPanel-BhoeDTRL.js","./ModeratorNotesPanel-BSQS3_TY.js","./ServerRolesPanel-Bi6o9UcM.js","./NotificationPreferencesPanel-1vUQ7b2F.js","./MessageOCRPanel-BvkHUWpv.js","./MassActionsPanel-e5VCcbBa.js","./TimeoutMutePanel-CFVtPBU6.js","./ServerThemesPanel-9N7N4oQU.js","./KeywordMutesPanel-B6UaclVd.js","./WelcomeTemplatesPanel-BScBVA8S.js","./StickyMessagesPanel-CJpCBO0c.js","./MessageTemplatesPanel-W_VCe4Vh.js","./MessageExportPanel-B2xiC0rA.js","./ArchivedRoomsPanel-CRn8K_RE.js","./SlowModePanel-DOMulqjh.js","./EmojiManagementPanel-CsRfM9Qa.js","./ReactionAnalyticsPanel-CKAauMNs.js","./LinkClickTrackingPanel-DH7nqJ9D.js","./JoinLeaveLogsPanel-CE8N_2VQ.js","./UserActivityPanel-JYSSb3_z.js","./NicknameHistoryPanel-D9CsVYd9.js","./FieldChangeTrackingPanel-gVMW04DG.js","./InviteAnalyticsPanel-Cv4927JH.js","./ContentScannerPanel-DYa_iuy8.js","./EphemeralMessagesPanel-B_DBOkJc.js","./TopicHistoryPanel-Cgx9dh70.js","./DraftsPanel-BG86cSQA.js","./ServerNicknamesPanel-BtD4B26M.js","./ServerBoostPanel-CxX7SDSW.js","./RoomWebhooksPanel-CSA0aRVf.js","./OAuthAppsPanel-CfEnuKxI.js","./VanityURLPanel-CJSQpwbw.js","./AutoRespondersPanel-BgConPzY.js","./SessionManagementPanel-C1OiJT7X.js","./GDPRExportPanel-CWRgEhzI.js","./DataRetentionPanel-3D__HwSD.js","./TwoFactorSetupWizard-D-snqfx_.js","./EnhancedPollsPanel-DYY4YKT1.js","./VoiceTranscriptsPanel-C-GVToEr.js","./PaymentPanel-Cx17Gfww.js","./StoreModal-Dyf78fU6.js","./DailyRewardsModal-CjF2X_9F.js","./APIUsagePanel-C3syG1l_.js","./ExportJobsPanel-Dx-5qSFE.js","./ScheduledAnnouncementsPanel-ytnIFIFZ.js","./InviteExportPanel-BfN-awBS.js","./AdvancedSearchPanel-C8ORx9zh.js","./GrowthMetricsPanel-DAacMFie.js","./LinkPreviewRenderer-DEiQNtlp.js","./InventoryPanel-CKwVpP5P.js","./WaitlistPanel-Ck8jHCU3.js","./ReferralRewardsPanel-B0JLWDlq.js","./VerifyEmailPage-D1Xj-wv_.js","./ForgotPasswordPage-B4yQ59C4.js","./ResetPasswordPage-rsyeFUZD.js","./TwoFactorLoginPage-CosbC5v2.js","./TwoFactorSetup-DF9bt3dx.js","../css/TwoFactorSetup-CtmcmlFU.css","./TwoFactorLogin-vWK1WRqn.js","../css/TwoFactorLogin-DgREC4Q6.css","./VanityInviteScreen-CIYW9iMv.js","./EmailVerification-C7SH39Qq.js","../css/EmailVerification-CE2S-15C.css","./MobileNav-BB_LcA2A.js","../css/MobileNav-BLwPGkd1.css","./SwipeActions-BGROgEJG.js","../css/SwipeActions-CCPpS4d3.css","./VoiceMessage-B5PVXwX3.js","../css/VoiceMessage-Czmu0SFR.css","./FriendsTab-BwwfDC1K.js","./RoomList-HAP3tSn6.js","./UserFooter-ChFET_gn.js","./UserProfilePanel-DEpZiWOV.js","../css/UserProfilePanel-DaqyzPyG.css","./VoiceChatPanel-BmVtBBgh.js","./UserContextMenu-C7veQ8I6.js","../css/VoiceChatPanel-D0hk1ENV.css","./ChatUserList-Bpe0sQGv.js","./PinnedMessages-s_fy8pMj.js","./FloatingVoiceIsland-FGeUTGSl.js","./CinemaPlayer-BgmfKpuy.js","./ConnectionsPanel-Clzw_tfM.js","../css/ConnectionsPanel-BHb_cRVQ.css","./PasswordSetupModal-ZLCCqhNs.js","../css/PasswordSetupModal-hiiUdoNl.css","./NotificationDropdown-Xjdbk9yu.js","./ReactionStatsPanel-CeHDr7jM.js","../css/ReactionStatsPanel-D_puvjpP.css","./ServerHealthPanel-LdTUKDVY.js","../css/ServerHealthPanel-DVezKW9Q.css","./ChannelAnalyticsPanel-DrIBsj9U.js","../css/ChannelAnalyticsPanel-B6Q8OoDz.css","./SmartSuggestionsPanel-B5rjWbBC.js","../css/SmartSuggestionsPanel-BFDBx7VC.css","./UserPresenceInsightsPanel-B3EHSD-i.js","../css/UserPresenceInsightsPanel-C69M9XNv.css","./MiniGamesPanel-CyRS_o6V.js","./ProjectCollaborationPanel-x4c99arY.js","./AvatarStudioPanel-DOOclEz5.js","./pushNotifications-gNTJgEVU.js","./urlHandlers-DTE64gc3.js","./EnglishHub-6JCqyLXk.js","./GrammarQuizPage-B8tKy50C.js","./grammarQuestions-U7qINgV3.js","./EnglishLearningPage-Dfchgv6L.js","./CryptoDashboard-CcdRn3KI.js","./CryptoSignals-tkR-PKMZ.js","./LandingPage-veFOhG2B.js","../css/LandingPage-CHHpsw7G.css","./ReferralProgram-B5hEtXnx.js","../css/ReferralProgram-CBBjqZR4.css","./GrowthDashboard-DQ7yWgpQ.js","../css/GrowthDashboard-xlqndw5F.css","./ToastDemo-BjpB0Ndt.js","../css/ToastDemo-DxNVRuTl.css"])))=>i.map(i=>d[i]);
import{aM as h,aN as Un,aO as ho,aP as cl,aQ as dl,aR as ul}from"./vendor-Brv1On52.js";import{R as m,j as e,r as o,b as pl,f as fl}from"./react-vendor-D4QjtNWS.js";import{u as sa,a as aa,b as Nr,L as ia,H as ml,R as gl,c as he}from"./router-vendor-BDkI7eRJ.js";import{F as hl,a as No,b as yl,c as Ws,d as Gs,e as xl,f as Sl,g as bl,h as wl,i as vl,j as _l,k as Hs,l as kl,m as Cl,n as Mn,o as Nn,p as jl,q as Tl,r as El,s as Rl,t as la,u as Fn,v as Wn,w as Al,x as Il,y as ca,z as Ks,A as Pl,B as Ol,C as Ll,D as Dl,E as Ml,G as $l,H as zl}from"./icons-vendor-BZYtSAMW.js";import{b as Vl}from"./state-vendor-T8XA44Ud.js";import{C as $n}from"./crypto-vendor-BQNqsgOu.js";import"./perf-vendor-CmoV45_-.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))b(x);new MutationObserver(x=>{for(const C of x)if(C.type==="childList")for(const A of C.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&b(A)}).observe(document,{childList:!0,subtree:!0});function l(x){const C={};return x.integrity&&(C.integrity=x.integrity),x.referrerPolicy&&(C.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?C.credentials="include":x.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function b(x){if(x.ep)return;x.ep=!0;const C=l(x);fetch(x.href,C)}})();let Bl=class extends m.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,l){console.error("Error Boundary caught error:",s,l),this.setState({error:s,errorInfo:l,errorCount:this.state.errorCount+1}),window.gtag&&window.gtag("event","exception",{description:s.toString(),fatal:!1}),this.reportError(s,l)}reportError=async(s,l)=>{try{await fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:s.toString(),stack:l.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(b){console.error("Failed to report error:",b)}};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.state.errorCount>3?e.jsx("div",{className:"error-boundary critical",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h1",{children:"‚ö†Ô∏è Critical Error"}),e.jsx("p",{children:"Multiple errors detected. Please refresh the page."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn-reload",children:"Refresh Page"})]})}):e.jsx("div",{className:"error-boundary",children:e.jsxs("div",{className:"error-content",children:[e.jsx("div",{className:"error-icon",children:"üòï"}),e.jsx("h1",{children:"Oops! Something went wrong"}),e.jsx("p",{className:"error-message",children:this.props.fallbackMessage||"We're sorry for the inconvenience. The error has been reported."}),!1,e.jsxs("div",{className:"error-actions",children:[e.jsx("button",{onClick:this.handleReset,className:"btn-retry",children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.href="/",className:"btn-home",children:"Go Home"})]})]})}):this.props.children}},fo=null;function Ul(){return fo||(fo=document.createElement("div"),fo.id="toast-container",fo.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        `,document.body.appendChild(fo)),fo}function Uo(p,s="info",l=3e3){const b=Ul(),x=document.createElement("div");x.className=`toast toast-${s}`;let C="‚ÑπÔ∏è",A="#3b82f6";switch(s){case"success":C="‚úÖ",A="#10b981";break;case"error":C="‚ùå",A="#ef4444";break;case"warning":C="‚ö†Ô∏è",A="#f59e0b";break;case"info":C="‚ÑπÔ∏è",A="#3b82f6";break}x.style.cssText=`
        background: ${A};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 300px;
        max-width: 500px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 14px;
        pointer-events: all;
        animation: slideIn 0.3s ease-out;
        transition: opacity 0.3s ease-out;
    `,x.innerHTML=`
        <span style="font-size: 20px;">${C}</span>
        <span style="flex: 1;">${p}</span>
        <button onclick="this.parentElement.remove()" style="
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
           onmouseout="this.style.background='rgba(255,255,255,0.2)'">√ó</button>
    `,b.appendChild(x);const I=document.createElement("style");I.textContent=`
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    `,document.getElementById("toast-styles")||(I.id="toast-styles",document.head.appendChild(I)),setTimeout(()=>{x.style.animation="slideOut 0.3s ease-out",setTimeout(()=>x.remove(),300)},l)}const D={success:(p,s)=>Uo(p,"success",s),error:(p,s)=>Uo(p,"error",s),warning:(p,s)=>Uo(p,"warning",s),info:(p,s)=>Uo(p,"info",s)};typeof window<"u"&&(window.toast=D,window.showToast=Uo);const Nl=async()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.toLowerCase().includes("electron")||window.location?.protocol==="file:"))return console.log("‚ö†Ô∏è [PWA] Service Worker disabled in Electron (file:// protocol)"),null;if("serviceWorker"in navigator)try{const s=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("‚úÖ Service Worker registered:",s.scope),s.addEventListener("updatefound",()=>{const l=s.installing;console.log("üîÑ New Service Worker installing..."),l.addEventListener("statechange",()=>{l.state==="installed"&&navigator.serviceWorker.controller&&Fl()})}),setInterval(()=>{s.update()},3600*1e3),s}catch(s){return console.error("‚ùå Service Worker registration failed:",s),null}},Fl=()=>{console.log("‚ÑπÔ∏è Yeni versiyon mevcut - UI g√ºncelleme butonu aktif")},Wl=()=>{window.addEventListener("beforeinstallprompt",p=>{p.preventDefault();const s=document.getElementById("install-pwa-button");s&&(s.style.display="block"),console.log("üì± PWA install prompt ready")}),window.addEventListener("appinstalled",()=>{console.log("‚úÖ PWA installed successfully"),window.gtag&&window.gtag("event","pwa_installed",{event_category:"PWA",event_label:"App Installed"})})},Gl=(p,s)=>{const l=()=>{console.log("‚úÖ Network: Online"),p&&p(),Ys("üü¢ √áevrimi√ßi","success")},b=()=>{console.log("‚ùå Network: Offline"),s&&s(),Ys("üî¥ √áevrimdƒ±≈üƒ± - Baƒülantƒ± koptu","error")};return window.addEventListener("online",l),window.addEventListener("offline",b),navigator.onLine||b(),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",b)}},Ys=(p,s="info")=>{const l=document.getElementById("network-banner");l&&l.remove();const b=document.createElement("div");b.id="network-banner",b.textContent=p,b.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        padding: 12px;
        text-align: center;
        color: white;
        font-weight: 600;
        z-index: 9999;
        animation: slideDown 0.3s ease;
        background: ${s==="success"?"#43b581":"#ed4245"};
    `,document.body.appendChild(b),s==="success"&&setTimeout(()=>{b.style.animation="slideUp 0.3s ease",setTimeout(()=>b.remove(),300)},3e3)},Hl=()=>{const p=document.createElement("style");p.textContent=`
        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }
    `,document.head.appendChild(p)};Hl();const Kl=`
/* üé® PAWSCORD Critical CSS - Above the Fold */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #1e1f22;
    color: #dcddde;
    overflow: hidden;
}

/* Loading Screen */
#loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #1e1f22;
    display: flex;
    align-items: center;
    justify-center: center;
    z-index: 9999;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #40444b;
    border-top-color: #5865f2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Main Layout */
#root {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

.app-container {
    display: flex;
    width: 100%;
    height: 100%;
}

/* Sidebar */
.sidebar {
    width: 240px;
    background: #2b2d31;
    flex-shrink: 0;
}

/* Chat Area */
.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #313338;
}

/* Message Input - Critical */
.message-input-container {
    padding: 16px;
    background: #383a40;
}

.message-input {
    width: 100%;
    padding: 12px;
    background: #40444b;
    border: none;
    border-radius: 8px;
    color: #dcddde;
    font-size: 15px;
    outline: none;
}

/* Button Base */
button {
    cursor: pointer;
    border: none;
    background: transparent;
    color: inherit;
    font-family: inherit;
}

.btn-primary {
    background: #5865f2;
    color: white;
    padding: 10px 16px;
    border-radius: 4px;
    font-weight: 500;
    transition: background 0.17s ease;
}

.btn-primary:hover {
    background: #4752c4;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #2b2d31;
}

::-webkit-scrollbar-thumb {
    background: #1a1b1e;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #141517;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.2;
}

/* Utilities */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.gap-2 {
    gap: 8px;
}

.gap-4 {
    gap: 16px;
}

.hidden {
    display: none !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: absolute;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .sidebar.open {
        transform: translateX(0);
    }
}
`,Yl=()=>{const p=document.createElement("style");p.id="critical-css",p.textContent=Kl,document.head.insertBefore(p,document.head.firstChild),console.log("‚úÖ Critical CSS inlined")},ql=p=>new Promise((s,l)=>{const b=document.createElement("link");b.rel="stylesheet",b.href=p,b.onload=()=>{console.log(`‚úÖ Lazy loaded CSS: ${p}`),s()},b.onerror=l,document.head.appendChild(b)}),Jl=()=>{const p=[],s=()=>{p.forEach(l=>{ql(l)})};"requestIdleCallback"in window?requestIdleCallback(s):setTimeout(s,1)},Zl=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ö° [Performance] Electron'da font preload atlandƒ±");return}console.log("‚ö° [Performance] Font preload atlandƒ± - system fonts kullanƒ±lƒ±yor")},Xl=()=>{if(typeof window<"u"&&(window.process?.versions?.electron||window.navigator?.userAgent?.includes("Electron")||window.location?.protocol==="file:")){console.log("‚ÑπÔ∏è Preload skipped: Electron detected");return}console.log("‚úÖ Key resources preloaded")},qs=()=>{const p=document.getElementById("critical-css");p&&setTimeout(()=>{p.remove(),console.log("üóëÔ∏è Critical CSS removed (full CSS loaded)")},1e3)},Ql=()=>{Yl(),Xl(),Zl(),Jl(),document.readyState==="complete"?qs():window.addEventListener("load",qs)},zr={serverSettings:()=>h(()=>import("./ServerSettingsModal-C0IIpl_b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url),userProfile:()=>h(()=>import("./UserProfileModal-DRxFrVTj.js"),__vite__mapDeps([11,1,2,3,4,5,6,9,10]),import.meta.url),imageModal:()=>h(()=>import("./ImageModal-CVsPsz4n.js"),__vite__mapDeps([12,1,2,3,4,5]),import.meta.url),gifPicker:()=>h(()=>import("./GifPicker-DtTP0DDo.js"),__vite__mapDeps([13,1,2,3,4,5]),import.meta.url),stickerPicker:()=>h(()=>import("./StickerPicker-DRqnCNqf.js"),__vite__mapDeps([14,1,2,3,4,5]),import.meta.url),soundboard:()=>h(()=>import("./SoundboardModal-BN0QYelb.js"),__vite__mapDeps([15,1,2,3,4,5,6]),import.meta.url),watchParty:()=>h(()=>import("./WatchPartyEnhanced-CnAZNXOc.js"),__vite__mapDeps([16,1,2,3,4,5,6]),import.meta.url),cinema:()=>h(()=>import("./CinemaModal-DM38TilE.js"),__vite__mapDeps([17,2,1,3,4,5,6]),import.meta.url),whiteboard:()=>h(()=>import("./WhiteboardModal-BZBHcLUw.js"),__vite__mapDeps([18,1,2,3,4,5,6]),import.meta.url),poll:()=>h(()=>import("./PollCreateModal-ohOyIatt.js"),__vite__mapDeps([19,1,2,3,4,5,6]),import.meta.url),codeSnippet:()=>h(()=>import("./CodeSnippetModal-DD4RODid.js"),__vite__mapDeps([20,1,2,3,4,5,6]),import.meta.url),messageTemplate:()=>h(()=>import("./MessageTemplateModal-1IcqHzsh.js"),__vite__mapDeps([21,1,2,3,4,5,6]),import.meta.url)},da=()=>{const p=[zr.userProfile,zr.imageModal];setTimeout(()=>{p.forEach(s=>s())},3e3)},zn=()=>{"requestIdleCallback"in window&&requestIdleCallback(()=>{zr.gifPicker(),zr.stickerPicker()})},Vn={default:{name:"Pawscord Dark",colors:{"--background-primary":"#313338","--background-secondary":"#2b2d31","--background-tertiary":"#1e1f22","--background-accent":"#404249","--text-primary":"#dbdee1","--text-secondary":"#949ba4","--text-muted":"#787f89","--text-link":"#00a8fc","--button-primary":"#5865f2","--button-secondary":"#4e5058","--border-primary":"#1f2023"}},midnight:{name:"Midnight AMOLED",colors:{"--background-primary":"#000000","--background-secondary":"#0a0a0a","--background-tertiary":"#111111","--background-accent":"#222222","--text-primary":"#ffffff","--text-secondary":"#b0b0b0","--text-muted":"#666666","--text-link":"#3ea6ff","--button-primary":"#3ea6ff","--button-secondary":"#333333","--border-primary":"#333333"}},dracula:{name:"Dracula",colors:{"--background-primary":"#282a36","--background-secondary":"#44475a","--background-tertiary":"#6272a4","--background-accent":"#44475a","--text-primary":"#f8f8f2","--text-secondary":"#bfbfbf","--text-muted":"#6272a4","--text-link":"#8be9fd","--button-primary":"#bd93f9","--button-secondary":"#44475a","--border-primary":"#44475a"}},ocean:{name:"Deep Ocean",colors:{"--background-primary":"#0f172a","--background-secondary":"#1e293b","--background-tertiary":"#334155","--background-accent":"#334155","--text-primary":"#e2e8f0","--text-secondary":"#94a3b8","--text-muted":"#64748b","--text-link":"#38bdf8","--button-primary":"#0ea5e9","--button-secondary":"#334155","--border-primary":"#1e293b"}},forest:{name:"Enchanted Forest",colors:{"--background-primary":"#1a2f1a","--background-secondary":"#243b24","--background-tertiary":"#2f4b2f","--background-accent":"#3a5a3a","--text-primary":"#e0ffe0","--text-secondary":"#a0cca0","--text-muted":"#608060","--text-link":"#4caf50","--button-primary":"#4caf50","--button-secondary":"#2f4b2f","--border-primary":"#2f4b2f"}},matrix:{name:"The Matrix",colors:{"--background-primary":"#0d0d0d","--background-secondary":"#121212","--background-tertiary":"#1a1a1a","--background-accent":"#003b00","--text-primary":"#00ff41","--text-secondary":"#008f11","--text-muted":"#003b00","--text-link":"#00ff41","--button-primary":"#008f11","--button-secondary":"#003b00","--border-primary":"#003b00"}},sunset:{name:"Sunset Vibes",colors:{"--background-primary":"#2d1b2e","--background-secondary":"#442740","--background-tertiary":"#5a3450","--background-accent":"#734361","--text-primary":"#ffccaa","--text-secondary":"#ff9e7d","--text-muted":"#b05963","--text-link":"#ffbd69","--button-primary":"#ff6b6b","--button-secondary":"#5a3450","--border-primary":"#5a3450"}}},ec=p=>{const s=Vn[p]||Vn.default,l=document.documentElement;Object.entries(s.colors).forEach(([b,x])=>{l.style.setProperty(b,x)}),localStorage.setItem("pawscord_theme",p)},tc=()=>{const p=localStorage.getItem("pawscord_theme");return p&&Vn[p]?(ec(p),p):"default"},_e=Vl((p,s)=>({messages:[],encryptionKeys:{},activeChat:{type:"welcome",id:"welcome",targetUser:null},unreadCounts:{},typingUsers:[],onlineUsers:[],voiceUsers:{},currentPermissions:{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1},setActiveChat:(l,b,x=null)=>{console.log("üîÑ [Store] setActiveChat called:",{type:l,id:b,targetUser:x}),console.log("üîÑ [Store] Current messages count:",s().messages.length),p({activeChat:{type:l,id:b,targetUser:x}});const C=l==="room"?`room-${b}`:`dm-${b}`;p(A=>{const I={...A.unreadCounts};return delete I[C],{unreadCounts:I}})},addMessage:l=>p(b=>!l||typeof l!="object"||!l.id?(console.warn("‚ö†Ô∏è [Store] Invalid message rejected:",l),b):l.temp_id&&b.messages.some(C=>C.temp_id===l.temp_id)?{messages:b.messages.map(C=>C.temp_id===l.temp_id?l:C)}:b.messages.some(x=>x.id===l.id)?b:{messages:[...b.messages,l]}),updateMessage:(l,b)=>p(x=>({messages:x.messages.map(C=>C.id===l?{...C,...b}:C)})),setMessages:l=>p(b=>{const x=typeof l=="function"?l(b.messages):l;return{messages:Array.isArray(x)?x.filter(A=>A&&typeof A=="object"&&A.id):[]}}),prependMessages:l=>p(b=>({messages:[...l,...b.messages]})),incrementUnread:l=>p(b=>({unreadCounts:{...b.unreadCounts,[l]:(b.unreadCounts[l]||0)+1}})),setOnlineUsers:l=>p({onlineUsers:l}),setTypingUser:(l,b)=>p(x=>b?{typingUsers:x.typingUsers.includes(l)?x.typingUsers:[...x.typingUsers,l]}:{typingUsers:x.typingUsers.filter(C=>C!==l)}),setVoiceUsers:l=>p({voiceUsers:l}),setEncryptionKey:(l,b)=>p(x=>({encryptionKeys:{...x.encryptionKeys,[l]:b}})),setPermissions:l=>p({currentPermissions:l||{is_owner:!1,can_manage_channels:!1,can_delete_messages:!1,can_manage_roles:!1,can_ban_members:!1}})})),Vr="ENC::",oc=(p,s)=>{if(!p||!s)return p;try{const l=$n.AES.encrypt(p,s).toString();return Vr+l}catch(l){return console.error("≈ûifreleme hatasƒ±:",l),p}},Np=(p,s)=>{if(!p||!p.startsWith(Vr)||!s)return p;try{const l=p.replace(Vr,""),x=$n.AES.decrypt(l,s).toString($n.enc.Utf8);return x||"üîí ≈ûifreli Mesaj (Anahtar Yanlƒ±≈ü)"}catch(l){return console.error("≈ûifre √ß√∂zme hatasƒ±:",l),"üîí √á√∂z√ºlemedi"}},Fp=p=>p&&typeof p=="string"&&p.startsWith(Vr),Ke={mobile:768,tablet:1024,desktop:1920,ultrawide:2560},rc=()=>{const[p,s]=o.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080});o.useEffect(()=>{if(typeof window>"u")return;let x;const C=()=>{clearTimeout(x),x=setTimeout(()=>{s({width:window.innerWidth,height:window.innerHeight})},150)};return C(),window.addEventListener("resize",C),window.addEventListener("orientationchange",C),()=>{clearTimeout(x),window.removeEventListener("resize",C),window.removeEventListener("orientationchange",C)}},[]);const{width:l,height:b}=p;return{isMobile:l<=Ke.mobile,isTablet:l>Ke.mobile&&l<=Ke.tablet,isDesktop:l>Ke.tablet&&l<=Ke.desktop,isUltrawide:l>Ke.desktop,width:l,height:b,orientation:b>l?"portrait":"landscape",isSmallScreen:l<=Ke.mobile,isMediumScreen:l>Ke.mobile&&l<=Ke.tablet,isLargeScreen:l>Ke.tablet,isTouchDevice:typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0),breakpoints:Ke}},nc=(p,s,l)=>o.useMemo(()=>{if(!p||!Array.isArray(p))return[];let x=p;if(s&&typeof s=="string"&&s.trim()){const C=s.toLowerCase();x=x.filter(A=>A.content?.toLowerCase().includes(C)||A.user?.username?.toLowerCase().includes(C))}return x.sort((C,A)=>{const I=new Date(C.created_at||C.timestamp),R=new Date(A.created_at||A.timestamp);return I-R})},[p,s]),sc=p=>o.useMemo(()=>!p||!Array.isArray(p)?[]:p.filter(s=>s.is_online||s.online),[p]);typeof window<"u"&&window.Capacitor?.isNativePlatform?.();typeof window<"u"&&window.location?.hostname?.includes("pawscord.com");const Gn=()=>"https://api.pawscord.com".replace(/\/api\/?$/,""),ac=()=>`${Gn()}/api`,ic=()=>Gn().startsWith("https")?"wss":"ws",lc=()=>Gn().replace(/^https?:\/\//,""),cc={API_BASE_URL:ac(),WS_PROTOCOL:ic(),API_HOSTNAME:lc()},dc=cc.API_BASE_URL,uc=()=>{let p=sessionStorage.getItem("analytics_session_id");return p||(p=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("analytics_session_id",p)),p},pc=()=>{const p=sa();o.useEffect(()=>{(async()=>{try{const l=uc();await fetch(`${dc}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:p.pathname,session_id:l,referrer:document.referrer,timestamp:new Date().toISOString()})}),console.log("üìä Page tracked:",p.pathname)}catch(l){console.error("Analytics tracking error:",l)}})()},[p.pathname])},fc=(p,s)=>{const l=o.useRef(null);return o.useCallback((...b)=>{l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{p(...b)},s)},[p,s])},mc=(p,s)=>{const l=o.useRef(Date.now());return o.useCallback((...b)=>{const x=Date.now();x-l.current>=s&&(p(...b),l.current=x)},[p,s])},Wp=p=>{const s=o.useRef(0),l=o.useRef(0);o.useEffect(()=>{const b=performance.now();return s.current+=1,()=>{const C=performance.now()-b;l.current+=C,s.current%10===0&&console.log(`üéØ ${p} Performance Stats:`,`
  Total Renders: ${s.current}`,`
  Average Time: ${(l.current/s.current).toFixed(2)}ms`,`
  Last Render: ${C.toFixed(2)}ms`)}})},gc="pawscord.com",hc="443",Hn=typeof window>"u"?!1:!!(typeof window.require=="function"||typeof process<"u"&&process.versions&&process.versions.electron||navigator.userAgent.toLowerCase().includes("electron")||window.location.protocol==="file:"),ua=Un.isNativePlatform(),Ht=ua||Hn||!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("192.168.")?"https://api.pawscord.com":`http://${gc}:${hc}`,yc=`${Ht}/api`;ua||Hn||window.location.hostname.includes("localhost");const Br=Ht.startsWith("https")?"wss":"ws",Ur=Ht.replace(/^https?:\/\//,""),pa=o.createContext(null),xc=Ht,Sc=({children:p})=>{const s=localStorage.getItem("access_token"),l=(()=>{if(!s)return!1;try{return ho(s).exp>Date.now()/1e3-300}catch{return!1}})(),[b,x]=o.useState(l?{username:localStorage.getItem("chat_username")||""}:null),[C,A]=o.useState(s),[I,R]=o.useState(l),[V,K]=o.useState(!1),G=o.useRef(null),Q=o.useCallback(async()=>{const W=localStorage.getItem("refresh_token");if(!W)return console.warn("‚ö†Ô∏è [Auth] No refresh token available"),U(),!1;try{console.log("üîÑ [Auth] Refreshing access token...");const F=await fetch(`${xc}/api/auth/token/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:W})});if(F.ok){const Y=await F.json();localStorage.setItem("access_token",Y.access),Y.refresh&&localStorage.setItem("refresh_token",Y.refresh);const me=ho(Y.access);return A(Y.access),x({username:me.username}),R(!0),console.log("‚úÖ [Auth] Token refreshed successfully"),se(Y.access),!0}else return console.error("‚ùå [Auth] Token refresh failed:",F.status),U(),!1}catch(F){return console.error("‚ùå [Auth] Token refresh error:",F),U(),!1}},[]),se=o.useCallback(W=>{G.current&&clearTimeout(G.current);try{const F=ho(W),Y=Date.now()/1e3,me=F.exp-Y,le=Math.max((me-300)*1e3,6e4);console.log(`‚è∞ [Auth] Token will refresh in ${Math.round(le/1e3/60)} minutes`),G.current=setTimeout(()=>{Q()},le)}catch(F){console.error("‚ùå [Auth] Failed to schedule token refresh:",F)}},[Q]);o.useEffect(()=>{const W=localStorage.getItem("access_token");if(W)try{const F=ho(W),Y=Date.now()/1e3,me=300,le=F.exp>Y-me;console.log("üîê [Auth] Token check:",{exp:F.exp,currentTime:Y,gracePeriod:me,isValid:le,username:F.username}),le?(A(W),x({username:F.username}),R(!0),localStorage.setItem("chat_username",F.username),se(W),console.log("‚úÖ [Auth] User authenticated:",F.username)):(console.warn("‚ö†Ô∏è [Auth] Token expired, attempting refresh..."),Q())}catch(F){console.error("‚ùå [Auth] Invalid token:",F),U()}else console.log("‚ÑπÔ∏è [Auth] No token found");return()=>{G.current&&clearTimeout(G.current)}},[se,Q]);const J=(W,F)=>{console.log("üîì [Auth] Login called");try{localStorage.setItem("access_token",W),localStorage.setItem("refresh_token",F);const Y=ho(W);localStorage.setItem("chat_username",Y.username),console.log("‚úÖ [Auth] Login successful, user:",Y.username),A(W),x({username:Y.username}),R(!0),se(W)}catch(Y){console.error("‚ùå [Auth] Login failed:",Y),U()}},U=o.useCallback(()=>{G.current&&clearTimeout(G.current),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("chat_username"),A(null),x(null),R(!1)},[]);return e.jsx(pa.Provider,{value:{user:b,token:C,isAuthenticated:I,login:J,logout:U,isLoading:V,refreshAccessToken:Q},children:p})},Fo=()=>o.useContext(pa),je={log:(...p)=>{},warn:(...p)=>{},error:(...p)=>{console.error(...p)},debug:(...p)=>{},voice:(...p)=>{},webrtc:(...p)=>{},signal:(...p)=>{},audio:(...p)=>{}};class bc{constructor(){this.audioContext=null,this.masterGain=null,this.spatialNodes={},this.listenerPosition={x:0,y:0,z:0},this.initialized=!1}async initialize(){if(!this.initialized)try{const s=window.AudioContext||window.webkitAudioContext;this.audioContext=new s,this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.audioContext.destination),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.setupListener(),this.initialized=!0,console.log("üéß Spatial Audio Engine initialized")}catch(s){throw console.error("Failed to initialize spatial audio:",s),s}}setupListener(){const s=this.audioContext.listener;s.positionX?(s.positionX.value=this.listenerPosition.x,s.positionY.value=this.listenerPosition.y,s.positionZ.value=this.listenerPosition.z):s.setPosition(this.listenerPosition.x,this.listenerPosition.y,this.listenerPosition.z),s.forwardX?(s.forwardX.value=0,s.forwardY.value=0,s.forwardZ.value=-1,s.upX.value=0,s.upY.value=1,s.upZ.value=0):s.setOrientation(0,0,-1,0,1,0)}addUser(s,l,b={x:0,y:0,z:-1}){if(!this.initialized)return console.warn("Spatial audio not initialized"),null;this.spatialNodes[s]&&this.removeUser(s);try{const x=this.audioContext.createMediaStreamSource(l),C=this.audioContext.createPanner();C.panningModel="HRTF",C.distanceModel="inverse",C.refDistance=1,C.maxDistance=1e4,C.rolloffFactor=1.5,C.coneInnerAngle=360,C.coneOuterAngle=360,C.coneOuterGain=0,this.setUserPosition(s,b,C);const A=this.audioContext.createGain();A.gain.value=1;const I=this.audioContext.createAnalyser();return I.fftSize=256,I.smoothingTimeConstant=.8,x.connect(I),I.connect(C),C.connect(A),A.connect(this.masterGain),this.spatialNodes[s]={source:x,panner:C,gain:A,analyser:I,position:b,audioElement:null},console.log(`üéß Added spatial audio for ${s} at position`,b),this.spatialNodes[s]}catch(x){return console.error(`Failed to add spatial audio for ${s}:`,x),null}}setUserPosition(s,l,b=null){const x=b||this.spatialNodes[s]?.panner;x&&(x.positionX?(x.positionX.setValueAtTime(l.x,this.audioContext.currentTime),x.positionY.setValueAtTime(l.y,this.audioContext.currentTime),x.positionZ.setValueAtTime(l.z,this.audioContext.currentTime)):x.setPosition(l.x,l.y,l.z),this.spatialNodes[s]&&(this.spatialNodes[s].position=l))}setUserVolume(s,l){const b=this.spatialNodes[s];if(!b)return;const x=Math.max(0,Math.min(1,l));b.gain.gain.setValueAtTime(x,this.audioContext.currentTime)}getVoiceActivity(s){const l=this.spatialNodes[s];if(!l)return 0;const b=l.analyser,x=new Uint8Array(b.frequencyBinCount);b.getByteFrequencyData(x);const A=x.reduce((I,R)=>I+R,0)/x.length;return Math.round(A/255*100)}removeUser(s){const l=this.spatialNodes[s];if(l)try{l.source.disconnect(),l.analyser.disconnect(),l.panner.disconnect(),l.gain.disconnect(),delete this.spatialNodes[s],console.log(`üéß Removed spatial audio for ${s}`)}catch(b){console.error(`Error removing spatial audio for ${s}:`,b)}}updateListenerPosition(s){this.listenerPosition=s,this.setupListener()}setMasterVolume(s){if(!this.masterGain)return;const l=Math.max(0,Math.min(1,s));this.masterGain.gain.setValueAtTime(l,this.audioContext.currentTime)}setUserMuted(s,l){this.setUserVolume(s,l?0:1)}destroy(){Object.keys(this.spatialNodes).forEach(s=>{this.removeUser(s)}),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.initialized=!1,console.log("üéß Spatial Audio Engine destroyed")}getUserDistance(s){const l=this.spatialNodes[s];if(!l)return 1/0;const b=l.position,x=this.listenerPosition;return Math.sqrt(Math.pow(b.x-x.x,2)+Math.pow(b.y-x.y,2)+Math.pow(b.z-x.z,2))}arrangeUsersInCircle(s,l=3){const b={},x=2*Math.PI/s.length;return s.forEach((C,A)=>{const I=x*A,R={x:Math.cos(I)*l,y:0,z:Math.sin(I)*l};b[C]=R,this.setUserPosition(C,R)}),b}}const Bo=new bc,fa=o.createContext(null),Gt=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.services.mozilla.com:3478"},{urls:"stun:stun.stunprotocol.org:3478"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}];let Bn={iceServers:Gt,iceCandidatePoolSize:10,iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};const Or=p=>{Bn={...Bn,iceServers:p}};console.log("[VoiceContext] üéØ isElectron:",Hn,"API_URL:",Ht,"WS_PROTOCOL:",Br,"API_HOST:",Ur);const wc=({children:p})=>{const{user:s,token:l}=Fo(),b=s?.username,[x,C]=o.useState(!1),[A,I]=o.useState(!1),[R,V]=o.useState(null),[K,G]=o.useState(!1),[Q,se]=o.useState(!1),[J,U]=o.useState(!1),[W,F]=o.useState(!1),[Y,me]=o.useState(!1),[le,Z]=o.useState(!1),[ae,fe]=o.useState(0),[ge,Kt]=o.useState(null),[Yt,Go]=o.useState(50),[ce,qt]=o.useState(null),[mt,nt]=o.useState(null),[gt,Ue]=o.useState(null),[ke,st]=o.useState({}),[Ho,a]=o.useState([]),[Fr,Jt]=o.useState(null),[Wr,Ko]=o.useState({isActive:!1,url:"https://www.youtube.com/watch?v=jfKfPfyJRdk",playing:!1,time:0,lastSyncAction:null,timestamp:0}),[ie,Te]=o.useState({gameType:"rps",moves:{},result:null,players:[],currentTurn:null}),[Yo,qo]=o.useState({}),[Gr,Hr]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_noise_gate"))||-50}catch{return-50}}),[Kr,Yr]=o.useState(()=>{try{return localStorage.getItem("pawscord_noise_gate_enabled")!=="false"}catch{return!0}}),[Jo,Zo]=o.useState({local:new Uint8Array(128),remote:{}}),[ht,qr]=o.useState(()=>{try{return localStorage.getItem("pawscord_visualizer")==="true"}catch{return!1}}),[Zt,Jr]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("pawscord_user_volumes"))||{}}catch{return{}}}),[Xo,Kn]=o.useState(new Set),[at,Qo]=o.useState(()=>{try{return localStorage.getItem("pawscord_spatial_audio")==="true"}catch{return!1}}),[At,Zr]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_vad_sensitivity"))||45}catch{return 45}}),[It,Xr]=o.useState(()=>{try{const n=localStorage.getItem("pawscord_noise_suppression");return n===null?!0:n==="true"}catch{return!0}}),[er,Qr]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"medium"}catch{return"medium"}}),[de,P]=o.useState(()=>{try{return localStorage.getItem("pawscord_screen_quality")||"1080p"}catch{return"1080p"}}),[Xt,xo]=o.useState(()=>{try{return parseInt(localStorage.getItem("pawscord_screen_fps"))||30}catch{return 30}}),[So,en]=o.useState(()=>{try{return localStorage.getItem("pawscord_system_audio")!=="false"}catch{return!1}}),[ze,Qt]=o.useState(()=>{try{return localStorage.getItem("pawscord_ptt_mode")==="true"}catch{return!1}}),[q,tr]=o.useState(()=>{try{return localStorage.getItem("pawscord_ptt_key")||"Space"}catch{return"Space"}}),[or,Pt]=o.useState(!1),[Ot,bo]=o.useState(Gt),[rr,Le]=o.useState(!1),[nr,it]=o.useState(0),[wo,yt]=o.useState(1e3),qe=o.useRef(null),eo=o.useRef(null);o.useRef(null);const vo=o.useCallback(async()=>{if(!l){console.log("üßä [RTC] No token, using STUN only"),bo(Gt),Or(Gt);return}try{const n=await fetch(`${Ht}/api/voice/turn-credentials/`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!n.ok)throw n.status===401||n.status===403?console.warn("üßä [RTC] Auth failed, using STUN only"):console.warn(`üßä [RTC] TURN fetch failed (${n.status}), using STUN only`),new Error(`TURN fetch failed ${n.status}`);const d=await n.json(),u=[...Gt,...d?.iceServers||[]];bo(u),Or(u),console.log("üßä [RTC] ICE servers updated with TURN credentials:",u.length,"servers")}catch(n){console.warn("üßä [RTC] Using STUN-only mode:",n.message),bo(Gt),Or(Gt)}},[l]);o.useEffect(()=>{vo()},[vo]);const $=o.useRef(null),te=o.useRef({}),lt=o.useRef(null),Se=o.useRef(null),M=o.useRef(null),be=o.useRef(null),ee=o.useRef(null),ct=o.useRef([]),Je=o.useRef(null),xt=o.useRef(null),De=o.useRef(!1),Ze=o.useRef(!1),Ne=o.useRef(null),Lt=o.useRef(null),_o=o.useRef(null),we=o.useRef(null);o.useEffect(()=>{localStorage.setItem("pawscord_user_volumes",JSON.stringify(Zt))},[Zt]);const ko=o.useCallback((n,d)=>{Jr(u=>({...u,[n]:Math.max(0,Math.min(100,d))}))},[]);o.useEffect(()=>{M.current=ce},[ce]),o.useEffect(()=>{be.current=mt},[mt]),o.useEffect(()=>{ee.current=gt},[gt]),o.useEffect(()=>{if(!ce||!x||K){me(!1);return}if(!Se.current){const N=window.AudioContext||window.webkitAudioContext;Se.current=new N,console.log("üéµ [Performance] Global AudioContext created (reused for all users)")}const n=Se.current,d=n.createAnalyser();d.fftSize=2048,d.smoothingTimeConstant=.85;const u=d.frequencyBinCount,w=new Uint8Array(u),k=n.createMediaStreamSource(ce);k.connect(d);let S=null;const g=At,f=150;let j=null;const L=()=>{d.getByteFrequencyData(w);const N=w.slice(10,100);N.reduce((ue,Me)=>ue+Me,0)/N.length>g&&(me(!0),S&&clearTimeout(S),S=setTimeout(()=>me(!1),f)),x&&!K&&(j=requestAnimationFrame(L))};return L(),()=>{S&&clearTimeout(S),j&&cancelAnimationFrame(j),k.disconnect()}},[ce,x,K,At]);const Fe=o.useCallback(()=>{if(!lt.current){const n=window.AudioContext||window.webkitAudioContext;lt.current=new n}lt.current.state==="suspended"&&lt.current.resume()},[]),tn=o.useCallback(async()=>{const n=!at;if(n)try{await Bo.initialize(),Object.keys(ke).forEach((d,u)=>{const w=ke[d],k=d.replace("_camera","").replace("_screen","");if(!d.includes("_camera")&&!d.includes("_screen")){const S=u/Object.keys(ke).length*2*Math.PI,g={x:Math.cos(S)*3,y:0,z:Math.sin(S)*3};Bo.addUser(k,w,g),console.log(`üéß [Spatial] Added ${k} at angle ${(S*180/Math.PI).toFixed(0)}¬∞`)}}),console.log("üéß [Spatial Audio] ENABLED - 3D audio active!")}catch(d){console.error("Failed to enable spatial audio:",d),D.warning("Spatial Audio ba≈ülatƒ±lamadƒ±. Tarayƒ±cƒ±nƒ±z desteklemiyor olabilir.");return}else Bo.destroy(),console.log("üéß [Spatial Audio] DISABLED - Normal stereo audio");Qo(n),localStorage.setItem("pawscord_spatial_audio",n.toString())},[at,ke]),sr=o.useCallback(n=>{const d=Math.max(20,Math.min(80,n));Zr(d),localStorage.setItem("pawscord_vad_sensitivity",d.toString()),console.log(`üéöÔ∏è [VAD] Sensitivity updated: ${d}`)},[]),to=o.useCallback(async()=>{const n=!It;if(Xr(n),localStorage.setItem("pawscord_noise_suppression",n.toString()),ce){const d=ce.getAudioTracks()[0];if(d&&d.applyConstraints)try{await d.applyConstraints({noiseSuppression:n,echoCancellation:!0,autoGainControl:!0}),console.log(`üéõÔ∏è [Noise Suppression] ${n?"ENABLED":"DISABLED"}`)}catch(u){console.warn("[Noise] Failed to apply, trying fallback getUserMedia:",u);try{const k=(await navigator.mediaDevices.getUserMedia({audio:{noiseSuppression:n,echoCancellation:!0,autoGainControl:!0,googHighpassFilter:!0,googNoiseSuppression:n,googNoiseSuppression2:n,googEchoCancellation:!0,googAutoGainControl:!0,googTypingNoiseDetection:!0,sampleRate:{ideal:48e3},latency:{ideal:.01},channelCount:{ideal:1}}})).getAudioTracks()[0],S=new MediaStream([k]);qt(S),M.current=S,console.log("[Noise] Enhanced fallback stream acquired")}catch(w){console.error("[Noise] Fallback failed:",w)}}}},[It,ce]),ar=o.useCallback(n=>{const u=["low","medium","high","aggressive"].includes(n)?n:"high";Qr(u);try{const w=JSON.parse(localStorage.getItem("voice_settings")||"{}");w.audio={...w.audio,noiseSuppressionLevel:u},localStorage.setItem("voice_settings",JSON.stringify(w))}catch(w){console.error("[Noise Level] Storage error:",w)}console.log(`üéõÔ∏è [Noise Level] Updated to: ${u}`)},[]),on=o.useCallback(n=>{en(n),localStorage.setItem("pawscord_system_audio",n.toString()),console.log(`üîä [System Audio] ${n?"ENABLED":"DISABLED"}`)},[]),ir=o.useCallback(()=>{const n=!ze;Qt(n),localStorage.setItem("pawscord_ptt_mode",n.toString()),n?(console.log("üéôÔ∏è [PTT] Mode enabled, VAD disabled"),M.current&&M.current.getAudioTracks().forEach(d=>{d.enabled=!1}),G(!0)):(console.log("üéôÔ∏è [PTT] Mode disabled, VAD enabled"),M.current&&M.current.getAudioTracks().forEach(d=>{d.enabled=!0}),G(!1))},[ze]),rn=o.useCallback(n=>{tr(n),localStorage.setItem("pawscord_ptt_key",n),console.log(`‚å®Ô∏è [PTT] Key updated to: ${n}`)},[]);o.useEffect(()=>{if(!ze||!x)return;const n=u=>{const w=u.target;w.tagName==="INPUT"||w.tagName==="TEXTAREA"||u.code===q&&!u.repeat&&(Pt(!0),M.current&&M.current.getAudioTracks().forEach(k=>{k.enabled=!0}),console.log("üéôÔ∏è [PTT] Key pressed, mic ON"))},d=u=>{u.code===q&&(Pt(!1),M.current&&M.current.getAudioTracks().forEach(w=>{w.enabled=!1}),console.log("üéôÔ∏è [PTT] Key released, mic OFF"))};return window.addEventListener("keydown",n),window.addEventListener("keyup",d),()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",d)}},[ze,x,q]);const We=o.useCallback(n=>{P(n),localStorage.setItem("pawscord_screen_quality",n),console.log(`üì∫ [Screen Quality] Updated to: ${n}`)},[]),nn=o.useCallback(n=>{const d=parseInt(n);xo(d),localStorage.setItem("pawscord_screen_fps",d.toString()),console.log(`üé¨ [Screen FPS] Updated to: ${d}`)},[]);o.useEffect(()=>{at&&Object.keys(ke).forEach((n,d)=>{const u=ke[n],w=n.replace("_camera","").replace("_screen","");if(!n.includes("_camera")&&!n.includes("_screen")&&!Bo.spatialNodes[w]){const k=d/Object.keys(ke).length*2*Math.PI,S={x:Math.cos(k)*3,y:0,z:Math.sin(k)*3};Bo.addUser(w,u,S),console.log(`üéß [Spatial] Auto-added ${w}`)}})},[ke,at]),o.useCallback(async n=>{try{const d=n.getAudioTracks();if(d.length===0)return n;const u=d[0],w={echoCancellation:{exact:!0},noiseSuppression:{exact:!0},autoGainControl:{exact:!0},googEchoCancellation:{exact:!0},googAutoGainControl:{exact:!0},googNoiseSuppression:{exact:!0},googHighpassFilter:{exact:!0},googTypingNoiseDetection:{exact:!0},googAudioMirroring:!1,googAutoGainControl2:{exact:!0},echoCancellationType:"system"};if(u.applyConstraints)try{await u.applyConstraints(w),je.audio("üéØ ADVANCED noise suppression enabled")}catch{await u.applyConstraints({echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),je.audio("‚úÖ Basic noise suppression enabled (fallback)")}return n}catch{return n}},[]);const Co=o.useCallback(n=>{try{const u=JSON.parse(localStorage.getItem("voice_settings")||"{}").audio?.noiseSuppressionLevel||"high",w={low:{gateThreshold:-70,compressorThreshold:-15,compressorRatio:2,highPassFreq:50,lowPassFreq:14e3,gateRelease:.3,speechThreshold:20},medium:{gateThreshold:-60,compressorThreshold:-20,compressorRatio:3,highPassFreq:80,lowPassFreq:12e3,gateRelease:.25,speechThreshold:25},high:{gateThreshold:-50,compressorThreshold:-25,compressorRatio:4,highPassFreq:100,lowPassFreq:1e4,gateRelease:.2,speechThreshold:30},aggressive:{gateThreshold:-45,compressorThreshold:-30,compressorRatio:6,highPassFreq:120,lowPassFreq:8e3,gateRelease:.15,speechThreshold:35}},k=w[u]||w.high;if(console.log(`üîä [Audio] Noise suppression level: ${u}`,k),!Se.current){const Ut=window.AudioContext||window.webkitAudioContext;Se.current=new Ut({sampleRate:48e3,latencyHint:"interactive"}),console.log("üéµ [Performance] Global AudioContext created (48kHz, interactive mode)")}const S=Se.current;S.state==="suspended"&&S.resume().then(()=>{console.log("üéµ [Audio] AudioContext resumed from suspended state")});const g=S.createMediaStreamSource(n),f=S.createGain();let j=!0;const L=k.gateThreshold,N=.005,ne=k.gateRelease,ue=S.createDynamicsCompressor();ue.threshold.value=k.compressorThreshold,ue.knee.value=30,ue.ratio.value=Math.min(k.compressorRatio,4),ue.attack.value=.003,ue.release.value=.15;const Me=S.createBiquadFilter();Me.type="highpass",Me.frequency.value=k.highPassFreq,Me.Q.value=.707;const wt=S.createBiquadFilter();wt.type="lowpass",wt.frequency.value=k.lowPassFreq,wt.Q.value=.707;const Ge=S.createBiquadFilter();Ge.type="notch",Ge.frequency.value=50,Ge.Q.value=10;const Bt=S.createBiquadFilter();Bt.type="peaking",Bt.frequency.value=6e3,Bt.Q.value=1,Bt.gain.value=-3;const vt=S.createAnalyser();vt.fftSize=2048,vt.smoothingTimeConstant=.85;const _t=new Uint8Array(vt.frequencyBinCount);let pr=new Float32Array(vt.frequencyBinCount),fr=!0,Ao=0;const qn=()=>{if(vt.getByteFrequencyData(_t),_t.reduce((tt,Po)=>tt+Po)/_t.length<20){if(Ao++,Ao>10)for(let tt=0;tt<_t.length;tt++)pr[tt]=Math.max(pr[tt],_t[tt])}else Ao=0;fr&&Ao>50&&(fr=!1,console.log("üéØ [Audio] Noise profile learned"))},fn=k.speechThreshold||25,mn=setInterval(()=>{vt.getByteFrequencyData(_t);const Ut=_t.slice(8,120),Po=Ut.reduce((gn,hn)=>gn+hn)/Ut.length-(pr[50]||0),mr=S.currentTime;Po>fn?j||(f.gain.setTargetAtTime(1,mr,N),j=!0):j&&(f.gain.setTargetAtTime(0,mr,ne),j=!1),(fr||Math.random()<.01)&&qn()},30);g.connect(Me),Me.connect(Ge),Ge.connect(wt),wt.connect(Bt),Bt.connect(ue),ue.connect(f),f.connect(vt);const Io=S.createMediaStreamDestination();return f.connect(Io),Io.stream.addEventListener("inactive",()=>{clearInterval(mn),console.log("üéöÔ∏è [Audio] Filter chain cleaned up")}),console.log("üéöÔ∏è [Audio] Professional filters applied: Notch(50Hz) + De-Esser + Compressor + Noise Gate"),Io.stream}catch(d){return console.error("‚ùå [Audio] Could not apply professional filters:",d),n}},[]),Ee=o.useCallback(n=>{$.current?.readyState===WebSocket.OPEN?(je.signal(`Sending ${n.type} to ${n.receiver_username||"BROADCAST"}`),$.current.send(JSON.stringify({...n,sender_username:b}))):je.warn("[Signal] WS not ready, cannot send:",n.type)},[b]),Dt=o.useCallback((n,d)=>{try{const w=n.getSenders().find(f=>f.track?.kind==="video");if(!w){console.log("[Bandwidth] No video sender found, skipping adjustment");return}const k=w.getParameters();(!k.encodings||k.encodings.length===0)&&(k.encodings=[{}]);const S={low:{maxBitrate:3e5,maxFramerate:15},medium:{maxBitrate:8e5,maxFramerate:24},high:{maxBitrate:25e5,maxFramerate:30}},g=S[d]||S.medium;k.encodings[0].maxBitrate=g.maxBitrate,k.encodings[0].maxFramerate=g.maxFramerate,w.setParameters(k).then(()=>{console.log(`‚úÖ [Bandwidth] Video quality set to ${d.toUpperCase()} (${g.maxBitrate/1e3}kbps, ${g.maxFramerate}fps)`)}).catch(f=>{console.warn("[Bandwidth] Failed to set parameters:",f)})}catch(u){console.warn("[Bandwidth] Error adjusting bandwidth:",u)}},[]),Mt=o.useCallback((n,d)=>{const{track:u}=d;je.webrtc(`Track Received from ${n}:`,u.kind,u.id,"label:",u.label,"hint:",u.contentHint);const w=(u.label||"").toLowerCase(),k=w.includes("screen")||w.includes("window")||w.includes("monitor")||w.includes("display")||w.includes("tab")||u.contentHint==="detail",S=u.kind==="video"&&k?`${n}_screen`:u.kind==="video"?`${n}_camera`:n;if(console.log(`üìπ [WebRTC] Detected ${k?"SCREEN":"CAMERA"} track from ${n}, key: ${S}`),st(g=>{const f=g[S];if(f){if(!f.getTracks().some(L=>L.id===u.id)){f.addTrack(u);const L=new MediaStream(f.getTracks());return console.log(`[WebRTC] Added track to existing stream: ${S}`),{...g,[S]:L}}return g}const j=new MediaStream([u]);return console.log(`[WebRTC] Created new stream: ${S}`),{...g,[S]:j}}),u.kind==="audio"){console.log(`[WebRTC] Audio track received from ${n}`),Fe();try{const g=document.createElement("audio");g.id=`remote-audio-${n}`,g.srcObject=new MediaStream([u]),g.autoplay=!0,g.playsInline=!0;const f=document.getElementById(`remote-audio-${n}`);f&&f.remove(),g.style.display="none",document.body.appendChild(g),g.play().then(()=>{console.log(`üîä [Audio] Playing remote audio from ${n}`)}).catch(j=>{console.warn(`[Audio] Autoplay blocked for ${n}, waiting for interaction:`,j.message);const L=()=>{g.play().catch(()=>{}),document.removeEventListener("click",L)};document.addEventListener("click",L,{once:!0})}),console.log(`‚úÖ [Audio] Created audio element for ${n}`)}catch(g){console.error(`[Audio] Failed to create audio element for ${n}:`,g)}}else u.kind==="video"&&console.log(`[WebRTC] Video track (${k?"screen":"camera"}) received from ${n}`)},[Fe]),Re=o.useRef({}),$t=o.useCallback((n,d=!1)=>{if(te.current[n])return te.current[n];const u=new RTCPeerConnection(Bn);te.current[n]=u;try{u.getTransceivers().forEach(k=>{if(k.sender&&k.sender.track?.kind==="audio"){const S=RTCRtpSender.getCapabilities("audio")?.codecs||[],g=S.filter(L=>L.mimeType.toLowerCase().includes("opus")),f=S.filter(L=>!L.mimeType.toLowerCase().includes("opus")),j=[...g,...f];k.setCodecPreferences&&j.length>0&&(k.setCodecPreferences(j),console.log("üéµ [Codec] Opus prioritized for audio"))}})}catch(w){console.warn("[Codec] setCodecPreferences not supported:",w.message)}return typeof window<"u"&&(window.__pawscord_peer_connections__=te.current),u.onicecandidate=w=>{w.candidate&&Ee({type:"candidate",candidate:w.candidate,receiver_username:n})},u.ontrack=w=>Mt(n,w),M.current&&M.current.getTracks().forEach(w=>{je.webrtc(`Adding local audio track to PC for ${n}:`,w.kind),u.addTrack(w,M.current)}),u.oniceconnectionstatechange=()=>{console.log(`[WebRTC] ICE State (${n}):`,u.iceConnectionState),u.iceConnectionState==="failed"?(console.warn(`[WebRTC] ICE failed with ${n}, attempting restart...`),Le(!0),vo().finally(()=>{u.restartIce(),setTimeout(()=>Le(!1),1500)})):u.iceConnectionState==="disconnected"?(console.warn(`[WebRTC] ICE disconnected from ${n}, waiting for reconnection...`),Le(!0),setTimeout(()=>{(u.iceConnectionState==="disconnected"||u.iceConnectionState==="failed")&&(console.error(`[WebRTC] ICE reconnection timeout for ${n}, cleaning up...`),st(w=>{const k={...w};return delete k[n],k}),te.current[n]&&(te.current[n].close(),delete te.current[n])),Le(!1)},15e3)):u.iceConnectionState==="closed"?(console.log(`[WebRTC] ICE closed for ${n}, cleaning up...`),st(w=>{const k={...w};return delete k[n],k}),te.current[n]&&delete te.current[n],Le(!1)):u.iceConnectionState==="connected"?(console.log(`‚úÖ [WebRTC] ICE connected with ${n}`),Le(!1),setTimeout(async()=>{try{(await u.getStats()).forEach(k=>{if(k.type==="candidate-pair"&&k.state==="succeeded"){const S=k.currentRoundTripTime*1e3;console.log(`üìä [Bandwidth] ${n} RTT: ${S.toFixed(0)}ms`),S>500?(console.warn(`‚ö†Ô∏è [Bandwidth] High latency detected (${S.toFixed(0)}ms), reducing video quality to LOW`),Dt(u,"low")):S>300?(console.warn(`‚ö†Ô∏è [Bandwidth] Medium latency detected (${S.toFixed(0)}ms), reducing video quality to MEDIUM`),Dt(u,"medium")):(console.log(`‚úÖ [Bandwidth] Good connection (${S.toFixed(0)}ms), using HIGH quality`),Dt(u,"high"))}})}catch(w){console.warn("[Bandwidth] Failed to get stats:",w)}},2e3)):u.iceConnectionState==="checking"&&console.log(`üîç [WebRTC] ICE checking with ${n}`)},u},[Ee,Mt]),St=o.useCallback(async n=>{if(n.type==="kicked"){console.warn("üî¥ [Voice] Kicked from channel:",n.reason,n.message),D.warning(`Sesli Kanaldan √áƒ±karƒ±ldƒ±nƒ±z

Neden: ${n.message}`,5e3),Xe();return}if(n.type==="video_ended"){const g=n.from||n.username,f=n.streamType||"camera",j=`${g}_${f}`;console.log(`üìπ [Video] ${g} ended ${f} stream`),st(L=>{const N={...L};return N[j]&&(N[j].getTracks().forEach(ne=>ne.stop()),delete N[j],console.log(`üìπ [Video] Cleaned up ${j} stream`)),N});return}if(n.type==="voice_reaction"){const g=n.from||n.username;console.log(`üí¨ [Reaction] ${g} sent: ${n.emoji}`),Jt({username:g,emoji:n.emoji,timestamp:Date.now()}),setTimeout(()=>{Jt(f=>f&&f.timestamp===Date.now()?null:f)},3e3);return}if(n.type==="game_signal"){const g=n.from||n.username;console.log(`üéÆ [Game] ${g}:`,n.action,n.move),Te(f=>{const j={...f};if(n.action==="start")j.gameType=n.game_type,j.players=[g,n.target].filter(Boolean),j.moves={},j.result=null,j.currentTurn=g;else if(n.action==="move"){if(j.moves={...f.moves,[g]:n.move},n.game_type==="rps"&&Object.keys(j.moves).length===2){const[L,N]=Object.keys(j.moves),ne=j.moves[L],ue=j.moves[N];ne===ue?j.result={winner:null,type:"draw"}:{rock:"scissors",scissors:"paper",paper:"rock"}[ne]===ue?j.result={winner:L,loser:N}:j.result={winner:N,loser:L}}}else n.action==="end"&&(j.result=n.result||{type:"cancelled"});return j});return}if(n.type==="cinema_sync"){const g=n.from||n.username;console.log(`üé¨ [Cinema] ${g}:`,n.action),Ko(f=>({...f,isActive:n.action!=="stop",url:n.url||f.url,playing:n.action==="play",time:n.time||f.time,lastSyncAction:n.action,timestamp:Date.now(),syncedBy:g}));return}if(n.type==="current_users"){console.log("[Voice] Received current users from backend:",n.users),a(g=>{const f=n.users||[],j=f.some(ne=>ne.username===b),L=g.find(ne=>ne.username===b);let N=[...f];return!j&&L?(console.log("[Voice] Backend list missing me, adding from local state"),N=[L,...f]):!j&&b&&(console.log("[Voice] Backend list missing me, adding with defaults"),N=[{username:b,isMuted:K,isCameraOn:J,isScreenSharing:W,isTalking:Y},...f]),console.log("‚úÖ [Voice] Final connected users:",N.map(ne=>ne.username)),N});return}const d=n.from||n.sender_username||n.username,{type:u,sdp:w,candidate:k}=n;if(!d){console.error("[Signal] No sender username found in message:",n);return}if(d===b){console.log(`[Signal] Ignoring ${u} from self (${d})`);return}console.log(`[Signal] Received ${u} from ${d}`,n);let S=te.current[d];if(!S)if(u==="offer")S=$t(d,!1);else if(u==="user_joined"){if(a(g=>g.find(f=>f.username===d)?g:[...g,{username:d,isMuted:!1,isCameraOn:!1,isScreenSharing:!1}]),S=$t(d,!0),console.log(`[user_joined] Checking streams for ${d}:`,{hasAudio:!!M.current,hasCamera:!!be.current,hasScreen:!!ee.current,cameraEnabled:J,screenEnabled:W}),M.current){const g=S.getSenders();M.current.getTracks().forEach(f=>{g.some(L=>L.track===f)||(je.webrtc(`Adding audio track to new peer ${d}:`,f.kind),S.addTrack(f,M.current))}),console.log(`‚úÖ [user_joined] Audio track added to ${d}`)}if(be.current){const g=S.getSenders();be.current.getTracks().forEach(f=>{g.some(L=>L.track===f)||(je.webrtc(`Adding camera track to new peer ${d}:`,f.kind),S.addTrack(f,be.current))}),console.log(`‚úÖ [user_joined] Camera track added to ${d}`)}if(ee.current){const g=S.getSenders();ee.current.getTracks().forEach(f=>{g.some(L=>L.track===f)||(je.webrtc(`Adding screen track to new peer ${d}:`,f.kind),S.addTrack(f,ee.current))}),console.log(`‚úÖ [user_joined] Screen track added to ${d}`)}try{const g=await S.createOffer();await S.setLocalDescription(g),Ee({type:"offer",sdp:S.localDescription,target:d}),je.signal(`Sent offer to ${d}`),console.log(`‚úÖ [user_joined] Offer successfully sent to ${d}`)}catch(g){je.error("Offer creation failed",g),console.error(`‚ùå [user_joined] Failed to create/send offer to ${d}:`,g)}return}else if(u==="user_left"){console.log(`[Signal] ${d} left the channel`),a(f=>f.filter(j=>j.username!==d));const g=document.getElementById(`remote-audio-${d}`);g&&(g.pause(),g.srcObject=null,g.remove(),console.log(`üîä [Audio] Removed audio element for ${d}`)),st(f=>{const j={...f};return delete j[d],delete j[`${d}_camera`],delete j[`${d}_screen`],j}),te.current[d]&&(te.current[d].close(),delete te.current[d]);return}else if(u==="stream_update"){if(console.log(`[Signal] ${d} stream update:`,n),a(g=>g.map(f=>f.username===d?{...f,isCameraOn:n.streamType==="camera"?n.enabled:f.isCameraOn,isScreenSharing:n.streamType==="screen"?n.enabled:f.isScreenSharing}:f)),n.enabled&&!te.current[d]){console.log(`[stream_update] Creating PC for ${d} due to ${n.streamType} stream`);const g=$t(d,!0);M.current&&M.current.getTracks().forEach(f=>{je.webrtc(`Adding audio track to ${d}:`,f.kind),g.addTrack(f,M.current)}),be.current&&be.current.getTracks().forEach(f=>{je.webrtc(`Adding camera track to ${d}:`,f.kind),g.addTrack(f,be.current)}),ee.current&&ee.current.getTracks().forEach(f=>{je.webrtc(`Adding screen track to ${d}:`,f.kind),g.addTrack(f,ee.current)});try{const f=await g.createOffer();await g.setLocalDescription(f),Ee({type:"offer",sdp:g.localDescription,target:d}),je.signal(`Sent offer to ${d} after stream_update`)}catch(f){je.error(`Failed to create offer for ${d}:`,f)}}return}else{console.warn(`[Signal] Ignored ${u} from ${d} (No PC)`);return}try{if(u==="offer"){if(S.signalingState!=="stable"){console.warn(`[Signal] Ignoring offer from ${d}, already in state: ${S.signalingState}`);return}await S.setRemoteDescription(new RTCSessionDescription(w));const g=await S.createAnswer();if(await S.setLocalDescription(g),Ee({type:"answer",sdp:S.localDescription,target:d}),console.log(`[Signal] Sent answer to ${d}`),Re.current[d]){console.log(`[Signal] Processing ${Re.current[d].length} buffered candidates for ${d}`);for(const f of Re.current[d])try{await S.addIceCandidate(f)}catch(j){console.warn("[Signal] Failed to add buffered candidate:",j)}delete Re.current[d]}}else if(u==="answer"){if(S.signalingState!=="have-local-offer"){console.warn(`[WebRTC] Error handling answer from ${d}: InvalidStateError: Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': Failed to set remote answer sdp: Called in wrong state: ${S.signalingState}`);return}if(await S.setRemoteDescription(new RTCSessionDescription(w)),console.log(`[Signal] Set remote description from ${d}`),Re.current[d]){console.log(`[Signal] Processing ${Re.current[d].length} buffered candidates for ${d}`);for(const g of Re.current[d])try{await S.addIceCandidate(g)}catch(f){console.warn("[Signal] Failed to add buffered candidate:",f)}delete Re.current[d]}}else u==="candidate"&&(S.remoteDescription?(await S.addIceCandidate(new RTCIceCandidate(k)),console.log(`[Signal] Added ICE candidate from ${d}`)):(console.log(`[Signal] Buffering ICE candidate from ${d} (no remote description yet)`),Re.current[d]||(Re.current[d]=[]),Re.current[d].push(new RTCIceCandidate(k))))}catch(g){console.error(`[WebRTC] Error handling ${u} from ${d}:`,g)}},[b,$t,Ee]),Xe=o.useCallback(()=>{if(De.current){console.log("[Voice] Already leaving, skipping...");return}if(De.current=!0,console.log("[Voice] Leaving voice room..."),$.current&&$.current.readyState===WebSocket.OPEN)try{$.current.send(JSON.stringify({type:"user_leaving",sender_username:b}))}catch(n){console.warn("[Voice] Failed to send leave signal:",n)}M.current&&(M.current.getTracks().forEach(n=>{n.stop(),console.log(`[Voice] Stopped track: ${n.kind}`)}),qt(null),M.current=null),mt&&(mt.getTracks().forEach(n=>{n.stop(),console.log(`[Voice] Stopped camera track: ${n.kind}`)}),nt(null),U(!1)),gt&&(gt.getTracks().forEach(n=>{n.stop(),console.log(`[Voice] Stopped screen track: ${n.kind}`)}),Ue(null),F(!1)),Object.entries(te.current).forEach(([n,d])=>{console.log(`[Voice] Closing PC for ${n}`),d.close()}),te.current={},st({}),Re.current={},$.current&&($.current.onclose=null,$.current.close(),$.current=null),C(!1),V(null),I(!1),G(!1),se(!1),le&&(console.log("[Voice] Stopping recording on leave"),Je.current&&Je.current.state!=="inactive"&&Je.current.stop(),xt.current&&(clearInterval(xt.current),xt.current=null),Z(!1),fe(0)),Ne.current&&(clearInterval(Ne.current),Ne.current=null),qe.current&&(clearTimeout(qe.current),qe.current=null,console.log("[Voice] Cleared pending WebSocket reconnect")),eo.current&&(clearInterval(eo.current),eo.current=null),it(0),yt(1e3),Le(!1),setTimeout(()=>{De.current=!1},100)},[b,mt,gt,le]),Qe=o.useCallback(async n=>{if(x&&R&&R!==n&&!Ze.current&&(console.log(`[Voice] Switching from ${R} to ${n}`),Ze.current=!0,await new Promise(u=>{if($.current){const w=$.current,k=w.onclose;w.onclose=S=>{k&&k(S),console.log("[Voice] Old WebSocket fully closed"),u()},w.close(1e3,"Switching channel"),$.current=null,setTimeout(u,2e3)}else u()}),Object.values(te.current).forEach(u=>{u.close()}),te.current={},st({}),await new Promise(u=>setTimeout(u,150)),Ze.current=!1,console.log(`[Voice] Now joining ${n}`)),x&&R===n){console.log(`[Voice] Already in ${n}, skipping join`);return}if(Ze.current){console.log("[Voice] Currently switching channels, skipping...");return}console.log(`[Voice] Joining room: ${n}`),I(!0),V(n);try{Ot&&Ot.length>0&&(Or(Ot),console.log(`üîê [TURN] Using cached ICE servers (${Ot.length})`));const d=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:48e3},sampleSize:{ideal:16},channelCount:{ideal:1},googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,googAudioMirroring:!1,latency:{ideal:.02}},video:!1});console.log("[Voice] üé§ Got microphone access with AGGRESSIVE noise suppression");let u=d;if(It)try{u=Co(d),console.log("üéöÔ∏è [Voice] Professional audio filters APPLIED")}catch(S){console.warn("‚ö†Ô∏è [Voice] Could not apply professional filters, using raw stream:",S),u=d}qt(u),M.current=u,console.log("üé§ [Voice] Stream ready with noise suppression"),console.log("üé§ [Voice] Stream tracks:",u.getAudioTracks().map(S=>({id:S.id,label:S.label,enabled:S.enabled,readyState:S.readyState,muted:S.muted}))),Fe(),Ne.current||(Ne.current=setInterval(async()=>{const g=M.current?.getAudioTracks()?.[0];if(!(!x||De.current)&&(lt.current?.state==="suspended"&&await lt.current.resume().catch(()=>{}),!g||g.readyState==="ended"||!g.enabled&&!K&&!ze))try{const f=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,googEchoCancellation:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googTypingNoiseDetection:!0,sampleRate:48e3,channelCount:1},video:!1});qt(f),M.current=f;const j=f.getAudioTracks()[0];Object.values(te.current).forEach(L=>{L.getSenders().filter(N=>N.track?.kind==="audio").forEach(N=>N.replaceTrack(j).catch(()=>{}))}),console.log("üîÑ [Mic Watchdog] Audio track yenilendi (basit stream)")}catch(f){console.warn("[Mic Watchdog] Mic refresh failed:",f)}},8e3));const w=`${Br}://${Ur}/ws/voice/${n}/?token=${l}`;console.log(`[Voice] Connecting to ${w}`);const k=new WebSocket(w);$.current=k,k.onopen=()=>{console.log("üé§ [VoiceWS] Connected to room:",n),C(!0),I(!1),a(S=>S.some(f=>f.username===b)?S:(console.log("‚úÖ [Voice] Added self to connected users immediately"),[{username:b,isMuted:K,isCameraOn:J,isScreenSharing:W,isTalking:!1},...S]))},k.onmessage=S=>{try{const g=JSON.parse(S.data);console.log("[VoiceWS] Message received:",g.type||g),St(g)}catch(g){console.error("[VoiceWS] Parse error:",g)}},k.onerror=S=>{console.error("üé§ [VoiceWS] Error:",S),I(!1),!De.current&&!Ze.current&&console.warn("[VoiceWS] Error occurred, reconnect will be attempted on close")},k.onclose=S=>{if(console.log("üé§ [VoiceWS] Disconnected, code:",S.code,"reason:",S.reason),De.current||Ze.current){console.log("[VoiceWS] User intentionally left or switching, not reconnecting"),Le(!1),it(0),yt(1e3),qe.current&&(clearTimeout(qe.current),qe.current=null);return}if(S.code===1e3){console.log("[VoiceWS] Normal closure (1000), cleaning up"),Xe();return}if(n&&x){const f=nr+1;if(f>10){console.error("[VoiceWS] ‚ùå Max retry limit reached (10), giving up"),D.error("Sesli sohbet baƒülantƒ±sƒ± 10 denemeden sonra kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.",5e3),Xe(),it(0),yt(1e3);return}const j=Math.min(wo,3e4);console.warn(`[VoiceWS] üîÑ Unexpected disconnect (code: ${S.code})`),console.log(`[VoiceWS] üîÑ Reconnect attempt ${f}/10 in ${j}ms...`),Le(!0),it(f),qe.current&&clearTimeout(qe.current),qe.current=setTimeout(()=>{!De.current&&!Ze.current&&n?(console.log(`[VoiceWS] ‚ö° Executing reconnect attempt ${f} to ${n}`),yt(L=>Math.min(L*2,3e4)),Qe(n).then(()=>{console.log("[VoiceWS] ‚úÖ Reconnection successful! Resetting retry counters."),it(0),yt(1e3),Le(!1)}).catch(L=>{console.error("[VoiceWS] Reconnection failed:",L)})):(console.log("[VoiceWS] Reconnect cancelled (user left or room changed)"),Le(!1),it(0),yt(1e3))},j)}else console.log("[VoiceWS] Not in voice or no room, cleaning up"),Xe()}}catch(d){console.error("Voice Join Error:",d),I(!1),Ze.current=!1,d.name==="NotAllowedError"?D.warning("Mikrofon izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan izin verin.",5e3):d.name==="NotFoundError"?D.warning("Mikrofon bulunamadƒ±. L√ºtfen bir mikrofon baƒülayƒ±n."):D.error("Sesli sohbete baƒülanƒ±lamadƒ±: "+d.message)}},[x,R,l,St,Fe,Xe]),sn=o.useCallback(()=>{G(n=>{const d=!n;return M.current&&M.current.getAudioTracks().forEach(u=>{u.enabled=!d}),$.current?.readyState===WebSocket.OPEN&&$.current.send(JSON.stringify({type:"mic_off_state",is_mic_off:d})),console.log(`[Voice] Mute: ${d}`),d})},[]),lr=o.useCallback(()=>{se(n=>{const d=!n;return $.current?.readyState===WebSocket.OPEN&&$.current.send(JSON.stringify({type:"deaf_state",is_deafened:d})),console.log(`[Voice] Deafened: ${d}`),d})},[]),oo=o.useRef(!1),jo=o.useCallback(async()=>{if(oo.current){console.log("[Camera] Toggle already in progress, skipping...");return}oo.current=!0;try{const n=be.current;if(n){console.log("[Camera] Stopping camera stream"),U(!1),nt(null),be.current=null,n.getTracks().forEach(u=>{u.stop(),console.log(`[Camera] Stopped ${u.kind} track`)});const d=[];for(const[u,w]of Object.entries(te.current)){const k=w.getSenders();let S=!1;for(const g of k)if(g.track&&g.track.kind==="video"&&g.track.contentHint!=="detail")try{w.removeTrack(g),S=!0,console.log(`[Camera] Removed video track from peer: ${u}`)}catch(f){console.warn(`[Camera] Failed to remove track from ${u}:`,f)}if(S){const g=(async()=>{try{const f=await w.createOffer();await w.setLocalDescription(f),Ee({type:"offer",sdp:w.localDescription,target:u}),console.log(`[Camera] Sent renegotiation offer to ${u} after removal`)}catch(f){console.warn(`[Camera] Renegotiation failed with ${u}:`,f)}})();d.push(g)}}$.current?.readyState===WebSocket.OPEN&&($.current.send(JSON.stringify({type:"camera_state",is_camera_on:!1})),$.current.send(JSON.stringify({type:"video_ended",streamType:"camera"})),console.log("[Camera] Sent video_ended signal")),Promise.all(d).catch(u=>console.warn("[Camera] Some renegotiations failed:",u))}else{console.log("[Camera] Starting camera stream");const d=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}});if(!oo.current){console.log("[Camera] Toggle was cancelled, stopping new stream"),d.getTracks().forEach(k=>k.stop());return}console.log("[Camera] Got camera stream:",d.id),be.current=d,nt(d),U(!0);const u=d.getVideoTracks()[0];u.onended=()=>{console.log("[Camera] Track ended by browser/system"),nt(null),be.current=null,U(!1),$.current?.readyState===WebSocket.OPEN&&$.current.send(JSON.stringify({type:"video_ended",streamType:"camera"}))};try{u.contentHint="motion"}catch(k){console.warn("[Camera] contentHint not supported:",k)}const w=[];for(const[k,S]of Object.entries(te.current)){const g=(async()=>{try{S.addTrack(u,d),console.log(`[Camera] Added video track to peer: ${k}`);const f=await S.createOffer();await S.setLocalDescription(f),Ee({type:"offer",sdp:S.localDescription,target:k}),console.log(`[Camera] Sent renegotiation offer to ${k}`)}catch(f){console.warn(`[Camera] Failed to add/renegotiate with ${k}:`,f)}})();w.push(g)}$.current?.readyState===WebSocket.OPEN&&($.current.send(JSON.stringify({type:"camera_state",is_camera_on:!0})),console.log("[Camera] State sent to backend: is_camera_on=true")),Promise.all(w).catch(k=>console.warn("[Camera] Some track additions failed:",k))}}catch(n){console.error("[Camera] Error:",n),n.name==="NotAllowedError"?D.warning("Kamera izni reddedildi. L√ºtfen tarayƒ±cƒ± ayarlarƒ±ndan kamera iznini a√ßƒ±n.",5e3):n.name==="NotFoundError"?D.warning("Kamera bulunamadƒ±. L√ºtfen bir kamera baƒülayƒ±n."):D.error("Kamera ba≈ülatƒ±lamadƒ±: "+n.message),U(!1),be.current=null,nt(null)}finally{setTimeout(()=>{oo.current=!1},300)}},[Ee]),an=jo,zt=o.useRef(!1),ln=o.useCallback(async()=>{if(zt.current){console.log("[Screen] Toggle already in progress, skipping...");return}zt.current=!0;try{const n=ee.current;if(n){console.log("[Screen] Stopping screen share"),F(!1),Ue(null),ee.current=null,n.getTracks().forEach(u=>{u.stop(),console.log(`[Screen] Stopped ${u.kind} track`)});const d=[];for(const[u,w]of Object.entries(te.current)){const k=w.getSenders();let S=!1;for(const g of k)if(g.track&&g.track.contentHint==="detail")try{w.removeTrack(g),S=!0,console.log(`[Screen] Removed screen track from peer: ${u}`)}catch(f){console.warn(`[Screen] Failed to remove track from ${u}:`,f)}if(S){const g=(async()=>{try{const f=await w.createOffer();await w.setLocalDescription(f),Ee({type:"offer",sdp:w.localDescription,target:u}),console.log(`[Screen] Sent renegotiation offer to ${u} after removal`)}catch(f){console.warn(`[Screen] Renegotiation failed with ${u}:`,f)}})();d.push(g)}}$.current?.readyState===WebSocket.OPEN&&($.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),$.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})),console.log("[Screen] Sent video_ended signal")),Promise.all(d).catch(u=>console.warn("[Screen] Some renegotiations failed:",u))}else{console.log("[Screen] Starting screen share");const d={"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"4K":{width:3840,height:2160}},u=d[de]||d["1080p"];console.log(`üé¨ [Screen] Quality: ${de}, FPS: ${Xt}`);const w=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",displaySurface:"monitor",width:{ideal:u.width},height:{ideal:u.height},frameRate:{ideal:Xt}},audio:So});if(!zt.current){console.log("[Screen] Toggle was cancelled, stopping new stream"),w.getTracks().forEach(g=>g.stop());return}console.log("[Screen] Got screen stream:",w.id),w.getVideoTracks()[0].onended=()=>{console.log("[Screen] User stopped sharing via browser"),Ue(null),ee.current=null,F(!1),$.current?.readyState===WebSocket.OPEN&&($.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!1})),$.current.send(JSON.stringify({type:"video_ended",streamType:"screen"})))},ee.current=w,Ue(w),F(!0);const k=w.getVideoTracks()[0];try{k.contentHint="detail"}catch(g){console.warn("[Screen] contentHint not supported:",g)}const S=[];for(const[g,f]of Object.entries(te.current)){const j=(async()=>{try{f.addTrack(k,w),console.log(`[Screen] Added screen track to peer: ${g}`);const L=await f.createOffer();await f.setLocalDescription(L),Ee({type:"offer",sdp:f.localDescription,target:g}),console.log(`[Screen] Sent renegotiation offer to ${g}`)}catch(L){console.error(`[Screen] Failed to add track to ${g}:`,L.message)}})();S.push(j)}$.current?.readyState===WebSocket.OPEN&&$.current.send(JSON.stringify({type:"screen_share_state",is_sharing:!0})),Promise.all(S).catch(g=>console.warn("[Screen] Some track additions failed:",g))}}catch(n){console.error("[Screen] Error:",n),n.name==="NotAllowedError"?console.log("[Screen] User cancelled screen share"):n.name==="NotFoundError"?D.warning("Ekran payla≈üƒ±mƒ± desteklenmiyor."):D.error("Ekran payla≈üƒ±mƒ± ba≈ülatƒ±lamadƒ±: "+n.message),F(!1),ee.current=null,Ue(null)}finally{setTimeout(()=>{zt.current=!1},300)}},[Ee,de,Xt,So]),To=o.useCallback(()=>{if(!x||le){console.warn("[Recording] Cannot start - not in voice or already recording");return}try{const n=new(window.AudioContext||window.webkitAudioContext),d=n.createMediaStreamDestination();ce&&n.createMediaStreamSource(ce).connect(d),Object.entries(ke).forEach(([w,k])=>{!w.includes("_camera")&&!w.includes("_screen")&&k.getAudioTracks().length>0&&n.createMediaStreamSource(k).connect(d)});const u=new MediaRecorder(d.stream,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});ct.current=[],u.ondataavailable=w=>{w.data.size>0&&ct.current.push(w.data)},u.onstop=()=>{const w=new Blob(ct.current,{type:"audio/webm"}),k=URL.createObjectURL(w),S=document.createElement("a");S.href=k,S.download=`pawscord-voice-${R}-${Date.now()}.webm`,S.click(),URL.revokeObjectURL(k),console.log("‚úÖ [Recording] Saved recording")},u.start(1e3),Je.current=u,Z(!0),fe(0),xt.current=setInterval(()=>{fe(w=>w+1)},1e3),console.log("üî¥ [Recording] Started")}catch(n){console.error("[Recording] Start error:",n),D.error("Kayƒ±t ba≈ülatƒ±lamadƒ±: "+n.message)}},[x,le,ce,ke,R]),Eo=o.useCallback(()=>{le&&(Je.current&&Je.current.state!=="inactive"&&Je.current.stop(),xt.current&&(clearInterval(xt.current),xt.current=null),Je.current=null,Z(!1),fe(0),console.log("‚èπÔ∏è [Recording] Stopped"))},[le]),cr=o.useCallback(()=>{if(ct.current.length===0){D.warning("Hen√ºz kayƒ±t yok!");return}const n=new Blob(ct.current,{type:"audio/webm"}),d=URL.createObjectURL(n),u=document.createElement("a");u.href=d,u.download=`pawscord-voice-${R||"recording"}-${Date.now()}.webm`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),console.log("üíæ [Recording] Downloaded manually")},[R]),cn=o.useCallback(async(n,d=50)=>{if(!ce||!x){console.warn("[VoiceEffect] No stream or not in voice");return}try{if(Lt.current&&(Lt.current.forEach(f=>{try{f.disconnect()}catch{}}),Lt.current=null),!n){Kt(null),console.log("üéµ [VoiceEffect] Cleared");return}const u=Se.current||new AudioContext;Se.current||(Se.current=u);const w=u.createMediaStreamSource(ce),k=u.createMediaStreamDestination(),S=[],g=d/100;switch(n){case"robot":{const f=u.createOscillator(),j=u.createGain(),L=u.createWaveShaper();f.type="sawtooth",f.frequency.value=50+g*100,j.gain.value=.3+g*.4;const N=new Float32Array(256);for(let ne=0;ne<256;ne++){const ue=ne/128-1;N[ne]=Math.tanh(ue*(1+g*3))}L.curve=N,f.connect(j),w.connect(L),L.connect(k),f.start(),S.push(f,j,L);break}case"echo":{const f=u.createDelay(1),j=u.createGain(),L=u.createGain(),N=u.createGain();f.delayTime.value=.1+g*.4,j.gain.value=.2+g*.5,L.gain.value=.3+g*.4,N.gain.value=1-g*.3,w.connect(N),w.connect(f),f.connect(j),j.connect(f),f.connect(L),N.connect(k),L.connect(k),S.push(f,j,L,N);break}case"deep":{const f=u.createBiquadFilter(),j=u.createGain();f.type="lowshelf",f.frequency.value=500,f.gain.value=10+g*15,j.gain.value=1.2,w.connect(f),f.connect(j),j.connect(k),S.push(f,j);break}case"high":{const f=u.createBiquadFilter(),j=u.createGain();f.type="highshelf",f.frequency.value=1e3,f.gain.value=8+g*12,j.gain.value=.9,w.connect(f),f.connect(j),j.connect(k),S.push(f,j);break}case"radio":{const f=u.createBiquadFilter(),j=u.createBiquadFilter(),L=u.createWaveShaper();f.type="lowpass",f.frequency.value=3e3-g*1e3,j.type="highpass",j.frequency.value=300+g*200;const N=new Float32Array(256);for(let ne=0;ne<256;ne++){const ue=ne/128-1;N[ne]=Math.sign(ue)*Math.pow(Math.abs(ue),.8)}L.curve=N,w.connect(j),j.connect(f),f.connect(L),L.connect(k),S.push(f,j,L);break}case"reverb":{const f=u.createConvolver(),j=u.createGain(),L=u.createGain(),N=u.sampleRate,ne=N*(.5+g*2),ue=u.createBuffer(2,ne,N);for(let Me=0;Me<2;Me++){const wt=ue.getChannelData(Me);for(let Ge=0;Ge<ne;Ge++)wt[Ge]=(Math.random()*2-1)*Math.pow(1-Ge/ne,2)}f.buffer=ue,j.gain.value=.3+g*.5,L.gain.value=1-g*.2,w.connect(L),w.connect(f),f.connect(j),L.connect(k),j.connect(k),S.push(f,j,L);break}default:w.connect(k)}Lt.current=S,_o.current=k.stream,Kt(n),Go(d),console.log(`üéµ [VoiceEffect] Applied: ${n} at ${d}%`)}catch(u){console.error("[VoiceEffect] Error:",u),D.error("Ses efekti uygulanamadƒ±")}},[ce,x]),dr=o.useCallback(n=>{if(!$.current||$.current.readyState!==WebSocket.OPEN){console.warn("[Reaction] WebSocket not connected");return}$.current.send(JSON.stringify({type:"voice_reaction",emoji:n})),console.log(`üí¨ [Reaction] Sent: ${n}`)},[]),Yn=o.useCallback((n,d,u=null,w=null)=>{if(!$.current||$.current.readyState!==WebSocket.OPEN){console.warn("[Game] WebSocket not connected");return}$.current.send(JSON.stringify({type:"game_signal",game_type:n,action:d,move:u,target:w})),console.log(`üéÆ [Game] Sent: ${n} - ${d}`,u)},[]),dn=o.useCallback((n,d=0,u=null)=>{if(!$.current||$.current.readyState!==WebSocket.OPEN){console.warn("[Cinema] WebSocket not connected");return}$.current.send(JSON.stringify({type:"cinema_sync",action:n,time:d,url:u})),console.log(`üé¨ [Cinema] Sent: ${n}`,{time:d,url:u})},[]),un=o.useCallback(()=>{we.current||(we.current=setInterval(async()=>{const n={};for(const[d,u]of Object.entries(te.current))try{const w=await u.getStats();let k=null,S=null;w.forEach(g=>{g.type==="inbound-rtp"&&g.kind==="audio"&&(k={packetsReceived:g.packetsReceived,packetsLost:g.packetsLost,jitter:g.jitter,bytesReceived:g.bytesReceived}),g.type==="inbound-rtp"&&g.kind==="video"&&(S={packetsReceived:g.packetsReceived,packetsLost:g.packetsLost,framesDecoded:g.framesDecoded,frameWidth:g.frameWidth,frameHeight:g.frameHeight}),g.type==="candidate-pair"&&g.state==="succeeded"&&(n[d]={...n[d],rtt:g.currentRoundTripTime*1e3,connectionType:g.localCandidateId?.includes("relay")?"TURN":"STUN/Direct"})}),n[d]={...n[d],audio:k,video:S,connectionState:u.connectionState,iceConnectionState:u.iceConnectionState}}catch(w){console.warn(`[Stats] Failed to get stats for ${d}:`,w)}qo(n)},2e3),console.log("üìä [Stats] Monitoring started"))},[]),ro=o.useCallback(()=>{we.current&&(clearInterval(we.current),we.current=null,qo({}),console.log("üìä [Stats] Monitoring stopped"))},[]),ur=o.useCallback(n=>{Yr(n),localStorage.setItem("pawscord_noise_gate_enabled",n.toString()),console.log(`üéöÔ∏è [Noise Gate] ${n?"ENABLED":"DISABLED"}`)},[]),Ro=o.useCallback(n=>{const d=Math.max(-80,Math.min(-20,n));Hr(d),localStorage.setItem("pawscord_noise_gate",d.toString()),console.log(`üéöÔ∏è [Noise Gate] Threshold: ${d}dB`)},[]),pn=o.useCallback(n=>{qr(n),localStorage.setItem("pawscord_visualizer",n.toString()),console.log(`üìä [Visualizer] ${n?"ENABLED":"DISABLED"}`)},[]),bt=o.useRef(null),et=o.useRef(null),Vt=o.useCallback(()=>{if(!(!ht||!ce)&&!bt.current)try{Se.current||(Se.current=new(window.AudioContext||window.webkitAudioContext));const n=Se.current,d=n.createAnalyser();d.fftSize=256;const u=n.createMediaStreamSource(ce);u.connect(d),et.current={local:d,localSource:u,remote:{}},Object.entries(ke).forEach(([w,k])=>{if(!w.includes("_camera")&&!w.includes("_screen")){const S=n.createAnalyser();S.fftSize=256;const g=n.createMediaStreamSource(k);g.connect(S),et.current.remote[w]={analyser:S,source:g}}}),bt.current=setInterval(()=>{const w=new Uint8Array(128);et.current.local.getByteFrequencyData(w);const k={};Object.entries(et.current.remote).forEach(([S,{analyser:g}])=>{const f=new Uint8Array(128);g.getByteFrequencyData(f),k[S]=f}),Zo({local:w,remote:k})},33),console.log("üìä [Visualizer] Started")}catch(n){console.error("[Visualizer] Failed to start:",n)}},[ht,ce,ke]),no=o.useCallback(()=>{if(bt.current&&(clearInterval(bt.current),bt.current=null),et.current){try{et.current.localSource?.disconnect(),Object.values(et.current.remote).forEach(({source:n})=>{n?.disconnect()})}catch{}et.current=null}Zo({local:new Uint8Array(128),remote:{}}),console.log("üìä [Visualizer] Stopped")},[]);return o.useEffect(()=>(x&&ht?Vt():no(),()=>no()),[x,ht,Vt,no]),o.useEffect(()=>()=>{le&&Eo(),Ne.current&&(clearInterval(Ne.current),Ne.current=null),ro()},[le,Eo,ro]),e.jsx(fa.Provider,{value:{isInVoice:x,isConnecting:A,currentRoom:R,isMuted:K,isDeafened:Q,isVideoEnabled:J,isScreenSharing:W,isTalking:Y,isSpatialAudioEnabled:at,vadSensitivity:At,isNoiseSuppressionEnabled:It,screenShareQuality:de,screenShareFPS:Xt,isRecording:le,recordingDuration:ae,isPTTMode:ze,isPTTActive:or,pttKey:q,includeSystemAudio:So,localStream:ce,localAudioStream:ce,localCameraStream:mt,localScreenStream:gt,remoteStreams:ke,connectedUsers:Ho,remoteVolumes:Zt,mutedUsers:Xo,joinVoiceRoom:Qe,leaveVoiceRoom:Xe,joinChannel:Qe,leaveChannel:Xe,setRemoteVolume:ko,setIsMuted:G,setIsDeafened:se,setIsVideoEnabled:U,setIsScreenSharing:F,toggleMute:sn,toggleDeafened:lr,toggleVideo:jo,toggleCamera:an,toggleScreenShare:ln,toggleSpatialAudio:tn,updateVadSensitivity:sr,toggleNoiseSuppression:to,updateScreenQuality:We,updateScreenFPS:nn,toggleSystemAudio:on,togglePTTMode:ir,updatePTTKey:rn,startRecording:To,stopRecording:Eo,downloadRecording:cr,sendSignal:Ee,isPttActive:or,sendReaction:dr,lastReaction:Fr,applyVoiceEffect:cn,activeVoiceEffect:ge,voiceEffectIntensity:Yt,setVoiceEffectIntensity:Go,cinemaState:Wr,setCinemaState:Ko,sendCinemaSync:dn,gameState:ie,setGameState:Te,sendGameSignal:Yn,connectionStats:Yo,startStatsMonitoring:un,stopStatsMonitoring:ro,noiseSuppressionLevel:er,updateNoiseSuppressionLevel:ar,iceServers:Ot,isReconnecting:rr,adjustBandwidth:Dt,noiseGateThreshold:Gr,isNoiseGateEnabled:Kr,toggleNoiseGate:ur,updateNoiseGateThreshold:Ro,audioVisualizerData:Jo,isVisualizerEnabled:ht,toggleVisualizer:pn,startVisualizer:Vt,stopVisualizer:no},children:p})},vc=()=>o.useContext(fa),ma=o.createContext(null),_c=({children:p})=>{const[s,l]=o.useState(!1),[b,x]=o.useState(null),[C,A]=o.useState(0),I=o.useRef(null),R=o.useRef(null),V=o.useCallback(()=>{const K=localStorage.getItem("access_token");if(!K)return;let G="Anonymous";try{G=ho(K).username}catch(J){console.error("Token decode hatasƒ±",J)}const Q=`${Br}://${Ur}/ws/status/?username=${encodeURIComponent(G)}&token=${K}`;I.current&&I.current.close();const se=new WebSocket(Q);I.current=se,se.onopen=()=>{console.log("üåê [GlobalWS] Baƒülandƒ±"),l(!0)},se.onmessage=J=>{const U=JSON.parse(J.data);x(U),U.type==="chat_message_handler"&&U.username==="‚ö° Signal Bot"&&(Notification.permission==="granted"&&document.hidden&&new Notification("üö® YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞!",{body:`${U.content.split(`
`)[2]}`,icon:"/logo192.png"}),A(W=>W+1))},se.onclose=J=>{console.log("üåê [GlobalWS] Kapandƒ±",J.code),l(!1),clearTimeout(R.current),R.current=setTimeout(V,5e3)},se.onerror=J=>{console.error("üåê [GlobalWS] Hata",J),se.close()}},[Ur,Br]);return o.useEffect(()=>{const K=setTimeout(()=>{V()},2e3);return()=>{clearTimeout(K),I.current&&I.current.close(),clearTimeout(R.current)}},[V]),e.jsx(ma.Provider,{value:{isConnected:s,globalData:b,unreadGlobal:C,setUnreadGlobal:A},children:p})},ga=()=>o.useContext(ma),kc=({message:p,endTime:s,level:l="info",onDismiss:b})=>{const[x,C]=o.useState("");o.useEffect(()=>{if(!s)return;const R=()=>{const K=new Date,Q=new Date(s)-K;if(Q<=0){C("Ending soon..."),setTimeout(()=>window.location.reload(),5e3);return}const se=Math.floor(Q/(1e3*60*60)),J=Math.floor(Q%(1e3*60*60)/(1e3*60));C(`${se}h ${J}m remaining`)};R();const V=setInterval(R,6e4);return()=>clearInterval(V)},[s]);const A={info:{bg:"rgba(88, 101, 242, 0.1)",border:"#5865f2",text:"#5865f2"},warning:{bg:"rgba(250, 166, 26, 0.1)",border:"#faa61a",text:"#faa61a"},critical:{bg:"rgba(240, 71, 71, 0.1)",border:"#f04747",text:"#f04747"}},I=A[l]||A.info;return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:I.bg,borderBottom:`2px solid ${I.border}`,padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:9999,animation:"slideDown 0.3s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(hl,{style:{color:I.text,fontSize:"18px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{color:I.text,fontWeight:"bold"},children:l==="critical"?"üö® Critical Maintenance":l==="warning"?"‚ö†Ô∏è Scheduled Maintenance":"‚ÑπÔ∏è Maintenance Notice"}),e.jsxs("div",{style:{color:"#dcddde",fontSize:"14px",marginTop:"2px"},children:[p,x&&e.jsxs("span",{style:{marginLeft:"10px",opacity:.7},children:["(",x,")"]})]})]})]}),b&&e.jsx("button",{onClick:b,style:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:R=>R.target.style.background="rgba(255,255,255,0.1)",onMouseLeave:R=>R.target.style.background="none",children:e.jsx(No,{})})]})},Ye=({size:p="medium",text:s="Y√ºkleniyor...",fullscreen:l=!1})=>{const b={small:{spinner:24,text:"12px"},medium:{spinner:40,text:"14px"},large:{spinner:60,text:"16px"}},x=b[p]||b.medium,C=l?mo.fullscreenContainer:mo.inlineContainer;return e.jsxs("div",{style:C,children:[e.jsxs("div",{style:{...mo.spinnerWrapper,width:x.spinner,height:x.spinner},children:[e.jsx("div",{style:mo.spinnerOuter}),e.jsx("div",{style:mo.spinnerInner})]}),s&&e.jsx("div",{style:{...mo.loadingText,fontSize:x.text},children:s})]})},mo={fullscreenContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#36393f",zIndex:9999,gap:"16px"},inlineContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px",minHeight:"100px"},spinnerWrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},spinnerOuter:{position:"absolute",width:"100%",height:"100%",border:"3px solid rgba(88, 101, 242, 0.2)",borderTop:"3px solid #5865f2",borderRadius:"50%",animation:"spin 1s linear infinite"},spinnerInner:{position:"absolute",width:"70%",height:"70%",border:"3px solid rgba(88, 101, 242, 0.1)",borderBottom:"3px solid #7289da",borderRadius:"50%",animation:"spin 0.7s linear infinite reverse"},loadingText:{color:"#b5bac1",fontWeight:500,textAlign:"center",animation:"pulse 1.5s ease-in-out infinite"}};if(typeof document<"u"){const p=document.createElement("style");p.innerText=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
    `,document.head.querySelector("[data-loading-spinner-styles]")||(p.setAttribute("data-loading-spinner-styles","true"),document.head.appendChild(p))}const Cc="https://media.pawscord.com",jc=`${Cc}/assets`,Tc=`${jc}/logo.png`,Ec=Tc,Rc=()=>e.jsxs("svg",{className:"splash-logo",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("ellipse",{cx:"50",cy:"62",rx:"22",ry:"18",fill:"white"}),e.jsx("ellipse",{cx:"28",cy:"38",rx:"10",ry:"12",fill:"white"}),e.jsx("ellipse",{cx:"72",cy:"38",rx:"10",ry:"12",fill:"white"}),e.jsx("ellipse",{cx:"22",cy:"55",rx:"8",ry:"10",fill:"white"}),e.jsx("ellipse",{cx:"78",cy:"55",rx:"8",ry:"10",fill:"white"})]}),Ac=()=>{const[p,s]=o.useState(!1);return p?e.jsx(Rc,{}):e.jsx("img",{src:Ec,alt:"Pawscord",className:"splash-logo",onError:()=>s(!0)})},Ic=({animationState:p})=>e.jsxs("div",{className:`splash-screen ${p}`,children:[e.jsx("div",{className:"particles",children:[...Array(15)].map((s,l)=>e.jsx("div",{className:"particle",style:{"--delay":`${Math.random()*2}s`,"--x":`${Math.random()*100}%`,"--size":`${4+Math.random()*8}px`,"--duration":`${2+Math.random()*3}s`}},l))}),e.jsxs("div",{className:"rings-container",children:[e.jsx("div",{className:"ring ring-1"}),e.jsx("div",{className:"ring ring-2"}),e.jsx("div",{className:"ring ring-3"})]}),e.jsxs("div",{className:"logo-container",children:[e.jsx("div",{className:"logo-glow"}),e.jsx(Ac,{})]}),e.jsxs("div",{className:"brand-text",children:[e.jsx("span",{className:"letter",style:{"--i":0},children:"P"}),e.jsx("span",{className:"letter",style:{"--i":1},children:"A"}),e.jsx("span",{className:"letter",style:{"--i":2},children:"W"}),e.jsx("span",{className:"letter",style:{"--i":3},children:"S"}),e.jsx("span",{className:"letter",style:{"--i":4},children:"C"}),e.jsx("span",{className:"letter",style:{"--i":5},children:"O"}),e.jsx("span",{className:"letter",style:{"--i":6},children:"R"}),e.jsx("span",{className:"letter",style:{"--i":7},children:"D"})]}),e.jsx("div",{className:"loading-bar",children:e.jsx("div",{className:"loading-progress"})})]}),Js=m.memo(Ic),Zs=m.lazy(()=>h(()=>import("./Message-DSg5lM53.js"),__vite__mapDeps([22,2,1,3,4,5,6,23,24,9,10]),import.meta.url)),Pc=m.lazy(()=>h(()=>import("./VirtualMessageList-BskB6pIg.js"),__vite__mapDeps([25,1,2,3,4,5]),import.meta.url)),Oc=m.lazy(()=>h(()=>import("./MessageInput-X8V7x2lB.js"),__vite__mapDeps([26,2,1,3,4,5,6,21,27,9,10,28]),import.meta.url)),Lr=m.lazy(()=>h(()=>import("./UserVideoContainer-DML6c8C9.js"),__vite__mapDeps([29,1,2,3,4,5]),import.meta.url)),Lc=m.lazy(()=>h(()=>import("./VoiceAudioController-skx20B5j.js"),__vite__mapDeps([30,1,2,3,4,5,9,6,10]),import.meta.url));m.lazy(()=>h(()=>import("./RichTextEditor-BbzaEiSi.js"),__vite__mapDeps([31,1,2,3,4,5,32,6,33]),import.meta.url));const Dc=m.lazy(()=>h(()=>import("./StickyMessageBanner-CgOjnT-e.js"),__vite__mapDeps([34,1,2,3,4,5,6]),import.meta.url)),Mc=m.lazy(()=>h(()=>import("./LoginPage-B3k8Iy66.js"),__vite__mapDeps([35,1,2,3,4,5,6,36,9,10]),import.meta.url)),$c=m.lazy(()=>h(()=>import("./WelcomeScreen-BE8EpLtX.js"),__vite__mapDeps([37,1,2,3,4,5,6,38,39]),import.meta.url)),zc=m.lazy(()=>h(()=>import("./ImageModal-CVsPsz4n.js"),__vite__mapDeps([12,1,2,3,4,5]),import.meta.url)),Vc=m.lazy(()=>h(()=>import("./UserProfileModal-DRxFrVTj.js"),__vite__mapDeps([11,1,2,3,4,5,6,9,10]),import.meta.url)),Bc=m.lazy(()=>h(()=>import("./PollCreateModal-ohOyIatt.js"),__vite__mapDeps([19,1,2,3,4,5,6]),import.meta.url)),Uc=m.lazy(()=>h(()=>import("./CodeSnippetModal-DD4RODid.js"),__vite__mapDeps([20,1,2,3,4,5,6]),import.meta.url));m.lazy(()=>h(()=>import("./AvatarCropper-DLpZUIT6.js"),__vite__mapDeps([40,1,2,3,4,5,41]),import.meta.url));const Nc=m.lazy(()=>h(()=>import("./CryptoChartModal-Cd25hZaK.js"),__vite__mapDeps([42,1,2,3,4,5,6]),import.meta.url));m.lazy(()=>h(()=>import("./CryptoStoreModal-Cw2rOyTI.js"),__vite__mapDeps([43,1,2,3,4,5,6,9,10]),import.meta.url));const Fc=m.lazy(()=>h(()=>import("./PremiumStoreModal-0kPaCwiZ.js"),__vite__mapDeps([44,1,2,3,4,5,6,9,10]),import.meta.url)),Wc=m.lazy(()=>h(()=>import("./WhiteboardModal-BZBHcLUw.js"),__vite__mapDeps([18,1,2,3,4,5,6]),import.meta.url)),Gc=m.lazy(()=>h(()=>import("./SoundboardModal-BN0QYelb.js"),__vite__mapDeps([15,1,2,3,4,5,6]),import.meta.url)),Hc=m.lazy(()=>h(()=>import("./KanbanBoard-B8b0mVzG.js"),__vite__mapDeps([45,1,2,3,4,5,6]),import.meta.url)),Xs=m.lazy(()=>h(()=>import("./SummaryModal-DMzldHmf.js"),__vite__mapDeps([46,1,2,3,4,5,6]),import.meta.url)),Kc=m.lazy(()=>h(()=>import("./MessageTemplateModal-1IcqHzsh.js"),__vite__mapDeps([21,1,2,3,4,5,6]),import.meta.url)),Yc=m.lazy(()=>h(()=>import("./CinemaModal-DM38TilE.js"),__vite__mapDeps([17,2,1,3,4,5,6]),import.meta.url)),qc=m.lazy(()=>h(()=>import("./StickerPicker-DRqnCNqf.js"),__vite__mapDeps([14,1,2,3,4,5]),import.meta.url)),Jc=m.lazy(()=>h(()=>import("./GifPicker-DtTP0DDo.js"),__vite__mapDeps([13,1,2,3,4,5]),import.meta.url)),Zc=m.lazy(()=>h(()=>import("./DJModal-D9PAVXWJ.js"),__vite__mapDeps([47,2,1,3,4,5,6]),import.meta.url)),Xc=m.lazy(()=>h(()=>import("./ThemeStoreModal-ClcXk4KD.js"),__vite__mapDeps([48,1,2,3,4,5,6,9,10]),import.meta.url)),Qc=m.lazy(()=>h(()=>import("./EncryptionKeyModal-Bjzc8dw_.js"),__vite__mapDeps([49,1,2,3,4,5,6]),import.meta.url)),ed=m.lazy(()=>h(()=>import("./DownloadModal-B4Y4bds1.js"),__vite__mapDeps([38,1,2,3,4,5,6]),import.meta.url)),td=m.lazy(()=>h(()=>import("./ServerSettingsModal-C0IIpl_b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),od=m.lazy(()=>h(()=>import("./CreateGroupModal-CSLApvfk.js"),__vite__mapDeps([50,1,2,3,4,5,6,9,10]),import.meta.url)),rd=m.lazy(()=>h(()=>import("./AdminAnalyticsPanel-Aj1MpCNk.js"),__vite__mapDeps([51,1,2,3,4,5,6,52]),import.meta.url)),nd=m.lazy(()=>h(()=>import("./AdminPanelModal-Z-AQqu8r.js"),__vite__mapDeps([53,1,2,3,4,5,6,9,10]),import.meta.url)),sd=m.lazy(()=>h(()=>import("./WebhooksPanel-CHlvFmKx.js"),__vite__mapDeps([54,1,2,3,4,5,39,55]),import.meta.url)),ad=m.lazy(()=>h(()=>import("./VanityURLManager-CLwlMLmR.js"),__vite__mapDeps([8,1,2,3,4,5,6,9,10]),import.meta.url)),id=m.lazy(()=>h(()=>import("./AutoModerationDashboard-ClywElkI.js"),__vite__mapDeps([56,1,2,3,4,5,6]),import.meta.url)),ld=m.lazy(()=>h(()=>import("./AutoModerationPanel-kdP1IQXo.js"),__vite__mapDeps([57,1,2,3,4,5,6,9,10,58]),import.meta.url)),cd=m.lazy(()=>h(()=>import("./RaidProtectionPanel-DM1ZDKcc.js"),__vite__mapDeps([59,1,2,3,4,5,6,9,10]),import.meta.url)),dd=m.lazy(()=>h(()=>import("./ReportSystemPanel-DvJBL8jF.js"),__vite__mapDeps([60,1,2,3,4,5,6,9,10]),import.meta.url)),ud=m.lazy(()=>h(()=>import("./AuditLogPanel-DDG_aKsi.js"),__vite__mapDeps([61,1,2,3,4,5,6]),import.meta.url)),pd=m.lazy(()=>h(()=>import("./UserWarningsPanel-B3kAslC6.js"),__vite__mapDeps([62,1,2,3,4,5,6,9,10]),import.meta.url)),fd=m.lazy(()=>h(()=>import("./BookmarkPanel-YqJ2_Jeh.js"),__vite__mapDeps([63,1,2,3,4,5,6,9,10]),import.meta.url)),md=m.lazy(()=>h(()=>import("./ReadLaterPanel-BjyTZHIW.js"),__vite__mapDeps([64,1,2,3,4,5,6,65]),import.meta.url)),gd=m.lazy(()=>h(()=>import("./ChannelPermissionsPanel-R8tNfGAg.js"),__vite__mapDeps([66,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./MessageThreadsPanel-BhoeDTRL.js"),__vite__mapDeps([67,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./ModeratorNotesPanel-BSQS3_TY.js"),__vite__mapDeps([68,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./ServerRolesPanel-Bi6o9UcM.js"),__vite__mapDeps([69,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./NotificationPreferencesPanel-1vUQ7b2F.js"),__vite__mapDeps([70,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./MessageOCRPanel-BvkHUWpv.js"),__vite__mapDeps([71,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./MassActionsPanel-e5VCcbBa.js"),__vite__mapDeps([72,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./TimeoutMutePanel-CFVtPBU6.js"),__vite__mapDeps([73,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./ServerThemesPanel-9N7N4oQU.js"),__vite__mapDeps([74,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./KeywordMutesPanel-B6UaclVd.js"),__vite__mapDeps([75,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./WelcomeTemplatesPanel-BScBVA8S.js"),__vite__mapDeps([76,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./StickyMessagesPanel-CJpCBO0c.js"),__vite__mapDeps([77,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./MessageTemplatesPanel-W_VCe4Vh.js"),__vite__mapDeps([78,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./MessageExportPanel-B2xiC0rA.js"),__vite__mapDeps([79,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./ArchivedRoomsPanel-CRn8K_RE.js"),__vite__mapDeps([80,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./SlowModePanel-DOMulqjh.js"),__vite__mapDeps([81,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./EmojiManagementPanel-CsRfM9Qa.js"),__vite__mapDeps([82,1,2,3,4,5,6,9,10]),import.meta.url));const hd=m.lazy(()=>h(()=>import("./ReactionAnalyticsPanel-CKAauMNs.js"),__vite__mapDeps([83,1,2,3,4,5,6,9,10]),import.meta.url)),yd=m.lazy(()=>h(()=>import("./LinkClickTrackingPanel-DH7nqJ9D.js"),__vite__mapDeps([84,1,2,3,4,5,6,9,10]),import.meta.url)),xd=m.lazy(()=>h(()=>import("./JoinLeaveLogsPanel-CE8N_2VQ.js"),__vite__mapDeps([85,1,2,3,4,5,6,9,10]),import.meta.url)),Sd=m.lazy(()=>h(()=>import("./UserActivityPanel-JYSSb3_z.js"),__vite__mapDeps([86,1,2,3,4,5,6,9,10]),import.meta.url)),bd=m.lazy(()=>h(()=>import("./NicknameHistoryPanel-D9CsVYd9.js"),__vite__mapDeps([87,1,2,3,4,5,6,9,10]),import.meta.url)),wd=m.lazy(()=>h(()=>import("./FieldChangeTrackingPanel-gVMW04DG.js"),__vite__mapDeps([88,1,2,3,4,5,6,9,10]),import.meta.url)),vd=m.lazy(()=>h(()=>import("./InviteAnalyticsPanel-Cv4927JH.js"),__vite__mapDeps([89,1,2,3,4,5,6,9,10]),import.meta.url)),_d=m.lazy(()=>h(()=>import("./ContentScannerPanel-DYa_iuy8.js"),__vite__mapDeps([90,1,2,3,4,5,6,9,10]),import.meta.url)),kd=m.lazy(()=>h(()=>import("./EphemeralMessagesPanel-B_DBOkJc.js"),__vite__mapDeps([91,1,2,3,4,5,6,9,10]),import.meta.url)),Cd=m.lazy(()=>h(()=>import("./TopicHistoryPanel-Cgx9dh70.js"),__vite__mapDeps([92,1,2,3,4,5,6,9,10]),import.meta.url)),jd=m.lazy(()=>h(()=>import("./DraftsPanel-BG86cSQA.js"),__vite__mapDeps([93,1,2,3,4,5,6,9,10]),import.meta.url)),Td=m.lazy(()=>h(()=>import("./ServerNicknamesPanel-BtD4B26M.js"),__vite__mapDeps([94,1,2,3,4,5,6,9,10]),import.meta.url)),Ed=m.lazy(()=>h(()=>import("./ServerBoostPanel-CxX7SDSW.js"),__vite__mapDeps([95,1,2,3,4,5,6,9,10]),import.meta.url)),Rd=m.lazy(()=>h(()=>import("./RoomWebhooksPanel-CSA0aRVf.js"),__vite__mapDeps([96,1,2,3,4,5,6,9,10]),import.meta.url)),Ad=m.lazy(()=>h(()=>import("./OAuthAppsPanel-CfEnuKxI.js"),__vite__mapDeps([97,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./VanityURLPanel-CJSQpwbw.js"),__vite__mapDeps([98,1,2,3,4,5,6,9,10]),import.meta.url));const Qs=m.lazy(()=>h(()=>import("./AutoRespondersPanel-BgConPzY.js"),__vite__mapDeps([99,1,2,3,4,5,6,9,10]),import.meta.url)),Id=m.lazy(()=>h(()=>import("./SessionManagementPanel-C1OiJT7X.js"),__vite__mapDeps([100,1,2,3,4,5,6,9,10]),import.meta.url)),Pd=m.lazy(()=>h(()=>import("./GDPRExportPanel-CWRgEhzI.js"),__vite__mapDeps([101,1,2,3,4,5,6,9,10]),import.meta.url)),Od=m.lazy(()=>h(()=>import("./DataRetentionPanel-3D__HwSD.js"),__vite__mapDeps([102,1,2,3,4,5,6,9,10]),import.meta.url)),Ld=m.lazy(()=>h(()=>import("./TwoFactorSetupWizard-D-snqfx_.js"),__vite__mapDeps([103,1,2,3,4,5,6,9,10]),import.meta.url)),Dd=m.lazy(()=>h(()=>import("./EnhancedPollsPanel-DYY4YKT1.js"),__vite__mapDeps([104,1,2,3,4,5,6,9,10]),import.meta.url)),Md=m.lazy(()=>h(()=>import("./VoiceTranscriptsPanel-C-GVToEr.js"),__vite__mapDeps([105,1,2,3,4,5,6,9,10]),import.meta.url)),$d=m.lazy(()=>h(()=>import("./PaymentPanel-Cx17Gfww.js"),__vite__mapDeps([106,1,2,3,4,5,6,9,10]),import.meta.url)),zd=m.lazy(()=>h(()=>import("./StoreModal-Dyf78fU6.js"),__vite__mapDeps([107,1,2,3,4,5,6,9,10]),import.meta.url)),Vd=m.lazy(()=>h(()=>import("./DailyRewardsModal-CjF2X_9F.js"),__vite__mapDeps([108,1,2,3,4,5,6,9,10]),import.meta.url)),Bd=m.lazy(()=>h(()=>import("./APIUsagePanel-C3syG1l_.js"),__vite__mapDeps([109,1,2,3,4,5,6,9,10]),import.meta.url)),Ud=m.lazy(()=>h(()=>import("./ExportJobsPanel-Dx-5qSFE.js"),__vite__mapDeps([110,1,2,3,4,5,6,9,10]),import.meta.url)),Nd=m.lazy(()=>h(()=>import("./ScheduledAnnouncementsPanel-ytnIFIFZ.js"),__vite__mapDeps([111,1,2,3,4,5,6,9,10]),import.meta.url)),Fd=m.lazy(()=>h(()=>import("./InviteExportPanel-BfN-awBS.js"),__vite__mapDeps([112,1,2,3,4,5,6,9,10]),import.meta.url)),Wd=m.lazy(()=>h(()=>import("./AdvancedSearchPanel-C8ORx9zh.js"),__vite__mapDeps([113,1,2,3,4,5,6,9,10]),import.meta.url)),Gd=m.lazy(()=>h(()=>import("./GrowthMetricsPanel-DAacMFie.js"),__vite__mapDeps([114,1,2,3,4,5,6,9,10]),import.meta.url)),Hd=m.lazy(()=>h(()=>import("./LinkPreviewRenderer-DEiQNtlp.js"),__vite__mapDeps([115,1,2,3,4,5,6]),import.meta.url)),Kd=m.lazy(()=>h(()=>import("./InventoryPanel-CKwVpP5P.js"),__vite__mapDeps([116,1,2,3,4,5,6,9,10]),import.meta.url)),Yd=m.lazy(()=>h(()=>import("./WaitlistPanel-Ck8jHCU3.js"),__vite__mapDeps([117,1,2,3,4,5,6,9,10]),import.meta.url)),qd=m.lazy(()=>h(()=>import("./ReferralRewardsPanel-B0JLWDlq.js"),__vite__mapDeps([118,1,2,3,4,5,6,9,10]),import.meta.url));m.lazy(()=>h(()=>import("./VerifyEmailPage-D1Xj-wv_.js"),__vite__mapDeps([119,1,2,3,4,5,6,9]),import.meta.url));m.lazy(()=>h(()=>import("./ForgotPasswordPage-B4yQ59C4.js"),__vite__mapDeps([120,1,2,3,4,5,6,36,9]),import.meta.url));m.lazy(()=>h(()=>import("./ResetPasswordPage-rsyeFUZD.js"),__vite__mapDeps([121,1,2,3,4,5,6,9]),import.meta.url));m.lazy(()=>h(()=>import("./TwoFactorLoginPage-CosbC5v2.js"),__vite__mapDeps([122,1,2,3,4,5,6,9]),import.meta.url));m.lazy(()=>h(()=>import("./TwoFactorSetup-DF9bt3dx.js"),__vite__mapDeps([123,1,2,3,4,5,9,6,10,124]),import.meta.url));m.lazy(()=>h(()=>import("./TwoFactorLogin-vWK1WRqn.js"),__vite__mapDeps([125,1,2,3,4,5,126]),import.meta.url));const Jd=m.lazy(()=>h(()=>import("./VanityInviteScreen-CIYW9iMv.js"),__vite__mapDeps([127,1,2,3,4,5]),import.meta.url));m.lazy(()=>h(()=>import("./EmailVerification-C7SH39Qq.js"),__vite__mapDeps([128,1,2,3,4,5,9,129]),import.meta.url));m.lazy(()=>h(()=>import("./MobileNav-BB_LcA2A.js"),__vite__mapDeps([130,1,2,3,4,5,131]),import.meta.url));m.lazy(()=>h(()=>import("./SwipeActions-BGROgEJG.js"),__vite__mapDeps([132,1,2,3,4,5,133]),import.meta.url));m.lazy(()=>h(()=>import("./VoiceMessage-B5PVXwX3.js"),__vite__mapDeps([134,1,2,3,4,5,9,6,10,135]),import.meta.url));const Zd=m.lazy(()=>h(()=>import("./FriendsTab-BwwfDC1K.js"),__vite__mapDeps([136,1,2,3,4,5,6,23,9,10]),import.meta.url)),Xd=m.lazy(()=>h(()=>import("./RoomList-HAP3tSn6.js"),__vite__mapDeps([137,1,2,3,4,5,6,138,27,8,9,10,7,23]),import.meta.url)),Qd=m.lazy(()=>h(()=>import("./UserProfilePanel-DEpZiWOV.js"),__vite__mapDeps([139,1,2,3,4,5,40,41,39,9,6,10,140]),import.meta.url)),ea=m.lazy(()=>h(()=>import("./VoiceChatPanel-BmVtBBgh.js"),__vite__mapDeps([141,1,2,3,4,5,142,6,39,9,10,143]),import.meta.url)),eu=m.lazy(()=>h(()=>import("./ChatUserList-Bpe0sQGv.js"),__vite__mapDeps([144,1,2,3,4,5,6]),import.meta.url)),tu=m.lazy(()=>h(()=>import("./PinnedMessages-s_fy8pMj.js"),__vite__mapDeps([145,1,2,3,4,5,22,6,23,24,9,10]),import.meta.url)),ou=m.lazy(()=>h(()=>import("./FloatingVoiceIsland-FGeUTGSl.js"),__vite__mapDeps([146,1,2,3,4,5]),import.meta.url)),ru=m.lazy(()=>h(()=>import("./CinemaPlayer-BgmfKpuy.js"),__vite__mapDeps([147,2,1,3,4,5,6,9,10]),import.meta.url)),nu=m.lazy(()=>h(()=>import("./ConnectionsPanel-Clzw_tfM.js"),__vite__mapDeps([148,1,2,3,4,5,6,39,9,10,149]),import.meta.url)),su=m.lazy(()=>h(()=>import("./PasswordSetupModal-ZLCCqhNs.js"),__vite__mapDeps([150,1,2,3,4,5,6,9,10,151]),import.meta.url)),au=m.lazy(()=>h(()=>import("./NotificationDropdown-Xjdbk9yu.js"),__vite__mapDeps([152,1,2,3,4,5,6]),import.meta.url));m.lazy(()=>h(()=>import("./ReactionStatsPanel-CeHDr7jM.js"),__vite__mapDeps([153,1,2,3,4,5,6,39,154]),import.meta.url));m.lazy(()=>h(()=>import("./ServerHealthPanel-LdTUKDVY.js"),__vite__mapDeps([155,1,2,3,4,5,6,39,156]),import.meta.url));m.lazy(()=>h(()=>import("./ChannelAnalyticsPanel-DrIBsj9U.js"),__vite__mapDeps([157,1,2,3,4,5,6,39,158]),import.meta.url));m.lazy(()=>h(()=>import("./SmartSuggestionsPanel-B5rjWbBC.js"),__vite__mapDeps([159,1,2,3,4,5,6,39,160]),import.meta.url));m.lazy(()=>h(()=>import("./UserPresenceInsightsPanel-B3EHSD-i.js"),__vite__mapDeps([161,1,2,3,4,5,6,39,162]),import.meta.url));m.lazy(()=>h(()=>import("./UserFooter-ChFET_gn.js").then(p=>p.a),__vite__mapDeps([138,1,2,3,4,5,6]),import.meta.url));const iu=m.lazy(()=>h(()=>import("./UserContextMenu-C7veQ8I6.js"),__vite__mapDeps([142,1,2,3,4,5,6]),import.meta.url)),lu=m.lazy(()=>h(()=>import("./MiniGamesPanel-CyRS_o6V.js"),__vite__mapDeps([163,1,2,3,4,5,6,9,10]),import.meta.url)),cu=m.lazy(()=>h(()=>import("./ProjectCollaborationPanel-x4c99arY.js"),__vite__mapDeps([164,1,2,3,4,5,6,9,10]),import.meta.url)),du=m.lazy(()=>h(()=>import("./AvatarStudioPanel-DOOclEz5.js"),__vite__mapDeps([165,1,2,3,4,5,6,9,10]),import.meta.url)),uu="8888",yo=typeof window<"u"&&typeof window.require=="function",Rt=window.Capacitor&&window.Capacitor.isNativePlatform(),Wo=(()=>{if(Rt||yo)return"https://api.pawscord.com";const p=window.location.protocol,s=window.location.hostname;return s.includes("pawscord.com")?"https://api.pawscord.com":`${p}//${s}:${uu}`})(),go=yo||Rt?"https://www.pawscord.com":Wo,B=`${Wo}/api`,E=Wo,Dr=Wo.startsWith("https")?"wss":"ws",Mr=Wo.replace(/^https?:\/\//,""),ta=`${B}/auth/login/`,oa=`${B}/auth/register/`,pu=`${B}/messages/history/room/`,fu=`${B}/messages/history/dm/`,Ln=`${B}/rooms/list_with_categories/`,mu=`${B}/conversations/`,gu=`${B}/conversations/find_or_create/`,hu=`${B}/users/update_profile/`,yu=`${B}/users/default_avatars/`,xu=`${B}/users/change_username/`,Su=`${B}/gifs/list_local/`,bu="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",ra="chat_drafts_v1",$r=()=>(Date.now()+Math.floor(Math.random()*1e3)).toString(),wu=p=>new Promise((s,l)=>{const x=Math.ceil(p.size/2097152);let C=0;const A=new dl.ArrayBuffer,I=new FileReader;I.onload=V=>{A.append(V.target.result),C++,C<x?R():s(A.end())},I.onerror=V=>l(V);function R(){const V=C*2097152,K=Math.min(V+2097152,p.size);I.readAsArrayBuffer(p.slice(V,K))}R()}),vu=()=>{const{user:p,isAuthenticated:s,token:l,login:b,logout:x,isLoading:C}=Fo(),{isInVoice:A,isConnecting:I,currentRoom:R,joinChannel:V,leaveChannel:K,isMuted:G,isDeafened:Q,toggleMute:se,toggleDeafened:J,toggleVideo:U,toggleScreenShare:W,remoteVolumes:F,setRemoteVolume:Y,localCameraStream:me,remoteStreams:le,isTalking:Z,sendSignal:ae,isScreenSharing:fe,isVideoEnabled:ge,isPttActive:Kt,localScreenStream:Yt,sendReaction:Go,lastReaction:ce,applyVoiceEffect:qt,activeEffect:mt,cinemaState:nt,setCinemaState:gt,gameState:Ue,sendGameSignal:ke,mutedUsers:st}=vc(),{globalData:Ho}=ga(),a=_e(t=>t.activeChat),Fr=_e(t=>t.messages),Jt=_e(t=>t.encryptionKeys),Wr=_e(t=>t.voiceUsers),Ko=_e(t=>t.unreadCounts),ie=_e(t=>t.setActiveChat);_e(t=>t.addMessage),_e(t=>t.updateMessage);const Te=_e(t=>t.setMessages),Yo=_e(t=>t.setTypingUser),qo=_e(t=>t.setOnlineUsers),Gr=_e(t=>t.setVoiceUsers),Hr=_e(t=>t.incrementUnread),Kr=_e(t=>t.setEncryptionKey),[Yr,Jo]=o.useState(!1),[Zo,ht]=o.useState(!1),[qr,Zt]=o.useState(!1),[Jr,Xo]=o.useState(!1),[Kn,at]=o.useState(!1),[Qo,At]=o.useState(null),[Zr,It]=o.useState(!1),[Xr,er]=o.useState(0),[Qr,de]=o.useState(""),P=p?.username||"",[Xt,xo]=o.useState(!1),[So,en]=o.useState(!1),[ze,Qt]=o.useState(null),{isMobile:q}=rc(),[tr,or]=o.useState(""),Pt=fc(tr,300),[Ot,bo]=o.useState("0px"),rr=Rt?"max(20px, env(safe-area-inset-bottom))":"0px",[Le,nr]=o.useState({width:300,height:225,x:100,y:100}),[it,wo]=o.useState(!0),[yt,qe]=o.useState(!0),[eo,vo]=o.useState(!1),[$,te]=o.useState("start"),[lt,Se]=o.useState([]),[M,be]=o.useState([]),[ee,ct]=o.useState([]),[Je,xt]=o.useState([]),[De,Ze]=o.useState([]),[Ne,Lt]=o.useState(!1),[_o,we]=o.useState(!1),[ko,Fe]=o.useState(!1),[tn,sr]=o.useState(!1),[to,ar]=o.useState(!1),[on,ir]=o.useState(!1),[rn,We]=o.useState(""),[nn,Co]=o.useState(!1),[Ee,Dt]=o.useState(!1),[Mt,Re]=o.useState(new Set),[$t,St]=o.useState(null),[Xe,Qe]=o.useState(null),[sn,lr]=o.useState(null),[oo,jo]=o.useState(!1),[an,zt]=o.useState(!1),[ln,To]=o.useState(!1),[Eo,cr]=o.useState(!1),[cn,dr]=o.useState(!1),[Yn,dn]=o.useState(!1),[un,ro]=o.useState(!1),[ur,Ro]=o.useState(!1),[pn,bt]=o.useState(!1),[et,Vt]=o.useState(!1),[no,n]=o.useState(!1),[d,u]=o.useState(!1),[w,k]=o.useState(!1),[S,g]=o.useState(!1),[f,j]=o.useState(!1),[L,N]=o.useState(!1),[ne,ue]=o.useState(!1),[Me,wt]=o.useState(!1),[Ge,Bt]=o.useState(!1),[vt,_t]=o.useState(!1),[pr,fr]=o.useState(!1),[Ao,qn]=o.useState(!1),[fn,Jn]=o.useState(!1),[mn,Io]=o.useState(!1),[Ut,tt]=o.useState(!1),[Po,mr]=o.useState(!1),[gn,hn]=o.useState(!1),[ba,wa]=o.useState(!1),[va,_a]=o.useState(!1),[ka,Ca]=o.useState(!1),[ja,Ta]=o.useState(!1),[Ea,Ra]=o.useState(!1),[Aa,Zn]=o.useState(!1),[Ia,Pa]=o.useState(!1),[Oa,La]=o.useState(!1),[Da,Ma]=o.useState(!1),[$a,za]=o.useState(!1),[Va,Ba]=o.useState(!1),[Ua,Na]=o.useState(!1),[Fa,Wa]=o.useState(!1),[Ga,Ha]=o.useState(!1),[Ka,Xn]=o.useState(!1),[Ya,qa]=o.useState(!1),[Ja,Za]=o.useState(!1),[Xa,Qa]=o.useState(!1),[ei,Qn]=o.useState(!1),[ti,oi]=o.useState(!1),[ri,ni]=o.useState(!1),[si,ai]=o.useState(!1),[ii,li]=o.useState(!1),[ci,di]=o.useState(!1),[ui,es]=o.useState(!1),[pi,ts]=o.useState(!1),[fi,os]=o.useState(!1),[tp,op]=o.useState(!1),[rp,np]=o.useState(!1),[sp,ap]=o.useState(!1),[ip,lp]=o.useState(!1),[cp,dp]=o.useState(!1),[up,pp]=o.useState(!1),[fp,mp]=o.useState(!1),[gp,hp]=o.useState(!1),[yp,xp]=o.useState(!1),[Sp,bp]=o.useState(!1),[mi,rs]=o.useState("default"),[ns,so]=o.useState(null),[wp,vp]=o.useState(!1),[gi,gr]=o.useState(!1),[_p,hr]=o.useState(!0),[kp,yn]=o.useState(0),[ao,hi]=o.useState(!1),[Nt,xn]=o.useState([]),[yi,xi]=o.useState(0),[kt,ss]=o.useState([]),[Ft,Ct]=o.useState([]),[Cp,Si]=o.useState(null),[ot,yr]=o.useState(null),[as,is]=o.useState(!1),[bi,ls]=o.useState(!1),[cs,ds]=o.useState(null),[us,Sn]=o.useState(!1),[wi,ps]=o.useState(!1),[vi,xr]=o.useState(""),[Oo,fs]=o.useState(()=>JSON.parse(localStorage.getItem("chat_sound_settings"))||{notifications:!0,mentions:!0,userJoinLeave:!0}),[Sr,bn]=o.useState(null),[_i,ms]=o.useState(!1),[gs,br]=o.useState(!1),[hs,wn]=o.useState(!1),[vn,wr]=o.useState(0),[jp,Tp]=o.useState(!1),[Ep,io]=o.useState(!1),[Rp,lo]=o.useState(""),[ki,vr]=o.useState(!1),[Ap,co]=o.useState(null),[Ip,ys]=o.useState(null),[Pp,xs]=o.useState(null),[Ss,Op]=o.useState(!1),[_n,bs]=o.useState(!1),[Lo,$e]=o.useState(!1),[_r,ws]=o.useState(null),[Do,kr]=o.useState(null),[Ci,vs]=o.useState(!1),[ji,_s]=o.useState(!1),[Ti,ks]=o.useState(!1),[Ei,Cs]=o.useState(!1),[Ri,js]=o.useState(!1),[Ai,Ts]=o.useState(!1),[Es,Rs]=o.useState(null),[Ii,As]=o.useState(!1),[Pi,Is]=o.useState(!1),Ps=_e(t=>t.typingUsers),Os=o.useMemo(()=>Ps.filter(t=>t!==P),[Ps,P]);o.useRef(null),o.useRef([]);const ve=o.useRef(null),Cr=o.useRef(null),kn=o.useRef(null);o.useRef(null);const Mo=o.useRef(null),Cn=o.useRef(null),Ls=o.useRef(null),dt=o.useRef({}),Ce=P==="Eastkhan"||P==="PawPaw"||ot?.role==="admin",Oi=o.useMemo(()=>{const t=M?.find(y=>y.id===a?.serverId),r=t?.owner===P||t?.created_by===P,c=Ft?.find(y=>y.username===P)?.role==="moderator";return{isAdmin:Ce,isServerOwner:r,isModerator:c,canKick:Ce||r||c,canBan:Ce||r,canMute:Ce||r||c,canWarn:Ce||r||c,canManageRoles:Ce||r}},[Ce,M,a?.serverId,P,Ft]),Li=o.useMemo(()=>{if(!M||M.length===0)return[];if(!kt||kt.length===0)return M;const t=[],r=[];return kt.forEach(c=>{const y=M.find(i=>i.id===c);y&&t.push(y)}),M.forEach(c=>{kt.includes(c.id)||r.push(c)}),[...t,...r]},[M,kt]),jn=_e(t=>t.onlineUsers),Di=_e(t=>t.messages),Tn=nc(Di,Pt);sc(ee),o.useEffect(()=>{if($==="finished")return;te("start");const t=setTimeout(()=>te("pre-transition"),1500),r=setTimeout(()=>te("finished"),2200),c=setTimeout(()=>te("finished"),3e3);return()=>{clearTimeout(t),clearTimeout(r),clearTimeout(c)}},[]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search),r=t.get("verification"),c=t.get("username"),y=t.get("reason"),i=t.get("needs_password");if(r==="success")D.success(`‚úÖ Email doƒürulandƒ±! Ho≈ügeldin ${c||"kullanƒ±cƒ±"}!`),window.history.replaceState({},document.title,window.location.pathname);else if(r==="failed"){const v=y==="expired"?"‚è∞ Doƒürulama linki s√ºresi dolmu≈ü. Yeni bir link talep edin.":"‚ùå Ge√ßersiz doƒürulama linki.";D.error(v),window.history.replaceState({},document.title,window.location.pathname)}i==="true"&&(console.log("üîë [Auth] Google user needs to set password"),Is(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),o.useEffect(()=>{const t=new URLSearchParams(window.location.search),r=t.get("success"),c=t.get("coins"),y=t.get("session_id"),i=t.get("canceled");r==="true"&&c&&((async()=>{try{const T=localStorage.getItem("access_token"),H="https://api.pawscord.com/api";if(y){const O=await(await fetch(`${H}/payments/verify/`,{method:"POST",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"},body:JSON.stringify({session_id:y,coin_amount:parseInt(c)})})).json();O.success?O.already_processed?D.info(`?? ÔøΩdeme zaten islendi! Bakiye: ${O.balance} coin`):D.success(`?? ${c} coin hesabina eklendi! Yeni bakiye: ${O.balance} coin`):D.error(O.error||"ÔøΩdeme dogrulama hatasi")}else D.success(`?? ÔøΩdeme basarili! ${c} coin hesabina eklendi.`)}catch(T){console.error("Payment verification error:",T),D.success(`?? ${c} coin satin alma tamamlandi!`)}})(),window.history.replaceState({},document.title,window.location.pathname)),i==="true"&&(D.info("? ÔøΩdeme iptal edildi."),window.history.replaceState({},document.title,window.location.pathname))},[]),o.useEffect(()=>{const r=window.location.hash.match(/^#\/join\/([^/?]+)/);if(r){const c=r[1];console.log("üîó [Vanity] Detected vanity path:",c),Rs(c)}},[]),o.useEffect(()=>(window.showAutoModeration=()=>Ro(!0),window.showRaidProtection=()=>bt(!0),window.showReportSystem=()=>Vt(!0),window.showAuditLog=()=>n(!0),window.showUserWarnings=()=>u(!0),()=>{delete window.showAutoModeration,delete window.showRaidProtection,delete window.showReportSystem,delete window.showAuditLog,delete window.showUserWarnings}),[]),o.useEffect(()=>{const t=r=>{Lo&&!r.target.closest(".toolbar-menu-container")&&$e(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[Lo]),o.useEffect(()=>{const t=()=>{As(!0)};return window.addEventListener("openConnectionsPanel",t),()=>window.removeEventListener("openConnectionsPanel",t)},[]),o.useEffect(()=>{Nl(),Wl(),Gl(),Ql(),setTimeout(()=>{da()},3e3),"requestIdleCallback"in window&&requestIdleCallback(()=>{zn()}),s&&p&&h(async()=>{const{pushNotificationManager:t}=await import("./pushNotifications-gNTJgEVU.js");return{pushNotificationManager:t}},__vite__mapDeps([166,2,1,3,4,5]),import.meta.url).then(({pushNotificationManager:t})=>{t.init(B,_)}),Rt&&h(async()=>{const{initializeDeepLinkHandler:t}=await import("./urlHandlers-DTE64gc3.js");return{initializeDeepLinkHandler:t}},__vite__mapDeps([167,2,1,3,4,5,9,6,10]),import.meta.url).then(({initializeDeepLinkHandler:t})=>{console.log("‚úÖ Deep link handler ready")}),console.log("‚úÖ PWA ve optimizasyonlar aktif!")},[s,p]);const $o=o.useMemo(()=>{if(a.type==="room"){if(M){for(const t of M)if(t.categories)for(const r of t.categories){const c=r.rooms?.find(y=>y.slug===a.id);if(c)return String(c.name)}}return String(a.id)}else if(a.type==="dm")return`@ ${String(a.targetUser||"DM")}`;return""},[a,M]),uo=o.useMemo(()=>!a||!a.id?"":`${a.type}-${a.id}`,[a]),jr=o.useCallback(()=>{try{const t=localStorage.getItem(ra);if(!t)return{};const r=JSON.parse(t);return r&&typeof r=="object"?r:{}}catch(t){return console.warn("Taslak okunamadƒ±",t),{}}},[]),Mi=o.useCallback(t=>{if(!uo)return;const r=jr();r[uo]=t,localStorage.setItem(ra,JSON.stringify(r))},[uo,jr]);o.useEffect(()=>{if(!uo){lo(""),io(!1);return}const r=jr()[uo]||"";lo(r),io(!!r.trim())},[uo,jr]);const $i=o.useMemo(()=>{if(a.type!=="room"||!M)return"text";for(const t of M)if(t.categories)for(const r of t.categories){const c=r.rooms?.find(y=>y.slug===a.id);if(c)return c.channel_type}return"text"},[a,M]),jt=o.useCallback((t="auto")=>{kn.current&&kn.current.scrollIntoView({behavior:t})},[]),En=o.useCallback(()=>{const t=Cn.current;return t?t.scrollHeight-t.scrollTop-t.clientHeight<160:!0},[]),Rn=o.useCallback(()=>{const t=Cn.current;if(!t)return;const r=t.scrollHeight-t.scrollTop-t.clientHeight;vr(r>160)},[]),zi=mc(Rn,100),Ve=o.useCallback(t=>{if(t==="‚ö° Signal Bot")return`${go}/static/bot/signal.png`;if(t==="PawPaw AI")return`${go}/static/bot/ai.png`;if(!t||!De||De.length===0)return`${go}/avatars/cat_1.png`;let r=0;for(let v=0;v<t.length;v++)r=t.charCodeAt(v)+((r<<5)-r);const c=Math.abs(r%De.length),y=De[c];let i;return typeof y=="object"&&y!==null?i=y.original||y.thumbnail||y.url:typeof y=="string"&&(i=y),!i||typeof i!="string"?`${go}/avatars/cat_1.png`:i.startsWith("http")||i.startsWith("blob:")?i:(i.startsWith("/")||(i="/"+i),`${go}${i}`)},[De]),He=o.useCallback(t=>{const r=ee.find(c=>c.username===t);if(r&&r.avatar&&typeof r.avatar=="string"){if(r.avatar.startsWith("http://")||r.avatar.startsWith("https://")||r.avatar.startsWith("blob:"))return r.avatar;let c=r.avatar;return c.startsWith("/")||(c="/"+c),`${go}${c}`}return Ve(t)},[ee,Ve]),_=o.useCallback(async(t,r={})=>{const c=r.headers||{};l&&(c.Authorization=`Bearer ${l}`),r.body instanceof FormData||(c["Content-Type"]="application/json");try{const i=t.includes("upload")||r.body instanceof FormData?3e5:3e4,v=new AbortController,T=setTimeout(()=>v.abort(),i),H=await fetch(t,{...r,headers:c,signal:v.signal});if(clearTimeout(T),H.status===401)throw t.includes("/auth/")||t.includes("/login")?(console.warn("‚ö†Ô∏è [Auth] 401 on auth endpoint, logging out"),x()):console.warn("‚ö†Ô∏è [Auth] 401 error on:",t,"- NOT logging out"),new Error("Unauthorized");return H}catch(y){throw y.name==="AbortError"?(console.error("‚è±Ô∏è [Fetch] Request timed out:",t),new Error("ƒ∞stek zaman a≈üƒ±mƒ±na uƒüradƒ±")):(console.error("Fetch error:",y),y)}},[l,x]);pc(),o.useEffect(()=>{const t=window.location.hash,r=t.includes("?")?t.split("?")[1]:"",y=new URLSearchParams(r).get("join_server");if(y&&s&&M&&M.length>0){console.log("üîó [Vanity URL] Found join_server parameter:",y);const i=M.find(v=>v.id===parseInt(y));if(i){if(console.log(`üîó Vanity URL: Redirecting to server ${i.name}`),i.categories&&i.categories.length>0){const v=i.categories[0];if(v.rooms&&v.rooms.length>0){const T=v.rooms[0];ie({type:"room",id:T.slug})}}window.history.replaceState({},document.title,"/#/")}else console.log(`üîó Vanity URL: Server ${y} not found, showing invite modal`),(async()=>{try{const T=await _(`${B}/servers/${y}/join/`,{method:"POST"});if(T.ok)D.success("Sunucuya katƒ±ldƒ±nƒ±z!"),window.location.reload();else{const H=await T.json();D.error(H.error||"Sunucuya katƒ±lƒ±namadƒ±")}}catch(T){console.error("Join server error:",T),D.error("Sunucuya katƒ±lƒ±rken hata olu≈ütu")}finally{window.history.replaceState({},document.title,"/#/")}})()}},[s,M,_]);const Ds=o.useCallback(async t=>{try{await _(`${B}/user/server-order/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_order:t})}),console.log("üíæ Server order saved:",t)}catch(r){console.error("Server order save error:",r)}},[_]),Vi=(t,r,c)=>{t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("serverId",r.toString()),t.dataTransfer.setData("sourceIndex",c.toString());const y=t.currentTarget.cloneNode(!0);y.style.position="absolute",y.style.top="-9999px",y.style.opacity="0.8",y.style.transform="rotate(5deg)",y.style.pointerEvents="none",document.body.appendChild(y),t.dataTransfer.setDragImage(y,24,24),setTimeout(()=>{document.body.contains(y)&&document.body.removeChild(y)},0),t.currentTarget.style.opacity="0.4"},Bi=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},Ui=t=>{t.currentTarget.style.opacity="1"},Ni=o.useCallback((t,r)=>{t.preventDefault(),parseInt(t.dataTransfer.getData("serverId"));const c=parseInt(t.dataTransfer.getData("sourceIndex"));if(console.log("üìù DROP: sourceIndex:",c,"‚Üí targetIndex:",r),c===r){console.log("‚ùå Aynƒ± yere bƒ±rakƒ±lƒ±yor (sourceIndex === targetIndex), i≈ülem iptal");return}let y=kt.length>0?[...kt]:M.map(T=>T.id);console.log("üìù Mevcut sƒ±ralama:",y),console.log("üîÑ Kaynak index:",c,"‚Üí Hedef index:",r);const[i]=y.splice(c,1),v=c<r?r-1:r;console.log("üéØ Adjusted target index:",v),y.splice(v,0,i),console.log("‚úÖ Yeni sƒ±ralama:",y),ss(y),Ds(y)},[kt,M,Ds]),Ms=t=>{const r=document.getElementById(`message-${t}`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},Fi=async()=>{if(window.confirm("Bu odadaki t√ºm mesajlarƒ± silmek istediƒüine emin misin?"))try{(await _(`${B}/rooms/${a.id}/clear/`,{method:"POST"})).ok&&Te([])}catch(t){console.error(t)}},Wi=async()=>{Sn(!0),ps(!0),xr("");try{const t=await _(`${B}/rooms/${a.id}/summarize/`,{method:"POST"}),r=await t.json();t.ok?xr(r.summary):xr("Hata: "+r.error)}catch{xr("Baƒülantƒ± hatasƒ±.")}ps(!1)},An=t=>{if(console.log("üì§ [DEBUG] sendMessage called with:",t),console.log("üì§ [DEBUG] ws.current:",ve.current),console.log("üì§ [DEBUG] ws.current.readyState:",ve.current?.readyState),console.log("üì§ [DEBUG] activeChat:",a),!t)return;const r=t.trim();if(!r)return;if(r==="/tema"){zt(!0),co(null),io(!1),lo(""),Mo.current?.clear?.();return}if(r==="/sablon"){at(!0),co(null),io(!1),lo(""),Mo.current?.clear?.();return}if(r.startsWith("/duyuru ")){const O=r.slice(8).trim();if(O){const re={type:a.type==="room"?"chat_message":"dm_message",message:`[ANNOUNCE] ${O}`,username:P,temp_id:$r(),...a.type==="room"?{room:a.id}:{conversation:a.id}};ve.current?.send(JSON.stringify(re)),so({message:O,type:"info",author:P}),co(null),io(!1),lo(""),Mo.current?.clear?.();return}}co(null),io(!1),lo(""),Mi("");const c=a.type==="room"?`room-${a.id}`:`dm-${a.id}`,y=Jt[c];let i=r;a.type==="dm"&&y&&(i=oc(r,y));const v={type:a.type==="room"?"chat_message":"dm_message",message:i,username:P,temp_id:$r(),...a.type==="room"?{room:a.id}:{conversation:a.id}},T=JSON.stringify(v),H=async()=>{let ye=0;for(;ve.current&&ve.current.readyState===WebSocket.CONNECTING&&ye<3e3;)await new Promise(Pe=>setTimeout(Pe,100)),ye+=100;if(ve.current&&ve.current.readyState===WebSocket.OPEN)try{return ve.current.send(T),!0}catch(Pe){return console.error("WebSocket send error:",Pe),!1}return!1},oe=async()=>{try{const O=a.type==="dm"?`${B}/messages/send_dm/`:`${B}/messages/send/`,re=a.type==="dm"?{conversation_id:a.id,content:i}:{room:a.id,content:i};return(await _(O,{method:"POST",body:JSON.stringify(re)})).ok}catch(O){return console.error("HTTP fallback error:",O),!1}};(async()=>await H()||await oe())(),Te(O=>{const re={...v,content:i,timestamp:new Date().toISOString(),id:v.temp_id,avatar:ot?.avatar||Ve(P)},ye=[...O,re],Pe=a.type==="room"?`room-${a.id}`:`dm-${a.id}`;return dt.current[Pe]&&(dt.current[Pe].messages=ye),ye}),Mo.current?.clear?.(),jt("smooth")},Gi=t=>{const r={type:a.type==="room"?"chat_message":"dm_message",message:"",username:P,temp_id:$r(),snippet_data:t,...a.type==="room"?{room:a.id}:{conversation:a.id}};ve.current?.send(JSON.stringify(r)),Te(c=>[...c,{...r,timestamp:new Date().toISOString(),id:r.temp_id,avatar:ot?.avatar||Ve(P)}]),xo(!1)},In=o.useCallback(()=>{if(!a.id||a.type==="welcome"||a.type==="friends"||!P)return;if(ve.current&&ve.current.readyState===WebSocket.OPEN){const y=ve.current.url,i=a.type==="room"?`/ws/chat/${a.id}/`:`/ws/dm/${a.id}/`;if(y.includes(i)){console.log("‚è≠Ô∏è [WebSocket] Already connected to this chat, skipping reconnect");return}}ve.current&&(console.log("üîå [WebSocket] Closing existing connection before new one"),ve.current.close(1e3,"change_room"));let t="";const r=`?username=${encodeURIComponent(P)}&token=${l}`;if(a.type==="room"?t=`${Dr}://${Mr}/ws/chat/${a.id}/${r}`:a.type==="dm"&&(t=`${Dr}://${Mr}/ws/dm/${a.id}/${r}`),!t){console.log("‚è≠Ô∏è [WebSocket] Skipping - activeChat.type is not room/dm:",a.type);return}console.log("üîå [WebSocket] Connecting to:",t.split("?")[0]);const c=new WebSocket(t);ve.current=c,c.onopen=()=>{console.log("‚úÖ [WebSocket] Connected successfully"),Lt(!0)},c.onmessage=y=>{const i=JSON.parse(y.data);if(i.type==="chat"||i.type==="dm"||i.type==="chat_message_handler"){console.log("üì® [WebSocket] Message data:",{type:i.type,id:i.id,temp_id:i.temp_id,room:i.room,conversation:i.conversation});const v=T=>T.room?`room-${T.room}`:T.conversation?`dm-${T.conversation}`:(console.warn("‚ö†Ô∏è [WebSocket] No room/conversation in message, using activeChat fallback"),a.type==="room"?`room-${a.id}`:`dm-${a.id}`);Te(T=>{if(i.temp_id){const O=T.findIndex(re=>re.temp_id===i.temp_id);if(O!==-1){console.log("üîÑ [WebSocket] Replacing temp message with real message:",i.temp_id,"‚Üí",i.id);const re=[...T];re[O]=i;const ye=v(i);return dt.current[ye]&&(dt.current[ye].messages=re),re}}if(i.id&&T.some(O=>O.id===i.id))return console.log("‚è≠Ô∏è [WebSocket] Duplicate message (by ID) skipped:",i.id),T;console.log("üì® [WebSocket] New message received:",i);const H=[...T,i],oe=v(i);return dt.current[oe]&&(dt.current[oe].messages=H),H}),Yo(i.username,!1),En()?jt("smooth"):vr(!0)}else i.type==="typing_status_update"?i.username!==P&&Yo(i.username,i.is_typing):i.type==="chat_cleared"&&Te([]);if(i.message&&i.message.startsWith("[ANNOUNCE] ")){const v=i.message.replace("[ANNOUNCE] ","");so({message:v,type:"info",author:i.username})}},c.onerror=y=>{console.error("‚ùå [WebSocket] Connection error:",y)},c.onclose=y=>{console.log("üîå [WebSocket] Connection closed:",y.code,y.reason),Lt(!1)}},[a.id,a.type,P,l]);o.useEffect(()=>{Un.isNativePlatform()&&(cl.initialize({clientId:bu,scopes:["profile","email"],grantOfflineAccess:!0}),bo("max(35px, env(safe-area-inset-top))"))},[]),o.useEffect(()=>{s&&!ao&&(async()=>{try{const[r,c,y,i,v]=await Promise.all([_(yu).then(O=>O.json()),_(Ln).then(O=>O.json()),_(`${mu}?username=${encodeURIComponent(P)}`).then(O=>O.json()),_(`${B}/friends/list/`).then(O=>O.json()),_(`${B}/users/me/`).then(O=>O.json())]);Ze(r);const T={username:v?.username||P,email:v?.email||"",avatar:v?.avatar||null,status_message:v?.status_message||"",friend_code:v?.friend_code||"0000",social_links:v?.social_links||{},coins:v?.coins||0,xp:v?.xp||0,level:v?.level||1,status:"online",role:v?.role||"member",is_whitelisted:v?.is_whitelisted||!1};yr(T),console.log("üî• [DEBUG] currentUserProfile with is_whitelisted:",T);const oe=(i.friends||[]).map(O=>{const re=O.sender_username===P,ye=re?O.receiver_username:O.sender_username,Pe=re?O.receiver_avatar:O.sender_avatar,Tt=re?O.receiver_status:O.sender_status,Ae=re?O.receiver_activity:O.sender_activity;return ye?{username:ye,avatar:Pe,status:Tt||"offline",display_name:ye,current_activity:Ae||{},status_message:"",last_seen:O.created_at,role:"friend",friend_code:""}:null}).filter(Boolean).filter(O=>O.username!==T.username);ct(oe),be(c),Se(y),xn(oe),hi(!0),h(async()=>{const{prefetchUserAvatars:O}=await import("./imageCaching-DUoTn-WY.js");return{prefetchUserAvatars:O}},__vite__mapDeps([24,1,2,3,4,5]),import.meta.url).then(({prefetchUserAvatars:O})=>{O(oe)})}catch(r){console.error("Init Data Error",r),We("Veriler y√ºklenemedi.")}})()},[s,ao,_,P]),o.useEffect(()=>{P&&(async()=>{try{const r=await _(`${B}/user/server-order/`);if(r.ok){const c=await r.json();if(ss(c.server_order||[]),!wsUrl){console.log(" [WebSocket] Skipping - activeChat.type is not room/dm:",a.type);return}console.log("üéØ Server order loaded:",c.server_order)}}catch(r){console.error("Server order fetch error:",r)}})()},[P,_]),o.useEffect(()=>{const t=async()=>{if(!a.id||a.type!=="room"){so(null);return}try{const r=await _(`${B}/stickies/list/?room=${a.id}`);if(r.ok){const c=await r.json();c&&c.length>0?so({message:c[0].content,type:"info",author:c[0].creator}):so(null)}}catch(r){console.error("Sticky messages fetch error:",r)}};s&&a.id&&t()},[a.id,a.type,s,_]);const Tr=o.useCallback(async t=>{if(!t){Ct([]);return}try{console.log(`üîç [Server Members] Fetching members for server ${t}...`);const r=await _(`${B}/servers/${t}/members/`);if(r.ok){const c=await r.json();console.log(`üë• [Server Members] Fetched ${c.length} members for server ${t}:`,c),Ct(c)}else{const c=await r.text();console.error("‚ùå Server members fetch failed:",r.status,c),Ct([])}}catch(r){console.error("‚ùå Server members fetch error:",r),Ct([])}},[_]),Hi=o.useCallback(t=>{console.log("üñ±Ô∏è [Server Select] Server clicked:",t.name,t.id),Si(t),Tr(t.id),ie("server",t.id,null)},[Tr,ie]);o.useEffect(()=>{const t=async()=>{if(!a.id||a.type!=="room"){a.type!=="server"&&Ct([]);return}try{let r=null;for(const c of M){if(!c.categories||!Array.isArray(c.categories)){console.warn("‚ö†Ô∏è Server has no categories array:",c);continue}for(const y of c.categories)if(!(!y.rooms||!Array.isArray(y.rooms))){for(const i of y.rooms)if(i.slug===a.id){r=c.id;break}if(r)break}if(r)break}if(!r){console.warn("üî¥ Server ID bulunamadƒ± for room:",a.id),Ct([]);return}Tr(r)}catch(r){console.error("‚ùå Server members fetch error:",r),Ct([])}};s&&a.id&&a.type==="room"?t():a.type!=="server"&&Ct([])},[a.id,a.type,s,Tr,M]),o.useEffect(()=>{const t=async()=>{try{const c=await fetch(`${B}/maintenance/status/`);if(c.ok){const y=await c.json();y.active?bn({message:y.message||"System maintenance in progress",endTime:y.end_time,level:y.level||"info"}):bn(null)}}catch(c){console.error("Maintenance check error:",c)}};t();const r=setInterval(t,300*1e3);return()=>clearInterval(r)},[]),o.useEffect(()=>{const t=(y,i)=>{try{const v=y.split(".").map(Number),T=i.split(".").map(Number);return v[0]>T[0]?!0:v[0]<T[0]?!1:v[1]>T[1]?!0:v[1]<T[1]?!1:v[2]>T[2]}catch(v){return console.error("‚ùå Version kar≈üƒ±la≈ütƒ±rma hatasƒ±:",v),!1}},r=async()=>{const y=window.location.hostname==="localhost"&&window.location.port==="3000";if(!yo&&!Rt&&!y){console.log("‚è≠Ô∏è Version check atlandƒ± (web browser)");return}try{console.log("üîç Version kontrol√º yapƒ±lƒ±yor...",{isElectron:yo,isNative:Rt,isDebugMode:y,hostname:window.location.hostname});const i="1.1.143";console.log("üì¶ Mevcut versiyon:",i);const v=await fetch("https://media.pawscord.com/builds/version.json");if(!v.ok){console.warn("‚ö†Ô∏è version.json alƒ±namadƒ±:",v.status);return}const T=await v.json(),H=T.latest_version;console.log("üåê Son versiyon:",H),console.log("üìä Kar≈üƒ±la≈ütƒ±rma:",{current:i,latest:H});const oe=t(H,i);if(console.log("üîç ƒ∞s newer?",oe),H&&oe){if(console.log("‚úÖ YENƒ∞ G√úNCELLEME MEVCUT!",{current:i,latest:H}),is(!0),window.require){const{ipcRenderer:O}=window.require("electron");O.send("update-available",{currentVersion:i,latestVersion:H,downloadUrl:T.download_url_windows})}}else console.log("‚ÑπÔ∏è Versiyon g√ºncel veya eski:",i,">=",H),is(!1)}catch(i){console.error("‚ùå Version check hatasƒ±:",i)}};r();const c=setInterval(r,1800*1e3);return()=>clearInterval(c)},[]),o.useEffect(()=>{if(!ao||!a.id||a.type==="friends"||a.type==="welcome")return;console.log("üîÑ [DEBUG activeChat] Chat deƒüi≈üti:",a);let t=!1;const r=a.type==="room"?`room-${a.id}`:`dm-${a.id}`,c=dt.current[r];return c?.messages?.length>0?(console.log("üì¶ [Cache] Restoring cached messages:",c.messages.length,"(skipping API call)"),Te(c.messages),hr(!!c.hasMore),yn(c.offset||0),setTimeout(()=>{t||jt("auto")},50),t||In()):(console.log("üåê [Fetch] No cache, fetching from server..."),yn(0),hr(!0),t||In(),setTimeout(()=>{t||zs(!0,0)},50)),()=>{t=!0,console.log("üßπ [Cleanup] activeChat useEffect cleanup triggered")}},[a.id,a.type,ao,In]),o.useEffect(()=>{Ho?.type==="server_structure_update"&&(console.log("üîÑ Real-time Update: Refetching Server List..."),(async()=>{try{const r=await _(Ln);if(r.ok){const c=await r.json();be(c)}}catch(r){console.error("Real-time Update Failed:",r)}})())},[Ho,_]),o.useEffect(()=>{if(!s||!P)return;const t={current:null},r=async()=>{try{const y=await _(`${B}/users/rich_presence/${P}/`);if(y.ok){const i=await y.json();let v={};const T=O=>{if(!O)return!0;const re=new Date(O);return(new Date-re)/1e3/60<2};i.spotify&&T(i.spotify.timestamp)&&(v.spotify={type:"listening",name:i.spotify.track,details:i.spotify.artist,album_art:i.spotify.album_art}),i.steam&&T(i.steam.timestamp)&&(v.steam={type:"playing",name:i.steam.game,state:i.steam.state}),Object.keys(v).length===0&&(v=null);const H=JSON.stringify(t.current),oe=JSON.stringify(v);H!==oe&&(t.current=v,Cr.current&&Cr.current.readyState===WebSocket.OPEN&&Cr.current.send(JSON.stringify({type:"update_activity",activity:v})))}}catch{}},c=setInterval(r,3e4);return r(),()=>clearInterval(c)},[s,P,_]),o.useEffect(()=>{En()&&(jt("smooth"),vr(!1))},[Fr,En,jt]),o.useEffect(()=>{Rn()},[a,Rn]),o.useEffect(()=>{const t=r=>{(r.ctrlKey||r.metaKey)&&r.key.toLowerCase()==="k"&&(r.preventDefault(),Ls.current?.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),o.useEffect(()=>{if(!s||!ao)return;const t=tc();rs(t);const r=`${Dr}://${Mr}/ws/status/?username=${encodeURIComponent(P)}&token=${l}`,c=new WebSocket(r);return Cr.current=c,c.onmessage=y=>{const i=JSON.parse(y.data);if(i.type==="online_user_list_update"){const v=Array.isArray(i.users)?i.users.map(T=>typeof T=="string"?T:T.username||T):[];console.log("üë• [Online Users] Updated:",v),qo(v)}if(i.type==="voice_users_update"&&(console.log("üîä [GlobalWS] Received voice_users_update:",i.voice_users),Gr(i.voice_users)),i.type==="user_activity_update"&&ct(v=>v.map(T=>T.username===i.username?{...T,current_activity:i.activity}:T)),i.type==="user_profile_update"&&i.user_data){const v=i.user_data;v.username===P&&(console.log("üë§ [Profile Update] Updating currentUserProfile:",v),yr(T=>({...T,avatar:v.avatar,status_message:v.status_message,social_links:v.social_links,coins:v.coins,xp:v.xp,level:v.level,status:v.status,role:v.role}))),ct(T=>T.map(H=>H.username===v.username?{...H,...v}:H))}if(i.type==="global_message_notification"&&i.username!==P){const v=i.room_slug?`room-${i.room_slug}`:`dm-${i.conversation_id}`,T=a.type==="room"?`room-${a.id}`:`dm-${a.id}`;v!==T&&Hr(v)}i.type==="server_structure_update"&&(console.log("Server structure update received, refreshing..."),_(Ln).then(v=>v.json()).then(v=>be(v)).catch(console.error))},()=>c.close()},[s,ao,P,l,a]),o.useEffect(()=>{A&&R&&(console.log(`üîä [Voice] Switched to voice chat panel: ${R}`),ie("voice",R))},[A,R]);const $s=t=>{ie("room",t),q&&we(!1)},zo=t=>{_(gu,{method:"POST",body:JSON.stringify({target_username:t})}).then(r=>r.json()).then(r=>{ie("dm",r.conversation_id,t),q&&we(!1)})},Ki=o.useCallback(t=>{t&&(window.location.hash=t.startsWith("#/")?t:`#${t.startsWith("/")?t:`/${t}`}`,q&&Fe(!1))},[q]),Yi=o.useCallback(()=>{fs(t=>{const r={...t,notifications:!t.notifications};return localStorage.setItem("chat_sound_settings",JSON.stringify(r)),r})},[]),qi=o.useCallback(async()=>{if(!a?.id)return;const t=`${window.location.origin}/#/${a.type==="dm"?`dm/${a.id}`:`room/${a.id}`}`;try{await navigator.clipboard.writeText(t),de("Link kopyalandƒ±"),setTimeout(()=>de(""),1500)}catch(r){console.error("Link kopyalanamadƒ±",r),D.error("Link kopyalanamadƒ±")}},[a]),zs=async(t=!0,r=0)=>{if(!a.id)return;if(a.type==="voice"){console.log("[Voice] Skipping message history for voice chat"),Te([]),hr(!1);return}console.log("üîÑ [fetchMessageHistory] Starting fetch:",{isInitial:t,offset:r,activeChat:a}),gr(!0);const c=a.type==="room"?pu:fu,y=a.type==="room"?`room-${a.id}`:`dm-${a.id}`;try{const i=await _(`${c}${a.id}/?limit=50&offset=${r}`);if(i.ok){const v=await i.json(),T=v.results||[],H=T.filter(Ae=>!Ae||typeof Ae!="object"?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Invalid message object:",Ae),!1):!Ae.id&&!Ae.temp_id?(console.warn("‚ö†Ô∏è [fetchMessageHistory] Message without ID:",Ae),!1):!0);H.length<T.length&&console.warn(`‚ö†Ô∏è [fetchMessageHistory] Filtered out ${T.length-H.length} invalid messages`);const oe=H.reverse();console.log("‚úÖ [fetchMessageHistory] Fetched messages:",oe.length);let O=oe;t?(console.log("üìù [fetchMessageHistory] Setting messages (INITIAL):",oe.length),Te(oe),setTimeout(()=>jt("auto"),100)):Te(Ae=>(console.log("üìù [fetchMessageHistory] Appending to existing:",Ae.length,"+",oe.length),O=[...oe,...Ae],O));const re=t?oe.length:r+oe.length,ye=!!v.next;hr(ye),t||yn(re);const Pe=dt.current[y]?.messages||[],Tt=t?oe:[...oe,...Pe];dt.current[y]={messages:O||Tt,offset:re,hasMore:ye},console.log("üíæ [fetchMessageHistory] Cached:",y,"with",(O||Tt).length,"messages")}}catch(i){console.error("‚ùå [fetchMessageHistory] Error:",i)}gr(!1)},Ji=async(t,r)=>{try{console.log("üîë [Auth] Login attempt:",{username:t,url:ta});const c=await fetch(ta,{method:"POST",body:JSON.stringify({username:t,password:r}),headers:{"Content-Type":"application/json"}});console.log("üîë [Auth] Response status:",c.status);const y=await c.json();c.ok?(console.log("‚úÖ [Auth] Login successful"),b(y.access,y.refresh)):(console.error("‚ùå [Auth] Login failed:",y),c.status===401?We("Kullanƒ±cƒ± adƒ± veya ≈üifre hatalƒ±"):c.status===400?We(y.detail||y.error||"Ge√ßersiz giri≈ü bilgileri"):c.status>=500?We("Sunucu hatasƒ±. L√ºtfen daha sonra tekrar deneyin."):We(y.detail||y.error||"Giri≈ü ba≈üarƒ±sƒ±z"))}catch(c){console.error("‚ùå [Auth] Network error:",c),We("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin.")}},Zi=async(t,r,c)=>{try{console.log("üìù [Auth] Register attempt:",{username:t,email:r,url:oa});const y=await fetch(oa,{method:"POST",body:JSON.stringify({username:t,email:r,password:c}),headers:{"Content-Type":"application/json"}});if(console.log("üìù [Auth] Response status:",y.status),y.status===201)return console.log("‚úÖ [Auth] Registration successful"),!0;const i=await y.json();console.error("‚ùå [Auth] Registration failed:",i);let v="";return i.username?v=i.username.join(" "):i.email?v=i.email.join(" "):i.password?v=i.password.join(" "):i.detail?v=i.detail:v=Object.values(i).flat().join(" "),We(v||"Kayƒ±t i≈ülemi ba≈üarƒ±sƒ±z"),!1}catch(y){return console.error("‚ùå [Auth] Network error:",y),We("Sunucuya baƒülanƒ±lamadƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin."),!1}},Er=o.useCallback(async(t,r=!1,c=0,y=null)=>{wn(!0),wr(0);const i=y||a,v=$r();try{const T=await wu(t),H=t.type||"application/octet-stream",oe=10*1024*1024,O=5,re=Math.ceil(t.size/oe);console.log("üöÄ [R2 Multipart] Starting upload:",{fileName:t.name,fileSize:(t.size/(1024*1024)).toFixed(2)+" MB",totalParts:re,parallelUploads:O});const Pe=await(await _(`${B}/upload/multipart/init/`,{method:"POST",body:JSON.stringify({file_name:t.name,file_size:t.size,content_type:H,file_hash:T})})).json();if(Pe.file_exists){console.log("‚úÖ [R2] File already exists, skipping upload"),D.success("Dosya zaten y√ºkl√º!"),wn(!1),wr(100);return}const{upload_id:Tt,key:Ae}=Pe;console.log(`üì¶ [R2] Upload ID: ${Tt.substring(0,20)}..., Key: ${Ae}`);const Ir=[];let Us=0;const al=async pe=>{const Be=(pe-1)*oe,Et=Math.min(Be+oe,t.size),po=t.slice(Be,Et);console.log(`üì§ [R2] Part ${pe}/${re} uploading...`);const Vo=new FormData;Vo.append("upload_id",Tt),Vo.append("key",Ae),Vo.append("part_number",pe.toString()),Vo.append("chunk",po,`part_${pe}`);const Pr=await _(`${B}/upload/multipart/upload-part/`,{method:"POST",body:Vo,headers:{}});if(!Pr.ok){const ll=await Pr.text();throw new Error(`Part ${pe} upload failed: ${Pr.status} - ${ll}`)}const{etag:Ns,part_number:il}=await Pr.json();Us++;const Fs=Math.round(Us/re*95);return wr(Fs),console.log(`‚úÖ [R2] Part ${pe}/${re} complete (${Fs}%), ETag: ${Ns}`),{ETag:Ns,PartNumber:il}};for(let pe=0;pe<re;pe+=O){const Be=[];for(let po=0;po<O&&pe+po<re;po++)Be.push(al(pe+po+1));const Et=await Promise.all(Be);Ir.push(...Et)}Ir.sort((pe,Be)=>pe.PartNumber-Be.PartNumber),console.log("üìã [R2] All parts uploaded, completing...",Ir);const On=await _(`${B}/upload/multipart/complete/`,{method:"POST",body:JSON.stringify({upload_id:Tt,key:Ae,parts:Ir,file_name:t.name,file_hash:T,room_slug:i.type==="room"?i.id:null,conversation_id:i.type==="dm"?i.id:null,temp_id:v,is_voice_message:r?"true":"false",duration:c.toString()})});if(!On.ok){const pe=await On.text();throw new Error(`Complete failed: ${pe}`)}const Wt=await On.json();wr(100),console.log("‚úÖ [R2 Multipart] Upload complete!",Wt),i.id===a.id&&(Te(pe=>{if(Wt.temp_id){const Be=pe.findIndex(Et=>Et.temp_id===Wt.temp_id);if(Be!==-1){const Et=[...pe];return Et[Be]=Wt,Et}}return Wt.id&&pe.some(Be=>Be.id===Wt.id)?pe:[...pe,Wt]}),jt("smooth"))}catch(T){console.error("‚ùå [R2 Multipart] Error:",T),D.error(`Y√ºkleme hatasƒ±: ${T.message}`)}wn(!1)},[a,P,_]),Xi=t=>{t.preventDefault(),t.stopPropagation(),br(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&Er(t.dataTransfer.files[0])},Qi=(t,r)=>{if(t.preventDefault(),t.stopPropagation(),lr(null),t.dataTransfer.files&&t.dataTransfer.files.length>0){const c=t.dataTransfer.files[0];if(r.type==="dm"){const y=lt.find(i=>i.id===r.id);if(y){const i=y.participants.find(v=>v.username!==P);i&&(zo(i.username),setTimeout(()=>{Er(c,!1,0,r)},300))}}else r.type==="room"&&roomsWithCategories.find(i=>i.room_slug===r.id)&&(handleRoomClick(r.id),setTimeout(()=>{Er(c,!1,0,r)},300))}},el=async t=>{if(t.preventDefault(),!a.id||!Pt.trim()){Pt.trim()||zs(!0,0);return}gr(!0);try{let r=`${B}/messages/search/?q=${encodeURIComponent(Pt)}`;a.type==="room"?r+=`&room=${a.id}`:r+=`&dm=${a.id}`;const c=await _(r);if(c.ok){const y=await c.json();Te(y.results||y)}}catch(r){console.error(r)}gr(!1)},Vs=async t=>{if(window.confirm("Bu mesajƒ± silmek istediƒüine emin misin?"))try{(await _(`${B}/messages/${t}/delete/`,{method:"DELETE"})).ok&&Te(c=>c.filter(y=>y.id!==t))}catch(r){console.error(r)}},tl=async t=>{if(window.confirm("Bu sohbeti listenizden gizlemek istiyor musunuz?"))try{(await _(`${B}/conversations/${t}/hide/`,{method:"POST"})).ok&&(Se(c=>c.filter(y=>y.id!==t)),a.type==="dm"&&a.id===t&&ie("welcome","welcome"))}catch(r){console.error(r)}},ol=async t=>{if(window.confirm(`‚ö†Ô∏è ADMƒ∞N: Bu konu≈ümayƒ± HER ƒ∞Kƒ∞ TARAFTAN KALICI OLARAK silmek istediƒüinize emin misiniz?

Bu i≈ülem GERƒ∞ ALINAMAZ!`))try{const r=await _(`${B}/conversations/${t}/admin-delete/`,{method:"DELETE"});if(r.ok){const c=await r.json();D.success(`‚úÖ ${c.deleted_messages} mesaj silindi. Katƒ±lƒ±mcƒ±lar: ${c.participants.join(", ")}`),Se(y=>y.filter(i=>i.id!==t)),a.type==="dm"&&a.id===t&&ie("welcome","welcome")}else{const c=await r.json();D.error(`‚ùå Hata: ${c.error||"Silme i≈ülemi ba≈üarƒ±sƒ±z"}`)}}catch(r){console.error(r),D.error("‚ùå Sunucuyla baƒülantƒ± hatasƒ±")}},rl=o.useCallback(()=>{ie("welcome","welcome",null),q&&we(!1)},[q]),nl=o.useCallback(async(t,r,c)=>{switch(t){case"profile":const y=ee.find(i=>i.username===r.username);y&&Qe(y);break;case"message":zo(r.username);break;case"volume":break;case"move":if(Ce&&c&&R)try{(await _(`${B}/voice/move_user/`,{method:"POST",body:JSON.stringify({username:r.username,from_channel:R,to_channel:c})})).ok&&console.log(`‚úÖ ${r.username} moved to ${c}`)}catch(i){console.error("Move user error:",i)}break;case"kick":if(Ce&&window.confirm(`${r.username} kullanƒ±cƒ±sƒ±nƒ± kanaldan atmak istediƒüine emin misin?`))try{(await _(`${B}/voice/kick_user/`,{method:"POST",body:JSON.stringify({username:r.username,room:R})})).ok&&console.log(`‚úÖ ${r.username} kicked from voice`)}catch(i){console.error("Kick user error:",i)}break;case"server_mute":if(Ce)try{(await _(`${B}/voice/server_mute/`,{method:"POST",body:JSON.stringify({username:r.username,room:R})})).ok&&console.log(`‚úÖ ${r.username} server muted`)}catch(i){console.error("Server mute error:",i)}break;case"add_friend":try{const i=await _(`${B}/friends/send/`,{method:"POST",body:JSON.stringify({username:r.username})});if(i.ok)de(`‚úÖ ${r.username} kullanƒ±cƒ±sƒ±na arkada≈ülƒ±k isteƒüi g√∂nderildi!`),setTimeout(()=>de(""),3e3);else{const v=await i.json();de(`‚ùå ${v.error||"ƒ∞stek g√∂nderilemedi"}`),setTimeout(()=>de(""),3e3)}}catch(i){console.error("Add friend error:",i),de("‚ùå Arkada≈ü ekleme hatasƒ±"),setTimeout(()=>de(""),3e3)}break;case"remove_friend":if(window.confirm(`${r.username} ile arkada≈ülƒ±ƒüƒ± sonlandƒ±rmak istediƒüinize emin misiniz?`))try{const i=Nt.find(v=>v.sender_username===r.username||v.receiver_username===r.username);if(i&&(await _(`${B}/friends/remove/${i.id}/`,{method:"DELETE"})).ok){de(`‚úÖ ${r.username} ile arkada≈ülƒ±k sonlandƒ±rƒ±ldƒ±`),setTimeout(()=>de(""),3e3);const T=await _(`${B}/friends/list/`);if(T.ok){const H=await T.json();xn(H.friends||[])}}}catch(i){console.error("Remove friend error:",i),de("‚ùå Arkada≈ülƒ±k sonlandƒ±rma hatasƒ±"),setTimeout(()=>de(""),3e3)}break;case"invite_to_server":kr({username:r.username});break;case"mute_user":try{const i=await _(`${B}/users/${r.username}/mute/`,{method:"POST"});if(i.ok)D.success(`üîá ${r.username} sessize alƒ±ndƒ±`);else{const v=await i.json();D.error(`‚ùå ${v.error||"Sessize alma ba≈üarƒ±sƒ±z"}`)}}catch(i){console.error("Mute user error:",i),D.error("‚ùå Sessize alma hatasƒ±")}break;case"block_user":if(window.confirm(`${r.username} kullanƒ±cƒ±sƒ±nƒ± engellemek istediƒüinize emin misiniz?`))try{const i=await _(`${B}/users/${r.username}/block/`,{method:"POST"});if(i.ok){D.success(`üö´ ${r.username} engellendi`);const v=await _(`${B}/friends/list/`);if(v.ok){const T=await v.json();xn(T.friends||[])}}else{const v=await i.json();D.error(`‚ùå ${v.error||"Engelleme ba≈üarƒ±sƒ±z"}`)}}catch(i){console.error("Block user error:",i),D.error("‚ùå Engelleme hatasƒ±")}break;default:console.log("Unknown action:",t)}},[ee,Ce,R,_,B,zo,Nt,de]),sl=()=>{if(yo){It(!0),de("ƒ∞ndiriliyor...");const{ipcRenderer:t}=window.require("electron"),r=`${E}/media/build/Pawscord-Setup.exe`;t.send("start-download",r)}else window.open(`${E}/media/build/Pawscord-Setup.exe`,"_blank")};o.useEffect(()=>{if(yo){const{ipcRenderer:t}=window.require("electron"),r=(i,v)=>er(Math.round(v*100)),c=()=>{de("Ba≈ülatƒ±lƒ±yor..."),er(100),setTimeout(()=>de("Kapanƒ±yor..."),1500)},y=(i,v)=>{It(!1),D.error(`ƒ∞ndirme hatasƒ±: ${v}`)};return t.on("download-progress",r),t.on("download-complete",c),t.on("download-error",y),()=>{t.removeAllListeners("download-progress"),t.removeAllListeners("download-complete"),t.removeAllListeners("download-error")}}},[]);const Bs=$!=="finished";if(!s)return e.jsxs(e.Fragment,{children:[Bs&&e.jsx(Js,{animationState:$}),e.jsx(Mc,{onLogin:Ji,onRegister:Zi,error:rn,setAuthError:We})]});const Rr=q&&!Rt?"20px":Ot,Pn=a.type==="room"?`room-${a.id}`:`dm-${a.id}`,Ar=!!Jt[Pn];return Es?e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"large",text:"Davet y√ºkleniyor..."}),children:e.jsx(Jd,{vanityPath:Es,fetchWithAuth:_,apiBaseUrl:E,onClose:()=>{Rs(null),window.location.hash="#/"}})}):e.jsxs("div",{style:{...z.mainContainer},className:"dark-theme",children:[Bs&&e.jsx(Js,{animationState:$}),Sr&&e.jsx(kc,{message:Sr.message,endTime:Sr.endTime,level:Sr.level,onDismiss:()=>bn(null)}),e.jsxs(o.Suspense,{fallback:e.jsx(Ye,{size:"medium",text:"Modal y√ºkleniyor..."}),children:[tn&&e.jsx(Qd,{user:ot,onClose:()=>sr(!1),onProfileUpdate:t=>yr(t),onLogout:x,fetchWithAuth:_,getDeterministicAvatar:Ve,updateProfileUrl:hu,changeUsernameUrl:xu,soundSettings:Oo,onUpdateSoundSettings:fs,onImageClick:St,apiBaseUrl:E}),oo&&e.jsx(Fc,{onClose:()=>jo(!1)}),ln&&e.jsx(rd,{onClose:()=>To(!1),fetchWithAuth:_,apiBaseUrl:E}),Eo&&e.jsx(nd,{onClose:()=>cr(!1),onOpenAnalytics:()=>To(!0),onOpenWebhooks:()=>dr(!0),onOpenModTools:()=>dn(!0),onOpenAuditLogs:()=>n(!0),onOpenReports:()=>Vt(!0),onOpenVanityURL:()=>ro(!0),onOpenAutoResponder:()=>k(!0),fetchWithAuth:_,apiBaseUrl:E}),Ci&&e.jsx($d,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>vs(!1),username:P}),ji&&e.jsx(zd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>_s(!1),username:P}),Ti&&e.jsx(Vd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>ks(!1),username:P}),Ei&&e.jsx(Bd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Cs(!1),username:P}),Ri&&e.jsx(Ud,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>js(!1),username:P}),Ai&&e.jsx(Nd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Ts(!1),serverId:a?.type==="room"?a.server_id:null}),Ii&&e.jsx(nu,{onClose:()=>As(!1)}),Pi&&e.jsx(su,{onClose:()=>Is(!1),apiBaseUrl:E}),ur&&e.jsx(id,{serverId:a?.type==="room"?a.server_id:null,fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Ro(!1)}),pn&&e.jsx(cd,{serverId:a?.type==="room"?a.server_id:null,fetchWithAuth:_,apiBaseUrl:E,onClose:()=>bt(!1)}),et&&e.jsx(dd,{serverId:a?.type==="room"?a.server_id:null,fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Vt(!1)}),no&&e.jsx(ud,{serverId:a?.type==="room"?a.server_id:null,fetchWithAuth:_,apiBaseUrl:E,onClose:()=>n(!1)}),d&&e.jsx(pd,{serverId:a?.type==="room"?a.server_id:null,fetchWithAuth:_,apiBaseUrl:E,onClose:()=>u(!1)}),cn&&e.jsx(sd,{serverId:a?.type==="room"?a.server_id:null,fetchWithAuth:_,apiBaseUrl:E,onClose:()=>dr(!1)}),un&&e.jsx(ad,{serverId:a?.type==="room"?a.server_id:null,fetchWithAuth:_,apiBaseUrl:E,onClose:()=>ro(!1)}),w&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Qs,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>k(!1)})}),S&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(fd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>g(!1),onMessageClick:t=>{t.room?ie({type:"room",slug:t.room}):t.conversation&&ie({type:"dm",slug:t.conversation}),g(!1)}})}),f&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(md,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>j(!1),onMessageClick:t=>{t.room?ie({type:"room",slug:t.room}):t.conversation&&ie({type:"dm",slug:t.conversation}),j(!1)}})}),L&&a?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(gd,{fetchWithAuth:_,apiBaseUrl:E,channelSlug:a.slug,onClose:()=>N(!1)})}),ur&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(ld,{fetchWithAuth:_,apiBaseUrl:E,serverId:a?.type==="room"?a.server_id:null,onClose:()=>Ro(!1)})}),Qo&&e.jsx(Nc,{symbol:Qo,onClose:()=>At(null)}),nn&&e.jsx(Yc,{onClose:()=>Co(!1),ws:ve,username:P}),Xt&&e.jsx(Uc,{onClose:()=>xo(!1),onSend:Gi}),cs&&e.jsx(td,{onClose:()=>ds(null),server:cs,currentUsername:P,fetchWithAuth:_,apiBaseUrl:E,serverMembers:Ft}),Jr&&e.jsx(Qc,{onClose:()=>Xo(!1),onSetKey:t=>Kr(Pn,t),existingKey:Jt[Pn]}),bi&&e.jsx(ed,{onClose:()=>ls(!1),apiBaseUrl:E}),us&&e.jsx(Xs,{isLoading:wi,summaryText:vi,onClose:()=>Sn(!1)}),Yr&&e.jsx(od,{onClose:()=>Jo(!1),friendsList:Nt,fetchWithAuth:_,apiBaseUrl:E,onGroupCreated:t=>{Se(r=>[t,...r]),ie("dm",t.id,"Grup Sohbeti")}}),qr&&(a.type==="room"||a.type==="dm")&&e.jsx(Wc,{roomSlug:a.type==="room"?a.id:`dm_${a.id}`,onClose:()=>Zt(!1),wsProtocol:Dr,apiHost:Mr}),Zo&&e.jsx(Gc,{onClose:()=>ht(!1),fetchWithAuth:_,apiBaseUrl:E,sendSignal:ae,absoluteHostUrl:E}),_i&&e.jsx(Zc,{onClose:()=>ms(!1),ws:ve,roomSlug:a.id}),on&&e.jsx(Jc,{onSelect:t=>{const r=t.startsWith("http")?t:E+t;An(r),ir(!1)},onClose:()=>ir(!1),localGifListUrl:Su,absoluteHostUrl:E,fetchWithAuth:_}),Ee&&e.jsx(qc,{onClose:()=>Dt(!1),onSelect:t=>{An(t),Dt(!1)},fetchWithAuth:_,apiBaseUrl:E}),So&&e.jsx(Bc,{onClose:()=>en(!1),fetchWithAuth:_,apiBaseUrl:E,activeRoomSlug:a.id})]}),fn&&a?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(hd,{fetchWithAuth:_,apiBaseUrl:E,roomSlug:a.slug,onClose:()=>Jn(!1)})}),mn&&a?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(yd,{fetchWithAuth:_,apiBaseUrl:E,roomSlug:a.slug,onClose:()=>Io(!1)})}),Ut&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(xd,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>tt(!1)})}),Po&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Sd,{fetchWithAuth:_,apiBaseUrl:E,username:P,onClose:()=>mr(!1)})}),gn&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(bd,{fetchWithAuth:_,apiBaseUrl:E,username:P,onClose:()=>hn(!1)})}),ba&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(wd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>wa(!1)})}),va&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(vd,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>_a(!1)})}),ka&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(_d,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Ca(!1)})}),ja&&a?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(kd,{fetchWithAuth:_,apiBaseUrl:E,roomSlug:a.slug,onClose:()=>Ta(!1)})}),Ea&&a?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Cd,{fetchWithAuth:_,apiBaseUrl:E,roomSlug:a.slug,onClose:()=>Ra(!1)})}),Aa&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(jd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Zn(!1),onLoadDraft:t=>{t.room&&ie({type:"room",slug:t.room}),Zn(!1)}})}),Ia&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Td,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>Pa(!1)})}),Oa&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Ed,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,currentUsername:P,onClose:()=>La(!1)})}),Da&&a?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Rd,{fetchWithAuth:_,apiBaseUrl:E,roomSlug:a.slug,onClose:()=>Ma(!1)})}),$a&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Ad,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>za(!1)})}),Va&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Qs,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>Ba(!1)})}),Ua&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Id,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Na(!1)})}),Fa&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Pd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Wa(!1)})}),Ga&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Od,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>Ha(!1)})}),Ka&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Ld,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Xn(!1),onSuccess:()=>{D.success("2FA ba≈üarƒ±yla etkinle≈ütirildi!"),Xn(!1)}})}),Ya&&a?.type==="room"&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Dd,{fetchWithAuth:_,apiBaseUrl:E,roomSlug:a.slug,onClose:()=>qa(!1)})}),Ja&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Md,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Za(!1)})}),Xa&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Fd,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>Qa(!1)})}),ei&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Wd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>Qn(!1),onMessageClick:t=>{t.room&&ie({type:"room",slug:t.room}),Qn(!1)}})}),ti&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Gd,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>oi(!1)})}),ri&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Hd,{fetchWithAuth:_,apiBaseUrl:E,url:null,onClose:()=>ni(!1)})}),si&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Kd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>ai(!1)})}),ii&&a?.type==="room"&&a.server_id&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Yd,{fetchWithAuth:_,apiBaseUrl:E,serverId:a.server_id,onClose:()=>li(!1)})}),ci&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(qd,{fetchWithAuth:_,apiBaseUrl:E,onClose:()=>di(!1)})}),ui&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"üéÆ Oyunlar Y√ºkleniyor..."}),children:e.jsx(lu,{fetchWithAuth:_,apiBaseUrl:E,serverId:a?.server_id,currentUser:P,onClose:()=>es(!1)})}),pi&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"üìÇ Projeler Y√ºkleniyor..."}),children:e.jsx(cu,{fetchWithAuth:_,apiBaseUrl:E,serverId:a?.server_id,currentUser:P,onClose:()=>ts(!1)})}),fi&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"üé® Avatar Studio Y√ºkleniyor..."}),children:e.jsx(du,{fetchWithAuth:_,apiBaseUrl:E,currentUser:P,onClose:()=>os(!1),onAvatarChange:t=>{ot&&yr({...ot,avatar_url:t}),D.success("üé® Avatar g√ºncellendi!")}})}),$t&&e.jsx(zc,{imageUrl:$t,onClose:()=>St(null)}),to&&e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"small",text:"Sabitlenmi≈ü mesajlar y√ºkleniyor..."}),children:e.jsx(tu,{messages:Je,onClose:()=>ar(!1)})}),Xe&&e.jsx(Vc,{user:Xe,onClose:()=>Qe(null),onStartDM:zo,onImageClick:St,getDeterministicAvatar:Ve,fetchWithAuth:_,apiBaseUrl:E,currentUser:P,friendsList:Nt}),q&&_o&&e.jsx("div",{style:z.mobileOverlay,onClick:()=>we(!1)}),q&&ko&&e.jsx("div",{style:z.mobileOverlay,onClick:()=>Fe(!1)}),e.jsxs("div",{style:z.chatLayout,children:[(!q||_o)&&e.jsxs("div",{style:{...z.sidebarWrapper,...q&&z.mobileSidebar,paddingTop:Rr,paddingBottom:rr,height:"100%",boxSizing:"border-box"},children:[q&&e.jsxs("div",{style:z.mobileSidebarHeader,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("img",{src:"https://media.pawscord.com/assets/logo.png",alt:"",style:{width:"24px",height:"24px"},onError:t=>{t.target.style.display="none"}}),e.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",color:"white"},children:"Pawscord"})]}),e.jsx("button",{onClick:()=>we(!1),style:z.closeSidebarButton,children:e.jsx(No,{})})]}),e.jsx(Xd,{onFriendsClick:()=>ie("friends","friends"),onRoomSelect:$s,onDMSelect:(t,r)=>ie("dm",t,r),onWelcomeClick:rl,setIsLeftSidebarVisible:we,onProfileClick:()=>sr(!0),onViewUserProfile:t=>{const r=ee.find(c=>c.username===t);r&&Qe(r)},onOpenStore:()=>jo(!0),onOpenServerSettings:t=>ds(t),categories:Li,onServerDragStart:Vi,onServerDragOver:Bi,onServerDragEnd:Ui,onServerDrop:Ni,conversations:lt,allUsers:ee,onlineUsers:jn,serverMembers:Ft,isAdmin:Ce,friendsList:Nt,pendingFriendRequests:yi,currentUsername:P,currentUserProfile:ot,getRealUserAvatar:He,getDeterministicAvatar:Ve,unreadCounts:Ko,joinVoiceChat:V,leaveVoiceChat:K,voiceUsers:Wr,isConnecting:I,currentVoiceRoom:R,currentRoom:R,currentConversationId:a.type==="dm"?a.id:null,remoteVolumes:F,setRemoteVolume:Y,isPttActive:Kt,apiBaseUrl:E,fetchWithAuth:_,onHideConversation:tl,handleDrop:Qi,dropTarget:sn,setDropTarget:lr,isDragging:gs,onOpenCreateGroup:()=>Jo(!0),toggleMute:se,toggleDeafened:J,isMuted:G,isDeafened:Q,isInVoice:A,toggleVideo:U,toggleScreenShare:W,isVideoEnabled:ge,isScreenSharing:fe,updateAvailable:as,onUpdateClick:()=>ls(!0),onOpenAnalytics:()=>To(!0),onOpenAdminPanel:()=>cr(!0),onOpenPaymentPanel:()=>vs(!0),onOpenStoreModal:()=>_s(!0),onOpenDailyRewards:()=>ks(!0),onOpenAPIUsage:()=>Cs(!0),onOpenExportJobs:()=>js(!0),onOpenScheduledAnnouncements:()=>Ts(!0),onOpenMiniGames:()=>es(!0),onOpenProjectCollaboration:()=>ts(!0),onOpenAvatarStudio:()=>os(!0),onServerSelect:Hi})]}),e.jsxs("div",{style:z.mainContent,children:[e.jsx("div",{style:{position:"absolute",top:60,left:0,right:0,zIndex:90},children:e.jsx(Dc,{message:ns?.message,type:ns?.type,onDismiss:()=>so(null)})}),a.type==="friends"?e.jsx("div",{style:{width:"100%",height:"100%",paddingTop:Rr},children:e.jsx(Zd,{fetchWithAuth:_,apiBaseUrl:E,onStartDM:zo,getDeterministicAvatar:Ve,onClose:()=>ie("welcome","welcome"),onPendingCountChange:xi,onlineUsers:jn})}):a.type==="welcome"?e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsx($c,{isMobile:q,onOpenMenu:()=>we(!0),onOpenRightMenu:()=>Fe(!0),updateAvailable:as,isDownloading:Zr,downloadProgress:Xr,updateStatusText:Qr,onStartUpdate:sl,onSwitchToFriends:()=>{ie("friends","friends"),q&&we(!1)},onSwitchToAI:()=>{$s("ai")},onSwitchToCinema:()=>{Co(!0),q&&we(!1)}})}):$i==="kanban"?e.jsxs("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:[e.jsx("div",{style:z.chatHeader,children:e.jsxs("h2",{children:["# ",$o," (Pano)"]})}),e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"medium",text:"Pano y√ºkleniyor..."}),children:e.jsx(Hc,{roomSlug:a.id,apiBaseUrl:E,fetchWithAuth:_})})]}):a.type==="voice"&&A?e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#2f3136"},children:[e.jsxs("div",{style:{...z.chatHeader,justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[q&&e.jsx("button",{onClick:()=>ie("welcome","welcome"),style:{...z.mobileMenuButton},children:"‚Üê"}),e.jsxs("h2",{style:{margin:0,fontSize:"1.2em"},children:["üîä ",R]})]}),e.jsx("button",{onClick:()=>{K(),ie("welcome","welcome")},style:{background:"#ed4245",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontWeight:"bold"},children:"Baƒülantƒ±yƒ± Kes"})]}),e.jsx(ea,{roomName:R,onClose:()=>{K(),ie("welcome","welcome")},isMinimized:!1,onToggleMinimize:()=>{},getRealUserAvatar:He,allUsers:ee,currentUserProfile:ot})]}):e.jsxs("div",{style:{...z.chatArea,position:"relative",paddingTop:Rr,boxSizing:"border-box"},onDrop:Xi,onDragOver:t=>{t.preventDefault(),br(!0)},onDragEnter:t=>{t.preventDefault(),br(!0)},onDragLeave:t=>{t.preventDefault(),t.target===t.currentTarget&&br(!1)},children:[e.jsxs("div",{style:{...z.chatHeader,justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",overflow:"hidden",gap:"8px"},children:[q&&!_o&&e.jsx("button",{onClick:()=>we(!0),style:{...z.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Men√ºy√º A√ß",children:"‚ò∞"}),q&&(a.type==="dm"||a.type==="room")&&e.jsx("button",{onClick:()=>{ie("welcome","welcome"),we(!1),Fe(!1)},style:{...z.mobileMenuButton,fontSize:"1.2em"},"aria-label":"Geri",children:"‚Üê"}),e.jsx("h2",{style:{display:"flex",alignItems:"center",gap:"10px",margin:0,fontSize:q?"1em":"1.1em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.type==="dm"?`@ ${String(a.targetUser||"DM")}`:`# ${String($o)}`}),e.jsx("div",{style:Ne?z.connectionPillOnline:z.connectionPillOffline,children:Ne?"Bagli":"Kopuk"})]}),e.jsxs("div",{style:{display:"flex",gap:q?"5px":"10px",alignItems:"center",flexWrap:q?"nowrap":"wrap",position:"relative"},children:[e.jsxs("form",{onSubmit:el,style:z.searchForm,children:[e.jsx("input",{type:"text",placeholder:"Ara...",value:tr,onChange:t=>or(t.target.value),style:z.searchInput,ref:Ls}),e.jsx(yl,{style:z.searchIcon})]}),!q&&Os.length>0&&e.jsxs("span",{style:z.typingIndicator,children:[Os.join(", ")," yazƒ±yor..."]}),e.jsx("button",{onClick:()=>bs(!_n),style:{...z.iconButton,color:_n?"#5865f2":"#b9bbbe",position:"relative"},title:"Bildirimler",children:e.jsx(Ws,{})}),_n&&e.jsx("div",{style:{position:"absolute",top:"54px",right:"20px",zIndex:1e3},children:e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"small",text:""}),children:e.jsx(au,{currentUser:P,onClose:()=>bs(!1),fetchWithAuth:_,apiBaseUrl:E})})}),e.jsxs("div",{className:"toolbar-menu-container",style:{position:"relative"},children:[e.jsx("button",{onClick:()=>$e(!Lo),style:{...z.iconButton,color:Lo?"#5865f2":"#b9bbbe",fontSize:"1.2em",fontWeight:"bold"},title:"Daha Fazla",children:"‚ãÆ"}),Lo&&e.jsxs("div",{style:{position:"absolute",top:"50px",right:"0",backgroundColor:"#2f3136",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.4)",minWidth:"220px",zIndex:1e3,overflow:"hidden",border:"1px solid #202225"},children:[a.type==="dm"&&e.jsxs("button",{onClick:()=>{Xo(!0),$e(!1)},style:{...z.menuItem,color:Ar?"#43b581":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=Ar?"#43b581":"#dcddde"},children:[Ar?e.jsx(Gs,{}):e.jsx(Gs,{style:{opacity:.5}}),e.jsx("span",{children:Ar?"≈ûifreli":"≈ûifrele"})]}),e.jsxs("button",{onClick:()=>{ar(!to),$e(!1)},style:{...z.menuItem,color:to?"#f5a524":"#dcddde"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=to?"#f5a524":"#dcddde"},children:[e.jsx(xl,{}),e.jsx("span",{children:"Sabitli Mesajlar"})]}),e.jsxs("button",{onClick:()=>{qi(),$e(!1)},style:z.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(Sl,{}),e.jsx("span",{children:"Baƒülantƒ±yƒ± Kopyala"})]}),e.jsxs("button",{onClick:()=>{Yi(),$e(!1)},style:{...z.menuItem,color:Oo.notifications?"#43b581":"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=Oo.notifications?"#43b581":"#f04747"},children:[Oo.notifications?e.jsx(Ws,{}):e.jsx(bl,{}),e.jsx("span",{children:Oo.notifications?"Sessize Al":"Sesi A√ß"})]}),e.jsx("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.jsxs("button",{onClick:()=>{Co(!0),$e(!1)},style:z.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(wl,{}),e.jsx("span",{children:"Sinema Modu"})]}),e.jsxs("button",{onClick:()=>{ms(!0),$e(!1)},style:z.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(vl,{}),e.jsx("span",{children:"DJ Modu"})]}),e.jsxs("button",{onClick:()=>{Zt(!0),$e(!1)},style:z.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(_l,{}),e.jsx("span",{children:"Beyaz Tahta"})]}),A&&e.jsxs("button",{onClick:()=>{ht(!0),$e(!1)},style:z.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(Hs,{}),e.jsx("span",{children:"Ses Efektleri"})]}),a.type==="room"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.jsxs("button",{onClick:()=>{Wi(),$e(!1)},style:z.menuItem,onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#5865f2",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#dcddde"},children:[e.jsx(Hs,{}),e.jsx("span",{children:"Sohbeti √ñzetle"})]}),e.jsxs("button",{onClick:()=>{Fi(),$e(!1)},style:{...z.menuItem,color:"#f04747"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#f04747",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#f04747"},children:[e.jsx(kl,{}),e.jsx("span",{children:"Sohbeti Temizle"})]}),P==="admin"&&a.type==="dm"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"1px",backgroundColor:"#40444b",margin:"4px 0"}}),e.jsxs("button",{onClick:()=>{ol(a.id),$e(!1)},style:{...z.menuItem,color:"#ed4245",fontWeight:"bold"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#ed4245",t.currentTarget.style.color="#ffffff"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color="#ed4245"},title:"Admin: Konu≈ümayƒ± kalƒ±cƒ± olarak sil (her iki taraftan)",children:[e.jsx(Cl,{}),e.jsx("span",{children:"‚ö†Ô∏è KALICI Sƒ∞L (ADMƒ∞N)"})]})]})]})]})]}),q&&!ko&&e.jsx("button",{onClick:()=>Fe(!0),style:{...z.mobileMenuButton,fontSize:"1.3em"},"aria-label":"Kullanƒ±cƒ±larƒ± G√∂ster",children:e.jsx(Mn,{})})]})]}),e.jsx("div",{style:z.messageBox,ref:Cn,onScroll:zi,children:gi?e.jsx("p",{style:z.systemMessage,children:"Y√ºkleniyor..."}):Tn.length>50?e.jsx(Pc,{messages:Tn,scrollToBottom:!0,renderMessage:(t,r)=>e.jsx(Zs,{msg:t,currentUser:P,absoluteHostUrl:E,isAdmin:Ce,onImageClick:St,fetchWithAuth:_,allUsers:ee,getDeterministicAvatar:Ve,onShowChart:At,onDelete:Vs,onStartEdit:co,onSetReply:ys,onToggleReaction:()=>{},onStartForward:xs,isSelectionMode:Ss,isSelected:Mt.has(t.id),onToggleSelection:c=>{const y=new Set(Mt);y.has(c)?y.delete(c):y.add(c),Re(y)},onScrollToMessage:Ms,onViewProfile:c=>Qe(ee.find(y=>y.username===c)),onTogglePin:c=>{}},t.id||t.temp_id||r)}):e.jsxs(e.Fragment,{children:[Tn.map((t,r)=>{const c=t.id||t.temp_id||r;return e.jsx(Zs,{msg:t,currentUser:P,absoluteHostUrl:E,isAdmin:Ce,onImageClick:St,fetchWithAuth:_,allUsers:ee,getDeterministicAvatar:Ve,onShowChart:At,onDelete:Vs,onStartEdit:co,onSetReply:ys,onToggleReaction:()=>{},onStartForward:xs,isSelectionMode:Ss,isSelected:Mt.has(t.id),onToggleSelection:y=>{const i=new Set(Mt);i.has(y)?i.delete(y):i.add(y),Re(i)},onScrollToMessage:Ms,onViewProfile:y=>Qe(ee.find(i=>i.username===y)),onTogglePin:y=>{}},c)}),e.jsx("div",{ref:kn,style:{float:"left",clear:"both",height:1}})]})}),ki&&e.jsx("button",{type:"button",style:z.scrollToBottomButton,onClick:()=>{jt("smooth"),vr(!1)},"aria-label":"En alta in",children:"En alta in"}),e.jsxs("div",{style:{...z.inputContainer,paddingBottom:Rt?`calc(16px + ${rr})`:q?"25px":"16px"},children:[gs&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(88, 101, 242, 0.2)",border:"2px dashed #5865f2",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1e3},children:e.jsx("div",{style:{color:"#5865f2",fontSize:"1.2em",fontWeight:"bold"},children:"üìÅ Dosyayƒ± buraya bƒ±rakƒ±n"})}),hs&&vn>0&&e.jsx("div",{style:{position:"absolute",top:"-40px",left:"16px",right:"16px",backgroundColor:"#2b2d31",borderRadius:"8px",padding:"8px 12px",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",zIndex:1001},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("span",{style:{color:"#b9bbbe",fontSize:"12px",whiteSpace:"nowrap"},children:["üì§ Y√ºkleniyor: ",vn,"%"]}),e.jsx("div",{style:{flex:1,height:"6px",backgroundColor:"#40444b",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${vn}%`,height:"100%",backgroundColor:"#5865f2",borderRadius:"3px",transition:"width 0.3s ease"}})})]})}),e.jsx(Oc,{onSendMessage:An,onFileUpload:Er,onShowCodeSnippet:()=>xo(!0),placeholder:$o?`${a.type==="dm"?$o:`# ${$o}`} kanalƒ±na mesaj g√∂nder`:"Mesaj yaz...",disabled:hs,fetchWithAuth:_,apiBaseUrl:E,activeChat:a})]})]}),(!q||ko)&&e.jsxs("div",{style:{...z.chatUserListPanel,...q?z.mobileRightSidebar:{},paddingTop:Rr},children:[q&&e.jsxs("div",{style:z.mobileSidebarHeader,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Mn,{size:18,color:"#b9bbbe"}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",color:"white"},children:a.type==="room"?"Sunucu √úyeleri":a.type==="friends"?"√áevrimi√ßi":"Arkada≈ülar"})]}),e.jsx("button",{onClick:()=>Fe(!1),style:z.closeSidebarButton,children:e.jsx(No,{})})]}),e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"small",text:"Kullanƒ±cƒ±lar y√ºkleniyor..."}),children:e.jsx(eu,{chatUsers:[],allUsers:ee,onlineUsers:jn,currentUser:P,currentUserProfile:ot,getDeterministicAvatar:Ve,onUserClick:t=>{let r=ee.find(c=>c.username===t);if(!r&&Ft.length>0){const c=Ft.find(y=>y.username===t);c&&(r={username:c.username,display_name:c.username,avatar:Ve(c.username),role:c.role||"member"})}r&&Qe(r)},onUserContextMenu:(t,r)=>{if(r===P)return;const c=ee.find(y=>y.username===r);c&&ws({x:t.clientX,y:t.clientY,user:c,permissions:Oi})},activeChat:a,serverMembers:Ft,friendsList:Nt,onNavigate:Ki})})]})]}),A&&e.jsx(Lc,{remoteStreams:le,remoteVolumes:F,mutedUsers:st}),A&&!it&&a.type!=="voice"&&e.jsx("button",{onClick:()=>wo(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9998,background:"#5865f2",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"all 0.2s"},title:"Ses Panelini A√ß",onMouseEnter:t=>t.currentTarget.style.transform="scale(1.1)",onMouseLeave:t=>t.currentTarget.style.transform="scale(1)",children:"üé§"}),A&&it&&a.type!=="voice"&&e.jsx(e.Fragment,{children:yt?e.jsx(ea,{roomName:R,onClose:()=>{wo(!1)},isMinimized:eo,onToggleMinimize:()=>vo(!eo),getRealUserAvatar:He,allUsers:ee,currentUserProfile:ot}):e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"small",text:"Sesli sohbet y√ºkleniyor..."}),children:e.jsx(ou,{islandState:Le,onDrag:t=>nr(r=>({...r,x:t.x,y:t.y})),onResize:t=>nr(r=>({...r,width:t.width,height:t.height})),isMobile:q,headerActions:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéõÔ∏è [VoiceIsland] Hiding panel"),wo(!1)},style:{background:"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:"Paneli Gizle",children:e.jsx(No,{})}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üé§ [VoiceIsland] Mute toggle clicked"),se()},style:{background:G?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:G?"Mikrofonu A√ß":"Mikrofonu Kapat",children:e.jsx(Nn,{style:{opacity:G?.5:1}})}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üéß [VoiceIsland] Deafen toggle clicked"),J()},style:{background:Q?"#ed4245":"#23a559",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:Q?"Sesi A√ß":"Sesi Kapat",children:e.jsx(jl,{style:{opacity:Q?.5:1}})}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üìπ [VoiceIsland] Video toggle clicked"),U()},style:{background:ge?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:ge?"Kamerayƒ± Kapat":"Kamerayƒ± A√ß",children:e.jsx(Tl,{style:{opacity:ge?1:.5}})}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("üñ•Ô∏è [VoiceIsland] Screen share toggle clicked"),W()},style:{background:fe?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},title:fe?"Ekran Payla≈üƒ±mƒ±nƒ± Durdur":"Ekranƒ± Payla≈ü",children:e.jsx(El,{style:{opacity:fe?1:.5}})}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsx("button",{onClick:K,style:{background:"#ed4245",color:"white",border:"none",borderRadius:"4px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},title:"Odadan Ayrƒ±l",children:e.jsx(Rl,{})}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsx("button",{onClick:()=>gt(t=>({...t,isActive:!t.isActive})),style:{background:nt.isActive?"#5865f2":"rgba(255,255,255,0.1)",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:nt.isActive?"üé¨ Kapat":"üçø Sinema"}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsxs("select",{onChange:t=>qt(t.target.value),value:mt,style:{background:"rgba(0,0,0,0.3)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"4px",padding:"2px 4px",fontSize:"12px",cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"none",children:"Normal"}),e.jsx("option",{value:"robot",children:"ü§ñ Robot"}),e.jsx("option",{value:"child",children:"üë∂ Bebek"}),e.jsx("option",{value:"monster",children:"üëπ Canavar"})]}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",gap:"5px"},children:[e.jsx("button",{onClick:()=>ke("reset"),title:"Reset Game",style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px"},children:"üîÑ"}),["ü™®","üìÑ","‚úÇÔ∏è"].map((t,r)=>{const c=r===0?"rock":r===1?"paper":"scissors";return e.jsx("button",{onClick:()=>ke("move",c),style:{background:Ue?.moves?.[P]===c?"rgba(88, 101, 242, 0.5)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"50%",cursor:"pointer",fontSize:"16px",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.1s"},title:`Play ${c}`,children:t},t)})]}),e.jsx("div",{style:{width:"1px",height:"20px",background:"rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{display:"flex",gap:"5px"},children:["‚ù§Ô∏è","üòÇ","üòÆ","üëç","üéâ"].map(t=>e.jsx("button",{onClick:()=>Go(t),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"16px",padding:"0 4px",transition:"transform 0.1s"},onMouseEnter:r=>r.target.style.transform="scale(1.2)",onMouseLeave:r=>r.target.style.transform="scale(1)",title:`Send ${t}`,children:t},t))})]}),children:nt.isActive?e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("div",{style:{flex:1,minHeight:0,position:"relative"},children:e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"large",text:"Cinema Player y√ºkleniyor...",fullscreen:!0}),children:e.jsx(ru,{})})}),e.jsx("div",{style:{height:"140px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",background:"rgba(0,0,0,0.5)",flexShrink:0,alignItems:"center"},children:(()=>{const t=[];return t.push({id:"local-cam",user:{username:P,is_talking:Z,is_mic_off:G,is_deafened:Q},track:me?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:He(P)}),Yt&&t.push({id:"local-screen",user:{username:P},track:Yt.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:He(P)}),Object.entries(le||{}).forEach(([r,c])=>{const y=c.getVideoTracks(),i=c.getAudioTracks();y.length>0?y.forEach(v=>t.push({id:`${r}-${v.id}`,user:{username:r},track:v,streamType:"camera",isLocal:!1,avatarUrl:He(r)})):i.length>0&&t.push({id:`${r}-audio`,user:{username:r},track:i[0],streamType:"camera",isLocal:!1,avatarUrl:He(r)})}),t.map(r=>e.jsx(Lr,{...r,style:{height:"100%",aspectRatio:"16/9",minWidth:"160px"},lastReaction:ce,gameMove:Ue?.moves?.[r.user.username]},r.id))})()})]}):e.jsx("div",{style:{...z.videoGrid,flexDirection:ze?"column":"row",flexWrap:ze?"nowrap":"wrap",overflowY:"auto",height:"100%"},children:(()=>{const t=[];if(t.push({id:"local-cam",user:{username:P,is_talking:Z,is_mic_off:G,is_deafened:Q},track:me?.getVideoTracks()[0]||null,streamType:"camera",isLocal:!0,avatarUrl:He(P)}),Yt?.getVideoTracks()[0]&&t.push({id:"local-screen",user:{username:P,is_talking:!1},track:Yt.getVideoTracks()[0],streamType:"screen",isLocal:!0,avatarUrl:He(P)}),Object.entries(le||{}).forEach(([c,y])=>{if(c!==P){const i=y.getVideoTracks(),v=y.getAudioTracks();i.length>0?i.forEach(T=>{t.push({id:`${c}-${T.id}`,user:{username:c},track:T,streamType:T.label?.toLowerCase().includes("screen")?"screen":"camera",isLocal:!1,avatarUrl:He(c)})}):v.length>0&&t.push({id:`${c}-audio`,user:{username:c},track:v[0],streamType:"camera",isLocal:!1,avatarUrl:He(c)})}}),ze){const c=t.find(i=>i.id===ze);if(!c)return Qt(null),r(t);const y=t.filter(i=>i.id!==ze);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1,width:"100%",minHeight:"300px",padding:"0",overflow:"hidden",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000"},children:e.jsx(Lr,{...c,style:{width:"100%",height:"100%",maxWidth:"100%",borderRadius:"0",maxHeight:"100%",margin:"0 auto",aspectRatio:"unset"},onClick:()=>Qt(null),lastReaction:ce,gameMove:Ue?.moves?.[c.user?.username]})}),e.jsx("div",{style:{height:"120px",display:"flex",gap:"8px",padding:"10px",overflowX:"auto",flexShrink:0,justifyContent:"center"},children:y.map(i=>e.jsx(Lr,{...i,style:{width:"180px",height:"100%",flexShrink:0,aspectRatio:"16/9"},onClick:()=>Qt(i.id),lastReaction:ce,gameMove:Ue?.moves?.[i.user.username]},i.id))})]})}else return r(t);function r(c){return c.map(y=>e.jsx(Lr,{...y,style:{width:"240px",maxWidth:"100%",flexGrow:1,height:"auto"},onClick:()=>Qt(y.id),lastReaction:ce,gameMove:Ue?.moves?.[y.user.username]},y.id))}})()})})})}),an&&e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"medium",text:"Temalar y√ºkleniyor..."}),children:e.jsx(Xc,{onClose:()=>zt(!1),currentTheme:mi,onThemeChange:rs})}),us&&e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"medium",text:"√ñzet hazƒ±rlanƒ±yor..."}),children:e.jsx(Xs,{roomSlug:a.id,onClose:()=>Sn(!1),fetchWithAuth:_,apiBaseUrl:E})}),Kn&&e.jsx(o.Suspense,{fallback:e.jsx(Ye,{size:"small",text:"≈ûablonlar y√ºkleniyor..."}),children:e.jsx(Kc,{onClose:()=>at(!1),onSelect:t=>{Mo.current?.appendText?.(t),at(!1)},fetchWithAuth:_,apiBaseUrl:E,isAdmin:Ce})})]}),_r&&e.jsx(iu,{x:_r.x,y:_r.y,user:_r.user,currentUser:P,onClose:()=>ws(null),onAction:nl,voiceChannels:M.flatMap(t=>(t.categories||[]).flatMap(r=>(r.rooms||[]).filter(c=>c.is_voice))),isAdmin:Ce,isInVoiceRoom:A,friendsList:Nt}),Do&&pl.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999999},onClick:()=>kr(null),children:e.jsxs("div",{onClick:t=>t.stopPropagation(),style:{backgroundColor:"#2b2d31",borderRadius:"12px",width:"400px",maxHeight:"80vh",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #3f4147",textAlign:"center"},children:[e.jsx("h2",{style:{color:"#f2f3f5",margin:0,fontSize:"18px"},children:"üé´ Sunucuya Davet Et"}),e.jsxs("p",{style:{color:"#b9bbbe",margin:"8px 0 0",fontSize:"14px"},children:[e.jsx("strong",{children:Do.username})," kullanƒ±cƒ±sƒ±nƒ± hangi sunucuya davet etmek istiyorsunuz?"]})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"12px"},children:M.map(t=>e.jsxs("div",{onClick:async()=>{try{const r=await _(`${B}/servers/${t.id}/invite/`,{method:"POST",body:JSON.stringify({target_username:Do.username})});if(r.ok)D.success(`üé´ ${Do.username} kullanƒ±cƒ±sƒ±na davetiye g√∂nderildi!`);else{const c=await r.json();c.error&&c.error.includes("zaten")?D.info(`‚ÑπÔ∏è ${Do.username} zaten bu sunucunun √ºyesi!`):D.error(`‚ùå ${c.error||"Davet g√∂nderilemedi"}`)}}catch(r){console.error("‚ùå Invite error:",r),D.error("‚ùå Baƒülantƒ± hatasƒ±")}kr(null)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",backgroundColor:"rgba(255,255,255,0.02)",marginBottom:"8px"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="rgba(88, 101, 242, 0.2)"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="rgba(255,255,255,0.02)"},children:[t.icon?e.jsx("img",{src:t.icon,alt:t.name,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover"}}):e.jsx("div",{style:{width:40,height:40,borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"white",fontSize:"16px"},children:t.name?.substring(0,2).toUpperCase()}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#f2f3f5",fontWeight:"600"},children:t.name}),e.jsxs("div",{style:{color:"#b9bbbe",fontSize:"12px"},children:[t.member_count||t.categories?.length||0," √ºye"]})]}),e.jsx("div",{style:{color:"#5865f2",fontSize:"20px"},children:"‚Üí"})]},t.id))}),e.jsx("div",{style:{padding:"16px 20px",borderTop:"1px solid #3f4147",textAlign:"center"},children:e.jsx("button",{onClick:()=>kr(null),style:{backgroundColor:"#4f545c",color:"#f2f3f5",border:"none",padding:"10px 24px",borderRadius:"4px",cursor:"pointer",fontWeight:"600"},children:"ƒ∞ptal"})})]})}),document.body)]})},z={mainContainer:{display:"flex",width:"100%",height:"100dvh",backgroundColor:"#1E1F22",backgroundImage:"radial-gradient(circle at 50% 10%, rgba(88, 101, 242, 0.05) 0%, transparent 40%)",color:"white",overflow:"hidden",fontFamily:"'Inter', sans-serif"},chatLayout:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},sidebarWrapper:{width:"312px",backgroundColor:"rgba(30, 31, 34, 0.6)",backdropFilter:"blur(10px)",display:"flex",flexDirection:"row",flexShrink:0,height:"100%",borderRight:"1px solid rgba(255,255,255,0.05)"},mainContent:{flex:1,display:"flex",minWidth:0,position:"relative",height:"100%",overflow:"hidden"},chatArea:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"transparent",minWidth:0,height:"100%",overflow:"hidden",position:"relative"},chatHeader:{height:"54px",minHeight:"54px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",padding:"0 20px",flexShrink:0,backgroundColor:"rgba(20, 21, 24, 0.7)",backdropFilter:"blur(15px)",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",zIndex:10},messageBox:{flex:1,overflowY:"auto",padding:"20px 0",display:"flex",flexDirection:"column",gap:"4px",scrollBehavior:"smooth",minHeight:0},inputContainer:{padding:"0 20px 24px 20px",backgroundColor:"transparent",position:"relative",flexShrink:0,minHeight:"auto",zIndex:20},chatUserListPanel:{width:"240px",backgroundColor:"rgba(30, 31, 34, 0.6)",borderLeft:"1px solid rgba(255,255,255,0.08)",flexShrink:0,height:"100%",backdropFilter:"blur(10px)"},mobileSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,left:0,width:"85vw",maxWidth:"350px",boxShadow:"5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileRightSidebar:{position:"fixed",zIndex:100,top:0,bottom:0,right:0,width:"85vw",maxWidth:"300px",boxShadow:"-5px 0 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column"},mobileOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99,backdropFilter:"blur(3px)"},mobileMenuButton:{background:"none",border:"none",color:"white",fontSize:"1.5em",marginRight:"10px",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",transition:"all 0.2s"},iconButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"1.3em",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",borderRadius:"50%",transition:"all 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff"}},videoGrid:{display:"flex",flexWrap:"wrap",gap:"5px",padding:"5px",alignContent:"center",justifyContent:"center",alignItems:"center"},systemMessage:{color:"#949ba4",textAlign:"center",fontSize:"0.85em",margin:"10px 0",fontStyle:"italic"},searchForm:{position:"relative",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"4px",padding:"0 8px",height:"32px",marginRight:"8px",border:"1px solid rgba(255,255,255,0.05)"},searchInput:{backgroundColor:"transparent",border:"none",color:"#dcddde",fontSize:"0.9em",width:"140px",outline:"none"},searchIcon:{color:"#949ba4",fontSize:"0.8em",cursor:"pointer"},typingIndicator:{color:"#dbdee1",fontSize:"0.85em",maxWidth:"180px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold"},connectionPillOnline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(59, 165, 93, 0.2)",border:"1px solid #3ba55d",color:"#3ba55d",fontSize:"0.75em",fontWeight:700},connectionPillOffline:{marginLeft:"10px",padding:"4px 8px",borderRadius:"999px",backgroundColor:"rgba(218, 55, 60, 0.2)",border:"1px solid #da373c",color:"#da373c",fontSize:"0.75em",fontWeight:700},scrollToBottomButton:{position:"absolute",right:"16px",bottom:"110px",backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.35)",cursor:"pointer",fontWeight:600},mobileSidebarHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",backgroundColor:"#202225",borderBottom:"1px solid #111214",minHeight:"54px",flexShrink:0},closeSidebarButton:{background:"none",border:"none",color:"#b9bbbe",fontSize:"22px",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background 0.2s, color 0.2s"},menuItem:{width:"100%",padding:"10px 16px",background:"transparent",border:"none",color:"#dcddde",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:"500",transition:"all 0.15s ease",borderRadius:"0"}};function _u(){return e.jsx(Bl,{fallbackMessage:"Pawscord encountered an error. Please try refreshing the page.",children:e.jsx(wc,{children:e.jsx(vu,{})})})}const ku=`${yc}/auth/verify-email/`,Cu=()=>{const{token:p}=aa(),s=Nr(),[l,b]=o.useState("loading"),[x,C]=o.useState("Hesabƒ±nƒ±z doƒürulanƒ±yor, l√ºtfen bekleyin...");return o.useEffect(()=>{if(!p){b("error"),C("Ge√ßersiz veya eksik doƒürulama kodu.");return}const A=async()=>{try{const I=await fetch(`${ku}${p}/`),R=await I.json();I.ok?(b("success"),C("√úyeliƒüiniz ba≈üarƒ±yla aktif edildi!")):(b("error"),C(R.message||"Doƒürulama ba≈üarƒ±sƒ±z oldu."))}catch{b("error"),C("Sunucuya baƒülanƒ±lamadƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.")}};setTimeout(()=>{A()},1e3)},[p]),e.jsx("div",{style:Oe.container,children:e.jsxs("div",{style:Oe.card,children:[l==="loading"&&e.jsxs("div",{style:Oe.content,children:[e.jsx(la,{className:"spin-animation",size:50,color:"#5865f2",style:{marginBottom:20}}),e.jsx("h2",{style:Oe.title,children:"Doƒürulanƒ±yor..."}),e.jsx("p",{style:Oe.text,children:x})]}),l==="success"&&e.jsxs("div",{style:Oe.content,children:[e.jsx(Fn,{size:60,color:"#43b581",style:{marginBottom:20}}),e.jsx("h2",{style:{...Oe.title,color:"#43b581"},children:"Tebrikler! üéâ"}),e.jsx("p",{style:Oe.text,children:x}),e.jsx("p",{style:Oe.subText,children:"Artƒ±k Pawscord'a tam eri≈üim saƒülayabilirsin."}),e.jsx("button",{onClick:()=>s("/"),style:Oe.primaryButton,children:"Gƒ∞Rƒ∞≈û YAP"})]}),l==="error"&&e.jsxs("div",{style:Oe.content,children:[e.jsx(Wn,{size:60,color:"#f04747",style:{marginBottom:20}}),e.jsx("h2",{style:{...Oe.title,color:"#f04747"},children:"Hata Olu≈ütu"}),e.jsx("p",{style:Oe.text,children:x}),e.jsx("button",{onClick:()=>s("/"),style:Oe.secondaryButton,children:"Ana Sayfaya D√∂n"})]})]})})},Oe={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#1e1f22",fontFamily:"'Poppins', sans-serif",padding:"20px"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.5)",maxWidth:"400px",width:"100%",textAlign:"center",border:"1px solid #1f2023"},content:{display:"flex",flexDirection:"column",alignItems:"center"},title:{margin:"0 0 10px 0",color:"#fff",fontSize:"1.8em"},text:{color:"#dbdee1",fontSize:"1.1em",margin:"0 0 20px 0",lineHeight:"1.5"},subText:{color:"#949ba4",fontSize:"0.9em",marginBottom:"30px"},primaryButton:{backgroundColor:"#5865f2",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",width:"100%"},secondaryButton:{backgroundColor:"#4f545c",color:"white",border:"none",padding:"12px 30px",borderRadius:"5px",fontSize:"1em",fontWeight:"bold",cursor:"pointer",width:"100%"}},ha=document.createElement("style");ha.innerText=`
  .spin-animation { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(ha);const ju=m.memo(Cu),Tu=()=>{const{code:p}=aa(),s=Nr(),{isAuthenticated:l,token:b}=Fo(),[x,C]=o.useState(null),[A,I]=o.useState(!0),[R,V]=o.useState(""),[K,G]=o.useState(!1),[Q,se]=o.useState(!1),J="8888",U=window.Capacitor&&window.Capacitor.isNativePlatform(),W=typeof window<"u"&&typeof window.require=="function",Y=`${(()=>{if(U)return"https://www.pawscord.com";if(W)return`http://127.0.0.1:${J}`;const Z=window.location.protocol,ae=window.location.hostname;return ae.includes("pawscord.com")?"https://www.pawscord.com":`${Z}//${ae}:${J}`})()}/api`;o.useEffect(()=>{console.log("üé´ [Invite Page] Loaded with code:",p),me()},[p]);const me=async()=>{console.log("üîç [Invite Page] Fetching invite info..."),I(!0),V("");try{const Z=await fetch(`${Y}/invites/${p}/`),ae=await Z.json();console.log("üì¶ [Invite Page] Response:",{status:Z.status,data:ae}),Z.ok?(C(ae),console.log("‚úÖ [Invite Page] Invite info loaded")):(V(ae.error||"Davet bulunamadƒ±"),console.error("‚ùå [Invite Page] Error:",ae.error))}catch(Z){console.error("‚ùå [Invite Page] Network error:",Z),V("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}I(!1)},le=async()=>{if(!l){console.log("‚ö†Ô∏è [Invite Page] User not authenticated, redirecting to login"),D.error("‚ùå L√ºtfen √∂nce giri≈ü yapƒ±n!"),sessionStorage.setItem("pending_invite",p),s("/");return}if(!b){console.error("‚ùå [Invite Page] No token found!"),D.error("‚ùå Giri≈ü token'ƒ± bulunamadƒ±. L√ºtfen tekrar giri≈ü yapƒ±n."),s("/");return}console.log("üé´ [Invite Page] Accepting invite...",{code:p,apiUrl:`${Y}/invites/${p}/accept/`,hasToken:!!b}),G(!0),V("");try{const Z=`${Y}/invites/${p}/accept/`;console.log("üì° [Invite Page] POST to:",Z);const ae=await fetch(Z,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});console.log("üì¶ [Invite Page] Response status:",ae.status);const fe=await ae.json();if(console.log("üì¶ [Invite Page] Response data:",fe),ae.ok){console.log("‚úÖ [Invite Page] Successfully joined server!"),D.success(`‚úÖ Ba≈üarƒ±lƒ±! ${fe.server_name||"Sunucu"}ya katƒ±ldƒ±nƒ±z!`),se(!0);const ge=fe.redirect||"/";console.log("üîó [Invite Page] Redirecting to:",ge),setTimeout(()=>{ge.startsWith("http")?window.location.href=ge:(s(ge),window.location.reload())},2e3)}else{const ge=fe.error||fe.message||"Sunucuya katƒ±lma hatasƒ±";console.error("‚ùå [Invite Page] Join failed:",ge,fe),V(ge),D.error(`‚ùå Hata: ${ge}`)}}catch(Z){console.error("‚ùå [Invite Page] Exception:",Z);const ae=Z.message||"Baƒülantƒ± hatasƒ±";V(ae),D.error(`‚ùå Hata: ${ae}`)}G(!1)};return A?e.jsxs("div",{style:X.container,children:[e.jsx("div",{style:X.backgroundGradient}),e.jsxs("div",{style:X.card,children:[e.jsx("div",{style:X.spinner}),e.jsx("p",{style:X.loadingText,children:"Davet y√ºkleniyor..."})]})]}):R?e.jsxs("div",{style:X.container,children:[e.jsx("div",{style:X.backgroundGradient}),e.jsxs("div",{style:X.card,children:[e.jsx(Wn,{size:64,color:"var(--error)"}),e.jsx("h2",{style:X.errorTitle,children:"Hata"}),e.jsx("p",{style:X.errorText,children:R}),e.jsx("button",{onClick:()=>s("/"),style:X.homeButton,children:"Ana Sayfaya D√∂n"})]})]}):Q?e.jsxs("div",{style:X.container,children:[e.jsx("div",{style:X.backgroundGradient}),e.jsxs("div",{style:X.card,children:[e.jsx(Fn,{size:64,color:"var(--success)"}),e.jsx("h2",{style:X.successTitle,children:"Ba≈üarƒ±lƒ±!"}),e.jsxs("p",{style:X.successText,children:[e.jsx("strong",{children:x.server.name})," sunucusuna katƒ±ldƒ±nƒ±z!"]}),e.jsx("p",{style:X.redirectText,children:"Ana sayfaya y√∂nlendiriliyorsunuz..."})]})]}):e.jsxs("div",{style:X.container,children:[e.jsx("div",{style:X.backgroundGradient}),e.jsxs("div",{style:X.card,children:[x.server.icon&&e.jsx("img",{src:x.server.icon,alt:x.server.name,style:X.serverIcon}),e.jsxs("h1",{style:X.serverName,children:[e.jsx(Al,{style:X.icon}),x.server.name]}),e.jsxs("div",{style:X.infoRow,children:[e.jsx(Mn,{style:X.infoIcon}),e.jsxs("span",{children:[x.server.member_count," √úye"]})]}),x.expires_at&&e.jsxs("div",{style:X.infoRow,children:[e.jsx(Il,{style:X.infoIcon}),e.jsxs("span",{children:["S√ºre: ",new Date(x.expires_at).toLocaleString("tr-TR")]})]}),x.max_uses>0&&e.jsx("div",{style:X.infoRow,children:e.jsxs("span",{children:["Kullanƒ±m: ",x.uses," / ",x.max_uses]})}),e.jsxs("div",{style:X.inviterInfo,children:["Davet Eden: ",e.jsx("strong",{children:x.inviter.username})]}),e.jsx("button",{onClick:le,disabled:K,style:{...X.joinButton,...K?X.joinButtonDisabled:{}},children:K?"Katƒ±lƒ±nƒ±yor...":l?"Sunucuya Katƒ±l":"Giri≈ü Yap ve Katƒ±l"}),!l&&e.jsx("p",{style:X.loginHint,children:"* Sunucuya katƒ±lmak i√ßin giri≈ü yapmanƒ±z gerekiyor"})]})]})},X={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"var(--bg-app)",padding:"20px",position:"relative",overflow:"hidden"},backgroundGradient:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(ellipse at top, rgba(139, 92, 246, 0.15), transparent 50%), radial-gradient(ellipse at bottom, rgba(118, 75, 162, 0.15), transparent 50%)",pointerEvents:"none",zIndex:0},card:{background:"var(--glass-bg)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",padding:"48px",borderRadius:"var(--radius-2xl)",textAlign:"center",color:"var(--text-primary)",maxWidth:"560px",width:"100%",boxShadow:"var(--shadow-2xl)",border:"1px solid var(--glass-border)",position:"relative",zIndex:1,animation:"scaleIn 0.4s ease-out"},spinner:{width:"50px",height:"50px",border:"3px solid var(--glass-border)",borderTop:"3px solid var(--brand-primary)",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto"},loadingText:{marginTop:"24px",color:"var(--text-tertiary)",fontSize:"15px",fontWeight:500},serverIcon:{width:"120px",height:"120px",borderRadius:"50%",marginBottom:"24px",objectFit:"cover",border:"4px solid var(--glass-border)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.2)",transition:"var(--transition-normal)"},serverName:{fontSize:"32px",fontWeight:800,marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",background:"var(--gradient-primary)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},icon:{fontSize:"28px",color:"var(--brand-primary)"},infoRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"16px 0",color:"var(--text-secondary)",fontSize:"16px",fontWeight:500,padding:"12px 20px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},infoIcon:{fontSize:"20px",color:"var(--brand-primary)"},inviterInfo:{marginTop:"24px",marginBottom:"32px",color:"var(--text-tertiary)",fontSize:"14px",padding:"16px",background:"var(--bg-elevated)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},joinButton:{background:"var(--gradient-primary)",color:"white",border:"none",padding:"16px 32px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"16px",fontWeight:700,marginTop:"16px",width:"100%",transition:"var(--transition-normal)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.4)",position:"relative",overflow:"hidden"},joinButtonDisabled:{background:"var(--bg-tertiary)",cursor:"not-allowed",opacity:.6,boxShadow:"none"},loginHint:{marginTop:"20px",fontSize:"13px",color:"var(--warning)",fontStyle:"italic",fontWeight:500},errorTitle:{color:"var(--error)",marginTop:"24px",fontSize:"28px",fontWeight:700},errorText:{color:"var(--text-tertiary)",margin:"24px 0",fontSize:"15px",lineHeight:1.6},successTitle:{color:"var(--success)",marginTop:"24px",fontSize:"28px",fontWeight:700},successText:{color:"var(--text-primary)",margin:"24px 0",fontSize:"18px",fontWeight:600},redirectText:{color:"var(--text-tertiary)",fontSize:"14px",marginTop:"12px",fontStyle:"italic"},homeButton:{background:"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--glass-border)",padding:"14px 28px",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"15px",fontWeight:600,marginTop:"24px",transition:"var(--transition-normal)"}},ya=document.createElement("style");ya.textContent=`
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`;document.head.appendChild(ya);const Eu=({apiBaseUrl:p})=>{const[s,l]=o.useState(!1),[b,x]=o.useState([]),[C,A]=o.useState(!1),I=o.useRef(null),R=o.useRef([]),V=o.useRef(null),{token:K}=Fo(),G=()=>{V.current?.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{G()},[b,C]);const Q=async()=>{try{const U=await navigator.mediaDevices.getUserMedia({audio:!0});I.current=new MediaRecorder(U),R.current=[],I.current.ondataavailable=W=>{W.data.size>0&&R.current.push(W.data)},I.current.onstop=J,I.current.start(),l(!0)}catch{D.error("‚ùå Mikrofon izni gerekli!")}},se=()=>{I.current&&s&&(I.current.stop(),l(!1))},J=async()=>{A(!0);const U=new Blob(R.current,{type:"audio/webm"}),W=new FormData;W.append("audio",U,"voice.webm");try{const F=await fetch(`${p}/eng-learn/voice-chat/`,{method:"POST",headers:{Authorization:`Bearer ${K}`},body:W});if(F.ok){const Y=await F.json();x(le=>[...le,{sender:"user",text:Y.user_text},{sender:"ai",text:Y.ai_text}]),new Audio(`data:audio/mp3;base64,${Y.audio_base64}`).play()}else console.error("Sunucu hatasƒ±:",F.status),D.error("‚ùå Anla≈üƒ±lamadƒ± veya hata olu≈ütu.")}catch(F){console.error(F),D.error("‚ùå Baƒülantƒ± hatasƒ±.")}finally{A(!1)}};return e.jsxs("div",{style:ut.container,children:[e.jsxs("div",{style:ut.header,children:[e.jsxs(ia,{to:"/eng-learn",style:ut.backBtn,children:[e.jsx(ca,{})," Geri"]}),e.jsx("h2",{children:"AI ile Konu≈ü (Speaking)"})]}),e.jsxs("div",{style:ut.chatArea,children:[b.length===0&&e.jsxs("div",{style:ut.emptyState,children:[e.jsx(Ks,{size:60,color:"#5865f2",style:{marginBottom:20}}),e.jsx("h3",{children:"ƒ∞ngilizce Pratik Yap"}),e.jsx("p",{children:"Mikrofona basƒ±lƒ± tut ve konu≈ümaya ba≈üla."}),e.jsx("small",{style:{color:"#72767d"},children:'"Hello, how are you?" diyebilirsin.'})]}),b.map((U,W)=>e.jsxs("div",{style:{...ut.messageBubble,alignSelf:U.sender==="user"?"flex-end":"flex-start",backgroundColor:U.sender==="user"?"#5865f2":"#2b2d31",color:"white",borderBottomRightRadius:U.sender==="user"?"0":"12px",borderBottomLeftRadius:U.sender==="ai"?"0":"12px"},children:[e.jsxs("div",{style:ut.msgHeader,children:[U.sender==="user"?e.jsx(Pl,{size:12}):e.jsx(Ks,{size:12}),e.jsx("span",{style:{marginLeft:5,fontSize:"0.8em",fontWeight:"bold"},children:U.sender==="user"?"Sen":"AI √ñƒüretmen"})]}),U.text]},W)),C&&e.jsx("div",{style:{alignSelf:"flex-start",color:"#949ba4",marginLeft:10,fontStyle:"italic"},children:"Yazƒ±yor ve seslendiriyor..."}),e.jsx("div",{ref:V})]}),e.jsxs("div",{style:ut.controls,children:[e.jsx("button",{onMouseDown:Q,onMouseUp:se,onTouchStart:Q,onTouchEnd:se,style:{...ut.micButton,backgroundColor:s?"#f04747":"#5865f2",transform:s?"scale(1.1)":"scale(1)"},children:s?e.jsx(Ol,{size:24}):e.jsx(Nn,{size:30})}),e.jsx("p",{style:{marginTop:15,color:"#949ba4",fontSize:"0.9em"},children:s?"Dinliyor... (Bƒ±rakƒ±nca G√∂nderir)":"Basƒ±lƒ± Tut ve Konu≈ü"})]})]})},ut={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#313338",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif"},header:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px",borderBottom:"1px solid #1f2023",paddingBottom:"15px"},backBtn:{color:"#b9bbbe",fontSize:"1em",textDecoration:"none",display:"flex",alignItems:"center",gap:"5px",fontWeight:"600"},chatArea:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px",paddingBottom:"20px",paddingRight:"5px"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#949ba4",opacity:.8,textAlign:"center"},messageBubble:{maxWidth:"85%",padding:"15px",borderRadius:"12px",fontSize:"1em",lineHeight:"1.5",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",position:"relative"},msgHeader:{display:"flex",alignItems:"center",marginBottom:"5px",opacity:.8},controls:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20px",borderTop:"1px solid #1f2023"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.1s ease",boxShadow:"0 5px 20px rgba(0,0,0,0.4)"}},na=[{text:"Hello",difficulty:"Kolay"},{text:"Water",difficulty:"Kolay"},{text:"Friend",difficulty:"Kolay"},{text:"Family",difficulty:"Kolay"},{text:"Music",difficulty:"Kolay"},{text:"School",difficulty:"Kolay"},{text:"Computer",difficulty:"Kolay"},{text:"Beautiful",difficulty:"Kolay"},{text:"Together",difficulty:"Kolay"},{text:"Morning",difficulty:"Kolay"},{text:"Happy",difficulty:"Kolay"},{text:"Garden",difficulty:"Kolay"},{text:"People",difficulty:"Kolay"},{text:"Coffee",difficulty:"Kolay"},{text:"Purple",difficulty:"Kolay"},{text:"Technology",difficulty:"Orta"},{text:"Development",difficulty:"Orta"},{text:"Environment",difficulty:"Orta"},{text:"Successfully",difficulty:"Orta"},{text:"Opportunity",difficulty:"Orta"},{text:"Government",difficulty:"Orta"},{text:"Communication",difficulty:"Orta"},{text:"Experience",difficulty:"Orta"},{text:"Available",difficulty:"Orta"},{text:"Management",difficulty:"Orta"},{text:"International",difficulty:"Orta"},{text:"Recommendation",difficulty:"Orta"},{text:"Responsibility",difficulty:"Orta"},{text:"Understand",difficulty:"Orta"},{text:"Literature",difficulty:"Orta"},{text:"Necessary",difficulty:"Orta"},{text:"Vocabulary",difficulty:"Orta"},{text:"Interesting",difficulty:"Orta"},{text:"Comfortable",difficulty:"Orta"},{text:"Vegetable",difficulty:"Orta"},{text:"Squirrel",difficulty:"Zor"},{text:"Schedule",difficulty:"Zor"},{text:"Queue",difficulty:"Zor"},{text:"Rural",difficulty:"Zor"},{text:"Brewery",difficulty:"Zor"},{text:"Phenomenon",difficulty:"Zor"},{text:"February",difficulty:"Zor"},{text:"Library",difficulty:"Zor"},{text:"Specific",difficulty:"Zor"},{text:"Regularly",difficulty:"Zor"},{text:"Probably",difficulty:"Zor"},{text:"Algorithm",difficulty:"Zor"},{text:"Hierarchical",difficulty:"Zor"},{text:"Maintenance",difficulty:"Zor"},{text:"Pronunciation",difficulty:"Zor"},{text:"Throughout",difficulty:"Zor"},{text:"Entrepreneur",difficulty:"Zor"},{text:"Simultaneously",difficulty:"Zor"},{text:"Mischievous",difficulty:"Zor"},{text:"Chaos",difficulty:"Zor"},{text:"Recipe",difficulty:"Zor"},{text:"Worcestershire",difficulty:"Efsane"},{text:"Colonel",difficulty:"Efsane"},{text:"Miscellaneous",difficulty:"Efsane"},{text:"Anesthetist",difficulty:"Efsane"},{text:"Otorhinolaryngologist",difficulty:"Efsane"},{text:"Isthmus",difficulty:"Efsane"},{text:"Anemone",difficulty:"Efsane"},{text:"Synecdoche",difficulty:"Efsane"},{text:"Onomatopoeia",difficulty:"Efsane"},{text:"Conscientious",difficulty:"Efsane"},{text:"Defibrillator",difficulty:"Efsane"},{text:"Antidisestablishmentarianism",difficulty:"Efsane"},{text:"How are you doing today?",difficulty:"C√ºmle"},{text:"I would like to order a coffee.",difficulty:"C√ºmle"},{text:"The quick brown fox jumps over the lazy dog.",difficulty:"C√ºmle"},{text:"Can you please repeat that?",difficulty:"C√ºmle"},{text:"I am learning to speak English fluently.",difficulty:"C√ºmle"},{text:"It is raining cats and dogs outside.",difficulty:"C√ºmle"},{text:"Actions speak louder than words.",difficulty:"C√ºmle"},{text:"I need to schedule a meeting for tomorrow.",difficulty:"C√ºmle"},{text:"What do you do for a living?",difficulty:"C√ºmle"},{text:"She sells seashells by the seashore.",difficulty:"Tekerleme"},{text:"Red lorry, yellow lorry.",difficulty:"Tekerleme"},{text:"Peter Piper picked a peck of pickled peppers.",difficulty:"Tekerleme"},{text:"How much wood would a woodchuck chuck?",difficulty:"Tekerleme"},{text:"Unique New York.",difficulty:"Tekerleme"},{text:"Fuzzy Wuzzy was a bear.",difficulty:"Tekerleme"},{text:"Which wristwatches are Swiss wristwatches?",difficulty:"Tekerleme"}],Ru=({apiBaseUrl:p})=>{const{token:s}=Fo(),[l,b]=o.useState(null),[x,C]=o.useState(!1),[A,I]=o.useState(!1),[R,V]=o.useState("idle"),[K,G]=o.useState(""),[Q,se]=o.useState(0),J=o.useRef(null),U=o.useRef([]);o.useEffect(()=>{W()},[]);const W=()=>{const Z=Math.floor(Math.random()*na.length);b(na[Z]),V("idle"),G("")},F=async()=>{if(l)try{const Z=await fetch(`${p}/eng-learn/speak-text/`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({text:l.text})});if(Z.ok){const ae=await Z.json();new Audio(`data:audio/mp3;base64,${ae.audio_base64}`).play()}}catch(Z){console.error(Z)}},Y=async()=>{G(""),V("recording");try{const Z=await navigator.mediaDevices.getUserMedia({audio:!0});J.current=new MediaRecorder(Z),U.current=[],J.current.ondataavailable=ae=>{ae.data.size>0&&U.current.push(ae.data)},J.current.onstop=le,J.current.start(),C(!0)}catch{D.error("‚ùå Mikrofon izni gerekli!"),V("idle")}},me=()=>{J.current&&x&&(J.current.stop(),C(!1))},le=async()=>{I(!0);const Z=new Blob(U.current,{type:"audio/webm"}),ae=new FormData;ae.append("audio",Z,"voice.webm"),ae.append("target_text",l.text);try{const ge=await(await fetch(`${p}/eng-learn/check-pronunciation/`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:ae})).json();ge.is_correct?(V("success"),G(`Harika! üéâ (${ge.spoken_text})`),se(Kt=>Kt+1)):(V("error"),G(`Algƒ±lanan: "${ge.spoken_text||"???"}" - Tekrar dene!`))}catch(fe){console.error(fe),G("Sunucu hatasƒ±."),V("error")}finally{I(!1)}};return l?e.jsxs("div",{style:Ie.container,children:[e.jsxs("div",{style:Ie.header,children:[e.jsxs(ia,{to:"/eng-learn",style:Ie.backBtn,children:[e.jsx(ca,{})," √áƒ±kƒ±≈ü"]}),e.jsxs("div",{style:Ie.scoreBadge,children:["Skor: ",Q]})]}),e.jsxs("div",{style:Ie.mainContent,children:[e.jsxs("div",{style:{...Ie.card,borderColor:R==="success"?"#43b581":R==="error"?"#f04747":"transparent",boxShadow:R==="success"?"0 0 30px rgba(67, 181, 129, 0.3)":R==="error"?"0 0 30px rgba(240, 71, 71, 0.3)":"0 10px 30px rgba(0,0,0,0.3)"},children:[e.jsx("span",{style:{...Ie.difficulty,backgroundColor:l.difficulty==="Efsane"?"#eb459e":l.difficulty==="Zor"?"#f04747":"#202225",color:l.difficulty==="Efsane"||l.difficulty==="Zor"?"white":"#949ba4"},children:l.difficulty}),e.jsx("h1",{style:Ie.wordText,children:l.text}),e.jsx("div",{style:{height:"30px",marginTop:"10px",color:R==="success"?"#43b581":"#f04747",fontWeight:"bold"},children:A?"Analiz ediliyor...":K}),e.jsxs("div",{style:Ie.controls,children:[e.jsx("button",{onClick:F,style:Ie.iconButton,title:"Doƒürusunu Dinle",children:e.jsx(Ll,{size:24})}),e.jsx("button",{onMouseDown:Y,onMouseUp:me,onTouchStart:Y,onTouchEnd:me,style:{...Ie.micButton,backgroundColor:x?"#f04747":R==="success"?"#43b581":"#5865f2",transform:x?"scale(1.1)":"scale(1)"},children:e.jsx(Nn,{size:32})})]}),e.jsx("p",{style:Ie.hint,children:x?"Dinliyor...":"Mikrofona basƒ±lƒ± tut ve oku"})]}),e.jsx("div",{style:Ie.bottomNav,children:e.jsx("button",{onClick:W,style:Ie.skipButton,children:R==="success"?e.jsxs(e.Fragment,{children:["Sonraki Kelime ",e.jsx(Dl,{})]}):e.jsxs(e.Fragment,{children:["Bunu Ge√ß ",e.jsx(Ml,{})]})})})]})]}):e.jsx("div",{style:Ie.container,children:"Y√ºkleniyor..."})},Ie={container:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1e1f22",color:"white",padding:"20px",boxSizing:"border-box",fontFamily:"Poppins, sans-serif",alignItems:"center"},header:{width:"100%",maxWidth:"600px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},backBtn:{color:"#b9bbbe",textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},scoreBadge:{backgroundColor:"#f0b232",color:"#000",padding:"5px 15px",borderRadius:"20px",fontWeight:"bold"},mainContent:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},card:{backgroundColor:"#2b2d31",padding:"40px",borderRadius:"24px",width:"100%",maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",border:"3px solid transparent",transition:"all 0.3s ease"},difficulty:{padding:"4px 12px",borderRadius:"12px",fontSize:"0.85em",marginBottom:"20px",fontWeight:"bold"},wordText:{fontSize:"2.2em",fontWeight:"800",margin:"0 0 10px 0",color:"#fff",letterSpacing:"1px",lineHeight:"1.3"},controls:{display:"flex",alignItems:"center",gap:"30px",marginTop:"30px"},iconButton:{width:"50px",height:"50px",borderRadius:"50%",border:"2px solid #40444b",backgroundColor:"transparent",color:"#b9bbbe",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},micButton:{width:"80px",height:"80px",borderRadius:"50%",border:"none",color:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 5px 20px rgba(0,0,0,0.4)",transition:"all 0.1s ease"},hint:{marginTop:"20px",color:"#72767d",fontSize:"0.9em"},bottomNav:{marginTop:"50px"},skipButton:{background:"transparent",border:"none",color:"#b9bbbe",fontSize:"1.1em",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",padding:"10px 20px",borderRadius:"8px",transition:"background 0.2s",":hover":{backgroundColor:"rgba(255,255,255,0.05)"}}},Au=m.memo(Ru),Iu=({apiBaseUrl:p})=>{const[s,l]=o.useState("loading"),b=Nr(),x=sa();return o.useEffect(()=>{const C=new URLSearchParams(x.search),A=C.get("code");if(C.get("error")){l("error");return}if(A){const R=localStorage.getItem("access_token");fetch(`${p}/spotify/callback/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify({code:A})}).then(V=>{V.ok?(l("success"),setTimeout(()=>{b("/",{replace:!0})},1500)):l("error")}).catch(V=>{console.error(V),l("error")})}},[x,p,b]),e.jsx("div",{style:Dn.container,children:e.jsxs("div",{style:Dn.card,children:[s==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx(la,{className:"spin",size:50,color:"#1db954",style:{marginBottom:20}}),e.jsx("h2",{children:"Spotify Baƒülanƒ±yor..."}),e.jsx("p",{children:"Token alƒ±nƒ±yor, l√ºtfen bekleyin."})]}),s==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(Fn,{size:60,color:"#1db954",style:{marginBottom:20}}),e.jsx("h2",{style:{color:"#1db954"},children:"Ba≈üarƒ±lƒ±!"}),e.jsx("p",{children:"Hesabƒ±n baƒülandƒ±. Sohbet ekranƒ±na d√∂n√ºl√ºyor..."})]}),s==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(Wn,{size:60,color:"#f04747",style:{marginBottom:20}}),e.jsx("h2",{style:{color:"#f04747"},children:"Hata Olu≈ütu"}),e.jsx("p",{children:"Baƒülantƒ± kurulamadƒ±."}),e.jsx("button",{onClick:()=>b("/"),style:Dn.button,children:"Geri D√∂n"})]})]})})},Dn={container:{display:"flex",justifyContent:"center",alignItems:"center",height:"100dvh",backgroundColor:"#191414",color:"white",fontFamily:"Poppins, sans-serif"},card:{backgroundColor:"#282828",padding:"40px",borderRadius:"16px",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",maxWidth:"400px",width:"90%"},button:{marginTop:"20px",padding:"10px 20px",borderRadius:"20px",border:"none",backgroundColor:"#1db954",color:"white",fontWeight:"bold",cursor:"pointer"}},xa=document.createElement("style");xa.innerText=`
  .spin { animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
`;document.head.appendChild(xa);const Pu=m.memo(Iu),Ou=()=>{const{globalData:p}=ga(),[s,l]=o.useState(null),[b,x]=o.useState(!1),C=Nr();if(o.useEffect(()=>{if(p&&p.type==="chat_message_handler"&&p.username==="‚ö° Signal Bot"){const I=p.content.split(`
`),R=I.find(Q=>Q.includes("ü™ô"))||"Bilinmiyor",V=I.find(Q=>Q.includes("üìà"))||"",K={title:"YENƒ∞ KRƒ∞PTO Sƒ∞NYALƒ∞! üö®",coin:R.replace("ü™ô","").replace(/\*/g,"").trim(),direction:V.includes("LONG")?"Y√úKSELƒ∞≈û (LONG)":"D√ú≈û√ú≈û (SHORT)",isLong:V.includes("LONG"),raw:p};l(K),x(!0);const G=setTimeout(()=>{x(!1)},8e3);return()=>clearTimeout(G)}},[p]),!b||!s)return null;const A=()=>{x(!1),C("/")};return e.jsxs("div",{style:pt.container,className:"slide-in-notification",children:[e.jsx("div",{style:pt.iconBox,children:e.jsx($l,{size:24,color:"#f0b232"})}),e.jsxs("div",{style:pt.content,onClick:A,children:[e.jsx("h4",{style:pt.title,children:s.title}),e.jsxs("div",{style:pt.details,children:[e.jsx("span",{style:pt.coinName,children:s.coin}),e.jsx("span",{style:{...pt.directionBadge,backgroundColor:s.isLong?"rgba(35, 165, 89, 0.2)":"rgba(240, 71, 71, 0.2)",color:s.isLong?"#23a559":"#da373c"},children:s.direction})]}),e.jsxs("span",{style:pt.hint,children:["Detaylar i√ßin tƒ±kla ",e.jsx(zl,{size:10})]})]}),e.jsx("button",{onClick:I=>{I.stopPropagation(),x(!1)},style:pt.closeButton,children:e.jsx(No,{})})]})},pt={container:{position:"fixed",top:"20px",right:"20px",width:"320px",backgroundColor:"#1e1f22",borderRadius:"8px",boxShadow:"0 8px 20px rgba(0,0,0,0.5)",borderLeft:"5px solid #f0b232",display:"flex",alignItems:"center",padding:"15px",zIndex:99999,cursor:"pointer",transition:"transform 0.3s ease-out"},iconBox:{marginRight:"15px",display:"flex",alignItems:"center"},content:{flex:1,display:"flex",flexDirection:"column"},title:{margin:0,color:"#fff",fontSize:"0.95em",fontWeight:"bold",marginBottom:"5px"},details:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"},coinName:{color:"#dcddde",fontWeight:"bold",fontSize:"1.1em"},directionBadge:{fontSize:"0.75em",padding:"2px 6px",borderRadius:"4px",fontWeight:"bold"},hint:{fontSize:"0.7em",color:"#949ba4",display:"flex",alignItems:"center",gap:"5px"},closeButton:{background:"none",border:"none",color:"#949ba4",cursor:"pointer",padding:"5px",marginLeft:"10px",fontSize:"1em"}},Sa=document.createElement("style");Sa.innerText=`
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  .slide-in-notification {
    animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
`;document.head.appendChild(Sa);const xe=({children:p})=>{const s=Un.isNativePlatform();return e.jsx("div",{style:{width:"100%",height:"100dvh",boxSizing:"border-box",paddingTop:s?"max(35px, env(safe-area-inset-top))":"0px",backgroundColor:"#1e1f22",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},children:p})};class Lu extends m.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,l){console.error("üî¥ App Crashed:",s),console.error("Error Info:",l),this.setState({error:s,errorInfo:l});try{fetch("/api/errors/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:s?.toString(),stack:s?.stack,componentStack:l?.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{})}catch(b){console.warn("Could not report error:",b)}}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()};render(){return this.state.hasError?e.jsx("div",{style:ft.container,children:e.jsxs("div",{style:ft.content,children:[e.jsx("div",{style:ft.icon,children:"üí•"}),e.jsx("h1",{style:ft.title,children:"Oops! Bir ≈üeyler ters gitti"}),e.jsx("p",{style:ft.message,children:"√úzg√ºn√ºz, uygulama beklenmedik bir hatayla kar≈üƒ±la≈ütƒ±."}),e.jsxs("div",{style:ft.actions,children:[e.jsx("button",{onClick:this.handleReset,style:ft.button,children:"üîÑ Yeniden Ba≈ülat"}),e.jsx("button",{onClick:()=>window.location.href="/",style:{...ft.button,...ft.buttonSecondary},children:"üè† Ana Sayfaya D√∂n"})]}),!1]})}):this.props.children}}const ft={container:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#1E1F22",color:"#FFFFFF",padding:"20px",fontFamily:"'Inter', sans-serif"},content:{textAlign:"center",maxWidth:"600px",padding:"40px",background:"linear-gradient(135deg, #2B2D31 0%, #1E1F22 100%)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},icon:{fontSize:"80px",marginBottom:"20px",animation:"shake 0.5s ease-in-out"},title:{fontSize:"32px",fontWeight:"bold",marginBottom:"16px",color:"#FFFFFF"},message:{fontSize:"16px",color:"#B9BBBE",marginBottom:"32px",lineHeight:"1.6"},actions:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},button:{padding:"12px 24px",fontSize:"16px",fontWeight:"600",border:"none",borderRadius:"8px",cursor:"pointer",backgroundColor:"#5865F2",color:"#FFFFFF",transition:"all 0.2s",":hover":{backgroundColor:"#4752C4"}},buttonSecondary:{backgroundColor:"#4E5058",":hover":{backgroundColor:"#6A6F78"}}},Du=m.lazy(()=>h(()=>import("./EnglishHub-6JCqyLXk.js"),__vite__mapDeps([168,1,2,3,4,5,9,6]),import.meta.url)),Mu=m.lazy(()=>h(()=>import("./GrammarQuizPage-B8tKy50C.js"),__vite__mapDeps([169,1,2,3,4,5,9,6,170,10]),import.meta.url)),$u=m.lazy(()=>h(()=>import("./EnglishLearningPage-Dfchgv6L.js"),__vite__mapDeps([171,1,2,3,4,5,9,170,6,10]),import.meta.url)),zu=m.lazy(()=>h(()=>import("./CryptoDashboard-CcdRn3KI.js"),__vite__mapDeps([172,1,2,3,4,5,9,6,39,10]),import.meta.url)),Vu=m.lazy(()=>h(()=>import("./CryptoSignals-tkR-PKMZ.js"),__vite__mapDeps([173,1,2,3,4,5,6,9]),import.meta.url)),Bu=m.lazy(()=>h(()=>import("./ForgotPasswordPage-B4yQ59C4.js"),__vite__mapDeps([120,1,2,3,4,5,6,36,9]),import.meta.url)),Uu=m.lazy(()=>h(()=>import("./ResetPasswordPage-rsyeFUZD.js"),__vite__mapDeps([121,1,2,3,4,5,6,9]),import.meta.url)),Nu=m.lazy(()=>h(()=>import("./TwoFactorLoginPage-CosbC5v2.js"),__vite__mapDeps([122,1,2,3,4,5,6,9]),import.meta.url)),Fu=m.lazy(()=>h(()=>import("./VerifyEmailPage-D1Xj-wv_.js"),__vite__mapDeps([119,1,2,3,4,5,6,9]),import.meta.url)),Wu=m.lazy(()=>h(()=>import("./LandingPage-veFOhG2B.js"),__vite__mapDeps([174,1,2,3,4,5,9,6,10,175]),import.meta.url)),Gu=m.lazy(()=>h(()=>import("./ReferralProgram-B5hEtXnx.js"),__vite__mapDeps([176,1,2,3,4,5,9,6,10,177]),import.meta.url)),Hu=m.lazy(()=>h(()=>import("./GrowthDashboard-DQ7yWgpQ.js"),__vite__mapDeps([178,1,2,3,4,5,52,179]),import.meta.url)),Ku=m.lazy(()=>h(()=>import("./ToastDemo-BjpB0Ndt.js"),__vite__mapDeps([180,1,2,3,4,5,9,6,10,181]),import.meta.url)),Yu=window.location.hostname==="pawscord.com"||window.location.hostname==="www.pawscord.com",qu="192.168.68.53",Ju="8888",Zu=Yu?"https://www.pawscord.com":`http://${qu}:${Ju}`,rt=`${Zu}/api`,Xu="774757987258-poa0elqqapnab8eud3tol3h2pilcqe71.apps.googleusercontent.com",Qu=()=>(o.useEffect(()=>{const p=setTimeout(()=>{try{da()}catch(s){console.warn("preloadCriticalChunks error",s)}},3e3);if("requestIdleCallback"in window)window.requestIdleCallback(()=>{try{zn()}catch(s){console.warn("prefetchNextChunks error",s)}},{timeout:2e3});else{const s=setTimeout(()=>{try{zn()}catch(l){console.warn("prefetchNextChunks error",l)}},4e3);return()=>clearTimeout(s)}return()=>clearTimeout(p)},[]),e.jsx(ul,{clientId:Xu,children:e.jsx(Sc,{children:e.jsx(_c,{children:e.jsx(Lu,{children:e.jsxs(ml,{children:[e.jsx(Ou,{}),e.jsxs(gl,{children:[e.jsx(he,{path:"/verify/:token",element:e.jsx(xe,{children:e.jsx(ju,{})})}),e.jsx(he,{path:"/verify-email/:token",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Fu,{apiBaseUrl:rt})})})}),e.jsx(he,{path:"/forgot-password",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Bu,{apiBaseUrl:rt})})})}),e.jsx(he,{path:"/reset-password/:token",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Uu,{apiBaseUrl:rt})})})}),e.jsx(he,{path:"/2fa-login",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Nu,{apiBaseUrl:rt})})})}),e.jsx(he,{path:"/launch",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Wu,{apiBaseUrl:rt})})})}),e.jsx(he,{path:"/referral",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Gu,{apiBaseUrl:rt})})})}),e.jsx(he,{path:"/growth-dashboard",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Hu,{apiBaseUrl:rt})})})}),e.jsx(he,{path:"/toast-demo",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Ku,{})})})}),e.jsx(he,{path:"/invite/:code",element:e.jsx(xe,{children:e.jsx(Tu,{})})}),e.jsx(he,{path:"/spotify-callback",element:e.jsx(xe,{children:e.jsx(Pu,{apiBaseUrl:rt})})}),e.jsx(he,{path:"/eng-learn",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Du,{})})})}),e.jsx(he,{path:"/eng-learn/vocab",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx($u,{})})})}),e.jsx(he,{path:"/eng-learn/grammar",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Mu,{})})})}),e.jsx(he,{path:"/eng-learn/voice",element:e.jsx(xe,{children:e.jsx(Eu,{apiBaseUrl:rt})})}),e.jsx(he,{path:"/eng-learn/pronunciation",element:e.jsx(xe,{children:e.jsx(Au,{apiBaseUrl:rt})})}),e.jsx(he,{path:"/crypto-analysis",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(Vu,{})})})}),e.jsx(he,{path:"/crypto-dashboard-old",element:e.jsx(xe,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{children:"Y√ºkleniyor..."}),children:e.jsx(zu,{})})})}),e.jsx(he,{path:"/*",element:e.jsx(_u,{})})]})]})})})})})),ep=fl.createRoot(document.getElementById("root"));ep.render(e.jsx(Qu,{}));export{yc as A,Vn as T,Fo as a,Wp as b,fc as c,_e as d,Fp as e,Np as f,ec as g,vc as h,Hn as i,rc as j,je as l,D as t,ga as u};
