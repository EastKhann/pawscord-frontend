var S=Object.defineProperty;var n=(s,a)=>S(s,"name",{value:a,configurable:!0});import{r as c,j as e}from"./react-core-Djgtqrmb.js";import{bA as m,a as w,a5 as B,bB as k}from"./icons-vendor-BMXAt4pj.js";import{t as p}from"./index-D0nbcjO7.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const _=n(({fetchWithAuth:s,apiBaseUrl:a,onClose:y,serverId:f})=>{const[d,h]=c.useState([]),[b,g]=c.useState(!1),[l,x]=c.useState("all");c.useEffect(()=>{j()},[f]);const j=n(async()=>{g(!0);try{const i=await(await s(`${a}/servers/${f}/logs/`)).json();h(i.logs||[])}catch{p.error("Failed to load join/leave logs")}finally{g(!1)}},"fetchLogs"),v=n(async()=>{try{const i=await(await s(`${a}/servers/${f}/logs/export/`)).blob(),L=window.URL.createObjectURL(i),r=document.createElement("a");r.href=L,r.download=`join_leave_logs_${new Date().toISOString()}.csv`,document.body.appendChild(r),r.click(),r.remove(),p.success("Logs exported successfully")}catch{p.error("Failed to export logs")}},"exportLogs"),u=d.filter(o=>l==="all"?!0:o.action===l);return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(m,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Join/Leave Logs"})]}),e.jsx("button",{onClick:y,style:t.closeButton,children:e.jsx(w,{})})]}),e.jsxs("div",{style:t.filters,children:[e.jsxs("button",{onClick:n(()=>x("all"),"onClick"),style:{...t.filterButton,...l==="all"&&t.filterButtonActive},children:["All (",d.length,")"]}),e.jsxs("button",{onClick:n(()=>x("joined"),"onClick"),style:{...t.filterButton,...l==="joined"&&t.filterButtonActive},children:["ðŸŸ¢ Joins (",d.filter(o=>o.action==="joined").length,")"]}),e.jsxs("button",{onClick:n(()=>x("left"),"onClick"),style:{...t.filterButton,...l==="left"&&t.filterButtonActive},children:["ðŸ”´ Leaves (",d.filter(o=>o.action==="left").length,")"]}),e.jsxs("button",{onClick:v,style:t.exportButton,children:[e.jsx(B,{style:{marginRight:"5px"}}),"Export"]})]}),e.jsx("div",{style:t.content,children:b?e.jsx("div",{style:t.loading,children:"Loading logs..."}):u.length===0?e.jsx("div",{style:t.empty,children:"No logs found"}):e.jsx("div",{style:t.logsList,children:u.map((o,i)=>e.jsxs("div",{style:t.logItem,children:[e.jsx("div",{style:t.logIcon,children:o.action==="joined"?e.jsx(m,{style:{color:"#43b581"}}):e.jsx(k,{style:{color:"#f04747"}})}),e.jsxs("div",{style:t.logInfo,children:[e.jsx("div",{style:t.logUser,children:o.user?.username||"Unknown User"}),e.jsx("div",{style:t.logAction,children:o.action==="joined"?"Joined the server":"Left the server"}),o.invite_code&&e.jsxs("div",{style:t.logMeta,children:["via invite: ",o.invite_code]})]}),e.jsx("div",{style:t.logTime,children:new Date(o.timestamp).toLocaleString()})]},i))})})]})})},"JoinLeaveLogsPanel"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},filters:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #2c2f33",flexWrap:"wrap"},filterButton:{padding:"8px 16px",backgroundColor:"#2c2f33",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},filterButtonActive:{backgroundColor:"#5865f2"},exportButton:{marginLeft:"auto",padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},logsList:{display:"flex",flexDirection:"column",gap:"12px"},logItem:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",alignItems:"center",gap:"16px"},logIcon:{fontSize:"20px"},logInfo:{flex:1},logUser:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},logAction:{fontSize:"14px",color:"#dcddde",marginBottom:"2px"},logMeta:{fontSize:"12px",color:"#99aab5"},logTime:{fontSize:"13px",color:"#99aab5"}};export{_ as default};
