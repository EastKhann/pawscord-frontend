var R=Object.defineProperty;var s=(i,a)=>R(i,"name",{value:a,configurable:!0});import{r as l,j as e}from"./react-core-Djgtqrmb.js";import{bC as y,a as k,u as z,aq as h,P as m}from"./icons-vendor-BMXAt4pj.js";import{t as n}from"./index-D09YXCFH.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const D=s(({fetchWithAuth:i,apiBaseUrl:a,onClose:u,username:B})=>{const[x,b]=l.useState([]),[d,j]=l.useState(null),[v,p]=l.useState(!1),[c,w]=l.useState("");l.useEffect(()=>{f(),g()},[]);const f=s(async()=>{p(!0);try{const o=await(await i(`${a}/referrals/rewards/`)).json();b(o.rewards||[]),w(o.referral_link||"")}catch{n.error("Failed to load rewards")}finally{p(!1)}},"fetchRewards"),g=s(async()=>{try{const o=await(await i(`${a}/referrals/stats/`)).json();j(o)}catch{}},"fetchStats"),S=s(async t=>{try{await i(`${a}/referrals/rewards/${t}/claim/`,{method:"POST"}),n.success("Reward claimed!"),f(),g()}catch{n.error("Failed to claim reward")}},"claimReward"),C=s(()=>{navigator.clipboard.writeText(c),n.success("Referral link copied to clipboard!")},"copyReferralLink");return e.jsx("div",{style:r.overlay,children:e.jsxs("div",{style:r.modal,children:[e.jsxs("div",{style:r.header,children:[e.jsxs("div",{style:r.headerLeft,children:[e.jsx(y,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:r.title,children:"Referral Rewards"})]}),e.jsx("button",{onClick:u,style:r.closeButton,children:e.jsx(k,{})})]}),c&&e.jsxs("div",{style:r.referralSection,children:[e.jsx("div",{style:r.referralLabel,children:"Your Referral Link"}),e.jsxs("div",{style:r.referralLinkBox,children:[e.jsx("input",{type:"text",value:c,readOnly:!0,style:r.referralInput}),e.jsx("button",{onClick:C,style:r.copyButton,children:"Copy"})]}),e.jsx("div",{style:r.referralHint,children:"Share this link to earn rewards when friends join!"})]}),d&&e.jsxs("div",{style:r.statsSection,children:[e.jsxs("div",{style:r.statCard,children:[e.jsx("div",{style:r.statIcon,children:e.jsx(z,{style:{color:"#5865f2",fontSize:"24px"}})}),e.jsxs("div",{children:[e.jsx("div",{style:r.statValue,children:d.total_referrals||0}),e.jsx("div",{style:r.statLabel,children:"Total Referrals"})]})]}),e.jsxs("div",{style:r.statCard,children:[e.jsx("div",{style:r.statIcon,children:e.jsx(h,{style:{color:"#faa61a",fontSize:"24px"}})}),e.jsxs("div",{children:[e.jsx("div",{style:r.statValue,children:d.coins_earned||0}),e.jsx("div",{style:r.statLabel,children:"Coins Earned"})]})]}),e.jsxs("div",{style:r.statCard,children:[e.jsx("div",{style:r.statIcon,children:e.jsx(m,{style:{color:"#43b581",fontSize:"24px"}})}),e.jsxs("div",{children:[e.jsx("div",{style:r.statValue,children:d.rewards_claimed||0}),e.jsx("div",{style:r.statLabel,children:"Rewards Claimed"})]})]})]}),e.jsxs("div",{style:r.content,children:[e.jsx("h3",{style:r.sectionTitle,children:"Available Rewards"}),v?e.jsx("div",{style:r.loading,children:"Loading rewards..."}):x.length===0?e.jsx("div",{style:r.empty,children:"No rewards available"}):e.jsx("div",{style:r.rewardsList,children:x.map((t,o)=>e.jsxs("div",{style:r.rewardCard,children:[e.jsxs("div",{style:r.rewardIcon,children:[t.type==="coins"&&e.jsx(h,{style:{color:"#faa61a",fontSize:"32px"}}),t.type==="badge"&&e.jsx(m,{style:{color:"#5865f2",fontSize:"32px"}}),t.type==="item"&&e.jsx(y,{style:{color:"#43b581",fontSize:"32px"}})]}),e.jsxs("div",{style:r.rewardInfo,children:[e.jsx("div",{style:r.rewardName,children:t.name}),e.jsx("div",{style:r.rewardDescription,children:t.description}),e.jsxs("div",{style:r.rewardRequirement,children:["Requires ",t.referrals_required," referrals"]}),t.progress!==void 0&&e.jsx("div",{style:r.progressBar,children:e.jsx("div",{style:{...r.progressFill,width:`${t.progress/t.referrals_required*100}%`}})})]}),e.jsx("div",{style:r.rewardActions,children:t.claimed?e.jsx("div",{style:r.claimedBadge,children:"âœ“ Claimed"}):t.claimable?e.jsx("button",{onClick:s(()=>S(t.id),"onClick"),style:r.claimButton,children:"Claim"}):e.jsx("div",{style:r.lockedBadge,children:"ðŸ”’ Locked"})})]},o))})]})]})})},"ReferralRewardsPanel"),r={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},referralSection:{padding:"20px",borderBottom:"1px solid #2c2f33",backgroundColor:"#2c2f33"},referralLabel:{fontSize:"13px",color:"#dcddde",marginBottom:"8px"},referralLinkBox:{display:"flex",gap:"12px",marginBottom:"8px"},referralInput:{flex:1,padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #1e1e1e",borderRadius:"4px",color:"#ffffff",fontSize:"13px"},copyButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",fontWeight:"600"},referralHint:{fontSize:"12px",color:"#99aab5",fontStyle:"italic"},statsSection:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",padding:"20px",borderBottom:"1px solid #2c2f33"},statCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},statIcon:{minWidth:"48px"},statValue:{fontSize:"24px",fontWeight:"700",color:"#ffffff",marginBottom:"4px"},statLabel:{fontSize:"12px",color:"#99aab5"},content:{padding:"20px",overflowY:"auto",flex:1},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"16px"},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},rewardsList:{display:"flex",flexDirection:"column",gap:"12px"},rewardCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},rewardIcon:{minWidth:"48px"},rewardInfo:{flex:1},rewardName:{fontSize:"16px",fontWeight:"600",color:"#ffffff",marginBottom:"6px"},rewardDescription:{fontSize:"13px",color:"#dcddde",marginBottom:"6px"},rewardRequirement:{fontSize:"12px",color:"#99aab5",marginBottom:"8px"},progressBar:{height:"6px",backgroundColor:"#1e1e1e",borderRadius:"3px",overflow:"hidden"},progressFill:{height:"100%",backgroundColor:"#5865f2",transition:"width 0.3s"},rewardActions:{minWidth:"100px"},claimButton:{width:"100%",padding:"10px 20px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},claimedBadge:{width:"100%",padding:"10px 20px",backgroundColor:"#2c2f33",border:"1px solid #43b581",borderRadius:"4px",color:"#43b581",textAlign:"center",fontSize:"14px",fontWeight:"600"},lockedBadge:{width:"100%",padding:"10px 20px",backgroundColor:"#2c2f33",border:"1px solid #99aab5",borderRadius:"4px",color:"#99aab5",textAlign:"center",fontSize:"14px",fontWeight:"600"}};export{D as default};
