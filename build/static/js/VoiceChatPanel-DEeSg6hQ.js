import{n as e,a as O,r as s}from"./react-core-Cj7FUMmY.js";import{o as pt,a as xt,P as De,p as ut,t as N}from"./index-BZ0XvVGG.js";import{D as gt}from"./cjs-C9dy-FHT.js";import ft from"./UserContextMenu-CvI0gNj5.js";import mt from"./VoiceSettingsPanel-BPOmD2UZ.js";import{S as ht}from"./crypto-vendor-DK-7ILyQ.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-By68PLJG.js";import"./router-vendor-QeioVw-9.js";import"./icons-vendor-TGltgKsJ.js";import"./state-vendor-DGcbxrkI.js";import"./ui-vendor-EA4dxvko.js";const ce=({icon:n,onClick:l,title:u,bgColor:g="rgba(0, 0, 0, 0.7)"})=>e.jsx("button",{onClick:l,title:u,style:{background:g,border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"14px",color:"#fff",fontWeight:"bold",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},onMouseEnter:m=>{m.currentTarget.style.transform="scale(1.1)",m.currentTarget.style.boxShadow="0 4px 16px rgba(255, 255, 255, 0.3)"},onMouseLeave:m=>{m.currentTarget.style.transform="scale(1)",m.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)"},children:n}),de=O.memo(({user:n,stream:l,isActive:u,isPinned:g,onExpand:m,onPin:k,onContextMenu:p,compact:f=!1,badge:w,connectionQuality:j,getUserAvatar:P})=>{const b=s.useRef(null),y=s.useRef(null),[M,G]=s.useState(!1);s.useEffect(()=>{b.current&&l&&(b.current.srcObject=l)},[l]),s.useEffect(()=>{if(y.current&&l&&!n.isLocal){const d=l.getAudioTracks();if(d.length>0){y.current.srcObject=new MediaStream(d);const C=n.volume||100;if(C<=100)y.current.volume=Math.max(0,C/100);else{y.current.volume=1;try{const h=y.current;h._audioContext||(h._audioContext=new(window.AudioContext||window.webkitAudioContext),h._sourceNode=h._audioContext.createMediaElementSource(h),h._gainNode=h._audioContext.createGain(),h._sourceNode.connect(h._gainNode),h._gainNode.connect(h._audioContext.destination)),h._gainNode.gain.value=C/100}catch{}}}}},[l,n.isLocal,n.username,n.volume]);const _=s.useCallback(d=>{d.preventDefault(),p&&n.username!==n.isLocal&&p({user:n,position:{x:d.clientX,y:d.clientY}})},[p,n]),K=s.useCallback(d=>{!n.isLocal&&p&&p({user:n,position:{x:d.clientX,y:d.clientY}})},[n,p]);return e.jsxs("div",{onContextMenu:_,onClick:K,onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1),style:{background:"linear-gradient(135deg, #2c2f33 0%, #23272a 100%)",borderRadius:"16px",overflow:"hidden",position:"relative",border:u?"3px solid #43b581":g?"3px solid #5865f2":"1px solid rgba(255, 255, 255, 0.1)",boxShadow:u?"0 0 20px rgba(67, 181, 129, 0.5)":"0 4px 16px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease",cursor:n.isLocal?"default":"pointer",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[!n.isLocal&&l&&e.jsx("audio",{ref:y,autoPlay:!0,playsInline:!0,"data-username":n.username,style:{display:"none"}}),e.jsxs("div",{style:{width:"100%",height:"100%",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center"},children:[w,l&&l.active&&l.getVideoTracks().length>0?e.jsx("video",{ref:b,autoPlay:!0,playsInline:!0,muted:n.isLocal===!0,style:{width:"100%",height:"100%",objectFit:n.streamType==="screen"?"contain":"cover",backgroundColor:n.streamType==="screen"?"#000":"#1a1a1a"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",background:"linear-gradient(135deg, #36393f 0%, #2f3136 50%, #202225 100%)",position:"relative"},children:[e.jsx("div",{style:{position:"relative",padding:"8px",borderRadius:"50%",background:n.isTalking?"linear-gradient(135deg, #43b581, #3ca374)":"transparent",boxShadow:n.isTalking?"0 0 20px rgba(67, 181, 129, 0.6), 0 0 40px rgba(67, 181, 129, 0.3)":"none",transition:"all 0.3s ease",animation:n.isTalking?"talkingPulse 1s ease-in-out infinite":"none"},children:e.jsx("img",{src:P(n.username),alt:n.username,onError:d=>{d.target.onerror=null,d.target.src=getDeterministicAvatarFallback(n.username,256)},style:{width:"140px",height:"140px",borderRadius:"50%",objectFit:"cover",border:"5px solid #40444b",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",display:"block"},loading:"lazy"})}),e.jsx("div",{style:{color:"#fff",fontSize:"18px",fontWeight:700,textShadow:"0 2px 8px rgba(0, 0, 0, 0.7)",letterSpacing:"0.5px"},children:n.username}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 14px",background:n.isMuted?"rgba(240, 71, 71, 0.2)":"rgba(67, 181, 129, 0.2)",borderRadius:"16px",border:n.isMuted?"1px solid rgba(240, 71, 71, 0.4)":"1px solid rgba(67, 181, 129, 0.4)"},children:[e.jsx("span",{style:{fontSize:"16px"},children:n.isMuted?"ðŸ”‡":"ðŸŽ¤"}),e.jsx("span",{style:{color:n.isMuted?"#f04747":"#43b581",fontSize:"13px",fontWeight:600},children:n.isMuted?"Sessiz":n.isTalking?"KonuÅŸuyor...":"Dinliyor"})]})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent)",padding:"12px 16px",display:"flex",alignItems:"center",gap:"8px",zIndex:10},children:[n.isTalking&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx("div",{style:{width:"3px",height:"12px",background:"#43b581",borderRadius:"2px",animation:"wave1 0.6s ease-in-out infinite"}}),e.jsx("div",{style:{width:"3px",height:"16px",background:"#43b581",borderRadius:"2px",animation:"wave2 0.6s ease-in-out infinite 0.1s"}}),e.jsx("div",{style:{width:"3px",height:"12px",background:"#43b581",borderRadius:"2px",animation:"wave3 0.6s ease-in-out infinite 0.2s"}})]}),!n.isLocal&&j&&e.jsx("div",{title:`RTT: ${j.rtt}ms, Packet Loss: ${j.packetLoss}%`,style:{fontSize:"16px",filter:j.quality==="excellent"?"none":j.quality==="good"?"hue-rotate(30deg)":"hue-rotate(90deg) saturate(2)",opacity:.9},children:j.quality==="excellent"||j.quality==="good"?"ðŸ“¶":"âš ï¸"}),e.jsxs("span",{onClick:d=>{d.stopPropagation(),n.isLocal||(window.openUserProfile?window.openUserProfile(n.username):window.location.hash=`#/profile/${n.username}`)},style:{color:"#fff",fontSize:"14px",fontWeight:600,flex:1,cursor:n.isLocal?"default":"pointer",textDecoration:n.isLocal?"none":"underline",textDecorationColor:"rgba(255, 255, 255, 0.3)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[n.username," ",n.streamType==="screen"&&"ðŸ–¥ï¸ Ekran"]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[n.isMuted&&e.jsx("span",{style:{fontSize:"16px"},children:"ðŸ”‡"}),n.streamType==="camera"&&n.isCameraOn&&e.jsx("span",{style:{fontSize:"16px"},children:"ðŸ“¹"}),u&&e.jsx("span",{style:{fontSize:"16px"},children:"ðŸ”Š"})]})]}),e.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px",display:"flex",gap:"6px",opacity:M?1:0,transition:"opacity 0.25s ease, transform 0.25s ease",transform:M?"translateY(0)":"translateY(-6px)",zIndex:20,pointerEvents:M?"auto":"none"},children:[e.jsx(ce,{icon:g?"ðŸ“Œ":"ðŸ“",onClick:d=>{d.stopPropagation(),k()},title:g?"Sabitlemeyi KaldÄ±r":"Sabitle",bgColor:"rgba(88, 101, 242, 0.9)"}),e.jsx(ce,{icon:"â›¶",onClick:d=>{d.stopPropagation(),m()},title:"Panelde GeniÅŸlet",bgColor:"rgba(67, 181, 129, 0.9)"}),e.jsx(ce,{icon:"ðŸ–¥ï¸",onClick:d=>{d.stopPropagation();const C=b.current;if(C){const T=C.parentElement?.parentElement||C;T.requestFullscreen?T.requestFullscreen():T.webkitRequestFullscreen?T.webkitRequestFullscreen():T.mozRequestFullScreen?T.mozRequestFullScreen():T.msRequestFullscreen&&T.msRequestFullscreen()}},title:"Tam Ekran Ä°zle",bgColor:"rgba(250, 166, 26, 0.9)"}),!n.isLocal&&M&&e.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.9)",borderRadius:"10px",padding:"6px 10px",display:"flex",alignItems:"center",gap:"6px",minWidth:"100px",backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",animation:"fadeIn 0.2s ease"},children:[e.jsx("span",{style:{fontSize:"12px"},children:(n.volume||100)===0?"ðŸ”‡":(n.volume||100)>100?"ðŸ”Š":"ðŸ”‰"}),e.jsx("input",{type:"range",min:"0",max:"200",value:n.volume||100,onChange:d=>{d.stopPropagation(),n.onVolumeChange&&n.onVolumeChange(parseInt(d.target.value))},style:{flex:1,cursor:"pointer",height:"4px"},onClick:d=>d.stopPropagation()}),e.jsxs("span",{style:{fontSize:"10px",color:"#fff",minWidth:"30px",fontWeight:600},children:[n.volume||100,"%"]})]})]}),e.jsx("style",{children:`
                div:hover .hover-actions {
                    opacity: 1;
                }
            `})]})},(n,l)=>n.user.username===l.user.username&&n.stream===l.stream&&n.user.isCameraOn===l.user.isCameraOn&&n.user.isScreenSharing===l.user.isScreenSharing&&n.user.isMuted===l.user.isMuted&&n.isActive===l.isActive&&n.isPinned===l.isPinned&&n.compact===l.compact),F=({icon:n,active:l,danger:u,special:g,subtle:m,small:k,isLeave:p,onClick:f,title:w,label:j})=>{const P=()=>p?"linear-gradient(135deg, #ed4245 0%, #c03537 100%)":u&&l?"rgba(240, 71, 71, 0.4)":u?"rgba(240, 71, 71, 0.15)":g?"linear-gradient(135deg, #5865f2 0%, #4752c4 100%)":l?"rgba(67, 181, 129, 0.25)":m?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.1)",b=()=>p?"none":u&&l?"2px solid rgba(240, 71, 71, 0.6)":l?"2px solid rgba(67, 181, 129, 0.5)":g?"2px solid rgba(88, 101, 242, 0.5)":"2px solid transparent";return e.jsxs("button",{onClick:f,title:w,style:{background:P(),border:b(),borderRadius:p?"50%":"12px",width:p?"48px":k?"40px":"48px",height:p?"48px":k?"40px":"48px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:k?"16px":"20px",color:"#fff",transition:"all 0.2s ease",boxShadow:p?"0 4px 15px rgba(237, 66, 69, 0.4)":l?"0 2px 10px rgba(67, 181, 129, 0.3)":"none",transform:"scale(1)"},onMouseEnter:y=>{y.currentTarget.style.transform="scale(1.1)",y.currentTarget.style.boxShadow=p?"0 6px 20px rgba(237, 66, 69, 0.6)":"0 4px 15px rgba(255, 255, 255, 0.2)"},onMouseLeave:y=>{y.currentTarget.style.transform="scale(1)",y.currentTarget.style.boxShadow=p?"0 4px 15px rgba(237, 66, 69, 0.4)":l?"0 2px 10px rgba(67, 181, 129, 0.3)":"none"},children:[e.jsx("span",{children:n}),j&&e.jsx("span",{style:{fontSize:"9px",marginTop:"2px",fontWeight:600},children:j})]})},bt=({isMuted:n,isDeafened:l,isCameraOn:u,isScreenSharing:g,isSpatialAudio:m,isRecording:k,recordingDuration:p,onToggleMute:f,onToggleDeafened:w,onToggleCamera:j,onToggleScreenShare:P,onToggleSpatialAudio:b,onStartRecording:y,onStopRecording:M,onDownloadRecording:G,onLeave:_,onSettings:K})=>{const d=C=>{const h=Math.floor(C/60).toString().padStart(2,"0"),T=Math.floor(C%60).toString().padStart(2,"0");return`${h}:${T}`};return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(32, 34, 37, 0.98) 0%, rgba(24, 25, 28, 1) 100%)",padding:"12px 20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",borderTop:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.4)",flexShrink:0,minHeight:"70px",position:"relative",zIndex:100},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx(F,{icon:n?"ðŸ”‡":"ðŸŽ¤",active:!n,danger:n,onClick:f,title:n?"Mikrofonu AÃ§":"Mikrofonu Kapat"}),e.jsx(F,{icon:l?"ðŸ”ˆ":"ðŸŽ§",active:!l,danger:l,onClick:w,title:l?"KulaklÄ±ÄŸÄ± AÃ§":"KulaklÄ±ÄŸÄ± Kapat"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",padding:"0 16px",borderLeft:"1px solid rgba(255, 255, 255, 0.1)",borderRight:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(F,{icon:u?"ðŸ“¹":"ðŸ“·",active:u,onClick:j,title:u?"KamerayÄ± Kapat":"KamerayÄ± AÃ§"}),e.jsx(F,{icon:"ðŸ–¥ï¸",active:g,special:g,onClick:P,title:g?"PaylaÅŸÄ±mÄ± Durdur":"Ekran PaylaÅŸ"}),b&&e.jsx(F,{icon:"ðŸ”Š",active:m,onClick:b,title:m?"3D Ses (AÃ§Ä±k)":"3D Ses (KapalÄ±)",small:!0})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[y&&M&&e.jsx(F,{icon:k?"â¹ï¸":"âºï¸",active:k,danger:k,onClick:k?M:y,title:k?`KaydÄ± Durdur (${d(p)})`:"KayÄ±t BaÅŸlat",label:k?d(p):null}),K&&e.jsx(F,{icon:"âš™ï¸",onClick:K,title:"Ayarlar",subtle:!0})]}),e.jsx(F,{icon:"ðŸ“ž",danger:!0,onClick:_,title:"AyrÄ±l",isLeave:!0})]})},X=({icon:n,active:l,danger:u,onClick:g,title:m})=>e.jsx("button",{onClick:g,title:m,style:{background:l?"rgba(88, 101, 242, 0.8)":u?"rgba(237, 66, 69, 0.8)":"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease"},children:n}),yt=({stream:n,fullscreen:l})=>{const u=s.useRef(null);return s.useEffect(()=>{u.current&&n&&(u.current.srcObject=n)},[n]),e.jsx("video",{ref:u,autoPlay:!0,playsInline:!0,muted:!1,style:{width:"100%",height:"100%",objectFit:l?"contain":"cover",background:"#000"}})},pe=(n,l=256)=>{if(!n)return`https://ui-avatars.com/api/?name=User&background=5865f2&color=fff&bold=true&size=${l}`;const u=ht.hash(n),g=parseInt(u.substring(0,8),16)%360;return`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=${g.toString(16).padStart(2,"0")}${((g+60)%360).toString(16).padStart(2,"0")}${((g+120)%360).toString(16).padStart(2,"0")}&color=fff&bold=true&size=${l}`},vt=n=>n?n.replace(/_100x100\./gi,".").replace(/_150x150\./gi,".").replace(/_50x50\./gi,".").replace(/\?.*$/,""):null,St=({roomName:n,onClose:l,isMinimized:u,onToggleMinimize:g,getRealUserAvatar:m,allUsers:k=[],currentUserProfile:p})=>{const{isInVoice:f,isMuted:w,isDeafened:j,isVideoEnabled:P,isScreenSharing:b,isSpatialAudioEnabled:y,vadSensitivity:M,isNoiseSuppressionEnabled:G,screenShareQuality:_,screenShareFPS:K,isRecording:d,recordingDuration:C,isPTTMode:h,isPTTActive:T,pttKey:Ke,includeSystemAudio:Ve,connectedUsers:xe=[],isReconnecting:Ne=!1,connectionStats:kt={},startStatsMonitoring:J,stopStatsMonitoring:Z,toggleMute:ue,toggleDeafened:Be,toggleCamera:ge,toggleScreenShare:fe,toggleSpatialAudio:qe,updateVadSensitivity:wt,toggleNoiseSuppression:jt,updateScreenQuality:Y,updateScreenFPS:Ct,toggleSystemAudio:Tt,togglePTTMode:It,updatePTTKey:Et,startRecording:Oe,stopRecording:Ge,downloadRecording:zt,leaveVoiceRoom:me,localAudioStream:ee,remoteStreams:he={},remoteVolumes:be={},setRemoteVolume:ye,localCameraStream:te,localScreenStream:ne,isTalking:ve=!1}=pt(),W=P,{user:v}=xt(),A=O.useMemo(()=>{const t=[...xe];if(v&&!t.some(a=>a.username===v.username))t.push({username:v.username,isMuted:w,isCameraOn:W,isScreenSharing:b,isTalking:ve,isLocal:!0});else if(v){const a=t.findIndex(c=>c.username===v.username);a>=0&&(t[a]={...t[a],isMuted:w,isCameraOn:W,isScreenSharing:b,isTalking:ve,isLocal:!0})}return t},[xe,v,w,W,b]),B=s.useCallback(t=>{let a=null;if(p&&t===v?.username&&p.avatar&&typeof p.avatar=="string"&&(p.avatar.startsWith("http")||p.avatar.startsWith("blob:")?a=p.avatar:a=`${De}${p.avatar.startsWith("/")?"":"/"}${p.avatar}`),!a&&m&&(a=m(t)),!a){const c=k.find(i=>i.username===t);c?.avatar&&typeof c.avatar=="string"&&(c.avatar.startsWith("http")||c.avatar.startsWith("blob:")?a=c.avatar:a=`${De}${c.avatar.startsWith("/")?"":"/"}${c.avatar}`)}return a?vt(a):pe(t,256)},[p,v,m,k]),I=O.useMemo(()=>{const t={...he};return v?.username&&(te&&(t[`${v.username}_camera`]=te),ne&&(t[`${v.username}_screen`]=ne)),t},[he,v,te,ne]),[R,H]=s.useState(null),[U,Se]=s.useState(null),[Ye,ke]=s.useState(!1),[At,Rt]=s.useState({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),[ae,$]=s.useState(null),[we,je]=s.useState(()=>{try{const t=localStorage.getItem("pawscord_voice_volumes");return t?JSON.parse(t):{}}catch{return{}}}),[ie,He]=s.useState({}),[Ue,re]=s.useState(!1),[Qe,Xe]=s.useState(!0),[Ce,Te]=s.useState("good"),[Ie,Ee]=s.useState("unknown"),[ze,Mt]=s.useState(!0),[Ae,_t]=s.useState(!0),[Re,Je]=s.useState({}),[Me,Ze]=s.useState({}),[et,tt]=s.useState({}),[z,_e]=s.useState(null),$e=s.useRef(null);s.useEffect(()=>{const t=()=>{ke(!0)};return window.addEventListener("openVoiceSettings",t),()=>window.removeEventListener("openVoiceSettings",t)},[]),s.useEffect(()=>{try{localStorage.setItem("pawscord_voice_volumes",JSON.stringify(we))}catch{}},[we]),s.useEffect(()=>{if(!f)return;const t=async()=>{const c=window.__pawscord_peer_connections__||{};for(const[i,o]of Object.entries(c))if(o&&o.getStats)try{(await o.getStats()).forEach(r=>{r.type==="candidate-pair"&&r.state==="succeeded"&&He(S=>({...S,[i]:{rtt:Math.round((r.currentRoundTripTime||0)*1e3),packetLoss:r.packetsLost&&r.packetsSent?Math.round(r.packetsLost/r.packetsSent*100*10)/10:0,quality:(r.currentRoundTripTime||0)<.1?"excellent":(r.currentRoundTripTime||0)<.2?"good":"poor"}}))})}catch{}},a=setInterval(t,3e3);return t(),()=>clearInterval(a)},[f]),s.useEffect(()=>(f&&J&&J(),()=>{Z&&Z()}),[f,J,Z]),s.useEffect(()=>{if(!ee||w||!f){re(!1);return}try{const t=window.AudioContext||window.webkitAudioContext,a=new t,c=a.createAnalyser();c.fftSize=2048,c.smoothingTimeConstant=.8;const i=a.createMediaStreamSource(ee);i.connect(c);const o=new Uint8Array(c.frequencyBinCount);let x=0;const S=setInterval(()=>{c.getByteFrequencyData(o);const L=o.slice(80,160),E=Math.max(...L),V=L.reduce((q,le)=>q+le,0)/L.length,D=o.slice(10,40),se=D.reduce((q,le)=>q+le,0)/D.length;E>180&&V>100&&V>se*1.5?(x++,x>3&&re(!0)):(x=0,E<120&&re(!1))},1e3);return()=>{clearInterval(S),i.disconnect(),a.close()}}catch{}},[ee,w,f]),s.useEffect(()=>{if(!f)return;const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection,a=()=>{if(!t){Te("good"),Ee("unknown");return}const i=t.effectiveType||"unknown";Ee(i);const o=t.downlink||10,x=t.rtt||50;let r="good";i==="4g"&&o>=5&&x<100?r="excellent":i==="slow-2g"||o<1||x>300?r="poor":i==="2g"||i==="3g"||o<3||x>150?r="good":r="excellent",Te(r),ze&&Y&&(r==="poor"&&_!=="720p"?Y("720p"):r==="excellent"&&_==="720p"&&Y("1080p"))};a(),t&&t.addEventListener("change",a);const c=setInterval(a,1e4);return()=>{clearInterval(c),t&&t.removeEventListener("change",a)}},[f,ze,_,Y]),s.useEffect(()=>{if(!Ae||!f)return;const a=setInterval(()=>{const c=document.querySelectorAll("audio[data-username]"),i={},o={...Me};c.forEach(x=>{const r=x.getAttribute("data-username");if(r)try{const S=new(window.AudioContext||window.webkitAudioContext),L=S.createMediaElementSource(x),E=S.createAnalyser();E.fftSize=256,L.connect(E),E.connect(S.destination);const V=new Uint8Array(E.frequencyBinCount);E.getByteFrequencyData(V);const D=V.reduce((se,q)=>se+q,0)/V.length;i[r]=D,D>0&&(D<50?o[r]=Math.min(1.5,(o[r]||1)*1.05):D>120&&(o[r]=Math.max(.7,(o[r]||1)*.95))),S.close()}catch{}}),Je(i),Ze(o)},2e3);return()=>clearInterval(a)},[Ae,f,Me]),s.useEffect(()=>{if(!f)return;const a=setInterval(()=>{const c={};let i=null,o=0;Object.entries(Re).forEach(([x,r])=>{r>30?(c[x]=!0,r>o&&(o=r,i=x)):c[x]=!1}),tt(c),i&&o>50?_e(i):o===0&&_e(null)},100);return()=>clearInterval(a)},[f,Re]),s.useEffect(()=>{const t=document.createElement("style");return t.id="voice-fullscreen-styles",t.textContent=`
            /* Tam Ekran Video Stilleri */
            div:fullscreen video,
            div:-webkit-full-screen video,
            div:-moz-full-screen video,
            div:-ms-fullscreen video {
                width: 100% !important;
                height: 100% !important;
                object-fit: contain !important;
                background: #000 !important;
            }

            /* Tam Ekran Container */
            div:fullscreen,
            div:-webkit-full-screen,
            div:-moz-full-screen,
            div:-ms-fullscreen {
                background: #000 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            /* Tam Ekran Kontrolleri */
            div:fullscreen .hover-actions,
            div:-webkit-full-screen .hover-actions,
            div:-moz-full-screen .hover-actions,
            div:-ms-fullscreen .hover-actions {
                opacity: 1 !important;
                z-index: 9999 !important;
            }

            /* ðŸ”¥ YENÄ°: Badge AnimasyonlarÄ± */
            @keyframes badgePulse {
                0%, 100% {
                    transform: scale(1);
                    box-shadow: 0 4px 16px rgba(88, 101, 242, 0.6), 0 0 0 2px rgba(255, 255, 255, 0.2);
                }
                50% {
                    transform: scale(1.05);
                    box-shadow: 0 6px 20px rgba(88, 101, 242, 0.9), 0 0 0 3px rgba(255, 255, 255, 0.4);
                }
            }

            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                    transform: scale(1);
                }
                50% {
                    opacity: 0.7;
                    transform: scale(1.2);
                }
            }

            /* ðŸ”¥ YENÄ°: Talking Indicator Wave Animations */
            @keyframes wave1 {
                0%, 100% { height: 12px; }
                50% { height: 20px; }
            }
            @keyframes wave2 {
                0%, 100% { height: 16px; }
                50% { height: 24px; }
            }
            @keyframes wave3 {
                0%, 100% { height: 12px; }
                50% { height: 20px; }
            }

            /* ðŸ”¥ YENÄ°: Avatar Talking Pulse Animation */
            @keyframes talkingPulse {
                0%, 100% {
                    box-shadow: 0 0 0 0 rgba(67, 181, 129, 0.7);
                    transform: scale(1);
                }
                50% {
                    box-shadow: 0 0 0 15px rgba(67, 181, 129, 0);
                    transform: scale(1.02);
                }
            }
        `,document.head.appendChild(t),()=>{const a=document.getElementById("voice-fullscreen-styles");a&&a.remove()}},[]);const{isMobile:Le}=ut(),Fe=R?"fullscreen":u?"minimized":Le?"mobile":"grid";s.useEffect(()=>{f||l()},[f,l]);const nt=t=>Le?{cols:1,rows:t}:t<=1?{cols:1,rows:1}:t<=4?{cols:2,rows:2}:t<=6?{cols:3,rows:2}:t<=9?{cols:3,rows:3}:{cols:4,rows:Math.ceil(t/4)},at=O.useMemo(()=>{let t=A.length;return A.forEach(a=>{const c=a.username;I[`${c}_screen`]&&a.isScreenSharing&&t++}),t},[A,I]),Q=A.length,{cols:Pe,rows:We}=nt(at),it=s.useCallback(async t=>{window.location.hash=`#/dm/${t.username}`},[]),rt=s.useCallback(async t=>{try{(await fetch("/api/friends/send_request/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`},body:JSON.stringify({username:t.username})})).ok?N.success(`âœ… ${t.username} kullanÄ±cÄ±sÄ±na arkadaÅŸlÄ±k isteÄŸi gÃ¶nderildi!`):N.error("âŒ ArkadaÅŸlÄ±k isteÄŸi gÃ¶nderilemedi")}catch{N.error("âŒ Bir hata oluÅŸtu")}},[]),ot=s.useCallback(async t=>{try{(await fetch("/api/users/block/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`},body:JSON.stringify({username:t.username})})).ok?N.success(`âœ… ${t.username} engellendi!`):N.error("âŒ Engelleme iÅŸlemi baÅŸarÄ±sÄ±z")}catch{N.error("âŒ Bir hata oluÅŸtu")}},[]),st=s.useCallback(t=>{$(null),window.openUserProfile?window.openUserProfile(t.username):window.location.hash=`#/profile/${t.username}`},[]),lt=s.useCallback(t=>{je(a=>({...a,[t.username]:{...a[t.username],isMuted:!a[t.username]?.isMuted}}))},[]),ct=s.useCallback((t,a)=>{const c=Math.max(0,Math.min(200,a));je(o=>({...o,[t.username]:{...o[t.username],volume:c}})),document.querySelectorAll(`audio[data-username="${t.username}"]`).forEach(o=>{if(c<=100){if(o.volume=c/100,o._gainNode)try{o._gainNode.gain.value=1}catch{}}else{o.volume=1;try{o._audioContext||(o._audioContext=new(window.AudioContext||window.webkitAudioContext),o._sourceNode=o._audioContext.createMediaElementSource(o),o._gainNode=o._audioContext.createGain(),o._sourceNode.connect(o._gainNode),o._gainNode.connect(o._audioContext.destination)),o._gainNode.gain.value=c/100}catch{}}})},[]),dt=()=>{const t=[];return d&&t.push(e.jsxs("span",{style:{background:"rgba(237,66,69,0.2)",color:"#ed4245",border:"1px solid rgba(237,66,69,0.4)",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"6px"},children:["âºï¸ KayÄ±tta (",Math.floor(C/60).toString().padStart(2,"0"),":",Math.floor(C%60).toString().padStart(2,"0"),")"]},"rec")),b&&t.push(e.jsxs("span",{style:{background:"rgba(88,101,242,0.15)",color:"#8893ff",border:"1px solid rgba(88,101,242,0.35)",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"6px"},children:["ðŸ–¥ï¸ PaylaÅŸÄ±lÄ±yor ",_," â€¢ ",K,"fps",Ve?" â€¢ ðŸ”Š Sistem":""]},"ss")),h&&t.push(e.jsxs("span",{style:{background:"rgba(250,166,26,0.18)",color:"#faa61a",border:"1px solid rgba(250,166,26,0.35)",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"6px"},children:["ðŸŽ™ï¸ PTT (",Ke,") ",T?"â€¢ Aktif":""]},"ptt")),Ne&&t.push(e.jsx("span",{style:{background:"rgba(255,255,255,0.08)",color:"#fff",border:"1px solid rgba(255,255,255,0.2)",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"6px"},children:"ðŸ”„ Yeniden baÄŸlanÄ±yor"},"reconnect")),t.length?e.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:t}):null},oe=t=>t.streamType==="screen"?e.jsxs("div",{style:{position:"absolute",top:"12px",left:"12px",background:"linear-gradient(135deg, #5865f2 0%, #7289da 100%)",color:"#fff",padding:"8px 16px",borderRadius:"12px",fontSize:"13px",fontWeight:700,boxShadow:"0 4px 16px rgba(88, 101, 242, 0.6), 0 0 0 2px rgba(255, 255, 255, 0.2)",zIndex:100,display:"flex",alignItems:"center",gap:"8px",animation:"badgePulse 2s infinite"},children:["ðŸ–¥ï¸ ",e.jsxs("span",{style:{textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)"},children:[t.username," - Ekran PaylaÅŸÄ±yor"]})]}):t.streamType==="camera"?e.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",background:"rgba(67, 181, 129, 0.85)",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"11px",fontWeight:600,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",zIndex:100,display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“¹ Kamera"}):null;if(Fe==="minimized")return e.jsx(gt,{nodeRef:$e,handle:".mini-drag-handle",defaultPosition:{x:20,y:window.innerHeight-180},bounds:"parent",children:e.jsxs("div",{ref:$e,style:{position:"fixed",zIndex:9999,background:"linear-gradient(135deg, #1e2124 0%, #2c2f33 50%, #23272a 100%)",borderRadius:"16px",padding:"16px",boxShadow:"0 12px 48px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(88, 101, 242, 0.15)",border:"1px solid rgba(88, 101, 242, 0.1)",minWidth:"320px",maxWidth:"400px",backdropFilter:"blur(12px)",animation:"slideIn 0.3s ease"},children:[e.jsxs("div",{className:"mini-drag-handle",style:{display:"flex",alignItems:"center",gap:"12px",cursor:"move",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#43b581",boxShadow:"0 0 12px #43b581",animation:"pulse 2s infinite"}}),e.jsxs("span",{style:{color:"#fff",fontSize:"14px",fontWeight:600,flex:1},children:["ðŸŽ¤ ",n]}),e.jsxs("div",{style:{background:"rgba(67, 181, 129, 0.2)",borderRadius:"12px",padding:"4px 10px",fontSize:"11px",color:"#43b581",fontWeight:600},children:["ðŸ‘¥ ",Q]}),e.jsx("button",{onClick:g,style:{background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",padding:"6px 10px",color:"#fff",cursor:"pointer",fontSize:"12px",transition:"all 0.2s"},onMouseEnter:t=>t.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:t=>t.target.style.background="rgba(255, 255, 255, 0.1)",children:"â¬†ï¸ AÃ§"})]}),e.jsxs("div",{style:{marginBottom:"12px",maxHeight:"120px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:[A.slice(0,3).map(t=>e.jsxs("div",{onContextMenu:a=>{a.preventDefault(),t.username!==v?.username&&$({user:t,position:{x:a.clientX,y:a.clientY}})},onClick:a=>{t.username!==v?.username&&$({user:t,position:{x:a.clientX,y:a.clientY}})},style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px",background:t.isTalking?"rgba(67, 181, 129, 0.15)":"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:t.isTalking?"1px solid rgba(67, 181, 129, 0.4)":"1px solid transparent",transition:"all 0.2s",cursor:t.username!==v?.username?"pointer":"default"},onMouseEnter:a=>{t.username!==v?.username&&(a.currentTarget.style.background="rgba(67, 181, 129, 0.2)")},onMouseLeave:a=>{a.currentTarget.style.background=t.isTalking?"rgba(67, 181, 129, 0.15)":"rgba(255, 255, 255, 0.05)"},children:[e.jsx("img",{src:B(t.username),alt:t.username,onError:a=>{a.target.onerror=null,a.target.src=pe(t.username,64)},style:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover",border:t.isTalking?"2px solid #43b581":"2px solid rgba(255, 255, 255, 0.15)",boxShadow:t.isTalking?"0 0 10px rgba(67, 181, 129, 0.5)":"none",transition:"all 0.3s ease"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{color:"#fff",fontSize:"13px",fontWeight:600},children:[t.username," ",t.isLocal&&"(Siz)"]}),e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"11px"},children:t.isMuted?"ðŸ”‡ Sessiz":t.isTalking?"ðŸ”Š KonuÅŸuyor":"ðŸŽ¤ Aktif"})]}),t.isCameraOn&&e.jsx("span",{style:{fontSize:"14px"},children:"ðŸ“¹"}),t.isScreenSharing&&e.jsx("span",{style:{fontSize:"14px"},children:"ðŸ–¥ï¸"})]},t.username)),Q>3&&e.jsxs("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.5)",fontSize:"11px",padding:"6px"},children:["+",Q-3," daha..."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:[e.jsx(X,{icon:w?"ðŸ”‡":"ðŸŽ¤",active:!w,onClick:ue,title:w?"Mikrofonu AÃ§":"Mikrofonu Kapat"}),e.jsx(X,{icon:W?"ðŸ“¹":"ðŸ“·",active:W,onClick:ge,title:W?"KamerayÄ± Kapat":"KamerayÄ± AÃ§"}),e.jsx(X,{icon:"ðŸ–¥ï¸",active:b,onClick:fe,title:b?"PaylaÅŸÄ±mÄ± Durdur":"Ekran PaylaÅŸ"}),e.jsx(X,{icon:"âŒ",danger:!0,onClick:me,title:"AyrÄ±l"})]})]})});if(Fe==="fullscreen"&&R){const t=R.streamType==="screen"?`${R.username}_screen`:`${R.username}_camera`,a=I[t]||I[R.username];return e.jsxs("div",{style:{width:"100%",height:"100%",background:"#000",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.8)",padding:"16px 24px",display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("button",{onClick:()=>H(null),style:{background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",padding:"8px 16px",color:"#fff",cursor:"pointer",fontSize:"14px"},children:"â¬…ï¸ Geri"}),e.jsxs("h3",{style:{color:"#fff",margin:0,flex:1},children:["ðŸ‘¤ ",R.username," ",R.streamType==="screen"&&"ðŸ–¥ï¸ Ekran PaylaÅŸÄ±mÄ±"]})]}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"#1a1a1a"},children:e.jsx(yt,{user:R,stream:a,fullscreen:!0})}),e.jsx(bt,{isMuted:w,isDeafened:j,isCameraOn:W,isScreenSharing:b,isSpatialAudio:y,isRecording:d,recordingDuration:C,onToggleMute:ue,onToggleDeafened:Be,onToggleCamera:ge,onToggleScreenShare:fe,onToggleSpatialAudio:qe,onStartRecording:Oe,onStopRecording:Ge,onLeave:me})]})}return e.jsxs("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #1e1e1e 0%, #2c2c2c 100%)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"16px 24px",display:"flex",alignItems:"center",gap:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#43b581",boxShadow:"0 0 12px #43b581",animation:"pulse 2s infinite"}}),e.jsxs("h2",{style:{color:"#fff",margin:0,fontSize:"17px",fontWeight:700,flex:1,display:"flex",alignItems:"center",gap:"12px",letterSpacing:"0.3px"},children:["ðŸŽ™ï¸ ",n,dt(),Ce==="poor"&&e.jsx("div",{style:{background:"rgba(240, 71, 71, 0.2)",border:"1px solid #f04747",borderRadius:"6px",padding:"4px 8px",fontSize:"12px",color:"#f04747",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:"âš ï¸ ZayÄ±f BaÄŸlantÄ±"}),Ce==="excellent"&&Ie!=="unknown"&&e.jsxs("div",{style:{background:"rgba(67, 181, 129, 0.2)",border:"1px solid #43b581",borderRadius:"6px",padding:"4px 8px",fontSize:"12px",color:"#43b581",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:["ðŸ“¶ ",Ie.toUpperCase()]})]}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px"},children:["ðŸ‘¥ ",Q," kiÅŸi"]}),e.jsx("button",{onClick:g,style:{background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",padding:"8px 16px",color:"#fff",cursor:"pointer",fontSize:"13px"},children:"â¬‡ï¸ KÃ¼Ã§Ã¼lt"})]}),e.jsx("div",{style:{flex:1,padding:"20px",display:"flex",flexDirection:"column",overflow:"auto",position:"relative",minHeight:0},children:(()=>{const t=A.filter(c=>c.isScreenSharing&&I[`${c.username}_screen`]);if(t.length>0){const c=[];t.forEach(r=>{const S=I[`${r.username}_screen`];S&&c.push({key:`${r.username}_screen`,username:r.username,type:"screen",component:e.jsx(de,{user:{...r,streamType:"screen"},stream:S,isActive:!1,isPinned:!1,onExpand:()=>H({...r,streamType:"screen"}),onPin:()=>{},onContextMenu:L=>$(L),badge:oe({...r,streamType:"screen"}),connectionQuality:ie[r.username],getUserAvatar:B},`${r.username}_screen`)})}),A.forEach(r=>{const S=I[`${r.username}_camera`]||I[r.username];(S&&S.active||r.isLocal)&&c.push({key:`${r.username}_camera`,username:r.username,type:"camera",component:e.jsx(de,{user:{...r,streamType:"camera",volume:be[r.username]||100,onVolumeChange:E=>ye(r.username,E),isTalking:et[r.username]||!1},stream:S,isActive:z===r.username,isPinned:U===r.username,onExpand:()=>H({...r,streamType:"camera"}),onPin:()=>Se(U===r.username?null:r.username),onContextMenu:E=>$(E),badge:oe(r),connectionQuality:ie[r.username],getUserAvatar:B},`${r.username}_camera`)})});const i=c.length;let o,x;return i<=2?(o=i,x=1):i<=4?(o=2,x=2):i<=6?(o=3,x=2):(o=3,x=Math.ceil(i/3)),e.jsx("div",{style:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:`repeat(${o}, 1fr)`,gridTemplateRows:`repeat(${x}, 1fr)`,gap:"16px",padding:"0",position:"relative"},children:c.map((r,S)=>e.jsx("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",zIndex:1,isolation:"isolate"},children:r.component},r.key))})}else return A.some(i=>{const o=I[`${i.username}_camera`]||I[i.username];return o&&o.active})?e.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${Pe}, 1fr)`,gridTemplateRows:`repeat(${We}, 1fr)`,gap:"16px",minHeight:"400px",height:"100%"},children:A.map(i=>{const o=I[`${i.username}_camera`]||(i.isLocal?null:I[i.username]);return e.jsx(de,{user:{...i,streamType:"camera",volume:be[i.username]||100,onVolumeChange:x=>ye(i.username,x)},stream:o,isActive:z===i.username,isPinned:U===i.username,onExpand:()=>H({...i,streamType:"camera"}),onPin:()=>Se(U===i.username?null:i.username),onContextMenu:x=>$(x),badge:oe({...i,streamType:"camera"}),connectionQuality:ie[i.username],getUserAvatar:B},`${i.username}_camera`)})}):e.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${Math.min(Pe,3)}, 1fr)`,gridTemplateRows:`repeat(${We}, 1fr)`,gap:"24px",padding:"40px",alignItems:"center",justifyContent:"center"},children:A.map(i=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"32px",borderRadius:"16px",background:z===i.username?"linear-gradient(135deg, rgba(88, 101, 242, 0.25) 0%, rgba(114, 137, 218, 0.15) 100%)":"rgba(47, 49, 54, 0.5)",border:z===i.username?"2px solid rgba(88, 101, 242, 0.9)":"2px solid rgba(79, 84, 92, 0.3)",boxShadow:z===i.username?"0 8px 32px rgba(88, 101, 242, 0.4), 0 0 20px rgba(88, 101, 242, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",transform:z===i.username?"scale(1.05)":"scale(1)",animation:"slideIn 0.4s ease forwards"},onClick:()=>$({user:i,position:{x:window.innerWidth/2,y:window.innerHeight/2}}),children:[e.jsx("div",{style:{width:"140px",height:"140px",borderRadius:"50%",overflow:"hidden",border:`5px solid ${z===i.username?"#5865f2":"#40444b"}`,boxShadow:z===i.username?"0 8px 24px rgba(88, 101, 242, 0.6), inset 0 0 20px rgba(88, 101, 242, 0.2)":"0 4px 12px rgba(0, 0, 0, 0.4)",animation:z===i.username?"pulse 1.5s infinite":"none",position:"relative"},children:e.jsx("img",{src:B(i.username),alt:i.username,onError:o=>{o.target.onerror=null,o.target.src=pe(i.username,256)},style:{width:"100%",height:"100%",objectFit:"cover",filter:z===i.username?"brightness(1.1)":"brightness(0.95)"}})}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:z===i.username?"#dee0fc":"#fff",textAlign:"center",textShadow:"0 2px 8px rgba(0, 0, 0, 0.7)",letterSpacing:"0.3px"},children:i.username}),e.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"22px",marginTop:"4px"},children:[i.isMuted&&e.jsx("span",{title:"Mikrofon KapalÄ±",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5))"},children:"ðŸ”‡"}),i.isDeafened&&e.jsx("span",{title:"KulaklÄ±k KapalÄ±",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5))"},children:"ðŸ”ˆ"})]})]},i.username))})})()}),Ue&&Qe&&e.jsxs("div",{style:{position:"absolute",bottom:"100px",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, rgba(250, 166, 26, 0.95) 0%, rgba(237, 66, 69, 0.95) 100%)",color:"#fff",padding:"16px 24px",borderRadius:"12px",zIndex:1e3,display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 8px 32px rgba(250, 166, 26, 0.6)",animation:"pulse 2s infinite",maxWidth:"90%"},children:[e.jsx("div",{style:{fontSize:"24px",animation:"pulse 1.5s infinite"},children:"âš ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",fontSize:"15px"},children:"Echo Tespit Edildi!"}),e.jsx("div",{style:{fontSize:"13px",opacity:.9},children:"KulaklÄ±k kullanmanÄ±z Ã¶nerilir. HoparlÃ¶r kullanÄ±mÄ± echo'ya neden olur."})]}),e.jsx("button",{onClick:()=>Xe(!1),style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"6px",color:"#fff",padding:"6px 12px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Kapat"})]}),Ye&&e.jsx(mt,{onClose:()=>ke(!1),channelId:n}),ae&&e.jsx(ft,{user:ae.user,position:ae.position,onClose:()=>$(null),onSendMessage:it,onAddFriend:rt,onBlock:ot,onViewProfile:st,onMuteUser:lt,onAdjustVolume:ct,currentUser:v,isInVoiceChat:!0}),e.jsx("style",{children:`
                @keyframes pulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.5; }
                }
                @keyframes talkingPulse {
                    0%, 100% { 
                        box-shadow: 0 0 0 0 rgba(67, 181, 129, 0.4);
                        transform: scale(1);
                    }
                    50% { 
                        box-shadow: 0 0 0 8px rgba(67, 181, 129, 0);
                        transform: scale(1.03);
                    }
                }
                @keyframes wave1 {
                    0%, 100% { height: 8px; }
                    50% { height: 16px; }
                }
                @keyframes wave2 {
                    0%, 100% { height: 12px; }
                    50% { height: 20px; }
                }
                @keyframes wave3 {
                    0%, 100% { height: 8px; }
                    50% { height: 14px; }
                }
                @keyframes badgePulse {
                    0%, 100% { 
                        box-shadow: 0 4px 16px rgba(88, 101, 242, 0.6), 0 0 0 2px rgba(255, 255, 255, 0.2);
                    }
                    50% { 
                        box-shadow: 0 4px 24px rgba(88, 101, 242, 0.8), 0 0 0 3px rgba(255, 255, 255, 0.3);
                    }
                }
                @keyframes slideIn {
                    from { opacity: 0; transform: translateY(10px) scale(0.95); }
                    to { opacity: 1; transform: translateY(0) scale(1); }
                }
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes connectionGlow {
                    0%, 100% { box-shadow: 0 0 12px rgba(67, 181, 129, 0.3); }
                    50% { box-shadow: 0 0 20px rgba(67, 181, 129, 0.6); }
                }
                @keyframes screenShareGlow {
                    0%, 100% { border-color: rgba(88, 101, 242, 0.5); }
                    50% { border-color: rgba(88, 101, 242, 0.9); }
                }
                
                /* Smooth grid transitions */
                .voice-grid-item {
                    animation: slideIn 0.3s ease forwards;
                }
                
                /* Video card hover effects */
                .voice-video-card:hover {
                    transform: scale(1.01);
                    z-index: 10;
                }
                
                /* Active speaker highlight */
                .voice-active-speaker {
                    animation: connectionGlow 2s ease-in-out infinite;
                }
                
                /* Screen share border animation */
                .voice-screen-share {
                    animation: screenShareGlow 2s ease-in-out infinite;
                }
            `})]})},Gt=O.memo(St);export{Gt as default};
