var I=Object.defineProperty;var o=(r,n)=>I(r,"name",{value:n,configurable:!0});import{r as a,j as t}from"./react-core-Djgtqrmb.js";import{aE as S,a as C,z as L,bv as w}from"./icons-vendor-BMXAt4pj.js";import{t as f}from"./index-DjBRFZUD.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const E=o(({fetchWithAuth:r,apiBaseUrl:n,onClose:v,username:c})=>{const[d,g]=a.useState([]),[p,m]=a.useState([]),[h,x]=a.useState(!1),[l,y]=a.useState("activity");a.useEffect(()=>{u(),b()},[c]);const u=o(async()=>{x(!0);try{const s=await(await r(`${n}/activity/${c}/`)).json();g(s.activity||[])}catch{f.error("Failed to load activity log")}finally{x(!1)}},"fetchActivityLog"),b=o(async()=>{try{const s=await(await r(`${n}/presence/${c}/`)).json();m(s.history||[])}catch{f.error("Failed to load presence history")}},"fetchPresenceHistory"),j=o(i=>{switch(i){case"message":return"ðŸ’¬";case"reaction":return"â¤ï¸";case"join":return"ðŸšª";case"voice":return"ðŸŽ¤";default:return"ðŸ“Š"}},"getActivityIcon");return t.jsx("div",{style:e.overlay,children:t.jsxs("div",{style:e.modal,children:[t.jsxs("div",{style:e.header,children:[t.jsxs("div",{style:e.headerLeft,children:[t.jsx(S,{style:{marginRight:"10px",color:"#5865f2"}}),t.jsxs("h2",{style:e.title,children:["Activity - ",c]})]}),t.jsx("button",{onClick:v,style:e.closeButton,children:t.jsx(C,{})})]}),t.jsxs("div",{style:e.tabs,children:[t.jsxs("button",{onClick:o(()=>y("activity"),"onClick"),style:{...e.tab,...l==="activity"&&e.tabActive},children:[t.jsx(L,{style:{marginRight:"5px"}}),"Activity Log"]}),t.jsxs("button",{onClick:o(()=>y("presence"),"onClick"),style:{...e.tab,...l==="presence"&&e.tabActive},children:[t.jsx(w,{style:{marginRight:"5px"}}),"Presence History"]})]}),t.jsx("div",{style:e.content,children:h?t.jsx("div",{style:e.loading,children:"Loading activity..."}):l==="activity"?t.jsx("div",{style:e.activityList,children:d.length===0?t.jsx("div",{style:e.empty,children:"No activity data available"}):d.map((i,s)=>t.jsxs("div",{style:e.activityItem,children:[t.jsx("div",{style:e.activityIcon,children:j(i.type)}),t.jsxs("div",{style:e.activityInfo,children:[t.jsx("div",{style:e.activityText,children:i.description}),t.jsx("div",{style:e.activityTime,children:new Date(i.timestamp).toLocaleString()})]})]},s))}):t.jsx("div",{style:e.presenceList,children:p.length===0?t.jsx("div",{style:e.empty,children:"No presence history available"}):p.map((i,s)=>t.jsxs("div",{style:e.presenceItem,children:[t.jsx("div",{style:{...e.statusIndicator,backgroundColor:i.status==="online"?"#43b581":i.status==="idle"?"#faa61a":i.status==="dnd"?"#f04747":"#99aab5"}}),t.jsxs("div",{style:e.presenceInfo,children:[t.jsx("div",{style:e.presenceStatus,children:i.status.charAt(0).toUpperCase()+i.status.slice(1)}),t.jsx("div",{style:e.presenceTime,children:new Date(i.timestamp).toLocaleString()})]}),i.duration&&t.jsxs("div",{style:e.presenceDuration,children:[Math.round(i.duration/60)," minutes"]})]},s))})})]})})},"UserActivityPanel"),e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},tabs:{display:"flex",borderBottom:"1px solid #2c2f33",padding:"0 20px"},tab:{padding:"12px 20px",backgroundColor:"transparent",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",borderBottom:"2px solid transparent"},tabActive:{color:"#5865f2",borderBottom:"2px solid #5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},activityList:{display:"flex",flexDirection:"column",gap:"12px"},activityItem:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},activityIcon:{fontSize:"24px"},activityInfo:{flex:1},activityText:{fontSize:"14px",color:"#dcddde",marginBottom:"4px"},activityTime:{fontSize:"12px",color:"#99aab5"},presenceList:{display:"flex",flexDirection:"column",gap:"12px"},presenceItem:{backgroundColor:"#2c2f33",borderRadius:"6px",padding:"16px",display:"flex",gap:"12px",alignItems:"center"},statusIndicator:{width:"12px",height:"12px",borderRadius:"50%"},presenceInfo:{flex:1},presenceStatus:{fontSize:"14px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},presenceTime:{fontSize:"12px",color:"#99aab5"},presenceDuration:{fontSize:"13px",color:"#dcddde"}};export{E as default};
