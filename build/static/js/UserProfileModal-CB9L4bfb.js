import{r as l,aY as W,al as H,aZ as K,ak as I,aX as Y,a_ as G,a$ as Z,O as q,aQ as _,Y as J,h as U}from"./react-core-B6hadH-M.js";import{t as f}from"./index-D_6pZib5.js";import V from"./SessionManagerModal-C1wVA1SV.js";import M from"./UserNotesModal-uxONxN00.js";const X=({achievement:t,size:s="medium"})=>{const p={trophy:I,medal:K,star:H,crown:W}[t.icon_type]||I,u={small:{width:"30px",height:"30px",fontSize:"14px"},medium:{width:"50px",height:"50px",fontSize:"24px"},large:{width:"70px",height:"70px",fontSize:"32px"}};return React.createElement("div",{style:{...u[s],backgroundColor:t.color||"#5865f2",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",position:"relative",cursor:"pointer"},title:`${t.name}: ${t.description}`},React.createElement(p,null),t.is_new&&React.createElement("span",{style:{position:"absolute",top:"-5px",right:"-5px",width:"12px",height:"12px",backgroundColor:"#f04747",borderRadius:"50%",border:"2px solid #2b2d31"}}))},Q=({username:t,fetchWithAuth:s,apiBaseUrl:y})=>{const[p,u]=l.useState([]),[o,i]=l.useState([]),[E,b]=l.useState(!0);l.useEffect(()=>{c()},[t]);const c=async()=>{try{const[n,h]=await Promise.all([s(`${y}/api/user/achievements/`),s(`${y}/api/user/badges/`)]);if(n.ok){const x=await n.json();u(x.achievements||[])}if(h.ok){const x=await h.json();i(x.badges||[])}}catch(n){console.error("Achievement load error:",n)}finally{b(!1)}};return E?React.createElement("div",{style:{color:"#949ba4",fontSize:"0.9em"}},"YÃ¼kleniyor..."):p.length===0&&o.length===0?React.createElement("div",{style:{color:"#949ba4",fontSize:"0.9em"}},"HenÃ¼z baÅŸarÄ± kazanÄ±lmadÄ±"):React.createElement("div",{style:{marginTop:"15px"}},p.length>0&&React.createElement("div",{style:{marginBottom:"15px"}},React.createElement("h4",{style:{color:"#949ba4",fontSize:"0.85em",marginBottom:"10px",textTransform:"uppercase"}},"ðŸ† BaÅŸarÄ±lar (",p.length,")"),React.createElement("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"}},p.slice(0,10).map(n=>React.createElement(X,{key:n.id,achievement:n,size:"medium"})))),o.length>0&&React.createElement("div",null,React.createElement("h4",{style:{color:"#949ba4",fontSize:"0.85em",marginBottom:"10px",textTransform:"uppercase"}},"ðŸŽ–ï¸ Rozetler (",o.length,")"),React.createElement("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"}},o.map(n=>React.createElement("div",{key:n.id,style:{padding:"5px 12px",backgroundColor:n.color||"#5865f2",borderRadius:"12px",color:"white",fontSize:"0.8em",fontWeight:"bold",display:"flex",alignItems:"center",gap:"5px"},title:n.description},n.emoji&&React.createElement("span",null,n.emoji),n.name)))))},ee=t=>t.includes("steam")?"fab fa-steam":t.includes("x")?"fab fa-twitter":t.includes("instagram")?"fab fa-instagram":"fa fa-link",te=(t,s)=>!t||t.trim()===""?"#":t.startsWith("http://")||t.startsWith("https://")?t:s==="x"?`https://x.com/${t.replace("@","")}`:s==="instagram"?`https://instagram.com/${t.replace("@","")}`:`https://${t}`,se=({user:t,onClose:s,onStartDM:y,onImageClick:p,getDeterministicAvatar:u,fetchWithAuth:o,apiBaseUrl:i,currentUser:E,friendsList:b})=>{const[c,n]=l.useState("idle"),[h,x]=l.useState(!1),[$,C]=l.useState(!1),[m,v]=l.useState("profile"),[S,w]=l.useState([]);if(l.useEffect(()=>{m==="activity"&&t.username&&(async()=>{try{const r=await o(`${i}/presence/${t.username}/`);if(r.ok){const d=await r.json();w(d.presence||[])}}catch(r){console.error("Failed to fetch presence history:",r),w([])}})()},[m,t.username,o,i]),!t)return null;const F=b&&Array.isArray(b)&&b.some(e=>typeof e=="string"?e===t.username:e.username===t.username||e.sender_username===t.username||e.receiver_username===t.username),g=t.username===E,D=async()=>{n("loading");try{(await o(`${i}/friends/send/`,{method:"POST",body:JSON.stringify({username:t.username})})).ok?n("success"):(f.error("âŒ Ä°stek gÃ¶nderilemedi. Zaten ekli veya bekliyor olabilir."),n("idle"))}catch(e){console.error("ArkadaÅŸ ekleme hatasÄ±:",e),n("idle")}},T=(e,r)=>{try{navigator.clipboard.writeText(e),f.success(`âœ… '${r}' panoya kopyalandÄ±`)}catch{f.error("âŒ Kopyalama hatasÄ±.")}},L={steam_trade:"Steam Trade URL",steam_profile:"Steam Profili",steam_friend_code:"Steam ArkadaÅŸ Kodu",x:"X (Twitter)",instagram:"Instagram"},N=async()=>{const e=prompt(`Ne kadar Coin gÃ¶ndermek istiyorsun? (${t.username} kiÅŸisine)`);if(e)try{const r=await o(`${i}/store/transfer/`,{method:"POST",body:JSON.stringify({target_username:t.username,amount:e})}),d=await r.json();r.ok?f.success(d.message):f.error(d.error)}catch{f.error("âŒ Hata.")}},P=t.social_links||{},z=Object.entries(P).filter(([e,r])=>r&&r.trim()!==""),j=()=>{y(t.username)},R=t.avatar||u(t.username),k=typeof R=="string"&&R.startsWith("http")?R:typeof R=="string"?`${i}${R}`:u(t.username),A=k+(t.avatar&&typeof t.avatar=="string"?`?t=${Date.now()}`:""),O=React.createElement("div",{style:{...a.overlay,zIndex:9999},onClick:s},React.createElement("div",{style:{...a.modal,zIndex:1e4,position:"relative"},onClick:e=>e.stopPropagation()},React.createElement("div",{style:{position:"relative",height:"180px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"16px 16px 0 0",overflow:"visible"}},React.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='rgba(255,255,255,0.1)' d='M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"bottom",backgroundSize:"cover",opacity:.3,zIndex:1,borderRadius:"16px 16px 0 0",overflow:"hidden"}}),React.createElement("div",{style:{position:"absolute",bottom:"-50px",left:"32px",width:"120px",height:"120px",borderRadius:"50%",border:"5px solid #2f3136",overflow:"hidden",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.3)",cursor:"pointer",transition:"transform 0.3s ease",zIndex:1e3,backgroundColor:"#2f3136"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.05)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",onClick:()=>p(k)},React.createElement("img",{src:A,key:k,style:{width:"100%",height:"100%",objectFit:"cover"},alt:`${t.username} avatar`,onError:e=>{console.error("âŒ [UserProfileModal] Avatar load failed:",e.target.src),e.target.src=u(t.username)}})),React.createElement("div",{style:{position:"absolute",top:"16px",right:"16px",display:"flex",gap:"8px",zIndex:1e3}},React.createElement("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),s()},style:{width:"36px",height:"36px",borderRadius:"50%",border:"2px solid rgba(255, 255, 255, 0.3)",background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",zIndex:1001},onMouseEnter:e=>{e.currentTarget.style.background="rgba(240, 71, 71, 0.8)",e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(0, 0, 0, 0.6)",e.currentTarget.style.transform="scale(1)"}},"Ã—"))),React.createElement("div",{style:{padding:"70px 32px 24px 32px",background:"#2f3136"}},React.createElement("h2",{style:{fontSize:"28px",fontWeight:"700",margin:"0 0 12px 0",color:"#fff",display:"flex",alignItems:"center",gap:"8px"}},t.username,t.is_premium&&React.createElement("span",{style:{fontSize:"20px"}},"ðŸ’Ž"),t.is_verified&&React.createElement("span",{style:{fontSize:"20px"}},"âœ…")),React.createElement("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"}},!F&&!g&&React.createElement("button",{onClick:D,style:{...a.actionButton,backgroundColor:c==="success"?"#43b581":"#5865f2",cursor:c==="success"||c==="loading"?"default":"pointer",flex:1},disabled:c!=="idle"},c==="loading"?"...":c==="success"?React.createElement(Y,null):React.createElement(G,null),c==="success"?" GÃ¶nderildi":" ArkadaÅŸ Ekle"),!g&&React.createElement("button",{onClick:N,style:{...a.actionButton,backgroundColor:"#f0b232",flex:1}},React.createElement(Z,null)," Coin GÃ¶nder"),g&&React.createElement("button",{onClick:()=>x(!0),style:{...a.actionButton,backgroundColor:"#43b581",flex:1},title:"Aktif OturumlarÄ± YÃ¶net"},React.createElement(q,null)," Oturumlar"),!g&&React.createElement("button",{onClick:j,style:{...a.messageButton,flex:1}},"ðŸ’¬ Mesaj GÃ¶nder"),!g&&React.createElement("button",{onClick:()=>C(!0),style:{...a.actionButton,backgroundColor:"#faa61a",flex:0,minWidth:"44px"},title:"KullanÄ±cÄ± Notu"},React.createElement(_,null)))),React.createElement("div",{style:{...a.content,padding:"24px 32px",overflowY:"auto"}},t.friend_code&&React.createElement("div",{onClick:()=>T(t.friend_code,"ArkadaÅŸ Kodu"),style:{...a.friendCodeContainer,background:"rgba(88, 101, 242, 0.1)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="rgba(88, 101, 242, 0.2)",onMouseLeave:e=>e.currentTarget.style.background="rgba(88, 101, 242, 0.1)",title:"Kodu Kopyalamak Ä°Ã§in TÄ±kla"},React.createElement("span",{style:a.friendCodeLabel},"ArkadaÅŸ Kodu"),React.createElement("span",{style:a.friendCodeValue},t.friend_code)),t.status_message&&React.createElement("div",{style:a.section},React.createElement("h4",{style:a.sectionTitle},"Durum"),React.createElement("p",{style:a.statusText},t.status_message)),React.createElement("div",{style:a.tabsContainer},React.createElement("button",{onClick:()=>v("profile"),style:{...a.tabButton,...m==="profile"&&a.activeTab}},"Profile"),React.createElement("button",{onClick:()=>v("activity"),style:{...a.tabButton,...m==="activity"&&a.activeTab}},React.createElement(J,null)," Activity"),!g&&React.createElement("button",{onClick:()=>v("notes"),style:{...a.tabButton,...m==="notes"&&a.activeTab}},React.createElement(_,null)," Notes")),m==="profile"&&React.createElement(React.Fragment,null,React.createElement(Q,{username:t.username,fetchWithAuth:o,apiBaseUrl:i}),z.length>0&&React.createElement("div",{style:a.section},React.createElement("h4",{style:a.sectionTitle},"BaÄŸlantÄ±lar"),React.createElement("div",{style:a.linksContainer},z.map(([e,r])=>{const d=L[e]||e.charAt(0).toUpperCase()+e.slice(1),B=ee(e);return e==="steam_friend_code"||e==="steam_trade"?React.createElement("button",{key:e,onClick:()=>T(r,d),style:a.linkButton,title:`Kopyala: ${r}`},React.createElement("i",{className:B}),React.createElement("span",{style:a.linkText},d),React.createElement("i",{className:"fa fa-copy",style:{marginLeft:"auto",color:"var(--text-secondary)"}})):React.createElement("a",{key:e,href:te(r,e),target:"_blank",rel:"noopener noreferrer",style:a.linkButton,title:r},React.createElement("i",{className:B}),React.createElement("span",{style:a.linkText},d))})))),m==="activity"&&React.createElement("div",{style:a.section},React.createElement("h4",{style:a.sectionTitle},"Activity Timeline"),S.length===0?React.createElement("p",{style:a.noDataText},"No activity data available"):React.createElement("div",{style:a.presenceTimeline},S.map((e,r)=>React.createElement("div",{key:r,style:a.presenceEntry},React.createElement("div",{style:{...a.presenceStatus,backgroundColor:e.status==="online"?"#43b581":e.status==="idle"?"#faa61a":e.status==="dnd"?"#f04747":"#747f8d"}}),React.createElement("div",{style:a.presenceDetails},React.createElement("span",{style:a.presenceStatusText},e.status==="online"?"ðŸŸ¢ Online":e.status==="idle"?"ðŸŸ¡ Idle":e.status==="dnd"?"ðŸ”´ Do Not Disturb":"âš« Offline"),React.createElement("span",{style:a.presenceTime},new Date(e.timestamp).toLocaleString("tr-TR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))))))))),m==="notes"&&!g&&React.createElement("div",{style:{padding:"0 32px 24px"}},React.createElement(M,{targetUser:t.username,apiBaseUrl:i?i.replace(/\/api\/?$/,"")+"/api":"",fetchWithAuth:o,onClose:()=>v("profile"),inline:!0})),$&&React.createElement(M,{targetUser:t.username,apiBaseUrl:i?i.replace(/\/api\/?$/,"")+"/api":"",fetchWithAuth:o,onClose:()=>C(!1)}),h&&React.createElement(V,{onClose:()=>x(!1),fetchWithAuth:o,apiBaseUrl:i}));return U.createPortal(O,document.body)},a={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(8px)"},modal:{width:"500px",maxWidth:"90vw",backgroundColor:"#2f3136",borderRadius:"16px",boxShadow:"0 25px 50px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",maxHeight:"90vh",border:"1px solid rgba(255, 255, 255, 0.1)"},actionButton:{padding:"12px 20px",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",transition:"all 0.2s",cursor:"pointer"},messageButton:{padding:"12px 20px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"0.9em"},content:{padding:"20px",maxHeight:"60vh",overflowY:"auto"},friendCodeContainer:{backgroundColor:"rgba(88, 101, 242, 0.1)",padding:"10px 15px",borderRadius:"8px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",border:"1px dashed #5865f2",marginBottom:"15px",transition:"background-color 0.2s"},friendCodeLabel:{fontSize:"0.75em",color:"#949ba4",textTransform:"uppercase",fontWeight:"bold",marginBottom:"4px"},friendCodeValue:{fontSize:"1.3em",color:"#5865f2",fontWeight:"800",letterSpacing:"2px"},section:{marginTop:"20px"},sectionTitle:{color:"var(--text-secondary)",fontSize:"0.8em",fontWeight:"bold",textTransform:"uppercase",margin:"0 0 8px 0",borderBottom:"1px solid var(--border-primary)",paddingBottom:"5px"},statusText:{color:"var(--text-primary)",margin:0,fontSize:"0.9em"},linksContainer:{display:"flex",flexDirection:"column",gap:"8px"},linkButton:{display:"flex",alignItems:"center",padding:"10px 12px",backgroundColor:"var(--background-secondary)",borderRadius:"4px",color:"var(--text-primary)",textDecoration:"none",transition:"background-color 0.2s ease",border:"none",fontFamily:"inherit",fontSize:"1em",width:"auto",cursor:"pointer",textAlign:"left",alignSelf:"flex-start"},linkText:{marginLeft:"10px",fontWeight:"500"},tabsContainer:{display:"flex",gap:"10px",borderBottom:"2px solid var(--background-tertiary)",marginBottom:"20px"},tabButton:{background:"none",border:"none",padding:"10px 20px",color:"var(--text-secondary)",cursor:"pointer",fontWeight:"500",borderBottom:"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"5px"},activeTab:{color:"var(--brand-color)",borderBottomColor:"var(--brand-color)"},presenceTimeline:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"15px"},presenceEntry:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",backgroundColor:"var(--background-secondary)",borderRadius:"6px",transition:"background-color 0.2s"},presenceStatus:{width:"12px",height:"12px",borderRadius:"50%",flexShrink:0},presenceDetails:{display:"flex",flexDirection:"column",gap:"4px",flex:1},presenceStatusText:{color:"var(--text-primary)",fontWeight:"500",fontSize:"0.95em"},presenceTime:{color:"var(--text-secondary)",fontSize:"0.85em"},noDataText:{color:"var(--text-secondary)",textAlign:"center",padding:"20px",fontStyle:"italic"}};export{se as default};
