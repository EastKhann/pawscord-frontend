var Lt=Object.defineProperty;var St=i=>{throw TypeError(i)};var Ct=(i,e,t)=>e in i?Lt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var d=(i,e)=>Lt(i,"name",{value:e,configurable:!0});var h=(i,e,t)=>Ct(i,typeof e!="symbol"?e+"":e,t),rt=(i,e,t)=>e.has(i)||St("Cannot "+t);var s=(i,e,t)=>(rt(i,e,"read from private field"),t?t.call(i):e.get(i)),l=(i,e,t)=>e.has(i)?St("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),c=(i,e,t,r)=>(rt(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),b=(i,e,t)=>(rt(i,e,"access private method"),t);const It=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],At=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function Ht(i){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${$t(i)}></audio>
    </slot>
    <slot></slot>
  `}d(Ht,"getAudioTemplateHTML");function zt(i){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${$t(i)}></video>
    </slot>
    <slot></slot>
  `}d(zt,"getVideoTemplateHTML");function Pt(i,{tag:e,is:t}){var u,p,m,qt,G,J,T,K,g,C,st,Ot,ot,Mt,jt;const r=globalThis.document?.createElement?.(e,{is:t}),a=r?Bt(r):[];return u=class extends i{constructor(){super(...arguments);l(this,g);l(this,G,!1);l(this,J,null);l(this,T,new Map);l(this,K);h(this,"get");h(this,"set");h(this,"call")}static get observedAttributes(){var f;return b(f=u,m,qt).call(f),[...r?.constructor?.observedAttributes??[],...At]}get nativeEl(){return b(this,g,C).call(this),s(this,J)??this.querySelector(":scope > [slot=media]")??this.querySelector(e)??this.shadowRoot?.querySelector(e)??null}set nativeEl(o){c(this,J,o)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(o){this.toggleAttribute("muted",o)}get src(){return this.getAttribute("src")}set src(o){this.setAttribute("src",`${o}`)}get preload(){return this.getAttribute("preload")??this.nativeEl?.preload}set preload(o){this.setAttribute("preload",`${o}`)}init(){if(!this.shadowRoot){this.attachShadow({mode:"open"});const o=Ft(this.attributes);t&&(o.is=t),e&&(o.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(o)}this.nativeEl.muted=this.hasAttribute("muted");for(const o of a)b(this,g,Mt).call(this,o);c(this,K,new MutationObserver(b(this,g,Ot).bind(this))),this.shadowRoot.addEventListener("slotchange",()=>b(this,g,st).call(this)),b(this,g,st).call(this);for(const o of this.constructor.Events)this.shadowRoot.addEventListener(o,this,!0)}handleEvent(o){o.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(o.type,{detail:o.detail}))}attributeChangedCallback(o,f,y){b(this,g,C).call(this),b(this,g,jt).call(this,o,f,y)}connectedCallback(){b(this,g,C).call(this)}},p=new WeakMap,m=new WeakSet,qt=d(function(){if(s(this,p))return;c(this,p,!0);const o=new Set(this.observedAttributes);o.delete("muted");for(const f of a)if(!(f in this.prototype))if(typeof r[f]=="function")this.prototype[f]=function(...y){return b(this,g,C).call(this),d(()=>this.call?this.call(f,...y):this.nativeEl?.[f]?.apply(this.nativeEl,y),"fn")()};else{const y={get(){b(this,g,C).call(this);const v=f.toLowerCase();if(o.has(v)){const k=this.getAttribute(v);return k===null?!1:k===""?!0:k}return this.get?.(f)??this.nativeEl?.[f]}};f!==f.toUpperCase()&&(y.set=function(v){b(this,g,C).call(this);const k=f.toLowerCase();if(o.has(k)){v===!0||v===!1||v==null?this.toggleAttribute(k,!!v):this.setAttribute(k,v);return}if(this.set){this.set(f,v);return}this.nativeEl&&(this.nativeEl[f]=v)}),Object.defineProperty(this.prototype,f,y)}},"#define"),G=new WeakMap,J=new WeakMap,T=new WeakMap,K=new WeakMap,g=new WeakSet,C=d(function(){s(this,G)||(c(this,G,!0),this.init())},"#init"),st=d(function(){const o=new Map(s(this,T));(this.shadowRoot?.querySelector("slot:not([name])")?.assignedElements({flatten:!0}).filter(v=>["track","source"].includes(v.localName))).forEach(v=>{o.delete(v);let k=s(this,T).get(v);k||(k=v.cloneNode(),s(this,T).set(v,k),s(this,K)?.observe(v,{attributes:!0})),this.nativeEl?.append(k),b(this,g,ot).call(this,k)}),o.forEach((v,k)=>{v.remove(),s(this,T).delete(k)})},"#syncMediaChildren"),Ot=d(function(o){for(const f of o)if(f.type==="attributes"){const{target:y,attributeName:v}=f,k=s(this,T).get(y);k&&v&&(k.setAttribute(v,y.getAttribute(v)??""),b(this,g,ot).call(this,k))}},"#syncMediaChildAttribute"),ot=d(function(o){o&&o.localName==="track"&&o.default&&(o.kind==="chapters"||o.kind==="metadata")&&o.track.mode==="disabled"&&(o.track.mode="hidden")},"#enableDefaultTrack"),Mt=d(function(o){if(Object.prototype.hasOwnProperty.call(this,o)){const f=this[o];delete this[o],this[o]=f}},"#upgradeProperty"),jt=d(function(o,f,y){["id","class"].includes(o)||!u.observedAttributes.includes(o)&&this.constructor.observedAttributes.includes(o)||(y===null?this.nativeEl?.removeAttribute(o):this.nativeEl?.getAttribute(o)!==y&&this.nativeEl?.setAttribute(o,y))},"#forwardAttribute"),l(u,m),d(u,"CustomMedia"),h(u,"getTemplateHTML",e.endsWith("audio")?Ht:zt),h(u,"shadowRootOptions",{mode:"open"}),h(u,"Events",It),l(u,p,!1),u}d(Pt,"CustomMediaMixin");function Bt(i){const e=[];for(let t=Object.getPrototypeOf(i);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t)){const r=Object.getOwnPropertyNames(t);e.push(...r)}return e}d(Bt,"getNativeElProps");function $t(i){let e="";for(const t in i){if(!At.includes(t))continue;const r=i[t];r===""?e+=` ${t}`:e+=` ${t}="${r}"`}return e}d($t,"serializeAttributes");function Ft(i){const e={};for(const t of i)e[t.name]=t.value;return e}d(Ft,"namedNodeMapToObject");const te=Pt(globalThis.HTMLElement??class{},{tag:"video"});Pt(globalThis.HTMLElement??class{},{tag:"audio"});const vt=class vt extends Event{constructor(t,r){super(t);h(this,"track");this.track=r.track}};d(vt,"TrackEvent");let V=vt;const dt=new WeakMap;function n(i){return dt.get(i)??Dt(i,{})}d(n,"getPrivate");function Dt(i,e){let t=dt.get(i);return t||dt.set(i,t={}),Object.assign(t,e)}d(Dt,"setPrivate");function at(i,e){const t=i.videoTracks;n(e).media=i,n(e).renditionSet||(n(e).renditionSet=new Set);const r=n(t).trackSet;r.add(e);const a=r.size-1;a in X.prototype||Object.defineProperty(X.prototype,a,{get(){return[...n(this).trackSet][a]}}),queueMicrotask(()=>{t.dispatchEvent(new V("addtrack",{track:e}))})}d(at,"addVideoTrack");function ct(i){const e=n(i).media?.videoTracks;if(!e)return;n(e).trackSet.delete(i),queueMicrotask(()=>{e.dispatchEvent(new V("removetrack",{track:i}))})}d(ct,"removeVideoTrack");function Nt(i){const e=n(i).media.videoTracks??[];let t=!1;for(const r of e)r!==i&&(r.selected=!1,t=!0);if(t){if(n(e).changeRequested)return;n(e).changeRequested=!0,queueMicrotask(()=>{delete n(e).changeRequested,e.dispatchEvent(new Event("change"))})}}d(Nt,"selectedChanged$2");var w,L,S,I,Q;const pt=class pt extends EventTarget{constructor(){super();l(this,I);l(this,w);l(this,L);l(this,S);n(this).trackSet=new Set}[Symbol.iterator](){return s(this,I,Q).values()}get length(){return s(this,I,Q).size}getTrackById(t){return[...s(this,I,Q)].find(r=>r.id===t)??null}get selectedIndex(){return[...s(this,I,Q)].findIndex(t=>t.selected)}get onaddtrack(){return s(this,w)}set onaddtrack(t){s(this,w)&&(this.removeEventListener("addtrack",s(this,w)),c(this,w,void 0)),typeof t=="function"&&(c(this,w,t),this.addEventListener("addtrack",t))}get onremovetrack(){return s(this,L)}set onremovetrack(t){s(this,L)&&(this.removeEventListener("removetrack",s(this,L)),c(this,L,void 0)),typeof t=="function"&&(c(this,L,t),this.addEventListener("removetrack",t))}get onchange(){return s(this,S)}set onchange(t){s(this,S)&&(this.removeEventListener("change",s(this,S)),c(this,S,void 0)),typeof t=="function"&&(c(this,S,t),this.addEventListener("change",t))}};w=new WeakMap,L=new WeakMap,S=new WeakMap,I=new WeakSet,Q=d(function(){return n(this).trackSet},"#tracks"),d(pt,"VideoTrackList");let X=pt;const gt=class gt extends Event{constructor(t,r){super(t);h(this,"rendition");this.rendition=r.rendition}};d(gt,"RenditionEvent");let W=gt;function Ut(i,e){const t=n(i).media.videoRenditions;n(e).media=n(i).media,n(e).track=i;const r=n(i).renditionSet;r.add(e);const a=r.size-1;a in Y.prototype||Object.defineProperty(Y.prototype,a,{get(){return H(this)[a]}}),queueMicrotask(()=>{i.selected&&t.dispatchEvent(new W("addrendition",{rendition:e}))})}d(Ut,"addRendition$1");function Vt(i){const e=n(i).media.videoRenditions,t=n(i).track;n(t).renditionSet.delete(i),queueMicrotask(()=>{n(i).track.selected&&e.dispatchEvent(new W("removerendition",{rendition:i}))})}d(Vt,"removeRendition$1");function Wt(i){const e=n(i).media.videoRenditions;!e||n(e).changeRequested||(n(e).changeRequested=!0,queueMicrotask(()=>{delete n(e).changeRequested,n(i).track.selected&&e.dispatchEvent(new Event("change"))}))}d(Wt,"selectedChanged$1");function H(i){return[...n(i).media.videoTracks].filter(t=>t.selected).flatMap(t=>[...n(t).renditionSet])}d(H,"getCurrentRenditions$1");var R,x,A;const kt=class kt extends EventTarget{constructor(){super(...arguments);l(this,R);l(this,x);l(this,A)}[Symbol.iterator](){return H(this).values()}get length(){return H(this).length}getRenditionById(t){return H(this).find(r=>`${r.id}`==`${t}`)??null}get selectedIndex(){return H(this).findIndex(t=>t.selected)}set selectedIndex(t){for(const[r,a]of H(this).entries())a.selected=r===t}get onaddrendition(){return s(this,R)}set onaddrendition(t){s(this,R)&&(this.removeEventListener("addrendition",s(this,R)),c(this,R,void 0)),typeof t=="function"&&(c(this,R,t),this.addEventListener("addrendition",t))}get onremoverendition(){return s(this,x)}set onremoverendition(t){s(this,x)&&(this.removeEventListener("removerendition",s(this,x)),c(this,x,void 0)),typeof t=="function"&&(c(this,x,t),this.addEventListener("removerendition",t))}get onchange(){return s(this,A)}set onchange(t){s(this,A)&&(this.removeEventListener("change",s(this,A)),c(this,A,void 0)),typeof t=="function"&&(c(this,A,t),this.addEventListener("change",t))}};R=new WeakMap,x=new WeakMap,A=new WeakMap,d(kt,"VideoRenditionList");let Y=kt;var B;const mt=class mt{constructor(){h(this,"src");h(this,"id");h(this,"width");h(this,"height");h(this,"bitrate");h(this,"frameRate");h(this,"codec");l(this,B,!1)}get selected(){return s(this,B)}set selected(e){s(this,B)!==e&&(c(this,B,e),Wt(this))}};B=new WeakMap,d(mt,"VideoRendition");let ht=mt;var F;const yt=class yt{constructor(){h(this,"id");h(this,"kind");h(this,"label","");h(this,"language","");h(this,"sourceBuffer");l(this,F,!1)}addRendition(e,t,r,a,u,p){const m=new ht;return m.src=e,m.width=t,m.height=r,m.frameRate=p,m.bitrate=u,m.codec=a,Ut(this,m),m}removeRendition(e){Vt(e)}get selected(){return s(this,F)}set selected(e){s(this,F)!==e&&(c(this,F,e),e===!0&&Nt(this))}};F=new WeakMap,d(yt,"VideoTrack");let et=yt;function Gt(i,e){const t=n(i).media.audioRenditions;n(e).media=n(i).media,n(e).track=i;const r=n(i).renditionSet;r.add(e);const a=r.size-1;a in Z.prototype||Object.defineProperty(Z.prototype,a,{get(){return z(this)[a]}}),queueMicrotask(()=>{i.enabled&&t.dispatchEvent(new W("addrendition",{rendition:e}))})}d(Gt,"addRendition");function Jt(i){const e=n(i).media.audioRenditions,t=n(i).track;n(t).renditionSet.delete(i),queueMicrotask(()=>{n(i).track.enabled&&e.dispatchEvent(new W("removerendition",{rendition:i}))})}d(Jt,"removeRendition");function Kt(i){const e=n(i).media.audioRenditions;!e||n(e).changeRequested||(n(e).changeRequested=!0,queueMicrotask(()=>{delete n(e).changeRequested,n(i).track.enabled&&e.dispatchEvent(new Event("change"))}))}d(Kt,"selectedChanged");function z(i){return[...n(i).media.audioTracks].filter(t=>t.enabled).flatMap(t=>[...n(t).renditionSet])}d(z,"getCurrentRenditions");var q,O,M;const bt=class bt extends EventTarget{constructor(){super(...arguments);l(this,q);l(this,O);l(this,M)}[Symbol.iterator](){return z(this).values()}get length(){return z(this).length}getRenditionById(t){return z(this).find(r=>`${r.id}`==`${t}`)??null}get selectedIndex(){return z(this).findIndex(t=>t.selected)}set selectedIndex(t){for(const[r,a]of z(this).entries())a.selected=r===t}get onaddrendition(){return s(this,q)}set onaddrendition(t){s(this,q)&&(this.removeEventListener("addrendition",s(this,q)),c(this,q,void 0)),typeof t=="function"&&(c(this,q,t),this.addEventListener("addrendition",t))}get onremoverendition(){return s(this,O)}set onremoverendition(t){s(this,O)&&(this.removeEventListener("removerendition",s(this,O)),c(this,O,void 0)),typeof t=="function"&&(c(this,O,t),this.addEventListener("removerendition",t))}get onchange(){return s(this,M)}set onchange(t){s(this,M)&&(this.removeEventListener("change",s(this,M)),c(this,M,void 0)),typeof t=="function"&&(c(this,M,t),this.addEventListener("change",t))}};q=new WeakMap,O=new WeakMap,M=new WeakMap,d(bt,"AudioRenditionList");let Z=bt;var D;const Et=class Et{constructor(){h(this,"src");h(this,"id");h(this,"bitrate");h(this,"codec");l(this,D,!1)}get selected(){return s(this,D)}set selected(e){s(this,D)!==e&&(c(this,D,e),Kt(this))}};D=new WeakMap,d(Et,"AudioRendition");let ut=Et;function ft(i,e){const t=i.audioTracks;n(e).media=i,n(e).renditionSet||(n(e).renditionSet=new Set);const r=n(t).trackSet;r.add(e);const a=r.size-1;a in _.prototype||Object.defineProperty(_.prototype,a,{get(){return[...n(this).trackSet][a]}}),queueMicrotask(()=>{t.dispatchEvent(new V("addtrack",{track:e}))})}d(ft,"addAudioTrack");function lt(i){const e=n(i).media?.audioTracks;if(!e)return;n(e).trackSet.delete(i),queueMicrotask(()=>{e.dispatchEvent(new V("removetrack",{track:i}))})}d(lt,"removeAudioTrack");function Qt(i){const e=n(i).media.audioTracks;!e||n(e).changeRequested||(n(e).changeRequested=!0,queueMicrotask(()=>{delete n(e).changeRequested,e.dispatchEvent(new Event("change"))}))}d(Qt,"enabledChanged");var j,P,$,N,tt;const Tt=class Tt extends EventTarget{constructor(){super();l(this,N);l(this,j);l(this,P);l(this,$);n(this).trackSet=new Set}[Symbol.iterator](){return s(this,N,tt).values()}get length(){return s(this,N,tt).size}getTrackById(t){return[...s(this,N,tt)].find(r=>r.id===t)??null}get onaddtrack(){return s(this,j)}set onaddtrack(t){s(this,j)&&(this.removeEventListener("addtrack",s(this,j)),c(this,j,void 0)),typeof t=="function"&&(c(this,j,t),this.addEventListener("addtrack",t))}get onremovetrack(){return s(this,P)}set onremovetrack(t){s(this,P)&&(this.removeEventListener("removetrack",s(this,P)),c(this,P,void 0)),typeof t=="function"&&(c(this,P,t),this.addEventListener("removetrack",t))}get onchange(){return s(this,$)}set onchange(t){s(this,$)&&(this.removeEventListener("change",s(this,$)),c(this,$,void 0)),typeof t=="function"&&(c(this,$,t),this.addEventListener("change",t))}};j=new WeakMap,P=new WeakMap,$=new WeakMap,N=new WeakSet,tt=d(function(){return n(this).trackSet},"#tracks"),d(Tt,"AudioTrackList");let _=Tt;var U;const wt=class wt{constructor(){h(this,"id");h(this,"kind");h(this,"label","");h(this,"language","");h(this,"sourceBuffer");l(this,U,!1)}addRendition(e,t,r){const a=new ut;return a.src=e,a.codec=t,a.bitrate=r,Gt(this,a),a}removeRendition(e){Jt(e)}get enabled(){return s(this,U)}set enabled(e){s(this,U)!==e&&(c(this,U,e),Qt(this))}};U=new WeakMap,d(wt,"AudioTrack");let it=wt;const Rt=nt(globalThis.HTMLMediaElement,"video"),xt=nt(globalThis.HTMLMediaElement,"audio");function ee(i){if(!i?.prototype)return i;const e=nt(i,"video");(!e||`${e}`.includes("[native code]"))&&Object.defineProperty(i.prototype,"videoTracks",{get(){return Xt(this)}});const t=nt(i,"audio");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(i.prototype,"audioTracks",{get(){return Yt(this)}}),"addVideoTrack"in i.prototype||(i.prototype.addVideoTrack=function(u,p="",m=""){const E=new et;return E.kind=u,E.label=p,E.language=m,at(this,E),E}),"removeVideoTrack"in i.prototype||(i.prototype.removeVideoTrack=ct),"addAudioTrack"in i.prototype||(i.prototype.addAudioTrack=function(u,p="",m=""){const E=new it;return E.kind=u,E.label=p,E.language=m,ft(this,E),E}),"removeAudioTrack"in i.prototype||(i.prototype.removeAudioTrack=lt),"videoRenditions"in i.prototype||Object.defineProperty(i.prototype,"videoRenditions",{get(){return r(this)}});const r=d(u=>{let p=n(u).videoRenditions;return p||(p=new Y,n(p).media=u,n(u).videoRenditions=p),p},"initVideoRenditions");"audioRenditions"in i.prototype||Object.defineProperty(i.prototype,"audioRenditions",{get(){return a(this)}});const a=d(u=>{let p=n(u).audioRenditions;return p||(p=new Z,n(p).media=u,n(u).audioRenditions=p),p},"initAudioRenditions");return i}d(ee,"MediaTracksMixin");function nt(i,e){if(i?.prototype)return Object.getOwnPropertyDescriptor(i.prototype,`${e}Tracks`)?.get}d(nt,"getBaseMediaTracksFn");function Xt(i){let e=n(i).videoTracks;if(!e&&(e=new X,n(i).videoTracks=e,Rt)){const t=Rt.call(i.nativeEl??i);for(const r of t)at(i,r);t.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),t.addEventListener("addtrack",r=>{if([...e].some(a=>a instanceof et)){for(const a of t)ct(a);return}at(i,r.track)}),t.addEventListener("removetrack",r=>{ct(r.track)})}return e}d(Xt,"getVideoTracks");function Yt(i){let e=n(i).audioTracks;if(!e&&(e=new _,n(i).audioTracks=e,xt)){const t=xt.call(i.nativeEl??i);for(const r of t)ft(i,r);t.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),t.addEventListener("addtrack",r=>{if([...e].some(a=>a instanceof it)){for(const a of t)lt(a);return}ft(i,r.track)}),t.addEventListener("removetrack",r=>{lt(r.track)})}return e}d(Yt,"getAudioTracks");export{te as C,ee as M};
