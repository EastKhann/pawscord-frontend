var R=Object.defineProperty;var l=(s,r)=>R(s,"name",{value:r,configurable:!0});import{j as e,r as n}from"./react-core-Djgtqrmb.js";import{s as T,t as P}from"./index-D0nbcjO7.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";import"./ui-vendor-IhB9Znpc.js";const C=l(({bot:s,onClick:r})=>e.jsxs("div",{className:"bot-card",onClick:l(()=>r(s),"onClick"),children:[e.jsxs("div",{className:"bot-avatar",children:[e.jsx("img",{src:s.avatar||"/default-bot.png",alt:s.name}),s.is_verified&&e.jsx("span",{className:"verified-badge",children:"âœ“"})]}),e.jsxs("div",{className:"bot-info",children:[e.jsxs("h3",{className:"bot-name",children:[s.name,s.is_featured&&e.jsxs("span",{className:"featured-tag",children:["â­"," ","Ã–","ne ","Ã‡Ä±","kan"]})]}),e.jsx("p",{className:"bot-description",children:s.short_description}),e.jsxs("div",{className:"bot-meta",children:[e.jsxs("span",{className:"bot-installs",children:[e.jsx("i",{children:"ðŸ“¥"})," ",s.install_count?.toLocaleString()||0]}),e.jsxs("span",{className:"bot-rating",children:[e.jsx("i",{children:"â­"})," ",s.avg_rating||0]}),s.category&&e.jsx("span",{className:"bot-category",children:s.category})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"bot-tags",children:s.tags.slice(0,3).map((v,i)=>e.jsx("span",{className:"tag",children:v},i))})]})]}),"BotCard"),D=l(({bot:s,onClose:r,onInstall:v})=>{const[i,p]=n.useState("overview"),[B,d]=n.useState(!1),[y,j]=n.useState([]),[o,g]=n.useState(null),[S,m]=n.useState(!1),N=T,h=n.useCallback(async()=>{try{const a=localStorage.getItem("access_token"),c=await fetch(`${N}/bots/my-servers/`,{headers:{Authorization:`Bearer ${a}`}});if(c.ok){const t=await c.json();j(t.servers||[])}}catch{}},[N]),b=l(async()=>{if(o){m(!0);try{const a=localStorage.getItem("access_token"),c=await fetch(`${N}/bots/${s.id}/install/`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({server_id:o.id})});if(c.ok)v?.(s,o),d(!1),P.success(`${s.name} baÅŸarÄ±yla ${o.name} sunucusuna eklendi!`);else{const t=await c.json();P.error(t.error||"YÃ¼kleme baÅŸarÄ±sÄ±z")}}catch{}m(!1)}},"handleInstall");return n.useEffect(()=>{h()},[h]),s?e.jsx("div",{className:"bot-modal-overlay",onClick:l(a=>a.target===a.currentTarget&&r(),"onClick"),children:e.jsxs("div",{className:"bot-modal",children:[e.jsxs("div",{className:"bot-modal-header",style:{backgroundImage:s.banner?`url(${s.banner})`:void 0},children:[e.jsx("button",{className:"modal-close",onClick:r,children:"Ã—"}),e.jsxs("div",{className:"bot-header-content",children:[e.jsx("img",{src:s.avatar||"/default-bot.png",alt:s.name,className:"bot-large-avatar"}),e.jsxs("div",{className:"bot-header-info",children:[e.jsxs("h2",{children:[s.name,s.is_verified&&e.jsxs("span",{className:"verified",children:["âœ“"," DoÄŸrulanmÄ±ÅŸ"]})]}),e.jsx("p",{children:s.short_description}),e.jsxs("div",{className:"bot-stats",children:[e.jsxs("span",{children:["ðŸ“¥"," ",s.install_count?.toLocaleString()," sunucu"]}),e.jsxs("span",{children:["â­"," ",s.avg_rating," (",s.review_count," yorum)"]})]})]}),e.jsx("button",{className:"add-bot-btn",onClick:l(()=>d(!0),"onClick"),children:"Sunucuya Ekle"})]})]}),e.jsxs("div",{className:"bot-modal-tabs",children:[e.jsx("button",{className:i==="overview"?"active":"",onClick:l(()=>p("overview"),"onClick"),children:"Genel BakÄ±ÅŸ"}),e.jsx("button",{className:i==="commands"?"active":"",onClick:l(()=>p("commands"),"onClick"),children:"Komutlar"}),e.jsx("button",{className:i==="reviews"?"active":"",onClick:l(()=>p("reviews"),"onClick"),children:"Yorumlar"})]}),e.jsxs("div",{className:"bot-modal-content",children:[i==="overview"&&e.jsxs("div",{className:"overview-tab",children:[e.jsxs("div",{className:"description-section",children:[e.jsx("h3",{children:"AÃ§Ä±klama"}),e.jsx("div",{className:"description-content",children:s.description})]}),s.features&&s.features.length>0&&e.jsxs("div",{className:"features-section",children:[e.jsxs("h3",{children:["Ã–","zellikler"]}),e.jsx("div",{className:"features-list",children:s.features.map((a,c)=>e.jsxs("div",{className:"feature-item",children:["âœ…"," ",a]},c))})]}),e.jsxs("div",{className:"links-section",children:[e.jsx("h3",{children:"BaÄŸlantÄ±lar"}),e.jsxs("div",{className:"links-list",children:[s.website&&e.jsxs("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",children:["ðŸŒ"," Web Sitesi"]}),s.support_server&&e.jsxs("a",{href:`/invite/${s.support_server}`,children:["ðŸ’¬"," Destek Sunucusu"]}),s.privacy_policy&&e.jsxs("a",{href:s.privacy_policy,target:"_blank",rel:"noopener noreferrer",children:["ðŸ”’"," Gizlilik PolitikasÄ±"]})]})]}),s.developer&&e.jsxs("div",{className:"developer-section",children:[e.jsx("h3",{children:"GeliÅŸtirici"}),e.jsxs("div",{className:"developer-info",children:[e.jsx("img",{src:s.developer.avatar||"/default-avatar.png",alt:""}),e.jsx("span",{children:s.developer.username})]})]})]}),i==="commands"&&e.jsx("div",{className:"commands-tab",children:s.commands&&s.commands.length>0?e.jsx("div",{className:"commands-list",children:s.commands.map((a,c)=>e.jsxs("div",{className:"command-item",children:[e.jsxs("code",{className:"command-name",children:[s.prefix,a.name]}),e.jsx("p",{className:"command-desc",children:a.description}),a.usage&&e.jsx("code",{className:"command-usage",children:a.usage})]},c))}):e.jsx("p",{className:"no-data",children:"Komut listesi mevcut deÄŸil"})}),i==="reviews"&&e.jsx("div",{className:"reviews-tab",children:s.reviews&&s.reviews.length>0?e.jsx("div",{className:"reviews-list",children:s.reviews.map(a=>e.jsxs("div",{className:"review-item",children:[e.jsxs("div",{className:"review-header",children:[e.jsx("img",{src:a.avatar||"/default-avatar.png",alt:""}),e.jsx("span",{className:"reviewer-name",children:a.user}),e.jsx("span",{className:"review-rating",children:"â­".repeat(a.rating)})]}),e.jsx("p",{className:"review-content",children:a.content}),e.jsx("span",{className:"review-date",children:new Date(a.created_at).toLocaleDateString("tr-TR")})]},a.id))}):e.jsx("p",{className:"no-data",children:"HenÃ¼z yorum yok"})})]}),B&&e.jsx("div",{className:"server-select-overlay",children:e.jsxs("div",{className:"server-select-modal",children:[e.jsx("h3",{children:"Sunucu SeÃ§"}),e.jsxs("p",{children:[s.name," botunu hangi sunucuya eklemek istiyorsunuz?"]}),e.jsx("div",{className:"server-list",children:y.length===0?e.jsx("p",{className:"no-servers",children:"Admin olduÄŸunuz sunucu bulunamadÄ±"}):y.map(a=>e.jsxs("div",{className:`server-item ${o?.id===a.id?"selected":""}`,onClick:l(()=>g(a),"onClick"),children:[e.jsx("img",{src:a.icon||"/default-server.png",alt:""}),e.jsx("span",{children:a.name}),e.jsxs("span",{className:"member-count",children:[a.member_count," ","Ã¼","ye"]})]},a.id))}),e.jsxs("div",{className:"server-select-actions",children:[e.jsxs("button",{className:"cancel-btn",onClick:l(()=>d(!1),"onClick"),children:["Ä°","ptal"]}),e.jsx("button",{className:"install-btn",disabled:!o||S,onClick:b,children:S?"YÃ¼kleniyor...":"Ekle"})]})]})})]})}):null},"BotDetailModal"),L=l(()=>{const[s,r]=n.useState([]),[v,i]=n.useState([]),[p,B]=n.useState([]),[d,y]=n.useState([]),[j,o]=n.useState(!0),[g,S]=n.useState(null),[m,N]=n.useState(""),[h,b]=n.useState("popular"),[a,c]=n.useState(null),[t,z]=n.useState(1),[A,E]=n.useState(1),f=T,_=n.useCallback(async()=>{try{const u=new URLSearchParams({page:t,sort:h,limit:20});g&&u.append("category",g),m&&u.append("search",m);const x=await fetch(`${f}/bots/?${u}`);if(x.ok){const k=await x.json();r(k.bots||[]),E(k.pages||1)}}catch{}},[f,t,h,g,m]),$=n.useCallback(async()=>{o(!0);try{const[u,x,k]=await Promise.all([fetch(`${f}/bots/categories/`),fetch(`${f}/bots/featured/`),fetch(`${f}/bots/trending/`)]);if(u.ok){const w=await u.json();y(w.categories||[])}if(x.ok){const w=await x.json();i(w.bots||[])}if(k.ok){const w=await k.json();B(w.bots||[])}}catch{}o(!1)},[f]),I=l(async u=>{try{const x=await fetch(`${f}/bots/${u.id}/`);if(x.ok){const k=await x.json();c(k)}}catch{}},"loadBotDetail");return n.useEffect(()=>{$()},[$]),n.useEffect(()=>{_()},[_]),{bots:s,featuredBots:v,trendingBots:p,categories:d,loading:j,selectedCategory:g,setSelectedCategory:S,searchQuery:m,setSearchQuery:N,sortBy:h,setSortBy:b,selectedBot:a,setSelectedBot:c,page:t,setPage:z,totalPages:A,loadBotDetail:I}},"useBotMarketplace"),J=l(({onClose:s})=>{const{bots:r,featuredBots:v,trendingBots:i,categories:p,loading:B,selectedCategory:d,setSelectedCategory:y,searchQuery:j,setSearchQuery:o,sortBy:g,setSortBy:S,selectedBot:m,setSelectedBot:N,page:h,setPage:b,totalPages:a,loadBotDetail:c}=L();return B?e.jsx("div",{className:"bot-marketplace",children:e.jsxs("div",{className:"marketplace-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsxs("p",{children:["Bot Marketplace y","Ã¼","kleniyor..."]})]})}):e.jsxs("div",{className:"bot-marketplace",children:[e.jsxs("div",{className:"marketplace-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsxs("h1",{children:["ðŸ¤–"," Bot Marketplace"]}),e.jsxs("p",{children:["Sunucunuzu g","Ã¼Ã§","lendirecek binlerce bot ke","ÅŸ","fedin"]})]}),s&&e.jsx("button",{className:"close-btn",onClick:s,children:"Ã—"})]}),e.jsxs("div",{className:"marketplace-filters",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:"Bot ara...",value:j,onChange:l(t=>o(t.target.value),"onChange")}),e.jsx("span",{className:"search-icon",children:"ðŸ”"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsxs("select",{value:d||"",onChange:l(t=>y(t.target.value||null),"onChange"),children:[e.jsxs("option",{value:"",children:["T","Ã¼","m Kategoriler"]}),p.map(t=>e.jsxs("option",{value:t.slug,children:[t.icon," ",t.name," (",t.bot_count,")"]},t.id))]}),e.jsxs("select",{value:g,onChange:l(t=>S(t.target.value),"onChange"),children:[e.jsxs("option",{value:"popular",children:["Pop","Ã¼","ler"]}),e.jsx("option",{value:"new",children:"Yeni"}),e.jsxs("option",{value:"rated",children:["En ","Ä°","yi Puan"]})]})]})]}),e.jsxs("div",{className:"marketplace-content",children:[v.length>0&&!j&&!d&&e.jsxs("section",{className:"featured-section",children:[e.jsxs("h2",{children:["â­"," ","Ã–","ne ","Ã‡Ä±","kan Botlar"]}),e.jsx("div",{className:"featured-grid",children:v.map(t=>e.jsx(C,{bot:t,onClick:c},t.id))})]}),i.length>0&&!j&&!d&&e.jsxs("section",{className:"trending-section",children:[e.jsxs("h2",{children:["ðŸ“ˆ"," Y","Ã¼","kselen Botlar"]}),e.jsx("div",{className:"trending-grid",children:i.map(t=>e.jsx(C,{bot:t,onClick:c},t.id))})]}),e.jsxs("section",{className:"all-bots-section",children:[e.jsx("h2",{children:d?p.find(t=>t.slug===d)?.name||"Botlar":j?`"${j}" iÃ§in sonuÃ§lar`:"TÃ¼m Botlar"}),r.length===0?e.jsx("div",{className:"no-results",children:e.jsxs("p",{children:["Bot bulunamad","Ä±"]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bots-grid",children:r.map(t=>e.jsx(C,{bot:t,onClick:c},t.id))}),a>1&&e.jsxs("div",{className:"pagination",children:[e.jsxs("button",{disabled:h<=1,onClick:l(()=>b(t=>t-1),"onClick"),children:["â†"," ","Ã–","nceki"]}),e.jsxs("span",{children:["Sayfa ",h," / ",a]}),e.jsxs("button",{disabled:h>=a,onClick:l(()=>b(t=>t+1),"onClick"),children:["Sonraki ","â†’"]})]})]})]})]}),m&&e.jsx(D,{bot:m,onClose:l(()=>N(null),"onClose")})]})},"BotMarketplace");export{J as default};
