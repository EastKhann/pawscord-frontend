import{r as s,b as e}from"./react-core-9vc7GIjk.js";import{c as u,a as b,bb as i,bc as a,x}from"./icons-vendor-BHKL7tCa.js";import{t as c}from"./index-CqWGoNhJ.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-qCr-Mpaw.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const T=({fetchWithAuth:d,apiBaseUrl:m,onClose:p})=>{const[l,o]=s.useState({all_messages:!0,mentions_only:!1,direct_messages:!0,server_notifications:!0,keyword_notifications:[],muted_channels:[],muted_servers:[],sound_enabled:!0,desktop_enabled:!0,email_enabled:!1,dnd_enabled:!1,dnd_start:"22:00",dnd_end:"08:00"}),[v,g]=s.useState(!0);s.useEffect(()=>{y()},[]);const y=async()=>{try{g(!0);const n=await d(`${m}/api/notifications/preferences/`);if(n.ok){const E=await n.json();o({...l,...E})}}catch(n){console.error("Tercih yükleme hatası:",n)}finally{g(!1)}},f=async()=>{try{(await d(`${m}/api/notifications/preferences/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?c.success("Tercihler kaydedildi"):c.error("Tercihler kaydedilemedi")}catch(n){console.error("Kaydetme hatası:",n),c.error("Bir hata oluştu")}},r=n=>{o({...l,[n]:!l[n]})};return e.createElement("div",{style:t.overlay,onClick:p},e.createElement("div",{style:t.modal,onClick:n=>n.stopPropagation()},e.createElement("div",{style:t.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(u,{style:{color:"#43b581"}}),e.createElement("h2",{style:{margin:0}},"Bildirim Tercihleri")),e.createElement(b,{onClick:p,style:t.closeBtn})),e.createElement("div",{style:t.content},e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"Mesaj Bildirimleri"),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("strong",null,"Tüm Mesajlar"),e.createElement("p",{style:t.settingDesc},"Her yeni mesajdan bildirim al")),e.createElement("button",{onClick:()=>r("all_messages"),style:t.toggle},l.all_messages?e.createElement(i,{style:{color:"#43b581",fontSize:"32px"}}):e.createElement(a,{style:{color:"#888",fontSize:"32px"}}))),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("strong",null,"Sadece Mention'lar"),e.createElement("p",{style:t.settingDesc},"Yalnızca etiketlendiğinizde bildirim")),e.createElement("button",{onClick:()=>r("mentions_only"),style:t.toggle},l.mentions_only?e.createElement(i,{style:{color:"#43b581",fontSize:"32px"}}):e.createElement(a,{style:{color:"#888",fontSize:"32px"}}))),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("strong",null,"Direkt Mesajlar"),e.createElement("p",{style:t.settingDesc},"DM'lerden bildirim al")),e.createElement("button",{onClick:()=>r("direct_messages"),style:t.toggle},l.direct_messages?e.createElement(i,{style:{color:"#43b581",fontSize:"32px"}}):e.createElement(a,{style:{color:"#888",fontSize:"32px"}})))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},"Bildirim Kanalları"),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("strong",null,"Ses Bildirimleri"),e.createElement("p",{style:t.settingDesc},"Bildirim geldiğinde ses çal")),e.createElement("button",{onClick:()=>r("sound_enabled"),style:t.toggle},l.sound_enabled?e.createElement(i,{style:{color:"#43b581",fontSize:"32px"}}):e.createElement(a,{style:{color:"#888",fontSize:"32px"}}))),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("strong",null,"Masaüstü Bildirimleri"),e.createElement("p",{style:t.settingDesc},"Tarayıcı bildirimleri")),e.createElement("button",{onClick:()=>r("desktop_enabled"),style:t.toggle},l.desktop_enabled?e.createElement(i,{style:{color:"#43b581",fontSize:"32px"}}):e.createElement(a,{style:{color:"#888",fontSize:"32px"}}))),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("strong",null,"Email Bildirimleri"),e.createElement("p",{style:t.settingDesc},"Önemli bildirimleri email'le al")),e.createElement("button",{onClick:()=>r("email_enabled"),style:t.toggle},l.email_enabled?e.createElement(i,{style:{color:"#43b581",fontSize:"32px"}}):e.createElement(a,{style:{color:"#888",fontSize:"32px"}})))),e.createElement("div",{style:t.section},e.createElement("h3",{style:t.sectionTitle},e.createElement(x,{style:{marginRight:"8px"}}),"Rahatsız Etme Saatleri"),e.createElement("div",{style:t.setting},e.createElement("div",{style:t.settingInfo},e.createElement("strong",null,"Rahatsız Etme Modu"),e.createElement("p",{style:t.settingDesc},"Belirli saatlerde bildirimleri kapat")),e.createElement("button",{onClick:()=>r("dnd_enabled"),style:t.toggle},l.dnd_enabled?e.createElement(i,{style:{color:"#43b581",fontSize:"32px"}}):e.createElement(a,{style:{color:"#888",fontSize:"32px"}}))),l.dnd_enabled&&e.createElement("div",{style:t.timeRange},e.createElement("div",{style:t.timeInput},e.createElement("label",null,"Başlangıç:"),e.createElement("input",{type:"time",value:l.dnd_start,onChange:n=>o({...l,dnd_start:n.target.value}),style:t.input})),e.createElement("div",{style:t.timeInput},e.createElement("label",null,"Bitiş:"),e.createElement("input",{type:"time",value:l.dnd_end,onChange:n=>o({...l,dnd_end:n.target.value}),style:t.input}))))),e.createElement("div",{style:t.footer},e.createElement("button",{onClick:f,style:t.saveBtn},"Kaydet"))))},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},section:{marginBottom:"30px"},sectionTitle:{color:"#5865f2",fontSize:"16px",fontWeight:"600",marginBottom:"15px",display:"flex",alignItems:"center"},setting:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginBottom:"10px"},settingInfo:{flex:1},settingDesc:{fontSize:"12px",color:"#888",margin:"4px 0 0 0"},toggle:{backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"0"},timeRange:{display:"flex",gap:"20px",padding:"15px",backgroundColor:"#2c2f33",borderRadius:"8px",marginTop:"10px"},timeInput:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},input:{padding:"8px",backgroundColor:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},footer:{padding:"20px",borderTop:"1px solid #333"},saveBtn:{width:"100%",backgroundColor:"#43b581",color:"#fff",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"600"}};export{T as default};
