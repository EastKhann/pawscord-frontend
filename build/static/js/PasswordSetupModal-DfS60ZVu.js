import{r as l,j as e}from"./react-vendor-D8Fi5F9E.js";import{u as F,bU as Z,d as c,T as x,U as j,t as L}from"./icons-vendor-BPCemF_6.js";import{t}from"./index-3z6rwLzK.js";import"./media-vendor-Dp18sh1g.js";import"./router-vendor-CTPwQFnc.js";import"./crypto-vendor-Cz32ecGD.js";import"./state-vendor-De5qIGw3.js";const $=({onClose:m,apiBaseUrl:b})=>{const[s,g]=l.useState(""),[i,y]=l.useState(""),[d,w]=l.useState(!1),[h,N]=l.useState(!1),[p,u]=l.useState(!1),[k,v]=l.useState(!1),S=()=>{if(s.length<8)return t.error("≈ûifre en az 8 karakter olmalƒ±dƒ±r"),!1;if(s!==i)return t.error("≈ûifreler e≈üle≈ümiyor"),!1;const r=/[A-Z]/.test(s),a=/[a-z]/.test(s),o=/[0-9]/.test(s);return!r||!a||!o?(t.error("≈ûifre en az bir b√ºy√ºk harf, bir k√º√ß√ºk harf ve bir rakam i√ßermelidir"),!1):!0},C=async r=>{if(r.preventDefault(),!!S()){u(!0);try{const a=localStorage.getItem("access_token"),o=await fetch(`${b}/users/change_password/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({new_password:s})});if(o.ok)v(!0),t.success("‚úÖ ≈ûifre ba≈üarƒ±yla belirlendi!"),setTimeout(()=>{m()},2e3);else{const A=await o.json();t.error(A.error||"≈ûifre belirlenemedi")}}catch(a){console.error("Password setup error:",a),t.error("Bir hata olu≈ütu. L√ºtfen tekrar deneyin.")}finally{u(!1)}}},z=()=>{t.info("≈ûifreyi daha sonra profil ayarlarƒ±ndan belirleyebilirsin"),m()},P=()=>{let r=0;return s.length>=8&&r++,s.length>=12&&r++,/[A-Z]/.test(s)&&r++,/[a-z]/.test(s)&&r++,/[0-9]/.test(s)&&r++,/[^A-Za-z0-9]/.test(s)&&r++,r},f=["#f04747","#faa61a","#faa61a","#43b581","#43b581","#43b581"],E=["√áok Zayƒ±f","Zayƒ±f","Orta","ƒ∞yi","G√º√ßl√º","√áok G√º√ßl√º"],n=P();return k?e.jsx("div",{className:"password-setup-overlay",children:e.jsxs("div",{className:"password-setup-modal success",children:[e.jsx("div",{className:"success-icon",children:e.jsx(F,{})}),e.jsx("h2",{children:"≈ûifre Belirlendi!"}),e.jsx("p",{children:"Artƒ±k e-posta ve ≈üifrenle de giri≈ü yapabilirsin."})]})}):e.jsx("div",{className:"password-setup-overlay",children:e.jsxs("div",{className:"password-setup-modal",children:[e.jsxs("div",{className:"password-setup-header",children:[e.jsxs("div",{className:"header-icon",children:[e.jsx(Z,{className:"google-icon"}),e.jsx(c,{className:"lock-icon"})]}),e.jsx("h2",{children:"≈ûifre Belirle"}),e.jsx("p",{children:"Google ile giri≈ü yaptƒ±n! Hesabƒ±nƒ± daha g√ºvenli hale getirmek i√ßin bir ≈üifre belirleyebilirsin."})]}),e.jsxs("form",{onSubmit:C,className:"password-setup-form",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Yeni ≈ûifre"}),e.jsxs("div",{className:"password-input-wrapper",children:[e.jsx(c,{className:"input-icon"}),e.jsx("input",{type:d?"text":"password",value:s,onChange:r=>g(r.target.value),placeholder:"En az 8 karakter",required:!0,minLength:8}),e.jsx("button",{type:"button",className:"toggle-visibility",onClick:()=>w(!d),children:d?e.jsx(x,{}):e.jsx(j,{})})]}),s&&e.jsxs("div",{className:"password-strength",children:[e.jsx("div",{className:"strength-bars",children:[...Array(6)].map((r,a)=>e.jsx("div",{className:`strength-bar ${a<n?"active":""}`,style:{backgroundColor:a<n?f[n-1]:void 0}},a))}),e.jsx("span",{style:{color:f[n-1]||"#72767d"},children:E[n-1]||"≈ûifre girin"})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"≈ûifre Tekrar"}),e.jsxs("div",{className:"password-input-wrapper",children:[e.jsx(c,{className:"input-icon"}),e.jsx("input",{type:h?"text":"password",value:i,onChange:r=>y(r.target.value),placeholder:"≈ûifreyi tekrar girin",required:!0}),e.jsx("button",{type:"button",className:"toggle-visibility",onClick:()=>N(!h),children:h?e.jsx(x,{}):e.jsx(j,{})})]}),i&&s!==i&&e.jsx("span",{className:"error-text",children:"≈ûifreler e≈üle≈ümiyor"}),i&&s===i&&e.jsx("span",{className:"success-text",children:"‚úì ≈ûifreler e≈üle≈üiyor"})]}),e.jsxs("div",{className:"password-requirements",children:[e.jsx("p",{children:"≈ûifre gereksinimleri:"}),e.jsxs("ul",{children:[e.jsx("li",{className:s.length>=8?"met":"",children:"En az 8 karakter"}),e.jsx("li",{className:/[A-Z]/.test(s)?"met":"",children:"En az bir b√ºy√ºk harf (A-Z)"}),e.jsx("li",{className:/[a-z]/.test(s)?"met":"",children:"En az bir k√º√ß√ºk harf (a-z)"}),e.jsx("li",{className:/[0-9]/.test(s)?"met":"",children:"En az bir rakam (0-9)"})]})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"submit",className:"submit-btn",disabled:p||s.length<8||s!==i,children:p?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{}),"≈ûifreyi Belirle"]})}),e.jsx("button",{type:"button",className:"skip-btn",onClick:z,disabled:p,children:"Daha Sonra"})]})]}),e.jsx("div",{className:"password-setup-footer",children:e.jsx("p",{children:"üí° ≈ûifreyi belirlersen hem Google hem de e-posta/≈üifre ile giri≈ü yapabilirsin."})})]})})};export{$ as default};
