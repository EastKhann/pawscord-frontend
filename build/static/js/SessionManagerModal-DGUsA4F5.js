import{r as s,n as t}from"./react-core-Cj7FUMmY.js";import{t as n}from"./index-CWvCRPrH.js";import{a as h,aL as j,g as v,aM as k,aN as S,y as z}from"./icons-vendor-8IeoBGEh.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-By68PLJG.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-DGcbxrkI.js";import"./crypto-vendor-DK-7ILyQ.js";const O=({onClose:r,fetchWithAuth:a,apiBaseUrl:l})=>{const[d,c]=s.useState([]),[x,p]=s.useState(!0);s.useEffect(()=>{m()},[]);const m=async()=>{try{const e=await a(`${l}/sessions/list/`);if(e.ok){const o=await e.json();c(o.sessions||[])}}catch{}finally{p(!1)}},u=async e=>{if(confirm("Bu oturumu sonlandÄ±rmak istediÄŸinizden emin misiniz?"))try{(await a(`${l}/sessions/revoke/`,{method:"POST",body:JSON.stringify({session_id:e})})).ok?(c(g=>g.filter(y=>y.id!==e)),n.success("âœ… Oturum sonlandÄ±rÄ±ldÄ±")):n.error("âŒ Oturum sonlandÄ±rÄ±lamadÄ±")}catch{n.error("âŒ Bir hata oluÅŸtu")}},f=e=>e?.includes("mobile")||e?.includes("android")||e?.includes("ios")?t.jsx(k,{}):e?.includes("tablet")?t.jsx(S,{}):t.jsx(z,{}),b=e=>new Date(e).toLocaleString("tr-TR");return t.jsx("div",{style:i.overlay,onClick:r,children:t.jsxs("div",{style:i.modal,onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:i.header,children:[t.jsx("h2",{style:i.title,children:"ðŸ” Aktif Oturumlar"}),t.jsx("button",{onClick:r,style:i.closeButton,children:t.jsx(h,{})})]}),t.jsx("div",{style:i.content,children:x?t.jsx("div",{style:i.loading,children:"YÃ¼kleniyor..."}):d.length===0?t.jsx("div",{style:i.empty,children:"Aktif oturum bulunamadÄ±"}):t.jsx("div",{style:i.sessionList,children:d.map(e=>t.jsxs("div",{style:i.sessionItem,children:[t.jsx("div",{style:i.sessionIcon,children:f(e.device_type)}),t.jsxs("div",{style:i.sessionInfo,children:[t.jsxs("div",{style:i.sessionDevice,children:[e.device_name||e.device_type||"Bilinmeyen Cihaz",e.is_current&&t.jsxs("span",{style:i.currentBadge,children:[t.jsx(j,{style:{fontSize:"6px"}})," Bu Cihaz"]})]}),t.jsxs("div",{style:i.sessionDetails,children:[e.ip_address&&t.jsxs("span",{children:["IP: ",e.ip_address]}),e.location&&t.jsxs("span",{children:[" â€¢ ",e.location]})]}),t.jsxs("div",{style:i.sessionTime,children:["Son Aktivite: ",b(e.last_activity||e.created_at)]})]}),!e.is_current&&t.jsx("button",{onClick:()=>u(e.id),style:i.revokeButton,title:"Oturumu sonlandÄ±r",children:t.jsx(v,{})})]},e.id))})})]})})},i={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},modal:{backgroundColor:"#2b2d31",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #40444b"},title:{color:"white",margin:0,fontSize:"1.5em"},closeButton:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.5em",padding:"5px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#b9bbbe",padding:"40px"},empty:{textAlign:"center",color:"#b9bbbe",padding:"40px"},sessionList:{display:"flex",flexDirection:"column",gap:"12px"},sessionItem:{backgroundColor:"#40444b",borderRadius:"8px",padding:"15px",display:"flex",alignItems:"center",gap:"15px"},sessionIcon:{fontSize:"2em",color:"#5865f2",minWidth:"40px",textAlign:"center"},sessionInfo:{flex:1},sessionDevice:{color:"white",fontWeight:"bold",fontSize:"1em",marginBottom:"5px",display:"flex",alignItems:"center",gap:"10px"},currentBadge:{backgroundColor:"#3ba55d",color:"white",padding:"2px 8px",borderRadius:"10px",fontSize:"0.7em",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px"},sessionDetails:{color:"#b9bbbe",fontSize:"0.85em",marginBottom:"3px"},sessionTime:{color:"#72767d",fontSize:"0.75em"},revokeButton:{backgroundColor:"#f04747",border:"none",color:"white",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"1em"}};export{O as default};
