import{r as o,j as e}from"./react-vendor-D4QjtNWS.js";import{b0 as a}from"./vendor-Brv1On52.js";import"./state-vendor-T8XA44Ud.js";import"./perf-vendor-CmoV45_-.js";function z({vanityPath:l,fetchWithAuth:d,onClose:c,apiBaseUrl:x}){const[h,u]=o.useState(!0),[p,m]=o.useState(null),[n,g]=o.useState(null),[s,f]=o.useState(!1);o.useEffect(()=>{b()},[l]);const b=async()=>{try{u(!0);const r=await fetch(`${x}/vanity/${l}/`);if(!r.ok)throw new Error("Sunucu bulunamadƒ±");const i=await r.json();g(i)}catch(r){m(r.message)}finally{u(!1)}},y=async()=>{if(n){if(!d){a.warning("üîê Sunucuya katƒ±lmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!"),window.location.hash="#/";return}try{f(!0);const r=await d(`${x}/servers/${n.server_id}/join/`,{method:"POST"});if(!r.ok){const i=await r.json().catch(()=>({})),v=i.error||i.message||"Sunucuya katƒ±lƒ±namadƒ±";throw new Error(v)}a.success(`‚úÖ ${n.server_name} sunucusuna katƒ±ldƒ±nƒ±z!`),window.location.hash=`#/?joined_server=${n.server_id}`,setTimeout(()=>window.location.reload(),100)}catch(r){r.message.includes("zaten")?a.info("‚ÑπÔ∏è Zaten bu sunucudasƒ±nƒ±z!"):a.error("‚ùå "+r.message)}finally{f(!1)}}};return h?e.jsx("div",{style:t.container,children:e.jsxs("div",{style:t.card,children:[e.jsx("div",{style:t.loadingSpinner,children:"üîÑ"}),e.jsx("p",{style:t.loadingText,children:"Sunucu bilgileri y√ºkleniyor..."})]})}):p?e.jsx("div",{style:t.container,children:e.jsxs("div",{style:t.card,children:[e.jsx("h1",{style:t.errorTitle,children:"‚ùå Sunucu Bulunamadƒ±"}),e.jsx("p",{style:t.errorText,children:p}),e.jsx("button",{style:t.backButton,onClick:()=>{c?c():window.location.hash="#/"},children:"Ana Sayfaya D√∂n"})]})}):e.jsx("div",{style:t.container,children:e.jsxs("div",{style:t.card,children:[e.jsx("div",{style:t.avatarContainer,children:n.server_avatar?e.jsx("img",{src:n.server_avatar,alt:n.server_name,style:t.avatar}):e.jsx("div",{style:t.defaultAvatar,children:n.server_name.charAt(0).toUpperCase()})}),e.jsx("h1",{style:t.serverName,children:n.server_name}),e.jsxs("p",{style:t.inviteText,children:["seni ",e.jsx("strong",{children:n.server_name})," sunucusuna davet etti"]}),e.jsxs("div",{style:t.statsContainer,children:[e.jsxs("div",{style:t.stat,children:[e.jsx("span",{style:t.onlineDot,children:"‚óè"}),e.jsxs("span",{style:t.statText,children:[e.jsx("strong",{children:n.online_count})," √áevrimi√ßi"]})]}),e.jsxs("div",{style:t.stat,children:[e.jsx("span",{style:t.memberDot,children:"‚óè"}),e.jsxs("span",{style:t.statText,children:[e.jsx("strong",{children:n.member_count})," √úye"]})]})]}),e.jsx("button",{style:{...t.joinButton,...s?t.joinButtonDisabled:{}},onClick:y,disabled:s,children:s?"Katƒ±lƒ±nƒ±yor...":`${n.server_name} Sunucusuna Katƒ±l`}),e.jsxs("p",{style:t.vanityInfo,children:["pawscord.com/join/",n.vanity_path]})]})})}const t={container:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",overflow:"auto"},card:{backgroundColor:"#36393f",borderRadius:"12px",padding:"40px",maxWidth:"450px",width:"100%",textAlign:"center",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.3)"},avatarContainer:{display:"flex",justifyContent:"center",marginBottom:"20px"},avatar:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"4px solid #5865f2"},defaultAvatar:{width:"100px",height:"100px",borderRadius:"50%",backgroundColor:"#5865f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:"bold",color:"#fff",border:"4px solid #4752c4"},serverName:{fontSize:"28px",fontWeight:"bold",color:"#fff",marginBottom:"10px"},inviteText:{fontSize:"16px",color:"#b9bbbe",marginBottom:"25px"},statsContainer:{display:"flex",justifyContent:"center",gap:"30px",marginBottom:"30px",padding:"15px",backgroundColor:"#2f3136",borderRadius:"8px"},stat:{display:"flex",alignItems:"center",gap:"8px"},onlineDot:{color:"#3ba55d",fontSize:"12px"},memberDot:{color:"#747f8d",fontSize:"12px"},statText:{color:"#b9bbbe",fontSize:"14px"},joinButton:{width:"100%",padding:"15px",backgroundColor:"#5865f2",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s",marginBottom:"15px"},joinButtonDisabled:{backgroundColor:"#4752c4",cursor:"not-allowed",opacity:.6},vanityInfo:{fontSize:"12px",color:"#72767d",marginTop:"10px"},loadingSpinner:{fontSize:"48px",marginBottom:"20px",animation:"spin 1s linear infinite"},loadingText:{color:"#b9bbbe",fontSize:"16px"},errorTitle:{fontSize:"24px",color:"#ed4245",marginBottom:"15px"},errorText:{color:"#b9bbbe",marginBottom:"20px"},backButton:{padding:"12px 24px",backgroundColor:"#4f545c",color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer"}};export{z as default};
