import{r as n,n as e}from"./react-core-Cj7FUMmY.js";import{y as l}from"./ui-vendor-EA4dxvko.js";import{g as w}from"./index-DcErrD_T.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-BsD1gqUZ.js";import"./router-vendor-QeioVw-9.js";import"./icons-vendor-DnRG7SaF.js";import"./state-vendor-MN-5i-Jz.js";import"./crypto-vendor-DK-7ILyQ.js";const T=({onClose:h})=>{const[u,N]=n.useState([]),[r,v]=n.useState(""),[c,p]=n.useState(""),[b,y]=n.useState(!0),t=w(),i=localStorage.getItem("access_token");n.useEffect(()=>{o()},[]);const o=async()=>{try{const a=await(await fetch(`${t}/blocks/list/`,{headers:{Authorization:`Bearer ${i}`}})).json();N(a.blocked_users||[])}catch{l.error("âŒ Engelli kullanÄ±cÄ±lar yÃ¼klenemedi")}finally{y(!1)}},k=async()=>{if(!c.trim()){l.error("âŒ KullanÄ±cÄ± adÄ± gerekli");return}try{const s=await fetch(`${t}/blocks/block/`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({username:c})}),a=await s.json();s.ok?(l.success("âœ… KullanÄ±cÄ± engellendi"),p(""),o()):l.error(`âŒ ${a.error||"KullanÄ±cÄ± engellenemedi"}`)}catch{l.error("âŒ Engelleme hatasÄ±")}},E=async s=>{try{const a=await fetch(`${t}/blocks/unblock/`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:s})}),d=await a.json();a.ok?(l.success("âœ… Engel kaldÄ±rÄ±ldÄ±"),o()):l.error(`âŒ ${d.error||"Engel kaldÄ±rÄ±lamadÄ±"}`)}catch{l.error("âŒ Engel kaldÄ±rma hatasÄ±")}},j=u.filter(s=>s.username.toLowerCase().includes(r.toLowerCase())||s.email?.toLowerCase().includes(r.toLowerCase())),z=s=>{const a=new Date,d=new Date(s),m=a-d,x=Math.floor(m/(1e3*60*60*24)),g=Math.floor(m/(1e3*60*60)),f=Math.floor(m/(1e3*60));return x>0?`${x} gÃ¼n Ã¶nce`:g>0?`${g} saat Ã¶nce`:f>0?`${f} dakika Ã¶nce`:"Az Ã¶nce"};return b?e.jsx("div",{className:"blocklist-overlay",children:e.jsx("div",{className:"blocklist-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]})})}):e.jsx("div",{className:"blocklist-overlay",onClick:h,children:e.jsxs("div",{className:"blocklist-panel",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"blocklist-header",children:[e.jsx("h2",{children:"ğŸš« Engelli KullanÄ±cÄ±lar"}),e.jsx("button",{className:"close-btn",onClick:h,children:"âœ•"})]}),e.jsx("div",{className:"blocklist-stats",children:e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-icon",children:"ğŸš«"}),e.jsxs("div",{className:"stat-info",children:[e.jsx("span",{className:"stat-value",children:u.length}),e.jsx("span",{className:"stat-label",children:"Engelli KullanÄ±cÄ±"})]})]})}),e.jsxs("div",{className:"add-user-section",children:[e.jsx("h3",{children:"KullanÄ±cÄ± Engelle"}),e.jsxs("div",{className:"add-user-form",children:[e.jsx("input",{type:"text",placeholder:"KullanÄ±cÄ± adÄ±",value:c,onChange:s=>p(s.target.value),onKeyPress:s=>s.key==="Enter"&&k(),className:"user-input"}),e.jsx("button",{className:"block-btn",onClick:k,children:"ğŸš« Engelle"})]}),e.jsx("p",{className:"info-text",children:"Engellenen kullanÄ±cÄ±lar size mesaj gÃ¶nderemez ve sizi gÃ¶remez"})]}),e.jsx("div",{className:"search-section",children:e.jsx("input",{type:"text",placeholder:"ğŸ” Engelli kullanÄ±cÄ±larda ara...",value:r,onChange:s=>v(s.target.value),className:"search-input"})}),e.jsx("div",{className:"blocklist-content",children:j.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("span",{className:"empty-icon",children:"ğŸ‰"}),e.jsx("h3",{children:"Engelli kullanÄ±cÄ± yok"}),e.jsx("p",{children:r?"Arama sonucu bulunamadÄ±":"HenÃ¼z kimseyi engellemediniz"})]}):e.jsx("div",{className:"blocked-users-list",children:j.map(s=>e.jsxs("div",{className:"blocked-user-card",children:[e.jsx("div",{className:"user-avatar",children:s.avatar?e.jsx("img",{src:s.avatar,alt:s.username}):e.jsx("div",{className:"default-avatar",children:s.username.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"user-info",children:[e.jsxs("div",{className:"user-name",children:[e.jsx("span",{className:"username",children:s.username}),e.jsxs("span",{className:"user-tag",children:["#",s.discriminator||"0000"]})]}),s.email&&e.jsx("span",{className:"user-email",children:s.email}),e.jsxs("span",{className:"blocked-time",children:["Engellendi: ",z(s.blocked_at)]})]}),e.jsx("div",{className:"user-actions",children:e.jsx("button",{className:"unblock-btn",onClick:()=>E(s.id),children:"âœ“ Engeli KaldÄ±r"})})]},s.id))})}),e.jsxs("div",{className:"info-banner",children:[e.jsx("span",{className:"info-icon",children:"â„¹ï¸"}),e.jsx("p",{children:"Engellenen kullanÄ±cÄ±lar size DM gÃ¶nderemez, profilinizi gÃ¶remez ve paylaÅŸÄ±mlarÄ±nÄ±zla etkileÅŸime geÃ§emez. GruplanmÄ±ÅŸ serverlarda gÃ¶rÃ¼nÃ¼rlÃ¼k sÄ±nÄ±rlÄ±dÄ±r."})]})]})})};export{T as default};
