{"version":3,"file":"EphemeralMessagesPanel-C8rcuC5s.js","sources":["../../../src/components/EphemeralMessagesPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { FaTimes, FaClock, FaToggleOn, FaToggleOff } from 'react-icons/fa';\nimport { toast } from '../utils/toast';\n\nconst EphemeralMessagesPanel = ({ fetchWithAuth, apiBaseUrl, onClose, roomSlug }) => {\n    const [settings, setSettings] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [ttl, setTtl] = useState(3600); // Default 1 hour\n\n    const ttlOptions = [\n        { value: 300, label: '5 minutes' },\n        { value: 600, label: '10 minutes' },\n        { value: 1800, label: '30 minutes' },\n        { value: 3600, label: '1 hour' },\n        { value: 7200, label: '2 hours' },\n        { value: 14400, label: '4 hours' },\n        { value: 28800, label: '8 hours' },\n        { value: 86400, label: '24 hours' },\n        { value: 604800, label: '7 days' },\n    ];\n\n    useEffect(() => {\n        fetchSettings();\n    }, [roomSlug]);\n\n    const fetchSettings = async () => {\n        setLoading(true);\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/rooms/${roomSlug}/ephemeral/`);\n            const data = await response.json();\n            setSettings(data);\n            if (data.ttl) setTtl(data.ttl);\n        } catch (error) {\n            toast.error('Failed to load ephemeral settings');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const toggleEphemeral = async () => {\n        try {\n            await fetchWithAuth(`${apiBaseUrl}/rooms/${roomSlug}/ephemeral/set/`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    enabled: !settings?.enabled,\n                    ttl: ttl\n                })\n            });\n\n            toast.success(`Ephemeral messages ${!settings?.enabled ? 'enabled' : 'disabled'}`);\n            fetchSettings();\n        } catch (error) {\n            toast.error('Failed to update settings');\n        }\n    };\n\n    const updateTTL = async (newTTL) => {\n        setTtl(newTTL);\n        if (settings?.enabled) {\n            try {\n                await fetchWithAuth(`${apiBaseUrl}/rooms/${roomSlug}/ephemeral/set/`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        enabled: true,\n                        ttl: newTTL\n                    })\n                });\n\n                toast.success('Auto-delete time updated');\n                fetchSettings();\n            } catch (error) {\n                toast.error('Failed to update TTL');\n            }\n        }\n    };\n\n    return (\n        <div style={styles.overlay}>\n            <div style={styles.modal}>\n                <div style={styles.header}>\n                    <div style={styles.headerLeft}>\n                        <FaClock style={{ marginRight: '10px', color: '#5865f2' }} />\n                        <h2 style={styles.title}>Auto-Delete Messages</h2>\n                    </div>\n                    <button onClick={onClose} style={styles.closeButton}>\n                        <FaTimes />\n                    </button>\n                </div>\n\n                <div style={styles.content}>\n                    {loading ? (\n                        <div style={styles.loading}>Loading settings...</div>\n                    ) : (\n                        <>\n                            <div style={styles.toggleSection}>\n                                <div>\n                                    <div style={styles.toggleLabel}>Enable Auto-Delete</div>\n                                    <div style={styles.toggleDescription}>\n                                        Messages will automatically delete after the specified time\n                                    </div>\n                                </div>\n                                <button onClick={toggleEphemeral} style={styles.toggleButton}>\n                                    {settings?.enabled ? (\n                                        <FaToggleOn style={{ fontSize: '32px', color: '#43b581' }} />\n                                    ) : (\n                                        <FaToggleOff style={{ fontSize: '32px', color: '#99aab5' }} />\n                                    )}\n                                </button>\n                            </div>\n\n                            {settings?.enabled && (\n                                <div style={styles.ttlSection}>\n                                    <label style={styles.label}>Auto-Delete After</label>\n                                    <div style={styles.optionsGrid}>\n                                        {ttlOptions.map(option => (\n                                            <button\n                                                key={option.value}\n                                                onClick={() => updateTTL(option.value)}\n                                                style={{\n                                                    ...styles.optionButton,\n                                                    ...(ttl === option.value && styles.optionButtonActive)\n                                                }}\n                                            >\n                                                {option.label}\n                                            </button>\n                                        ))}\n                                    </div>\n\n                                    <div style={styles.info}>\n                                        ⏱️ Current setting: Messages auto-delete after{' '}\n                                        <strong>{ttlOptions.find(o => o.value === ttl)?.label || `${ttl} seconds`}</strong>\n                                    </div>\n                                </div>\n                            )}\n\n                            {!settings?.enabled && (\n                                <div style={styles.disabledMessage}>\n                                    Ephemeral messages are currently disabled. Enable them to automatically delete messages after a set time period.\n                                </div>\n                            )}\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 999999,\n    },\n    modal: {\n        backgroundColor: '#1e1e1e',\n        borderRadius: '8px',\n        width: '90%',\n        maxWidth: '600px',\n        maxHeight: '90vh',\n        display: 'flex',\n        flexDirection: 'column',\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4)',\n    },\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '20px',\n        borderBottom: '1px solid #2c2f33',\n    },\n    headerLeft: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    title: {\n        margin: 0,\n        fontSize: '20px',\n        color: '#ffffff',\n    },\n    closeButton: {\n        background: 'none',\n        border: 'none',\n        color: '#99aab5',\n        cursor: 'pointer',\n        fontSize: '20px',\n        padding: '5px',\n    },\n    content: {\n        padding: '20px',\n        overflowY: 'auto',\n        flex: 1,\n    },\n    loading: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '40px',\n    },\n    toggleSection: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '8px',\n        padding: '20px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '20px',\n    },\n    toggleLabel: {\n        fontSize: '16px',\n        fontWeight: '600',\n        color: '#ffffff',\n        marginBottom: '4px',\n    },\n    toggleDescription: {\n        fontSize: '13px',\n        color: '#99aab5',\n    },\n    toggleButton: {\n        background: 'none',\n        border: 'none',\n        cursor: 'pointer',\n        padding: '5px',\n    },\n    ttlSection: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '16px',\n    },\n    label: {\n        fontSize: '14px',\n        fontWeight: '600',\n        color: '#dcddde',\n    },\n    optionsGrid: {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(3, 1fr)',\n        gap: '12px',\n    },\n    optionButton: {\n        padding: '12px',\n        backgroundColor: '#2c2f33',\n        border: 'none',\n        borderRadius: '4px',\n        color: '#ffffff',\n        cursor: 'pointer',\n        fontSize: '14px',\n        transition: 'background-color 0.2s',\n    },\n    optionButtonActive: {\n        backgroundColor: '#5865f2',\n    },\n    info: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '6px',\n        padding: '12px',\n        fontSize: '14px',\n        color: '#dcddde',\n        textAlign: 'center',\n    },\n    disabledMessage: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '6px',\n        padding: '20px',\n        fontSize: '14px',\n        color: '#99aab5',\n        textAlign: 'center',\n    },\n};\n\nexport default EphemeralMessagesPanel;\n"],"names":["useState","useEffect","jsx","jsxs","Fragment"],"mappings":"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"}