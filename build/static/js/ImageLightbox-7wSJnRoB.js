import{a as Y,r as o,n as e,f as X}from"./react-core-Cj7FUMmY.js";import{cb as W,cc as A,ai as $,aB as Z,ao as O,a as T,cd as _,bL as H}from"./icons-vendor-TGltgKsJ.js";import"./editor-vendor-D9c4a6XZ.js";const K=({imageUrl:i,images:c=[],startIndex:R=0,onClose:m})=>{const[f,y]=o.useState(R),[h,r]=o.useState(1),[B,b]=o.useState(0),[g,d]=o.useState({x:0,y:0}),[u,L]=o.useState(!1),x=o.useRef({startX:0,startY:0,startPosX:0,startPosY:0}),s=c.length>0?c:i?[i]:[],p=s[f]||i,l=s.length>1,k=o.useCallback(()=>{l&&(y(t=>(t+1)%s.length),r(1),b(0),d({x:0,y:0}))},[l,s.length]),v=o.useCallback(()=>{l&&(y(t=>(t-1+s.length)%s.length),r(1),b(0),d({x:0,y:0}))},[l,s.length]),j=o.useCallback(()=>r(t=>Math.min(t+.5,5)),[]),C=o.useCallback(()=>{r(t=>{const a=Math.max(t-.5,.5);return a<=1&&d({x:0,y:0}),a})},[]),w=o.useCallback(()=>b(t=>(t+90)%360),[]),I=o.useCallback(()=>{r(1),b(0),d({x:0,y:0})},[]),D=o.useCallback(()=>{const t=document.createElement("a");t.href=p,t.download=p.split("/").pop()||"image",t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},[p]);o.useEffect(()=>{const t=a=>{switch(a.key){case"Escape":m();break;case"ArrowRight":k();break;case"ArrowLeft":v();break;case"+":case"=":j();break;case"-":C();break;case"r":w();break;case"0":I();break}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[m,k,v,j,C,w,I]);const M=o.useCallback(t=>{t.preventDefault(),t.deltaY<0?r(a=>Math.min(a+.2,5)):r(a=>Math.max(a-.2,.5))},[]),z=o.useCallback(t=>{h<=1||(t.preventDefault(),L(!0),x.current={startX:t.clientX,startY:t.clientY,startPosX:g.x,startPosY:g.y})},[h,g]),E=o.useCallback(t=>{if(!u)return;const a=t.clientX-x.current.startX,P=t.clientY-x.current.startY;d({x:x.current.startPosX+a,y:x.current.startPosY+P})},[u]),S=o.useCallback(()=>L(!1),[]);o.useEffect(()=>{if(u)return window.addEventListener("mousemove",E),window.addEventListener("mouseup",S),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",S)}},[u,E,S]);const F=e.jsxs("div",{style:n.overlay,onClick:t=>t.target===t.currentTarget&&m(),children:[e.jsxs("div",{style:n.toolbar,children:[e.jsxs("div",{style:n.toolbarLeft,children:[l&&e.jsxs("span",{style:n.counter,children:[f+1," / ",s.length]}),e.jsxs("span",{style:n.zoomLabel,children:[Math.round(h*100),"%"]})]}),e.jsxs("div",{style:n.toolbarActions,children:[e.jsx("button",{style:n.toolBtn,onClick:C,title:"Uzaklaştır (-)",children:e.jsx(W,{})}),e.jsx("button",{style:n.toolBtn,onClick:j,title:"Yakınlaştır (+)",children:e.jsx(A,{})}),e.jsx("button",{style:n.toolBtn,onClick:w,title:"Döndür (R)",children:e.jsx($,{})}),e.jsx("button",{style:n.toolBtn,onClick:I,title:"Sıfırla (0)",children:e.jsx(Z,{})}),e.jsx("div",{style:n.toolDivider}),e.jsx("button",{style:n.toolBtn,onClick:D,title:"İndir",children:e.jsx(O,{})}),e.jsx("button",{style:{...n.toolBtn,...n.closeBtn},onClick:m,title:"Kapat (Esc)",children:e.jsx(T,{})})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{style:{...n.navBtn,left:16},onClick:v,children:e.jsx(_,{})}),e.jsx("button",{style:{...n.navBtn,right:16},onClick:k,children:e.jsx(H,{})})]}),e.jsx("div",{style:n.imageContainer,onWheel:M,onMouseDown:z,children:e.jsx("img",{src:p,alt:"Preview",draggable:!1,style:{...n.image,transform:`translate(${g.x}px, ${g.y}px) scale(${h}) rotate(${B}deg)`,cursor:h>1?u?"grabbing":"grab":"default",transition:u?"none":"transform 0.2s ease"}})}),l&&e.jsx("div",{style:n.thumbStrip,children:s.map((t,a)=>e.jsx("div",{onClick:()=>{y(a),r(1),b(0),d({x:0,y:0})},style:{...n.thumb,borderColor:a===f?"#5865f2":"transparent",opacity:a===f?1:.5},children:e.jsx("img",{src:t,alt:"",style:n.thumbImg})},a))})]});return X.createPortal(F,document.body)},n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.92)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},toolbar:{position:"absolute",top:0,left:0,right:0,display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:"linear-gradient(to bottom, rgba(0,0,0,0.7), transparent)",zIndex:10},toolbarLeft:{display:"flex",alignItems:"center",gap:12},toolbarActions:{display:"flex",alignItems:"center",gap:4},counter:{color:"#fff",fontSize:14,fontWeight:600},zoomLabel:{color:"#949ba4",fontSize:12},toolBtn:{background:"rgba(255,255,255,0.1)",border:"none",color:"#fff",width:36,height:36,borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,transition:"background 0.15s"},closeBtn:{background:"rgba(218,55,60,0.3)"},toolDivider:{width:1,height:20,backgroundColor:"rgba(255,255,255,0.2)",margin:"0 4px"},navBtn:{position:"absolute",top:"50%",transform:"translateY(-50%)",background:"rgba(0,0,0,0.6)",border:"none",color:"#fff",width:48,height:48,borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,zIndex:10,transition:"background 0.15s"},imageContainer:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",width:"100%"},image:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain",userSelect:"none",pointerEvents:"none"},thumbStrip:{position:"absolute",bottom:16,display:"flex",gap:8,padding:"8px 12px",backgroundColor:"rgba(0,0,0,0.7)",borderRadius:12,maxWidth:"80vw",overflowX:"auto"},thumb:{width:48,height:48,borderRadius:6,border:"2px solid transparent",cursor:"pointer",overflow:"hidden",flexShrink:0,transition:"all 0.15s"},thumbImg:{width:"100%",height:"100%",objectFit:"cover"}};if(typeof document<"u"){const i="lightbox-styles";if(!document.getElementById(i)){const c=document.createElement("style");c.id=i,c.textContent=`
            [data-lb-tool]:hover { background: rgba(255,255,255,0.2) !important; }
            [data-lb-nav]:hover { background: rgba(0,0,0,0.8) !important; }
        `,document.head.appendChild(c)}}const G=Y.memo(K);export{G as default};
