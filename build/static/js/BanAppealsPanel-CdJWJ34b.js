import{r as l,d as e,bO as N,S as f,aE as h,bS as y,Q as D}from"./react-core-DrOm_csO.js";function L({apiBaseUrl:i,fetchWithAuth:m}){const[r,w]=l.useState([]),[s,u]=l.useState(""),[d,E]=l.useState(""),[n,x]=l.useState(null),[v,c]=l.useState(!1),[g,o]=l.useState("");l.useEffect(()=>{b(),S()},[]);const b=async()=>{c(!0);try{const a=await m(`${i}/ban-appeals/list/`);if(a.ok){const t=await a.json();w(t.appeals||[])}}catch(a){console.error("Error loading appeals:",a)}finally{c(!1)}},S=async()=>{try{const a=await m(`${i}/ban-appeals/status/`);if(a.ok){const t=await a.json();x(t)}}catch(a){console.error("Error loading ban info:",a)}},A=async()=>{if(!s.trim()){o("âŒ Please provide a reason");return}c(!0);try{const a=await m(`${i}/adv/ban-appeal/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:s,details:d||null})});if(a.ok)o("âœ… Appeal submitted successfully!"),u(""),E(""),b();else{const t=await a.json();o(`âŒ ${t.error||"Failed to submit appeal"}`)}}catch(a){o("âŒ Network error: "+a.message)}finally{c(!1)}},k=a=>{const t={pending:{icon:e.createElement(y,null),color:"#faa61a",text:"Pending"},approved:{icon:e.createElement(D,null),color:"#43b581",text:"Approved"},rejected:{icon:e.createElement(f,null),color:"#f04747",text:"Rejected"}};return t[a]||t.pending};return e.createElement("div",{className:"ban-appeals-panel"},e.createElement("div",{className:"appeals-header"},e.createElement("h2",null,e.createElement(N,null)," Ban Appeals")),g&&e.createElement("div",{className:"appeal-message"},g),n&&n.is_banned&&e.createElement("div",{className:"ban-info-card"},e.createElement("div",{className:"ban-warning"},e.createElement(f,{className:"warning-icon"}),e.createElement("div",{className:"warning-text"},e.createElement("h3",null,"You are currently banned"),e.createElement("p",null,n.ban_reason||"No reason provided"),e.createElement("div",{className:"ban-meta"},e.createElement("span",null,"Banned on: ",new Date(n.banned_at).toLocaleDateString()),n.expires_at&&e.createElement("span",null,"Expires: ",new Date(n.expires_at).toLocaleDateString()))))),e.createElement("div",{className:"submit-appeal-section"},e.createElement("h3",null,e.createElement(h,null)," Submit New Appeal"),e.createElement("div",{className:"appeal-form"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Reason for Appeal:"),e.createElement("input",{type:"text",placeholder:"Why should you be unbanned?",value:s,onChange:a=>u(a.target.value),className:"form-input",maxLength:200}),e.createElement("div",{className:"char-count"},s.length,"/200")),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Additional Details (optional):"),e.createElement("textarea",{placeholder:"Provide any additional context or evidence...",value:d,onChange:a=>E(a.target.value),className:"form-textarea",rows:5,maxLength:1e3}),e.createElement("div",{className:"char-count"},d.length,"/1000")),e.createElement("button",{className:"submit-btn",onClick:A,disabled:v||!s.trim()},e.createElement(h,null)," Submit Appeal")),e.createElement("div",{className:"appeal-guidelines"},e.createElement("h4",null,"ðŸ“‹ Guidelines:"),e.createElement("ul",null,e.createElement("li",null,"Be honest and respectful in your appeal"),e.createElement("li",null,"Explain why you believe the ban was unfair or a mistake"),e.createElement("li",null,"Provide evidence if available"),e.createElement("li",null,"Appeals are reviewed within 24-48 hours")))),e.createElement("div",{className:"appeals-history"},e.createElement("h3",null,e.createElement(y,null)," Your Appeals (",r.length,")"),v&&r.length===0?e.createElement("div",{className:"loading"},"Loading appeals..."):r.length===0?e.createElement("div",{className:"empty-appeals"},e.createElement(N,{className:"empty-icon"}),e.createElement("p",null,"No appeals submitted yet")):e.createElement("div",{className:"appeals-list"},r.map((a,t)=>{const p=k(a.status);return e.createElement("div",{key:t,className:`appeal-item status-${a.status}`},e.createElement("div",{className:"appeal-header"},e.createElement("div",{className:"appeal-date"},new Date(a.created_at).toLocaleString()),e.createElement("div",{className:"appeal-status",style:{background:p.color}},p.icon," ",p.text)),e.createElement("div",{className:"appeal-content"},e.createElement("div",{className:"appeal-reason"},e.createElement("strong",null,"Reason:")," ",a.reason),a.details&&e.createElement("div",{className:"appeal-details"},e.createElement("strong",null,"Details:")," ",a.details)),a.admin_response&&e.createElement("div",{className:"admin-response"},e.createElement("strong",null,"Admin Response:")," ",a.admin_response,e.createElement("div",{className:"response-date"},"Reviewed: ",new Date(a.reviewed_at).toLocaleString())))}))))}export{L as default};
