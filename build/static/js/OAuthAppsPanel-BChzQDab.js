import{r as l,j as e}from"./react-core-D6cE4lil.js";import{an as C,g as v,aV as _,B as y,a as N,q as R}from"./icons-vendor-fClA8qVL.js";import{t as i}from"./index-B3eDbSm-.js";import"./media-vendor-Du00QUHb.js";import"./router-vendor-wrB4dqw3.js";import"./state-vendor-DnurjGY_.js";import"./crypto-vendor-Drccqhv1.js";import"./ui-vendor-CZOhtEfS.js";const F=["read_messages","send_messages","manage_channels","manage_roles","manage_server","read_user","modify_user"],D=(o,s)=>{const[c,a]=l.useState([]),[A,w]=l.useState([]),[B,b]=l.useState(!1),[S,k]=l.useState("apps"),[T,m]=l.useState(!1),[z,g]=l.useState(!1),[d,p]=l.useState({name:"",description:"",redirect_uris:"",scopes:[]}),[x,j]=l.useState({name:"",description:""}),f=async()=>{b(!0);try{const r=await(await o(`${s}/oauth/apps/list/`)).json();a(r.apps||[])}catch{i.error("Failed to load OAuth apps")}finally{b(!1)}},u=async()=>{try{const r=await(await o(`${s}/bots/list/`)).json();w(r.bots||[])}catch{i.error("Failed to load bots")}};return l.useEffect(()=>{f(),u()},[]),{apps:c,bots:A,loading:B,activeTab:S,setActiveTab:k,showCreateApp:T,setShowCreateApp:m,showCreateBot:z,setShowCreateBot:g,newApp:d,setNewApp:p,newBot:x,setNewBot:j,createApp:async()=>{if(!d.name){i.error("App name is required");return}try{const r=await(await o(`${s}/oauth/apps/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,redirect_uris:d.redirect_uris.split(`
`).filter(h=>h.trim())})})).json();i.success("OAuth app created successfully"),m(!1),p({name:"",description:"",redirect_uris:"",scopes:[]}),f(),r.client_id&&r.client_secret&&i.info(`Client ID: ${r.client_id}
Client Secret: ${r.client_secret}

Save these credentials securely. The secret will not be shown again.`)}catch{i.error("Failed to create OAuth app")}},createBot:async()=>{if(!x.name){i.error("Bot name is required");return}try{const r=await(await o(`${s}/bots/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).json();i.success("Bot created successfully"),g(!1),j({name:"",description:""}),u(),r.token&&i.info(`Bot Token: ${r.token}

Save this token securely. It will not be shown again.`)}catch{i.error("Failed to create bot")}},deleteApp:async n=>{if(confirm("Are you sure you want to delete this app? This cannot be undone."))try{await o(`${s}/oauth/apps/${n}/delete/`,{method:"DELETE"}),i.success("App deleted successfully"),f()}catch{i.error("Failed to delete app")}},deleteBot:async n=>{if(confirm("Are you sure you want to delete this bot? This cannot be undone."))try{await o(`${s}/bots/${n}/delete/`,{method:"DELETE"}),i.success("Bot deleted successfully"),u()}catch{i.error("Failed to delete bot")}},copyToClipboard:(n,r)=>{navigator.clipboard.writeText(n),i.success(`${r} copied to clipboard`)},toggleScope:n=>{p(r=>({...r,scopes:r.scopes.includes(n)?r.scopes.filter(h=>h!==n):[...r.scopes,n]}))},availableScopes:F}},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},tabs:{display:"flex",borderBottom:"1px solid #2c2f33",padding:"0 20px"},tab:{padding:"12px 20px",backgroundColor:"transparent",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",borderBottom:"2px solid transparent"},tabActive:{color:"#5865f2",borderBottom:"2px solid #5865f2"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},toolbar:{marginBottom:"20px"},createButton:{padding:"10px 20px",backgroundColor:"#5865f2",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",fontWeight:"500"},createForm:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",marginBottom:"20px"},formTitle:{margin:"0 0 16px 0",fontSize:"16px",color:"#ffffff"},formGroup:{marginBottom:"16px"},label:{display:"block",color:"#dcddde",fontSize:"14px",marginBottom:"8px",fontWeight:"500"},input:{width:"100%",padding:"10px",backgroundColor:"#1e1e1e",border:"1px solid #2c2f33",borderRadius:"4px",color:"#ffffff",fontSize:"14px"},scopesGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},scopeCheckbox:{display:"flex",alignItems:"center",gap:"8px",color:"#dcddde",fontSize:"14px",cursor:"pointer"},formActions:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"20px"},submitButton:{padding:"10px 20px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500"},cancelButton:{padding:"10px 20px",backgroundColor:"#4f545c",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"14px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},appsList:{display:"flex",flexDirection:"column",gap:"16px"},appCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},appHeader:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},appName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},appDescription:{fontSize:"14px",color:"#99aab5"},deleteButton:{background:"none",border:"none",color:"#f04747",cursor:"pointer",fontSize:"16px",padding:"5px"},appDetails:{display:"flex",flexDirection:"column",gap:"12px"},credential:{display:"flex",alignItems:"center",gap:"10px",fontSize:"14px",color:"#dcddde"},code:{flex:1,padding:"8px",backgroundColor:"#1e1e1e",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px",color:"#5865f2"},copyButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"14px",padding:"5px"},detail:{fontSize:"14px",color:"#dcddde"},uri:{fontSize:"13px",color:"#5865f2",marginLeft:"8px",fontFamily:"monospace"},botsList:{display:"flex",flexDirection:"column",gap:"16px"},botCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px"},botHeader:{display:"flex",alignItems:"center"},botName:{fontSize:"18px",fontWeight:"600",color:"#ffffff",marginBottom:"4px"},botDescription:{fontSize:"14px",color:"#99aab5",marginBottom:"4px"},botStatus:{fontSize:"13px",color:"#dcddde"}},I=({o})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:t.toolbar,children:e.jsxs("button",{onClick:()=>o.setShowCreateApp(!o.showCreateApp),style:t.createButton,children:[e.jsx(C,{style:{marginRight:"5px"}})," New OAuth App"]})}),o.showCreateApp&&e.jsxs("div",{style:t.createForm,children:[e.jsx("h3",{style:t.formTitle,children:"Create OAuth Application"}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Application Name"}),e.jsx("input",{type:"text",value:o.newApp.name,onChange:s=>o.setNewApp({...o.newApp,name:s.target.value}),placeholder:"My Awesome App",style:t.input})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Description"}),e.jsx("textarea",{value:o.newApp.description,onChange:s=>o.setNewApp({...o.newApp,description:s.target.value}),placeholder:"What does your app do?",style:{...t.input,minHeight:"60px"}})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Redirect URIs (one per line)"}),e.jsx("textarea",{value:o.newApp.redirect_uris,onChange:s=>o.setNewApp({...o.newApp,redirect_uris:s.target.value}),placeholder:"https://example.com/callback",style:{...t.input,minHeight:"80px"}})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Scopes"}),e.jsx("div",{style:t.scopesGrid,children:o.availableScopes.map(s=>e.jsxs("label",{style:t.scopeCheckbox,children:[e.jsx("input",{type:"checkbox",checked:o.newApp.scopes.includes(s),onChange:()=>o.toggleScope(s)}),e.jsx("span",{children:s})]},s))})]}),e.jsxs("div",{style:t.formActions,children:[e.jsx("button",{onClick:o.createApp,style:t.submitButton,children:"Create Application"}),e.jsx("button",{onClick:()=>o.setShowCreateApp(!1),style:t.cancelButton,children:"Cancel"})]})]}),e.jsx("div",{style:t.appsList,children:o.apps.length===0?e.jsx("div",{style:t.empty,children:"No OAuth apps yet. Create one to get started!"}):o.apps.map(s=>e.jsxs("div",{style:t.appCard,children:[e.jsxs("div",{style:t.appHeader,children:[e.jsxs("div",{children:[e.jsx("div",{style:t.appName,children:s.name}),e.jsx("div",{style:t.appDescription,children:s.description})]}),e.jsx("button",{onClick:()=>o.deleteApp(s.id),style:t.deleteButton,children:e.jsx(v,{})})]}),e.jsxs("div",{style:t.appDetails,children:[e.jsxs("div",{style:t.credential,children:[e.jsx("strong",{children:"Client ID:"}),e.jsx("code",{style:t.code,children:s.client_id}),e.jsx("button",{onClick:()=>o.copyToClipboard(s.client_id,"Client ID"),style:t.copyButton,children:e.jsx(_,{})})]}),e.jsxs("div",{style:t.detail,children:[e.jsx("strong",{children:"Scopes:"})," ",s.scopes?.join(", ")||"None"]}),e.jsxs("div",{style:t.detail,children:[e.jsx("strong",{children:"Redirect URIs:"}),s.redirect_uris?.map((c,a)=>e.jsx("div",{style:t.uri,children:c},a))]})]})]},s.id))})]}),L=({o})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:t.toolbar,children:e.jsxs("button",{onClick:()=>o.setShowCreateBot(!o.showCreateBot),style:t.createButton,children:[e.jsx(C,{style:{marginRight:"5px"}})," New Bot"]})}),o.showCreateBot&&e.jsxs("div",{style:t.createForm,children:[e.jsx("h3",{style:t.formTitle,children:"Create Bot Account"}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Bot Name"}),e.jsx("input",{type:"text",value:o.newBot.name,onChange:s=>o.setNewBot({...o.newBot,name:s.target.value}),placeholder:"My Bot",style:t.input})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:"Description"}),e.jsx("textarea",{value:o.newBot.description,onChange:s=>o.setNewBot({...o.newBot,description:s.target.value}),placeholder:"What does your bot do?",style:{...t.input,minHeight:"60px"}})]}),e.jsxs("div",{style:t.formActions,children:[e.jsx("button",{onClick:o.createBot,style:t.submitButton,children:"Create Bot"}),e.jsx("button",{onClick:()=>o.setShowCreateBot(!1),style:t.cancelButton,children:"Cancel"})]})]}),e.jsx("div",{style:t.botsList,children:o.bots.length===0?e.jsx("div",{style:t.empty,children:"No bots yet. Create one to automate tasks!"}):o.bots.map(s=>e.jsx("div",{style:t.botCard,children:e.jsxs("div",{style:t.botHeader,children:[e.jsx(y,{style:{fontSize:"32px",color:"#5865f2"}}),e.jsxs("div",{style:{flex:1,marginLeft:"12px"},children:[e.jsx("div",{style:t.botName,children:s.name}),e.jsx("div",{style:t.botDescription,children:s.description}),e.jsxs("div",{style:t.botStatus,children:["Status: ",s.is_active?"ðŸŸ¢ Active":"ðŸ”´ Inactive"]})]}),e.jsx("button",{onClick:()=>o.deleteBot(s.id),style:t.deleteButton,children:e.jsx(v,{})})]})},s.id))})]}),X=({fetchWithAuth:o,apiBaseUrl:s,onClose:c})=>{const a=D(o,s);return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(y,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Developer Portal"})]}),e.jsx("button",{onClick:c,style:t.closeButton,children:e.jsx(N,{})})]}),e.jsxs("div",{style:t.tabs,children:[e.jsxs("button",{onClick:()=>a.setActiveTab("apps"),style:{...t.tab,...a.activeTab==="apps"&&t.tabActive},children:[e.jsx(R,{style:{marginRight:"5px"}})," OAuth Apps (",a.apps.length,")"]}),e.jsxs("button",{onClick:()=>a.setActiveTab("bots"),style:{...t.tab,...a.activeTab==="bots"&&t.tabActive},children:[e.jsx(y,{style:{marginRight:"5px"}})," Bots (",a.bots.length,")"]})]}),e.jsx("div",{style:t.content,children:a.loading?e.jsx("div",{style:t.loading,children:"Loading..."}):a.activeTab==="apps"?e.jsx(I,{o:a}):e.jsx(L,{o:a})})]})})};export{X as default};
