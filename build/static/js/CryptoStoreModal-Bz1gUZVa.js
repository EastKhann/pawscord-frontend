import{r as u,n as e}from"./react-core-DA61mcWm.js";import{j as _,as as C,aw as F,a as E,ax as P,N as R,ay as H}from"./icons-vendor-DRtjID0N.js";import{t as x,h as A}from"./index-1Alyfdkn.js";import"./ui-vendor-BrUQ4r0A.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-tDmQW26m.js";import"./router-vendor-2etVlp2q.js";import"./state-vendor-CjqIs3K2.js";import"./crypto-vendor-DiGIAuUm.js";const S=[{id:"p1",coins:1e3,price:"15 USDT",note:"Ba≈ülangƒ±√ß paketi"},{id:"p2",coins:2500,price:"35 USDT",note:"Pop√ºler se√ßim"},{id:"p3",coins:6e3,price:"75 USDT",note:"En iyi deƒüer"},{id:"p4",coins:15e3,price:"180 USDT",note:"Topluluk paketi"}],L=[{label:"USDT (TRC20)",value:"TGAny6VmDAWdVmTXCPrpsbLKKQQdvyvnWC"},{label:"USDT (ERC20)",value:"0xeaa14d4651a8ea7488289209b9294a1309dde37c"},{label:"SOL (Solana)",value:"Bk6ywhae86fp6BHmGtxabS6ncEGsFxhcnZEWJRZLVr9z"}],q=({fetchWithAuth:r,apiBaseUrl:l,onClose:c})=>{const[n,t]=u.useState("store"),[p,y]=u.useState(0),[f,j]=u.useState([]),[s,m]=u.useState([]),[T,b]=u.useState(!1),[I,v]=u.useState(null),[w,k]=u.useState(""),[D,g]=u.useState(null),[z,B]=u.useState(S[0]),h=()=>{r(`${l}/store/balance/`).then(o=>o.json()).then(o=>y(o.coins)),r(`${l}/store/items/`).then(o=>o.json()).then(o=>j(o)),r(`${l}/store/inventory/`).then(o=>o.json()).then(o=>m(o))};return u.useEffect(()=>{h()},[l,r]),u.useEffect(()=>{const o=i=>{i.key==="Escape"&&c()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[c]),{activeTab:n,setActiveTab:t,balance:p,storeItems:f,inventory:s,loading:T,dailyInfo:I,txid:w,setTxid:k,txidResult:D,selectedPack:z,setSelectedPack:B,handleDailyClaim:async()=>{b(!0);try{const o=await r(`${l}/store/daily-reward/`,{method:"POST"});let i=null;try{i=await o.json()}catch{i=null}if(o.ok&&i){const d={claimed:!!i.claimed,added_coins:typeof i.added_coins=="number"?i.added_coins:0,new_balance:typeof i.new_balance=="number"?i.new_balance:p,streak:typeof i.streak=="number"?i.streak:void 0,reason:i.reason,remaining_seconds:typeof i.remaining_seconds=="number"?i.remaining_seconds:void 0,error:i.error};v(d),d.claimed&&typeof d.new_balance=="number"&&y(d.new_balance),h()}else{const d=i&&(i.error||i.message||i.detail)||"ƒ∞stek ba≈üarƒ±sƒ±z";v({claimed:!1,error:d})}}catch{v({claimed:!1,error:"Beklenmeyen hata"})}b(!1)},handleBuy:async o=>{if(await A("Bu √ºr√ºn√º satƒ±n almak istiyor musunuz?")){b(!0);try{const i=await r(`${l}/store/buy/`,{method:"POST",body:JSON.stringify({item_id:o})}),d=await i.json();i.ok?(x.success(d.message),h()):x.error(d.error)}catch{x.error("‚ùå Hata olu≈ütu.")}b(!1)}},handleEquip:async o=>{b(!0);try{(await r(`${l}/store/equip/${o}/`,{method:"POST"})).ok&&h()}catch{x.error("Item equip failed")}b(!1)},handleVerifyTxid:async()=>{const o=w.trim();if(!o){x.error("‚ùå L√ºtfen i≈ülem ID girin");return}if(o.length<6){g({success:!1,message:"ƒ∞≈ülem ID √ßok kƒ±sa g√∂r√ºn√ºyor"});return}b(!0),g(null);try{const i=await r(`${l}/store/verify-txid/`,{method:"POST",body:JSON.stringify({txid:o})}),d=await i.json();i.ok?(g({success:!0,message:d.message||"√ñdeme doƒürulandƒ±!",added_coins:d.added_coins}),h(),k("")):g({success:!1,message:d.error||d.detail||"Doƒürulama ba≈üarƒ±sƒ±z"})}catch{g({success:!1,message:"Beklenmeyen hata"})}b(!1)},handleCopyAddress:async o=>{try{await navigator.clipboard.writeText(o),x.success("‚úÖ Adres kopyalandƒ±: "+o)}catch{x.error("‚ùå Kopyalama ba≈üarƒ±sƒ±z oldu")}},handlePasteTxid:async()=>{try{const o=await navigator.clipboard.readText();o&&k(o.trim())}catch{}}}},a={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",boxSizing:"border-box"},modal:{backgroundColor:"#2b2d31",width:"100%",maxWidth:"600px",maxHeight:"90vh",borderRadius:"12px",overflow:"hidden",border:"1px solid #1e1f22",display:"flex",flexDirection:"column"},header:{padding:"20px",backgroundColor:"#202225",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},closeBtn:{background:"none",border:"none",color:"#bbb",cursor:"pointer",fontSize:"1.2em",padding:"10px",minWidth:"44px",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center"},balanceBar:{padding:"10px 12px",backgroundColor:"#2f3136",color:"white",borderBottom:"1px solid #1e1f22",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center"},tabs:{display:"flex",borderBottom:"1px solid #1e1f22",backgroundColor:"#202225",flexShrink:0},tab:{flex:1,padding:"15px",background:"none",border:"none",color:"#bbb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},activeTab:{flex:1,padding:"15px",background:"rgba(255,255,255,0.05)",border:"none",color:"white",cursor:"pointer",borderBottom:"2px solid #5865f2",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"44px",touchAction:"manipulation"},content:{padding:"20px",overflowY:"auto",flex:1,WebkitOverflowScrolling:"touch",overflowX:"hidden"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"15px",paddingBottom:"20px"},itemCard:{backgroundColor:"#202225",padding:"15px",borderRadius:"8px",textAlign:"center",border:"1px solid #1e1f22",display:"flex",flexDirection:"column",alignItems:"center",color:"white",minHeight:"180px"},iconPlace:{width:60,height:60,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10,flexShrink:0},buyBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},ownedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#40444b",color:"#aaa",border:"none",borderRadius:"4px",width:"100%",fontSize:"0.9em",minHeight:"44px"},useBtn:{marginTop:"auto",padding:"12px",backgroundColor:"#23a559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",fontSize:"0.9em",minHeight:"44px",touchAction:"manipulation",fontWeight:"600"},equippedBtn:{marginTop:"auto",padding:"12px",backgroundColor:"transparent",color:"#23a559",border:"1px solid #23a559",borderRadius:"4px",width:"100%",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",gap:5,minHeight:"44px"},dailyBtn:{padding:"4px 8px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"0.75em",lineHeight:1,minHeight:"24px",marginLeft:"8px"}},$=({storeItems:r,loading:l,balance:c,handleBuy:n})=>e.jsxs("div",{style:a.grid,children:[r.map(t=>e.jsxs("div",{style:a.itemCard,children:[e.jsx("div",{style:a.iconPlace,children:t.preview_image?e.jsx("img",{src:t.preview_image,alt:t.name,style:{width:50,height:50}}):e.jsx("span",{style:{fontSize:"2em"},children:"üéÅ"})}),e.jsx("h4",{children:t.name}),e.jsx("p",{style:{fontSize:"0.8em",color:"#999"},children:t.description}),t.rarity&&e.jsxs("span",{style:{fontSize:"0.75em",color:"#b9bbbe",marginBottom:6},children:["Nadirlik: ",t.rarity]}),t.is_owned?e.jsx("button",{style:a.ownedBtn,disabled:!0,children:"Sahipsin"}):e.jsxs("button",{onClick:()=>n(t.id),style:a.buyBtn,disabled:l||c<t.price,children:[c<t.price?e.jsx(_,{}):null," ",t.price," Coin"]})]},t.id)),r.length===0&&e.jsx("p",{style:{color:"#ccc"},children:"Ma\\u011Fazada \\u00FCr\\u00FCn yok."})]}),K=({inventory:r,loading:l,handleEquip:c})=>e.jsxs("div",{style:a.grid,children:[r.map(n=>e.jsxs("div",{style:{...a.itemCard,border:n.is_equipped?"1px solid #23a559":"1px solid #1e1f22"},children:[e.jsx("div",{style:a.iconPlace,children:n.preview_image?e.jsx("img",{src:n.preview_image,alt:n.name,style:{width:50,height:50}}):e.jsx("span",{style:{fontSize:"2em"},children:"üéí"})}),e.jsx("h4",{children:n.name}),e.jsx("p",{style:{fontSize:"0.8em",color:"#999"},children:n.item_type}),n.is_equipped?e.jsxs("button",{style:a.equippedBtn,disabled:!0,children:[e.jsx(C,{})," Ku\\u015Fan\\u0131ld\\u0131"]}):e.jsx("button",{onClick:()=>c(n.id),style:a.useBtn,disabled:l,children:"Ku\\u015Fan"})]},n.id)),r.length===0&&e.jsx("p",{style:{color:"#ccc"},children:"Hen\\u00FCz bir \\u015Fey sat\\u0131n almad\\u0131n."})]}),O=({selectedPack:r,setSelectedPack:l,txid:c,setTxid:n,txidResult:t,loading:p,handleVerifyTxid:y,handleCopyAddress:f,handlePasteTxid:j})=>e.jsxs("div",{style:{padding:"10px",color:"white"},children:[e.jsxs("h3",{style:{marginTop:0,color:"#f0b232"},children:["üí∞"," PawsCoin Sat\\u0131n Al"]}),e.jsx("p",{style:{color:"#b9bbbe",fontSize:"0.9em"},children:"Kripto para ile PawsCoin sat\\u0131n al\\u0131n. \\u00D6demenizi yapt\\u0131ktan sonra i\\u015Flem ID'sini (TXID) a\\u015Fa\\u011F\\u0131ya girin."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:12,margin:"16px 0"},children:S.map(s=>{const m=r?.id===s.id;return e.jsxs("div",{onClick:()=>l(s),style:{backgroundColor:m?"#3b3f47":"#202225",border:`1px solid ${m?"#5865f2":"#1e1f22"}`,borderRadius:10,padding:12,cursor:"pointer",display:"flex",flexDirection:"column",gap:6,transition:"border-color 0.2s, background-color 0.2s"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontWeight:700,color:"white"},children:[s.coins.toLocaleString()," Coin"]}),m&&e.jsx(C,{color:"#23a559"})]}),e.jsx("div",{style:{color:"#f0b232",fontWeight:600},children:s.price}),e.jsx("div",{style:{color:"#b9bbbe",fontSize:"0.8em"},children:s.note})]},s.id)})}),r&&e.jsxs("div",{style:{marginBottom:14,padding:12,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22",color:"#b9bbbe",fontSize:"0.9em"},children:["Se\\u00E7ilen paket: ",e.jsxs("strong",{style:{color:"white"},children:[r.coins.toLocaleString()," Coin"]})," ","‚Äì",e.jsxs("span",{style:{color:"#f0b232",fontWeight:600},children:[" ",r.price]})]}),e.jsxs("div",{style:{marginTop:20,marginBottom:20,padding:15,backgroundColor:"#202225",borderRadius:8,border:"1px solid #1e1f22"},children:[e.jsxs("h4",{style:{margin:"0 0 10px 0",color:"#5865f2"},children:["üìã"," \\u00D6deme Bilgileri"]}),e.jsx("div",{style:{fontSize:"0.85em",color:"#b9bbbe",lineHeight:1.6,display:"flex",flexDirection:"column",gap:8},children:L.map(s=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[e.jsx("p",{style:{margin:0},children:e.jsxs("strong",{children:[s.label,":"]})}),e.jsx("button",{onClick:()=>f(s.value),style:{backgroundColor:"#2f3136",color:"white",border:"1px solid #1e1f22",borderRadius:6,padding:"4px 10px",cursor:"pointer",fontSize:"0.8em"},children:"Kopyala"})]}),e.jsx("code",{style:{display:"block",padding:8,backgroundColor:"#2b2d31",borderRadius:4,wordBreak:"break-all"},children:s.value})]},s.label))}),e.jsx("p",{style:{fontSize:"0.75em",color:"#999",marginTop:10},children:"\\u00D6deme sonras\\u0131 i\\u015Flem ID'sini (TXID) a\\u015Fa\\u011F\\u0131ya girin. Not: \\u015Eu an se\\u00E7ilen paket bilgisi bilgilendirme ama\\u00E7l\\u0131, TXID do\\u011Frulamas\\u0131 i\\u015Flem miktar\\u0131n\\u0131 otomatik alg\\u0131lamaz."})]}),e.jsxs("div",{style:{marginBottom:15},children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:"0.9em",color:"#b9bbbe"},children:["ƒ∞","\\u015Flem ID (TXID):"]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:c,onChange:s=>n(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),y())},placeholder:"\\u0130\\u015Flem ID'sini buraya yap\\u0131\\u015Ft\\u0131r\\u0131n",style:{width:"100%",padding:"10px",backgroundColor:"#2b2d31",border:"1px solid #1e1f22",borderRadius:"4px",color:"white",fontSize:"0.9em"},disabled:p}),e.jsx("button",{onClick:j,style:{padding:"0 12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:p?"not-allowed":"pointer",opacity:p?.6:1},disabled:p,children:"Yap\\u0131\\u015Ft\\u0131r"})]})]}),e.jsx("button",{onClick:y,style:{width:"100%",padding:"12px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:p?"not-allowed":"pointer",fontSize:"1em",fontWeight:"600",opacity:p?.6:1},disabled:p,children:p?"Doƒürulanƒ±yor...":"Doƒürula ve Coin Al"}),t&&e.jsxs("div",{style:{marginTop:15,padding:12,backgroundColor:t.success?"#23a55933":"#ff5d5d33",border:`1px solid ${t.success?"#23a559":"#ff5d5d"}`,borderRadius:6,color:t.success?"#23a559":"#ff5d5d"},children:[t.success?"‚úÖ":"‚ùå"," ",t.message,t.added_coins&&e.jsxs("strong",{children:[" (+",t.added_coins," coin)"]})]})]}),te=({onClose:r,fetchWithAuth:l,apiBaseUrl:c})=>{const n=q({fetchWithAuth:l,apiBaseUrl:c,onClose:r});return e.jsx("div",{style:a.overlay,onClick:r,children:e.jsxs("div",{style:a.modal,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:a.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(F,{color:"#f0b232",size:24}),e.jsxs("h2",{style:{margin:0,color:"white"},children:["Pawscord Ma","ƒü","aza"]})]}),e.jsx("button",{onClick:r,style:a.closeBtn,children:e.jsx(E,{})})]}),e.jsx("div",{style:a.balanceBar,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:"Mevcut Bakiye:"}),e.jsxs("strong",{style:{color:"#f0b232",fontSize:"1.2em"},children:[n.balance," Coin"]}),e.jsxs("button",{onClick:n.handleDailyClaim,style:a.dailyBtn,disabled:n.loading,children:["üéÅ"," +10"]})]})}),e.jsxs("div",{style:a.tabs,children:[e.jsxs("button",{style:n.activeTab==="store"?a.activeTab:a.tab,onClick:()=>n.setActiveTab("store"),children:[e.jsx(P,{})," Ma","ƒü","aza"]}),e.jsxs("button",{style:n.activeTab==="deposit"?a.activeTab:a.tab,onClick:()=>n.setActiveTab("deposit"),children:[e.jsx(R,{})," PawsCoin Sat","ƒ±","n Al"]}),e.jsxs("button",{style:n.activeTab==="inventory"?a.activeTab:a.tab,onClick:()=>n.setActiveTab("inventory"),children:[e.jsx(H,{})," Envanterim"]})]}),e.jsxs("div",{style:a.content,children:[n.activeTab==="store"&&e.jsx($,{storeItems:n.storeItems,loading:n.loading,balance:n.balance,handleBuy:n.handleBuy}),n.activeTab==="inventory"&&e.jsx(K,{inventory:n.inventory,loading:n.loading,handleEquip:n.handleEquip}),n.activeTab==="deposit"&&e.jsx(O,{...n})]}),n.dailyInfo&&e.jsx("div",{style:{padding:"10px 20px",borderTop:"1px solid #1e1f22",backgroundColor:"#202225"},children:n.dailyInfo.claimed?e.jsxs("div",{style:{color:"#23a559"},children:["üéÅ"," ",n.dailyInfo.added_coins??0," coin ald","ƒ±","n! Yeni bakiye: ",e.jsx("strong",{children:n.dailyInfo.new_balance??n.balance}),".",typeof n.dailyInfo.streak<"u"&&e.jsxs("span",{style:{marginLeft:8,color:"#b9bbbe"},children:["Streak: ",n.dailyInfo.streak]})]}):n.dailyInfo.reason==="cooldown"?e.jsxs("div",{style:{color:"#b9bbbe"},children:["‚è≥"," G","√º","nl","√º","k ","√∂","d","√º","l i","√ß","in bekle: ",e.jsx("strong",{children:Math.max(0,n.dailyInfo.remaining_seconds??0)})," sn"]}):e.jsxs("div",{style:{color:"#ff5d5d"},children:["‚ö†Ô∏è"," ",n.dailyInfo.error||"√ñd√ºl alƒ±namadƒ±."]})})]})})};export{te as default};
