{"version":3,"file":"StarboardPanel-BIXtfAjI.js","sources":["../../../src/components/StarboardPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport './StarboardPanel.css';\r\nimport { toast } from 'react-toastify';\r\nimport { getApiBase } from '../utils/apiEndpoints';\r\n\r\nconst StarboardPanel = ({ serverId, onClose }) => {\r\n  const apiBaseUrl = getApiBase();\r\n\r\n  const [config, setConfig] = useState({\r\n    enabled: false,\r\n    channel_id: '',\r\n    emoji: '‚≠ê',\r\n    threshold: 3,\r\n    self_star: false,\r\n    allow_nsfw: false\r\n  });\r\n  const [stars, setStars] = useState([]);\r\n  const [channels, setChannels] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchConfig();\r\n    fetchStars();\r\n    fetchChannels();\r\n  }, [serverId]);\r\n\r\n  const fetchConfig = async () => {\r\n    try {\r\n      const response = await fetch(`${apiBaseUrl}/starboard/server/${serverId}/config/`, {\r\n        headers: { 'Authorization': `Bearer ${localStorage.getItem('access_token')}` }\r\n      });\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setConfig(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStars = async () => {\r\n    try {\r\n      const response = await fetch(`${apiBaseUrl}/starboard/server/${serverId}/messages/`, {\r\n        headers: { 'Authorization': `Bearer ${localStorage.getItem('access_token')}` }\r\n      });\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setStars(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n  };\r\n\r\n  const fetchChannels = async () => {\r\n    try {\r\n      const response = await fetch(`${apiBaseUrl}/channels/server/${serverId}/`, {\r\n        headers: { 'Authorization': `Bearer ${localStorage.getItem('access_token')}` }\r\n      });\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setChannels(data.filter(ch => ch.type === 'text'));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n  };\r\n\r\n  const saveConfig = async () => {\r\n    try {\r\n      const response = await fetch(`${apiBaseUrl}/starboard/server/${serverId}/config/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(config)\r\n      });\r\n\r\n      if (response.ok) {\r\n        toast.success('‚úÖ Starboard ayarlarƒ± kaydedildi');\r\n      } else {\r\n        toast.error('‚ùå Kaydetme hatasƒ±');\r\n      }\r\n    } catch (error) {\r\n      toast.error('‚ùå Baƒülantƒ± hatasƒ±');\r\n    }\r\n  };\r\n\r\n  const removeMessage = async (messageId) => {\r\n    try {\r\n      const response = await fetch(`${apiBaseUrl}/starboard/message/${messageId}/remove/`, {\r\n        method: 'DELETE',\r\n        headers: { 'Authorization': `Bearer ${localStorage.getItem('access_token')}` }\r\n      });\r\n      if (response.ok) {\r\n        toast.success('‚úÖ Mesaj kaldƒ±rƒ±ldƒ±');\r\n        fetchStars();\r\n      }\r\n    } catch (error) {\r\n      toast.error('‚ùå Silme hatasƒ±');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"starboard-overlay\" onClick={onClose}>\r\n      <div className=\"starboard-panel\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"starboard-header\">\r\n          <h2>‚≠ê Starboard</h2>\r\n          <button className=\"close-btn\" onClick={onClose}>√ó</button>\r\n        </div>\r\n\r\n        <div className=\"starboard-content\">\r\n          {loading ? (\r\n            <div className=\"loading-state\">\r\n              <div className=\"spinner\"></div>\r\n              <p>Y√ºkleniyor...</p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"config-section\">\r\n                <div className=\"section-header\">\r\n                  <h3>‚öôÔ∏è Ayarlar</h3>\r\n                  <label className=\"toggle-switch\">\r\n                    <input type=\"checkbox\" checked={config.enabled} onChange={(e) => setConfig({...config, enabled: e.target.checked})} />\r\n                    <span className=\"toggle-slider\"></span>\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"config-grid\">\r\n                  <div className=\"form-group\">\r\n                    <label>üì¢ Starboard Kanalƒ±</label>\r\n                    <select value={config.channel_id} onChange={(e) => setConfig({...config, channel_id: e.target.value})}>\r\n                      <option value=\"\">Se√ßin</option>\r\n                      {channels.map(ch => <option key={ch.id} value={ch.id}># {ch.name}</option>)}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>‚≠ê Emoji</label>\r\n                    <input type=\"text\" value={config.emoji} onChange={(e) => setConfig({...config, emoji: e.target.value})} placeholder=\"‚≠ê\" />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label>üéØ E≈üik Deƒüeri</label>\r\n                    <input type=\"number\" min=\"1\" max=\"50\" value={config.threshold} onChange={(e) => setConfig({...config, threshold: parseInt(e.target.value)})} />\r\n                    <small>Mesajƒ±n starboard'a eklenebilmesi i√ßin gereken minimum yƒ±ldƒ±z sayƒ±sƒ±</small>\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label className=\"checkbox-label\">\r\n                      <input type=\"checkbox\" checked={config.self_star} onChange={(e) => setConfig({...config, self_star: e.target.checked})} />\r\n                      <span>Kendi mesajƒ±na yƒ±ldƒ±z verebilir</span>\r\n                    </label>\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label className=\"checkbox-label\">\r\n                      <input type=\"checkbox\" checked={config.allow_nsfw} onChange={(e) => setConfig({...config, allow_nsfw: e.target.checked})} />\r\n                      <span>NSFW kanallardan izin ver</span>\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <button className=\"save-btn\" onClick={saveConfig}>üíæ Kaydet</button>\r\n              </div>\r\n\r\n              <div className=\"stars-section\">\r\n                <h3>‚≠ê Starboard Mesajlarƒ± ({stars.length})</h3>\r\n                {stars.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <span className=\"empty-icon\">‚≠ê</span>\r\n                    <p>Hen√ºz starboard mesajƒ± yok</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"stars-list\">\r\n                    {stars.map((star) => (\r\n                      <div key={star.message_id} className=\"star-card\">\r\n                        <div className=\"star-header\">\r\n                          <div className=\"star-author\">\r\n                            {star.author_avatar ? <img src={star.author_avatar} alt=\"\" /> : <div className=\"default-avatar\">üë§</div>}\r\n                            <span>{star.author_name}</span>\r\n                          </div>\r\n                          <div className=\"star-count\">\r\n                            <span>{config.emoji} {star.star_count}</span>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"star-content\">\r\n                          <p>{star.content}</p>\r\n                          {star.attachments && star.attachments.length > 0 && (\r\n                            <div className=\"star-attachments\">\r\n                              {star.attachments.map((att, idx) => (\r\n                                <img key={idx} src={att} alt=\"\" />\r\n                              ))}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"star-footer\">\r\n                          <span className=\"star-channel\"># {star.channel_name}</span>\r\n                          <span className=\"star-time\">{new Date(star.created_at).toLocaleString('tr-TR')}</span>\r\n                          <button className=\"remove-btn\" onClick={() => removeMessage(star.message_id)}>üóëÔ∏è</button>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StarboardPanel;\r\n\r\n"],"names":["useState","useEffect","toast","jsx","jsxs","Fragment"],"mappings":"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"}