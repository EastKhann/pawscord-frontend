import{r as c,aT as d,l as w}from"./react-core-B6hadH-M.js";import{t as p}from"./index-D_6pZib5.js";const I=({fetchWithAuth:x,apiBaseUrl:u,onClose:y,serverId:f})=>{const[l,g]=c.useState([]),[v,m]=c.useState(!1),[s,R]=c.useState(!1),[i,b]=c.useState(!1);c.useEffect(()=>{E()},[s,i]);const E=async()=>{m(!0);try{const t=new URLSearchParams({include_expired:s,include_revoked:i}),r=await(await x(`${u}/servers/${f}/invites/?${t}`)).json();g(r.invites||[])}catch{p.error("Failed to load invites")}finally{m(!1)}},h=()=>{const t=[["Code","Creator","Uses","Max Uses","Created","Expires","Status"],...l.map(n=>[n.code,n.creator_username,n.uses,n.max_uses||"Unlimited",new Date(n.created_at).toLocaleString(),n.expires_at?new Date(n.expires_at).toLocaleString():"Never",n.revoked?"Revoked":n.is_expired?"Expired":"Active"])].map(n=>n.map(C=>`"${C}"`).join(",")).join(`
`),o=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=`server_invites_${Date.now()}.csv`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a),p.success("Invites exported")},k=()=>{const t=JSON.stringify(l,null,2),o=new Blob([t],{type:"application/json"}),r=window.URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=`server_invites_${Date.now()}.json`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a),p.success("Invites exported")};return React.createElement("div",{style:e.overlay},React.createElement("div",{style:e.modal},React.createElement("div",{style:e.header},React.createElement("div",{style:e.headerLeft},React.createElement(d,{style:{marginRight:"10px",color:"#5865f2"}}),React.createElement("h2",{style:e.title},"Export Invites")),React.createElement("button",{onClick:y,style:e.closeButton},React.createElement(w,null))),React.createElement("div",{style:e.toolbar},React.createElement("div",{style:e.filters},React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:s,onChange:t=>R(t.target.checked)}),React.createElement("span",{style:e.checkboxLabel},"Include expired")),React.createElement("label",{style:e.checkbox},React.createElement("input",{type:"checkbox",checked:i,onChange:t=>b(t.target.checked)}),React.createElement("span",{style:e.checkboxLabel},"Include revoked"))),React.createElement("div",{style:e.exportButtons},React.createElement("button",{onClick:h,style:e.exportButton},React.createElement(d,{style:{marginRight:"6px"}}),"Export CSV"),React.createElement("button",{onClick:k,style:{...e.exportButton,backgroundColor:"#5865f2"}},React.createElement(d,{style:{marginRight:"6px"}}),"Export JSON"))),React.createElement("div",{style:e.content},v?React.createElement("div",{style:e.loading},"Loading invites..."):l.length===0?React.createElement("div",{style:e.empty},"No invites found"):React.createElement(React.Fragment,null,React.createElement("div",{style:e.summary},React.createElement("div",{style:e.summaryItem},React.createElement("div",{style:e.summaryValue},l.length),React.createElement("div",{style:e.summaryLabel},"Total Invites")),React.createElement("div",{style:e.summaryItem},React.createElement("div",{style:e.summaryValue},l.filter(t=>!t.revoked&&!t.is_expired).length),React.createElement("div",{style:e.summaryLabel},"Active")),React.createElement("div",{style:e.summaryItem},React.createElement("div",{style:e.summaryValue},l.reduce((t,o)=>t+o.uses,0)),React.createElement("div",{style:e.summaryLabel},"Total Uses"))),React.createElement("div",{style:e.invitesList},l.map((t,o)=>React.createElement("div",{key:o,style:e.inviteCard},React.createElement("div",{style:e.inviteCode},t.code),React.createElement("div",{style:e.inviteDetails},React.createElement("div",{style:e.inviteDetail},"Creator: ",React.createElement("span",{style:e.inviteValue},t.creator_username)),React.createElement("div",{style:e.inviteDetail},"Uses: ",React.createElement("span",{style:e.inviteValue},t.uses,"/",t.max_uses||"âˆž")),React.createElement("div",{style:e.inviteDetail},"Created: ",React.createElement("span",{style:e.inviteValue},new Date(t.created_at).toLocaleDateString()))),React.createElement("div",{style:e.inviteStatus},t.revoked?React.createElement("span",{style:{...e.statusBadge,backgroundColor:"#f04747"}},"Revoked"):t.is_expired?React.createElement("span",{style:{...e.statusBadge,backgroundColor:"#99aab5"}},"Expired"):React.createElement("span",{style:{...e.statusBadge,backgroundColor:"#43b581"}},"Active")))))))))},e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33",display:"flex",justifyContent:"space-between",alignItems:"center"},filters:{display:"flex",gap:"16px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},checkboxLabel:{fontSize:"13px",color:"#dcddde"},exportButtons:{display:"flex",gap:"8px"},exportButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},summary:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},summaryItem:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",textAlign:"center"},summaryValue:{fontSize:"32px",fontWeight:"700",color:"#5865f2",marginBottom:"8px"},summaryLabel:{fontSize:"13px",color:"#99aab5"},invitesList:{display:"flex",flexDirection:"column",gap:"10px"},inviteCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},inviteCode:{fontSize:"16px",fontWeight:"600",color:"#ffffff",fontFamily:"monospace",minWidth:"120px"},inviteDetails:{flex:1,display:"flex",gap:"20px"},inviteDetail:{fontSize:"13px",color:"#99aab5"},inviteValue:{color:"#dcddde",fontWeight:"500"},inviteStatus:{minWidth:"80px",textAlign:"right"},statusBadge:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",color:"#ffffff"}};export{I as default};
