var E=Object.defineProperty;var n=(u,l)=>E(u,"name",{value:l,configurable:!0});import{a as G,r,j as o}from"./react-core-Djgtqrmb.js";const T=n(({onSelect:u,onClose:l,localGifListUrl:f,absoluteHostUrl:C,fetchWithAuth:x})=>{const[a,j]=r.useState(""),[d,m]=r.useState([]),[h,c]=r.useState([]),[y,b]=r.useState(!0),[p,k]=r.useState(null),g=r.useRef(null);r.useEffect(()=>{function e(t){g.current&&!g.current.contains(t.target)&&t.target.textContent!=="GIF"&&l()}return n(e,"handleClickOutside"),document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]),r.useEffect(()=>{f&&n(async()=>{b(!0),k(null);try{const t=await x(f);if(!t.ok)throw new Error(`Yerel API Hatası: ${t.status}`);const i=await t.json();Array.isArray(i)?(m(i),c(i)):(m([]),c([]))}catch{k("GIF koleksiyonu yüklenemedi. Django sunucusunu ve 'gifs' klasörünü kontrol edin.")}finally{b(!1)}},"fetchLocalGifs")()},[f,x]),r.useEffect(()=>{if(!d.length)return;if(!a){c(d);return}const e=a.toLowerCase(),t=d.filter(i=>{const w=i.substring(i.lastIndexOf("/")+1);return w.substring(0,w.lastIndexOf(".")).toLowerCase().includes(e)});c(t)},[a,d]);const v=n(e=>{u(e)},"handleGifClick"),I=n(e=>e.startsWith("http")?e:`${C}${e}`,"getAbsoluteGifUrl");return o.jsx("div",{style:s.pickerOverlay,children:o.jsxs("div",{style:s.pickerContainer,ref:g,children:[o.jsx("input",{type:"text",placeholder:"Koleksiyonda ara (dosya adına göre)...",value:a,onChange:n(e=>j(e.target.value),"onChange"),style:s.searchInput,disabled:y||p}),o.jsxs("div",{style:s.gifGrid,children:[p&&o.jsx("p",{style:s.errorText,children:p}),y?o.jsx("p",{style:s.loadingText,children:"Yerel koleksiyon yükleniyor..."}):h.length>0?h.map(e=>o.jsx("div",{style:s.gifWrapper,onClick:n(()=>v(e),"onClick"),title:e.substring(e.lastIndexOf("/")+1),children:o.jsx("img",{src:I(e),alt:e.substring(e.lastIndexOf("/")+1),style:s.gifImage,onError:n(t=>{t.target.style.display="none",t.target.parentNode.style.backgroundColor="#444"},"onError")})},e)):!p&&o.jsxs("p",{style:s.noResultsText,children:["'",a,"' için sonuç bulunamadı."]})]})]})})},"GifPicker"),s={pickerOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1500,pointerEvents:"none"},pickerContainer:{position:"absolute",bottom:"100px",width:"400px",height:"350px",backgroundColor:"#2f3136",borderRadius:"8px",boxShadow:"0 5px 15px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",padding:"10px",pointerEvents:"auto"},searchInput:{width:"calc(100% - 20px)",padding:"10px",marginBottom:"10px",borderRadius:"4px",border:"1px solid #5865f2",backgroundColor:"#444",color:"white",outline:"none",fontSize:"1em"},gifGrid:{flexGrow:1,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",paddingRight:"5px"},gifWrapper:{width:"100%",paddingTop:"75%",position:"relative",borderRadius:"4px",overflow:"hidden",cursor:"pointer",backgroundColor:"#3a3d43",transition:"transform 0.1s"},gifImage:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"},loadingText:{color:"#b9bbbe",gridColumn:"1 / -1",textAlign:"center",marginTop:"50px"},errorText:{color:"#f04747",gridColumn:"1 / -1",textAlign:"center",marginTop:"50px",fontWeight:"bold"},noResultsText:{color:"#b9bbbe",gridColumn:"1 / -1",textAlign:"center",marginTop:"50px"}},O=G.memo(T);export{O as default};
