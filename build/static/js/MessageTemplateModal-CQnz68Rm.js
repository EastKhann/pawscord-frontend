import{r as l,n as e}from"./react-core-Cj7FUMmY.js";import{al as S,a as v,as as w,ad as F,g as T}from"./icons-vendor-Mc8int3h.js";import{h as B}from"./index-J7Wast1m.js";import"./editor-vendor-D9c4a6XZ.js";import"./media-vendor-By68PLJG.js";import"./router-vendor-QeioVw-9.js";import"./state-vendor-DGcbxrkI.js";import"./crypto-vendor-DK-7ILyQ.js";const Z=({onClose:y,onSelect:u,fetchWithAuth:a,apiBaseUrl:r,isAdmin:g})=>{const[d,c]=l.useState([]),[b,p]=l.useState(!0),[h,i]=l.useState(!1),[o,s]=l.useState({name:"",content:"",is_global:!1});l.useEffect(()=>{x()},[]);const x=async()=>{p(!0);try{const t=await a(`${r}/templates/`);if(t.ok){const n=await t.json();c(n||[])}}catch{}p(!1)},m=async()=>{if(!(!o.name||!o.content))try{(await a(`${r}/templates/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok&&(s({name:"",content:"",is_global:!1}),i(!1),x())}catch{}},f=async(t,n)=>{if(n.stopPropagation(),!!await B("Bu şablonu silmek istediğine emin misin?"))try{(await a(`${r}/templates/${t}/`,{method:"DELETE"})).ok&&c(k=>k.filter(C=>C.id!==t))}catch{}};return e.jsx("div",{style:D,children:e.jsxs("div",{style:R,children:[e.jsxs("div",{style:z,children:[e.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(S,{})," Hazır Şablonlar"]}),e.jsx("button",{onClick:y,style:E,children:e.jsx(v,{})})]}),e.jsx("div",{style:A,children:h?e.jsxs("div",{style:N,children:[e.jsx("input",{placeholder:"Şablon Adı",value:o.name,onChange:t=>s({...o,name:t.target.value}),style:P}),e.jsx("textarea",{placeholder:"Şablon İçeriği...",value:o.content,onChange:t=>s({...o,content:t.target.value}),style:Y}),g&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"12px"},children:[e.jsx("input",{type:"checkbox",checked:o.is_global,onChange:t=>s({...o,is_global:t.target.checked})}),"Herkese Açık (Global)"]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsxs("button",{onClick:m,style:G,children:[e.jsx(w,{})," Kaydet"]}),e.jsx("button",{onClick:()=>i(!1),style:L,children:"İptal"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>i(!0),style:I,children:[e.jsx(F,{})," Yeni Şablon Oluştur"]}),e.jsx("div",{style:H,children:b?e.jsx("p",{children:"Yükleniyor..."}):d.length===0?e.jsx("p",{style:{opacity:.5},children:"Henüz şablon yok."}):d.map(t=>e.jsxs("div",{style:_,onClick:()=>u(t.content),children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t.name}),e.jsx("div",{style:{fontSize:"12px",opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"},children:t.content})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.is_global&&e.jsx("span",{style:O,children:"Global"}),e.jsx("button",{onClick:n=>f(t.id,n),style:$,children:e.jsx(T,{})})]})]},t.id))})]})})]})})},D={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(5px)"},R={backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 15px rgba(0,0,0,0.5)",color:"white",display:"flex",flexDirection:"column",maxHeight:"80vh"},z={padding:"16px",backgroundColor:"#2B2D31",borderBottom:"1px solid #1F2023",display:"flex",justifyContent:"space-between",alignItems:"center"},E={background:"none",border:"none",color:"#B5BAC1",cursor:"pointer",fontSize:"16px"},A={padding:"16px",overflowY:"auto"},I={width:"100%",padding:"10px",backgroundColor:"#5865F2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px",marginBottom:"15px"},H={display:"flex",flexDirection:"column",gap:"8px"},_={backgroundColor:"#2B2D31",padding:"10px",borderRadius:"4px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"0.2s"},O={fontSize:"10px",backgroundColor:"#FAA61A",color:"black",padding:"2px 6px",borderRadius:"10px",fontWeight:"bold"},$={background:"none",border:"none",color:"#DA373C",cursor:"pointer"},N={display:"flex",flexDirection:"column",gap:"10px"},P={padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#1E1F22",color:"white"},Y={padding:"8px",borderRadius:"4px",border:"none",backgroundColor:"#1E1F22",color:"white",minHeight:"100px",resize:"vertical"},G={flex:1,padding:"8px",backgroundColor:"#23A559",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},L={flex:1,padding:"8px",backgroundColor:"#DA373C",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"};export{Z as default};
