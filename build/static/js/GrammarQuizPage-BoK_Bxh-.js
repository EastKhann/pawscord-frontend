var H=Object.defineProperty;var r=(t,l)=>H(t,"name",{value:l,configurable:!0});import{r as s,j as e,a as Y}from"./react-core-Djgtqrmb.js";import{_ as S}from"./media-vendor-CxFPycob.js";import{A as J,t as X}from"./index-D_luy7FO.js";import{b as Z,L as G}from"./router-vendor-gmJ9Mn-1.js";import{A as ee,P as te,I as oe,S as P,w as ne,x as re}from"./icons-vendor-BW7dxHkX.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const W=[{id:"A1",name:"A1 - BaÅŸlangÄ±Ã§",color:"#43b581",icon:"ğŸŒ±"},{id:"A2",name:"A2 - Temel",color:"#faa61a",icon:"ğŸš€"},{id:"B1",name:"B1 - Orta",color:"#f04747",icon:"ğŸ”¥"},{id:"B2",name:"B2 - Orta Ãœst",color:"#9b59b6",icon:"ğŸ’"},{id:"C1",name:"C1 - Ä°leri",color:"#e91e63",icon:"ğŸ‘‘"},{id:"C2",name:"C2 - Uzman",color:"#2f3136",icon:"ğŸ‰"}],V={A1:r(()=>S(()=>import("./a1Questions-BW5d6s_S.js"),[]).then(t=>t.a1Questions),"A1"),A2:r(()=>S(()=>import("./a2Questions-b_8nWKmp.js"),[]).then(t=>t.a2Questions),"A2"),B1:r(()=>S(()=>import("./b1Questions-CtKR_a7B.js"),[]).then(t=>t.b1Questions),"B1"),B2:r(()=>S(()=>import("./b2Questions-B4Qll-D7.js"),[]).then(t=>t.b2Questions),"B2"),C1:r(()=>S(()=>import("./c1Questions-BsKCpNNW.js"),[]).then(t=>t.c1Questions),"C1"),C2:r(()=>S(()=>import("./c2Questions-CoUfEAyF.js"),[]).then(t=>t.c2Questions),"C2")},L={};async function q(t){if(L[t])return L[t];const l=V[t];if(!l)throw new Error(`Unknown level: ${t}`);const a=await l();return L[t]=a,a}r(q,"loadQuestionsByLevel");async function ie(){const t=Object.keys(V);return(await Promise.all(t.map(a=>q(a)))).flat()}r(ie,"loadAllQuestions");const Q=J,se=r(()=>{const t=Z(),[l,a]=s.useState("level-select"),[u,x]=s.useState(null),[h,f]=s.useState(0),[b,n]=s.useState(""),[d,y]=s.useState(""),[j,m]=s.useState(!1),[w,c]=s.useState(null),[v,p]=s.useState(0),[_,R]=s.useState([]),[z,E]=s.useState([]),[F,K]=s.useState(!0),M=r(()=>localStorage.getItem("access_token"),"getToken"),T=s.useCallback(async(i,g={})=>{const B=M();if(!B)return null;const I=g.headers||{};I.Authorization=`Bearer ${B}`,I["Content-Type"]="application/json";try{const A=await fetch(i,{...g,headers:I});return A.status===401?(t("/"),null):A}catch{return null}},[t]);s.useEffect(()=>{r(async()=>{const g=await T(`${Q}/eng-learn/grammar/known/`);if(g&&g.ok){const B=await g.json();R(B||[])}K(!1)},"loadKnownQuestions")()},[T]),s.useEffect(()=>{if(!u){E([]);return}let i=!1;return q(u).then(g=>{i||E(g||[])}),()=>{i=!0}},[u]);const D=s.useMemo(()=>!u||!z.length?[]:z.filter(i=>!_.includes(i.id)),[u,z,_]),k=D[h],C=D.length,$=C>0?(h+1)/C*100:0,N=r(i=>{x(i),f(0),p(0),m(!1),c(null),n(""),y(""),a("quiz")},"startQuiz"),U=r(()=>{let i="";k.type==="choice"?i=b:i=d.trim();const g=i.toLowerCase()===k.answer.toLowerCase();c(g),m(!0),g&&p(B=>B+1)},"handleCheck"),O=r(()=>{h+1<C?(f(i=>i+1),m(!1),c(null),n(""),y("")):a("result")},"handleNext");return{view:l,isLoading:F,score:v,totalQuestions:C,progress:$,currentQuestion:k,currentQuestionIndex:h,selectedOption:b,setSelectedOption:n,inputText:d,setInputText:y,isAnswered:j,isCorrect:w,knownQuestions:_,startQuiz:N,handleCheck:U,handleNext:O,handleMarkKnown:r(async()=>{if(k)try{await T(`${Q}/eng-learn/grammar/mark-known/`,{method:"POST",body:JSON.stringify({question_id:k.id})}),R(i=>[...i,k.id]),O()}catch{}},"handleMarkKnown"),resetQuiz:r(()=>{a("level-select"),x(null)},"resetQuiz")}},"useGrammarQuiz"),o={scrollWrapper:{width:"100%",height:"100dvh",overflowY:"auto",backgroundColor:"var(--background-primary)"},container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",minHeight:"100%",color:"var(--text-primary)",padding:"20px",paddingBottom:"50px",boxSizing:"border-box",fontFamily:"'Poppins', sans-serif"},headerArea:{width:"100%",maxWidth:"800px",marginBottom:"30px",textAlign:"center",position:"relative"},backLink:{display:"inline-flex",alignItems:"center",gap:"8px",textDecoration:"none",color:"var(--text-secondary)",fontWeight:"600",fontSize:"0.9em",marginBottom:"15px",alignSelf:"flex-start"},mainTitle:{fontSize:"clamp(1.8em, 5vw, 2.5em)",marginBottom:"10px",color:"#fff"},subTitle:{fontSize:"1em",color:"var(--text-muted)",textAlign:"center"},columnsWrapper:{display:"flex",flexWrap:"wrap",gap:"20px",width:"100%",maxWidth:"1000px",justifyContent:"center",alignItems:"flex-start"},column:{flex:"1 1 280px",display:"flex",flexDirection:"column",gap:"20px"},levelCard:{backgroundColor:"#2b2d31",padding:"25px",borderRadius:"16px",border:"2px solid transparent",cursor:"pointer",display:"flex",alignItems:"center",boxShadow:"0 4px 0 rgba(0,0,0,0.2)",transition:"transform 0.1s, border-color 0.2s",color:"#dbdee1",textAlign:"left",gap:"15px"},levelIcon:{fontSize:"2.5em"},levelName:{fontSize:"1.2em",fontWeight:"700",color:"white"},levelCount:{fontSize:"0.9em",color:"#949ba4"},quizBox:{width:"100%",maxWidth:"700px",backgroundColor:"#2b2d31",padding:"40px",borderRadius:"24px",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",marginTop:"20px"},questionText:{fontSize:"1.5em",textAlign:"center",lineHeight:"1.6",color:"white",fontWeight:"600"},optionsGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginTop:"30px"},optionBtn:{padding:"20px",fontSize:"1.1em",fontWeight:"600",borderRadius:"12px",border:"2px solid #404249",backgroundColor:"#313338",color:"#dbdee1",cursor:"pointer",transition:"all 0.1s",boxShadow:"0 4px 0 #1e1f22"},selectedBtn:{borderColor:"#5865f2",backgroundColor:"rgba(88, 101, 242, 0.1)",color:"#5865f2"},correctBtn:{borderColor:"#23a559",backgroundColor:"#23a559",color:"white",boxShadow:"0 4px 0 #187d41"},wrongBtn:{borderColor:"#da373c",backgroundColor:"#da373c",color:"white",boxShadow:"0 4px 0 #a1282c"},footer:{marginTop:"30px",display:"flex",justifyContent:"space-between",gap:"10px"},checkBtn:{padding:"15px 30px",borderRadius:"12px",border:"none",backgroundColor:"#5865f2",color:"white",fontSize:"1em",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 0 #4752c4",width:"100%"},knownBtn:{padding:"15px",borderRadius:"12px",border:"2px solid #404249",backgroundColor:"transparent",color:"#949ba4",fontWeight:"bold",cursor:"pointer"},topBar:{width:"100%",maxWidth:"600px",display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px"},smallBackBtn:{background:"none",border:"none",color:"var(--text-muted)",fontSize:"1em",cursor:"pointer",fontWeight:"bold"},progressBarBg:{flex:1,height:"10px",backgroundColor:"var(--background-tertiary)",borderRadius:"5px",overflow:"hidden"},progressBarFill:{height:"100%",backgroundColor:"#5865f2",borderRadius:"5px",transition:"width 0.5s ease"},questionSection:{marginBottom:"20px",minHeight:"80px",display:"flex",alignItems:"center",justifyContent:"center"},blankSpace:{display:"inline-block",borderBottom:"2px solid",padding:"0 5px",minWidth:"40px",textAlign:"center",margin:"0 4px",color:"var(--text-link)",fontWeight:"bold"},interactionArea:{marginBottom:"20px"},textInput:{width:"100%",padding:"15px",fontSize:"1.1em",borderRadius:"10px",border:"2px solid",backgroundColor:"var(--background-primary)",color:"var(--text-primary)",outline:"none",boxSizing:"border-box"},actionButtonGroup:{display:"flex",gap:"10px",flexWrap:"wrap"},feedbackBox:{display:"flex",flexDirection:"column",gap:"10px",padding:"20px",borderRadius:"12px",animation:"slideUp 0.3s ease",textAlign:"left",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},explanationContainer:{backgroundColor:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"8px",marginTop:"5px",marginBottom:"15px",border:"1px solid rgba(255,255,255,0.05)"},expTitle:{color:"#fff",fontWeight:"bold",fontSize:"1.1em",marginBottom:"5px"},expTranslation:{color:"#949ba4",fontSize:"0.95em",marginBottom:"10px"},separator:{height:"1px",backgroundColor:"rgba(255,255,255,0.1)",margin:"10px 0"},expSection:{fontSize:"0.95em",color:"#dbdee1",lineHeight:"1.5",marginBottom:"8px"},exampleItem:{fontSize:"0.9em",color:"#b9bbbe",paddingLeft:"10px",borderLeft:"2px solid #5865f2",marginBottom:"4px",fontStyle:"italic"},nextBtnCorrect:{padding:"12px",borderRadius:"8px",border:"none",backgroundColor:"#43b581",color:"white",fontWeight:"bold",cursor:"pointer",width:"100%",fontSize:"1em"},nextBtnWrong:{padding:"12px",borderRadius:"8px",border:"none",backgroundColor:"#f04747",color:"white",fontWeight:"bold",cursor:"pointer",width:"100%",fontSize:"1em"},feedbackKnownBtn:{background:"transparent",border:"none",color:"#949ba4",fontSize:"0.9em",cursor:"pointer",padding:"10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"color 0.2s",opacity:.8},resultCard:{backgroundColor:"var(--background-secondary)",padding:"40px 20px",borderRadius:"20px",display:"flex",flexDirection:"column",alignItems:"center",boxShadow:"0 10px 25px rgba(0,0,0,0.3)",maxWidth:"400px",width:"100%",margin:"auto"},resultTitle:{fontSize:"1.8em",color:"#fff",margin:"10px 0"},resultScore:{fontSize:"1.4em",color:"#7289da",fontWeight:"bold",marginBottom:"20px"},resultMessage:{fontSize:"1.1em",color:"var(--text-muted)",marginBottom:"30px"},resultBtnGroup:{width:"100%",display:"flex",flexDirection:"column",gap:"10px"},primaryBtn:{width:"100%",padding:"15px",borderRadius:"10px",border:"none",backgroundColor:"#5865f2",color:"white",fontWeight:"bold",fontSize:"1em",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},secondaryBtn:{width:"100%",padding:"15px",borderRadius:"10px",border:"2px solid var(--background-tertiary)",backgroundColor:"transparent",color:"var(--text-secondary)",fontWeight:"bold",textAlign:"center",textDecoration:"none",boxSizing:"border-box",display:"block"}},le=r(({knownQuestions:t,startQuiz:l})=>{const[a,u]=s.useState([]);s.useEffect(()=>{ie().then(n=>u(n))},[]);const x=W.filter(n=>n.id.startsWith("A")),h=W.filter(n=>n.id.startsWith("B")),f=W.filter(n=>n.id.startsWith("C")),b=r(n=>{const d=a.filter(m=>m.level===n.id).length,y=a.filter(m=>m.level===n.id&&t.includes(m.id)).length,j=d-y;return e.jsxs("button",{onClick:r(()=>j>0?l(n.id):X.success("Tebrikler! Bu seviyedeki tÃ¼m sorularÄ± tamamladÄ±n."),"onClick"),style:{...o.levelCard,borderTop:`5px solid ${n.color}`,opacity:j===0?.6:1},children:[e.jsx("div",{style:o.levelIcon,children:n.icon}),e.jsx("div",{style:o.levelName,children:n.name}),e.jsx("div",{style:o.levelCount,children:j===0?"TamamlandÄ±! ğŸ‰":`${y} / ${d} TamamlandÄ±`})]},n.id)},"renderLevelCard");return e.jsx("div",{style:o.scrollWrapper,children:e.jsxs("div",{style:o.container,children:[e.jsxs("div",{style:o.headerArea,children:[e.jsxs(G,{to:"/eng-learn",style:o.backLink,children:[e.jsx(ee,{})," Merkez"]}),e.jsx("h1",{style:o.mainTitle,children:"Seviyeni SeÃ§"}),e.jsx("p",{style:o.subTitle,children:"Kendini test etmek iÃ§in bir zorluk seviyesi seÃ§."})]}),e.jsxs("div",{style:o.columnsWrapper,children:[e.jsx("div",{style:o.column,children:x.map(n=>b(n))}),e.jsx("div",{style:o.column,children:h.map(n=>b(n))}),e.jsx("div",{style:o.column,children:f.map(n=>b(n))})]})]})})},"LevelSelect"),ae=r(({score:t,totalQuestions:l,resetQuiz:a})=>{const u=l>0?t/l*100:100;let x="Gayet iyi!";return u===100?x="MÃ¼kemmel! ğŸ†":u<50&&(x="Biraz daha Ã§alÄ±ÅŸmalÄ±sÄ±n. ğŸ’ª"),e.jsx("div",{style:o.scrollWrapper,children:e.jsx("div",{style:o.container,children:e.jsxs("div",{style:o.resultCard,children:[e.jsx(te,{size:60,color:"#faa61a",style:{marginBottom:"20px"}}),e.jsx("h2",{style:o.resultTitle,children:"Oturum TamamlandÄ±!"}),e.jsxs("p",{style:o.resultScore,children:["Skorun: ",t," / ",l]}),e.jsx("p",{style:o.resultMessage,children:x}),e.jsxs("div",{style:o.resultBtnGroup,children:[e.jsxs("button",{onClick:a,style:o.primaryBtn,children:[e.jsx(oe,{style:{marginRight:"8px"}})," MenÃ¼ye DÃ¶n"]}),e.jsx(G,{to:"/eng-learn",style:o.secondaryBtn,children:"Merkeze DÃ¶n"})]})]})})})},"QuizResult"),de=r(({currentQuestion:t,currentQuestionIndex:l,totalQuestions:a,progress:u,selectedOption:x,setSelectedOption:h,inputText:f,setInputText:b,isAnswered:n,isCorrect:d,handleCheck:y,handleNext:j,handleMarkKnown:m,resetQuiz:w})=>t?e.jsx("div",{style:o.scrollWrapper,children:e.jsxs("div",{style:o.container,children:[e.jsxs("div",{style:o.topBar,children:[e.jsxs("button",{onClick:w,style:o.smallBackBtn,children:["âœ•"," ","Ã‡Ä±k"]}),e.jsx("div",{style:o.progressBarBg,children:e.jsx("div",{style:{...o.progressBarFill,width:`${u}%`}})})]}),e.jsxs("div",{style:o.quizBox,children:[e.jsx("div",{style:o.questionSection,children:e.jsx("h2",{style:o.questionText,children:t.question.split("_____").map((c,v,p)=>e.jsxs(Y.Fragment,{children:[c,v<p.length-1&&e.jsx("span",{style:{...o.blankSpace,borderColor:n?d?"#43b581":"#f04747":"#7289da"},children:n?(t.type==="choice"?x:f)||"___":"_____"})]},v))})}),e.jsxs("div",{style:o.interactionArea,children:[t.type==="choice"&&e.jsx("div",{style:o.optionsGrid,children:t.options.map((c,v)=>{let p=o.optionBtn;return n?c===t.answer?p={...p,...o.correctBtn}:c===x?p={...p,...o.wrongBtn}:p={...p,opacity:.5}:x===c&&(p={...p,...o.selectedBtn}),e.jsx("button",{onClick:r(()=>!n&&h(c),"onClick"),style:p,disabled:n,children:c},v)})}),t.type==="input"&&e.jsx("input",{type:"text",value:f,onChange:r(c=>b(c.target.value),"onChange"),placeholder:"CevabÄ± buraya yazÄ±n...",style:{...o.textInput,borderColor:n?d?"#43b581":"#f04747":"#7289da"},disabled:n})]}),e.jsx("div",{style:o.footer,children:n?e.jsxs("div",{style:{...o.feedbackBox,borderLeft:d?"5px solid #43b581":"5px solid #f04747",backgroundColor:d?"rgba(67, 181, 129, 0.1)":"rgba(240, 71, 71, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"},children:[d?e.jsx(ne,{size:28,color:"#43b581"}):e.jsx(re,{size:28,color:"#f04747"}),e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:"1.2em",color:d?"#43b581":"#f04747",display:"block"},children:d?"DoÄŸru Cevap!":"YanlÄ±ÅŸ Cevap"}),!d&&e.jsxs("span",{style:{color:"#dbdee1",fontSize:"0.9em"},children:["DoÄŸrusu: ",e.jsx("strong",{style:{color:"#43b581"},children:t.answer})]})]})]}),t.explanation&&e.jsxs("div",{style:o.explanationContainer,children:[t.explanation.title&&e.jsxs("div",{style:o.expTitle,children:["ğŸ“–"," ",t.explanation.title]}),t.explanation.translation&&e.jsx("div",{style:o.expTranslation,children:e.jsxs("em",{children:['"',t.explanation.translation,'"']})}),e.jsx("div",{style:o.separator}),t.explanation.rule&&e.jsxs("div",{style:o.expSection,children:[e.jsx("strong",{style:{color:"#f0b232"},children:"Kural:"})," ",t.explanation.rule]}),t.explanation.tips&&e.jsxs("div",{style:o.expSection,children:[e.jsxs("strong",{style:{color:"#00a8fc"},children:["Ä°","pucu:"]})," ",t.explanation.tips]}),t.explanation.examples&&e.jsxs("div",{style:{...o.expSection,marginTop:"10px"},children:[e.jsxs("strong",{style:{color:"#dbdee1",display:"block",marginBottom:3},children:["Ã–","rnekler:"]}),t.explanation.examples.map((c,v)=>e.jsxs("div",{style:o.exampleItem,children:["â€¢"," ",c]},v))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsx("button",{onClick:j,style:d?o.nextBtnCorrect:o.nextBtnWrong,children:l+1===a?"BÄ°TÄ°R VE SONUÃ‡LARI GÃ–R":"DEVAM ET"}),e.jsxs("button",{onClick:m,style:o.feedbackKnownBtn,children:[e.jsx(P,{})," Bunu aslÄ±nda biliyordum (Ã–ÄŸrenildi Say)"]})]})]}):e.jsxs("div",{style:o.actionButtonGroup,children:[e.jsxs("button",{onClick:m,style:o.knownBtn,title:"Bunu biliyorum, bir daha sorma",children:[e.jsx(P,{})," Biliyorum (GeÃ§)"]}),e.jsx("button",{onClick:y,style:o.checkBtn,disabled:t.type==="choice"?!x:!f,children:"KONTROL ET"})]})})]})]})}):e.jsx("div",{style:o.container,children:e.jsxs("div",{style:o.resultCard,children:[e.jsx("h2",{children:"Harika! ğŸ‰"}),e.jsx("p",{children:"Bu seviyedeki tÃ¼m sorularÄ± bitirdin."}),e.jsx("button",{onClick:w,style:o.primaryBtn,children:"Geri DÃ¶n"})]})}),"QuizView"),je=r(()=>{const t=se();return t.isLoading?e.jsx("div",{style:o.container,children:"YÃ¼kleniyor..."}):t.view==="level-select"?e.jsx(le,{knownQuestions:t.knownQuestions,startQuiz:t.startQuiz}):t.view==="result"?e.jsx(ae,{score:t.score,totalQuestions:t.totalQuestions,resetQuiz:t.resetQuiz}):e.jsx(de,{...t})},"GrammarQuizPage");export{je as default};
