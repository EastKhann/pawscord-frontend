var L=Object.defineProperty;var t=(a,i)=>L(a,"name",{value:i,configurable:!0});import{r,j as e}from"./react-core-Djgtqrmb.js";import{z as G,b4 as D,an as W,a as _,bv as M,f as E}from"./icons-vendor-BW7dxHkX.js";import{t as c,e as $}from"./index-CjRzheBN.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const q=t((a,i)=>{const[u,y]=r.useState([]),[l,o]=r.useState(!0),[w,b]=r.useState(!1),[h,j]=r.useState(""),[p,v]=r.useState(""),[m,S]=r.useState(""),[f,C]=r.useState(""),[k,s]=r.useState(""),[A,z]=r.useState(!1),[T,I]=r.useState("daily"),F=t(async()=>{try{const x=await(await a(`${i}/announcements/scheduled/`)).json();y(x.announcements||[])}catch{c.error("Failed to load announcements")}finally{o(!1)}},"loadScheduledAnnouncements");r.useEffect(()=>{F()},[]);const B=t(()=>{j(""),v(""),S(""),C(""),s(""),z(!1),I("daily")},"resetForm");return{announcements:u,loading:l,showCreateForm:w,setShowCreateForm:b,title:h,setTitle:j,message:p,setMessage:v,scheduledDate:m,setScheduledDate:S,scheduledTime:f,setScheduledTime:C,channelId:k,setChannelId:s,recurring:A,setRecurring:z,recurringType:T,setRecurringType:I,handleScheduleAnnouncement:t(async d=>{if(d.preventDefault(),!h||!p||!m||!f){c.error("Please fill in all required fields");return}const x=`${m}T${f}:00`;try{const g=await(await a(`${i}/announcements/schedule/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:h,message:p,scheduled_at:x,channel_id:k||null,recurring:A,recurring_type:A?T:null})})).json();g.success?(c.success("Announcement scheduled successfully!"),F(),B(),b(!1)):c.error(g.error||"Failed to schedule announcement")}catch{c.error("Failed to schedule announcement")}},"handleScheduleAnnouncement"),deleteAnnouncement:t(async d=>{if(await $("Delete this scheduled announcement?"))try{await a(`${i}/announcements/${d}/delete/`,{method:"DELETE"}),c.success("Announcement deleted"),F()}catch{c.error("Failed to delete announcement")}},"deleteAnnouncement"),resetForm:B,getStatusColor:t(d=>{const x=new Date,g=(new Date(d)-x)/(1e3*60*60);return g<0?"#f04747":g<24?"#faa61a":"#43b581"},"getStatusColor")}},"useScheduledAnnouncements"),n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"85vh",display:"flex",flexDirection:"column",color:"#fff"},header:{padding:"20px",borderBottom:"1px solid #444",display:"flex",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"12px"},addBtn:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"6px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},closeBtn:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"8px"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",padding:"40px",color:"#99aab5"},empty:{textAlign:"center",padding:"60px 20px",color:"#dcddde"},createForm:{maxWidth:"600px",margin:"0 auto"},formTitle:{fontSize:"18px",fontWeight:"600",marginBottom:"24px"},formGroup:{marginBottom:"20px"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#dcddde"},input:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"6px",color:"#fff",fontSize:"14px",boxSizing:"border-box"},select:{width:"100%",padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"6px",color:"#fff",fontSize:"14px"},checkboxGroup:{marginBottom:"20px"},checkboxLabel:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"14px"},checkbox:{width:"18px",height:"18px",cursor:"pointer"},formActions:{display:"flex",gap:"12px",marginTop:"24px"},submitBtn:{flex:1,padding:"12px",backgroundColor:"#5865f2",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},cancelBtn:{padding:"12px 24px",backgroundColor:"#4e5058",border:"none",borderRadius:"6px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:"pointer"},announcementsList:{display:"flex",flexDirection:"column",gap:"12px"},announcementCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",display:"flex",gap:"16px",position:"relative",overflow:"hidden"},statusIndicator:{position:"absolute",left:0,top:0,bottom:0,width:"4px"},announcementContent:{flex:1,paddingLeft:"12px"},announcementTitle:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},announcementMessage:{fontSize:"14px",color:"#dcddde",marginBottom:"12px",lineHeight:"1.6"},announcementMeta:{fontSize:"12px",color:"#99aab5",display:"flex",alignItems:"center",flexWrap:"wrap"},announcementActions:{display:"flex",alignItems:"flex-start",gap:"8px"},deleteIconBtn:{padding:"8px",backgroundColor:"#f04747",border:"none",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"14px"}},P=t(({title:a,setTitle:i,message:u,setMessage:y,scheduledDate:l,setScheduledDate:o,scheduledTime:w,setScheduledTime:b,channelId:h,setChannelId:j,recurring:p,setRecurring:v,recurringType:m,setRecurringType:S,handleScheduleAnnouncement:f,setShowCreateForm:C,resetForm:k})=>e.jsxs("div",{style:n.createForm,children:[e.jsx("h3",{style:n.formTitle,children:"Schedule New Announcement"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{style:n.formGroup,children:[e.jsx("label",{style:n.label,children:"Title *"}),e.jsx("input",{type:"text",value:a,onChange:t(s=>i(s.target.value),"onChange"),placeholder:"Announcement title...",style:n.input,required:!0})]}),e.jsxs("div",{style:n.formGroup,children:[e.jsx("label",{style:n.label,children:"Message *"}),e.jsx("textarea",{value:u,onChange:t(s=>y(s.target.value),"onChange"),placeholder:"Announcement message...",style:{...n.input,minHeight:"120px"},required:!0})]}),e.jsxs("div",{style:n.formRow,children:[e.jsxs("div",{style:n.formGroup,children:[e.jsx("label",{style:n.label,children:"Date *"}),e.jsx("input",{type:"date",value:l,onChange:t(s=>o(s.target.value),"onChange"),style:n.input,required:!0})]}),e.jsxs("div",{style:n.formGroup,children:[e.jsx("label",{style:n.label,children:"Time *"}),e.jsx("input",{type:"time",value:w,onChange:t(s=>b(s.target.value),"onChange"),style:n.input,required:!0})]})]}),e.jsxs("div",{style:n.formGroup,children:[e.jsx("label",{style:n.label,children:"Channel ID (Optional)"}),e.jsx("input",{type:"text",value:h,onChange:t(s=>j(s.target.value),"onChange"),placeholder:"Leave empty for all channels",style:n.input})]}),e.jsx("div",{style:n.checkboxGroup,children:e.jsxs("label",{style:n.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:p,onChange:t(s=>v(s.target.checked),"onChange"),style:n.checkbox}),e.jsx("span",{children:"Recurring Announcement"})]})}),p&&e.jsxs("div",{style:n.formGroup,children:[e.jsx("label",{style:n.label,children:"Repeat"}),e.jsxs("select",{value:m,onChange:t(s=>S(s.target.value),"onChange"),style:n.select,children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{style:n.formActions,children:[e.jsxs("button",{type:"submit",style:n.submitBtn,children:[e.jsx(G,{})," Schedule Announcement"]}),e.jsx("button",{type:"button",onClick:t(()=>{C(!1),k()},"onClick"),style:n.cancelBtn,children:"Cancel"})]})]})]}),"AnnouncementForm"),ne=t(({fetchWithAuth:a,apiBaseUrl:i,onClose:u,serverId:y})=>{const l=q(a,i);return e.jsx("div",{style:n.overlay,onClick:u,children:e.jsxs("div",{style:n.modal,onClick:t(o=>o.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:n.header,children:[e.jsxs("div",{style:n.headerLeft,children:[e.jsx(D,{style:{fontSize:"24px",color:"#5865f2"}}),e.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Scheduled Announcements"})]}),e.jsxs("div",{style:n.headerRight,children:[!l.showCreateForm&&e.jsxs("button",{onClick:t(()=>l.setShowCreateForm(!0),"onClick"),style:n.addBtn,children:[e.jsx(W,{})," Schedule New"]}),e.jsx("button",{onClick:u,style:n.closeBtn,children:e.jsx(_,{})})]})]}),e.jsx("div",{style:n.content,children:l.showCreateForm?e.jsx(P,{...l}):l.loading?e.jsx("div",{style:n.loading,children:"Loading..."}):l.announcements.length===0?e.jsxs("div",{style:n.empty,children:[e.jsx(D,{style:{fontSize:"48px",color:"#99aab5",marginBottom:"16px"}}),e.jsx("p",{children:"No scheduled announcements"}),e.jsx("p",{style:{fontSize:"14px",color:"#99aab5"},children:"Schedule your first announcement to get started"})]}):e.jsx("div",{style:n.announcementsList,children:l.announcements.map(o=>e.jsxs("div",{style:n.announcementCard,children:[e.jsx("div",{style:{...n.statusIndicator,backgroundColor:l.getStatusColor(o.scheduled_at)}}),e.jsxs("div",{style:n.announcementContent,children:[e.jsx("h3",{style:n.announcementTitle,children:o.title}),e.jsx("p",{style:n.announcementMessage,children:o.message}),e.jsxs("div",{style:n.announcementMeta,children:[e.jsxs("span",{children:[e.jsx(M,{})," ",new Date(o.scheduled_at).toLocaleString()]}),o.recurring&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{margin:"0 8px"},children:"â€¢"}),e.jsxs("span",{children:["ðŸ”"," ",o.recurring_type]})]}),o.channel_id&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{margin:"0 8px"},children:"â€¢"}),e.jsxs("span",{children:["ðŸ“º"," Channel: ",o.channel_id]})]})]})]}),e.jsx("div",{style:n.announcementActions,children:e.jsx("button",{onClick:t(()=>l.deleteAnnouncement(o.id),"onClick"),style:n.deleteIconBtn,title:"Delete",children:e.jsx(E,{})})})]},o.id))})})]})})},"ScheduledAnnouncementsPanel");export{ne as default};
