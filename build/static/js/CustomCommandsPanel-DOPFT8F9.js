var T=Object.defineProperty;var a=(s,o)=>T(s,"name",{value:o,configurable:!0});import{r as x,j as e}from"./react-core-Djgtqrmb.js";import{y as c}from"./ui-vendor-IhB9Znpc.js";import{g as E,d as O}from"./index-D0nbcjO7.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./icons-vendor-BMXAt4pj.js";const z={name:"",description:"",response:"",trigger_type:"exact",enabled:!0,cooldown:0,permissions:"everyone",delete_trigger:!1,embed:!1,embed_color:"#5865f2"};function A(s){const[o,d]=x.useState([]),[j,n]=x.useState(!1),[f,b]=x.useState(null),[g,p]=x.useState(z),[k,N]=x.useState(!0),[y,C]=x.useState(null),m=E();x.useEffect(()=>{s&&($(),K())},[s]);const l=a(()=>localStorage.getItem("access_token"),"getToken"),u=a(()=>({Authorization:`Bearer ${l()}`}),"authHeaders"),_=a(()=>({...u(),"Content-Type":"application/json"}),"jsonHeaders"),$=a(async()=>{try{const t=await fetch(`${m}/commands/server/${s}/`,{headers:u()});if(t.ok){const r=await t.json();d(r.commands||[])}}catch{}finally{N(!1)}},"fetchCommands"),K=a(async()=>{try{const t=await fetch(`${m}/commands/server/${s}/stats/`,{headers:u()});t.ok&&C(await t.json())}catch{}},"fetchStats");return{commands:o,creating:j,setCreating:n,editingCommand:f,setEditingCommand:b,newCommand:g,setNewCommand:p,loading:k,stats:y,createCommand:a(async()=>{if(!g.name||!g.response){c.error("âŒ Komut adÄ± ve yanÄ±t zorunludur");return}try{const t=await fetch(`${m}/commands/create/`,{method:"POST",headers:_(),body:JSON.stringify({server_id:s,...g})});if(t.ok){const r=await t.json();d(i=>[...i,r.command]),p(z),n(!1),c.success("âœ… Komut oluÅŸturuldu"),K()}else c.error("âŒ Komut oluÅŸturulamadÄ±")}catch{c.error("âŒ BaÄŸlantÄ± hatasÄ±")}},"createCommand"),updateCommand:a(async(t,r)=>{try{const i=await fetch(`${m}/commands/${t}/update/`,{method:"POST",headers:_(),body:JSON.stringify(r)});if(i.ok){const h=await i.json();d(v=>v.map(S=>S.id===t?h.command:S)),b(null),c.success("âœ… Komut gÃ¼ncellendi")}else c.error("âŒ Komut gÃ¼ncellenemedi")}catch{c.error("âŒ BaÄŸlantÄ± hatasÄ±")}},"updateCommand"),deleteCommand:a(async t=>{if(await O("Bu komutu silmek istediÄŸinizden emin misiniz?"))try{(await fetch(`${m}/commands/${t}/delete/`,{method:"DELETE",headers:u()})).ok?(d(i=>i.filter(h=>h.id!==t)),c.success("âœ… Komut silindi"),K()):c.error("âŒ Komut silinemedi")}catch{c.error("âŒ BaÄŸlantÄ± hatasÄ±")}},"deleteCommand"),toggleCommand:a(async(t,r)=>{try{(await fetch(`${m}/commands/${t}/toggle/`,{method:"POST",headers:_(),body:JSON.stringify({enabled:r})})).ok&&(d(h=>h.map(v=>v.id===t?{...v,enabled:r}:v)),c.success(`âœ… Komut ${r?"etkinleÅŸtirildi":"devre dÄ±ÅŸÄ± bÄ±rakÄ±ldÄ±"}`))}catch{c.error("âŒ Ä°ÅŸlem baÅŸarÄ±sÄ±z")}},"toggleCommand"),exportCommands:a(async()=>{try{const t=await fetch(`${m}/commands/server/${s}/export/`,{headers:u()});if(t.ok){const r=await t.blob(),i=window.URL.createObjectURL(r),h=document.createElement("a");h.href=i,h.download=`commands_${s}.json`,h.click(),c.success("âœ… Komutlar dÄ±ÅŸa aktarÄ±ldÄ±")}}catch{c.error("âŒ DÄ±ÅŸa aktarma baÅŸarÄ±sÄ±z")}},"exportCommands"),importCommands:a(async t=>{const r=new FormData;r.append("file",t),r.append("server_id",s);try{(await fetch(`${m}/commands/import/`,{method:"POST",headers:u(),body:r})).ok?($(),c.success("âœ… Komutlar iÃ§e aktarÄ±ldÄ±")):c.error("âŒ Ä°Ã§e aktarma baÅŸarÄ±sÄ±z")}catch{c.error("âŒ BaÄŸlantÄ± hatasÄ±")}},"importCommands")}}a(A,"useCustomCommands");const B=a(({newCommand:s,setNewCommand:o,createCommand:d,onCancel:j})=>e.jsxs("div",{className:"command-form",children:[e.jsx("h3",{children:"Yeni Komut OluÅŸtur"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Komut AdÄ± *"}),e.jsx("input",{type:"text",placeholder:"!komut",value:s.name,onChange:a(n=>o({...s,name:n.target.value}),"onChange")})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"AÃ§Ä±klama"}),e.jsx("input",{type:"text",placeholder:"Komut aÃ§Ä±klamasÄ±",value:s.description,onChange:a(n=>o({...s,description:n.target.value}),"onChange")})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"YanÄ±t *"}),e.jsx("textarea",{placeholder:"Komut yanÄ±tÄ± (deÄŸiÅŸkenler: {user}, {server}, {channel})",value:s.response,onChange:a(n=>o({...s,response:n.target.value}),"onChange"),rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tetikleme Tipi"}),e.jsxs("select",{value:s.trigger_type,onChange:a(n=>o({...s,trigger_type:n.target.value}),"onChange"),children:[e.jsx("option",{value:"exact",children:"Tam EÅŸleÅŸme"}),e.jsx("option",{value:"contains",children:"Ä°Ã§erir"}),e.jsx("option",{value:"starts_with",children:"Ä°le BaÅŸlar"}),e.jsx("option",{value:"regex",children:"Regex"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ä°zinler"}),e.jsxs("select",{value:s.permissions,onChange:a(n=>o({...s,permissions:n.target.value}),"onChange"),children:[e.jsx("option",{value:"everyone",children:"Herkes"}),e.jsx("option",{value:"mods",children:"ModeratÃ¶rler"}),e.jsx("option",{value:"admins",children:"Adminler"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cooldown (saniye)"}),e.jsx("input",{type:"number",min:"0",max:"300",value:s.cooldown,onChange:a(n=>o({...s,cooldown:parseInt(n.target.value)}),"onChange")})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:s.delete_trigger,onChange:a(n=>o({...s,delete_trigger:n.target.checked}),"onChange")}),"Tetikleyici mesajÄ± sil"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:s.embed,onChange:a(n=>o({...s,embed:n.target.checked}),"onChange")}),"Embed olarak gÃ¶nder"]})}),s.embed&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Embed Rengi"}),e.jsx("input",{type:"color",value:s.embed_color,onChange:a(n=>o({...s,embed_color:n.target.value}),"onChange")})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:j,children:"Ä°ptal"}),e.jsx("button",{className:"submit-btn",onClick:d,children:"OluÅŸtur"})]})]}),"CommandForm"),W=a(({serverId:s,onClose:o})=>{const{commands:d,creating:j,setCreating:n,newCommand:f,setNewCommand:b,loading:g,stats:p,createCommand:k,deleteCommand:N,toggleCommand:y,exportCommands:C,importCommands:m}=A(s);return g?e.jsx("div",{className:"custom-commands-overlay",children:e.jsx("div",{className:"custom-commands-panel",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Komutlar yÃ¼kleniyor..."})]})})}):e.jsx("div",{className:"custom-commands-overlay",onClick:o,children:e.jsxs("div",{className:"custom-commands-panel",onClick:a(l=>l.stopPropagation(),"onClick"),children:[e.jsxs("div",{className:"commands-header",children:[e.jsx("h2",{children:"âš¡ Ã–zel Komutlar"}),e.jsx("button",{className:"close-btn",onClick:o,children:"Ã—"})]}),e.jsxs("div",{className:"commands-content",children:[p&&e.jsxs("div",{className:"stats-overview",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:p.total_commands||0}),e.jsx("span",{className:"stat-label",children:"Toplam Komut"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:p.enabled_commands||0}),e.jsx("span",{className:"stat-label",children:"Aktif"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-value",children:p.total_uses||0}),e.jsx("span",{className:"stat-label",children:"KullanÄ±m"})]})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"create-btn",onClick:a(()=>n(!0),"onClick"),children:"â• Yeni Komut"}),e.jsx("button",{className:"export-btn",onClick:C,children:"ğŸ“¤ DÄ±ÅŸa Aktar"}),e.jsxs("label",{className:"import-btn",children:["ğŸ“¥ Ä°Ã§e Aktar",e.jsx("input",{type:"file",accept:".json",onChange:a(l=>l.target.files[0]&&m(l.target.files[0]),"onChange"),style:{display:"none"}})]})]}),j&&e.jsx(B,{newCommand:f,setNewCommand:b,createCommand:k,onCancel:a(()=>n(!1),"onCancel")}),e.jsx("div",{className:"commands-list",children:d.length>0?d.map(l=>e.jsxs("div",{className:`command-card ${l.enabled?"":"disabled"}`,children:[e.jsxs("div",{className:"command-header",children:[e.jsxs("div",{className:"command-info",children:[e.jsx("h4",{children:l.name}),l.description&&e.jsx("p",{children:l.description})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l.enabled,onChange:a(u=>y(l.id,u.target.checked),"onChange")}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"command-response",children:[e.jsx("strong",{children:"YanÄ±t:"})," ",l.response]}),e.jsxs("div",{className:"command-meta",children:[e.jsxs("span",{className:"meta-item",children:["ğŸ¯ ",l.trigger_type]}),e.jsxs("span",{className:"meta-item",children:["ğŸ‘¥ ",l.permissions]}),l.cooldown>0&&e.jsxs("span",{className:"meta-item",children:["â±ï¸ ",l.cooldown,"s"]}),e.jsxs("span",{className:"meta-item",children:["ğŸ“Š ",l.use_count||0," kullanÄ±m"]})]}),e.jsxs("div",{className:"command-actions",children:[e.jsx("button",{className:"edit-btn",onClick:a(()=>{},"onClick"),children:"âœï¸"}),e.jsx("button",{className:"delete-btn",onClick:a(()=>N(l.id),"onClick"),children:"ğŸ—‘ï¸"})]})]},l.id)):!j&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"âš¡"}),e.jsx("h3",{children:"HenÃ¼z Ã¶zel komut yok"}),e.jsx("p",{children:"Sunucunuz iÃ§in Ã¶zel komutlar oluÅŸturun"})]})})]})]})})},"CustomCommandsPanel");export{W as default};
