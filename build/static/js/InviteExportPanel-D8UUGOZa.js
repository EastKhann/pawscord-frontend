import{r as a,n as e}from"./react-core-zXIKm1Jm.js";import{al as x,a as L}from"./icons-vendor-BBdoVeJd.js";import{t as p}from"./index-C6RxTn2S.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-ltdGXAv4.js";import"./crypto-vendor-D_AcF0lD.js";import"./state-vendor-8NbFPBhQ.js";const V=({fetchWithAuth:m,apiBaseUrl:y,onClose:f,serverId:h})=>{const[r,g]=a.useState([]),[v,u]=a.useState(!1),[d,b]=a.useState(!1),[c,j]=a.useState(!1);a.useEffect(()=>{k()},[d,c]);const k=async()=>{u(!0);try{const s=new URLSearchParams({include_expired:d,include_revoked:c}),l=await(await m(`${y}/servers/${h}/invites/?${s}`)).json();g(l.invites||[])}catch{p.error("Failed to load invites")}finally{u(!1)}},C=()=>{const s=[["Code","Creator","Uses","Max Uses","Created","Expires","Status"],...r.map(o=>[o.code,o.creator_username,o.uses,o.max_uses||"Unlimited",new Date(o.created_at).toLocaleString(),o.expires_at?new Date(o.expires_at).toLocaleString():"Never",o.revoked?"Revoked":o.is_expired?"Expired":"Active"])].map(o=>o.map(S=>`"${S}"`).join(",")).join(`
`),n=new Blob([s],{type:"text/csv"}),l=window.URL.createObjectURL(n),i=document.createElement("a");i.href=l,i.download=`server_invites_${Date.now()}.csv`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(l),document.body.removeChild(i),p.success("Invites exported")},w=()=>{const s=JSON.stringify(r,null,2),n=new Blob([s],{type:"application/json"}),l=window.URL.createObjectURL(n),i=document.createElement("a");i.href=l,i.download=`server_invites_${Date.now()}.json`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(l),document.body.removeChild(i),p.success("Invites exported")};return e.jsx("div",{style:t.overlay,children:e.jsxs("div",{style:t.modal,children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(x,{style:{marginRight:"10px",color:"#5865f2"}}),e.jsx("h2",{style:t.title,children:"Export Invites"})]}),e.jsx("button",{onClick:f,style:t.closeButton,children:e.jsx(L,{})})]}),e.jsxs("div",{style:t.toolbar,children:[e.jsxs("div",{style:t.filters,children:[e.jsxs("label",{style:t.checkbox,children:[e.jsx("input",{type:"checkbox",checked:d,onChange:s=>b(s.target.checked)}),e.jsx("span",{style:t.checkboxLabel,children:"Include expired"})]}),e.jsxs("label",{style:t.checkbox,children:[e.jsx("input",{type:"checkbox",checked:c,onChange:s=>j(s.target.checked)}),e.jsx("span",{style:t.checkboxLabel,children:"Include revoked"})]})]}),e.jsxs("div",{style:t.exportButtons,children:[e.jsxs("button",{onClick:C,style:t.exportButton,children:[e.jsx(x,{style:{marginRight:"6px"}}),"Export CSV"]}),e.jsxs("button",{onClick:w,style:{...t.exportButton,backgroundColor:"#5865f2"},children:[e.jsx(x,{style:{marginRight:"6px"}}),"Export JSON"]})]})]}),e.jsx("div",{style:t.content,children:v?e.jsx("div",{style:t.loading,children:"Loading invites..."}):r.length===0?e.jsx("div",{style:t.empty,children:"No invites found"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.summary,children:[e.jsxs("div",{style:t.summaryItem,children:[e.jsx("div",{style:t.summaryValue,children:r.length}),e.jsx("div",{style:t.summaryLabel,children:"Total Invites"})]}),e.jsxs("div",{style:t.summaryItem,children:[e.jsx("div",{style:t.summaryValue,children:r.filter(s=>!s.revoked&&!s.is_expired).length}),e.jsx("div",{style:t.summaryLabel,children:"Active"})]}),e.jsxs("div",{style:t.summaryItem,children:[e.jsx("div",{style:t.summaryValue,children:r.reduce((s,n)=>s+n.uses,0)}),e.jsx("div",{style:t.summaryLabel,children:"Total Uses"})]})]}),e.jsx("div",{style:t.invitesList,children:r.map((s,n)=>e.jsxs("div",{style:t.inviteCard,children:[e.jsx("div",{style:t.inviteCode,children:s.code}),e.jsxs("div",{style:t.inviteDetails,children:[e.jsxs("div",{style:t.inviteDetail,children:["Creator: ",e.jsx("span",{style:t.inviteValue,children:s.creator_username})]}),e.jsxs("div",{style:t.inviteDetail,children:["Uses: ",e.jsxs("span",{style:t.inviteValue,children:[s.uses,"/",s.max_uses||"âˆž"]})]}),e.jsxs("div",{style:t.inviteDetail,children:["Created: ",e.jsx("span",{style:t.inviteValue,children:new Date(s.created_at).toLocaleDateString()})]})]}),e.jsx("div",{style:t.inviteStatus,children:s.revoked?e.jsx("span",{style:{...t.statusBadge,backgroundColor:"#f04747"},children:"Revoked"}):s.is_expired?e.jsx("span",{style:{...t.statusBadge,backgroundColor:"#99aab5"},children:"Expired"}):e.jsx("span",{style:{...t.statusBadge,backgroundColor:"#43b581"},children:"Active"})})]},n))})]})})]})})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #2c2f33"},headerLeft:{display:"flex",alignItems:"center"},title:{margin:0,fontSize:"20px",color:"#ffffff"},closeButton:{background:"none",border:"none",color:"#99aab5",cursor:"pointer",fontSize:"20px",padding:"5px"},toolbar:{padding:"15px 20px",borderBottom:"1px solid #2c2f33",display:"flex",justifyContent:"space-between",alignItems:"center"},filters:{display:"flex",gap:"16px"},checkbox:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},checkboxLabel:{fontSize:"13px",color:"#dcddde"},exportButtons:{display:"flex",gap:"8px"},exportButton:{padding:"8px 16px",backgroundColor:"#43b581",border:"none",borderRadius:"4px",color:"#ffffff",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center"},content:{padding:"20px",overflowY:"auto",flex:1},loading:{textAlign:"center",color:"#99aab5",padding:"40px"},empty:{textAlign:"center",color:"#99aab5",padding:"40px"},summary:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},summaryItem:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"20px",textAlign:"center"},summaryValue:{fontSize:"32px",fontWeight:"700",color:"#5865f2",marginBottom:"8px"},summaryLabel:{fontSize:"13px",color:"#99aab5"},invitesList:{display:"flex",flexDirection:"column",gap:"10px"},inviteCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"16px",display:"flex",gap:"16px",alignItems:"center"},inviteCode:{fontSize:"16px",fontWeight:"600",color:"#ffffff",fontFamily:"monospace",minWidth:"120px"},inviteDetails:{flex:1,display:"flex",gap:"20px"},inviteDetail:{fontSize:"13px",color:"#99aab5"},inviteValue:{color:"#dcddde",fontWeight:"500"},inviteStatus:{minWidth:"80px",textAlign:"right"},statusBadge:{padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",color:"#ffffff"}};export{V as default};
