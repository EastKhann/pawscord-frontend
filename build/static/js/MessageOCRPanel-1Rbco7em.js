var v=Object.defineProperty;var n=(s,l)=>v(s,"name",{value:l,configurable:!0});import{r as d,j as e}from"./react-core-Djgtqrmb.js";import{aw as g,a as w,av as R,aV as B,a5 as O}from"./icons-vendor-BW7dxHkX.js";import{t as r}from"./index-B9TNnJpS.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const E=n(({fetchWithAuth:s,apiBaseUrl:l,messageId:i,onClose:p})=>{const[a,j]=d.useState(""),[b,f]=d.useState(!0),[m,y]=d.useState(!1);d.useEffect(()=>{u()},[i]);const u=n(async()=>{try{f(!0);const o=await s(`${l}/messages/${i}/ocr/`);if(o.ok){const c=await o.json();j(c.text||"")}}catch{}finally{f(!1)}},"loadOCRText"),h=n(async()=>{try{y(!0),(await s(`${l}/messages/${i}/ocr/request/`,{method:"POST"})).ok?(r.success("OCR işlemi başlatıldı"),setTimeout(u,3e3)):r.error("OCR işlemi başlatılamadı")}catch{r.error("Bir hata oluştu")}finally{y(!1)}},"requestOCR"),C=n(()=>{navigator.clipboard.writeText(a),r.success("Metin kopyalandı")},"copyText"),k=n(()=>{const o=new Blob([a],{type:"text/plain"}),c=URL.createObjectURL(o),x=document.createElement("a");x.href=c,x.download=`ocr_${i}.txt`,x.click(),URL.revokeObjectURL(c),r.success("Metin indirildi")},"downloadText");return e.jsx("div",{style:t.overlay,onClick:p,children:e.jsxs("div",{style:t.modal,onClick:n(o=>o.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(g,{style:{color:"#5865f2"}}),e.jsx("h2",{style:{margin:0},children:"OCR - Görüntüden Metin"})]}),e.jsx(w,{onClick:p,style:t.closeBtn})]}),e.jsx("div",{style:t.content,children:b?e.jsxs("div",{style:t.loading,children:[e.jsx(R,{style:{fontSize:"48px",color:"#888",marginBottom:"10px"}}),e.jsx("p",{children:"Yükleniyor..."})]}):a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.toolbar,children:[e.jsxs("button",{onClick:C,style:t.toolBtn,children:[e.jsx(B,{})," Kopyala"]}),e.jsxs("button",{onClick:k,style:t.toolBtn,children:[e.jsx(O,{})," İndir"]})]}),e.jsx("div",{style:t.textArea,children:e.jsx("pre",{style:t.textContent,children:a})})]}):e.jsxs("div",{style:t.empty,children:[e.jsx(g,{style:{fontSize:"64px",color:"#555",marginBottom:"15px"}}),e.jsx("p",{children:"Bu mesajda OCR metni yok"}),e.jsx("button",{onClick:h,disabled:m,style:t.requestBtn,children:m?"İşleniyor...":"OCR İşlemini Başlat"})]})})]})})},"MessageOCRPanel"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px",display:"flex",flexDirection:"column"},toolbar:{display:"flex",gap:"10px",marginBottom:"15px"},toolBtn:{backgroundColor:"#2c2f33",color:"#fff",border:"none",padding:"10px 15px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},textArea:{flex:1,backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",overflow:"auto"},textContent:{color:"#dcddde",fontSize:"14px",lineHeight:"1.6",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:"#888"},empty:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:"#888"},requestBtn:{marginTop:"20px",backgroundColor:"#5865f2",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"600"}};export{E as default};
