var m=Object.defineProperty;var i=(s,l)=>m(s,"name",{value:l,configurable:!0});import{r as d,j as t}from"./react-core-Djgtqrmb.js";import{a as j,a9 as k,ad as w}from"./icons-vendor-BMXAt4pj.js";import{t as a}from"./index-D09YXCFH.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-CbW2fAN9.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const O=i(({onClose:s,friendsList:l,fetchWithAuth:x,apiBaseUrl:b,onGroupCreated:h})=>{const[r,c]=d.useState([]),[p,u]=d.useState(!1);d.useEffect(()=>{const e=i(n=>{n.key==="Escape"&&s()},"handleEsc");return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s]);const y=i(e=>{r.includes(e)?c(n=>n.filter(g=>g!==e)):c(n=>[...n,e])},"toggleFriend"),f=i(async()=>{if(r.length<2){a.error("❌ En az 2 kişi seçmelisin");return}u(!0);try{const e=await x(`${b}/conversations/create_group/`,{method:"POST",body:JSON.stringify({usernames:r})});if(e.ok){const n=await e.json();a.success("✅ Grup oluşturuldu!"),h(n),s()}else a.error("❌ Grup oluşturulamadı")}catch(e){a.error("❌ Hata oluştu: "+e.message)}finally{u(!1)}},"handleCreate");return t.jsx("div",{style:o.overlay,onClick:s,children:t.jsxs("div",{style:o.modal,onClick:i(e=>e.stopPropagation(),"onClick"),children:[t.jsxs("div",{style:o.header,children:[t.jsx("h3",{children:"Grup Oluştur"}),t.jsx("button",{onClick:s,style:o.closeBtn,children:t.jsx(j,{})})]}),t.jsxs("div",{style:o.body,children:[t.jsxs("p",{style:{color:"#b9bbbe",marginBottom:15},children:["Gruba eklemek istediğin arkadaşlarını seç (",r.length,")"]}),t.jsxs("div",{style:o.friendList,children:[l.map(e=>t.jsxs("div",{onClick:i(()=>y(e),"onClick"),style:{...o.friendItem,backgroundColor:r.includes(e)?"rgba(88, 101, 242, 0.3)":"#2f3136",borderColor:r.includes(e)?"#5865f2":"transparent"},children:[t.jsx("span",{style:{color:"white"},children:e}),r.includes(e)?t.jsx(k,{color:"#5865f2"}):t.jsx(w,{color:"#b9bbbe"})]},e)),l.length===0&&t.jsx("p",{style:{color:"#72767d"},children:"Listenizde arkadaş yok."})]}),t.jsx("button",{onClick:f,style:o.createBtn,disabled:p||r.length<2,children:p?"Oluşturuluyor...":"Grup DM Oluştur"})]})]})})},"CreateGroupModal"),o={overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},modal:{backgroundColor:"#313338",width:"400px",borderRadius:"8px",overflow:"hidden"},header:{padding:"15px 20px",borderBottom:"1px solid #1e1f22",display:"flex",justifyContent:"space-between",color:"white",alignItems:"center"},closeBtn:{background:"none",border:"none",color:"#b9bbbe",cursor:"pointer",fontSize:"1.2em"},body:{padding:"20px"},friendList:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},friendItem:{padding:"10px",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",border:"1px solid transparent"},createBtn:{width:"100%",padding:"10px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",opacity:.9}};export{O as default};
