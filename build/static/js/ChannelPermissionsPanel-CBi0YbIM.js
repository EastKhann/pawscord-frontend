import{r,b as e}from"./react-core-9vc7GIjk.js";import{d as R,a as _}from"./icons-vendor-BHKL7tCa.js";import{t as l}from"./index-BmHz9cUO.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-B-uSUaIv.js";import"./router-vendor-qCr-Mpaw.js";import"./crypto-vendor-C1qXRpJv.js";import"./state-vendor-0vlBuk0v.js";const $=({fetchWithAuth:c,apiBaseUrl:d,channelSlug:m,onClose:p})=>{const[I,f]=r.useState([]),[y,u]=r.useState([]),[k,x]=r.useState(!0),[w,P]=r.useState(null),[E,g]=r.useState({}),b=[{key:"view_channel",name:"Kanalƒ± G√∂r√ºnt√ºle",icon:"üëÅÔ∏è"},{key:"send_messages",name:"Mesaj G√∂nder",icon:"üí¨"},{key:"attach_files",name:"Dosya Ekle",icon:"üìé"},{key:"embed_links",name:"Link G√∂mme",icon:"üîó"},{key:"add_reactions",name:"Tepki Ekle",icon:"üòÄ"},{key:"use_voice",name:"Sesli Kullan",icon:"üé§"},{key:"speak",name:"Konu≈ü",icon:"üó£Ô∏è"},{key:"mute_members",name:"Susturma",icon:"üîá"},{key:"manage_messages",name:"Mesaj Y√∂netimi",icon:"‚öôÔ∏è"},{key:"manage_channel",name:"Kanal Y√∂netimi",icon:"üõ†Ô∏è"}];r.useEffect(()=>{v(),h()},[m]);const v=async()=>{try{x(!0);const t=await c(`${d}/api/channels/${m}/permissions/`);if(t.ok){const o=await t.json();f(o);const i={};o.forEach(a=>{i[a.role_id]||(i[a.role_id]={}),i[a.role_id][a.permission]=a.value}),g(i)}}catch(t){console.error("ƒ∞zin y√ºkleme hatasƒ±:",t),l.error("ƒ∞zinler y√ºklenemedi")}finally{x(!1)}},h=async()=>{try{const t=await c(`${d}/api/servers/roles/list/`);if(t.ok){const o=await t.json();u(o)}}catch(t){console.error("Rol y√ºkleme hatasƒ±:",t)}},C=async(t,o,i)=>{try{(await c(`${d}/api/channels/permissions/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_slug:m,role_id:t,permission:o,value:i})})).ok?(l.success("ƒ∞zin g√ºncellendi"),g(s=>({...s,[t]:{...s[t],[o]:i}}))):l.error("ƒ∞zin g√ºncellenemedi")}catch(a){console.error("ƒ∞zin g√ºncelleme hatasƒ±:",a),l.error("Bir hata olu≈ütu")}},z=(t,o)=>E[t]?.[o],S=t=>t===!0?{icon:"‚úÖ",color:"#43b581",text:"ƒ∞zin Ver"}:t===!1?{icon:"‚ùå",color:"#ed4245",text:"Reddet"}:{icon:"‚ûñ",color:"#99aab5",text:"Varsayƒ±lan"};return e.createElement("div",{style:n.overlay,onClick:p},e.createElement("div",{style:n.modal,onClick:t=>t.stopPropagation()},e.createElement("div",{style:n.header},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},e.createElement(R,{style:{color:"#faa61a"}}),e.createElement("h2",{style:{margin:0}},"Kanal ƒ∞zinleri")),e.createElement(_,{onClick:p,style:n.closeBtn})),e.createElement("div",{style:n.content},k?e.createElement("div",{style:n.loading},"Y√ºkleniyor..."):e.createElement("div",{style:n.matrix},e.createElement("div",{style:n.matrixHeader},e.createElement("div",{style:n.headerCell},"ƒ∞zin"),y.map(t=>e.createElement("div",{key:t.id,style:n.headerCell},e.createElement("div",{style:{...n.roleTag,backgroundColor:t.color||"#5865f2"}},t.name)))),b.map(t=>e.createElement("div",{key:t.key,style:n.matrixRow},e.createElement("div",{style:n.permissionName},e.createElement("span",{style:{fontSize:"18px",marginRight:"8px"}},t.icon),t.name),y.map(o=>{const i=z(o.id,t.key),a=S(i);return e.createElement("div",{key:o.id,style:n.permissionCell},e.createElement("button",{onClick:()=>{const s=i===null?!0:i===!0?!1:null;C(o.id,t.key,s)},style:{...n.permissionBtn,color:a.color},title:a.text},e.createElement("span",{style:{fontSize:"20px"}},a.icon)))}))))),e.createElement("div",{style:n.footer},e.createElement("div",{style:n.legend},e.createElement("div",{style:n.legendItem},e.createElement("span",{style:{color:"#43b581",fontSize:"18px"}},"‚úÖ"),e.createElement("span",null,"ƒ∞zin Ver")),e.createElement("div",{style:n.legendItem},e.createElement("span",{style:{color:"#ed4245",fontSize:"18px"}},"‚ùå"),e.createElement("span",null,"Reddet")),e.createElement("div",{style:n.legendItem},e.createElement("span",{style:{color:"#99aab5",fontSize:"18px"}},"‚ûñ"),e.createElement("span",null,"Varsayƒ±lan"))))))},n={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"95%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},content:{flex:1,overflowY:"auto",padding:"20px"},matrix:{display:"flex",flexDirection:"column",gap:"2px"},matrixHeader:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(100px, 1fr))",gap:"2px",marginBottom:"10px",position:"sticky",top:0,backgroundColor:"#1e1e1e",zIndex:10,paddingBottom:"10px"},headerCell:{padding:"12px",fontWeight:"600",textAlign:"center",backgroundColor:"#2c2f33",borderRadius:"4px"},roleTag:{padding:"6px 12px",borderRadius:"12px",fontSize:"13px",fontWeight:"600",color:"#fff"},matrixRow:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(100px, 1fr))",gap:"2px",marginBottom:"2px"},permissionName:{padding:"12px",backgroundColor:"#2c2f33",borderRadius:"4px",display:"flex",alignItems:"center",fontWeight:"500"},permissionCell:{padding:"12px",backgroundColor:"#2c2f33",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},permissionBtn:{backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"8px",borderRadius:"4px",transition:"background-color 0.2s"},footer:{padding:"20px",borderTop:"1px solid #333"},legend:{display:"flex",gap:"30px",justifyContent:"center"},legendItem:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},loading:{textAlign:"center",padding:"40px",color:"#888"}};export{$ as default};
