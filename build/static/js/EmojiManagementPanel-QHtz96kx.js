var I=Object.defineProperty;var i=(a,l)=>I(a,"name",{value:l,configurable:!0});import{r,j as e}from"./react-core-Djgtqrmb.js";import{n as h,a as R,Q as _,bx as $,f as N}from"./icons-vendor-BW7dxHkX.js";import{t as d}from"./index-GGLPABCW.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-ClgLnMjk.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const Q=i(({fetchWithAuth:a,apiBaseUrl:l,serverId:c,onClose:g})=>{const[u,v]=r.useState([]),[k,C]=r.useState([]),[E,S]=r.useState([]),[j,f]=r.useState(null),[p,y]=r.useState(""),[T,b]=r.useState(!0),[n,x]=r.useState("custom");r.useEffect(()=>{m(),n==="trending"&&w(),n==="suggestions"&&z()},[n]);const m=i(async()=>{try{b(!0);const o=await a(`${l}/emoji/list/?server_id=${c}`);if(o.ok){const s=await o.json();v(s)}}catch{}finally{b(!1)}},"loadEmojis"),w=i(async()=>{try{const o=await a(`${l}/emoji/trending/?server_id=${c}`);if(o.ok){const s=await o.json();C(s)}}catch{}},"loadTrending"),z=i(async()=>{try{const o=await a(`${l}/emoji/suggestions/?server_id=${c}`);if(o.ok){const s=await o.json();S(s)}}catch{}},"loadSuggestions"),F=i(async()=>{if(!j||!p.trim()){d.error("Emoji dosyası ve ismi gerekli");return}const o=new FormData;o.append("file",j),o.append("name",p),o.append("server_id",c);try{(await a(`${l}/emoji/upload/`,{method:"POST",body:o})).ok?(d.success("Emoji yüklendi"),f(null),y(""),m()):d.error("Emoji yüklenemedi")}catch{d.error("Bir hata oluştu")}},"uploadEmoji"),B=i(async o=>{try{(await a(`${l}/emoji/${o}/delete/`,{method:"DELETE"})).ok?(d.success("Emoji silindi"),m()):d.error("Emoji silinemedi")}catch{d.error("Bir hata oluştu")}},"deleteEmoji");return e.jsx("div",{style:t.overlay,onClick:g,children:e.jsxs("div",{style:t.modal,onClick:i(o=>o.stopPropagation(),"onClick"),children:[e.jsxs("div",{style:t.header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(h,{style:{color:"#faa61a"}}),e.jsx("h2",{style:{margin:0},children:"Emoji Yönetimi"})]}),e.jsx(R,{onClick:g,style:t.closeBtn})]}),e.jsxs("div",{style:t.tabs,children:[e.jsx("button",{onClick:i(()=>x("custom"),"onClick"),style:{...t.tab,...n==="custom"?t.activeTab:{}},children:"Özel Emojiler"}),e.jsxs("button",{onClick:i(()=>x("trending"),"onClick"),style:{...t.tab,...n==="trending"?t.activeTab:{}},children:[e.jsx(_,{})," Trend Olanlar"]}),e.jsx("button",{onClick:i(()=>x("suggestions"),"onClick"),style:{...t.tab,...n==="suggestions"?t.activeTab:{}},children:"Öneriler"})]}),n==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.uploadSection,children:[e.jsx("input",{type:"file",accept:"image/png,image/gif,image/jpeg",onChange:i(o=>f(o.target.files[0]),"onChange"),style:t.fileInput}),e.jsx("input",{type:"text",value:p,onChange:i(o=>y(o.target.value),"onChange"),placeholder:"Emoji ismi (örn: pog, kekw)",style:t.input}),e.jsxs("button",{onClick:F,style:t.uploadBtn,children:[e.jsx($,{})," Yükle"]})]}),e.jsx("div",{style:t.content,children:T?e.jsx("div",{style:t.loading,children:"Yükleniyor..."}):u.length===0?e.jsxs("div",{style:t.empty,children:[e.jsx(h,{style:{fontSize:"48px",color:"#555",marginBottom:"10px"}}),e.jsx("p",{children:"Henüz özel emoji yok"})]}):e.jsx("div",{style:t.emojiGrid,children:u.map(o=>e.jsxs("div",{style:t.emojiCard,children:[e.jsx("img",{src:o.url,alt:o.name,style:t.emojiImage}),e.jsxs("div",{style:t.emojiName,children:[":",o.name,":"]}),e.jsx("button",{onClick:i(()=>B(o.id),"onClick"),style:t.deleteEmojiBtn,children:e.jsx(N,{})})]},o.id))})})]}),n==="trending"&&e.jsx("div",{style:t.content,children:e.jsx("div",{style:t.emojiGrid,children:k.map((o,s)=>e.jsxs("div",{style:t.emojiCard,children:[e.jsx("img",{src:o.url,alt:o.name,style:t.emojiImage}),e.jsxs("div",{style:t.emojiName,children:[":",o.name,":"]}),e.jsxs("div",{style:t.usageCount,children:[o.usage_count," kullanım"]})]},s))})}),n==="suggestions"&&e.jsx("div",{style:t.content,children:e.jsx("div",{style:t.emojiGrid,children:E.map((o,s)=>e.jsxs("div",{style:t.suggestionCard,children:[e.jsx("img",{src:o.emoji_url,alt:o.emoji_name,style:t.emojiImage}),e.jsxs("div",{style:t.emojiName,children:[":",o.emoji_name,":"]}),e.jsxs("div",{style:t.suggester,children:["Öneren: ",o.suggested_by]})]},s))})})]})})},"EmojiManagementPanel"),t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},modal:{backgroundColor:"#1e1e1e",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",color:"#fff"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #333"},closeBtn:{cursor:"pointer",fontSize:"24px",color:"#888"},tabs:{display:"flex",gap:"10px",padding:"15px 20px",borderBottom:"1px solid #333"},tab:{backgroundColor:"transparent",color:"#888",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},activeTab:{backgroundColor:"#5865f2",color:"#fff"},uploadSection:{display:"flex",gap:"10px",padding:"20px",borderBottom:"1px solid #333"},fileInput:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},input:{flex:1,padding:"10px",backgroundColor:"#2c2f33",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"14px"},uploadBtn:{backgroundColor:"#43b581",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},content:{flex:1,overflowY:"auto",padding:"20px"},emojiGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"15px"},emojiCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center",position:"relative"},emojiImage:{width:"64px",height:"64px",objectFit:"contain",marginBottom:"10px"},emojiName:{fontSize:"13px",fontWeight:"500",color:"#dcddde",marginBottom:"4px",fontFamily:"monospace"},usageCount:{fontSize:"11px",color:"#888"},deleteEmojiBtn:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#f04747",color:"#fff",border:"none",padding:"6px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},suggestionCard:{backgroundColor:"#2c2f33",borderRadius:"8px",padding:"15px",textAlign:"center"},suggester:{fontSize:"11px",color:"#888",marginTop:"6px"},loading:{textAlign:"center",padding:"40px",color:"#888"},empty:{textAlign:"center",padding:"60px 20px",color:"#888"}};export{Q as default};
