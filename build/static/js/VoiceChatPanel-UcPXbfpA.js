import{r as o,n as e,b as de}from"./react-core-zXIKm1Jm.js";import{k as pa,g as Ea,a as Ia,m as Ma,t as Z}from"./index-CEfc8aoh.js";import{D as Ra}from"./cjs-3PIGQicZ.js";import $a from"./UserContextMenu-VhlSTb0J.js";import{y as K}from"./ui-vendor-BGw4w3Ed.js";import{a as ta,q as Me,r as na,$ as ia,bL as ce,m as ra,aT as oa,bM as Re,az as Fa,D as Da,aR as Ba,E as Ka,aK as la,bj as Pa,bN as ca,bJ as qa,R as da}from"./icons-vendor-BNHs0e-7.js";import{S as La}from"./crypto-vendor-D_AcF0lD.js";import"./editor-vendor-DiU449Dh.js";import"./media-vendor-BSOZ7IB3.js";import"./router-vendor-ltdGXAv4.js";import"./state-vendor-8NbFPBhQ.js";const Va=({onClose:t,channelId:c})=>{const{isNoiseSuppressionEnabled:m,toggleNoiseSuppression:v,updateNoiseSuppressionLevel:k,noiseSuppressionLevel:T,vadSensitivity:x,updateVadSensitivity:y,isPTTMode:b,togglePTTMode:w,pttKey:$,updatePTTKey:S,localAudioStream:N}=pa(),[z,Y]=o.useState("input"),[l,F]=o.useState({input_device:"default",output_device:"default",input_volume:100,output_volume:100,noise_suppression:!0,noise_suppression_level:"high",echo_cancellation:!0,echo_cancellation_level:"high",automatic_gain_control:!0,agc_level:"moderate",noise_gate:!0,noise_gate_threshold:-50,noise_gate_attack:10,noise_gate_release:100,voice_activity:!0,input_sensitivity:50,voice_threshold:-45,push_to_talk:!1,push_to_talk_key:"Space",ptt_release_delay:200,high_pass_filter:!0,high_pass_frequency:80,audio_bitrate:64e3,sample_rate:48e3,stereo_audio:!1,attenuation:50,attenuation_while_speaking:!0}),[u,E]=o.useState({input:[],output:[]}),[U,I]=o.useState("default"),[pe,ue]=o.useState(null),[xe,_e]=o.useState([]),[ua,ee]=o.useState(!0),[D,ae]=o.useState(0),[se,te]=o.useState(!1),P=o.useRef(null),O=o.useRef(null),he=o.useRef(null),me=o.useRef(null),q=Ea(),ge=localStorage.getItem("access_token"),De=[{id:"input",icon:e.jsx(Me,{}),label:"GiriÅŸ"},{id:"output",icon:e.jsx(na,{}),label:"Ã‡Ä±kÄ±ÅŸ"},{id:"noise",icon:e.jsx(ia,{}),label:"GÃ¼rÃ¼ltÃ¼ Engelleme"},{id:"voice",icon:e.jsx(ce,{}),label:"Ses AlgÄ±lama"},{id:"effects",icon:e.jsx(ra,{}),label:"Efektler"},{id:"advanced",icon:e.jsx(oa,{}),label:"GeliÅŸmiÅŸ"}];o.useEffect(()=>(ee(!1),Promise.all([Ke(),Ne(),c?Be():Promise.resolve()]).catch(a=>console.warn("[VoiceSettings] Load error:",a)),()=>ie()),[]);const Be=async()=>{if(c)try{const a=new AbortController,h=setTimeout(()=>a.abort(),3e3),j=await fetch(`${q}/voice/${c}/settings/`,{headers:{Authorization:`Bearer ${ge}`},signal:a.signal});clearTimeout(h);const A=await j.json();A.settings&&F(L=>({...L,...A.settings}))}catch(a){a.name!=="AbortError"&&console.error("Error fetching voice settings:",a)}},Ke=async()=>{try{const a=await navigator.mediaDevices.enumerateDevices();E({input:a.filter(h=>h.kind==="audioinput"),output:a.filter(h=>h.kind==="audiooutput")})}catch{K.error("âŒ Cihazlar yÃ¼klenemedi")}},Ne=async()=>{try{const h=await(await fetch(`${q}/voice/effects/`,{headers:{Authorization:`Bearer ${ge}`}})).json();_e(h.effects||[{id:"robot",name:"Robot",icon:"ðŸ¤–"},{id:"deep",name:"Derin Ses",icon:"ðŸŽ­"},{id:"high",name:"YÃ¼ksek Ses",icon:"ðŸŽµ"},{id:"echo",name:"YankÄ±",icon:"ðŸ”Š"},{id:"radio",name:"Radyo",icon:"ðŸ“»"}])}catch(a){console.error("Error fetching effects:",a)}},Q=async a=>{if(F(a),!!c)try{await fetch(`${q}/voice/${c}/settings/update/`,{method:"POST",headers:{Authorization:`Bearer ${ge}`,"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(h){console.error("Error updating settings:",h)}},f=(a,h)=>{const j={...l,[a]:h};Q(j)},fe=async a=>{if(!N)return;const h=N.getAudioTracks()[0];if(h&&h.applyConstraints)try{await h.applyConstraints(a),console.log("ðŸŽ›ï¸ [Settings] Applied constraints:",a)}catch(j){console.warn("âš ï¸ [Settings] Could not apply constraints:",j)}},ne=async()=>{try{const a=await navigator.mediaDevices.getUserMedia({audio:{deviceId:l.input_device!=="default"?l.input_device:void 0,echoCancellation:l.echo_cancellation,noiseSuppression:l.noise_suppression,autoGainControl:l.automatic_gain_control}});he.current=a,P.current=new(window.AudioContext||window.webkitAudioContext),O.current=P.current.createAnalyser(),P.current.createMediaStreamSource(a).connect(O.current),O.current.fftSize=256;const j=new Uint8Array(O.current.frequencyBinCount),A=()=>{O.current.getByteFrequencyData(j);const L=j.reduce((J,je)=>J+je)/j.length;ae(L/255*100),me.current=requestAnimationFrame(A)};A(),te(!0),K.success("ðŸŽ™ï¸ Mikrofon testi baÅŸladÄ±")}catch{K.error("âŒ Mikrofon eriÅŸimi saÄŸlanamadÄ±")}},ie=()=>{me.current&&cancelAnimationFrame(me.current),he.current&&he.current.getTracks().forEach(a=>a.stop()),P.current&&P.current.close(),te(!1),ae(0)},ve=()=>{if(!window.confirm("TÃ¼m ayarlarÄ± varsayÄ±lana dÃ¶ndÃ¼rmek istiyor musunuz?"))return;Q({...l,...{input_device:"default",output_device:"default",input_volume:100,output_volume:100,noise_suppression:!0,noise_suppression_level:"high",echo_cancellation:!0,echo_cancellation_level:"high",automatic_gain_control:!0,agc_level:"moderate",noise_gate:!0,noise_gate_threshold:-50,voice_activity:!0,input_sensitivity:50,push_to_talk:!1,push_to_talk_key:"Space",high_pass_filter:!0,high_pass_frequency:80,attenuation:50}}),K.success("âœ… Ayarlar sÄ±fÄ±rlandÄ±")},be=()=>e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Me,{className:"card-icon"}),e.jsx("h3",{children:"Mikrofon CihazÄ±"})]}),e.jsxs("select",{value:l.input_device,onChange:a=>f("input_device",a.target.value),className:"device-select",children:[e.jsx("option",{value:"default",children:"ðŸŽ™ï¸ VarsayÄ±lan Mikrofon"}),u.input.map(a=>e.jsx("option",{value:a.deviceId,children:a.label||"Bilinmeyen Mikrofon"},a.deviceId))]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Re,{className:"card-icon"}),e.jsx("h3",{children:"Mikrofon Seviyesi"}),e.jsxs("span",{className:"value-badge",children:[l.input_volume,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"200",value:l.input_volume,onChange:a=>f("input_volume",parseInt(a.target.value)),className:"premium-slider"}),e.jsxs("div",{className:"slider-labels",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"100%"}),e.jsx("span",{children:"200%"})]})]}),e.jsxs("div",{className:"settings-card mic-test-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ce,{className:"card-icon"}),e.jsx("h3",{children:"Mikrofon Testi"})]}),e.jsxs("div",{className:"mic-test-area",children:[e.jsxs("div",{className:"mic-level-container",children:[e.jsx("div",{className:"mic-level-bar",style:{width:`${D}%`},children:e.jsx("div",{className:"mic-level-glow"})}),e.jsx("div",{className:"mic-level-markers",children:[...Array(10)].map((a,h)=>e.jsx("div",{className:`marker ${D>h*10?"active":""}`},h))})]}),e.jsxs("div",{className:"mic-level-info",children:[e.jsxs("span",{className:"level-text",children:[Math.round(D),"%"]}),D>80&&e.jsx(Fa,{className:"warning-icon"})]}),e.jsx("button",{className:`test-btn ${se?"testing":""}`,onClick:se?ie:ne,children:se?e.jsxs(e.Fragment,{children:[e.jsx(Da,{})," Testi Durdur"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ba,{})," Mikrofonu Test Et"]})})]})]})]}),re=()=>e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(na,{className:"card-icon"}),e.jsx("h3",{children:"Ã‡Ä±kÄ±ÅŸ CihazÄ±"})]}),e.jsxs("select",{value:l.output_device,onChange:a=>f("output_device",a.target.value),className:"device-select",children:[e.jsx("option",{value:"default",children:"ðŸ”Š VarsayÄ±lan HoparlÃ¶r"}),u.output.map(a=>e.jsx("option",{value:a.deviceId,children:a.label||"Bilinmeyen HoparlÃ¶r"},a.deviceId))]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Ka,{className:"card-icon"}),e.jsx("h3",{children:"Ã‡Ä±kÄ±ÅŸ Seviyesi"}),e.jsxs("span",{className:"value-badge",children:[l.output_volume,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"200",value:l.output_volume,onChange:a=>f("output_volume",parseInt(a.target.value)),className:"premium-slider"})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(la,{className:"card-icon"}),e.jsx("h3",{children:"Uygulama Sesi Azaltma"}),e.jsxs("span",{className:"value-badge",children:[l.attenuation,"%"]})]}),e.jsx("p",{className:"card-description",children:"Biri konuÅŸurken diÄŸer uygulama seslerini azalt"}),e.jsx("input",{type:"range",min:"0",max:"100",value:l.attenuation,onChange:a=>f("attenuation",parseInt(a.target.value)),className:"premium-slider"}),e.jsxs("div",{className:"toggle-row",children:[e.jsx("span",{children:"KonuÅŸurken Aktif"}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l.attenuation_while_speaking,onChange:a=>f("attenuation_while_speaking",a.target.checked)}),e.jsx("span",{className:"slider"})]})]})]})]}),oe=()=>e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"settings-card highlight-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ia,{className:"card-icon premium"}),e.jsx("h3",{children:"ðŸ›¡ï¸ GÃ¼rÃ¼ltÃ¼ BastÄ±rma"}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:m??l.noise_suppression,onChange:a=>{f("noise_suppression",a.target.checked),v&&m!==a.target.checked&&v(),K.success(a.target.checked?"ðŸ›¡ï¸ GÃ¼rÃ¼ltÃ¼ engelleme aÃ§Ä±ldÄ±":"ðŸ”‡ GÃ¼rÃ¼ltÃ¼ engelleme kapatÄ±ldÄ±")}}),e.jsx("span",{className:"slider"})]})]}),e.jsx("p",{className:"card-description",children:"Fan sesi, klima, klavye sesi gibi arka plan gÃ¼rÃ¼ltÃ¼lerini engeller"}),(m??l.noise_suppression)&&e.jsxs("div",{className:"noise-levels",children:[e.jsx("span",{className:"level-label",children:"Seviye:"}),e.jsx("div",{className:"level-buttons",children:[{id:"low",label:"DÃ¼ÅŸÃ¼k",desc:"Minimal iÅŸleme"},{id:"medium",label:"Orta",desc:"Dengeli"},{id:"high",label:"YÃ¼ksek",desc:"Ã–nerilen"},{id:"aggressive",label:"Agresif",desc:"Maksimum"}].map(a=>e.jsxs("button",{className:`level-btn ${(T||l.noise_suppression_level)===a.id?"active":""}`,onClick:()=>{f("noise_suppression_level",a.id),k&&k(a.id),K.info(`ðŸŽšï¸ GÃ¼rÃ¼ltÃ¼ seviyesi: ${a.label}`)},children:[e.jsx("span",{className:"level-name",children:a.label}),e.jsx("span",{className:"level-desc",children:a.desc})]},a.id))})]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ce,{className:"card-icon"}),e.jsx("h3",{children:"ðŸ”‡ YankÄ± Ã–nleme"}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l.echo_cancellation,onChange:a=>{f("echo_cancellation",a.target.checked),fe({echoCancellation:a.target.checked})}}),e.jsx("span",{className:"slider"})]})]}),e.jsx("p",{className:"card-description",children:"HoparlÃ¶rden gelen sesin mikrofona geri dÃ¶nmesini engeller"}),l.echo_cancellation&&e.jsx("div",{className:"level-selector",children:e.jsxs("select",{value:l.echo_cancellation_level,onChange:a=>f("echo_cancellation_level",a.target.value),className:"inline-select",children:[e.jsx("option",{value:"low",children:"DÃ¼ÅŸÃ¼k"}),e.jsx("option",{value:"medium",children:"Orta"}),e.jsx("option",{value:"high",children:"YÃ¼ksek (Ã–nerilen)"})]})})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Pa,{className:"card-icon"}),e.jsx("h3",{children:"âš¡ GÃ¼rÃ¼ltÃ¼ KapÄ±sÄ± (Noise Gate)"}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l.noise_gate,onChange:a=>f("noise_gate",a.target.checked)}),e.jsx("span",{className:"slider"})]})]}),e.jsx("p",{className:"card-description",children:"Belirli ses seviyesinin altÄ±ndaki sesleri tamamen engeller (sessizlik anlarÄ±ndaki gÃ¼rÃ¼ltÃ¼yÃ¼ Ã¶nler)"}),l.noise_gate&&e.jsxs("div",{className:"gate-settings",children:[e.jsxs("div",{className:"gate-slider",children:[e.jsxs("label",{children:["EÅŸik DeÄŸeri: ",e.jsxs("strong",{children:[l.noise_gate_threshold," dB"]})]}),e.jsx("input",{type:"range",min:"-80",max:"-20",value:l.noise_gate_threshold,onChange:a=>f("noise_gate_threshold",parseInt(a.target.value)),className:"premium-slider"}),e.jsxs("div",{className:"slider-hint",children:[e.jsx("span",{children:"Hassas (-80)"}),e.jsx("span",{children:"Sert (-20)"})]})]}),e.jsxs("div",{className:"gate-timing",children:[e.jsxs("div",{className:"timing-item",children:[e.jsx("label",{children:"AÃ§Ä±lÄ±ÅŸ SÃ¼resi"}),e.jsxs("select",{value:l.noise_gate_attack,onChange:a=>f("noise_gate_attack",parseInt(a.target.value)),children:[e.jsx("option",{value:"5",children:"5ms (HÄ±zlÄ±)"}),e.jsx("option",{value:"10",children:"10ms (Normal)"}),e.jsx("option",{value:"20",children:"20ms (YumuÅŸak)"})]})]}),e.jsxs("div",{className:"timing-item",children:[e.jsx("label",{children:"KapanÄ±ÅŸ SÃ¼resi"}),e.jsxs("select",{value:l.noise_gate_release,onChange:a=>f("noise_gate_release",parseInt(a.target.value)),children:[e.jsx("option",{value:"50",children:"50ms (HÄ±zlÄ±)"}),e.jsx("option",{value:"100",children:"100ms (Normal)"}),e.jsx("option",{value:"200",children:"200ms (YumuÅŸak)"})]})]})]})]})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Re,{className:"card-icon"}),e.jsx("h3",{children:"ðŸŽšï¸ Otomatik Ses Ayarlama (AGC)"}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l.automatic_gain_control,onChange:a=>f("automatic_gain_control",a.target.checked)}),e.jsx("span",{className:"slider"})]})]}),e.jsx("p",{className:"card-description",children:"Ses seviyenizi otomatik olarak dengeler - Ã§ok sessiz veya Ã§ok yÃ¼ksek konuÅŸmanÄ±zÄ± dÃ¼zeltir"}),l.automatic_gain_control&&e.jsx("div",{className:"agc-options",children:[{id:"moderate",label:"Dengeli",desc:"DoÄŸal ses"},{id:"aggressive",label:"Agresif",desc:"Sabit seviye"}].map(a=>e.jsxs("label",{className:`radio-card ${l.agc_level===a.id?"selected":""}`,children:[e.jsx("input",{type:"radio",checked:l.agc_level===a.id,onChange:()=>f("agc_level",a.id)}),e.jsxs("div",{className:"radio-content",children:[e.jsx("span",{className:"radio-label",children:a.label}),e.jsx("span",{className:"radio-desc",children:a.desc})]})]},a.id))})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ce,{className:"card-icon"}),e.jsx("h3",{children:"ðŸ”‰ DÃ¼ÅŸÃ¼k Frekans Filtresi"}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l.high_pass_filter,onChange:a=>f("high_pass_filter",a.target.checked)}),e.jsx("span",{className:"slider"})]})]}),e.jsx("p",{className:"card-description",children:"DÃ¼ÅŸÃ¼k frekanslÄ± gÃ¼rÃ¼ltÃ¼leri (uÄŸultu, hum sesi) keser"}),l.high_pass_filter&&e.jsxs("div",{className:"frequency-selector",children:[e.jsx("label",{children:"Kesim FrekansÄ±:"}),e.jsxs("select",{value:l.high_pass_frequency,onChange:a=>f("high_pass_frequency",parseInt(a.target.value)),children:[e.jsx("option",{value:"50",children:"50 Hz (Minimal)"}),e.jsx("option",{value:"80",children:"80 Hz (Ã–nerilen)"}),e.jsx("option",{value:"100",children:"100 Hz (Agresif)"}),e.jsx("option",{value:"150",children:"150 Hz (Ã‡ok Agresif)"})]})]})]})]}),ye=()=>e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Me,{className:"card-icon"}),e.jsx("h3",{children:"ðŸŽ™ï¸ GiriÅŸ Modu"})]}),e.jsxs("div",{className:"input-mode-selector",children:[e.jsxs("label",{className:`mode-card ${!b&&l.voice_activity?"selected":""}`,children:[e.jsx("input",{type:"radio",checked:!b,onChange:()=>{Q({...l,voice_activity:!0,push_to_talk:!1}),b&&w&&w(),K.success("ðŸŽ¤ Ses aktivasyonu aÃ§Ä±ldÄ±")}}),e.jsxs("div",{className:"mode-content",children:[e.jsx(ce,{className:"mode-icon"}),e.jsx("span",{className:"mode-title",children:"Ses Aktivasyonu"}),e.jsx("span",{className:"mode-desc",children:"KonuÅŸtuÄŸunuzda otomatik aktif olur"})]})]}),e.jsxs("label",{className:`mode-card ${b||l.push_to_talk?"selected":""}`,children:[e.jsx("input",{type:"radio",checked:b,onChange:()=>{Q({...l,voice_activity:!1,push_to_talk:!0}),!b&&w&&w(),K.success("âŒ¨ï¸ Bas KonuÅŸ modu aÃ§Ä±ldÄ±")}}),e.jsxs("div",{className:"mode-content",children:[e.jsx(ca,{className:"mode-icon"}),e.jsx("span",{className:"mode-title",children:"Bas KonuÅŸ"}),e.jsx("span",{className:"mode-desc",children:"TuÅŸa basÄ±lÄ± tutarak konuÅŸun"})]})]})]})]}),!b&&e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Re,{className:"card-icon"}),e.jsx("h3",{children:"Hassasiyet AyarlarÄ±"})]}),e.jsxs("div",{className:"sensitivity-control",children:[e.jsxs("div",{className:"sensitivity-header",children:[e.jsx("span",{children:"Mikrofon Hassasiyeti"}),e.jsxs("span",{className:"value-badge",children:[x||l.input_sensitivity,"%"]})]}),e.jsx("input",{type:"range",min:"20",max:"80",value:x||l.input_sensitivity,onChange:a=>{const h=parseInt(a.target.value);f("input_sensitivity",h),y&&y(h)},className:"premium-slider sensitivity"}),e.jsxs("div",{className:"sensitivity-hint",children:[e.jsx(qa,{}),e.jsx("span",{children:"DÃ¼ÅŸÃ¼k = Daha sessiz sesleri algÄ±lar"})]}),e.jsxs("div",{className:"sensitivity-visualizer",children:[e.jsx("div",{className:"threshold-line",style:{left:`${((x||l.input_sensitivity)-20)/60*100}%`}}),e.jsx("div",{className:"level-indicator",style:{width:`${D}%`}})]}),e.jsxs("div",{className:"visualizer-labels",children:[e.jsx("span",{children:"Sessiz"}),e.jsx("span",{children:"YÃ¼ksek"})]})]})]}),b&&e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ca,{className:"card-icon"}),e.jsx("h3",{children:"Bas KonuÅŸ AyarlarÄ±"})]}),e.jsxs("div",{className:"ptt-settings",children:[e.jsxs("div",{className:"ptt-key-bind",children:[e.jsx("label",{children:"TuÅŸ AtamasÄ±"}),e.jsx("input",{type:"text",value:$||l.push_to_talk_key,onKeyDown:a=>{a.preventDefault(),f("push_to_talk_key",a.code),S&&S(a.code),K.info(`âŒ¨ï¸ TuÅŸ: ${a.code}`)},placeholder:"Bir tuÅŸa basÄ±n...",className:"key-input",readOnly:!0})]}),e.jsxs("div",{className:"ptt-delay",children:[e.jsx("label",{children:"BÄ±rakma Gecikmesi"}),e.jsxs("select",{value:l.ptt_release_delay,onChange:a=>f("ptt_release_delay",parseInt(a.target.value)),children:[e.jsx("option",{value:"0",children:"0ms (AnÄ±nda)"}),e.jsx("option",{value:"100",children:"100ms"}),e.jsx("option",{value:"200",children:"200ms (Ã–nerilen)"}),e.jsx("option",{value:"300",children:"300ms"}),e.jsx("option",{value:"500",children:"500ms"})]}),e.jsx("span",{className:"hint",children:"TuÅŸu bÄ±raktÄ±ktan sonra mikrofon aÃ§Ä±k kalma sÃ¼resi"})]})]})]})]}),B=()=>e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(la,{className:"card-icon"}),e.jsx("h3",{children:"ðŸŽšï¸ Equalizer"})]}),e.jsx("div",{className:"equalizer-presets",children:[{id:"default",label:"VarsayÄ±lan",icon:"ðŸŽµ"},{id:"bass_boost",label:"Bass Boost",icon:"ðŸ”Š"},{id:"treble_boost",label:"Treble Boost",icon:"ðŸŽ¼"},{id:"voice",label:"Ses Ä°yileÅŸtirme",icon:"ðŸ—£ï¸"},{id:"crisp",label:"Kristal Netlik",icon:"âœ¨"}].map(a=>e.jsxs("button",{className:`eq-preset-btn ${U===a.id?"active":""}`,onClick:()=>I(a.id),children:[e.jsx("span",{className:"preset-icon",children:a.icon}),e.jsx("span",{className:"preset-label",children:a.label})]},a.id))})]}),e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ra,{className:"card-icon"}),e.jsx("h3",{children:"ðŸŽ­ Ses Efektleri"}),pe&&e.jsxs("button",{className:"remove-effect-btn",onClick:()=>ue(null),children:[e.jsx(ta,{})," KaldÄ±r"]})]}),e.jsx("div",{className:"effects-grid",children:xe.map(a=>e.jsxs("button",{className:`effect-btn ${pe===a.id?"active":""}`,onClick:()=>ue(a.id),children:[e.jsx("span",{className:"effect-icon",children:a.icon}),e.jsx("span",{className:"effect-name",children:a.name})]},a.id))})]})]}),_=()=>e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"settings-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(oa,{className:"card-icon"}),e.jsx("h3",{children:"ðŸ”§ Ses Kalitesi"})]}),e.jsxs("div",{className:"advanced-options",children:[e.jsxs("div",{className:"option-row",children:[e.jsx("label",{children:"Bit HÄ±zÄ± (Bitrate)"}),e.jsxs("select",{value:l.audio_bitrate,onChange:a=>f("audio_bitrate",parseInt(a.target.value)),children:[e.jsx("option",{value:"32000",children:"32 kbps (DÃ¼ÅŸÃ¼k)"}),e.jsx("option",{value:"64000",children:"64 kbps (Normal)"}),e.jsx("option",{value:"96000",children:"96 kbps (YÃ¼ksek)"}),e.jsx("option",{value:"128000",children:"128 kbps (En Ä°yi)"})]})]}),e.jsxs("div",{className:"option-row",children:[e.jsx("label",{children:"Ã–rnekleme HÄ±zÄ±"}),e.jsxs("select",{value:l.sample_rate,onChange:a=>f("sample_rate",parseInt(a.target.value)),children:[e.jsx("option",{value:"24000",children:"24 kHz"}),e.jsx("option",{value:"48000",children:"48 kHz (Ã–nerilen)"})]})]}),e.jsxs("div",{className:"toggle-row",children:[e.jsxs("div",{children:[e.jsx("span",{children:"Stereo Ses"}),e.jsx("span",{className:"option-desc",children:"MÃ¼zik paylaÅŸÄ±mÄ± iÃ§in"})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:l.stereo_audio,onChange:a=>f("stereo_audio",a.target.checked)}),e.jsx("span",{className:"slider"})]})]})]})]}),e.jsxs("div",{className:"settings-card danger-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(da,{className:"card-icon"}),e.jsx("h3",{children:"ðŸ”„ AyarlarÄ± SÄ±fÄ±rla"})]}),e.jsx("p",{className:"card-description",children:"TÃ¼m ses ayarlarÄ±nÄ± varsayÄ±lan deÄŸerlerine dÃ¶ndÃ¼rÃ¼r"}),e.jsxs("button",{className:"reset-btn",onClick:ve,children:[e.jsx(da,{})," VarsayÄ±lana DÃ¶n"]})]})]});return e.jsx("div",{className:"voice-settings-overlay",onClick:t,children:e.jsxs("div",{className:"voice-settings-panel premium",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"voice-settings-header",children:[e.jsx("h2",{children:"ðŸŽ™ï¸ Ses AyarlarÄ±"}),e.jsx("button",{className:"close-btn",onClick:t,children:e.jsx(ta,{})})]}),e.jsx("div",{className:"settings-tabs",children:De.map(a=>e.jsxs("button",{className:`tab-btn ${z===a.id?"active":""}`,onClick:()=>Y(a.id),children:[a.icon,e.jsx("span",{children:a.label})]},a.id))}),e.jsxs("div",{className:"voice-settings-content",children:[z==="input"&&be(),z==="output"&&re(),z==="noise"&&oe(),z==="voice"&&ye(),z==="effects"&&B(),z==="advanced"&&_()]})]})})},we=(t,c=256)=>{if(!t)return`https://ui-avatars.com/api/?name=User&background=5865f2&color=fff&bold=true&size=${c}`;const m=La.hash(t),v=parseInt(m.substring(0,8),16)%360;return`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=${v.toString(16).padStart(2,"0")}${((v+60)%360).toString(16).padStart(2,"0")}${((v+120)%360).toString(16).padStart(2,"0")}&color=fff&bold=true&size=${c}`},Wa=t=>t?t.replace(/_100x100\./gi,".").replace(/_150x150\./gi,".").replace(/_50x50\./gi,".").replace(/\?.*$/,""):null,Ha=({roomName:t,onClose:c,isMinimized:m,onToggleMinimize:v,getRealUserAvatar:k,allUsers:T=[],currentUserProfile:x})=>{const{isInVoice:y,isMuted:b,isDeafened:w,isVideoEnabled:$,isScreenSharing:S,isSpatialAudioEnabled:N,vadSensitivity:z,isNoiseSuppressionEnabled:Y,screenShareQuality:l,screenShareFPS:F,isRecording:u,recordingDuration:E,isPTTMode:U,isPTTActive:I,pttKey:pe,includeSystemAudio:ue,connectedUsers:xe=[],isReconnecting:_e=!1,connectionStats:ua={},startStatsMonitoring:ee,stopStatsMonitoring:D,toggleMute:ae,toggleDeafened:se,toggleCamera:te,toggleScreenShare:P,toggleSpatialAudio:O,updateVadSensitivity:he,toggleNoiseSuppression:me,updateScreenQuality:q,updateScreenFPS:ge,toggleSystemAudio:De,togglePTTMode:Be,updatePTTKey:Ke,startRecording:Ne,stopRecording:Q,downloadRecording:f,leaveVoiceRoom:fe,localAudioStream:ne,remoteStreams:ie={},remoteVolumes:ve={},setRemoteVolume:be,localCameraStream:re,localScreenStream:oe,isTalking:ye=!1}=pa(),B=$,{user:_}=Ia(),a=de.useMemo(()=>{const s=[...xe];if(_&&!s.some(n=>n.username===_.username))s.push({username:_.username,isMuted:b,isCameraOn:B,isScreenSharing:S,isTalking:ye,isLocal:!0});else if(_){const n=s.findIndex(p=>p.username===_.username);n>=0&&(s[n]={...s[n],isMuted:b,isCameraOn:B,isScreenSharing:S,isTalking:ye,isLocal:!0})}return s},[xe,_,b,B,S]),h=o.useCallback(s=>{let n=null;if(x&&s===_?.username&&x.avatar&&typeof x.avatar=="string"&&(x.avatar.startsWith("http")||x.avatar.startsWith("blob:")?n=x.avatar:n=`https://www.pawscord.com${x.avatar.startsWith("/")?"":"/"}${x.avatar}`),!n&&k&&(n=k(s)),!n){const p=T.find(i=>i.username===s);p?.avatar&&typeof p.avatar=="string"&&(p.avatar.startsWith("http")||p.avatar.startsWith("blob:")?n=p.avatar:n=`https://www.pawscord.com${p.avatar.startsWith("/")?"":"/"}${p.avatar}`)}return n?Wa(n):we(s,256)},[x,_,k,T]),j=de.useMemo(()=>{const s={...ie};return _?.username&&(re&&(s[`${_.username}_camera`]=re),oe&&(s[`${_.username}_screen`]=oe)),s},[ie,_,re,oe]),[A,L]=o.useState(null),[J,je]=o.useState(null),[xa,Pe]=o.useState(!1),[Ya,Ua]=o.useState({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),[Ce,V]=o.useState(null),[qe,Le]=o.useState(()=>{try{const s=localStorage.getItem("pawscord_voice_volumes");return s?JSON.parse(s):{}}catch{return{}}}),[Te,ha]=o.useState({}),[ma,ze]=o.useState(!1),[ga,fa]=o.useState(!0),[Ve,We]=o.useState("good"),[He,Oe]=o.useState("unknown"),[Ge,Qa]=o.useState(!0),[Ye,Ja]=o.useState(!0),[Ue,va]=o.useState({}),[Qe,ba]=o.useState({}),[ya,ja]=o.useState({}),[R,Je]=o.useState(null),Xe=o.useRef(null);o.useEffect(()=>{const s=()=>{Pe(!0)};return window.addEventListener("openVoiceSettings",s),()=>window.removeEventListener("openVoiceSettings",s)},[]),o.useEffect(()=>{try{localStorage.setItem("pawscord_voice_volumes",JSON.stringify(qe))}catch(s){console.warn("Failed to save volume settings:",s)}},[qe]),o.useEffect(()=>{if(!y)return;const s=async()=>{const p=window.__pawscord_peer_connections__||{};for(const[i,d]of Object.entries(p))if(d&&d.getStats)try{(await d.getStats()).forEach(r=>{r.type==="candidate-pair"&&r.state==="succeeded"&&ha(C=>({...C,[i]:{rtt:Math.round((r.currentRoundTripTime||0)*1e3),packetLoss:r.packetsLost&&r.packetsSent?Math.round(r.packetsLost/r.packetsSent*100*10)/10:0,quality:(r.currentRoundTripTime||0)<.1?"excellent":(r.currentRoundTripTime||0)<.2?"good":"poor"}}))})}catch(g){console.warn("[Quality] Failed to get stats for",i,g)}},n=setInterval(s,3e3);return s(),()=>clearInterval(n)},[y]),o.useEffect(()=>(y&&ee&&ee(),()=>{D&&D()}),[y,ee,D]),o.useEffect(()=>{if(!ne||b||!y){ze(!1);return}try{const s=window.AudioContext||window.webkitAudioContext,n=new s,p=n.createAnalyser();p.fftSize=2048,p.smoothingTimeConstant=.8;const i=n.createMediaStreamSource(ne);i.connect(p);const d=new Uint8Array(p.frequencyBinCount);let g=0;const C=setInterval(()=>{p.getByteFrequencyData(d);const W=d.slice(80,160),M=Math.max(...W),X=W.reduce((le,Ie)=>le+Ie,0)/W.length,G=d.slice(10,40),Ee=G.reduce((le,Ie)=>le+Ie,0)/G.length;M>180&&X>100&&X>Ee*1.5?(g++,g>3&&ze(!0)):(g=0,M<120&&ze(!1))},1e3);return()=>{clearInterval(C),i.disconnect(),n.close()}}catch(s){console.warn("[Echo] Detection failed:",s)}},[ne,b,y]),o.useEffect(()=>{if(!y)return;const s=navigator.connection||navigator.mozConnection||navigator.webkitConnection,n=()=>{if(!s){We("good"),Oe("unknown");return}const i=s.effectiveType||"unknown";Oe(i);const d=s.downlink||10,g=s.rtt||50;let r="good";i==="4g"&&d>=5&&g<100?r="excellent":i==="slow-2g"||d<1||g>300?r="poor":i==="2g"||i==="3g"||d<3||g>150?r="good":r="excellent",We(r),Ge&&q&&(r==="poor"&&l!=="720p"?(console.log("ðŸ“¶ [Network] Poor connection detected, downgrading to 720p"),q("720p")):r==="excellent"&&l==="720p"&&(console.log("ðŸ“¶ [Network] Excellent connection, upgrading to 1080p"),q("1080p")))};n(),s&&s.addEventListener("change",n);const p=setInterval(n,1e4);return()=>{clearInterval(p),s&&s.removeEventListener("change",n)}},[y,Ge,l,q]),o.useEffect(()=>{if(!Ye||!y)return;const n=setInterval(()=>{const p=document.querySelectorAll("audio[data-username]"),i={},d={...Qe};p.forEach(g=>{const r=g.getAttribute("data-username");if(r)try{const C=new(window.AudioContext||window.webkitAudioContext),W=C.createMediaElementSource(g),M=C.createAnalyser();M.fftSize=256,W.connect(M),M.connect(C.destination);const X=new Uint8Array(M.frequencyBinCount);M.getByteFrequencyData(X);const G=X.reduce((Ee,le)=>Ee+le,0)/X.length;i[r]=G,G>0&&(G<50?d[r]=Math.min(1.5,(d[r]||1)*1.05):G>120&&(d[r]=Math.max(.7,(d[r]||1)*.95))),C.close()}catch(C){console.debug("Audio analysis error (expected):",C.message)}}),va(i),ba(d)},2e3);return()=>clearInterval(n)},[Ye,y,Qe]),o.useEffect(()=>{if(!y)return;const n=setInterval(()=>{const p={};let i=null,d=0;Object.entries(Ue).forEach(([g,r])=>{r>30?(p[g]=!0,r>d&&(d=r,i=g)):p[g]=!1}),ja(p),i&&d>50?Je(i):d===0&&Je(null)},100);return()=>clearInterval(n)},[y,Ue]),o.useEffect(()=>{const s=document.createElement("style");return s.id="voice-fullscreen-styles",s.textContent=`
            /* Tam Ekran Video Stilleri */
            div:fullscreen video,
            div:-webkit-full-screen video,
            div:-moz-full-screen video,
            div:-ms-fullscreen video {
                width: 100% !important;
                height: 100% !important;
                object-fit: contain !important;
                background: #000 !important;
            }

            /* Tam Ekran Container */
            div:fullscreen,
            div:-webkit-full-screen,
            div:-moz-full-screen,
            div:-ms-fullscreen {
                background: #000 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            /* Tam Ekran Kontrolleri */
            div:fullscreen .hover-actions,
            div:-webkit-full-screen .hover-actions,
            div:-moz-full-screen .hover-actions,
            div:-ms-fullscreen .hover-actions {
                opacity: 1 !important;
                z-index: 9999 !important;
            }

            /* ðŸ”¥ YENÄ°: Badge AnimasyonlarÄ± */
            @keyframes badgePulse {
                0%, 100% {
                    transform: scale(1);
                    box-shadow: 0 4px 16px rgba(88, 101, 242, 0.6), 0 0 0 2px rgba(255, 255, 255, 0.2);
                }
                50% {
                    transform: scale(1.05);
                    box-shadow: 0 6px 20px rgba(88, 101, 242, 0.9), 0 0 0 3px rgba(255, 255, 255, 0.4);
                }
            }

            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                    transform: scale(1);
                }
                50% {
                    opacity: 0.7;
                    transform: scale(1.2);
                }
            }

            /* ðŸ”¥ YENÄ°: Talking Indicator Wave Animations */
            @keyframes wave1 {
                0%, 100% { height: 12px; }
                50% { height: 20px; }
            }
            @keyframes wave2 {
                0%, 100% { height: 16px; }
                50% { height: 24px; }
            }
            @keyframes wave3 {
                0%, 100% { height: 12px; }
                50% { height: 20px; }
            }

            /* ðŸ”¥ YENÄ°: Avatar Talking Pulse Animation */
            @keyframes talkingPulse {
                0%, 100% {
                    box-shadow: 0 0 0 0 rgba(67, 181, 129, 0.7);
                    transform: scale(1);
                }
                50% {
                    box-shadow: 0 0 0 15px rgba(67, 181, 129, 0);
                    transform: scale(1.02);
                }
            }
        `,document.head.appendChild(s),()=>{const n=document.getElementById("voice-fullscreen-styles");n&&n.remove()}},[]);const{isMobile:Ze}=Ma(),ea=A?"fullscreen":m?"minimized":Ze?"mobile":"grid";o.useEffect(()=>{y||c()},[y,c]);const ka=s=>Ze?{cols:1,rows:s}:s<=1?{cols:1,rows:1}:s<=4?{cols:2,rows:2}:s<=6?{cols:3,rows:2}:s<=9?{cols:3,rows:3}:{cols:4,rows:Math.ceil(s/4)},Sa=de.useMemo(()=>{let s=a.length;return a.forEach(n=>{const p=n.username;j[`${p}_screen`]&&n.isScreenSharing&&s++}),s},[a,j]),ke=a.length,{cols:aa,rows:sa}=ka(Sa),wa=o.useCallback(async s=>{window.location.hash=`#/dm/${s.username}`},[]),_a=o.useCallback(async s=>{try{(await fetch("/api/friends/send_request/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`},body:JSON.stringify({username:s.username})})).ok?Z.success(`âœ… ${s.username} kullanÄ±cÄ±sÄ±na arkadaÅŸlÄ±k isteÄŸi gÃ¶nderildi!`):Z.error("âŒ ArkadaÅŸlÄ±k isteÄŸi gÃ¶nderilemedi")}catch(n){console.error("Friend request error:",n),Z.error("âŒ Bir hata oluÅŸtu")}},[]),Na=o.useCallback(async s=>{try{(await fetch("/api/users/block/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`},body:JSON.stringify({username:s.username})})).ok?Z.success(`âœ… ${s.username} engellendi!`):Z.error("âŒ Engelleme iÅŸlemi baÅŸarÄ±sÄ±z")}catch(n){console.error("Block error:",n),Z.error("âŒ Bir hata oluÅŸtu")}},[]),Ca=o.useCallback(s=>{V(null),window.openUserProfile?window.openUserProfile(s.username):window.location.hash=`#/profile/${s.username}`},[]),Ta=o.useCallback(s=>{Le(n=>({...n,[s.username]:{...n[s.username],isMuted:!n[s.username]?.isMuted}}))},[]),za=o.useCallback((s,n)=>{const p=Math.max(0,Math.min(150,n));Le(d=>({...d,[s.username]:{...d[s.username],volume:p}})),document.querySelectorAll(`audio[data-username="${s.username}"]`).forEach(d=>{d.volume=p/100,console.log(`ðŸ”Š [Volume] Set ${s.username} to ${p}%`)})},[]),Aa=()=>{const s=[];return u&&s.push(e.jsxs("span",{style:{background:"rgba(237,66,69,0.2)",color:"#ed4245",border:"1px solid rgba(237,66,69,0.4)",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"6px"},children:["âºï¸ KayÄ±tta (",Math.floor(E/60).toString().padStart(2,"0"),":",Math.floor(E%60).toString().padStart(2,"0"),")"]},"rec")),S&&s.push(e.jsxs("span",{style:{background:"rgba(88,101,242,0.15)",color:"#8893ff",border:"1px solid rgba(88,101,242,0.35)",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"6px"},children:["ðŸ–¥ï¸ PaylaÅŸÄ±lÄ±yor ",l," â€¢ ",F,"fps",ue?" â€¢ ðŸ”Š Sistem":""]},"ss")),U&&s.push(e.jsxs("span",{style:{background:"rgba(250,166,26,0.18)",color:"#faa61a",border:"1px solid rgba(250,166,26,0.35)",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"6px"},children:["ðŸŽ™ï¸ PTT (",pe,") ",I?"â€¢ Aktif":""]},"ptt")),_e&&s.push(e.jsx("span",{style:{background:"rgba(255,255,255,0.08)",color:"#fff",border:"1px solid rgba(255,255,255,0.2)",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",display:"inline-flex",alignItems:"center",gap:"6px"},children:"ðŸ”„ Yeniden baÄŸlanÄ±yor"},"reconnect")),s.length?e.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:s}):null},Ae=s=>s.streamType==="screen"?e.jsxs("div",{style:{position:"absolute",top:"12px",left:"12px",background:"linear-gradient(135deg, #5865f2 0%, #7289da 100%)",color:"#fff",padding:"8px 16px",borderRadius:"12px",fontSize:"13px",fontWeight:700,boxShadow:"0 4px 16px rgba(88, 101, 242, 0.6), 0 0 0 2px rgba(255, 255, 255, 0.2)",zIndex:100,display:"flex",alignItems:"center",gap:"8px",animation:"badgePulse 2s infinite"},children:["ðŸ–¥ï¸ ",e.jsxs("span",{style:{textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)"},children:[s.username," - Ekran PaylaÅŸÄ±yor"]})]}):s.streamType==="camera"?e.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",background:"rgba(67, 181, 129, 0.85)",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"11px",fontWeight:600,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",zIndex:100,display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“¹ Kamera"}):null;if(ea==="minimized")return e.jsx(Ra,{nodeRef:Xe,handle:".mini-drag-handle",defaultPosition:{x:20,y:window.innerHeight-180},bounds:"parent",children:e.jsxs("div",{ref:Xe,style:{position:"fixed",zIndex:9999,background:"linear-gradient(135deg, #1e2124 0%, #2c2f33 50%, #23272a 100%)",borderRadius:"16px",padding:"16px",boxShadow:"0 12px 48px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(88, 101, 242, 0.15)",border:"1px solid rgba(88, 101, 242, 0.1)",minWidth:"320px",maxWidth:"400px",backdropFilter:"blur(12px)",animation:"slideIn 0.3s ease"},children:[e.jsxs("div",{className:"mini-drag-handle",style:{display:"flex",alignItems:"center",gap:"12px",cursor:"move",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#43b581",boxShadow:"0 0 12px #43b581",animation:"pulse 2s infinite"}}),e.jsxs("span",{style:{color:"#fff",fontSize:"14px",fontWeight:600,flex:1},children:["ðŸŽ¤ ",t]}),e.jsxs("div",{style:{background:"rgba(67, 181, 129, 0.2)",borderRadius:"12px",padding:"4px 10px",fontSize:"11px",color:"#43b581",fontWeight:600},children:["ðŸ‘¥ ",ke]}),e.jsx("button",{onClick:v,style:{background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",padding:"6px 10px",color:"#fff",cursor:"pointer",fontSize:"12px",transition:"all 0.2s"},onMouseEnter:s=>s.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:s=>s.target.style.background="rgba(255, 255, 255, 0.1)",children:"â¬†ï¸ AÃ§"})]}),e.jsxs("div",{style:{marginBottom:"12px",maxHeight:"120px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:[a.slice(0,3).map(s=>e.jsxs("div",{onContextMenu:n=>{n.preventDefault(),s.username!==_?.username&&V({user:s,position:{x:n.clientX,y:n.clientY}})},onClick:n=>{s.username!==_?.username&&V({user:s,position:{x:n.clientX,y:n.clientY}})},style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px",background:s.isTalking?"rgba(67, 181, 129, 0.15)":"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:s.isTalking?"1px solid rgba(67, 181, 129, 0.4)":"1px solid transparent",transition:"all 0.2s",cursor:s.username!==_?.username?"pointer":"default"},onMouseEnter:n=>{s.username!==_?.username&&(n.currentTarget.style.background="rgba(67, 181, 129, 0.2)")},onMouseLeave:n=>{n.currentTarget.style.background=s.isTalking?"rgba(67, 181, 129, 0.15)":"rgba(255, 255, 255, 0.05)"},children:[e.jsx("img",{src:h(s.username),alt:s.username,onError:n=>{n.target.onerror=null,n.target.src=we(s.username,64)},style:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover",border:s.isTalking?"2px solid #43b581":"2px solid rgba(255, 255, 255, 0.15)",boxShadow:s.isTalking?"0 0 10px rgba(67, 181, 129, 0.5)":"none",transition:"all 0.3s ease"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{color:"#fff",fontSize:"13px",fontWeight:600},children:[s.username," ",s.isLocal&&"(Siz)"]}),e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"11px"},children:s.isMuted?"ðŸ”‡ Sessiz":s.isTalking?"ðŸ”Š KonuÅŸuyor":"ðŸŽ¤ Aktif"})]}),s.isCameraOn&&e.jsx("span",{style:{fontSize:"14px"},children:"ðŸ“¹"}),s.isScreenSharing&&e.jsx("span",{style:{fontSize:"14px"},children:"ðŸ–¥ï¸"})]},s.username)),ke>3&&e.jsxs("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.5)",fontSize:"11px",padding:"6px"},children:["+",ke-3," daha..."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:[e.jsx(Se,{icon:b?"ðŸ”‡":"ðŸŽ¤",active:!b,onClick:ae,title:b?"Mikrofonu AÃ§":"Mikrofonu Kapat"}),e.jsx(Se,{icon:B?"ðŸ“¹":"ðŸ“·",active:B,onClick:te,title:B?"KamerayÄ± Kapat":"KamerayÄ± AÃ§"}),e.jsx(Se,{icon:"ðŸ–¥ï¸",active:S,onClick:P,title:S?"PaylaÅŸÄ±mÄ± Durdur":"Ekran PaylaÅŸ"}),e.jsx(Se,{icon:"âŒ",danger:!0,onClick:fe,title:"AyrÄ±l"})]})]})});if(ea==="fullscreen"&&A){const s=A.streamType==="screen"?`${A.username}_screen`:`${A.username}_camera`,n=j[s]||j[A.username];return e.jsxs("div",{style:{width:"100%",height:"100%",background:"#000",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.8)",padding:"16px 24px",display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("button",{onClick:()=>L(null),style:{background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",padding:"8px 16px",color:"#fff",cursor:"pointer",fontSize:"14px"},children:"â¬…ï¸ Geri"}),e.jsxs("h3",{style:{color:"#fff",margin:0,flex:1},children:["ðŸ‘¤ ",A.username," ",A.streamType==="screen"&&"ðŸ–¥ï¸ Ekran PaylaÅŸÄ±mÄ±"]})]}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"#1a1a1a"},children:e.jsx(Ga,{user:A,stream:n,fullscreen:!0})}),e.jsx(Oa,{isMuted:b,isDeafened:w,isCameraOn:B,isScreenSharing:S,isSpatialAudio:N,isRecording:u,recordingDuration:E,onToggleMute:ae,onToggleDeafened:se,onToggleCamera:te,onToggleScreenShare:P,onToggleSpatialAudio:O,onStartRecording:Ne,onStopRecording:Q,onLeave:fe})]})}return e.jsxs("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #1e1e1e 0%, #2c2c2c 100%)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"16px 24px",display:"flex",alignItems:"center",gap:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#43b581",boxShadow:"0 0 12px #43b581",animation:"pulse 2s infinite"}}),e.jsxs("h2",{style:{color:"#fff",margin:0,fontSize:"17px",fontWeight:700,flex:1,display:"flex",alignItems:"center",gap:"12px",letterSpacing:"0.3px"},children:["ðŸŽ™ï¸ ",t,Aa(),Ve==="poor"&&e.jsx("div",{style:{background:"rgba(240, 71, 71, 0.2)",border:"1px solid #f04747",borderRadius:"6px",padding:"4px 8px",fontSize:"12px",color:"#f04747",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:"âš ï¸ ZayÄ±f BaÄŸlantÄ±"}),Ve==="excellent"&&He!=="unknown"&&e.jsxs("div",{style:{background:"rgba(67, 181, 129, 0.2)",border:"1px solid #43b581",borderRadius:"6px",padding:"4px 8px",fontSize:"12px",color:"#43b581",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:["ðŸ“¶ ",He.toUpperCase()]})]}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px"},children:["ðŸ‘¥ ",ke," kiÅŸi"]}),e.jsx("button",{onClick:v,style:{background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",padding:"8px 16px",color:"#fff",cursor:"pointer",fontSize:"13px"},children:"â¬‡ï¸ KÃ¼Ã§Ã¼lt"})]}),e.jsx("div",{style:{flex:1,padding:"20px",display:"flex",flexDirection:"column",overflow:"auto",position:"relative",minHeight:0},children:(()=>{const s=a.filter(p=>p.isScreenSharing&&j[`${p.username}_screen`]);if(s.length>0){const p=[];s.forEach(r=>{const C=j[`${r.username}_screen`];C&&p.push({key:`${r.username}_screen`,username:r.username,type:"screen",component:e.jsx($e,{user:{...r,streamType:"screen"},stream:C,isActive:!1,isPinned:!1,onExpand:()=>L({...r,streamType:"screen"}),onPin:()=>{},onContextMenu:W=>V(W),badge:Ae({...r,streamType:"screen"}),connectionQuality:Te[r.username],getUserAvatar:h},`${r.username}_screen`)})}),a.forEach(r=>{const C=j[`${r.username}_camera`]||j[r.username];(C&&C.active||r.isLocal)&&p.push({key:`${r.username}_camera`,username:r.username,type:"camera",component:e.jsx($e,{user:{...r,streamType:"camera",volume:ve[r.username]||100,onVolumeChange:M=>be(r.username,M),isTalking:ya[r.username]||!1},stream:C,isActive:R===r.username,isPinned:J===r.username,onExpand:()=>L({...r,streamType:"camera"}),onPin:()=>je(J===r.username?null:r.username),onContextMenu:M=>V(M),badge:Ae(r),connectionQuality:Te[r.username],getUserAvatar:h},`${r.username}_camera`)})});const i=p.length;let d,g;return i<=2?(d=i,g=1):i<=4?(d=2,g=2):i<=6?(d=3,g=2):(d=3,g=Math.ceil(i/3)),e.jsx("div",{style:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:`repeat(${d}, 1fr)`,gridTemplateRows:`repeat(${g}, 1fr)`,gap:"16px",padding:"0",position:"relative"},children:p.map((r,C)=>e.jsx("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",zIndex:1,isolation:"isolate"},children:r.component},r.key))})}else return a.some(i=>{const d=j[`${i.username}_camera`]||j[i.username];return d&&d.active})?e.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${aa}, 1fr)`,gridTemplateRows:`repeat(${sa}, 1fr)`,gap:"16px",minHeight:"400px",height:"100%"},children:a.map(i=>{const d=j[`${i.username}_camera`]||(i.isLocal?null:j[i.username]);return e.jsx($e,{user:{...i,streamType:"camera",volume:ve[i.username]||100,onVolumeChange:g=>be(i.username,g)},stream:d,isActive:R===i.username,isPinned:J===i.username,onExpand:()=>L({...i,streamType:"camera"}),onPin:()=>je(J===i.username?null:i.username),onContextMenu:g=>V(g),badge:Ae({...i,streamType:"camera"}),connectionQuality:Te[i.username],getUserAvatar:h},`${i.username}_camera`)})}):e.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${Math.min(aa,3)}, 1fr)`,gridTemplateRows:`repeat(${sa}, 1fr)`,gap:"24px",padding:"40px",alignItems:"center",justifyContent:"center"},children:a.map(i=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"32px",borderRadius:"16px",background:R===i.username?"linear-gradient(135deg, rgba(88, 101, 242, 0.25) 0%, rgba(114, 137, 218, 0.15) 100%)":"rgba(47, 49, 54, 0.5)",border:R===i.username?"2px solid rgba(88, 101, 242, 0.9)":"2px solid rgba(79, 84, 92, 0.3)",boxShadow:R===i.username?"0 8px 32px rgba(88, 101, 242, 0.4), 0 0 20px rgba(88, 101, 242, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",transform:R===i.username?"scale(1.05)":"scale(1)",animation:"slideIn 0.4s ease forwards"},onClick:()=>V({user:i,position:{x:window.innerWidth/2,y:window.innerHeight/2}}),children:[e.jsx("div",{style:{width:"140px",height:"140px",borderRadius:"50%",overflow:"hidden",border:`5px solid ${R===i.username?"#5865f2":"#40444b"}`,boxShadow:R===i.username?"0 8px 24px rgba(88, 101, 242, 0.6), inset 0 0 20px rgba(88, 101, 242, 0.2)":"0 4px 12px rgba(0, 0, 0, 0.4)",animation:R===i.username?"pulse 1.5s infinite":"none",position:"relative"},children:e.jsx("img",{src:h(i.username),alt:i.username,onError:d=>{d.target.onerror=null,d.target.src=we(i.username,256)},style:{width:"100%",height:"100%",objectFit:"cover",filter:R===i.username?"brightness(1.1)":"brightness(0.95)"}})}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:R===i.username?"#dee0fc":"#fff",textAlign:"center",textShadow:"0 2px 8px rgba(0, 0, 0, 0.7)",letterSpacing:"0.3px"},children:i.username}),e.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"22px",marginTop:"4px"},children:[i.isMuted&&e.jsx("span",{title:"Mikrofon KapalÄ±",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5))"},children:"ðŸ”‡"}),i.isDeafened&&e.jsx("span",{title:"KulaklÄ±k KapalÄ±",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5))"},children:"ðŸ”ˆ"})]})]},i.username))})})()}),ma&&ga&&e.jsxs("div",{style:{position:"absolute",bottom:"100px",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, rgba(250, 166, 26, 0.95) 0%, rgba(237, 66, 69, 0.95) 100%)",color:"#fff",padding:"16px 24px",borderRadius:"12px",zIndex:1e3,display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 8px 32px rgba(250, 166, 26, 0.6)",animation:"pulse 2s infinite",maxWidth:"90%"},children:[e.jsx("div",{style:{fontSize:"24px",animation:"pulse 1.5s infinite"},children:"âš ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",fontSize:"15px"},children:"Echo Tespit Edildi!"}),e.jsx("div",{style:{fontSize:"13px",opacity:.9},children:"KulaklÄ±k kullanmanÄ±z Ã¶nerilir. HoparlÃ¶r kullanÄ±mÄ± echo'ya neden olur."})]}),e.jsx("button",{onClick:()=>fa(!1),style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"6px",color:"#fff",padding:"6px 12px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Kapat"})]}),xa&&e.jsx(Va,{onClose:()=>Pe(!1),channelId:t}),Ce&&e.jsx($a,{user:Ce.user,position:Ce.position,onClose:()=>V(null),onSendMessage:wa,onAddFriend:_a,onBlock:Na,onViewProfile:Ca,onMuteUser:Ta,onAdjustVolume:za,currentUser:_,isInVoiceChat:!0}),e.jsx("style",{children:`
                @keyframes pulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.5; }
                }
                @keyframes talkingPulse {
                    0%, 100% { 
                        box-shadow: 0 0 0 0 rgba(67, 181, 129, 0.4);
                        transform: scale(1);
                    }
                    50% { 
                        box-shadow: 0 0 0 8px rgba(67, 181, 129, 0);
                        transform: scale(1.03);
                    }
                }
                @keyframes wave1 {
                    0%, 100% { height: 8px; }
                    50% { height: 16px; }
                }
                @keyframes wave2 {
                    0%, 100% { height: 12px; }
                    50% { height: 20px; }
                }
                @keyframes wave3 {
                    0%, 100% { height: 8px; }
                    50% { height: 14px; }
                }
                @keyframes badgePulse {
                    0%, 100% { 
                        box-shadow: 0 4px 16px rgba(88, 101, 242, 0.6), 0 0 0 2px rgba(255, 255, 255, 0.2);
                    }
                    50% { 
                        box-shadow: 0 4px 24px rgba(88, 101, 242, 0.8), 0 0 0 3px rgba(255, 255, 255, 0.3);
                    }
                }
                @keyframes slideIn {
                    from { opacity: 0; transform: translateY(10px) scale(0.95); }
                    to { opacity: 1; transform: translateY(0) scale(1); }
                }
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes connectionGlow {
                    0%, 100% { box-shadow: 0 0 12px rgba(67, 181, 129, 0.3); }
                    50% { box-shadow: 0 0 20px rgba(67, 181, 129, 0.6); }
                }
                @keyframes screenShareGlow {
                    0%, 100% { border-color: rgba(88, 101, 242, 0.5); }
                    50% { border-color: rgba(88, 101, 242, 0.9); }
                }
                
                /* Smooth grid transitions */
                .voice-grid-item {
                    animation: slideIn 0.3s ease forwards;
                }
                
                /* Video card hover effects */
                .voice-video-card:hover {
                    transform: scale(1.01);
                    z-index: 10;
                }
                
                /* Active speaker highlight */
                .voice-active-speaker {
                    animation: connectionGlow 2s ease-in-out infinite;
                }
                
                /* Screen share border animation */
                .voice-screen-share {
                    animation: screenShareGlow 2s ease-in-out infinite;
                }
            `})]})},$e=de.memo(({user:t,stream:c,isActive:m,isPinned:v,onExpand:k,onPin:T,onContextMenu:x,compact:y=!1,badge:b,connectionQuality:w,getUserAvatar:$})=>{const S=o.useRef(null),N=o.useRef(null),[z,Y]=o.useState(!1);o.useEffect(()=>{S.current&&c&&(S.current.srcObject=c)},[c]),o.useEffect(()=>{if(N.current&&c&&!t.isLocal){const u=c.getAudioTracks();if(u.length>0){N.current.srcObject=new MediaStream(u);const E=(t.volume||100)/100;N.current.volume=Math.min(2,Math.max(0,E))}}},[c,t.isLocal,t.username,t.volume]);const l=o.useCallback(u=>{u.preventDefault(),x&&t.username!==t.isLocal&&x({user:t,position:{x:u.clientX,y:u.clientY}})},[x,t]),F=o.useCallback(u=>{!t.isLocal&&x&&x({user:t,position:{x:u.clientX,y:u.clientY}})},[t,x]);return e.jsxs("div",{onContextMenu:l,onClick:F,onMouseEnter:()=>Y(!0),onMouseLeave:()=>Y(!1),style:{background:"linear-gradient(135deg, #2c2f33 0%, #23272a 100%)",borderRadius:"16px",overflow:"hidden",position:"relative",border:m?"3px solid #43b581":v?"3px solid #5865f2":"1px solid rgba(255, 255, 255, 0.1)",boxShadow:m?"0 0 20px rgba(67, 181, 129, 0.5)":"0 4px 16px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease",cursor:t.isLocal?"default":"pointer",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[!t.isLocal&&c&&e.jsx("audio",{ref:N,autoPlay:!0,playsInline:!0,"data-username":t.username,style:{display:"none"}}),e.jsxs("div",{style:{width:"100%",height:"100%",background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center"},children:[b,c&&c.active&&c.getVideoTracks().length>0?e.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,muted:t.isLocal===!0,style:{width:"100%",height:"100%",objectFit:t.streamType==="screen"?"contain":"cover",backgroundColor:t.streamType==="screen"?"#000":"#1a1a1a"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",background:"linear-gradient(135deg, #36393f 0%, #2f3136 50%, #202225 100%)",position:"relative"},children:[e.jsx("div",{style:{position:"relative",padding:"8px",borderRadius:"50%",background:t.isTalking?"linear-gradient(135deg, #43b581, #3ca374)":"transparent",boxShadow:t.isTalking?"0 0 20px rgba(67, 181, 129, 0.6), 0 0 40px rgba(67, 181, 129, 0.3)":"none",transition:"all 0.3s ease",animation:t.isTalking?"talkingPulse 1s ease-in-out infinite":"none"},children:e.jsx("img",{src:$(t.username),alt:t.username,onError:u=>{u.target.onerror=null,u.target.src=we(t.username,256)},style:{width:"140px",height:"140px",borderRadius:"50%",objectFit:"cover",border:"5px solid #40444b",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",display:"block"},loading:"lazy"})}),e.jsx("div",{style:{color:"#fff",fontSize:"18px",fontWeight:700,textShadow:"0 2px 8px rgba(0, 0, 0, 0.7)",letterSpacing:"0.5px"},children:t.username}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 14px",background:t.isMuted?"rgba(240, 71, 71, 0.2)":"rgba(67, 181, 129, 0.2)",borderRadius:"16px",border:t.isMuted?"1px solid rgba(240, 71, 71, 0.4)":"1px solid rgba(67, 181, 129, 0.4)"},children:[e.jsx("span",{style:{fontSize:"16px"},children:t.isMuted?"ðŸ”‡":"ðŸŽ¤"}),e.jsx("span",{style:{color:t.isMuted?"#f04747":"#43b581",fontSize:"13px",fontWeight:600},children:t.isMuted?"Sessiz":t.isTalking?"KonuÅŸuyor...":"Dinliyor"})]})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent)",padding:"12px 16px",display:"flex",alignItems:"center",gap:"8px",zIndex:10},children:[t.isTalking&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx("div",{style:{width:"3px",height:"12px",background:"#43b581",borderRadius:"2px",animation:"wave1 0.6s ease-in-out infinite"}}),e.jsx("div",{style:{width:"3px",height:"16px",background:"#43b581",borderRadius:"2px",animation:"wave2 0.6s ease-in-out infinite 0.1s"}}),e.jsx("div",{style:{width:"3px",height:"12px",background:"#43b581",borderRadius:"2px",animation:"wave3 0.6s ease-in-out infinite 0.2s"}})]}),!t.isLocal&&w&&e.jsx("div",{title:`RTT: ${w.rtt}ms, Packet Loss: ${w.packetLoss}%`,style:{fontSize:"16px",filter:w.quality==="excellent"?"none":w.quality==="good"?"hue-rotate(30deg)":"hue-rotate(90deg) saturate(2)",opacity:.9},children:w.quality==="excellent"||w.quality==="good"?"ðŸ“¶":"âš ï¸"}),e.jsxs("span",{onClick:u=>{u.stopPropagation(),t.isLocal||(window.openUserProfile?window.openUserProfile(t.username):window.location.hash=`#/profile/${t.username}`)},style:{color:"#fff",fontSize:"14px",fontWeight:600,flex:1,cursor:t.isLocal?"default":"pointer",textDecoration:t.isLocal?"none":"underline",textDecorationColor:"rgba(255, 255, 255, 0.3)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.username," ",t.streamType==="screen"&&"ðŸ–¥ï¸ Ekran"]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[t.isMuted&&e.jsx("span",{style:{fontSize:"16px"},children:"ðŸ”‡"}),t.streamType==="camera"&&t.isCameraOn&&e.jsx("span",{style:{fontSize:"16px"},children:"ðŸ“¹"}),m&&e.jsx("span",{style:{fontSize:"16px"},children:"ðŸ”Š"})]})]}),e.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px",display:"flex",gap:"6px",opacity:z?1:0,transition:"opacity 0.25s ease, transform 0.25s ease",transform:z?"translateY(0)":"translateY(-6px)",zIndex:20,pointerEvents:z?"auto":"none"},children:[e.jsx(Fe,{icon:v?"ðŸ“Œ":"ðŸ“",onClick:u=>{u.stopPropagation(),T()},title:v?"Sabitlemeyi KaldÄ±r":"Sabitle",bgColor:"rgba(88, 101, 242, 0.9)"}),e.jsx(Fe,{icon:"â›¶",onClick:u=>{u.stopPropagation(),k()},title:"Panelde GeniÅŸlet",bgColor:"rgba(67, 181, 129, 0.9)"}),e.jsx(Fe,{icon:"ðŸ–¥ï¸",onClick:u=>{u.stopPropagation();const E=S.current;if(E){const I=E.parentElement?.parentElement||E;I.requestFullscreen?I.requestFullscreen():I.webkitRequestFullscreen?I.webkitRequestFullscreen():I.mozRequestFullScreen?I.mozRequestFullScreen():I.msRequestFullscreen&&I.msRequestFullscreen()}},title:"Tam Ekran Ä°zle",bgColor:"rgba(250, 166, 26, 0.9)"}),!t.isLocal&&z&&e.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.9)",borderRadius:"10px",padding:"6px 10px",display:"flex",alignItems:"center",gap:"6px",minWidth:"100px",backdropFilter:"blur(8px)",border:"1px solid rgba(255, 255, 255, 0.1)",animation:"fadeIn 0.2s ease"},children:[e.jsx("span",{style:{fontSize:"12px"},children:(t.volume||100)===0?"ðŸ”‡":(t.volume||100)>100?"ðŸ”Š":"ðŸ”‰"}),e.jsx("input",{type:"range",min:"0",max:"200",value:t.volume||100,onChange:u=>{u.stopPropagation(),t.onVolumeChange&&t.onVolumeChange(parseInt(u.target.value))},style:{flex:1,cursor:"pointer",height:"4px"},onClick:u=>u.stopPropagation()}),e.jsxs("span",{style:{fontSize:"10px",color:"#fff",minWidth:"30px",fontWeight:600},children:[t.volume||100,"%"]})]})]}),e.jsx("style",{children:`
                div:hover .hover-actions {
                    opacity: 1;
                }
            `})]})},(t,c)=>t.user.username===c.user.username&&t.stream===c.stream&&t.user.isCameraOn===c.user.isCameraOn&&t.user.isScreenSharing===c.user.isScreenSharing&&t.user.isMuted===c.user.isMuted&&t.isActive===c.isActive&&t.isPinned===c.isPinned&&t.compact===c.compact),Oa=({isMuted:t,isDeafened:c,isCameraOn:m,isScreenSharing:v,isSpatialAudio:k,isRecording:T,recordingDuration:x,onToggleMute:y,onToggleDeafened:b,onToggleCamera:w,onToggleScreenShare:$,onToggleSpatialAudio:S,onStartRecording:N,onStopRecording:z,onDownloadRecording:Y,onLeave:l,onSettings:F})=>{const u=E=>{const U=Math.floor(E/60).toString().padStart(2,"0"),I=Math.floor(E%60).toString().padStart(2,"0");return`${U}:${I}`};return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(32, 34, 37, 0.98) 0%, rgba(24, 25, 28, 1) 100%)",padding:"12px 20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",borderTop:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.4)",flexShrink:0,minHeight:"70px",position:"relative",zIndex:100},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx(H,{icon:t?"ðŸ”‡":"ðŸŽ¤",active:!t,danger:t,onClick:y,title:t?"Mikrofonu AÃ§":"Mikrofonu Kapat"}),e.jsx(H,{icon:c?"ðŸ”ˆ":"ðŸŽ§",active:!c,danger:c,onClick:b,title:c?"KulaklÄ±ÄŸÄ± AÃ§":"KulaklÄ±ÄŸÄ± Kapat"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",padding:"0 16px",borderLeft:"1px solid rgba(255, 255, 255, 0.1)",borderRight:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(H,{icon:m?"ðŸ“¹":"ðŸ“·",active:m,onClick:w,title:m?"KamerayÄ± Kapat":"KamerayÄ± AÃ§"}),e.jsx(H,{icon:"ðŸ–¥ï¸",active:v,special:v,onClick:$,title:v?"PaylaÅŸÄ±mÄ± Durdur":"Ekran PaylaÅŸ"}),S&&e.jsx(H,{icon:"ðŸ”Š",active:k,onClick:S,title:k?"3D Ses (AÃ§Ä±k)":"3D Ses (KapalÄ±)",small:!0})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[N&&z&&e.jsx(H,{icon:T?"â¹ï¸":"âºï¸",active:T,danger:T,onClick:T?z:N,title:T?`KaydÄ± Durdur (${u(x)})`:"KayÄ±t BaÅŸlat",label:T?u(x):null}),F&&e.jsx(H,{icon:"âš™ï¸",onClick:F,title:"Ayarlar",subtle:!0})]}),e.jsx(H,{icon:"ðŸ“ž",danger:!0,onClick:l,title:"AyrÄ±l",isLeave:!0})]})},H=({icon:t,active:c,danger:m,special:v,subtle:k,small:T,isLeave:x,onClick:y,title:b,label:w})=>{const $=()=>x?"linear-gradient(135deg, #ed4245 0%, #c03537 100%)":m&&c?"rgba(240, 71, 71, 0.4)":m?"rgba(240, 71, 71, 0.15)":v?"linear-gradient(135deg, #5865f2 0%, #4752c4 100%)":c?"rgba(67, 181, 129, 0.25)":k?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.1)",S=()=>x?"none":m&&c?"2px solid rgba(240, 71, 71, 0.6)":c?"2px solid rgba(67, 181, 129, 0.5)":v?"2px solid rgba(88, 101, 242, 0.5)":"2px solid transparent";return e.jsxs("button",{onClick:y,title:b,style:{background:$(),border:S(),borderRadius:x?"50%":"12px",width:x?"48px":T?"40px":"48px",height:x?"48px":T?"40px":"48px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:T?"16px":"20px",color:"#fff",transition:"all 0.2s ease",boxShadow:x?"0 4px 15px rgba(237, 66, 69, 0.4)":c?"0 2px 10px rgba(67, 181, 129, 0.3)":"none",transform:"scale(1)"},onMouseEnter:N=>{N.currentTarget.style.transform="scale(1.1)",N.currentTarget.style.boxShadow=x?"0 6px 20px rgba(237, 66, 69, 0.6)":"0 4px 15px rgba(255, 255, 255, 0.2)"},onMouseLeave:N=>{N.currentTarget.style.transform="scale(1)",N.currentTarget.style.boxShadow=x?"0 4px 15px rgba(237, 66, 69, 0.4)":c?"0 2px 10px rgba(67, 181, 129, 0.3)":"none"},children:[e.jsx("span",{children:t}),w&&e.jsx("span",{style:{fontSize:"9px",marginTop:"2px",fontWeight:600},children:w})]})},Se=({icon:t,active:c,danger:m,onClick:v,title:k})=>e.jsx("button",{onClick:v,title:k,style:{background:c?"rgba(88, 101, 242, 0.8)":m?"rgba(237, 66, 69, 0.8)":"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease"},children:t}),Fe=({icon:t,onClick:c,title:m,bgColor:v="rgba(0, 0, 0, 0.7)"})=>e.jsx("button",{onClick:c,title:m,style:{background:v,border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"14px",color:"#fff",fontWeight:"bold",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},onMouseEnter:k=>{k.currentTarget.style.transform="scale(1.1)",k.currentTarget.style.boxShadow="0 4px 16px rgba(255, 255, 255, 0.3)"},onMouseLeave:k=>{k.currentTarget.style.transform="scale(1)",k.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)"},children:t}),Ga=({stream:t,fullscreen:c})=>{const m=o.useRef(null);return o.useEffect(()=>{m.current&&t&&(m.current.srcObject=t)},[t]),e.jsx("video",{ref:m,autoPlay:!0,playsInline:!0,muted:!1,style:{width:"100%",height:"100%",objectFit:c?"contain":"cover",background:"#000"}})},cs=de.memo(Ha);export{cs as default};
