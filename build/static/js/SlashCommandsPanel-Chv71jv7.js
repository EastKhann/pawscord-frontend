import{r as s,d as e,aF as o,bK as $,B as j,bS as F}from"./react-core-DrOm_csO.js";function L({apiBaseUrl:d,fetchWithAuth:i}){const[u,f]=s.useState([]),[C,y]=s.useState(""),[E,p]=s.useState({}),[n,S]=s.useState(null),[m,c]=s.useState(null),[N,b]=s.useState([]),[g,r]=s.useState(!1);s.useEffect(()=>{x(),v()},[]);const x=async()=>{r(!0);try{const a=await i(`${d}/commands/list/`);if(a.ok){const t=await a.json();f(t.commands||[])}}catch(a){console.error("Error loading commands:",a)}finally{r(!1)}},v=async()=>{try{const a=await i(`${d}/commands/history/`);if(a.ok){const t=await a.json();b(t.history||[])}}catch(a){console.error("Error loading history:",a)}},k=async a=>{r(!0),c(null);try{const t=await i(`${d}/commands/${a.name}/execute/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({args:E})});if(t.ok){const l=await t.json();c({success:!0,output:l.output||"Command executed successfully!"}),v()}else{const l=await t.json();c({success:!1,output:l.error||"Command failed"})}}catch(t){c({success:!1,output:"Network error: "+t.message})}finally{r(!1)}},w=a=>{S(a),y(`/${a.name}`),p({}),c(null)},h=a=>({utility:"#5865f2",moderation:"#f04747",fun:"#43b581",info:"#faa61a",admin:"#7289da"})[a]||"#72767d";return e.createElement("div",{className:"slash-commands-panel"},e.createElement("div",{className:"commands-header"},e.createElement("h2",null,e.createElement(o,null)," Slash Commands")),e.createElement("div",{className:"command-executor"},e.createElement("div",{className:"executor-input"},e.createElement(o,{className:"terminal-icon"}),e.createElement("input",{type:"text",placeholder:"Type / to see available commands...",value:C,onChange:a=>y(a.target.value),className:"command-input"}),n&&e.createElement("button",{className:"execute-btn",onClick:()=>k(n),disabled:g},e.createElement($,null)," Execute")),m&&e.createElement("div",{className:`command-result ${m.success?"success":"error"}`},e.createElement("div",{className:"result-header"},m.success?"✅ Success":"❌ Error"),e.createElement("div",{className:"result-output"},m.output))),n&&n.parameters&&e.createElement("div",{className:"command-params"},e.createElement("h3",null,"Parameters:"),n.parameters.map((a,t)=>e.createElement("div",{key:t,className:"param-input"},e.createElement("label",null,a.name," ",a.required&&e.createElement("span",{className:"required"},"*")),e.createElement("input",{type:a.type==="number"?"number":"text",placeholder:a.description,value:E[a.name]||"",onChange:l=>p({...E,[a.name]:l.target.value}),className:"param-field"})))),e.createElement("div",{className:"commands-list"},e.createElement("h3",null,e.createElement(j,null)," Available Commands (",u.length,")"),g&&u.length===0?e.createElement("div",{className:"loading"},"Loading commands..."):e.createElement("div",{className:"commands-grid"},u.map((a,t)=>e.createElement("div",{key:t,className:`command-card ${n?.name===a.name?"selected":""}`,onClick:()=>w(a),style:{borderLeftColor:h(a.category)}},e.createElement("div",{className:"command-header"},e.createElement("div",{className:"command-name"},"/",a.name),e.createElement("div",{className:"command-category",style:{background:h(a.category)}},a.category)),e.createElement("div",{className:"command-description"},a.description),a.usage&&e.createElement("div",{className:"command-usage"},e.createElement("code",null,a.usage)))))),e.createElement("div",{className:"command-history"},e.createElement("h3",null,e.createElement(F,null)," Command History"),N.length===0?e.createElement("div",{className:"empty-history"},e.createElement(o,{className:"empty-icon"}),e.createElement("p",null,"No commands executed yet")):e.createElement("div",{className:"history-list"},N.slice(0,10).map((a,t)=>e.createElement("div",{key:t,className:`history-item ${a.success?"success":"error"}`},e.createElement("div",{className:"history-command"},e.createElement(o,null)," /",a.command),e.createElement("div",{className:"history-time"},new Date(a.executed_at).toLocaleString()))))))}export{L as default};
