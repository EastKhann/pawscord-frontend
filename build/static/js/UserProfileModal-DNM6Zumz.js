var ne=Object.defineProperty;var c=(t,r)=>ne(t,"name",{value:r,configurable:!0});import{r as n,j as e,f as se}from"./react-core-Djgtqrmb.js";import{ah as re,Q as ie,aI as le,P as F,a9 as de,ad as ce,aq as pe,af as xe,aJ as $,z as ue}from"./icons-vendor-BW7dxHkX.js";import me from"./SessionManagerModal-CY1iJqn0.js";import L from"./UserNotesModal-C-hHIe0M.js";import{t as S,c as ge}from"./index-BRQzOq3v.js";import"./media-vendor-CxFPycob.js";import"./router-vendor-gmJ9Mn-1.js";import"./state-vendor-BRqaXHJQ.js";import"./crypto-vendor-D1XRGppi.js";import"./ui-vendor-IhB9Znpc.js";const fe=c(({achievement:t,size:r="medium"})=>{const u={trophy:F,medal:le,star:ie,crown:re}[t.icon_type]||F,m={small:{width:"30px",height:"30px",fontSize:"14px"},medium:{width:"50px",height:"50px",fontSize:"24px"},large:{width:"70px",height:"70px",fontSize:"32px"}};return e.jsxs("div",{style:{...m[r],backgroundColor:t.color||"#5865f2",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",position:"relative",cursor:"pointer"},title:`${t.name}: ${t.description}`,children:[e.jsx(u,{}),t.is_new&&e.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",width:"12px",height:"12px",backgroundColor:"#f04747",borderRadius:"50%",border:"2px solid #2b2d31"}})]})},"AchievementBadge"),be=c(({username:t,fetchWithAuth:r,apiBaseUrl:x})=>{const[u,m]=n.useState([]),[p,l]=n.useState([]),[w,T]=n.useState(!0);n.useEffect(()=>{g()},[t]);const g=c(async()=>{try{const[i,f]=await Promise.all([r(`${x}/api/user/achievements/`),r(`${x}/api/user/badges/`)]);if(i.ok){const k=await i.json();m(k.achievements||[])}if(f.ok){const k=await f.json();l(k.badges||[])}}catch{}finally{T(!1)}},"loadAchievements");return w?e.jsx("div",{style:{color:"#949ba4",fontSize:"0.9em"},children:"YÃ¼kleniyor..."}):u.length===0&&p.length===0?e.jsx("div",{style:{color:"#949ba4",fontSize:"0.9em"},children:"HenÃ¼z baÅŸarÄ± kazanÄ±lmadÄ±"}):e.jsxs("div",{style:{marginTop:"15px"},children:[u.length>0&&e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsxs("h4",{style:{color:"#949ba4",fontSize:"0.85em",marginBottom:"10px",textTransform:"uppercase"},children:["ðŸ† BaÅŸarÄ±lar (",u.length,")"]}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:u.slice(0,10).map(i=>e.jsx(fe,{achievement:i,size:"medium"},i.id))})]}),p.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{style:{color:"#949ba4",fontSize:"0.85em",marginBottom:"10px",textTransform:"uppercase"},children:["ðŸŽ–ï¸ Rozetler (",p.length,")"]}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:p.map(i=>e.jsxs("div",{style:{padding:"5px 12px",backgroundColor:i.color||"#5865f2",borderRadius:"12px",color:"white",fontSize:"0.8em",fontWeight:"bold",display:"flex",alignItems:"center",gap:"5px"},title:i.description,children:[i.emoji&&e.jsx("span",{children:i.emoji}),i.name]},i.id))})]})]})},"AchievementsPanel"),o={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(8px)"},modal:{width:"500px",maxWidth:"90vw",backgroundColor:"#2f3136",borderRadius:"16px",boxShadow:"0 25px 50px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",maxHeight:"90vh",border:"1px solid rgba(255, 255, 255, 0.1)"},actionButton:{padding:"12px 20px",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",transition:"all 0.2s",cursor:"pointer"},messageButton:{padding:"12px 20px",backgroundColor:"#5865f2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"0.9em"},content:{padding:"20px",maxHeight:"60vh",overflowY:"auto"},friendCodeContainer:{backgroundColor:"rgba(88, 101, 242, 0.1)",padding:"10px 15px",borderRadius:"8px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",border:"1px dashed #5865f2",marginBottom:"15px",transition:"background-color 0.2s"},friendCodeLabel:{fontSize:"0.75em",color:"#949ba4",textTransform:"uppercase",fontWeight:"bold",marginBottom:"4px"},friendCodeValue:{fontSize:"1.3em",color:"#5865f2",fontWeight:"800",letterSpacing:"2px"},section:{marginTop:"20px"},sectionTitle:{color:"var(--text-secondary)",fontSize:"0.8em",fontWeight:"bold",textTransform:"uppercase",margin:"0 0 8px 0",borderBottom:"1px solid var(--border-primary)",paddingBottom:"5px"},statusText:{color:"var(--text-primary)",margin:0,fontSize:"0.9em"},linksContainer:{display:"flex",flexDirection:"column",gap:"8px"},linkButton:{display:"flex",alignItems:"center",padding:"10px 12px",backgroundColor:"var(--background-secondary)",borderRadius:"4px",color:"var(--text-primary)",textDecoration:"none",transition:"background-color 0.2s ease",border:"none",fontFamily:"inherit",fontSize:"1em",width:"auto",cursor:"pointer",textAlign:"left",alignSelf:"flex-start"},linkText:{marginLeft:"10px",fontWeight:"500"},tabsContainer:{display:"flex",gap:"10px",borderBottom:"2px solid var(--background-tertiary)",marginBottom:"20px"},tabButton:{background:"none",border:"none",padding:"10px 20px",color:"var(--text-secondary)",cursor:"pointer",fontWeight:"500",borderBottom:"2px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"5px"},activeTab:{color:"var(--brand-color)",borderBottomColor:"var(--brand-color)"},presenceTimeline:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"15px"},presenceEntry:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",backgroundColor:"var(--background-secondary)",borderRadius:"6px",transition:"background-color 0.2s"},presenceStatus:{width:"12px",height:"12px",borderRadius:"50%",flexShrink:0},presenceDetails:{display:"flex",flexDirection:"column",gap:"4px",flex:1},presenceStatusText:{color:"var(--text-primary)",fontWeight:"500",fontSize:"0.95em"},presenceTime:{color:"var(--text-secondary)",fontSize:"0.85em"},noDataText:{color:"var(--text-secondary)",textAlign:"center",padding:"20px",fontStyle:"italic"}},he=c(t=>t.includes("steam")?"fab fa-steam":t.includes("x")?"fab fa-twitter":t.includes("instagram")?"fab fa-instagram":"fa fa-link","getIconForLink"),ye=c((t,r)=>!t||t.trim()===""?"#":t.startsWith("http://")||t.startsWith("https://")?t:r==="x"?`https://x.com/${t.replace("@","")}`:r==="instagram"?`https://instagram.com/${t.replace("@","")}`:`https://${t}`,"formatUrl"),ve={steam_trade:"Steam Trade URL",steam_profile:"Steam Profili",steam_friend_code:"Steam ArkadaÅŸ Kodu",x:"X (Twitter)",instagram:"Instagram"},ke=c(({user:t,fetchWithAuth:r,apiBaseUrl:x,currentUser:u,friendsList:m})=>{const[p,l]=n.useState("idle"),[w,T]=n.useState(!1),[g,i]=n.useState(!1),[f,k]=n.useState("profile"),[C,y]=n.useState([]);n.useEffect(()=>{f==="activity"&&t?.username&&c(async()=>{try{const d=await r(`${x}/presence/${t.username}/`);if(d.ok){const h=await d.json();y(h.presence||[])}}catch{y([])}},"fetchPresenceHistory")()},[f,t?.username,r,x]);const b=m&&Array.isArray(m)&&m.some(s=>typeof s=="string"?s===t?.username:s.username===t?.username||s.sender_username===t?.username||s.receiver_username===t?.username),z=t?.username===u,M=c(async()=>{l("loading");try{(await r(`${x}/friends/send/`,{method:"POST",body:JSON.stringify({username:t.username})})).ok?l("success"):(S.error("âŒ Ä°stek gÃ¶nderilemedi. Zaten ekli veya bekliyor olabilir."),l("idle"))}catch{l("idle")}},"handleAddFriend"),v=c((s,d)=>{try{navigator.clipboard.writeText(s),S.success(`âœ… '${d}' panoya kopyalandÄ±`)}catch{S.error("âŒ Kopyalama hatasÄ±.")}},"copyToClipboard"),R=c(async()=>{const s=prompt(`Ne kadar Coin gÃ¶ndermek istiyorsun? (${t.username} kiÅŸisine)`);if(s)try{const d=await r(`${x}/store/transfer/`,{method:"POST",body:JSON.stringify({target_username:t.username,amount:s})}),h=await d.json();d.ok?S.success(h.message):S.error(h.error)}catch{S.error("âŒ Hata.")}},"handleSendMoney"),B=t?.social_links||{},I=Object.entries(B).filter(([,s])=>s&&s.trim()!=="");return{requestStatus:p,showSessionManager:w,setShowSessionManager:T,showNotes:g,setShowNotes:i,activeTab:f,setActiveTab:k,presenceHistory:C,isFriend:b,isSelf:z,handleAddFriend:M,copyToClipboard:v,handleSendMoney:R,validLinks:I}},"useProfileModal"),Ce=c(({user:t,onClose:r,onStartDM:x,onImageClick:u,getDeterministicAvatar:m,fetchWithAuth:p,apiBaseUrl:l,currentUser:w,friendsList:T})=>{const{requestStatus:g,showSessionManager:i,setShowSessionManager:f,showNotes:k,setShowNotes:C,activeTab:y,setActiveTab:b,presenceHistory:z,isFriend:M,isSelf:v,handleAddFriend:R,copyToClipboard:B,handleSendMoney:I,validLinks:s}=ke({user:t,fetchWithAuth:p,apiBaseUrl:l,currentUser:w,friendsList:T});if(!t)return null;const d=t.avatar||m(t.username),h=typeof d=="string"&&d.startsWith("http")?d:typeof d=="string"?`${l}${d}`:m(t.username),P=h+(t.avatar&&typeof t.avatar=="string"?`?t=${Date.now()}`:""),{overlayProps:E,dialogProps:D}=ge({onClose:r,label:`${t.username} profili`}),A=n.useCallback(a=>a.currentTarget.style.transform="scale(1.05)",[]),O=n.useCallback(a=>a.currentTarget.style.transform="scale(1)",[]),H=n.useCallback(()=>u(h),[u,h]),W=n.useCallback(a=>{a.preventDefault(),a.stopPropagation(),r()},[r]),K=n.useCallback(a=>{a.currentTarget.style.background="rgba(240, 71, 71, 0.8)",a.currentTarget.style.transform="scale(1.1)"},[]),q=n.useCallback(a=>{a.currentTarget.style.background="rgba(0, 0, 0, 0.6)",a.currentTarget.style.transform="scale(1)"},[]),Y=n.useCallback(()=>f(!0),[f]),G=n.useCallback(()=>x(t?.username),[x,t?.username]),J=n.useCallback(()=>C(!0),[C]),U=n.useCallback(a=>a.currentTarget.style.background="rgba(88, 101, 242, 0.2)",[]),V=n.useCallback(a=>a.currentTarget.style.background="rgba(88, 101, 242, 0.1)",[]),Z=n.useCallback(()=>b("profile"),[b]),Q=n.useCallback(()=>b("activity"),[b]),X=n.useCallback(()=>b("notes"),[b]),ee=n.useCallback(()=>b("profile"),[b]),te=n.useCallback(()=>C(!1),[C]),oe=n.useCallback(()=>f(!1),[f]),ae=e.jsxs("div",{style:{...o.overlay,zIndex:9999},...E,children:[e.jsxs("div",{style:{...o.modal,zIndex:1e4,position:"relative"},...D,children:[e.jsxs("div",{style:{position:"relative",height:"180px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"16px 16px 0 0",overflow:"visible"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='rgba(255,255,255,0.1)' d='M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"bottom",backgroundSize:"cover",opacity:.3,zIndex:1,borderRadius:"16px 16px 0 0",overflow:"hidden"}}),e.jsx("div",{style:{position:"absolute",bottom:"-50px",left:"32px",width:"120px",height:"120px",borderRadius:"50%",border:"5px solid #2f3136",overflow:"hidden",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.3)",cursor:"pointer",transition:"transform 0.3s ease",zIndex:1e3,backgroundColor:"#2f3136"},onMouseEnter:A,onMouseLeave:O,onClick:H,children:e.jsx("img",{src:P,style:{width:"100%",height:"100%",objectFit:"cover"},alt:`${t.username} avatar`,onError:c(a=>{a.target.src=m(t.username)},"onError")},h)}),e.jsx("div",{style:{position:"absolute",top:"16px",right:"16px",display:"flex",gap:"8px",zIndex:1e3},children:e.jsx("button",{onClick:W,style:{width:"36px",height:"36px",borderRadius:"50%",border:"2px solid rgba(255, 255, 255, 0.3)",background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",zIndex:1001},onMouseEnter:K,onMouseLeave:q,children:"Ã—"})})]}),e.jsxs("div",{style:{padding:"70px 32px 24px 32px",background:"#2f3136"},children:[e.jsxs("h2",{style:{fontSize:"28px",fontWeight:"700",margin:"0 0 12px 0",color:"#fff",display:"flex",alignItems:"center",gap:"8px"},children:[t.username,t.is_premium&&e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ’Ž"}),t.is_verified&&e.jsx("span",{style:{fontSize:"20px"},children:"âœ…"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[!M&&!v&&e.jsxs("button",{onClick:R,style:{...o.actionButton,backgroundColor:g==="success"?"#43b581":"#5865f2",cursor:g==="success"||g==="loading"?"default":"pointer",flex:1},disabled:g!=="idle",children:[g==="loading"?"...":g==="success"?e.jsx(de,{}):e.jsx(ce,{}),g==="success"?" GÃ¶nderildi":" ArkadaÅŸ Ekle"]}),!v&&e.jsxs("button",{onClick:I,style:{...o.actionButton,backgroundColor:"#f0b232",flex:1},children:[e.jsx(pe,{})," Coin GÃ¶nder"]}),v&&e.jsxs("button",{onClick:Y,style:{...o.actionButton,backgroundColor:"#43b581",flex:1},title:"Aktif OturumlarÄ± YÃ¶net",children:[e.jsx(xe,{})," Oturumlar"]}),!v&&e.jsx("button",{onClick:G,style:{...o.messageButton,flex:1},children:"ðŸ’¬ Mesaj GÃ¶nder"}),!v&&e.jsx("button",{onClick:J,style:{...o.actionButton,backgroundColor:"#faa61a",flex:0,minWidth:"44px"},title:"KullanÄ±cÄ± Notu",children:e.jsx($,{})})]})]}),e.jsxs("div",{style:{...o.content,padding:"24px 32px",overflowY:"auto"},children:[t.friend_code&&e.jsxs("div",{onClick:c(()=>B(t.friend_code,"ArkadaÅŸ Kodu"),"onClick"),style:{...o.friendCodeContainer,background:"rgba(88, 101, 242, 0.1)",border:"1px solid rgba(88, 101, 242, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:U,onMouseLeave:V,title:"Kodu Kopyalamak Ä°Ã§in TÄ±kla",children:[e.jsx("span",{style:o.friendCodeLabel,children:"ArkadaÅŸ Kodu"}),e.jsx("span",{style:o.friendCodeValue,children:t.friend_code})]}),t.status_message&&e.jsxs("div",{style:o.section,children:[e.jsx("h4",{style:o.sectionTitle,children:"Durum"}),e.jsx("p",{style:o.statusText,children:t.status_message})]}),e.jsxs("div",{style:o.tabsContainer,children:[e.jsx("button",{onClick:Z,style:{...o.tabButton,...y==="profile"&&o.activeTab},children:"Profile"}),e.jsxs("button",{onClick:Q,style:{...o.tabButton,...y==="activity"&&o.activeTab},children:[e.jsx(ue,{})," Activity"]}),!v&&e.jsxs("button",{onClick:X,style:{...o.tabButton,...y==="notes"&&o.activeTab},children:[e.jsx($,{})," Notes"]})]}),y==="profile"&&e.jsxs(e.Fragment,{children:[e.jsx(be,{username:t.username,fetchWithAuth:p,apiBaseUrl:l}),s.length>0&&e.jsxs("div",{style:o.section,children:[e.jsx("h4",{style:o.sectionTitle,children:"BaÄŸlantÄ±lar"}),e.jsx("div",{style:o.linksContainer,children:s.map(([a,j])=>{const N=ve[a]||a.charAt(0).toUpperCase()+a.slice(1),_=he(a);return a==="steam_friend_code"||a==="steam_trade"?e.jsxs("button",{onClick:c(()=>B(j,N),"onClick"),style:o.linkButton,title:`Kopyala: ${j}`,children:[e.jsx("i",{className:_}),e.jsx("span",{style:o.linkText,children:N}),e.jsx("i",{className:"fa fa-copy",style:{marginLeft:"auto",color:"var(--text-secondary)"}})]},a):e.jsxs("a",{href:ye(j,a),target:"_blank",rel:"noopener noreferrer",style:o.linkButton,title:j,children:[e.jsx("i",{className:_}),e.jsx("span",{style:o.linkText,children:N})]},a)})})]})]}),y==="activity"&&e.jsxs("div",{style:o.section,children:[e.jsx("h4",{style:o.sectionTitle,children:"Activity Timeline"}),z.length===0?e.jsx("p",{style:o.noDataText,children:"No activity data available"}):e.jsx("div",{style:o.presenceTimeline,children:z.map((a,j)=>e.jsxs("div",{style:o.presenceEntry,children:[e.jsx("div",{style:{...o.presenceStatus,backgroundColor:a.status==="online"?"#43b581":a.status==="idle"?"#faa61a":a.status==="dnd"?"#f04747":"#747f8d"}}),e.jsxs("div",{style:o.presenceDetails,children:[e.jsx("span",{style:o.presenceStatusText,children:a.status==="online"?"ðŸŸ¢ Online":a.status==="idle"?"ðŸŸ¡ Idle":a.status==="dnd"?"ðŸ”´ Do Not Disturb":"âš« Offline"}),e.jsx("span",{style:o.presenceTime,children:new Date(a.timestamp).toLocaleString("tr-TR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]},j))})]})]})]}),y==="notes"&&!v&&e.jsx("div",{style:{padding:"0 32px 24px"},children:e.jsx(L,{targetUser:t.username,apiBaseUrl:l?l.replace(/\/api\/?$/,"")+"/api":"",fetchWithAuth:p,onClose:ee,inline:!0})}),k&&e.jsx(L,{targetUser:t.username,apiBaseUrl:l?l.replace(/\/api\/?$/,"")+"/api":"",fetchWithAuth:p,onClose:te}),i&&e.jsx(me,{onClose:oe,fetchWithAuth:p,apiBaseUrl:l})]});return se.createPortal(ae,document.body)},"UserProfileModal"),$e=n.memo(Ce);export{$e as default};
