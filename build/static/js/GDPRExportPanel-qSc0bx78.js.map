{"version":3,"file":"GDPRExportPanel-qSc0bx78.js","sources":["../../../src/components/GDPRExportPanel.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { FaTimes, FaDownload, FaFileArchive, FaClock, FaCheckCircle, FaExclamationCircle } from 'react-icons/fa';\nimport { toast } from '../utils/toast';\n\nconst GDPRExportPanel = ({ fetchWithAuth, apiBaseUrl, onClose }) => {\n    const [exports, setExports] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [requesting, setRequesting] = useState(false);\n\n    useEffect(() => {\n        fetchExports();\n    }, []);\n\n    const fetchExports = async () => {\n        setLoading(true);\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/gdpr/exports/`);\n            const data = await response.json();\n            setExports(data.exports || []);\n        } catch (error) {\n            toast.error('Failed to load exports');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const requestExport = async () => {\n        setRequesting(true);\n        try {\n            await fetchWithAuth(`${apiBaseUrl}/gdpr/request-export/`, {\n                method: 'POST'\n            });\n\n            toast.success('Export requested. You will be notified when it\\'s ready (usually within 24 hours)');\n            fetchExports();\n        } catch (error) {\n            toast.error('Failed to request export');\n        } finally {\n            setRequesting(false);\n        }\n    };\n\n    const downloadExport = async (exportId) => {\n        try {\n            const response = await fetchWithAuth(`${apiBaseUrl}/gdpr/exports/${exportId}/download/`);\n            const blob = await response.blob();\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `pawscord_data_export_${exportId}.zip`;\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n            toast.success('Export downloaded');\n        } catch (error) {\n            toast.error('Failed to download export');\n        }\n    };\n\n    const getStatusIcon = (status) => {\n        switch (status) {\n            case 'completed':\n                return <FaCheckCircle style={{ color: '#43b581' }} />;\n            case 'failed':\n                return <FaExclamationCircle style={{ color: '#f04747' }} />;\n            default:\n                return <FaClock style={{ color: '#faa61a' }} />;\n        }\n    };\n\n    const getStatusText = (status) => {\n        switch (status) {\n            case 'pending':\n                return 'Processing...';\n            case 'completed':\n                return 'Ready to Download';\n            case 'failed':\n                return 'Failed';\n            default:\n                return status;\n        }\n    };\n\n    return (\n        <div style={styles.overlay}>\n            <div style={styles.modal}>\n                <div style={styles.header}>\n                    <div style={styles.headerLeft}>\n                        <FaFileArchive style={{ marginRight: '10px', color: '#5865f2' }} />\n                        <h2 style={styles.title}>GDPR Data Export</h2>\n                    </div>\n                    <button onClick={onClose} style={styles.closeButton}>\n                        <FaTimes />\n                    </button>\n                </div>\n\n                <div style={styles.info}>\n                    <p style={styles.infoText}>\n                        Request a complete archive of your data. This includes messages, media, profile information, and activity logs.\n                        Exports are usually ready within 24 hours.\n                    </p>\n                    <button onClick={requestExport} disabled={requesting} style={styles.requestButton}>\n                        {requesting ? 'Requesting...' : 'Request New Export'}\n                    </button>\n                </div>\n\n                <div style={styles.content}>\n                    {loading ? (\n                        <div style={styles.loading}>Loading exports...</div>\n                    ) : exports.length === 0 ? (\n                        <div style={styles.empty}>\n                            <FaFileArchive style={{ fontSize: '48px', color: '#2c2f33', marginBottom: '16px' }} />\n                            <div>No exports yet</div>\n                            <div style={styles.emptySubtext}>Request your first data export above</div>\n                        </div>\n                    ) : (\n                        <div style={styles.exportsList}>\n                            {exports.map((exp, idx) => (\n                                <div key={idx} style={styles.exportCard}>\n                                    <div style={styles.exportIcon}>\n                                        {getStatusIcon(exp.status)}\n                                    </div>\n                                    <div style={styles.exportInfo}>\n                                        <div style={styles.exportStatus}>\n                                            {getStatusText(exp.status)}\n                                        </div>\n                                        <div style={styles.exportMeta}>\n                                            Requested: {new Date(exp.created_at).toLocaleString()}\n                                        </div>\n                                        {exp.completed_at && (\n                                            <div style={styles.exportMeta}>\n                                                Completed: {new Date(exp.completed_at).toLocaleString()}\n                                            </div>\n                                        )}\n                                        {exp.file_size && (\n                                            <div style={styles.exportMeta}>\n                                                Size: {(exp.file_size / 1024 / 1024).toFixed(2)} MB\n                                            </div>\n                                        )}\n                                        {exp.expires_at && (\n                                            <div style={styles.exportMeta}>\n                                                Expires: {new Date(exp.expires_at).toLocaleDateString()}\n                                            </div>\n                                        )}\n                                    </div>\n                                    {exp.status === 'completed' && (\n                                        <button\n                                            onClick={() => downloadExport(exp.id)}\n                                            style={styles.downloadButton}\n                                            title=\"Download\"\n                                        >\n                                            <FaDownload style={{ marginRight: '6px' }} />\n                                            Download\n                                        </button>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 999999,\n    },\n    modal: {\n        backgroundColor: '#1e1e1e',\n        borderRadius: '8px',\n        width: '90%',\n        maxWidth: '700px',\n        maxHeight: '90vh',\n        display: 'flex',\n        flexDirection: 'column',\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4)',\n    },\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '20px',\n        borderBottom: '1px solid #2c2f33',\n    },\n    headerLeft: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    title: {\n        margin: 0,\n        fontSize: '20px',\n        color: '#ffffff',\n    },\n    closeButton: {\n        background: 'none',\n        border: 'none',\n        color: '#99aab5',\n        cursor: 'pointer',\n        fontSize: '20px',\n        padding: '5px',\n    },\n    info: {\n        padding: '20px',\n        borderBottom: '1px solid #2c2f33',\n    },\n    infoText: {\n        fontSize: '14px',\n        color: '#dcddde',\n        lineHeight: '1.6',\n        margin: '0 0 16px 0',\n    },\n    requestButton: {\n        padding: '10px 20px',\n        backgroundColor: '#5865f2',\n        border: 'none',\n        borderRadius: '4px',\n        color: '#ffffff',\n        cursor: 'pointer',\n        fontSize: '14px',\n        fontWeight: '600',\n        width: '100%',\n    },\n    content: {\n        padding: '20px',\n        overflowY: 'auto',\n        flex: 1,\n    },\n    loading: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '40px',\n    },\n    empty: {\n        textAlign: 'center',\n        color: '#99aab5',\n        padding: '60px 20px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    emptySubtext: {\n        fontSize: '13px',\n        marginTop: '8px',\n    },\n    exportsList: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '12px',\n    },\n    exportCard: {\n        backgroundColor: '#2c2f33',\n        borderRadius: '8px',\n        padding: '16px',\n        display: 'flex',\n        gap: '16px',\n        alignItems: 'flex-start',\n    },\n    exportIcon: {\n        fontSize: '24px',\n        minWidth: '30px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    exportInfo: {\n        flex: 1,\n    },\n    exportStatus: {\n        fontSize: '16px',\n        fontWeight: '600',\n        color: '#ffffff',\n        marginBottom: '6px',\n    },\n    exportMeta: {\n        fontSize: '13px',\n        color: '#99aab5',\n        marginTop: '4px',\n    },\n    downloadButton: {\n        padding: '8px 16px',\n        backgroundColor: '#43b581',\n        border: 'none',\n        borderRadius: '4px',\n        color: '#ffffff',\n        cursor: 'pointer',\n        fontSize: '13px',\n        fontWeight: '500',\n        display: 'flex',\n        alignItems: 'center',\n    },\n};\n\nexport default GDPRExportPanel;\n"],"names":["exports","useState","useEffect","jsx","jsxs"],"mappings":"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"}