var N=Object.defineProperty;var n=(m,g)=>N(m,"name",{value:g,configurable:!0});import{r as d,f as U,j as t}from"./react-core-Djgtqrmb.js";import{C as D,ac as A,K as w,ay as y,au as z,b9 as T}from"./icons-vendor-BW7dxHkX.js";const L=n(({x:m,y:g,user:c,currentUser:M,onClose:l,onAction:v,voiceChannels:h=[],isAdmin:b=!1,isInVoiceRoom:p=!1,friendsList:f=[],conversationId:P=null})=>{const x=d.useRef(null),[E,j]=d.useState(!1),[o,u]=d.useState(0),_=f&&f.length>0&&f.some(e=>{const s=e.username||e.sender_username||e.receiver_username||e.display_name||e.friend?.username,i=c.username||c.display_name;return s===i&&s!==M.username}),r=d.useCallback((e,s=null)=>{v(e,c,s),l()},[v,c,l]);d.useEffect(()=>{const e=n(i=>{x.current&&!x.current.contains(i.target)&&l()},"handleClickOutside"),s=n(i=>{i.key==="Escape"?l():i.key==="ArrowDown"?(i.preventDefault(),u(k=>Math.min(k+1,K()-1))):i.key==="ArrowUp"?(i.preventDefault(),u(k=>Math.max(k-1,0))):(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),S())},"handleKeyDown");return document.addEventListener("mousedown",e),document.addEventListener("keydown",s),x.current&&x.current.focus(),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",s)}},[l]);const K=n(()=>{let e=2;return p&&(e+=1),b&&p&&(e+=3),e},"getMenuItemCount"),S=n(()=>{const e=["profile","message"];p&&e.push("volume"),b&&p&&e.push("move","kick","server_mute"),e[o]&&r(e[o])},"triggerFocusedAction"),C=Math.min(m,window.innerWidth-220),F=Math.min(g,window.innerHeight-300),I=document.getElementById("portal-root");return I?U.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:2147483646,background:"transparent",pointerEvents:"auto"},onClick:l}),t.jsxs("div",{ref:x,role:"menu","aria-label":`${c} için eylemler`,tabIndex:-1,style:{...a.menu,left:`${C}px`,top:`${F}px`,zIndex:2147483647,position:"fixed",pointerEvents:"auto"},children:[t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...a.menuItem,background:o===0?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>r("profile"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("profile"))},"onKeyDown"),onMouseEnter:n(()=>u(0),"onMouseEnter"),children:[t.jsx(D,{})," Profili Görüntüle"]}),t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...a.menuItem,background:o===1?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>r("message"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("message"))},"onKeyDown"),onMouseEnter:n(()=>u(1),"onMouseEnter"),children:[t.jsx(A,{})," Mesaj Gönder"]}),t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...a.menuItem,background:o===2?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>r("invite_to_server"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("invite_to_server"))},"onKeyDown"),onMouseEnter:n(()=>u(2),"onMouseEnter"),children:[t.jsx(w,{})," Sunucuya Davet Et"]}),_?t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...a.menuItemDanger,background:o===3?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:n(()=>r("remove_friend"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("remove_friend"))},"onKeyDown"),onMouseEnter:n(()=>u(3),"onMouseEnter"),children:[t.jsx(y,{})," Arkadaşlıktan Çıkar"]}):t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...a.menuItem,background:o===3?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>r("add_friend"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("add_friend"))},"onKeyDown"),onMouseEnter:n(()=>u(3),"onMouseEnter"),children:[t.jsx(D,{})," Arkadaş Ekle"]}),t.jsx("div",{role:"separator",style:a.separator}),t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...a.menuItem,background:o===4?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>r("mute_user"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("mute_user"))},"onKeyDown"),onMouseEnter:n(()=>u(4),"onMouseEnter"),children:[t.jsx(z,{})," Sessize Al"]}),t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...a.menuItemDanger,background:o===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:n(()=>r("block_user"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("block_user"))},"onKeyDown"),onMouseEnter:n(()=>u(5),"onMouseEnter"),children:[t.jsx(y,{})," Kullanıcıyı Engelle"]}),b&&p&&t.jsxs(t.Fragment,{children:[t.jsx("div",{role:"separator",style:a.separator}),t.jsx("div",{style:a.sectionTitle,"aria-label":"Moderasyon seçenekleri",children:"Moderasyon"}),t.jsxs("div",{role:"menuitem",tabIndex:0,"aria-haspopup":"true","aria-expanded":E,className:"user-context-menu-item",style:{...a.menuItem,background:o===4?"rgba(88, 101, 242, 0.2)":"transparent"},onMouseEnter:n(()=>{j(!0),u(4)},"onMouseEnter"),onMouseLeave:n(()=>j(!1),"onMouseLeave"),children:[t.jsx(w,{})," Kanala Taşı",E&&h.length>0&&t.jsx("div",{role:"menu","aria-label":"Hedef kanallar",style:a.submenu,children:h.map(e=>t.jsx("div",{role:"menuitem",tabIndex:0,className:"user-context-submenu-item",style:a.submenuItem,onClick:n(s=>{s.stopPropagation(),r("move",e.slug)},"onClick"),onKeyDown:n(s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),s.stopPropagation(),r("move",e.slug))},"onKeyDown"),children:e.name},e.slug))})]}),t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item-danger",style:{...a.menuItemDanger,background:o===5?"rgba(237, 66, 69, 0.15)":"transparent"},onClick:n(()=>r("kick"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("kick"))},"onKeyDown"),onMouseEnter:n(()=>u(5),"onMouseEnter"),children:[t.jsx(y,{})," Kanaldan At"]}),t.jsxs("div",{role:"menuitem",tabIndex:0,className:"user-context-menu-item",style:{...a.menuItem,background:o===6?"rgba(88, 101, 242, 0.2)":"transparent"},onClick:n(()=>r("server_mute"),"onClick"),onKeyDown:n(e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),r("server_mute"))},"onKeyDown"),onMouseEnter:n(()=>u(6),"onMouseEnter"),children:[t.jsx(T,{})," Mikrofonu Kapat (Server)"]})]})]})]}),I):null},"UserContextMenu"),a={menu:{background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"200px",padding:"6px 0",color:"#dbdee1",fontSize:"14px",border:"1px solid #1e1f22"},menuItem:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",position:"relative"},menuItemDanger:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",transition:"background 0.1s",color:"#ed4245",position:"relative"},separator:{height:"1px",background:"#1e1f22",margin:"6px 0"},sectionTitle:{fontSize:"11px",textTransform:"uppercase",color:"#72767d",padding:"6px 12px 4px",fontWeight:"600"},submenu:{position:"absolute",left:"100%",top:0,background:"#2b2d31",borderRadius:"4px",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",minWidth:"180px",padding:"6px 0",border:"1px solid #1e1f22",marginLeft:"4px"},submenuItem:{padding:"8px 12px",cursor:"pointer",transition:"background 0.1s"}};if(!document.getElementById("user-context-menu-styles")){const m=document.createElement("style");m.id="user-context-menu-styles",m.textContent=`
        .user-context-menu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        .user-context-menu-item-danger:hover {
            background: rgba(237, 66, 69, 0.2) !important;
        }
        .user-context-submenu-item:hover {
            background: rgba(88, 101, 242, 0.3) !important;
        }
        
        /* ✨ Keyboard Navigation Focus Styles */
        .user-context-menu-item:focus,
        .user-context-menu-item-danger:focus,
        .user-context-submenu-item:focus {
            outline: 2px solid rgba(88, 101, 242, 0.8);
            outline-offset: -2px;
        }
        
        /* ✨ Menu Container Focus */
        [role="menu"]:focus {
            outline: none;
        }
        
        /* ✨ Smooth Transitions */
        .user-context-menu-item,
        .user-context-menu-item-danger,
        .user-context-submenu-item {
            transition: background 0.15s ease, outline 0.15s ease;
        }
    `,document.head.appendChild(m)}const B=d.memo(L);export{B as default};
